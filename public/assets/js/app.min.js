/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)
},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0,a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;b.axis!==void 0&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);b.wheelDeltaY!==void 0&&(g=b.wheelDeltaY/120);b.wheelDeltaX!==void 0&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=
d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,false);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.2.0",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),d[e](null==f[b]?this.options[b]:f[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.2.0",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.2.0",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=a(document).height(),d=this.$target.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=b-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:b-this.$element.height()-h}))}}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},d.offsetBottom&&(d.offset.bottom=d.offsetBottom),d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,
width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},
keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,
openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,
isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,
c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&
k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||
b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=
setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;
d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=
a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),
b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),
y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;
if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&
(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,
{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,
mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=
!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");
"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=
this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);
f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,
e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,
outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case "inline":case "ajax":case "html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case "image":e=a.tpl.image.replace("{href}",
g);break;case "swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":
"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?
h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||
h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&
"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();
y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&
!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),
b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=
a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):
(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===
f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,
{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=
b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=
f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?
b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),
p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===
f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=
b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case "inside":c=b.skin;break;case "outside":c=b.wrap;break;case "over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,
e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+
":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===
d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);
/*
 AngularJS v1.3.0-beta.16
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(P,W,t){'use strict';function O(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.0-beta.16/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function bb(b){if(null==b||La(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:G(b)||M(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function q(b,a,c){var d,e;if(b)if(A(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(M(b)||bb(b))for(d=0,e=b.length;d<e;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==q)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function $b(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}
function hd(b,a,c){for(var d=$b(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function ac(b){return function(a,c){b(c,a)}}function id(){return++cb}function bc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function E(b){var a=b.$$hashKey;q(arguments,function(a){a!==b&&q(a,function(a,c){b[c]=a})});bc(b,a);return b}function U(b){return parseInt(b,10)}function cc(b,a){return E(new (E(function(){},{prototype:b})),a)}function B(){}function Ba(b){return b}function ba(b){return function(){return b}}function F(b){return"undefined"===
typeof b}function v(b){return"undefined"!==typeof b}function Q(b){return null!=b&&"object"===typeof b}function G(b){return"string"===typeof b}function Ca(b){return"number"===typeof b}function da(b){return"[object Date]"===ya.call(b)}function A(b){return"function"===typeof b}function db(b){return"[object RegExp]"===ya.call(b)}function La(b){return b&&b.window===b}function jd(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function kd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=
!0;return a}function ld(b,a,c){var d=[];q(b,function(b,f,h){d.push(a.call(c,b,f,h))});return d}function Ma(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Da(b,a){var c=Ma(b,a);0<=c&&b.splice(c,1);return a}function Ea(b,a,c,d){if(La(b)||b&&b.$evalAsync&&b.$watch)throw Na("cpws");if(a){if(b===a)throw Na("cpi");c=c||[];d=d||[];if(Q(b)){var e=Ma(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(M(b))for(var f=a.length=0;f<b.length;f++)e=Ea(b[f],
null,c,d),Q(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var h=a.$$hashKey;q(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=Ea(b[f],null,c,d),Q(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);bc(a,h)}}else if(a=b)M(b)?a=Ea(b,[],c,d):da(b)?a=new Date(b.getTime()):db(b)?a=RegExp(b.source):Q(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Ea(b,e,c,d));return a}function ja(b,a){var c=0;if(M(b))for(a=a||[];c<b.length;c++)a[c]=b[c];else if(Q(b)){a=a||{};for(var d=Object.keys(b),e=d.length;c<
e;c++){var f=d[c];if("$"!==f.charAt(0)||"$"!==f.charAt(1))a[f]=b[f]}}return a||b}function ra(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(M(b)){if(!M(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ra(b[d],a[d]))return!1;return!0}}else{if(da(b))return da(a)&&b.getTime()==a.getTime();if(db(b)&&db(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||La(b)||La(a)||M(a))return!1;
c={};for(d in b)if("$"!==d.charAt(0)&&!A(b[d])){if(!ra(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!A(a[d]))return!1;return!0}return!1}function Cb(b,a){var c=2<arguments.length?ka.call(arguments,2):[];return!A(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(ka.call(arguments,0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function md(b,a){var c=a;"string"===typeof b&&"$"===
b.charAt(0)&&"$"===b.charAt(1)?c=t:La(a)?c="$WINDOW":a&&W===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function sa(b,a){return"undefined"===typeof b?t:JSON.stringify(b,md,a?"  ":null)}function dc(b){return G(b)?JSON.parse(b):b}function ga(b){b=z(b).clone();try{b.empty()}catch(a){}var c=z("<div>").append(b).html();try{return 3===b[0].nodeType?J(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+J(b)})}catch(d){return J(c)}}function ec(b){try{return decodeURIComponent(b)}catch(a){}}
function fc(b){var a={},c,d;q((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=ec(c[0]),v(d)&&(b=v(c[1])?ec(c[1]):!0,Db.call(a,d)?M(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Eb(b){var a=[];q(b,function(b,d){M(b)?q(b,function(b){a.push(za(d,!0)+(!0===b?"":"="+za(b,!0)))}):a.push(za(d,!0)+(!0===b?"":"="+za(b,!0)))});return a.length?a.join("&"):""}function eb(b){return za(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function za(b,a){return encodeURIComponent(b).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function nd(b,a){var c,d,e=fb.length;b=z(b);for(d=0;d<e;++d)if(c=fb[d]+a,G(c=b.attr(c)))return c;return null}function od(b,a){var c,d,e={};q(fb,function(a){a+="app";!c&&(b.hasAttribute&&b.hasAttribute(a))&&(c=b,d=b.getAttribute(a))});q(fb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))});c&&(e.strictDi=null!==nd(c,"strict-di"),a(c,d?[d]:[],e))}
function gc(b,a,c){Q(c)||(c={});c=E({strictDi:!1},c);var d=function(){b=z(b);if(b.injector()){var d=b[0]===W?"document":ga(b);throw Na("btstrpd",d);}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");d=Fb(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return d},e=/^NG_DEFER_BOOTSTRAP!/;if(P&&!e.test(P.name))return d();P.name=P.name.replace(e,"");Oa.resumeBootstrap=
function(b){q(b,function(b){a.push(b)});d()}}function gb(b,a){a=a||"_";return b.replace(pd,function(b,d){return(d?a:"")+b.toLowerCase()})}function qd(){var b;(ta=P.jQuery)&&ta.fn.on?(z=ta,E(ta.fn,{scope:Fa.scope,isolateScope:Fa.isolateScope,controller:Fa.controller,injector:Fa.injector,inheritedData:Fa.inheritedData}),b=ta.cleanData,b=b.$$original||b,ta.cleanData=function(a){for(var c=0,d;null!=(d=a[c]);c++)ta(d).triggerHandler("$destroy");b(a)},ta.cleanData.$$original=b):z=V;Oa.element=z}function Gb(b,
a,c){if(!b)throw Na("areq",a||"?",c||"required");return b}function Pa(b,a,c){c&&M(b)&&(b=b[b.length-1]);Gb(A(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Aa(b,a){if("hasOwnProperty"===b)throw Na("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,h=0;h<f;h++)d=a[h],b&&(b=(e=b)[d]);return!c&&A(b)?Cb(e,b):b}function hb(b){var a=b[0];b=b[b.length-1];if(a===b)return z(a);var c=[a];do{a=a.nextSibling;if(!a)break;
c.push(a)}while(a!==b);return z(c)}function rd(b){var a=O("$injector"),c=O("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||O;return b.module||(b.module=function(){var b={};return function(e,f,h){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e,f){f||(f=c);return function(){f[e||"push"]([a,d,arguments]);return k}}if(!f)throw a("nomod",e);var c=[],d=[],m=[],p=b("$injector","invoke","push",d),k={_invokeQueue:c,
_configBlocks:d,_runBlocks:m,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:p,run:function(a){m.push(a);return this}};h&&p(h);return k}())}}())}function sd(b){E(b,{bootstrap:gc,copy:Ea,
extend:E,equals:ra,element:z,forEach:q,injector:Fb,noop:B,bind:Cb,toJson:sa,fromJson:dc,identity:Ba,isUndefined:F,isDefined:v,isString:G,isFunction:A,isObject:Q,isNumber:Ca,isElement:jd,isArray:M,version:td,isDate:da,lowercase:J,uppercase:ib,callbacks:{counter:0},$$minErr:O,$$csp:Qa});Ra=rd(P);try{Ra("ngLocale")}catch(a){Ra("ngLocale",[]).provider("$locale",ud)}Ra("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:vd});a.provider("$compile",ic).directive({a:wd,input:jc,textarea:jc,
form:xd,script:yd,select:zd,style:Ad,option:Bd,ngBind:Cd,ngBindHtml:Dd,ngBindTemplate:Ed,ngClass:Fd,ngClassEven:Gd,ngClassOdd:Hd,ngCloak:Id,ngController:Jd,ngForm:Kd,ngHide:Ld,ngIf:Md,ngInclude:Nd,ngInit:Od,ngNonBindable:Pd,ngPluralize:Qd,ngRepeat:Rd,ngShow:Sd,ngStyle:Td,ngSwitch:Ud,ngSwitchWhen:Vd,ngSwitchDefault:Wd,ngOptions:Xd,ngTransclude:Yd,ngModel:Zd,ngList:$d,ngChange:ae,pattern:kc,ngPattern:kc,required:lc,ngRequired:lc,minlength:mc,ngMinlength:mc,maxlength:nc,ngMaxlength:nc,ngValue:be,ngModelOptions:ce}).directive({ngInclude:de}).directive(jb).directive(oc);
a.provider({$anchorScroll:ee,$animate:fe,$browser:ge,$cacheFactory:he,$controller:ie,$document:je,$exceptionHandler:ke,$filter:pc,$interpolate:le,$interval:me,$http:ne,$httpBackend:oe,$location:pe,$log:qe,$parse:re,$rootScope:se,$q:te,$$q:ue,$sce:ve,$sceDelegate:we,$sniffer:xe,$templateCache:ye,$timeout:ze,$window:Ae,$$rAF:Be,$$asyncCallback:Ce})}])}function Sa(b){return b.replace(De,function(a,b,d,e){return e?d.toUpperCase():d}).replace(Ee,"Moz$1")}function Fe(b,a){var c,d,e=a.createDocumentFragment(),
f=[];if(Hb.test(b)){c=c||e.appendChild(a.createElement("div"));d=(Ge.exec(b)||["",""])[1].toLowerCase();d=ea[d]||ea._default;c.innerHTML=d[1]+b.replace(He,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=f.concat(ka.call(c.childNodes,void 0));c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function V(b){if(b instanceof V)return b;G(b)&&(b=Z(b));if(!(this instanceof V)){if(G(b)&&"<"!=b.charAt(0))throw Ib("nosel");
return new V(b)}if(G(b)){var a;a=W;var c;b=(c=Ie.exec(b))?[a.createElement(c[1])]:(c=Fe(b,a))?c.childNodes:[]}qc(this,b)}function Jb(b){return b.cloneNode(!0)}function kb(b,a){a||lb(b);if(b.childNodes&&b.childNodes.length)for(var c=b.getElementsByTagName?b.getElementsByTagName("*"):b.querySelectorAll?b.querySelectorAll("*"):[],d=0,e=c.length;d<e;d++)lb(c[d])}function rc(b,a,c,d){if(v(d))throw Ib("offargs");var e=la(b,"events");la(b,"handle")&&(F(a)?q(e,function(a,c){Ta(b,c,a);delete e[c]}):q(a.split(" "),
function(a){F(c)?(Ta(b,a,e[a]),delete e[a]):Da(e[a]||[],c)}))}function lb(b,a){var c=b.ng339,d=Ua[c];d&&(a?delete Ua[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),rc(b)),delete Ua[c],b.ng339=t))}function la(b,a,c){var d=b.ng339,d=Ua[d||-1];if(v(c))d||(b.ng339=d=++Je,d=Ua[d]={}),d[a]=c;else return d&&d[a]}function Kb(b,a,c){if(!b.nodeType||1===b.nodeType||9===b.nodeType){var d=la(b,"data"),e=v(c),f=!e&&v(a),h=f&&!Q(a);d||h||la(b,"data",d={});if(e)d[a]=c;else if(f){if(h)return d&&
d[a];E(d,a)}else return d}}function Lb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function mb(b,a){a&&b.setAttribute&&q(a.split(" "),function(a){b.setAttribute("class",Z((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Z(a)+" "," ")))})}function nb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(a.split(" "),function(a){a=Z(a);-1===c.indexOf(" "+a+" ")&&
(c+=a+" ")});b.setAttribute("class",Z(c))}}function qc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;"number"===typeof c&&a.window!==a?c&&(a.item&&(a=ka.call(a)),sc.apply(b,a)):b[b.length++]=a}}function tc(b,a){return ob(b,"$"+(a||"ngController")+"Controller")}function ob(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=M(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=z.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function uc(b){for(kb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}
function vc(b,a){var c=pb[a.toLowerCase()];return c&&wc[ma(b)]&&c}function Ke(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&xc[a]}function Le(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||W);if(F(c.defaultPrevented)){var f=c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=
function(){return c.defaultPrevented||!1===c.returnValue};var h=ja(a[e||c.type]||[]);q(h,function(a){a.call(b,c)});8>=T?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ga(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||id)()):d=b;return c+":"+d}function Va(b,a){if(a){var c=0;this.nextUid=
function(){return++c}}q(b,this.put,this)}function Me(b){return(b=b.toString().replace(yc,"").match(zc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Mb(b,a,c){var d;if("function"===typeof b){if(!(d=b.$inject)){d=[];if(b.length){if(a)throw G(c)&&c||(c=b.name||Me(b)),Ha("strictdi",c);a=b.toString().replace(yc,"");a=a.match(zc);q(a[1].split(Ne),function(a){a.replace(Oe,function(a,b,c){d.push(c)})})}b.$inject=d}}else M(b)?(a=b.length-1,Pa(b[a],"fn"),d=b.slice(0,a)):Pa(b,"fn",!0);
return d}function Fb(b,a){function c(a){return function(b,c){if(Q(b))q(b,ac(a));else return a(b,c)}}function d(a,b){Aa(a,"service");if(A(b)||M(b))b=k.instantiate(b);if(!b.$get)throw Ha("pget",a);return p[a+n]=b}function e(a,b){return d(a,{$get:b})}function f(a){var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=k.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{G(a)?(c=Ra(a),b=b.concat(f(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):
A(a)?b.push(k.invoke(a)):M(a)?b.push(k.invoke(a)):Pa(a,"module")}catch(e){throw M(a)&&(a=a[a.length-1]),e.message&&(e.stack&&-1==e.stack.indexOf(e.message))&&(e=e.message+"\n"+e.stack),Ha("modulerr",a,e.stack||e.message||e);}}});return b}function h(b,c){function d(a){if(b.hasOwnProperty(a)){if(b[a]===g)throw Ha("cdep",a+" <- "+l.join(" <- "));return b[a]}try{return l.unshift(a),b[a]=g,b[a]=c(a)}catch(e){throw b[a]===g&&delete b[a],e;}finally{l.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=
f,f=null);var h=[];g=Mb(b,a,g);var n,l,k;l=0;for(n=g.length;l<n;l++){k=g[l];if("string"!==typeof k)throw Ha("itkn",k);h.push(f&&f.hasOwnProperty(k)?f[k]:d(k))}M(b)&&(b=b[n]);return b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=function(){};d.prototype=(M(a)?a[a.length-1]:a).prototype;d=new d;a=e(a,d,b,c);return Q(a)||A(a)?a:d},get:d,annotate:Mb,has:function(a){return p.hasOwnProperty(a+n)||b.hasOwnProperty(a)}}}a=!0===a;var g={},n="Provider",l=[],m=new Va([],!0),p={$provide:{provider:c(d),
factory:c(e),service:c(function(a,b){return e(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return e(a,ba(b))}),constant:c(function(a,b){Aa(a,"constant");p[a]=b;s[a]=b}),decorator:function(a,b){var c=k.get(a+n),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},k=p.$injector=h(p,function(){throw Ha("unpr",l.join(" <- "));},a),s={},r=s.$injector=h(s,function(a){var b=k.get(a+n);return r.invoke(b.$get,b,t,a)},a);q(f(b),function(a){r.invoke(a||
B)});return r}function ee(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;q(a,function(a){b||"a"!==ma(a)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=h.getElementById(b))?d.scrollIntoView():(d=e(h.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function Ce(){this.$get=
["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function Pe(b,a,c,d){function e(a){try{a.apply(null,ka.call(arguments,1))}finally{if(r--,0===r)for(;L.length;)try{L.pop()()}catch(b){c.error(b)}}}function f(a,b){(function qb(){q(u,function(a){a()});K=b(qb,a)})()}function h(){y=null;w!=g.url()&&(w=g.url(),q(Y,function(a){a(g.url())}))}var g=this,n=a[0],l=b.location,m=b.history,p=b.setTimeout,k=b.clearTimeout,s={};g.isMock=!1;var r=0,L=[];
g.$$completeOutstandingRequest=e;g.$$incOutstandingRequestCount=function(){r++};g.notifyWhenNoOutstandingRequests=function(a){q(u,function(a){a()});0===r?a():L.push(a)};var u=[],K;g.addPollFn=function(a){F(K)&&f(100,p);u.push(a);return a};var w=l.href,x=a.find("base"),y=null;g.url=function(a,c){l!==b.location&&(l=b.location);m!==b.history&&(m=b.history);if(a){if(w!=a)return w=a,d.history?c?m.replaceState(null,"",a):(m.pushState(null,"",a),x.attr("href",x.attr("href"))):(y=a,c?l.replace(a):l.href=
a),g}else return y||l.href.replace(/%27/g,"'")};var Y=[],N=!1;g.onUrlChange=function(a){if(!N){if(d.history)z(b).on("popstate",h);if(d.hashchange)z(b).on("hashchange",h);else g.addPollFn(h);N=!0}Y.push(a);return a};g.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var R={},H="",C=g.baseHref();g.cookies=function(a,b){var d,e,f,g;if(a)b===t?n.cookie=encodeURIComponent(a)+"=;path="+C+";expires=Thu, 01 Jan 1970 00:00:00 GMT":G(b)&&(d=(n.cookie=encodeURIComponent(a)+
"="+encodeURIComponent(b)+";path="+C).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(n.cookie!==H)for(H=n.cookie,d=H.split("; "),R={},f=0;f<d.length;f++)e=d[f],g=e.indexOf("="),0<g&&(a=decodeURIComponent(e.substring(0,g)),R[a]===t&&(R[a]=decodeURIComponent(e.substring(g+1))));return R}};g.defer=function(a,b){var c;r++;c=p(function(){delete s[c];e(a)},b||0);s[c]=!0;return c};g.defer.cancel=function(a){return s[a]?(delete s[a],
k(a),e(B),!0):!1}}function ge(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new Pe(b,d,a,c)}]}function he(){this.$get=function(){function b(b,d){function e(a){a!=p&&(k?k==a&&(k=a.n):k=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw O("$cacheFactory")("iid",b);var h=0,g=E({},d,{id:b}),n={},l=d&&d.capacity||Number.MAX_VALUE,m={},p=null,k=null;return a[b]={put:function(a,b){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});
e(c)}if(!F(b))return a in n||h++,n[a]=b,h>l&&this.remove(k.key),b},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return n[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b==p&&(p=b.p);b==k&&(k=b.n);f(b.n,b.p);delete m[a]}delete n[a];h--},removeAll:function(){n={};h=0;m={};p=k=null},destroy:function(){m=g=n=null;delete a[b]},info:function(){return E({},g,{size:h})}}}var a={};b.info=function(){var b={};q(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};
return b}}function ye(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,h=kd("ngSrc,ngSrcset,src,srcset"),g=/^(on[a-z]+|formaction)$/;this.directive=function l(a,e){Aa(a,"directive");G(a)?(Gb(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];q(c[a],function(c,f){try{var g=b.invoke(c);A(g)?g={compile:ba(g)}:
!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(h){d(h)}});return e}])),c[a].push(e)):q(a,ac(l));return this};this.aHrefSanitizationWhitelist=function(b){return v(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return v(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=
["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,p,k,s,r,L,u,K,w,x,y){function Y(a,b,c,d,e){a instanceof z||(a=z(a));q(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=z(b).wrap("<span></span>").parent()[0])});var f=R(a,b,a,c,d,e);N(a,"ng-scope");return function(b,c,d,e){Gb(b,"scope");var g=c?Fa.clone.call(a):a;q(d,function(a,b){g.data("$"+b+"Controller",a)});g.data("$scope",
b);c&&c(g,b);f&&f(b,g,g,e);return g}}function N(a,b){try{a.addClass(b)}catch(c){}}function R(a,b,c,d,e,f){function g(a,c,d,e){var f,l,k,m,p,s,u;f=c.length;var r=Array(f);for(m=0;m<f;m++)r[m]=c[m];s=m=0;for(p=h.length;m<p;s++)l=r[s],c=h[m++],f=h[m++],c?(c.scope?(k=a.$new(),z.data(l,"$scope",k)):k=a,u=c.transcludeOnThisElement?H(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?H(a,b):null,c(f,k,l,d,u)):f&&f(a,l.childNodes,t,e)}for(var h=[],l,k,m,p,s=0;s<a.length;s++)l=new Nb,k=C(a[s],[],l,0===
s?d:t,e),(f=k.length?ca(k,a[s],l,b,c,null,[],[],f):null)&&f.scope&&N(l.$$element,"ng-scope"),l=f&&f.terminal||!(m=a[s].childNodes)||!m.length?null:R(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),h.push(f,l),p=p||f||l,f=null;return p?g:null}function H(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function C(b,g,h,k,m){var p=h.$attr,s;switch(b.nodeType){case 1:v(g,oa(ma(b)),
"E",k,m);for(var u,r,K,L=b.attributes,x=0,w=L&&L.length;x<w;x++){var y=!1,N=!1;u=L[x];if(!T||8<=T||u.specified){s=u.name;u=Z(u.value);r=oa(s);if(K=ua.test(r))s=gb(r.substr(6),"-");var q=r.replace(/(Start|End)$/,""),H;a:{var D=q;if(c.hasOwnProperty(D)){H=void 0;for(var D=a.get(D+d),X=0,C=D.length;X<C;X++)if(H=D[X],H.multiElement){H=!0;break a}}H=!1}H&&r===q+"Start"&&(y=s,N=s.substr(0,s.length-5)+"end",s=s.substr(0,s.length-6));r=oa(s.toLowerCase());p[r]=s;if(K||!h.hasOwnProperty(r))h[r]=u,vc(b,r)&&
(h[r]=!0);S(b,g,u,r);v(g,r,"A",k,m,y,N)}}b=b.className;if(G(b)&&""!==b)for(;s=f.exec(b);)r=oa(s[2]),v(g,r,"C",k,m)&&(h[r]=Z(s[3])),b=b.substr(s.index+s[0].length);break;case 3:O(g,b.nodeValue);break;case 8:try{if(s=e.exec(b.nodeValue))r=oa(s[1]),v(g,r,"M",k,m)&&(h[r]=Z(s[2]))}catch(R){}}g.sort(F);return g}function D(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ha("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<
e)}else d.push(a);return z(d)}function X(a,b,c){return function(d,e,f,g,h){e=D(e[0],b,c);return a(d,e,f,g,h)}}function ca(a,c,d,e,f,g,h,l,k){function s(a,b,c,d){if(a){c&&(a=X(a,c,d));a.require=I.require;a.directiveName=na;if(H===I||I.$$isolateScope)a=Cc(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=X(b,c,d));b.require=I.require;b.directiveName=na;if(H===I||I.$$isolateScope)b=Cc(b,{isolateScope:!0});l.push(b)}}function u(a,b,c,d){var e,f="data",g=!1;if(G(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),
"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ha("ctreq",b,a);}else M(b)&&(e=[],q(b,function(b){e.push(u(a,b,c,d))}));return e}function K(a,e,f,g,k){function s(a,b){var c;2>arguments.length&&(b=a,a=t);F&&(c=ca);return k(a,b,c)}var x,w,Bc,D,X,C,ca={},Y;x=c===f?d:ja(d,new Nb(z(f),d.$attr));w=x.$$element;if(H){var v=/^\s*([@=&])(\??)\s*(\w*)\s*$/;C=e.$new(!0);!R||R!==H&&R!==H.$$originalDirective?w.data("$isolateScopeNoTemplate",C):
w.data("$isolateScope",C);N(w,"ng-isolate-scope");q(H.scope,function(a,c){var d=a.match(v)||[],f=d[3]||c,g="?"==d[2],d=d[1],h,k,l,s;C.$$isolateBindings[c]=d+f;switch(d){case "@":x.$observe(f,function(a){C[c]=a});x.$$observers[f].$$scope=e;x[f]&&(C[c]=b(x[f])(e));break;case "=":if(g&&!x[f])break;k=r(x[f]);s=k.literal?ra:function(a,b){return a===b};l=k.assign||function(){h=C[c]=k(e);throw ha("nonassign",x[f],H.name);};h=C[c]=k(e);g=e.$watch(r(x[f],function(a){s(a,C[c])||(s(a,h)?l(e,a=C[c]):C[c]=a);
return h=a}),null,k.literal);C.$on("$destroy",g);break;case "&":k=r(x[f]);C[c]=function(a){return k(e,a)};break;default:throw ha("iscp",H.name,c,a);}})}Y=k&&s;y&&q(y,function(a){var b={$scope:a===H||a.$$isolateScope?C:e,$element:w,$attrs:x,$transclude:Y},c;X=a.controller;"@"==X&&(X=x[a.name]);c=L(X,b);ca[a.name]=c;F||w.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(Bc=h.length;g<Bc;g++)try{D=h[g],D(D.isolateScope?C:e,w,x,D.require&&u(D.directiveName,D.require,
w,ca),Y)}catch(Qe){p(Qe,ga(w))}g=e;H&&(H.template||null===H.templateUrl)&&(g=C);a&&a(g,f.childNodes,t,k);for(g=l.length-1;0<=g;g--)try{D=l[g],D(D.isolateScope?C:e,w,x,D.require&&u(D.directiveName,D.require,w,ca),Y)}catch(S){p(S,ga(w))}}k=k||{};for(var x=-Number.MAX_VALUE,w,y=k.controllerDirectives,H=k.newIsolateScopeDirective,R=k.templateDirective,ca=k.nonTlbTranscludeDirective,v=!1,Wa=!1,F=k.hasElementTranscludeDirective,E=d.$$element=z(c),I,na,S,O=e,J,P=0,ua=a.length;P<ua;P++){I=a[P];var T=I.$$start,
U=I.$$end;T&&(E=D(c,T,U));S=t;if(x>I.priority)break;if(S=I.scope)I.templateUrl||(Q(S)?(Ia("new/isolated scope",H||w,I,E),H=I):Ia("new/isolated scope",H,I,E)),w=w||I;na=I.name;!I.templateUrl&&I.controller&&(S=I.controller,y=y||{},Ia("'"+na+"' controller",y[na],I,E),y[na]=I);if(S=I.transclude)v=!0,I.$$tlb||(Ia("transclusion",ca,I,E),ca=I),"element"==S?(F=!0,x=I.priority,S=E,E=d.$$element=z(W.createComment(" "+na+": "+d[na]+" ")),c=E[0],rb(f,ka.call(S,0),c),O=Y(S,e,x,g&&g.name,{nonTlbTranscludeDirective:ca})):
(S=z(Jb(c)).contents(),E.empty(),O=Y(S,e));if(I.template)if(Wa=!0,Ia("template",R,I,E),R=I,S=A(I.template)?I.template(E,d):I.template,S=Dc(S),I.replace){g=I;S=Hb.test(S)?z(V(I.type,Z(S))):[];c=S[0];if(1!=S.length||1!==c.nodeType)throw ha("tplrt",na,"");rb(f,E,c);ua={$attr:{}};S=C(c,[],ua);var Se=a.splice(P+1,a.length-(P+1));H&&qb(S);a=a.concat(S).concat(Se);Ac(d,ua);ua=a.length}else E.html(S);if(I.templateUrl)Wa=!0,Ia("template",R,I,E),R=I,I.replace&&(g=I),K=B(a.splice(P,a.length-P),E,d,f,v&&O,h,
l,{controllerDirectives:y,newIsolateScopeDirective:H,templateDirective:R,nonTlbTranscludeDirective:ca}),ua=a.length;else if(I.compile)try{J=I.compile(E,d,O),A(J)?s(null,J,T,U):J&&s(J.pre,J.post,T,U)}catch(Re){p(Re,ga(E))}I.terminal&&(K.terminal=!0,x=Math.max(x,I.priority))}K.scope=w&&!0===w.scope;K.transcludeOnThisElement=v;K.templateOnThisElement=Wa;K.transclude=O;k.hasElementTranscludeDirective=F;return K}function qb(a){for(var b=0,c=a.length;b<c;b++)a[b]=cc(a[b],{$$isolateScope:!0})}function v(b,
e,f,g,h,k,m){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var s;e=a.get(e+d);for(var u=0,r=e.length;u<r;u++)try{s=e[u],(g===t||g>s.priority)&&-1!=s.restrict.indexOf(f)&&(k&&(s=cc(s,{$$start:k,$$end:m})),b.push(s),h=s)}catch(K){p(K)}}return h}function Ac(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;q(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,f){"class"==f?(N(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==
f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function B(a,b,c,d,e,f,g,h){var l=[],m,p,u=b[0],r=a.shift(),K=E({},r,{templateUrl:null,transclude:null,replace:null,$$originalDirective:r}),x=A(r.templateUrl)?r.templateUrl(b,c):r.templateUrl,L=r.type;b.empty();k.get(w.getTrustedResourceUrl(x),{cache:s}).success(function(k){var s,w;k=Dc(k);if(r.replace){k=Hb.test(k)?z(V(L,Z(k))):[];s=k[0];if(1!=k.length||1!==s.nodeType)throw ha("tplrt",
r.name,x);k={$attr:{}};rb(d,b,s);var y=C(s,[],k);Q(r.scope)&&qb(y);a=y.concat(a);Ac(c,k)}else s=u,b.html(k);a.unshift(K);m=ca(a,s,c,e,b,r,f,g,h);q(d,function(a,c){a==s&&(d[c]=b[0])});for(p=R(b[0].childNodes,e);l.length;){k=l.shift();w=l.shift();var D=l.shift(),X=l.shift(),y=b[0];if(w!==u){var Y=w.className;h.hasElementTranscludeDirective&&r.replace||(y=Jb(s));rb(D,z(w),y);N(z(y),Y)}w=m.transcludeOnThisElement?H(k,m.transclude,X):X;m(p,k,y,d,w)}l=null}).error(function(a,b,c,d){throw ha("tpload",d.url);
});return function(a,b,c,d,e){a=e;l?(l.push(b),l.push(c),l.push(d),l.push(a)):(m.transcludeOnThisElement&&(a=H(b,m.transclude,e)),m(p,b,c,d,a))}}function F(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Ia(a,b,c,d){if(b)throw ha("multidir",b.name,c.name,a,ga(d));}function O(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&N(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||
[];f.push(d);e.data("$binding",f);b||N(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function V(a,b){a=J(a||"html");switch(a){case "svg":case "math":var c=W.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function Wa(a,b){if("srcdoc"==b)return w.HTML;var c=ma(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return w.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"select"===
ma(a))throw ha("selmulti",ga(a));c.push({priority:100,compile:function(){return{pre:function(c,d,k){d=k.$$observers||(k.$$observers={});if(g.test(e))throw ha("nodomevents");if(f=b(k[e],!0,Wa(a,e),h[e]))k[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(k.$$observers&&k.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?k.$updateClass(a,b):k.$set(e,a)})}}}})}}function rb(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<
k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=W.createDocumentFragment();a.appendChild(d);c[z.expando]=d[z.expando];d=1;for(e=b.length;d<e;d++)f=b[d],z(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function Cc(a,b){return E(function(){return a.apply(null,arguments)},a,b)}var Nb=function(a,b){this.$$element=a;this.$attr=b||{}};Nb.prototype={$normalize:oa,$addClass:function(a){a&&0<a.length&&x.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&x.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Ec(a,b),d=Ec(b,a);0===c.length?x.removeClass(this.$$element,d):0===d.length?x.addClass(this.$$element,c):x.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=this.$$element[0],f=vc(e,a),g=Ke(e,a),e=a;f?(this.$$element.prop(a,b),d=f):g&&(this[g]=b,e=g);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=gb(a,"-"));f=ma(this.$$element);if("a"===f&&"href"===a||"img"===f&&"src"===a)this[a]=b=y(b,"src"===a);
!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):this.$$element.attr(d,b));(a=this.$$observers)&&q(a[e],function(a){try{a(b)}catch(c){p(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);u.$evalAsync(function(){e.$$inter||b(c[a])});return function(){Da(e,b)}}};var P=b.startSymbol(),U=b.endSymbol(),Dc="{{"==P||"}}"==U?Ba:function(a){return a.replace(/\{\{/g,P).replace(/}}/g,U)},ua=/^ngAttr[A-Z]/;return Y}]}function oa(b){return Sa(b.replace(Te,
""))}function Ec(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var h=d[f],g=0;g<e.length;g++)if(h==e[g])continue a;c+=(0<c.length?" ":"")+h}return c}function ie(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){Aa(a,"controller");Q(a)?E(b,a):b[a]=c};this.allowGlobals=function(){a=!0};this.$get=["$injector","$window",function(d,e){return function(f,h){var g,n,l;G(f)&&(g=f.match(c),n=g[1],l=g[3],f=b.hasOwnProperty(n)?b[n]:hc(h.$scope,n,!0)||(a?
hc(e,n,!0):t),Pa(f,n,!0));g=d.instantiate(f,h,n);if(l){if(!h||"object"!==typeof h.$scope)throw O("$controller")("noscp",n||f.name,l);h.$scope[l]=g}return g}}]}function je(){this.$get=["$window",function(b){return z(b.document)}]}function ke(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Fc(b){var a={},c,d,e;if(!b)return a;q(b.split("\n"),function(b){e=b.indexOf(":");c=J(Z(b.substr(0,e)));d=Z(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function Gc(b){var a=
Q(b)?b:t;return function(c){a||(a=Fc(b));return c?a[J(c)]||null:a}}function Hc(b,a,c){if(A(c))return c(b,a);q(c,function(c){b=c(b,a)});return b}function ne(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){G(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=dc(d)));return d}],transformRequest:[function(a){return Q(a)&&"[object File]"!==ya.call(a)&&"[object Blob]"!==ya.call(a)?sa(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:ja(d),put:ja(d),patch:ja(d)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,m,p){function k(a){function b(a){var d=E({},a,{data:Hc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:m.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=E({},a.headers),
d,f,b=E({},b.common,b[J(a.method)]);a:for(d in b){a=J(d);for(f in c)if(J(f)===a)continue a;c[d]=b[d]}(function(a){var b;q(a,function(c,d){A(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);E(c,a);c.headers=d;c.method=ib(c.method);var f=[function(a){d=a.headers;var c=Hc(a.data,Gc(d),a.transformRequest);F(c)&&q(d,function(a,b){"content-type"===J(b)&&delete d[b]});F(a.withCredentials)&&!F(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=m.when(c);for(q(u,
function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var h=f.shift(),g=g.then(a,h)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,n){function s(a,b,c,e){C&&(200<=a&&300>a?C.put(X,[a,b,Fc(c),e]):C.remove(X));p(b,a,c,e);d.$$phase||d.$apply()}
function p(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?q.resolve:q.reject)({data:a,status:b,headers:Gc(d),config:c,statusText:e})}function u(){var a=Ma(k.pendingRequests,c);-1!==a&&k.pendingRequests.splice(a,1)}var q=m.defer(),H=q.promise,C,D,X=r(c.url,c.params);k.pendingRequests.push(c);H.then(u,u);(c.cache||e.cache)&&(!1!==c.cache&&"GET"==c.method)&&(C=Q(c.cache)?c.cache:Q(e.cache)?e.cache:L);if(C)if(D=C.get(X),v(D)){if(D.then)return D.then(u,u),D;M(D)?p(D[1],D[0],ja(D[2]),D[3]):p(D,200,{},"OK")}else C.put(X,
H);F(D)&&((D=Ob(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(n[c.xsrfHeaderName||e.xsrfHeaderName]=D),a(c.method,X,f,s,n,c.timeout,c.withCredentials,c.responseType));return H}function r(a,b){if(!b)return a;var c=[];hd(b,function(a,b){null===a||F(a)||(M(a)||(a=[a]),q(a,function(a){Q(a)&&(da(a)?a=a.toISOString():Q(a)&&(a=sa(a)));c.push(za(b)+"="+za(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var L=c("$http"),u=[];q(f,function(a){u.unshift(G(a)?p.get(a):
p.invoke(a))});k.pendingRequests=[];(function(a){q(arguments,function(a){k[a]=function(b,c){return k(E(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){k[a]=function(b,c,d){return k(E(d||{},{method:a,url:b,data:c}))}})})("post","put","patch");k.defaults=e;return k}]}function Ue(b){if(8>=T&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!P.XMLHttpRequest))return new P.ActiveXObject("Microsoft.XMLHTTP");if(P.XMLHttpRequest)return new P.XMLHttpRequest;
throw O("$httpBackend")("noxhr");}function oe(){this.$get=["$browser","$window","$document",function(b,a,c){return Ve(b,Ue,b.defer,a.angular.callbacks,c[0])}]}function Ve(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),h=null;f.type="text/javascript";f.src=a;f.async=!0;h=function(a){Ta(f,"load",h);Ta(f,"error",h);e.body.removeChild(f);f=null;var g=-1,r="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),r=a.type,g="error"===a.type?404:200);c&&c(g,r)};sb(f,"load",h);sb(f,"error",
h);e.body.appendChild(f);return h}var h=-1;return function(e,n,l,m,p,k,s,r){function L(){K=h;x&&x();y&&y.abort()}function u(a,d,e,f,g){N&&c.cancel(N);x=y=null;0===d&&(d=e?200:"file"==va(n).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(B)}var K;b.$$incOutstandingRequestCount();n=n||b.url();if("jsonp"==J(e)){var w="_"+(d.counter++).toString(36);d[w]=function(a){d[w].data=a;d[w].called=!0};var x=f(n.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(a,b){u(m,a,d[w].data,
"",b);d[w]=B})}else{var y=a(e);y.open(e,n,!0);q(p,function(a,b){v(a)&&y.setRequestHeader(b,a)});y.onreadystatechange=function(){if(y&&4==y.readyState){var a=null,b=null,c="";K!==h&&(a=y.getAllResponseHeaders(),b="response"in y?y.response:y.responseText);K===h&&10>T||(c=y.statusText);u(m,K||y.status,b,a,c)}};s&&(y.withCredentials=!0);if(r)try{y.responseType=r}catch(Y){if("json"!==r)throw Y;}y.send(l||null)}if(0<k)var N=c(L,k);else k&&k.then&&k.then(L)}}function le(){var b="{{",a="}}";this.startSymbol=
function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function h(f,h,s,r){function L(a){try{var b;var c=s?e.getTrusted(s,a):e.valueOf(a);if(null==c)b="";else{switch(typeof c){case "string":break;case "number":c=""+c;break;default:c=sa(c)}b=c}return b}catch(g){a=Pb("interr",f,g.toString()),d(a)}}r=!!r;for(var u,K,w=0,x=[],y=[],Y=[],N=f.length,R=!1,H=!1,C=[];w<N;)if(-1!=(u=f.indexOf(b,
w))&&-1!=(K=f.indexOf(a,u+g)))w!==u&&(H=!0),x.push(f.substring(w,u)),w=f.substring(u+g,K),y.push(w),Y.push(c(w,L)),w=K+n,R=!0;else{w!==N&&(H=!0,x.push(f.substring(w)));break}q(x,function(c,d){x[d]=x[d].replace(l,b).replace(m,a)});x.length===y.length&&x.push("");if(s&&R&&(H||1<y.length))throw Pb("noconcat",f);if(!h||R){C.length=x.length+y.length;var D=function(a){for(var b=0,c=y.length;b<c;b++){if(r&&F(a[b]))return;C[2*b]=x[b];C[2*b+1]=a[b]}C[2*c]=x[c];return C.join("")};return E(function(a){var b=
0,c=y.length,e=Array(c);try{for(;b<c;b++)e[b]=Y[b](a);return D(e)}catch(g){a=Pb("interr",f,g.toString()),d(a)}},{exp:f,separators:x,expressions:y,$$watchDelegate:function(a,b,c,d){var e;return a.$watchGroup(Y,function(c,d){var f=D(c);A(b)&&b.call(this,f,c!==d?e:f,a);e=f},c,d)}})}}var g=b.length,n=a.length,l=RegExp(b.replace(/./g,f),"g"),m=RegExp(a.replace(/./g,f),"g");h.startSymbol=function(){return b};h.endSymbol=function(){return a};return h}]}function me(){this.$get=["$rootScope","$window","$q",
"$$q",function(b,a,c,d){function e(e,g,n,l){var m=a.setInterval,p=a.clearInterval,k=0,s=v(l)&&!l,r=(s?d:c).defer(),L=r.promise;n=v(n)?n:0;L.then(null,null,e);L.$$intervalId=m(function(){r.notify(k++);0<n&&k>=n&&(r.resolve(k),p(L.$$intervalId),delete f[L.$$intervalId]);s||b.$apply()},g);f[L.$$intervalId]=r;return L}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1};return e}]}function ud(){this.$get=
function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=eb(b[a]);return b.join("/")}function Ic(b,a,c){b=va(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||We[b.protocol]||null}
function Jc(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=va(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=fc(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function pa(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Xa(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,Xa(b).lastIndexOf("/")+1)}function Kc(b,a){this.$$html5=!0;a=a||
"";var c=Rb(b);Ic(b,this,b);this.$$parse=function(a){var e=pa(c,a);if(!G(e))throw Sb("ipthprfx",a,c);Jc(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Eb(this.$$search),b=this.$$hash?"#"+eb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;if((e=pa(b,d))!==t)return d=e,(e=pa(a,e))!==t?c+(pa("/",e)||e):b+d;if((e=pa(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=
Rb(b);Ic(b,this,b);this.$$parse=function(d){var e=pa(b,d)||pa(c,d),e="#"==e.charAt(0)?pa(a,e):this.$$html5?e:"";if(!G(e))throw Sb("ihshprfx",d,a);Jc(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Eb(this.$$search),e=this.$$hash?"#"+eb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(Xa(b)==
Xa(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==Xa(d))return d;if(e=pa(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Eb(this.$$search),e=this.$$hash?"#"+eb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}function Lc(b,a){return function(c){if(F(c))return this[b];this[b]=a(c);this.$$compose();return this}}function pe(){var b=
"",a=!1;this.hashPrefix=function(a){return v(a)?(b=a,this):b};this.html5Mode=function(b){return v(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function h(a){c.$broadcast("$locationChangeSuccess",g.absUrl(),a)}var g,n,l=d.baseHref(),m=d.url(),p;a?(p=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(l||"/"),n=e.history?Kc:Ub):(p=Xa(m),n=Tb);g=new n(p,"#"+b);g.$$parse(g.$$rewrite(m));f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=
z(a.target);"a"!==ma(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href");Q(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=va(h.animVal).href);if(n===Ub){var k=e.attr("href")||e.attr("xlink:href");if(0>k.indexOf("://"))if(h="#"+b,"/"==k[0])h=p+h+k;else if("#"==k[0])h=p+h+(g.path()||"/")+k;else{for(var l=g.path().split("/"),k=k.split("/"),m=0;m<k.length;m++)"."!=k[m]&&(".."==k[m]?l.pop():k[m].length&&l.push(k[m]));h=p+h+l.join("/")}}l=g.$$rewrite(h);h&&(!e.attr("target")&&l&&
!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(g.$$parse(l),c.$apply(),P.angular["ff-684208-preventDefault"]=!0))}});g.absUrl()!=m&&d.url(g.absUrl(),!0);d.onUrlChange(function(a){g.absUrl()!=a&&(c.$evalAsync(function(){var b=g.absUrl();g.$$parse(a);c.$broadcast("$locationChangeStart",a,b).defaultPrevented?(g.$$parse(b),d.url(b)):h(b)}),c.$$phase||c.$digest())});var k=0;c.$watch(function(){var a=d.url(),b=g.$$replace;k&&a==g.absUrl()||(k++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",
g.absUrl(),a).defaultPrevented?g.$$parse(a):(d.url(g.absUrl(),b),h(a))}));g.$$replace=!1;return k});return g}]}function qe(){var b=!0,a=this;this.debugEnabled=function(a){return v(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||B;a=!1;try{a=!!e.apply}catch(n){}return a?
function(){var a=[];q(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function qa(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw ia("isecfld",a);return b}function Ja(b,a){if(b){if(b.constructor===b)throw ia("isecfn",a);if(b.window===
b)throw ia("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw ia("isecdom",a);if(b===Object)throw ia("isecobj",a);}return b}function ub(b,a,c,d){a=a.split(".");for(var e,f=0;1<a.length;f++){e=qa(a.shift(),d);var h=b[e];h||(h={},b[e]=h);b=h}e=qa(a.shift(),d);Ja(b,d);Ja(b[e],d);return b[e]=c}function Mc(b,a,c,d,e,f){qa(b,f);qa(a,f);qa(c,f);qa(d,f);qa(e,f);return function(f,g){var n=g&&g.hasOwnProperty(b)?g:f;if(null==n)return n;n=n[b];if(!a)return n;if(null==n)return t;n=n[a];
if(!c)return n;if(null==n)return t;n=n[c];if(!d)return n;if(null==n)return t;n=n[d];return e?null==n?t:n=n[e]:n}}function Nc(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length;if(a.csp)a=6>e?Mc(d[0],d[1],d[2],d[3],d[4],c):function(a,b){var f=0,l;do l=Mc(d[f++],d[f++],d[f++],d[f++],d[f++],c)(a,b),b=t,a=l;while(f<e);return l};else{var f="var p;\n";q(d,function(a,b){qa(a,c);f+="if(s == null) return undefined;\ns="+(b?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'});
f+="return s;";a=new Function("s","k",f);a.toString=ba(f)}"hasOwnProperty"!==b&&(Vb[b]=a);return a}function re(){var b={},a={csp:!1};this.$get=["$filter","$sniffer",function(c,d){function e(a,b,c,d,e){var f,h;return f=a.$watch(function(a){return e(a)},function(a,c,d){h=a;A(b)&&b.apply(this,arguments);v(a)&&d.$$postDigest(function(){v(h)&&f()})},c,d)}function f(a,b,c,d,e){var f;return f=a.$watch(function(a){return e(a)},function(a,c,d){A(b)&&b.apply(this,arguments);f()},c,d)}function h(a,b){if(A(b)){var c=
function(c,d){var e=a(c,d),f=b(e,c,d);return v(e)?f:e};c.$$watchDelegate=a.$$watchDelegate;return c}return a}a.csp=d.csp;return function(d,n){var l,m,p=d=Z(d);switch(typeof d){case "string":return b.hasOwnProperty(p)?l=b[p]:(":"===d.charAt(0)&&":"===d.charAt(1)&&(m=!0,d=d.substring(2)),l=new Wb(a),l=(new Ya(l,c,a)).parse(d),l.constant?l.$$watchDelegate=f:m&&(l.$$watchDelegate=e),"hasOwnProperty"!==p&&(b[p]=l)),h(l,n);case "function":return h(d,n);default:return h(B,n)}}}]}function te(){this.$get=
["$rootScope","$exceptionHandler",function(b,a){return Oc(function(a){b.$evalAsync(a)},a)}]}function ue(){this.$get=["$browser","$exceptionHandler",function(b,a){return Oc(function(a){b.defer(a)},a)}]}function Oc(b,a){function c(a){return a}function d(a){return h(a)}var e=function(){var h=[],l,m;return m={resolve:function(a){if(h){var c=h;h=t;l=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],l.then(a[0],a[1],a[2])})}},reject:function(a){m.resolve(g(a))},notify:function(a){if(h){var c=
h;h.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,g){var m=e(),L=function(d){try{m.resolve((A(b)?b:c)(d))}catch(e){m.reject(e),a(e)}},u=function(b){try{m.resolve((A(f)?f:d)(b))}catch(c){m.reject(c),a(c)}},K=function(b){try{m.notify((A(g)?g:c)(b))}catch(d){a(d)}};h?h.push([L,u,K]):l.then(L,u,K);return m.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):d.reject(a);return d.promise}
function d(e,f){var g=null;try{g=(a||c)()}catch(h){return b(h,!1)}return g&&A(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&A(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},h=function(a){var b=e();b.reject(a);return b.promise},g=function(c){return{then:function(f,g){var h=e();b(function(){try{h.resolve((A(g)?g:d)(c))}catch(b){h.reject(b),
a(b)}});return h.promise}}};return{defer:e,reject:h,when:function(g,l,m,p){var k=e(),s,r=function(b){try{return(A(l)?l:c)(b)}catch(d){return a(d),h(d)}},L=function(b){try{return(A(m)?m:d)(b)}catch(c){return a(c),h(c)}},u=function(b){try{return(A(p)?p:c)(b)}catch(d){a(d)}};b(function(){f(g).then(function(a){s||(s=!0,k.resolve(f(a).then(r,L,u)))},function(a){s||(s=!0,k.resolve(L(a)))},function(a){s||k.notify(u(a))})});return k.promise},all:function(a){var b=e(),c=0,d=M(a)?[]:{};q(a,function(a,e){c++;
f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function Be(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=
a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function se(){var b=10,a=O("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,h){function g(){this.$id=++cb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=[];
this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function n(b){if(k.$$phase)throw a("inprog",k.$$phase);k.$$phase=b}function l(a,b){var c=f(a);Pa(c,b);return c}function m(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function p(){}g.prototype={constructor:g,$new:function(a){a?(a=new g,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=++cb;this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d,e){var f=l(a,"watch");if(f.$$watchDelegate)return f.$$watchDelegate(this,
b,d,e,f);var g=this.$$watchers,h={fn:b,last:p,get:f,exp:a,eq:!!d};c=null;A(b)||(h.fn=B);g||(g=this.$$watchers=[]);g.unshift(h);return function(){Da(g,h);c=null;A(e)&&e()}},$watchGroup:function(a,b){var c=Array(a.length),d=Array(a.length),e=[],f=0,g=this,h;if(1===a.length)return this.$watch(a[0],function(a,e,f){d[0]=a;c[0]=e;b.call(this,d,a===e?d:c,f)});q(a,function(a,b){var k=g.$watch(a,function(a,e){d[b]=a;c[b]=e;f++},!1,function(){Da(e,k);e.length||h()});e.push(k)},this);h=g.$watch(function(){return f},
function(a,e){b(d,a===e?d:c,g)});return function(){for(;e.length;)e[0]()}},$watchCollection:function(a,b){var c=this,d,e,g,h=1<b.length,k=0,n=f(a,function(a){d=a;var b,c;if(Q(d))if(bb(d))for(e!==l&&(e=l,q=e.length=0,k++),a=d.length,q!==a&&(k++,e.length=q=a),b=0;b<a;b++)c=e[b]!==e[b]&&d[b]!==d[b],c||e[b]===d[b]||(k++,e[b]=d[b]);else{e!==m&&(e=m={},q=0,k++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(c=e[b]!==e[b]&&d[b]!==d[b],c||e[b]===d[b]||(k++,e[b]=d[b])):(q++,e[b]=d[b],k++));
if(q>a)for(b in k++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(q--,delete e[b])}else e!==d&&(e=d,k++);return k}),l=[],m={},p=!0,q=0;return this.$watch(n,function(){p?(p=!1,b(d,d,c)):b(d,g,c);if(h)if(Q(d))if(bb(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)Db.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,f,g,h,l=this.$$asyncQueue,m=this.$$postDigestQueue,x,q,v=b,N,R=[],H,C,D;n("$digest");c=null;do{q=!1;for(N=this;l.length;){try{D=l.shift(),D.scope.$eval(D.expression)}catch(t){k.$$phase=
null,e(t)}c=null}a:do{if(h=N.$$watchers)for(x=h.length;x--;)try{if(d=h[x])if((f=d.get(N))!==(g=d.last)&&!(d.eq?ra(f,g):"number"===typeof f&&"number"===typeof g&&isNaN(f)&&isNaN(g)))q=!0,c=d,d.last=d.eq?Ea(f,null):f,d.fn(f,g===p?f:g,N),5>v&&(H=4-v,R[H]||(R[H]=[]),C=A(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,C+="; newVal: "+sa(f)+"; oldVal: "+sa(g),R[H].push(C));else if(d===c){q=!1;break a}}catch(E){k.$$phase=null,e(E)}if(!(h=N.$$childHead||N!==this&&N.$$nextSibling))for(;N!==this&&!(h=N.$$nextSibling);)N=
N.$parent}while(N=h);if((q||l.length)&&!v--)throw k.$$phase=null,a("infdig",b,sa(R));}while(q||l.length);for(k.$$phase=null;m.length;)try{m.shift()()}catch(z){e(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==k&&(q(this.$$listenerCount,Cb(null,m,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),
this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=B,this.$on=this.$watch=this.$watchGroup=function(){return B})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){k.$$phase||k.$$asyncQueue.length||h.defer(function(){k.$$asyncQueue.length&&k.$digest()});
this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return n("$apply"),this.$eval(a)}catch(b){e(b)}finally{k.$$phase=null;try{k.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ma(c,b)]=null;m(e,1,a)}},$emit:function(a,
b){var c=[],d,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=[h].concat(ka.call(arguments,1)),n,l;do{d=f.$$listeners[a]||c;h.currentScope=f;n=0;for(l=d.length;n<l;n++)if(d[n])try{d[n].apply(null,k)}catch(m){e(m)}else d.splice(n,1),n--,l--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);h.currentScope=null;return h},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=
!0},defaultPrevented:!1},g=[f].concat(ka.call(arguments,1)),h,k;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(n){e(n)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}f.currentScope=null;return f}};var k=new g;return k}]}function vd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*(https?|ftp|file|blob):|data:image\//;this.aHrefSanitizationWhitelist=
function(a){return v(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return v(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!T||8<=T)if(f=va(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Xe(b){if("self"===b)return b;if(G(b)){if(-1<b.indexOf("***"))throw wa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(db(b))return RegExp("^"+
b.source+"$");throw wa("imatcher");}function Pc(b){var a=[];v(b)&&q(b,function(b){a.push(Xe(b))});return a}function we(){this.SCE_CONTEXTS=fa;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Pc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Pc(b));return a};this.$get=["$injector",function(c){function d(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};
b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw wa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),h={};h[fa.HTML]=d(f);h[fa.CSS]=d(f);h[fa.URL]=d(f);h[fa.JS]=d(f);h[fa.RESOURCE_URL]=d(h[fa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw wa("icontext",a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw wa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===
d||d===t||""===d)return d;var f=h.hasOwnProperty(c)?h[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===fa.RESOURCE_URL){var f=va(d.toString()),m,p,k=!1;m=0;for(p=b.length;m<p;m++)if("self"===b[m]?Ob(f):b[m].exec(f.href)){k=!0;break}if(k)for(m=0,p=a.length;m<p;m++)if("self"===a[m]?Ob(f):a[m].exec(f.href)){k=!1;break}if(k)return d;throw wa("insecurl",d.toString());}if(c===fa.HTML)return e(d);throw wa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}
function ve(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw wa("iequirks");var e=ja(fa);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=Ba);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:a(c,function(a){return e.getTrusted(b,a)})};var f=e.parseAs,
h=e.getTrusted,g=e.trustAs;q(fa,function(a,b){var c=J(b);e[Sa("parse_as_"+c)]=function(b){return f(a,b)};e[Sa("get_trusted_"+c)]=function(b){return h(a,b)};e[Sa("trust_as_"+c)]=function(b){return g(a,b)}});return e}]}function xe(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(J((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},h=f.documentMode,g,n=/^(Moz|webkit|O|ms)(?=[A-Z])/,l=f.body&&f.body.style,m=!1,p=!1;if(l){for(var k in l)if(m=
n.exec(k)){g=m[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit");m=!!("transition"in l||g+"Transition"in l);p=!!("animation"in l||g+"Animation"in l);!d||m&&p||(m=G(f.body.style.webkitTransition),p=G(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!h||7<h),hasEvent:function(a){if("input"==a&&9==T)return!1;if(F(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Qa(),vendorPrefix:g,
transitions:m,animations:p,android:d,msie:T,msieDocumentMode:h}}]}function ze(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,n,l){var m=v(l)&&!l,p=(m?d:c).defer(),k=p.promise;n=a.defer(function(){try{p.resolve(f())}catch(a){p.reject(a),e(a)}finally{delete h[k.$$timeoutId]}m||b.$apply()},n);k.$$timeoutId=n;h[n]=p;return k}var h={};f.cancel=function(b){return b&&b.$$timeoutId in h?(h[b.$$timeoutId].reject("canceled"),delete h[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):
!1};return f}]}function va(b,a){var c=b;T&&($.setAttribute("href",c),c=$.href);$.setAttribute("href",c);return{href:$.href,protocol:$.protocol?$.protocol.replace(/:$/,""):"",host:$.host,search:$.search?$.search.replace(/^\?/,""):"",hash:$.hash?$.hash.replace(/^#/,""):"",hostname:$.hostname,port:$.port,pathname:"/"===$.pathname.charAt(0)?$.pathname:"/"+$.pathname}}function Ob(b){b=G(b)?va(b):b;return b.protocol===Qc.protocol&&b.host===Qc.host}function Ae(){this.$get=ba(P)}function pc(b){function a(d,
e){if(Q(d)){var f={};q(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Rc);a("date",Sc);a("filter",Ye);a("json",Ze);a("limitTo",$e);a("lowercase",af);a("number",Tc);a("orderBy",Uc);a("uppercase",bf)}function Ye(){return function(b,a,c){if(!M(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&
(c="boolean"===d&&c?function(a,b){return Oa.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&Db.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==
d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var h in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(h);break;case "function":e.push(a);break;default:return b}d=[];for(h=0;h<b.length;h++){var g=b[h];e.check(g)&&d.push(g)}return d}}function Rc(b){var a=b.NUMBER_FORMATS;return function(b,
d){F(d)&&(d=a.CURRENCY_SYM);return Vc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Tc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Vc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Vc(b,a,c,d,e){if(null==b||!isFinite(b)||Q(b))return"";var f=0>b;b=Math.abs(b);var h=b+"",g="",n=[],l=!1;if(-1!==h.indexOf("e")){var m=h.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&m[3]>e+1?(h="0",b=0):(g=h,l=!0)}if(l)0<e&&(-1<b&&1>b)&&(g=b.toFixed(e));else{h=(h.split(Wc)[1]||
"").length;F(e)&&(e=Math.min(Math.max(a.minFrac,h),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);b=(""+b).split(Wc);h=b[0];b=b[1]||"";var m=0,p=a.lgSize,k=a.gSize;if(h.length>=p+k)for(m=h.length-p,l=0;l<m;l++)0===(m-l)%k&&0!==l&&(g+=c),g+=h.charAt(l);for(l=m;l<h.length;l++)0===(h.length-l)%p&&0!==l&&(g+=c),g+=h.charAt(l);for(;b.length<e;)b+="0";e&&"0"!==e&&(g+=d+b.substr(0,e))}n.push(f?a.negPre:a.posPre);n.push(g);n.push(f?a.negSuf:a.posSuf);return n.join("")}function vb(b,
a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function aa(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return vb(e,a,d)}}function wb(b,a){return function(c,d){var e=c["get"+b](),f=ib(a?"SHORT"+b:b);return d[f][e]}}function Xc(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function Yc(b){return function(a){var c=Xc(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+
(4-a.getDay()))-+c;a=1+Math.round(a/6048E5);return vb(a,b)}}function Sc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,h=0,g=b[8]?a.setUTCFullYear:a.setFullYear,n=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),h=U(b[9]+b[11]));g.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;h=U(b[5]||0)-h;g=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));n.call(a,f,h,g,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,e){var f="",h=[],g,n;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;G(c)&&(c=cf.test(c)?U(c):a(c));Ca(c)&&(c=new Date(c));if(!da(c))return c;for(;e;)(n=df.exec(e))?(h=h.concat(ka.call(n,1)),e=h.pop()):(h.push(e),e=null);q(h,function(a){g=ef[a];f+=g?g(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function Ze(){return function(b){return sa(b,!0)}}function $e(){return function(b,a){if(!M(b)&&!G(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);
if(G(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Uc(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(da(a)&&da(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!M(a)||!c)return a;c=M(c)?c:[c];
c=ld(c,function(a){var c=!1,d=a||Ba;if(G(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var h=[],g=0;g<a.length;g++)h.push(a[g]);return h.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function xa(b){A(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Zc(b,a,c,d){function e(a,
c){c=c?"-"+gb(c,"-"):"";d.removeClass(b,(a?xb:yb)+c);d.addClass(b,(a?yb:xb)+c)}var f=this,h=b.parent().controller("form")||zb,g=0,n=f.$error={},l=[];f.$name=a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;h.$addControl(f);b.addClass(Ka);e(!0);f.$rollbackViewValue=function(){q(l,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){q(l,function(a){a.$commitViewValue()})};f.$addControl=function(a){Aa(a.$name,"input");l.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=
function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];q(n,function(b,c){f.$setValidity(c,!0,a)});Da(l,a)};f.$setValidity=function(a,b,c){var d=n[a];if(b)d&&(Da(d,c),d.length||(g--,g||(e(b),f.$valid=!0,f.$invalid=!1),n[a]=!1,e(!0,a),h.$setValidity(a,!0,f)));else{g||e(b);if(d){if(-1!=Ma(d,c))return}else n[a]=d=[],g++,e(!1,a),h.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Ka);d.addClass(b,Ab);f.$dirty=!0;f.$pristine=!1;h.$setDirty()};f.$setPristine=
function(){d.removeClass(b,Ab);d.addClass(b,Ka);f.$dirty=!1;f.$pristine=!0;q(l,function(a){a.$setPristine()})}}function Xb(b,a,c,d){b.$setValidity(a,c);return c?d:t}function $c(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function ff(b,a,c,d,e){Q(e)&&(b.$$hasNativeValidators=!0,b.$parsers.push(function(f){if(b.$error[a]||$c(e,d)||!$c(e,c))return f;b.$setValidity(a,!1)}))}function Za(b,a,c,d,e,f){var h=a.prop(gf),g=a[0].placeholder,n={};d.$$validityState=h;if(!e.android){var l=
!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;m()})}var m=function(e){if(!l){var f=a.val(),k=e&&e.type;if(T&&"input"===(e||n).type&&a[0].placeholder!==g)g=a[0].placeholder;else{c.ngTrim&&"false"===c.ngTrim||(f=Z(f));var m=h&&d.$$hasNativeValidators;if(d.$viewValue!==f||""===f&&m)b.$$phase?d.$setViewValue(f,k,m):b.$apply(function(){d.$setViewValue(f,k,m)})}}};if(e.hasEvent("input"))a.on("input",m);else{var p,k=function(a){p||(p=f.defer(function(){m(a);p=null}))};
a.on("keydown",function(a){var b=a.keyCode;91===b||(15<b&&19>b||37<=b&&40>=b)||k(a)});if(e.hasEvent("paste"))a.on("paste cut",k)}a.on("change",m);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Bb(b,a){return function(c){var d;return da(c)?c:G(c)&&(b.lastIndex=0,c=b.exec(c))?(c.shift(),d={yyyy:0,MM:1,dd:1,HH:0,mm:0},q(c,function(b,c){c<a.length&&(d[a[c]]=+b)}),new Date(d.yyyy,d.MM-1,d.dd,d.HH,d.mm)):NaN}}function $a(b,a,c,d){return function(e,f,h,g,n,l,m){Za(e,f,h,g,
n,l);g.$parsers.push(function(d){if(g.$isEmpty(d))return g.$setValidity(b,!0),null;if(a.test(d))return g.$setValidity(b,!0),c(d);g.$setValidity(b,!1);return t});g.$formatters.push(function(a){return da(a)?m("date")(a,d):""});h.min&&(e=function(a){var b=g.$isEmpty(a)||c(a)>=c(h.min);g.$setValidity("min",b);return b?a:t},g.$parsers.push(e),g.$formatters.push(e));h.max&&(e=function(a){var b=g.$isEmpty(a)||c(a)<=c(h.max);g.$setValidity("max",b);return b?a:t},g.$parsers.push(e),g.$formatters.push(e))}}
function ad(b,a,c,d,e){if(v(d)){b=b(d);if(!b.constant)throw(new O("ngModel"))("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return b(a)}return e}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){if(!M(a)){if(G(a))return a.split(" ");if(Q(a)){var b=[];q(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",
link:function(f,h,g){function n(a,b){var c=h.data("$classCounts")||{},d=[];q(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});h.data("$classCounts",c);return d.join(" ")}function l(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var l=n(k,1);g.$addClass(l)}else if(!ra(b,m)){var q=e(m),l=d(k,q),k=d(q,k),k=n(k,-1),l=n(l,1);0===l.length?c.removeClass(h,k):0===k.length?c.addClass(h,l):c.setClass(h,l,k)}}m=ja(b)}var m;f.$watch(g[b],l,!0);g.$observe("class",function(a){l(f.$eval(g[b]))});
"ngClass"!==b&&f.$watch("$index",function(c,d){var h=c&1;if(h!==(d&1)){var l=e(f.$eval(g[b]));h===a?(h=n(l,1),g.$addClass(h)):(h=n(l,-1),g.$removeClass(h))}})}}}]}var hf=/^\/(.+)\/([a-z]*)$/,gf="validity",J=function(b){return G(b)?b.toLowerCase():b},Db=Object.prototype.hasOwnProperty,ib=function(b){return G(b)?b.toUpperCase():b},T,z,ta,ka=[].slice,sc=[].push,ya=Object.prototype.toString,Na=O("ng"),Oa=P.angular||(P.angular={}),Ra,ma,cb=0;T=U((/msie (\d+)/.exec(J(navigator.userAgent))||[])[1]);isNaN(T)&&
(T=U((/trident\/.*; rv:(\d+)/.exec(J(navigator.userAgent))||[])[1]));B.$inject=[];Ba.$inject=[];var M=function(){return A(Array.isArray)?Array.isArray:function(b){return"[object Array]"===ya.call(b)}}(),Z=function(){return String.prototype.trim?function(b){return G(b)?b.trim():b}:function(b){return G(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();ma=9>T?function(b){b=b.nodeName?b:b[0];return J(b.scopeName&&"HTML"!=b.scopeName?b.scopeName+":"+b.nodeName:b.nodeName)}:function(b){return J(b.nodeName?
b.nodeName:b[0].nodeName)};var Qa=function(){if(v(Qa.isActive_))return Qa.isActive_;var b=!(!W.querySelector("[ng-csp]")&&!W.querySelector("[data-ng-csp]"));if(!b)try{new Function("")}catch(a){b=!0}return Qa.isActive_=b},fb=["ng-","data-ng-","ng:","x-ng-"],pd=/[A-Z]/g,td={full:"1.3.0-beta.16",major:1,minor:3,dot:0,codeName:"pizza-transubstantiation"};V.expando="ng339";var Ua=V.cache={},Je=1,sb=P.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+
a,c)},Ta=P.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};V._data=function(b){return this.cache[b[this.expando]]||{}};var De=/([\:\-\_]+(.))/g,Ee=/^moz([A-Z])/,Ib=O("jqLite"),Ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Hb=/<|&#?\w+;/,Ge=/<([\w:]+)/,He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=ea.td;var Fa=V.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===W.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),V(P).on("load",a))},toString:function(){var b=[];q(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?z(this[b]):z(this[this.length+
b])},length:0,push:sc,sort:[].sort,splice:[].splice},pb={};q("multiple selected checked disabled readOnly required open".split(" "),function(b){pb[J(b)]=b});var wc={};q("input select option textarea button form details".split(" "),function(b){wc[b]=!0});var xc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngPattern:"pattern"};q({data:Kb,removeData:lb},function(b,a){V[a]=b});q({data:Kb,inheritedData:ob,scope:function(b){return z.data(b,"$scope")||ob(b.parentNode||b,["$isolateScope","$scope"])},
isolateScope:function(b){return z.data(b,"$isolateScope")||z.data(b,"$isolateScopeNoTemplate")},controller:tc,injector:function(b){return ob(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Lb,css:function(b,a,c){a=Sa(a);if(v(c))b.style[a]=c;else{var d;8>=T&&(d=b.currentStyle&&b.currentStyle[a],""===d&&(d="auto"));d=d||b.style[a];8>=T&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=J(a);if(pb[d])if(v(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||
(b.attributes.getNamedItem(a)||B).specified?d:t;else if(v(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(v(c))b[a]=c;else return b[a]},text:function(){function b(a,b){if(F(b)){var d=a.nodeType;return 1===d||3===d?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(F(a)){if(b.multiple&&"select"===ma(b)){var c=[];q(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=
a},html:function(b,a){if(F(a))return b.innerHTML;kb(b,!0);b.innerHTML=a},empty:uc},function(b,a){V.prototype[a]=function(a,d){var e,f,h=this.length;if(b!==uc&&(2==b.length&&b!==Lb&&b!==tc?a:d)===t){if(Q(a)){for(e=0;e<h;e++)if(b===Kb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;h=e===t?Math.min(h,1):h;for(f=0;f<h;f++){var g=b(this[f],a,d);e=e?e+g:g}return e}for(e=0;e<h;e++)b(this[e],a,d);return this}});q({removeData:lb,on:function a(c,d,e,f){if(v(f))throw Ib("onargs");if(!c.nodeType||
1===c.nodeType||9===c.nodeType){var h=la(c,"events"),g=la(c,"handle");h||la(c,"events",h={});g||la(c,"handle",g=Le(c,h));q(d.split(" "),function(d){var f=h[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var m=W.body.contains||W.body.compareDocumentPosition?function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===
a)return!0;return!1};h[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||m(this,c))||g(a,d)})}else sb(c,d,g),h[d]=[];f=h[d]}f.push(e)})}},off:rc,one:function(a,c,d){a=z(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;kb(a);q(new V(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];q(a.childNodes,function(a){1===a.nodeType&&c.push(a)});
return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){q(new V(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;q(new V(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=z(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){kb(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;q(new V(c),function(a){e.insertBefore(a,
d.nextSibling);d=a})},addClass:nb,removeClass:mb,toggleClass:function(a,c,d){c&&q(c.split(" "),function(c){var f=d;F(f)&&(f=!Lb(a,c));(f?nb:mb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Jb,triggerHandler:function(a,c,d){c=(la(a,"events")||{})[c];
d=d||[];var e=[{preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:B}];q(c,function(c){c.apply(a,e.concat(d))})}},function(a,c){V.prototype[c]=function(c,e,f){for(var h,g=0;g<this.length;g++)F(h)?(h=a(this[g],c,e,f),v(h)&&(h=z(h))):qc(h,a(this[g],c,e,f));return v(h)?h:this};V.prototype.bind=V.prototype.on;V.prototype.unbind=V.prototype.off});Va.prototype={put:function(a,c){this[Ga(a,this.nextUid)]=c},get:function(a){return this[Ga(a,
this.nextUid)]},remove:function(a){var c=this[a=Ga(a,this.nextUid)];delete this[a];return c}};var zc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Ne=/,/,Oe=/^\s*(_?)(\S+?)\1\s*$/,yc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ha=O("$injector");Fb.$$annotate=Mb;var jf=O("$animate"),fe=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw jf("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&
(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,h,g){h?h.after(a):c.prepend(a);g&&d(g);return B},leave:function(a,c){a.remove();c&&d(c);return B},move:function(a,c,d,g){return this.enter(a,c,d,g)},addClass:function(a,c,h){c=G(c)?c:M(c)?c.join(" "):"";q(a,function(a){nb(a,c)});h&&d(h);return B},removeClass:function(a,c,h){c=G(c)?c:M(c)?c.join(" "):"";q(a,function(a){mb(a,c)});h&&d(h);
return B},setClass:function(a,c,h,g){q(a,function(a){nb(a,c);mb(a,h)});g&&d(g);return B},enabled:B}}]}],ha=O("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var Te=/^(x[\:\-_]|data[\:\-_])/i,Pb=O("$interpolate"),kf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,We={http:80,https:443,ftp:21},Sb=O("$location");Ub.prototype=Tb.prototype=Kc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a,c){if(F(a))return this.$$url;var d=kf.exec(a);d[1]&&this.path(decodeURIComponent(d[1]));(d[2]||
d[1])&&this.search(d[3]||"");this.hash(d[5]||"",c);return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Lc("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(G(a))this.$$search=fc(a);else if(Q(a))q(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:F(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Lc("$$hash",
Ba),replace:function(){this.$$replace=!0;return this}};var ia=O("$parse"),lf=Function.prototype.call,mf=Function.prototype.apply,nf=Function.prototype.bind,ab={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:B,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return v(d)?v(e)?d+e:d:v(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(v(d)?d:0)-(v(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,
c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":B,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,
c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},of={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;for(this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{a=this.ch+this.peek();var c=a+this.peek(2),d=ab[this.ch],e=ab[a],f=ab[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",
this.index,this.index+1)}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;
c=v(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw ia("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=J(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,h,g;this.index<this.text.length;){g=this.text.charAt(this.index);if("."===g||this.isIdent(g)||this.isNumber(g))"."===g&&(e=this.index),c+=g;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){g=this.text.charAt(f);if("("===g){h=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(g))f++;else break}d={index:d,text:c};if(ab.hasOwnProperty(c))d.fn=
ab[c],d.constant=!0;else{var n=Nc(c,this.options,this.text);d.fn=E(function(a,c){return n(a,c)},{assign:function(d,e){return ub(d,c,e,a.text)}})}this.tokens.push(d);h&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:h}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var h=this.text.charAt(this.index),e=e+h;if(f)"u"===h?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+
f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=of[h]||h,f=!1;else if("\\"===h)f=!0;else{if(h===a){this.index++;this.tokens.push({index:c,text:e,string:d,constant:!0,fn:function(){return d}});return}d+=h}this.index++}this.throwError("Unterminated quote",c)}};var Ya=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};Ya.ZERO=E(function(){return 0},{constant:!0});Ya.prototype={constructor:Ya,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==
this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);c.constant&&(a.constant=!0,a.literal=!0)}for(var d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,
d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw ia("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw ia("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],h=f.text;if(h===a||h===c||h===d||h===e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=
this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return E(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return E(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return E(function(e,f){return c(e,f,a,d)},{constant:a.constant&&d.constant})},statements:function(){for(var a=[];;)if(0<
this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var h=a[f];h&&(e=h(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];this.expect(":");)d.push(this.expression());return ba(function(a,f,h){h=[h];for(var g=0;g<d.length;g++)h.push(d[g](a,
f));return c.apply(a,h)})},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.ternary();if(d=this.expect(":"))return this.ternaryFn(a,c,this.ternary());this.throwError("expected :",
d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,
c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(Ya.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=
this,d=this.expect().text,e=Nc(d,this.options,this.text);return E(function(c,d,g){return e(g||a(c,d))},{assign:function(e,h,g){return ub(a(e,g),d,h,c.text)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return E(function(e,f){var h=a(e,f),g=d(e,f);qa(g,c.text);return h?Ja(h[g],c.text):t},{assign:function(e,f,h){var g=d(e,h);return Ja(a(e,h),c.text)[g]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))
}this.consume(")");var e=this;return function(f,h){for(var g=[],n=c?c(f,h):f,l=0;l<d.length;l++)g.push(d[l](f,h));l=a(f,h,n)||B;Ja(n,e.text);var m=e.text;if(l){if(l.constructor===l)throw ia("isecfn",m);if(l===lf||l===mf||l===nf)throw ia("isecff",m);}g=l.apply?l.apply(n,g):l(g[0],g[1],g[2],g[3],g[4]);return Ja(g,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");
return E(function(c,d){for(var h=[],g=0;g<a.length;g++)h.push(a[g](c,d));return h},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return E(function(c,d){for(var e={},n=0;n<a.length;n++){var l=a[n];e[l.key]=l.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},
wa=O("$sce"),fa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$=W.createElement("a"),Qc=va(P.location.href,!0);pc.$inject=["$provide"];Rc.$inject=["$locale"];Tc.$inject=["$locale"];var Wc=".",ef={yyyy:aa("FullYear",4),yy:aa("FullYear",2,0,!0),y:aa("FullYear",1),MMMM:wb("Month"),MMM:wb("Month",!0),MM:aa("Month",2,1),M:aa("Month",1,1),dd:aa("Date",2),d:aa("Date",1),HH:aa("Hours",2),H:aa("Hours",1),hh:aa("Hours",2,-12),h:aa("Hours",1,-12),mm:aa("Minutes",2),m:aa("Minutes",1),ss:aa("Seconds",
2),s:aa("Seconds",1),sss:aa("Milliseconds",3),EEEE:wb("Day"),EEE:wb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(vb(Math[0<a?"floor":"ceil"](a/60),2)+vb(Math.abs(a%60),2))},ww:Yc(2),w:Yc(1)},df=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,cf=/^\-?\d+$/;Sc.$inject=["$locale"];var af=ba(J),bf=ba(ib);Uc.$inject=["$parse"];var wd=ba({restrict:"E",compile:function(a,c){8>=T&&
(c.href||c.name||c.$set("href",""),a.append(W.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===ya.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}),jb={};q(pb,function(a,c){if("multiple"!=a){var d=oa("ng-"+c);jb[d]=function(){return{priority:100,link:function(a,f,h){a.$watch(h[d],function(a){h.$set(c,!!a)})}}}}});q(xc,function(a,c){jb[c]=function(){return{priority:100,link:function(a,
e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(hf))){f.$set("ngPattern",RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});q(["src","srcset","href"],function(a){var c=oa("ng-"+a);jb[c]=function(){return{priority:99,link:function(d,e,f){var h=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ya.call(e.prop("href"))&&(g="xlinkHref",f.$attr[g]="xlink:href",h=null);f.$observe(c,function(a){a&&(f.$set(g,a),T&&h&&e.prop(h,f[g]))})}}}});var zb={$addControl:B,
$removeControl:B,$setValidity:B,$setDirty:B,$setPristine:B};Zc.$inject=["$element","$attrs","$scope","$animate"];var bd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Zc,compile:function(){return{pre:function(a,e,f,h){if(!f.action){var g=function(c){a.$apply(function(){h.$commitViewValue()});c.preventDefault?c.preventDefault():c.returnValue=!1};sb(e[0],"submit",g);e.on("$destroy",function(){c(function(){Ta(e[0],"submit",g)},0,!1)})}var n=e.parent().controller("form"),
l=f.name||f.ngForm;l&&ub(a,l,h,l);if(n)e.on("$destroy",function(){n.$removeControl(h);l&&ub(a,l,t,l);E(h,zb)})}}}}}]},xd=bd(),Kd=bd(!0),pf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,qf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,rf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,cd=/^(\d{4})-(\d{2})-(\d{2})$/,dd=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)$/,Zb=/^(\d{4})-W(\d\d)$/,ed=/^(\d{4})-(\d\d)$/,fd=/^(\d\d):(\d\d)$/,
sf=/(\s+|^)default(\s+|$)/,gd={text:Za,date:$a("date",cd,Bb(cd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":$a("datetimelocal",dd,Bb(dd,["yyyy","MM","dd","HH","mm"]),"yyyy-MM-ddTHH:mm"),time:$a("time",fd,Bb(fd,["HH","mm"]),"HH:mm"),week:$a("week",Zb,function(a){if(da(a))return a;if(G(a)){Zb.lastIndex=0;var c=Zb.exec(a);if(c){a=+c[1];var d=+c[2],c=Xc(a),d=7*(d-1);return new Date(a,0,c.getDate()+d)}}return NaN},"yyyy-Www"),month:$a("month",ed,Bb(ed,["yyyy","MM"]),"yyyy-MM"),number:function(a,
c,d,e,f,h){Za(a,c,d,e,f,h);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||rf.test(a))return e.$setValidity("number",!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});ff(e,"number",tf,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return Xb(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return Xb(e,"max",e.$isEmpty(a)||
a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return Xb(e,"number",e.$isEmpty(a)||Ca(a),a)})},url:function(a,c,d,e,f,h){Za(a,c,d,e,f,h);e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||pf.test(d)}},email:function(a,c,d,e,f,h){Za(a,c,d,e,f,h);e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||qf.test(d)}},radio:function(a,c,d,e){F(d.name)&&c.attr("name",++cb);c.on("click",function(f){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value,
f&&f.type)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,h,g,n){var l=ad(n,a,"ngTrueValue",d.ngTrueValue,!0),m=ad(n,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(d){a.$apply(function(){e.$setViewValue(c[0].checked,d&&d.type)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==l};e.$formatters.push(function(a){return ra(a,l)});e.$parsers.push(function(a){return a?l:m})},hidden:B,
button:B,submit:B,reset:B,file:B},tf=["badInput"],jc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:function(f,h,g,n){n[0]&&(gd[J(g.type)]||gd.text)(f,h,g,n[0],c,a,d,e)}}}],yb="ng-valid",xb="ng-invalid",Ka="ng-pristine",Ab="ng-dirty",uf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout",function(a,c,d,e,f,h,g){function n(a,c){c=c?"-"+gb(c,"-"):"";h.removeClass(e,(a?xb:yb)+c);h.addClass(e,(a?yb:xb)+c)}this.$modelValue=
this.$viewValue=Number.NaN;this.$validators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=d.name;var l=f(d.ngModel),m=l.assign,p=null,k=this;if(!m)throw O("ngModel")("nonassign",d.ngModel,ga(e));this.$render=B;this.$isEmpty=function(a){return F(a)||""===a||null===a||a!==a};var s=e.inheritedData("$formController")||zb,r=0,L=this.$error={};e.addClass(Ka).addClass("ng-untouched");
n(!0);this.$setValidity=function(a,c){L[a]!==!c&&(c?(L[a]&&r--,r||(n(!0),k.$valid=!0,k.$invalid=!1)):(n(!1),k.$invalid=!0,k.$valid=!1,r++),L[a]=!c,n(c,a),s.$setValidity(a,c,k))};this.$setPristine=function(){k.$dirty=!1;k.$pristine=!0;h.removeClass(e,Ab);h.addClass(e,Ka)};this.$setUntouched=function(){k.$touched=!1;k.$untouched=!0;h.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){k.$touched=!0;k.$untouched=!1;h.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(p);
k.$viewValue=k.$$lastCommittedViewValue;k.$render()};this.$validate=function(){if(k.$modelValue===k.$modelValue){var a=k.$modelValue;k.$$runValidators(k.$$invalidModelValue||k.$modelValue,k.$viewValue);a!==k.$modelValue&&k.$$writeModelToScope()}};this.$$runValidators=function(a,c){q(k.$validators,function(d,e){k.$setValidity(e,d(a,c))});k.$modelValue=k.$valid?a:t;k.$$invalidModelValue=k.$valid?t:a};this.$commitViewValue=function(a){var c=k.$viewValue;g.cancel(p);if(a||k.$$lastCommittedViewValue!==
c){k.$$lastCommittedViewValue=c;k.$pristine&&(k.$dirty=!0,k.$pristine=!1,h.removeClass(e,Ka),h.addClass(e,Ab),s.$setDirty());var d=c;q(k.$parsers,function(a){d=a(d)});k.$modelValue===d||!F(k.$$invalidModelValue)&&k.$$invalidModelValue==d||(k.$$runValidators(d,c),k.$$writeModelToScope())}};this.$$writeModelToScope=function(){var d;k.$options&&k.$options.getterSetter&&A(d=l(a))?d(k.$modelValue):m(a,k.$modelValue);q(k.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};this.$setViewValue=function(a,
c,d){k.$viewValue=a;k.$options&&!k.$options.updateOnDefault||k.$$debounceViewValueCommit(c,d)};this.$$debounceViewValueCommit=function(a,c){var d=0,e=k.$options;e&&v(e.debounce)&&(e=e.debounce,Ca(e)?d=e:Ca(e[a])?d=e[a]:Ca(e["default"])&&(d=e["default"]));g.cancel(p);d?p=g(function(){k.$commitViewValue(c)},d):k.$commitViewValue(c)};a.$watch(function(){var c=l(a);k.$options&&(k.$options.getterSetter&&A(c))&&(c=c());if(k.$modelValue!==c&&(F(k.$$invalidModelValue)||k.$$invalidModelValue!=c)){for(var d=
k.$formatters,e=d.length,f=c;e--;)f=d[e](f);k.$$runValidators(c,f);k.$viewValue!==f&&(k.$viewValue=k.$$lastCommittedViewValue=f,k.$render())}return c})}],Zd=function(){return{require:["ngModel","^?form","^?ngModelOptions"],controller:uf,link:{pre:function(a,c,d,e){e[2]&&(e[0].$options=e[2].$options);var f=e[0],h=e[1]||zb;h.$addControl(f);a.$on("$destroy",function(){h.$removeControl(f)})},post:function(a,c,d,e){var f=e[0];if(f.$options&&f.$options.updateOn)c.on(f.$options.updateOn,function(c){a.$apply(function(){f.$$debounceViewValueCommit(c&&
c.type)})});c.on("blur",function(c){a.$apply(function(){f.$setTouched()})})}}}},ae=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),lc=function(){return{require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f,h=d.ngPattern||d.pattern;d.$observe("pattern",
function(a){G(a)&&0<a.length&&(a=RegExp(a));if(a&&!a.test)throw O("ngPattern")("noregexp",h,a,ga(c));f=a||t;e.$validate()});e.$validators.pattern=function(a){return e.$isEmpty(a)||F(f)||f.test(a)}}}}},nc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("maxlength",function(a){f=U(a)||0;e.$validate()});e.$validators.maxlength=function(a){return e.$isEmpty(a)||a.length<=f}}}}},mc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",
function(a){f=U(a)||0;e.$validate()});e.$validators.minlength=function(a){return e.$isEmpty(a)||a.length>=f}}}}},$d=function(){return{require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,g=h?Z(f):f;e.$parsers.push(function(a){if(!F(a)){var c=[];a&&q(a.split(g),function(a){a&&c.push(h?Z(a):a)});return c}});e.$formatters.push(function(a){return M(a)?a.join(f):t});e.$isEmpty=function(a){return!a||!a.length}}}},vf=/^(true|false|\d+)$/,be=function(){return{priority:100,
compile:function(a,c){return vf.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},ce=function(){return{controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions);this.$options.updateOn!==t?(this.$options.updateOnDefault=!1,this.$options.updateOn=Z(this.$options.updateOn.replace(sf,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Cd=
xa({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),Ed=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],Dd=["$sce","$parse",function(a,c){return{compile:function(d,e){d.addClass("ng-binding");return function(d,e,g){e.data("$binding",g.ngBindHtml);var n=c(g.ngBindHtml);
g=c(g.ngBindHtml,function(a){return(a||"").toString()});d.$watch(g,function(){e.html(a.getTrustedHtml(n(d))||"")})}}}}],Fd=Yb("",!0),Hd=Yb("Odd",0),Gd=Yb("Even",1),Id=xa({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),Jd=[function(){return{scope:!0,controller:"@",priority:500}}],oc={};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=oa("ng-"+a);oc[c]=
["$parse",function(d){return{compile:function(e,f){var h=d(f[c]);return function(c,d){d.on(J(a),function(a){c.$apply(function(){h(c,{$event:a})})})}}}}]});var Md=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,h){var g,n,l;c.$watch(e.ngIf,function(c){c?n||h(function(c,f){n=f;c[c.length++]=W.createComment(" end ngIf: "+e.ngIf+" ");g={clone:c};a.enter(c,d.parent(),d)}):(l&&(l.remove(),l=null),n&&(n.$destroy(),n=
null),g&&(l=hb(g.clone),a.leave(l,function(){l=null}),g=null))})}}}],Nd=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Oa.noop,compile:function(h,g){var n=g.ngInclude||g.src,l=g.onload||"",m=g.autoscroll;return function(g,h,q,r,L){var u=0,t,w,x,y=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);x&&(e.leave(x,function(){w=null}),w=x,x=null)};g.$watch(f.parseAsResourceUrl(n),function(f){var n=
function(){!v(m)||m&&!g.$eval(m)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=L(c,function(a){y();e.enter(a,null,h,n)});t=c;x=a;t.$emit("$includeContentLoaded");g.$eval(l)}}).error(function(){q===u&&(y(),g.$emit("$includeContentError"))}),g.$emit("$includeContentRequested")):(y(),r.template=null)})}}}}],de=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],
Od=xa({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Pd=xa({terminal:!0,priority:1E3}),Qd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,h){var g=h.count,n=h.$attr.when&&f.attr(h.$attr.when),l=h.offset||0,m=e.$eval(n)||{},p={},k=c.startSymbol(),s=c.endSymbol(),r=/^when(Minus)?(.+)$/;q(h,function(a,c){r.test(c)&&(m[J(c.replace("when","").replace("Minus","-"))]=f.attr(h.$attr[c]))});q(m,function(a,e){p[e]=c(a.replace(d,
k+g+"-"+l+s))});e.$watch(function(){var c=parseFloat(e.$eval(g));if(isNaN(c))return"";c in m||(c=a.pluralCat(c-l));return p[c](e)},function(a){f.text(a)})}}}],Rd=["$parse","$animate",function(a,c){var d=O("ngRepeat");return{multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,h,g,n){var l=h.ngRepeat,m=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),p,k,s,r,t,u,v={$id:Ga};if(!m)throw d("iexp",l);h=m[1];g=m[2];(m=m[3])?(p=a(m),k=function(a,
c,d){u&&(v[u]=a);v[t]=c;v.$index=d;return p(e,v)}):(s=function(a,c){return Ga(c)},r=function(a){return a});m=h.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!m)throw d("iidexp",h);t=m[3]||m[1];u=m[2];var w={};e.$watchCollection(g,function(a){var e,g,h=f[0],m,p={},v,D,E,B,F,G,A,K=[],M=function(a,c){a[t]=E;u&&(a[u]=D);a.$index=c;a.$first=0===c;a.$last=c===v-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1))};if(bb(a))G=a,F=k||s;else{F=k||r;G=[];for(g in a)a.hasOwnProperty(g)&&
"$"!=g.charAt(0)&&G.push(g);G.sort()}v=G.length;g=K.length=G.length;for(e=0;e<g;e++)if(D=a===G?e:G[e],E=a[D],B=F(D,E,e),Aa(B,"`track by` id"),w.hasOwnProperty(B))A=w[B],delete w[B],p[B]=A,K[e]=A;else{if(p.hasOwnProperty(B))throw q(K,function(a){a&&a.scope&&(w[a.id]=a)}),d("dupes",l,B);K[e]={id:B};p[B]=!1}for(m in w)w.hasOwnProperty(m)&&(A=w[m],g=hb(A.clone),c.leave(g),q(g,function(a){a.$$NG_REMOVED=!0}),A.scope.$destroy());e=0;for(g=G.length;e<g;e++)if(D=a===G?e:G[e],E=a[D],A=K[e],K[e-1]&&(h=K[e-
1].clone[K[e-1].clone.length-1]),A.scope){m=h;do m=m.nextSibling;while(m&&m.$$NG_REMOVED);A.clone[0]!=m&&c.move(hb(A.clone),null,z(h));h=A.clone[A.clone.length-1];M(A.scope,e)}else n(function(a,d){A.scope=d;a[a.length++]=W.createComment(" end ngRepeat: "+l+" ");c.enter(a,null,z(h));h=a;A.clone=a;p[A.id]=A;M(A.scope,e)});w=p})}}}],Sd=["$animate",function(a){return{multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide")})}}}],Ld=["$animate",function(a){return{multiElement:!0,
link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide")})}}}],Td=xa(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Ud=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var h=[],g=[],n=[],l=[];c.$watch(e.ngSwitch||e.on,function(d){var p,k;p=0;for(k=n.length;p<k;++p)n[p].remove();p=n.length=0;for(k=l.length;p<k;++p){var s=
hb(g[p].clone);l[p].$destroy();n[p]=s;a.leave(s,function(){n.splice(p,1)})}g.length=0;l.length=0;if(h=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),q(h,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=W.createComment(" end ngSwitchWhen: ");g.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Vd=xa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,
element:c})}}),Wd=xa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Yd=xa({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw O("ngTransclude")("orphan",ga(c));f(function(a){c.empty();c.append(a)})}}),yd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],wf=O("ngOptions"),Xd=ba({terminal:!0}),
zd=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:B};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var n=this,l={},m=e,p;n.databound=d.ngModel;n.init=function(a,c,d){m=a;p=d};n.addOption=function(c,d){Aa(c,'"option value"');l[c]=
!0;m.$viewValue==c&&(a.val(c),p.parent()&&p.remove());d[0].hasAttribute("selected")&&(d[0].selected=!0)};n.removeOption=function(a){this.hasOption(a)&&(delete l[a],m.$viewValue==a&&this.renderUnknownOption(a))};n.renderUnknownOption=function(c){c="? "+Ga(c)+" ?";p.val(c);a.prepend(p);a.val(c);p.prop("selected",!0)};n.hasOption=function(a){return l.hasOwnProperty(a)};c.$on("$destroy",function(){n.renderUnknownOption=B})}],link:function(e,h,g,n){function l(a,c,d,e){d.$render=function(){var a=d.$viewValue;
e.hasOption(a)?(x.parent()&&x.remove(),c.val(a),""===a&&u.prop("selected",!0)):F(a)&&u?c.val(""):e.renderUnknownOption(a)};c.on("change",function(){a.$apply(function(){x.parent()&&x.remove();d.$setViewValue(c.val())})})}function m(a,c,d){var e;d.$render=function(){var a=new Va(d.$viewValue);q(c.find("option"),function(c){c.selected=v(a.get(c.value))})};a.$watch(function(){ra(e,d.$viewValue)||(e=ja(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];q(c.find("option"),
function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function p(e,f,g){function h(){var a={"":[]},c=[""],d,k,r,t,B;t=g.$modelValue;B=x(e)||[];var D=n?$b(B):B,G,z,C;z={};r=!1;var F,J;if(s)if(u&&M(t))for(r=new Va([]),C=0;C<t.length;C++)z[m]=t[C],r.put(u(e,z),t[C]);else r=new Va(t);for(C=0;G=D.length,C<G;C++){k=C;if(n){k=D[C];if("$"===k.charAt(0))continue;z[n]=k}z[m]=B[k];d=p(e,z)||"";(k=a[d])||(k=a[d]=[],c.push(d));s?d=v(r.remove(u?u(e,z):q(e,z))):(u?(d={},d[m]=t,d=u(e,d)===u(e,z)):d=t===
q(e,z),r=r||d);F=l(e,z);F=v(F)?F:"";k.push({id:u?u(e,z):n?D[C]:C,label:F,selected:d})}s||(A||null===t?a[""].unshift({id:"",label:"",selected:!r}):r||a[""].unshift({id:"?",label:"",selected:!0}));z=0;for(D=c.length;z<D;z++){d=c[z];k=a[d];y.length<=z?(t={element:w.clone().attr("label",d),label:k.label},B=[t],y.push(B),f.append(t.element)):(B=y[z],t=B[0],t.label!=d&&t.element.attr("label",t.label=d));F=null;C=0;for(G=k.length;C<G;C++)r=k[C],(d=B[C+1])?(F=d.element,d.label!==r.label&&F.text(d.label=r.label),
d.id!==r.id&&F.val(d.id=r.id),d.selected!==r.selected&&(F.prop("selected",d.selected=r.selected),T&&F.prop("selected",d.selected))):(""===r.id&&A?J=A:(J=E.clone()).val(r.id).prop("selected",r.selected).text(r.label),B.push({element:J,label:r.label,id:r.id,selected:r.selected}),F?F.after(J):t.element.append(J),F=J);for(C++;B.length>C;)B.pop().element.remove()}for(;y.length>z;)y.pop()[0].element.remove()}var k;if(!(k=r.match(d)))throw wf("iexp",r,ga(f));var l=c(k[2]||k[1]),m=k[4]||k[6],n=k[5],p=c(k[3]||
""),q=c(k[2]?k[1]:m),x=c(k[7]),u=k[8]?c(k[8]):null,y=[[{element:f,label:""}]];A&&(a(A)(e),A.removeClass("ng-scope"),A.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=x(e)||[],d={},h,k,l,p,r,w,v;if(s)for(k=[],p=0,w=y.length;p<w;p++)for(a=y[p],l=1,r=a.length;l<r;l++){if((h=a[l].element)[0].selected){h=h.val();n&&(d[n]=h);if(u)for(v=0;v<c.length&&(d[m]=c[v],u(e,d)!=h);v++);else d[m]=c[h];k.push(q(e,d))}}else{h=f.val();if("?"==h)k=t;else if(""===h)k=null;else if(u)for(v=0;v<c.length;v++){if(d[m]=
c[v],u(e,d)==h){k=q(e,d);break}}else d[m]=c[h],n&&(d[n]=h),k=q(e,d);1<y[0].length&&y[0][1].id!==h&&(y[0][1].selected=!1)}g.$setViewValue(k)})});g.$render=h;e.$watch(h)}if(n[1]){var k=n[0];n=n[1];var s=g.multiple,r=g.ngOptions,A=!1,u,E=z(W.createElement("option")),w=z(W.createElement("optgroup")),x=E.clone();g=0;for(var y=h.children(),B=y.length;g<B;g++)if(""===y[g].value){u=A=y.eq(g);break}k.init(n,A,x);s&&(n.$isEmpty=function(a){return!a||0===a.length});r?p(e,h,n):s?m(e,h,n):l(e,h,n,k)}}}}],Bd=["$interpolate",
function(a){var c={addOption:B,removeOption:B};return{restrict:"E",priority:100,compile:function(d,e){if(F(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var l=d.parent(),m=l.data("$selectController")||l.parent().data("$selectController");m&&m.databound?d.prop("selected",!1):m=c;f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&m.removeOption(c);m.addOption(a,d)}):m.addOption(e.value,d);d.on("$destroy",function(){m.removeOption(e.value)})}}}}],Ad=ba({restrict:"E",
terminal:!1});P.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(qd(),sd(Oa),z(W).ready(function(){od(W,gc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.11.0 - 2014-05-01
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=a.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=a.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.isActive=function(a){return i.currentSlide===a},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var d={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.createParser=function(a){var c=[],e=a.split("");return angular.forEach(d,function(b,d){var f=a.indexOf(d);if(f>-1){a=a.split(""),e[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+d.length;h>g;g++)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+e.join("")+"$"),map:b(c,"index")}},this.parse=function(b,d){if(!angular.isString(b))return b;d=a.DATETIME_FORMATS[d]||d,this.parsers[d]||(this.parsers[d]=this.createParser(d));var e=this.parsers[d],f=e.regex,g=e.map,h=b.match(f);if(h&&h.length){for(var i,j={year:1900,month:0,date:1,hours:0},k=1,l=h.length;l>k;k++){var m=g[k-1];m.apply&&m.apply.call(j,h[k])}return c(j.year,j.month,j.date)&&(i=new Date(j.year,j.month,j.date,j.hours)),i}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),angular.forEach(["minDate","maxDate"],function(a){j[a]&&(h.$parent.$watch(b(j[a]),function(b){h[a]=b}),r.attr(l(a),a))}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){a&&a.isDefaultPrevented()||b.$apply(function(){b.isOpen=!1})},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";
return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!y||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?v||(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return v=null,u&&(g.cancel(u),u=null),b.tt_content?(r(),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),z(),b.tt_isOpen=!0,b.$digest(),z):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),v=null,b.tt_animation?u||(u=g(s,500)):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){u=null,t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=angular.isDefined(d[l+"Enable"]),z=function(){var a=j.positionElements(c,t,b.tt_placement,w);a.top+="px",a.left+="px",t.css(a)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var A=function(){c.unbind(x.show,k),c.unbind(x.hide,m)};d.$observe(l+"Trigger",function(a){A(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m))});var B=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(B)?!!B:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),A(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=i.$new();i.$on("$destroy",function(){w.$destroy()});var x="typeahead-"+w.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":x});var y=angular.element("<div typeahead-popup></div>");y.attr({id:x,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&y.attr("template-url",k.typeaheadTemplateUrl);var z=function(){w.matches=[],w.activeIdx=-1,j.attr("aria-expanded",!1)},A=function(a){return x+"-option-"+a};w.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",A(a))});var B=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){w.activeIdx=0,w.matches.length=0;for(var e=0;e<c.length;e++)b[v.itemName]=c[e],w.matches.push({id:A(e),label:v.viewMapper(w,b),model:c[e]});w.query=a,w.position=t?f.offset(j):f.position(j),w.position.top=w.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else z();d&&q(i,!1)},function(){z(),q(i,!1)})};z(),w.query=void 0;var C;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(C&&d.cancel(C),C=d(function(){B(a)},o)):B(a):(q(i,!1),z()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),w.select=function(a){var b,c,e={};e[v.itemName]=c=w.matches[a].model,b=v.modelMapper(i,e),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,e)}),z(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==w.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(w.activeIdx=(w.activeIdx+1)%w.matches.length,w.$digest()):38===a.which?(w.activeIdx=(w.activeIdx?w.activeIdx:w.matches.length)-1,w.$digest()):13===a.which||9===a.which?w.$apply(function(){w.select(w.activeIdx)}):27===a.which&&(a.stopPropagation(),z(),w.$digest()))}),j.bind("blur",function(){m=!1});var D=function(a){j[0]!==a.target&&(z(),w.$digest())};e.bind("click",D),i.$on("$destroy",function(){e.unbind("click",D)});var E=a(y)(w);t?e.find("body").append(E):j.after(E)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')
}]);
var angularSkycons = angular.module( 'angular-skycons', [] );


angularSkycons.directive( 'skycon', function () {
    return {
        restrict: 'E',
        replace: true,
        scope: {
            icon: "=",
            size: "="
        },
        link: function ( scope, element, attrs ) {

            // make a canvas for our icon
            var canvas = document.createElement( 'canvas' );

            // set the CSS class from attribute
            if ( !attrs.class ) {
                canvas.className = "";
            } else {
                canvas.className = attrs.class;
            }

            // set default color if "color" attribute not present
            var config = {};
            if ( !attrs.color ) {
                config.color = "black";
            } else {
                config.color = attrs.color;
            }

            var skycons = new Skycons( config );

            // watch the size property from the controller
            scope.$watch( "size", function ( newVal, oldVal ) {
                if ( newVal ) {
                    canvas.height = newVal;
                    canvas.width = newVal;
                } else {
                    canvas.height = scope.size || 64;
                    canvas.width = scope.size  || 64;
                }
            }, true );

            // watch the icon property from the controller
            scope.$watch( "icon", function () {
                skycons.add( canvas, scope.icon );
            }, true );

            skycons.play();

            if ( element[0].nodeType === 8 ) {
                element.replaceWith( canvas );
            } else {
                element[0].appendChild( canvas );
            }

            scope.$on('$destroy', function () {
                skycons.remove(canvas);
                if (skycons.list.length === 0) {
                    skycons.pause(canvas);
                }
            });
        }
    };
} );

(function(global) {
    "use strict";

    /* Set up a RequestAnimationFrame shim so we can animate efficiently FOR
     * GREAT JUSTICE. */
    var requestInterval, cancelInterval;

    (function() {
        var raf = global.requestAnimationFrame       ||
                global.webkitRequestAnimationFrame ||
                global.mozRequestAnimationFrame    ||
                global.oRequestAnimationFrame      ||
                global.msRequestAnimationFrame     ,
            caf = global.cancelAnimationFrame        ||
                global.webkitCancelAnimationFrame  ||
                global.mozCancelAnimationFrame     ||
                global.oCancelAnimationFrame       ||
                global.msCancelAnimationFrame      ;

        if(raf && caf) {
            requestInterval = function(fn, delay) {
                var handle = {value: null};

                function loop() {
                    handle.value = raf(loop);
                    fn();
                }

                loop();
                return handle;
            };

            cancelInterval = function(handle) {
                caf(handle.value);
            };
        }

        else {
            requestInterval = setInterval;
            cancelInterval = clearInterval;
        }
    }());

    /* Catmull-rom spline stuffs. */
    /*
     function upsample(n, spline) {
     var polyline = [],
     len = spline.length,
     bx  = spline[0],
     by  = spline[1],
     cx  = spline[2],
     cy  = spline[3],
     dx  = spline[4],
     dy  = spline[5],
     i, j, ax, ay, px, qx, rx, sx, py, qy, ry, sy, t;

     for(i = 6; i !== spline.length; i += 2) {
     ax = bx;
     bx = cx;
     cx = dx;
     dx = spline[i    ];
     px = -0.5 * ax + 1.5 * bx - 1.5 * cx + 0.5 * dx;
     qx =        ax - 2.5 * bx + 2.0 * cx - 0.5 * dx;
     rx = -0.5 * ax            + 0.5 * cx           ;
     sx =                   bx                      ;

     ay = by;
     by = cy;
     cy = dy;
     dy = spline[i + 1];
     py = -0.5 * ay + 1.5 * by - 1.5 * cy + 0.5 * dy;
     qy =        ay - 2.5 * by + 2.0 * cy - 0.5 * dy;
     ry = -0.5 * ay            + 0.5 * cy           ;
     sy =                   by                      ;

     for(j = 0; j !== n; ++j) {
     t = j / n;

     polyline.push(
     ((px * t + qx) * t + rx) * t + sx,
     ((py * t + qy) * t + ry) * t + sy
     );
     }
     }

     polyline.push(
     px + qx + rx + sx,
     py + qy + ry + sy
     );

     return polyline;
     }

     function downsample(n, polyline) {
     var len = 0,
     i, dx, dy;

     for(i = 2; i !== polyline.length; i += 2) {
     dx = polyline[i    ] - polyline[i - 2];
     dy = polyline[i + 1] - polyline[i - 1];
     len += Math.sqrt(dx * dx + dy * dy);
     }

     len /= n;

     var small = [],
     target = len,
     min = 0,
     max, t;

     small.push(polyline[0], polyline[1]);

     for(i = 2; i !== polyline.length; i += 2) {
     dx = polyline[i    ] - polyline[i - 2];
     dy = polyline[i + 1] - polyline[i - 1];
     max = min + Math.sqrt(dx * dx + dy * dy);

     if(max > target) {
     t = (target - min) / (max - min);

     small.push(
     polyline[i - 2] + dx * t,
     polyline[i - 1] + dy * t
     );

     target += len;
     }

     min = max;
     }

     small.push(polyline[polyline.length - 2], polyline[polyline.length - 1]);

     return small;
     }
     */

    /* Define skycon things. */
    /* FIXME: I'm *really really* sorry that this code is so gross. Really, I am.
     * I'll try to clean it up eventually! Promise! */
    var KEYFRAME = 500,
        STROKE = 0.08,
        TAU = 2.0 * Math.PI,
        TWO_OVER_SQRT_2 = 2.0 / Math.sqrt(2);

    function circle(ctx, x, y, r) {
        ctx.beginPath();
        ctx.arc(x, y, r, 0, TAU, false);
        ctx.fill();
    }

    function line(ctx, ax, ay, bx, by) {
        ctx.beginPath();
        ctx.moveTo(ax, ay);
        ctx.lineTo(bx, by);
        ctx.stroke();
    }

    function puff(ctx, t, cx, cy, rx, ry, rmin, rmax) {
        var c = Math.cos(t * TAU),
            s = Math.sin(t * TAU);

        rmax -= rmin;

        circle(
            ctx,
            cx - s * rx,
            cy + c * ry + rmax * 0.5,
            rmin + (1 - c * 0.5) * rmax
        );
    }

    function puffs(ctx, t, cx, cy, rx, ry, rmin, rmax) {
        var i;

        for(i = 5; i--; )
            puff(ctx, t + i / 5, cx, cy, rx, ry, rmin, rmax);
    }

    function cloud(ctx, t, cx, cy, cw, s, color) {
        t /= 30000;

        var a = cw * 0.21,
            b = cw * 0.12,
            c = cw * 0.24,
            d = cw * 0.28;

        ctx.fillStyle = color;
        puffs(ctx, t, cx, cy, a, b, c, d);

        ctx.globalCompositeOperation = 'destination-out';
        puffs(ctx, t, cx, cy, a, b, c - s, d - s);
        ctx.globalCompositeOperation = 'source-over';
    }

    function sun(ctx, t, cx, cy, cw, s, color) {
        t /= 120000;

        var a = cw * 0.25 - s * 0.5,
            b = cw * 0.32 + s * 0.5,
            c = cw * 0.50 - s * 0.5,
            i, p, cos, sin;

        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        ctx.beginPath();
        ctx.arc(cx, cy, a, 0, TAU, false);
        ctx.stroke();

        for(i = 8; i--; ) {
            p = (t + i / 8) * TAU;
            cos = Math.cos(p);
            sin = Math.sin(p);
            line(ctx, cx + cos * b, cy + sin * b, cx + cos * c, cy + sin * c);
        }
    }

    function moon(ctx, t, cx, cy, cw, s, color) {
        t /= 15000;

        var a = cw * 0.29 - s * 0.5,
            b = cw * 0.05,
            c = Math.cos(t * TAU),
            p = c * TAU / -16;

        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        cx += c * b;

        ctx.beginPath();
        ctx.arc(cx, cy, a, p + TAU / 8, p + TAU * 7 / 8, false);
        ctx.arc(cx + Math.cos(p) * a * TWO_OVER_SQRT_2, cy + Math.sin(p) * a * TWO_OVER_SQRT_2, a, p + TAU * 5 / 8, p + TAU * 3 / 8, true);
        ctx.closePath();
        ctx.stroke();
    }

    function rain(ctx, t, cx, cy, cw, s, color) {
        t /= 1350;

        var a = cw * 0.16,
            b = TAU * 11 / 12,
            c = TAU *  7 / 12,
            i, p, x, y;

        ctx.fillStyle = color;

        for(i = 4; i--; ) {
            p = (t + i / 4) % 1;
            x = cx + ((i - 1.5) / 1.5) * (i === 1 || i === 2 ? -1 : 1) * a;
            y = cy + p * p * cw;
            ctx.beginPath();
            ctx.moveTo(x, y - s * 1.5);
            ctx.arc(x, y, s * 0.75, b, c, false);
            ctx.fill();
        }
    }

    function sleet(ctx, t, cx, cy, cw, s, color) {
        t /= 750;

        var a = cw * 0.1875,
            b = TAU * 11 / 12,
            c = TAU *  7 / 12,
            i, p, x, y;

        ctx.strokeStyle = color;
        ctx.lineWidth = s * 0.5;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        for(i = 4; i--; ) {
            p = (t + i / 4) % 1;
            x = Math.floor(cx + ((i - 1.5) / 1.5) * (i === 1 || i === 2 ? -1 : 1) * a) + 0.5;
            y = cy + p * cw;
            line(ctx, x, y - s * 1.5, x, y + s * 1.5);
        }
    }

    function snow(ctx, t, cx, cy, cw, s, color) {
        t /= 3000;

        var a  = cw * 0.16,
            b  = s * 0.75,
            u  = t * TAU * 0.7,
            ux = Math.cos(u) * b,
            uy = Math.sin(u) * b,
            v  = u + TAU / 3,
            vx = Math.cos(v) * b,
            vy = Math.sin(v) * b,
            w  = u + TAU * 2 / 3,
            wx = Math.cos(w) * b,
            wy = Math.sin(w) * b,
            i, p, x, y;

        ctx.strokeStyle = color;
        ctx.lineWidth = s * 0.5;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        for(i = 4; i--; ) {
            p = (t + i / 4) % 1;
            x = cx + Math.sin((p + i / 4) * TAU) * a;
            y = cy + p * cw;

            line(ctx, x - ux, y - uy, x + ux, y + uy);
            line(ctx, x - vx, y - vy, x + vx, y + vy);
            line(ctx, x - wx, y - wy, x + wx, y + wy);
        }
    }

    function fogbank(ctx, t, cx, cy, cw, s, color) {
        t /= 30000;

        var a = cw * 0.21,
            b = cw * 0.06,
            c = cw * 0.21,
            d = cw * 0.28;

        ctx.fillStyle = color;
        puffs(ctx, t, cx, cy, a, b, c, d);

        ctx.globalCompositeOperation = 'destination-out';
        puffs(ctx, t, cx, cy, a, b, c - s, d - s);
        ctx.globalCompositeOperation = 'source-over';
    }

    /*
     var WIND_PATHS = [
     downsample(63, upsample(8, [
     -1.00, -0.28,
     -0.75, -0.18,
     -0.50,  0.12,
     -0.20,  0.12,
     -0.04, -0.04,
     -0.07, -0.18,
     -0.19, -0.18,
     -0.23, -0.05,
     -0.12,  0.11,
     0.02,  0.16,
     0.20,  0.15,
     0.50,  0.07,
     0.75,  0.18,
     1.00,  0.28
     ])),
     downsample(31, upsample(16, [
     -1.00, -0.10,
     -0.75,  0.00,
     -0.50,  0.10,
     -0.25,  0.14,
     0.00,  0.10,
     0.25,  0.00,
     0.50, -0.10,
     0.75, -0.14,
     1.00, -0.10
     ]))
     ];
     */

    var WIND_PATHS = [
            [
                -0.7500, -0.1800, -0.7219, -0.1527, -0.6971, -0.1225,
                -0.6739, -0.0910, -0.6516, -0.0588, -0.6298, -0.0262,
                -0.6083,  0.0065, -0.5868,  0.0396, -0.5643,  0.0731,
                -0.5372,  0.1041, -0.5033,  0.1259, -0.4662,  0.1406,
                -0.4275,  0.1493, -0.3881,  0.1530, -0.3487,  0.1526,
                -0.3095,  0.1488, -0.2708,  0.1421, -0.2319,  0.1342,
                -0.1943,  0.1217, -0.1600,  0.1025, -0.1290,  0.0785,
                -0.1012,  0.0509, -0.0764,  0.0206, -0.0547, -0.0120,
                -0.0378, -0.0472, -0.0324, -0.0857, -0.0389, -0.1241,
                -0.0546, -0.1599, -0.0814, -0.1876, -0.1193, -0.1964,
                -0.1582, -0.1935, -0.1931, -0.1769, -0.2157, -0.1453,
                -0.2290, -0.1085, -0.2327, -0.0697, -0.2240, -0.0317,
                -0.2064,  0.0033, -0.1853,  0.0362, -0.1613,  0.0672,
                -0.1350,  0.0961, -0.1051,  0.1213, -0.0706,  0.1397,
                -0.0332,  0.1512,  0.0053,  0.1580,  0.0442,  0.1624,
                0.0833,  0.1636,  0.1224,  0.1615,  0.1613,  0.1565,
                0.1999,  0.1500,  0.2378,  0.1402,  0.2749,  0.1279,
                0.3118,  0.1147,  0.3487,  0.1015,  0.3858,  0.0892,
                0.4236,  0.0787,  0.4621,  0.0715,  0.5012,  0.0702,
                0.5398,  0.0766,  0.5768,  0.0890,  0.6123,  0.1055,
                0.6466,  0.1244,  0.6805,  0.1440,  0.7147,  0.1630,
                0.7500,  0.1800
            ],
            [
                -0.7500,  0.0000, -0.7033,  0.0195, -0.6569,  0.0399,
                -0.6104,  0.0600, -0.5634,  0.0789, -0.5155,  0.0954,
                -0.4667,  0.1089, -0.4174,  0.1206, -0.3676,  0.1299,
                -0.3174,  0.1365, -0.2669,  0.1398, -0.2162,  0.1391,
                -0.1658,  0.1347, -0.1157,  0.1271, -0.0661,  0.1169,
                -0.0170,  0.1046,  0.0316,  0.0903,  0.0791,  0.0728,
                0.1259,  0.0534,  0.1723,  0.0331,  0.2188,  0.0129,
                0.2656, -0.0064,  0.3122, -0.0263,  0.3586, -0.0466,
                0.4052, -0.0665,  0.4525, -0.0847,  0.5007, -0.1002,
                0.5497, -0.1130,  0.5991, -0.1240,  0.6491, -0.1325,
                0.6994, -0.1380,  0.7500, -0.1400
            ]
        ],
        WIND_OFFSETS = [
            {start: 0.36, end: 0.11},
            {start: 0.56, end: 0.16}
        ];

    function leaf(ctx, t, x, y, cw, s, color) {
        var a = cw / 8,
            b = a / 3,
            c = 2 * b,
            d = (t % 1) * TAU,
            e = Math.cos(d),
            f = Math.sin(d);

        ctx.fillStyle = color;
        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        ctx.beginPath();
        ctx.arc(x        , y        , a, d          , d + Math.PI, false);
        ctx.arc(x - b * e, y - b * f, c, d + Math.PI, d          , false);
        ctx.arc(x + c * e, y + c * f, b, d + Math.PI, d          , true );
        ctx.globalCompositeOperation = 'destination-out';
        ctx.fill();
        ctx.globalCompositeOperation = 'source-over';
        ctx.stroke();
    }

    function swoosh(ctx, t, cx, cy, cw, s, index, total, color) {
        t /= 2500;

        var path = WIND_PATHS[index],
            a = (t + index - WIND_OFFSETS[index].start) % total,
            c = (t + index - WIND_OFFSETS[index].end  ) % total,
            e = (t + index                            ) % total,
            b, d, f, i;

        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        if(a < 1) {
            ctx.beginPath();

            a *= path.length / 2 - 1;
            b  = Math.floor(a);
            a -= b;
            b *= 2;
            b += 2;

            ctx.moveTo(
                cx + (path[b - 2] * (1 - a) + path[b    ] * a) * cw,
                cy + (path[b - 1] * (1 - a) + path[b + 1] * a) * cw
            );

            if(c < 1) {
                c *= path.length / 2 - 1;
                d  = Math.floor(c);
                c -= d;
                d *= 2;
                d += 2;

                for(i = b; i !== d; i += 2)
                    ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);

                ctx.lineTo(
                    cx + (path[d - 2] * (1 - c) + path[d    ] * c) * cw,
                    cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw
                );
            }

            else
                for(i = b; i !== path.length; i += 2)
                    ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);

            ctx.stroke();
        }

        else if(c < 1) {
            ctx.beginPath();

            c *= path.length / 2 - 1;
            d  = Math.floor(c);
            c -= d;
            d *= 2;
            d += 2;

            ctx.moveTo(cx + path[0] * cw, cy + path[1] * cw);

            for(i = 2; i !== d; i += 2)
                ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);

            ctx.lineTo(
                cx + (path[d - 2] * (1 - c) + path[d    ] * c) * cw,
                cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw
            );

            ctx.stroke();
        }

        if(e < 1) {
            e *= path.length / 2 - 1;
            f  = Math.floor(e);
            e -= f;
            f *= 2;
            f += 2;

            leaf(
                ctx,
                t,
                cx + (path[f - 2] * (1 - e) + path[f    ] * e) * cw,
                cy + (path[f - 1] * (1 - e) + path[f + 1] * e) * cw,
                cw,
                s,
                color
            );
        }
    }

    var Skycons = function(opts) {
        this.list        = [];
        this.interval    = null;
        this.color       = opts && opts.color ? opts.color : "black";
        this.resizeClear = !!(opts && opts.resizeClear);
    };

    Skycons.CLEAR_DAY = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        sun(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);
    };

    Skycons.CLEAR_NIGHT = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        moon(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);
    };

    Skycons.PARTLY_CLOUDY_DAY = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        sun(ctx, t, w * 0.625, h * 0.375, s * 0.75, s * STROKE, color);
        cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);
    };

    Skycons.PARTLY_CLOUDY_NIGHT = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        moon(ctx, t, w * 0.667, h * 0.375, s * 0.75, s * STROKE, color);
        cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);
    };

    Skycons.CLOUDY = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        cloud(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);
    };

    Skycons.RAIN = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        rain(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
        cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
    };

    Skycons.SLEET = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        sleet(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
        cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
    };

    Skycons.SNOW = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        snow(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
        cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
    };

    Skycons.WIND = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 0, 2, color);
        swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 1, 2, color);
    };

    Skycons.FOG = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h),
            k = s * STROKE;

        fogbank(ctx, t, w * 0.5, h * 0.32, s * 0.75, k, color);

        t /= 5000;

        var a = Math.cos((t       ) * TAU) * s * 0.02,
            b = Math.cos((t + 0.25) * TAU) * s * 0.02,
            c = Math.cos((t + 0.50) * TAU) * s * 0.02,
            d = Math.cos((t + 0.75) * TAU) * s * 0.02,
            n = h * 0.936,
            e = Math.floor(n - k * 0.5) + 0.5,
            f = Math.floor(n - k * 2.5) + 0.5;

        ctx.strokeStyle = color;
        ctx.lineWidth = k;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        line(ctx, a + w * 0.2 + k * 0.5, e, b + w * 0.8 - k * 0.5, e);
        line(ctx, c + w * 0.2 + k * 0.5, f, d + w * 0.8 - k * 0.5, f);
    };

    Skycons.prototype = {
        _determineDrawingFunction: function(draw) {
            if(typeof draw === "string")
                draw = Skycons[draw.toUpperCase().replace(/-/g, "_")] || null;

            return draw;
        },
        add: function(el, draw) {
            var obj;

            if(typeof el === "string")
                el = document.getElementById(el);

            // Does nothing if canvas name doesn't exists
            if(el === null)
                return;

            draw = this._determineDrawingFunction(draw);

            // Does nothing if the draw function isn't actually a function
            if(typeof draw !== "function")
                return;

            obj = {
                element: el,
                context: el.getContext("2d"),
                drawing: draw
            };

            this.list.push(obj);
            this.draw(obj, KEYFRAME);
        },
        set: function(el, draw) {
            var i;

            if(typeof el === "string")
                el = document.getElementById(el);

            for(i = this.list.length; i--; )
                if(this.list[i].element === el) {
                    this.list[i].drawing = this._determineDrawingFunction(draw);
                    this.draw(this.list[i], KEYFRAME);
                    return;
                }

            this.add(el, draw);
        },
        remove: function(el) {
            var i;

            if(typeof el === "string")
                el = document.getElementById(el);

            for(i = this.list.length; i--; )
                if(this.list[i].element === el) {
                    this.list.splice(i, 1);
                    return;
                }
        },
        draw: function(obj, time) {
            var canvas = obj.context.canvas;

            if(this.resizeClear)
                canvas.width = canvas.width;

            else
                obj.context.clearRect(0, 0, canvas.width, canvas.height);

            obj.drawing(obj.context, time, this.color);
        },
        play: function() {
            var self = this;

            this.pause();
            this.interval = requestInterval(function() {
                var now = Date.now(),
                    i;

                for(i = self.list.length; i--; )
                    self.draw(self.list[i], now);
            }, 1000 / 60);
        },
        pause: function() {
            var i;

            if(this.interval) {
                cancelInterval(this.interval);
                this.interval = null;
            }
        }
    };

    global.Skycons = Skycons;
}(this));

// +--------------------------------------------------------------------+ \\
// � Rapha�l 2.1.0 - JavaScript Vector Library                          � \\
// +--------------------------------------------------------------------� \\
// � Copyright � 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    � \\
// � Copyright � 2008-2012 Sencha Labs (http://sencha.com)              � \\
// +--------------------------------------------------------------------� \\
// � Licensed under the MIT (http://raphaeljs.com/license.html) license.� \\
// +--------------------------------------------------------------------+ \\

(function(a){var b="0.3.4",c="hasOwnProperty",d=/[\.\/]/,e="*",f=function(){},g=function(a,b){return a-b},h,i,j={n:{}},k=function(a,b){var c=j,d=i,e=Array.prototype.slice.call(arguments,2),f=k.listeners(a),l=0,m=!1,n,o=[],p={},q=[],r=h,s=[];h=a,i=0;for(var t=0,u=f.length;t<u;t++)"zIndex"in f[t]&&(o.push(f[t].zIndex),f[t].zIndex<0&&(p[f[t].zIndex]=f[t]));o.sort(g);while(o[l]<0){n=p[o[l++]],q.push(n.apply(b,e));if(i){i=d;return q}}for(t=0;t<u;t++){n=f[t];if("zIndex"in n)if(n.zIndex==o[l]){q.push(n.apply(b,e));if(i)break;do{l++,n=p[o[l]],n&&q.push(n.apply(b,e));if(i)break}while(n)}else p[n.zIndex]=n;else{q.push(n.apply(b,e));if(i)break}}i=d,h=r;return q.length?q:null};k.listeners=function(a){var b=a.split(d),c=j,f,g,h,i,k,l,m,n,o=[c],p=[];for(i=0,k=b.length;i<k;i++){n=[];for(l=0,m=o.length;l<m;l++){c=o[l].n,g=[c[b[i]],c[e]],h=2;while(h--)f=g[h],f&&(n.push(f),p=p.concat(f.f||[]))}o=n}return p},k.on=function(a,b){var c=a.split(d),e=j;for(var g=0,h=c.length;g<h;g++)e=e.n,!e[c[g]]&&(e[c[g]]={n:{}}),e=e[c[g]];e.f=e.f||[];for(g=0,h=e.f.length;g<h;g++)if(e.f[g]==b)return f;e.f.push(b);return function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){i=1},k.nt=function(a){if(a)return(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(h);return h},k.off=k.unbind=function(a,b){var f=a.split(d),g,h,i,k,l,m,n,o=[j];for(k=0,l=f.length;k<l;k++)for(m=0;m<o.length;m+=i.length-2){i=[m,1],g=o[m].n;if(f[k]!=e)g[f[k]]&&i.push(g[f[k]]);else for(h in g)g[c](h)&&i.push(g[h]);o.splice.apply(o,i)}for(k=0,l=o.length;k<l;k++){g=o[k];while(g.n){if(b){if(g.f){for(m=0,n=g.f.length;m<n;m++)if(g.f[m]==b){g.f.splice(m,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n[c](h)&&g.n[h].f){var p=g.n[h].f;for(m=0,n=p.length;m<n;m++)if(p[m]==b){p.splice(m,1);break}!p.length&&delete g.n[h].f}}else{delete g.f;for(h in g.n)g.n[c](h)&&g.n[h].f&&delete g.n[h].f}g=g.n}}},k.once=function(a,b){var c=function(){var d=b.apply(this,arguments);k.unbind(a,c);return d};return k.on(a,c)},k.version=b,k.toString=function(){return"You are running Eve "+b},typeof module!="undefined"&&module.exports?module.exports=k:typeof define!="undefined"?define("eve",[],function(){return k}):a.eve=k})(this),function(){function cF(a){for(var b=0;b<cy.length;b++)cy[b].el.paper==a&&cy.splice(b--,1)}function cE(b,d,e,f,h,i){e=Q(e);var j,k,l,m=[],o,p,q,t=b.ms,u={},v={},w={};if(f)for(y=0,z=cy.length;y<z;y++){var x=cy[y];if(x.el.id==d.id&&x.anim==b){x.percent!=e?(cy.splice(y,1),l=1):k=x,d.attr(x.totalOrigin);break}}else f=+v;for(var y=0,z=b.percents.length;y<z;y++){if(b.percents[y]==e||b.percents[y]>f*b.top){e=b.percents[y],p=b.percents[y-1]||0,t=t/b.top*(e-p),o=b.percents[y+1],j=b.anim[e];break}f&&d.attr(b.anim[b.percents[y]])}if(!!j){if(!k){for(var A in j)if(j[g](A))if(U[g](A)||d.paper.customAttributes[g](A)){u[A]=d.attr(A),u[A]==null&&(u[A]=T[A]),v[A]=j[A];switch(U[A]){case C:w[A]=(v[A]-u[A])/t;break;case"colour":u[A]=a.getRGB(u[A]);var B=a.getRGB(v[A]);w[A]={r:(B.r-u[A].r)/t,g:(B.g-u[A].g)/t,b:(B.b-u[A].b)/t};break;case"path":var D=bR(u[A],v[A]),E=D[1];u[A]=D[0],w[A]=[];for(y=0,z=u[A].length;y<z;y++){w[A][y]=[0];for(var F=1,G=u[A][y].length;F<G;F++)w[A][y][F]=(E[y][F]-u[A][y][F])/t}break;case"transform":var H=d._,I=ca(H[A],v[A]);if(I){u[A]=I.from,v[A]=I.to,w[A]=[],w[A].real=!0;for(y=0,z=u[A].length;y<z;y++){w[A][y]=[u[A][y][0]];for(F=1,G=u[A][y].length;F<G;F++)w[A][y][F]=(v[A][y][F]-u[A][y][F])/t}}else{var J=d.matrix||new cb,K={_:{transform:H.transform},getBBox:function(){return d.getBBox(1)}};u[A]=[J.a,J.b,J.c,J.d,J.e,J.f],b$(K,v[A]),v[A]=K._.transform,w[A]=[(K.matrix.a-J.a)/t,(K.matrix.b-J.b)/t,(K.matrix.c-J.c)/t,(K.matrix.d-J.d)/t,(K.matrix.e-J.e)/t,(K.matrix.f-J.f)/t]}break;case"csv":var L=r(j[A])[s](c),M=r(u[A])[s](c);if(A=="clip-rect"){u[A]=M,w[A]=[],y=M.length;while(y--)w[A][y]=(L[y]-u[A][y])/t}v[A]=L;break;default:L=[][n](j[A]),M=[][n](u[A]),w[A]=[],y=d.paper.customAttributes[A].length;while(y--)w[A][y]=((L[y]||0)-(M[y]||0))/t}}var O=j.easing,P=a.easing_formulas[O];if(!P){P=r(O).match(N);if(P&&P.length==5){var R=P;P=function(a){return cC(a,+R[1],+R[2],+R[3],+R[4],t)}}else P=bf}q=j.start||b.start||+(new Date),x={anim:b,percent:e,timestamp:q,start:q+(b.del||0),status:0,initstatus:f||0,stop:!1,ms:t,easing:P,from:u,diff:w,to:v,el:d,callback:j.callback,prev:p,next:o,repeat:i||b.times,origin:d.attr(),totalOrigin:h},cy.push(x);if(f&&!k&&!l){x.stop=!0,x.start=new Date-t*f;if(cy.length==1)return cA()}l&&(x.start=new Date-x.ms*f),cy.length==1&&cz(cA)}else k.initstatus=f,k.start=new Date-k.ms*f;eve("raphael.anim.start."+d.id,d,b)}}function cD(a,b){var c=[],d={};this.ms=b,this.times=1;if(a){for(var e in a)a[g](e)&&(d[Q(e)]=a[e],c.push(Q(e)));c.sort(bd)}this.anim=d,this.top=c[c.length-1],this.percents=c}function cC(a,b,c,d,e,f){function o(a,b){var c,d,e,f,j,k;for(e=a,k=0;k<8;k++){f=m(e)-a;if(z(f)<b)return e;j=(3*i*e+2*h)*e+g;if(z(j)<1e-6)break;e=e-f/j}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(z(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}function n(a,b){var c=o(a,b);return((l*c+k)*c+j)*c}function m(a){return((i*a+h)*a+g)*a}var g=3*b,h=3*(d-b)-g,i=1-g-h,j=3*c,k=3*(e-c)-j,l=1-j-k;return n(a,1/(200*f))}function cq(){return this.x+q+this.y+q+this.width+" � "+this.height}function cp(){return this.x+q+this.y}function cb(a,b,c,d,e,f){a!=null?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function bH(b,c,d){b=a._path2curve(b),c=a._path2curve(c);var e,f,g,h,i,j,k,l,m,n,o=d?0:[];for(var p=0,q=b.length;p<q;p++){var r=b[p];if(r[0]=="M")e=i=r[1],f=j=r[2];else{r[0]=="C"?(m=[e,f].concat(r.slice(1)),e=m[6],f=m[7]):(m=[e,f,e,f,i,j,i,j],e=i,f=j);for(var s=0,t=c.length;s<t;s++){var u=c[s];if(u[0]=="M")g=k=u[1],h=l=u[2];else{u[0]=="C"?(n=[g,h].concat(u.slice(1)),g=n[6],h=n[7]):(n=[g,h,g,h,k,l,k,l],g=k,h=l);var v=bG(m,n,d);if(d)o+=v;else{for(var w=0,x=v.length;w<x;w++)v[w].segment1=p,v[w].segment2=s,v[w].bez1=m,v[w].bez2=n;o=o.concat(v)}}}}}return o}function bG(b,c,d){var e=a.bezierBBox(b),f=a.bezierBBox(c);if(!a.isBBoxIntersect(e,f))return d?0:[];var g=bB.apply(0,b),h=bB.apply(0,c),i=~~(g/5),j=~~(h/5),k=[],l=[],m={},n=d?0:[];for(var o=0;o<i+1;o++){var p=a.findDotsAtSegment.apply(a,b.concat(o/i));k.push({x:p.x,y:p.y,t:o/i})}for(o=0;o<j+1;o++)p=a.findDotsAtSegment.apply(a,c.concat(o/j)),l.push({x:p.x,y:p.y,t:o/j});for(o=0;o<i;o++)for(var q=0;q<j;q++){var r=k[o],s=k[o+1],t=l[q],u=l[q+1],v=z(s.x-r.x)<.001?"y":"x",w=z(u.x-t.x)<.001?"y":"x",x=bD(r.x,r.y,s.x,s.y,t.x,t.y,u.x,u.y);if(x){if(m[x.x.toFixed(4)]==x.y.toFixed(4))continue;m[x.x.toFixed(4)]=x.y.toFixed(4);var y=r.t+z((x[v]-r[v])/(s[v]-r[v]))*(s.t-r.t),A=t.t+z((x[w]-t[w])/(u[w]-t[w]))*(u.t-t.t);y>=0&&y<=1&&A>=0&&A<=1&&(d?n++:n.push({x:x.x,y:x.y,t1:y,t2:A}))}}return n}function bF(a,b){return bG(a,b,1)}function bE(a,b){return bG(a,b)}function bD(a,b,c,d,e,f,g,h){if(!(x(a,c)<y(e,g)||y(a,c)>x(e,g)||x(b,d)<y(f,h)||y(b,d)>x(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(!k)return;var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(n<+y(a,c).toFixed(2)||n>+x(a,c).toFixed(2)||n<+y(e,g).toFixed(2)||n>+x(e,g).toFixed(2)||o<+y(b,d).toFixed(2)||o>+x(b,d).toFixed(2)||o<+y(f,h).toFixed(2)||o>+x(f,h).toFixed(2))return;return{x:l,y:m}}}function bC(a,b,c,d,e,f,g,h,i){if(!(i<0||bB(a,b,c,d,e,f,g,h)<i)){var j=1,k=j/2,l=j-k,m,n=.01;m=bB(a,b,c,d,e,f,g,h,l);while(z(m-i)>n)k/=2,l+=(m<i?1:-1)*k,m=bB(a,b,c,d,e,f,g,h,l);return l}}function bB(a,b,c,d,e,f,g,h,i){i==null&&(i=1),i=i>1?1:i<0?0:i;var j=i/2,k=12,l=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],n=0;for(var o=0;o<k;o++){var p=j*l[o]+j,q=bA(p,a,c,e,g),r=bA(p,b,d,f,h),s=q*q+r*r;n+=m[o]*w.sqrt(s)}return j*n}function bA(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function by(a,b){var c=[];for(var d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function bx(){return this.hex}function bv(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("?"),h=d.cache=d.cache||{},i=d.count=d.count||[];if(h[g](f)){bu(i,f);return c?c(h[f]):h[f]}i.length>=1e3&&delete h[i.shift()],i.push(f),h[f]=a[m](b,e);return c?c(h[f]):h[f]}return d}function bu(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function bm(a){if(Object(a)!==a)return a;var b=new a.constructor;for(var c in a)a[g](c)&&(b[c]=bm(a[c]));return b}function a(c){if(a.is(c,"function"))return b?c():eve.on("raphael.DOMload",c);if(a.is(c,E))return a._engine.create[m](a,c.splice(0,3+a.is(c[0],C))).add(c);var d=Array.prototype.slice.call(arguments,0);if(a.is(d[d.length-1],"function")){var e=d.pop();return b?e.call(a._engine.create[m](a,d)):eve.on("raphael.DOMload",function(){e.call(a._engine.create[m](a,d))})}return a._engine.create[m](a,arguments)}a.version="2.1.0",a.eve=eve;var b,c=/[, ]+/,d={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},e=/\{(\d+)\}/g,f="prototype",g="hasOwnProperty",h={doc:document,win:window},i={was:Object.prototype[g].call(h.win,"Raphael"),is:h.win.Raphael},j=function(){this.ca=this.customAttributes={}},k,l="appendChild",m="apply",n="concat",o="createTouch"in h.doc,p="",q=" ",r=String,s="split",t="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[s](q),u={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v=r.prototype.toLowerCase,w=Math,x=w.max,y=w.min,z=w.abs,A=w.pow,B=w.PI,C="number",D="string",E="array",F="toString",G="fill",H=Object.prototype.toString,I={},J="push",K=a._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,M={NaN:1,Infinity:1,"-Infinity":1},N=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,O=w.round,P="setAttribute",Q=parseFloat,R=parseInt,S=r.prototype.toUpperCase,T=a._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},U=a._availableAnimAttrs={blur:C,"clip-rect":"csv",cx:C,cy:C,fill:"colour","fill-opacity":C,"font-size":C,height:C,opacity:C,path:"path",r:C,rx:C,ry:C,stroke:"colour","stroke-opacity":C,"stroke-width":C,transform:"transform",width:C,x:C,y:C},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,W=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,X={hs:1,rg:1},Y=/,?([achlmqrstvxz]),?/gi,Z=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,$=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,_=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,ba=a._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,bb={},bc=function(a,b){return a.key-b.key},bd=function(a,b){return Q(a)-Q(b)},be=function(){},bf=function(a){return a},bg=a._rectPath=function(a,b,c,d,e){if(e)return[["M",a+e,b],["l",c-e*2,0],["a",e,e,0,0,1,e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-c,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]];return[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},bh=function(a,b,c,d){d==null&&(d=c);return[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},bi=a._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return bh(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return bh(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return bg(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return bg(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return bg(b.x,b.y,b.width,b.height)}},bj=a.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;a=bR(a);for(e=0,g=a.length;e<g;e++){i=a[e];for(f=1,h=i.length;f<h;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d}return a};a._g=h,a.type=h.win.SVGAngle||h.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(a.type=="VML"){var bk=h.doc.createElement("div"),bl;bk.innerHTML='<v:shape adj="1"/>',bl=bk.firstChild,bl.style.behavior="url(#default#VML)";if(!bl||typeof bl.adj!="object")return a.type=p;bk=null}a.svg=!(a.vml=a.type=="VML"),a._Paper=j,a.fn=k=j.prototype=a.prototype,a._id=0,a._oid=0,a.is=function(a,b){b=v.call(b);if(b=="finite")return!M[g](+a);if(b=="array")return a instanceof Array;return b=="null"&&a===null||b==typeof a&&a!==null||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||H.call(a).slice(8,-1).toLowerCase()==b},a.angle=function(b,c,d,e,f,g){if(f==null){var h=b-d,i=c-e;if(!h&&!i)return 0;return(180+w.atan2(-i,-h)*180/B+360)%360}return a.angle(b,c,f,g)-a.angle(d,e,f,g)},a.rad=function(a){return a%360*B/180},a.deg=function(a){return a*180/B%360},a.snapTo=function(b,c,d){d=a.is(d,"finite")?d:10;if(a.is(b,E)){var e=b.length;while(e--)if(z(b[e]-c)<=d)return b[e]}else{b=+b;var f=c%b;if(f<d)return c-f;if(f>b-d)return c-f+b}return c};var bn=a.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=w.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)});a.setWindow=function(b){eve("raphael.setWindow",a,h.win,b),h.win=b,h.doc=h.win.document,a._engine.initWin&&a._engine.initWin(h.win)};var bo=function(b){if(a.vml){var c=/^\s+|\s+$/g,d;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),d=e.body}catch(f){d=createPopup().document.body}var g=d.createTextRange();bo=bv(function(a){try{d.style.color=r(a).replace(c,p);var b=g.queryCommandValue("ForeColor");b=(b&255)<<16|b&65280|(b&16711680)>>>16;return"#"+("000000"+b.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=h.doc.createElement("i");i.title="Rapha�l Colour Picker",i.style.display="none",h.doc.body.appendChild(i),bo=bv(function(a){i.style.color=a;return h.doc.defaultView.getComputedStyle(i,p).getPropertyValue("color")})}return bo(b)},bp=function(){return"hsb("+[this.h,this.s,this.b]+")"},bq=function(){return"hsl("+[this.h,this.s,this.l]+")"},br=function(){return this.hex},bs=function(b,c,d){c==null&&a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b&&(d=b.b,c=b.g,b=b.r);if(c==null&&a.is(b,D)){var e=a.getRGB(b);b=e.r,c=e.g,d=e.b}if(b>1||c>1||d>1)b/=255,c/=255,d/=255;return[b,c,d]},bt=function(b,c,d,e){b*=255,c*=255,d*=255;var f={r:b,g:c,b:d,hex:a.rgb(b,c,d),toString:br};a.is(e,"finite")&&(f.opacity=e);return f};a.color=function(b){var c;a.is(b,"object")&&"h"in b&&"s"in b&&"b"in b?(c=a.hsb2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):a.is(b,"object")&&"h"in b&&"s"in b&&"l"in b?(c=a.hsl2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):(a.is(b,"string")&&(b=a.getRGB(b)),a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b?(c=a.rgb2hsl(b),b.h=c.h,b.s=c.s,b.l=c.l,c=a.rgb2hsb(b),b.v=c.b):(b={hex:"none"},b.r=b.g=b.b=b.h=b.s=b.v=b.l=-1)),b.toString=br;return b},a.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;a=a%360/60,i=c*b,h=i*(1-z(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a];return bt(e,f,g,d)},a.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h);if(a>1||b>1||c>1)a/=360,b/=100,c/=100;a*=360;var e,f,g,h,i;a=a%360/60,i=2*b*(c<.5?c:1-c),h=i*(1-z(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a];return bt(e,f,g,d)},a.rgb2hsb=function(a,b,c){c=bs(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;f=x(a,b,c),g=f-y(a,b,c),d=g==0?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=g==0?0:g/f;return{h:d,s:e,b:f,toString:bp}},a.rgb2hsl=function(a,b,c){c=bs(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;g=x(a,b,c),h=y(a,b,c),i=g-h,d=i==0?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=i==0?0:f<.5?i/(2*f):i/(2-2*f);return{h:d,s:e,l:f,toString:bq}},a._path2string=function(){return this.join(",").replace(Y,"$1")};var bw=a._preload=function(a,b){var c=h.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,h.doc.body.removeChild(this)},c.onerror=function(){h.doc.body.removeChild(this)},h.doc.body.appendChild(c),c.src=a};a.getRGB=bv(function(b){if(!b||!!((b=r(b)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bx};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:bx};!X[g](b.toLowerCase().substring(0,2))&&b.charAt()!="#"&&(b=bo(b));var c,d,e,f,h,i,j,k=b.match(L);if(k){k[2]&&(f=R(k[2].substring(5),16),e=R(k[2].substring(3,5),16),d=R(k[2].substring(1,3),16)),k[3]&&(f=R((i=k[3].charAt(3))+i,16),e=R((i=k[3].charAt(2))+i,16),d=R((i=k[3].charAt(1))+i,16)),k[4]&&(j=k[4][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),k[1].toLowerCase().slice(0,4)=="rgba"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100));if(k[5]){j=k[5][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="�")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsba"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100);return a.hsb2rgb(d,e,f,h)}if(k[6]){j=k[6][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="�")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsla"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100);return a.hsl2rgb(d,e,f,h)}k={r:d,g:e,b:f,toString:bx},k.hex="#"+(16777216|f|e<<8|d<<16).toString(16).slice(1),a.is(h,"finite")&&(k.opacity=h);return k}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bx}},a),a.hsb=bv(function(b,c,d){return a.hsb2rgb(b,c,d).hex}),a.hsl=bv(function(b,c,d){return a.hsl2rgb(b,c,d).hex}),a.rgb=bv(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),a.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b}));return c.hex},a.getColor.reset=function(){delete this.start},a.parsePathString=function(b){if(!b)return null;var c=bz(b);if(c.arr)return bJ(c.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];a.is(b,E)&&a.is(b[0],E)&&(e=bJ(b)),e.length||r(b).replace(Z,function(a,b,c){var f=[],g=b.toLowerCase();c.replace(_,function(a,b){b&&f.push(+b)}),g=="m"&&f.length>2&&(e.push([b][n](f.splice(0,2))),g="l",b=b=="m"?"l":"L");if(g=="r")e.push([b][n](f));else while(f.length>=d[g]){e.push([b][n](f.splice(0,d[g])));if(!d[g])break}}),e.toString=a._path2string,c.arr=bJ(e);return e},a.parseTransformString=bv(function(b){if(!b)return null;var c={r:3,s:4,t:2,m:6},d=[];a.is(b,E)&&a.is(b[0],E)&&(d=bJ(b)),d.length||r(b).replace($,function(a,b,c){var e=[],f=v.call(b);c.replace(_,function(a,b){b&&e.push(+b)}),d.push([b][n](e))}),d.toString=a._path2string;return d});var bz=function(a){var b=bz.ps=bz.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[g](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])});return b[a]};a.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=A(j,3),l=A(j,2),m=i*i,n=m*i,o=k*a+l*3*i*c+j*3*i*i*e+n*g,p=k*b+l*3*i*d+j*3*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,x=j*e+i*g,y=j*f+i*h,z=90-w.atan2(q-s,r-t)*180/B;(q>s||r<t)&&(z+=180);return{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:x,y:y},alpha:z}},a.bezierBBox=function(b,c,d,e,f,g,h,i){a.is(b,"array")||(b=[b,c,d,e,f,g,h,i]);var j=bQ.apply(null,b);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},a.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},a.isBBoxIntersect=function(b,c){var d=a.isPointInsideBBox;return d(c,b.x,b.y)||d(c,b.x2,b.y)||d(c,b.x,b.y2)||d(c,b.x2,b.y2)||d(b,c.x,c.y)||d(b,c.x2,c.y)||d(b,c.x,c.y2)||d(b,c.x2,c.y2)||(b.x<c.x2&&b.x>c.x||c.x<b.x2&&c.x>b.x)&&(b.y<c.y2&&b.y>c.y||c.y<b.y2&&c.y>b.y)},a.pathIntersection=function(a,b){return bH(a,b)},a.pathIntersectionNumber=function(a,b){return bH(a,b,1)},a.isPointInsidePath=function(b,c,d){var e=a.pathBBox(b);return a.isPointInsideBBox(e,c,d)&&bH(b,[["M",c,d],["H",e.x2+10]],1)%2==1},a._removedFactory=function(a){return function(){eve("raphael.log",null,"Rapha�l: you are calling to method �"+a+"� of removed object",a)}};var bI=a.pathBBox=function(a){var b=bz(a);if(b.bbox)return b.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=bR(a);var c=0,d=0,e=[],f=[],g;for(var h=0,i=a.length;h<i;h++){g=a[h];if(g[0]=="M")c=g[1],d=g[2],e.push(c),f.push(d);else{var j=bQ(c,d,g[1],g[2],g[3],g[4],g[5],g[6]);e=e[n](j.min.x,j.max.x),f=f[n](j.min.y,j.max.y),c=g[5],d=g[6]}}var k=y[m](0,e),l=y[m](0,f),o=x[m](0,e),p=x[m](0,f),q={x:k,y:l,x2:o,y2:p,width:o-k,height:p-l};b.bbox=bm(q);return q},bJ=function(b){var c=bm(b);c.toString=a._path2string;return c},bK=a._pathToRelative=function(b){var c=bz(b);if(c.rel)return bJ(c.rel);if(!a.is(b,E)||!a.is(b&&b[0],E))b=a.parsePathString(b);var d=[],e=0,f=0,g=0,h=0,i=0;b[0][0]=="M"&&(e=b[0][1],f=b[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=b.length;j<k;j++){var l=d[j]=[],m=b[j];if(m[0]!=v.call(m[0])){l[0]=v.call(m[0]);switch(l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;n<o;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}}else{l=d[j]=[],m[0]=="m"&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;p<q;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}d.toString=a._path2string,c.rel=bJ(d);return d},bL=a._pathToAbsolute=function(b){var c=bz(b);if(c.abs)return bJ(c.abs);if(!a.is(b,E)||!a.is(b&&b[0],E))b=a.parsePathString(b);if(!b||!b.length)return[["M",0,0]];var d=[],e=0,f=0,g=0,h=0,i=0;b[0][0]=="M"&&(e=+b[0][1],f=+b[0][2],g=e,h=f,i++,d[0]=["M",e,f]);var j=b.length==3&&b[0][0]=="M"&&b[1][0].toUpperCase()=="R"&&b[2][0].toUpperCase()=="Z";for(var k,l,m=i,o=b.length;m<o;m++){d.push(k=[]),l=b[m];if(l[0]!=S.call(l[0])){k[0]=S.call(l[0]);switch(k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":var p=[e,f][n](l.slice(1));for(var q=2,r=p.length;q<r;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[n](by(p,j));break;case"M":g=+l[1]+e,h=+l[2]+f;default:for(q=1,r=l.length;q<r;q++)k[q]=+l[q]+(q%2?e:f)}}else if(l[0]=="R")p=[e,f][n](l.slice(1)),d.pop(),d=d[n](by(p,j)),k=["R"][n](l.slice(-2));else for(var s=0,t=l.length;s<t;s++)k[s]=l[s];switch(k[0]){case"Z":e=g,f=h;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":g=k[k.length-2],h=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}d.toString=a._path2string,c.abs=bJ(d);return d},bM=function(a,b,c,d){return[a,b,c,d,c,d]},bN=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},bO=function(a,b,c,d,e,f,g,h,i,j){var k=B*120/180,l=B/180*(+e||0),m=[],o,p=bv(function(a,b,c){var d=a*w.cos(c)-b*w.sin(c),e=a*w.sin(c)+b*w.cos(c);return{x:d,y:e}});if(!j){o=p(a,b,-l),a=o.x,b=o.y,o=p(h,i,-l),h=o.x,i=o.y;var q=w.cos(B/180*e),r=w.sin(B/180*e),t=(a-h)/2,u=(b-i)/2,v=t*t/(c*c)+u*u/(d*d);v>1&&(v=w.sqrt(v),c=v*c,d=v*d);var x=c*c,y=d*d,A=(f==g?-1:1)*w.sqrt(z((x*y-x*u*u-y*t*t)/(x*u*u+y*t*t))),C=A*c*u/d+(a+h)/2,D=A*-d*t/c+(b+i)/2,E=w.asin(((b-D)/d).toFixed(9)),F=w.asin(((i-D)/d).toFixed(9));E=a<C?B-E:E,F=h<C?B-F:F,E<0&&(E=B*2+E),F<0&&(F=B*2+F),g&&E>F&&(E=E-B*2),!g&&F>E&&(F=F-B*2)}else E=j[0],F=j[1],C=j[2],D=j[3];var G=F-E;if(z(G)>k){var H=F,I=h,J=i;F=E+k*(g&&F>E?1:-1),h=C+c*w.cos(F),i=D+d*w.sin(F),m=bO(h,i,c,d,e,0,g,I,J,[F,H,C,D])}G=F-E;var K=w.cos(E),L=w.sin(E),M=w.cos(F),N=w.sin(F),O=w.tan(G/4),P=4/3*c*O,Q=4/3*d*O,R=[a,b],S=[a+P*L,b-Q*K],T=[h+P*N,i-Q*M],U=[h,i];S[0]=2*R[0]-S[0],S[1]=2*R[1]-S[1];if(j)return[S,T,U][n](m);m=[S,T,U][n](m).join()[s](",");var V=[];for(var W=0,X=m.length;W<X;W++)V[W]=W%2?p(m[W-1],m[W],l).y:p(m[W],m[W+1],l).x;return V},bP=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:A(j,3)*a+A(j,2)*3*i*c+j*3*i*i*e+A(i,3)*g,y:A(j,3)*b+A(j,2)*3*i*d+j*3*i*i*f+A(i,3)*h}},bQ=bv(function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+w.sqrt(j*j-4*i*k))/2/i,n=(-j-w.sqrt(j*j-4*i*k))/2/i,o=[b,h],p=[a,g],q;z(l)>"1e12"&&(l=.5),z(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=bP(a,b,c,d,e,f,g,h,l),p.push(q.x),o.push(q.y)),n>0&&n<1&&(q=bP(a,b,c,d,e,f,g,h,n),p.push(q.x),o.push(q.y)),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+w.sqrt(j*j-4*i*k))/2/i,n=(-j-w.sqrt(j*j-4*i*k))/2/i,z(l)>"1e12"&&(l=.5),z(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=bP(a,b,c,d,e,f,g,h,l),p.push(q.x),o.push(q.y)),n>0&&n<1&&(q=bP(a,b,c,d,e,f,g,h,n),p.push(q.x),o.push(q.y));return{min:{x:y[m](0,p),y:y[m](0,o)},max:{x:x[m](0,p),y:x[m](0,o)}}}),bR=a._path2curve=bv(function(a,b){var c=!b&&bz(a);if(!b&&c.curve)return bJ(c.curve);var d=bL(a),e=b&&bL(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][n](bO[m](0,[b.x,b.y][n](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][n](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][n](bN(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][n](bN(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][n](bM(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][n](bM(b.x,b.y,a[1],b.y));break;case"V":a=["C"][n](bM(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][n](bM(b.x,b.y,b.X,b.Y))}return a},i=function(a,b){if(a[b].length>7){a[b].shift();var c=a[b];while(c.length)a.splice(b++,0,["C"][n](c.splice(0,6)));a.splice(b,1),l=x(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],l=x(d.length,e&&e.length||0))};for(var k=0,l=x(d.length,e&&e.length||0);k<l;k++){d[k]=h(d[k],f),i(d,k),e&&(e[k]=h(e[k],g)),e&&i(e,k),j(d,e,f,g,k),j(e,d,g,f,k);var o=d[k],p=e&&e[k],q=o.length,r=e&&p.length;f.x=o[q-2],f.y=o[q-1],f.bx=Q(o[q-4])||f.x,f.by=Q(o[q-3])||f.y,g.bx=e&&(Q(p[r-4])||g.x),g.by=e&&(Q(p[r-3])||g.y),g.x=e&&p[r-2],g.y=e&&p[r-1]}e||(c.curve=bJ(d));return e?[d,e]:d},null,bJ),bS=a._parseDots=bv(function(b){var c=[];for(var d=0,e=b.length;d<e;d++){var f={},g=b[d].match(/^([^:]*):?([\d\.]*)/);f.color=a.getRGB(g[1]);if(f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),c.push(f)}for(d=1,e=c.length-1;d<e;d++)if(!c[d].offset){var h=Q(c[d-1].offset||0),i=0;for(var j=d+1;j<e;j++)if(c[j].offset){i=c[j].offset;break}i||(i=100,j=e),i=Q(i);var k=(i-h)/(j-d+1);for(;d<j;d++)h+=k,c[d].offset=h+"%"}return c}),bT=a._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)},bU=a._tofront=function(a,b){b.top!==a&&(bT(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},bV=a._toback=function(a,b){b.bottom!==a&&(bT(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},bW=a._insertafter=function(a,b,c){bT(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},bX=a._insertbefore=function(a,b,c){bT(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},bY=a.toMatrix=function(a,b){var c=bI(a),d={_:{transform:p},getBBox:function(){return c}};b$(d,b);return d.matrix},bZ=a.transformPath=function(a,b){return bj(a,bY(a,b))},b$=a._extractTransform=function(b,c){if(c==null)return b._.transform;c=r(c).replace(/\.{3}|\u2026/g,b._.transform||p);var d=a.parseTransformString(c),e=0,f=0,g=0,h=1,i=1,j=b._,k=new cb;j.transform=d||[];if(d)for(var l=0,m=d.length;l<m;l++){var n=d[l],o=n.length,q=r(n[0]).toLowerCase(),s=n[0]!=q,t=s?k.invert():0,u,v,w,x,y;q=="t"&&o==3?s?(u=t.x(0,0),v=t.y(0,0),w=t.x(n[1],n[2]),x=t.y(n[1],n[2]),k.translate(w-u,x-v)):k.translate(n[1],n[2]):q=="r"?o==2?(y=y||b.getBBox(1),k.rotate(n[1],y.x+y.width/2,y.y+y.height/2),e+=n[1]):o==4&&(s?(w=t.x(n[2],n[3]),x=t.y(n[2],n[3]),k.rotate(n[1],w,x)):k.rotate(n[1],n[2],n[3]),e+=n[1]):q=="s"?o==2||o==3?(y=y||b.getBBox(1),k.scale(n[1],n[o-1],y.x+y.width/2,y.y+y.height/2),h*=n[1],i*=n[o-1]):o==5&&(s?(w=t.x(n[3],n[4]),x=t.y(n[3],n[4]),k.scale(n[1],n[2],w,x)):k.scale(n[1],n[2],n[3],n[4]),h*=n[1],i*=n[2]):q=="m"&&o==7&&k.add(n[1],n[2],n[3],n[4],n[5],n[6]),j.dirtyT=1,b.matrix=k}b.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,h==1&&i==1&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1},b_=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return a.length==4?[b,0,a[2],a[3]]:[b,0];case"s":return a.length==5?[b,1,1,a[3],a[4]]:a.length==3?[b,1,1]:[b,1]}},ca=a._equaliseTransform=function(b,c){c=r(c).replace(/\.{3}|\u2026/g,b),b=a.parseTransformString(b)||[],c=a.parseTransformString(c)||[];var d=x(b.length,c.length),e=[],f=[],g=0,h,i,j,k;for(;g<d;g++){j=b[g]||b_(c[g]),k=c[g]||b_(j);if(j[0]!=k[0]||j[0].toLowerCase()=="r"&&(j[2]!=k[2]||j[3]!=k[3])||j[0].toLowerCase()=="s"&&(j[3]!=k[3]||j[4]!=k[4]))return;e[g]=[],f[g]=[];for(h=0,i=x(j.length,k.length);h<i;h++)h in j&&(e[g][h]=j[h]),h in k&&(f[g][h]=k[h])}return{from:e,to:f}};a._getContainer=function(b,c,d,e){var f;f=e==null&&!a.is(b,"object")?h.doc.getElementById(b):b;if(f!=null){if(f.tagName)return c==null?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:c,height:d};return{container:1,x:b,y:c,width:d,height:e}}},a.pathToRelative=bK,a._engine={},a.path2curve=bR,a.matrix=function(a,b,c,d,e,f){return new cb(a,b,c,d,e,f)},function(b){function d(a){var b=w.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}function c(a){return a[0]*a[0]+a[1]*a[1]}b.add=function(a,b,c,d,e,f){var g=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],i=[[a,c,e],[b,d,f],[0,0,1]],j,k,l,m;a&&a instanceof cb&&(i=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(j=0;j<3;j++)for(k=0;k<3;k++){m=0;for(l=0;l<3;l++)m+=h[j][l]*i[l][k];g[j][k]=m}this.a=g[0][0],this.b=g[1][0],this.c=g[0][1],this.d=g[1][1],this.e=g[0][2],this.f=g[1][2]},b.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new cb(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},b.clone=function(){return new cb(this.a,this.b,this.c,this.d,this.e,this.f)},b.translate=function(a,b){this.add(1,0,0,1,a,b)},b.scale=function(a,b,c,d){b==null&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},b.rotate=function(b,c,d){b=a.rad(b),c=c||0,d=d||0;var e=+w.cos(b).toFixed(9),f=+w.sin(b).toFixed(9);this.add(e,f,-f,e,c,d),this.add(1,0,0,1,-c,-d)},b.x=function(a,b){return a*this.a+b*this.c+this.e},b.y=function(a,b){return a*this.b+b*this.d+this.f},b.get=function(a){return+this[r.fromCharCode(97+a)].toFixed(4)},b.toString=function(){return a.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},b.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},b.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},b.split=function(){var b={};b.dx=this.e,b.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];b.scalex=w.sqrt(c(e[0])),d(e[0]),b.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*b.shear,e[1][1]-e[0][1]*b.shear],b.scaley=w.sqrt(c(e[1])),d(e[1]),b.shear/=b.scaley;var f=-e[0][1],g=e[1][1];g<0?(b.rotate=a.deg(w.acos(g)),f<0&&(b.rotate=360-b.rotate)):b.rotate=a.deg(w.asin(f)),b.isSimple=!+b.shear.toFixed(9)&&(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate),b.isSuperSimple=!+b.shear.toFixed(9)&&b.scalex.toFixed(9)==b.scaley.toFixed(9)&&!b.rotate,b.noRotation=!+b.shear.toFixed(9)&&!b.rotate;return b},b.toTransformString=function(a){var b=a||this[s]();if(b.isSimple){b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4);return(b.dx||b.dy?"t"+[b.dx,b.dy]:p)+(b.scalex!=1||b.scaley!=1?"s"+[b.scalex,b.scaley,0,0]:p)+(b.rotate?"r"+[b.rotate,0,0]:p)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(cb.prototype);var cc=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(cc&&cc[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&cc&&cc[1]<8?k.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:k.safari=be;var cd=function(){this.returnValue=!1},ce=function(){return this.originalEvent.preventDefault()},cf=function(){this.cancelBubble=!0},cg=function(){return this.originalEvent.stopPropagation()},ch=function(){if(h.doc.addEventListener)return function(a,b,c,d){var e=o&&u[b]?u[b]:b,f=function(e){var f=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,i=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,j=e.clientX+i,k=e.clientY+f;if(o&&u[g](b))for(var l=0,m=e.targetTouches&&e.targetTouches.length;l<m;l++)if(e.targetTouches[l].target==a){var n=e;e=e.targetTouches[l],e.originalEvent=n,e.preventDefault=ce,e.stopPropagation=cg;break}return c.call(d,e,j,k)};a.addEventListener(e,f,!1);return function(){a.removeEventListener(e,f,!1);return!0}};if(h.doc.attachEvent)return function(a,b,c,d){var e=function(a){a=a||h.win.event;var b=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,e=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;a.preventDefault=a.preventDefault||cd,a.stopPropagation=a.stopPropagation||cf;return c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){a.detachEvent("on"+b,e);return!0};return f}}(),ci=[],cj=function(a){var b=a.clientX,c=a.clientY,d=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,e=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,f,g=ci.length;while(g--){f=ci[g];if(o){var i=a.touches.length,j;while(i--){j=a.touches[i];if(j.identifier==f.el._drag.id){b=j.clientX,c=j.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}}else a.preventDefault();var k=f.el.node,l,m=k.nextSibling,n=k.parentNode,p=k.style.display;h.win.opera&&n.removeChild(k),k.style.display="none",l=f.el.paper.getElementByPoint(b,c),k.style.display=p,h.win.opera&&(m?n.insertBefore(k,m):n.appendChild(k)),l&&eve("raphael.drag.over."+f.el.id,f.el,l),b+=e,c+=d,eve("raphael.drag.move."+f.el.id,f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,b,c,a)}},ck=function(b){a.unmousemove(cj).unmouseup(ck);var c=ci.length,d;while(c--)d=ci[c],d.el._drag={},eve("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,b);ci=[]},cl=a.el={};for(var cm=t.length;cm--;)(function(b){a[b]=cl[b]=function(c,d){a.is(c,"function")&&(this.events=this.events||[],this.events.push({name:b,f:c,unbind:ch(this.shape||this.node||h.doc,b,c,d||this)}));return this},a["un"+b]=cl["un"+b]=function(a){var c=this.events||[],d=c.length;while(d--)if(c[d].name==b&&c[d].f==a){c[d].unbind(),c.splice(d,1),!c.length&&delete this.events;return this}return this}})(t[cm]);cl.data=function(b,c){var d=bb[this.id]=bb[this.id]||{};if(arguments.length==1){if(a.is(b,"object")){for(var e in b)b[g](e)&&this.data(e,b[e]);return this}eve("raphael.data.get."+this.id,this,d[b],b);return d[b]}d[b]=c,eve("raphael.data.set."+this.id,this,c,b);return this},cl.removeData=function(a){a==null?bb[this.id]={}:bb[this.id]&&delete bb[this.id][a];return this},cl.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},cl.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var cn=[];cl.drag=function(b,c,d,e,f,g){function i(i){(i.originalEvent||i).preventDefault();var j=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,k=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft;this._drag.x=i.clientX+k,this._drag.y=i.clientY+j,this._drag.id=i.identifier,!ci.length&&a.mousemove(cj).mouseup(ck),ci.push({el:this,move_scope:e,start_scope:f,end_scope:g}),c&&eve.on("raphael.drag.start."+this.id,c),b&&eve.on("raphael.drag.move."+this.id,b),d&&eve.on("raphael.drag.end."+this.id,d),eve("raphael.drag.start."+this.id,f||e||this,i.clientX+k,i.clientY+j,i)}this._drag={},cn.push({el:this,start:i}),this.mousedown(i);return this},cl.onDragOver=function(a){a?eve.on("raphael.drag.over."+this.id,a):eve.unbind("raphael.drag.over."+this.id)},cl.undrag=function(){var b=cn.length;while(b--)cn[b].el==this&&(this.unmousedown(cn[b].start),cn.splice(b,1),eve.unbind("raphael.drag.*."+this.id));!cn.length&&a.unmousemove(cj).unmouseup(ck)},k.circle=function(b,c,d){var e=a._engine.circle(this,b||0,c||0,d||0);this.__set__&&this.__set__.push(e);return e},k.rect=function(b,c,d,e,f){var g=a._engine.rect(this,b||0,c||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(g);return g},k.ellipse=function(b,c,d,e){var f=a._engine.ellipse(this,b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(f);return f},k.path=function(b){b&&!a.is(b,D)&&!a.is(b[0],E)&&(b+=p);var c=a._engine.path(a.format[m](a,arguments),this);this.__set__&&this.__set__.push(c);return c},k.image=function(b,c,d,e,f){var g=a._engine.image(this,b||"about:blank",c||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(g);return g},k.text=function(b,c,d){var e=a._engine.text(this,b||0,c||0,r(d));this.__set__&&this.__set__.push(e);return e},k.set=function(b){!a.is(b,"array")&&(b=Array.prototype.splice.call(arguments,0,arguments.length));var c=new cG(b);this.__set__&&this.__set__.push(c);return c},k.setStart=function(a){this.__set__=a||this.set()},k.setFinish=function(a){var b=this.__set__;delete this.__set__;return b},k.setSize=function(b,c){return a._engine.setSize.call(this,b,c)},k.setViewBox=function(b,c,d,e,f){return a._engine.setViewBox.call(this,b,c,d,e,f)},k.top=k.bottom=null,k.raphael=a;var co=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,i=b.top+(h.win.pageYOffset||e.scrollTop||d.scrollTop)-f,j=b.left+(h.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:i,x:j}};k.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=h.doc.elementFromPoint(a,b);if(h.win.opera&&e.tagName=="svg"){var f=co(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var i=d.getIntersectionList(g,null);i.length&&(e=i[i.length-1])}if(!e)return null;while(e.parentNode&&e!=d.parentNode&&!e.raphael)e=e.parentNode;e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null;return e},k.getById=function(a){var b=this.bottom;while(b){if(b.id==a)return b;b=b.next}return null},k.forEach=function(a,b){var c=this.bottom;while(c){if(a.call(b,c)===!1)return this;c=c.next}return this},k.getElementsByPoint=function(a,b){var c=this.set();this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)});return c},cl.isPointInside=function(b,c){var d=this.realPath=this.realPath||bi[this.type](this);return a.isPointInsidePath(d,b,c)},cl.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=bi[this.type](this),b.bboxwt=bI(this.realPath),b.bboxwt.toString=cq,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=bi[this.type](this);b.bbox=bI(bj(this.realPath,this.matrix)),b.bbox.toString=cq,b.dirty=b.dirtyT=0}return b.bbox},cl.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a},cl.glow=function(a){if(this.type=="text")return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||bi[this.type](this);f=this.matrix?bj(f,this.matrix):f;for(var g=1;g<c+1;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var cr={},cs=function(b,c,d,e,f,g,h,i,j){return j==null?bB(b,c,d,e,f,g,h,i):a.findDotsAtSegment(b,c,d,e,f,g,h,i,bC(b,c,d,e,f,g,h,i,j))},ct=function(b,c){return function(d,e,f){d=bR(d);var g,h,i,j,k="",l={},m,n=0;for(var o=0,p=d.length;o<p;o++){i=d[o];if(i[0]=="M")g=+i[1],h=+i[2];else{j=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6]);if(n+j>e){if(c&&!l.start){m=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),k+=["C"+m.start.x,m.start.y,m.m.x,m.m.y,m.x,m.y];if(f)return k;l.start=k,k=["M"+m.x,m.y+"C"+m.n.x,m.n.y,m.end.x,m.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!b&&!c){m=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n);return{x:m.x,y:m.y,alpha:m.alpha}}}n+=j,g=+i[5],h=+i[6]}k+=i.shift()+i}l.end=k,m=b?n:c?l:a.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),m.alpha&&(m={x:m.x,y:m.y,alpha:m.alpha});return m}},cu=ct(1),cv=ct(),cw=ct(0,1);a.getTotalLength=cu,a.getPointAtLength=cv,a.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return cw(a,b).end;var d=cw(a,c,1);return b?cw(d,b).end:d},cl.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return cu(this.attrs.path)}},cl.getPointAtLength=function(a){if(this.type=="path")return cv(this.attrs.path,a)},cl.getSubpath=function(b,c){if(this.type=="path")return a.getSubpath(this.attrs.path,b,c)};var cx=a.easing_formulas={linear:function(a){return a},"<":function(a){return A(a,1.7)},">":function(a){return A(a,.48)},"<>":function(a){var b=.48-a/1.04,c=w.sqrt(.1734+b*b),d=c-b,e=A(z(d),1/3)*(d<0?-1:1),f=-c-b,g=A(z(f),1/3)*(f<0?-1:1),h=e+g+.5;return(1-h)*3*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a=a-1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){if(a==!!a)return a;return A(2,-10*a)*w.sin((a-.075)*2*B/.3)+1},bounce:function(a){var b=7.5625,c=2.75,d;a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375);return d}};cx.easeIn=cx["ease-in"]=cx["<"],cx.easeOut=cx["ease-out"]=cx[">"],cx.easeInOut=cx["ease-in-out"]=cx["<>"],cx["back-in"]=cx.backIn,cx["back-out"]=cx.backOut;var cy=[],cz=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},cA=function(){var b=+(new Date),c=0;for(;c<cy.length;c++){var d=cy[c];if(d.el.removed||d.paused)continue;var e=b-d.start,f=d.ms,h=d.easing,i=d.from,j=d.diff,k=d.to,l=d.t,m=d.el,o={},p,r={},s;d.initstatus?(e=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*f,d.status=d.initstatus,delete d.initstatus,d.stop&&cy.splice(c--,1)):d.status=(d.prev+(d.percent-d.prev)*(e/f))/d.anim.top;if(e<0)continue;if(e<f){var t=h(e/f);for(var u in i)if(i[g](u)){switch(U[u]){case C:p=+i[u]+t*f*j[u];break;case"colour":p="rgb("+[cB(O(i[u].r+t*f*j[u].r)),cB(O(i[u].g+t*f*j[u].g)),cB(O(i[u].b+t*f*j[u].b))].join(",")+")";break;case"path":p=[];for(var v=0,w=i[u].length;v<w;v++){p[v]=[i[u][v][0]];for(var x=1,y=i[u][v].length;x<y;x++)p[v][x]=+i[u][v][x]+t*f*j[u][v][x];p[v]=p[v].join(q)}p=p.join(q);break;case"transform":if(j[u].real){p=[];for(v=0,w=i[u].length;v<w;v++){p[v]=[i[u][v][0]];for(x=1,y=i[u][v].length;x<y;x++)p[v][x]=i[u][v][x]+t*f*j[u][v][x]}}else{var z=function(a){return+i[u][a]+t*f*j[u][a]};p=[["m",z(0),z(1),z(2),z(3),z(4),z(5)]]}break;case"csv":if(u=="clip-rect"){p=[],v=4;while(v--)p[v]=+i[u][v]+t*f*j[u][v]}break;default:var A=[][n](i[u]);p=[],v=m.paper.customAttributes[u].length;while(v--)p[v]=+A[v]+t*f*j[u][v]}o[u]=p}m.attr(o),function(a,b,c){setTimeout(function(){eve("raphael.anim.frame."+a,b,c)})}(m.id,m,d.anim)}else{(function(b,c,d){setTimeout(function(){eve("raphael.anim.frame."+c.id,c,d),eve("raphael.anim.finish."+c.id,c,d),a.is(b,"function")&&b.call(c)})})(d.callback,m,d.anim),m.attr(k),cy.splice(c--,1);if(d.repeat>1&&!d.next){for(s in k)k[g](s)&&(r[s]=d.totalOrigin[s]);d.el.attr(r),cE(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&cE(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}a.svg&&m&&m.paper&&m.paper.safari(),cy.length&&cz(cA)},cB=function(a){return a>255?255:a<0?0:a};cl.animateWith=function(b,c,d,e,f,g){var h=this;if(h.removed){g&&g.call(h);return h}var i=d instanceof cD?d:a.animation(d,e,f,g),j,k;cE(i,h,i.percents[0],null,h.attr());for(var l=0,m=cy.length;l<m;l++)if(cy[l].anim==c&&cy[l].el==b){cy[m-1].start=cy[l].start;break}return h},cl.onAnimation=function(a){a?eve.on("raphael.anim.frame."+this.id,a):eve.unbind("raphael.anim.frame."+this.id);return this},cD.prototype.delay=function(a){var b=new cD(this.anim,this.ms);b.times=this.times,b.del=+a||0;return b},cD.prototype.repeat=function(a){var b=new cD(this.anim,this.ms);b.del=this.del,b.times=w.floor(x(a,0))||1;return b},a.animation=function(b,c,d,e){if(b instanceof cD)return b;if(a.is(d,"function")||!d)e=e||d||null,d=null;b=Object(b),c=+c||0;var f={},h,i;for(i in b)b[g](i)&&Q(i)!=i&&Q(i)+"%"!=i&&(h=!0,f[i]=b[i]);if(!h)return new cD(b,c);d&&(f.easing=d),e&&(f.callback=e);return new cD({100:f},c)},cl.animate=function(b,c,d,e){var f=this;if(f.removed){e&&e.call(f);return f}var g=b instanceof cD?b:a.animation(b,c,d,e);cE(g,f,g.percents[0],null,f.attr());return f},cl.setTime=function(a,b){a&&b!=null&&this.status(a,y(b,a.ms)/a.ms);return this},cl.status=function(a,b){var c=[],d=0,e,f;if(b!=null){cE(a,this,-1,y(b,1));return this}e=cy.length;for(;d<e;d++){f=cy[d];if(f.el.id==this.id&&(!a||f.anim==a)){if(a)return f.status;c.push({anim:f.anim,status:f.status})}}if(a)return 0;return c},cl.pause=function(a){for(var b=0;b<cy.length;b++)cy[b].el.id==this.id&&(!a||cy[b].anim==a)&&eve("raphael.anim.pause."+this.id,this,cy[b].anim)!==!1&&(cy[b].paused=!0);return this},cl.resume=function(a){for(var b=0;b<cy.length;b++)if(cy[b].el.id==this.id&&(!a||cy[b].anim==a)){var c=cy[b];eve("raphael.anim.resume."+this.id,this,c.anim)!==!1&&(delete c.paused,this.status(c.anim,c.status))}return this},cl.stop=function(a){for(var b=0;b<cy.length;b++)cy[b].el.id==this.id&&(!a||cy[b].anim==a)&&eve("raphael.anim.stop."+this.id,this,cy[b].anim)!==!1&&cy.splice(b--,1);return this},eve.on("raphael.remove",cF),eve.on("raphael.clear",cF),cl.toString=function(){return"Rapha�l�s object"};var cG=function(a){this.items=[],this.length=0,this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&(a[b].constructor==cl.constructor||a[b].constructor==cG)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},cH=cG.prototype;cH.push=function(){var a,b;for(var c=0,d=arguments.length;c<d;c++)a=arguments[c],a&&(a.constructor==cl.constructor||a.constructor==cG)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},cH.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},cH.forEach=function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var cI in cl)cl[g](cI)&&(cH[cI]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][m](c,b)})}}(cI));cH.attr=function(b,c){if(b&&a.is(b,E)&&a.is(b[0],"object"))for(var d=0,e=b.length;d<e;d++)this.items[d].attr(b[d]);else for(var f=0,g=this.items.length;f<g;f++)this.items[f].attr(b,c);return this},cH.clear=function(){while(this.length)this.pop()},cH.splice=function(a,b,c){a=a<0?x(this.length+a,0):a,b=x(0,y(this.length-a,b));var d=[],e=[],f=[],g;for(g=2;g<arguments.length;g++)f.push(arguments[g]);for(g=0;g<b;g++)e.push(this[a+g]);for(;g<this.length-a;g++)d.push(this[a+g]);var h=f.length;for(g=0;g<h+d.length;g++)this.items[a+g]=this[a+g]=g<h?f[g]:d[g-h];g=this.items.length=this.length-=b-h;while(this[g])delete this[g++];return new cG(e)},cH.exclude=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a){this.splice(b,1);return!0}},cH.animate=function(b,c,d,e){(a.is(d,"function")||!d)&&(e=d||null);var f=this.items.length,g=f,h,i=this,j;if(!f)return this;e&&(j=function(){!--f&&e.call(i)}),d=a.is(d,D)?d:j;var k=a.animation(b,c,d,j);h=this.items[--g].animate(k);while(g--)this.items[g]&&!this.items[g].removed&&this.items[g].animateWith(h,k,k);return this},cH.insertAfter=function(a){var b=this.items.length;while(b--)this.items[b].insertAfter(a);return this},cH.getBBox=function(){var a=[],b=[],c=[],d=[];for(var e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}a=y[m](0,a),b=y[m](0,b),c=x[m](0,c),d=x[m](0,d);return{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},cH.clone=function(a){a=new cG;for(var b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a},cH.toString=function(){return"Rapha�l�s set"},a.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[g](d)&&(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=R(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[g](e)){var f=a.glyphs[e];b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(f.k)for(var h in f.k)f[g](h)&&(b.glyphs[e].k[h]=f.k[h])}}return a},k.getFont=function(b,c,d,e){e=e||"normal",d=d||"normal",c=+c||{normal:400,bold:700,lighter:300,bolder:800}[c]||400;if(!!a.fonts){var f=a.fonts[b];if(!f){var h=new RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,p)+"(\\s|$)","i");for(var i in a.fonts)if(a.fonts[g](i)&&h.test(i)){f=a.fonts[i];break}}var j;if(f)for(var k=0,l=f.length;k<l;k++){j=f[k];if(j.face["font-weight"]==c&&(j.face["font-style"]==d||!j.face["font-style"])&&j.face["font-stretch"]==e)break}return j}},k.print=function(b,d,e,f,g,h,i){h=h||"middle",i=x(y(i||0,1),-1);var j=r(e)[s](p),k=0,l=0,m=p,n;a.is(f,e)&&(f=this.getFont(f));if(f){n=(g||16)/f.face["units-per-em"];var o=f.face.bbox[s](c),q=+o[0],t=o[3]-o[1],u=0,v=+o[1]+(h=="baseline"?t+ +f.face.descent:t/2);for(var w=0,z=j.length;w<z;w++){if(j[w]=="\n")k=0,B=0,l=0,u+=t;else{var A=l&&f.glyphs[j[w-1]]||{},B=f.glyphs[j[w]];k+=l?(A.w||f.w)+(A.k&&A.k[j[w]]||0)+f.w*i:0,l=1}B&&B.d&&(m+=a.transformPath(B.d,["t",k*n,u*n,"s",n,n,q,v,"t",(b-q)/n,(d-v)/n]))}}return this.path(m).attr({fill:"#000",stroke:"none"})},k.add=function(b){if(a.is(b,"array")){var c=this.set(),e=0,f=b.length,h;for(;e<f;e++)h=b[e]||{},d[g](h.type)&&c.push(this[h.type]().attr(h))}return c},a.format=function(b,c){var d=a.is(c,E)?[0][n](c):arguments;b&&a.is(b,D)&&d.length-1&&(b=b.replace(e,function(a,b){return d[++b]==null?p:d[b]}));return b||p},a.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),typeof e=="function"&&f&&(e=e()))}),e=(e==null||e==d?a:e)+"";return e};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),a.ninja=function(){i.was?h.win.Raphael=i.is:delete Raphael;return a},a.st=cH,function(b,c,d){function e(){/in/.test(b.readyState)?setTimeout(e,9):a.eve("raphael.DOMload")}b.readyState==null&&b.addEventListener&&(b.addEventListener(c,d=function(){b.removeEventListener(c,d,!1),b.readyState="complete"},!1),b.readyState="loading"),e()}(document,"DOMContentLoaded"),i.was?h.win.Raphael=a:Raphael=a,eve.on("raphael.DOMload",function(){b=!0})}(),window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Rapha�l "+this.version};var q=function(d,e){if(e){typeof d=="string"&&(d=q(d));for(var f in e)e[b](f)&&(f.substring(0,6)=="xlink:"?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){e=c(e).replace(a._radial_gradient,function(a,b,c){j="radial";if(b&&c){m=d(b),n=d(c);var e=(n>.5)*2-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&n!=.5&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/);if(j=="linear"){var t=e.shift();t=-d(t);if(isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;k=k.replace(/[\(\)\s,\xb0#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient);if(!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,j=="radial"?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;x<y;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1;return 1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if(d.type=="path"){var g=c(e).toLowerCase().split("-"),h=d.paper,i=f?"end":"start",j=d.node,k=d.attrs,m=k["stroke-width"],n=g.length,r="classic",s,t,u,v,w,x=3,y=3,z=5;while(n--)switch(g[n]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=g[n];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}r=="open"?(x+=2,y+=2,z+=2,u=1,v=f?4:1,w={fill:"none",stroke:k.stroke}):(v=u=x/2,w={fill:k.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={};if(r!="none"){var A="raphael-marker-"+r,B="raphael-marker-"+i+r+x+y;a._g.doc.getElementById(A)?p[A]++:(h.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[r],id:A})),p[A]=1);var C=a._g.doc.getElementById(B),D;C?(p[B]++,D=C.getElementsByTagName("use")[0]):(C=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:v,refY:y/2}),D=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),C.appendChild(D),h.defs.appendChild(C),p[B]=1),q(D,w);var F=u*(r!="diamond"&&r!="oval");f?(s=d._.arrows.startdx*m||0,t=a.getTotalLength(k.path)-F*m):(s=F*m,t=a.getTotalLength(k.path)-(d._.arrows.enddx*m||0)),w={},w["marker-"+i]="url(#"+B+")";if(t||s)w.d=Raphael.getSubpath(k.path,s,t);q(j,w),d._.arrows[i+"Path"]=A,d._.arrows[i+"Marker"]=B,d._.arrows[i+"dx"]=F,d._.arrows[i+"Type"]=r,d._.arrows[i+"String"]=e}else f?(s=d._.arrows.startdx*m||0,t=a.getTotalLength(k.path)-s):(s=0,t=a.getTotalLength(k.path)-(d._.arrows.enddx*m||0)),d._.arrows[i+"Path"]&&q(j,{d:Raphael.getSubpath(k.path,s,t)}),delete d._.arrows[i+"Path"],delete d._.arrows[i+"Marker"],delete d._.arrows[i+"dx"],delete d._.arrows[i+"Type"],delete d._.arrows[i+"String"];for(w in p)if(p[b](w)&&!p[w]){var G=a._g.doc.getElementById(w);G&&G.parentNode.removeChild(G)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){b=u[c(b).toLowerCase()];if(b){var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;while(h--)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[b](o)){if(!a._availableAttrs[b](o))continue;var p=f[o];k[o]=p;switch(o){case"blur":d.blur(p);break;case"href":case"title":case"target":var u=i.parentNode;if(u.tagName.toLowerCase()!="a"){var w=q("a");u.insertBefore(w,i),w.appendChild(i),u=w}o=="target"?u.setAttributeNS(n,"show",p=="blank"?"new":p):u.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var x=c(p).split(j);if(x.length==4){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var z=q("clipPath"),A=q("rect");z.id=a.createUUID(),q(A,{x:x[0],y:x[1],width:x[2],height:x[3]}),z.appendChild(A),d.paper.defs.appendChild(z),q(i,{"clip-path":"url(#"+z.id+")"}),d.clip=A}if(!p){var B=i.getAttribute("clip-path");if(B){var C=a._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,l));C&&C.parentNode.removeChild(C),q(i,{"clip-path":l}),delete d.clip}}break;case"path":d.type=="path"&&(q(i,{d:p?k.path=a._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":i.setAttribute(o,p),d._.dirty=1;if(k.fx)o="x",p=k.x;else break;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if(o=="rx"&&d.type=="rect")break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":i.setAttribute(o,p),d._.dirty=1;if(k.fy)o="y",p=k.y;else break;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if(o=="ry"&&d.type=="rect")break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":d.type=="rect"?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":d.type=="image"&&i.setAttributeNS(n,"href",p);break;case"stroke-width":if(d._.sx!=1||d._.sy!=1)p/=g(h(d._.sx),h(d._.sy))||1;d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var D=c(p).match(a._ISURL);if(D){z=q("pattern");var F=q("image");z.id=a.createUUID(),q(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(F,{x:0,y:0,"xlink:href":D[1]}),z.appendChild(F),function(b){a._preload(D[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(F,{width:a,height:c}),d.paper.safari()})}(z),d.paper.defs.appendChild(z),q(i,{fill:"url(#"+z.id+")"}),d.pattern=z,d.pattern&&s(d);break}var G=a.getRGB(p);if(!G.error)delete f.gradient,delete k.gradient,!a.is(k.opacity,"undefined")&&a.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!a.is(k["fill-opacity"],"undefined")&&a.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});else if((d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var H=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(H){var I=H.getElementsByTagName("stop");q(I[I.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}G[b]("opacity")&&q(i,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=a.getRGB(p),i.setAttribute(o,G.hex),o=="stroke"&&G[b]("opacity")&&q(i,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity}),o=="stroke"&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":(d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p);break;case"opacity":k.gradient&&!k[b]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){H=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),H&&(I=H.getElementsByTagName("stop"),q(I[I.length-1],{"stop-opacity":p}));break};default:o=="font-size"&&(p=e(p,10)+"px");var J=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[J]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if(d.type=="text"&&!!(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){g.text=f.text;while(h.firstChild)h.removeChild(h.firstChild);var j=c(f.text).split("\n"),k=[],m;for(var n=0,o=j.length;n<o;n++)m=q("tspan"),n&&q(m,{dy:i*x,x:g.x}),m.appendChild(a._g.doc.createTextNode(j[n])),h.appendChild(m),k[n]=m}else{k=h.getElementsByTagName("tspan");for(n=0,o=k.length;n<o;n++)n?q(k[n],{dy:i*x,x:g.x}):q(k[0],{dy:0})}q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(k[0],{dy:r})}},z=function(b,c){var d=0,e=0;this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);d.type="path",w(d,{fill:"none",stroke:"#000",path:a});return d},A.rotate=function(a,b,e){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}this.transform(this._.transform.concat([["r",a,b,e]]));return this},A.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]]));return this},A.translate=function(a,b){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]]));return this},A.transform=function(c){var d=this._;if(c==null)return d.transform;a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix});if(d.sx!=1||d.sy!=1){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},A.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},A.remove=function(){if(!this.removed&&!!this.node.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var c in this)this[c]=typeof this[c]=="function"?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if(this.node.style.display=="none"){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}a&&this.hide();return b},A.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform;return e}if(d==null&&a.is(c,"string")){if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(c=="transform")return this._.transform;var g=c.split(j),h={};for(var i=0,l=g.length;i<l;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return l-1?h:h[g[0]]}if(d==null&&a.is(c,"array")){h={};for(i=0,l=c.length;i<l;i++)h[c[i]]=this.attr(c[i]);return h}if(d!=null){var m={};m[c]=d}else c!=null&&a.is(c,"object")&&(m=c);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}w(this,m);return this},A.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&a._tofront(this,b);return this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;b.tagName.toLowerCase()=="a"?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);var c=this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper);return this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper);return this},A.blur=function(b){var c=this;if(+b!==0){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs);return f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs);return h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs);return g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image";return h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs);return g},a._engine.setSize=function(a,b){this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h=q("svg"),i="overflow:hidden;",j;d=d||0,e=e||0,f=f||512,g=g||342,q(h,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),c==1?(h.style.cssText=i+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(h),j=1):(h.style.cssText=i+"position:relative",c.firstChild?c.insertBefore(h,c.firstChild):c.appendChild(h)),c=new a._Paper,c.width=f,c.height=g,c.canvas=h,c.clear(),c._left=c._top=0,j&&(c.renderfix=function(){}),c.renderfix();return c},a._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f=g(c/this.width,d/this.height),h=this.top,i=e?"meet":"xMinYMin",j,l;a==null?(this._vbSize&&(f=1),delete this._vbSize,j="0 0 "+this.width+m+this.height):(this._vbSize=f,j=a+m+b+m+c+m+d),q(this.canvas,{viewBox:j,preserveAspectRatio:i});while(f&&h)l="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":l}),h._.dirty=1,h._.dirtyT=1,h=h.prev;this._viewBox=[a,b,c,d,!!e];return this},a.prototype.renderfix=function(){var a=this.canvas,b=a.style,c;try{c=a.getScreenCTM()||a.createSVGMatrix()}catch(d){c=a.createSVGMatrix()}var e=-c.e%1,f=-c.f%1;if(e||f)e&&(this._left=(this._left+e)%1,b.left=this._left+"px"),f&&(this._top=(this._top+f)%1,b.top=this._top+"px")},a.prototype.clear=function(){a.eve("raphael.clear",this);var b=this.canvas;while(b.firstChild)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Rapha�l "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/ig,e=a._pathToAbsolute;c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g;if(e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e=b.toLowerCase()=="m",g=p[b];c.replace(s,function(a){e&&d.length==2&&(g+=d+p[b=="m"?"l":"L"],d=[]),d.push(f(a*u))});return g+d});return g}var h=e(b),i,j;g=[];for(var k=0,l=h.length;k<l;k++){i=h[k],j=h[k][0].toLowerCase(),j=="z"&&(j="x");for(var m=1,r=i.length;m<r;m++)j+=f(i[m]*u)+(m!=r-1?",":o);g.push(j)}return g.join(n)},y=function(b,c,d){var e=a.matrix();e.rotate(-b,.5,.5);return{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q,r=u/b,s=u/c;m.visibility="hidden";if(!!b&&!!c){l.coordsize=i(r)+n+i(s),m.rotation=f*(b*c<0?-1:1);if(f){var t=y(f,d,e);d=t.dx,e=t.dy}b<0&&(p+="x"),c<0&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-r+n+e*-s;if(k||g.fillsize){var v=l.getElementsByTagName(j);v=v&&v[0],l.removeChild(v),k&&(t=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),v.position=t.dx*o+n+t.dy*o),g.fillsize&&(v.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(v)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn�t support SVG. Falling down to VML.\nYou are running Rapha�l "+this.version};var A=function(a,b,d){var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";while(g--)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q,r=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),s=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),t=e;for(var y in i)i[b](y)&&(m[y]=i[y]);r&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur);if(i.path&&e.type=="path"||r)l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),e.type=="image"&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0));"transform"in i&&e.transform(i.transform);if(s){var B=+m.cx,D=+m.cy,E=+m.rx||+m.r||0,G=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((B-E)*u),f((D-G)*u),f((B+E)*u),f((D+G)*u),f(B*u))}if("clip-rect"in i){var H=c(i["clip-rect"]).split(k);if(H.length==4){H[2]=+H[2]+ +H[0],H[3]=+H[3]+ +H[1];var I=l.clipRect||a._g.doc.createElement("div"),J=I.style;J.clip=a.format("rect({1}px {2}px {3}px {0}px)",H),l.clipRect||(J.position="absolute",J.top=0,J.left=0,J.width=e.paper.width+"px",J.height=e.paper.height+"px",l.parentNode.insertBefore(I,l),I.appendChild(l),l.clipRect=I)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var K=e.textpath.style;i.font&&(K.font=i.font),i["font-family"]&&(K.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(K.fontSize=i["font-size"]),i["font-weight"]&&(K.fontWeight=i["font-weight"]),i["font-style"]&&(K.fontStyle=i["font-style"])}"arrow-start"in i&&A(t,i["arrow-start"]),"arrow-end"in i&&A(t,i["arrow-end"],1);if(i.opacity!=null||i["stroke-width"]!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var L=l.getElementsByTagName(j),M=!1;L=L&&L[0],!L&&(M=L=F(j)),e.type=="image"&&i.src&&(L.src=i.src),i.fill&&(L.on=!0);if(L.on==null||i.fill=="none"||i.fill===null)L.on=!1;if(L.on&&i.fill){var N=c(i.fill).match(a._ISURL);if(N){L.parentNode==l&&l.removeChild(L),L.rotate=!0,L.src=N[1],L.type="tile";var O=e.getBBox(1);L.position=O.x+n+O.y,e._.fillpos=[O.x,O.y],a._preload(N[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=a.getRGB(i.fill).hex,L.src=o,L.type="solid",a.getRGB(i.fill).error&&(t.type in{circle:1,ellipse:1}||c(i.fill).charAt()!="r")&&C(t,i.fill,L)&&(m.fill="none",m.gradient=i.fill,L.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var P=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);P=h(g(P,0),1),L.opacity=P,L.src&&(L.color="none")}l.appendChild(L);var Q=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],T=!1;!Q&&(T=Q=F("stroke"));if(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])Q.on=!0;(i.stroke=="none"||i.stroke===null||Q.on==null||i.stroke==0||i["stroke-width"]==0)&&(Q.on=!1);var U=a.getRGB(i.stroke);Q.on&&i.stroke&&(Q.color=U.hex),P=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+U.o+1||2)-1);var V=(d(i["stroke-width"])||1)*.75;P=h(g(P,0),1),i["stroke-width"]==null&&(V=m["stroke-width"]),i["stroke-width"]&&(Q.weight=V),V&&V<1&&(P*=V)&&(Q.weight=1),Q.opacity=P,i["stroke-linejoin"]&&(Q.joinstyle=i["stroke-linejoin"]||"miter"),Q.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Q.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round");if(i["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Q.dashstyle=W[b](i["stroke-dasharray"])?W[i["stroke-dasharray"]]:o}T&&l.appendChild(Q)}if(t.type=="text"){t.paper.canvas.style.display=o;var X=t.paper.span,Y=100,Z=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=X.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),Z=d(m["font-size"]||Z&&Z[0])||10,p.fontSize=Z*Y+"px",t.textpath.string&&(X.innerHTML=c(t.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var $=X.getBoundingClientRect();t.W=m.w=($.right-$.left)/Y,t.H=m.h=($.bottom-$.top)/Y,t.X=m.x,t.Y=m.y+t.H/2,("x"in i||"y"in i)&&(t.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));var _=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var ba=0,bb=_.length;ba<bb;ba++)if(_[ba]in i){t._.dirty=1;break}switch(m["text-anchor"]){case"start":t.textpath.style["v-text-align"]="left",t.bbx=t.W/2;break;case"end":t.textpath.style["v-text-align"]="right",t.bbx=-t.W/2;break;default:t.textpath.style["v-text-align"]="center",t.bbx=0}t.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=b.attrs,i=Math.pow,j,k,l="linear",m=".5 .5";b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){l="radial",b&&c&&(b=d(b),c=d(c),i(b-.5,2)+i(c-.5,2)>.25&&(c=e.sqrt(.25-i(b-.5,2))*((c>.5)*2-1)+.5),m=b+n+c);return o}),f=f.split(/\s*\-\s*/);if(l=="linear"){var p=f.shift();p=-d(p);if(isNaN(p))return null}var q=a._parseDots(f);if(!q)return null;b=b.shape||b.node;if(q.length){b.removeChild(g),g.on=!0,g.method="none",g.color=q[0].color,g.color2=q[q.length-1].color;var r=[];for(var s=0,t=q.length;s<t;s++)q[s].offset&&r.push(q[s].offset+n+q[s].color);g.colors=r.length?r.join():"0% "+g.color,l=="radial"?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=m,g.angle=0):(g.type="gradient",g.angle=(270-p)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(b==null)return this._.transform;var d=this.paper._viewBoxShift,e=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:o,f;d&&(f=b=c(b).replace(/\.{3}|\u2026/g,this._.transform||o)),a._extractTransform(this,e+b);var g=this.matrix.clone(),h=this.skew,i=this.node,j,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");g.translate(-0.5,-0.5);if(l||k||this.type=="image"){h.matrix="1 0 0 1",h.offset="0 0",j=g.split();if(k&&j.noRotation||!j.isSimple){i.style.filter=g.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;i.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else i.style.filter=o,z(this,j.scalex,j.scaley,j.dx,j.dy,j.rotate)}else i.style.filter=o,h.matrix=c(g),h.offset=g.offset();f&&(this._.transform=f);return this},E.rotate=function(a,b,e){if(this.removed)return this;if(a!=null){a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]]));return this}},E.translate=function(a,b){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]]));return this},E.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1;return this},E.hide=function(){!this.removed&&(this.node.style.display="none");return this},E.show=function(){!this.removed&&(this.node.style.display=o);return this},E._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("raphael.*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform;return e}if(d==null&&a.is(c,"string")){if(c==j&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var g=c.split(k),h={};for(var i=0,m=g.length;i<m;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&d==null&&a.is(c,"array")){h={};for(i=0,m=c.length;i<m;i++)h[c[i]]=this.attr(c[i]);return h}var n;d!=null&&(n={},n[c]=d),d==null&&a.is(c,"object")&&(n=c);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&this.type=="text"&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper);return this},E.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper));return this},E.insertAfter=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper);return this},E.insertBefore=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper);return this},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),+b!==0?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");f.on=!0,c.appendChild(f),d.skew=f,d.transform(o);return d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect";return i},a._engine.ellipse=function(a,b,c,d,e){var f=a.path(),g=f.attrs;f.X=b-d,f.Y=c-e,f.W=d*2,f.H=e*2,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e});return f},a._engine.circle=function(a,b,c,d){var e=a.path(),f=e.attrs;e.X=b-d,e.Y=c-d,e.W=e.H=d*2,e.type="circle",B(e,{cx:b,cy:c,r:d});return e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0);return i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");m.on=!0,h.appendChild(m),k.skew=m,k.transform(o);return k},a._engine.setSize=function(b,c){var d=this.canvas.style;this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox);return this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("raphael.setViewBox",this,this._viewBox,[b,c,d,e,f]);var h=this.width,i=this.height,j=1/g(d/h,e/i),k,l;f&&(k=i/e,l=h/d,d*k<h&&(b-=(h-d*k)/2/k),e*l<i&&(c-=(i-e*l)/2/l)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:j},this.forEach(function(a){a.transform("...")});return this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e,f=b.width,g=b.x,h=b.y;if(!c)throw new Error("VML container not found.");var i=new a._Paper,j=i.canvas=a._g.doc.createElement("div"),k=j.style;g=g||0,h=h||0,f=f||512,d=d||342,i.width=f,i.height=d,f==+f&&(f+="px"),d==+d&&(d+="px"),i.coordsize=u*1e3+n+u*1e3,i.coordorigin="0 0",i.span=a._g.doc.createElement("span"),i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",j.appendChild(i.span),k.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",f,d),c==1?(a._g.doc.body.appendChild(j),k.left=g+"px",k.top=h+"px",k.position="absolute"):c.firstChild?c.insertBefore(j,c.firstChild):c.appendChild(j),i.renderfix=function(){};return i},a.prototype.clear=function(){a.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}(window.Raphael)
/**
 * JustGage - a handy JavaScript plugin for generating and animating nice & clean dashboard gauges.
 * Copyright (c) 2012 Bojan Djuricic - pindjur(at)gmail(dot)com | http://www.madcog.com
 * Licensed under MIT.
 * Date: 31/07/2012
 * @author Bojan Djuricic  (@Toorshia)
 * @version 1.0
 *
 * http://www.justgage.com
 */

JustGage = function(config) { 
  
  if (!config.id) {alert("Missing id parameter for gauge!"); return false;} 
  if (!document.getElementById(config.id)) {alert("No element with id: \""+config.id+"\" found!"); return false;} 
  
  // configurable parameters
  this.config = 
  {
    // id : string 
    // this is container element id
    id : config.id,
    
    // title : string
    // gauge title 
    title : (config.title) ? config.title : "Title",
    
    // titleFontColor : string
    // color of gauge title 
    titleFontColor : (config.titleFontColor) ? config.titleFontColor : "#999999",
    
    // value : int
    // value gauge is showing 
    value : (config.value) ? config.value : 0,
    
    // valueFontColor : string
    // color of label showing current value
    valueFontColor : (config.valueFontColor) ? config.valueFontColor : "#010101",
    
    // min : int
    // min value
    min : (config.min) ? config.min : 0,
    
    // max : int
    // max value
    max : (config.max) ? config.max : 100,
    
    // showMinMax : bool
    // hide or display min and max values
    showMinMax : (config.showMinMax != null) ? config.showMinMax : true,
    
    // gaugeWidthScale : float
    // width of the gauge element
    gaugeWidthScale : (config.gaugeWidthScale) ? config.gaugeWidthScale : 1.0,
    
    // gaugeColor : string
    // background color of gauge element 
    gaugeColor : (config.gaugeColor) ? config.gaugeColor : "#edebeb",
    
    // label : string
    // text to show below value
    label : (config.label) ? config.label : "",
    
    // showInnerShadow : bool
    // give gauge element small amount of inner shadow 
    showInnerShadow : (config.showInnerShadow != null) ? config.showInnerShadow : true,
    
    // shadowOpacity : int
    // 0 ~ 1
    shadowOpacity : (config.shadowOpacity) ? config.shadowOpacity : 0.2,
    
    // shadowSize: int
    // inner shadow size
    shadowSize : (config.shadowSize) ? config.shadowSize : 5,
    
    // shadowVerticalOffset : int
    // how much shadow is offset from top 
    shadowVerticalOffset : (config.shadowVerticalOffset) ? config.shadowVerticalOffset : 3,
    
    // levelColors : string[]
    // colors of indicator, from lower to upper, in RGB format 
    levelColors : (config.levelColors) ? config.levelColors : percentColors,
    
    // levelColorsGradient : bool
    // whether to use gradual color change for value, or sector-based
    levelColorsGradient : (config.levelColorsGradient != null) ? config.levelColorsGradient : true,
    
    // labelFontColor : string
    // color of label showing label under value
    labelFontColor : (config.labelFontColor) ? config.labelFontColor : "#b3b3b3",
    
    // startAnimationTime : int
    // length of initial animation 
    startAnimationTime : (config.startAnimationTime) ? config.startAnimationTime : 700,
    
    // startAnimationType : string
    // type of initial animation (linear, >, <,  <>, bounce) 
    startAnimationType : (config.startAnimationType) ? config.startAnimationType : ">",
    
    // refreshAnimationTime : int
    // length of refresh animation 
    refreshAnimationTime : (config.refreshAnimationTime) ? config.refreshAnimationTime : 700,
    
    // refreshAnimationType : string
    // type of refresh animation (linear, >, <,  <>, bounce) 
    refreshAnimationType : (config.refreshAnimationType) ? config.refreshAnimationType : ">"
  };
  
  // overflow values
  if (config.value > this.config.max) this.config.value = this.config.max; 
  if (config.value < this.config.min) this.config.value = this.config.min;
  this.originalValue = config.value;
  
  // canvas
  this.canvas = Raphael(this.config.id, "100%", "100%");
  
  // canvas dimensions
  //var canvasW = document.getElementById(this.config.id).clientWidth;
  //var canvasH = document.getElementById(this.config.id).clientHeight;
  var canvasW = getStyle(document.getElementById(this.config.id), "width").slice(0, -2) * 1;
  var canvasH = getStyle(document.getElementById(this.config.id), "height").slice(0, -2) * 1;
  
  // widget dimensions
  var widgetW, widgetH;
  if ((canvasW / canvasH) > 1.25) {
    widgetW = 1.25 * canvasH;
    widgetH = canvasH;
  } else {
    widgetW = canvasW;
    widgetH = canvasW / 1.25;
  }
  
  // delta 
  var dx = (canvasW - widgetW)/2;
  var dy = (canvasH - widgetH)/2;
  
  // title 
  var titleFontSize = ((widgetH / 8) > 10) ? (widgetH / 10) : 10;
  var titleX = dx + widgetW / 2;
  var titleY = dy + widgetH / 9;
  
  // value 
  var valueFontSize = ((widgetH / 6.4) > 16) ? (widgetH / 6.4) : 16;
  var valueX = dx + widgetW / 2;
  var valueY = dy + widgetH / 1.4;
  
  // label 
  var labelFontSize = ((widgetH / 16) > 10) ? (widgetH / 16) : 10;
  var labelX = dx + widgetW / 2;
  //var labelY = dy + widgetH / 1.126760563380282;
  var labelY = valueY + valueFontSize / 2 + 6;
  
  // min 
  var minFontSize = ((widgetH / 16) > 10) ? (widgetH / 16) : 10;
  var minX = dx + (widgetW / 10) + (widgetW / 6.666666666666667 * this.config.gaugeWidthScale) / 2 ;
  var minY = dy + widgetH / 1.126760563380282;
  
  // max 
  var maxFontSize = ((widgetH / 16) > 10) ? (widgetH / 16) : 10;
  var maxX = dx + widgetW - (widgetW / 10) - (widgetW / 6.666666666666667 * this.config.gaugeWidthScale) / 2 ;
  var maxY = dy + widgetH / 1.126760563380282;
  
  // parameters
  this.params  = {
    canvasW : canvasW,
    canvasH : canvasH,
    widgetW : widgetW,
    widgetH : widgetH,
    dx : dx,
    dy : dy,
    titleFontSize : titleFontSize,
    titleX : titleX,
    titleY : titleY,
    valueFontSize : valueFontSize,
    valueX : valueX,
    valueY : valueY,
    labelFontSize : labelFontSize,
    labelX : labelX,
    labelY : labelY,
    minFontSize : minFontSize,
    minX : minX,
    minY : minY,
    maxFontSize : maxFontSize,
    maxX : maxX,
    maxY : maxY
  };
  
  // pki - custom attribute for generating gauge paths
  this.canvas.customAttributes.pki = function (value, min, max, w, h, dx, dy, gws) {
    
       var alpha = (1 - (value - min) / (max - min)) * Math.PI ,
          Ro = w / 2 - w / 10,
          Ri = Ro - w / 6.666666666666667 * gws,
          
          Cx = w / 2 + dx,
          Cy = h / 1.25 + dy,
          
          Xo = w / 2 + dx + Ro * Math.cos(alpha),
          Yo = h - (h - Cy) + dy - Ro * Math.sin(alpha),
          Xi = w / 2 + dx + Ri * Math.cos(alpha),
          Yi = h - (h - Cy) + dy - Ri * Math.sin(alpha),
          path;
    
      path += "M" + (Cx - Ri) + "," + Cy + " ";
      path += "L" + (Cx - Ro) + "," + Cy + " ";
      path += "A" + Ro + "," + Ro + " 0 0,1 " + Xo + "," + Yo + " ";
      path += "L" + Xi + "," + Yi + " ";
      path += "A" + Ri + "," + Ri + " 0 0,0 " + (Cx - Ri) + "," + Cy + " ";
      path += "z ";
      return { path: path };
  }  
  
  // gauge
  this.gauge = this.canvas.path().attr({
    "stroke": "none",
    "fill": this.config.gaugeColor,   
    pki: [this.config.max, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale]
  });
  this.gauge.id = this.config.id+"-gauge";
  
  // level
  this.level = this.canvas.path().attr({
    "stroke": "none",
    "fill": getColorForPercentage((this.config.value - this.config.min) / (this.config.max - this.config.min), this.config.levelColors, this.config.levelColorsGradient),  
    pki: [this.config.min, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale]
  });
  this.level.id = this.config.id+"-level";
  
  // title
  this.txtTitle = this.canvas.text(this.params.titleX, this.params.titleY, this.config.title);
  this.txtTitle. attr({
    "font-size":this.params.titleFontSize,
    "font-weight":"bold",
    "font-family":"Arial",
    "fill":this.config.titleFontColor,
    "fill-opacity":"1"         
  });
  this.txtTitle.id = this.config.id+"-txttitle";
  
  // value
  this.txtValue = this.canvas.text(this.params.valueX, this.params.valueY, this.originalValue);
  this.txtValue. attr({
    "font-size":this.params.valueFontSize,
    "font-weight":"bold",
    "font-family":"Arial",
    "fill":this.config.valueFontColor,
    "fill-opacity":"0"          
  });
  this.txtValue.id = this.config.id+"-txtvalue";
  
  // label
  this.txtLabel = this.canvas.text(this.params.labelX, this.params.labelY, this.config.label);
  this.txtLabel. attr({
    "font-size":this.params.labelFontSize,
    "font-weight":"normal",
    "font-family":"Arial",
    "fill":this.config.labelFontColor,   
    "fill-opacity":"0"
  });
  this.txtLabel.id = this.config.id+"-txtlabel";
  
  // min
  this.txtMin = this.canvas.text(this.params.minX, this.params.minY, this.config.min);
  this.txtMin. attr({
    "font-size":this.params.minFontSize,
    "font-weight":"normal",
    "font-family":"Arial",
    "fill":this.config.labelFontColor,   
    "fill-opacity": (this.config.showMinMax == true)? "1" : "0"
  });
  this.txtMin.id = this.config.id+"-txtmin";
  
  // max
  this.txtMax = this.canvas.text(this.params.maxX, this.params.maxY, this.config.max);
  this.txtMax. attr({
    "font-size":this.params.maxFontSize,
    "font-weight":"normal",
    "font-family":"Arial",
    "fill":this.config.labelFontColor,   
    "fill-opacity": (this.config.showMinMax == true)? "1" : "0"
  });
  this.txtMax.id = this.config.id+"-txtmax";
  
  var defs = this.canvas.canvas.childNodes[1];
  var svg = "http://www.w3.org/2000/svg";
  
  
  
  if (ie < 9) {
    onCreateElementNsReady(function() {
      this.generateShadow();
    });  
  } else {
    this.generateShadow(svg, defs);
  }
  
  // animate 
  this.level.animate({pki: [this.config.value, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale]},  this.config.startAnimationTime, this.config.startAnimationType);
  
  this.txtValue.animate({"fill-opacity":"1"}, this.config.startAnimationTime, this.config.startAnimationType); 
  this.txtLabel.animate({"fill-opacity":"1"}, this.config.startAnimationTime, this.config.startAnimationType);  
};

// refresh gauge level
JustGage.prototype.refresh = function(val) {
  // overflow values
  originalVal = val;
  if (val > this.config.max) {val = this.config.max;}
  if (val < this.config.min) {val = this.config.min;}
    
  var color = getColorForPercentage((val - this.config.min) / (this.config.max - this.config.min), this.config.levelColors, this.config.levelColorsGradient);
  this.canvas.getById(this.config.id+"-txtvalue").attr({"text":originalVal});
  this.canvas.getById(this.config.id+"-level").animate({pki: [val, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale], "fill":color},  this.config.refreshAnimationTime, this.config.refreshAnimationType);
};

var percentColors = [
  "#a9d70b",
  "#f9c802",
  "#ff0000"
]

JustGage.prototype.generateShadow = function(svg, defs) {
    // FILTER
    var gaussFilter=document.createElementNS(svg,"filter");
    gaussFilter.setAttribute("id", this.config.id + "-inner-shadow");
    defs.appendChild(gaussFilter);
    
    // offset
    var feOffset = document.createElementNS(svg,"feOffset");
    feOffset.setAttribute("dx", 0);
    feOffset.setAttribute("dy", this.config.shadowVerticalOffset);
    gaussFilter.appendChild(feOffset);
    
    // blur
    var feGaussianBlur = document.createElementNS(svg,"feGaussianBlur");
    feGaussianBlur.setAttribute("result","offset-blur");
    feGaussianBlur.setAttribute("stdDeviation", this.config.shadowSize);
    gaussFilter.appendChild(feGaussianBlur);
    
    // composite 1
    var feComposite1 = document.createElementNS(svg,"feComposite");
    feComposite1.setAttribute("operator","out");
    feComposite1.setAttribute("in", "SourceGraphic");
    feComposite1.setAttribute("in2","offset-blur");
    feComposite1.setAttribute("result","inverse");
    gaussFilter.appendChild(feComposite1);
    
    // flood
    var feFlood = document.createElementNS(svg,"feFlood");
    feFlood.setAttribute("flood-color","black");
    feFlood.setAttribute("flood-opacity", this.config.shadowOpacity);
    feFlood.setAttribute("result","color");
    gaussFilter.appendChild(feFlood);
    
    // composite 2
    var feComposite2 = document.createElementNS(svg,"feComposite");
    feComposite2.setAttribute("operator","in");
    feComposite2.setAttribute("in", "color");
    feComposite2.setAttribute("in2","inverse");
    feComposite2.setAttribute("result","shadow");
    gaussFilter.appendChild(feComposite2);
    
    // composite 3
    var feComposite3 = document.createElementNS(svg,"feComposite");
    feComposite3.setAttribute("operator","over");
    feComposite3.setAttribute("in", "shadow");
    feComposite3.setAttribute("in2","SourceGraphic");
    gaussFilter.appendChild(feComposite3);

    // set shadow
    if (this.config.showInnerShadow == true) {
      this.canvas.canvas.childNodes[2].setAttribute("filter", "url(#" + this.config.id + "-inner-shadow)");
      this.canvas.canvas.childNodes[3].setAttribute("filter", "url(#" + this.config.id + "-inner-shadow)");
    }
}

var getColorForPercentage = function(pct, col, grad) {
    
    var no = col.length;
    if (no === 1) return col[0];
    var inc = (grad) ? (1 / (no - 1)) : (1 / no);
    var colors = new Array();
    for (var i = 0; i < col.length; i++) {
      var percentage = (grad) ? (inc * i) : (inc * (i + 1));
      var rval = parseInt((cutHex(col[i])).substring(0,2),16);
      var gval = parseInt((cutHex(col[i])).substring(2,4),16);
      var bval = parseInt((cutHex(col[i])).substring(4,6),16);
      colors[i] = { pct: percentage, color: { r: rval, g: gval, b: bval  } };
    }
        
    if(pct == 0) return 'rgb(' + [colors[0].color.r, colors[0].color.g, colors[0].color.b].join(',') + ')';
      for (var i = 0; i < colors.length; i++) {
          if (pct <= colors[i].pct) {
            if (grad == true) {
              var lower = colors[i - 1];
              var upper = colors[i];
              var range = upper.pct - lower.pct;
              var rangePct = (pct - lower.pct) / range;
              var pctLower = 1 - rangePct;
              var pctUpper = rangePct;
              var color = {
                  r: Math.floor(lower.color.r * pctLower + upper.color.r * pctUpper),
                  g: Math.floor(lower.color.g * pctLower + upper.color.g * pctUpper),
                  b: Math.floor(lower.color.b * pctLower + upper.color.b * pctUpper)
              };
              return 'rgb(' + [color.r, color.g, color.b].join(',') + ')';
            } else {
              return 'rgb(' + [colors[i].color.r, colors[i].color.g, colors[i].color.b].join(',') + ')'; 
            }
          }
      }
} 

function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}    

function cutHex(str) {return (str.charAt(0)=="#") ? str.substring(1,7):str}

function getStyle(oElm, strCssRule){
	var strValue = "";
	if(document.defaultView && document.defaultView.getComputedStyle){
		strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
	}
	else if(oElm.currentStyle){
		strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){
			return p1.toUpperCase();
		});
		strValue = oElm.currentStyle[strCssRule];
	}
	return strValue;
}

 function onCreateElementNsReady(func) {
  if (document.createElementNS != undefined) {
    func();
  } else {
    setTimeout(function() { onCreateElementNsReady(func); }, 100);
  }
}

// ----------------------------------------------------------
// A short snippet for detecting versions of IE in JavaScript
// without resorting to user-agent sniffing
// ----------------------------------------------------------
// If you're not in IE (or IE version is less than 5) then:
// ie === undefined
// If you're in IE (>=5) then you can determine which version:
// ie === 7; // IE7
// Thus, to detect IE:
// if (ie) {}
// And to detect the version:
// ie === 6 // IE6
// ie > 7 // IE8, IE9 ...
// ie < 9 // Anything less than IE9
// ----------------------------------------------------------

// UPDATE: Now using Live NodeList idea from @jdalton

var ie = (function(){

    var undef,
        v = 3,
        div = document.createElement('div'),
        all = div.getElementsByTagName('i');

    while (
        div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
        all[0]
    );

    return v > 4 ? v : undef;

}());
//! moment.js
//! version : 2.8.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(a){rb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function e(a,b){var c=!0;return l(function(){return c&&(d(a),c=!1),b.apply(this,arguments)},b)}function f(a,b){nc[a]||(d(b),nc[a]=!0)}function g(a,b){return function(c){return o(a.call(this,c),b)}}function h(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function i(){}function j(a,b){b!==!1&&E(a),m(this,a),this._d=new Date(+a._d)}function k(a){var b=x(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=rb.localeData(),this._bubble()}function l(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fb.length>0)for(c in Fb)d=Fb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(a){return 0>a?Math.ceil(a):Math.floor(a)}function o(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function p(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function q(a,b){var c;return b=J(b,a),a.isBefore(b)?c=p(a,b):(c=p(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function r(a,b){return function(c,d){var e,g;return null===d||isNaN(+d)||(f(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),g=c,c=d,d=g),c="string"==typeof c?+c:c,e=rb.duration(c,d),s(this,e,a),this}}function s(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&lb(a,"Date",kb(a,"Date")+f*c),g&&jb(a,kb(a,"Month")+g*c),d&&rb.updateOffset(a,f||g)}function t(a){return"[object Array]"===Object.prototype.toString.call(a)}function u(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&z(a[d])!==z(b[d]))&&g++;return g+f}function w(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=gc[a]||hc[b]||b}return a}function x(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=w(c),b&&(d[b]=a[c]));return d}function y(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}rb[b]=function(e,f){var g,h,i=rb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=rb().utc().set(d,a);return i.call(rb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function z(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function A(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function B(a,b,c){return fb(rb([a,11,31+b-c]),b,c).week}function C(a){return D(a)?366:365}function D(a){return a%4===0&&a%100!==0||a%400===0}function E(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[yb]<0||a._a[yb]>11?yb:a._a[zb]<1||a._a[zb]>A(a._a[xb],a._a[yb])?zb:a._a[Ab]<0||a._a[Ab]>23?Ab:a._a[Bb]<0||a._a[Bb]>59?Bb:a._a[Cb]<0||a._a[Cb]>59?Cb:a._a[Db]<0||a._a[Db]>999?Db:-1,a._pf._overflowDayOfYear&&(xb>b||b>zb)&&(b=zb),a._pf.overflow=b)}function F(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function G(a){return a?a.toLowerCase().replace("_","-"):a}function H(a){for(var b,c,d,e,f=0;f<a.length;){for(e=G(a[f]).split("-"),b=e.length,c=G(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=I(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function I(a){var b=null;if(!Eb[a]&&Gb)try{b=rb.locale(),require("./locale/"+a),rb.locale(b)}catch(c){}return Eb[a]}function J(a,b){return b._isUTC?rb(a).zone(b._offset||0):rb(a).local()}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Kb);for(b=0,c=d.length;c>b;b++)d[b]=mc[d[b]]?mc[d[b]]:K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ic[b]||(ic[b]=L(b)),ic[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Lb.lastIndex=0;d>=0&&Lb.test(a);)a=a.replace(Lb,c),Lb.lastIndex=0,d-=1;return a}function O(a,b){var c,d=b._strict;switch(a){case"Q":return Wb;case"DDDD":return Yb;case"YYYY":case"GGGG":case"gggg":return d?Zb:Ob;case"Y":case"G":case"g":return _b;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?$b:Pb;case"S":if(d)return Wb;case"SS":if(d)return Xb;case"SSS":if(d)return Yb;case"DDD":return Nb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Rb;case"a":case"A":return b._locale._meridiemParse;case"X":return Ub;case"Z":case"ZZ":return Sb;case"T":return Tb;case"SSSS":return Qb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Xb:Mb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Mb;case"Do":return Vb;default:return c=new RegExp(X(W(a.replace("\\","")),"i"))}}function P(a){a=a||"";var b=a.match(Sb)||[],c=b[b.length-1]||[],d=(c+"").match(ec)||["-",0,0],e=+(60*d[1])+z(d[2]);return"+"===d[0]?-e:e}function Q(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[yb]=3*(z(b)-1));break;case"M":case"MM":null!=b&&(e[yb]=z(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[yb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[zb]=z(b));break;case"Do":null!=b&&(e[zb]=z(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=z(b));break;case"YY":e[xb]=rb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[xb]=z(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Ab]=z(b);break;case"m":case"mm":e[Bb]=z(b);break;case"s":case"ss":e[Cb]=z(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Db]=z(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=P(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=z(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=rb.parseTwoDigitYear(b)}}function R(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[xb],fb(rb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[xb],fb(rb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=gb(d,e,f,h,g),a._a[xb]=i.year,a._dayOfYear=i.dayOfYear}function S(a){var c,d,e,f,g=[];if(!a._d){for(e=U(a),a._w&&null==a._a[zb]&&null==a._a[yb]&&R(a),a._dayOfYear&&(f=b(a._a[xb],e[xb]),a._dayOfYear>C(f)&&(a._pf._overflowDayOfYear=!0),d=bb(f,0,a._dayOfYear),a._a[yb]=d.getUTCMonth(),a._a[zb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?bb:ab).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function T(a){var b;a._d||(b=x(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],S(a))}function U(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function V(a){if(a._f===rb.ISO_8601)return void Z(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=N(a._f,a._locale).match(Kb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(O(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),mc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),Q(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Ab]<12&&(a._a[Ab]+=12),a._isPm===!1&&12===a._a[Ab]&&(a._a[Ab]=0),S(a),E(a)}function W(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function X(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(a){var b,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=m({},a),b._pf=c(),b._f=a._f[f],V(b),F(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,d=b));l(a,d||b)}function Z(a){var b,c,d=a._i,e=ac.exec(d);if(e){for(a._pf.iso=!0,b=0,c=cc.length;c>b;b++)if(cc[b][1].exec(d)){a._f=cc[b][0]+(e[6]||" ");break}for(b=0,c=dc.length;c>b;b++)if(dc[b][1].exec(d)){a._f+=dc[b][0];break}d.match(Sb)&&(a._f+="Z"),V(a)}else a._isValid=!1}function $(a){Z(a),a._isValid===!1&&(delete a._isValid,rb.createFromInputFallback(a))}function _(b){var c,d=b._i;d===a?b._d=new Date:u(d)?b._d=new Date(+d):null!==(c=Hb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?$(b):t(d)?(b._a=d.slice(0),S(b)):"object"==typeof d?T(b):"number"==typeof d?b._d=new Date(d):rb.createFromInputFallback(b)}function ab(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function bb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function cb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function db(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function eb(a,b,c){var d=rb.duration(a).abs(),e=wb(d.as("s")),f=wb(d.as("m")),g=wb(d.as("h")),h=wb(d.as("d")),i=wb(d.as("M")),j=wb(d.as("y")),k=e<jc.s&&["s",e]||1===f&&["m"]||f<jc.m&&["mm",f]||1===g&&["h"]||g<jc.h&&["hh",g]||1===h&&["d"]||h<jc.d&&["dd",h]||1===i&&["M"]||i<jc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,db.apply({},k)}function fb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=rb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function gb(a,b,c,d,e){var f,g,h=bb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:C(a-1)+g}}function hb(b){var c=b._i,d=b._f;return b._locale=b._locale||rb.localeData(b._l),null===c||d===a&&""===c?rb.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),rb.isMoment(c)?new j(c,!0):(d?t(d)?Y(b):V(b):_(b),new j(b)))}function ib(a,b){var c,d;if(1===b.length&&t(b[0])&&(b=b[0]),!b.length)return rb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function jb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),A(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function kb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function lb(a,b,c){return"Month"===b?jb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function mb(a,b){return function(c){return null!=c?(lb(this,a,c),rb.updateOffset(this,b),this):kb(this,a)}}function nb(a){return 400*a/146097}function ob(a){return 146097*a/400}function pb(a){rb.duration.fn[a]=function(){return this._data[a]}}function qb(a){"undefined"==typeof ender&&(sb=vb.moment,vb.moment=a?e("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",rb):rb)}for(var rb,sb,tb,ub="2.8.1",vb="undefined"!=typeof global?global:this,wb=Math.round,xb=0,yb=1,zb=2,Ab=3,Bb=4,Cb=5,Db=6,Eb={},Fb=[],Gb="undefined"!=typeof module&&module.exports,Hb=/^\/?Date\((\-?\d+)/i,Ib=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Jb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Kb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Lb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Mb=/\d\d?/,Nb=/\d{1,3}/,Ob=/\d{1,4}/,Pb=/[+\-]?\d{1,6}/,Qb=/\d+/,Rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Sb=/Z|[\+\-]\d\d:?\d\d/gi,Tb=/T/i,Ub=/[\+\-]?\d+(\.\d{1,3})?/,Vb=/\d{1,2}/,Wb=/\d/,Xb=/\d\d/,Yb=/\d{3}/,Zb=/\d{4}/,$b=/[+-]?\d{6}/,_b=/[+-]?\d+/,ac=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bc="YYYY-MM-DDTHH:mm:ssZ",cc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ec=/([\+\-]|\d\d)/gi,fc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),gc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ic={},jc={s:45,m:45,h:22,d:26,M:11},kc="DDD w W M D d".split(" "),lc="M D H h m s w W".split(" "),mc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+o(Math.abs(a),6)},gg:function(){return o(this.weekYear()%100,2)},gggg:function(){return o(this.weekYear(),4)},ggggg:function(){return o(this.weekYear(),5)},GG:function(){return o(this.isoWeekYear()%100,2)},GGGG:function(){return o(this.isoWeekYear(),4)},GGGGG:function(){return o(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return o(z(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},SSSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+":"+o(z(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+o(z(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nc={},oc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];kc.length;)tb=kc.pop(),mc[tb+"o"]=h(mc[tb],tb);for(;lc.length;)tb=lc.pop(),mc[tb+tb]=g(mc[tb],2);mc.DDDD=g(mc.DDD,3),l(i.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=rb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=rb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return fb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),rb=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=c(),hb(g)},rb.suppressDeprecationWarnings=!1,rb.createFromInputFallback=e("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),rb.min=function(){var a=[].slice.call(arguments,0);return ib("isBefore",a)},rb.max=function(){var a=[].slice.call(arguments,0);return ib("isAfter",a)},rb.utc=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=d,g._strict=f,g._pf=c(),hb(g).utc()},rb.unix=function(a){return rb(1e3*a)},rb.duration=function(a,b){var c,d,e,f,g=a,h=null;return rb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Ib.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:z(h[zb])*c,h:z(h[Ab])*c,m:z(h[Bb])*c,s:z(h[Cb])*c,ms:z(h[Db])*c}):(h=Jb.exec(a))?(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}):"object"==typeof g&&("from"in g||"to"in g)&&(f=q(rb(g.from),rb(g.to)),g={},g.ms=f.milliseconds,g.M=f.months),d=new k(g),rb.isDuration(a)&&a.hasOwnProperty("_locale")&&(d._locale=a._locale),d},rb.version=ub,rb.defaultFormat=bc,rb.ISO_8601=function(){},rb.momentProperties=Fb,rb.updateOffset=function(){},rb.relativeTimeThreshold=function(b,c){return jc[b]===a?!1:c===a?jc[b]:(jc[b]=c,!0)},rb.lang=e("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return rb.locale(a,b)}),rb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?rb.defineLocale(a,b):rb.localeData(a),c&&(rb.duration._locale=rb._locale=c)),rb._locale._abbr},rb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Eb[a]||(Eb[a]=new i),Eb[a].set(b),rb.locale(a),Eb[a]):(delete Eb[a],null)},rb.langData=e("moment.langData is deprecated. Use moment.localeData instead.",function(a){return rb.localeData(a)}),rb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return rb._locale;if(!t(a)){if(b=I(a))return b;a=[a]}return H(a)},rb.isMoment=function(a){return a instanceof j||null!=a&&a.hasOwnProperty("_isAMomentObject")},rb.isDuration=function(a){return a instanceof k};for(tb=oc.length-1;tb>=0;--tb)y(oc[tb]);rb.normalizeUnits=function(a){return w(a)},rb.invalid=function(a){var b=rb.utc(0/0);return null!=a?l(b._pf,a):b._pf.userInvalidated=!0,b},rb.parseZone=function(){return rb.apply(null,arguments).parseZone()},rb.parseTwoDigitYear=function(a){return z(a)+(z(a)>68?1900:2e3)},l(rb.fn=j.prototype,{clone:function(){return rb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=rb(this).utc();return 0<a.year()&&a.year()<=9999?M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&v(this._a,(this._isUTC?rb.utc(this._a):rb(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(a){var b=M(this,a||rb.defaultFormat);return this.localeData().postformat(b)},add:r(1,"add"),subtract:r(-1,"subtract"),diff:function(a,b,c){var d,e,f=J(a,this),g=6e4*(this.zone()-f.zone());return b=w(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-rb(this).startOf("month")-(f-rb(f).startOf("month")))/d,e-=6e4*(this.zone()-rb(this).startOf("month").zone()-(f.zone()-rb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:n(e)},from:function(a,b){return rb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(rb(),a)},calendar:function(a){var b=a||rb(),c=J(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=cb(a,this.localeData()),this.add(a-b,"d")):b},month:mb("Month",!0),startOf:function(a){switch(a=w(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=w(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+rb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+rb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+J(a,this).startOf(b)},min:e("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),this>a?this:a}),max:e("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():("string"==typeof a&&(a=P(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._d.getTimezoneOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?s(this,rb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?rb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(a){var b=wb((rb(this).startOf("day")-rb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=fb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=fb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=fb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return B(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return B(this.year(),a.dow,a.doy)},get:function(a){return a=w(a),this[a]()},set:function(a,b){return a=w(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){return b===a?this._locale._abbr:(this._locale=rb.localeData(b),this)},lang:e("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():(this._locale=rb.localeData(b),this)}),localeData:function(){return this._locale}}),rb.fn.millisecond=rb.fn.milliseconds=mb("Milliseconds",!1),rb.fn.second=rb.fn.seconds=mb("Seconds",!1),rb.fn.minute=rb.fn.minutes=mb("Minutes",!1),rb.fn.hour=rb.fn.hours=mb("Hours",!0),rb.fn.date=mb("Date",!0),rb.fn.dates=e("dates accessor is deprecated. Use date instead.",mb("Date",!0)),rb.fn.year=mb("FullYear",!0),rb.fn.years=e("years accessor is deprecated. Use year instead.",mb("FullYear",!0)),rb.fn.days=rb.fn.day,rb.fn.months=rb.fn.month,rb.fn.weeks=rb.fn.week,rb.fn.isoWeeks=rb.fn.isoWeek,rb.fn.quarters=rb.fn.quarter,rb.fn.toJSON=rb.fn.toISOString,l(rb.duration.fn=k.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=n(d/1e3),g.seconds=a%60,b=n(a/60),g.minutes=b%60,c=n(b/60),g.hours=c%24,e+=n(c/24),h=n(nb(e)),e-=n(ob(h)),f+=n(e/30),e%=30,h+=n(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12)},humanize:function(a){var b=eb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=rb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=rb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=w(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=w(a),b=this._days+this._milliseconds/864e5,"month"===a||"year"===a)return c=this._months+12*nb(b),"month"===a?c:c/12;switch(b+=ob(this._months/12),a){case"week":return b/7;case"day":return b;case"hour":return 24*b;case"minute":return 24*b*60;case"second":return 24*b*60*60;case"millisecond":return 24*b*60*60*1e3;default:throw new Error("Unknown unit "+a)}},lang:rb.fn.lang,locale:rb.fn.locale,toIsoString:e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}});for(tb in fc)fc.hasOwnProperty(tb)&&pb(tb.toLowerCase());rb.duration.fn.asMilliseconds=function(){return this.as("ms")},rb.duration.fn.asSeconds=function(){return this.as("s")},rb.duration.fn.asMinutes=function(){return this.as("m")},rb.duration.fn.asHours=function(){return this.as("h")},rb.duration.fn.asDays=function(){return this.as("d")},rb.duration.fn.asWeeks=function(){return this.as("weeks")},rb.duration.fn.asMonths=function(){return this.as("M")},rb.duration.fn.asYears=function(){return this.as("y")},rb.locale("en",{ordinal:function(a){var b=a%10,c=1===z(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Gb?module.exports=rb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(vb.moment=sb),rb}),qb(!0)):qb()}).call(this);
/**
* @version: 1.3.13
* @author: Dan Grossman http://www.dangrossman.info/
* @date: 2014-09-04
* @copyright: Copyright (c) 2012-2014 Dan Grossman. All rights reserved.
* @license: Licensed under Apache License v2.0. See http://www.apache.org/licenses/LICENSE-2.0
* @website: http://www.improvely.com/
*/

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['moment', 'jquery', 'exports'], function(momentjs, $, exports) {
      root.daterangepicker = factory(root, exports, momentjs, $);
    });

  } else if (typeof exports !== 'undefined') {
    var momentjs = require('moment');
    var jQuery;
    try {
      jQuery = require('jquery');
    } catch (err) {
      jQuery = window.jQuery;
      if (!jQuery) throw new Error('jQuery dependency not found');
    }

    factory(root, exports, momentjs, jQuery);

  // Finally, as a browser global.
  } else {
    root.daterangepicker = factory(root, {}, root.moment, (root.jQuery || root.Zepto || root.ender || root.$));
  }

}(this, function(root, daterangepicker, moment, $) {

    var DateRangePicker = function (element, options, cb) {

        // by default, the daterangepicker element is placed at the bottom of HTML body
        this.parentEl = 'body';

        //element that triggered the date range picker
        this.element = $(element);

        //tracks visible state
        this.isShowing = false;

        //create the picker HTML object
        var DRPTemplate = '<div class="daterangepicker dropdown-menu">' +
                '<div class="calendar left"></div>' +
                '<div class="calendar right"></div>' +
                '<div class="ranges">' +
                  '<div class="range_inputs">' +
                    '<div class="daterangepicker_start_input">' +
                      '<label for="daterangepicker_start"></label>' +
                      '<input class="input-mini" type="text" name="daterangepicker_start" value="" />' +
                    '</div>' +
                    '<div class="daterangepicker_end_input">' +
                      '<label for="daterangepicker_end"></label>' +
                      '<input class="input-mini" type="text" name="daterangepicker_end" value="" />' +
                    '</div>' +
                    '<button class="applyBtn" disabled="disabled"></button>&nbsp;' +
                    '<button class="cancelBtn"></button>' +
                  '</div>' +
                '</div>' +
              '</div>';

        //custom options
        if (typeof options !== 'object' || options === null)
            options = {};

        this.parentEl = (typeof options === 'object' && options.parentEl && $(options.parentEl).length) ? $(options.parentEl) : $(this.parentEl);
        this.container = $(DRPTemplate).appendTo(this.parentEl);

        this.setOptions(options, cb);

        //apply CSS classes and labels to buttons
        var c = this.container;
        $.each(this.buttonClasses, function (idx, val) {
            c.find('button').addClass(val);
        });
        this.container.find('.daterangepicker_start_input label').html(this.locale.fromLabel);
        this.container.find('.daterangepicker_end_input label').html(this.locale.toLabel);
        if (this.applyClass.length)
            this.container.find('.applyBtn').addClass(this.applyClass);
        if (this.cancelClass.length)
            this.container.find('.cancelBtn').addClass(this.cancelClass);
        this.container.find('.applyBtn').html(this.locale.applyLabel);
        this.container.find('.cancelBtn').html(this.locale.cancelLabel);

        //event listeners

        this.container.find('.calendar')
            .on('click.daterangepicker', '.prev', $.proxy(this.clickPrev, this))
            .on('click.daterangepicker', '.next', $.proxy(this.clickNext, this))
            .on('click.daterangepicker', 'td.available', $.proxy(this.clickDate, this))
            .on('mouseenter.daterangepicker', 'td.available', $.proxy(this.hoverDate, this))
            .on('mouseleave.daterangepicker', 'td.available', $.proxy(this.updateFormInputs, this))
            .on('change.daterangepicker', 'select.yearselect', $.proxy(this.updateMonthYear, this))
            .on('change.daterangepicker', 'select.monthselect', $.proxy(this.updateMonthYear, this))
            .on('change.daterangepicker', 'select.hourselect,select.minuteselect,select.ampmselect', $.proxy(this.updateTime, this));

        this.container.find('.ranges')
            .on('click.daterangepicker', 'button.applyBtn', $.proxy(this.clickApply, this))
            .on('click.daterangepicker', 'button.cancelBtn', $.proxy(this.clickCancel, this))
            .on('click.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.showCalendars, this))
            .on('change.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.inputsChanged, this))
            .on('keydown.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.inputsKeydown, this))
            .on('click.daterangepicker', 'li', $.proxy(this.clickRange, this))
            .on('mouseenter.daterangepicker', 'li', $.proxy(this.enterRange, this))
            .on('mouseleave.daterangepicker', 'li', $.proxy(this.updateFormInputs, this));

        if (this.element.is('input')) {
            this.element.on({
                'click.daterangepicker': $.proxy(this.show, this),
                'focus.daterangepicker': $.proxy(this.show, this),
                'keyup.daterangepicker': $.proxy(this.updateFromControl, this)
            });
        } else {
            this.element.on('click.daterangepicker', $.proxy(this.toggle, this));
        }

    };

    DateRangePicker.prototype = {

        constructor: DateRangePicker,

        setOptions: function(options, callback) {

            this.startDate = moment().startOf('day');
            this.endDate = moment().endOf('day');
            this.minDate = false;
            this.maxDate = false;
            this.dateLimit = false;

            this.showDropdowns = false;
            this.showWeekNumbers = false;
            this.timePicker = false;
            this.timePickerIncrement = 30;
            this.timePicker12Hour = true;
            this.singleDatePicker = false;
            this.ranges = {};

            this.opens = 'right';
            if (this.element.hasClass('pull-right'))
                this.opens = 'left';

            this.buttonClasses = ['btn', 'btn-small btn-sm'];
            this.applyClass = 'btn-success';
            this.cancelClass = 'btn-default';

            this.format = 'MM/DD/YYYY';
            this.separator = ' - ';

            this.locale = {
                applyLabel: 'Apply',
                cancelLabel: 'Cancel',
                fromLabel: 'From',
                toLabel: 'To',
                weekLabel: 'W',
                customRangeLabel: 'Custom Range',
                daysOfWeek: moment.weekdaysMin(),
                monthNames: moment.monthsShort(),
                firstDay: moment.localeData()._week.dow
            };

            this.cb = function () { };

            if (typeof options.format === 'string')
                this.format = options.format;

            if (typeof options.separator === 'string')
                this.separator = options.separator;

            if (typeof options.startDate === 'string')
                this.startDate = moment(options.startDate, this.format);

            if (typeof options.endDate === 'string')
                this.endDate = moment(options.endDate, this.format);

            if (typeof options.minDate === 'string')
                this.minDate = moment(options.minDate, this.format);

            if (typeof options.maxDate === 'string')
                this.maxDate = moment(options.maxDate, this.format);

            if (typeof options.startDate === 'object')
                this.startDate = moment(options.startDate);

            if (typeof options.endDate === 'object')
                this.endDate = moment(options.endDate);

            if (typeof options.minDate === 'object')
                this.minDate = moment(options.minDate);

            if (typeof options.maxDate === 'object')
                this.maxDate = moment(options.maxDate);

            if (typeof options.applyClass === 'string')
                this.applyClass = options.applyClass;

            if (typeof options.cancelClass === 'string')
                this.cancelClass = options.cancelClass;

            if (typeof options.dateLimit === 'object')
                this.dateLimit = options.dateLimit;

            if (typeof options.locale === 'object') {

                if (typeof options.locale.daysOfWeek === 'object') {
                    // Create a copy of daysOfWeek to avoid modification of original
                    // options object for reusability in multiple daterangepicker instances
                    this.locale.daysOfWeek = options.locale.daysOfWeek.slice();
                }

                if (typeof options.locale.monthNames === 'object') {
                  this.locale.monthNames = options.locale.monthNames.slice();
                }

                if (typeof options.locale.firstDay === 'number') {
                  this.locale.firstDay = options.locale.firstDay;
                }

                if (typeof options.locale.applyLabel === 'string') {
                  this.locale.applyLabel = options.locale.applyLabel;
                }

                if (typeof options.locale.cancelLabel === 'string') {
                  this.locale.cancelLabel = options.locale.cancelLabel;
                }

                if (typeof options.locale.fromLabel === 'string') {
                  this.locale.fromLabel = options.locale.fromLabel;
                }

                if (typeof options.locale.toLabel === 'string') {
                  this.locale.toLabel = options.locale.toLabel;
                }

                if (typeof options.locale.weekLabel === 'string') {
                  this.locale.weekLabel = options.locale.weekLabel;
                }

                if (typeof options.locale.customRangeLabel === 'string') {
                  this.locale.customRangeLabel = options.locale.customRangeLabel;
                }
            }

            if (typeof options.opens === 'string')
                this.opens = options.opens;

            if (typeof options.showWeekNumbers === 'boolean') {
                this.showWeekNumbers = options.showWeekNumbers;
            }

            if (typeof options.buttonClasses === 'string') {
                this.buttonClasses = [options.buttonClasses];
            }

            if (typeof options.buttonClasses === 'object') {
                this.buttonClasses = options.buttonClasses;
            }

            if (typeof options.showDropdowns === 'boolean') {
                this.showDropdowns = options.showDropdowns;
            }

            if (typeof options.singleDatePicker === 'boolean') {
                this.singleDatePicker = options.singleDatePicker;
                if (this.singleDatePicker) {
                    this.endDate = this.startDate.clone();
                }
            }

            if (typeof options.timePicker === 'boolean') {
                this.timePicker = options.timePicker;
            }

            if (typeof options.timePickerIncrement === 'number') {
                this.timePickerIncrement = options.timePickerIncrement;
            }

            if (typeof options.timePicker12Hour === 'boolean') {
                this.timePicker12Hour = options.timePicker12Hour;
            }

            // update day names order to firstDay
            if (this.locale.firstDay != 0) {
                var iterator = this.locale.firstDay;
                while (iterator > 0) {
                    this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());
                    iterator--;
                }
            }

            var start, end, range;

            //if no start/end dates set, check if an input element contains initial values
            if (typeof options.startDate === 'undefined' && typeof options.endDate === 'undefined') {
                if ($(this.element).is('input[type=text]')) {
                    var val = $(this.element).val();
                    var split = val.split(this.separator);
                    start = end = null;
                    if (split.length == 2) {
                        start = moment(split[0], this.format);
                        end = moment(split[1], this.format);
                    } else if (this.singleDatePicker) {
                        start = moment(val, this.format);
                        end = moment(val, this.format);
                    }
                    if (start !== null && end !== null) {
                        this.startDate = start;
                        this.endDate = end;
                    }
                }
            }

            if (typeof options.ranges === 'object') {
                for (range in options.ranges) {

                    start = moment(options.ranges[range][0]);
                    end = moment(options.ranges[range][1]);

                    // If we have a min/max date set, bound this range
                    // to it, but only if it would otherwise fall
                    // outside of the min/max.
                    if (this.minDate && start.isBefore(this.minDate))
                        start = moment(this.minDate);

                    if (this.maxDate && end.isAfter(this.maxDate))
                        end = moment(this.maxDate);

                    // If the end of the range is before the minimum (if min is set) OR
                    // the start of the range is after the max (also if set) don't display this
                    // range option.
                    if ((this.minDate && end.isBefore(this.minDate)) || (this.maxDate && start.isAfter(this.maxDate))) {
                        continue;
                    }

                    this.ranges[range] = [start, end];
                }

                var list = '<ul>';
                for (range in this.ranges) {
                    list += '<li>' + range + '</li>';
                }
                list += '<li>' + this.locale.customRangeLabel + '</li>';
                list += '</ul>';
                this.container.find('.ranges ul').remove();
                this.container.find('.ranges').prepend(list);
            }

            if (typeof callback === 'function') {
                this.cb = callback;
            }

            if (!this.timePicker) {
                this.startDate = this.startDate.startOf('day');
                this.endDate = this.endDate.endOf('day');
            }

            if (this.singleDatePicker) {
            	this.opens = 'right';
            	this.container.addClass('single');
                this.container.find('.calendar.right').show();
                this.container.find('.calendar.left').hide();
                if (!this.timePicker) {
	                this.container.find('.ranges').hide();
                } else {
                	this.container.find('.ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input').hide();
                }
                if (!this.container.find('.calendar.right').hasClass('single'))
                    this.container.find('.calendar.right').addClass('single');
            } else {
            	this.container.removeClass('single');
            	this.container.find('.calendar.right').removeClass('single');
                this.container.find('.ranges').show();
            }

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();
            this.oldChosenLabel = this.chosenLabel;

            this.leftCalendar = {
                month: moment([this.startDate.year(), this.startDate.month(), 1, this.startDate.hour(), this.startDate.minute()]),
                calendar: []
            };

            this.rightCalendar = {
                month: moment([this.endDate.year(), this.endDate.month(), 1, this.endDate.hour(), this.endDate.minute()]),
                calendar: []
            };

            if (this.opens == 'right') {
                //swap calendar positions
                var left = this.container.find('.calendar.left');
                var right = this.container.find('.calendar.right');

                if (right.hasClass('single')) {
                    right.removeClass('single');
                    left.addClass('single');
                }

                left.removeClass('left').addClass('right');
                right.removeClass('right').addClass('left');

                if (this.singleDatePicker) {
                    left.show();
                    right.hide();
                }
            }

            if (typeof options.ranges === 'undefined' && !this.singleDatePicker) {
                this.container.addClass('show-calendar');
            }

            this.container.addClass('opens' + this.opens);

            this.updateView();
            this.updateCalendars();

        },

        setStartDate: function(startDate) {
            if (typeof startDate === 'string')
                this.startDate = moment(startDate, this.format);

            if (typeof startDate === 'object')
                this.startDate = moment(startDate);

            if (!this.timePicker)
                this.startDate = this.startDate.startOf('day');

            this.oldStartDate = this.startDate.clone();

            this.updateView();
            this.updateCalendars();
            this.updateInputText();
        },

        setEndDate: function(endDate) {
            if (typeof endDate === 'string')
                this.endDate = moment(endDate, this.format);

            if (typeof endDate === 'object')
                this.endDate = moment(endDate);

            if (!this.timePicker)
                this.endDate = this.endDate.endOf('day');

            this.oldEndDate = this.endDate.clone();

            this.updateView();
            this.updateCalendars();
            this.updateInputText();
        },

        updateView: function () {
            this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());
            this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());
            this.updateFormInputs();
        },

        updateFormInputs: function () {
            this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.format));
            this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.format));

            if (this.startDate.isSame(this.endDate) || this.startDate.isBefore(this.endDate)) {
                this.container.find('button.applyBtn').removeAttr('disabled');
            } else {
                this.container.find('button.applyBtn').attr('disabled', 'disabled');
            }
        },

        updateFromControl: function () {
            if (!this.element.is('input')) return;
            if (!this.element.val().length) return;

            var dateString = this.element.val().split(this.separator),
                start = null,
                end = null;

            if(dateString.length === 2) {
                start = moment(dateString[0], this.format);
                end = moment(dateString[1], this.format);
            }

            if (this.singleDatePicker || start === null || end === null) {
                start = moment(this.element.val(), this.format);
                end = start;
            }

            if (end.isBefore(start)) return;

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();

            this.startDate = start;
            this.endDate = end;

            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.notify();

            this.updateCalendars();
        },

        notify: function () {
            this.updateView();
            this.cb(this.startDate, this.endDate, this.chosenLabel);
        },

        move: function () {
            var parentOffset = { top: 0, left: 0 };
            var parentRightEdge = $(window).width();
            if (!this.parentEl.is('body')) {
                parentOffset = {
                    top: this.parentEl.offset().top - this.parentEl.scrollTop(),
                    left: this.parentEl.offset().left - this.parentEl.scrollLeft()
                };
                parentRightEdge = this.parentEl[0].clientWidth + this.parentEl.offset().left;
            }

            if (this.opens == 'left') {
                this.container.css({
                    top: this.element.offset().top + this.element.outerHeight() - parentOffset.top,
                    right: parentRightEdge - this.element.offset().left - this.element.outerWidth(),
                    left: 'auto'
                });
                if (this.container.offset().left < 0) {
                    this.container.css({
                        right: 'auto',
                        left: 9
                    });
                }
            } else {
                this.container.css({
                    top: this.element.offset().top + this.element.outerHeight() - parentOffset.top,
                    left: this.element.offset().left - parentOffset.left,
                    right: 'auto'
                });
                if (this.container.offset().left + this.container.outerWidth() > $(window).width()) {
                    this.container.css({
                        left: 'auto',
                        right: 0
                    });
                }
            }
        },

        toggle: function (e) {
            if (this.element.hasClass('active')) {
                this.hide();
            } else {
                this.show();
            }
        },

        show: function (e) {
            if (this.isShowing) return;

            this.element.addClass('active');
            this.container.show();
            this.move();

            // Create a click proxy that is private to this instance of datepicker, for unbinding
            this._outsideClickProxy = $.proxy(function (e) { this.outsideClick(e); }, this);
            // Bind global datepicker mousedown for hiding and
            $(document)
              .on('mousedown.daterangepicker', this._outsideClickProxy)
              // also explicitly play nice with Bootstrap dropdowns, which stopPropagation when clicking them
              .on('click.daterangepicker', '[data-toggle=dropdown]', this._outsideClickProxy)
              // and also close when focus changes to outside the picker (eg. tabbing between controls)
              .on('focusin.daterangepicker', this._outsideClickProxy);

            this.isShowing = true;
            this.element.trigger('show.daterangepicker', this);
        },

        outsideClick: function (e) {
            var target = $(e.target);
            // if the page is clicked anywhere except within the daterangerpicker/button
            // itself then call this.hide()
            if (
                target.closest(this.element).length ||
                target.closest(this.container).length ||
                target.closest('.calendar-date').length
                ) return;
            this.hide();
        },

        hide: function (e) {
            if (!this.isShowing) return;

            $(document)
              .off('mousedown.daterangepicker')
              .off('click.daterangepicker', '[data-toggle=dropdown]')
              .off('focusin.daterangepicker');

            this.element.removeClass('active');
            this.container.hide();

            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.notify();

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();

            this.isShowing = false;
            this.element.trigger('hide.daterangepicker', this);
        },

        enterRange: function (e) {
            // mouse pointer has entered a range label
            var label = e.target.innerHTML;
            if (label == this.locale.customRangeLabel) {
                this.updateView();
            } else {
                var dates = this.ranges[label];
                this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.format));
                this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.format));
            }
        },

        showCalendars: function() {
            this.container.addClass('show-calendar');
            this.move();
            this.element.trigger('showCalendar.daterangepicker', this);
        },

        hideCalendars: function() {
            this.container.removeClass('show-calendar');
            this.element.trigger('hideCalendar.daterangepicker', this);
        },

        // when a date is typed into the start to end date textboxes
        inputsChanged: function (e) {
            var el = $(e.target);
            var date = moment(el.val(), this.format);
            if (!date.isValid()) return;

            var startDate, endDate;
            if (el.attr('name') === 'daterangepicker_start') {
                startDate = date;
                endDate = this.endDate;
            } else {
                startDate = this.startDate;
                endDate = date;
            }
            this.setCustomDates(startDate, endDate);
        },

        inputsKeydown: function(e) {
            if (e.keyCode === 13) {
                this.inputsChanged(e);
                this.notify();
            }
        },

        updateInputText: function() {
            if (this.element.is('input') && !this.singleDatePicker) {
                this.element.val(this.startDate.format(this.format) + this.separator + this.endDate.format(this.format));
            } else if (this.element.is('input')) {
            	this.element.val(this.endDate.format(this.format));
            }
        },

        clickRange: function (e) {
            var label = e.target.innerHTML;
            this.chosenLabel = label;
            if (label == this.locale.customRangeLabel) {
                this.showCalendars();
            } else {
                var dates = this.ranges[label];

                this.startDate = dates[0];
                this.endDate = dates[1];

                if (!this.timePicker) {
                    this.startDate.startOf('day');
                    this.endDate.endOf('day');
                }

                this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());
                this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());
                this.updateCalendars();

                this.updateInputText();

                this.hideCalendars();
                this.hide();
                this.element.trigger('apply.daterangepicker', this);
            }
        },

        clickPrev: function (e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.subtract(1, 'month');
            } else {
                this.rightCalendar.month.subtract(1, 'month');
            }
            this.updateCalendars();
        },

        clickNext: function (e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.add(1, 'month');
            } else {
                this.rightCalendar.month.add(1, 'month');
            }
            this.updateCalendars();
        },

        hoverDate: function (e) {
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');

            if (cal.hasClass('left')) {
                this.container.find('input[name=daterangepicker_start]').val(this.leftCalendar.calendar[row][col].format(this.format));
            } else {
                this.container.find('input[name=daterangepicker_end]').val(this.rightCalendar.calendar[row][col].format(this.format));
            }
        },

        setCustomDates: function(startDate, endDate) {
            this.chosenLabel = this.locale.customRangeLabel;
            if (startDate.isAfter(endDate)) {
                var difference = this.endDate.diff(this.startDate);
                endDate = moment(startDate).add(difference, 'ms');
            }
            this.startDate = startDate;
            this.endDate = endDate;

            this.updateView();
            this.updateCalendars();
        },

        clickDate: function (e) {
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');

            var startDate, endDate;
            if (cal.hasClass('left')) {
                startDate = this.leftCalendar.calendar[row][col];
                endDate = this.endDate;
                if (typeof this.dateLimit === 'object') {
                    var maxDate = moment(startDate).add(this.dateLimit).startOf('day');
                    if (endDate.isAfter(maxDate)) {
                        endDate = maxDate;
                    }
                }
            } else {
                startDate = this.startDate;
                endDate = this.rightCalendar.calendar[row][col];
                if (typeof this.dateLimit === 'object') {
                    var minDate = moment(endDate).subtract(this.dateLimit).startOf('day');
                    if (startDate.isBefore(minDate)) {
                        startDate = minDate;
                    }
                }
            }

            if (this.singleDatePicker && cal.hasClass('left')) {
                endDate = startDate.clone();
            } else if (this.singleDatePicker && cal.hasClass('right')) {
                startDate = endDate.clone();
            }

            cal.find('td').removeClass('active');

            $(e.target).addClass('active');

            this.setCustomDates(startDate, endDate);

            if (!this.timePicker)
                endDate.endOf('day');

            if (this.singleDatePicker && !this.timePicker)
                this.clickApply();
        },

        clickApply: function (e) {
            this.updateInputText();
            this.hide();
            this.element.trigger('apply.daterangepicker', this);
        },

        clickCancel: function (e) {
            this.startDate = this.oldStartDate;
            this.endDate = this.oldEndDate;
            this.chosenLabel = this.oldChosenLabel;
            this.updateView();
            this.updateCalendars();
            this.hide();
            this.element.trigger('cancel.daterangepicker', this);
        },

        updateMonthYear: function (e) {
            var isLeft = $(e.target).closest('.calendar').hasClass('left'),
                leftOrRight = isLeft ? 'left' : 'right',
                cal = this.container.find('.calendar.'+leftOrRight);

            // Month must be Number for new moment versions
            var month = parseInt(cal.find('.monthselect').val(), 10);
            var year = cal.find('.yearselect').val();

            this[leftOrRight+'Calendar'].month.month(month).year(year);
            this.updateCalendars();
        },

        updateTime: function(e) {

            var cal = $(e.target).closest('.calendar'),
                isLeft = cal.hasClass('left');

            var hour = parseInt(cal.find('.hourselect').val(), 10);
            var minute = parseInt(cal.find('.minuteselect').val(), 10);

            if (this.timePicker12Hour) {
                var ampm = cal.find('.ampmselect').val();
                if (ampm === 'PM' && hour < 12)
                    hour += 12;
                if (ampm === 'AM' && hour === 12)
                    hour = 0;
            }

            if (isLeft) {
                var start = this.startDate.clone();
                start.hour(hour);
                start.minute(minute);
                this.startDate = start;
                this.leftCalendar.month.hour(hour).minute(minute);
            } else {
                var end = this.endDate.clone();
                end.hour(hour);
                end.minute(minute);
                this.endDate = end;
                this.rightCalendar.month.hour(hour).minute(minute);
            }

            this.updateCalendars();
        },

        updateCalendars: function () {
            this.leftCalendar.calendar = this.buildCalendar(this.leftCalendar.month.month(), this.leftCalendar.month.year(), this.leftCalendar.month.hour(), this.leftCalendar.month.minute(), 'left');
            this.rightCalendar.calendar = this.buildCalendar(this.rightCalendar.month.month(), this.rightCalendar.month.year(), this.rightCalendar.month.hour(), this.rightCalendar.month.minute(), 'right');
            this.container.find('.calendar.left').empty().html(this.renderCalendar(this.leftCalendar.calendar, this.startDate, this.minDate, this.maxDate));
            this.container.find('.calendar.right').empty().html(this.renderCalendar(this.rightCalendar.calendar, this.endDate, this.singleDatePicker ? this.minDate : this.startDate, this.maxDate));
            
            this.container.find('.ranges li').removeClass('active');
            var customRange = true;
            var i = 0;
            for (var range in this.ranges) {
                if (this.timePicker) {
                    if (this.startDate.isSame(this.ranges[range][0]) && this.endDate.isSame(this.ranges[range][1])) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')')
                            .addClass('active').html();
                    }
                } else {
                    //ignore times when comparing dates if time picker is not enabled
                    if (this.startDate.format('YYYY-MM-DD') == this.ranges[range][0].format('YYYY-MM-DD') && this.endDate.format('YYYY-MM-DD') == this.ranges[range][1].format('YYYY-MM-DD')) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')')
                            .addClass('active').html();
                    }
                }
                i++;
            }
            if (customRange) {
                this.chosenLabel = this.container.find('.ranges li:last').addClass('active').html();
                this.showCalendars();
            }
        },

        buildCalendar: function (month, year, hour, minute, side) {
            var daysInMonth = moment([year, month]).daysInMonth();
            var firstDay = moment([year, month, 1]);
            var lastDay = moment([year, month, daysInMonth]);
            var lastMonth = moment(firstDay).subtract(1, 'month').month();
            var lastYear = moment(firstDay).subtract(1, 'month').year();

            var daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();

            var dayOfWeek = firstDay.day();

            var i;

            //initialize a 6 rows x 7 columns array for the calendar
            var calendar = [];
            calendar.firstDay = firstDay;
            calendar.lastDay = lastDay;

            for (i = 0; i < 6; i++) {
                calendar[i] = [];
            }

            //populate the calendar with date objects
            var startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;
            if (startDay > daysInLastMonth)
                startDay -= 7;

            if (dayOfWeek == this.locale.firstDay)
                startDay = daysInLastMonth - 6;

            var curDate = moment([lastYear, lastMonth, startDay, 12, minute]);
            var col, row;
            for (i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {
                if (i > 0 && col % 7 === 0) {
                    col = 0;
                    row++;
                }
                calendar[row][col] = curDate.clone().hour(hour);
                curDate.hour(12);
            }

            return calendar;
        },

        renderDropdowns: function (selected, minDate, maxDate) {
            var currentMonth = selected.month();
            var monthHtml = '<select class="monthselect">';
            var inMinYear = false;
            var inMaxYear = false;

            for (var m = 0; m < 12; m++) {
                if ((!inMinYear || m >= minDate.month()) && (!inMaxYear || m <= maxDate.month())) {
                    monthHtml += "<option value='" + m + "'" +
                        (m === currentMonth ? " selected='selected'" : "") +
                        ">" + this.locale.monthNames[m] + "</option>";
                }
            }
            monthHtml += "</select>";

            var currentYear = selected.year();
            var maxYear = (maxDate && maxDate.year()) || (currentYear + 5);
            var minYear = (minDate && minDate.year()) || (currentYear - 50);
            var yearHtml = '<select class="yearselect">';

            for (var y = minYear; y <= maxYear; y++) {
                yearHtml += '<option value="' + y + '"' +
                    (y === currentYear ? ' selected="selected"' : '') +
                    '>' + y + '</option>';
            }

            yearHtml += '</select>';

            return monthHtml + yearHtml;
        },

        renderCalendar: function (calendar, selected, minDate, maxDate) {

            var html = '<div class="calendar-date">';
            html += '<table class="table-condensed">';
            html += '<thead>';
            html += '<tr>';

            // add empty cell for week number
            if (this.showWeekNumbers)
                html += '<th></th>';

            if (!minDate || minDate.isBefore(calendar.firstDay)) {
                html += '<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>';
            } else {
                html += '<th></th>';
            }

            var dateHtml = this.locale.monthNames[calendar[1][1].month()] + calendar[1][1].format(" YYYY");

            if (this.showDropdowns) {
                dateHtml = this.renderDropdowns(calendar[1][1], minDate, maxDate);
            }

            html += '<th colspan="5" class="month">' + dateHtml + '</th>';
            if (!maxDate || maxDate.isAfter(calendar.lastDay)) {
                html += '<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>';
            } else {
                html += '<th></th>';
            }

            html += '</tr>';
            html += '<tr>';

            // add week number label
            if (this.showWeekNumbers)
                html += '<th class="week">' + this.locale.weekLabel + '</th>';

            $.each(this.locale.daysOfWeek, function (index, dayOfWeek) {
                html += '<th>' + dayOfWeek + '</th>';
            });

            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';

            for (var row = 0; row < 6; row++) {
                html += '<tr>';

                // add week number
                if (this.showWeekNumbers)
                    html += '<td class="week">' + calendar[row][0].week() + '</td>';

                for (var col = 0; col < 7; col++) {
                    var cname = 'available ';
                    cname += (calendar[row][col].month() == calendar[1][1].month()) ? '' : 'off';

                    if ((minDate && calendar[row][col].isBefore(minDate, 'day')) || (maxDate && calendar[row][col].isAfter(maxDate, 'day'))) {
                        cname = ' off disabled ';
                    } else if (calendar[row][col].format('YYYY-MM-DD') == selected.format('YYYY-MM-DD')) {
                        cname += ' active ';
                        if (calendar[row][col].format('YYYY-MM-DD') == this.startDate.format('YYYY-MM-DD')) {
                            cname += ' start-date ';
                        }
                        if (calendar[row][col].format('YYYY-MM-DD') == this.endDate.format('YYYY-MM-DD')) {
                            cname += ' end-date ';
                        }
                    } else if (calendar[row][col] >= this.startDate && calendar[row][col] <= this.endDate) {
                        cname += ' in-range ';
                        if (calendar[row][col].isSame(this.startDate)) { cname += ' start-date '; }
                        if (calendar[row][col].isSame(this.endDate)) { cname += ' end-date '; }
                    }

                    var title = 'r' + row + 'c' + col;
                    html += '<td class="' + cname.replace(/\s+/g, ' ').replace(/^\s?(.*?)\s?$/, '$1') + '" data-title="' + title + '">' + calendar[row][col].date() + '</td>';
                }
                html += '</tr>';
            }

            html += '</tbody>';
            html += '</table>';
            html += '</div>';

            var i;
            if (this.timePicker) {

                html += '<div class="calendar-time">';
                html += '<select class="hourselect">';
                var start = 0;
                var end = 23;
                var selected_hour = selected.hour();
                if (this.timePicker12Hour) {
                    start = 1;
                    end = 12;
                    if (selected_hour >= 12)
                        selected_hour -= 12;
                    if (selected_hour === 0)
                        selected_hour = 12;
                }

                for (i = start; i <= end; i++) {
                    if (i == selected_hour) {
                        html += '<option value="' + i + '" selected="selected">' + i + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + i + '</option>';
                    }
                }

                html += '</select> : ';

                html += '<select class="minuteselect">';

                for (i = 0; i < 60; i += this.timePickerIncrement) {
                    var num = i;
                    if (num < 10)
                        num = '0' + num;
                    if (i == selected.minute()) {
                        html += '<option value="' + i + '" selected="selected">' + num + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + num + '</option>';
                    }
                }

                html += '</select> ';

                if (this.timePicker12Hour) {
                    html += '<select class="ampmselect">';
                    if (selected.hour() >= 12) {
                        html += '<option value="AM">AM</option><option value="PM" selected="selected">PM</option>';
                    } else {
                        html += '<option value="AM" selected="selected">AM</option><option value="PM">PM</option>';
                    }
                    html += '</select>';
                }

                html += '</div>';

            }

            return html;

        },

        remove: function() {

            this.container.remove();
            this.element.off('.daterangepicker');
            this.element.removeData('daterangepicker');

        }

    };

    $.fn.daterangepicker = function (options, cb) {
        this.each(function () {
            var el = $(this);
            if (el.data('daterangepicker'))
                el.data('daterangepicker').remove();
            el.data('daterangepicker', new DateRangePicker(el, options, cb));
        });
        return this;
    };

}));

/*
 Highcharts JS v4.0.4 (2014-09-02)

 (c) 2009-2014 Torstein Honsi

 License: www.highcharts.com/license
*/
(function(){function r(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function w(){var a,b=arguments,c,d={},e=function(a,b){var c,d;typeof a!=="object"&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],a[d]=c&&typeof c==="object"&&Object.prototype.toString.call(c)!=="[object Array]"&&d!=="renderTo"&&typeof c.nodeType!=="number"?e(a[d]||{},c):b[d]);return a};b[0]===!0&&(d=b[1],b=Array.prototype.slice.call(b,2));c=b.length;for(a=0;a<c;a++)d=e(d,b[a]);return d}function y(a,b){return parseInt(a,b||
10)}function Ga(a){return typeof a==="string"}function da(a){return a&&typeof a==="object"}function Ha(a){return Object.prototype.toString.call(a)==="[object Array]"}function ja(a){return typeof a==="number"}function za(a){return V.log(a)/V.LN10}function ka(a){return V.pow(10,a)}function la(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function s(a){return a!==u&&a!==null}function F(a,b,c){var d,e;if(Ga(b))s(c)?a.setAttribute(b,c):a&&a.getAttribute&&(e=a.getAttribute(b));else if(s(b)&&
da(b))for(d in b)a.setAttribute(d,b[d]);return e}function ra(a){return Ha(a)?a:[a]}function p(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++)if(c=a[b],c!==u&&c!==null)return c}function B(a,b){if(Aa&&!ba&&b&&b.opacity!==u)b.filter="alpha(opacity="+b.opacity*100+")";r(a.style,b)}function $(a,b,c,d,e){a=x.createElement(a);b&&r(a,b);e&&B(a,{padding:0,border:P,margin:0});c&&B(a,c);d&&d.appendChild(a);return a}function ma(a,b){var c=function(){return u};c.prototype=new a;r(c.prototype,b);return c}function Ba(a,
b,c,d){var e=K.numberFormat,f=E.lang,g=+a||0,h=b===-1?(g.toString().split(".")[1]||"").length:isNaN(b=Q(b))?2:b,i=c===void 0?f.decimalPoint:c,f=d===void 0?f.thousandsSep:d,j=g<0?"-":"",k=String(y(g=Q(g).toFixed(h))),l=k.length>3?k.length%3:0;return e!==Ba?e(a,b,c,d):j+(l?k.substr(0,l)+f:"")+k.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+f)+(h?i+Q(g-k).toFixed(h).slice(2):"")}function Ia(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function Na(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);
a.unshift(d);return c.apply(this,a)}}function Ja(a,b){for(var c="{",d=!1,e,f,g,h,i,j=[];(c=a.indexOf(c))!==-1;){e=a.slice(0,c);if(d){f=e.split(":");g=f.shift().split(".");i=g.length;e=b;for(h=0;h<i;h++)e=e[g[h]];if(f.length)f=f.join(":"),g=/\.([0-9])/,h=E.lang,i=void 0,/f$/.test(f)?(i=(i=f.match(g))?i[1]:-1,e!==null&&(e=Ba(e,i,h.decimalPoint,f.indexOf(",")>-1?h.thousandsSep:""))):e=cb(f,e)}j.push(e);a=a.slice(c+1);c=(d=!d)?"}":"{"}j.push(a);return j.join("")}function mb(a){return V.pow(10,U(V.log(a)/
V.LN10))}function nb(a,b,c,d){var e,c=p(c,1);e=a/c;b||(b=[1,2,2.5,5,10],d===!1&&(c===1?b=[1,2,5,10]:c<=0.1&&(b=[1/c])));for(d=0;d<b.length;d++)if(a=b[d],e<=(b[d]+(b[d+1]||b[d]))/2)break;a*=c;return a}function ob(a,b){var c=a.length,d,e;for(e=0;e<c;e++)a[e].ss_i=e;a.sort(function(a,c){d=b(a,c);return d===0?a.ss_i-c.ss_i:d});for(e=0;e<c;e++)delete a[e].ss_i}function Oa(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function Ca(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}
function Pa(a,b){for(var c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function Qa(a){db||(db=$(Ka));a&&db.appendChild(a);db.innerHTML=""}function ea(a){return parseFloat(a.toPrecision(14))}function Ra(a,b){va=p(a,b.animation)}function Bb(){var a=E.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";Da=E.global.Date||window.Date;Sa=(a&&E.global.timezoneOffset||0)*6E4;eb=a?Da.UTC:function(a,b,c,g,h,i){return(new Da(a,b,p(c,1),p(g,0),p(h,0),p(i,0))).getTime()};pb=b+"Minutes";qb=b+
"Hours";rb=b+"Day";Xa=b+"Date";fb=b+"Month";gb=b+"FullYear";Cb=c+"Minutes";Db=c+"Hours";sb=c+"Date";Eb=c+"Month";Fb=c+"FullYear"}function S(){}function Ta(a,b,c,d){this.axis=a;this.pos=b;this.type=c||"";this.isNew=!0;!c&&!d&&this.addLabel()}function na(){this.init.apply(this,arguments)}function Ya(){this.init.apply(this,arguments)}function Gb(a,b,c,d,e){var f=a.chart.inverted;this.axis=a;this.isNegative=c;this.options=b;this.x=d;this.total=null;this.points={};this.stack=e;this.alignOptions={align:b.align||
(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(f?"middle":c?"bottom":"top"),y:p(b.y,f?4:c?14:-6),x:p(b.x,f?c?-6:6:0)};this.textAlign=b.textAlign||(f?c?"right":"left":"center")}var u,x=document,G=window,V=Math,v=V.round,U=V.floor,La=V.ceil,t=V.max,L=V.min,Q=V.abs,aa=V.cos,fa=V.sin,oa=V.PI,Ea=oa*2/360,wa=navigator.userAgent,Hb=G.opera,Aa=/msie/i.test(wa)&&!Hb,hb=x.documentMode===8,tb=/AppleWebKit/.test(wa),Ua=/Firefox/.test(wa),Ib=/(Mobile|Android|Windows Phone)/.test(wa),xa="http://www.w3.org/2000/svg",
ba=!!x.createElementNS&&!!x.createElementNS(xa,"svg").createSVGRect,Ob=Ua&&parseInt(wa.split("Firefox/")[1],10)<4,ga=!ba&&!Aa&&!!x.createElement("canvas").getContext,Za,$a,Jb={},ub=0,db,E,cb,va,vb,A,ha,sa=function(){return u},W=[],ab=0,Ka="div",P="none",Pb=/^[0-9]+$/,Qb="stroke-width",Da,eb,Sa,pb,qb,rb,Xa,fb,gb,Cb,Db,sb,Eb,Fb,H={},K;G.Highcharts?ha(16,!0):K=G.Highcharts={};cb=function(a,b,c){if(!s(b)||isNaN(b))return"Invalid date";var a=p(a,"%Y-%m-%d %H:%M:%S"),d=new Da(b-Sa),e,f=d[qb](),g=d[rb](),
h=d[Xa](),i=d[fb](),j=d[gb](),k=E.lang,l=k.weekdays,d=r({a:l[g].substr(0,3),A:l[g],d:Ia(h),e:h,b:k.shortMonths[i],B:k.months[i],m:Ia(i+1),y:j.toString().substr(2,2),Y:j,H:Ia(f),I:Ia(f%12||12),l:f%12||12,M:Ia(d[pb]()),p:f<12?"AM":"PM",P:f<12?"am":"pm",S:Ia(d.getSeconds()),L:Ia(v(b%1E3),3)},K.dateFormats);for(e in d)for(;a.indexOf("%"+e)!==-1;)a=a.replace("%"+e,typeof d[e]==="function"?d[e](b):d[e]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a};ha=function(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+
a;if(b)throw c;G.console&&console.log(c)};A={millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5,month:26784E5,year:31556952E3};vb={init:function(a,b,c){var b=b||"",d=a.shift,e=b.indexOf("C")>-1,f=e?7:3,g,b=b.split(" "),c=[].concat(c),h,i,j=function(a){for(g=a.length;g--;)a[g]==="M"&&a.splice(g+1,0,a[g+1],a[g+2],a[g+1],a[g+2])};e&&(j(b),j(c));a.isArea&&(h=b.splice(b.length-6,6),i=c.splice(c.length-6,6));if(d<=c.length/f&&b.length===c.length)for(;d--;)c=[].concat(c).splice(0,f).concat(c);
a.shift=0;if(b.length)for(a=c.length;b.length<a;)d=[].concat(b).splice(b.length-f,f),e&&(d[f-6]=d[f-2],d[f-5]=d[f-1]),b=b.concat(d);h&&(b=b.concat(h),c=c.concat(i));return[b,c]},step:function(a,b,c,d){var e=[],f=a.length;if(c===1)e=d;else if(f===b.length&&c<1)for(;f--;)d=parseFloat(a[f]),e[f]=isNaN(d)?a[f]:c*parseFloat(b[f]-d)+d;else e=b;return e}};(function(a){G.HighchartsAdapter=G.HighchartsAdapter||a&&{init:function(b){var c=a.fx;a.extend(a.easing,{easeOutQuad:function(a,b,c,g,h){return-g*(b/=
h)*(b-2)+c}});a.each(["cur","_default","width","height","opacity"],function(b,e){var f=c.step,g;e==="cur"?f=c.prototype:e==="_default"&&a.Tween&&(f=a.Tween.propHooks[e],e="set");(g=f[e])&&(f[e]=function(a){var c,a=b?a:this;if(a.prop!=="align")return c=a.elem,c.attr?c.attr(a.prop,e==="cur"?u:a.now):g.apply(this,arguments)})});Na(a.cssHooks.opacity,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)});this.addAnimSetter("d",function(a){var c=a.elem,f;if(!a.started)f=b.init(c,c.d,c.toD),
a.start=f[0],a.end=f[1],a.started=!0;c.attr("d",b.step(a.start,a.end,a.pos,c.toD))});this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){var c,g=a.length;for(c=0;c<g;c++)if(b.call(a[c],a[c],c,a)===!1)return c};a.fn.highcharts=function(){var a="Chart",b=arguments,c,g;if(this[0]){Ga(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,1));c=b[0];if(c!==u)c.chart=c.chart||{},c.chart.renderTo=this[0],new K[a](c,b[1]),g=this;c===u&&(g=W[F(this[0],"data-highcharts-chart")])}return g}},
addAnimSetter:function(b,c){a.Tween?a.Tween.propHooks[b]={set:c}:a.fx.step[b]=c},getScript:a.getScript,inArray:a.inArray,adapterRun:function(b,c){return a(b)[c]()},grep:a.grep,map:function(a,c){for(var d=[],e=0,f=a.length;e<f;e++)d[e]=c.call(a[e],a[e],e,a);return d},offset:function(b){return a(b).offset()},addEvent:function(b,c,d){a(b).bind(c,d)},removeEvent:function(b,c,d){var e=x.removeEventListener?"removeEventListener":"detachEvent";x[e]&&b&&!b[e]&&(b[e]=function(){});a(b).unbind(c,d)},fireEvent:function(b,
c,d,e){var f=a.Event(c),g="detached"+c,h;!Aa&&d&&(delete d.layerX,delete d.layerY,delete d.returnValue);r(f,d);b[c]&&(b[g]=b[c],b[c]=null);a.each(["preventDefault","stopPropagation"],function(a,b){var c=f[b];f[b]=function(){try{c.call(f)}catch(a){b==="preventDefault"&&(h=!0)}}});a(b).trigger(f);b[g]&&(b[c]=b[g],b[g]=null);e&&!f.isDefaultPrevented()&&!h&&e(f)},washMouseEvent:function(a){var c=a.originalEvent||a;if(c.pageX===u)c.pageX=a.pageX,c.pageY=a.pageY;return c},animate:function(b,c,d){var e=
a(b);if(!b.style)b.style={};if(c.d)b.toD=c.d,c.d=1;e.stop();c.opacity!==u&&b.attr&&(c.opacity+="px");b.hasAnim=1;e.animate(c,d)},stop:function(b){b.hasAnim&&a(b).stop()}}})(G.jQuery);var T=G.HighchartsAdapter,M=T||{};T&&T.init.call(T,vb);var ib=M.adapterRun,Rb=M.getScript,Ma=M.inArray,q=M.each,wb=M.grep,Sb=M.offset,Va=M.map,N=M.addEvent,X=M.removeEvent,I=M.fireEvent,Tb=M.washMouseEvent,jb=M.animate,bb=M.stop,M={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};E={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),
symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,
canvasToolsURL:"http://code.highcharts.com/4.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",
align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1E3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:w(M,{align:"center",enabled:!1,formatter:function(){return this.y===null?"":Ba(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,
marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1E3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",
width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:ba,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",
day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ib?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",
color:"#909090",fontSize:"9px"}}};var ca=E.plotOptions,T=ca.line;Bb();var Ub=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Vb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Wb=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,ya=function(a){var b=[],c,d;(function(a){a&&a.stops?d=Va(a.stops,function(a){return ya(a[1])}):(c=Ub.exec(a))?b=[y(c[1]),y(c[2]),y(c[3]),parseFloat(c[4],10)]:(c=Vb.exec(a))?b=[y(c[1],16),y(c[2],16),y(c[3],
16),1]:(c=Wb.exec(a))&&(b=[y(c[1]),y(c[2]),y(c[3]),1])})(a);return{get:function(c){var f;d?(f=w(a),f.stops=[].concat(f.stops),q(d,function(a,b){f.stops[b]=[f.stops[b][0],a.get(c)]})):f=b&&!isNaN(b[0])?c==="rgb"?"rgb("+b[0]+","+b[1]+","+b[2]+")":c==="a"?b[3]:"rgba("+b.join(",")+")":a;return f},brighten:function(a){if(d)q(d,function(b){b.brighten(a)});else if(ja(a)&&a!==0){var c;for(c=0;c<3;c++)b[c]+=y(a*255),b[c]<0&&(b[c]=0),b[c]>255&&(b[c]=255)}return this},rgba:b,setOpacity:function(a){b[3]=a;return this}}};
S.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(a,b){this.element=b==="span"?$(b):x.createElementNS(xa,b);this.renderer=a},animate:function(a,b,c){b=p(b,va,!0);bb(this);if(b){b=w(b,{});if(c)b.complete=c;jb(this,a,b)}else this.attr(a),c&&c();return this},colorGradient:function(a,b,c){var d=this.renderer,e,f,g,h,i,j,k,l,n,m,o=[];a.linearGradient?f="linearGradient":a.radialGradient&&(f="radialGradient");
if(f){g=a[f];h=d.gradients;j=a.stops;n=c.radialReference;Ha(g)&&(a[f]=g={x1:g[0],y1:g[1],x2:g[2],y2:g[3],gradientUnits:"userSpaceOnUse"});f==="radialGradient"&&n&&!s(g.gradientUnits)&&(g=w(g,{cx:n[0]-n[2]/2+g.cx*n[2],cy:n[1]-n[2]/2+g.cy*n[2],r:g.r*n[2],gradientUnits:"userSpaceOnUse"}));for(m in g)m!=="id"&&o.push(m,g[m]);for(m in j)o.push(j[m]);o=o.join(",");h[o]?a=h[o].attr("id"):(g.id=a="highcharts-"+ub++,h[o]=i=d.createElement(f).attr(g).add(d.defs),i.stops=[],q(j,function(a){a[1].indexOf("rgba")===
0?(e=ya(a[1]),k=e.get("rgb"),l=e.get("a")):(k=a[1],l=1);a=d.createElement("stop").attr({offset:a[0],"stop-color":k,"stop-opacity":l}).add(i);i.stops.push(a)}));c.setAttribute(b,"url("+d.url+"#"+a+")")}},attr:function(a,b){var c,d,e=this.element,f,g=this,h;typeof a==="string"&&b!==u&&(c=a,a={},a[c]=b);if(typeof a==="string")g=(this[a+"Getter"]||this._defaultGetter).call(this,a,e);else{for(c in a){d=a[c];h=!1;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(f||(this.symbolAttr(a),
f=!0),h=!0);if(this.rotation&&(c==="x"||c==="y"))this.doTransform=!0;h||(this[c+"Setter"]||this._defaultSetter).call(this,d,c,e);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c)&&this.updateShadows(c,d)}if(this.doTransform)this.updateTransform(),this.doTransform=!1}return g},updateShadows:function(a,b){for(var c=this.shadows,d=c.length;d--;)c[d].setAttribute(a,a==="height"?t(b-(c[d].cutHeight||0),0):a==="d"?this.d:b)},addClass:function(a){var b=this.element,c=F(b,"class")||
"";c.indexOf(a)===-1&&F(b,"class",c+" "+a);return this},symbolAttr:function(a){var b=this;q("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(c){b[c]=p(a[c],b[c])});b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":P)},crisp:function(a){var b,c={},d,e=a.strokeWidth||this.strokeWidth||0;d=v(e)%2/2;a.x=U(a.x||this.x||0)+d;a.y=U(a.y||this.y||0)+d;a.width=U((a.width||this.width||
0)-2*d);a.height=U((a.height||this.height||0)-2*d);a.strokeWidth=e;for(b in a)this[b]!==a[b]&&(this[b]=c[b]=a[b]);return c},css:function(a){var b=this.styles,c={},d=this.element,e,f,g="";e=!b;if(a&&a.color)a.fill=a.color;if(b)for(f in a)a[f]!==b[f]&&(c[f]=a[f],e=!0);if(e){e=this.textWidth=a&&a.width&&d.nodeName.toLowerCase()==="text"&&y(a.width);b&&(a=r(b,c));this.styles=a;e&&(ga||!ba&&this.renderer.forExport)&&delete a.width;if(Aa&&!ba)B(this.element,a);else{b=function(a,b){return"-"+b.toLowerCase()};
for(f in a)g+=f.replace(/([A-Z])/g,b)+":"+a[f]+";";F(d,"style",g)}e&&this.added&&this.renderer.buildText(this)}return this},on:function(a,b){var c=this,d=c.element;$a&&a==="click"?(d.ontouchstart=function(a){c.touchEventFired=Da.now();a.preventDefault();b.call(d,a)},d.onclick=function(a){(wa.indexOf("Android")===-1||Da.now()-(c.touchEventFired||0)>1100)&&b.call(d,a)}):d["on"+a]=b;return this},setRadialReference:function(a){this.element.radialReference=a;return this},translate:function(a,b){return this.attr({translateX:a,
translateY:b})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0,c=this.scaleX,d=this.scaleY,e=this.inverted,f=this.rotation,g=this.element;e&&(a+=this.attr("width"),b+=this.attr("height"));a=["translate("+a+","+b+")"];e?a.push("rotate(90) scale(-1,1)"):f&&a.push("rotate("+f+" "+(g.getAttribute("x")||0)+" "+(g.getAttribute("y")||0)+")");(s(c)||s(d))&&a.push("scale("+p(c,1)+" "+p(d,1)+")");a.length&&g.setAttribute("transform",
a.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},align:function(a,b,c){var d,e,f,g,h={};e=this.renderer;f=e.alignedObjects;if(a){if(this.alignOptions=a,this.alignByTranslate=b,!c||Ga(c))this.alignTo=d=c||"renderer",la(f,this),f.push(this),c=null}else a=this.alignOptions,b=this.alignByTranslate,d=this.alignTo;c=p(c,e[d],e);d=a.align;e=a.verticalAlign;f=(c.x||0)+(a.x||0);g=(c.y||0)+(a.y||0);if(d==="right"||d==="center")f+=(c.width-(a.width||0))/{right:1,center:2}[d];
h[b?"translateX":"x"]=v(f);if(e==="bottom"||e==="middle")g+=(c.height-(a.height||0))/({bottom:1,middle:2}[e]||1);h[b?"translateY":"y"]=v(g);this[this.placed?"animate":"attr"](h);this.placed=!0;this.alignAttr=h;return this},getBBox:function(){var a=this.bBox,b=this.renderer,c,d,e=this.rotation;c=this.element;var f=this.styles,g=e*Ea;d=this.textStr;var h;if(d===""||Pb.test(d))h="num."+d.toString().length+(f?"|"+f.fontSize+"|"+f.fontFamily:"");h&&(a=b.cache[h]);if(!a){if(c.namespaceURI===xa||b.forExport){try{a=
c.getBBox?r({},c.getBBox()):{width:c.offsetWidth,height:c.offsetHeight}}catch(i){}if(!a||a.width<0)a={width:0,height:0}}else a=this.htmlGetBBox();if(b.isSVG){c=a.width;d=a.height;if(Aa&&f&&f.fontSize==="11px"&&d.toPrecision(3)==="16.9")a.height=d=14;if(e)a.width=Q(d*fa(g))+Q(c*aa(g)),a.height=Q(d*aa(g))+Q(c*fa(g))}this.bBox=a;h&&(b.cache[h]=a)}return a},show:function(a){a&&this.element.namespaceURI===xa?this.element.removeAttribute("visibility"):this.attr({visibility:a?"inherit":"visible"});return this},
hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.attr({y:-9999})}})},add:function(a){var b=this.renderer,c=a||b,d=c.element||b.box,e=this.element,f=this.zIndex,g,h;if(a)this.parentGroup=a;this.parentInverted=a&&a.inverted;this.textStr!==void 0&&b.buildText(this);if(f)c.handleZ=!0,f=y(f);if(c.handleZ){a=d.childNodes;for(g=0;g<a.length;g++)if(b=a[g],c=F(b,"zIndex"),b!==e&&(y(c)>f||!s(f)&&s(c))){d.insertBefore(e,
b);h=!0;break}}h||d.appendChild(e);this.added=!0;if(this.onAdd)this.onAdd();return this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=a.renderer.isSVG&&b.nodeName==="SPAN"&&a.parentGroup,e,f;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=b.point=null;bb(a);if(a.clipPath)a.clipPath=a.clipPath.destroy();if(a.stops){for(f=0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}a.safeRemoveChild(b);for(c&&
q(c,function(b){a.safeRemoveChild(b)});d&&d.div&&d.div.childNodes.length===0;)b=d.parentGroup,a.safeRemoveChild(d.div),delete d.div,d=b;a.alignTo&&la(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},shadow:function(a,b,c){var d=[],e,f,g=this.element,h,i,j,k;if(a){i=p(a.width,3);j=(a.opacity||0.15)/i;k=this.parentInverted?"(-1,-1)":"("+p(a.offsetX,1)+", "+p(a.offsetY,1)+")";for(e=1;e<=i;e++){f=g.cloneNode(0);h=i*2+1-2*e;F(f,{isShadow:"true",stroke:a.color||"black","stroke-opacity":j*
e,"stroke-width":h,transform:"translate"+k,fill:P});if(c)F(f,"height",t(F(f,"height")-h,0)),f.cutHeight=h;b?b.element.appendChild(f):g.parentNode.insertBefore(f,g);d.push(f)}this.shadows=d}return this},xGetter:function(a){this.element.nodeName==="circle"&&(a={x:"cx",y:"cy"}[a]||a);return this._defaultGetter(a)},_defaultGetter:function(a){a=p(this[a],this.element?this.element.getAttribute(a):null,0);/^[\-0-9\.]+$/.test(a)&&(a=parseFloat(a));return a},dSetter:function(a,b,c){a&&a.join&&(a=a.join(" "));
/(NaN| {2}|^$)/.test(a)&&(a="M 0 0");c.setAttribute(b,a);this[b]=a},dashstyleSetter:function(a){var b;if(a=a&&a.toLowerCase()){a=a.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(b=a.length;b--;)a[b]=y(a[b])*this["stroke-width"];a=a.join(",").replace("NaN","none");this.element.setAttribute("stroke-dasharray",a)}},
alignSetter:function(a){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[a])},opacitySetter:function(a,b,c){this[b]=a;c.setAttribute(b,a)},titleSetter:function(a){var b=this.element.getElementsByTagName("title")[0];b||(b=x.createElementNS(xa,"title"),this.element.appendChild(b));b.textContent=p(a,"").replace(/<[^>]*>/g,"")},textSetter:function(a){if(a!==this.textStr)delete this.bBox,this.textStr=a,this.added&&this.renderer.buildText(this)},fillSetter:function(a,b,
c){typeof a==="string"?c.setAttribute(b,a):a&&this.colorGradient(a,b,c)},zIndexSetter:function(a,b,c){c.setAttribute(b,a);this[b]=a},_defaultSetter:function(a,b,c){c.setAttribute(b,a)}};S.prototype.yGetter=S.prototype.xGetter;S.prototype.translateXSetter=S.prototype.translateYSetter=S.prototype.rotationSetter=S.prototype.verticalAlignSetter=S.prototype.scaleXSetter=S.prototype.scaleYSetter=function(a,b){this[b]=a;this.doTransform=!0};S.prototype["stroke-widthSetter"]=S.prototype.strokeSetter=function(a,
b,c){this[b]=a;if(this.stroke&&this["stroke-width"])this.strokeWidth=this["stroke-width"],S.prototype.fillSetter.call(this,this.stroke,"stroke",c),c.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0;else if(b==="stroke-width"&&a===0&&this.hasStroke)c.removeAttribute("stroke"),this.hasStroke=!1};var ta=function(){this.init.apply(this,arguments)};ta.prototype={Element:S,init:function(a,b,c,d,e){var f=location,g,d=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(d));
g=d.element;a.appendChild(g);a.innerHTML.indexOf("xmlns")===-1&&F(g,"xmlns",xa);this.isSVG=!0;this.box=g;this.boxWrapper=d;this.alignedObjects=[];this.url=(Ua||tb)&&x.getElementsByTagName("base").length?f.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 4.0.4"));this.defs=this.createElement("defs").add();this.forExport=e;this.gradients={};this.cache={};this.setSize(b,c,!1);var h;
if(Ua&&a.getBoundingClientRect)this.subPixelFix=b=function(){B(a,{left:0,top:0});h=a.getBoundingClientRect();B(a,{left:La(h.left)-h.left+"px",top:La(h.top)-h.top+"px"})},b(),N(G,"resize",b)},getStyle:function(a){return this.style=r({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},a)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();Pa(this.gradients||
{});this.gradients=null;if(a)this.defs=a.destroy();this.subPixelFix&&X(G,"resize",this.subPixelFix);return this.alignedObjects=null},createElement:function(a){var b=new this.Element;b.init(this,a);return b},draw:function(){},buildText:function(a){for(var b=a.element,c=this,d=c.forExport,e=p(a.textStr,"").toString(),f=e.indexOf("<")!==-1,g=b.childNodes,h,i,j=F(b,"x"),k=a.styles,l=a.textWidth,n=k&&k.lineHeight,m=k&&k.HcTextStroke,o=g.length,Y=function(a){return n?y(n):c.fontMetrics(/(px|em)$/.test(a&&
a.style.fontSize)?a.style.fontSize:k&&k.fontSize||c.style.fontSize||12,a).h};o--;)b.removeChild(g[o]);!f&&!m&&e.indexOf(" ")===-1?b.appendChild(x.createTextNode(e)):(h=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,l&&!a.added&&this.box.appendChild(b),e=f?e.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[e],e[e.length-1]===""&&e.pop(),q(e,function(e,
f){var g,n=0,e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");g=e.split("|||");q(g,function(e){if(e!==""||g.length===1){var m={},o=x.createElementNS(xa,"tspan"),p;h.test(e)&&(p=e.match(h)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),F(o,"style",p));i.test(e)&&!d&&(F(o,"onclick",'location.href="'+e.match(i)[1]+'"'),B(o,{cursor:"pointer"}));e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(e!==" "){o.appendChild(x.createTextNode(e));if(n)m.dx=0;else if(f&&
j!==null)m.x=j;F(o,m);b.appendChild(o);!n&&f&&(!ba&&d&&B(o,{display:"block"}),F(o,"dy",Y(o)));if(l)for(var e=e.replace(/([^\^])-/g,"$1- ").split(" "),m=g.length>1||e.length>1&&k.whiteSpace!=="nowrap",q,D,s=k.HcHeight,t=[],u=Y(o),Lb=1;m&&(e.length||t.length);)delete a.bBox,q=a.getBBox(),D=q.width,!ba&&c.forExport&&(D=c.measureSpanWidth(o.firstChild.data,a.styles)),q=D>l,!q||e.length===1?(e=t,t=[],e.length&&(Lb++,s&&Lb*u>s?(e=["..."],a.attr("title",a.textStr)):(o=x.createElementNS(xa,"tspan"),F(o,{dy:u,
x:j}),p&&F(o,"style",p),b.appendChild(o))),D>l&&(l=D)):(o.removeChild(o.firstChild),t.unshift(e.pop())),e.length&&o.appendChild(x.createTextNode(e.join(" ").replace(/- /g,"-")));n++}}})}))},button:function(a,b,c,d,e,f,g,h,i){var j=this.label(a,b,c,i,null,null,null,null,"button"),k=0,l,n,m,o,p,q,a={x1:0,y1:0,x2:0,y2:1},e=w({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:a,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},e);m=e.style;delete e.style;f=w(e,{stroke:"#68A",
fill:{linearGradient:a,stops:[[0,"#FFF"],[1,"#ACF"]]}},f);o=f.style;delete f.style;g=w(e,{stroke:"#68A",fill:{linearGradient:a,stops:[[0,"#9BD"],[1,"#CDF"]]}},g);p=g.style;delete g.style;h=w(e,{style:{color:"#CCC"}},h);q=h.style;delete h.style;N(j.element,Aa?"mouseover":"mouseenter",function(){k!==3&&j.attr(f).css(o)});N(j.element,Aa?"mouseout":"mouseleave",function(){k!==3&&(l=[e,f,g][k],n=[m,o,p][k],j.attr(l).css(n))});j.setState=function(a){(j.state=k=a)?a===2?j.attr(g).css(p):a===3&&j.attr(h).css(q):
j.attr(e).css(m)};return j.on("click",function(){k!==3&&d.call(j)}).attr(e).css(r({cursor:"default"},m))},crispLine:function(a,b){a[1]===a[4]&&(a[1]=a[4]=v(a[1])-b%2/2);a[2]===a[5]&&(a[2]=a[5]=v(a[2])+b%2/2);return a},path:function(a){var b={fill:P};Ha(a)?b.d=a:da(a)&&r(b,a);return this.createElement("path").attr(b)},circle:function(a,b,c){a=da(a)?a:{x:a,y:b,r:c};b=this.createElement("circle");b.xSetter=function(a){this.element.setAttribute("cx",a)};b.ySetter=function(a){this.element.setAttribute("cy",
a)};return b.attr(a)},arc:function(a,b,c,d,e,f){if(da(a))b=a.y,c=a.r,d=a.innerR,e=a.start,f=a.end,a=a.x;a=this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:e||0,end:f||0});a.r=c;return a},rect:function(a,b,c,d,e,f){var e=da(a)?a.r:e,g=this.createElement("rect"),a=da(a)?a:a===u?{}:{x:a,y:b,width:t(c,0),height:t(d,0)};if(f!==u)a.strokeWidth=f,a=g.crisp(a);if(e)a.r=e;g.rSetter=function(a){F(this.element,{rx:a,ry:a})};return g.attr(a)},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;
this.width=a;this.height=b;for(this.boxWrapper[p(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=this.createElement("g");return s(a)?b.attr({"class":"highcharts-"+a}):b},image:function(a,b,c,d,e){var f={preserveAspectRatio:P};arguments.length>1&&r(f,{x:b,y:c,width:d,height:e});f=this.createElement("image").attr(f);f.element.setAttributeNS?f.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):f.element.setAttribute("hc-svg-href",a);return f},symbol:function(a,
b,c,d,e,f){var g,h=this.symbols[a],h=h&&h(v(b),v(c),d,e,f),i=/^url\((.*?)\)$/,j,k;if(h)g=this.path(h),r(g,{symbolName:a,x:b,y:c,width:d,height:e}),f&&r(g,f);else if(i.test(a))k=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(v((d-b[0])/2),v((e-b[1])/2)))},j=a.match(i)[1],a=Jb[j]||f&&f.width&&f.height&&[f.width,f.height],g=this.image(j).attr({x:b,y:c}),g.isImg=!0,a?k(g,a):(g.attr({width:0,height:0}),$("img",{onload:function(){k(g,Jb[j]=[this.width,this.height])},
src:j}));return g},symbols:{circle:function(a,b,c,d){var e=0.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,c=e.r||c||d,g=e.end-
0.001,d=e.innerR,h=e.open,i=aa(f),j=fa(f),k=aa(g),g=fa(g),e=e.end-f<oa?0:1;return["M",a+c*i,b+c*j,"A",c,c,0,e,1,a+c*k,b+c*g,h?"M":"L",a+d*k,b+d*g,"A",d,d,0,e,0,a+d*i,b+d*j,h?"":"Z"]},callout:function(a,b,c,d,e){var f=L(e&&e.r||0,c,d),g=f+6,h=e&&e.anchorX,i=e&&e.anchorY,e=v(e.strokeWidth||0)%2/2;a+=e;b+=e;e=["M",a+f,b,"L",a+c-f,b,"C",a+c,b,a+c,b,a+c,b+f,"L",a+c,b+d-f,"C",a+c,b+d,a+c,b+d,a+c-f,b+d,"L",a+f,b+d,"C",a,b+d,a,b+d,a,b+d-f,"L",a,b+f,"C",a,b,a,b,a+f,b];h&&h>c&&i>b+g&&i<b+d-g?e.splice(13,3,
"L",a+c,i-6,a+c+6,i,a+c,i+6,a+c,b+d-f):h&&h<0&&i>b+g&&i<b+d-g?e.splice(33,3,"L",a,i+6,a-6,i,a,i-6,a,b+f):i&&i>d&&h>a+g&&h<a+c-g?e.splice(23,3,"L",h+6,b+d,h,b+d+6,h-6,b+d,a+f,b+d):i&&i<0&&h>a+g&&h<a+c-g&&e.splice(3,3,"L",h-6,b,h,b-6,h+6,b,c-f,b);return e}},clipRect:function(a,b,c,d){var e="highcharts-"+ub++,f=this.createElement("clipPath").attr({id:e}).add(this.defs),a=this.rect(a,b,c,d,0).add(f);a.id=e;a.clipPath=f;return a},text:function(a,b,c,d){var e=ga||!ba&&this.forExport,f={};if(d&&!this.forExport)return this.html(a,
b,c);f.x=Math.round(b||0);if(c)f.y=Math.round(c);if(a||a===0)f.text=a;a=this.createElement("text").attr(f);e&&a.css({position:"absolute"});if(!d)a.xSetter=function(a,b,c){var d=c.getElementsByTagName("tspan"),e,f=c.getAttribute(b),n;for(n=0;n<d.length;n++)e=d[n],e.getAttribute(b)===f&&e.setAttribute(b,a);c.setAttribute(b,a)};return a},fontMetrics:function(a,b){a=a||this.style.fontSize;if(b&&G.getComputedStyle)b=b.element||b,a=G.getComputedStyle(b,"").fontSize;var a=/px/.test(a)?y(a):/em/.test(a)?
parseFloat(a)*12:12,c=a<24?a+4:v(a*1.2),d=v(c*0.8);return{h:c,b:d,f:a}},label:function(a,b,c,d,e,f,g,h,i){function j(){var a,b;a=o.element.style;D=(t===void 0||xb===void 0||m.styles.textAlign)&&o.textStr&&o.getBBox();m.width=(t||D.width||0)+2*C+kb;m.height=(xb||D.height||0)+2*C;R=C+n.fontMetrics(a&&a.fontSize,o).b;if(y){if(!p)a=v(-J*C),b=h?-R:0,m.box=p=d?n.symbol(d,a,b,m.width,m.height,z):n.rect(a,b,m.width,m.height,0,z[Qb]),p.attr("fill",P).add(m);p.isImg||p.attr(r({width:v(m.width),height:v(m.height)},
z));z=null}}function k(){var a=m.styles,a=a&&a.textAlign,b=kb+C*(1-J),c;c=h?0:R;if(s(t)&&D&&(a==="center"||a==="right"))b+={center:0.5,right:1}[a]*(t-D.width);if(b!==o.x||c!==o.y)o.attr("x",b),c!==u&&o.attr("y",c);o.x=b;o.y=c}function l(a,b){p?p.attr(a,b):z[a]=b}var n=this,m=n.g(i),o=n.text("",0,0,g).attr({zIndex:1}),p,D,J=0,C=3,kb=0,t,xb,yb,x,Kb=0,z={},R,y;m.onAdd=function(){o.add(m);m.attr({text:a||a===0?a:"",x:b,y:c});p&&s(e)&&m.attr({anchorX:e,anchorY:f})};m.widthSetter=function(a){t=a};m.heightSetter=
function(a){xb=a};m.paddingSetter=function(a){s(a)&&a!==C&&(C=a,k())};m.paddingLeftSetter=function(a){s(a)&&a!==kb&&(kb=a,k())};m.alignSetter=function(a){J={left:0,center:0.5,right:1}[a]};m.textSetter=function(a){a!==u&&o.textSetter(a);j();k()};m["stroke-widthSetter"]=function(a,b){a&&(y=!0);Kb=a%2/2;l(b,a)};m.strokeSetter=m.fillSetter=m.rSetter=function(a,b){b==="fill"&&a&&(y=!0);l(b,a)};m.anchorXSetter=function(a,b){e=a;l(b,a+Kb-yb)};m.anchorYSetter=function(a,b){f=a;l(b,a-x)};m.xSetter=function(a){m.x=
a;J&&(a-=J*((t||D.width)+C));yb=v(a);m.attr("translateX",yb)};m.ySetter=function(a){x=m.y=v(a);m.attr("translateY",x)};var A=m.css;return r(m,{css:function(a){if(a){var b={},a=w(a);q(m.textProps,function(c){a[c]!==u&&(b[c]=a[c],delete a[c])});o.css(b)}return A.call(m,a)},getBBox:function(){return{width:D.width+2*C,height:D.height+2*C,x:D.x-C,y:D.y-C}},shadow:function(a){p&&p.shadow(a);return m},destroy:function(){X(m.element,"mouseenter");X(m.element,"mouseleave");o&&(o=o.destroy());p&&(p=p.destroy());
S.prototype.destroy.call(m);m=n=j=k=l=null}})}};Za=ta;r(S.prototype,{htmlCss:function(a){var b=this.element;if(b=a&&b.tagName==="SPAN"&&a.width)delete a.width,this.textWidth=b,this.updateTransform();this.styles=r(this.styles,a);B(this.element,a);return this},htmlGetBBox:function(){var a=this.element,b=this.bBox;if(!b){if(a.nodeName==="text")a.style.position="absolute";b=this.bBox={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}}return b},htmlUpdateTransform:function(){if(this.added){var a=
this.renderer,b=this.element,c=this.translateX||0,d=this.translateY||0,e=this.x||0,f=this.y||0,g=this.textAlign||"left",h={left:0,center:0.5,right:1}[g],i=this.shadows;B(b,{marginLeft:c,marginTop:d});i&&q(i,function(a){B(a,{marginLeft:c+1,marginTop:d+1})});this.inverted&&q(b.childNodes,function(c){a.invertChild(c,b)});if(b.tagName==="SPAN"){var j=this.rotation,k,l=y(this.textWidth),n=[j,g,b.innerHTML,this.textWidth].join(",");if(n!==this.cTT){k=a.fontMetrics(b.style.fontSize).b;s(j)&&this.setSpanRotation(j,
h,k);i=p(this.elemWidth,b.offsetWidth);if(i>l&&/[ \-]/.test(b.textContent||b.innerText))B(b,{width:l+"px",display:"block",whiteSpace:"normal"}),i=l;this.getSpanCorrection(i,k,h,j,g)}B(b,{left:e+(this.xCorr||0)+"px",top:f+(this.yCorr||0)+"px"});if(tb)k=b.offsetHeight;this.cTT=n}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,c){var d={},e=Aa?"-ms-transform":tb?"-webkit-transform":Ua?"MozTransform":Hb?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)";d[e+(Ua?"Origin":"-origin")]=d.transformOrigin=
b*100+"% "+c+"px";B(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c;this.yCorr=-b}});r(ta.prototype,{html:function(a,b,c){var d=this.createElement("span"),e=d.element,f=d.renderer;d.textSetter=function(a){a!==e.innerHTML&&delete this.bBox;e.innerHTML=this.textStr=a};d.xSetter=d.ySetter=d.alignSetter=d.rotationSetter=function(a,b){b==="align"&&(b="textAlign");d[b]=a;d.htmlUpdateTransform()};d.attr({text:a,x:v(b),y:v(c)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,
fontSize:this.style.fontSize});d.css=d.htmlCss;if(f.isSVG)d.add=function(a){var b,c=f.box.parentNode,j=[];if(this.parentGroup=a){if(b=a.div,!b){for(;a;)j.push(a),a=a.parentGroup;q(j.reverse(),function(a){var d;b=a.div=a.div||$(Ka,{className:F(a.element,"class")},{position:"absolute",left:(a.translateX||0)+"px",top:(a.translateY||0)+"px"},b||c);d=b.style;r(a,{translateXSetter:function(b,c){d.left=b+"px";a[c]=b;a.doTransform=!0},translateYSetter:function(b,c){d.top=b+"px";a[c]=b;a.doTransform=!0},visibilitySetter:function(a,
b){d[b]=a}})})}}else b=c;b.appendChild(e);d.added=!0;d.alignOnAdd&&d.htmlUpdateTransform();return d};return d}});var Z;if(!ba&&!ga){Z={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===Ka;(b==="shape"||e)&&d.push("left:0;top:0;width:1px;height:1px;");d.push("visibility: ",e?"hidden":"visible");c.push(' style="',d.join(""),'"/>');if(b)c=e||b==="span"||b==="img"?c.join(""):a.prepVML(c),this.element=$(c);this.renderer=a},add:function(a){var b=this.renderer,
c=this.element,d=b.box,d=a?a.element||a:d;a&&a.inverted&&b.invertChild(c,d);d.appendChild(c);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();if(this.onAdd)this.onAdd();return this},updateTransform:S.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=aa(a*Ea),c=fa(a*Ea);B(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):P})},getSpanCorrection:function(a,
b,c,d,e){var f=d?aa(d*Ea):1,g=d?fa(d*Ea):0,h=p(this.elemHeight,this.element.offsetHeight),i;this.xCorr=f<0&&-a;this.yCorr=g<0&&-h;i=f*g<0;this.xCorr+=g*b*(i?1-c:c);this.yCorr-=f*b*(d?i?c:1-c:1);e&&e!=="left"&&(this.xCorr-=a*c*(f<0?-1:1),d&&(this.yCorr-=h*c*(g<0?-1:1)),B(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=a.length,c=[];b--;)if(ja(a[b]))c[b]=v(a[b]*10)-5;else if(a[b]==="Z")c[b]="x";else if(c[b]=a[b],a.isArc&&(a[b]==="wa"||a[b]==="at"))c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+
5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1);return c.join(" ")||"x"},clip:function(a){var b=this,c;a?(c=a.members,la(c,b),c.push(b),b.destroyClip=function(){la(c,b)},a=a.getCSS(b)):(b.destroyClip&&b.destroyClip(),a={clip:hb?"inherit":"rect(auto)"});return b.css(a)},css:S.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&Qa(a)},destroy:function(){this.destroyClip&&this.destroyClip();return S.prototype.destroy.apply(this)},on:function(a,b){this.element["on"+a]=function(){var a=
G.event;a.target=a.srcElement;b(a)};return this},cutOffPath:function(a,b){var c,a=a.split(/[ ,]/);c=a.length;if(c===9||c===11)a[c-4]=a[c-2]=y(a[c-2])-10*b;return a.join(" ")},shadow:function(a,b,c){var d=[],e,f=this.element,g=this.renderer,h,i=f.style,j,k=f.path,l,n,m,o;k&&typeof k.value!=="string"&&(k="x");n=k;if(a){m=p(a.width,3);o=(a.opacity||0.15)/m;for(e=1;e<=3;e++){l=m*2+1-2*e;c&&(n=this.cutOffPath(k.value,l+0.5));j=['<shape isShadow="true" strokeweight="',l,'" filled="false" path="',n,'" coordsize="10 10" style="',
f.style.cssText,'" />'];h=$(g.prepVML(j),null,{left:y(i.left)+p(a.offsetX,1),top:y(i.top)+p(a.offsetY,1)});if(c)h.cutOff=l+1;j=['<stroke color="',a.color||"black",'" opacity="',o*e,'"/>'];$(g.prepVML(j),null,null,h);b?b.element.appendChild(h):f.parentNode.insertBefore(h,f);d.push(h)}this.shadows=d}return this},updateShadows:sa,setAttr:function(a,b){hb?this.element[a]=b:this.element.setAttribute(a,b)},classSetter:function(a){this.element.className=a},dashstyleSetter:function(a,b,c){(c.getElementsByTagName("stroke")[0]||
$(this.renderer.prepVML(["<stroke/>"]),null,null,c))[b]=a||"solid";this[b]=a},dSetter:function(a,b,c){var d=this.shadows,a=a||[];this.d=a.join&&a.join(" ");c.path=a=this.pathToVML(a);if(d)for(c=d.length;c--;)d[c].path=d[c].cutOff?this.cutOffPath(a,d[c].cutOff):a;this.setAttr(b,a)},fillSetter:function(a,b,c){var d=c.nodeName;if(d==="SPAN")c.style.color=a;else if(d!=="IMG")c.filled=a!==P,this.setAttr("fillcolor",this.renderer.color(a,c,b,this))},opacitySetter:sa,rotationSetter:function(a,b,c){c=c.style;
this[b]=c[b]=a;c.left=-v(fa(a*Ea)+1)+"px";c.top=v(aa(a*Ea))+"px"},strokeSetter:function(a,b,c){this.setAttr("strokecolor",this.renderer.color(a,c,b))},"stroke-widthSetter":function(a,b,c){c.stroked=!!a;this[b]=a;ja(a)&&(a+="px");this.setAttr("strokeweight",a)},titleSetter:function(a,b){this.setAttr(b,a)},visibilitySetter:function(a,b,c){a==="inherit"&&(a="visible");this.shadows&&q(this.shadows,function(c){c.style[b]=a});c.nodeName==="DIV"&&(a=a==="hidden"?"-999em":0,hb||(c.style[b]=a?"visible":"hidden"),
b="top");c.style[b]=a},xSetter:function(a,b,c){this[b]=a;b==="x"?b="left":b==="y"&&(b="top");this.updateClipping?(this[b]=a,this.updateClipping()):c.style[b]=a},zIndexSetter:function(a,b,c){c.style[b]=a}};K.VMLElement=Z=ma(S,Z);Z.prototype.ySetter=Z.prototype.widthSetter=Z.prototype.heightSetter=Z.prototype.xSetter;var ia={Element:Z,isIE8:wa.indexOf("MSIE 8.0")>-1,init:function(a,b,c,d){var e;this.alignedObjects=[];d=this.createElement(Ka).css(r(this.getStyle(d),{position:"relative"}));e=d.element;
a.appendChild(d.element);this.isVML=!0;this.box=e;this.boxWrapper=d;this.cache={};this.setSize(b,c,!1);if(!x.namespaces.hcv){x.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{x.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(f){x.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},
clipRect:function(a,b,c,d){var e=this.createElement(),f=da(a);return r(e,{members:[],left:(f?a.x:a)+1,top:(f?a.y:b)+1,width:(f?a.width:c)-1,height:(f?a.height:d)-1,getCSS:function(a){var b=a.element,c=b.nodeName,a=a.inverted,d=this.top-(c==="shape"?b.offsetTop:0),e=this.left,b=e+this.width,f=d+this.height,d={clip:"rect("+v(a?e:d)+"px,"+v(a?f:b)+"px,"+v(a?b:f)+"px,"+v(a?d:e)+"px)"};!a&&hb&&c==="DIV"&&r(d,{width:b+"px",height:f+"px"});return d},updateClipping:function(){q(e.members,function(a){a.element&&
a.css(e.getCSS(a))})}})},color:function(a,b,c,d){var e=this,f,g=/^rgba/,h,i,j=P;a&&a.linearGradient?i="gradient":a&&a.radialGradient&&(i="pattern");if(i){var k,l,n=a.linearGradient||a.radialGradient,m,o,p,D,J,C="",a=a.stops,t,s=[],u=function(){h=['<fill colors="'+s.join(",")+'" opacity="',p,'" o:opacity2="',o,'" type="',i,'" ',C,'focus="100%" method="any" />'];$(e.prepVML(h),null,null,b)};m=a[0];t=a[a.length-1];m[0]>0&&a.unshift([0,m[1]]);t[0]<1&&a.push([1,t[1]]);q(a,function(a,b){g.test(a[1])?(f=
ya(a[1]),k=f.get("rgb"),l=f.get("a")):(k=a[1],l=1);s.push(a[0]*100+"% "+k);b?(p=l,D=k):(o=l,J=k)});if(c==="fill")if(i==="gradient")c=n.x1||n[0]||0,a=n.y1||n[1]||0,m=n.x2||n[2]||0,n=n.y2||n[3]||0,C='angle="'+(90-V.atan((n-a)/(m-c))*180/oa)+'"',u();else{var j=n.r,r=j*2,v=j*2,x=n.cx,z=n.cy,R=b.radialReference,w,j=function(){R&&(w=d.getBBox(),x+=(R[0]-w.x)/w.width-0.5,z+=(R[1]-w.y)/w.height-0.5,r*=R[2]/w.width,v*=R[2]/w.height);C='src="'+E.global.VMLRadialGradientURL+'" size="'+r+","+v+'" origin="0.5,0.5" position="'+
x+","+z+'" color2="'+J+'" ';u()};d.added?j():d.onAdd=j;j=D}else j=k}else if(g.test(a)&&b.tagName!=="IMG")f=ya(a),h=["<",c,' opacity="',f.get("a"),'"/>'],$(this.prepVML(h),null,null,b),j=f.get("rgb");else{j=b.getElementsByTagName(c);if(j.length)j[0].opacity=1,j[0].type="solid";j=a}return j},prepVML:function(a){var b=this.isIE8,a=a.join("");b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=a.indexOf('style="')===-1?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):
a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:ta.prototype.html,path:function(a){var b={coordsize:"10 10"};Ha(a)?b.d=a:da(a)&&r(b,a);return this.createElement("shape").attr(b)},circle:function(a,b,c){var d=this.symbol("circle");if(da(a))c=a.r,b=a.y,a=a.x;d.isCircle=!0;d.r=c;return d.attr({x:a,y:b})},g:function(a){var b;a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a});return this.createElement(Ka).attr(b)},image:function(a,
b,c,d,e){var f=this.createElement("img").attr({src:a});arguments.length>1&&f.attr({x:b,y:c,width:d,height:e});return f},createElement:function(a){return a==="rect"?this.symbol(a):ta.prototype.createElement.call(this,a)},invertChild:function(a,b){var c=this,d=b.style,e=a.tagName==="IMG"&&a.style;B(a,{flip:"x",left:y(d.width)-(e?y(e.top):1),top:y(d.height)-(e?y(e.left):1),rotation:-90});q(a.childNodes,function(b){c.invertChild(b,a)})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||
d,c=e.innerR,d=aa(f),i=fa(f),j=aa(g),k=fa(g);if(g-f===0)return["x"];f=["wa",a-h,b-h,a+h,b+h,a+h*d,b+h*i,a+h*j,b+h*k];e.open&&!c&&f.push("e","M",a,b);f.push("at",a-c,b-c,a+c,b+c,a+c*j,b+c*k,a+c*d,b+c*i,"x","e");f.isArc=!0;return f},circle:function(a,b,c,d,e){e&&(c=d=2*e.r);e&&e.isCircle&&(a-=c/2,b-=d/2);return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){return ta.prototype.symbols[!s(e)||!e.r?"square":"callout"].call(0,a,b,c,d,e)}}};K.VMLRenderer=Z=function(){this.init.apply(this,
arguments)};Z.prototype=w(ta.prototype,ia);Za=Z}ta.prototype.measureSpanWidth=function(a,b){var c=x.createElement("span"),d;d=x.createTextNode(a);c.appendChild(d);B(c,b);this.box.appendChild(c);d=c.offsetWidth;Qa(c);return d};var Mb;if(ga)K.CanVGRenderer=Z=function(){xa="http://www.w3.org/1999/xhtml"},Z.prototype.symbols={},Mb=function(){function a(){var a=b.length,d;for(d=0;d<a;d++)b[d]();b=[]}var b=[];return{push:function(c,d){b.length===0&&Rb(d,a);b.push(c)}}}(),Za=Z;Ta.prototype={addLabel:function(){var a=
this.axis,b=a.options,c=a.chart,d=a.horiz,e=a.categories,f=a.names,g=this.pos,h=b.labels,i=h.rotation,j=a.tickPositions,d=d&&e&&!h.step&&!h.staggerLines&&!h.rotation&&c.plotWidth/j.length||!d&&(c.margin[3]||c.chartWidth*0.33),k=g===j[0],l=g===j[j.length-1],n,f=e?p(e[g],f[g],g):g,e=this.label,m=j.info;a.isDatetimeAxis&&m&&(n=b.dateTimeLabelFormats[m.higherRanks[g]||m.unitName]);this.isFirst=k;this.isLast=l;b=a.labelFormatter.call({axis:a,chart:c,isFirst:k,isLast:l,dateTimeLabelFormat:n,value:a.isLog?
ea(ka(f)):f});g=d&&{width:t(1,v(d-2*(h.padding||10)))+"px"};if(s(e))e&&e.attr({text:b}).css(g);else{n={align:a.labelAlign};if(ja(i))n.rotation=i;if(d&&h.ellipsis)g.HcHeight=a.len/j.length;this.label=e=s(b)&&h.enabled?c.renderer.text(b,0,0,h.useHTML).attr(n).css(r(g,h.style)).add(a.labelGroup):null;a.tickBaseline=c.renderer.fontMetrics(h.style.fontSize,e).b;i&&a.side===2&&(a.tickBaseline*=aa(i*Ea))}this.yOffset=e?p(h.y,a.tickBaseline+(a.side===2?8:-(e.getBBox().height/2))):0},getLabelSize:function(){var a=
this.label,b=this.axis;return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,c=b.horiz,d=b.options.labels,a=c?a.width:a.height,b=c?d.x-a*{left:0,center:0.5,right:1}[b.labelAlign]:0;return[b,c?a+b:a]},handleOverflow:function(a,b){var c=!0,d=this.axis,e=this.isFirst,f=this.isLast,g=d.horiz?b.x:b.y,h=d.reversed,i=d.tickPositions,j=this.getLabelSides(),k=j[0],j=j[1],l,n,m,o=this.label.line;l=o||0;n=d.labelEdge;m=d.justifyLabels&&(e||f);n[l]===
u||g+k>n[l]?n[l]=g+j:m||(c=!1);if(m){l=(n=d.justifyToPlot)?d.pos:0;n=n?l+d.len:d.chart.chartWidth;do a+=e?1:-1,m=d.ticks[i[a]];while(i[a]&&(!m||!m.label||m.label.line!==o));d=m&&m.label.xy&&m.label.xy.x+m.getLabelSides()[e?0:1];e&&!h||f&&h?g+k<l&&(g=l-k,m&&g+j>d&&(c=!1)):g+j>n&&(g=n-j,m&&g+k<d&&(c=!1));b.x=g}return c},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||
f.chartWidth)-e.right-e.left:0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i=this.axis,j=i.transA,k=i.reversed,l=i.staggerLines,a=a+e.x-(f&&d?f*j*(k?-1:1):0),b=b+this.yOffset-(f&&!d?f*j*(k?1:-1):0);if(l)c.line=g/(h||1)%l,b+=c.line*(i.labelOffset/l);return{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine(["M",a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d=this.axis,e=d.options,
f=d.chart.renderer,g=d.horiz,h=this.type,i=this.label,j=this.pos,k=e.labels,l=this.gridLine,n=h?h+"Grid":"grid",m=h?h+"Tick":"tick",o=e[n+"LineWidth"],q=e[n+"LineColor"],D=e[n+"LineDashStyle"],J=e[m+"Length"],n=e[m+"Width"]||0,C=e[m+"Color"],t=e[m+"Position"],m=this.mark,s=k.step,r=!0,v=d.tickmarkOffset,w=this.getPosition(g,j,v,b),x=w.x,w=w.y,z=g&&x===d.pos+d.len||!g&&w===d.pos?-1:1,c=p(c,1);this.isActive=!0;if(o){j=d.getPlotLinePath(j+v,o*z,b,!0);if(l===u){l={stroke:q,"stroke-width":o};if(D)l.dashstyle=
D;if(!h)l.zIndex=1;if(b)l.opacity=0;this.gridLine=l=o?f.path(j).attr(l).add(d.gridGroup):null}if(!b&&l&&j)l[this.isNew?"attr":"animate"]({d:j,opacity:c})}if(n&&J)t==="inside"&&(J=-J),d.opposite&&(J=-J),h=this.getMarkPath(x,w,J,n*z,g,f),m?m.animate({d:h,opacity:c}):this.mark=f.path(h).attr({stroke:C,"stroke-width":n,opacity:c}).add(d.axisGroup);if(i&&!isNaN(x))i.xy=w=this.getLabelPosition(x,w,i,g,k,v,a,s),this.isFirst&&!this.isLast&&!p(e.showFirstLabel,1)||this.isLast&&!this.isFirst&&!p(e.showLastLabel,
1)?r=!1:!d.isRadial&&!k.step&&!k.rotation&&!b&&c!==0&&(r=this.handleOverflow(a,w)),s&&a%s&&(r=!1),r&&!isNaN(w.y)?(w.opacity=c,i[this.isNew?"attr":"animate"](w),this.isNew=!1):i.attr("y",-9999)},destroy:function(){Pa(this,this.axis)}};K.PlotLineOrBand=function(a,b){this.axis=a;if(b)this.options=b,this.id=b.id};K.PlotLineOrBand.prototype={render:function(){var a=this,b=a.axis,c=b.horiz,d=(b.pointRange||0)/2,e=a.options,f=e.label,g=a.label,h=e.width,i=e.to,j=e.from,k=s(j)&&s(i),l=e.value,n=e.dashStyle,
m=a.svgElem,o=[],p,q=e.color,J=e.zIndex,C=e.events,r={},u=b.chart.renderer;b.isLog&&(j=za(j),i=za(i),l=za(l));if(h){if(o=b.getPlotLinePath(l,h),r={stroke:q,"stroke-width":h},n)r.dashstyle=n}else if(k){j=t(j,b.min-d);i=L(i,b.max+d);o=b.getPlotBandPath(j,i,e);if(q)r.fill=q;if(e.borderWidth)r.stroke=e.borderColor,r["stroke-width"]=e.borderWidth}else return;if(s(J))r.zIndex=J;if(m)if(o)m.animate({d:o},null,m.onGetPath);else{if(m.hide(),m.onGetPath=function(){m.show()},g)a.label=g=g.destroy()}else if(o&&
o.length&&(a.svgElem=m=u.path(o).attr(r).add(),C))for(p in d=function(b){m.on(b,function(c){C[b].apply(a,[c])})},C)d(p);if(f&&s(f.text)&&o&&o.length&&b.width>0&&b.height>0){f=w({align:c&&k&&"center",x:c?!k&&4:10,verticalAlign:!c&&k&&"middle",y:c?k?16:10:k?6:-4,rotation:c&&!k&&90},f);if(!g){r={align:f.textAlign||f.align,rotation:f.rotation};if(s(J))r.zIndex=J;a.label=g=u.text(f.text,0,0,f.useHTML).attr(r).css(f.style).add()}b=[o[1],o[4],k?o[6]:o[1]];k=[o[2],o[5],k?o[7]:o[2]];o=Oa(b);c=Oa(k);g.align(f,
!1,{x:o,y:c,width:Ca(b)-o,height:Ca(k)-c});g.show()}else g&&g.hide();return a},destroy:function(){la(this.axis.plotLinesAndBands,this);delete this.axis;Pa(this)}};na.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:M,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",
minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return Ba(this.total,
-1)},style:M.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(a,b){var c=b.isX;this.horiz=a.inverted?!c:c;this.coll=(this.isXAxis=c)?"xAxis":"yAxis";this.opposite=b.opposite;this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(b);var d=
this.options,e=d.type;this.labelFormatter=d.labels.formatter||this.defaultLabelFormatter;this.userOptions=b;this.minPixelPadding=0;this.chart=a;this.reversed=d.reversed;this.zoomEnabled=d.zoomEnabled!==!1;this.categories=d.categories||e==="category";this.names=[];this.isLog=e==="logarithmic";this.isDatetimeAxis=e==="datetime";this.isLinked=s(d.linkedTo);this.tickmarkOffset=this.categories&&d.tickmarkPlacement==="between"&&p(d.tickInterval,1)===1?0.5:0;this.ticks={};this.labelEdge=[];this.minorTicks=
{};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=d.minRange||d.maxZoom;this.range=d.range;this.offset=d.offset||0;this.stacks={};this.oldStacks={};this.min=this.max=null;this.crosshair=p(d.crosshair,ra(a.options.tooltip.crosshairs)[c?0:1],!1);var f,d=this.options.events;Ma(this,a.axes)===-1&&(c&&!this.isColorAxis?a.axes.splice(a.xAxis.length,0,this):a.axes.push(this),a[this.coll].push(this));this.series=this.series||[];if(a.inverted&&c&&this.reversed===
u)this.reversed=!0;this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(f in d)N(this,f,d[f]);if(this.isLog)this.val2lin=za,this.lin2val=ka},setOptions:function(a){this.options=w(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],w(E[this.coll],a))},defaultLabelFormatter:function(){var a=this.axis,b=this.value,c=a.categories,d=this.dateTimeLabelFormat,
e=E.lang.numericSymbols,f=e&&e.length,g,h=a.options.labels.format,a=a.isLog?b:a.tickInterval;if(h)g=Ja(h,this);else if(c)g=b;else if(d)g=cb(d,b);else if(f&&a>=1E3)for(;f--&&g===u;)c=Math.pow(1E3,f+1),a>=c&&e[f]!==null&&(g=Ba(b/c,-1)+e[f]);g===u&&(g=Q(b)>=1E4?Ba(b,0):Ba(b,-1,u,""));return g},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1;a.dataMin=a.dataMax=a.ignoreMinPadding=a.ignoreMaxPadding=null;a.buildStacks&&a.buildStacks();q(a.series,function(c){if(c.visible||!b.options.chart.ignoreHiddenSeries){var d;
d=c.options.threshold;var e;a.hasVisibleSeries=!0;a.isLog&&d<=0&&(d=null);if(a.isXAxis){if(d=c.xData,d.length)a.dataMin=L(p(a.dataMin,d[0]),Oa(d)),a.dataMax=t(p(a.dataMax,d[0]),Ca(d))}else{c.getExtremes();e=c.dataMax;c=c.dataMin;if(s(c)&&s(e))a.dataMin=L(p(a.dataMin,c),c),a.dataMax=t(p(a.dataMax,e),e);if(s(d))if(a.dataMin>=d)a.dataMin=d,a.ignoreMinPadding=!0;else if(a.dataMax<d)a.dataMax=d,a.ignoreMaxPadding=!0}}})},translate:function(a,b,c,d,e,f){var g=1,h=0,i=d?this.oldTransA:this.transA,d=d?this.oldMin:
this.min,j=this.minPixelPadding,e=(this.options.ordinal||this.isLog&&e)&&this.lin2val;if(!i)i=this.transA;if(c)g*=-1,h=this.len;this.reversed&&(g*=-1,h-=g*(this.sector||this.len));b?(a=a*g+h,a-=j,a=a/i+d,e&&(a=this.lin2val(a))):(e&&(a=this.val2lin(a)),f==="between"&&(f=0.5),a=g*(a-d)*i+h+g*j+(ja(f)?i*f*this.pointRange:0));return a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,
!0)},getPlotLinePath:function(a,b,c,d,e){var f=this.chart,g=this.left,h=this.top,i,j,k=c&&f.oldChartHeight||f.chartHeight,l=c&&f.oldChartWidth||f.chartWidth,n;i=this.transB;e=p(e,this.translate(a,null,null,c));a=c=v(e+i);i=j=v(k-e-i);if(isNaN(e))n=!0;else if(this.horiz){if(i=h,j=k-this.bottom,a<g||a>g+this.width)n=!0}else if(a=g,c=l-this.right,i<h||i>h+this.height)n=!0;return n&&!d?null:f.renderer.crispLine(["M",a,i,"L",c,j],b||1)},getLinearTickPositions:function(a,b,c){var d,e=ea(U(b/a)*a),f=ea(La(c/
a)*a),g=[];if(b===c&&ja(b))return[b];for(b=e;b<=f;){g.push(b);b=ea(b+a);if(b===d)break;d=b}return g},getMinorTickPositions:function(){var a=this.options,b=this.tickPositions,c=this.minorTickInterval,d=[],e;if(this.isLog){e=b.length;for(a=1;a<e;a++)d=d.concat(this.getLogTickPositions(c,b[a-1],b[a],!0))}else if(this.isDatetimeAxis&&a.minorTickInterval==="auto")d=d.concat(this.getTimeTicks(this.normalizeTimeTickInterval(c),this.min,this.max,a.startOfWeek)),d[0]<this.min&&d.shift();else for(b=this.min+
(b[0]-this.min)%c;b<=this.max;b+=c)d.push(b);return d},adjustForMinRange:function(){var a=this.options,b=this.min,c=this.max,d,e=this.dataMax-this.dataMin>=this.minRange,f,g,h,i,j;if(this.isXAxis&&this.minRange===u&&!this.isLog)s(a.min)||s(a.max)?this.minRange=null:(q(this.series,function(a){i=a.xData;for(g=j=a.xIncrement?1:i.length-1;g>0;g--)if(h=i[g]-i[g-1],f===u||h<f)f=h}),this.minRange=L(f*5,this.dataMax-this.dataMin));if(c-b<this.minRange){var k=this.minRange;d=(k-c+b)/2;d=[b-d,p(a.min,b-d)];
if(e)d[2]=this.dataMin;b=Ca(d);c=[b+k,p(a.max,b+k)];if(e)c[2]=this.dataMax;c=Oa(c);c-b<k&&(d[0]=c-k,d[1]=p(a.min,c-k),b=Ca(d))}this.min=b;this.max=c},setAxisTranslation:function(a){var b=this,c=b.max-b.min,d=b.axisPointRange||0,e,f=0,g=0,h=b.linkedParent,i=!!b.categories,j=b.transA;if(b.isXAxis||i||d)h?(f=h.minPointOffset,g=h.pointRangePadding):q(b.series,function(a){var h=i?1:b.isXAxis?a.pointRange:b.axisPointRange||0,j=a.options.pointPlacement,m=a.closestPointRange;h>c&&(h=0);d=t(d,h);f=t(f,Ga(j)?
0:h/2);g=t(g,j==="on"?0:h);!a.noSharedTooltip&&s(m)&&(e=s(e)?L(e,m):m)}),h=b.ordinalSlope&&e?b.ordinalSlope/e:1,b.minPointOffset=f*=h,b.pointRangePadding=g*=h,b.pointRange=L(d,c),b.closestPointRange=e;if(a)b.oldTransA=j;b.translationSlope=b.transA=j=b.len/(c+g||1);b.transB=b.horiz?b.left:b.bottom;b.minPixelPadding=j*f},setTickPositions:function(a){var b=this,c=b.chart,d=b.options,e=d.startOnTick,f=d.endOnTick,g=b.isLog,h=b.isDatetimeAxis,i=b.isXAxis,j=b.isLinked,k=b.options.tickPositioner,l=d.maxPadding,
n=d.minPadding,m=d.tickInterval,o=d.minTickInterval,Y=d.tickPixelInterval,D,J=b.categories;j?(b.linkedParent=c[b.coll][d.linkedTo],c=b.linkedParent.getExtremes(),b.min=p(c.min,c.dataMin),b.max=p(c.max,c.dataMax),d.type!==b.linkedParent.options.type&&ha(11,1)):(b.min=p(b.userMin,d.min,b.dataMin),b.max=p(b.userMax,d.max,b.dataMax));if(g)!a&&L(b.min,p(b.dataMin,b.min))<=0&&ha(10,1),b.min=ea(za(b.min)),b.max=ea(za(b.max));if(b.range&&s(b.max))b.userMin=b.min=t(b.min,b.max-b.range),b.userMax=b.max,b.range=
null;b.beforePadding&&b.beforePadding();b.adjustForMinRange();if(!J&&!b.axisPointRange&&!b.usePercentage&&!j&&s(b.min)&&s(b.max)&&(c=b.max-b.min)){if(!s(d.min)&&!s(b.userMin)&&n&&(b.dataMin<0||!b.ignoreMinPadding))b.min-=c*n;if(!s(d.max)&&!s(b.userMax)&&l&&(b.dataMax>0||!b.ignoreMaxPadding))b.max+=c*l}if(ja(d.floor))b.min=t(b.min,d.floor);if(ja(d.ceiling))b.max=L(b.max,d.ceiling);b.min===b.max||b.min===void 0||b.max===void 0?b.tickInterval=1:j&&!m&&Y===b.linkedParent.options.tickPixelInterval?b.tickInterval=
b.linkedParent.tickInterval:(b.tickInterval=p(m,J?1:(b.max-b.min)*Y/t(b.len,Y)),!s(m)&&b.len<Y&&!this.isRadial&&!this.isLog&&!J&&e&&f&&(D=!0,b.tickInterval/=4));i&&!a&&q(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)});b.setAxisTranslation(!0);b.beforeSetTickPositions&&b.beforeSetTickPositions();if(b.postProcessTickInterval)b.tickInterval=b.postProcessTickInterval(b.tickInterval);if(b.pointRange)b.tickInterval=t(b.pointRange,b.tickInterval);if(!m&&b.tickInterval<o)b.tickInterval=
o;if(!h&&!g&&!m)b.tickInterval=nb(b.tickInterval,null,mb(b.tickInterval),p(d.allowDecimals,!(b.tickInterval>1&&b.tickInterval<5&&b.max>1E3&&b.max<9999)));b.minorTickInterval=d.minorTickInterval==="auto"&&b.tickInterval?b.tickInterval/5:d.minorTickInterval;b.tickPositions=a=d.tickPositions?[].concat(d.tickPositions):k&&k.apply(b,[b.min,b.max]);if(!a)!b.ordinalPositions&&(b.max-b.min)/b.tickInterval>t(2*b.len,200)&&ha(19,!0),a=h?b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval,d.units),b.min,
b.max,d.startOfWeek,b.ordinalPositions,b.closestPointRange,!0):g?b.getLogTickPositions(b.tickInterval,b.min,b.max):b.getLinearTickPositions(b.tickInterval,b.min,b.max),D&&a.splice(1,a.length-2),b.tickPositions=a;if(!j)d=a[0],g=a[a.length-1],h=b.minPointOffset||0,e?b.min=d:b.min-h>d&&a.shift(),f?b.max=g:b.max+h<g&&a.pop(),a.length===0&&s(d)&&a.push((g+d)/2),a.length===1&&(e=Q(b.max)>1E13?1:0.001,b.min-=e,b.max+=e)},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},c=this.tickPositions,d=this._maxTicksKey=
[this.coll,this.pos,this.len].join("-");if(!this.isLinked&&!this.isDatetimeAxis&&c&&c.length>(b[d]||0)&&this.options.alignTicks!==!1)b[d]=c.length;a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,c=this.chart.maxTicks;if(c&&c[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==u){var d=this.tickAmount,e=b.length;this.tickAmount=a=c[a];if(e<a){for(;b.length<a;)b.push(ea(b[b.length-1]+this.tickInterval));this.transA*=
(e-1)/(a-1);this.max=b[b.length-1]}if(s(d)&&a!==d)this.isDirty=!0}},setScale:function(){var a=this.stacks,b,c,d,e;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();e=this.len!==this.oldAxisLength;q(this.series,function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)d=!0});if(e||d||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(b in a)for(c in a[b])a[b][c].total=null,a[b][c].cum=0;this.forceRedraw=
!1;this.getSeriesExtremes();this.setTickPositions();this.oldUserMin=this.userMin;this.oldUserMax=this.userMax;if(!this.isDirty)this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax}else if(!this.isXAxis){if(this.oldStacks)a=this.stacks=this.oldStacks;for(b in a)for(c in a[b])a[b][c].cum=a[b][c].total}this.setMaxTicks()},setExtremes:function(a,b,c,d,e){var f=this,g=f.chart,c=p(c,!0),e=r(e,{min:a,max:b});I(f,"setExtremes",e,function(){f.userMin=a;f.userMax=b;f.eventArgs=e;f.isDirtyExtremes=
!0;c&&g.redraw(d)})},zoom:function(a,b){var c=this.dataMin,d=this.dataMax,e=this.options;this.allowZoomOutside||(s(c)&&a<=L(c,p(e.min,c))&&(a=u),s(d)&&b>=t(d,p(e.max,d))&&(b=u));this.displayBtn=a!==u||b!==u;this.setExtremes(a,b,!1,u,{trigger:"zoom"});return!0},setAxisSize:function(){var a=this.chart,b=this.options,c=b.offsetLeft||0,d=this.horiz,e=p(b.width,a.plotWidth-c+(b.offsetRight||0)),f=p(b.height,a.plotHeight),g=p(b.top,a.plotTop),b=p(b.left,a.plotLeft+c),c=/%$/;c.test(f)&&(f=parseInt(f,10)/
100*a.plotHeight);c.test(g)&&(g=parseInt(g,10)/100*a.plotHeight+a.plotTop);this.left=b;this.top=g;this.width=e;this.height=f;this.bottom=a.chartHeight-f-g;this.right=a.chartWidth-e-b;this.len=t(d?e:f,0);this.pos=d?b:g},getExtremes:function(){var a=this.isLog;return{min:a?ea(ka(this.min)):this.min,max:a?ea(ka(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,c=b?ka(this.min):this.min,b=b?ka(this.max):
this.max;c>a||a===null?a=c:b<a&&(a=b);return this.translate(a,0,1,0,1)},autoLabelAlign:function(a){a=(p(a,0)-this.side*90+720)%360;return a>15&&a<165?"right":a>195&&a<345?"left":"center"},getOffset:function(){var a=this,b=a.chart,c=b.renderer,d=a.options,e=a.tickPositions,f=a.ticks,g=a.horiz,h=a.side,i=b.inverted?[1,0,3,2][h]:h,j,k,l=0,n,m=0,o=d.title,Y=d.labels,D=0,J=b.axisOffset,b=b.clipOffset,C=[-1,1,1,-1][h],r,v=1,w=p(Y.maxStaggerLines,5),x,y,A,z,R;a.hasData=j=a.hasVisibleSeries||s(a.min)&&s(a.max)&&
!!e;a.showAxis=k=j||p(d.showEmpty,!0);a.staggerLines=a.horiz&&Y.staggerLines;if(!a.axisGroup)a.gridGroup=c.g("grid").attr({zIndex:d.gridZIndex||1}).add(),a.axisGroup=c.g("axis").attr({zIndex:d.zIndex||2}).add(),a.labelGroup=c.g("axis-labels").attr({zIndex:Y.zIndex||7}).addClass("highcharts-"+a.coll.toLowerCase()+"-labels").add();if(j||a.isLinked){a.labelAlign=p(Y.align||a.autoLabelAlign(Y.rotation));q(e,function(b){f[b]?f[b].addLabel():f[b]=new Ta(a,b)});if(a.horiz&&!a.staggerLines&&w&&!Y.rotation){for(j=
a.reversed?[].concat(e).reverse():e;v<w;){x=[];y=!1;for(r=0;r<j.length;r++)A=j[r],z=(z=f[A].label&&f[A].label.getBBox())?z.width:0,R=r%v,z&&(A=a.translate(A),x[R]!==u&&A<x[R]&&(y=!0),x[R]=A+z);if(y)v++;else break}if(v>1)a.staggerLines=v}q(e,function(b){if(h===0||h===2||{1:"left",3:"right"}[h]===a.labelAlign)D=t(f[b].getLabelSize(),D)});if(a.staggerLines)D*=a.staggerLines,a.labelOffset=D}else for(r in f)f[r].destroy(),delete f[r];if(o&&o.text&&o.enabled!==!1){if(!a.axisTitle)a.axisTitle=c.text(o.text,
0,0,o.useHTML).attr({zIndex:7,rotation:o.rotation||0,align:o.textAlign||{low:"left",middle:"center",high:"right"}[o.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(o.style).add(a.axisGroup),a.axisTitle.isNew=!0;if(k)l=a.axisTitle.getBBox()[g?"height":"width"],n=o.offset,m=s(n)?0:p(o.margin,g?5:10);a.axisTitle[k?"show":"hide"]()}a.offset=C*p(d.offset,J[h]);c=h===2?a.tickBaseline:0;g=D+m+(D&&C*(g?p(Y.y,a.tickBaseline+8):Y.x)-c);a.axisTitleMargin=p(n,g);J[h]=t(J[h],a.axisTitleMargin+
l+C*a.offset,g);b[i]=t(b[i],U(d.lineWidth/2)*2)},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,d=b.chartHeight-this.bottom-(c?this.height:0)+d;c&&(a*=-1);return b.renderer.crispLine(["M",e?this.left:f,e?d:this.top,"L",e?b.chartWidth-this.right:f,e?d:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,c=this.top,d=this.len,e=this.options.title,f=a?b:c,g=this.opposite,h=this.offset,i=y(e.style.fontSize||
12),d={low:f+(a?0:d),middle:f+d/2,high:f+(a?d:0)}[e.align],b=(a?c+this.height:b)+(a?1:-1)*(g?-1:1)*this.axisTitleMargin+(this.side===2?i:0);return{x:a?d:b+(g?this.width:0)+h+(e.x||0),y:a?b-(g?this.height:0)+h:d+(e.y||0)}},render:function(){var a=this,b=a.horiz,c=a.reversed,d=a.chart,e=d.renderer,f=a.options,g=a.isLog,h=a.isLinked,i=a.tickPositions,j,k=a.axisTitle,l=a.ticks,n=a.minorTicks,m=a.alternateBands,o=f.stackLabels,p=f.alternateGridColor,D=a.tickmarkOffset,J=f.lineWidth,C=d.hasRendered&&s(a.oldMin)&&
!isNaN(a.oldMin),r=a.hasData,t=a.showAxis,v,w=f.labels.overflow,x=a.justifyLabels=b&&w!==!1,A;a.labelEdge.length=0;a.justifyToPlot=w==="justify";q([l,n,m],function(a){for(var b in a)a[b].isActive=!1});if(r||h)if(a.minorTickInterval&&!a.categories&&q(a.getMinorTickPositions(),function(b){n[b]||(n[b]=new Ta(a,b,"minor"));C&&n[b].isNew&&n[b].render(null,!0);n[b].render(null,!1,1)}),i.length&&(j=i.slice(),(b&&c||!b&&!c)&&j.reverse(),x&&(j=j.slice(1).concat([j[0]])),q(j,function(b,c){x&&(c=c===j.length-
1?0:c+1);if(!h||b>=a.min&&b<=a.max)l[b]||(l[b]=new Ta(a,b)),C&&l[b].isNew&&l[b].render(c,!0,0.1),l[b].render(c)}),D&&a.min===0&&(l[-1]||(l[-1]=new Ta(a,-1,null,!0)),l[-1].render(-1))),p&&q(i,function(b,c){if(c%2===0&&b<a.max)m[b]||(m[b]=new K.PlotLineOrBand(a)),v=b+D,A=i[c+1]!==u?i[c+1]+D:a.max,m[b].options={from:g?ka(v):v,to:g?ka(A):A,color:p},m[b].render(),m[b].isActive=!0}),!a._addedPlotLB)q((f.plotLines||[]).concat(f.plotBands||[]),function(b){a.addPlotBandOrLine(b)}),a._addedPlotLB=!0;q([l,n,
m],function(a){var b,c,e=[],f=va?va.duration||500:0,g=function(){for(c=e.length;c--;)a[e[c]]&&!a[e[c]].isActive&&(a[e[c]].destroy(),delete a[e[c]])};for(b in a)if(!a[b].isActive)a[b].render(b,!1,0),a[b].isActive=!1,e.push(b);a===m||!d.hasRendered||!f?g():f&&setTimeout(g,f)});if(J)b=a.getLinePath(J),a.axisLine?a.axisLine.animate({d:b}):a.axisLine=e.path(b).attr({stroke:f.lineColor,"stroke-width":J,zIndex:7}).add(a.axisGroup),a.axisLine[t?"show":"hide"]();if(k&&t)k[k.isNew?"attr":"animate"](a.getTitlePosition()),
k.isNew=!1;o&&o.enabled&&a.renderStackTotals();a.isDirty=!1},redraw:function(){this.render();q(this.plotLinesAndBands,function(a){a.render()});q(this.series,function(a){a.isDirty=!0})},destroy:function(a){var b=this,c=b.stacks,d,e=b.plotLinesAndBands;a||X(b);for(d in c)Pa(c[d]),c[d]=null;q([b.ticks,b.minorTicks,b.alternateBands],function(a){Pa(a)});for(a=e.length;a--;)e[a].destroy();q("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(a){b[a]&&(b[a]=b[a].destroy())});
this.cross&&this.cross.destroy()},drawCrosshair:function(a,b){if(this.crosshair)if((s(b)||!p(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var c,d=this.crosshair,e=d.animation;p(d.snap,!0)?s(b)&&(c=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):c=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos;c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:p(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,c);if(c===null)this.hideCrosshair();else if(this.cross)this.cross.attr({visibility:"visible"})[e?
"animate":"attr"]({d:c},e);else{e={"stroke-width":d.width||1,stroke:d.color||"#C0C0C0",zIndex:d.zIndex||2};if(d.dashStyle)e.dashstyle=d.dashStyle;this.cross=this.chart.renderer.path(c).attr(e).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}};r(na.prototype,{getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);d&&c?d.push(c[4],c[5],c[1],c[2]):d=null;return d},addPlotBand:function(a){return this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){return this.addPlotBandOrLine(a,
"plotLines")},addPlotBandOrLine:function(a,b){var c=(new K.PlotLineOrBand(this,a)).render(),d=this.userOptions;c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c));return c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();q([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&la(b,b[e])})}});na.prototype.getTimeTicks=function(a,b,
c,d){var e=[],f={},g=E.global.useUTC,h,i=new Da(b-Sa),j=a.unitRange,k=a.count;if(s(b)){j>=A.second&&(i.setMilliseconds(0),i.setSeconds(j>=A.minute?0:k*U(i.getSeconds()/k)));if(j>=A.minute)i[Cb](j>=A.hour?0:k*U(i[pb]()/k));if(j>=A.hour)i[Db](j>=A.day?0:k*U(i[qb]()/k));if(j>=A.day)i[sb](j>=A.month?1:k*U(i[Xa]()/k));j>=A.month&&(i[Eb](j>=A.year?0:k*U(i[fb]()/k)),h=i[gb]());j>=A.year&&(h-=h%k,i[Fb](h));if(j===A.week)i[sb](i[Xa]()-i[rb]()+p(d,1));b=1;Sa&&(i=new Da(i.getTime()+Sa));h=i[gb]();for(var d=
i.getTime(),l=i[fb](),n=i[Xa](),m=(A.day+(g?Sa:i.getTimezoneOffset()*6E4))%A.day;d<c;)e.push(d),j===A.year?d=eb(h+b*k,0):j===A.month?d=eb(h,l+b*k):!g&&(j===A.day||j===A.week)?d=eb(h,l,n+b*k*(j===A.day?1:7)):d+=j*k,b++;e.push(d);q(wb(e,function(a){return j<=A.hour&&a%A.day===m}),function(a){f[a]="day"})}e.info=r(a,{higherRanks:f,totalRange:j*k});return e};na.prototype.normalizeTimeTickInterval=function(a,b){var c=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",
[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],d=c[c.length-1],e=A[d[0]],f=d[1],g;for(g=0;g<c.length;g++)if(d=c[g],e=A[d[0]],f=d[1],c[g+1]&&a<=(e*f[f.length-1]+A[c[g+1][0]])/2)break;e===A.year&&a<5*e&&(f=[1,2,5]);c=nb(a/e,f,d[0]==="year"?t(mb(a/e),1):1);return{unitRange:e,count:c,unitName:d[0]}};na.prototype.getLogTickPositions=function(a,b,c,d){var e=this.options,f=this.len,g=[];if(!d)this._minorAutoInterval=null;if(a>=0.5)a=v(a),g=this.getLinearTickPositions(a,
b,c);else if(a>=0.08)for(var f=U(b),h,i,j,k,l,e=a>0.3?[1,2,4]:a>0.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];f<c+1&&!l;f++){i=e.length;for(h=0;h<i&&!l;h++)j=za(ka(f)*e[h]),j>b&&(!d||k<=c)&&k!==u&&g.push(k),k>c&&(l=!0),k=j}else if(b=ka(b),c=ka(c),a=e[d?"minorTickInterval":"tickInterval"],a=p(a==="auto"?null:a,this._minorAutoInterval,(c-b)*(e.tickPixelInterval/(d?5:1))/((d?f/this.tickPositions.length:f)||1)),a=nb(a,null,mb(a)),g=Va(this.getLinearTickPositions(a,b,c),za),!d)this._minorAutoInterval=a/5;if(!d)this.tickInterval=
a;return g};var Nb=K.Tooltip=function(){this.init.apply(this,arguments)};Nb.prototype={init:function(a,b){var c=b.borderWidth,d=b.style,e=y(d.padding);this.chart=a;this.options=b;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=a.renderer.label("",0,0,b.shape||"callout",null,null,b.useHTML,null,"tooltip").attr({padding:e,fill:b.backgroundColor,"stroke-width":c,r:b.borderRadius,zIndex:8}).css(d).css({padding:0}).add().attr({y:-9999});ga||this.label.shadow(b.shadow);this.shared=b.shared},
destroy:function(){if(this.label)this.label=this.label.destroy();clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(a,b,c,d){var e=this,f=e.now,g=e.options.animation!==!1&&!e.isHidden&&(Q(a-f.x)>1||Q(b-f.y)>1),h=e.followPointer||e.len>1;r(f,{x:g?(2*f.x+a)/3:a,y:g?(f.y+b)/2:b,anchorX:h?u:g?(2*f.anchorX+c)/3:c,anchorY:h?u:g?(f.anchorY+d)/2:d});e.label.attr(f);if(g)clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){e&&e.move(a,b,c,d)},32)},hide:function(a){var b=
this,c;clearTimeout(this.hideTimer);if(!this.isHidden)c=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){b.label.fadeOut();b.isHidden=!0},p(a,this.options.hideDelay,500)),c&&q(c,function(a){a.setState()}),this.chart.hoverPoints=null},getAnchor:function(a,b){var c,d=this.chart,e=d.inverted,f=d.plotTop,g=0,h=0,i,a=ra(a);c=a[0].tooltipPos;this.followPointer&&b&&(b.chartX===u&&(b=d.pointer.normalize(b)),c=[b.chartX-d.plotLeft,b.chartY-f]);c||(q(a,function(a){i=a.series.yAxis;g+=a.plotX;h+=
(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!e&&i?i.top-f:0)}),g/=a.length,h/=a.length,c=[e?d.plotWidth-h:g,this.shared&&!e&&a.length>1&&b?b.chartY-f:e?d.plotHeight-g:h]);return Va(c,v)},getPosition:function(a,b,c){var d=this.chart,e=this.distance,f={},g,h=["y",d.chartHeight,b,c.plotY+d.plotTop],i=["x",d.chartWidth,a,c.plotX+d.plotLeft],j=c.ttBelow||d.inverted&&!c.negative||!d.inverted&&c.negative,k=function(a,b,c,d){var g=c<d-e,b=d+e+c<b,c=d-e-c;d+=e;if(j&&b)f[a]=d;else if(!j&&g)f[a]=c;else if(g)f[a]=
c;else if(b)f[a]=d;else return!1},l=function(a,b,c,d){if(d<e||d>b-e)return!1;else f[a]=d<c/2?1:d>b-c/2?b-c-2:d-c/2},n=function(a){var b=h;h=i;i=b;g=a},m=function(){k.apply(0,h)!==!1?l.apply(0,i)===!1&&!g&&(n(!0),m()):g?f.x=f.y=0:(n(!0),m())};(d.inverted||this.len>1)&&n();m();return f},defaultFormatter:function(a){var b=this.points||ra(this),c=b[0].series,d;d=[a.tooltipHeaderFormatter(b[0])];q(b,function(a){c=a.series;d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||a.point.tooltipFormatter(c.tooltipOptions.pointFormat))});
d.push(a.options.footerFormat||"");return d.join("")},refresh:function(a,b){var c=this.chart,d=this.label,e=this.options,f,g,h={},i,j=[];i=e.formatter||this.defaultFormatter;var h=c.hoverPoints,k,l=this.shared;clearTimeout(this.hideTimer);this.followPointer=ra(a)[0].series.tooltipOptions.followPointer;g=this.getAnchor(a,b);f=g[0];g=g[1];l&&(!a.series||!a.series.noSharedTooltip)?(c.hoverPoints=a,h&&q(h,function(a){a.setState()}),q(a,function(a){a.setState("hover");j.push(a.getLabelConfig())}),h={x:a[0].category,
y:a[0].y},h.points=j,this.len=j.length,a=a[0]):h=a.getLabelConfig();i=i.call(h,this);h=a.series;this.distance=p(h.tooltipOptions.distance,16);i===!1?this.hide():(this.isHidden&&(bb(d),d.attr("opacity",1).show()),d.attr({text:i}),k=e.borderColor||a.color||h.color||"#606060",d.attr({stroke:k}),this.updatePosition({plotX:f,plotY:g,negative:a.negative,ttBelow:a.ttBelow}),this.isHidden=!1);I(c,"tooltipRefresh",{text:i,x:f+c.plotLeft,y:g+c.plotTop,borderColor:k})},updatePosition:function(a){var b=this.chart,
c=this.label,c=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(v(c.x),v(c.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)},tooltipHeaderFormatter:function(a){var b=a.series,c=b.tooltipOptions,d=c.dateTimeLabelFormats,e=c.xDateFormat,f=b.xAxis,g=f&&f.options.type==="datetime"&&ja(a.key),c=c.headerFormat,f=f&&f.closestPointRange,h;if(g&&!e){if(f)for(h in A){if(A[h]>=f||A[h]<=A.day&&a.key%A[h]>0){e=d[h];break}}else e=d.day;e=e||d.year}g&&e&&(c=c.replace("{point.key}","{point.key:"+
e+"}"));return Ja(c,{point:a,series:b})}};var pa;$a=x.documentElement.ontouchstart!==u;var Wa=K.Pointer=function(a,b){this.init(a,b)};Wa.prototype={init:function(a,b){var c=b.chart,d=c.events,e=ga?"":c.zoomType,c=a.inverted,f;this.options=b;this.chart=a;this.zoomX=f=/x/.test(e);this.zoomY=e=/y/.test(e);this.zoomHor=f&&!c||e&&c;this.zoomVert=e&&!c||f&&c;this.hasZoom=f||e;this.runChartClick=d&&!!d.click;this.pinchDown=[];this.lastValidTouch={};if(K.Tooltip&&b.tooltip.enabled)a.tooltip=new Nb(a,b.tooltip),
this.followTouchMove=b.tooltip.followTouchMove;this.setDOMEvents()},normalize:function(a,b){var c,d,a=a||window.event,a=Tb(a);if(!a.target)a.target=a.srcElement;d=a.touches?a.touches.length?a.touches.item(0):a.changedTouches[0]:a;if(!b)this.chartPosition=b=Sb(this.chart.container);d.pageX===u?(c=t(a.x,a.clientX-b.left),d=a.y):(c=d.pageX-b.left,d=d.pageY-b.top);return r(a,{chartX:v(c),chartY:v(d)})},getCoordinates:function(a){var b={xAxis:[],yAxis:[]};q(this.chart.axes,function(c){b[c.isXAxis?"xAxis":
"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})});return b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var b=this.chart,c=b.series,d=b.tooltip,e,f,g=b.hoverPoint,h=b.hoverSeries,i,j,k=b.chartWidth,l=this.getIndex(a);if(d&&this.options.tooltip.shared&&(!h||!h.noSharedTooltip)){f=[];i=c.length;for(j=0;j<i;j++)if(c[j].visible&&c[j].options.enableMouseTracking!==!1&&!c[j].noSharedTooltip&&
c[j].singularTooltips!==!0&&c[j].tooltipPoints.length&&(e=c[j].tooltipPoints[l])&&e.series)e._dist=Q(l-e.clientX),k=L(k,e._dist),f.push(e);for(i=f.length;i--;)f[i]._dist>k&&f.splice(i,1);if(f.length&&f[0].clientX!==this.hoverX)d.refresh(f,a),this.hoverX=f[0].clientX}c=h&&h.tooltipOptions.followPointer;if(h&&h.tracker&&!c){if((e=h.tooltipPoints[l])&&e!==g)e.onMouseOver(a)}else d&&c&&!d.isHidden&&(h=d.getAnchor([{}],a),d.updatePosition({plotX:h[0],plotY:h[1]}));if(d&&!this._onDocumentMouseMove)this._onDocumentMouseMove=
function(a){if(W[pa])W[pa].pointer.onDocumentMouseMove(a)},N(x,"mousemove",this._onDocumentMouseMove);q(b.axes,function(b){b.drawCrosshair(a,p(e,g))})},reset:function(a,b){var c=this.chart,d=c.hoverSeries,e=c.hoverPoint,f=c.tooltip,g=f&&f.shared?c.hoverPoints:e;(a=a&&f&&g)&&ra(g)[0].plotX===u&&(a=!1);if(a)f.refresh(g),e&&e.setState(e.state,!0);else{if(e)e.onMouseOut();if(d)d.onMouseOut();f&&f.hide(b);if(this._onDocumentMouseMove)X(x,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=
null;q(c.axes,function(a){a.hideCrosshair()});this.hoverX=null}},scaleGroups:function(a,b){var c=this.chart,d;q(c.series,function(e){d=a||e.getPlotBox();e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(d),e.markerGroup&&(e.markerGroup.attr(d),e.markerGroup.clip(b?c.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(d))});c.clipRect.attr(b||c.clipBox)},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type;b.cancelClick=!1;b.mouseDownX=this.mouseDownX=a.chartX;b.mouseDownY=this.mouseDownY=a.chartY},
drag:function(a){var b=this.chart,c=b.options.chart,d=a.chartX,e=a.chartY,f=this.zoomHor,g=this.zoomVert,h=b.plotLeft,i=b.plotTop,j=b.plotWidth,k=b.plotHeight,l,n=this.mouseDownX,m=this.mouseDownY,o=c.panKey&&a[c.panKey+"Key"];d<h?d=h:d>h+j&&(d=h+j);e<i?e=i:e>i+k&&(e=i+k);this.hasDragged=Math.sqrt(Math.pow(n-d,2)+Math.pow(m-e,2));if(this.hasDragged>10){l=b.isInsidePlot(n-h,m-i);if(b.hasCartesianSeries&&(this.zoomX||this.zoomY)&&l&&!o&&!this.selectionMarker)this.selectionMarker=b.renderer.rect(h,i,
f?1:j,g?1:k,0).attr({fill:c.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add();this.selectionMarker&&f&&(d-=n,this.selectionMarker.attr({width:Q(d),x:(d>0?0:d)+n}));this.selectionMarker&&g&&(d=e-m,this.selectionMarker.attr({height:Q(d),y:(d>0?0:d)+m}));l&&!this.selectionMarker&&c.panning&&b.pan(a,c.panning)}},drop:function(a){var b=this.chart,c=this.hasPinched;if(this.selectionMarker){var d={xAxis:[],yAxis:[],originalEvent:a.originalEvent||a},e=this.selectionMarker,f=e.attr?e.attr("x"):
e.x,g=e.attr?e.attr("y"):e.y,h=e.attr?e.attr("width"):e.width,i=e.attr?e.attr("height"):e.height,j;if(this.hasDragged||c)q(b.axes,function(b){if(b.zoomEnabled){var c=b.horiz,e=a.type==="touchend"?b.minPixelPadding:0,m=b.toValue((c?f:g)+e),c=b.toValue((c?f+h:g+i)-e);!isNaN(m)&&!isNaN(c)&&(d[b.coll].push({axis:b,min:L(m,c),max:t(m,c)}),j=!0)}}),j&&I(b,"selection",d,function(a){b.zoom(r(a,c?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy();c&&this.scaleGroups()}if(b)B(b.container,
{cursor:b._cursor}),b.cancelClick=this.hasDragged>10,b.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[]},onContainerMouseDown:function(a){a=this.normalize(a);a.preventDefault&&a.preventDefault();this.dragStart(a)},onDocumentMouseUp:function(a){W[pa]&&W[pa].pointer.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition,d=b.hoverSeries,a=this.normalize(a,c);c&&d&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&
this.reset()},onContainerMouseLeave:function(){var a=W[pa];if(a)a.pointer.reset(),a.pointer.chartPosition=null},onContainerMouseMove:function(a){var b=this.chart;pa=b.index;a=this.normalize(a);a.returnValue=!1;b.mouseIsDown==="mousedown"&&this.drag(a);(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)},inClass:function(a,b){for(var c;a;){if(c=F(a,"class"))if(c.indexOf(b)!==-1)return!0;else if(c.indexOf("highcharts-container")!==
-1)return!1;a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,c=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;if(b&&!b.options.stickyTracking&&!this.inClass(a,"highcharts-tooltip")&&c!==b)b.onMouseOut()},onContainerClick:function(a){var b=this.chart,c=b.hoverPoint,d=b.plotLeft,e=b.plotTop,a=this.normalize(a);a.cancelBubble=!0;b.cancelClick||(c&&this.inClass(a.target,"highcharts-tracker")?(I(c.series,"click",r(a,{point:c})),b.hoverPoint&&c.firePointEvent("click",
a)):(r(a,this.getCoordinates(a)),b.isInsidePlot(a.chartX-d,a.chartY-e)&&I(b,"click",a)))},setDOMEvents:function(){var a=this,b=a.chart.container;b.onmousedown=function(b){a.onContainerMouseDown(b)};b.onmousemove=function(b){a.onContainerMouseMove(b)};b.onclick=function(b){a.onContainerClick(b)};N(b,"mouseleave",a.onContainerMouseLeave);ab===1&&N(x,"mouseup",a.onDocumentMouseUp);if($a)b.ontouchstart=function(b){a.onContainerTouchStart(b)},b.ontouchmove=function(b){a.onContainerTouchMove(b)},ab===1&&
N(x,"touchend",a.onDocumentTouchEnd)},destroy:function(){var a;X(this.chart.container,"mouseleave",this.onContainerMouseLeave);ab||(X(x,"mouseup",this.onDocumentMouseUp),X(x,"touchend",this.onDocumentTouchEnd));clearInterval(this.tooltipTimeout);for(a in this)this[a]=null}};r(K.Pointer.prototype,{pinchTranslate:function(a,b,c,d,e,f){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,a,b,c,d,e,f);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,a,b,c,d,e,f)},pinchTranslateDirection:function(a,
b,c,d,e,f,g,h){var i=this.chart,j=a?"x":"y",k=a?"X":"Y",l="chart"+k,n=a?"width":"height",m=i["plot"+(a?"Left":"Top")],o,p,q=h||1,r=i.inverted,C=i.bounds[a?"h":"v"],t=b.length===1,s=b[0][l],v=c[0][l],u=!t&&b[1][l],w=!t&&c[1][l],x,c=function(){!t&&Q(s-u)>20&&(q=h||Q(v-w)/Q(s-u));p=(m-v)/q+s;o=i["plot"+(a?"Width":"Height")]/q};c();b=p;b<C.min?(b=C.min,x=!0):b+o>C.max&&(b=C.max-o,x=!0);x?(v-=0.8*(v-g[j][0]),t||(w-=0.8*(w-g[j][1])),c()):g[j]=[v,w];r||(f[j]=p-m,f[n]=o);f=r?1/q:q;e[n]=o;e[j]=b;d[r?a?"scaleY":
"scaleX":"scale"+k]=q;d["translate"+k]=f*m+(v-f*s)},pinch:function(a){var b=this,c=b.chart,d=b.pinchDown,e=b.followTouchMove,f=a.touches,g=f.length,h=b.lastValidTouch,i=b.hasZoom,j=b.selectionMarker,k={},l=g===1&&(b.inClass(a.target,"highcharts-tracker")&&c.runTrackerClick||b.runChartClick),n={};(i||e)&&!l&&a.preventDefault();Va(f,function(a){return b.normalize(a)});if(a.type==="touchstart")q(f,function(a,b){d[b]={chartX:a.chartX,chartY:a.chartY}}),h.x=[d[0].chartX,d[1]&&d[1].chartX],h.y=[d[0].chartY,
d[1]&&d[1].chartY],q(c.axes,function(a){if(a.zoomEnabled){var b=c.bounds[a.horiz?"h":"v"],d=a.minPixelPadding,e=a.toPixels(p(a.options.min,a.dataMin)),f=a.toPixels(p(a.options.max,a.dataMax)),g=L(e,f),e=t(e,f);b.min=L(a.pos,g-d);b.max=t(a.pos+a.len,e+d)}}),b.res=!0;else if(d.length){if(!j)b.selectionMarker=j=r({destroy:sa},c.plotBox);b.pinchTranslate(d,f,k,j,n,h);b.hasPinched=i;b.scaleGroups(k,n);if(!i&&e&&g===1)this.runPointActions(b.normalize(a));else if(b.res)b.res=!1,this.reset(!1,0)}},onContainerTouchStart:function(a){var b=
this.chart;pa=b.index;a.touches.length===1?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),this.pinch(a)):this.reset()):a.touches.length===2&&this.pinch(a)},onContainerTouchMove:function(a){(a.touches.length===1||a.touches.length===2)&&this.pinch(a)},onDocumentTouchEnd:function(a){W[pa]&&W[pa].pointer.drop(a)}});if(G.PointerEvent||G.MSPointerEvent){var ua={},zb=!!G.PointerEvent,Xb=function(){var a,b=[];b.item=function(a){return this[a]};for(a in ua)ua.hasOwnProperty(a)&&
b.push({pageX:ua[a].pageX,pageY:ua[a].pageY,target:ua[a].target});return b},Ab=function(a,b,c,d){a=a.originalEvent||a;if((a.pointerType==="touch"||a.pointerType===a.MSPOINTER_TYPE_TOUCH)&&W[pa])d(a),d=W[pa].pointer,d[b]({type:c,target:a.currentTarget,preventDefault:sa,touches:Xb()})};r(Wa.prototype,{onContainerPointerDown:function(a){Ab(a,"onContainerTouchStart","touchstart",function(a){ua[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}})},onContainerPointerMove:function(a){Ab(a,
"onContainerTouchMove","touchmove",function(a){ua[a.pointerId]={pageX:a.pageX,pageY:a.pageY};if(!ua[a.pointerId].target)ua[a.pointerId].target=a.currentTarget})},onDocumentPointerUp:function(a){Ab(a,"onContainerTouchEnd","touchend",function(a){delete ua[a.pointerId]})},batchMSEvents:function(a){a(this.chart.container,zb?"pointerdown":"MSPointerDown",this.onContainerPointerDown);a(this.chart.container,zb?"pointermove":"MSPointerMove",this.onContainerPointerMove);a(x,zb?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});
Na(Wa.prototype,"init",function(a,b,c){a.call(this,b,c);(this.hasZoom||this.followTouchMove)&&B(b.container,{"-ms-touch-action":P,"touch-action":P})});Na(Wa.prototype,"setDOMEvents",function(a){a.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(N)});Na(Wa.prototype,"destroy",function(a){this.batchMSEvents(X);a.call(this)})}var lb=K.Legend=function(a,b){this.init(a,b)};lb.prototype={init:function(a,b){var c=this,d=b.itemStyle,e=p(b.padding,8),f=b.itemMarginTop||0;this.options=b;
if(b.enabled)c.itemStyle=d,c.itemHiddenStyle=w(d,b.itemHiddenStyle),c.itemMarginTop=f,c.padding=e,c.initialItemX=e,c.initialItemY=e-5,c.maxItemWidth=0,c.chart=a,c.itemHeight=0,c.lastLineHeight=0,c.symbolWidth=p(b.symbolWidth,16),c.pages=[],c.render(),N(c.chart,"endResize",function(){c.positionCheckboxes()})},colorizeItem:function(a,b){var c=this.options,d=a.legendItem,e=a.legendLine,f=a.legendSymbol,g=this.itemHiddenStyle.color,c=b?c.itemStyle.color:g,h=b?a.legendColor||a.color||"#CCC":g,g=a.options&&
a.options.marker,i={fill:h},j;d&&d.css({fill:c,color:c});e&&e.attr({stroke:h});if(f){if(g&&f.isMarker)for(j in i.stroke=h,g=a.convertAttribs(g),g)d=g[j],d!==u&&(i[j]=d);f.attr(i)}},positionItem:function(a){var b=this.options,c=b.symbolPadding,b=!b.rtl,d=a._legendItemPos,e=d[0],d=d[1],f=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?e:this.legendWidth-e-2*c-4,d);if(f)f.x=e,f.y=d},destroyItem:function(a){var b=a.checkbox;q(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&
(a[b]=a[b].destroy())});b&&Qa(a.checkbox)},destroy:function(){var a=this.group,b=this.box;if(b)this.box=b.destroy();if(a)this.group=a.destroy()},positionCheckboxes:function(a){var b=this.group.alignAttr,c,d=this.clipHeight||this.legendHeight;if(b)c=b.translateY,q(this.allItems,function(e){var f=e.checkbox,g;f&&(g=c+f.y+(a||0)+3,B(f,{left:b.translateX+e.checkboxOffset+f.x-20+"px",top:g+"px",display:g>c-6&&g<c+d-6?"":P}))})},renderTitle:function(){var a=this.padding,b=this.options.title,c=0;if(b.text){if(!this.title)this.title=
this.chart.renderer.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group);a=this.title.getBBox();c=a.height;this.offsetWidth=a.width;this.contentGroup.attr({translateY:c})}this.titleHeight=c},renderItem:function(a){var b=this.chart,c=b.renderer,d=this.options,e=d.layout==="horizontal",f=this.symbolWidth,g=d.symbolPadding,h=this.itemStyle,i=this.itemHiddenStyle,j=this.padding,k=e?p(d.itemDistance,20):0,l=!d.rtl,n=d.width,m=d.itemMarginBottom||0,
o=this.itemMarginTop,q=this.initialItemX,r=a.legendItem,s=a.series&&a.series.drawLegendSymbol?a.series:a,C=s.options,C=this.createCheckboxForItem&&C&&C.showCheckbox,u=d.useHTML;if(!r){a.legendGroup=c.g("legend-item").attr({zIndex:1}).add(this.scrollGroup);a.legendItem=r=c.text(d.labelFormat?Ja(d.labelFormat,a):d.labelFormatter.call(a),l?f+g:-g,this.baseline||0,u).css(w(a.visible?h:i)).attr({align:l?"left":"right",zIndex:2}).add(a.legendGroup);if(!this.baseline)this.baseline=c.fontMetrics(h.fontSize,
r).f+3+o,r.attr("y",this.baseline);s.drawLegendSymbol(this,a);this.setItemEvents&&this.setItemEvents(a,r,u,h,i);this.colorizeItem(a,a.visible);C&&this.createCheckboxForItem(a)}c=r.getBBox();f=a.checkboxOffset=d.itemWidth||a.legendItemWidth||f+g+c.width+k+(C?20:0);this.itemHeight=g=v(a.legendItemHeight||c.height);if(e&&this.itemX-q+f>(n||b.chartWidth-2*j-q-d.x))this.itemX=q,this.itemY+=o+this.lastLineHeight+m,this.lastLineHeight=0;this.maxItemWidth=t(this.maxItemWidth,f);this.lastItemY=o+this.itemY+
m;this.lastLineHeight=t(g,this.lastLineHeight);a._legendItemPos=[this.itemX,this.itemY];e?this.itemX+=f:(this.itemY+=o+g+m,this.lastLineHeight=g);this.offsetWidth=n||t((e?this.itemX-q-k:f)+j,this.offsetWidth)},getAllItems:function(){var a=[];q(this.chart.series,function(b){var c=b.options;if(p(c.showInLegend,!s(c.linkedTo)?u:!1,!0))a=a.concat(b.legendItems||(c.legendType==="point"?b.data:b))});return a},render:function(){var a=this,b=a.chart,c=b.renderer,d=a.group,e,f,g,h,i=a.box,j=a.options,k=a.padding,
l=j.borderWidth,n=j.backgroundColor;a.itemX=a.initialItemX;a.itemY=a.initialItemY;a.offsetWidth=0;a.lastItemY=0;if(!d)a.group=d=c.g("legend").attr({zIndex:7}).add(),a.contentGroup=c.g().attr({zIndex:1}).add(d),a.scrollGroup=c.g().add(a.contentGroup);a.renderTitle();e=a.getAllItems();ob(e,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)});j.reversed&&e.reverse();a.allItems=e;a.display=f=!!e.length;q(e,function(b){a.renderItem(b)});g=j.width||a.offsetWidth;
h=a.lastItemY+a.lastLineHeight+a.titleHeight;h=a.handleOverflow(h);if(l||n){g+=k;h+=k;if(i){if(g>0&&h>0)i[i.isNew?"attr":"animate"](i.crisp({width:g,height:h})),i.isNew=!1}else a.box=i=c.rect(0,0,g,h,j.borderRadius,l||0).attr({stroke:j.borderColor,"stroke-width":l||0,fill:n||P}).add(d).shadow(j.shadow),i.isNew=!0;i[f?"show":"hide"]()}a.legendWidth=g;a.legendHeight=h;q(e,function(b){a.positionItem(b)});f&&d.align(r({width:g,height:h},j),!0,"spacingBox");b.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b=
this,c=this.chart,d=c.renderer,e=this.options,f=e.y,f=c.spacingBox.height+(e.verticalAlign==="top"?-f:f)-this.padding,g=e.maxHeight,h,i=this.clipRect,j=e.navigation,k=p(j.animation,!0),l=j.arrowSize||12,n=this.nav,m=this.pages,o,r=this.allItems;e.layout==="horizontal"&&(f/=2);g&&(f=L(f,g));m.length=0;if(a>f&&!e.useHTML){this.clipHeight=h=t(f-20-this.titleHeight-this.padding,0);this.currentPage=p(this.currentPage,1);this.fullHeight=a;q(r,function(a,b){var c=a._legendItemPos[1],d=v(a.legendItem.getBBox().height),
e=m.length;if(!e||c-m[e-1]>h&&(o||c)!==m[e-1])m.push(o||c),e++;b===r.length-1&&c+d-m[e-1]>h&&m.push(c);c!==o&&(o=c)});if(!i)i=b.clipRect=d.clipRect(0,this.padding,9999,0),b.contentGroup.clip(i);i.attr({height:h});if(!n)this.nav=n=d.g().attr({zIndex:1}).add(this.group),this.up=d.symbol("triangle",0,0,l,l).on("click",function(){b.scroll(-1,k)}).add(n),this.pager=d.text("",15,10).css(j.style).add(n),this.down=d.symbol("triangle-down",0,0,l,l).on("click",function(){b.scroll(1,k)}).add(n);b.scroll(0);
a=f}else if(n)i.attr({height:c.chartHeight}),n.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0;return a},scroll:function(a,b){var c=this.pages,d=c.length,e=this.currentPage+a,f=this.clipHeight,g=this.options.navigation,h=g.activeColor,g=g.inactiveColor,i=this.pager,j=this.padding;e>d&&(e=d);if(e>0)b!==u&&Ra(b,this.chart),this.nav.attr({translateX:j,translateY:f+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:e===1?g:h}).css({cursor:e===1?"default":"pointer"}),
i.attr({text:e+"/"+d}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?g:h}).css({cursor:e===d?"default":"pointer"}),c=-c[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),this.currentPage=e,this.positionCheckboxes(c)}};M=K.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-c/2,a.symbolWidth,c,a.options.symbolRadius||0).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b=
this.options,c=b.marker,d;d=a.symbolWidth;var e=this.chart.renderer,f=this.legendGroup,a=a.baseline-v(e.fontMetrics(a.options.itemStyle.fontSize,this.legendItem).b*0.3),g;if(b.lineWidth){g={"stroke-width":b.lineWidth};if(b.dashStyle)g.dashstyle=b.dashStyle;this.legendLine=e.path(["M",0,a,"L",d,a]).attr(g).add(f)}if(c&&c.enabled!==!1)b=c.radius,this.legendSymbol=d=e.symbol(this.symbol,d/2-b,a-b,2*b,2*b).add(f),d.isMarker=!0}};(/Trident\/7\.0/.test(wa)||Ua)&&Na(lb.prototype,"positionItem",function(a,
b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};d();setTimeout(d)});Ya.prototype={init:function(a,b){var c,d=a.series;a.series=null;c=w(E,a);c.series=a.series=d;this.userOptions=a;d=c.chart;this.margin=this.splashArray("margin",d);this.spacing=this.splashArray("spacing",d);var e=d.events;this.bounds={h:{},v:{}};this.callback=b;this.isResizing=0;this.options=c;this.axes=[];this.series=[];this.hasCartesianSeries=d.showAxes;var f=this,g;f.index=W.length;W.push(f);ab++;d.reflow!==!1&&N(f,"load",
function(){f.initReflow()});if(e)for(g in e)N(f,g,e[g]);f.xAxis=[];f.yAxis=[];f.animation=ga?!1:p(d.animation,!0);f.pointCount=f.colorCounter=f.symbolCounter=0;f.firstRender()},initSeries:function(a){var b=this.options.chart;(b=H[a.type||b.type||b.defaultSeriesType])||ha(17,!0);b=new b;b.init(this,a);return b},isInsidePlot:function(a,b,c){var d=c?b:a,a=c?a:b;return d>=0&&d<=this.plotWidth&&a>=0&&a<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&q(this.axes,function(a){a.adjustTickAmount()});
this.maxTicks=null},redraw:function(a){var b=this.axes,c=this.series,d=this.pointer,e=this.legend,f=this.isDirtyLegend,g,h,i=this.hasCartesianSeries,j=this.isDirtyBox,k=c.length,l=k,n=this.renderer,m=n.isHidden(),o=[];Ra(a,this);m&&this.cloneRenderTo();for(this.layOutTitles();l--;)if(a=c[l],a.options.stacking&&(g=!0,a.isDirty)){h=!0;break}if(h)for(l=k;l--;)if(a=c[l],a.options.stacking)a.isDirty=!0;q(c,function(a){a.isDirty&&a.options.legendType==="point"&&(f=!0)});if(f&&e.options.enabled)e.render(),
this.isDirtyLegend=!1;g&&this.getStacks();if(i){if(!this.isResizing)this.maxTicks=null,q(b,function(a){a.setScale()});this.adjustTickAmounts()}this.getMargins();i&&(q(b,function(a){a.isDirty&&(j=!0)}),q(b,function(a){if(a.isDirtyExtremes)a.isDirtyExtremes=!1,o.push(function(){I(a,"afterSetExtremes",r(a.eventArgs,a.getExtremes()));delete a.eventArgs});(j||g)&&a.redraw()}));j&&this.drawChartBox();q(c,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()});d&&d.reset(!0);n.draw();I(this,
"redraw");m&&this.cloneRenderTo(!0);q(o,function(a){a.call()})},get:function(a){var b=this.axes,c=this.series,d,e;for(d=0;d<b.length;d++)if(b[d].options.id===a)return b[d];for(d=0;d<c.length;d++)if(c[d].options.id===a)return c[d];for(d=0;d<c.length;d++){e=c[d].points||[];for(b=0;b<e.length;b++)if(e[b].id===a)return e[b]}return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis=ra(b.xAxis||{}),b=b.yAxis=ra(b.yAxis||{});q(c,function(a,b){a.index=b;a.isX=!0});q(b,function(a,b){a.index=b});
c=c.concat(b);q(c,function(b){new na(a,b)});a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];q(this.series,function(b){a=a.concat(wb(b.points||[],function(a){return a.selected}))});return a},getSelectedSeries:function(){return wb(this.series,function(a){return a.selected})},getStacks:function(){var a=this;q(a.yAxis,function(a){if(a.stacks&&a.hasVisibleSeries)a.oldStacks=a.stacks});q(a.series,function(b){if(b.options.stacking&&(b.visible===!0||a.options.chart.ignoreHiddenSeries===!1))b.stackKey=
b.type+p(b.options.stack,"")})},setTitle:function(a,b,c){var g;var d=this,e=d.options,f;f=e.title=w(e.title,a);g=e.subtitle=w(e.subtitle,b),e=g;q([["title",a,f],["subtitle",b,e]],function(a){var b=a[0],c=d[b],e=a[1],a=a[2];c&&e&&(d[b]=c=c.destroy());a&&a.text&&!c&&(d[b]=d.renderer.text(a.text,0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())});d.layOutTitles(c)},layOutTitles:function(a){var b=0,c=this.title,d=this.subtitle,e=this.options,f=e.title,
e=e.subtitle,g=this.renderer,h=this.spacingBox.width-44;if(c&&(c.css({width:(f.width||h)+"px"}).align(r({y:g.fontMetrics(f.style.fontSize,c).b-3},f),!1,"spacingBox"),!f.floating&&!f.verticalAlign))b=c.getBBox().height;d&&(d.css({width:(e.width||h)+"px"}).align(r({y:b+(f.margin-13)+g.fontMetrics(f.style.fontSize,d).b},e),!1,"spacingBox"),!e.floating&&!e.verticalAlign&&(b=La(b+d.getBBox().height)));c=this.titleOffset!==b;this.titleOffset=b;if(!this.isDirtyBox&&c)this.isDirtyBox=c,this.hasRendered&&
p(a,!0)&&this.isDirtyBox&&this.redraw()},getChartSize:function(){var a=this.options.chart,b=a.width,a=a.height,c=this.renderToClone||this.renderTo;if(!s(b))this.containerWidth=ib(c,"width");if(!s(a))this.containerHeight=ib(c,"height");this.chartWidth=t(0,b||this.containerWidth||600);this.chartHeight=t(0,p(a,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,c=this.container;a?b&&(this.renderTo.appendChild(c),Qa(b),delete this.renderToClone):(c&&
c.parentNode===this.renderTo&&this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),B(b,{position:"absolute",top:"-9999px",display:"block"}),b.style.setProperty&&b.style.setProperty("display","block","important"),x.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var a,b=this.options.chart,c,d,e;this.renderTo=a=b.renderTo;e="highcharts-"+ub++;if(Ga(a))this.renderTo=a=x.getElementById(a);a||ha(13,!0);c=y(F(a,"data-highcharts-chart"));!isNaN(c)&&W[c]&&W[c].hasRendered&&
W[c].destroy();F(a,"data-highcharts-chart",this.index);a.innerHTML="";!b.skipClone&&!a.offsetWidth&&this.cloneRenderTo();this.getChartSize();c=this.chartWidth;d=this.chartHeight;this.container=a=$(Ka,{className:"highcharts-container"+(b.className?" "+b.className:""),id:e},r({position:"relative",overflow:"hidden",width:c+"px",height:d+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},b.style),this.renderToClone||a);this._cursor=a.style.cursor;this.renderer=
b.forExport?new ta(a,c,d,b.style,!0):new Za(a,c,d,b.style);ga&&this.renderer.create(this,a,c,d)},getMargins:function(){var a=this.spacing,b,c=this.legend,d=this.margin,e=this.options.legend,f=p(e.margin,20),g=e.x,h=e.y,i=e.align,j=e.verticalAlign,k=this.titleOffset;this.resetMargins();b=this.axisOffset;if(k&&!s(d[0]))this.plotTop=t(this.plotTop,k+this.options.title.margin+a[0]);if(c.display&&!e.floating)if(i==="right"){if(!s(d[1]))this.marginRight=t(this.marginRight,c.legendWidth-g+f+a[1])}else if(i===
"left"){if(!s(d[3]))this.plotLeft=t(this.plotLeft,c.legendWidth+g+f+a[3])}else if(j==="top"){if(!s(d[0]))this.plotTop=t(this.plotTop,c.legendHeight+h+f+a[0])}else if(j==="bottom"&&!s(d[2]))this.marginBottom=t(this.marginBottom,c.legendHeight-h+f+a[2]);this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&q(this.axes,function(a){a.getOffset()});s(d[3])||(this.plotLeft+=b[3]);s(d[0])||(this.plotTop+=b[0]);
s(d[2])||(this.marginBottom+=b[2]);s(d[1])||(this.marginRight+=b[1]);this.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||ib(d,"width"),f=c.height||ib(d,"height"),c=a?a.target:G,d=function(){if(b.container)b.setSize(e,f,!1),b.hasUserSize=null};if(!b.hasUserSize&&e&&f&&(c===G||c===x)){if(e!==b.containerWidth||f!==b.containerHeight)clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(d,100):d();b.containerWidth=e;b.containerHeight=f}},initReflow:function(){var a=
this,b=function(b){a.reflow(b)};N(G,"resize",b);N(a,"destroy",function(){X(G,"resize",b)})},setSize:function(a,b,c){var d=this,e,f,g;d.isResizing+=1;g=function(){d&&I(d,"endResize",null,function(){d.isResizing-=1})};Ra(c,d);d.oldChartHeight=d.chartHeight;d.oldChartWidth=d.chartWidth;if(s(a))d.chartWidth=e=t(0,v(a)),d.hasUserSize=!!e;if(s(b))d.chartHeight=f=t(0,v(b));(va?jb:B)(d.container,{width:e+"px",height:f+"px"},va);d.setChartSize(!0);d.renderer.setSize(e,f,c);d.maxTicks=null;q(d.axes,function(a){a.isDirty=
!0;a.setScale()});q(d.series,function(a){a.isDirty=!0});d.isDirtyLegend=!0;d.isDirtyBox=!0;d.layOutTitles();d.getMargins();d.redraw(c);d.oldChartHeight=null;I(d,"resize");va===!1?g():setTimeout(g,va&&va.duration||500)},setChartSize:function(a){var b=this.inverted,c=this.renderer,d=this.chartWidth,e=this.chartHeight,f=this.options.chart,g=this.spacing,h=this.clipOffset,i,j,k,l;this.plotLeft=i=v(this.plotLeft);this.plotTop=j=v(this.plotTop);this.plotWidth=k=t(0,v(d-i-this.marginRight));this.plotHeight=
l=t(0,v(e-j-this.marginBottom));this.plotSizeX=b?l:k;this.plotSizeY=b?k:l;this.plotBorderWidth=f.plotBorderWidth||0;this.spacingBox=c.spacingBox={x:g[3],y:g[0],width:d-g[3]-g[1],height:e-g[0]-g[2]};this.plotBox=c.plotBox={x:i,y:j,width:k,height:l};d=2*U(this.plotBorderWidth/2);b=La(t(d,h[3])/2);c=La(t(d,h[0])/2);this.clipBox={x:b,y:c,width:U(this.plotSizeX-t(d,h[1])/2-b),height:t(0,U(this.plotSizeY-t(d,h[2])/2-c))};a||q(this.axes,function(a){a.setAxisSize();a.setAxisTranslation()})},resetMargins:function(){var a=
this.spacing,b=this.margin;this.plotTop=p(b[0],a[0]);this.marginRight=p(b[1],a[1]);this.marginBottom=p(b[2],a[2]);this.plotLeft=p(b[3],a[3]);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var a=this.options.chart,b=this.renderer,c=this.chartWidth,d=this.chartHeight,e=this.chartBackground,f=this.plotBackground,g=this.plotBorder,h=this.plotBGImage,i=a.borderWidth||0,j=a.backgroundColor,k=a.plotBackgroundColor,l=a.plotBackgroundImage,n=a.plotBorderWidth||0,m,o=this.plotLeft,
p=this.plotTop,q=this.plotWidth,r=this.plotHeight,t=this.plotBox,s=this.clipRect,v=this.clipBox;m=i+(a.shadow?8:0);if(i||j)if(e)e.animate(e.crisp({width:c-m,height:d-m}));else{e={fill:j||P};if(i)e.stroke=a.borderColor,e["stroke-width"]=i;this.chartBackground=b.rect(m/2,m/2,c-m,d-m,a.borderRadius,i).attr(e).addClass("highcharts-background").add().shadow(a.shadow)}if(k)f?f.animate(t):this.plotBackground=b.rect(o,p,q,r,0).attr({fill:k}).add().shadow(a.plotShadow);if(l)h?h.animate(t):this.plotBGImage=
b.image(l,o,p,q,r).add();s?s.animate({width:v.width,height:v.height}):this.clipRect=b.clipRect(v);if(n)g?g.animate(g.crisp({x:o,y:p,width:q,height:r,strokeWidth:-n})):this.plotBorder=b.rect(o,p,q,r,0,-n).attr({stroke:a.plotBorderColor,"stroke-width":n,fill:P,zIndex:1}).add();this.isDirtyBox=!1},propFromSeries:function(){var a=this,b=a.options.chart,c,d=a.options.series,e,f;q(["inverted","angular","polar"],function(g){c=H[b.type||b.defaultSeriesType];f=a[g]||b[g]||c&&c.prototype[g];for(e=d&&d.length;!f&&
e--;)(c=H[d[e].type])&&c.prototype[g]&&(f=!0);a[g]=f})},linkSeries:function(){var a=this,b=a.series;q(b,function(a){a.linkedSeries.length=0});q(b,function(b){var d=b.options.linkedTo;if(Ga(d)&&(d=d===":previous"?a.series[b.index-1]:a.get(d)))d.linkedSeries.push(b),b.linkedParent=d})},renderSeries:function(){q(this.series,function(a){a.translate();a.setTooltipPoints&&a.setTooltipPoints();a.render()})},renderLabels:function(){var a=this,b=a.options.labels;b.items&&q(b.items,function(c){var d=r(b.style,
c.style),e=y(d.left)+a.plotLeft,f=y(d.top)+a.plotTop+12;delete d.left;delete d.top;a.renderer.text(c.html,e,f).attr({zIndex:2}).css(d).add()})},render:function(){var a=this.axes,b=this.renderer,c=this.options;this.setTitle();this.legend=new lb(this,c.legend);this.getStacks();q(a,function(a){a.setScale()});this.getMargins();this.maxTicks=null;q(a,function(a){a.setTickPositions(!0);a.setMaxTicks()});this.adjustTickAmounts();this.getMargins();this.drawChartBox();this.hasCartesianSeries&&q(a,function(a){a.render()});
if(!this.seriesGroup)this.seriesGroup=b.g("series-group").attr({zIndex:3}).add();this.renderSeries();this.renderLabels();this.showCredits(c.credits);this.hasRendered=!0},showCredits:function(a){if(a.enabled&&!this.credits)this.credits=this.renderer.text(a.text,0,0).on("click",function(){if(a.href)location.href=a.href}).attr({align:a.position.align,zIndex:8}).css(a.style).add().align(a.position)},destroy:function(){var a=this,b=a.axes,c=a.series,d=a.container,e,f=d&&d.parentNode;I(a,"destroy");W[a.index]=
u;ab--;a.renderTo.removeAttribute("data-highcharts-chart");X(a);for(e=b.length;e--;)b[e]=b[e].destroy();for(e=c.length;e--;)c[e]=c[e].destroy();q("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(b){var c=a[b];c&&c.destroy&&(a[b]=c.destroy())});if(d)d.innerHTML="",X(d),f&&Qa(d);for(e in a)delete a[e]},isReadyToRender:function(){var a=this;return!ba&&G==G.top&&
x.readyState!=="complete"||ga&&!G.canvg?(ga?Mb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):x.attachEvent("onreadystatechange",function(){x.detachEvent("onreadystatechange",a.firstRender);x.readyState==="complete"&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;if(a.isReadyToRender()){a.getContainer();I(a,"init");a.resetMargins();a.setChartSize();a.propFromSeries();a.getAxes();q(b.series||[],function(b){a.initSeries(b)});a.linkSeries();I(a,
"beforeRender");if(K.Pointer)a.pointer=new Wa(a,b);a.render();a.renderer.draw();c&&c.apply(a,[a]);q(a.callbacks,function(b){b.apply(a,[a])});a.cloneRenderTo(!0);I(a,"load")}},splashArray:function(a,b){var c=b[a],c=da(c)?c:[c,c,c,c];return[p(b[a+"Top"],c[0]),p(b[a+"Right"],c[1]),p(b[a+"Bottom"],c[2]),p(b[a+"Left"],c[3])]}};Ya.prototype.callbacks=[];Z=K.CenteredSeriesMixin={getCenter:function(){var a=this.options,b=this.chart,c=2*(a.slicedOffset||0),d,e=b.plotWidth-2*c,f=b.plotHeight-2*c,b=a.center,
a=[p(b[0],"50%"),p(b[1],"50%"),a.size||"100%",a.innerSize||0],g=L(e,f),h;return Va(a,function(a,b){h=/%$/.test(a);d=b<2||b===2&&h;return(h?[e,f,g,g][b]*y(a)/100:a)+(d?c:0)})}};var Fa=function(){};Fa.prototype={init:function(a,b,c){this.series=a;this.applyOptions(b,c);this.pointAttr={};if(a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length))a.colorCounter=0;a.chart.pointCount++;return this},applyOptions:function(a,
b){var c=this.series,d=c.options.pointValKey||c.pointValKey,a=Fa.prototype.optionsToObject.call(this,a);r(this,a);this.options=this.options?r(this.options,a):a;if(d)this.y=this[d];if(this.x===u&&c)this.x=b===u?c.autoIncrement():b;return this},optionsToObject:function(a){var b={},c=this.series,d=c.pointArrayMap||["y"],e=d.length,f=0,g=0;if(typeof a==="number"||a===null)b[d[0]]=a;else if(Ha(a)){if(a.length>e){c=typeof a[0];if(c==="string")b.name=a[0];else if(c==="number")b.x=a[0];f++}for(;g<e;)b[d[g++]]=
a[f++]}else if(typeof a==="object"){b=a;if(a.dataLabels)c._hasPointLabels=!0;if(a.marker)c._hasPointMarkers=!0}return b},destroy:function(){var a=this.series.chart,b=a.hoverPoints,c;a.pointCount--;if(b&&(this.setState(),la(b,this),!b.length))a.hoverPoints=null;if(this===a.hoverPoint)this.onMouseOut();if(this.graphic||this.dataLabel)X(this),this.destroyElements();this.legendItem&&a.legend.destroyItem(this);for(c in this)this[c]=null},destroyElements:function(){for(var a="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),
b,c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=p(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";q(b.pointArrayMap||["y"],function(b){b="{point."+b;if(e||f)a=a.replace(b+"}",e+b+"}"+f);a=a.replace(b+"}",b+":,."+d+"f}")});return Ja(a,
{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents();a==="click"&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});I(this,a,b,c)}};var O=function(){};O.prototype={isCartesian:!0,type:"line",pointClass:Fa,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis",
"yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(a,b){var c=this,d,e,f=a.series,g=function(a,b){return p(a.options.index,a._i)-p(b.options.index,b._i)};c.chart=a;c.options=b=c.setOptions(b);c.linkedSeries=[];c.bindAxes();r(c,{name:b.name,state:"",pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0});if(ga)b.animation=!1;e=b.events;for(d in e)N(c,d,e[d]);if(e&&e.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)a.runTrackerClick=!0;c.getColor();c.getSymbol();
q(c.parallelArrays,function(a){c[a+"Data"]=[]});c.setData(b.data,!1);if(c.isCartesian)a.hasCartesianSeries=!0;f.push(c);c._i=f.length-1;ob(f,g);this.yAxis&&ob(this.yAxis.series,g);q(f,function(a,b){a.index=b;a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var a=this,b=a.options,c=a.chart,d;q(a.axisTypes||[],function(e){q(c[e],function(c){d=c.options;if(b[e]===d.index||b[e]!==u&&b[e]===d.id||b[e]===u&&d.index===0)c.series.push(a),a[e]=c,c.isDirty=!0});!a[e]&&a.optionalAxis!==e&&ha(18,!0)})},
updateParallelArrays:function(a,b){var c=a.series,d=arguments;q(c.parallelArrays,typeof b==="number"?function(d){var f=d==="y"&&c.toYData?c.toYData(a):a[d];c[d+"Data"][b]=f}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=p(b,a.pointStart,0);this.pointInterval=p(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},getSegments:function(){var a=-1,b=[],c,d=this.points,
e=d.length;if(e)if(this.options.connectNulls){for(c=e;c--;)d[c].y===null&&d.splice(c,1);d.length&&(b=[d])}else q(d,function(c,g){c.y===null?(g>a+1&&b.push(d.slice(a+1,g)),a=g):g===e-1&&b.push(d.slice(a+1,g+1))});this.segments=b},setOptions:function(a){var b=this.chart,c=b.options.plotOptions,b=b.userOptions||{},d=b.plotOptions||{},e=c[this.type];this.userOptions=a;c=w(e,c.series,a);this.tooltipOptions=w(E.tooltip,E.plotOptions[this.type].tooltip,b.tooltip,d.series&&d.series.tooltip,d[this.type]&&
d[this.type].tooltip,a.tooltip);e.marker===null&&delete c.marker;return c},getCyclic:function(a,b,c){var d=this.userOptions,e="_"+a+"Index",f=a+"Counter";b||(s(d[e])?b=d[e]:(d[e]=b=this.chart[f]%c.length,this.chart[f]+=1),b=c[b]);this[a]=b},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||ca[this.type].color,this.chart.options.colors)},getSymbol:function(){var a=this.options.marker;this.getCyclic("symbol",a.symbol,this.chart.options.symbols);if(/^url/.test(this.symbol))a.radius=
0},drawLegendSymbol:M.drawLineMarker,setData:function(a,b,c,d){var e=this,f=e.points,g=f&&f.length||0,h,i=e.options,j=e.chart,k=null,l=e.xAxis,n=l&&!!l.categories,m=e.tooltipPoints,o=i.turboThreshold,r=this.xData,t=this.yData,s=(h=e.pointArrayMap)&&h.length,a=a||[];h=a.length;b=p(b,!0);if(d!==!1&&h&&g===h&&!e.cropped&&!e.hasGroupedData)q(a,function(a,b){f[b].update(a,!1,null,!1)});else{e.xIncrement=null;e.pointRange=n?1:i.pointRange;e.colorCounter=0;q(this.parallelArrays,function(a){e[a+"Data"].length=
0});if(o&&h>o){for(c=0;k===null&&c<h;)k=a[c],c++;if(ja(k)){n=p(i.pointStart,0);i=p(i.pointInterval,1);for(c=0;c<h;c++)r[c]=n,t[c]=a[c],n+=i;e.xIncrement=n}else if(Ha(k))if(s)for(c=0;c<h;c++)i=a[c],r[c]=i[0],t[c]=i.slice(1,s+1);else for(c=0;c<h;c++)i=a[c],r[c]=i[0],t[c]=i[1];else ha(12)}else for(c=0;c<h;c++)if(a[c]!==u&&(i={series:e},e.pointClass.prototype.applyOptions.apply(i,[a[c]]),e.updateParallelArrays(i,c),n&&i.name))l.names[i.x]=i.name;Ga(t[0])&&ha(14,!0);e.data=[];e.options.data=a;for(c=g;c--;)f[c]&&
f[c].destroy&&f[c].destroy();if(m)m.length=0;if(l)l.minRange=l.userMinRange;e.isDirty=e.isDirtyData=j.isDirtyBox=!0;c=!1}b&&j.redraw(c)},processData:function(a){var b=this.xData,c=this.yData,d=b.length,e;e=0;var f,g,h=this.xAxis,i,j=this.options;i=j.cropThreshold;var k=0,l=this.isCartesian,n,m;if(l&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!a)return!1;if(h)n=h.getExtremes(),m=n.min,n=n.max;if(l&&this.sorted&&(!i||d>i||this.forceCrop))if(b[d-1]<m||b[0]>n)b=[],c=[];else if(b[0]<m||b[d-1]>n)e=
this.cropData(this.xData,this.yData,m,n),b=e.xData,c=e.yData,e=e.start,f=!0,k=b.length;for(i=b.length-1;i>=0;i--)d=b[i]-b[i-1],!f&&b[i]>m&&b[i]<n&&k++,d>0&&(g===u||d<g)?g=d:d<0&&this.requireSorting&&ha(15);this.cropped=f;this.cropStart=e;this.processedXData=b;this.processedYData=c;this.activePointCount=k;if(j.pointRange===null)this.pointRange=g||1;this.closestPointRange=g},cropData:function(a,b,c,d){var e=a.length,f=0,g=e,h=p(this.cropShoulder,1),i;for(i=0;i<e;i++)if(a[i]>=c){f=t(0,i-h);break}for(;i<
e;i++)if(a[i]>d){g=i+h;break}return{xData:a.slice(f,g),yData:b.slice(f,g),start:f,end:g}},generatePoints:function(){var a=this.options.data,b=this.data,c,d=this.processedXData,e=this.processedYData,f=this.pointClass,g=d.length,h=this.cropStart||0,i,j=this.hasGroupedData,k,l=[],n;if(!b&&!j)b=[],b.length=a.length,b=this.data=b;for(n=0;n<g;n++)i=h+n,j?l[n]=(new f).init(this,[d[n]].concat(ra(e[n]))):(b[i]?k=b[i]:a[i]!==u&&(b[i]=k=(new f).init(this,a[i],d[n])),l[n]=k),l[n].index=i;if(b&&(g!==(c=b.length)||
j))for(n=0;n<c;n++)if(n===h&&!j&&(n+=g),b[n])b[n].destroyElements(),b[n].plotX=u;this.data=b;this.points=l},getExtremes:function(a){var b=this.yAxis,c=this.processedXData,d,e=[],f=0;d=this.xAxis.getExtremes();var g=d.min,h=d.max,i,j,k,l,a=a||this.stackedYData||this.processedYData;d=a.length;for(l=0;l<d;l++)if(j=c[l],k=a[l],i=k!==null&&k!==u&&(!b.isLog||k.length||k>0),j=this.getExtremesFromAll||this.cropped||(c[l+1]||j)>=g&&(c[l-1]||j)<=h,i&&j)if(i=k.length)for(;i--;)k[i]!==null&&(e[f++]=k[i]);else e[f++]=
k;this.dataMin=p(void 0,Oa(e));this.dataMax=p(void 0,Ca(e))},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var a=this.options,b=a.stacking,c=this.xAxis,d=c.categories,e=this.yAxis,f=this.points,g=f.length,h=!!this.modifyValue,i=a.pointPlacement,j=i==="between"||ja(i),k=a.threshold,a=0;a<g;a++){var l=f[a],n=l.x,m=l.y,o=l.low,q=b&&e.stacks[(this.negStacks&&m<k?"-":"")+this.stackKey];if(e.isLog&&m<=0)l.y=m=null,ha(10);l.plotX=c.translate(n,0,0,0,1,i,this.type===
"flags");if(b&&this.visible&&q&&q[n])q=q[n],m=q.points[this.index+","+a],o=m[0],m=m[1],o===0&&(o=p(k,e.min)),e.isLog&&o<=0&&(o=null),l.total=l.stackTotal=q.total,l.percentage=q.total&&l.y/q.total*100,l.stackY=m,q.setOffset(this.pointXOffset||0,this.barW||0);l.yBottom=s(o)?e.translate(o,0,1,0,1):null;h&&(m=this.modifyValue(m,l));l.plotY=typeof m==="number"&&m!==Infinity?e.translate(m,0,1,0,1):u;l.clientX=j?c.translate(n,0,0,0,1):l.plotX;l.negative=l.y<(k||0);l.category=d&&d[l.x]!==u?d[l.x]:l.x}this.getSegments()},
animate:function(a){var b=this.chart,c=b.renderer,d;d=this.options.animation;var e=this.clipBox||b.clipBox,f=b.inverted,g;if(d&&!da(d))d=ca[this.type].animation;g=["_sharedClip",d.duration,d.easing,e.height].join(",");a?(a=b[g],d=b[g+"m"],a||(b[g]=a=c.clipRect(r(e,{width:0})),b[g+"m"]=d=c.clipRect(-99,f?-b.plotLeft:-b.plotTop,99,f?b.chartWidth:b.chartHeight)),this.group.clip(a),this.markerGroup.clip(d),this.sharedClipKey=g):((a=b[g])&&a.animate({width:b.plotSizeX},d),b[g+"m"]&&b[g+"m"].animate({width:b.plotSizeX+
99},d),this.animate=null)},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,c=this.group,d=this.clipBox;if(c&&this.options.clip!==!1){if(!b||!d)c.clip(d?a.renderer.clipRect(d):a.clipRect);this.markerGroup.clip()}I(this,"afterAnimate");setTimeout(function(){b&&a[b]&&(d||(a[b]=a[b].destroy()),a[b+"m"]&&(a[b+"m"]=a[b+"m"].destroy()))},100)},drawPoints:function(){var a,b=this.points,c=this.chart,d,e,f,g,h,i,j,k,l=this.options.marker,n=this.pointAttr[""],m,o,q,t=this.markerGroup,s=p(l.enabled,
!this.requireSorting||this.activePointCount<0.5*this.xAxis.len/l.radius);if(l.enabled!==!1||this._hasPointMarkers)for(f=b.length;f--;)if(g=b[f],d=U(g.plotX),e=g.plotY,k=g.graphic,m=g.marker||{},o=!!g.marker,a=s&&m.enabled===u||m.enabled,q=c.isInsidePlot(v(d),e,c.inverted),a&&e!==u&&!isNaN(e)&&g.y!==null)if(a=g.pointAttr[g.selected?"select":""]||n,h=a.r,i=p(m.symbol,this.symbol),j=i.indexOf("url")===0,k)k[q?"show":"hide"](!0).animate(r({x:d-h,y:e-h},k.symbolName?{width:2*h,height:2*h}:{}));else{if(q&&
(h>0||j))g.graphic=c.renderer.symbol(i,d-h,e-h,2*h,2*h,o?m:l).attr(a).add(t)}else if(k)g.graphic=k.destroy()},convertAttribs:function(a,b,c,d){var e=this.pointAttrToOptions,f,g,h={},a=a||{},b=b||{},c=c||{},d=d||{};for(f in e)g=e[f],h[f]=p(a[g],b[f],c[f],d[f]);return h},getAttribs:function(){var a=this,b=a.options,c=ca[a.type].marker?b.marker:b,d=c.states,e=d.hover,f,g=a.color;f={stroke:g,fill:g};var h=a.points||[],i,j=[],k,l=a.pointAttrToOptions;k=a.hasPointSpecificOptions;var n=b.negativeColor,m=
c.lineColor,o=c.fillColor;i=b.turboThreshold;var p;b.marker?(e.radius=e.radius||c.radius+e.radiusPlus,e.lineWidth=e.lineWidth||c.lineWidth+e.lineWidthPlus):e.color=e.color||ya(e.color||g).brighten(e.brightness).get();j[""]=a.convertAttribs(c,f);q(["hover","select"],function(b){j[b]=a.convertAttribs(d[b],j[""])});a.pointAttr=j;g=h.length;if(!i||g<i||k)for(;g--;){i=h[g];if((c=i.options&&i.options.marker||i.options)&&c.enabled===!1)c.radius=0;if(i.negative&&n)i.color=i.fillColor=n;k=b.colorByPoint||
i.color;if(i.options)for(p in l)s(c[l[p]])&&(k=!0);if(k){c=c||{};k=[];d=c.states||{};f=d.hover=d.hover||{};if(!b.marker)f.color=f.color||!i.options.color&&e.color||ya(i.color).brighten(f.brightness||e.brightness).get();f={color:i.color};if(!o)f.fillColor=i.color;if(!m)f.lineColor=i.color;k[""]=a.convertAttribs(r(f,c),j[""]);k.hover=a.convertAttribs(d.hover,j.hover,k[""]);k.select=a.convertAttribs(d.select,j.select,k[""])}else k=j;i.pointAttr=k}},destroy:function(){var a=this,b=a.chart,c=/AppleWebKit\/533/.test(wa),
d,e,f=a.data||[],g,h,i;I(a,"destroy");X(a);q(a.axisTypes||[],function(b){if(i=a[b])la(i.series,a),i.isDirty=i.forceRedraw=!0});a.legendItem&&a.chart.legend.destroyItem(a);for(e=f.length;e--;)(g=f[e])&&g.destroy&&g.destroy();a.points=null;clearTimeout(a.animationTimeout);q("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(b){a[b]&&(d=c&&b==="group"?"hide":"destroy",a[b][d]())});if(b.hoverSeries===a)b.hoverSeries=null;la(b.series,a);for(h in a)delete a[h]},
getSegmentPath:function(a){var b=this,c=[],d=b.options.step;q(a,function(e,f){var g=e.plotX,h=e.plotY,i;b.getPointSpline?c.push.apply(c,b.getPointSpline(a,e,f)):(c.push(f?"L":"M"),d&&f&&(i=a[f-1],d==="right"?c.push(i.plotX,h):d==="center"?c.push((i.plotX+g)/2,i.plotY,(i.plotX+g)/2,h):c.push(g,i.plotY)),c.push(e.plotX,e.plotY))});return c},getGraphPath:function(){var a=this,b=[],c,d=[];q(a.segments,function(e){c=a.getSegmentPath(e);e.length>1?b=b.concat(c):d.push(e[0])});a.singlePoints=d;return a.graphPath=
b},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color]],d=b.lineWidth,e=b.dashStyle,f=b.linecap!=="square",g=this.getGraphPath(),h=b.negativeColor;h&&c.push(["graphNeg",h]);q(c,function(c,h){var k=c[0],l=a[k];if(l)bb(l),l.animate({d:g});else if(d&&g.length)l={stroke:c[1],"stroke-width":d,fill:P,zIndex:1},e?l.dashstyle=e:f&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),a[k]=a.chart.renderer.path(g).attr(l).add(a.group).shadow(!h&&b.shadow)})},clipNeg:function(){var a=
this.options,b=this.chart,c=b.renderer,d=a.negativeColor||a.negativeFillColor,e,f=this.graph,g=this.area,h=this.posClip,i=this.negClip;e=b.chartWidth;var j=b.chartHeight,k=t(e,j),l=this.yAxis;if(d&&(f||g)){d=v(l.toPixels(a.threshold||0,!0));d<0&&(k-=d);a={x:0,y:0,width:k,height:d};k={x:0,y:d,width:k,height:k};if(b.inverted)a.height=k.y=b.plotWidth-d,c.isVML&&(a={x:b.plotWidth-d-b.plotLeft,y:0,width:e,height:j},k={x:d+b.plotLeft-e,y:0,width:b.plotLeft+d,height:e});l.reversed?(b=k,e=a):(b=a,e=k);h?
(h.animate(b),i.animate(e)):(this.posClip=h=c.clipRect(b),this.negClip=i=c.clipRect(e),f&&this.graphNeg&&(f.clip(h),this.graphNeg.clip(i)),g&&(g.clip(h),this.areaNeg.clip(i)))}},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};q(["group","markerGroup"],function(c){b[c]&&b[c].attr(a).invert()})}var b=this,c=b.chart;if(b.xAxis)N(c,"resize",a),N(b,"destroy",function(){X(c,"resize",a)}),a(),b.invertGroups=a},plotGroup:function(a,b,c,d,e){var f=this[a],g=!f;g&&(this[a]=
f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||0.1}).add(e));f[g?"attr":"animate"](this.getPlotBox());return f},getPlotBox:function(){var a=this.chart,b=this.xAxis,c=this.yAxis;if(a.inverted)b=c,c=this.xAxis;return{translateX:b?b.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}},render:function(){var a=this,b=a.chart,c,d=a.options,e=(c=d.animation)&&!!a.animate&&b.renderer.isSVG&&p(c.duration,500)||0,f=a.visible?"visible":"hidden",g=d.zIndex,h=a.hasRendered,i=b.seriesGroup;
c=a.plotGroup("group","series",f,g,i);a.markerGroup=a.plotGroup("markerGroup","markers",f,g,i);e&&a.animate(!0);a.getAttribs();c.inverted=a.isCartesian?b.inverted:!1;a.drawGraph&&(a.drawGraph(),a.clipNeg());q(a.points,function(a){a.redraw&&a.redraw()});a.drawDataLabels&&a.drawDataLabels();a.visible&&a.drawPoints();a.drawTracker&&a.options.enableMouseTracking!==!1&&a.drawTracker();b.inverted&&a.invertGroups();d.clip!==!1&&!a.sharedClipKey&&!h&&c.clip(b.clipRect);e&&a.animate();if(!h)e?a.animationTimeout=
setTimeout(function(){a.afterAnimate()},e):a.afterAnimate();a.isDirty=a.isDirtyData=!1;a.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,c=this.group,d=this.xAxis,e=this.yAxis;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:p(d&&d.left,a.plotLeft),translateY:p(e&&e.top,a.plotTop)}));this.translate();this.setTooltipPoints&&this.setTooltipPoints(!0);this.render();b&&I(this,"updatedData")}};Gb.prototype={destroy:function(){Pa(this,this.axis)},
render:function(a){var b=this.options,c=b.format,c=c?Ja(c,this):b.formatter.call(this);this.label?this.label.attr({text:c,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(c,null,null,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},setOffset:function(a,b){var c=this.axis,d=c.chart,e=d.inverted,f=this.isNegative,g=c.translate(c.usePercentage?100:this.total,0,0,0,1),c=c.translate(0),c=Q(g-c),h=d.xAxis[0].translate(this.x)+a,i=d.plotHeight,
f={x:e?f?g:g-c:h,y:e?i-h-b:f?i-g-c:i-g,width:e?c:b,height:e?b:c};if(e=this.label)e.align(this.alignOptions,null,f),f=e.alignAttr,e[this.options.crop===!1||d.isInsidePlot(f.x,f.y)?"show":"hide"](!0)}};na.prototype.buildStacks=function(){var a=this.series,b=p(this.options.reversedStacks,!0),c=a.length;if(!this.isXAxis){for(this.usePercentage=!1;c--;)a[b?c:a.length-c-1].setStackedPoints();if(this.usePercentage)for(c=0;c<a.length;c++)a[c].setPercentStacks()}};na.prototype.renderStackTotals=function(){var a=
this.chart,b=a.renderer,c=this.stacks,d,e,f=this.stackTotalGroup;if(!f)this.stackTotalGroup=f=b.g("stack-labels").attr({visibility:"visible",zIndex:6}).add();f.translate(a.plotLeft,a.plotTop);for(d in c)for(e in a=c[d],a)a[e].render(f)};O.prototype.setStackedPoints=function(){if(this.options.stacking&&!(this.visible!==!0&&this.chart.options.chart.ignoreHiddenSeries!==!1)){var a=this.processedXData,b=this.processedYData,c=[],d=b.length,e=this.options,f=e.threshold,g=e.stack,e=e.stacking,h=this.stackKey,
i="-"+h,j=this.negStacks,k=this.yAxis,l=k.stacks,n=k.oldStacks,m,o,p,q,r,s;for(q=0;q<d;q++){r=a[q];s=b[q];p=this.index+","+q;o=(m=j&&s<f)?i:h;l[o]||(l[o]={});if(!l[o][r])n[o]&&n[o][r]?(l[o][r]=n[o][r],l[o][r].total=null):l[o][r]=new Gb(k,k.options.stackLabels,m,r,g);o=l[o][r];o.points[p]=[o.cum||0];e==="percent"?(m=m?h:i,j&&l[m]&&l[m][r]?(m=l[m][r],o.total=m.total=t(m.total,o.total)+Q(s)||0):o.total=ea(o.total+(Q(s)||0))):o.total=ea(o.total+(s||0));o.cum=(o.cum||0)+(s||0);o.points[p].push(o.cum);
c[q]=o.cum}if(e==="percent")k.usePercentage=!0;this.stackedYData=c;k.oldStacks={}}};O.prototype.setPercentStacks=function(){var a=this,b=a.stackKey,c=a.yAxis.stacks,d=a.processedXData;q([b,"-"+b],function(b){var e;for(var f=d.length,g,h;f--;)if(g=d[f],e=(h=c[b]&&c[b][g])&&h.points[a.index+","+f],g=e)h=h.total?100/h.total:0,g[0]=ea(g[0]*h),g[1]=ea(g[1]*h),a.stackedYData[f]=g[1]})};r(Ya.prototype,{addSeries:function(a,b,c){var d,e=this;a&&(b=p(b,!0),I(e,"addSeries",{options:a},function(){d=e.initSeries(a);
e.isDirtyLegend=!0;e.linkSeries();b&&e.redraw(c)}));return d},addAxis:function(a,b,c,d){var e=b?"xAxis":"yAxis",f=this.options;new na(this,w(a,{index:this[e].length,isX:b}));f[e]=ra(f[e]||{});f[e].push(a);p(c,!0)&&this.redraw(d)},showLoading:function(a){var b=this,c=b.options,d=b.loadingDiv,e=c.loading,f=function(){d&&B(d,{left:b.plotLeft+"px",top:b.plotTop+"px",width:b.plotWidth+"px",height:b.plotHeight+"px"})};if(!d)b.loadingDiv=d=$(Ka,{className:"highcharts-loading"},r(e.style,{zIndex:10,display:P}),
b.container),b.loadingSpan=$("span",null,e.labelStyle,d),N(b,"redraw",f);b.loadingSpan.innerHTML=a||c.lang.loading;if(!b.loadingShown)B(d,{opacity:0,display:""}),jb(d,{opacity:e.style.opacity},{duration:e.showDuration||0}),b.loadingShown=!0;f()},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&jb(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){B(b,{display:P})}});this.loadingShown=!1}});r(Fa.prototype,{update:function(a,b,c,d){function e(){f.applyOptions(a);if(da(a)&&
!Ha(a))f.redraw=function(){if(h)a&&a.marker&&a.marker.symbol?f.graphic=h.destroy():h.attr(f.pointAttr[f.state||""]);if(a&&a.dataLabels&&f.dataLabel)f.dataLabel=f.dataLabel.destroy();f.redraw=null};i=f.index;g.updateParallelArrays(f,i);k.data[i]=f.options;g.isDirty=g.isDirtyData=!0;if(!g.fixedBox&&g.hasCartesianSeries)j.isDirtyBox=!0;k.legendType==="point"&&j.legend.destroyItem(f);b&&j.redraw(c)}var f=this,g=f.series,h=f.graphic,i,j=g.chart,k=g.options,b=p(b,!0);d===!1?e():f.firePointEvent("update",
{options:a},e)},remove:function(a,b){var c=this,d=c.series,e=d.points,f=d.chart,g,h=d.data;Ra(b,f);a=p(a,!0);c.firePointEvent("remove",null,function(){g=Ma(c,h);h.length===e.length&&e.splice(g,1);h.splice(g,1);d.options.data.splice(g,1);d.updateParallelArrays(c,"splice",g,1);c.destroy();d.isDirty=!0;d.isDirtyData=!0;a&&f.redraw()})}});r(O.prototype,{addPoint:function(a,b,c,d){var e=this.options,f=this.data,g=this.graph,h=this.area,i=this.chart,j=this.xAxis&&this.xAxis.names,k=g&&g.shift||0,l=e.data,
n,m=this.xData;Ra(d,i);c&&q([g,h,this.graphNeg,this.areaNeg],function(a){if(a)a.shift=k+1});if(h)h.isArea=!0;b=p(b,!0);d={series:this};this.pointClass.prototype.applyOptions.apply(d,[a]);g=d.x;h=m.length;if(this.requireSorting&&g<m[h-1])for(n=!0;h&&m[h-1]>g;)h--;this.updateParallelArrays(d,"splice",h,0,0);this.updateParallelArrays(d,h);if(j&&d.name)j[g]=d.name;l.splice(h,0,a);n&&(this.data.splice(h,0,null),this.processData());e.legendType==="point"&&this.generatePoints();c&&(f[0]&&f[0].remove?f[0].remove(!1):
(f.shift(),this.updateParallelArrays(d,"shift"),l.shift()));this.isDirtyData=this.isDirty=!0;b&&(this.getAttribs(),i.redraw())},remove:function(a,b){var c=this,d=c.chart,a=p(a,!0);if(!c.isRemoving)c.isRemoving=!0,I(c,"remove",null,function(){c.destroy();d.isDirtyLegend=d.isDirtyBox=!0;d.linkSeries();a&&d.redraw(b)});c.isRemoving=!1},update:function(a,b){var c=this,d=this.chart,e=this.userOptions,f=this.type,g=H[f].prototype,h=["group","markerGroup","dataLabelsGroup"],i;q(h,function(a){h[a]=c[a];delete c[a]});
a=w(e,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},a);this.remove(!1);for(i in g)g.hasOwnProperty(i)&&(this[i]=u);r(this,H[a.type||f].prototype);q(h,function(a){c[a]=h[a]});this.init(d,a);d.linkSeries();p(b,!0)&&d.redraw(!1)}});r(na.prototype,{update:function(a,b){var c=this.chart,a=c.options[this.coll][this.options.index]=w(this.userOptions,a);this.destroy(!0);this._addedPlotLB=u;this.init(c,r(a,{events:u}));c.isDirtyBox=!0;p(b,!0)&&c.redraw()},remove:function(a){for(var b=
this.chart,c=this.coll,d=this.series,e=d.length;e--;)d[e]&&d[e].remove(!1);la(b.axes,this);la(b[c],this);b.options[c].splice(this.options.index,1);q(b[c],function(a,b){a.options.index=b});this.destroy();b.isDirtyBox=!0;p(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});ia=ma(O);H.line=ia;ca.area=w(T,{threshold:0});var qa=ma(O,{type:"area",getSegments:function(){var a=this,b=[],c=[],d=[],e=this.xAxis,f=this.yAxis,g=f.stacks[this.stackKey],
h={},i,j,k=this.points,l=this.options.connectNulls,n,m;if(this.options.stacking&&!this.cropped){for(n=0;n<k.length;n++)h[k[n].x]=k[n];for(m in g)g[m].total!==null&&d.push(+m);d.sort(function(a,b){return a-b});q(d,function(b){var d=0,k;if(!l||h[b]&&h[b].y!==null)if(h[b])c.push(h[b]);else{for(n=a.index;n<=f.series.length;n++)if(k=g[b].points[n+","+b]){d=k[1];break}i=e.translate(b);j=f.toPixels(d,!0);c.push({y:null,plotX:i,clientX:i,plotY:j,yBottom:j,onMouseOver:sa})}});c.length&&b.push(c)}else O.prototype.getSegments.call(this),
b=this.segments;this.segments=b},getSegmentPath:function(a){var b=O.prototype.getSegmentPath.call(this,a),c=[].concat(b),d,e=this.options;d=b.length;var f=this.yAxis.getThreshold(e.threshold),g;d===3&&c.push("L",b[1],b[2]);if(e.stacking&&!this.closedStacks)for(d=a.length-1;d>=0;d--)g=p(a[d].yBottom,f),d<a.length-1&&e.step&&c.push(a[d+1].plotX,g),c.push(a[d].plotX,g);else this.closeSegment(c,a,f);this.areaPath=this.areaPath.concat(c);return b},closeSegment:function(a,b,c){a.push("L",b[b.length-1].plotX,
c,"L",b[0].plotX,c)},drawGraph:function(){this.areaPath=[];O.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=c.negativeColor,e=c.negativeFillColor,f=[["area",this.color,c.fillColor]];(d||e)&&f.push(["areaNeg",d,e]);q(f,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:p(d[2],ya(d[1]).setOpacity(p(c.fillOpacity,0.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:M.drawRectangle});H.area=qa;ca.spline=w(T);ia=ma(O,{type:"spline",
getPointSpline:function(a,b,c){var d=b.plotX,e=b.plotY,f=a[c-1],g=a[c+1],h,i,j,k;if(f&&g){a=f.plotY;j=g.plotX;var g=g.plotY,l;h=(1.5*d+f.plotX)/2.5;i=(1.5*e+a)/2.5;j=(1.5*d+j)/2.5;k=(1.5*e+g)/2.5;l=(k-i)*(j-d)/(j-h)+e-k;i+=l;k+=l;i>a&&i>e?(i=t(a,e),k=2*e-i):i<a&&i<e&&(i=L(a,e),k=2*e-i);k>g&&k>e?(k=t(g,e),i=2*e-k):k<g&&k<e&&(k=L(g,e),i=2*e-k);b.rightContX=j;b.rightContY=k}c?(b=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,h||d,i||e,d,e],f.rightContX=f.rightContY=null):b=["M",d,e];return b}});H.spline=
ia;ca.areaspline=w(ca.area);qa=qa.prototype;ia=ma(ia,{type:"areaspline",closedStacks:!0,getSegmentPath:qa.getSegmentPath,closeSegment:qa.closeSegment,drawGraph:qa.drawGraph,drawLegendSymbol:M.drawRectangle});H.areaspline=ia;ca.column=w(T,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,
verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});ia=ma(O,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){O.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&q(b.series,function(b){if(b.type===a.type)b.isDirty=!0})},getColumnMetrics:function(){var a=this,b=a.options,c=a.xAxis,d=a.yAxis,e=c.reversed,f,g={},h,i=0;b.grouping===
!1?i=1:q(a.chart.series,function(b){var c=b.options,e=b.yAxis;if(b.type===a.type&&b.visible&&d.len===e.len&&d.pos===e.pos)c.stacking?(f=b.stackKey,g[f]===u&&(g[f]=i++),h=g[f]):c.grouping!==!1&&(h=i++),b.columnIndex=h});var c=L(Q(c.transA)*(c.ordinalSlope||b.pointRange||c.closestPointRange||c.tickInterval||1),c.len),j=c*b.groupPadding,k=(c-2*j)/i,l=b.pointWidth,b=s(l)?(k-l)/2:k*b.pointPadding,l=p(l,k-2*b);return a.columnMetrics={width:l,offset:b+(j+((e?i-(a.columnIndex||0):a.columnIndex)||0)*k-c/2)*
(e?-1:1)}},translate:function(){var a=this,b=a.chart,c=a.options,d=a.borderWidth=p(c.borderWidth,a.activePointCount>0.5*a.xAxis.len?0:1),e=a.yAxis,f=a.translatedThreshold=e.getThreshold(c.threshold),g=p(c.minPointLength,5),h=a.getColumnMetrics(),i=h.width,j=a.barW=t(i,1+2*d),k=a.pointXOffset=h.offset,l=-(d%2?0.5:0),n=d%2?0.5:1;b.renderer.isVML&&b.inverted&&(n+=1);c.pointPadding&&(j=La(j));O.prototype.translate.apply(a);q(a.points,function(c){var d=p(c.yBottom,f),h=L(t(-999-d,c.plotY),e.len+999+d),
q=c.plotX+k,r=j,s=L(h,d),u;u=t(h,d)-s;Q(u)<g&&g&&(u=g,s=v(Q(s-f)>g?d-g:f-(e.translate(c.y,0,1,0,1)<=f?g:0)));c.barX=q;c.pointWidth=i;c.tooltipPos=b.inverted?[e.len-h,a.xAxis.len-q-r/2]:[q+r/2,h+e.pos-b.plotTop];r=v(q+r)+l;q=v(q)+l;r-=q;d=Q(s)<0.5;u=v(s+u)+n;s=v(s)+n;u-=s;d&&(s-=1,u+=1);c.shapeType="rect";c.shapeArgs={x:q,y:s,width:r,height:u}})},getSymbol:sa,drawLegendSymbol:M.drawRectangle,drawGraph:sa,drawPoints:function(){var a=this,b=this.chart,c=a.options,d=b.renderer,e=c.animationLimit||250,
f,g;q(a.points,function(h){var i=h.plotY,j=h.graphic;if(i!==u&&!isNaN(i)&&h.y!==null)f=h.shapeArgs,i=s(a.borderWidth)?{"stroke-width":a.borderWidth}:{},g=h.pointAttr[h.selected?"select":""]||a.pointAttr[""],j?(bb(j),j.attr(i)[b.pointCount<e?"animate":"attr"](w(f))):h.graphic=d[h.shapeType](f).attr(g).attr(i).add(a.group).shadow(c.shadow,null,c.stacking&&!c.borderRadius);else if(j)h.graphic=j.destroy()})},animate:function(a){var b=this.yAxis,c=this.options,d=this.chart.inverted,e={};if(ba)a?(e.scaleY=
0.001,a=L(b.pos+b.len,t(b.pos,b.toPixels(c.threshold))),d?e.translateX=a-b.len:e.translateY=a,this.group.attr(e)):(e.scaleY=1,e[d?"translateX":"translateY"]=b.pos,this.group.animate(e,this.options.animation),this.animate=null)},remove:function(){var a=this,b=a.chart;b.hasRendered&&q(b.series,function(b){if(b.type===a.type)b.isDirty=!0});O.prototype.remove.apply(a,arguments)}});H.column=ia;ca.bar=w(ca.column);qa=ma(ia,{type:"bar",inverted:!0});H.bar=qa;ca.scatter=w(T,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',
pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});qa=ma(O,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&O.prototype.drawGraph.call(this)}});H.scatter=qa;ca.pie=w(T,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},
ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});T={type:"pie",isCartesian:!1,pointClass:ma(Fa,{init:function(){Fa.prototype.init.apply(this,arguments);var a=this,b;if(a.y<0)a.y=null;r(a,{visible:a.visible!==!1,name:p(a.name,"Slice")});b=function(b){a.slice(b.type==="select")};N(a,"select",b);N(a,"unselect",b);return a},setVisible:function(a){var b=this,c=b.series,
d=c.chart;b.visible=b.options.visible=a=a===u?!b.visible:a;c.options.data[Ma(b,c.data)]=b.options;q(["graphic","dataLabel","connector","shadowGroup"],function(c){if(b[c])b[c][a?"show":"hide"](!0)});b.legendItem&&d.legend.colorizeItem(b,a);if(!c.isDirty&&c.options.ignoreHiddenPoint)c.isDirty=!0,d.redraw()},slice:function(a,b,c){var d=this.series;Ra(c,d.chart);p(b,!0);this.sliced=this.options.sliced=a=s(a)?a:!this.sliced;d.options.data[Ma(this,d.data)]=this.options;a=a?this.slicedTranslation:{translateX:0,
translateY:0};this.graphic.animate(a);this.shadowGroup&&this.shadowGroup.animate(a)},haloPath:function(a){var b=this.shapeArgs,c=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(c.plotLeft+b.x,c.plotTop+b.y,b.r+a,b.r+a,{innerR:this.shapeArgs.r,start:b.start,end:b.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,
getColor:sa,animate:function(a){var b=this,c=b.points,d=b.startAngleRad;if(!a)q(c,function(a){var c=a.graphic,a=a.shapeArgs;c&&(c.attr({r:b.center[3]/2,start:d,end:d}),c.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null},setData:function(a,b,c,d){O.prototype.setData.call(this,a,!1,c,d);this.processData();this.generatePoints();p(b,!0)&&this.chart.redraw(c)},generatePoints:function(){var a,b=0,c,d,e,f=this.options.ignoreHiddenPoint;O.prototype.generatePoints.call(this);
c=this.points;d=c.length;for(a=0;a<d;a++)e=c[a],b+=f&&!e.visible?0:e.y;this.total=b;for(a=0;a<d;a++)e=c[a],e.percentage=b>0?e.y/b*100:0,e.total=b},translate:function(a){this.generatePoints();var b=0,c=this.options,d=c.slicedOffset,e=d+c.borderWidth,f,g,h,i=c.startAngle||0,j=this.startAngleRad=oa/180*(i-90),i=(this.endAngleRad=oa/180*(p(c.endAngle,i+360)-90))-j,k=this.points,l=c.dataLabels.distance,c=c.ignoreHiddenPoint,n,m=k.length,o;if(!a)this.center=a=this.getCenter();this.getX=function(b,c){h=
V.asin(L((b-a[1])/(a[2]/2+l),1));return a[0]+(c?-1:1)*aa(h)*(a[2]/2+l)};for(n=0;n<m;n++){o=k[n];f=j+b*i;if(!c||o.visible)b+=o.percentage/100;g=j+b*i;o.shapeType="arc";o.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:v(f*1E3)/1E3,end:v(g*1E3)/1E3};h=(g+f)/2;h>1.5*oa?h-=2*oa:h<-oa/2&&(h+=2*oa);o.slicedTranslation={translateX:v(aa(h)*d),translateY:v(fa(h)*d)};f=aa(h)*a[2]/2;g=fa(h)*a[2]/2;o.tooltipPos=[a[0]+f*0.7,a[1]+g*0.7];o.half=h<-oa/2||h>oa/2?1:0;o.angle=h;e=L(e,l/2);o.labelPos=[a[0]+f+aa(h)*
l,a[1]+g+fa(h)*l,a[0]+f+aa(h)*e,a[1]+g+fa(h)*e,a[0]+f,a[1]+g,l<0?"center":o.half?"right":"left",h]}},drawGraph:null,drawPoints:function(){var a=this,b=a.chart.renderer,c,d,e=a.options.shadow,f,g;if(e&&!a.shadowGroup)a.shadowGroup=b.g("shadow").add(a.group);q(a.points,function(h){d=h.graphic;g=h.shapeArgs;f=h.shadowGroup;if(e&&!f)f=h.shadowGroup=b.g("shadow").add(a.shadowGroup);c=h.sliced?h.slicedTranslation:{translateX:0,translateY:0};f&&f.attr(c);d?d.animate(r(g,c)):h.graphic=d=b[h.shapeType](g).setRadialReference(a.center).attr(h.pointAttr[h.selected?
"select":""]).attr({"stroke-linejoin":"round"}).attr(c).add(a.group).shadow(e,f);h.visible!==void 0&&h.setVisible(h.visible)})},sortByAngle:function(a,b){a.sort(function(a,d){return a.angle!==void 0&&(d.angle-a.angle)*b})},drawLegendSymbol:M.drawRectangle,getCenter:Z.getCenter,getSymbol:sa};T=ma(O,T);H.pie=T;O.prototype.drawDataLabels=function(){var a=this,b=a.options,c=b.cursor,d=b.dataLabels,e=a.points,f,g,h=a.hasRendered||0,i,j;if(d.enabled||a._hasPointLabels)a.dlProcessOptions&&a.dlProcessOptions(d),
j=a.plotGroup("dataLabelsGroup","data-labels",d.defer?"hidden":"visible",d.zIndex||6),p(d.defer,!0)&&(j.attr({opacity:+h}),h||N(a,"afterAnimate",function(){a.visible&&j.show();j[b.animation?"animate":"attr"]({opacity:1},{duration:200})})),g=d,q(e,function(b){var e,h=b.dataLabel,m,o,q=b.connector,t=!0;f=b.options&&b.options.dataLabels;e=p(f&&f.enabled,g.enabled);if(h&&!e)b.dataLabel=h.destroy();else if(e){d=w(g,f);e=d.rotation;m=b.getLabelConfig();i=d.format?Ja(d.format,m):d.formatter.call(m,d);d.style.color=
p(d.color,d.style.color,a.color,"black");if(h)if(s(i))h.attr({text:i}),t=!1;else{if(b.dataLabel=h=h.destroy(),q)b.connector=q.destroy()}else if(s(i)){h={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:e,padding:d.padding,zIndex:1};for(o in h)h[o]===u&&delete h[o];h=b.dataLabel=a.chart.renderer[e?"text":"label"](i,0,-999,null,null,null,d.useHTML).attr(h).css(r(d.style,c&&{cursor:c})).add(j).shadow(d.shadow)}h&&a.alignDataLabel(b,h,d,null,t)}})};
O.prototype.alignDataLabel=function(a,b,c,d,e){var f=this.chart,g=f.inverted,h=p(a.plotX,-999),i=p(a.plotY,-999),j=b.getBBox();if(a=this.visible&&(a.series.forceDL||f.isInsidePlot(h,v(i),g)||d&&f.isInsidePlot(h,g?d.x+1:d.y+d.height-1,g)))d=r({x:g?f.plotWidth-i:h,y:v(g?f.plotHeight-h:i),width:0,height:0},d),r(c,{width:j.width,height:j.height}),c.rotation?b[e?"attr":"animate"]({x:d.x+c.x+d.width/2,y:d.y+c.y+d.height/2}).attr({align:c.align}):(b.align(c,null,d),g=b.alignAttr,p(c.overflow,"justify")===
"justify"?this.justifyDataLabel(b,c,g,j,d,e):p(c.crop,!0)&&(a=f.isInsidePlot(g.x,g.y)&&f.isInsidePlot(g.x+j.width,g.y+j.height)));if(!a)b.attr({y:-999}),b.placed=!1};O.prototype.justifyDataLabel=function(a,b,c,d,e,f){var g=this.chart,h=b.align,i=b.verticalAlign,j,k;j=c.x;if(j<0)h==="right"?b.align="left":b.x=-j,k=!0;j=c.x+d.width;if(j>g.plotWidth)h==="left"?b.align="right":b.x=g.plotWidth-j,k=!0;j=c.y;if(j<0)i==="bottom"?b.verticalAlign="top":b.y=-j,k=!0;j=c.y+d.height;if(j>g.plotHeight)i==="top"?
b.verticalAlign="bottom":b.y=g.plotHeight-j,k=!0;if(k)a.placed=!f,a.align(b,null,e)};if(H.pie)H.pie.prototype.drawDataLabels=function(){var a=this,b=a.data,c,d=a.chart,e=a.options.dataLabels,f=p(e.connectorPadding,10),g=p(e.connectorWidth,1),h=d.plotWidth,i=d.plotHeight,j,k,l=p(e.softConnector,!0),n=e.distance,m=a.center,o=m[2]/2,r=m[1],s=n>0,u,w,x,A=[[],[]],y,B,I,H,z,R=[0,0,0,0],N=function(a,b){return b.y-a.y};if(a.visible&&(e.enabled||a._hasPointLabels)){O.prototype.drawDataLabels.apply(a);q(b,
function(a){a.dataLabel&&a.visible&&A[a.half].push(a)});for(H=2;H--;){var G=[],M=[],F=A[H],K=F.length,E;if(K){a.sortByAngle(F,H-0.5);for(z=b=0;!b&&F[z];)b=F[z]&&F[z].dataLabel&&(F[z].dataLabel.getBBox().height||21),z++;if(n>0){w=L(r+o+n,d.plotHeight);for(z=t(0,r-o-n);z<=w;z+=b)G.push(z);w=G.length;if(K>w){c=[].concat(F);c.sort(N);for(z=K;z--;)c[z].rank=z;for(z=K;z--;)F[z].rank>=w&&F.splice(z,1);K=F.length}for(z=0;z<K;z++){c=F[z];x=c.labelPos;c=9999;var S,P;for(P=0;P<w;P++)S=Q(G[P]-x[1]),S<c&&(c=S,
E=P);if(E<z&&G[z]!==null)E=z;else for(w<K-z+E&&G[z]!==null&&(E=w-K+z);G[E]===null;)E++;M.push({i:E,y:G[E]});G[E]=null}M.sort(N)}for(z=0;z<K;z++){c=F[z];x=c.labelPos;u=c.dataLabel;I=c.visible===!1?"hidden":"visible";c=x[1];if(n>0){if(w=M.pop(),E=w.i,B=w.y,c>B&&G[E+1]!==null||c<B&&G[E-1]!==null)B=L(t(0,c),d.plotHeight)}else B=c;y=e.justify?m[0]+(H?-1:1)*(o+n):a.getX(B===r-o-n||B===r+o+n?c:B,H);u._attr={visibility:I,align:x[6]};u._pos={x:y+e.x+({left:f,right:-f}[x[6]]||0),y:B+e.y-10};u.connX=y;u.connY=
B;if(this.options.size===null)w=u.width,y-w<f?R[3]=t(v(w-y+f),R[3]):y+w>h-f&&(R[1]=t(v(y+w-h+f),R[1])),B-b/2<0?R[0]=t(v(-B+b/2),R[0]):B+b/2>i&&(R[2]=t(v(B+b/2-i),R[2]))}}}if(Ca(R)===0||this.verifyDataLabelOverflow(R))this.placeDataLabels(),s&&g&&q(this.points,function(b){j=b.connector;x=b.labelPos;if((u=b.dataLabel)&&u._pos)I=u._attr.visibility,y=u.connX,B=u.connY,k=l?["M",y+(x[6]==="left"?5:-5),B,"C",y,B,2*x[2]-x[4],2*x[3]-x[5],x[2],x[3],"L",x[4],x[5]]:["M",y+(x[6]==="left"?5:-5),B,"L",x[2],x[3],
"L",x[4],x[5]],j?(j.animate({d:k}),j.attr("visibility",I)):b.connector=j=a.chart.renderer.path(k).attr({"stroke-width":g,stroke:e.connectorColor||b.color||"#606060",visibility:I}).add(a.dataLabelsGroup);else if(j)b.connector=j.destroy()})}},H.pie.prototype.placeDataLabels=function(){q(this.points,function(a){var a=a.dataLabel,b;if(a)(b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999})})},H.pie.prototype.alignDataLabel=sa,H.pie.prototype.verifyDataLabelOverflow=
function(a){var b=this.center,c=this.options,d=c.center,e=c=c.minSize||80,f;d[0]!==null?e=t(b[2]-t(a[1],a[3]),c):(e=t(b[2]-a[1]-a[3],c),b[0]+=(a[3]-a[1])/2);d[1]!==null?e=t(L(e,b[2]-t(a[0],a[2])),c):(e=t(L(e,b[2]-a[0]-a[2]),c),b[1]+=(a[0]-a[2])/2);e<b[2]?(b[2]=e,this.translate(b),q(this.points,function(a){if(a.dataLabel)a.dataLabel._pos=null}),this.drawDataLabels&&this.drawDataLabels()):f=!0;return f};if(H.column)H.column.prototype.alignDataLabel=function(a,b,c,d,e){var f=this.chart,g=f.inverted,
h=a.dlBox||a.shapeArgs,i=a.below||a.plotY>p(this.translatedThreshold,f.plotSizeY),j=p(c.inside,!!this.options.stacking);if(h&&(d=w(h),g&&(d={x:f.plotWidth-d.y-d.height,y:f.plotHeight-d.x-d.width,width:d.height,height:d.width}),!j))g?(d.x+=i?0:d.width,d.width=0):(d.y+=i?d.height:0,d.height=0);c.align=p(c.align,!g||j?"center":i?"right":"left");c.verticalAlign=p(c.verticalAlign,g||j?"middle":i?"top":"bottom");O.prototype.alignDataLabel.call(this,a,b,c,d,e)};T=K.TrackerMixin={drawTrackerPoint:function(){var a=
this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(c){var d=c.target,e;if(b.hoverSeries!==a)a.onMouseOver();for(;d&&!e;)e=d.point,d=d.parentNode;if(e!==u&&e!==b.hoverPoint)e.onMouseOver(c)};q(a.points,function(a){if(a.graphic)a.graphic.element.point=a;if(a.dataLabel)a.dataLabel.element.point=a});if(!a._hasTracking)q(a.trackerGroups,function(b){if(a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),$a))a[b].on("touchstart",
f)}),a._hasTracking=!0},drawTrackerGraph:function(){var a=this,b=a.options,c=b.trackByArea,d=[].concat(c?a.areaPath:a.graphPath),e=d.length,f=a.chart,g=f.pointer,h=f.renderer,i=f.options.tooltip.snap,j=a.tracker,k=b.cursor,l=k&&{cursor:k},k=a.singlePoints,n,m=function(){if(f.hoverSeries!==a)a.onMouseOver()},o="rgba(192,192,192,"+(ba?1.0E-4:0.002)+")";if(e&&!c)for(n=e+1;n--;)d[n]==="M"&&d.splice(n+1,0,d[n+1]-i,d[n+2],"L"),(n&&d[n]==="M"||n===e)&&d.splice(n,0,"L",d[n-2]+i,d[n-1]);for(n=0;n<k.length;n++)e=
k[n],d.push("M",e.plotX-i,e.plotY,"L",e.plotX+i,e.plotY);j?j.attr({d:d}):(a.tracker=h.path(d).attr({"stroke-linejoin":"round",visibility:a.visible?"visible":"hidden",stroke:o,fill:c?o:P,"stroke-width":b.lineWidth+(c?0:2*i),zIndex:2}).add(a.group),q([a.tracker,a.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",m).on("mouseout",function(a){g.onTrackerMouseOut(a)}).css(l);if($a)a.on("touchstart",m)}))}};if(H.column)ia.prototype.drawTracker=T.drawTrackerPoint;if(H.pie)H.pie.prototype.drawTracker=
T.drawTrackerPoint;if(H.scatter)qa.prototype.drawTracker=T.drawTrackerPoint;r(lb.prototype,{setItemEvents:function(a,b,c,d,e){var f=this;(c?b:a.legendGroup).on("mouseover",function(){a.setState("hover");b.css(f.options.itemHoverStyle)}).on("mouseout",function(){b.css(a.visible?d:e);a.setState()}).on("click",function(b){var c=function(){a.setVisible()},b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,c):I(a,"legendItemClick",b,c)})},createCheckboxForItem:function(a){a.checkbox=
$("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},this.options.itemCheckboxStyle,this.chart.container);N(a.checkbox,"click",function(b){I(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})})}});E.legend.itemStyle.cursor="pointer";r(Ya.prototype,{showResetZoom:function(){var a=this,b=E.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f=c.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},
d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this;I(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,c=this.pointer,d=!1,e;!a||a.resetSelection?q(this.axes,function(a){b=a.zoom()}):q(a.xAxis.concat(a.yAxis),function(a){var e=a.axis,h=e.isXAxis;if(c[h?"zoomX":"zoomY"]||c[h?"pinchX":"pinchY"])b=e.zoom(a.min,a.max),e.displayBtn&&(d=!0)});e=this.resetZoomButton;if(d&&!e)this.showResetZoom();else if(!d&&
da(e))this.resetZoomButton=e.destroy();b&&this.redraw(p(this.options.chart.animation,a&&a.animation,this.pointCount<100))},pan:function(a,b){var c=this,d=c.hoverPoints,e;d&&q(d,function(a){a.setState()});q(b==="xy"?[1,0]:[1],function(b){var d=a[b?"chartX":"chartY"],h=c[b?"xAxis":"yAxis"][0],i=c[b?"mouseDownX":"mouseDownY"],j=(h.pointRange||0)/2,k=h.getExtremes(),l=h.toValue(i-d,!0)+j,i=h.toValue(i+c[b?"plotWidth":"plotHeight"]-d,!0)-j;h.series.length&&l>L(k.dataMin,k.min)&&i<t(k.dataMax,k.max)&&(h.setExtremes(l,
i,!1,!1,{trigger:"pan"}),e=!0);c[b?"mouseDownX":"mouseDownY"]=d});e&&c.redraw(!1);B(c.container,{cursor:"move"})}});r(Fa.prototype,{select:function(a,b){var c=this,d=c.series,e=d.chart,a=p(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a;d.options.data[Ma(c,d.data)]=c.options;c.setState(a&&"select");b||q(e.getSelectedPoints(),function(a){if(a.selected&&a!==c)a.selected=a.options.selected=!1,d.options.data[Ma(a,d.data)]=a.options,a.setState(""),
a.firePointEvent("unselect")})})},onMouseOver:function(a){var b=this.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;if(e&&e!==this)e.onMouseOut();this.firePointEvent("mouseOver");d&&(!d.shared||b.noSharedTooltip)&&d.refresh(this,a);this.setState("hover");c.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;this.firePointEvent("mouseOut");if(!b||Ma(this,b)===-1)this.setState(),a.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var a=w(this.series.options.point,
this.options).events,b;this.events=a;for(b in a)N(this,b,a[b]);this.hasImportedEvents=!0}},setState:function(a,b){var c=this.plotX,d=this.plotY,e=this.series,f=e.options.states,g=ca[e.type].marker&&e.options.marker,h=g&&!g.enabled,i=g&&g.states[a],j=i&&i.enabled===!1,k=e.stateMarkerGraphic,l=this.marker||{},n=e.chart,m=e.halo,o,a=a||"";o=this.pointAttr[a]||e.pointAttr[a];if(!(a===this.state&&!b||this.selected&&a!=="select"||f[a]&&f[a].enabled===!1||a&&(j||h&&i.enabled===!1)||a&&l.states&&l.states[a]&&
l.states[a].enabled===!1)){if(this.graphic)g=g&&this.graphic.symbolName&&o.r,this.graphic.attr(w(o,g?{x:c-g,y:d-g,width:2*g,height:2*g}:{})),k&&k.hide();else{if(a&&i)if(g=i.radius,l=l.symbol||e.symbol,k&&k.currentSymbol!==l&&(k=k.destroy()),k)k[b?"animate":"attr"]({x:c-g,y:d-g});else if(l)e.stateMarkerGraphic=k=n.renderer.symbol(l,c-g,d-g,2*g,2*g).attr(o).add(e.markerGroup),k.currentSymbol=l;if(k)k[a&&n.isInsidePlot(c,d,n.inverted)?"show":"hide"]()}if((c=f[a]&&f[a].halo)&&c.size){if(!m)e.halo=m=n.renderer.path().add(e.seriesGroup);
m.attr(r({fill:ya(this.color||e.color).setOpacity(c.opacity).get()},c.attributes))[b?"animate":"attr"]({d:this.haloPath(c.size)})}else m&&m.attr({d:[]});this.state=a}},haloPath:function(a){var b=this.series,c=b.chart,d=b.getPlotBox(),e=c.inverted;return c.renderer.symbols.circle(d.translateX+(e?b.yAxis.len-this.plotY:this.plotX)-a,d.translateY+(e?b.xAxis.len-this.plotX:this.plotY)-a,a*2,a*2)}});r(O.prototype,{onMouseOver:function(){var a=this.chart,b=a.hoverSeries;if(b&&b!==this)b.onMouseOut();this.options.events.mouseOver&&
I(this,"mouseOver");this.setState("hover");a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;if(d)d.onMouseOut();this&&a.events.mouseOut&&I(this,"mouseOut");c&&!a.stickyTracking&&(!c.shared||this.noSharedTooltip)&&c.hide();this.setState();b.hoverSeries=null},setState:function(a){var b=this.options,c=this.graph,d=this.graphNeg,e=b.states,b=b.lineWidth,a=a||"";if(this.state!==a)this.state=a,e[a]&&e[a].enabled===!1||(a&&(b=e[a].lineWidth||b+(e[a].lineWidthPlus||
0)),c&&!c.dashstyle&&(a={"stroke-width":b},c.attr(a),d&&d.attr(a)))},setVisible:function(a,b){var c=this,d=c.chart,e=c.legendItem,f,g=d.options.chart.ignoreHiddenSeries,h=c.visible;f=(c.visible=a=c.userOptions.visible=a===u?!h:a)?"show":"hide";q(["group","dataLabelsGroup","markerGroup","tracker"],function(a){if(c[a])c[a][f]()});if(d.hoverSeries===c)c.onMouseOut();e&&d.legend.colorizeItem(c,a);c.isDirty=!0;c.options.stacking&&q(d.series,function(a){if(a.options.stacking&&a.visible)a.isDirty=!0});q(c.linkedSeries,
function(b){b.setVisible(a,!1)});if(g)d.isDirtyBox=!0;b!==!1&&d.redraw();I(c,f)},setTooltipPoints:function(a){var b=[],c,d,e=this.xAxis,f=e&&e.getExtremes(),g=e?e.tooltipLen||e.len:this.chart.plotSizeX,h,i,j=[];if(!(this.options.enableMouseTracking===!1||this.singularTooltips)){if(a)this.tooltipPoints=null;q(this.segments||this.points,function(a){b=b.concat(a)});e&&e.reversed&&(b=b.reverse());this.orderTooltipPoints&&this.orderTooltipPoints(b);a=b.length;for(i=0;i<a;i++)if(e=b[i],c=e.x,c>=f.min&&
c<=f.max){h=b[i+1];c=d===u?0:d+1;for(d=b[i+1]?L(t(0,U((e.clientX+(h?h.wrappedClientX||h.clientX:g))/2)),g):g;c>=0&&c<=d;)j[c++]=e}this.tooltipPoints=j}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===u?!this.selected:a;if(this.checkbox)this.checkbox.checked=a;I(this,a?"select":"unselect")},drawTracker:T.drawTrackerGraph});r(K,{Axis:na,Chart:Ya,Color:ya,Point:Fa,Tick:Ta,Renderer:Za,Series:O,SVGElement:S,SVGRenderer:ta,arrayMin:Oa,arrayMax:Ca,
charts:W,dateFormat:cb,format:Ja,pathAnim:vb,getOptions:function(){return E},hasBidiBug:Ob,isTouchDevice:Ib,numberFormat:Ba,seriesTypes:H,setOptions:function(a){E=w(!0,E,a);Bb();return E},addEvent:N,removeEvent:X,createElement:$,discardElement:Qa,css:B,each:q,extend:r,map:Va,merge:w,pick:p,splat:ra,extendClass:ma,pInt:y,wrap:Na,svg:ba,canvas:ga,vml:!ba&&!ga,product:"Highcharts",version:"4.0.4"})})();

'use strict';

var rightNowApp = angular.module('rightNowApp', [
    'angular-skycons',
    'ui.bootstrap'
]);

rightNowApp.controller('RightNowController', function($scope, $http, $interval) {

    // Local current weather

    var gc = new JustGage({
        id: "gauge-courthouse",
        value: 0,
        min: 0,
        max: 20,
        title: "Wind km/h"
    });


    function getCurrent() {
        $http.get('api/local.json').success(function(data) {
            $scope.courthouse = data;

            var windSpeed = data.speed * 1.60934;
            $scope.windSpeed = Math.ceil(windSpeed * 10) / 10;
            gc.refresh($scope.windSpeed);

            var degrees = 0;
            switch (data.direction) {
                case "N":
                    degrees = 0;
                    break;
                case "NE":
                    degrees = 45;
                    break;
                case "E":
                    degrees = 90;
                    break;
                case "SE":
                    degrees = 135;
                    break;
                case "S":
                    degrees = 180;
                    break;
                case "SW":
                    degrees = 225;
                    break;
                case "W":
                    degrees = 270;
                    break;
                case "NW":
                    degrees = 315;
                    break;

                default:
                    degrees = 'N';
                    break;
            }

            $scope.arrowCourthouse = {
                '-webkit-transform': 'rotate(' + degrees + 'deg)',
                '-moz-transform': 'rotate(' + degrees + 'deg)',
                '-o-transform': 'rotate(' + degrees + 'deg)',
                '-ms-transform': 'rotate(' + degrees + 'deg)',
                'transform': 'rotate(' + degrees + 'deg)'
            };
//
//            console.log(data);
        });
    }

    setInterval(function() {
        $scope.$apply(function() {
           getCurrent();
        });
    }, 5000);
    getCurrent();


    /**
     * Forecast.io
     */

    var gd = new JustGage({
        id: "gauge-downtown",
        value: 0,
        min: 0,
        max: 20,
        title: "Wind km/h"
    });

    $scope.isForecastCollapsed = false;

    $http.get('api/revelstoke.json').success(function(data){
        $scope.forecastio = data;

        $scope.currentWeather = {
            forecast: {
                icon: data.currently.icon,
                iconSize: 80
            }
        };

        var windSpeed = data.currently.windSpeed;
        windSpeed = Math.ceil(windSpeed * 10) / 10;
        gd.refresh(windSpeed);

        var degrees = data.currently.windBearing;

        $scope.arrowDowntown = {
            '-webkit-transform': 'rotate(' + degrees + 'deg)',
            '-moz-transform': 'rotate(' + degrees + 'deg)',
            '-o-transform': 'rotate(' + degrees + 'deg)',
            '-ms-transform': 'rotate(' + degrees + 'deg)',
            'transform': 'rotate(' + degrees + 'deg)'
        };
    });

    /**
     * Environment Canada
     */
    $scope.isEcForecastCollapsed = false;

    var ga = new JustGage({
        id: "gauge-airport",
        value: 0,
        min: 0,
        max: 20,
        title: "Wind km/h"
    });

    $http.get('api/revelstoke-ec.json').success(function(data) {
        $scope.airport = data;

        if (data.warnings.event) {
            (data.warnings.event['@attributes'].type == "") ? $scope.airport.warnings = false : $scope.airport.warnings = true;

            switch (data.warnings.event['@attributes'].type) {
                case 'watch':
                    $scope.alertClass = 'alert-danger';
                    break;

                case 'advisory':
                    $scope.alertClass = 'alert-warning';
                    break;

                case 'warning':
                    $scope.alertClass = 'alert-warning';
                    break;

                case 'ended':
                    $scope.alertClass = 'alert-success';
                    break;

                case 'statement':
                    $scope.alertClass = 'alert-info';
                    break;

                default:
                    $scope.alertClass = 'alert-info';
                    break;
            }
        }

        var degrees = data.currentConditions.wind.bearing;

        $scope.arrowAirport = {
            '-webkit-transform': 'rotate(' + degrees + 'deg)',
            '-moz-transform': 'rotate(' + degrees + 'deg)',
            '-o-transform': 'rotate(' + degrees + 'deg)',
            '-ms-transform': 'rotate(' + degrees + 'deg)',
            'transform': 'rotate(' + degrees + 'deg)'
        };

        var windSpeed = data.currentConditions.wind.speed;
        ga.refresh(windSpeed);
    });
});

rightNowApp.filter('climacons', function() {
    return function(input) {
        return input.replace(/-/g, " ");
    }
});

rightNowApp.filter('windDirection', function() {
    return function(input) {
        var directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];
        return directions[Math.round(input/45)];
    }
});

rightNowApp.filter('ecDirection', function() {
    return function(input) {
        if (input == "" || input == undefined)
            return '';
        else
            return input;
    }
});

/**
 * @fileoverview Main function src.
 */

// HTML5 Shiv. Must be in <head> to support older browsers.
document.createElement('video');
document.createElement('audio');
document.createElement('track');

/**
 * Doubles as the main function for users to create a player instance and also
 * the main library object.
 *
 * **ALIASES** videojs, _V_ (deprecated)
 *
 * The `vjs` function can be used to initialize or retrieve a player.
 *
 *     var myPlayer = vjs('my_video_id');
 *
 * @param  {String|Element} id      Video element or video element ID
 * @param  {Object=} options        Optional options object for config/settings
 * @param  {Function=} ready        Optional ready callback
 * @return {vjs.Player}             A player instance
 * @namespace
 */
var vjs = function(id, options, ready){
  var tag; // Element of ID

  // Allow for element or ID to be passed in
  // String ID
  if (typeof id === 'string') {

    // Adjust for jQuery ID syntax
    if (id.indexOf('#') === 0) {
      id = id.slice(1);
    }

    // If a player instance has already been created for this ID return it.
    if (vjs.players[id]) {
      return vjs.players[id];

    // Otherwise get element for ID
    } else {
      tag = vjs.el(id);
    }

  // ID is a media element
  } else {
    tag = id;
  }

  // Check for a useable element
  if (!tag || !tag.nodeName) { // re: nodeName, could be a box div also
    throw new TypeError('The element or ID supplied is not valid. (videojs)'); // Returns
  }

  // Element may have a player attr referring to an already created player instance.
  // If not, set up a new player and return the instance.
  return tag['player'] || new vjs.Player(tag, options, ready);
};

// Extended name, also available externally, window.videojs
var videojs = window['videojs'] = vjs;

// CDN Version. Used to target right flash swf.
vjs.CDN_VERSION = '4.8';
vjs.ACCESS_PROTOCOL = ('https:' == document.location.protocol ? 'https://' : 'http://');

/**
 * Global Player instance options, surfaced from vjs.Player.prototype.options_
 * vjs.options = vjs.Player.prototype.options_
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 */
vjs.options = {
  // Default order of fallback technology
  'techOrder': ['html5','flash'],
  // techOrder: ['flash','html5'],

  'html5': {},
  'flash': {},

  // Default of web browser is 300x150. Should rely on source width/height.
  'width': 300,
  'height': 150,
  // defaultVolume: 0.85,
  'defaultVolume': 0.00, // The freakin seaguls are driving me crazy!

  // default playback rates
  'playbackRates': [],
  // Add playback rate selection by adding rates
  // 'playbackRates': [0.5, 1, 1.5, 2],

  // default inactivity timeout
  'inactivityTimeout': 2000,

  // Included control sets
  'children': {
    'mediaLoader': {},
    'posterImage': {},
    'textTrackDisplay': {},
    'loadingSpinner': {},
    'bigPlayButton': {},
    'controlBar': {},
    'errorDisplay': {}
  },

  'language': document.getElementsByTagName('html')[0].getAttribute('lang') || navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language || 'en',

  // locales and their language translations
  'languages': {},

  // Default message to show when a video cannot be played.
  'notSupportedMessage': 'No compatible source was found for this video.'
};

// Set CDN Version of swf
// The added (+) blocks the replace from changing this 4.8 string
if (vjs.CDN_VERSION !== 'GENERATED'+'_CDN_VSN') {
  videojs.options['flash']['swf'] = vjs.ACCESS_PROTOCOL + 'vjs.zencdn.net/'+vjs.CDN_VERSION+'/video-js.swf';
}

/**
 * Utility function for adding languages to the default options. Useful for
 * amending multiple language support at runtime.
 *
 * Example: vjs.addLanguage('es', {'Hello':'Hola'});
 *
 * @param  {String} code The language code or dictionary property
 * @param  {Object} data The data values to be translated
 * @return {Object} The resulting global languages dictionary object
 */
vjs.addLanguage = function(code, data){
  if(vjs.options['languages'][code] !== undefined) {
    vjs.options['languages'][code] = vjs.util.mergeOptions(vjs.options['languages'][code], data);
  } else {
    vjs.options['languages'][code] = data;
  }
  return vjs.options['languages'];
};

/**
 * Global player list
 * @type {Object}
 */
vjs.players = {};

/*!
 * Custom Universal Module Definition (UMD)
 *
 * Video.js will never be a non-browser lib so we can simplify UMD a bunch and
 * still support requirejs and browserify. This also needs to be closure
 * compiler compatible, so string keys are used.
 */
if (typeof define === 'function' && define['amd']) {
  define([], function(){ return videojs; });

// checking that module is an object too because of umdjs/umd#35
} else if (typeof exports === 'object' && typeof module === 'object') {
  module['exports'] = videojs;
}
/**
 * Core Object/Class for objects that use inheritance + contstructors
 *
 * To create a class that can be subclassed itself, extend the CoreObject class.
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * The constructor can be defined through the init property of an object argument.
 *
 *     var Animal = CoreObject.extend({
 *       init: function(name, sound){
 *         this.name = name;
 *       }
 *     });
 *
 * Other methods and properties can be added the same way, or directly to the
 * prototype.
 *
 *    var Animal = CoreObject.extend({
 *       init: function(name){
 *         this.name = name;
 *       },
 *       getName: function(){
 *         return this.name;
 *       },
 *       sound: '...'
 *    });
 *
 *    Animal.prototype.makeSound = function(){
 *      alert(this.sound);
 *    };
 *
 * To create an instance of a class, use the create method.
 *
 *    var fluffy = Animal.create('Fluffy');
 *    fluffy.getName(); // -> Fluffy
 *
 * Methods and properties can be overridden in subclasses.
 *
 *     var Horse = Animal.extend({
 *       sound: 'Neighhhhh!'
 *     });
 *
 *     var horsey = Horse.create('Horsey');
 *     horsey.getName(); // -> Horsey
 *     horsey.makeSound(); // -> Alert: Neighhhhh!
 *
 * @class
 * @constructor
 */
vjs.CoreObject = vjs['CoreObject'] = function(){};
// Manually exporting vjs['CoreObject'] here for Closure Compiler
// because of the use of the extend/create class methods
// If we didn't do this, those functions would get flattend to something like
// `a = ...` and `this.prototype` would refer to the global object instead of
// CoreObject

/**
 * Create a new object that inherits from this Object
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * @param {Object} props Functions and properties to be applied to the
 *                       new object's prototype
 * @return {vjs.CoreObject} An object that inherits from CoreObject
 * @this {*}
 */
vjs.CoreObject.extend = function(props){
  var init, subObj;

  props = props || {};
  // Set up the constructor using the supplied init method
  // or using the init of the parent object
  // Make sure to check the unobfuscated version for external libs
  init = props['init'] || props.init || this.prototype['init'] || this.prototype.init || function(){};
  // In Resig's simple class inheritance (previously used) the constructor
  //  is a function that calls `this.init.apply(arguments)`
  // However that would prevent us from using `ParentObject.call(this);`
  //  in a Child constuctor because the `this` in `this.init`
  //  would still refer to the Child and cause an inifinite loop.
  // We would instead have to do
  //    `ParentObject.prototype.init.apply(this, argumnents);`
  //  Bleh. We're not creating a _super() function, so it's good to keep
  //  the parent constructor reference simple.
  subObj = function(){
    init.apply(this, arguments);
  };

  // Inherit from this object's prototype
  subObj.prototype = vjs.obj.create(this.prototype);
  // Reset the constructor property for subObj otherwise
  // instances of subObj would have the constructor of the parent Object
  subObj.prototype.constructor = subObj;

  // Make the class extendable
  subObj.extend = vjs.CoreObject.extend;
  // Make a function for creating instances
  subObj.create = vjs.CoreObject.create;

  // Extend subObj's prototype with functions and other properties from props
  for (var name in props) {
    if (props.hasOwnProperty(name)) {
      subObj.prototype[name] = props[name];
    }
  }

  return subObj;
};

/**
 * Create a new instace of this Object class
 *
 *     var myAnimal = Animal.create();
 *
 * @return {vjs.CoreObject} An instance of a CoreObject subclass
 * @this {*}
 */
vjs.CoreObject.create = function(){
  // Create a new object that inherits from this object's prototype
  var inst = vjs.obj.create(this.prototype);

  // Apply this constructor function to the new object
  this.apply(inst, arguments);

  // Return the new object
  return inst;
};
/**
 * @fileoverview Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)
 * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)
 * This should work very similarly to jQuery's events, however it's based off the book version which isn't as
 * robust as jquery's, so there's probably some differences.
 */

/**
 * Add an event listener to element
 * It stores the handler function in a separate cache object
 * and adds a generic handler to the element's event,
 * along with a unique id (guid) to the element.
 * @param  {Element|Object}   elem Element or object to bind listeners to
 * @param  {String|Array}   type Type of event to bind to.
 * @param  {Function} fn   Event listener.
 * @private
 */
vjs.on = function(elem, type, fn){
  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.on, elem, type, fn);
  }

  var data = vjs.getData(elem);

  // We need a place to store all our handler data
  if (!data.handlers) data.handlers = {};

  if (!data.handlers[type]) data.handlers[type] = [];

  if (!fn.guid) fn.guid = vjs.guid++;

  data.handlers[type].push(fn);

  if (!data.dispatcher) {
    data.disabled = false;

    data.dispatcher = function (event){

      if (data.disabled) return;
      event = vjs.fixEvent(event);

      var handlers = data.handlers[event.type];

      if (handlers) {
        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.
        var handlersCopy = handlers.slice(0);

        for (var m = 0, n = handlersCopy.length; m < n; m++) {
          if (event.isImmediatePropagationStopped()) {
            break;
          } else {
            handlersCopy[m].call(elem, event);
          }
        }
      }
    };
  }

  if (data.handlers[type].length == 1) {
    if (elem.addEventListener) {
      elem.addEventListener(type, data.dispatcher, false);
    } else if (elem.attachEvent) {
      elem.attachEvent('on' + type, data.dispatcher);
    }
  }
};

/**
 * Removes event listeners from an element
 * @param  {Element|Object}   elem Object to remove listeners from
 * @param  {String|Array=}   type Type of listener to remove. Don't include to remove all events from element.
 * @param  {Function} fn   Specific listener to remove. Don't incldue to remove listeners for an event type.
 * @private
 */
vjs.off = function(elem, type, fn) {
  // Don't want to add a cache object through getData if not needed
  if (!vjs.hasData(elem)) return;

  var data = vjs.getData(elem);

  // If no events exist, nothing to unbind
  if (!data.handlers) { return; }

  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.off, elem, type, fn);
  }

  // Utility function
  var removeType = function(t){
     data.handlers[t] = [];
     vjs.cleanUpEvents(elem,t);
  };

  // Are we removing all bound events?
  if (!type) {
    for (var t in data.handlers) removeType(t);
    return;
  }

  var handlers = data.handlers[type];

  // If no handlers exist, nothing to unbind
  if (!handlers) return;

  // If no listener was provided, remove all listeners for type
  if (!fn) {
    removeType(type);
    return;
  }

  // We're only removing a single handler
  if (fn.guid) {
    for (var n = 0; n < handlers.length; n++) {
      if (handlers[n].guid === fn.guid) {
        handlers.splice(n--, 1);
      }
    }
  }

  vjs.cleanUpEvents(elem, type);
};

/**
 * Clean up the listener cache and dispatchers
 * @param  {Element|Object} elem Element to clean up
 * @param  {String} type Type of event to clean up
 * @private
 */
vjs.cleanUpEvents = function(elem, type) {
  var data = vjs.getData(elem);

  // Remove the events of a particular type if there are none left
  if (data.handlers[type].length === 0) {
    delete data.handlers[type];
    // data.handlers[type] = null;
    // Setting to null was causing an error with data.handlers

    // Remove the meta-handler from the element
    if (elem.removeEventListener) {
      elem.removeEventListener(type, data.dispatcher, false);
    } else if (elem.detachEvent) {
      elem.detachEvent('on' + type, data.dispatcher);
    }
  }

  // Remove the events object if there are no types left
  if (vjs.isEmpty(data.handlers)) {
    delete data.handlers;
    delete data.dispatcher;
    delete data.disabled;

    // data.handlers = null;
    // data.dispatcher = null;
    // data.disabled = null;
  }

  // Finally remove the expando if there is no data left
  if (vjs.isEmpty(data)) {
    vjs.removeData(elem);
  }
};

/**
 * Fix a native event to have standard property values
 * @param  {Object} event Event object to fix
 * @return {Object}
 * @private
 */
vjs.fixEvent = function(event) {

  function returnTrue() { return true; }
  function returnFalse() { return false; }

  // Test if fixing up is needed
  // Used to check if !event.stopPropagation instead of isPropagationStopped
  // But native events return true for stopPropagation, but don't have
  // other expected methods like isPropagationStopped. Seems to be a problem
  // with the Javascript Ninja code. So we're just overriding all events now.
  if (!event || !event.isPropagationStopped) {
    var old = event || window.event;

    event = {};
    // Clone the old object so that we can modify the values event = {};
    // IE8 Doesn't like when you mess with native event properties
    // Firefox returns false for event.hasOwnProperty('type') and other props
    //  which makes copying more difficult.
    // TODO: Probably best to create a whitelist of event props
    for (var key in old) {
      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y
      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation
      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyboardEvent.keyLocation') {
        // Chrome 32+ warns if you try to copy deprecated returnValue, but
        // we still want to if preventDefault isn't supported (IE8).
        if (!(key == 'returnValue' && old.preventDefault)) {
          event[key] = old[key];
        }
      }
    }

    // The event occurred on this element
    if (!event.target) {
      event.target = event.srcElement || document;
    }

    // Handle which other element the event is related to
    event.relatedTarget = event.fromElement === event.target ?
      event.toElement :
      event.fromElement;

    // Stop the default browser action
    event.preventDefault = function () {
      if (old.preventDefault) {
        old.preventDefault();
      }
      event.returnValue = false;
      event.isDefaultPrevented = returnTrue;
      event.defaultPrevented = true;
    };

    event.isDefaultPrevented = returnFalse;
    event.defaultPrevented = false;

    // Stop the event from bubbling
    event.stopPropagation = function () {
      if (old.stopPropagation) {
        old.stopPropagation();
      }
      event.cancelBubble = true;
      event.isPropagationStopped = returnTrue;
    };

    event.isPropagationStopped = returnFalse;

    // Stop the event from bubbling and executing other handlers
    event.stopImmediatePropagation = function () {
      if (old.stopImmediatePropagation) {
        old.stopImmediatePropagation();
      }
      event.isImmediatePropagationStopped = returnTrue;
      event.stopPropagation();
    };

    event.isImmediatePropagationStopped = returnFalse;

    // Handle mouse position
    if (event.clientX != null) {
      var doc = document.documentElement, body = document.body;

      event.pageX = event.clientX +
        (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
        (doc && doc.clientLeft || body && body.clientLeft || 0);
      event.pageY = event.clientY +
        (doc && doc.scrollTop || body && body.scrollTop || 0) -
        (doc && doc.clientTop || body && body.clientTop || 0);
    }

    // Handle key presses
    event.which = event.charCode || event.keyCode;

    // Fix button for mouse clicks:
    // 0 == left; 1 == middle; 2 == right
    if (event.button != null) {
      event.button = (event.button & 1 ? 0 :
        (event.button & 4 ? 1 :
          (event.button & 2 ? 2 : 0)));
    }
  }

  // Returns fixed-up instance
  return event;
};

/**
 * Trigger an event for an element
 * @param  {Element|Object}      elem  Element to trigger an event on
 * @param  {Event|Object|String} event A string (the type) or an event object with a type attribute
 * @private
 */
vjs.trigger = function(elem, event) {
  // Fetches element data and a reference to the parent (for bubbling).
  // Don't want to add a data object to cache for every parent,
  // so checking hasData first.
  var elemData = (vjs.hasData(elem)) ? vjs.getData(elem) : {};
  var parent = elem.parentNode || elem.ownerDocument;
      // type = event.type || event,
      // handler;

  // If an event name was passed as a string, creates an event out of it
  if (typeof event === 'string') {
    event = { type:event, target:elem };
  }
  // Normalizes the event properties.
  event = vjs.fixEvent(event);

  // If the passed element has a dispatcher, executes the established handlers.
  if (elemData.dispatcher) {
    elemData.dispatcher.call(elem, event);
  }

  // Unless explicitly stopped or the event does not bubble (e.g. media events)
    // recursively calls this function to bubble the event up the DOM.
    if (parent && !event.isPropagationStopped() && event.bubbles !== false) {
    vjs.trigger(parent, event);

  // If at the top of the DOM, triggers the default action unless disabled.
  } else if (!parent && !event.defaultPrevented) {
    var targetData = vjs.getData(event.target);

    // Checks if the target has a default action for this event.
    if (event.target[event.type]) {
      // Temporarily disables event dispatching on the target as we have already executed the handler.
      targetData.disabled = true;
      // Executes the default action.
      if (typeof event.target[event.type] === 'function') {
        event.target[event.type]();
      }
      // Re-enables event dispatching.
      targetData.disabled = false;
    }
  }

  // Inform the triggerer if the default was prevented by returning false
  return !event.defaultPrevented;
  /* Original version of js ninja events wasn't complete.
   * We've since updated to the latest version, but keeping this around
   * for now just in case.
   */
  // // Added in attion to book. Book code was broke.
  // event = typeof event === 'object' ?
  //   event[vjs.expando] ?
  //     event :
  //     new vjs.Event(type, event) :
  //   new vjs.Event(type);

  // event.type = type;
  // if (handler) {
  //   handler.call(elem, event);
  // }

  // // Clean up the event in case it is being reused
  // event.result = undefined;
  // event.target = elem;
};

/**
 * Trigger a listener only once for an event
 * @param  {Element|Object}   elem Element or object to
 * @param  {String|Array}   type
 * @param  {Function} fn
 * @private
 */
vjs.one = function(elem, type, fn) {
  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.one, elem, type, fn);
  }
  var func = function(){
    vjs.off(elem, type, func);
    fn.apply(this, arguments);
  };
  // copy the guid to the new function so it can removed using the original function's ID
  func.guid = fn.guid = fn.guid || vjs.guid++;
  vjs.on(elem, type, func);
};

/**
 * Loops through an array of event types and calls the requested method for each type.
 * @param  {Function} fn   The event method we want to use.
 * @param  {Element|Object} elem Element or object to bind listeners to
 * @param  {String}   type Type of event to bind to.
 * @param  {Function} callback   Event listener.
 * @private
 */
function _handleMultipleEvents(fn, elem, type, callback) {
  vjs.arr.forEach(type, function(type) {
    fn(elem, type, callback); //Call the event method for each one of the types
  });
}
var hasOwnProp = Object.prototype.hasOwnProperty;

/**
 * Creates an element and applies properties.
 * @param  {String=} tagName    Name of tag to be created.
 * @param  {Object=} properties Element properties to be applied.
 * @return {Element}
 * @private
 */
vjs.createEl = function(tagName, properties){
  var el;

  tagName = tagName || 'div';
  properties = properties || {};

  el = document.createElement(tagName);

  vjs.obj.each(properties, function(propName, val){
    // Not remembering why we were checking for dash
    // but using setAttribute means you have to use getAttribute

    // The check for dash checks for the aria-* attributes, like aria-label, aria-valuemin.
    // The additional check for "role" is because the default method for adding attributes does not
    // add the attribute "role". My guess is because it's not a valid attribute in some namespaces, although
    // browsers handle the attribute just fine. The W3C allows for aria-* attributes to be used in pre-HTML5 docs.
    // http://www.w3.org/TR/wai-aria-primer/#ariahtml. Using setAttribute gets around this problem.
    if (propName.indexOf('aria-') !== -1 || propName == 'role') {
     el.setAttribute(propName, val);
    } else {
     el[propName] = val;
    }
  });

  return el;
};

/**
 * Uppercase the first letter of a string
 * @param  {String} string String to be uppercased
 * @return {String}
 * @private
 */
vjs.capitalize = function(string){
  return string.charAt(0).toUpperCase() + string.slice(1);
};

/**
 * Object functions container
 * @type {Object}
 * @private
 */
vjs.obj = {};

/**
 * Object.create shim for prototypal inheritance
 *
 * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create
 *
 * @function
 * @param  {Object}   obj Object to use as prototype
 * @private
 */
vjs.obj.create = Object.create || function(obj){
  //Create a new function called 'F' which is just an empty object.
  function F() {}

  //the prototype of the 'F' function should point to the
  //parameter of the anonymous function.
  F.prototype = obj;

  //create a new constructor function based off of the 'F' function.
  return new F();
};

/**
 * Loop through each property in an object and call a function
 * whose arguments are (key,value)
 * @param  {Object}   obj Object of properties
 * @param  {Function} fn  Function to be called on each property.
 * @this {*}
 * @private
 */
vjs.obj.each = function(obj, fn, context){
  for (var key in obj) {
    if (hasOwnProp.call(obj, key)) {
      fn.call(context || this, key, obj[key]);
    }
  }
};

/**
 * Merge two objects together and return the original.
 * @param  {Object} obj1
 * @param  {Object} obj2
 * @return {Object}
 * @private
 */
vjs.obj.merge = function(obj1, obj2){
  if (!obj2) { return obj1; }
  for (var key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      obj1[key] = obj2[key];
    }
  }
  return obj1;
};

/**
 * Merge two objects, and merge any properties that are objects
 * instead of just overwriting one. Uses to merge options hashes
 * where deeper default settings are important.
 * @param  {Object} obj1 Object to override
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object. Obj1 and Obj2 will be untouched.
 * @private
 */
vjs.obj.deepMerge = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not ovewriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.obj.deepMerge(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};

/**
 * Make a copy of the supplied object
 * @param  {Object} obj Object to copy
 * @return {Object}     Copy of object
 * @private
 */
vjs.obj.copy = function(obj){
  return vjs.obj.merge({}, obj);
};

/**
 * Check if an object is plain, and not a dom node or any object sub-instance
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isPlain = function(obj){
  return !!obj
    && typeof obj === 'object'
    && obj.toString() === '[object Object]'
    && obj.constructor === Object;
};

/**
 * Check if an object is Array
*  Since instanceof Array will not work on arrays created in another frame we need to use Array.isArray, but since IE8 does not support Array.isArray we need this shim
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isArray = Array.isArray || function(arr) {
  return Object.prototype.toString.call(arr) === '[object Array]';
};

/**
 * Check to see whether the input is NaN or not.
 * NaN is the only JavaScript construct that isn't equal to itself
 * @param {Number} num Number to check
 * @return {Boolean} True if NaN, false otherwise
 * @private
 */
vjs.isNaN = function(num) {
  return num !== num;
};

/**
 * Bind (a.k.a proxy or Context). A simple method for changing the context of a function
   It also stores a unique id on the function so it can be easily removed from events
 * @param  {*}   context The object to bind as scope
 * @param  {Function} fn      The function to be bound to a scope
 * @param  {Number=}   uid     An optional unique ID for the function to be set
 * @return {Function}
 * @private
 */
vjs.bind = function(context, fn, uid) {
  // Make sure the function has a unique ID
  if (!fn.guid) { fn.guid = vjs.guid++; }

  // Create the new function that changes the context
  var ret = function() {
    return fn.apply(context, arguments);
  };

  // Allow for the ability to individualize this function
  // Needed in the case where multiple objects might share the same prototype
  // IF both items add an event listener with the same function, then you try to remove just one
  // it will remove both because they both have the same guid.
  // when using this, you need to use the bind method when you remove the listener as well.
  // currently used in text tracks
  ret.guid = (uid) ? uid + '_' + fn.guid : fn.guid;

  return ret;
};

/**
 * Element Data Store. Allows for binding data to an element without putting it directly on the element.
 * Ex. Event listneres are stored here.
 * (also from jsninja.com, slightly modified and updated for closure compiler)
 * @type {Object}
 * @private
 */
vjs.cache = {};

/**
 * Unique ID for an element or function
 * @type {Number}
 * @private
 */
vjs.guid = 1;

/**
 * Unique attribute name to store an element's guid in
 * @type {String}
 * @constant
 * @private
 */
vjs.expando = 'vdata' + (new Date()).getTime();

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.getData = function(el){
  var id = el[vjs.expando];
  if (!id) {
    id = el[vjs.expando] = vjs.guid++;
    vjs.cache[id] = {};
  }
  return vjs.cache[id];
};

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.hasData = function(el){
  var id = el[vjs.expando];
  return !(!id || vjs.isEmpty(vjs.cache[id]));
};

/**
 * Delete data for the element from the cache and the guid attr from getElementById
 * @param  {Element} el Remove data for an element
 * @private
 */
vjs.removeData = function(el){
  var id = el[vjs.expando];
  if (!id) { return; }
  // Remove all stored data
  // Changed to = null
  // http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/
  // vjs.cache[id] = null;
  delete vjs.cache[id];

  // Remove the expando property from the DOM node
  try {
    delete el[vjs.expando];
  } catch(e) {
    if (el.removeAttribute) {
      el.removeAttribute(vjs.expando);
    } else {
      // IE doesn't appear to support removeAttribute on the document element
      el[vjs.expando] = null;
    }
  }
};

/**
 * Check if an object is empty
 * @param  {Object}  obj The object to check for emptiness
 * @return {Boolean}
 * @private
 */
vjs.isEmpty = function(obj) {
  for (var prop in obj) {
    // Inlude null properties as empty.
    if (obj[prop] !== null) {
      return false;
    }
  }
  return true;
};

/**
 * Add a CSS class name to an element
 * @param {Element} element    Element to add class name to
 * @param {String} classToAdd Classname to add
 * @private
 */
vjs.addClass = function(element, classToAdd){
  if ((' '+element.className+' ').indexOf(' '+classToAdd+' ') == -1) {
    element.className = element.className === '' ? classToAdd : element.className + ' ' + classToAdd;
  }
};

/**
 * Remove a CSS class name from an element
 * @param {Element} element    Element to remove from class name
 * @param {String} classToAdd Classname to remove
 * @private
 */
vjs.removeClass = function(element, classToRemove){
  var classNames, i;

  if (element.className.indexOf(classToRemove) == -1) { return; }

  classNames = element.className.split(' ');

  // no arr.indexOf in ie8, and we don't want to add a big shim
  for (i = classNames.length - 1; i >= 0; i--) {
    if (classNames[i] === classToRemove) {
      classNames.splice(i,1);
    }
  }

  element.className = classNames.join(' ');
};

/**
 * Element for testing browser HTML5 video capabilities
 * @type {Element}
 * @constant
 * @private
 */
vjs.TEST_VID = vjs.createEl('video');

/**
 * Useragent for browser testing.
 * @type {String}
 * @constant
 * @private
 */
vjs.USER_AGENT = navigator.userAgent;

/**
 * Device is an iPhone
 * @type {Boolean}
 * @constant
 * @private
 */
vjs.IS_IPHONE = (/iPhone/i).test(vjs.USER_AGENT);
vjs.IS_IPAD = (/iPad/i).test(vjs.USER_AGENT);
vjs.IS_IPOD = (/iPod/i).test(vjs.USER_AGENT);
vjs.IS_IOS = vjs.IS_IPHONE || vjs.IS_IPAD || vjs.IS_IPOD;

vjs.IOS_VERSION = (function(){
  var match = vjs.USER_AGENT.match(/OS (\d+)_/i);
  if (match && match[1]) { return match[1]; }
})();

vjs.IS_ANDROID = (/Android/i).test(vjs.USER_AGENT);
vjs.ANDROID_VERSION = (function() {
  // This matches Android Major.Minor.Patch versions
  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned
  var match = vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),
    major,
    minor;

  if (!match) {
    return null;
  }

  major = match[1] && parseFloat(match[1]);
  minor = match[2] && parseFloat(match[2]);

  if (major && minor) {
    return parseFloat(match[1] + '.' + match[2]);
  } else if (major) {
    return major;
  } else {
    return null;
  }
})();
// Old Android is defined as Version older than 2.3, and requiring a webkit version of the android browser
vjs.IS_OLD_ANDROID = vjs.IS_ANDROID && (/webkit/i).test(vjs.USER_AGENT) && vjs.ANDROID_VERSION < 2.3;

vjs.IS_FIREFOX = (/Firefox/i).test(vjs.USER_AGENT);
vjs.IS_CHROME = (/Chrome/i).test(vjs.USER_AGENT);

vjs.TOUCH_ENABLED = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch);

/**
 * Apply attributes to an HTML element.
 * @param  {Element} el         Target element.
 * @param  {Object=} attributes Element attributes to be applied.
 * @private
 */
vjs.setElementAttributes = function(el, attributes){
  vjs.obj.each(attributes, function(attrName, attrValue) {
    if (attrValue === null || typeof attrValue === 'undefined' || attrValue === false) {
      el.removeAttribute(attrName);
    } else {
      el.setAttribute(attrName, (attrValue === true ? '' : attrValue));
    }
  });
};

/**
 * Get an element's attribute values, as defined on the HTML tag
 * Attributs are not the same as properties. They're defined on the tag
 * or with setAttribute (which shouldn't be used with HTML)
 * This will return true or false for boolean attributes.
 * @param  {Element} tag Element from which to get tag attributes
 * @return {Object}
 * @private
 */
vjs.getElementAttributes = function(tag){
  var obj, knownBooleans, attrs, attrName, attrVal;

  obj = {};

  // known boolean attributes
  // we can check for matching boolean properties, but older browsers
  // won't know about HTML5 boolean attributes that we still read from
  knownBooleans = ','+'autoplay,controls,loop,muted,default'+',';

  if (tag && tag.attributes && tag.attributes.length > 0) {
    attrs = tag.attributes;

    for (var i = attrs.length - 1; i >= 0; i--) {
      attrName = attrs[i].name;
      attrVal = attrs[i].value;

      // check for known booleans
      // the matching element property will return a value for typeof
      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(','+attrName+',') !== -1) {
        // the value of an included boolean attribute is typically an empty
        // string ('') which would equal false if we just check for a false value.
        // we also don't want support bad code like autoplay='false'
        attrVal = (attrVal !== null) ? true : false;
      }

      obj[attrName] = attrVal;
    }
  }

  return obj;
};

/**
 * Get the computed style value for an element
 * From http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/
 * @param  {Element} el        Element to get style value for
 * @param  {String} strCssRule Style name
 * @return {String}            Style value
 * @private
 */
vjs.getComputedDimension = function(el, strCssRule){
  var strValue = '';
  if(document.defaultView && document.defaultView.getComputedStyle){
    strValue = document.defaultView.getComputedStyle(el, '').getPropertyValue(strCssRule);

  } else if(el.currentStyle){
    // IE8 Width/Height support
    strValue = el['client'+strCssRule.substr(0,1).toUpperCase() + strCssRule.substr(1)] + 'px';
  }
  return strValue;
};

/**
 * Insert an element as the first child node of another
 * @param  {Element} child   Element to insert
 * @param  {[type]} parent Element to insert child into
 * @private
 */
vjs.insertFirst = function(child, parent){
  if (parent.firstChild) {
    parent.insertBefore(child, parent.firstChild);
  } else {
    parent.appendChild(child);
  }
};

/**
 * Object to hold browser support information
 * @type {Object}
 * @private
 */
vjs.browser = {};

/**
 * Shorthand for document.getElementById()
 * Also allows for CSS (jQuery) ID syntax. But nothing other than IDs.
 * @param  {String} id  Element ID
 * @return {Element}    Element with supplied ID
 * @private
 */
vjs.el = function(id){
  if (id.indexOf('#') === 0) {
    id = id.slice(1);
  }

  return document.getElementById(id);
};

/**
 * Format seconds as a time string, H:MM:SS or M:SS
 * Supplying a guide (in seconds) will force a number of leading zeros
 * to cover the length of the guide
 * @param  {Number} seconds Number of seconds to be turned into a string
 * @param  {Number} guide   Number (in seconds) to model the string after
 * @return {String}         Time formatted as H:MM:SS or M:SS
 * @private
 */
vjs.formatTime = function(seconds, guide) {
  // Default to using seconds as guide
  guide = guide || seconds;
  var s = Math.floor(seconds % 60),
      m = Math.floor(seconds / 60 % 60),
      h = Math.floor(seconds / 3600),
      gm = Math.floor(guide / 60 % 60),
      gh = Math.floor(guide / 3600);

  // handle invalid times
  if (isNaN(seconds) || seconds === Infinity) {
    // '-' is false for all relational operators (e.g. <, >=) so this setting
    // will add the minimum number of fields specified by the guide
    h = m = s = '-';
  }

  // Check if we need to show hours
  h = (h > 0 || gh > 0) ? h + ':' : '';

  // If hours are showing, we may need to add a leading zero.
  // Always show at least one digit of minutes.
  m = (((h || gm >= 10) && m < 10) ? '0' + m : m) + ':';

  // Check if leading zero is need for seconds
  s = (s < 10) ? '0' + s : s;

  return h + m + s;
};

// Attempt to block the ability to select text while dragging controls
vjs.blockTextSelection = function(){
  document.body.focus();
  document.onselectstart = function () { return false; };
};
// Turn off text selection blocking
vjs.unblockTextSelection = function(){ document.onselectstart = function () { return true; }; };

/**
 * Trim whitespace from the ends of a string.
 * @param  {String} string String to trim
 * @return {String}        Trimmed string
 * @private
 */
vjs.trim = function(str){
  return (str+'').replace(/^\s+|\s+$/g, '');
};

/**
 * Should round off a number to a decimal place
 * @param  {Number} num Number to round
 * @param  {Number} dec Number of decimal places to round to
 * @return {Number}     Rounded number
 * @private
 */
vjs.round = function(num, dec) {
  if (!dec) { dec = 0; }
  return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
};

/**
 * Should create a fake TimeRange object
 * Mimics an HTML5 time range instance, which has functions that
 * return the start and end times for a range
 * TimeRanges are returned by the buffered() method
 * @param  {Number} start Start time in seconds
 * @param  {Number} end   End time in seconds
 * @return {Object}       Fake TimeRange object
 * @private
 */
vjs.createTimeRange = function(start, end){
  return {
    length: 1,
    start: function() { return start; },
    end: function() { return end; }
  };
};

/**
 * Simple http request for retrieving external files (e.g. text tracks)
 * @param  {String}    url             URL of resource
 * @param  {Function} onSuccess       Success callback
 * @param  {Function=} onError         Error callback
 * @param  {Boolean=}   withCredentials Flag which allow credentials
 * @private
 */
vjs.get = function(url, onSuccess, onError, withCredentials){
  var fileUrl, request, urlInfo, winLoc, crossOrigin;

  onError = onError || function(){};

  if (typeof XMLHttpRequest === 'undefined') {
    // Shim XMLHttpRequest for older IEs
    window.XMLHttpRequest = function () {
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch (e) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch (f) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP'); } catch (g) {}
      throw new Error('This browser does not support XMLHttpRequest.');
    };
  }

  request = new XMLHttpRequest();

  urlInfo = vjs.parseUrl(url);
  winLoc = window.location;
  // check if url is for another domain/origin
  // ie8 doesn't know location.origin, so we won't rely on it here
  crossOrigin = (urlInfo.protocol + urlInfo.host) !== (winLoc.protocol + winLoc.host);

  // Use XDomainRequest for IE if XMLHTTPRequest2 isn't available
  // 'withCredentials' is only available in XMLHTTPRequest2
  // Also XDomainRequest has a lot of gotchas, so only use if cross domain
  if(crossOrigin && window.XDomainRequest && !('withCredentials' in request)) {
    request = new window.XDomainRequest();
    request.onload = function() {
      onSuccess(request.responseText);
    };
    request.onerror = onError;
    // these blank handlers need to be set to fix ie9 http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/
    request.onprogress = function() {};
    request.ontimeout = onError;

  // XMLHTTPRequest
  } else {
    fileUrl = (urlInfo.protocol == 'file:' || winLoc.protocol == 'file:');

    request.onreadystatechange = function() {
      if (request.readyState === 4) {
        if (request.status === 200 || fileUrl && request.status === 0) {
          onSuccess(request.responseText);
        } else {
          onError(request.responseText);
        }
      }
    };
  }

  // open the connection
  try {
    // Third arg is async, or ignored by XDomainRequest
    request.open('GET', url, true);
    // withCredentials only supported by XMLHttpRequest2
    if(withCredentials) {
      request.withCredentials = true;
    }
  } catch(e) {
    onError(e);
    return;
  }

  // send the request
  try {
    request.send();
  } catch(e) {
    onError(e);
  }
};

/**
 * Add to local storage (may removeable)
 * @private
 */
vjs.setLocalStorage = function(key, value){
  try {
    // IE was throwing errors referencing the var anywhere without this
    var localStorage = window.localStorage || false;
    if (!localStorage) { return; }
    localStorage[key] = value;
  } catch(e) {
    if (e.code == 22 || e.code == 1014) { // Webkit == 22 / Firefox == 1014
      vjs.log('LocalStorage Full (VideoJS)', e);
    } else {
      if (e.code == 18) {
        vjs.log('LocalStorage not allowed (VideoJS)', e);
      } else {
        vjs.log('LocalStorage Error (VideoJS)', e);
      }
    }
  }
};

/**
 * Get abosolute version of relative URL. Used to tell flash correct URL.
 * http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
 * @param  {String} url URL to make absolute
 * @return {String}     Absolute URL
 * @private
 */
vjs.getAbsoluteURL = function(url){

  // Check if absolute URL
  if (!url.match(/^https?:\/\//)) {
    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.
    url = vjs.createEl('div', {
      innerHTML: '<a href="'+url+'">x</a>'
    }).firstChild.href;
  }

  return url;
};


/**
 * Resolve and parse the elements of a URL
 * @param  {String} url The url to parse
 * @return {Object}     An object of url details
 */
vjs.parseUrl = function(url) {
  var div, a, addToBody, props, details;

  props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host'];

  // add the url to an anchor and let the browser parse the URL
  a = vjs.createEl('a', { href: url });

  // IE8 (and 9?) Fix
  // ie8 doesn't parse the URL correctly until the anchor is actually
  // added to the body, and an innerHTML is needed to trigger the parsing
  addToBody = (a.host === '' && a.protocol !== 'file:');
  if (addToBody) {
    div = vjs.createEl('div');
    div.innerHTML = '<a href="'+url+'"></a>';
    a = div.firstChild;
    // prevent the div from affecting layout
    div.setAttribute('style', 'display:none; position:absolute;');
    document.body.appendChild(div);
  }

  // Copy the specific URL properties to a new object
  // This is also needed for IE8 because the anchor loses its
  // properties when it's removed from the dom
  details = {};
  for (var i = 0; i < props.length; i++) {
    details[props[i]] = a[props[i]];
  }

  if (addToBody) {
    document.body.removeChild(div);
  }

  return details;
};

/**
 * Log messags to the console and history based on the type of message
 *
 * @param  {String} type The type of message, or `null` for `log`
 * @param  {[type]} args The args to be passed to the log
 * @private
 */
function _logType(type, args){
  var argsArray, noop, console;

  // convert args to an array to get array functions
  argsArray = Array.prototype.slice.call(args);
  // if there's no console then don't try to output messages
  // they will still be stored in vjs.log.history
  // Was setting these once outside of this function, but containing them
  // in the function makes it easier to test cases where console doesn't exist
  noop = function(){};
  console = window['console'] || {
    'log': noop,
    'warn': noop,
    'error': noop
  };

  if (type) {
    // add the type to the front of the message
    argsArray.unshift(type.toUpperCase()+':');
  } else {
    // default to log with no prefix
    type = 'log';
  }

  // add to history
  vjs.log.history.push(argsArray);

  // add console prefix after adding to history
  argsArray.unshift('VIDEOJS:');

  // call appropriate log function
  if (console[type].apply) {
    console[type].apply(console, argsArray);
  } else {
    // ie8 doesn't allow error.apply, but it will just join() the array anyway
    console[type](argsArray.join(' '));
  }
}

/**
 * Log plain debug messages
 */
vjs.log = function(){
  _logType(null, arguments);
};

/**
 * Keep a history of log messages
 * @type {Array}
 */
vjs.log.history = [];

/**
 * Log error messages
 */
vjs.log.error = function(){
  _logType('error', arguments);
};

/**
 * Log warning messages
 */
vjs.log.warn = function(){
  _logType('warn', arguments);
};

// Offset Left
// getBoundingClientRect technique from John Resig http://ejohn.org/blog/getboundingclientrect-is-awesome/
vjs.findPosition = function(el) {
  var box, docEl, body, clientLeft, scrollLeft, left, clientTop, scrollTop, top;

  if (el.getBoundingClientRect && el.parentNode) {
    box = el.getBoundingClientRect();
  }

  if (!box) {
    return {
      left: 0,
      top: 0
    };
  }

  docEl = document.documentElement;
  body = document.body;

  clientLeft = docEl.clientLeft || body.clientLeft || 0;
  scrollLeft = window.pageXOffset || body.scrollLeft;
  left = box.left + scrollLeft - clientLeft;

  clientTop = docEl.clientTop || body.clientTop || 0;
  scrollTop = window.pageYOffset || body.scrollTop;
  top = box.top + scrollTop - clientTop;

  // Android sometimes returns slightly off decimal values, so need to round
  return {
    left: vjs.round(left),
    top: vjs.round(top)
  };
};

/**
 * Array functions container
 * @type {Object}
 * @private
 */
vjs.arr = {};

/*
 * Loops through an array and runs a function for each item inside it.
 * @param  {Array}    array       The array
 * @param  {Function} callback    The function to be run for each item
 * @param  {*}        thisArg     The `this` binding of callback
 * @returns {Array}               The array
 * @private
 */
vjs.arr.forEach = function(array, callback, thisArg) {
  if (vjs.obj.isArray(array) && callback instanceof Function) {
    for (var i = 0, len = array.length; i < len; ++i) {
      callback.call(thisArg || vjs, array[i], i, array);
    }
  }

  return array;
};
/**
 * Utility functions namespace
 * @namespace
 * @type {Object}
 */
vjs.util = {};

/**
 * Merge two options objects, recursively merging any plain object properties as
 * well.  Previously `deepMerge`
 *
 * @param  {Object} obj1 Object to override values in
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object -- obj1 and obj2 will be untouched
 */
vjs.util.mergeOptions = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not overwriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (obj2.hasOwnProperty(key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.util.mergeOptions(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};/**
 * @fileoverview Player Component - Base class for all UI objects
 *
 */

/**
 * Base UI Component class
 *
 * Components are embeddable UI objects that are represented by both a
 * javascript object and an element in the DOM. They can be children of other
 * components, and can have many children themselves.
 *
 *     // adding a button to the player
 *     var button = player.addChild('button');
 *     button.el(); // -> button element
 *
 *     <div class="video-js">
 *       <div class="vjs-button">Button</div>
 *     </div>
 *
 * Components are also event emitters.
 *
 *     button.on('click', function(){
 *       console.log('Button Clicked!');
 *     });
 *
 *     button.trigger('customevent');
 *
 * @param {Object} player  Main Player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.CoreObject
 */
vjs.Component = vjs.CoreObject.extend({
  /**
   * the constructor function for the class
   *
   * @constructor
   */
  init: function(player, options, ready){
    this.player_ = player;

    // Make a copy of prototype.options_ to protect against overriding global defaults
    this.options_ = vjs.obj.copy(this.options_);

    // Updated options with supplied options
    options = this.options(options);

    // Get ID from options, element, or create using player ID and unique ID
    this.id_ = options['id'] || ((options['el'] && options['el']['id']) ? options['el']['id'] : player.id() + '_component_' + vjs.guid++ );

    this.name_ = options['name'] || null;

    // Create element if one wasn't provided in options
    this.el_ = options['el'] || this.createEl();

    this.children_ = [];
    this.childIndex_ = {};
    this.childNameIndex_ = {};

    // Add any child components in options
    this.initChildren();

    this.ready(ready);
    // Don't want to trigger ready here or it will before init is actually
    // finished for all children that run this constructor

    if (options.reportTouchActivity !== false) {
      this.enableTouchActivity();
    }
  }
});

/**
 * Dispose of the component and all child components
 */
vjs.Component.prototype.dispose = function(){
  this.trigger({ type: 'dispose', 'bubbles': false });

  // Dispose all children.
  if (this.children_) {
    for (var i = this.children_.length - 1; i >= 0; i--) {
      if (this.children_[i].dispose) {
        this.children_[i].dispose();
      }
    }
  }

  // Delete child references
  this.children_ = null;
  this.childIndex_ = null;
  this.childNameIndex_ = null;

  // Remove all event listeners.
  this.off();

  // Remove element from DOM
  if (this.el_.parentNode) {
    this.el_.parentNode.removeChild(this.el_);
  }

  vjs.removeData(this.el_);
  this.el_ = null;
};

/**
 * Reference to main player instance
 *
 * @type {vjs.Player}
 * @private
 */
vjs.Component.prototype.player_ = true;

/**
 * Return the component's player
 *
 * @return {vjs.Player}
 */
vjs.Component.prototype.player = function(){
  return this.player_;
};

/**
 * The component's options object
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.options_;

/**
 * Deep merge of options objects
 *
 * Whenever a property is an object on both options objects
 * the two properties will be merged using vjs.obj.deepMerge.
 *
 * This is used for merging options for child components. We
 * want it to be easy to override individual options on a child
 * component without having to rewrite all the other default options.
 *
 *     Parent.prototype.options_ = {
 *       children: {
 *         'childOne': { 'foo': 'bar', 'asdf': 'fdsa' },
 *         'childTwo': {},
 *         'childThree': {}
 *       }
 *     }
 *     newOptions = {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'abc': '123' }
 *         'childTwo': null,
 *         'childFour': {}
 *       }
 *     }
 *
 *     this.options(newOptions);
 *
 * RESULT
 *
 *     {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'asdf': 'fdsa', 'abc': '123' },
 *         'childTwo': null, // Disabled. Won't be initialized.
 *         'childThree': {},
 *         'childFour': {}
 *       }
 *     }
 *
 * @param  {Object} obj Object of new option values
 * @return {Object}     A NEW object of this.options_ and obj merged
 */
vjs.Component.prototype.options = function(obj){
  if (obj === undefined) return this.options_;

  return this.options_ = vjs.util.mergeOptions(this.options_, obj);
};

/**
 * The DOM element for the component
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.el_;

/**
 * Create the component's DOM element
 *
 * @param  {String=} tagName  Element's node type. e.g. 'div'
 * @param  {Object=} attributes An object of element attributes that should be set on the element
 * @return {Element}
 */
vjs.Component.prototype.createEl = function(tagName, attributes){
  return vjs.createEl(tagName, attributes);
};

vjs.Component.prototype.localize = function(string){
  var lang = this.player_.language(),
      languages = this.player_.languages();
  if (languages && languages[lang] && languages[lang][string]) {
    return languages[lang][string];
  }
  return string;
};

/**
 * Get the component's DOM element
 *
 *     var domEl = myComponent.el();
 *
 * @return {Element}
 */
vjs.Component.prototype.el = function(){
  return this.el_;
};

/**
 * An optional element where, if defined, children will be inserted instead of
 * directly in `el_`
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.contentEl_;

/**
 * Return the component's DOM element for embedding content.
 * Will either be el_ or a new element defined in createEl.
 *
 * @return {Element}
 */
vjs.Component.prototype.contentEl = function(){
  return this.contentEl_ || this.el_;
};

/**
 * The ID for the component
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.id_;

/**
 * Get the component's ID
 *
 *     var id = myComponent.id();
 *
 * @return {String}
 */
vjs.Component.prototype.id = function(){
  return this.id_;
};

/**
 * The name for the component. Often used to reference the component.
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.name_;

/**
 * Get the component's name. The name is often used to reference the component.
 *
 *     var name = myComponent.name();
 *
 * @return {String}
 */
vjs.Component.prototype.name = function(){
  return this.name_;
};

/**
 * Array of child components
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.children_;

/**
 * Get an array of all child components
 *
 *     var kids = myComponent.children();
 *
 * @return {Array} The children
 */
vjs.Component.prototype.children = function(){
  return this.children_;
};

/**
 * Object of child components by ID
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childIndex_;

/**
 * Returns a child component with the provided ID
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChildById = function(id){
  return this.childIndex_[id];
};

/**
 * Object of child components by name
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childNameIndex_;

/**
 * Returns a child component with the provided name
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChild = function(name){
  return this.childNameIndex_[name];
};

/**
 * Adds a child component inside this component
 *
 *     myComponent.el();
 *     // -> <div class='my-component'></div>
 *     myComonent.children();
 *     // [empty array]
 *
 *     var myButton = myComponent.addChild('MyButton');
 *     // -> <div class='my-component'><div class="my-button">myButton<div></div>
 *     // -> myButton === myComonent.children()[0];
 *
 * Pass in options for child constructors and options for children of the child
 *
 *     var myButton = myComponent.addChild('MyButton', {
 *       text: 'Press Me',
 *       children: {
 *         buttonChildExample: {
 *           buttonChildOption: true
 *         }
 *       }
 *     });
 *
 * @param {String|vjs.Component} child The class name or instance of a child to add
 * @param {Object=} options Options, including options to be passed to children of the child.
 * @return {vjs.Component} The child component (created by this process if a string was used)
 * @suppress {accessControls|checkRegExp|checkTypes|checkVars|const|constantProperty|deprecated|duplicate|es5Strict|fileoverviewTags|globalThis|invalidCasts|missingProperties|nonStandardJsDocs|strictModuleDepCheck|undefinedNames|undefinedVars|unknownDefines|uselessCode|visibility}
 */
vjs.Component.prototype.addChild = function(child, options){
  var component, componentClass, componentName, componentId;

  // If string, create new component with options
  if (typeof child === 'string') {

    componentName = child;

    // Make sure options is at least an empty object to protect against errors
    options = options || {};

    // Assume name of set is a lowercased name of the UI Class (PlayButton, etc.)
    componentClass = options['componentClass'] || vjs.capitalize(componentName);

    // Set name through options
    options['name'] = componentName;

    // Create a new object & element for this controls set
    // If there's no .player_, this is a player
    // Closure Compiler throws an 'incomplete alias' warning if we use the vjs variable directly.
    // Every class should be exported, so this should never be a problem here.
    component = new window['videojs'][componentClass](this.player_ || this, options);

  // child is a component instance
  } else {
    component = child;
  }

  this.children_.push(component);

  if (typeof component.id === 'function') {
    this.childIndex_[component.id()] = component;
  }

  // If a name wasn't used to create the component, check if we can use the
  // name function of the component
  componentName = componentName || (component.name && component.name());

  if (componentName) {
    this.childNameIndex_[componentName] = component;
  }

  // Add the UI object's element to the container div (box)
  // Having an element is not required
  if (typeof component['el'] === 'function' && component['el']()) {
    this.contentEl().appendChild(component['el']());
  }

  // Return so it can stored on parent object if desired.
  return component;
};

/**
 * Remove a child component from this component's list of children, and the
 * child component's element from this component's element
 *
 * @param  {vjs.Component} component Component to remove
 */
vjs.Component.prototype.removeChild = function(component){
  if (typeof component === 'string') {
    component = this.getChild(component);
  }

  if (!component || !this.children_) return;

  var childFound = false;
  for (var i = this.children_.length - 1; i >= 0; i--) {
    if (this.children_[i] === component) {
      childFound = true;
      this.children_.splice(i,1);
      break;
    }
  }

  if (!childFound) return;

  this.childIndex_[component.id] = null;
  this.childNameIndex_[component.name] = null;

  var compEl = component.el();
  if (compEl && compEl.parentNode === this.contentEl()) {
    this.contentEl().removeChild(component.el());
  }
};

/**
 * Add and initialize default child components from options
 *
 *     // when an instance of MyComponent is created, all children in options
 *     // will be added to the instance by their name strings and options
 *     MyComponent.prototype.options_.children = {
 *       myChildComponent: {
 *         myChildOption: true
 *       }
 *     }
 *
 *     // Or when creating the component
 *     var myComp = new MyComponent(player, {
 *       children: {
 *         myChildComponent: {
 *           myChildOption: true
 *         }
 *       }
 *     });
 *
 * The children option can also be an Array of child names or
 * child options objects (that also include a 'name' key).
 *
 *     var myComp = new MyComponent(player, {
 *       children: [
 *         'button',
 *         {
 *           name: 'button',
 *           someOtherOption: true
 *         }
 *       ]
 *     });
 *
 */
vjs.Component.prototype.initChildren = function(){
  var parent, children, child, name, opts;

  parent = this;
  children = this.options()['children'];

  if (children) {
    // Allow for an array of children details to passed in the options
    if (vjs.obj.isArray(children)) {
      for (var i = 0; i < children.length; i++) {
        child = children[i];

        if (typeof child == 'string') {
          name = child;
          opts = {};
        } else {
          name = child.name;
          opts = child;
        }

        parent[name] = parent.addChild(name, opts);
      }
    } else {
      vjs.obj.each(children, function(name, opts){
        // Allow for disabling default components
        // e.g. vjs.options['children']['posterImage'] = false
        if (opts === false) return;

        // Set property name on player. Could cause conflicts with other prop names, but it's worth making refs easy.
        parent[name] = parent.addChild(name, opts);
      });
    }
  }
};

/**
 * Allows sub components to stack CSS class names
 *
 * @return {String} The constructed class name
 */
vjs.Component.prototype.buildCSSClass = function(){
    // Child classes can include a function that does:
    // return 'CLASS NAME' + this._super();
    return '';
};

/* Events
============================================================================= */

/**
 * Add an event listener to this component's element
 *
 *     var myFunc = function(){
 *       var myPlayer = this;
 *       // Do something when the event is fired
 *     };
 *
 *     myPlayer.on("eventName", myFunc);
 *
 * The context will be the component.
 *
 * @param  {String}   type The event type e.g. 'click'
 * @param  {Function} fn   The event listener
 * @return {vjs.Component} self
 */
vjs.Component.prototype.on = function(type, fn){
  vjs.on(this.el_, type, vjs.bind(this, fn));
  return this;
};

/**
 * Remove an event listener from the component's element
 *
 *     myComponent.off("eventName", myFunc);
 *
 * @param  {String=}   type Event type. Without type it will remove all listeners.
 * @param  {Function=} fn   Event listener. Without fn it will remove all listeners for a type.
 * @return {vjs.Component}
 */
vjs.Component.prototype.off = function(type, fn){
  vjs.off(this.el_, type, fn);
  return this;
};

/**
 * Add an event listener to be triggered only once and then removed
 *
 * @param  {String}   type Event type
 * @param  {Function} fn   Event listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.one = function(type, fn) {
  vjs.one(this.el_, type, vjs.bind(this, fn));
  return this;
};

/**
 * Trigger an event on an element
 *
 *     myComponent.trigger('eventName');
 *     myComponent.trigger({'type':'eventName'});
 *
 * @param  {Event|Object|String} event  A string (the type) or an event object with a type attribute
 * @return {vjs.Component}       self
 */
vjs.Component.prototype.trigger = function(event){
  vjs.trigger(this.el_, event);
  return this;
};

/* Ready
================================================================================ */
/**
 * Is the component loaded
 * This can mean different things depending on the component.
 *
 * @private
 * @type {Boolean}
 */
vjs.Component.prototype.isReady_;

/**
 * Trigger ready as soon as initialization is finished
 *
 * Allows for delaying ready. Override on a sub class prototype.
 * If you set this.isReadyOnInitFinish_ it will affect all components.
 * Specially used when waiting for the Flash player to asynchrnously load.
 *
 * @type {Boolean}
 * @private
 */
vjs.Component.prototype.isReadyOnInitFinish_ = true;

/**
 * List of ready listeners
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.readyQueue_;

/**
 * Bind a listener to the component's ready state
 *
 * Different from event listeners in that if the ready event has already happend
 * it will trigger the function immediately.
 *
 * @param  {Function} fn Ready listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.ready = function(fn){
  if (fn) {
    if (this.isReady_) {
      fn.call(this);
    } else {
      if (this.readyQueue_ === undefined) {
        this.readyQueue_ = [];
      }
      this.readyQueue_.push(fn);
    }
  }
  return this;
};

/**
 * Trigger the ready listeners
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.triggerReady = function(){
  this.isReady_ = true;

  var readyQueue = this.readyQueue_;

  if (readyQueue && readyQueue.length > 0) {

    for (var i = 0, j = readyQueue.length; i < j; i++) {
      readyQueue[i].call(this);
    }

    // Reset Ready Queue
    this.readyQueue_ = [];

    // Allow for using event listeners also, in case you want to do something everytime a source is ready.
    this.trigger('ready');
  }
};

/* Display
============================================================================= */

/**
 * Add a CSS class name to the component's element
 *
 * @param {String} classToAdd Classname to add
 * @return {vjs.Component}
 */
vjs.Component.prototype.addClass = function(classToAdd){
  vjs.addClass(this.el_, classToAdd);
  return this;
};

/**
 * Remove a CSS class name from the component's element
 *
 * @param {String} classToRemove Classname to remove
 * @return {vjs.Component}
 */
vjs.Component.prototype.removeClass = function(classToRemove){
  vjs.removeClass(this.el_, classToRemove);
  return this;
};

/**
 * Show the component element if hidden
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.show = function(){
  this.el_.style.display = 'block';
  return this;
};

/**
 * Hide the component element if currently showing
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.hide = function(){
  this.el_.style.display = 'none';
  return this;
};

/**
 * Lock an item in its visible state
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.lockShowing = function(){
  this.addClass('vjs-lock-showing');
  return this;
};

/**
 * Unlock an item to be hidden
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.unlockShowing = function(){
  this.removeClass('vjs-lock-showing');
  return this;
};

/**
 * Disable component by making it unshowable
 *
 * Currently private because we're movign towards more css-based states.
 * @private
 */
vjs.Component.prototype.disable = function(){
  this.hide();
  this.show = function(){};
};

/**
 * Set or get the width of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num   Optional width number
 * @param  {Boolean} skipListeners Skip the 'resize' event trigger
 * @return {vjs.Component} This component, when setting the width
 * @return {Number|String} The width, when getting
 */
vjs.Component.prototype.width = function(num, skipListeners){
  return this.dimension('width', num, skipListeners);
};

/**
 * Get or set the height of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num     New component height
 * @param  {Boolean=} skipListeners Skip the resize event trigger
 * @return {vjs.Component} This component, when setting the height
 * @return {Number|String} The height, when getting
 */
vjs.Component.prototype.height = function(num, skipListeners){
  return this.dimension('height', num, skipListeners);
};

/**
 * Set both width and height at the same time
 *
 * @param  {Number|String} width
 * @param  {Number|String} height
 * @return {vjs.Component} The component
 */
vjs.Component.prototype.dimensions = function(width, height){
  // Skip resize listeners on width for optimization
  return this.width(width, true).height(height);
};

/**
 * Get or set width or height
 *
 * This is the shared code for the width() and height() methods.
 * All for an integer, integer + 'px' or integer + '%';
 *
 * Known issue: Hidden elements officially have a width of 0. We're defaulting
 * to the style.width value and falling back to computedStyle which has the
 * hidden element issue. Info, but probably not an efficient fix:
 * http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/
 *
 * @param  {String} widthOrHeight  'width' or 'height'
 * @param  {Number|String=} num     New dimension
 * @param  {Boolean=} skipListeners Skip resize event trigger
 * @return {vjs.Component} The component if a dimension was set
 * @return {Number|String} The dimension if nothing was set
 * @private
 */
vjs.Component.prototype.dimension = function(widthOrHeight, num, skipListeners){
  if (num !== undefined) {
    if (num === null || vjs.isNaN(num)) {
      num = 0;
    }

    // Check if using css width/height (% or px) and adjust
    if ((''+num).indexOf('%') !== -1 || (''+num).indexOf('px') !== -1) {
      this.el_.style[widthOrHeight] = num;
    } else if (num === 'auto') {
      this.el_.style[widthOrHeight] = '';
    } else {
      this.el_.style[widthOrHeight] = num+'px';
    }

    // skipListeners allows us to avoid triggering the resize event when setting both width and height
    if (!skipListeners) { this.trigger('resize'); }

    // Return component
    return this;
  }

  // Not setting a value, so getting it
  // Make sure element exists
  if (!this.el_) return 0;

  // Get dimension value from style
  var val = this.el_.style[widthOrHeight];
  var pxIndex = val.indexOf('px');
  if (pxIndex !== -1) {
    // Return the pixel value with no 'px'
    return parseInt(val.slice(0,pxIndex), 10);

  // No px so using % or no style was set, so falling back to offsetWidth/height
  // If component has display:none, offset will return 0
  // TODO: handle display:none and no dimension style using px
  } else {

    return parseInt(this.el_['offset'+vjs.capitalize(widthOrHeight)], 10);

    // ComputedStyle version.
    // Only difference is if the element is hidden it will return
    // the percent value (e.g. '100%'')
    // instead of zero like offsetWidth returns.
    // var val = vjs.getComputedStyleValue(this.el_, widthOrHeight);
    // var pxIndex = val.indexOf('px');

    // if (pxIndex !== -1) {
    //   return val.slice(0, pxIndex);
    // } else {
    //   return val;
    // }
  }
};

/**
 * Fired when the width and/or height of the component changes
 * @event resize
 */
vjs.Component.prototype.onResize;

/**
 * Emit 'tap' events when touch events are supported
 *
 * This is used to support toggling the controls through a tap on the video.
 *
 * We're requireing them to be enabled because otherwise every component would
 * have this extra overhead unnecessarily, on mobile devices where extra
 * overhead is especially bad.
 * @private
 */
vjs.Component.prototype.emitTapEvents = function(){
  var touchStart, firstTouch, touchTime, couldBeTap, noTap,
      xdiff, ydiff, touchDistance, tapMovementThreshold;

  // Track the start time so we can determine how long the touch lasted
  touchStart = 0;
  firstTouch = null;

  // Maximum movement allowed during a touch event to still be considered a tap
  tapMovementThreshold = 22;

  this.on('touchstart', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length === 1) {
      firstTouch = event.touches[0];
      // Record start time so we can detect a tap vs. "touch and hold"
      touchStart = new Date().getTime();
      // Reset couldBeTap tracking
      couldBeTap = true;
    }
  });

  this.on('touchmove', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length > 1) {
      couldBeTap = false;
    } else if (firstTouch) {
      // Some devices will throw touchmoves for all but the slightest of taps.
      // So, if we moved only a small distance, this could still be a tap
      xdiff = event.touches[0].pageX - firstTouch.pageX;
      ydiff = event.touches[0].pageY - firstTouch.pageY;
      touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);
      if (touchDistance > tapMovementThreshold) {
        couldBeTap = false;
      }
    }
  });

  noTap = function(){
    couldBeTap = false;
  };
  // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s
  this.on('touchleave', noTap);
  this.on('touchcancel', noTap);

  // When the touch ends, measure how long it took and trigger the appropriate
  // event
  this.on('touchend', function(event) {
    firstTouch = null;
    // Proceed only if the touchmove/leave/cancel event didn't happen
    if (couldBeTap === true) {
      // Measure how long the touch lasted
      touchTime = new Date().getTime() - touchStart;
      // The touch needs to be quick in order to consider it a tap
      if (touchTime < 250) {
        event.preventDefault(); // Don't let browser turn this into a click
        this.trigger('tap');
        // It may be good to copy the touchend event object and change the
        // type to tap, if the other event properties aren't exact after
        // vjs.fixEvent runs (e.g. event.target)
      }
    }
  });
};

/**
 * Report user touch activity when touch events occur
 *
 * User activity is used to determine when controls should show/hide. It's
 * relatively simple when it comes to mouse events, because any mouse event
 * should show the controls. So we capture mouse events that bubble up to the
 * player and report activity when that happens.
 *
 * With touch events it isn't as easy. We can't rely on touch events at the
 * player level, because a tap (touchstart + touchend) on the video itself on
 * mobile devices is meant to turn controls off (and on). User activity is
 * checked asynchronously, so what could happen is a tap event on the video
 * turns the controls off, then the touchend event bubbles up to the player,
 * which if it reported user activity, would turn the controls right back on.
 * (We also don't want to completely block touch events from bubbling up)
 *
 * Also a touchmove, touch+hold, and anything other than a tap is not supposed
 * to turn the controls back on on a mobile device.
 *
 * Here we're setting the default component behavior to report user activity
 * whenever touch events happen, and this can be turned off by components that
 * want touch events to act differently.
 */
vjs.Component.prototype.enableTouchActivity = function() {
  var report, touchHolding, touchEnd;

  // listener for reporting that the user is active
  report = vjs.bind(this.player(), this.player().reportUserActivity);

  this.on('touchstart', function() {
    report();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    clearInterval(touchHolding);
    // report at the same interval as activityCheck
    touchHolding = setInterval(report, 250);
  });

  touchEnd = function(event) {
    report();
    // stop the interval that maintains activity if the touch is holding
    clearInterval(touchHolding);
  };

  this.on('touchmove', report);
  this.on('touchend', touchEnd);
  this.on('touchcancel', touchEnd);
};

/* Button - Base class for all buttons
================================================================================ */
/**
 * Base class for all buttons
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Button = vjs.Component.extend({
  /**
   * @constructor
   * @inheritDoc
   */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.emitTapEvents();

    this.on('tap', this.onClick);
    this.on('click', this.onClick);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
  }
});

vjs.Button.prototype.createEl = function(type, props){
  var el;

  // Add standard Aria and Tabindex info
  props = vjs.obj.merge({
    className: this.buildCSSClass(),
    'role': 'button',
    'aria-live': 'polite', // let the screen reader user know that the text of the button may change
    tabIndex: 0
  }, props);

  el = vjs.Component.prototype.createEl.call(this, type, props);

  // if innerHTML hasn't been overridden (bigPlayButton), add content elements
  if (!props.innerHTML) {
    this.contentEl_ = vjs.createEl('div', {
      className: 'vjs-control-content'
    });

    this.controlText_ = vjs.createEl('span', {
      className: 'vjs-control-text',
      innerHTML: this.localize(this.buttonText) || 'Need Text'
    });

    this.contentEl_.appendChild(this.controlText_);
    el.appendChild(this.contentEl_);
  }

  return el;
};

vjs.Button.prototype.buildCSSClass = function(){
  // TODO: Change vjs-control to vjs-button?
  return 'vjs-control ' + vjs.Component.prototype.buildCSSClass.call(this);
};

  // Click - Override with specific functionality for button
vjs.Button.prototype.onClick = function(){};

  // Focus - Add keyboard functionality to element
vjs.Button.prototype.onFocus = function(){
  vjs.on(document, 'keydown', vjs.bind(this, this.onKeyPress));
};

  // KeyPress (document level) - Trigger click when keys are pressed
vjs.Button.prototype.onKeyPress = function(event){
  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    event.preventDefault();
    this.onClick();
  }
};

// Blur - Remove keyboard triggers
vjs.Button.prototype.onBlur = function(){
  vjs.off(document, 'keydown', vjs.bind(this, this.onKeyPress));
};
/* Slider
================================================================================ */
/**
 * The base functionality for sliders like the volume bar and seek bar
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.Slider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Set property names to bar and handle to match with the child Slider class is looking for
    this.bar = this.getChild(this.options_['barName']);
    this.handle = this.getChild(this.options_['handleName']);

    this.on('mousedown', this.onMouseDown);
    this.on('touchstart', this.onMouseDown);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
    this.on('click', this.onClick);

    this.player_.on('controlsvisible', vjs.bind(this, this.update));

    player.on(this.playerEvent, vjs.bind(this, this.update));

    this.boundEvents = {};


    this.boundEvents.move = vjs.bind(this, this.onMouseMove);
    this.boundEvents.end = vjs.bind(this, this.onMouseUp);
  }
});

vjs.Slider.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider';
  props = vjs.obj.merge({
    'role': 'slider',
    'aria-valuenow': 0,
    'aria-valuemin': 0,
    'aria-valuemax': 100,
    tabIndex: 0
  }, props);

  return vjs.Component.prototype.createEl.call(this, type, props);
};

vjs.Slider.prototype.onMouseDown = function(event){
  event.preventDefault();
  vjs.blockTextSelection();
  this.addClass('vjs-sliding');

  vjs.on(document, 'mousemove', this.boundEvents.move);
  vjs.on(document, 'mouseup', this.boundEvents.end);
  vjs.on(document, 'touchmove', this.boundEvents.move);
  vjs.on(document, 'touchend', this.boundEvents.end);

  this.onMouseMove(event);
};

// To be overridden by a subclass
vjs.Slider.prototype.onMouseMove = function(){};

vjs.Slider.prototype.onMouseUp = function() {
  vjs.unblockTextSelection();
  this.removeClass('vjs-sliding');

  vjs.off(document, 'mousemove', this.boundEvents.move, false);
  vjs.off(document, 'mouseup', this.boundEvents.end, false);
  vjs.off(document, 'touchmove', this.boundEvents.move, false);
  vjs.off(document, 'touchend', this.boundEvents.end, false);

  this.update();
};

vjs.Slider.prototype.update = function(){
  // In VolumeBar init we have a setTimeout for update that pops and update to the end of the
  // execution stack. The player is destroyed before then update will cause an error
  if (!this.el_) return;

  // If scrubbing, we could use a cached value to make the handle keep up with the user's mouse.
  // On HTML5 browsers scrubbing is really smooth, but some flash players are slow, so we might want to utilize this later.
  // var progress =  (this.player_.scrubbing) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();

  var barProgress,
      progress = this.getPercent(),
      handle = this.handle,
      bar = this.bar;

  // Protect against no duration and other division issues
  if (isNaN(progress)) { progress = 0; }

  barProgress = progress;

  // If there is a handle, we need to account for the handle in our calculation for progress bar
  // so that it doesn't fall short of or extend past the handle.
  if (handle) {

    var box = this.el_,
        boxWidth = box.offsetWidth,

        handleWidth = handle.el().offsetWidth,

        // The width of the handle in percent of the containing box
        // In IE, widths may not be ready yet causing NaN
        handlePercent = (handleWidth) ? handleWidth / boxWidth : 0,

        // Get the adjusted size of the box, considering that the handle's center never touches the left or right side.
        // There is a margin of half the handle's width on both sides.
        boxAdjustedPercent = 1 - handlePercent,

        // Adjust the progress that we'll use to set widths to the new adjusted box width
        adjustedProgress = progress * boxAdjustedPercent;

    // The bar does reach the left side, so we need to account for this in the bar's width
    barProgress = adjustedProgress + (handlePercent / 2);

    // Move the handle from the left based on the adjected progress
    handle.el().style.left = vjs.round(adjustedProgress * 100, 2) + '%';
  }

  // Set the new bar width
  if (bar) {
    bar.el().style.width = vjs.round(barProgress * 100, 2) + '%';
  }
};

vjs.Slider.prototype.calculateDistance = function(event){
  var el, box, boxX, boxY, boxW, boxH, handle, pageX, pageY;

  el = this.el_;
  box = vjs.findPosition(el);
  boxW = boxH = el.offsetWidth;
  handle = this.handle;

  if (this.options()['vertical']) {
    boxY = box.top;

    if (event.changedTouches) {
      pageY = event.changedTouches[0].pageY;
    } else {
      pageY = event.pageY;
    }

    if (handle) {
      var handleH = handle.el().offsetHeight;
      // Adjusted X and Width, so handle doesn't go outside the bar
      boxY = boxY + (handleH / 2);
      boxH = boxH - handleH;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, ((boxY - pageY) + boxH) / boxH));

  } else {
    boxX = box.left;

    if (event.changedTouches) {
      pageX = event.changedTouches[0].pageX;
    } else {
      pageX = event.pageX;
    }

    if (handle) {
      var handleW = handle.el().offsetWidth;

      // Adjusted X and Width, so handle doesn't go outside the bar
      boxX = boxX + (handleW / 2);
      boxW = boxW - handleW;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, (pageX - boxX) / boxW));
  }
};

vjs.Slider.prototype.onFocus = function(){
  vjs.on(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

vjs.Slider.prototype.onKeyPress = function(event){
  if (event.which == 37 || event.which == 40) { // Left and Down Arrows
    event.preventDefault();
    this.stepBack();
  } else if (event.which == 38 || event.which == 39) { // Up and Right Arrows
    event.preventDefault();
    this.stepForward();
  }
};

vjs.Slider.prototype.onBlur = function(){
  vjs.off(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

/**
 * Listener for click events on slider, used to prevent clicks
 *   from bubbling up to parent elements like button menus.
 * @param  {Object} event Event object
 */
vjs.Slider.prototype.onClick = function(event){
  event.stopImmediatePropagation();
  event.preventDefault();
};

/**
 * SeekBar Behavior includes play progress bar, and seek handle
 * Needed so it can determine seek position based on handle position/size
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SliderHandle = vjs.Component.extend();

/**
 * Default value of the slider
 *
 * @type {Number}
 * @private
 */
vjs.SliderHandle.prototype.defaultValue = 0;

/** @inheritDoc */
vjs.SliderHandle.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider-handle';
  props = vjs.obj.merge({
    innerHTML: '<span class="vjs-control-text">'+this.defaultValue+'</span>'
  }, props);

  return vjs.Component.prototype.createEl.call(this, 'div', props);
};
/* Menu
================================================================================ */
/**
 * The Menu component is used to build pop up menus, including subtitle and
 * captions selection menus.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Menu = vjs.Component.extend();

/**
 * Add a menu item to the menu
 * @param {Object|String} component Component or component type to add
 */
vjs.Menu.prototype.addItem = function(component){
  this.addChild(component);
  component.on('click', vjs.bind(this, function(){
    this.unlockShowing();
  }));
};

/** @inheritDoc */
vjs.Menu.prototype.createEl = function(){
  var contentElType = this.options().contentElType || 'ul';
  this.contentEl_ = vjs.createEl(contentElType, {
    className: 'vjs-menu-content'
  });
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    append: this.contentEl_,
    className: 'vjs-menu'
  });
  el.appendChild(this.contentEl_);

  // Prevent clicks from bubbling up. Needed for Menu Buttons,
  // where a click on the parent is significant
  vjs.on(el, 'click', function(event){
    event.preventDefault();
    event.stopImmediatePropagation();
  });

  return el;
};

/**
 * The component for a menu item. `<li>`
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.MenuItem = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);
    this.selected(options['selected']);
  }
});

/** @inheritDoc */
vjs.MenuItem.prototype.createEl = function(type, props){
  return vjs.Button.prototype.createEl.call(this, 'li', vjs.obj.merge({
    className: 'vjs-menu-item',
    innerHTML: this.options_['label']
  }, props));
};

/**
 * Handle a click on the menu item, and set it to selected
 */
vjs.MenuItem.prototype.onClick = function(){
  this.selected(true);
};

/**
 * Set this menu item as selected or not
 * @param  {Boolean} selected
 */
vjs.MenuItem.prototype.selected = function(selected){
  if (selected) {
    this.addClass('vjs-selected');
    this.el_.setAttribute('aria-selected',true);
  } else {
    this.removeClass('vjs-selected');
    this.el_.setAttribute('aria-selected',false);
  }
};


/**
 * A button class with a popup menu
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MenuButton = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.menu = this.createMenu();

    // Add list to element
    this.addChild(this.menu);

    // Automatically hide empty menu buttons
    if (this.items && this.items.length === 0) {
      this.hide();
    }

    this.on('keyup', this.onKeyPress);
    this.el_.setAttribute('aria-haspopup', true);
    this.el_.setAttribute('role', 'button');
  }
});

/**
 * Track the state of the menu button
 * @type {Boolean}
 * @private
 */
vjs.MenuButton.prototype.buttonPressed_ = false;

vjs.MenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_);

  // Add a title list item to the top
  if (this.options().title) {
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.options().title),
      tabindex: -1
    }));
  }

  this.items = this['createItems']();

  if (this.items) {
    // Add menu items to the menu
    for (var i = 0; i < this.items.length; i++) {
      menu.addItem(this.items[i]);
    }
  }

  return menu;
};

/**
 * Create the list of menu items. Specific to each subclass.
 */
vjs.MenuButton.prototype.createItems = function(){};

/** @inheritDoc */
vjs.MenuButton.prototype.buildCSSClass = function(){
  return this.className + ' vjs-menu-button ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// Focus - Add keyboard functionality to element
// This function is not needed anymore. Instead, the keyboard functionality is handled by
// treating the button as triggering a submenu. When the button is pressed, the submenu
// appears. Pressing the button again makes the submenu disappear.
vjs.MenuButton.prototype.onFocus = function(){};
// Can't turn off list display that we turned on with focus, because list would go away.
vjs.MenuButton.prototype.onBlur = function(){};

vjs.MenuButton.prototype.onClick = function(){
  // When you click the button it adds focus, which will show the menu indefinitely.
  // So we'll remove focus when the mouse leaves the button.
  // Focus is needed for tab navigation.
  this.one('mouseout', vjs.bind(this, function(){
    this.menu.unlockShowing();
    this.el_.blur();
  }));
  if (this.buttonPressed_){
    this.unpressButton();
  } else {
    this.pressButton();
  }
};

vjs.MenuButton.prototype.onKeyPress = function(event){
  event.preventDefault();

  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    if (this.buttonPressed_){
      this.unpressButton();
    } else {
      this.pressButton();
    }
  // Check for escape (27) key
  } else if (event.which == 27){
    if (this.buttonPressed_){
      this.unpressButton();
    }
  }
};

vjs.MenuButton.prototype.pressButton = function(){
  this.buttonPressed_ = true;
  this.menu.lockShowing();
  this.el_.setAttribute('aria-pressed', true);
  if (this.items && this.items.length > 0) {
    this.items[0].el().focus(); // set the focus to the title of the submenu
  }
};

vjs.MenuButton.prototype.unpressButton = function(){
  this.buttonPressed_ = false;
  this.menu.unlockShowing();
  this.el_.setAttribute('aria-pressed', false);
};

/**
 * Custom MediaError to mimic the HTML5 MediaError
 * @param {Number} code The media error code
 */
vjs.MediaError = function(code){
  if (typeof code === 'number') {
    this.code = code;
  } else if (typeof code === 'string') {
    // default code is zero, so this is a custom error
    this.message = code;
  } else if (typeof code === 'object') { // object
    vjs.obj.merge(this, code);
  }

  if (!this.message) {
    this.message = vjs.MediaError.defaultMessages[this.code] || '';
  }
};

/**
 * The error code that refers two one of the defined
 * MediaError types
 * @type {Number}
 */
vjs.MediaError.prototype.code = 0;

/**
 * An optional message to be shown with the error.
 * Message is not part of the HTML5 video spec
 * but allows for more informative custom errors.
 * @type {String}
 */
vjs.MediaError.prototype.message = '';

/**
 * An optional status code that can be set by plugins
 * to allow even more detail about the error.
 * For example the HLS plugin might provide the specific
 * HTTP status code that was returned when the error
 * occurred, then allowing a custom error overlay
 * to display more information.
 * @type {[type]}
 */
vjs.MediaError.prototype.status = null;

vjs.MediaError.errorTypes = [
  'MEDIA_ERR_CUSTOM',            // = 0
  'MEDIA_ERR_ABORTED',           // = 1
  'MEDIA_ERR_NETWORK',           // = 2
  'MEDIA_ERR_DECODE',            // = 3
  'MEDIA_ERR_SRC_NOT_SUPPORTED', // = 4
  'MEDIA_ERR_ENCRYPTED'          // = 5
];

vjs.MediaError.defaultMessages = {
  1: 'You aborted the video playback',
  2: 'A network error caused the video download to fail part-way.',
  3: 'The video playback was aborted due to a corruption problem or because the video used features your browser did not support.',
  4: 'The video could not be loaded, either because the server or network failed or because the format is not supported.',
  5: 'The video is encrypted and we do not have the keys to decrypt it.'
};

// Add types as properties on MediaError
// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;
for (var errNum = 0; errNum < vjs.MediaError.errorTypes.length; errNum++) {
  vjs.MediaError[vjs.MediaError.errorTypes[errNum]] = errNum;
  // values should be accessible on both the class and instance
  vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]] = errNum;
}
(function(){
  var apiMap, specApi, browserApi, i;

  /**
   * Store the browser-specifc methods for the fullscreen API
   * @type {Object|undefined}
   * @private
   */
  vjs.browser.fullscreenAPI;

  // browser API methods
  // map approach from Screenful.js - https://github.com/sindresorhus/screenfull.js
  apiMap = [
    // Spec: https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html
    [
      'requestFullscreen',
      'exitFullscreen',
      'fullscreenElement',
      'fullscreenEnabled',
      'fullscreenchange',
      'fullscreenerror'
    ],
    // WebKit
    [
      'webkitRequestFullscreen',
      'webkitExitFullscreen',
      'webkitFullscreenElement',
      'webkitFullscreenEnabled',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Old WebKit (Safari 5.1)
    [
      'webkitRequestFullScreen',
      'webkitCancelFullScreen',
      'webkitCurrentFullScreenElement',
      'webkitCancelFullScreen',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Mozilla
    [
      'mozRequestFullScreen',
      'mozCancelFullScreen',
      'mozFullScreenElement',
      'mozFullScreenEnabled',
      'mozfullscreenchange',
      'mozfullscreenerror'
    ],
    // Microsoft
    [
      'msRequestFullscreen',
      'msExitFullscreen',
      'msFullscreenElement',
      'msFullscreenEnabled',
      'MSFullscreenChange',
      'MSFullscreenError'
    ]
  ];

  specApi = apiMap[0];

  // determine the supported set of functions
  for (i=0; i<apiMap.length; i++) {
    // check for exitFullscreen function
    if (apiMap[i][1] in document) {
      browserApi = apiMap[i];
      break;
    }
  }

  // map the browser API names to the spec API names
  // or leave vjs.browser.fullscreenAPI undefined
  if (browserApi) {
    vjs.browser.fullscreenAPI = {};

    for (i=0; i<browserApi.length; i++) {
      vjs.browser.fullscreenAPI[specApi[i]] = browserApi[i];
    }
  }

})();
/**
 * An instance of the `vjs.Player` class is created when any of the Video.js setup methods are used to initialize a video.
 *
 * ```js
 * var myPlayer = videojs('example_video_1');
 * ```
 *
 * In the following example, the `data-setup` attribute tells the Video.js library to create a player instance when the library is ready.
 *
 * ```html
 * <video id="example_video_1" data-setup='{}' controls>
 *   <source src="my-source.mp4" type="video/mp4">
 * </video>
 * ```
 *
 * After an instance has been created it can be accessed globally using `Video('example_video_1')`.
 *
 * @class
 * @extends vjs.Component
 */
vjs.Player = vjs.Component.extend({

  /**
   * player's constructor function
   *
   * @constructs
   * @method init
   * @param {Element} tag        The original video tag used for configuring options
   * @param {Object=} options    Player options
   * @param {Function=} ready    Ready callback function
   */
  init: function(tag, options, ready){
    this.tag = tag; // Store the original tag used to set options

    // Make sure tag ID exists
    tag.id = tag.id || 'vjs_video_' + vjs.guid++;

    // Store the tag attributes used to restore html5 element
    this.tagAttributes = tag && vjs.getElementAttributes(tag);

    // Set Options
    // The options argument overrides options set in the video tag
    // which overrides globally set options.
    // This latter part coincides with the load order
    // (tag must exist before Player)
    options = vjs.obj.merge(this.getTagSettings(tag), options);

    // Update Current Language
    this.language_ = options['language'] || vjs.options['language'];

    // Update Supported Languages
    this.languages_ = options['languages'] || vjs.options['languages'];

    // Cache for video property values.
    this.cache_ = {};

    // Set poster
    this.poster_ = options['poster'];
    // Set controls
    this.controls_ = options['controls'];
    // Original tag settings stored in options
    // now remove immediately so native controls don't flash.
    // May be turned back on by HTML5 tech if nativeControlsForTouch is true
    tag.controls = false;

    // we don't want the player to report touch activity on itself
    // see enableTouchActivity in Component
    options.reportTouchActivity = false;

    // Run base component initializing with new options.
    // Builds the element through createEl()
    // Inits and embeds any child components in opts
    vjs.Component.call(this, this, options, ready);

    // Update controls className. Can't do this when the controls are initially
    // set because the element doesn't exist yet.
    if (this.controls()) {
      this.addClass('vjs-controls-enabled');
    } else {
      this.addClass('vjs-controls-disabled');
    }

    // TODO: Make this smarter. Toggle user state between touching/mousing
    // using events, since devices can have both touch and mouse events.
    // if (vjs.TOUCH_ENABLED) {
    //   this.addClass('vjs-touch-enabled');
    // }

    // Make player easily findable by ID
    vjs.players[this.id_] = this;

    if (options['plugins']) {
      vjs.obj.each(options['plugins'], function(key, val){
        this[key](val);
      }, this);
    }

    this.listenForUserActivity();
  }
});

/**
 * The players's stored language code
 *
 * @type {String}
 * @private
 */
vjs.Player.prototype.language_;

/**
 * The player's language code
 * @param  {String} languageCode  The locale string
 * @return {String}             The locale string when getting
 * @return {vjs.Player}         self, when setting
 */
vjs.Player.prototype.language = function (languageCode) {
  if (languageCode === undefined) {
    return this.language_;
  }

  this.language_ = languageCode;
  return this;
};

/**
 * The players's stored language dictionary
 *
 * @type {Object}
 * @private
 */
vjs.Player.prototype.languages_;

vjs.Player.prototype.languages = function(){
  return this.languages_;
};

/**
 * Player instance options, surfaced using vjs.options
 * vjs.options = vjs.Player.prototype.options_
 * Make changes in vjs.options, not here.
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 * @private
 */
vjs.Player.prototype.options_ = vjs.options;

/**
 * Destroys the video player and does any necessary cleanup
 *
 *     myPlayer.dispose();
 *
 * This is especially helpful if you are dynamically adding and removing videos
 * to/from the DOM.
 */
vjs.Player.prototype.dispose = function(){
  this.trigger('dispose');
  // prevent dispose from being called twice
  this.off('dispose');

  // Kill reference to this player
  vjs.players[this.id_] = null;
  if (this.tag && this.tag['player']) { this.tag['player'] = null; }
  if (this.el_ && this.el_['player']) { this.el_['player'] = null; }

  if (this.tech) { this.tech.dispose(); }

  // Component dispose
  vjs.Component.prototype.dispose.call(this);
};

vjs.Player.prototype.getTagSettings = function(tag){
  var options = {
    'sources': [],
    'tracks': []
  };

  vjs.obj.merge(options, vjs.getElementAttributes(tag));

  // Get tag children settings
  if (tag.hasChildNodes()) {
    var children, child, childName, i, j;

    children = tag.childNodes;

    for (i=0,j=children.length; i<j; i++) {
      child = children[i];
      // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/
      childName = child.nodeName.toLowerCase();
      if (childName === 'source') {
        options['sources'].push(vjs.getElementAttributes(child));
      } else if (childName === 'track') {
        options['tracks'].push(vjs.getElementAttributes(child));
      }
    }
  }

  return options;
};

vjs.Player.prototype.createEl = function(){
  var
    el = this.el_ = vjs.Component.prototype.createEl.call(this, 'div'),
    tag = this.tag,
    attrs;

  // Remove width/height attrs from tag so CSS can make it 100% width/height
  tag.removeAttribute('width');
  tag.removeAttribute('height');
  // Empty video tag tracks so the built-in player doesn't use them also.
  // This may not be fast enough to stop HTML5 browsers from reading the tags
  // so we'll need to turn off any default tracks if we're manually doing
  // captions and subtitles. videoElement.textTracks
  if (tag.hasChildNodes()) {
    var nodes, nodesLength, i, node, nodeName, removeNodes;

    nodes = tag.childNodes;
    nodesLength = nodes.length;
    removeNodes = [];

    while (nodesLength--) {
      node = nodes[nodesLength];
      nodeName = node.nodeName.toLowerCase();
      if (nodeName === 'track') {
        removeNodes.push(node);
      }
    }

    for (i=0; i<removeNodes.length; i++) {
      tag.removeChild(removeNodes[i]);
    }
  }

  // Copy over all the attributes from the tag, including ID and class
  // ID will now reference player box, not the video tag
  attrs = vjs.getElementAttributes(tag);
  vjs.obj.each(attrs, function(attr) {
    el.setAttribute(attr, attrs[attr]);
  });

  // Update tag id/class for use as HTML5 playback tech
  // Might think we should do this after embedding in container so .vjs-tech class
  // doesn't flash 100% width/height, but class only applies with .video-js parent
  tag.id += '_html5_api';
  tag.className = 'vjs-tech';

  // Make player findable on elements
  tag['player'] = el['player'] = this;
  // Default state of video is paused
  this.addClass('vjs-paused');

  // Make box use width/height of tag, or rely on default implementation
  // Enforce with CSS since width/height attrs don't work on divs
  this.width(this.options_['width'], true); // (true) Skip resize listener on load
  this.height(this.options_['height'], true);

  // Wrap video tag in div (el/box) container
  if (tag.parentNode) {
    tag.parentNode.insertBefore(el, tag);
  }
  vjs.insertFirst(tag, el); // Breaks iPhone, fixed in HTML5 setup.

  // The event listeners need to be added before the children are added
  // in the component init because the tech (loaded with mediaLoader) may
  // fire events, like loadstart, that these events need to capture.
  // Long term it might be better to expose a way to do this in component.init
  // like component.initEventListeners() that runs between el creation and
  // adding children
  this.el_ = el;
  this.on('loadstart', this.onLoadStart);
  this.on('waiting', this.onWaiting);
  this.on(['canplay', 'canplaythrough', 'playing', 'ended'], this.onWaitEnd);
  this.on('seeking', this.onSeeking);
  this.on('seeked', this.onSeeked);
  this.on('ended', this.onEnded);
  this.on('play', this.onPlay);
  this.on('firstplay', this.onFirstPlay);
  this.on('pause', this.onPause);
  this.on('progress', this.onProgress);
  this.on('durationchange', this.onDurationChange);
  this.on('fullscreenchange', this.onFullscreenChange);

  return el;
};

// /* Media Technology (tech)
// ================================================================================ */
// Load/Create an instance of playback technlogy including element and API methods
// And append playback element in player div.
vjs.Player.prototype.loadTech = function(techName, source){

  // Pause and remove current playback technology
  if (this.tech) {
    this.unloadTech();
  }

  // get rid of the HTML5 video tag as soon as we are using another tech
  if (techName !== 'Html5' && this.tag) {
    vjs.Html5.disposeMediaElement(this.tag);
    this.tag = null;
  }

  this.techName = techName;

  // Turn off API access because we're loading a new tech that might load asynchronously
  this.isReady_ = false;

  var techReady = function(){
    this.player_.triggerReady();
  };

  // Grab tech-specific options from player options and add source and parent element to use.
  var techOptions = vjs.obj.merge({ 'source': source, 'parentEl': this.el_ }, this.options_[techName.toLowerCase()]);

  if (source) {
    this.currentType_ = source.type;
    if (source.src == this.cache_.src && this.cache_.currentTime > 0) {
      techOptions['startTime'] = this.cache_.currentTime;
    }

    this.cache_.src = source.src;
  }

  // Initialize tech instance
  this.tech = new window['videojs'][techName](this, techOptions);

  this.tech.ready(techReady);
};

vjs.Player.prototype.unloadTech = function(){
  this.isReady_ = false;

  this.tech.dispose();

  this.tech = false;
};

// There's many issues around changing the size of a Flash (or other plugin) object.
// First is a plugin reload issue in Firefox that has been around for 11 years: https://bugzilla.mozilla.org/show_bug.cgi?id=90268
// Then with the new fullscreen API, Mozilla and webkit browsers will reload the flash object after going to fullscreen.
// To get around this, we're unloading the tech, caching source and currentTime values, and reloading the tech once the plugin is resized.
// reloadTech: function(betweenFn){
//   vjs.log('unloadingTech')
//   this.unloadTech();
//   vjs.log('unloadedTech')
//   if (betweenFn) { betweenFn.call(); }
//   vjs.log('LoadingTech')
//   this.loadTech(this.techName, { src: this.cache_.src })
//   vjs.log('loadedTech')
// },

// /* Player event handlers (how the player reacts to certain events)
// ================================================================================ */

/**
 * Fired when the user agent begins looking for media data
 * @event loadstart
 */
vjs.Player.prototype.onLoadStart = function() {
  // TODO: Update to use `emptied` event instead. See #1277.

  // reset the error state
  this.error(null);

  // If it's already playing we want to trigger a firstplay event now.
  // The firstplay event relies on both the play and loadstart events
  // which can happen in any order for a new source
  if (!this.paused()) {
    this.trigger('firstplay');
  } else {
    // reset the hasStarted state
    this.hasStarted(false);
    this.one('play', function(){
      this.hasStarted(true);
    });
  }
};

vjs.Player.prototype.hasStarted_ = false;

vjs.Player.prototype.hasStarted = function(hasStarted){
  if (hasStarted !== undefined) {
    // only update if this is a new value
    if (this.hasStarted_ !== hasStarted) {
      this.hasStarted_ = hasStarted;
      if (hasStarted) {
        this.addClass('vjs-has-started');
        // trigger the firstplay event if this newly has played
        this.trigger('firstplay');
      } else {
        this.removeClass('vjs-has-started');
      }
    }
    return this;
  }
  return this.hasStarted_;
};

/**
 * Fired when the player has initial duration and dimension information
 * @event loadedmetadata
 */
vjs.Player.prototype.onLoadedMetaData;

/**
 * Fired when the player has downloaded data at the current playback position
 * @event loadeddata
 */
vjs.Player.prototype.onLoadedData;

/**
 * Fired when the player has finished downloading the source data
 * @event loadedalldata
 */
vjs.Player.prototype.onLoadedAllData;

/**
 * Fired whenever the media begins or resumes playback
 * @event play
 */
vjs.Player.prototype.onPlay = function(){
  this.removeClass('vjs-paused');
  this.addClass('vjs-playing');
};

/**
 * Fired whenever the media begins wating
 * @event waiting
 */
vjs.Player.prototype.onWaiting = function(){
  this.addClass('vjs-waiting');
};

/**
 * A handler for events that signal that waiting has eneded
 * which is not consistent between browsers. See #1351
 */
vjs.Player.prototype.onWaitEnd = function(){
  this.removeClass('vjs-waiting');
};

/**
 * Fired whenever the player is jumping to a new time
 * @event seeking
 */
vjs.Player.prototype.onSeeking = function(){
  this.addClass('vjs-seeking');
};

/**
 * Fired when the player has finished jumping to a new time
 * @event seeked
 */
vjs.Player.prototype.onSeeked = function(){
  this.removeClass('vjs-seeking');
};

/**
 * Fired the first time a video is played
 *
 * Not part of the HLS spec, and we're not sure if this is the best
 * implementation yet, so use sparingly. If you don't have a reason to
 * prevent playback, use `myPlayer.one('play');` instead.
 *
 * @event firstplay
 */
vjs.Player.prototype.onFirstPlay = function(){
    //If the first starttime attribute is specified
    //then we will start at the given offset in seconds
    if(this.options_['starttime']){
      this.currentTime(this.options_['starttime']);
    }

    this.addClass('vjs-has-started');
};

/**
 * Fired whenever the media has been paused
 * @event pause
 */
vjs.Player.prototype.onPause = function(){
  this.removeClass('vjs-playing');
  this.addClass('vjs-paused');
};

/**
 * Fired when the current playback position has changed
 *
 * During playback this is fired every 15-250 milliseconds, depnding on the
 * playback technology in use.
 * @event timeupdate
 */
vjs.Player.prototype.onTimeUpdate;

/**
 * Fired while the user agent is downloading media data
 * @event progress
 */
vjs.Player.prototype.onProgress = function(){
  // Add custom event for when source is finished downloading.
  if (this.bufferedPercent() == 1) {
    this.trigger('loadedalldata');
  }
};

/**
 * Fired when the end of the media resource is reached (currentTime == duration)
 * @event ended
 */
vjs.Player.prototype.onEnded = function(){
  if (this.options_['loop']) {
    this.currentTime(0);
    this.play();
  }
};

/**
 * Fired when the duration of the media resource is first known or changed
 * @event durationchange
 */
vjs.Player.prototype.onDurationChange = function(){
  // Allows for cacheing value instead of asking player each time.
  // We need to get the techGet response and check for a value so we don't
  // accidentally cause the stack to blow up.
  var duration = this.techGet('duration');
  if (duration) {
    if (duration < 0) {
      duration = Infinity;
    }
    this.duration(duration);
    // Determine if the stream is live and propagate styles down to UI.
    if (duration === Infinity) {
      this.addClass('vjs-live');
    } else {
      this.removeClass('vjs-live');
    }
  }
};

/**
 * Fired when the volume changes
 * @event volumechange
 */
vjs.Player.prototype.onVolumeChange;

/**
 * Fired when the player switches in or out of fullscreen mode
 * @event fullscreenchange
 */
vjs.Player.prototype.onFullscreenChange = function() {
  if (this.isFullscreen()) {
    this.addClass('vjs-fullscreen');
  } else {
    this.removeClass('vjs-fullscreen');
  }
};

// /* Player API
// ================================================================================ */

/**
 * Object for cached values.
 * @private
 */
vjs.Player.prototype.cache_;

vjs.Player.prototype.getCache = function(){
  return this.cache_;
};

// Pass values to the playback tech
vjs.Player.prototype.techCall = function(method, arg){
  // If it's not ready yet, call method when it is
  if (this.tech && !this.tech.isReady_) {
    this.tech.ready(function(){
      this[method](arg);
    });

  // Otherwise call method now
  } else {
    try {
      this.tech[method](arg);
    } catch(e) {
      vjs.log(e);
      throw e;
    }
  }
};

// Get calls can't wait for the tech, and sometimes don't need to.
vjs.Player.prototype.techGet = function(method){
  if (this.tech && this.tech.isReady_) {

    // Flash likes to die and reload when you hide or reposition it.
    // In these cases the object methods go away and we get errors.
    // When that happens we'll catch the errors and inform tech that it's not ready any more.
    try {
      return this.tech[method]();
    } catch(e) {
      // When building additional tech libs, an expected method may not be defined yet
      if (this.tech[method] === undefined) {
        vjs.log('Video.js: ' + method + ' method not defined for '+this.techName+' playback technology.', e);
      } else {
        // When a method isn't available on the object it throws a TypeError
        if (e.name == 'TypeError') {
          vjs.log('Video.js: ' + method + ' unavailable on '+this.techName+' playback technology element.', e);
          this.tech.isReady_ = false;
        } else {
          vjs.log(e);
        }
      }
      throw e;
    }
  }

  return;
};

/**
 * start media playback
 *
 *     myPlayer.play();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.play = function(){
  this.techCall('play');
  return this;
};

/**
 * Pause the video playback
 *
 *     myPlayer.pause();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.pause = function(){
  this.techCall('pause');
  return this;
};

/**
 * Check if the player is paused
 *
 *     var isPaused = myPlayer.paused();
 *     var isPlaying = !myPlayer.paused();
 *
 * @return {Boolean} false if the media is currently playing, or true otherwise
 */
vjs.Player.prototype.paused = function(){
  // The initial state of paused should be true (in Safari it's actually false)
  return (this.techGet('paused') === false) ? false : true;
};

/**
 * Get or set the current time (in seconds)
 *
 *     // get
 *     var whereYouAt = myPlayer.currentTime();
 *
 *     // set
 *     myPlayer.currentTime(120); // 2 minutes into the video
 *
 * @param  {Number|String=} seconds The time to seek to
 * @return {Number}        The time in seconds, when not setting
 * @return {vjs.Player}    self, when the current time is set
 */
vjs.Player.prototype.currentTime = function(seconds){
  if (seconds !== undefined) {

    this.techCall('setCurrentTime', seconds);

    return this;
  }

  // cache last currentTime and return. default to 0 seconds
  //
  // Caching the currentTime is meant to prevent a massive amount of reads on the tech's
  // currentTime when scrubbing, but may not provide much performace benefit afterall.
  // Should be tested. Also something has to read the actual current time or the cache will
  // never get updated.
  return this.cache_.currentTime = (this.techGet('currentTime') || 0);
};

/**
 * Get the length in time of the video in seconds
 *
 *     var lengthOfVideo = myPlayer.duration();
 *
 * **NOTE**: The video must have started loading before the duration can be
 * known, and in the case of Flash, may not be known until the video starts
 * playing.
 *
 * @return {Number} The duration of the video in seconds
 */
vjs.Player.prototype.duration = function(seconds){
  if (seconds !== undefined) {

    // cache the last set value for optimiized scrubbing (esp. Flash)
    this.cache_.duration = parseFloat(seconds);

    return this;
  }

  if (this.cache_.duration === undefined) {
    this.onDurationChange();
  }

  return this.cache_.duration || 0;
};

// Calculates how much time is left. Not in spec, but useful.
vjs.Player.prototype.remainingTime = function(){
  return this.duration() - this.currentTime();
};

// http://dev.w3.org/html5/spec/video.html#dom-media-buffered
// Buffered returns a timerange object.
// Kind of like an array of portions of the video that have been downloaded.

/**
 * Get a TimeRange object with the times of the video that have been downloaded
 *
 * If you just want the percent of the video that's been downloaded,
 * use bufferedPercent.
 *
 *     // Number of different ranges of time have been buffered. Usually 1.
 *     numberOfRanges = bufferedTimeRange.length,
 *
 *     // Time in seconds when the first range starts. Usually 0.
 *     firstRangeStart = bufferedTimeRange.start(0),
 *
 *     // Time in seconds when the first range ends
 *     firstRangeEnd = bufferedTimeRange.end(0),
 *
 *     // Length in seconds of the first time range
 *     firstRangeLength = firstRangeEnd - firstRangeStart;
 *
 * @return {Object} A mock TimeRange object (following HTML spec)
 */
vjs.Player.prototype.buffered = function(){
  var buffered = this.techGet('buffered');

  if (!buffered || !buffered.length) {
    buffered = vjs.createTimeRange(0,0);
  }

  return buffered;
};

/**
 * Get the percent (as a decimal) of the video that's been downloaded
 *
 *     var howMuchIsDownloaded = myPlayer.bufferedPercent();
 *
 * 0 means none, 1 means all.
 * (This method isn't in the HTML5 spec, but it's very convenient)
 *
 * @return {Number} A decimal between 0 and 1 representing the percent
 */
vjs.Player.prototype.bufferedPercent = function(){
  var duration = this.duration(),
      buffered = this.buffered(),
      bufferedDuration = 0,
      start, end;

  if (!duration) {
    return 0;
  }

  for (var i=0; i<buffered.length; i++){
    start = buffered.start(i);
    end   = buffered.end(i);

    // buffered end can be bigger than duration by a very small fraction
    if (end > duration) {
      end = duration;
    }

    bufferedDuration += end - start;
  }

  return bufferedDuration / duration;
};

/**
 * Get the ending time of the last buffered time range
 *
 * This is used in the progress bar to encapsulate all time ranges.
 * @return {Number} The end of the last buffered time range
 */
vjs.Player.prototype.bufferedEnd = function(){
  var buffered = this.buffered(),
      duration = this.duration(),
      end = buffered.end(buffered.length-1);

  if (end > duration) {
    end = duration;
  }

  return end;
};

/**
 * Get or set the current volume of the media
 *
 *     // get
 *     var howLoudIsIt = myPlayer.volume();
 *
 *     // set
 *     myPlayer.volume(0.5); // Set volume to half
 *
 * 0 is off (muted), 1.0 is all the way up, 0.5 is half way.
 *
 * @param  {Number} percentAsDecimal The new volume as a decimal percent
 * @return {Number}                  The current volume, when getting
 * @return {vjs.Player}              self, when setting
 */
vjs.Player.prototype.volume = function(percentAsDecimal){
  var vol;

  if (percentAsDecimal !== undefined) {
    vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal))); // Force value to between 0 and 1
    this.cache_.volume = vol;
    this.techCall('setVolume', vol);
    vjs.setLocalStorage('volume', vol);
    return this;
  }

  // Default to 1 when returning current volume.
  vol = parseFloat(this.techGet('volume'));
  return (isNaN(vol)) ? 1 : vol;
};


/**
 * Get the current muted state, or turn mute on or off
 *
 *     // get
 *     var isVolumeMuted = myPlayer.muted();
 *
 *     // set
 *     myPlayer.muted(true); // mute the volume
 *
 * @param  {Boolean=} muted True to mute, false to unmute
 * @return {Boolean} True if mute is on, false if not, when getting
 * @return {vjs.Player} self, when setting mute
 */
vjs.Player.prototype.muted = function(muted){
  if (muted !== undefined) {
    this.techCall('setMuted', muted);
    return this;
  }
  return this.techGet('muted') || false; // Default to false
};

// Check if current tech can support native fullscreen
// (e.g. with built in controls lik iOS, so not our flash swf)
vjs.Player.prototype.supportsFullScreen = function(){
  return this.techGet('supportsFullScreen') || false;
};

/**
 * is the player in fullscreen
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.isFullscreen_ = false;

/**
 * Check if the player is in fullscreen mode
 *
 *     // get
 *     var fullscreenOrNot = myPlayer.isFullscreen();
 *
 *     // set
 *     myPlayer.isFullscreen(true); // tell the player it's in fullscreen
 *
 * NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official
 * property and instead document.fullscreenElement is used. But isFullscreen is
 * still a valuable property for internal player workings.
 *
 * @param  {Boolean=} isFS Update the player's fullscreen state
 * @return {Boolean} true if fullscreen, false if not
 * @return {vjs.Player} self, when setting
 */
vjs.Player.prototype.isFullscreen = function(isFS){
  if (isFS !== undefined) {
    this.isFullscreen_ = !!isFS;
    return this;
  }
  return this.isFullscreen_;
};

/**
 * Old naming for isFullscreen()
 * @deprecated for lowercase 's' version
 */
vjs.Player.prototype.isFullScreen = function(isFS){
  vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');
  return this.isFullscreen(isFS);
};

/**
 * Increase the size of the video to full screen
 *
 *     myPlayer.requestFullscreen();
 *
 * In some browsers, full screen is not supported natively, so it enters
 * "full window mode", where the video fills the browser window.
 * In browsers and devices that support native full screen, sometimes the
 * browser's default controls will be shown, and not the Video.js custom skin.
 * This includes most mobile devices (iOS, Android) and older versions of
 * Safari.
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.requestFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;

  this.isFullscreen(true);

  if (fsApi) {
    // the browser supports going fullscreen at the element level so we can
    // take the controls fullscreen as well as the video

    // Trigger fullscreenchange event after change
    // We have to specifically add this each time, and remove
    // when cancelling fullscreen. Otherwise if there's multiple
    // players on a page, they would all be reacting to the same fullscreen
    // events
    vjs.on(document, fsApi['fullscreenchange'], vjs.bind(this, function(e){
      this.isFullscreen(document[fsApi.fullscreenElement]);

      // If cancelling fullscreen, remove event listener.
      if (this.isFullscreen() === false) {
        vjs.off(document, fsApi['fullscreenchange'], arguments.callee);
      }

      this.trigger('fullscreenchange');
    }));

    this.el_[fsApi.requestFullscreen]();

  } else if (this.tech.supportsFullScreen()) {
    // we can't take the video.js controls fullscreen but we can go fullscreen
    // with native controls
    this.techCall('enterFullScreen');
  } else {
    // fullscreen isn't supported so we'll just stretch the video element to
    // fill the viewport
    this.enterFullWindow();
    this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for requestFullscreen
 * @deprecated for lower case 's' version
 */
vjs.Player.prototype.requestFullScreen = function(){
  vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');
  return this.requestFullscreen();
};


/**
 * Return the video to its normal size after having been in full screen mode
 *
 *     myPlayer.exitFullscreen();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.exitFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;
  this.isFullscreen(false);

  // Check for browser element fullscreen support
  if (fsApi) {
    document[fsApi.exitFullscreen]();
  } else if (this.tech.supportsFullScreen()) {
   this.techCall('exitFullScreen');
  } else {
   this.exitFullWindow();
   this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for exitFullscreen
 * @deprecated for exitFullscreen
 */
vjs.Player.prototype.cancelFullScreen = function(){
  vjs.log.warn('player.cancelFullScreen() has been deprecated, use player.exitFullscreen()');
  return this.exitFullscreen();
};

// When fullscreen isn't supported we can stretch the video container to as wide as the browser will let us.
vjs.Player.prototype.enterFullWindow = function(){
  this.isFullWindow = true;

  // Storing original doc overflow value to return to when fullscreen is off
  this.docOrigOverflow = document.documentElement.style.overflow;

  // Add listener for esc key to exit fullscreen
  vjs.on(document, 'keydown', vjs.bind(this, this.fullWindowOnEscKey));

  // Hide any scroll bars
  document.documentElement.style.overflow = 'hidden';

  // Apply fullscreen styles
  vjs.addClass(document.body, 'vjs-full-window');

  this.trigger('enterFullWindow');
};
vjs.Player.prototype.fullWindowOnEscKey = function(event){
  if (event.keyCode === 27) {
    if (this.isFullscreen() === true) {
      this.exitFullscreen();
    } else {
      this.exitFullWindow();
    }
  }
};

vjs.Player.prototype.exitFullWindow = function(){
  this.isFullWindow = false;
  vjs.off(document, 'keydown', this.fullWindowOnEscKey);

  // Unhide scroll bars.
  document.documentElement.style.overflow = this.docOrigOverflow;

  // Remove fullscreen styles
  vjs.removeClass(document.body, 'vjs-full-window');

  // Resize the box, controller, and poster to original sizes
  // this.positionAll();
  this.trigger('exitFullWindow');
};

vjs.Player.prototype.selectSource = function(sources){

  // Loop through each playback technology in the options order
  for (var i=0,j=this.options_['techOrder'];i<j.length;i++) {
    var techName = vjs.capitalize(j[i]),
        tech = window['videojs'][techName];

    // Check if the current tech is defined before continuing
    if (!tech) {
      vjs.log.error('The "' + techName + '" tech is undefined. Skipped browser support check for that tech.');
      continue;
    }

    // Check if the browser supports this technology
    if (tech.isSupported()) {
      // Loop through each source object
      for (var a=0,b=sources;a<b.length;a++) {
        var source = b[a];

        // Check if source can be played with this technology
        if (tech['canPlaySource'](source)) {
          return { source: source, tech: techName };
        }
      }
    }
  }

  return false;
};

/**
 * The source function updates the video source
 *
 * There are three types of variables you can pass as the argument.
 *
 * **URL String**: A URL to the the video file. Use this method if you are sure
 * the current playback technology (HTML5/Flash) can support the source you
 * provide. Currently only MP4 files can be used in both HTML5 and Flash.
 *
 *     myPlayer.src("http://www.example.com/path/to/video.mp4");
 *
 * **Source Object (or element):** A javascript object containing information
 * about the source file. Use this method if you want the player to determine if
 * it can support the file using the type information.
 *
 *     myPlayer.src({ type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" });
 *
 * **Array of Source Objects:** To provide multiple versions of the source so
 * that it can be played using HTML5 across browsers you can use an array of
 * source objects. Video.js will detect which version is supported and load that
 * file.
 *
 *     myPlayer.src([
 *       { type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" },
 *       { type: "video/webm", src: "http://www.example.com/path/to/video.webm" },
 *       { type: "video/ogg", src: "http://www.example.com/path/to/video.ogv" }
 *     ]);
 *
 * @param  {String|Object|Array=} source The source URL, object, or array of sources
 * @return {String} The current video source when getting
 * @return {String} The player when setting
 */
vjs.Player.prototype.src = function(source){
  if (source === undefined) {
    return this.techGet('src');
  }

  // case: Array of source objects to choose from and pick the best to play
  if (vjs.obj.isArray(source)) {
    this.sourceList_(source);

  // case: URL String (http://myvideo...)
  } else if (typeof source === 'string') {
    // create a source object from the string
    this.src({ src: source });

  // case: Source object { src: '', type: '' ... }
  } else if (source instanceof Object) {
    // check if the source has a type and the loaded tech cannot play the source
    // if there's no type we'll just try the current tech
    if (source.type && !window['videojs'][this.techName]['canPlaySource'](source)) {
      // create a source list with the current source and send through
      // the tech loop to check for a compatible technology
      this.sourceList_([source]);
    } else {
      this.cache_.src = source.src;
      this.currentType_ = source.type || '';

      // wait until the tech is ready to set the source
      this.ready(function(){
        this.techCall('src', source.src);

        if (this.options_['preload'] == 'auto') {
          this.load();
        }

        if (this.options_['autoplay']) {
          this.play();
        }
      });
    }
  }

  return this;
};

/**
 * Handle an array of source objects
 * @param  {[type]} sources Array of source objects
 * @private
 */
vjs.Player.prototype.sourceList_ = function(sources){
  var sourceTech = this.selectSource(sources),
      errorTimeout;

  if (sourceTech) {
    if (sourceTech.tech === this.techName) {
      // if this technology is already loaded, set the source
      this.src(sourceTech.source);
    } else {
      // load this technology with the chosen source
      this.loadTech(sourceTech.tech, sourceTech.source);
    }
  } else {
    // We need to wrap this in a timeout to give folks a chance to add error event handlers
    errorTimeout = setTimeout(vjs.bind(this, function() {
      this.error({ code: 4, message: this.localize(this.options()['notSupportedMessage']) });
    }), 0);

    // we could not find an appropriate tech, but let's still notify the delegate that this is it
    // this needs a better comment about why this is needed
    this.triggerReady();

    this.on('dispose', function() {
      clearTimeout(errorTimeout);
    });
  }
};

// Begin loading the src data
// http://dev.w3.org/html5/spec/video.html#dom-media-load
vjs.Player.prototype.load = function(){
  this.techCall('load');
  return this;
};

// http://dev.w3.org/html5/spec/video.html#dom-media-currentsrc
vjs.Player.prototype.currentSrc = function(){
  return this.techGet('currentSrc') || this.cache_.src || '';
};

/**
 * Get the current source type e.g. video/mp4
 * This can allow you rebuild the current source object so that you could load the same
 * source and tech later
 * @return {String} The source MIME type
 */
vjs.Player.prototype.currentType = function(){
    return this.currentType_ || '';
};

// Attributes/Options
vjs.Player.prototype.preload = function(value){
  if (value !== undefined) {
    this.techCall('setPreload', value);
    this.options_['preload'] = value;
    return this;
  }
  return this.techGet('preload');
};
vjs.Player.prototype.autoplay = function(value){
  if (value !== undefined) {
    this.techCall('setAutoplay', value);
    this.options_['autoplay'] = value;
    return this;
  }
  return this.techGet('autoplay', value);
};
vjs.Player.prototype.loop = function(value){
  if (value !== undefined) {
    this.techCall('setLoop', value);
    this.options_['loop'] = value;
    return this;
  }
  return this.techGet('loop');
};

/**
 * the url of the poster image source
 * @type {String}
 * @private
 */
vjs.Player.prototype.poster_;

/**
 * get or set the poster image source url
 *
 * ##### EXAMPLE:
 *
 *     // getting
 *     var currentPoster = myPlayer.poster();
 *
 *     // setting
 *     myPlayer.poster('http://example.com/myImage.jpg');
 *
 * @param  {String=} [src] Poster image source URL
 * @return {String} poster URL when getting
 * @return {vjs.Player} self when setting
 */
vjs.Player.prototype.poster = function(src){
  if (src === undefined) {
    return this.poster_;
  }

  // update the internal poster variable
  this.poster_ = src;

  // update the tech's poster
  this.techCall('setPoster', src);

  // alert components that the poster has been set
  this.trigger('posterchange');
};

/**
 * Whether or not the controls are showing
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.controls_;

/**
 * Get or set whether or not the controls are showing.
 * @param  {Boolean} controls Set controls to showing or not
 * @return {Boolean}    Controls are showing
 */
vjs.Player.prototype.controls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.controls_ !== bool) {
      this.controls_ = bool;
      if (bool) {
        this.removeClass('vjs-controls-disabled');
        this.addClass('vjs-controls-enabled');
        this.trigger('controlsenabled');
      } else {
        this.removeClass('vjs-controls-enabled');
        this.addClass('vjs-controls-disabled');
        this.trigger('controlsdisabled');
      }
    }
    return this;
  }
  return this.controls_;
};

vjs.Player.prototype.usingNativeControls_;

/**
 * Toggle native controls on/off. Native controls are the controls built into
 * devices (e.g. default iPhone controls), Flash, or other techs
 * (e.g. Vimeo Controls)
 *
 * **This should only be set by the current tech, because only the tech knows
 * if it can support native controls**
 *
 * @param  {Boolean} bool    True signals that native controls are on
 * @return {vjs.Player}      Returns the player
 * @private
 */
vjs.Player.prototype.usingNativeControls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.usingNativeControls_ !== bool) {
      this.usingNativeControls_ = bool;
      if (bool) {
        this.addClass('vjs-using-native-controls');

        /**
         * player is using the native device controls
         *
         * @event usingnativecontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingnativecontrols');
      } else {
        this.removeClass('vjs-using-native-controls');

        /**
         * player is using the custom HTML controls
         *
         * @event usingcustomcontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingcustomcontrols');
      }
    }
    return this;
  }
  return this.usingNativeControls_;
};

/**
 * Store the current media error
 * @type {Object}
 * @private
 */
vjs.Player.prototype.error_ = null;

/**
 * Set or get the current MediaError
 * @param  {*} err A MediaError or a String/Number to be turned into a MediaError
 * @return {vjs.MediaError|null}     when getting
 * @return {vjs.Player}              when setting
 */
vjs.Player.prototype.error = function(err){
  if (err === undefined) {
    return this.error_;
  }

  // restoring to default
  if (err === null) {
    this.error_ = err;
    this.removeClass('vjs-error');
    return this;
  }

  // error instance
  if (err instanceof vjs.MediaError) {
    this.error_ = err;
  } else {
    this.error_ = new vjs.MediaError(err);
  }

  // fire an error event on the player
  this.trigger('error');

  // add the vjs-error classname to the player
  this.addClass('vjs-error');

  // log the name of the error type and any message
  // ie8 just logs "[object object]" if you just log the error object
  vjs.log.error('(CODE:'+this.error_.code+' '+vjs.MediaError.errorTypes[this.error_.code]+')', this.error_.message, this.error_);

  return this;
};

vjs.Player.prototype.ended = function(){ return this.techGet('ended'); };
vjs.Player.prototype.seeking = function(){ return this.techGet('seeking'); };

// When the player is first initialized, trigger activity so components
// like the control bar show themselves if needed
vjs.Player.prototype.userActivity_ = true;
vjs.Player.prototype.reportUserActivity = function(event){
  this.userActivity_ = true;
};

vjs.Player.prototype.userActive_ = true;
vjs.Player.prototype.userActive = function(bool){
  if (bool !== undefined) {
    bool = !!bool;
    if (bool !== this.userActive_) {
      this.userActive_ = bool;
      if (bool) {
        // If the user was inactive and is now active we want to reset the
        // inactivity timer
        this.userActivity_ = true;
        this.removeClass('vjs-user-inactive');
        this.addClass('vjs-user-active');
        this.trigger('useractive');
      } else {
        // We're switching the state to inactive manually, so erase any other
        // activity
        this.userActivity_ = false;

        // Chrome/Safari/IE have bugs where when you change the cursor it can
        // trigger a mousemove event. This causes an issue when you're hiding
        // the cursor when the user is inactive, and a mousemove signals user
        // activity. Making it impossible to go into inactive mode. Specifically
        // this happens in fullscreen when we really need to hide the cursor.
        //
        // When this gets resolved in ALL browsers it can be removed
        // https://code.google.com/p/chromium/issues/detail?id=103041
        if(this.tech) {
          this.tech.one('mousemove', function(e){
            e.stopPropagation();
            e.preventDefault();
          });
        }

        this.removeClass('vjs-user-active');
        this.addClass('vjs-user-inactive');
        this.trigger('userinactive');
      }
    }
    return this;
  }
  return this.userActive_;
};

vjs.Player.prototype.listenForUserActivity = function(){
  var onActivity, onMouseMove, onMouseDown, mouseInProgress, onMouseUp,
      activityCheck, inactivityTimeout, lastMoveX, lastMoveY;

  onActivity = vjs.bind(this, this.reportUserActivity);

  onMouseMove = function(e) {
    // #1068 - Prevent mousemove spamming
    // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970
    if(e.screenX != lastMoveX || e.screenY != lastMoveY) {
      lastMoveX = e.screenX;
      lastMoveY = e.screenY;
      onActivity();
    }
  };

  onMouseDown = function() {
    onActivity();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    clearInterval(mouseInProgress);
    // Setting userActivity=true now and setting the interval to the same time
    // as the activityCheck interval (250) should ensure we never miss the
    // next activityCheck
    mouseInProgress = setInterval(onActivity, 250);
  };

  onMouseUp = function(event) {
    onActivity();
    // Stop the interval that maintains activity if the mouse/touch is down
    clearInterval(mouseInProgress);
  };

  // Any mouse movement will be considered user activity
  this.on('mousedown', onMouseDown);
  this.on('mousemove', onMouseMove);
  this.on('mouseup', onMouseUp);

  // Listen for keyboard navigation
  // Shouldn't need to use inProgress interval because of key repeat
  this.on('keydown', onActivity);
  this.on('keyup', onActivity);

  // Run an interval every 250 milliseconds instead of stuffing everything into
  // the mousemove/touchmove function itself, to prevent performance degradation.
  // `this.reportUserActivity` simply sets this.userActivity_ to true, which
  // then gets picked up by this loop
  // http://ejohn.org/blog/learning-from-twitter/
  activityCheck = setInterval(vjs.bind(this, function() {
    // Check to see if mouse/touch activity has happened
    if (this.userActivity_) {
      // Reset the activity tracker
      this.userActivity_ = false;

      // If the user state was inactive, set the state to active
      this.userActive(true);

      // Clear any existing inactivity timeout to start the timer over
      clearTimeout(inactivityTimeout);

      var timeout = this.options()['inactivityTimeout'];
      if (timeout > 0) {
          // In <timeout> milliseconds, if no more activity has occurred the
          // user will be considered inactive
          inactivityTimeout = setTimeout(vjs.bind(this, function () {
              // Protect against the case where the inactivityTimeout can trigger just
              // before the next user activity is picked up by the activityCheck loop
              // causing a flicker
              if (!this.userActivity_) {
                  this.userActive(false);
              }
          }), timeout);
      }
    }
  }), 250);

  // Clean up the intervals when we kill the player
  this.on('dispose', function(){
    clearInterval(activityCheck);
    clearTimeout(inactivityTimeout);
  });
};

vjs.Player.prototype.playbackRate = function(rate) {
  if (rate !== undefined) {
    this.techCall('setPlaybackRate', rate);
    return this;
  }

  if (this.tech && this.tech['featuresPlaybackRate']) {
    return this.techGet('playbackRate');
  } else {
    return 1.0;
  }

};

// Methods to add support for
// networkState: function(){ return this.techCall('networkState'); },
// readyState: function(){ return this.techCall('readyState'); },
// initialTime: function(){ return this.techCall('initialTime'); },
// startOffsetTime: function(){ return this.techCall('startOffsetTime'); },
// played: function(){ return this.techCall('played'); },
// seekable: function(){ return this.techCall('seekable'); },
// videoTracks: function(){ return this.techCall('videoTracks'); },
// audioTracks: function(){ return this.techCall('audioTracks'); },
// videoWidth: function(){ return this.techCall('videoWidth'); },
// videoHeight: function(){ return this.techCall('videoHeight'); },
// defaultPlaybackRate: function(){ return this.techCall('defaultPlaybackRate'); },
// mediaGroup: function(){ return this.techCall('mediaGroup'); },
// controller: function(){ return this.techCall('controller'); },
// defaultMuted: function(){ return this.techCall('defaultMuted'); }

// TODO
// currentSrcList: the array of sources including other formats and bitrates
// playList: array of source lists in order of playback
/**
 * Container of main controls
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.Component
 */
vjs.ControlBar = vjs.Component.extend();

vjs.ControlBar.prototype.options_ = {
  loadEvent: 'play',
  children: {
    'playToggle': {},
    'currentTimeDisplay': {},
    'timeDivider': {},
    'durationDisplay': {},
    'remainingTimeDisplay': {},
    'liveDisplay': {},
    'progressControl': {},
    'fullscreenToggle': {},
    'volumeControl': {},
    'muteToggle': {},
    // 'volumeMenuButton': {},
    'playbackRateMenuButton': {}
  }
};

vjs.ControlBar.prototype.createEl = function(){
  return vjs.createEl('div', {
    className: 'vjs-control-bar'
  });
};
/**
 * Displays the live indicator
 * TODO - Future make it click to snap to live
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LiveDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.LiveDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-live-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-live-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Stream Type') + '</span>' + this.localize('LIVE'),
    'aria-live': 'off'
  });

  el.appendChild(this.contentEl_);

  return el;
};
/**
 * Button to toggle between play and pause
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.PlayToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    player.on('play', vjs.bind(this, this.onPlay));
    player.on('pause', vjs.bind(this, this.onPause));
  }
});

vjs.PlayToggle.prototype.buttonText = 'Play';

vjs.PlayToggle.prototype.buildCSSClass = function(){
  return 'vjs-play-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// OnClick - Toggle between play and pause
vjs.PlayToggle.prototype.onClick = function(){
  if (this.player_.paused()) {
    this.player_.play();
  } else {
    this.player_.pause();
  }
};

  // OnPlay - Add the vjs-playing class to the element so it can change appearance
vjs.PlayToggle.prototype.onPlay = function(){
  vjs.removeClass(this.el_, 'vjs-paused');
  vjs.addClass(this.el_, 'vjs-playing');
  this.el_.children[0].children[0].innerHTML = this.localize('Pause'); // change the button text to "Pause"
};

  // OnPause - Add the vjs-paused class to the element so it can change appearance
vjs.PlayToggle.prototype.onPause = function(){
  vjs.removeClass(this.el_, 'vjs-playing');
  vjs.addClass(this.el_, 'vjs-paused');
  this.el_.children[0].children[0].innerHTML = this.localize('Play'); // change the button text to "Play"
};
/**
 * Displays the current time
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.CurrentTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.CurrentTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-current-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-current-time-display',
    innerHTML: '<span class="vjs-control-text">Current Time </span>' + '0:00', // label the current time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.CurrentTimeDisplay.prototype.updateContent = function(){
  // Allows for smooth scrubbing, when player can't keep up.
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Current Time') + '</span> ' + vjs.formatTime(time, this.player_.duration());
};

/**
 * Displays the duration
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.DurationDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // this might need to be changed to 'durationchange' instead of 'timeupdate' eventually,
    // however the durationchange event fires before this.player_.duration() is set,
    // so the value cannot be written out using this method.
    // Once the order of durationchange and this.player_.duration() being set is figured out,
    // this can be updated.
    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.DurationDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-duration vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-duration-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Duration Time') + '</span> ' + '0:00', // label the duration time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.DurationDisplay.prototype.updateContent = function(){
  var duration = this.player_.duration();
  if (duration) {
      this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Duration Time') + '</span> ' + vjs.formatTime(duration); // label the duration time for screen reader users
  }
};

/**
 * The separator between the current time and duration
 *
 * Can be hidden if it's not needed in the design.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TimeDivider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.TimeDivider.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-time-divider',
    innerHTML: '<div><span>/</span></div>'
  });
};

/**
 * Displays the time left in the video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.RemainingTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.RemainingTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-remaining-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-remaining-time-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Remaining Time') + '</span> ' + '-0:00', // label the remaining time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.RemainingTimeDisplay.prototype.updateContent = function(){
  if (this.player_.duration()) {
    this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Remaining Time') + '</span> ' + '-'+ vjs.formatTime(this.player_.remainingTime());
  }

  // Allows for smooth scrubbing, when player can't keep up.
  // var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  // this.contentEl_.innerHTML = vjs.formatTime(time, this.player_.duration());
};
/**
 * Toggle fullscreen video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @extends vjs.Button
 */
vjs.FullscreenToggle = vjs.Button.extend({
  /**
   * @constructor
   * @memberof vjs.FullscreenToggle
   * @instance
   */
  init: function(player, options){
    vjs.Button.call(this, player, options);
  }
});

vjs.FullscreenToggle.prototype.buttonText = 'Fullscreen';

vjs.FullscreenToggle.prototype.buildCSSClass = function(){
  return 'vjs-fullscreen-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

vjs.FullscreenToggle.prototype.onClick = function(){
  if (!this.player_.isFullscreen()) {
    this.player_.requestFullscreen();
    this.controlText_.innerHTML = this.localize('Non-Fullscreen');
  } else {
    this.player_.exitFullscreen();
    this.controlText_.innerHTML = this.localize('Fullscreen');
  }
};
/**
 * The Progress Control component contains the seek bar, load progress,
 * and play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ProgressControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.ProgressControl.prototype.options_ = {
  children: {
    'seekBar': {}
  }
};

vjs.ProgressControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-control vjs-control'
  });
};

/**
 * Seek Bar and holder for the progress bars
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    player.on('timeupdate', vjs.bind(this, this.updateARIAAttributes));
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.SeekBar.prototype.options_ = {
  children: {
    'loadProgressBar': {},
    'playProgressBar': {},
    'seekHandle': {}
  },
  'barName': 'playProgressBar',
  'handleName': 'seekHandle'
};

vjs.SeekBar.prototype.playerEvent = 'timeupdate';

vjs.SeekBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-holder',
    'aria-label': 'video progress bar'
  });
};

vjs.SeekBar.prototype.updateARIAAttributes = function(){
    // Allows for smooth scrubbing, when player can't keep up.
    var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
    this.el_.setAttribute('aria-valuenow',vjs.round(this.getPercent()*100, 2)); // machine readable value of progress bar (percentage complete)
    this.el_.setAttribute('aria-valuetext',vjs.formatTime(time, this.player_.duration())); // human readable value of progress bar (time complete)
};

vjs.SeekBar.prototype.getPercent = function(){
  return this.player_.currentTime() / this.player_.duration();
};

vjs.SeekBar.prototype.onMouseDown = function(event){
  vjs.Slider.prototype.onMouseDown.call(this, event);

  this.player_.scrubbing = true;

  this.videoWasPlaying = !this.player_.paused();
  this.player_.pause();
};

vjs.SeekBar.prototype.onMouseMove = function(event){
  var newTime = this.calculateDistance(event) * this.player_.duration();

  // Don't let video end while scrubbing.
  if (newTime == this.player_.duration()) { newTime = newTime - 0.1; }

  // Set new time (tell player to seek to new time)
  this.player_.currentTime(newTime);
};

vjs.SeekBar.prototype.onMouseUp = function(event){
  vjs.Slider.prototype.onMouseUp.call(this, event);

  this.player_.scrubbing = false;
  if (this.videoWasPlaying) {
    this.player_.play();
  }
};

vjs.SeekBar.prototype.stepForward = function(){
  this.player_.currentTime(this.player_.currentTime() + 5); // more quickly fast forward for keyboard-only users
};

vjs.SeekBar.prototype.stepBack = function(){
  this.player_.currentTime(this.player_.currentTime() - 5); // more quickly rewind for keyboard-only users
};

/**
 * Shows load progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LoadProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
    player.on('progress', vjs.bind(this, this.update));
  }
});

vjs.LoadProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-load-progress',
    innerHTML: '<span class="vjs-control-text"><span>' + this.localize('Loaded') + '</span>: 0%</span>'
  });
};

vjs.LoadProgressBar.prototype.update = function(){
  var i, start, end, part,
      buffered = this.player_.buffered(),
      duration = this.player_.duration(),
      bufferedEnd = this.player_.bufferedEnd(),
      children = this.el_.children,
      // get the percent width of a time compared to the total end
      percentify = function (time, end){
        var percent = (time / end) || 0; // no NaN
        return (percent * 100) + '%';
      };

  // update the width of the progress bar
  this.el_.style.width = percentify(bufferedEnd, duration);

  // add child elements to represent the individual buffered time ranges
  for (i = 0; i < buffered.length; i++) {
    start = buffered.start(i),
    end = buffered.end(i),
    part = children[i];

    if (!part) {
      part = this.el_.appendChild(vjs.createEl())
    };

    // set the percent based on the width of the progress bar (bufferedEnd)
    part.style.left = percentify(start, bufferedEnd);
    part.style.width = percentify(end - start, bufferedEnd);
  };

  // remove unused buffered range elements
  for (i = children.length; i > buffered.length; i--) {
    this.el_.removeChild(children[i-1]);
  }
};

/**
 * Shows play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlayProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.PlayProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-play-progress',
    innerHTML: '<span class="vjs-control-text"><span>' + this.localize('Progress') + '</span>: 0%</span>'
  });
};

/**
 * The Seek Handle shows the current position of the playhead during playback,
 * and can be dragged to adjust the playhead.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekHandle = vjs.SliderHandle.extend({
  init: function(player, options) {
    vjs.SliderHandle.call(this, player, options);
    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

/**
 * The default value for the handle content, which may be read by screen readers
 *
 * @type {String}
 * @private
 */
vjs.SeekHandle.prototype.defaultValue = '00:00';

/** @inheritDoc */
vjs.SeekHandle.prototype.createEl = function() {
  return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
    className: 'vjs-seek-handle',
    'aria-live': 'off'
  });
};

vjs.SeekHandle.prototype.updateContent = function() {
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.el_.innerHTML = '<span class="vjs-control-text">' + vjs.formatTime(time, this.player_.duration()) + '</span>';
};
/**
 * The component for controlling the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // hide volume controls when they're not supported by the current tech
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
  }
});

vjs.VolumeControl.prototype.options_ = {
  children: {
    'volumeBar': {}
  }
};

vjs.VolumeControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-control vjs-control'
  });
};

/**
 * The bar that contains the volume level and can be clicked on to adjust the level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    player.on('volumechange', vjs.bind(this, this.updateARIAAttributes));
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.VolumeBar.prototype.updateARIAAttributes = function(){
  // Current value of volume bar as a percentage
  this.el_.setAttribute('aria-valuenow',vjs.round(this.player_.volume()*100, 2));
  this.el_.setAttribute('aria-valuetext',vjs.round(this.player_.volume()*100, 2)+'%');
};

vjs.VolumeBar.prototype.options_ = {
  children: {
    'volumeLevel': {},
    'volumeHandle': {}
  },
  'barName': 'volumeLevel',
  'handleName': 'volumeHandle'
};

vjs.VolumeBar.prototype.playerEvent = 'volumechange';

vjs.VolumeBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-bar',
    'aria-label': 'volume level'
  });
};

vjs.VolumeBar.prototype.onMouseMove = function(event) {
  if (this.player_.muted()) {
    this.player_.muted(false);
  }

  this.player_.volume(this.calculateDistance(event));
};

vjs.VolumeBar.prototype.getPercent = function(){
  if (this.player_.muted()) {
    return 0;
  } else {
    return this.player_.volume();
  }
};

vjs.VolumeBar.prototype.stepForward = function(){
  this.player_.volume(this.player_.volume() + 0.1);
};

vjs.VolumeBar.prototype.stepBack = function(){
  this.player_.volume(this.player_.volume() - 0.1);
};

/**
 * Shows volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeLevel = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.VolumeLevel.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-level',
    innerHTML: '<span class="vjs-control-text"></span>'
  });
};

/**
 * The volume handle can be dragged to adjust the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
 vjs.VolumeHandle = vjs.SliderHandle.extend();

 vjs.VolumeHandle.prototype.defaultValue = '00:00';

 /** @inheritDoc */
 vjs.VolumeHandle.prototype.createEl = function(){
   return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
     className: 'vjs-volume-handle'
   });
 };
/**
 * A button component for muting the audio
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MuteToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    player.on('volumechange', vjs.bind(this, this.update));

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
  }
});

vjs.MuteToggle.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-mute-control vjs-control',
    innerHTML: '<div><span class="vjs-control-text">' + this.localize('Mute') + '</span></div>'
  });
};

vjs.MuteToggle.prototype.onClick = function(){
  this.player_.muted( this.player_.muted() ? false : true );
};

vjs.MuteToggle.prototype.update = function(){
  var vol = this.player_.volume(),
      level = 3;

  if (vol === 0 || this.player_.muted()) {
    level = 0;
  } else if (vol < 0.33) {
    level = 1;
  } else if (vol < 0.67) {
    level = 2;
  }

  // Don't rewrite the button text if the actual text doesn't change.
  // This causes unnecessary and confusing information for screen reader users.
  // This check is needed because this function gets called every time the volume level is changed.
  if(this.player_.muted()){
      if(this.el_.children[0].children[0].innerHTML!=this.localize('Unmute')){
          this.el_.children[0].children[0].innerHTML = this.localize('Unmute'); // change the button text to "Unmute"
      }
  } else {
      if(this.el_.children[0].children[0].innerHTML!=this.localize('Mute')){
          this.el_.children[0].children[0].innerHTML = this.localize('Mute'); // change the button text to "Mute"
      }
  }

  /* TODO improve muted icon classes */
  for (var i = 0; i < 4; i++) {
    vjs.removeClass(this.el_, 'vjs-vol-'+i);
  }
  vjs.addClass(this.el_, 'vjs-vol-'+level);
};
/**
 * Menu button with a popup for showing the volume slider.
 * @constructor
 */
vjs.VolumeMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    // Same listeners as MuteToggle
    player.on('volumechange', vjs.bind(this, this.update));

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
    this.addClass('vjs-menu-button');
  }
});

vjs.VolumeMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_, {
    contentElType: 'div'
  });
  var vc = new vjs.VolumeBar(this.player_, vjs.obj.merge({'vertical': true}, this.options_.volumeBar));
  menu.addChild(vc);
  return menu;
};

vjs.VolumeMenuButton.prototype.onClick = function(){
  vjs.MuteToggle.prototype.onClick.call(this);
  vjs.MenuButton.prototype.onClick.call(this);
};

vjs.VolumeMenuButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-menu-button vjs-menu-button vjs-control',
    innerHTML: '<div><span class="vjs-control-text">' + this.localize('Mute') + '</span></div>'
  });
};
vjs.VolumeMenuButton.prototype.update = vjs.MuteToggle.prototype.update;
/**
 * The component for controlling the playback rate
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlaybackRateMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    this.updateVisibility();
    this.updateLabel();

    player.on('loadstart', vjs.bind(this, this.updateVisibility));
    player.on('ratechange', vjs.bind(this, this.updateLabel));
  }
});

vjs.PlaybackRateMenuButton.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-playback-rate vjs-menu-button vjs-control',
    innerHTML: '<div class="vjs-control-content"><span class="vjs-control-text">' + this.localize('Playback Rate') + '</span></div>'
  });

  this.labelEl_ = vjs.createEl('div', {
    className: 'vjs-playback-rate-value',
    innerHTML: 1.0
  });

  el.appendChild(this.labelEl_);

  return el;
};

// Menu creation
vjs.PlaybackRateMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player());
  var rates = this.player().options()['playbackRates'];

  if (rates) {
    for (var i = rates.length - 1; i >= 0; i--) {
      menu.addChild(
        new vjs.PlaybackRateMenuItem(this.player(), { 'rate': rates[i] + 'x'})
        );
    };
  }

  return menu;
};

vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes = function(){
  // Current playback rate
  this.el().setAttribute('aria-valuenow', this.player().playbackRate());
};

vjs.PlaybackRateMenuButton.prototype.onClick = function(){
  // select next rate option
  var currentRate = this.player().playbackRate();
  var rates = this.player().options()['playbackRates'];
  // this will select first one if the last one currently selected
  var newRate = rates[0];
  for (var i = 0; i <rates.length ; i++) {
    if (rates[i] > currentRate) {
      newRate = rates[i];
      break;
    }
  };
  this.player().playbackRate(newRate);
};

vjs.PlaybackRateMenuButton.prototype.playbackRateSupported = function(){
  return this.player().tech
    && this.player().tech['featuresPlaybackRate']
    && this.player().options()['playbackRates']
    && this.player().options()['playbackRates'].length > 0
  ;
};

/**
 * Hide playback rate controls when they're no playback rate options to select
 */
vjs.PlaybackRateMenuButton.prototype.updateVisibility = function(){
  if (this.playbackRateSupported()) {
    this.removeClass('vjs-hidden');
  } else {
    this.addClass('vjs-hidden');
  }
};

/**
 * Update button label when rate changed
 */
vjs.PlaybackRateMenuButton.prototype.updateLabel = function(){
  if (this.playbackRateSupported()) {
    this.labelEl_.innerHTML = this.player().playbackRate() + 'x';
  }
};

/**
 * The specific menu item type for selecting a playback rate
 *
 * @constructor
 */
vjs.PlaybackRateMenuItem = vjs.MenuItem.extend({
  contentElType: 'button',
  /** @constructor */
  init: function(player, options){
    var label = this.label = options['rate'];
    var rate = this.rate = parseFloat(label, 10);

    // Modify options for parent MenuItem class's init.
    options['label'] = label;
    options['selected'] = rate === 1;
    vjs.MenuItem.call(this, player, options);

    this.player().on('ratechange', vjs.bind(this, this.update));
  }
});

vjs.PlaybackRateMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player().playbackRate(this.rate);
};

vjs.PlaybackRateMenuItem.prototype.update = function(){
  this.selected(this.player().playbackRate() == this.rate);
};
/* Poster Image
================================================================================ */
/**
 * The component that handles showing the poster image.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PosterImage = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    if (player.poster()) {
      this.src(player.poster());
    }

    if (!player.poster() || !player.controls()) {
      this.hide();
    }

    player.on('posterchange', vjs.bind(this, function(){
      this.src(player.poster());
    }));

    player.on('play', vjs.bind(this, this.hide));
  }
});

// use the test el to check for backgroundSize style support
var _backgroundSizeSupported = 'backgroundSize' in vjs.TEST_VID.style;

vjs.PosterImage.prototype.createEl = function(){
  var el = vjs.createEl('div', {
    className: 'vjs-poster',

    // Don't want poster to be tabbable.
    tabIndex: -1
  });

  if (!_backgroundSizeSupported) {
    // setup an img element as a fallback for IE8
    el.appendChild(vjs.createEl('img'));
  }

  return el;
};

vjs.PosterImage.prototype.src = function(url){
  var el = this.el();

  // getter
  // can't think of a need for a getter here
  // see #838 if on is needed in the future
  // still don't want a getter to set src as undefined
  if (url === undefined) {
    return;
  }

  // setter
  // To ensure the poster image resizes while maintaining its original aspect
  // ratio, use a div with `background-size` when available. For browsers that
  // do not support `background-size` (e.g. IE8), fall back on using a regular
  // img element.
  if (_backgroundSizeSupported) {
    el.style.backgroundImage = 'url("' + url + '")';
  } else {
    el.firstChild.src = url;
  }
};

vjs.PosterImage.prototype.onClick = function(){
  // Only accept clicks when controls are enabled
  if (this.player().controls()) {
    this.player_.play();
  }
};
/* Loading Spinner
================================================================================ */
/**
 * Loading spinner for waiting events
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.LoadingSpinner = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // MOVING DISPLAY HANDLING TO CSS

    // player.on('canplay', vjs.bind(this, this.hide));
    // player.on('canplaythrough', vjs.bind(this, this.hide));
    // player.on('playing', vjs.bind(this, this.hide));
    // player.on('seeking', vjs.bind(this, this.show));

    // in some browsers seeking does not trigger the 'playing' event,
    // so we also need to trap 'seeked' if we are going to set a
    // 'seeking' event
    // player.on('seeked', vjs.bind(this, this.hide));

    // player.on('ended', vjs.bind(this, this.hide));

    // Not showing spinner on stalled any more. Browsers may stall and then not trigger any events that would remove the spinner.
    // Checked in Chrome 16 and Safari 5.1.2. http://help.videojs.com/discussions/problems/883-why-is-the-download-progress-showing
    // player.on('stalled', vjs.bind(this, this.show));

    // player.on('waiting', vjs.bind(this, this.show));
  }
});

vjs.LoadingSpinner.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-loading-spinner'
  });
};
/* Big Play Button
================================================================================ */
/**
 * Initial play button. Shows before the video has played. The hiding of the
 * big play button is done via CSS and player states.
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.BigPlayButton = vjs.Button.extend();

vjs.BigPlayButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-big-play-button',
    innerHTML: '<span aria-hidden="true"></span>',
    'aria-label': 'play video'
  });
};

vjs.BigPlayButton.prototype.onClick = function(){
  this.player_.play();
};
/**
 * Display that an error has occurred making the video unplayable
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ErrorDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.update();
    player.on('error', vjs.bind(this, this.update));
  }
});

vjs.ErrorDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-error-display'
  });

  this.contentEl_ = vjs.createEl('div');
  el.appendChild(this.contentEl_);

  return el;
};

vjs.ErrorDisplay.prototype.update = function(){
  if (this.player().error()) {
    this.contentEl_.innerHTML = this.localize(this.player().error().message);
  }
};
/**
 * @fileoverview Media Technology Controller - Base class for media playback
 * technology controllers like Flash and HTML5
 */

/**
 * Base class for media (HTML5 Video, Flash) controllers
 * @param {vjs.Player|Object} player  Central player instance
 * @param {Object=} options Options object
 * @constructor
 */
vjs.MediaTechController = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    options = options || {};
    // we don't want the tech to report user activity automatically.
    // This is done manually in addControlsListeners
    options.reportTouchActivity = false;
    vjs.Component.call(this, player, options, ready);

    // Manually track progress in cases where the browser/flash player doesn't report it.
    if (!this['featuresProgressEvents']) {
      this.manualProgressOn();
    }

    // Manually track timeudpates in cases where the browser/flash player doesn't report it.
    if (!this['featuresTimeupdateEvents']) {
      this.manualTimeUpdatesOn();
    }

    this.initControlsListeners();
  }
});

/**
 * Set up click and touch listeners for the playback element
 * On desktops, a click on the video itself will toggle playback,
 * on a mobile device a click on the video toggles controls.
 * (toggling controls is done by toggling the user state between active and
 * inactive)
 *
 * A tap can signal that a user has become active, or has become inactive
 * e.g. a quick tap on an iPhone movie should reveal the controls. Another
 * quick tap should hide them again (signaling the user is in an inactive
 * viewing state)
 *
 * In addition to this, we still want the user to be considered inactive after
 * a few seconds of inactivity.
 *
 * Note: the only part of iOS interaction we can't mimic with this setup
 * is a touch and hold on the video element counting as activity in order to
 * keep the controls showing, but that shouldn't be an issue. A touch and hold on
 * any controls will still keep the user active
 */
vjs.MediaTechController.prototype.initControlsListeners = function(){
  var player, tech, activateControls, deactivateControls;

  tech = this;
  player = this.player();

  var activateControls = function(){
    if (player.controls() && !player.usingNativeControls()) {
      tech.addControlsListeners();
    }
  };

  deactivateControls = vjs.bind(tech, tech.removeControlsListeners);

  // Set up event listeners once the tech is ready and has an element to apply
  // listeners to
  this.ready(activateControls);
  player.on('controlsenabled', activateControls);
  player.on('controlsdisabled', deactivateControls);

  // if we're loading the playback object after it has started loading or playing the
  // video (often with autoplay on) then the loadstart event has already fired and we
  // need to fire it manually because many things rely on it.
  // Long term we might consider how we would do this for other events like 'canplay'
  // that may also have fired.
  this.ready(function(){
    if (this.networkState && this.networkState() > 0) {
      this.player().trigger('loadstart');
    }
  });
};

vjs.MediaTechController.prototype.addControlsListeners = function(){
  var userWasActive;

  // Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do
  // trigger mousedown/up.
  // http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object
  // Any touch events are set to block the mousedown event from happening
  this.on('mousedown', this.onClick);

  // If the controls were hidden we don't want that to change without a tap event
  // so we'll check if the controls were already showing before reporting user
  // activity
  this.on('touchstart', function(event) {
    userWasActive = this.player_.userActive();
  });

  this.on('touchmove', function(event) {
    if (userWasActive){
      this.player().reportUserActivity();
    }
  });

  this.on('touchend', function(event) {
    // Stop the mouse events from also happening
    event.preventDefault();
  });

  // Turn on component tap events
  this.emitTapEvents();

  // The tap listener needs to come after the touchend listener because the tap
  // listener cancels out any reportedUserActivity when setting userActive(false)
  this.on('tap', this.onTap);
};

/**
 * Remove the listeners used for click and tap controls. This is needed for
 * toggling to controls disabled, where a tap/touch should do nothing.
 */
vjs.MediaTechController.prototype.removeControlsListeners = function(){
  // We don't want to just use `this.off()` because there might be other needed
  // listeners added by techs that extend this.
  this.off('tap');
  this.off('touchstart');
  this.off('touchmove');
  this.off('touchleave');
  this.off('touchcancel');
  this.off('touchend');
  this.off('click');
  this.off('mousedown');
};

/**
 * Handle a click on the media element. By default will play/pause the media.
 */
vjs.MediaTechController.prototype.onClick = function(event){
  // We're using mousedown to detect clicks thanks to Flash, but mousedown
  // will also be triggered with right-clicks, so we need to prevent that
  if (event.button !== 0) return;

  // When controls are disabled a click should not toggle playback because
  // the click is considered a control
  if (this.player().controls()) {
    if (this.player().paused()) {
      this.player().play();
    } else {
      this.player().pause();
    }
  }
};

/**
 * Handle a tap on the media element. By default it will toggle the user
 * activity state, which hides and shows the controls.
 */
vjs.MediaTechController.prototype.onTap = function(){
  this.player().userActive(!this.player().userActive());
};

/* Fallbacks for unsupported event types
================================================================================ */
// Manually trigger progress events based on changes to the buffered amount
// Many flash players and older HTML5 browsers don't send progress or progress-like events
vjs.MediaTechController.prototype.manualProgressOn = function(){
  this.manualProgress = true;

  // Trigger progress watching when a source begins loading
  this.trackProgress();
};

vjs.MediaTechController.prototype.manualProgressOff = function(){
  this.manualProgress = false;
  this.stopTrackingProgress();
};

vjs.MediaTechController.prototype.trackProgress = function(){

  this.progressInterval = setInterval(vjs.bind(this, function(){
    // Don't trigger unless buffered amount is greater than last time

    var bufferedPercent = this.player().bufferedPercent();

    if (this.bufferedPercent_ != bufferedPercent) {
      this.player().trigger('progress');
    }

    this.bufferedPercent_ = bufferedPercent;

    if (bufferedPercent === 1) {
      this.stopTrackingProgress();
    }
  }), 500);
};
vjs.MediaTechController.prototype.stopTrackingProgress = function(){ clearInterval(this.progressInterval); };

/*! Time Tracking -------------------------------------------------------------- */
vjs.MediaTechController.prototype.manualTimeUpdatesOn = function(){
  this.manualTimeUpdates = true;

  this.player().on('play', vjs.bind(this, this.trackCurrentTime));
  this.player().on('pause', vjs.bind(this, this.stopTrackingCurrentTime));
  // timeupdate is also called by .currentTime whenever current time is set

  // Watch for native timeupdate event
  this.one('timeupdate', function(){
    // Update known progress support for this playback technology
    this['featuresTimeupdateEvents'] = true;
    // Turn off manual progress tracking
    this.manualTimeUpdatesOff();
  });
};

vjs.MediaTechController.prototype.manualTimeUpdatesOff = function(){
  this.manualTimeUpdates = false;
  this.stopTrackingCurrentTime();
  this.off('play', this.trackCurrentTime);
  this.off('pause', this.stopTrackingCurrentTime);
};

vjs.MediaTechController.prototype.trackCurrentTime = function(){
  if (this.currentTimeInterval) { this.stopTrackingCurrentTime(); }
  this.currentTimeInterval = setInterval(vjs.bind(this, function(){
    this.player().trigger('timeupdate');
  }), 250); // 42 = 24 fps // 250 is what Webkit uses // FF uses 15
};

// Turn off play progress tracking (when paused or dragging)
vjs.MediaTechController.prototype.stopTrackingCurrentTime = function(){
  clearInterval(this.currentTimeInterval);

  // #1002 - if the video ends right before the next timeupdate would happen,
  // the progress bar won't make it all the way to the end
  this.player().trigger('timeupdate');
};

vjs.MediaTechController.prototype.dispose = function() {
  // Turn off any manual progress or timeupdate tracking
  if (this.manualProgress) { this.manualProgressOff(); }

  if (this.manualTimeUpdates) { this.manualTimeUpdatesOff(); }

  vjs.Component.prototype.dispose.call(this);
};

vjs.MediaTechController.prototype.setCurrentTime = function() {
  // improve the accuracy of manual timeupdates
  if (this.manualTimeUpdates) { this.player().trigger('timeupdate'); }
};

/**
 * Provide a default setPoster method for techs
 *
 * Poster support for techs should be optional, so we don't want techs to
 * break if they don't have a way to set a poster.
 */
vjs.MediaTechController.prototype.setPoster = function(){};

vjs.MediaTechController.prototype['featuresVolumeControl'] = true;

// Resizing plugins using request fullscreen reloads the plugin
vjs.MediaTechController.prototype['featuresFullscreenResize'] = false;
vjs.MediaTechController.prototype['featuresPlaybackRate'] = false;

// Optional events that we can manually mimic with timers
// currently not triggered by video-js-swf
vjs.MediaTechController.prototype['featuresProgressEvents'] = false;
vjs.MediaTechController.prototype['featuresTimeupdateEvents'] = false;

vjs.media = {};
/**
 * @fileoverview HTML5 Media Controller - Wrapper for HTML5 Media API
 */

/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Html5 = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    // volume cannot be changed from 1 on iOS
    this['featuresVolumeControl'] = vjs.Html5.canControlVolume();

    // just in case; or is it excessively...
    this['featuresPlaybackRate'] = vjs.Html5.canControlPlaybackRate();

    // In iOS, if you move a video element in the DOM, it breaks video playback.
    this['movingMediaElementInDOM'] = !vjs.IS_IOS;

    // HTML video is able to automatically resize when going to fullscreen
    this['featuresFullscreenResize'] = true;

    // HTML video supports progress events
    this['featuresProgressEvents'] = true;

    vjs.MediaTechController.call(this, player, options, ready);
    this.setupTriggers();

    var source = options['source'];

    // set the source if one was provided
    if (source && this.el_.currentSrc !== source.src) {
      this.el_.src = source.src;
    }

    // Determine if native controls should be used
    // Our goal should be to get the custom controls on mobile solid everywhere
    // so we can remove this all together. Right now this will block custom
    // controls on touch enabled laptops like the Chrome Pixel
    if (vjs.TOUCH_ENABLED && player.options()['nativeControlsForTouch'] !== false) {
      this.useNativeControls();
    }

    // Chrome and Safari both have issues with autoplay.
    // In Safari (5.1.1), when we move the video element into the container div, autoplay doesn't work.
    // In Chrome (15), if you have autoplay + a poster + no controls, the video gets hidden (but audio plays)
    // This fixes both issues. Need to wait for API, so it updates displays correctly
    player.ready(function(){
      if (this.tag && this.options_['autoplay'] && this.paused()) {
        delete this.tag['poster']; // Chrome Fix. Fixed in Chrome v16.
        this.play();
      }
    });

    this.triggerReady();
  }
});

vjs.Html5.prototype.dispose = function(){
  vjs.Html5.disposeMediaElement(this.el_);
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Html5.prototype.createEl = function(){
  var player = this.player_,
      // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      newEl,
      clone;

  // Check if this browser supports moving the element into the box.
  // On the iPhone video will break if you move the element,
  // So we have to create a brand new element.
  if (!el || this['movingMediaElementInDOM'] === false) {

    // If the original tag is still there, clone and remove it.
    if (el) {
      clone = el.cloneNode(false);
      vjs.Html5.disposeMediaElement(el);
      el = clone;
      player.tag = null;
    } else {
      el = vjs.createEl('video');
      vjs.setElementAttributes(el,
        vjs.obj.merge(player.tagAttributes || {}, {
          id:player.id() + '_html5_api',
          'class':'vjs-tech'
        })
      );
    }
    // associate the player with the new tag
    el['player'] = player;

    vjs.insertFirst(el, player.el());
  }

  // Update specific tag settings, in case they were overridden
  var settingsAttrs = ['autoplay','preload','loop','muted'];
  for (var i = settingsAttrs.length - 1; i >= 0; i--) {
    var attr = settingsAttrs[i];
    var overwriteAttrs = {};
    if (typeof player.options_[attr] !== 'undefined') {
      overwriteAttrs[attr] = player.options_[attr];
    }
    vjs.setElementAttributes(el, overwriteAttrs);
  }

  return el;
  // jenniisawesome = true;
};

// Make video events trigger player events
// May seem verbose here, but makes other APIs possible.
// Triggers removed using this.off when disposed
vjs.Html5.prototype.setupTriggers = function(){
  for (var i = vjs.Html5.Events.length - 1; i >= 0; i--) {
    vjs.on(this.el_, vjs.Html5.Events[i], vjs.bind(this, this.eventHandler));
  }
};

vjs.Html5.prototype.eventHandler = function(evt){
  // In the case of an error on the video element, set the error prop
  // on the player and let the player handle triggering the event. On
  // some platforms, error events fire that do not cause the error
  // property on the video element to be set. See #1465 for an example.
  if (evt.type == 'error' && this.error()) {
    this.player().error(this.error().code);

  // in some cases we pass the event directly to the player
  } else {
    // No need for media events to bubble up.
    evt.bubbles = false;

    this.player().trigger(evt);
  }
};

vjs.Html5.prototype.useNativeControls = function(){
  var tech, player, controlsOn, controlsOff, cleanUp;

  tech = this;
  player = this.player();

  // If the player controls are enabled turn on the native controls
  tech.setControls(player.controls());

  // Update the native controls when player controls state is updated
  controlsOn = function(){
    tech.setControls(true);
  };
  controlsOff = function(){
    tech.setControls(false);
  };
  player.on('controlsenabled', controlsOn);
  player.on('controlsdisabled', controlsOff);

  // Clean up when not using native controls anymore
  cleanUp = function(){
    player.off('controlsenabled', controlsOn);
    player.off('controlsdisabled', controlsOff);
  };
  tech.on('dispose', cleanUp);
  player.on('usingcustomcontrols', cleanUp);

  // Update the state of the player to using native controls
  player.usingNativeControls(true);
};


vjs.Html5.prototype.play = function(){ this.el_.play(); };
vjs.Html5.prototype.pause = function(){ this.el_.pause(); };
vjs.Html5.prototype.paused = function(){ return this.el_.paused; };

vjs.Html5.prototype.currentTime = function(){ return this.el_.currentTime; };
vjs.Html5.prototype.setCurrentTime = function(seconds){
  try {
    this.el_.currentTime = seconds;
  } catch(e) {
    vjs.log(e, 'Video is not ready. (Video.js)');
    // this.warning(VideoJS.warnings.videoNotReady);
  }
};

vjs.Html5.prototype.duration = function(){ return this.el_.duration || 0; };
vjs.Html5.prototype.buffered = function(){ return this.el_.buffered; };

vjs.Html5.prototype.volume = function(){ return this.el_.volume; };
vjs.Html5.prototype.setVolume = function(percentAsDecimal){ this.el_.volume = percentAsDecimal; };
vjs.Html5.prototype.muted = function(){ return this.el_.muted; };
vjs.Html5.prototype.setMuted = function(muted){ this.el_.muted = muted; };

vjs.Html5.prototype.width = function(){ return this.el_.offsetWidth; };
vjs.Html5.prototype.height = function(){ return this.el_.offsetHeight; };

vjs.Html5.prototype.supportsFullScreen = function(){
  if (typeof this.el_.webkitEnterFullScreen == 'function') {

    // Seems to be broken in Chromium/Chrome && Safari in Leopard
    if (/Android/.test(vjs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)) {
      return true;
    }
  }
  return false;
};

vjs.Html5.prototype.enterFullScreen = function(){
  var video = this.el_;
  if (video.paused && video.networkState <= video.HAVE_METADATA) {
    // attempt to prime the video element for programmatic access
    // this isn't necessary on the desktop but shouldn't hurt
    this.el_.play();

    // playing and pausing synchronously during the transition to fullscreen
    // can get iOS ~6.1 devices into a play/pause loop
    setTimeout(function(){
      video.pause();
      video.webkitEnterFullScreen();
    }, 0);
  } else {
    video.webkitEnterFullScreen();
  }
};
vjs.Html5.prototype.exitFullScreen = function(){
  this.el_.webkitExitFullScreen();
};
vjs.Html5.prototype.src = function(src) {
  if (src === undefined) {
    return this.el_.src;
  } else {
    this.el_.src = src;
  }
};
vjs.Html5.prototype.load = function(){ this.el_.load(); };
vjs.Html5.prototype.currentSrc = function(){ return this.el_.currentSrc; };

vjs.Html5.prototype.poster = function(){ return this.el_.poster; };
vjs.Html5.prototype.setPoster = function(val){ this.el_.poster = val; };

vjs.Html5.prototype.preload = function(){ return this.el_.preload; };
vjs.Html5.prototype.setPreload = function(val){ this.el_.preload = val; };

vjs.Html5.prototype.autoplay = function(){ return this.el_.autoplay; };
vjs.Html5.prototype.setAutoplay = function(val){ this.el_.autoplay = val; };

vjs.Html5.prototype.controls = function(){ return this.el_.controls; };
vjs.Html5.prototype.setControls = function(val){ this.el_.controls = !!val; };

vjs.Html5.prototype.loop = function(){ return this.el_.loop; };
vjs.Html5.prototype.setLoop = function(val){ this.el_.loop = val; };

vjs.Html5.prototype.error = function(){ return this.el_.error; };
vjs.Html5.prototype.seeking = function(){ return this.el_.seeking; };
vjs.Html5.prototype.ended = function(){ return this.el_.ended; };
vjs.Html5.prototype.defaultMuted = function(){ return this.el_.defaultMuted; };

vjs.Html5.prototype.playbackRate = function(){ return this.el_.playbackRate; };
vjs.Html5.prototype.setPlaybackRate = function(val){ this.el_.playbackRate = val; };

vjs.Html5.prototype.networkState = function(){ return this.el_.networkState; };

/* HTML5 Support Testing ---------------------------------------------------- */

vjs.Html5.isSupported = function(){
  // ie9 with no Media Player is a LIAR! (#984)
  try {
    vjs.TEST_VID['volume'] = 0.5;
  } catch (e) {
    return false;
  }

  return !!vjs.TEST_VID.canPlayType;
};

vjs.Html5.canPlaySource = function(srcObj){
  // IE9 on Windows 7 without MediaPlayer throws an error here
  // https://github.com/videojs/video.js/issues/519
  try {
    return !!vjs.TEST_VID.canPlayType(srcObj.type);
  } catch(e) {
    return '';
  }
  // TODO: Check Type
  // If no Type, check ext
  // Check Media Type
};

vjs.Html5.canControlVolume = function(){
  var volume =  vjs.TEST_VID.volume;
  vjs.TEST_VID.volume = (volume / 2) + 0.1;
  return volume !== vjs.TEST_VID.volume;
};

vjs.Html5.canControlPlaybackRate = function(){
  var playbackRate =  vjs.TEST_VID.playbackRate;
  vjs.TEST_VID.playbackRate = (playbackRate / 2) + 0.1;
  return playbackRate !== vjs.TEST_VID.playbackRate;
};

// HTML5 Feature detection and Device Fixes --------------------------------- //
(function() {
  var canPlayType,
      mpegurlRE = /^application\/(?:x-|vnd\.apple\.)mpegurl/i,
      mp4RE = /^video\/mp4/i;

  vjs.Html5.patchCanPlayType = function() {
    // Android 4.0 and above can play HLS to some extent but it reports being unable to do so
    if (vjs.ANDROID_VERSION >= 4.0) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type) {
        if (type && mpegurlRE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }

    // Override Android 2.2 and less canPlayType method which is broken
    if (vjs.IS_OLD_ANDROID) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type){
        if (type && mp4RE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }
  };

  vjs.Html5.unpatchCanPlayType = function() {
    var r = vjs.TEST_VID.constructor.prototype.canPlayType;
    vjs.TEST_VID.constructor.prototype.canPlayType = canPlayType;
    canPlayType = null;
    return r;
  };

  // by default, patch the video element
  vjs.Html5.patchCanPlayType();
})();

// List of all HTML5 events (various uses).
vjs.Html5.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange'.split(',');

vjs.Html5.disposeMediaElement = function(el){
  if (!el) { return; }

  el['player'] = null;

  if (el.parentNode) {
    el.parentNode.removeChild(el);
  }

  // remove any child track or source nodes to prevent their loading
  while(el.hasChildNodes()) {
    el.removeChild(el.firstChild);
  }

  // remove any src reference. not setting `src=''` because that causes a warning
  // in firefox
  el.removeAttribute('src');

  // force the media element to update its loading state by calling load()
  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)
  if (typeof el.load === 'function') {
    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
    (function() {
      try {
        el.load();
      } catch (e) {
        // not supported
      }
    })();
  }
};
/**
 * @fileoverview VideoJS-SWF - Custom Flash Player with HTML5-ish API
 * https://github.com/zencoder/video-js-swf
 * Not using setupTriggers. Using global onEvent func to distribute events
 */

/**
 * Flash Media Controller - Wrapper for fallback SWF API
 *
 * @param {vjs.Player} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Flash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

        // Which element to embed in
        parentEl = options['parentEl'],

        // Create a temporary element to be replaced by swf object
        placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),

        // Generate ID for swf object
        objId = player.id()+'_flash_api',

        // Store player options in local var for optimization
        // TODO: switch to using player methods instead of options
        // e.g. player.autoplay();
        playerOptions = player.options_,

        // Merge default flashvars with ones passed in to init
        flashVars = vjs.obj.merge({

          // SWF Callback Functions
          'readyFunction': 'videojs.Flash.onReady',
          'eventProxyFunction': 'videojs.Flash.onEvent',
          'errorEventProxyFunction': 'videojs.Flash.onError',

          // Player Settings
          'autoplay': playerOptions.autoplay,
          'preload': playerOptions.preload,
          'loop': playerOptions.loop,
          'muted': playerOptions.muted

        }, options['flashVars']),

        // Merge default parames with ones passed in
        params = vjs.obj.merge({
          'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
          'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
        }, options['params']),

        // Merge default attributes with ones passed in
        attributes = vjs.obj.merge({
          'id': objId,
          'name': objId, // Both ID and Name needed or swf to identifty itself
          'class': 'vjs-tech'
        }, options['attributes'])
    ;

    // If source was supplied pass as a flash var.
    if (source) {
      if (source.type && vjs.Flash.isStreamingType(source.type)) {
        var parts = vjs.Flash.streamToParts(source.src);
        flashVars['rtmpConnection'] = encodeURIComponent(parts.connection);
        flashVars['rtmpStream'] = encodeURIComponent(parts.stream);
      }
      else {
        flashVars['src'] = encodeURIComponent(vjs.getAbsoluteURL(source.src));
      }
    }

    // Add placeholder to player div
    vjs.insertFirst(placeHolder, parentEl);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this['currentTime'](options['startTime']);
      });
    }

    // firefox doesn't bubble mousemove events to parent. videojs/video-js-swf#37
    // bugzilla bug: https://bugzilla.mozilla.org/show_bug.cgi?id=836786
    if (vjs.IS_FIREFOX) {
      this.ready(function(){
        vjs.on(this.el(), 'mousemove', vjs.bind(this, function(){
          // since it's a custom event, don't bubble higher than the player
          this.player().trigger({ 'type':'mousemove', 'bubbles': false });
        }));
      });
    }

    // native click events on the SWF aren't triggered on IE11, Win8.1RT
    // use stageclick events triggered from inside the SWF instead
    player.on('stageclick', player.reportUserActivity);

    this.el_ = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
  }
});

vjs.Flash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Flash.prototype.play = function(){
  this.el_.vjs_play();
};

vjs.Flash.prototype.pause = function(){
  this.el_.vjs_pause();
};

vjs.Flash.prototype.src = function(src){
  if (src === undefined) {
    return this['currentSrc']();
  }

  if (vjs.Flash.isStreamingSrc(src)) {
    src = vjs.Flash.streamToParts(src);
    this.setRtmpConnection(src.connection);
    this.setRtmpStream(src.stream);
  } else {
    // Make sure source URL is abosolute.
    src = vjs.getAbsoluteURL(src);
    this.el_.vjs_src(src);
  }

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Flash.prototype['setCurrentTime'] = function(time){
  this.lastSeekTarget_ = time;
  this.el_.vjs_setProperty('currentTime', time);
  vjs.MediaTechController.prototype.setCurrentTime.call(this);
};

vjs.Flash.prototype['currentTime'] = function(time){
  // when seeking make the reported time keep up with the requested time
  // by reading the time we're seeking to
  if (this.seeking()) {
    return this.lastSeekTarget_ || 0;
  }
  return this.el_.vjs_getProperty('currentTime');
};

vjs.Flash.prototype['currentSrc'] = function(){
  var src = this.el_.vjs_getProperty('currentSrc');
  // no src, check and see if RTMP
  if (src == null) {
    var connection = this['rtmpConnection'](),
        stream = this['rtmpStream']();

    if (connection && stream) {
      src = vjs.Flash.streamFromParts(connection, stream);
    }
  }
  return src;
};

vjs.Flash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Flash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};
vjs.Flash.prototype['setPoster'] = function(){
  // poster images are not handled by the Flash tech so make this a no-op
};

vjs.Flash.prototype.buffered = function(){
  return vjs.createTimeRange(0, this.el_.vjs_getProperty('buffered'));
};

vjs.Flash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Flash.prototype.enterFullScreen = function(){
  return false;
};

(function(){
  // Create setters and getters for attributes
  var api = vjs.Flash.prototype,
    readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
    readOnly = 'error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks'.split(','),
    // Overridden: buffered, currentTime, currentSrc
    i;

  function createSetter(attr){
    var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
    api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
  };
  function createGetter(attr) {
    api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
  };

  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Flash.isSupported = function(){
  return vjs.Flash.version()[0] >= 10;
  // return swfobject.hasFlashPlayerVersion('10');
};

vjs.Flash.canPlaySource = function(srcObj){
  var type;

  if (!srcObj.type) {
    return '';
  }

  type = srcObj.type.replace(/;.*/,'').toLowerCase();
  if (type in vjs.Flash.formats || type in vjs.Flash.streamingFormats) {
    return 'maybe';
  }
};

vjs.Flash.formats = {
  'video/flv': 'FLV',
  'video/x-flv': 'FLV',
  'video/mp4': 'MP4',
  'video/m4v': 'MP4'
};

vjs.Flash.streamingFormats = {
  'rtmp/mp4': 'MP4',
  'rtmp/flv': 'FLV'
};

vjs.Flash['onReady'] = function(currSwf){
  var el, player;

  el = vjs.el(currSwf);

  // get player from the player div property
  player = el && el.parentNode && el.parentNode['player'];

  // if there is no el or player then the tech has been disposed
  // and the tech element was removed from the player div
  if (player) {
    // reference player on tech element
    el['player'] = player;
    // check that the flash object is really ready
    vjs.Flash['checkReady'](player.tech);
  }
};

// The SWF isn't always ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Flash['checkReady'] = function(tech){
  // stop worrying if the tech has been disposed
  if (!tech.el()) {
    return;
  }

  // check if API property exists
  if (tech.el().vjs_getProperty) {
    // tell tech it's ready
    tech.triggerReady();
  } else {
    // wait longer
    setTimeout(function(){
      vjs.Flash['checkReady'](tech);
    }, 50);
  }
};

// Trigger events from the swf on the player
vjs.Flash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Flash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  var msg = 'FLASH: '+err;

  if (err == 'srcnotfound') {
    player.error({ code: 4, message: msg });

  // errors we haven't categorized into the media errors
  } else {
    player.error(msg);
  }
};

// Flash Version Check
vjs.Flash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

  // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Flash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Flash.getEmbedCode(swf, flashVars, params, attributes),

      // Get element by embedding code and retrieving created element
      obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

      par = placeHolder.parentNode
  ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Flash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash"',
      flashVarsString = '',
      paramsString = '',
      attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};

vjs.Flash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Flash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Flash.isStreamingType = function(srcType) {
  return srcType in vjs.Flash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Flash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Flash.isStreamingSrc = function(src) {
  return vjs.Flash.RTMP_RE.test(src);
};
/**
 * The Media Loader is the component that decides which playback technology to load
 * when the player is initialized.
 *
 * @constructor
 */
vjs.MediaLoader = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // If there are no sources when the player is initialized,
    // load the first supported playback technology.
    if (!player.options_['sources'] || player.options_['sources'].length === 0) {
      for (var i=0,j=player.options_['techOrder']; i<j.length; i++) {
        var techName = vjs.capitalize(j[i]),
            tech = window['videojs'][techName];

        // Check if the browser supports this technology
        if (tech && tech.isSupported()) {
          player.loadTech(techName);
          break;
        }
      }
    } else {
      // // Loop through playback technologies (HTML5, Flash) and check for support.
      // // Then load the best source.
      // // A few assumptions here:
      // //   All playback technologies respect preload false.
      player.src(player.options_['sources']);
    }
  }
});
/**
 * @fileoverview Text Tracks
 * Text tracks are tracks of timed text events.
 * Captions - text displayed over the video for the hearing impared
 * Subtitles - text displayed over the video for those who don't understand langauge in the video
 * Chapters - text displayed in a menu allowing the user to jump to particular points (chapters) in the video
 * Descriptions (not supported yet) - audio descriptions that are read back to the user by a screen reading device
 */

// Player Additions - Functions add to the player object for easier access to tracks

/**
 * List of associated text tracks
 * @type {Array}
 * @private
 */
vjs.Player.prototype.textTracks_;

/**
 * Get an array of associated text tracks. captions, subtitles, chapters, descriptions
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks
 * @return {Array}           Array of track objects
 * @private
 */
vjs.Player.prototype.textTracks = function(){
  this.textTracks_ = this.textTracks_ || [];
  return this.textTracks_;
};

/**
 * Add a text track
 * In addition to the W3C settings we allow adding additional info through options.
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack
 * @param {String}  kind        Captions, subtitles, chapters, descriptions, or metadata
 * @param {String=} label       Optional label
 * @param {String=} language    Optional language
 * @param {Object=} options     Additional track options, like src
 * @private
 */
vjs.Player.prototype.addTextTrack = function(kind, label, language, options){
  var tracks = this.textTracks_ = this.textTracks_ || [];
  options = options || {};

  options['kind'] = kind;
  options['label'] = label;
  options['language'] = language;

  // HTML5 Spec says default to subtitles.
  // Uppercase first letter to match class names
  var Kind = vjs.capitalize(kind || 'subtitles');

  // Create correct texttrack class. CaptionsTrack, etc.
  var track = new window['videojs'][Kind + 'Track'](this, options);

  tracks.push(track);

  // If track.dflt() is set, start showing immediately
  // TODO: Add a process to deterime the best track to show for the specific kind
  // Incase there are mulitple defaulted tracks of the same kind
  // Or the user has a set preference of a specific language that should override the default
  // Note: The setTimeout is a workaround because with the html5 tech, the player is 'ready'
 //  before it's child components (including the textTrackDisplay) have finished loading.
  if (track.dflt()) {
    this.ready(function(){
      setTimeout(function(){
        track.player().showTextTrack(track.id());
      }, 0);
    });
  }

  return track;
};

/**
 * Add an array of text tracks. captions, subtitles, chapters, descriptions
 * Track objects will be stored in the player.textTracks() array
 * @param {Array} trackList Array of track elements or objects (fake track elements)
 * @private
 */
vjs.Player.prototype.addTextTracks = function(trackList){
  var trackObj;

  for (var i = 0; i < trackList.length; i++) {
    trackObj = trackList[i];
    this.addTextTrack(trackObj['kind'], trackObj['label'], trackObj['language'], trackObj);
  }

  return this;
};

// Show a text track
// disableSameKind: disable all other tracks of the same kind. Value should be a track kind (captions, etc.)
vjs.Player.prototype.showTextTrack = function(id, disableSameKind){
  var tracks = this.textTracks_,
      i = 0,
      j = tracks.length,
      track, showTrack, kind;

  // Find Track with same ID
  for (;i<j;i++) {
    track = tracks[i];
    if (track.id() === id) {
      track.show();
      showTrack = track;

    // Disable tracks of the same kind
    } else if (disableSameKind && track.kind() == disableSameKind && track.mode() > 0) {
      track.disable();
    }
  }

  // Get track kind from shown track or disableSameKind
  kind = (showTrack) ? showTrack.kind() : ((disableSameKind) ? disableSameKind : false);

  // Trigger trackchange event, captionstrackchange, subtitlestrackchange, etc.
  if (kind) {
    this.trigger(kind+'trackchange');
  }

  return this;
};

/**
 * The base class for all text tracks
 *
 * Handles the parsing, hiding, and showing of text track cues
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TextTrack = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Apply track info to track object
    // Options will often be a track element

    // Build ID if one doesn't exist
    this.id_ = options['id'] || ('vjs_' + options['kind'] + '_' + options['language'] + '_' + vjs.guid++);
    this.src_ = options['src'];
    // 'default' is a reserved keyword in js so we use an abbreviated version
    this.dflt_ = options['default'] || options['dflt'];
    this.title_ = options['title'];
    this.language_ = options['srclang'];
    this.label_ = options['label'];
    this.cues_ = [];
    this.activeCues_ = [];
    this.readyState_ = 0;
    this.mode_ = 0;

    this.player_.on('fullscreenchange', vjs.bind(this, this.adjustFontSize));
  }
});

/**
 * Track kind value. Captions, subtitles, etc.
 * @private
 */
vjs.TextTrack.prototype.kind_;

/**
 * Get the track kind value
 * @return {String}
 */
vjs.TextTrack.prototype.kind = function(){
  return this.kind_;
};

/**
 * Track src value
 * @private
 */
vjs.TextTrack.prototype.src_;

/**
 * Get the track src value
 * @return {String}
 */
vjs.TextTrack.prototype.src = function(){
  return this.src_;
};

/**
 * Track default value
 * If default is used, subtitles/captions to start showing
 * @private
 */
vjs.TextTrack.prototype.dflt_;

/**
 * Get the track default value. ('default' is a reserved keyword)
 * @return {Boolean}
 */
vjs.TextTrack.prototype.dflt = function(){
  return this.dflt_;
};

/**
 * Track title value
 * @private
 */
vjs.TextTrack.prototype.title_;

/**
 * Get the track title value
 * @return {String}
 */
vjs.TextTrack.prototype.title = function(){
  return this.title_;
};

/**
 * Language - two letter string to represent track language, e.g. 'en' for English
 * Spec def: readonly attribute DOMString language;
 * @private
 */
vjs.TextTrack.prototype.language_;

/**
 * Get the track language value
 * @return {String}
 */
vjs.TextTrack.prototype.language = function(){
  return this.language_;
};

/**
 * Track label e.g. 'English'
 * Spec def: readonly attribute DOMString label;
 * @private
 */
vjs.TextTrack.prototype.label_;

/**
 * Get the track label value
 * @return {String}
 */
vjs.TextTrack.prototype.label = function(){
  return this.label_;
};

/**
 * All cues of the track. Cues have a startTime, endTime, text, and other properties.
 * Spec def: readonly attribute TextTrackCueList cues;
 * @private
 */
vjs.TextTrack.prototype.cues_;

/**
 * Get the track cues
 * @return {Array}
 */
vjs.TextTrack.prototype.cues = function(){
  return this.cues_;
};

/**
 * ActiveCues is all cues that are currently showing
 * Spec def: readonly attribute TextTrackCueList activeCues;
 * @private
 */
vjs.TextTrack.prototype.activeCues_;

/**
 * Get the track active cues
 * @return {Array}
 */
vjs.TextTrack.prototype.activeCues = function(){
  return this.activeCues_;
};

/**
 * ReadyState describes if the text file has been loaded
 * const unsigned short NONE = 0;
 * const unsigned short LOADING = 1;
 * const unsigned short LOADED = 2;
 * const unsigned short ERROR = 3;
 * readonly attribute unsigned short readyState;
 * @private
 */
vjs.TextTrack.prototype.readyState_;

/**
 * Get the track readyState
 * @return {Number}
 */
vjs.TextTrack.prototype.readyState = function(){
  return this.readyState_;
};

/**
 * Mode describes if the track is showing, hidden, or disabled
 * const unsigned short OFF = 0;
 * const unsigned short HIDDEN = 1; (still triggering cuechange events, but not visible)
 * const unsigned short SHOWING = 2;
 * attribute unsigned short mode;
 * @private
 */
vjs.TextTrack.prototype.mode_;

/**
 * Get the track mode
 * @return {Number}
 */
vjs.TextTrack.prototype.mode = function(){
  return this.mode_;
};

/**
 * Change the font size of the text track to make it larger when playing in fullscreen mode
 * and restore it to its normal size when not in fullscreen mode.
 */
vjs.TextTrack.prototype.adjustFontSize = function(){
    if (this.player_.isFullscreen()) {
        // Scale the font by the same factor as increasing the video width to the full screen window width.
        // Additionally, multiply that factor by 1.4, which is the default font size for
        // the caption track (from the CSS)
        this.el_.style.fontSize = screen.width / this.player_.width() * 1.4 * 100 + '%';
    } else {
        // Change the font size of the text track back to its original non-fullscreen size
        this.el_.style.fontSize = '';
    }
};

/**
 * Create basic div to hold cue text
 * @return {Element}
 */
vjs.TextTrack.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-' + this.kind_ + ' vjs-text-track'
  });
};

/**
 * Show: Mode Showing (2)
 * Indicates that the text track is active. If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.
 * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.
 * In addition, for text tracks whose kind is subtitles or captions, the cues are being displayed over the video as appropriate;
 * for text tracks whose kind is descriptions, the user agent is making the cues available to the user in a non-visual fashion;
 * and for text tracks whose kind is chapters, the user agent is making available to the user a mechanism by which the user can navigate to any point in the media resource by selecting a cue.
 * The showing by default state is used in conjunction with the default attribute on track elements to indicate that the text track was enabled due to that attribute.
 * This allows the user agent to override the state if a later track is discovered that is more appropriate per the user's preferences.
 */
vjs.TextTrack.prototype.show = function(){
  this.activate();

  this.mode_ = 2;

  // Show element.
  vjs.Component.prototype.show.call(this);
};

/**
 * Hide: Mode Hidden (1)
 * Indicates that the text track is active, but that the user agent is not actively displaying the cues.
 * If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.
 * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.
 */
vjs.TextTrack.prototype.hide = function(){
  // When hidden, cues are still triggered. Disable to stop triggering.
  this.activate();

  this.mode_ = 1;

  // Hide element.
  vjs.Component.prototype.hide.call(this);
};

/**
 * Disable: Mode Off/Disable (0)
 * Indicates that the text track is not active. Other than for the purposes of exposing the track in the DOM, the user agent is ignoring the text track.
 * No cues are active, no events are fired, and the user agent will not attempt to obtain the track's cues.
 */
vjs.TextTrack.prototype.disable = function(){
  // If showing, hide.
  if (this.mode_ == 2) { this.hide(); }

  // Stop triggering cues
  this.deactivate();

  // Switch Mode to Off
  this.mode_ = 0;
};

/**
 * Turn on cue tracking. Tracks that are showing OR hidden are active.
 */
vjs.TextTrack.prototype.activate = function(){
  // Load text file if it hasn't been yet.
  if (this.readyState_ === 0) { this.load(); }

  // Only activate if not already active.
  if (this.mode_ === 0) {
    // Update current cue on timeupdate
    // Using unique ID for bind function so other tracks don't remove listener
    this.player_.on('timeupdate', vjs.bind(this, this.update, this.id_));

    // Reset cue time on media end
    this.player_.on('ended', vjs.bind(this, this.reset, this.id_));

    // Add to display
    if (this.kind_ === 'captions' || this.kind_ === 'subtitles') {
      this.player_.getChild('textTrackDisplay').addChild(this);
    }
  }
};

/**
 * Turn off cue tracking.
 */
vjs.TextTrack.prototype.deactivate = function(){
  // Using unique ID for bind function so other tracks don't remove listener
  this.player_.off('timeupdate', vjs.bind(this, this.update, this.id_));
  this.player_.off('ended', vjs.bind(this, this.reset, this.id_));
  this.reset(); // Reset

  // Remove from display
  this.player_.getChild('textTrackDisplay').removeChild(this);
};

// A readiness state
// One of the following:
//
// Not loaded
// Indicates that the text track is known to exist (e.g. it has been declared with a track element), but its cues have not been obtained.
//
// Loading
// Indicates that the text track is loading and there have been no fatal errors encountered so far. Further cues might still be added to the track.
//
// Loaded
// Indicates that the text track has been loaded with no fatal errors. No new cues will be added to the track except if the text track corresponds to a MutableTextTrack object.
//
// Failed to load
// Indicates that the text track was enabled, but when the user agent attempted to obtain it, this failed in some way (e.g. URL could not be resolved, network error, unknown text track format). Some or all of the cues are likely missing and will not be obtained.
vjs.TextTrack.prototype.load = function(){

  // Only load if not loaded yet.
  if (this.readyState_ === 0) {
    this.readyState_ = 1;
    vjs.get(this.src_, vjs.bind(this, this.parseCues), vjs.bind(this, this.onError));
  }

};

vjs.TextTrack.prototype.onError = function(err){
  this.error = err;
  this.readyState_ = 3;
  this.trigger('error');
};

// Parse the WebVTT text format for cue times.
// TODO: Separate parser into own class so alternative timed text formats can be used. (TTML, DFXP)
vjs.TextTrack.prototype.parseCues = function(srcContent) {
  var cue, time, text,
      lines = srcContent.split('\n'),
      line = '', id;

  for (var i=1, j=lines.length; i<j; i++) {
    // Line 0 should be 'WEBVTT', so skipping i=0

    line = vjs.trim(lines[i]); // Trim whitespace and linebreaks

    if (line) { // Loop until a line with content

      // First line could be an optional cue ID
      // Check if line has the time separator
      if (line.indexOf('-->') == -1) {
        id = line;
        // Advance to next line for timing.
        line = vjs.trim(lines[++i]);
      } else {
        id = this.cues_.length;
      }

      // First line - Number
      cue = {
        id: id, // Cue Number
        index: this.cues_.length // Position in Array
      };

      // Timing line
      time = line.split(/[\t ]+/);
      cue.startTime = this.parseCueTime(time[0]);
      cue.endTime = this.parseCueTime(time[2]);

      // Additional lines - Cue Text
      text = [];

      // Loop until a blank line or end of lines
      // Assumeing trim('') returns false for blank lines
      while (lines[++i] && (line = vjs.trim(lines[i]))) {
        text.push(line);
      }

      cue.text = text.join('<br/>');

      // Add this cue
      this.cues_.push(cue);
    }
  }

  this.readyState_ = 2;
  this.trigger('loaded');
};


vjs.TextTrack.prototype.parseCueTime = function(timeText) {
  var parts = timeText.split(':'),
      time = 0,
      hours, minutes, other, seconds, ms;

  // Check if optional hours place is included
  // 00:00:00.000 vs. 00:00.000
  if (parts.length == 3) {
    hours = parts[0];
    minutes = parts[1];
    other = parts[2];
  } else {
    hours = 0;
    minutes = parts[0];
    other = parts[1];
  }

  // Break other (seconds, milliseconds, and flags) by spaces
  // TODO: Make additional cue layout settings work with flags
  other = other.split(/\s+/);
  // Remove seconds. Seconds is the first part before any spaces.
  seconds = other.splice(0,1)[0];
  // Could use either . or , for decimal
  seconds = seconds.split(/\.|,/);
  // Get milliseconds
  ms = parseFloat(seconds[1]);
  seconds = seconds[0];

  // hours => seconds
  time += parseFloat(hours) * 3600;
  // minutes => seconds
  time += parseFloat(minutes) * 60;
  // Add seconds
  time += parseFloat(seconds);
  // Add milliseconds
  if (ms) { time += ms/1000; }

  return time;
};

// Update active cues whenever timeupdate events are triggered on the player.
vjs.TextTrack.prototype.update = function(){
  if (this.cues_.length > 0) {

    // Get current player time, adjust for track offset
    var offset = this.player_.options()['trackTimeOffset'] || 0;
    var time = this.player_.currentTime() + offset;

    // Check if the new time is outside the time box created by the the last update.
    if (this.prevChange === undefined || time < this.prevChange || this.nextChange <= time) {
      var cues = this.cues_,

          // Create a new time box for this state.
          newNextChange = this.player_.duration(), // Start at beginning of the timeline
          newPrevChange = 0, // Start at end

          reverse = false, // Set the direction of the loop through the cues. Optimized the cue check.
          newCues = [], // Store new active cues.

          // Store where in the loop the current active cues are, to provide a smart starting point for the next loop.
          firstActiveIndex, lastActiveIndex,
          cue, i; // Loop vars

      // Check if time is going forwards or backwards (scrubbing/rewinding)
      // If we know the direction we can optimize the starting position and direction of the loop through the cues array.
      if (time >= this.nextChange || this.nextChange === undefined) { // NextChange should happen
        // Forwards, so start at the index of the first active cue and loop forward
        i = (this.firstActiveIndex !== undefined) ? this.firstActiveIndex : 0;
      } else {
        // Backwards, so start at the index of the last active cue and loop backward
        reverse = true;
        i = (this.lastActiveIndex !== undefined) ? this.lastActiveIndex : cues.length - 1;
      }

      while (true) { // Loop until broken
        cue = cues[i];

        // Cue ended at this point
        if (cue.endTime <= time) {
          newPrevChange = Math.max(newPrevChange, cue.endTime);

          if (cue.active) {
            cue.active = false;
          }

          // No earlier cues should have an active start time.
          // Nevermind. Assume first cue could have a duration the same as the video.
          // In that case we need to loop all the way back to the beginning.
          // if (reverse && cue.startTime) { break; }

        // Cue hasn't started
        } else if (time < cue.startTime) {
          newNextChange = Math.min(newNextChange, cue.startTime);

          if (cue.active) {
            cue.active = false;
          }

          // No later cues should have an active start time.
          if (!reverse) { break; }

        // Cue is current
        } else {

          if (reverse) {
            // Add cue to front of array to keep in time order
            newCues.splice(0,0,cue);

            // If in reverse, the first current cue is our lastActiveCue
            if (lastActiveIndex === undefined) { lastActiveIndex = i; }
            firstActiveIndex = i;
          } else {
            // Add cue to end of array
            newCues.push(cue);

            // If forward, the first current cue is our firstActiveIndex
            if (firstActiveIndex === undefined) { firstActiveIndex = i; }
            lastActiveIndex = i;
          }

          newNextChange = Math.min(newNextChange, cue.endTime);
          newPrevChange = Math.max(newPrevChange, cue.startTime);

          cue.active = true;
        }

        if (reverse) {
          // Reverse down the array of cues, break if at first
          if (i === 0) { break; } else { i--; }
        } else {
          // Walk up the array fo cues, break if at last
          if (i === cues.length - 1) { break; } else { i++; }
        }

      }

      this.activeCues_ = newCues;
      this.nextChange = newNextChange;
      this.prevChange = newPrevChange;
      this.firstActiveIndex = firstActiveIndex;
      this.lastActiveIndex = lastActiveIndex;

      this.updateDisplay();

      this.trigger('cuechange');
    }
  }
};

// Add cue HTML to display
vjs.TextTrack.prototype.updateDisplay = function(){
  var cues = this.activeCues_,
      html = '',
      i=0,j=cues.length;

  for (;i<j;i++) {
    html += '<span class="vjs-tt-cue">'+cues[i].text+'</span>';
  }

  this.el_.innerHTML = html;
};

// Set all loop helper values back
vjs.TextTrack.prototype.reset = function(){
  this.nextChange = 0;
  this.prevChange = this.player_.duration();
  this.firstActiveIndex = 0;
  this.lastActiveIndex = 0;
};

// Create specific track types
/**
 * The track component for managing the hiding and showing of captions
 *
 * @constructor
 */
vjs.CaptionsTrack = vjs.TextTrack.extend();
vjs.CaptionsTrack.prototype.kind_ = 'captions';
// Exporting here because Track creation requires the track kind
// to be available on global object. e.g. new window['videojs'][Kind + 'Track']

/**
 * The track component for managing the hiding and showing of subtitles
 *
 * @constructor
 */
vjs.SubtitlesTrack = vjs.TextTrack.extend();
vjs.SubtitlesTrack.prototype.kind_ = 'subtitles';

/**
 * The track component for managing the hiding and showing of chapters
 *
 * @constructor
 */
vjs.ChaptersTrack = vjs.TextTrack.extend();
vjs.ChaptersTrack.prototype.kind_ = 'chapters';


/* Text Track Display
============================================================================= */
// Global container for both subtitle and captions text. Simple div container.

/**
 * The component for displaying text track cues
 *
 * @constructor
 */
vjs.TextTrackDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // This used to be called during player init, but was causing an error
    // if a track should show by default and the display hadn't loaded yet.
    // Should probably be moved to an external track loader when we support
    // tracks that don't need a display.
    if (player.options_['tracks'] && player.options_['tracks'].length > 0) {
      this.player_.addTextTracks(player.options_['tracks']);
    }
  }
});

vjs.TextTrackDisplay.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-text-track-display'
  });
};


/**
 * The specific menu item type for selecting a language within a text track kind
 *
 * @constructor
 */
vjs.TextTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'];

    // Modify options for parent MenuItem class's init.
    options['label'] = track.label();
    options['selected'] = track.dflt();
    vjs.MenuItem.call(this, player, options);

    this.player_.on(track.kind() + 'trackchange', vjs.bind(this, this.update));
  }
});

vjs.TextTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.showTextTrack(this.track.id_, this.track.kind());
};

vjs.TextTrackMenuItem.prototype.update = function(){
  this.selected(this.track.mode() == 2);
};

/**
 * A special menu item for turning of a specific type of text track
 *
 * @constructor
 */
vjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({
  /** @constructor */
  init: function(player, options){
    // Create pseudo track info
    // Requires options['kind']
    options['track'] = {
      kind: function() { return options['kind']; },
      player: player,
      label: function(){ return options['kind'] + ' off'; },
      dflt: function(){ return false; },
      mode: function(){ return false; }
    };
    vjs.TextTrackMenuItem.call(this, player, options);
    this.selected(true);
  }
});

vjs.OffTextTrackMenuItem.prototype.onClick = function(){
  vjs.TextTrackMenuItem.prototype.onClick.call(this);
  this.player_.showTextTrack(this.track.id_, this.track.kind());
};

vjs.OffTextTrackMenuItem.prototype.update = function(){
  var tracks = this.player_.textTracks(),
      i=0, j=tracks.length, track,
      off = true;

  for (;i<j;i++) {
    track = tracks[i];
    if (track.kind() == this.track.kind() && track.mode() == 2) {
      off = false;
    }
  }

  this.selected(off);
};

/**
 * The base class for buttons that toggle specific text track types (e.g. subtitles)
 *
 * @constructor
 */
vjs.TextTrackButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    if (this.items.length <= 1) {
      this.hide();
    }
  }
});

// vjs.TextTrackButton.prototype.buttonPressed = false;

// vjs.TextTrackButton.prototype.createMenu = function(){
//   var menu = new vjs.Menu(this.player_);

//   // Add a title list item to the top
//   // menu.el().appendChild(vjs.createEl('li', {
//   //   className: 'vjs-menu-title',
//   //   innerHTML: vjs.capitalize(this.kind_),
//   //   tabindex: -1
//   // }));

//   this.items = this.createItems();

//   // Add menu items to the menu
//   for (var i = 0; i < this.items.length; i++) {
//     menu.addItem(this.items[i]);
//   }

//   // Add list to element
//   this.addChild(menu);

//   return menu;
// };

// Create a menu item for each text track
vjs.TextTrackButton.prototype.createItems = function(){
  var items = [], track;

  // Add an OFF menu item to turn all tracks off
  items.push(new vjs.OffTextTrackMenuItem(this.player_, { 'kind': this.kind_ }));

  for (var i = 0; i < this.player_.textTracks().length; i++) {
    track = this.player_.textTracks()[i];
    if (track.kind() === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

/**
 * The button component for toggling and selecting captions
 *
 * @constructor
 */
vjs.CaptionsButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Captions Menu');
  }
});
vjs.CaptionsButton.prototype.kind_ = 'captions';
vjs.CaptionsButton.prototype.buttonText = 'Captions';
vjs.CaptionsButton.prototype.className = 'vjs-captions-button';

/**
 * The button component for toggling and selecting subtitles
 *
 * @constructor
 */
vjs.SubtitlesButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Subtitles Menu');
  }
});
vjs.SubtitlesButton.prototype.kind_ = 'subtitles';
vjs.SubtitlesButton.prototype.buttonText = 'Subtitles';
vjs.SubtitlesButton.prototype.className = 'vjs-subtitles-button';

// Chapters act much differently than other text tracks
// Cues are navigation vs. other tracks of alternative languages
/**
 * The button component for toggling and selecting chapters
 *
 * @constructor
 */
vjs.ChaptersButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Chapters Menu');
  }
});
vjs.ChaptersButton.prototype.kind_ = 'chapters';
vjs.ChaptersButton.prototype.buttonText = 'Chapters';
vjs.ChaptersButton.prototype.className = 'vjs-chapters-button';

// Create a menu item for each text track
vjs.ChaptersButton.prototype.createItems = function(){
  var items = [], track;

  for (var i = 0; i < this.player_.textTracks().length; i++) {
    track = this.player_.textTracks()[i];
    if (track.kind() === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

vjs.ChaptersButton.prototype.createMenu = function(){
  var tracks = this.player_.textTracks(),
      i = 0,
      j = tracks.length,
      track, chaptersTrack,
      items = this.items = [];

  for (;i<j;i++) {
    track = tracks[i];
    if (track.kind() == this.kind_) {
      if (track.readyState() === 0) {
        track.load();
        track.on('loaded', vjs.bind(this, this.createMenu));
      } else {
        chaptersTrack = track;
        break;
      }
    }
  }

  var menu = this.menu;
  if (menu === undefined) {
    menu = new vjs.Menu(this.player_);
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.kind_),
      tabindex: -1
    }));
  }

  if (chaptersTrack) {
    var cues = chaptersTrack.cues_, cue, mi;
    i = 0;
    j = cues.length;

    for (;i<j;i++) {
      cue = cues[i];

      mi = new vjs.ChaptersTrackMenuItem(this.player_, {
        'track': chaptersTrack,
        'cue': cue
      });

      items.push(mi);

      menu.addChild(mi);
    }
    this.addChild(menu);
  }

  if (this.items.length > 0) {
    this.show();
  }

  return menu;
};


/**
 * @constructor
 */
vjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'],
        cue = this.cue = options['cue'],
        currentTime = player.currentTime();

    // Modify options for parent MenuItem class's init.
    options['label'] = cue.text;
    options['selected'] = (cue.startTime <= currentTime && currentTime < cue.endTime);
    vjs.MenuItem.call(this, player, options);

    track.on('cuechange', vjs.bind(this, this.update));
  }
});

vjs.ChaptersTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.currentTime(this.cue.startTime);
  this.update(this.cue.startTime);
};

vjs.ChaptersTrackMenuItem.prototype.update = function(){
  var cue = this.cue,
      currentTime = this.player_.currentTime();

  // vjs.log(currentTime, cue.startTime);
  this.selected(cue.startTime <= currentTime && currentTime < cue.endTime);
};

// Add Buttons to controlBar
vjs.obj.merge(vjs.ControlBar.prototype.options_['children'], {
  'subtitlesButton': {},
  'captionsButton': {},
  'chaptersButton': {}
});

// vjs.Cue = vjs.Component.extend({
//   /** @constructor */
//   init: function(player, options){
//     vjs.Component.call(this, player, options);
//   }
// });
/**
 * @fileoverview Add JSON support
 * @suppress {undefinedVars}
 * (Compiler doesn't like JSON not being declared)
 */

/**
 * Javascript JSON implementation
 * (Parse Method Only)
 * https://github.com/douglascrockford/JSON-js/blob/master/json2.js
 * Only using for parse method when parsing data-setup attribute JSON.
 * @suppress {undefinedVars}
 * @namespace
 * @private
 */
vjs.JSON;

if (typeof window.JSON !== 'undefined' && window.JSON.parse === 'function') {
  vjs.JSON = window.JSON;

} else {
  vjs.JSON = {};

  var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

  /**
   * parse the json
   *
   * @memberof vjs.JSON
   * @param {String} text The JSON string to parse
   * @param {Function=} [reviver] Optional function that can transform the results
   * @return {Object|Array} The parsed JSON
   */
  vjs.JSON.parse = function (text, reviver) {
      var j;

      function walk(holder, key) {
          var k, v, value = holder[key];
          if (value && typeof value === 'object') {
              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = walk(value, k);
                      if (v !== undefined) {
                          value[k] = v;
                      } else {
                          delete value[k];
                      }
                  }
              }
          }
          return reviver.call(holder, key, value);
      }
      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
          text = text.replace(cx, function (a) {
              return '\\u' +
                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
          });
      }

      if (/^[\],:{}\s]*$/
              .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                  .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                  .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

          j = eval('(' + text + ')');

          return typeof reviver === 'function' ?
              walk({'': j}, '') : j;
      }

      throw new SyntaxError('JSON.parse(): invalid or malformed JSON data');
  };
}
/**
 * @fileoverview Functions for automatically setting up a player
 * based on the data-setup attribute of the video tag
 */

// Automatically set up any tags that have a data-setup attribute
vjs.autoSetup = function(){
  var options, vid, player,
      vids = document.getElementsByTagName('video');

  // Check if any media elements exist
  if (vids && vids.length > 0) {

    for (var i=0,j=vids.length; i<j; i++) {
      vid = vids[i];

      // Check if element exists, has getAttribute func.
      // IE seems to consider typeof el.getAttribute == 'object' instead of 'function' like expected, at least when loading the player immediately.
      if (vid && vid.getAttribute) {

        // Make sure this player hasn't already been set up.
        if (vid['player'] === undefined) {
          options = vid.getAttribute('data-setup');

          // Check if data-setup attr exists.
          // We only auto-setup if they've added the data-setup attr.
          if (options !== null) {

            // Parse options JSON
            // If empty string, make it a parsable json object.
            options = vjs.JSON.parse(options || '{}');

            // Create new video.js instance.
            player = videojs(vid, options);
          }
        }

      // If getAttribute isn't defined, we need to wait for the DOM.
      } else {
        vjs.autoSetupTimeout(1);
        break;
      }
    }

  // No videos were found, so keep looping unless page is finished loading.
  } else if (!vjs.windowLoaded) {
    vjs.autoSetupTimeout(1);
  }
};

// Pause to let the DOM keep processing
vjs.autoSetupTimeout = function(wait){
  setTimeout(vjs.autoSetup, wait);
};

if (document.readyState === 'complete') {
  vjs.windowLoaded = true;
} else {
  vjs.one(window, 'load', function(){
    vjs.windowLoaded = true;
  });
}

// Run Auto-load players
// You have to wait at least once in case this script is loaded after your video in the DOM (weird behavior only with minified version)
vjs.autoSetupTimeout(1);
/**
 * the method for registering a video.js plugin
 *
 * @param  {String} name The name of the plugin
 * @param  {Function} init The function that is run when the player inits
 */
vjs.plugin = function(name, init){
  vjs.Player.prototype[name] = init;
};

jQuery(document).ready(function($) {

    var timelapseMonthPrevious;
    var timelapseMonthNext;
    var timelapseYearPrevious;
    var timelapseYearNext;
    var rightnow = moment();

    // Timelapse video Calendar
    function getCalendar(year, month) {
        $('#timelapse-calendar').hide();
        $('#timelapse-loader').show();

        $.post('/api/get-timelapse-calendar-dates', {year: year, month: month}, function(data) {
            $('#timelapse-loader').hide();
            $('#timelapse-calendar').html(data.data).fadeIn(250);

            // Video player
            $('.timelapse-start-video').click(function() {
                var target = $(this).attr('rel');
                var path = 'http://video.revyweather.com/';
                var videoPlayer = videojs('timelapse-video');
                var dates = target.split('/');

                $('#timelapse-video-title').html(dates[1] + ' ' + dates[2] + ', ' + dates[0]);

                videoPlayer.ready(function() {
                    var timelapsePlayer = this;

                    timelapsePlayer.pause();
                    $('video').attr('src', path + target + '.mp4');
                    $('video source:nth-child(1)').attr('src', path + target + '.mp4');
                    $('video source:nth-child(2)').attr('src', path + target + '.webm');
                    $('.vjs-big-play-button').show();
                    $('#timelapse-video').removeClass('vjs-playing').addClass('vjs-pause');
                    timelapsePlayer.load();
                    $('#timelapse-video_html5_api').show();
                    timelapsePlayer.on('play', function() {
                        $('.vjs-big-play-button').hide();
                    });
                });
            });
        });

        timelapseYearPrevious = parseInt(year, 10);
        timelapseYearNext = parseInt(year, 10);

        // set values on buttons
        if (parseInt(month, 10) - 1 == 0) {
            timelapseMonthPrevious = 12;
        } else {
            timelapseMonthPrevious = parseInt(month, 10) - 1;
        }

        if (parseInt(month, 10) + 1 == 13) {
            timelapseMonthNext = 1;
        } else {
            timelapseMonthNext = parseInt(month, 10) + 1;
        }

        if (parseInt(month, 10) == 1) {
            timelapseYearPrevious = parseInt(year, 10) - 1;
        }

        if (parseInt(month, 10) == 12) {
            timelapseYearNext = parseInt(year, 10) + 1;
        }

        // set the button values
        $('#timelapse-previous').val(timelapseMonthPrevious);
        $('#timelapse-next').val(timelapseMonthNext);
        $('#timelapse-year-previous').val(timelapseYearPrevious);
        $('#timelapse-year-next').val(timelapseYearNext);

        // set date range
        if (month == rightnow.format('M') && parseInt(year, 10) == 2015) {
            $('#timelapse-next').addClass('disabled');
        } else {
            $('#timelapse-next').removeClass('disabled');
        }

        // no videos before August 2013
        if (parseInt(month, 10) == 8 && parseInt(year, 10) == 2013) {
            $('#timelapse-previous').addClass('disabled');
        } else {
            $('#timelapse-previous').removeClass('disabled');
        }

    }


    getCalendar(parseInt(rightnow.format('YYYY'), 10), parseInt(rightnow.format('MM'), 10));

    // listen to months buttons
    $('#timelapse-previous').click(function() {
        getCalendar($('#timelapse-year-previous').val(), $('#timelapse-previous').val());
    });

    $('#timelapse-next').click(function() {
        getCalendar($('#timelapse-year-next').val(), $('#timelapse-next').val());
    });
});
$(function() {

    var chart;

    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });

    if ($('#history-chart').length) {
        var options = {
            chart: {
                renderTo:           'history-chart',
                backgroundColor:    '#eeeeee',
                zoomType:           'x'
            },

            title: {
                text:               'Courthouse Weather History'
            },

            xAxis: {
                type:               'datetime',
                dateTimeLabelFormat: { hour: '%m %d %H:%M'},
                tickPixelInterval:  150,
                minRange:           1
            },

            yAxis: [{
                gridLineWidth: 1,
                labels: {
                    style: {
                        color: '#B26969'
                    },
                    format: '{value} °C'
                },
                title: {
                    text: 'Air Temp',
                    style: {
                        color: '#B26969'
                    }
                }
            }, {
                gridLineWidth: 0,
                labels: {
                    style: {
                        color: '#3B54FF'
                    },
                    format: '{value} kPa'
                },
                title: {
                    text: 'Barometer',
                    style: {
                        color: '#3B54FF'
                    }
                },
                opposite: false
            }, {
                gridLineWidth: 0,
                labels: {
                    style: {
                        color: '#88E8A9'
                    },
                    format: '{value} %'
                },
                title: {
                    text: 'Relative Humidity',
                    style: {
                        color: '#88E8A9'
                    }
                },
                opposite: true
            }, {
                gridLineWidth: 0,
                labels: {
                    style: {
                        color: '#999999'
                    },
                    format: '{value} km/h'
                },
                title: {
                    text: 'Wind Speed',
                    style: {
                        color: '#999999'
                    }
                },
                opposite: true
            }],

            legend: {
                layout:             'vertical',
                align:              'left',
                verticalAlign:      'top',
                x:                  180,
                y:                  2,
                borderWidth:        1,
                floating:           true,
                backgroundColor:    '#E6E6E6',
                borderColor:        '#DDDDDD',
                borderRadius:       0
            },

            credits: {
                href:   '',
                text:   ''
            },

            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },

            series: []
        };

        // get the last week data
        var lastWeek = moment().subtract(6, 'days');
        var rightNow = moment();

        // initial load of data for high charts
        $.ajax({
            url: '/api/history/' + lastWeek.format('YYYY-MM-DD HH:mm:ss') + '/' + rightNow.format('YYYY-MM-DD HH:mm:ss'),
            dataType: 'json',
            type: 'GET'
        }).success(function(data) {
            options.series = data;
            var chart = new Highcharts.Chart(options);
        });



        // setup the date picker
        $('#history-dates').daterangepicker({
                format: 'YYYY-MM-DD',
                minDate: '2013-08-25 02:00:00',
                maxDate: moment(),
                timePicker: true,
                ranges: {
                    'Last 24 hours:': [moment().subtract(1, 'days'), moment()],
                    'Last 7 days:': [moment().subtract(6, 'days'), moment()],
                    'Last 30 days:': [moment().subtract(29, 'days'), moment()]
                },
                startDate: '2013-08-25 01:00:00',
                endDate: moment()
            },
            function(start, end) {
                //console.log(start.format('YYYY-MM-DD HH:mm:ss') + ' to ' + end.format('YYYY-MM-DD HH:mm:ss'));
                $.ajax({
                    url: '/api/history/' + start.format('YYYY-MM-DD HH:mm:ss') + '/' + end.format('YYYY-MM-DD HH:mm:ss'),
                    dataType: 'json',
                    type: 'GET'
                }).success(function(data) {
                    //console.log(data);
                    options.series = data;
                    var chart = new Highcharts.Chart(options);
                });
            }

        );
    }

});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJqcXVlcnkubW91c2V3aGVlbC0zLjAuNi5wYWNrLmpzIiwiYm9vdHN0cmFwLm1pbi5qcyIsImpxdWVyeS5mYW5jeWJveC5wYWNrLmpzIiwiYW5ndWxhci5taW4uanMiLCJ1aS1ib290c3RyYXAtdHBscy0wLjExLjAubWluLmpzIiwiYW5ndWxhci5za3ljb25zLmpzIiwic2t5Y29ucy5qcyIsInJhcGhhZWwuMi4xLjAubWluLmpzIiwianVzdGdhZ2UuMS4wLjEuanMiLCJtb21lbnQubWluLmpzIiwiZGF0ZXJhbmdlcGlja2VyLmpzIiwiaGlnaGNoYXJ0cy5qcyIsImluZGV4LmpzIiwidmlkZW8uZGV2LmpzIiwidGltZWxhcHNlLmpzIiwiaGlzdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMXRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5bENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDL2lRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNyR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgalF1ZXJ5IHYyLjEuMSB8IChjKSAyMDA1LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXG4hZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YS5kb2N1bWVudD9iKGEsITApOmZ1bmN0aW9uKGEpe2lmKCFhLmRvY3VtZW50KXRocm93IG5ldyBFcnJvcihcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIik7cmV0dXJuIGIoYSl9OmIoYSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXMsZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPWMuc2xpY2UsZT1jLmNvbmNhdCxmPWMucHVzaCxnPWMuaW5kZXhPZixoPXt9LGk9aC50b1N0cmluZyxqPWguaGFzT3duUHJvcGVydHksaz17fSxsPWEuZG9jdW1lbnQsbT1cIjIuMS4xXCIsbj1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgbi5mbi5pbml0KGEsYil9LG89L15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLHA9L14tbXMtLyxxPS8tKFtcXGRhLXpdKS9naSxyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9VcHBlckNhc2UoKX07bi5mbj1uLnByb3RvdHlwZT17anF1ZXJ5Om0sY29uc3RydWN0b3I6bixzZWxlY3RvcjpcIlwiLGxlbmd0aDowLHRvQXJyYXk6ZnVuY3Rpb24oKXtyZXR1cm4gZC5jYWxsKHRoaXMpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/MD5hP3RoaXNbYSt0aGlzLmxlbmd0aF06dGhpc1thXTpkLmNhbGwodGhpcyl9LHB1c2hTdGFjazpmdW5jdGlvbihhKXt2YXIgYj1uLm1lcmdlKHRoaXMuY29uc3RydWN0b3IoKSxhKTtyZXR1cm4gYi5wcmV2T2JqZWN0PXRoaXMsYi5jb250ZXh0PXRoaXMuY29udGV4dCxifSxlYWNoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG4uZWFjaCh0aGlzLGEsYil9LG1hcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi5tYXAodGhpcyxmdW5jdGlvbihiLGMpe3JldHVybiBhLmNhbGwoYixjLGIpfSkpfSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhkLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl9LGZpcnN0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZXEoMCl9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSl9LGVxOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubGVuZ3RoLGM9K2ErKDA+YT9iOjApO3JldHVybiB0aGlzLnB1c2hTdGFjayhjPj0wJiZiPmM/W3RoaXNbY11dOltdKX0sZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJldk9iamVjdHx8dGhpcy5jb25zdHJ1Y3RvcihudWxsKX0scHVzaDpmLHNvcnQ6Yy5zb3J0LHNwbGljZTpjLnNwbGljZX0sbi5leHRlbmQ9bi5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZCxlLGYsZz1hcmd1bWVudHNbMF18fHt9LGg9MSxpPWFyZ3VtZW50cy5sZW5ndGgsaj0hMTtmb3IoXCJib29sZWFuXCI9PXR5cGVvZiBnJiYoaj1nLGc9YXJndW1lbnRzW2hdfHx7fSxoKyspLFwib2JqZWN0XCI9PXR5cGVvZiBnfHxuLmlzRnVuY3Rpb24oZyl8fChnPXt9KSxoPT09aSYmKGc9dGhpcyxoLS0pO2k+aDtoKyspaWYobnVsbCE9KGE9YXJndW1lbnRzW2hdKSlmb3IoYiBpbiBhKWM9Z1tiXSxkPWFbYl0sZyE9PWQmJihqJiZkJiYobi5pc1BsYWluT2JqZWN0KGQpfHwoZT1uLmlzQXJyYXkoZCkpKT8oZT8oZT0hMSxmPWMmJm4uaXNBcnJheShjKT9jOltdKTpmPWMmJm4uaXNQbGFpbk9iamVjdChjKT9jOnt9LGdbYl09bi5leHRlbmQoaixmLGQpKTp2b2lkIDAhPT1kJiYoZ1tiXT1kKSk7cmV0dXJuIGd9LG4uZXh0ZW5kKHtleHBhbmRvOlwialF1ZXJ5XCIrKG0rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXFxEL2csXCJcIiksaXNSZWFkeTohMCxlcnJvcjpmdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoYSl9LG5vb3A6ZnVuY3Rpb24oKXt9LGlzRnVuY3Rpb246ZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09bi50eXBlKGEpfSxpc0FycmF5OkFycmF5LmlzQXJyYXksaXNXaW5kb3c6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWEmJmE9PT1hLndpbmRvd30saXNOdW1lcmljOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzQXJyYXkoYSkmJmEtcGFyc2VGbG9hdChhKT49MH0saXNQbGFpbk9iamVjdDpmdW5jdGlvbihhKXtyZXR1cm5cIm9iamVjdFwiIT09bi50eXBlKGEpfHxhLm5vZGVUeXBlfHxuLmlzV2luZG93KGEpPyExOmEuY29uc3RydWN0b3ImJiFqLmNhbGwoYS5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsXCJpc1Byb3RvdHlwZU9mXCIpPyExOiEwfSxpc0VtcHR5T2JqZWN0OmZ1bmN0aW9uKGEpe3ZhciBiO2ZvcihiIGluIGEpcmV0dXJuITE7cmV0dXJuITB9LHR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/YStcIlwiOlwib2JqZWN0XCI9PXR5cGVvZiBhfHxcImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2hbaS5jYWxsKGEpXXx8XCJvYmplY3RcIjp0eXBlb2YgYX0sZ2xvYmFsRXZhbDpmdW5jdGlvbihhKXt2YXIgYixjPWV2YWw7YT1uLnRyaW0oYSksYSYmKDE9PT1hLmluZGV4T2YoXCJ1c2Ugc3RyaWN0XCIpPyhiPWwuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSxiLnRleHQ9YSxsLmhlYWQuYXBwZW5kQ2hpbGQoYikucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSk6YyhhKSl9LGNhbWVsQ2FzZTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKHAsXCJtcy1cIikucmVwbGFjZShxLHIpfSxub2RlTmFtZTpmdW5jdGlvbihhLGIpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1iLnRvTG93ZXJDYXNlKCl9LGVhY2g6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9MCxmPWEubGVuZ3RoLGc9cyhhKTtpZihjKXtpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBpZihnKXtmb3IoO2Y+ZTtlKyspaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmNhbGwoYVtlXSxlLGFbZV0pLGQ9PT0hMSlicmVhaztyZXR1cm4gYX0sdHJpbTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9cIlwiOihhK1wiXCIpLnJlcGxhY2UobyxcIlwiKX0sbWFrZUFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W107cmV0dXJuIG51bGwhPWEmJihzKE9iamVjdChhKSk/bi5tZXJnZShjLFwic3RyaW5nXCI9PXR5cGVvZiBhP1thXTphKTpmLmNhbGwoYyxhKSksY30saW5BcnJheTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG51bGw9PWI/LTE6Zy5jYWxsKGIsYSxjKX0sbWVyZ2U6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9K2IubGVuZ3RoLGQ9MCxlPWEubGVuZ3RoO2M+ZDtkKyspYVtlKytdPWJbZF07cmV0dXJuIGEubGVuZ3RoPWUsYX0sZ3JlcDpmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkLGU9W10sZj0wLGc9YS5sZW5ndGgsaD0hYztnPmY7ZisrKWQ9IWIoYVtmXSxmKSxkIT09aCYmZS5wdXNoKGFbZl0pO3JldHVybiBlfSxtYXA6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGY9MCxnPWEubGVuZ3RoLGg9cyhhKSxpPVtdO2lmKGgpZm9yKDtnPmY7ZisrKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO2Vsc2UgZm9yKGYgaW4gYSlkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtyZXR1cm4gZS5hcHBseShbXSxpKX0sZ3VpZDoxLHByb3h5OmZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYz1hW2JdLGI9YSxhPWMpLG4uaXNGdW5jdGlvbihhKT8oZT1kLmNhbGwoYXJndW1lbnRzLDIpLGY9ZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShifHx0aGlzLGUuY29uY2F0KGQuY2FsbChhcmd1bWVudHMpKSl9LGYuZ3VpZD1hLmd1aWQ9YS5ndWlkfHxuLmd1aWQrKyxmKTp2b2lkIDB9LG5vdzpEYXRlLm5vdyxzdXBwb3J0Omt9KSxuLmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEsYil7aFtcIltvYmplY3QgXCIrYitcIl1cIl09Yi50b0xvd2VyQ2FzZSgpfSk7ZnVuY3Rpb24gcyhhKXt2YXIgYj1hLmxlbmd0aCxjPW4udHlwZShhKTtyZXR1cm5cImZ1bmN0aW9uXCI9PT1jfHxuLmlzV2luZG93KGEpPyExOjE9PT1hLm5vZGVUeXBlJiZiPyEwOlwiYXJyYXlcIj09PWN8fDA9PT1ifHxcIm51bWJlclwiPT10eXBlb2YgYiYmYj4wJiZiLTEgaW4gYX12YXIgdD1mdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaCxpLGosayxsLG0sbixvLHAscSxyLHMsdCx1PVwic2l6emxlXCIrLW5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9Z2IoKSx6PWdiKCksQT1nYigpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPVwidW5kZWZpbmVkXCIsRD0xPDwzMSxFPXt9Lmhhc093blByb3BlcnR5LEY9W10sRz1GLnBvcCxIPUYucHVzaCxJPUYucHVzaCxKPUYuc2xpY2UsSz1GLmluZGV4T2Z8fGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9dGhpcy5sZW5ndGg7Yz5iO2IrKylpZih0aGlzW2JdPT09YSlyZXR1cm4gYjtyZXR1cm4tMX0sTD1cImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsTT1cIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsTj1cIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcXFx4MDAtXFxcXHhhMF0pK1wiLE89Ti5yZXBsYWNlKFwid1wiLFwidyNcIiksUD1cIlxcXFxbXCIrTStcIiooXCIrTitcIikoPzpcIitNK1wiKihbKl4kfCF+XT89KVwiK00rXCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIitPK1wiKSl8KVwiK00rXCIqXFxcXF1cIixRPVwiOihcIitOK1wiKSg/OlxcXFwoKCgnKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfCgoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIitQK1wiKSopfC4qKVxcXFwpfClcIixSPW5ldyBSZWdFeHAoXCJeXCIrTStcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTStcIiskXCIsXCJnXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitNK1wiKixcIitNK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCJeXCIrTStcIiooWz4rfl18XCIrTStcIilcIitNK1wiKlwiKSxVPW5ldyBSZWdFeHAoXCI9XCIrTStcIiooW15cXFxcXSdcXFwiXSo/KVwiK00rXCIqXFxcXF1cIixcImdcIiksVj1uZXcgUmVnRXhwKFEpLFc9bmV3IFJlZ0V4cChcIl5cIitPK1wiJFwiKSxYPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTitcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitOK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTi5yZXBsYWNlKFwid1wiLFwidypcIikrXCIpXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitQKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitRKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitNK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTStcIiooPzooWystXXwpXCIrTStcIiooXFxcXGQrKXwpKVwiK00rXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrTCtcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK00rXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK00rXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK00rXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxcZCQvaSwkPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXz0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxhYj0vWyt+XS8sYmI9Lyd8XFxcXC9nLGNiPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitNK1wiP3woXCIrTStcIil8LilcIixcImlnXCIpLGRiPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9O3RyeXtJLmFwcGx5KEY9Si5jYWxsKHYuY2hpbGROb2Rlcyksdi5jaGlsZE5vZGVzKSxGW3YuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlfWNhdGNoKGViKXtJPXthcHBseTpGLmxlbmd0aD9mdW5jdGlvbihhLGIpe0guYXBwbHkoYSxKLmNhbGwoYikpfTpmdW5jdGlvbihhLGIpe3ZhciBjPWEubGVuZ3RoLGQ9MDt3aGlsZShhW2MrK109YltkKytdKTthLmxlbmd0aD1jLTF9fX1mdW5jdGlvbiBmYihhLGIsZCxlKXt2YXIgZixoLGosayxsLG8scixzLHcseDtpZigoYj9iLm93bmVyRG9jdW1lbnR8fGI6dikhPT1uJiZtKGIpLGI9Ynx8bixkPWR8fFtdLCFhfHxcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gZDtpZigxIT09KGs9Yi5ub2RlVHlwZSkmJjkhPT1rKXJldHVybltdO2lmKHAmJiFlKXtpZihmPV8uZXhlYyhhKSlpZihqPWZbMV0pe2lmKDk9PT1rKXtpZihoPWIuZ2V0RWxlbWVudEJ5SWQoaiksIWh8fCFoLnBhcmVudE5vZGUpcmV0dXJuIGQ7aWYoaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2UgaWYoYi5vd25lckRvY3VtZW50JiYoaD1iLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaikpJiZ0KGIsaCkmJmguaWQ9PT1qKXJldHVybiBkLnB1c2goaCksZH1lbHNle2lmKGZbMl0pcmV0dXJuIEkuYXBwbHkoZCxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpKSxkO2lmKChqPWZbM10pJiZjLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSS5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9OT09PWsmJmEsMT09PWsmJlwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9zPXIucmVwbGFjZShiYixcIlxcXFwkJlwiKTpiLnNldEF0dHJpYnV0ZShcImlkXCIscykscz1cIltpZD0nXCIrcytcIiddIFwiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytxYihvW2xdKTt3PWFiLnRlc3QoYSkmJm9iKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oXCIsXCIpfWlmKHgpdHJ5e3JldHVybiBJLmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUixcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBnYigpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGhiKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gaWIoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGpiKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24ga2IoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEQpLSh+YS5zb3VyY2VJbmRleHx8RCk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIGxiKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBuYihhKXtyZXR1cm4gaGIoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaGIoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBvYihhKXtyZXR1cm4gYSYmdHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1DJiZhfWM9ZmIuc3VwcG9ydD17fSxmPWZiLmlzWE1MPWZ1bmN0aW9uKGEpe3ZhciBiPWEmJihhLm93bmVyRG9jdW1lbnR8fGEpLmRvY3VtZW50RWxlbWVudDtyZXR1cm4gYj9cIkhUTUxcIiE9PWIubm9kZU5hbWU6ITF9LG09ZmIuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24oYSl7dmFyIGIsZT1hP2Eub3duZXJEb2N1bWVudHx8YTp2LGc9ZS5kZWZhdWx0VmlldztyZXR1cm4gZSE9PW4mJjk9PT1lLm5vZGVUeXBlJiZlLmRvY3VtZW50RWxlbWVudD8obj1lLG89ZS5kb2N1bWVudEVsZW1lbnQscD0hZihlKSxnJiZnIT09Zy50b3AmJihnLmFkZEV2ZW50TGlzdGVuZXI/Zy5hZGRFdmVudExpc3RlbmVyKFwidW5sb2FkXCIsZnVuY3Rpb24oKXttKCl9LCExKTpnLmF0dGFjaEV2ZW50JiZnLmF0dGFjaEV2ZW50KFwib251bmxvYWRcIixmdW5jdGlvbigpe20oKX0pKSxjLmF0dHJpYnV0ZXM9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2xhc3NOYW1lPVwiaVwiLCFhLmdldEF0dHJpYnV0ZShcImNsYXNzTmFtZVwiKX0pLGMuZ2V0RWxlbWVudHNCeVRhZ05hbWU9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXBwZW5kQ2hpbGQoZS5jcmVhdGVDb21tZW50KFwiXCIpKSwhYS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RofSksYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lPSQudGVzdChlLmdldEVsZW1lbnRzQnlDbGFzc05hbWUpJiZpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8ZGl2IGNsYXNzPSdhJz48L2Rpdj48ZGl2IGNsYXNzPSdhIGknPjwvZGl2PlwiLGEuZmlyc3RDaGlsZC5jbGFzc05hbWU9XCJpXCIsMj09PWEuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImlcIikubGVuZ3RofSksYy5nZXRCeUlkPWliKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWUuZ2V0RWxlbWVudHNCeU5hbWV8fCFlLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYodHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQhPT1DJiZwKXt2YXIgYz1iLmdldEVsZW1lbnRCeUlkKGEpO3JldHVybiBjJiZjLnBhcmVudE5vZGU/W2NdOltdfX0sZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiaWRcIik9PT1ifX0pOihkZWxldGUgZC5maW5kLklELGQuZmlsdGVyLklEPWZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYik7cmV0dXJuIGZ1bmN0aW9uKGEpe3ZhciBjPXR5cGVvZiBhLmdldEF0dHJpYnV0ZU5vZGUhPT1DJiZhLmdldEF0dHJpYnV0ZU5vZGUoXCJpZFwiKTtyZXR1cm4gYyYmYy52YWx1ZT09PWJ9fSksZC5maW5kLlRBRz1jLmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKGEsYil7cmV0dXJuIHR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lIT09Qz9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiB0eXBlb2YgYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lIT09QyYmcD9iLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYSk6dm9pZCAwfSxyPVtdLHE9W10sKGMucXNhPSQudGVzdChlLnF1ZXJ5U2VsZWN0b3JBbGwpKSYmKGliKGZ1bmN0aW9uKGEpe2EuaW5uZXJIVE1MPVwiPHNlbGVjdCBtc2FsbG93Y2xpcD0nJz48b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiLGEucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2xpcF49JyddXCIpLmxlbmd0aCYmcS5wdXNoKFwiWypeJF09XCIrTStcIiooPzonJ3xcXFwiXFxcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGh8fHEucHVzaChcIlxcXFxbXCIrTStcIiooPzp2YWx1ZXxcIitMK1wiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpfSksaWIoZnVuY3Rpb24oYSl7dmFyIGI9ZS5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7Yi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJoaWRkZW5cIiksYS5hcHBlbmRDaGlsZChiKS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJEXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltuYW1lPWRdXCIpLmxlbmd0aCYmcS5wdXNoKFwibmFtZVwiK00rXCIqWypeJHwhfl0/PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGh8fHEucHVzaChcIjplbmFibGVkXCIsXCI6ZGlzYWJsZWRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKSxxLnB1c2goXCIsLio6XCIpfSkpLChjLm1hdGNoZXNTZWxlY3Rvcj0kLnRlc3Qocz1vLm1hdGNoZXN8fG8ud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxvLm1vek1hdGNoZXNTZWxlY3Rvcnx8by5vTWF0Y2hlc1NlbGVjdG9yfHxvLm1zTWF0Y2hlc1NlbGVjdG9yKSkmJmliKGZ1bmN0aW9uKGEpe2MuZGlzY29ubmVjdGVkTWF0Y2g9cy5jYWxsKGEsXCJkaXZcIikscy5jYWxsKGEsXCJbcyE9JyddOnhcIiksci5wdXNoKFwiIT1cIixRKX0pLHE9cS5sZW5ndGgmJm5ldyBSZWdFeHAocS5qb2luKFwifFwiKSkscj1yLmxlbmd0aCYmbmV3IFJlZ0V4cChyLmpvaW4oXCJ8XCIpKSxiPSQudGVzdChvLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSx0PWJ8fCQudGVzdChvLmNvbnRhaW5zKT9mdW5jdGlvbihhLGIpe3ZhciBjPTk9PT1hLm5vZGVUeXBlP2EuZG9jdW1lbnRFbGVtZW50OmEsZD1iJiZiLnBhcmVudE5vZGU7cmV0dXJuIGE9PT1kfHwhKCFkfHwxIT09ZC5ub2RlVHlwZXx8IShjLmNvbnRhaW5zP2MuY29udGFpbnMoZCk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmMTYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihkKSkpfTpmdW5jdGlvbihhLGIpe2lmKGIpd2hpbGUoYj1iLnBhcmVudE5vZGUpaWYoYj09PWEpcmV0dXJuITA7cmV0dXJuITF9LEI9Yj9mdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGQ9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247cmV0dXJuIGQ/ZDooZD0oYS5vd25lckRvY3VtZW50fHxhKT09PShiLm93bmVyRG9jdW1lbnR8fGIpP2EuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYik6MSwxJmR8fCFjLnNvcnREZXRhY2hlZCYmYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihhKT09PWQ/YT09PWV8fGEub3duZXJEb2N1bWVudD09PXYmJnQodixhKT8tMTpiPT09ZXx8Yi5vd25lckRvY3VtZW50PT09diYmdCh2LGIpPzE6az9LLmNhbGwoayxhKS1LLmNhbGwoayxiKTowOjQmZD8tMToxKX06ZnVuY3Rpb24oYSxiKXtpZihhPT09YilyZXR1cm4gbD0hMCwwO3ZhciBjLGQ9MCxmPWEucGFyZW50Tm9kZSxnPWIucGFyZW50Tm9kZSxoPVthXSxpPVtiXTtpZighZnx8IWcpcmV0dXJuIGE9PT1lPy0xOmI9PT1lPzE6Zj8tMTpnPzE6az9LLmNhbGwoayxhKS1LLmNhbGwoayxiKTowO2lmKGY9PT1nKXJldHVybiBrYihhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/a2IoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGUpOm59LGZiLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZmIoYSxudWxsLG51bGwsYil9LGZiLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLFwiPSckMSddXCIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBmYihiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxmYi5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGZiLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZFLmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxmYi5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZmIudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWZiLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9ZmIuc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aGIsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYixkYiksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShjYixkYiksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8ZmIuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZmIuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK00rXCIpXCIrYStcIihcIitNK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8dHlwZW9mIGEuZ2V0QXR0cmlidXRlIT09QyYmYS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIil9KX0sQVRUUjpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQpe3ZhciBlPWZiLmF0dHIoZCxhKTtyZXR1cm4gbnVsbD09ZT9cIiE9XCI9PT1iOmI/KGUrPVwiXCIsXCI9XCI9PT1iP2U9PT1jOlwiIT1cIj09PWI/ZSE9PWM6XCJePVwiPT09Yj9jJiYwPT09ZS5pbmRleE9mKGMpOlwiKj1cIj09PWI/YyYmZS5pbmRleE9mKGMpPi0xOlwiJD1cIj09PWI/YyYmZS5zbGljZSgtYy5sZW5ndGgpPT09YzpcIn49XCI9PT1iPyhcIiBcIitlK1wiIFwiKS5pbmRleE9mKGMpPi0xOlwifD1cIj09PWI/ZT09PWN8fGUuc2xpY2UoMCxjLmxlbmd0aCsxKT09PWMrXCItXCI6ITEpOiEwfX0sQ0hJTEQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1cIm50aFwiIT09YS5zbGljZSgwLDMpLGc9XCJsYXN0XCIhPT1hLnNsaWNlKC00KSxoPVwib2YtdHlwZVwiPT09YjtyZXR1cm4gMT09PWQmJjA9PT1lP2Z1bmN0aW9uKGEpe3JldHVybiEhYS5wYXJlbnROb2RlfTpmdW5jdGlvbihiLGMsaSl7dmFyIGosayxsLG0sbixvLHA9ZiE9PWc/XCJuZXh0U2libGluZ1wiOlwicHJldmlvdXNTaWJsaW5nXCIscT1iLnBhcmVudE5vZGUscj1oJiZiLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkscz0haSYmIWg7aWYocSl7aWYoZil7d2hpbGUocCl7bD1iO3doaWxlKGw9bFtwXSlpZihoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpcmV0dXJuITE7bz1wPVwib25seVwiPT09YSYmIW8mJlwibmV4dFNpYmxpbmdcIn1yZXR1cm4hMH1pZihvPVtnP3EuZmlyc3RDaGlsZDpxLmxhc3RDaGlsZF0sZyYmcyl7az1xW3VdfHwocVt1XT17fSksaj1rW2FdfHxbXSxuPWpbMF09PT13JiZqWzFdLG09alswXT09PXcmJmpbMl0sbD1uJiZxLmNoaWxkTm9kZXNbbl07d2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoMT09PWwubm9kZVR5cGUmJisrbSYmbD09PWIpe2tbYV09W3csbixtXTticmVha319ZWxzZSBpZihzJiYoaj0oYlt1XXx8KGJbdV09e30pKVthXSkmJmpbMF09PT13KW09alsxXTtlbHNlIHdoaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKChoP2wubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PXI6MT09PWwubm9kZVR5cGUpJiYrK20mJihzJiYoKGxbdV18fChsW3VdPXt9KSlbYV09W3csbV0pLGw9PT1iKSlicmVhaztyZXR1cm4gbS09ZSxtPT09ZHx8bSVkPT09MCYmbS9kPj0wfX19LFBTRVVETzpmdW5jdGlvbihhLGIpe3ZhciBjLGU9ZC5wc2V1ZG9zW2FdfHxkLnNldEZpbHRlcnNbYS50b0xvd2VyQ2FzZSgpXXx8ZmIuZXJyb3IoXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiK2EpO3JldHVybiBlW3VdP2UoYik6ZS5sZW5ndGg+MT8oYz1bYSxhLFwiXCIsYl0sZC5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KGEudG9Mb3dlckNhc2UoKSk/aGIoZnVuY3Rpb24oYSxjKXt2YXIgZCxmPWUoYSxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSlkPUsuY2FsbChhLGZbZ10pLGFbZF09IShjW2RdPWZbZ10pfSk6ZnVuY3Rpb24oYSl7cmV0dXJuIGUoYSwwLGMpfSk6ZX19LHBzZXVkb3M6e25vdDpoYihmdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9aChhLnJlcGxhY2UoUixcIiQxXCIpKTtyZXR1cm4gZFt1XT9oYihmdW5jdGlvbihhLGIsYyxlKXt2YXIgZixnPWQoYSxudWxsLGUsW10pLGg9YS5sZW5ndGg7d2hpbGUoaC0tKShmPWdbaF0pJiYoYVtoXT0hKGJbaF09ZikpfSk6ZnVuY3Rpb24oYSxlLGYpe3JldHVybiBiWzBdPWEsZChiLG51bGwsZixjKSwhYy5wb3AoKX19KSxoYXM6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBmYihhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4oYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHR8fGUoYikpLmluZGV4T2YoYSk+LTF9fSksbGFuZzpoYihmdW5jdGlvbihhKXtyZXR1cm4gVy50ZXN0KGF8fFwiXCIpfHxmYi5lcnJvcihcInVuc3VwcG9ydGVkIGxhbmc6IFwiK2EpLGE9YS5yZXBsYWNlKGNiLGRiKS50b0xvd2VyQ2FzZSgpLGZ1bmN0aW9uKGIpe3ZhciBjO2RvIGlmKGM9cD9iLmxhbmc6Yi5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKXx8Yi5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKXJldHVybiBjPWMudG9Mb3dlckNhc2UoKSxjPT09YXx8MD09PWMuaW5kZXhPZihhK1wiLVwiKTt3aGlsZSgoYj1iLnBhcmVudE5vZGUpJiYxPT09Yi5ub2RlVHlwZSk7cmV0dXJuITF9fSksdGFyZ2V0OmZ1bmN0aW9uKGIpe3ZhciBjPWEubG9jYXRpb24mJmEubG9jYXRpb24uaGFzaDtyZXR1cm4gYyYmYy5zbGljZSgxKT09PWIuaWR9LHJvb3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1vfSxmb2N1czpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW4uYWN0aXZlRWxlbWVudCYmKCFuLmhhc0ZvY3VzfHxuLmhhc0ZvY3VzKCkpJiYhIShhLnR5cGV8fGEuaHJlZnx8fmEudGFiSW5kZXgpfSxlbmFibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITF9LGRpc2FibGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLmRpc2FibGVkPT09ITB9LGNoZWNrZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJiEhYS5jaGVja2VkfHxcIm9wdGlvblwiPT09YiYmISFhLnNlbGVjdGVkfSxzZWxlY3RlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxhLnNlbGVjdGVkPT09ITB9LGVtcHR5OmZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPDYpcmV0dXJuITE7cmV0dXJuITB9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4hZC5wc2V1ZG9zLmVtcHR5KGEpfSxoZWFkZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIFoudGVzdChhLm5vZGVOYW1lKX0saW5wdXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIFkudGVzdChhLm5vZGVOYW1lKX0sYnV0dG9uOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiZcImJ1dHRvblwiPT09YS50eXBlfHxcImJ1dHRvblwiPT09Yn0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm5cImlucHV0XCI9PT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkmJlwidGV4dFwiPT09YS50eXBlJiYobnVsbD09KGI9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKXx8XCJ0ZXh0XCI9PT1iLnRvTG93ZXJDYXNlKCkpfSxmaXJzdDpuYihmdW5jdGlvbigpe3JldHVyblswXX0pLGxhc3Q6bmIoZnVuY3Rpb24oYSxiKXtyZXR1cm5bYi0xXX0pLGVxOm5iKGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5bMD5jP2MrYjpjXX0pLGV2ZW46bmIoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MDtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxvZGQ6bmIoZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MTtiPmM7Yys9MilhLnB1c2goYyk7cmV0dXJuIGF9KSxsdDpuYihmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzstLWQ+PTA7KWEucHVzaChkKTtyZXR1cm4gYX0pLGd0Om5iKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOysrZDxiOylhLnB1c2goZCk7cmV0dXJuIGF9KX19LGQucHNldWRvcy5udGg9ZC5wc2V1ZG9zLmVxO2ZvcihiIGlue3JhZGlvOiEwLGNoZWNrYm94OiEwLGZpbGU6ITAscGFzc3dvcmQ6ITAsaW1hZ2U6ITB9KWQucHNldWRvc1tiXT1sYihiKTtmb3IoYiBpbntzdWJtaXQ6ITAscmVzZXQ6ITB9KWQucHNldWRvc1tiXT1tYihiKTtmdW5jdGlvbiBwYigpe31wYi5wcm90b3R5cGU9ZC5maWx0ZXJzPWQucHNldWRvcyxkLnNldEZpbHRlcnM9bmV3IHBiLGc9ZmIudG9rZW5pemU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGYsZyxoLGksaixrPXpbYStcIiBcIl07aWYoaylyZXR1cm4gYj8wOmsuc2xpY2UoMCk7aD1hLGk9W10saj1kLnByZUZpbHRlcjt3aGlsZShoKXsoIWN8fChlPVMuZXhlYyhoKSkpJiYoZSYmKGg9aC5zbGljZShlWzBdLmxlbmd0aCl8fGgpLGkucHVzaChmPVtdKSksYz0hMSwoZT1ULmV4ZWMoaCkpJiYoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZVswXS5yZXBsYWNlKFIsXCIgXCIpfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7Zm9yKGcgaW4gZC5maWx0ZXIpIShlPVhbZ10uZXhlYyhoKSl8fGpbZ10mJiEoZT1qW2ddKGUpKXx8KGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmcsbWF0Y2hlczplfSksaD1oLnNsaWNlKGMubGVuZ3RoKSk7aWYoIWMpYnJlYWt9cmV0dXJuIGI/aC5sZW5ndGg6aD9mYi5lcnJvcihhKTp6KGEsaSkuc2xpY2UoMCl9O2Z1bmN0aW9uIHFiKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGgsZD1cIlwiO2M+YjtiKyspZCs9YVtiXS52YWx1ZTtyZXR1cm4gZH1mdW5jdGlvbiByYihhLGIsYyl7dmFyIGQ9Yi5kaXIsZT1jJiZcInBhcmVudE5vZGVcIj09PWQsZj14Kys7cmV0dXJuIGIuZmlyc3Q/ZnVuY3Rpb24oYixjLGYpe3doaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSlyZXR1cm4gYShiLGMsZil9OmZ1bmN0aW9uKGIsYyxnKXt2YXIgaCxpLGo9W3csZl07aWYoZyl7d2hpbGUoYj1iW2RdKWlmKCgxPT09Yi5ub2RlVHlwZXx8ZSkmJmEoYixjLGcpKXJldHVybiEwfWVsc2Ugd2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXtpZihpPWJbdV18fChiW3VdPXt9KSwoaD1pW2RdKSYmaFswXT09PXcmJmhbMV09PT1mKXJldHVybiBqWzJdPWhbMl07aWYoaVtkXT1qLGpbMl09YShiLGMsZykpcmV0dXJuITB9fX1mdW5jdGlvbiBzYihhKXtyZXR1cm4gYS5sZW5ndGg+MT9mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5sZW5ndGg7d2hpbGUoZS0tKWlmKCFhW2VdKGIsYyxkKSlyZXR1cm4hMTtyZXR1cm4hMH06YVswXX1mdW5jdGlvbiB0YihhLGIsYyl7Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKWZiKGEsYltkXSxjKTtyZXR1cm4gY31mdW5jdGlvbiB1YihhLGIsYyxkLGUpe2Zvcih2YXIgZixnPVtdLGg9MCxpPWEubGVuZ3RoLGo9bnVsbCE9YjtpPmg7aCsrKShmPWFbaF0pJiYoIWN8fGMoZixkLGUpKSYmKGcucHVzaChmKSxqJiZiLnB1c2goaCkpO3JldHVybiBnfWZ1bmN0aW9uIHZiKGEsYixjLGQsZSxmKXtyZXR1cm4gZCYmIWRbdV0mJihkPXZiKGQpKSxlJiYhZVt1XSYmKGU9dmIoZSxmKSksaGIoZnVuY3Rpb24oZixnLGgsaSl7dmFyIGosayxsLG09W10sbj1bXSxvPWcubGVuZ3RoLHA9Znx8dGIoYnx8XCIqXCIsaC5ub2RlVHlwZT9baF06aCxbXSkscT0hYXx8IWYmJmI/cDp1YihwLG0sYSxoLGkpLHI9Yz9lfHwoZj9hOm98fGQpP1tdOmc6cTtpZihjJiZjKHEscixoLGkpLGQpe2o9dWIocixuKSxkKGosW10saCxpKSxrPWoubGVuZ3RoO3doaWxlKGstLSkobD1qW2tdKSYmKHJbbltrXV09IShxW25ba11dPWwpKX1pZihmKXtpZihlfHxhKXtpZihlKXtqPVtdLGs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiZqLnB1c2gocVtrXT1sKTtlKG51bGwscj1bXSxqLGkpfWs9ci5sZW5ndGg7d2hpbGUoay0tKShsPXJba10pJiYoaj1lP0suY2FsbChmLGwpOm1ba10pPi0xJiYoZltqXT0hKGdbal09bCkpfX1lbHNlIHI9dWIocj09PWc/ci5zcGxpY2UobyxyLmxlbmd0aCk6ciksZT9lKG51bGwsZyxyLGkpOkkuYXBwbHkoZyxyKX0pfWZ1bmN0aW9uIHdiKGEpe2Zvcih2YXIgYixjLGUsZj1hLmxlbmd0aCxnPWQucmVsYXRpdmVbYVswXS50eXBlXSxoPWd8fGQucmVsYXRpdmVbXCIgXCJdLGk9Zz8xOjAsaz1yYihmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9LGgsITApLGw9cmIoZnVuY3Rpb24oYSl7cmV0dXJuIEsuY2FsbChiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSl9XTtmPmk7aSsrKWlmKGM9ZC5yZWxhdGl2ZVthW2ldLnR5cGVdKW09W3JiKHNiKG0pLGMpXTtlbHNle2lmKGM9ZC5maWx0ZXJbYVtpXS50eXBlXS5hcHBseShudWxsLGFbaV0ubWF0Y2hlcyksY1t1XSl7Zm9yKGU9KytpO2Y+ZTtlKyspaWYoZC5yZWxhdGl2ZVthW2VdLnR5cGVdKWJyZWFrO3JldHVybiB2YihpPjEmJnNiKG0pLGk+MSYmcWIoYS5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTpcIiBcIj09PWFbaS0yXS50eXBlP1wiKlwiOlwiXCJ9KSkucmVwbGFjZShSLFwiJDFcIiksYyxlPmkmJndiKGEuc2xpY2UoaSxlKSksZj5lJiZ3YihhPWEuc2xpY2UoZSkpLGY+ZSYmcWIoYSkpfW0ucHVzaChjKX1yZXR1cm4gc2IobSl9ZnVuY3Rpb24geGIoYSxiKXt2YXIgYz1iLmxlbmd0aD4wLGU9YS5sZW5ndGg+MCxmPWZ1bmN0aW9uKGYsZyxoLGksayl7dmFyIGwsbSxvLHA9MCxxPVwiMFwiLHI9ZiYmW10scz1bXSx0PWosdT1mfHxlJiZkLmZpbmQuVEFHKFwiKlwiLGspLHY9dys9bnVsbD09dD8xOk1hdGgucmFuZG9tKCl8fC4xLHg9dS5sZW5ndGg7Zm9yKGsmJihqPWchPT1uJiZnKTtxIT09eCYmbnVsbCE9KGw9dVtxXSk7cSsrKXtpZihlJiZsKXttPTA7d2hpbGUobz1hW20rK10paWYobyhsLGcsaCkpe2kucHVzaChsKTticmVha31rJiYodz12KX1jJiYoKGw9IW8mJmwpJiZwLS0sZiYmci5wdXNoKGwpKX1pZihwKz1xLGMmJnEhPT1wKXttPTA7d2hpbGUobz1iW20rK10pbyhyLHMsZyxoKTtpZihmKXtpZihwPjApd2hpbGUocS0tKXJbcV18fHNbcV18fChzW3FdPUcuY2FsbChpKSk7cz11YihzKX1JLmFwcGx5KGkscyksayYmIWYmJnMubGVuZ3RoPjAmJnArYi5sZW5ndGg+MSYmZmIudW5pcXVlU29ydChpKX1yZXR1cm4gayYmKHc9dixqPXQpLHJ9O3JldHVybiBjP2hiKGYpOmZ9cmV0dXJuIGg9ZmIuY29tcGlsZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPUFbYStcIiBcIl07aWYoIWYpe2J8fChiPWcoYSkpLGM9Yi5sZW5ndGg7d2hpbGUoYy0tKWY9d2IoYltjXSksZlt1XT9kLnB1c2goZik6ZS5wdXNoKGYpO2Y9QShhLHhiKGUsZCkpLGYuc2VsZWN0b3I9YX1yZXR1cm4gZn0saT1mYi5zZWxlY3Q9ZnVuY3Rpb24oYSxiLGUsZil7dmFyIGksaixrLGwsbSxuPVwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJmEsbz0hZiYmZyhhPW4uc2VsZWN0b3J8fGEpO2lmKGU9ZXx8W10sMT09PW8ubGVuZ3RoKXtpZihqPW9bMF09b1swXS5zbGljZSgwKSxqLmxlbmd0aD4yJiZcIklEXCI9PT0oaz1qWzBdKS50eXBlJiZjLmdldEJ5SWQmJjk9PT1iLm5vZGVUeXBlJiZwJiZkLnJlbGF0aXZlW2pbMV0udHlwZV0pe2lmKGI9KGQuZmluZC5JRChrLm1hdGNoZXNbMF0ucmVwbGFjZShjYixkYiksYil8fFtdKVswXSwhYilyZXR1cm4gZTtuJiYoYj1iLnBhcmVudE5vZGUpLGE9YS5zbGljZShqLnNoaWZ0KCkudmFsdWUubGVuZ3RoKX1pPVgubmVlZHNDb250ZXh0LnRlc3QoYSk/MDpqLmxlbmd0aDt3aGlsZShpLS0pe2lmKGs9altpXSxkLnJlbGF0aXZlW2w9ay50eXBlXSlicmVhaztpZigobT1kLmZpbmRbbF0pJiYoZj1tKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNiLGRiKSxhYi50ZXN0KGpbMF0udHlwZSkmJm9iKGIucGFyZW50Tm9kZSl8fGIpKSl7aWYoai5zcGxpY2UoaSwxKSxhPWYubGVuZ3RoJiZxYihqKSwhYSlyZXR1cm4gSS5hcHBseShlLGYpLGU7YnJlYWt9fX1yZXR1cm4obnx8aChhLG8pKShmLGIsIXAsZSxhYi50ZXN0KGEpJiZvYihiLnBhcmVudE5vZGUpfHxiKSxlfSxjLnNvcnRTdGFibGU9dS5zcGxpdChcIlwiKS5zb3J0KEIpLmpvaW4oXCJcIik9PT11LGMuZGV0ZWN0RHVwbGljYXRlcz0hIWwsbSgpLGMuc29ydERldGFjaGVkPWliKGZ1bmN0aW9uKGEpe3JldHVybiAxJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24obi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKX0pLGliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxhIGhyZWY9JyMnPjwvYT5cIixcIiNcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpfSl8fGpiKFwidHlwZXxocmVmfGhlaWdodHx3aWR0aFwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYz92b2lkIDA6YS5nZXRBdHRyaWJ1dGUoYixcInR5cGVcIj09PWIudG9Mb3dlckNhc2UoKT8xOjIpfSksYy5hdHRyaWJ1dGVzJiZpYihmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8aW5wdXQvPlwiLGEuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLFwiXCIpLFwiXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwidmFsdWVcIil9KXx8amIoXCJ2YWx1ZVwiLGZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gY3x8XCJpbnB1dFwiIT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpP3ZvaWQgMDphLmRlZmF1bHRWYWx1ZX0pLGliKGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpfSl8fGpiKEwsZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiBjP3ZvaWQgMDphW2JdPT09ITA/Yi50b0xvd2VyQ2FzZSgpOihkPWEuZ2V0QXR0cmlidXRlTm9kZShiKSkmJmQuc3BlY2lmaWVkP2QudmFsdWU6bnVsbH0pLGZifShhKTtuLmZpbmQ9dCxuLmV4cHI9dC5zZWxlY3RvcnMsbi5leHByW1wiOlwiXT1uLmV4cHIucHNldWRvcyxuLnVuaXF1ZT10LnVuaXF1ZVNvcnQsbi50ZXh0PXQuZ2V0VGV4dCxuLmlzWE1MRG9jPXQuaXNYTUwsbi5jb250YWlucz10LmNvbnRhaW5zO3ZhciB1PW4uZXhwci5tYXRjaC5uZWVkc0NvbnRleHQsdj0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sdz0vXi5bXjojXFxbXFwuLF0qJC87ZnVuY3Rpb24geChhLGIsYyl7aWYobi5pc0Z1bmN0aW9uKGIpKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhLGQpe3JldHVybiEhYi5jYWxsKGEsZCxhKSE9PWN9KTtpZihiLm5vZGVUeXBlKXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gYT09PWIhPT1jfSk7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpe2lmKHcudGVzdChiKSlyZXR1cm4gbi5maWx0ZXIoYixhLGMpO2I9bi5maWx0ZXIoYixhKX1yZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGcuY2FsbChiLGEpPj0wIT09Y30pfW4uZmlsdGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iWzBdO3JldHVybiBjJiYoYT1cIjpub3QoXCIrYStcIilcIiksMT09PWIubGVuZ3RoJiYxPT09ZC5ub2RlVHlwZT9uLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGQsYSk/W2RdOltdOm4uZmluZC5tYXRjaGVzKGEsbi5ncmVwKGIsZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfSkpfSxuLmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMubGVuZ3RoLGQ9W10sZT10aGlzO2lmKFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiB0aGlzLnB1c2hTdGFjayhuKGEpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihiPTA7Yz5iO2IrKylpZihuLmNvbnRhaW5zKGVbYl0sdGhpcykpcmV0dXJuITB9KSk7Zm9yKGI9MDtjPmI7YisrKW4uZmluZChhLGVbYl0sZCk7cmV0dXJuIGQ9dGhpcy5wdXNoU3RhY2soYz4xP24udW5pcXVlKGQpOmQpLGQuc2VsZWN0b3I9dGhpcy5zZWxlY3Rvcj90aGlzLnNlbGVjdG9yK1wiIFwiK2E6YSxkfSxmaWx0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgodGhpcyxhfHxbXSwhMSkpfSxub3Q6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHgodGhpcyxhfHxbXSwhMCkpfSxpczpmdW5jdGlvbihhKXtyZXR1cm4hIXgodGhpcyxcInN0cmluZ1wiPT10eXBlb2YgYSYmdS50ZXN0KGEpP24oYSk6YXx8W10sITEpLmxlbmd0aH19KTt2YXIgeSx6PS9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLEE9bi5mbi5pbml0PWZ1bmN0aW9uKGEsYil7dmFyIGMsZDtpZighYSlyZXR1cm4gdGhpcztpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7aWYoYz1cIjxcIj09PWFbMF0mJlwiPlwiPT09YVthLmxlbmd0aC0xXSYmYS5sZW5ndGg+PTM/W251bGwsYSxudWxsXTp6LmV4ZWMoYSksIWN8fCFjWzFdJiZiKXJldHVybiFifHxiLmpxdWVyeT8oYnx8eSkuZmluZChhKTp0aGlzLmNvbnN0cnVjdG9yKGIpLmZpbmQoYSk7aWYoY1sxXSl7aWYoYj1iIGluc3RhbmNlb2Ygbj9iWzBdOmIsbi5tZXJnZSh0aGlzLG4ucGFyc2VIVE1MKGNbMV0sYiYmYi5ub2RlVHlwZT9iLm93bmVyRG9jdW1lbnR8fGI6bCwhMCkpLHYudGVzdChjWzFdKSYmbi5pc1BsYWluT2JqZWN0KGIpKWZvcihjIGluIGIpbi5pc0Z1bmN0aW9uKHRoaXNbY10pP3RoaXNbY10oYltjXSk6dGhpcy5hdHRyKGMsYltjXSk7cmV0dXJuIHRoaXN9cmV0dXJuIGQ9bC5nZXRFbGVtZW50QnlJZChjWzJdKSxkJiZkLnBhcmVudE5vZGUmJih0aGlzLmxlbmd0aD0xLHRoaXNbMF09ZCksdGhpcy5jb250ZXh0PWwsdGhpcy5zZWxlY3Rvcj1hLHRoaXN9cmV0dXJuIGEubm9kZVR5cGU/KHRoaXMuY29udGV4dD10aGlzWzBdPWEsdGhpcy5sZW5ndGg9MSx0aGlzKTpuLmlzRnVuY3Rpb24oYSk/XCJ1bmRlZmluZWRcIiE9dHlwZW9mIHkucmVhZHk/eS5yZWFkeShhKTphKG4pOih2b2lkIDAhPT1hLnNlbGVjdG9yJiYodGhpcy5zZWxlY3Rvcj1hLnNlbGVjdG9yLHRoaXMuY29udGV4dD1hLmNvbnRleHQpLG4ubWFrZUFycmF5KGEsdGhpcykpfTtBLnByb3RvdHlwZT1uLmZuLHk9bihsKTt2YXIgQj0vXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxDPXtjaGlsZHJlbjohMCxjb250ZW50czohMCxuZXh0OiEwLHByZXY6ITB9O24uZXh0ZW5kKHtkaXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGU9dm9pZCAwIT09Yzt3aGlsZSgoYT1hW2JdKSYmOSE9PWEubm9kZVR5cGUpaWYoMT09PWEubm9kZVR5cGUpe2lmKGUmJm4oYSkuaXMoYykpYnJlYWs7ZC5wdXNoKGEpfXJldHVybiBkfSxzaWJsaW5nOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7YT1hLm5leHRTaWJsaW5nKTE9PT1hLm5vZGVUeXBlJiZhIT09YiYmYy5wdXNoKGEpO3JldHVybiBjfX0pLG4uZm4uZXh0ZW5kKHtoYXM6ZnVuY3Rpb24oYSl7dmFyIGI9bihhLHRoaXMpLGM9Yi5sZW5ndGg7cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKHZhciBhPTA7Yz5hO2ErKylpZihuLmNvbnRhaW5zKHRoaXMsYlthXSkpcmV0dXJuITB9KX0sY2xvc2VzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYyxkPTAsZT10aGlzLmxlbmd0aCxmPVtdLGc9dS50ZXN0KGEpfHxcInN0cmluZ1wiIT10eXBlb2YgYT9uKGEsYnx8dGhpcy5jb250ZXh0KTowO2U+ZDtkKyspZm9yKGM9dGhpc1tkXTtjJiZjIT09YjtjPWMucGFyZW50Tm9kZSlpZihjLm5vZGVUeXBlPDExJiYoZz9nLmluZGV4KGMpPi0xOjE9PT1jLm5vZGVUeXBlJiZuLmZpbmQubWF0Y2hlc1NlbGVjdG9yKGMsYSkpKXtmLnB1c2goYyk7YnJlYWt9cmV0dXJuIHRoaXMucHVzaFN0YWNrKGYubGVuZ3RoPjE/bi51bmlxdWUoZik6Zil9LGluZGV4OmZ1bmN0aW9uKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PXR5cGVvZiBhP2cuY2FsbChuKGEpLHRoaXNbMF0pOmcuY2FsbCh0aGlzLGEuanF1ZXJ5P2FbMF06YSk6dGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlP3RoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoOi0xfSxhZGQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2sobi51bmlxdWUobi5tZXJnZSh0aGlzLmdldCgpLG4oYSxiKSkpKX0sYWRkQmFjazpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGQobnVsbD09YT90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihhKSl9fSk7ZnVuY3Rpb24gRChhLGIpe3doaWxlKChhPWFbYl0pJiYxIT09YS5ub2RlVHlwZSk7cmV0dXJuIGF9bi5lYWNoKHtwYXJlbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiYxMSE9PWIubm9kZVR5cGU/YjpudWxsfSxwYXJlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLFwicGFyZW50Tm9kZVwiKX0scGFyZW50c1VudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIixjKX0sbmV4dDpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwibmV4dFNpYmxpbmdcIil9LHByZXY6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dEFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLFwibmV4dFNpYmxpbmdcIixjKX0scHJldlVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiLGMpfSxzaWJsaW5nczpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKChhLnBhcmVudE5vZGV8fHt9KS5maXJzdENoaWxkLGEpfSxjaGlsZHJlbjpmdW5jdGlvbihhKXtyZXR1cm4gbi5zaWJsaW5nKGEuZmlyc3RDaGlsZCl9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8bi5tZXJnZShbXSxhLmNoaWxkTm9kZXMpfX0sZnVuY3Rpb24oYSxiKXtuLmZuW2FdPWZ1bmN0aW9uKGMsZCl7dmFyIGU9bi5tYXAodGhpcyxiLGMpO3JldHVyblwiVW50aWxcIiE9PWEuc2xpY2UoLTUpJiYoZD1jKSxkJiZcInN0cmluZ1wiPT10eXBlb2YgZCYmKGU9bi5maWx0ZXIoZCxlKSksdGhpcy5sZW5ndGg+MSYmKENbYV18fG4udW5pcXVlKGUpLEIudGVzdChhKSYmZS5yZXZlcnNlKCkpLHRoaXMucHVzaFN0YWNrKGUpfX0pO3ZhciBFPS9cXFMrL2csRj17fTtmdW5jdGlvbiBHKGEpe3ZhciBiPUZbYV09e307cmV0dXJuIG4uZWFjaChhLm1hdGNoKEUpfHxbXSxmdW5jdGlvbihhLGMpe2JbY109ITB9KSxifW4uQ2FsbGJhY2tzPWZ1bmN0aW9uKGEpe2E9XCJzdHJpbmdcIj09dHlwZW9mIGE/RlthXXx8RyhhKTpuLmV4dGVuZCh7fSxhKTt2YXIgYixjLGQsZSxmLGcsaD1bXSxpPSFhLm9uY2UmJltdLGo9ZnVuY3Rpb24obCl7Zm9yKGI9YS5tZW1vcnkmJmwsYz0hMCxnPWV8fDAsZT0wLGY9aC5sZW5ndGgsZD0hMDtoJiZmPmc7ZysrKWlmKGhbZ10uYXBwbHkobFswXSxsWzFdKT09PSExJiZhLnN0b3BPbkZhbHNlKXtiPSExO2JyZWFrfWQ9ITEsaCYmKGk/aS5sZW5ndGgmJmooaS5zaGlmdCgpKTpiP2g9W106ay5kaXNhYmxlKCkpfSxrPXthZGQ6ZnVuY3Rpb24oKXtpZihoKXt2YXIgYz1oLmxlbmd0aDshZnVuY3Rpb24gZyhiKXtuLmVhY2goYixmdW5jdGlvbihiLGMpe3ZhciBkPW4udHlwZShjKTtcImZ1bmN0aW9uXCI9PT1kP2EudW5pcXVlJiZrLmhhcyhjKXx8aC5wdXNoKGMpOmMmJmMubGVuZ3RoJiZcInN0cmluZ1wiIT09ZCYmZyhjKX0pfShhcmd1bWVudHMpLGQ/Zj1oLmxlbmd0aDpiJiYoZT1jLGooYikpfXJldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oKXtyZXR1cm4gaCYmbi5lYWNoKGFyZ3VtZW50cyxmdW5jdGlvbihhLGIpe3ZhciBjO3doaWxlKChjPW4uaW5BcnJheShiLGgsYykpPi0xKWguc3BsaWNlKGMsMSksZCYmKGY+PWMmJmYtLSxnPj1jJiZnLS0pfSksdGhpc30saGFzOmZ1bmN0aW9uKGEpe3JldHVybiBhP24uaW5BcnJheShhLGgpPi0xOiEoIWh8fCFoLmxlbmd0aCl9LGVtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIGg9W10sZj0wLHRoaXN9LGRpc2FibGU6ZnVuY3Rpb24oKXtyZXR1cm4gaD1pPWI9dm9pZCAwLHRoaXN9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWh9LGxvY2s6ZnVuY3Rpb24oKXtyZXR1cm4gaT12b2lkIDAsYnx8ay5kaXNhYmxlKCksdGhpc30sbG9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIWl9LGZpcmVXaXRoOmZ1bmN0aW9uKGEsYil7cmV0dXJuIWh8fGMmJiFpfHwoYj1ifHxbXSxiPVthLGIuc2xpY2U/Yi5zbGljZSgpOmJdLGQ/aS5wdXNoKGIpOmooYikpLHRoaXN9LGZpcmU6ZnVuY3Rpb24oKXtyZXR1cm4gay5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyksdGhpc30sZmlyZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hIWN9fTtyZXR1cm4ga30sbi5leHRlbmQoe0RlZmVycmVkOmZ1bmN0aW9uKGEpe3ZhciBiPVtbXCJyZXNvbHZlXCIsXCJkb25lXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlc29sdmVkXCJdLFtcInJlamVjdFwiLFwiZmFpbFwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZWplY3RlZFwiXSxbXCJub3RpZnlcIixcInByb2dyZXNzXCIsbi5DYWxsYmFja3MoXCJtZW1vcnlcIildXSxjPVwicGVuZGluZ1wiLGQ9e3N0YXRlOmZ1bmN0aW9uKCl7cmV0dXJuIGN9LGFsd2F5czpmdW5jdGlvbigpe3JldHVybiBlLmRvbmUoYXJndW1lbnRzKS5mYWlsKGFyZ3VtZW50cyksdGhpc30sdGhlbjpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50cztyZXR1cm4gbi5EZWZlcnJlZChmdW5jdGlvbihjKXtuLmVhY2goYixmdW5jdGlvbihiLGYpe3ZhciBnPW4uaXNGdW5jdGlvbihhW2JdKSYmYVtiXTtlW2ZbMV1dKGZ1bmN0aW9uKCl7dmFyIGE9ZyYmZy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/YS5wcm9taXNlKCkuZG9uZShjLnJlc29sdmUpLmZhaWwoYy5yZWplY3QpLnByb2dyZXNzKGMubm90aWZ5KTpjW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1kP2MucHJvbWlzZSgpOnRoaXMsZz9bYV06YXJndW1lbnRzKX0pfSksYT1udWxsfSkucHJvbWlzZSgpfSxwcm9taXNlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT1hP24uZXh0ZW5kKGEsZCk6ZH19LGU9e307cmV0dXJuIGQucGlwZT1kLnRoZW4sbi5lYWNoKGIsZnVuY3Rpb24oYSxmKXt2YXIgZz1mWzJdLGg9ZlszXTtkW2ZbMV1dPWcuYWRkLGgmJmcuYWRkKGZ1bmN0aW9uKCl7Yz1ofSxiWzFeYV1bMl0uZGlzYWJsZSxiWzJdWzJdLmxvY2spLGVbZlswXV09ZnVuY3Rpb24oKXtyZXR1cm4gZVtmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZT9kOnRoaXMsYXJndW1lbnRzKSx0aGlzfSxlW2ZbMF0rXCJXaXRoXCJdPWcuZmlyZVdpdGh9KSxkLnByb21pc2UoZSksYSYmYS5jYWxsKGUsZSksZX0sd2hlbjpmdW5jdGlvbihhKXt2YXIgYj0wLGM9ZC5jYWxsKGFyZ3VtZW50cyksZT1jLmxlbmd0aCxmPTEhPT1lfHxhJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9lOjAsZz0xPT09Zj9hOm4uRGVmZXJyZWQoKSxoPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZSl7YlthXT10aGlzLGNbYV09YXJndW1lbnRzLmxlbmd0aD4xP2QuY2FsbChhcmd1bWVudHMpOmUsYz09PWk/Zy5ub3RpZnlXaXRoKGIsYyk6LS1mfHxnLnJlc29sdmVXaXRoKGIsYyl9fSxpLGosaztpZihlPjEpZm9yKGk9bmV3IEFycmF5KGUpLGo9bmV3IEFycmF5KGUpLGs9bmV3IEFycmF5KGUpO2U+YjtiKyspY1tiXSYmbi5pc0Z1bmN0aW9uKGNbYl0ucHJvbWlzZSk/Y1tiXS5wcm9taXNlKCkuZG9uZShoKGIsayxjKSkuZmFpbChnLnJlamVjdCkucHJvZ3Jlc3MoaChiLGosaSkpOi0tZjtyZXR1cm4gZnx8Zy5yZXNvbHZlV2l0aChrLGMpLGcucHJvbWlzZSgpfX0pO3ZhciBIO24uZm4ucmVhZHk9ZnVuY3Rpb24oYSl7cmV0dXJuIG4ucmVhZHkucHJvbWlzZSgpLmRvbmUoYSksdGhpc30sbi5leHRlbmQoe2lzUmVhZHk6ITEscmVhZHlXYWl0OjEsaG9sZFJlYWR5OmZ1bmN0aW9uKGEpe2E/bi5yZWFkeVdhaXQrKzpuLnJlYWR5KCEwKX0scmVhZHk6ZnVuY3Rpb24oYSl7KGE9PT0hMD8tLW4ucmVhZHlXYWl0Om4uaXNSZWFkeSl8fChuLmlzUmVhZHk9ITAsYSE9PSEwJiYtLW4ucmVhZHlXYWl0PjB8fChILnJlc29sdmVXaXRoKGwsW25dKSxuLmZuLnRyaWdnZXJIYW5kbGVyJiYobihsKS50cmlnZ2VySGFuZGxlcihcInJlYWR5XCIpLG4obCkub2ZmKFwicmVhZHlcIikpKSl9fSk7ZnVuY3Rpb24gSSgpe2wucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixJLCExKSxhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSSwhMSksbi5yZWFkeSgpfW4ucmVhZHkucHJvbWlzZT1mdW5jdGlvbihiKXtyZXR1cm4gSHx8KEg9bi5EZWZlcnJlZCgpLFwiY29tcGxldGVcIj09PWwucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KG4ucmVhZHkpOihsLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpKSksSC5wcm9taXNlKGIpfSxuLnJlYWR5LnByb21pc2UoKTt2YXIgSj1uLmFjY2Vzcz1mdW5jdGlvbihhLGIsYyxkLGUsZixnKXt2YXIgaD0wLGk9YS5sZW5ndGgsaj1udWxsPT1jO2lmKFwib2JqZWN0XCI9PT1uLnR5cGUoYykpe2U9ITA7Zm9yKGggaW4gYyluLmFjY2VzcyhhLGIsaCxjW2hdLCEwLGYsZyl9ZWxzZSBpZih2b2lkIDAhPT1kJiYoZT0hMCxuLmlzRnVuY3Rpb24oZCl8fChnPSEwKSxqJiYoZz8oYi5jYWxsKGEsZCksYj1udWxsKTooaj1iLGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBqLmNhbGwobihhKSxjKX0pKSxiKSlmb3IoO2k+aDtoKyspYihhW2hdLGMsZz9kOmQuY2FsbChhW2hdLGgsYihhW2hdLGMpKSk7cmV0dXJuIGU/YTpqP2IuY2FsbChhKTppP2IoYVswXSxjKTpmfTtuLmFjY2VwdERhdGE9ZnVuY3Rpb24oYSl7cmV0dXJuIDE9PT1hLm5vZGVUeXBlfHw5PT09YS5ub2RlVHlwZXx8ISthLm5vZGVUeXBlfTtmdW5jdGlvbiBLKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuY2FjaGU9e30sMCx7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJue319fSksdGhpcy5leHBhbmRvPW4uZXhwYW5kbytNYXRoLnJhbmRvbSgpfUsudWlkPTEsSy5hY2NlcHRzPW4uYWNjZXB0RGF0YSxLLnByb3RvdHlwZT17a2V5OmZ1bmN0aW9uKGEpe2lmKCFLLmFjY2VwdHMoYSkpcmV0dXJuIDA7dmFyIGI9e30sYz1hW3RoaXMuZXhwYW5kb107aWYoIWMpe2M9Sy51aWQrKzt0cnl7Ylt0aGlzLmV4cGFuZG9dPXt2YWx1ZTpjfSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyhhLGIpfWNhdGNoKGQpe2JbdGhpcy5leHBhbmRvXT1jLG4uZXh0ZW5kKGEsYil9fXJldHVybiB0aGlzLmNhY2hlW2NdfHwodGhpcy5jYWNoZVtjXT17fSksY30sc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPXRoaXMua2V5KGEpLGY9dGhpcy5jYWNoZVtlXTtpZihcInN0cmluZ1wiPT10eXBlb2YgYilmW2JdPWM7ZWxzZSBpZihuLmlzRW1wdHlPYmplY3QoZikpbi5leHRlbmQodGhpcy5jYWNoZVtlXSxiKTtlbHNlIGZvcihkIGluIGIpZltkXT1iW2RdO3JldHVybiBmfSxnZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNhY2hlW3RoaXMua2V5KGEpXTtyZXR1cm4gdm9pZCAwPT09Yj9jOmNbYl19LGFjY2VzczpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIHZvaWQgMD09PWJ8fGImJlwic3RyaW5nXCI9PXR5cGVvZiBiJiZ2b2lkIDA9PT1jPyhkPXRoaXMuZ2V0KGEsYiksdm9pZCAwIT09ZD9kOnRoaXMuZ2V0KGEsbi5jYW1lbENhc2UoYikpKToodGhpcy5zZXQoYSxiLGMpLHZvaWQgMCE9PWM/YzpiKX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9dGhpcy5rZXkoYSksZz10aGlzLmNhY2hlW2ZdO2lmKHZvaWQgMD09PWIpdGhpcy5jYWNoZVtmXT17fTtlbHNle24uaXNBcnJheShiKT9kPWIuY29uY2F0KGIubWFwKG4uY2FtZWxDYXNlKSk6KGU9bi5jYW1lbENhc2UoYiksYiBpbiBnP2Q9W2IsZV06KGQ9ZSxkPWQgaW4gZz9bZF06ZC5tYXRjaChFKXx8W10pKSxjPWQubGVuZ3RoO3doaWxlKGMtLSlkZWxldGUgZ1tkW2NdXX19LGhhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNFbXB0eU9iamVjdCh0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV18fHt9KX0sZGlzY2FyZDpmdW5jdGlvbihhKXthW3RoaXMuZXhwYW5kb10mJmRlbGV0ZSB0aGlzLmNhY2hlW2FbdGhpcy5leHBhbmRvXV19fTt2YXIgTD1uZXcgSyxNPW5ldyBLLE49L14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLE89LyhbQS1aXSkvZztmdW5jdGlvbiBQKGEsYixjKXt2YXIgZDtpZih2b2lkIDA9PT1jJiYxPT09YS5ub2RlVHlwZSlpZihkPVwiZGF0YS1cIitiLnJlcGxhY2UoTyxcIi0kMVwiKS50b0xvd2VyQ2FzZSgpLGM9YS5nZXRBdHRyaWJ1dGUoZCksXCJzdHJpbmdcIj09dHlwZW9mIGMpe3RyeXtjPVwidHJ1ZVwiPT09Yz8hMDpcImZhbHNlXCI9PT1jPyExOlwibnVsbFwiPT09Yz9udWxsOitjK1wiXCI9PT1jPytjOk4udGVzdChjKT9uLnBhcnNlSlNPTihjKTpjfWNhdGNoKGUpe31NLnNldChhLGIsYyl9ZWxzZSBjPXZvaWQgMDtyZXR1cm4gY31uLmV4dGVuZCh7aGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gTS5oYXNEYXRhKGEpfHxMLmhhc0RhdGEoYSl9LGRhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBNLmFjY2VzcyhhLGIsYyl9LHJlbW92ZURhdGE6ZnVuY3Rpb24oYSxiKXtNLnJlbW92ZShhLGIpXG59LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1uLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxQKGYsZCxlW2RdKSkpO0wuc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5zZXQodGhpcyxhKX0pOkoodGhpcyxmdW5jdGlvbihiKXt2YXIgYyxkPW4uY2FtZWxDYXNlKGEpO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9TS5nZXQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9TS5nZXQoZixkKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9UChmLGQsdm9pZCAwKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9TS5nZXQodGhpcyxkKTtNLnNldCh0aGlzLGQsYiksLTEhPT1hLmluZGV4T2YoXCItXCIpJiZ2b2lkIDAhPT1jJiZNLnNldCh0aGlzLGEsYil9KX0sbnVsbCxiLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5yZW1vdmUodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9TC5nZXQoYSxiKSxjJiYoIWR8fG4uaXNBcnJheShjKT9kPUwuYWNjZXNzKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHxcImZ4XCI7dmFyIGM9bi5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1uLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe24uZGVxdWV1ZShhLGIpfTtcImlucHJvZ3Jlc3NcIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJihcImZ4XCI9PT1iJiZjLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKXtMLnJlbW92ZShhLFtiK1wicXVldWVcIixjXSl9KX0pfX0pLG4uZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT1cImZ4XCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksXCJmeFwiPT09YSYmXCJpbnByb2dyZXNzXCIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9O1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiZnhcIjt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErXCJxdWV1ZUhvb2tzXCIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBRPS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSxSPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxTPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PW4uY3NzKGEsXCJkaXNwbGF5XCIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSksYz1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSxjLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksYi5hcHBlbmRDaGlsZChjKSxrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9XCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPVwidW5kZWZpbmVkXCI7ay5mb2N1c2luQnViYmxlcz1cIm9uZm9jdXNpblwiaW4gYTt2YXIgVj0vXmtleS8sVz0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxYPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxZPS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIFooKXtyZXR1cm4hMH1mdW5jdGlvbiAkKCl7cmV0dXJuITF9ZnVuY3Rpb24gXygpe3RyeXtyZXR1cm4gbC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319bi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bi5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuIHR5cGVvZiBuIT09VSYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvJiYobD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LGs9bi5leHRlbmQoe3R5cGU6byxvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmbi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvKXtsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxtPWlbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLG0sbyxwPVtkfHxsXSxxPWouY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWouY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihnPWg9ZD1kfHxsLDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmIVgudGVzdChxK24uZXZlbnQudHJpZ2dlcmVkKSYmKHEuaW5kZXhPZihcIi5cIik+PTAmJihyPXEuc3BsaXQoXCIuXCIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oXCIuXCIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIityLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWQpLGM9bnVsbD09Yz9bYl06bi5tYWtlQXJyYXkoYyxbYl0pLG89bi5ldmVudC5zcGVjaWFsW3FdfHx7fSxlfHwhby50cmlnZ2VyfHxvLnRyaWdnZXIuYXBwbHkoZCxjKSE9PSExKSl7aWYoIWUmJiFvLm5vQnViYmxlJiYhbi5pc1dpbmRvdyhkKSl7Zm9yKGk9by5kZWxlZ2F0ZVR5cGV8fHEsWC50ZXN0KGkrcSl8fChnPWcucGFyZW50Tm9kZSk7ZztnPWcucGFyZW50Tm9kZSlwLnB1c2goZyksaD1nO2g9PT0oZC5vd25lckRvY3VtZW50fHxsKSYmcC5wdXNoKGguZGVmYXVsdFZpZXd8fGgucGFyZW50V2luZG93fHxhKX1mPTA7d2hpbGUoKGc9cFtmKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zj4xP2k6by5iaW5kVHlwZXx8cSxtPShMLmdldChnLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZyxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGcsYyksbT1rJiZnW2tdLG0mJm0uYXBwbHkmJm4uYWNjZXB0RGF0YShnKSYmKGIucmVzdWx0PW0uYXBwbHkoZyxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cSxlfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxvLl9kZWZhdWx0JiZvLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYykhPT0hMXx8IW4uYWNjZXB0RGF0YShkKXx8ayYmbi5pc0Z1bmN0aW9uKGRbcV0pJiYhbi5pc1dpbmRvdyhkKSYmKGg9ZFtrXSxoJiYoZFtrXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGRbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaCYmKGRba109aCkpLGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShMLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZy5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxlPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1lJiYoYS5yZXN1bHQ9ZSk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxcImNsaWNrXCIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZFtlXSYmKGRbZV09Zi5uZWVkc0NvbnRleHQ/bihlLHRoaXMpLmluZGV4KGkpPj0wOm4uZmluZChlLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZFtlXSYmZC5wdXNoKGYpO2QubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczpkfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b247cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGM9YS50YXJnZXQub3duZXJEb2N1bWVudHx8bCxkPWMuZG9jdW1lbnRFbGVtZW50LGU9Yy5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhkJiZkLnNjcm9sbExlZnR8fGUmJmUuc2Nyb2xsTGVmdHx8MCktKGQmJmQuY2xpZW50TGVmdHx8ZSYmZS5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZCYmZC5zY3JvbGxUb3B8fGUmJmUuc2Nyb2xsVG9wfHwwKS0oZCYmZC5jbGllbnRUb3B8fGUmJmUuY2xpZW50VG9wfHwwKSksYS53aGljaHx8dm9pZCAwPT09Znx8KGEud2hpY2g9MSZmPzE6MiZmPzM6NCZmPzI6MCksYX19LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1XLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlYudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBuLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9bCksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PV8oKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7ZD9uLmV2ZW50LnRyaWdnZXIoZSxudWxsLGIpOm4uZXZlbnQuZGlzcGF0Y2guY2FsbChiLGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCkmJmMucHJldmVudERlZmF1bHQoKX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP1o6JCk6dGhpcy50eXBlPWEsYiYmbi5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bi5ub3coKSx2b2lkKHRoaXNbbi5leHBhbmRvXT0hMCkpOm5ldyBuLkV2ZW50KGEsYil9LG4uRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6JCxpc1Byb3BhZ2F0aW9uU3RvcHBlZDokLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9WixhJiZhLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuKCFlfHxlIT09ZCYmIW4uY29udGFpbnMoZCxlKSkmJihhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGsuZm9jdXNpbkJ1YmJsZXN8fG4uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpLCEwKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTC5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpLTE7ZT9MLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLEwucmVtb3ZlKGQsYikpfX19KSxuLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJihcInN0cmluZ1wiPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPSQ7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihmPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWYuZ3VpZHx8KGYuZ3VpZD1uLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPSQpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIGFiPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxiYj0vPChbXFx3Ol0rKS8sY2I9Lzx8JiM/XFx3KzsvLGRiPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWI9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxmYj0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdiPS9edHJ1ZVxcLyguKikvLGhiPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxpYj17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2liLm9wdGdyb3VwPWliLm9wdGlvbixpYi50Ym9keT1pYi50Zm9vdD1pYi5jb2xncm91cD1pYi5jYXB0aW9uPWliLnRoZWFkLGliLnRoPWliLnRkO2Z1bmN0aW9uIGpiKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIGtiKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIGxiKGEpe3ZhciBiPWdiLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBtYihhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxMLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gbmIoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihMLmhhc0RhdGEoYSkmJihmPUwuYWNjZXNzKGEpLGc9TC5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2Q+YztjKyspbi5ldmVudC5hZGQoYixlLGpbZV1bY10pfU0uaGFzRGF0YShhKSYmKGg9TS5hY2Nlc3MoYSksaT1uLmV4dGVuZCh7fSxoKSxNLnNldChiLGkpKX19ZnVuY3Rpb24gb2IoYSxiKXt2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBwYihhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZULnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOihcImlucHV0XCI9PT1jfHxcInRleHRhcmVhXCI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1uLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1vYihoKSxmPW9iKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspcGIoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8b2IoYSksZz1nfHxvYihoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKW5iKGZbZF0sZ1tkXSk7ZWxzZSBuYihhLGgpO3JldHVybiBnPW9iKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmbWIoZywhaSYmb2IoYSxcInNjcmlwdFwiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZihcIm9iamVjdFwiPT09bi50eXBlKGUpKW4ubWVyZ2UobCxlLm5vZGVUeXBlP1tlXTplKTtlbHNlIGlmKGNiLnRlc3QoZSkpe2Y9Znx8ay5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGc9KGJiLmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGg9aWJbZ118fGliLl9kZWZhdWx0LGYuaW5uZXJIVE1MPWhbMV0rZS5yZXBsYWNlKGFiLFwiPCQxPjwvJDI+XCIpK2hbMl0saj1oWzBdO3doaWxlKGotLSlmPWYubGFzdENoaWxkO24ubWVyZ2UobCxmLmNoaWxkTm9kZXMpLGY9ay5maXJzdENoaWxkLGYudGV4dENvbnRlbnQ9XCJcIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PVwiXCIsbT0wO3doaWxlKGU9bFttKytdKWlmKCghZHx8LTE9PT1uLmluQXJyYXkoZSxkKSkmJihpPW4uY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpLGY9b2Ioay5hcHBlbmRDaGlsZChlKSxcInNjcmlwdFwiKSxpJiZtYihmKSxjKSl7aj0wO3doaWxlKGU9ZltqKytdKWZiLnRlc3QoZS50eXBlfHxcIlwiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGY9bi5ldmVudC5zcGVjaWFsLGc9MDt2b2lkIDAhPT0oYz1hW2ddKTtnKyspe2lmKG4uYWNjZXB0RGF0YShjKSYmKGU9Y1tMLmV4cGFuZG9dLGUmJihiPUwuY2FjaGVbZV0pKSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZltkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtMLmNhY2hlW2VdJiZkZWxldGUgTC5jYWNoZVtlXX1kZWxldGUgTS5jYWNoZVtjW00uZXhwYW5kb11dfX19KSxuLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYih0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9uLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bi5jbGVhbkRhdGEob2IoYykpLGMucGFyZW50Tm9kZSYmKGImJm4uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZtYihvYihjLFwic2NyaXB0XCIpKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2IoYSwhMSkpLGEudGV4dENvbnRlbnQ9XCJcIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEmJjE9PT1iLm5vZGVUeXBlKXJldHVybiBiLmlubmVySFRNTDtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmIWRiLnRlc3QoYSkmJiFpYlsoYmIuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPWEucmVwbGFjZShhYixcIjwkMT48LyQyPlwiKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYihiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbi5jbGVhbkRhdGEob2IodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG09dGhpcyxvPWwtMSxwPWFbMF0scT1uLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiZcInN0cmluZ1wiPT10eXBlb2YgcCYmIWsuY2hlY2tDbG9uZSYmZWIudGVzdChwKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPW0uZXEoYyk7cSYmKGFbMF09cC5jYWxsKHRoaXMsYyxkLmh0bWwoKSkpLGQuZG9tTWFuaXAoYSxiKX0pO2lmKGwmJihjPW4uYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxkPWMuZmlyc3RDaGlsZCwxPT09Yy5jaGlsZE5vZGVzLmxlbmd0aCYmKGM9ZCksZCkpe2ZvcihmPW4ubWFwKG9iKGMsXCJzY3JpcHRcIiksa2IpLGc9Zi5sZW5ndGg7bD5qO2orKyloPWMsaiE9PW8mJihoPW4uY2xvbmUoaCwhMCwhMCksZyYmbi5tZXJnZShmLG9iKGgsXCJzY3JpcHRcIikpKSxiLmNhbGwodGhpc1tqXSxoLGopO2lmKGcpZm9yKGk9ZltmLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGYsbGIpLGo9MDtnPmo7aisrKWg9ZltqXSxmYi50ZXN0KGgudHlwZXx8XCJcIikmJiFMLmFjY2VzcyhoLFwiZ2xvYmFsRXZhbFwiKSYmbi5jb250YWlucyhpLGgpJiYoaC5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChoLnNyYyk6bi5nbG9iYWxFdmFsKGgudGV4dENvbnRlbnQucmVwbGFjZShoYixcIlwiKSkpfXJldHVybiB0aGlzfX0pLG4uZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1uKGEpLGc9ZS5sZW5ndGgtMSxoPTA7Zz49aDtoKyspYz1oPT09Zz90aGlzOnRoaXMuY2xvbmUoITApLG4oZVtoXSlbYl0oYyksZi5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgcWIscmI9e307ZnVuY3Rpb24gc2IoYixjKXt2YXIgZCxlPW4oYy5jcmVhdGVFbGVtZW50KGIpKS5hcHBlbmRUbyhjLmJvZHkpLGY9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSYmKGQ9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShlWzBdKSk/ZC5kaXNwbGF5Om4uY3NzKGVbMF0sXCJkaXNwbGF5XCIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gdGIoYSl7dmFyIGI9bCxjPXJiW2FdO3JldHVybiBjfHwoYz1zYihhLGIpLFwibm9uZVwiIT09YyYmY3x8KHFiPShxYnx8bihcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPXFiWzBdLmNvbnRlbnREb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9c2IoYSxiKSxxYi5kZXRhY2goKSkscmJbYV09YyksY312YXIgdWI9L15tYXJnaW4vLHZiPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksd2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGEub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGEsbnVsbCl9O2Z1bmN0aW9uIHhiKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuc3R5bGU7cmV0dXJuIGM9Y3x8d2IoYSksYyYmKGc9Yy5nZXRQcm9wZXJ0eVZhbHVlKGIpfHxjW2JdKSxjJiYoXCJcIiE9PWd8fG4uY29udGFpbnMoYS5vd25lckRvY3VtZW50LGEpfHwoZz1uLnN0eWxlKGEsYikpLHZiLnRlc3QoZykmJnViLnRlc3QoYikmJihkPWgud2lkdGgsZT1oLm1pbldpZHRoLGY9aC5tYXhXaWR0aCxoLm1pbldpZHRoPWgubWF4V2lkdGg9aC53aWR0aD1nLGc9Yy53aWR0aCxoLndpZHRoPWQsaC5taW5XaWR0aD1lLGgubWF4V2lkdGg9ZikpLHZvaWQgMCE9PWc/ZytcIlwiOmd9ZnVuY3Rpb24geWIoYSxiKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIGEoKT92b2lkIGRlbGV0ZSB0aGlzLmdldDoodGhpcy5nZXQ9YikuYXBwbHkodGhpcyxhcmd1bWVudHMpfX19IWZ1bmN0aW9uKCl7dmFyIGIsYyxkPWwuZG9jdW1lbnRFbGVtZW50LGU9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGY9bC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKGYuc3R5bGUpe2Yuc3R5bGUuYmFja2dyb3VuZENsaXA9XCJjb250ZW50LWJveFwiLGYuY2xvbmVOb2RlKCEwKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cIlwiLGsuY2xlYXJDbG9uZVN0eWxlPVwiY29udGVudC1ib3hcIj09PWYuc3R5bGUuYmFja2dyb3VuZENsaXAsZS5zdHlsZS5jc3NUZXh0PVwiYm9yZGVyOjA7d2lkdGg6MDtoZWlnaHQ6MDt0b3A6MDtsZWZ0Oi05OTk5cHg7bWFyZ2luLXRvcDoxcHg7cG9zaXRpb246YWJzb2x1dGVcIixlLmFwcGVuZENoaWxkKGYpO2Z1bmN0aW9uIGcoKXtmLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtib3JkZXI6MXB4O3BhZGRpbmc6MXB4O3dpZHRoOjRweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGYuaW5uZXJIVE1MPVwiXCIsZC5hcHBlbmRDaGlsZChlKTt2YXIgZz1hLmdldENvbXB1dGVkU3R5bGUoZixudWxsKTtiPVwiMSVcIiE9PWcudG9wLGM9XCI0cHhcIj09PWcud2lkdGgsZC5yZW1vdmVDaGlsZChlKX1hLmdldENvbXB1dGVkU3R5bGUmJm4uZXh0ZW5kKGsse3BpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZygpLGJ9LGJveFNpemluZ1JlbGlhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PWMmJmcoKSxjfSxyZWxpYWJsZU1hcmdpblJpZ2h0OmZ1bmN0aW9uKCl7dmFyIGIsYz1mLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7cmV0dXJuIGMuc3R5bGUuY3NzVGV4dD1mLnN0eWxlLmNzc1RleHQ9XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O2JveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIixjLnN0eWxlLm1hcmdpblJpZ2h0PWMuc3R5bGUud2lkdGg9XCIwXCIsZi5zdHlsZS53aWR0aD1cIjFweFwiLGQuYXBwZW5kQ2hpbGQoZSksYj0hcGFyc2VGbG9hdChhLmdldENvbXB1dGVkU3R5bGUoYyxudWxsKS5tYXJnaW5SaWdodCksZC5yZW1vdmVDaGlsZChlKSxifX0pfX0oKSxuLnN3YXA9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnPXt9O2ZvcihmIGluIGIpZ1tmXT1hLnN0eWxlW2ZdLGEuc3R5bGVbZl09YltmXTtlPWMuYXBwbHkoYSxkfHxbXSk7Zm9yKGYgaW4gYilhLnN0eWxlW2ZdPWdbZl07cmV0dXJuIGV9O3ZhciB6Yj0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8sQWI9bmV3IFJlZ0V4cChcIl4oXCIrUStcIikoLiopJFwiLFwiaVwiKSxCYj1uZXcgUmVnRXhwKFwiXihbKy1dKT0oXCIrUStcIilcIixcImlcIiksQ2I9e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCIsZGlzcGxheTpcImJsb2NrXCJ9LERiPXtsZXR0ZXJTcGFjaW5nOlwiMFwiLGZvbnRXZWlnaHQ6XCI0MDBcIn0sRWI9W1wiV2Via2l0XCIsXCJPXCIsXCJNb3pcIixcIm1zXCJdO2Z1bmN0aW9uIEZiKGEsYil7aWYoYiBpbiBhKXJldHVybiBiO3ZhciBjPWJbMF0udG9VcHBlckNhc2UoKStiLnNsaWNlKDEpLGQ9YixlPUViLmxlbmd0aDt3aGlsZShlLS0paWYoYj1FYltlXStjLGIgaW4gYSlyZXR1cm4gYjtyZXR1cm4gZH1mdW5jdGlvbiBHYihhLGIsYyl7dmFyIGQ9QWIuZXhlYyhiKTtyZXR1cm4gZD9NYXRoLm1heCgwLGRbMV0tKGN8fDApKSsoZFsyXXx8XCJweFwiKTpifWZ1bmN0aW9uIEhiKGEsYixjLGQsZSl7Zm9yKHZhciBmPWM9PT0oZD9cImJvcmRlclwiOlwiY29udGVudFwiKT80Olwid2lkdGhcIj09PWI/MTowLGc9MDs0PmY7Zis9MilcIm1hcmdpblwiPT09YyYmKGcrPW4uY3NzKGEsYytSW2ZdLCEwLGUpKSxkPyhcImNvbnRlbnRcIj09PWMmJihnLT1uLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSkpLFwibWFyZ2luXCIhPT1jJiYoZy09bi5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk6KGcrPW4uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSxcInBhZGRpbmdcIiE9PWMmJihnKz1uLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTtyZXR1cm4gZ31mdW5jdGlvbiBJYihhLGIsYyl7dmFyIGQ9ITAsZT1cIndpZHRoXCI9PT1iP2Eub2Zmc2V0V2lkdGg6YS5vZmZzZXRIZWlnaHQsZj13YihhKSxnPVwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGYpO2lmKDA+PWV8fG51bGw9PWUpe2lmKGU9eGIoYSxiLGYpLCgwPmV8fG51bGw9PWUpJiYoZT1hLnN0eWxlW2JdKSx2Yi50ZXN0KGUpKXJldHVybiBlO2Q9ZyYmKGsuYm94U2l6aW5nUmVsaWFibGUoKXx8ZT09PWEuc3R5bGVbYl0pLGU9cGFyc2VGbG9hdChlKXx8MH1yZXR1cm4gZStIYihhLGIsY3x8KGc/XCJib3JkZXJcIjpcImNvbnRlbnRcIiksZCxmKStcInB4XCJ9ZnVuY3Rpb24gSmIoYSxiKXtmb3IodmFyIGMsZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGZbZ109TC5nZXQoZCxcIm9sZGRpc3BsYXlcIiksYz1kLnN0eWxlLmRpc3BsYXksYj8oZltnXXx8XCJub25lXCIhPT1jfHwoZC5zdHlsZS5kaXNwbGF5PVwiXCIpLFwiXCI9PT1kLnN0eWxlLmRpc3BsYXkmJlMoZCkmJihmW2ddPUwuYWNjZXNzKGQsXCJvbGRkaXNwbGF5XCIsdGIoZC5ub2RlTmFtZSkpKSk6KGU9UyhkKSxcIm5vbmVcIj09PWMmJmV8fEwuc2V0KGQsXCJvbGRkaXNwbGF5XCIsZT9jOm4uY3NzKGQsXCJkaXNwbGF5XCIpKSkpO2ZvcihnPTA7aD5nO2crKylkPWFbZ10sZC5zdHlsZSYmKGImJlwibm9uZVwiIT09ZC5zdHlsZS5kaXNwbGF5JiZcIlwiIT09ZC5zdHlsZS5kaXNwbGF5fHwoZC5zdHlsZS5kaXNwbGF5PWI/ZltnXXx8XCJcIjpcIm5vbmVcIikpO3JldHVybiBhfW4uZXh0ZW5kKHtjc3NIb29rczp7b3BhY2l0eTp7Z2V0OmZ1bmN0aW9uKGEsYil7aWYoYil7dmFyIGM9eGIoYSxcIm9wYWNpdHlcIik7cmV0dXJuXCJcIj09PWM/XCIxXCI6Y319fX0sY3NzTnVtYmVyOntjb2x1bW5Db3VudDohMCxmaWxsT3BhY2l0eTohMCxmbGV4R3JvdzohMCxmbGV4U2hyaW5rOiEwLGZvbnRXZWlnaHQ6ITAsbGluZUhlaWdodDohMCxvcGFjaXR5OiEwLG9yZGVyOiEwLG9ycGhhbnM6ITAsd2lkb3dzOiEwLHpJbmRleDohMCx6b29tOiEwfSxjc3NQcm9wczp7XCJmbG9hdFwiOlwiY3NzRmxvYXRcIn0sc3R5bGU6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoYSYmMyE9PWEubm9kZVR5cGUmJjghPT1hLm5vZGVUeXBlJiZhLnN0eWxlKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKSxpPWEuc3R5bGU7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmIoaSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLHZvaWQgMD09PWM/ZyYmXCJnZXRcImluIGcmJnZvaWQgMCE9PShlPWcuZ2V0KGEsITEsZCkpP2U6aVtiXTooZj10eXBlb2YgYyxcInN0cmluZ1wiPT09ZiYmKGU9QmIuZXhlYyhjKSkmJihjPShlWzFdKzEpKmVbMl0rcGFyc2VGbG9hdChuLmNzcyhhLGIpKSxmPVwibnVtYmVyXCIpLG51bGwhPWMmJmM9PT1jJiYoXCJudW1iZXJcIiE9PWZ8fG4uY3NzTnVtYmVyW2hdfHwoYys9XCJweFwiKSxrLmNsZWFyQ2xvbmVTdHlsZXx8XCJcIiE9PWN8fDAhPT1iLmluZGV4T2YoXCJiYWNrZ3JvdW5kXCIpfHwoaVtiXT1cImluaGVyaXRcIiksZyYmXCJzZXRcImluIGcmJnZvaWQgMD09PShjPWcuc2V0KGEsYyxkKSl8fChpW2JdPWMpKSx2b2lkIDApfX0sY3NzOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZiKGEuc3R5bGUsaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSxnJiZcImdldFwiaW4gZyYmKGU9Zy5nZXQoYSwhMCxjKSksdm9pZCAwPT09ZSYmKGU9eGIoYSxiLGQpKSxcIm5vcm1hbFwiPT09ZSYmYiBpbiBEYiYmKGU9RGJbYl0pLFwiXCI9PT1jfHxjPyhmPXBhcnNlRmxvYXQoZSksYz09PSEwfHxuLmlzTnVtZXJpYyhmKT9mfHwwOmUpOmV9fSksbi5lYWNoKFtcImhlaWdodFwiLFwid2lkdGhcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXtnZXQ6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBjP3piLnRlc3Qobi5jc3MoYSxcImRpc3BsYXlcIikpJiYwPT09YS5vZmZzZXRXaWR0aD9uLnN3YXAoYSxDYixmdW5jdGlvbigpe3JldHVybiBJYihhLGIsZCl9KTpJYihhLGIsZCk6dm9pZCAwfSxzZXQ6ZnVuY3Rpb24oYSxjLGQpe3ZhciBlPWQmJndiKGEpO3JldHVybiBHYihhLGMsZD9IYihhLGIsZCxcImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxlKSxlKTowKX19fSksbi5jc3NIb29rcy5tYXJnaW5SaWdodD15YihrLnJlbGlhYmxlTWFyZ2luUmlnaHQsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj9uLnN3YXAoYSx7ZGlzcGxheTpcImlubGluZS1ibG9ja1wifSx4YixbYSxcIm1hcmdpblJpZ2h0XCJdKTp2b2lkIDB9KSxuLmVhY2goe21hcmdpbjpcIlwiLHBhZGRpbmc6XCJcIixib3JkZXI6XCJXaWR0aFwifSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYStiXT17ZXhwYW5kOmZ1bmN0aW9uKGMpe2Zvcih2YXIgZD0wLGU9e30sZj1cInN0cmluZ1wiPT10eXBlb2YgYz9jLnNwbGl0KFwiIFwiKTpbY107ND5kO2QrKyllW2ErUltkXStiXT1mW2RdfHxmW2QtMl18fGZbMF07cmV0dXJuIGV9fSx1Yi50ZXN0KGEpfHwobi5jc3NIb29rc1thK2JdLnNldD1HYil9KSxuLmZuLmV4dGVuZCh7Y3NzOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPXt9LGc9MDtpZihuLmlzQXJyYXkoYikpe2ZvcihkPXdiKGEpLGU9Yi5sZW5ndGg7ZT5nO2crKylmW2JbZ11dPW4uY3NzKGEsYltnXSwhMSxkKTtyZXR1cm4gZn1yZXR1cm4gdm9pZCAwIT09Yz9uLnN0eWxlKGEsYixjKTpuLmNzcyhhLGIpfSxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0sc2hvdzpmdW5jdGlvbigpe3JldHVybiBKYih0aGlzLCEwKX0saGlkZTpmdW5jdGlvbigpe3JldHVybiBKYih0aGlzKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYT9hP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpOnRoaXMuZWFjaChmdW5jdGlvbigpe1ModGhpcyk/bih0aGlzKS5zaG93KCk6bih0aGlzKS5oaWRlKCl9KX19KTtmdW5jdGlvbiBLYihhLGIsYyxkLGUpe3JldHVybiBuZXcgS2IucHJvdG90eXBlLmluaXQoYSxiLGMsZCxlKX1uLlR3ZWVuPUtiLEtiLnByb3RvdHlwZT17Y29uc3RydWN0b3I6S2IsaW5pdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5lbGVtPWEsdGhpcy5wcm9wPWMsdGhpcy5lYXNpbmc9ZXx8XCJzd2luZ1wiLHRoaXMub3B0aW9ucz1iLHRoaXMuc3RhcnQ9dGhpcy5ub3c9dGhpcy5jdXIoKSx0aGlzLmVuZD1kLHRoaXMudW5pdD1mfHwobi5jc3NOdW1iZXJbY10/XCJcIjpcInB4XCIpfSxjdXI6ZnVuY3Rpb24oKXt2YXIgYT1LYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gYSYmYS5nZXQ/YS5nZXQodGhpcyk6S2IucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKX0scnVuOmZ1bmN0aW9uKGEpe3ZhciBiLGM9S2IucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIHRoaXMucG9zPWI9dGhpcy5vcHRpb25zLmR1cmF0aW9uP24uZWFzaW5nW3RoaXMuZWFzaW5nXShhLHRoaXMub3B0aW9ucy5kdXJhdGlvbiphLDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pOmEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6S2IucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sS2IucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUtiLnByb3RvdHlwZSxLYi5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW4uY3NzKGEuZWxlbSxhLnByb3AsXCJcIiksYiYmXCJhdXRvXCIhPT1iP2I6MCk6YS5lbGVtW2EucHJvcF19LHNldDpmdW5jdGlvbihhKXtuLmZ4LnN0ZXBbYS5wcm9wXT9uLmZ4LnN0ZXBbYS5wcm9wXShhKTphLmVsZW0uc3R5bGUmJihudWxsIT1hLmVsZW0uc3R5bGVbbi5jc3NQcm9wc1thLnByb3BdXXx8bi5jc3NIb29rc1thLnByb3BdKT9uLnN0eWxlKGEuZWxlbSxhLnByb3AsYS5ub3crYS51bml0KTphLmVsZW1bYS5wcm9wXT1hLm5vd319fSxLYi5wcm9wSG9va3Muc2Nyb2xsVG9wPUtiLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oYSl7YS5lbGVtLm5vZGVUeXBlJiZhLmVsZW0ucGFyZW50Tm9kZSYmKGEuZWxlbVthLnByb3BdPWEubm93KX19LG4uZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN3aW5nOmZ1bmN0aW9uKGEpe3JldHVybi41LU1hdGguY29zKGEqTWF0aC5QSSkvMn19LG4uZng9S2IucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBMYixNYixOYj0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sT2I9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrUStcIikoW2EteiVdKikkXCIsXCJpXCIpLFBiPS9xdWV1ZUhvb2tzJC8sUWI9W1ZiXSxSYj17XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPU9iLmV4ZWMoYiksZj1lJiZlWzNdfHwobi5jc3NOdW1iZXJbYV0/XCJcIjpcInB4XCIpLGc9KG4uY3NzTnVtYmVyW2FdfHxcInB4XCIhPT1mJiYrZCkmJk9iLmV4ZWMobi5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fFwiLjVcIixnLz1oLG4uc3R5bGUoYy5lbGVtLGEsZytmKTt3aGlsZShoIT09KGg9Yy5jdXIoKS9kKSYmMSE9PWgmJi0taSl9cmV0dXJuIGUmJihnPWMuc3RhcnQ9K2d8fCtkfHwwLGMudW5pdD1mLGMuZW5kPWVbMV0/ZysoZVsxXSsxKSplWzJdOitlWzJdKSxjfV19O2Z1bmN0aW9uIFNiKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtMYj12b2lkIDB9KSxMYj1uLm5vdygpfWZ1bmN0aW9uIFRiKGEsYil7dmFyIGMsZD0wLGU9e2hlaWdodDphfTtmb3IoYj1iPzE6MDs0PmQ7ZCs9Mi1iKWM9UltkXSxlW1wibWFyZ2luXCIrY109ZVtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBVYihhLGIsYyl7Zm9yKHZhciBkLGU9KFJiW2JdfHxbXSkuY29uY2F0KFJiW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gVmIoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD10aGlzLG09e30sbz1hLnN0eWxlLHA9YS5ub2RlVHlwZSYmUyhhKSxxPUwuZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsXCJkaXNwbGF5XCIpLGs9XCJub25lXCI9PT1qP0wuZ2V0KGEsXCJvbGRkaXNwbGF5XCIpfHx0YihhLm5vZGVOYW1lKTpqLFwiaW5saW5lXCI9PT1rJiZcIm5vbmVcIj09PW4uY3NzKGEsXCJmbG9hdFwiKSYmKG8uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9XCJoaWRkZW5cIixsLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sTmIuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHA/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpXCJpbmxpbmVcIj09PShcIm5vbmVcIj09PWo/dGIoYS5ub2RlTmFtZSk6aikmJihvLmRpc3BsYXk9aik7ZWxzZXtxP1wiaGlkZGVuXCJpbiBxJiYocD1xLmhpZGRlbik6cT1MLmFjY2VzcyhhLFwiZnhzaG93XCIse30pLGYmJihxLmhpZGRlbj0hcCkscD9uKGEpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXtuKGEpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciBiO0wucmVtb3ZlKGEsXCJmeHNob3dcIik7Zm9yKGIgaW4gbSluLnN0eWxlKGEsYixtW2JdKX0pO2ZvcihkIGluIG0pZz1VYihwP3FbZF06MCxkLGwpLGQgaW4gcXx8KHFbZF09Zy5zdGFydCxwJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PVwid2lkdGhcIj09PWR8fFwiaGVpZ2h0XCI9PT1kPzE6MCkpfX1mdW5jdGlvbiBXYihhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW4uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbi5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1uLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gWGIoYSxiLGMpe3ZhciBkLGUsZj0wLGc9UWIubGVuZ3RoLGg9bi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9TGJ8fFNiKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm4uZXh0ZW5kKHt9LGIpLG9wdHM6bi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpMYnx8U2IoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW4uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKFdiKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1RYltmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG4ubWFwKGssVWIsaiksbi5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbi5meC50aW1lcihuLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1uLkFuaW1hdGlvbj1uLmV4dGVuZChYYix7dHdlZW5lcjpmdW5jdGlvbihhLGIpe24uaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLnNwbGl0KFwiIFwiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sUmJbY109UmJbY118fFtdLFJiW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/UWIudW5zaGlmdChhKTpRYi5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJlwib2JqZWN0XCI9PXR5cGVvZiBhP24uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bi5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFuLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW4uZngub2ZmPzA6XCJudW1iZXJcIj09dHlwZW9mIGQuZHVyYXRpb24/ZC5kdXJhdGlvbjpkLmR1cmF0aW9uIGluIG4uZnguc3BlZWRzP24uZnguc3BlZWRzW2QuZHVyYXRpb25dOm4uZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1kLnF1ZXVlfHxkLnF1ZXVlPT09ITApJiYoZC5xdWV1ZT1cImZ4XCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe24uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG4uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFMpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5pc0VtcHR5T2JqZWN0KGEpLGY9bi5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPVhiKHRoaXMsbi5leHRlbmQoe30sYSksZik7KGV8fEwuZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1uLnRpbWVycyxnPUwuZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlBiLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7KGJ8fCFjKSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZmluaXNoOmZ1bmN0aW9uKGEpe3JldHVybiBhIT09ITEmJihhPWF8fFwiZnhcIiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1MLmdldCh0aGlzKSxkPWNbYStcInF1ZXVlXCJdLGU9Y1thK1wicXVldWVIb29rc1wiXSxmPW4udGltZXJzLGc9ZD9kLmxlbmd0aDowO2ZvcihjLmZpbmlzaD0hMCxuLnF1ZXVlKHRoaXMsYSxbXSksZSYmZS5zdG9wJiZlLnN0b3AuY2FsbCh0aGlzLCEwKSxiPWYubGVuZ3RoO2ItLTspZltiXS5lbGVtPT09dGhpcyYmZltiXS5xdWV1ZT09PWEmJihmW2JdLmFuaW0uc3RvcCghMCksZi5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtnPmI7YisrKWRbYl0mJmRbYl0uZmluaXNoJiZkW2JdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBjLmZpbmlzaH0pfX0pLG4uZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmZuW2JdO24uZm5bYl09ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBudWxsPT1hfHxcImJvb2xlYW5cIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFRiKGIsITApLGEsZCxlKX19KSxuLmVhY2goe3NsaWRlRG93bjpUYihcInNob3dcIiksc2xpZGVVcDpUYihcImhpZGVcIiksc2xpZGVUb2dnbGU6VGIoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbi50aW1lcnM9W10sbi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9bi50aW1lcnM7Zm9yKExiPW4ubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8bi5meC5zdG9wKCksTGI9dm9pZCAwfSxuLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe24udGltZXJzLnB1c2goYSksYSgpP24uZnguc3RhcnQoKTpuLnRpbWVycy5wb3AoKX0sbi5meC5pbnRlcnZhbD0xMyxuLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7TWJ8fChNYj1zZXRJbnRlcnZhbChuLmZ4LnRpY2ssbi5meC5pbnRlcnZhbCkpfSxuLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKE1iKSxNYj1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bi5meD9uLmZ4LnNwZWVkc1thXXx8YTphLGI9Ynx8XCJmeFwiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1sLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixrLmNoZWNrT249XCJcIiE9PWEudmFsdWUsay5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGIuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hYy5kaXNhYmxlZCxhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGEudmFsdWU9XCJ0XCIsYS50eXBlPVwicmFkaW9cIixrLnJhZGlvVmFsdWU9XCJ0XCI9PT1hLnZhbHVlfSgpO3ZhciBZYixaYiwkYj1uLmV4cHIuYXR0ckhhbmRsZTtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZihhJiYzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiB0eXBlb2YgYS5nZXRBdHRyaWJ1dGU9PT1VP24ucHJvcChhLGIsYyk6KDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1iLnRvTG93ZXJDYXNlKCksZD1uLmF0dHJIb29rc1tiXXx8KG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYik/WmI6WWIpKSx2b2lkIDA9PT1jP2QmJlwiZ2V0XCJpbiBkJiZudWxsIT09KGU9ZC5nZXQoYSxiKSk/ZTooZT1uLmZpbmQuYXR0cihhLGIpLG51bGw9PWU/dm9pZCAwOmUpOm51bGwhPT1jP2QmJlwic2V0XCJpbiBkJiZ2b2lkIDAhPT0oZT1kLnNldChhLGMsYikpP2U6KGEuc2V0QXR0cmlidXRlKGIsYytcIlwiKSxjKTp2b2lkIG4ucmVtb3ZlQXR0cihhLGIpKVxufSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPTAsZj1iJiZiLm1hdGNoKEUpO2lmKGYmJjE9PT1hLm5vZGVUeXBlKXdoaWxlKGM9ZltlKytdKWQ9bi5wcm9wRml4W2NdfHxjLG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYykmJihhW2RdPSExKSxhLnJlbW92ZUF0dHJpYnV0ZShjKX0sYXR0ckhvb2tzOnt0eXBlOntzZXQ6ZnVuY3Rpb24oYSxiKXtpZighay5yYWRpb1ZhbHVlJiZcInJhZGlvXCI9PT1iJiZuLm5vZGVOYW1lKGEsXCJpbnB1dFwiKSl7dmFyIGM9YS52YWx1ZTtyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsYiksYyYmKGEudmFsdWU9YyksYn19fX19KSxaYj17c2V0OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj09PSExP24ucmVtb3ZlQXR0cihhLGMpOmEuc2V0QXR0cmlidXRlKGMsYyksY319LG4uZWFjaChuLmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1xcdysvZyksZnVuY3Rpb24oYSxiKXt2YXIgYz0kYltiXXx8bi5maW5kLmF0dHI7JGJbYl09ZnVuY3Rpb24oYSxiLGQpe3ZhciBlLGY7cmV0dXJuIGR8fChmPSRiW2JdLCRiW2JdPWUsZT1udWxsIT1jKGEsYixkKT9iLnRvTG93ZXJDYXNlKCk6bnVsbCwkYltiXT1mKSxlfX0pO3ZhciBfYj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO24uZm4uZXh0ZW5kKHtwcm9wOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLnByb3AsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZVByb3A6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW24ucHJvcEZpeFthXXx8YV19KX19KSxuLmV4dGVuZCh7cHJvcEZpeDp7XCJmb3JcIjpcImh0bWxGb3JcIixcImNsYXNzXCI6XCJjbGFzc05hbWVcIn0scHJvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGc9YS5ub2RlVHlwZTtpZihhJiYzIT09ZyYmOCE9PWcmJjIhPT1nKXJldHVybiBmPTEhPT1nfHwhbi5pc1hNTERvYyhhKSxmJiYoYj1uLnByb3BGaXhbYl18fGIsZT1uLnByb3BIb29rc1tiXSksdm9pZCAwIT09Yz9lJiZcInNldFwiaW4gZSYmdm9pZCAwIT09KGQ9ZS5zZXQoYSxjLGIpKT9kOmFbYl09YzplJiZcImdldFwiaW4gZSYmbnVsbCE9PShkPWUuZ2V0KGEsYikpP2Q6YVtiXX0scHJvcEhvb2tzOnt0YWJJbmRleDp7Z2V0OmZ1bmN0aW9uKGEpe3JldHVybiBhLmhhc0F0dHJpYnV0ZShcInRhYmluZGV4XCIpfHxfYi50ZXN0KGEubm9kZU5hbWUpfHxhLmhyZWY/YS50YWJJbmRleDotMX19fX0pLGsub3B0U2VsZWN0ZWR8fChuLnByb3BIb29rcy5zZWxlY3RlZD17Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmYi5wYXJlbnROb2RlJiZiLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleCxudWxsfX0pLG4uZWFjaChbXCJ0YWJJbmRleFwiLFwicmVhZE9ubHlcIixcIm1heExlbmd0aFwiLFwiY2VsbFNwYWNpbmdcIixcImNlbGxQYWRkaW5nXCIsXCJyb3dTcGFuXCIsXCJjb2xTcGFuXCIsXCJ1c2VNYXBcIixcImZyYW1lQm9yZGVyXCIsXCJjb250ZW50RWRpdGFibGVcIl0sZnVuY3Rpb24oKXtuLnByb3BGaXhbdGhpcy50b0xvd2VyQ2FzZSgpXT10aGlzfSk7dmFyIGFjPS9bXFx0XFxyXFxuXFxmXS9nO24uZm4uZXh0ZW5kKHthZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD1cInN0cmluZ1wiPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLmFkZENsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFjLFwiIFwiKTpcIiBcIikpe2Y9MDt3aGlsZShlPWJbZisrXSlkLmluZGV4T2YoXCIgXCIrZStcIiBcIik8MCYmKGQrPWUrXCIgXCIpO2c9bi50cmltKGQpLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhKXt2YXIgYixjLGQsZSxmLGcsaD0wPT09YXJndW1lbnRzLmxlbmd0aHx8XCJzdHJpbmdcIj09dHlwZW9mIGEmJmEsaT0wLGo9dGhpcy5sZW5ndGg7aWYobi5pc0Z1bmN0aW9uKGEpKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYil7bih0aGlzKS5yZW1vdmVDbGFzcyhhLmNhbGwodGhpcyxiLHRoaXMuY2xhc3NOYW1lKSl9KTtpZihoKWZvcihiPShhfHxcIlwiKS5tYXRjaChFKXx8W107aj5pO2krKylpZihjPXRoaXNbaV0sZD0xPT09Yy5ub2RlVHlwZSYmKGMuY2xhc3NOYW1lPyhcIiBcIitjLmNsYXNzTmFtZStcIiBcIikucmVwbGFjZShhYyxcIiBcIik6XCJcIikpe2Y9MDt3aGlsZShlPWJbZisrXSl3aGlsZShkLmluZGV4T2YoXCIgXCIrZStcIiBcIik+PTApZD1kLnJlcGxhY2UoXCIgXCIrZStcIiBcIixcIiBcIik7Zz1hP24udHJpbShkKTpcIlwiLGMuY2xhc3NOYW1lIT09ZyYmKGMuY2xhc3NOYW1lPWcpfXJldHVybiB0aGlzfSx0b2dnbGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPXR5cGVvZiBhO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgYiYmXCJzdHJpbmdcIj09PWM/Yj90aGlzLmFkZENsYXNzKGEpOnRoaXMucmVtb3ZlQ2xhc3MoYSk6dGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihjKXtuKHRoaXMpLnRvZ2dsZUNsYXNzKGEuY2FsbCh0aGlzLGMsdGhpcy5jbGFzc05hbWUsYiksYil9OmZ1bmN0aW9uKCl7aWYoXCJzdHJpbmdcIj09PWMpe3ZhciBiLGQ9MCxlPW4odGhpcyksZj1hLm1hdGNoKEUpfHxbXTt3aGlsZShiPWZbZCsrXSllLmhhc0NsYXNzKGIpP2UucmVtb3ZlQ2xhc3MoYik6ZS5hZGRDbGFzcyhiKX1lbHNlKGM9PT1VfHxcImJvb2xlYW5cIj09PWMpJiYodGhpcy5jbGFzc05hbWUmJkwuc2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIsdGhpcy5jbGFzc05hbWUpLHRoaXMuY2xhc3NOYW1lPXRoaXMuY2xhc3NOYW1lfHxhPT09ITE/XCJcIjpMLmdldCh0aGlzLFwiX19jbGFzc05hbWVfX1wiKXx8XCJcIil9KX0saGFzQ2xhc3M6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPVwiIFwiK2ErXCIgXCIsYz0wLGQ9dGhpcy5sZW5ndGg7ZD5jO2MrKylpZigxPT09dGhpc1tjXS5ub2RlVHlwZSYmKFwiIFwiK3RoaXNbY10uY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFjLFwiIFwiKS5pbmRleE9mKGIpPj0wKXJldHVybiEwO3JldHVybiExfX0pO3ZhciBiYz0vXFxyL2c7bi5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbihhKXt2YXIgYixjLGQsZT10aGlzWzBdO3tpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkPW4uaXNGdW5jdGlvbihhKSx0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGU7MT09PXRoaXMubm9kZVR5cGUmJihlPWQ/YS5jYWxsKHRoaXMsYyxuKHRoaXMpLnZhbCgpKTphLG51bGw9PWU/ZT1cIlwiOlwibnVtYmVyXCI9PXR5cGVvZiBlP2UrPVwiXCI6bi5pc0FycmF5KGUpJiYoZT1uLm1hcChlLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6YStcIlwifSkpLGI9bi52YWxIb29rc1t0aGlzLnR5cGVdfHxuLnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJzZXRcImluIGImJnZvaWQgMCE9PWIuc2V0KHRoaXMsZSxcInZhbHVlXCIpfHwodGhpcy52YWx1ZT1lKSl9KTtpZihlKXJldHVybiBiPW4udmFsSG9va3NbZS50eXBlXXx8bi52YWxIb29rc1tlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCldLGImJlwiZ2V0XCJpbiBiJiZ2b2lkIDAhPT0oYz1iLmdldChlLFwidmFsdWVcIikpP2M6KGM9ZS52YWx1ZSxcInN0cmluZ1wiPT10eXBlb2YgYz9jLnJlcGxhY2UoYmMsXCJcIik6bnVsbD09Yz9cIlwiOmMpfX19KSxuLmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGEpe3ZhciBiPW4uZmluZC5hdHRyKGEsXCJ2YWx1ZVwiKTtyZXR1cm4gbnVsbCE9Yj9iOm4udHJpbShuLnRleHQoYSkpfX0sc2VsZWN0OntnZXQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZD1hLm9wdGlvbnMsZT1hLnNlbGVjdGVkSW5kZXgsZj1cInNlbGVjdC1vbmVcIj09PWEudHlwZXx8MD5lLGc9Zj9udWxsOltdLGg9Zj9lKzE6ZC5sZW5ndGgsaT0wPmU/aDpmP2U6MDtoPmk7aSsrKWlmKGM9ZFtpXSwhKCFjLnNlbGVjdGVkJiZpIT09ZXx8KGsub3B0RGlzYWJsZWQ/Yy5kaXNhYmxlZDpudWxsIT09Yy5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSl8fGMucGFyZW50Tm9kZS5kaXNhYmxlZCYmbi5ub2RlTmFtZShjLnBhcmVudE5vZGUsXCJvcHRncm91cFwiKSkpe2lmKGI9bihjKS52YWwoKSxmKXJldHVybiBiO2cucHVzaChiKX1yZXR1cm4gZ30sc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPWEub3B0aW9ucyxmPW4ubWFrZUFycmF5KGIpLGc9ZS5sZW5ndGg7d2hpbGUoZy0tKWQ9ZVtnXSwoZC5zZWxlY3RlZD1uLmluQXJyYXkoZC52YWx1ZSxmKT49MCkmJihjPSEwKTtyZXR1cm4gY3x8KGEuc2VsZWN0ZWRJbmRleD0tMSksZn19fX0pLG4uZWFjaChbXCJyYWRpb1wiLFwiY2hlY2tib3hcIl0sZnVuY3Rpb24oKXtuLnZhbEhvb2tzW3RoaXNdPXtzZXQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5pc0FycmF5KGIpP2EuY2hlY2tlZD1uLmluQXJyYXkobihhKS52YWwoKSxiKT49MDp2b2lkIDB9fSxrLmNoZWNrT258fChuLnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09PWEuZ2V0QXR0cmlidXRlKFwidmFsdWVcIik/XCJvblwiOmEudmFsdWV9KX0pLG4uZWFjaChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIGNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKGIsbnVsbCxhLGMpOnRoaXMudHJpZ2dlcihiKX19KSxuLmZuLmV4dGVuZCh7aG92ZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGEpLm1vdXNlbGVhdmUoYnx8YSl9LGJpbmQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLm9uKGEsbnVsbCxiLGMpfSx1bmJpbmQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5vZmYoYSxudWxsLGIpfSxkZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5vbihiLGEsYyxkKX0sdW5kZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIDE9PT1hcmd1bWVudHMubGVuZ3RoP3RoaXMub2ZmKGEsXCIqKlwiKTp0aGlzLm9mZihiLGF8fFwiKipcIixjKX19KTt2YXIgY2M9bi5ub3coKSxkYz0vXFw/LztuLnBhcnNlSlNPTj1mdW5jdGlvbihhKXtyZXR1cm4gSlNPTi5wYXJzZShhK1wiXCIpfSxuLnBhcnNlWE1MPWZ1bmN0aW9uKGEpe3ZhciBiLGM7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO3RyeXtjPW5ldyBET01QYXJzZXIsYj1jLnBhcnNlRnJvbVN0cmluZyhhLFwidGV4dC94bWxcIil9Y2F0Y2goZCl7Yj12b2lkIDB9cmV0dXJuKCFifHxiLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwicGFyc2VyZXJyb3JcIikubGVuZ3RoKSYmbi5lcnJvcihcIkludmFsaWQgWE1MOiBcIithKSxifTt2YXIgZWMsZmMsZ2M9LyMuKiQvLGhjPS8oWz8mXSlfPVteJl0qLyxpYz0vXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL2dtLGpjPS9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLGtjPS9eKD86R0VUfEhFQUQpJC8sbGM9L15cXC9cXC8vLG1jPS9eKFtcXHcuKy1dKzopKD86XFwvXFwvKD86W15cXC8/I10qQHwpKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLG5jPXt9LG9jPXt9LHBjPVwiKi9cIi5jb25jYXQoXCIqXCIpO3RyeXtmYz1sb2NhdGlvbi5ocmVmfWNhdGNoKHFjKXtmYz1sLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLGZjLmhyZWY9XCJcIixmYz1mYy5ocmVmfWVjPW1jLmV4ZWMoZmMudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHJjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIHNjKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PW9jO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbi5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gdGMoYSxiKXt2YXIgYyxkLGU9bi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmbi5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIHVjKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIHZjKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19bi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOmZjLHR5cGU6XCJHRVRcIixpc0xvY2FsOmpjLnRlc3QoZWNbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOnBjLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpuLnBhcnNlSlNPTixcInRleHQgeG1sXCI6bi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/dGModGMoYSxuLmFqYXhTZXR0aW5ncyksYik6dGMobi5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6cmMobmMpLGFqYXhUcmFuc3BvcnQ6cmMob2MpLGFqYXg6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYj1ifHx7fTt2YXIgYyxkLGUsZixnLGgsaSxqLGs9bi5hamF4U2V0dXAoe30sYiksbD1rLmNvbnRleHR8fGssbT1rLmNvbnRleHQmJihsLm5vZGVUeXBlfHxsLmpxdWVyeSk/bihsKTpuLmV2ZW50LG89bi5EZWZlcnJlZCgpLHA9bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PVwiY2FuY2VsZWRcIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFmKXtmPXt9O3doaWxlKGI9aWMuZXhlYyhlKSlmW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWZbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9lOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBjJiZjLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8ZmMpK1wiXCIpLnJlcGxhY2UoZ2MsXCJcIikucmVwbGFjZShsYyxlY1sxXStcIi8vXCIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW4udHJpbShrLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W1wiXCJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihoPW1jLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFofHxoWzFdPT09ZWNbMV0mJmhbMl09PT1lY1syXSYmKGhbM118fChcImh0dHA6XCI9PT1oWzFdP1wiODBcIjpcIjQ0M1wiKSk9PT0oZWNbM118fChcImh0dHA6XCI9PT1lY1sxXT9cIjgwXCI6XCI0NDNcIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW4ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxzYyhuYyxrLGIsdiksMj09PXQpcmV0dXJuIHY7aT1rLmdsb2JhbCxpJiYwPT09bi5hY3RpdmUrKyYmbi5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLGsudHlwZT1rLnR5cGUudG9VcHBlckNhc2UoKSxrLmhhc0NvbnRlbnQ9IWtjLnRlc3Qoay50eXBlKSxkPWsudXJsLGsuaGFzQ29udGVudHx8KGsuZGF0YSYmKGQ9ay51cmwrPShkYy50ZXN0KGQpP1wiJlwiOlwiP1wiKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9aGMudGVzdChkKT9kLnJlcGxhY2UoaGMsXCIkMV89XCIrY2MrKyk6ZCsoZGMudGVzdChkKT9cIiZcIjpcIj9cIikrXCJfPVwiK2NjKyspKSxrLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTW9kaWZpZWQtU2luY2VcIixuLmxhc3RNb2RpZmllZFtkXSksbi5ldGFnW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsbi5ldGFnW2RdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixrLmNvbnRlbnRUeXBlKSx2LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKyhcIipcIiE9PWsuZGF0YVR5cGVzWzBdP1wiLCBcIitwYytcIjsgcT0wLjAxXCI6XCJcIik6ay5hY2NlcHRzW1wiKlwiXSk7Zm9yKGogaW4gay5oZWFkZXJzKXYuc2V0UmVxdWVzdEhlYWRlcihqLGsuaGVhZGVyc1tqXSk7aWYoay5iZWZvcmVTZW5kJiYoay5iZWZvcmVTZW5kLmNhbGwobCx2LGspPT09ITF8fDI9PT10KSlyZXR1cm4gdi5hYm9ydCgpO3U9XCJhYm9ydFwiO2ZvcihqIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbal0oa1tqXSk7aWYoYz1zYyhvYyxrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGkmJm0udHJpZ2dlcihcImFqYXhTZW5kXCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydChcInRpbWVvdXRcIil9LGsudGltZW91dCkpO3RyeXt0PTEsYy5zZW5kKHIseCl9Y2F0Y2godyl7aWYoISgyPnQpKXRocm93IHc7eCgtMSx3KX19ZWxzZSB4KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHgoYSxiLGYsaCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGM9dm9pZCAwLGU9aHx8XCJcIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsZiYmKHU9dWMoayx2LGYpKSx1PXZjKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksdyYmKG4ubGFzdE1vZGlmaWVkW2RdPXcpLHc9di5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksdyYmKG4uZXRhZ1tkXT13KSksMjA0PT09YXx8XCJIRUFEXCI9PT1rLnR5cGU/eD1cIm5vY29udGVudFwiOjMwND09PWE/eD1cIm5vdG1vZGlmaWVkXCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9XCJlcnJvclwiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrXCJcIixqP28ucmVzb2x2ZVdpdGgobCxbcix4LHZdKTpvLnJlamVjdFdpdGgobCxbdix4LHNdKSx2LnN0YXR1c0NvZGUocSkscT12b2lkIDAsaSYmbS50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaSYmKG0udHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt2LGtdKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxuLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbi5lYWNoKFtcImFqYXhTdGFydFwiLFwiYWpheFN0b3BcIixcImFqYXhDb21wbGV0ZVwiLFwiYWpheEVycm9yXCIsXCJhamF4U3VjY2Vzc1wiLFwiYWpheFNlbmRcIl0sZnVuY3Rpb24oYSxiKXtuLmZuW2JdPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLm9uKGIsYSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1uLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bi5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8bih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MH0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgd2M9LyUyMC9nLHhjPS9cXFtcXF0kLyx5Yz0vXFxyP1xcbi9nLHpjPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxBYz0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gQmMoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8eGMudGVzdChhKT9kKGEsZSk6QmMoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1uLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilCYyhhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj9cIlwiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQmMoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbihcIiZcIikucmVwbGFjZSh3YyxcIitcIil9LG4uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW4ucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmQWMudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXpjLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFULnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoeWMsXCJcXHJcXG5cIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh5YyxcIlxcclxcblwiKX19KS5nZXQoKX19KSxuLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChhKXt9fTt2YXIgQ2M9MCxEYz17fSxFYz17MDoyMDAsMTIyMzoyMDR9LEZjPW4uYWpheFNldHRpbmdzLnhocigpO2EuQWN0aXZlWE9iamVjdCYmbihhKS5vbihcInVubG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIERjKURjW2FdKCl9KSxrLmNvcnM9ISFGYyYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIEZjLGsuYWpheD1GYz0hIUZjLG4uYWpheFRyYW5zcG9ydChmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gay5jb3JzfHxGYyYmIWEuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEueGhyKCksZz0rK0NjO2lmKGYub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLGEueGhyRmllbGRzKWZvcihlIGluIGEueGhyRmllbGRzKWZbZV09YS54aHJGaWVsZHNbZV07YS5taW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSksYS5jcm9zc0RvbWFpbnx8Y1tcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihlIGluIGMpZi5zZXRSZXF1ZXN0SGVhZGVyKGUsY1tlXSk7Yj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtiJiYoZGVsZXRlIERjW2ddLGI9Zi5vbmxvYWQ9Zi5vbmVycm9yPW51bGwsXCJhYm9ydFwiPT09YT9mLmFib3J0KCk6XCJlcnJvclwiPT09YT9kKGYuc3RhdHVzLGYuc3RhdHVzVGV4dCk6ZChFY1tmLnN0YXR1c118fGYuc3RhdHVzLGYuc3RhdHVzVGV4dCxcInN0cmluZ1wiPT10eXBlb2YgZi5yZXNwb25zZVRleHQ/e3RleHQ6Zi5yZXNwb25zZVRleHR9OnZvaWQgMCxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxmLm9ubG9hZD1iKCksZi5vbmVycm9yPWIoXCJlcnJvclwiKSxiPURjW2ddPWIoXCJhYm9ydFwiKTt0cnl7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKX1jYXRjaChoKXtpZihiKXRocm93IGh9fSxhYm9ydDpmdW5jdGlvbigpe2ImJmIoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIil9KSxuLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj1uKFwiPHNjcmlwdD5cIikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oXCJsb2FkIGVycm9yXCIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZlKFwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxsLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEdjPVtdLEhjPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87bi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9R2MucG9wKCl8fG4uZXhwYW5kbytcIl9cIitjYysrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihIYy50ZXN0KGIudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdGEmJiEoYi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmSGMudGVzdChiLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShIYyxcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShkYy50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssR2MucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGw7dmFyIGQ9di5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW4uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbihlKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgSWM9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJkljKXJldHVybiBJYy5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZihcIiBcIik7cmV0dXJuIGg+PTAmJihkPW4udHJpbShhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksbi5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKFwiPGRpdj5cIikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSmM9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gS2MoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsXCJwb3NpdGlvblwiKSxsPW4oYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLFwidG9wXCIpLGk9bi5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1LYyhmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuXCJmaXhlZFwiPT09bi5jc3MoYyxcInBvc2l0aW9uXCIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxuLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGQubGVmdCs9bi5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1kLnRvcC1uLmNzcyhjLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8SmM7d2hpbGUoYSYmIW4ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1uLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8SmN9KX19KSxuLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9XCJwYWdlWU9mZnNldFwiPT09YztuLmZuW2JdPWZ1bmN0aW9uKGUpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixlLGYpe3ZhciBnPUtjKGIpO3JldHVybiB2b2lkIDA9PT1mP2c/Z1tjXTpiW2VdOnZvaWQoZz9nLnNjcm9sbFRvKGQ/YS5wYWdlWE9mZnNldDpmLGQ/ZjphLnBhZ2VZT2Zmc2V0KTpiW2VdPWYpfSxiLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxuLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT15YihrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YihhLGIpLHZiLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIExjPWEualF1ZXJ5LE1jPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPU1jKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1MYyksbn0sdHlwZW9mIGI9PT1VJiYoYS5qUXVlcnk9YS4kPW4pLG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWpxdWVyeS5taW4ubWFwIiwiLyohIENvcHlyaWdodCAoYykgMjAxMSBCcmFuZG9uIEFhcm9uIChodHRwOi8vYnJhbmRvbmFhcm9uLm5ldClcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTElDRU5TRS50eHQpLlxuICpcbiAqIFRoYW5rcyB0bzogaHR0cDovL2Fkb21hcy5vcmcvamF2YXNjcmlwdC1tb3VzZS13aGVlbC8gZm9yIHNvbWUgcG9pbnRlcnMuXG4gKiBUaGFua3MgdG86IE1hdGhpYXMgQmFuayhodHRwOi8vd3d3Lm1hdGhpYXMtYmFuay5kZSkgZm9yIGEgc2NvcGUgYnVnIGZpeC5cbiAqIFRoYW5rcyB0bzogU2VhbXVzIExlYWh5IGZvciBhZGRpbmcgZGVsdGFYIGFuZCBkZWx0YVlcbiAqXG4gKiBWZXJzaW9uOiAzLjAuNlxuICogXG4gKiBSZXF1aXJlczogMS4yLjIrXG4gKi9cbihmdW5jdGlvbihkKXtmdW5jdGlvbiBlKGEpe3ZhciBiPWF8fHdpbmRvdy5ldmVudCxjPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGY9MCxlPTAsZz0wLGE9ZC5ldmVudC5maXgoYik7YS50eXBlPVwibW91c2V3aGVlbFwiO2Iud2hlZWxEZWx0YSYmKGY9Yi53aGVlbERlbHRhLzEyMCk7Yi5kZXRhaWwmJihmPS1iLmRldGFpbC8zKTtnPWY7Yi5heGlzIT09dm9pZCAwJiZiLmF4aXM9PT1iLkhPUklaT05UQUxfQVhJUyYmKGc9MCxlPS0xKmYpO2Iud2hlZWxEZWx0YVkhPT12b2lkIDAmJihnPWIud2hlZWxEZWx0YVkvMTIwKTtiLndoZWVsRGVsdGFYIT09dm9pZCAwJiYoZT0tMSpiLndoZWVsRGVsdGFYLzEyMCk7Yy51bnNoaWZ0KGEsZixlLGcpO3JldHVybihkLmV2ZW50LmRpc3BhdGNofHxkLmV2ZW50LmhhbmRsZSkuYXBwbHkodGhpcyxjKX12YXIgYz1bXCJET01Nb3VzZVNjcm9sbFwiLFwibW91c2V3aGVlbFwiXTtpZihkLmV2ZW50LmZpeEhvb2tzKWZvcih2YXIgaD1jLmxlbmd0aDtoOylkLmV2ZW50LmZpeEhvb2tzW2NbLS1oXV09XG5kLmV2ZW50Lm1vdXNlSG9va3M7ZC5ldmVudC5zcGVjaWFsLm1vdXNld2hlZWw9e3NldHVwOmZ1bmN0aW9uKCl7aWYodGhpcy5hZGRFdmVudExpc3RlbmVyKWZvcih2YXIgYT1jLmxlbmd0aDthOyl0aGlzLmFkZEV2ZW50TGlzdGVuZXIoY1stLWFdLGUsZmFsc2UpO2Vsc2UgdGhpcy5vbm1vdXNld2hlZWw9ZX0sdGVhcmRvd246ZnVuY3Rpb24oKXtpZih0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIpZm9yKHZhciBhPWMubGVuZ3RoO2E7KXRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihjWy0tYV0sZSxmYWxzZSk7ZWxzZSB0aGlzLm9ubW91c2V3aGVlbD1udWxsfX07ZC5mbi5leHRlbmQoe21vdXNld2hlZWw6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5iaW5kKFwibW91c2V3aGVlbFwiLGEpOnRoaXMudHJpZ2dlcihcIm1vdXNld2hlZWxcIil9LHVubW91c2V3aGVlbDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy51bmJpbmQoXCJtb3VzZXdoZWVsXCIsYSl9fSl9KShqUXVlcnkpOyIsIi8qIVxuICogQm9vdHN0cmFwIHYzLjIuMCAoaHR0cDovL2dldGJvb3RzdHJhcC5jb20pXG4gKiBDb3B5cmlnaHQgMjAxMS0yMDE0IFR3aXR0ZXIsIEluYy5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKi9cbmlmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBqUXVlcnkpdGhyb3cgbmV3IEVycm9yKFwiQm9vdHN0cmFwJ3MgSmF2YVNjcmlwdCByZXF1aXJlcyBqUXVlcnlcIik7K2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoKXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYm9vdHN0cmFwXCIpLGI9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kIG90cmFuc2l0aW9uZW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn07Zm9yKHZhciBjIGluIGIpaWYodm9pZCAwIT09YS5zdHlsZVtjXSlyZXR1cm57ZW5kOmJbY119O3JldHVybiExfWEuZm4uZW11bGF0ZVRyYW5zaXRpb25FbmQ9ZnVuY3Rpb24oYil7dmFyIGM9ITEsZD10aGlzO2EodGhpcykub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtjPSEwfSk7dmFyIGU9ZnVuY3Rpb24oKXtjfHxhKGQpLnRyaWdnZXIoYS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kKX07cmV0dXJuIHNldFRpbWVvdXQoZSxiKSx0aGlzfSxhKGZ1bmN0aW9uKCl7YS5zdXBwb3J0LnRyYW5zaXRpb249YigpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiYoYS5ldmVudC5zcGVjaWFsLmJzVHJhbnNpdGlvbkVuZD17YmluZFR5cGU6YS5zdXBwb3J0LnRyYW5zaXRpb24uZW5kLGRlbGVnYXRlVHlwZTphLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsaGFuZGxlOmZ1bmN0aW9uKGIpe3JldHVybiBhKGIudGFyZ2V0KS5pcyh0aGlzKT9iLmhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp2b2lkIDB9fSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxlPWMuZGF0YShcImJzLmFsZXJ0XCIpO2V8fGMuZGF0YShcImJzLmFsZXJ0XCIsZT1uZXcgZCh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0uY2FsbChjKX0pfXZhciBjPSdbZGF0YS1kaXNtaXNzPVwiYWxlcnRcIl0nLGQ9ZnVuY3Rpb24oYil7YShiKS5vbihcImNsaWNrXCIsYyx0aGlzLmNsb3NlKX07ZC5WRVJTSU9OPVwiMy4yLjBcIixkLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbihiKXtmdW5jdGlvbiBjKCl7Zi5kZXRhY2goKS50cmlnZ2VyKFwiY2xvc2VkLmJzLmFsZXJ0XCIpLnJlbW92ZSgpfXZhciBkPWEodGhpcyksZT1kLmF0dHIoXCJkYXRhLXRhcmdldFwiKTtlfHwoZT1kLmF0dHIoXCJocmVmXCIpLGU9ZSYmZS5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKTt2YXIgZj1hKGUpO2ImJmIucHJldmVudERlZmF1bHQoKSxmLmxlbmd0aHx8KGY9ZC5oYXNDbGFzcyhcImFsZXJ0XCIpP2Q6ZC5wYXJlbnQoKSksZi50cmlnZ2VyKGI9YS5FdmVudChcImNsb3NlLmJzLmFsZXJ0XCIpKSxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwoZi5yZW1vdmVDbGFzcyhcImluXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZmLmhhc0NsYXNzKFwiZmFkZVwiKT9mLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGMpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6YygpKX07dmFyIGU9YS5mbi5hbGVydDthLmZuLmFsZXJ0PWIsYS5mbi5hbGVydC5Db25zdHJ1Y3Rvcj1kLGEuZm4uYWxlcnQubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFsZXJ0PWUsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5hbGVydC5kYXRhLWFwaVwiLGMsZC5wcm90b3R5cGUuY2xvc2UpfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuYnV0dG9uXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7ZXx8ZC5kYXRhKFwiYnMuYnV0dG9uXCIsZT1uZXcgYyh0aGlzLGYpKSxcInRvZ2dsZVwiPT1iP2UudG9nZ2xlKCk6YiYmZS5zZXRTdGF0ZShiKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy4kZWxlbWVudD1hKGIpLHRoaXMub3B0aW9ucz1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQpLHRoaXMuaXNMb2FkaW5nPSExfTtjLlZFUlNJT049XCIzLjIuMFwiLGMuREVGQVVMVFM9e2xvYWRpbmdUZXh0OlwibG9hZGluZy4uLlwifSxjLnByb3RvdHlwZS5zZXRTdGF0ZT1mdW5jdGlvbihiKXt2YXIgYz1cImRpc2FibGVkXCIsZD10aGlzLiRlbGVtZW50LGU9ZC5pcyhcImlucHV0XCIpP1widmFsXCI6XCJodG1sXCIsZj1kLmRhdGEoKTtiKz1cIlRleHRcIixudWxsPT1mLnJlc2V0VGV4dCYmZC5kYXRhKFwicmVzZXRUZXh0XCIsZFtlXSgpKSxkW2VdKG51bGw9PWZbYl0/dGhpcy5vcHRpb25zW2JdOmZbYl0pLHNldFRpbWVvdXQoYS5wcm94eShmdW5jdGlvbigpe1wibG9hZGluZ1RleHRcIj09Yj8odGhpcy5pc0xvYWRpbmc9ITAsZC5hZGRDbGFzcyhjKS5hdHRyKGMsYykpOnRoaXMuaXNMb2FkaW5nJiYodGhpcy5pc0xvYWRpbmc9ITEsZC5yZW1vdmVDbGFzcyhjKS5yZW1vdmVBdHRyKGMpKX0sdGhpcyksMCl9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbigpe3ZhciBhPSEwLGI9dGhpcy4kZWxlbWVudC5jbG9zZXN0KCdbZGF0YS10b2dnbGU9XCJidXR0b25zXCJdJyk7aWYoYi5sZW5ndGgpe3ZhciBjPXRoaXMuJGVsZW1lbnQuZmluZChcImlucHV0XCIpO1wicmFkaW9cIj09Yy5wcm9wKFwidHlwZVwiKSYmKGMucHJvcChcImNoZWNrZWRcIikmJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIik/YT0hMTpiLmZpbmQoXCIuYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpKSxhJiZjLnByb3AoXCJjaGVja2VkXCIsIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJhY3RpdmVcIikpLnRyaWdnZXIoXCJjaGFuZ2VcIil9YSYmdGhpcy4kZWxlbWVudC50b2dnbGVDbGFzcyhcImFjdGl2ZVwiKX07dmFyIGQ9YS5mbi5idXR0b247YS5mbi5idXR0b249YixhLmZuLmJ1dHRvbi5Db25zdHJ1Y3Rvcj1jLGEuZm4uYnV0dG9uLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5idXR0b249ZCx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmJ1dHRvbi5kYXRhLWFwaVwiLCdbZGF0YS10b2dnbGVePVwiYnV0dG9uXCJdJyxmdW5jdGlvbihjKXt2YXIgZD1hKGMudGFyZ2V0KTtkLmhhc0NsYXNzKFwiYnRuXCIpfHwoZD1kLmNsb3Nlc3QoXCIuYnRuXCIpKSxiLmNhbGwoZCxcInRvZ2dsZVwiKSxjLnByZXZlbnREZWZhdWx0KCl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmNhcm91c2VsXCIpLGY9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYiksZz1cInN0cmluZ1wiPT10eXBlb2YgYj9iOmYuc2xpZGU7ZXx8ZC5kYXRhKFwiYnMuY2Fyb3VzZWxcIixlPW5ldyBjKHRoaXMsZikpLFwibnVtYmVyXCI9PXR5cGVvZiBiP2UudG8oYik6Zz9lW2ddKCk6Zi5pbnRlcnZhbCYmZS5wYXVzZSgpLmN5Y2xlKCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMuJGVsZW1lbnQ9YShiKS5vbihcImtleWRvd24uYnMuY2Fyb3VzZWxcIixhLnByb3h5KHRoaXMua2V5ZG93bix0aGlzKSksdGhpcy4kaW5kaWNhdG9ycz10aGlzLiRlbGVtZW50LmZpbmQoXCIuY2Fyb3VzZWwtaW5kaWNhdG9yc1wiKSx0aGlzLm9wdGlvbnM9Yyx0aGlzLnBhdXNlZD10aGlzLnNsaWRpbmc9dGhpcy5pbnRlcnZhbD10aGlzLiRhY3RpdmU9dGhpcy4kaXRlbXM9bnVsbCxcImhvdmVyXCI9PXRoaXMub3B0aW9ucy5wYXVzZSYmdGhpcy4kZWxlbWVudC5vbihcIm1vdXNlZW50ZXIuYnMuY2Fyb3VzZWxcIixhLnByb3h5KHRoaXMucGF1c2UsdGhpcykpLm9uKFwibW91c2VsZWF2ZS5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5jeWNsZSx0aGlzKSl9O2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5ERUZBVUxUUz17aW50ZXJ2YWw6NWUzLHBhdXNlOlwiaG92ZXJcIix3cmFwOiEwfSxjLnByb3RvdHlwZS5rZXlkb3duPWZ1bmN0aW9uKGEpe3N3aXRjaChhLndoaWNoKXtjYXNlIDM3OnRoaXMucHJldigpO2JyZWFrO2Nhc2UgMzk6dGhpcy5uZXh0KCk7YnJlYWs7ZGVmYXVsdDpyZXR1cm59YS5wcmV2ZW50RGVmYXVsdCgpfSxjLnByb3RvdHlwZS5jeWNsZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSExKSx0aGlzLmludGVydmFsJiZjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCYmIXRoaXMucGF1c2VkJiYodGhpcy5pbnRlcnZhbD1zZXRJbnRlcnZhbChhLnByb3h5KHRoaXMubmV4dCx0aGlzKSx0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpKSx0aGlzfSxjLnByb3RvdHlwZS5nZXRJdGVtSW5kZXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuJGl0ZW1zPWEucGFyZW50KCkuY2hpbGRyZW4oXCIuaXRlbVwiKSx0aGlzLiRpdGVtcy5pbmRleChhfHx0aGlzLiRhY3RpdmUpfSxjLnByb3RvdHlwZS50bz1mdW5jdGlvbihiKXt2YXIgYz10aGlzLGQ9dGhpcy5nZXRJdGVtSW5kZXgodGhpcy4kYWN0aXZlPXRoaXMuJGVsZW1lbnQuZmluZChcIi5pdGVtLmFjdGl2ZVwiKSk7cmV0dXJuIGI+dGhpcy4kaXRlbXMubGVuZ3RoLTF8fDA+Yj92b2lkIDA6dGhpcy5zbGlkaW5nP3RoaXMuJGVsZW1lbnQub25lKFwic2xpZC5icy5jYXJvdXNlbFwiLGZ1bmN0aW9uKCl7Yy50byhiKX0pOmQ9PWI/dGhpcy5wYXVzZSgpLmN5Y2xlKCk6dGhpcy5zbGlkZShiPmQ/XCJuZXh0XCI6XCJwcmV2XCIsYSh0aGlzLiRpdGVtc1tiXSkpfSxjLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbihiKXtyZXR1cm4gYnx8KHRoaXMucGF1c2VkPSEwKSx0aGlzLiRlbGVtZW50LmZpbmQoXCIubmV4dCwgLnByZXZcIikubGVuZ3RoJiZhLnN1cHBvcnQudHJhbnNpdGlvbiYmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpLHRoaXMuY3ljbGUoITApKSx0aGlzLmludGVydmFsPWNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpc30sYy5wcm90b3R5cGUubmV4dD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRpbmc/dm9pZCAwOnRoaXMuc2xpZGUoXCJuZXh0XCIpfSxjLnByb3RvdHlwZS5wcmV2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcInByZXZcIil9LGMucHJvdG90eXBlLnNsaWRlPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpLGU9Y3x8ZFtiXSgpLGY9dGhpcy5pbnRlcnZhbCxnPVwibmV4dFwiPT1iP1wibGVmdFwiOlwicmlnaHRcIixoPVwibmV4dFwiPT1iP1wiZmlyc3RcIjpcImxhc3RcIixpPXRoaXM7aWYoIWUubGVuZ3RoKXtpZighdGhpcy5vcHRpb25zLndyYXApcmV0dXJuO2U9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW1cIilbaF0oKX1pZihlLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXJldHVybiB0aGlzLnNsaWRpbmc9ITE7dmFyIGo9ZVswXSxrPWEuRXZlbnQoXCJzbGlkZS5icy5jYXJvdXNlbFwiLHtyZWxhdGVkVGFyZ2V0OmosZGlyZWN0aW9uOmd9KTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoayksIWsuaXNEZWZhdWx0UHJldmVudGVkKCkpe2lmKHRoaXMuc2xpZGluZz0hMCxmJiZ0aGlzLnBhdXNlKCksdGhpcy4kaW5kaWNhdG9ycy5sZW5ndGgpe3RoaXMuJGluZGljYXRvcnMuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGw9YSh0aGlzLiRpbmRpY2F0b3JzLmNoaWxkcmVuKClbdGhpcy5nZXRJdGVtSW5kZXgoZSldKTtsJiZsLmFkZENsYXNzKFwiYWN0aXZlXCIpfXZhciBtPWEuRXZlbnQoXCJzbGlkLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246Z30pO3JldHVybiBhLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcInNsaWRlXCIpPyhlLmFkZENsYXNzKGIpLGVbMF0ub2Zmc2V0V2lkdGgsZC5hZGRDbGFzcyhnKSxlLmFkZENsYXNzKGcpLGQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtlLnJlbW92ZUNsYXNzKFtiLGddLmpvaW4oXCIgXCIpKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxkLnJlbW92ZUNsYXNzKFtcImFjdGl2ZVwiLGddLmpvaW4oXCIgXCIpKSxpLnNsaWRpbmc9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe2kuJGVsZW1lbnQudHJpZ2dlcihtKX0sMCl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxZTMqZC5jc3MoXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCIpLnNsaWNlKDAsLTEpKSk6KGQucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksZS5hZGRDbGFzcyhcImFjdGl2ZVwiKSx0aGlzLnNsaWRpbmc9ITEsdGhpcy4kZWxlbWVudC50cmlnZ2VyKG0pKSxmJiZ0aGlzLmN5Y2xlKCksdGhpc319O3ZhciBkPWEuZm4uY2Fyb3VzZWw7YS5mbi5jYXJvdXNlbD1iLGEuZm4uY2Fyb3VzZWwuQ29uc3RydWN0b3I9YyxhLmZuLmNhcm91c2VsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5jYXJvdXNlbD1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuY2Fyb3VzZWwuZGF0YS1hcGlcIixcIltkYXRhLXNsaWRlXSwgW2RhdGEtc2xpZGUtdG9dXCIsZnVuY3Rpb24oYyl7dmFyIGQsZT1hKHRoaXMpLGY9YShlLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8KGQ9ZS5hdHRyKFwiaHJlZlwiKSkmJmQucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSk7aWYoZi5oYXNDbGFzcyhcImNhcm91c2VsXCIpKXt2YXIgZz1hLmV4dGVuZCh7fSxmLmRhdGEoKSxlLmRhdGEoKSksaD1lLmF0dHIoXCJkYXRhLXNsaWRlLXRvXCIpO2gmJihnLmludGVydmFsPSExKSxiLmNhbGwoZixnKSxoJiZmLmRhdGEoXCJicy5jYXJvdXNlbFwiKS50byhoKSxjLnByZXZlbnREZWZhdWx0KCl9fSksYSh3aW5kb3cpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtcmlkZT1cImNhcm91c2VsXCJdJykuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyk7Yi5jYWxsKGMsYy5kYXRhKCkpfSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLmNvbGxhcHNlXCIpLGY9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYik7IWUmJmYudG9nZ2xlJiZcInNob3dcIj09YiYmKGI9IWIpLGV8fGQuZGF0YShcImJzLmNvbGxhcHNlXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGM9ZnVuY3Rpb24oYixkKXt0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy50cmFuc2l0aW9uaW5nPW51bGwsdGhpcy5vcHRpb25zLnBhcmVudCYmKHRoaXMuJHBhcmVudD1hKHRoaXMub3B0aW9ucy5wYXJlbnQpKSx0aGlzLm9wdGlvbnMudG9nZ2xlJiZ0aGlzLnRvZ2dsZSgpfTtjLlZFUlNJT049XCIzLjIuMFwiLGMuREVGQVVMVFM9e3RvZ2dsZTohMH0sYy5wcm90b3R5cGUuZGltZW5zaW9uPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcIndpZHRoXCIpO3JldHVybiBhP1wid2lkdGhcIjpcImhlaWdodFwifSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7aWYoIXRoaXMudHJhbnNpdGlvbmluZyYmIXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKSl7dmFyIGM9YS5FdmVudChcInNob3cuYnMuY29sbGFwc2VcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGMpLCFjLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgZD10aGlzLiRwYXJlbnQmJnRoaXMuJHBhcmVudC5maW5kKFwiPiAucGFuZWwgPiAuaW5cIik7aWYoZCYmZC5sZW5ndGgpe3ZhciBlPWQuZGF0YShcImJzLmNvbGxhcHNlXCIpO2lmKGUmJmUudHJhbnNpdGlvbmluZylyZXR1cm47Yi5jYWxsKGQsXCJoaWRlXCIpLGV8fGQuZGF0YShcImJzLmNvbGxhcHNlXCIsbnVsbCl9dmFyIGY9dGhpcy5kaW1lbnNpb24oKTt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIikuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpW2ZdKDApLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBnPWZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZSBpblwiKVtmXShcIlwiKSx0aGlzLnRyYW5zaXRpb25pbmc9MCx0aGlzLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5jb2xsYXBzZVwiKX07aWYoIWEuc3VwcG9ydC50cmFuc2l0aW9uKXJldHVybiBnLmNhbGwodGhpcyk7dmFyIGg9YS5jYW1lbENhc2UoW1wic2Nyb2xsXCIsZl0uam9pbihcIi1cIikpO3RoaXMuJGVsZW1lbnQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eShnLHRoaXMpKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgzNTApW2ZdKHRoaXMuJGVsZW1lbnRbMF1baF0pfX19LGMucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIikpe3ZhciBiPWEuRXZlbnQoXCJoaWRlLmJzLmNvbGxhcHNlXCIpO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihiKSwhYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7dmFyIGM9dGhpcy5kaW1lbnNpb24oKTt0aGlzLiRlbGVtZW50W2NdKHRoaXMuJGVsZW1lbnRbY10oKSlbMF0ub2Zmc2V0SGVpZ2h0LHRoaXMuJGVsZW1lbnQuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2VcIikucmVtb3ZlQ2xhc3MoXCJpblwiKSx0aGlzLnRyYW5zaXRpb25pbmc9MTt2YXIgZD1mdW5jdGlvbigpe3RoaXMudHJhbnNpdGlvbmluZz0wLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImhpZGRlbi5icy5jb2xsYXBzZVwiKS5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIikuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKX07cmV0dXJuIGEuc3VwcG9ydC50cmFuc2l0aW9uP3ZvaWQgdGhpcy4kZWxlbWVudFtjXSgwKS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixhLnByb3h5KGQsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDM1MCk6ZC5jYWxsKHRoaXMpfX19LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbigpe3RoaXNbdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpP1wiaGlkZVwiOlwic2hvd1wiXSgpfTt2YXIgZD1hLmZuLmNvbGxhcHNlO2EuZm4uY29sbGFwc2U9YixhLmZuLmNvbGxhcHNlLkNvbnN0cnVjdG9yPWMsYS5mbi5jb2xsYXBzZS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uY29sbGFwc2U9ZCx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmNvbGxhcHNlLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cImNvbGxhcHNlXCJdJyxmdW5jdGlvbihjKXt2YXIgZCxlPWEodGhpcyksZj1lLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8Yy5wcmV2ZW50RGVmYXVsdCgpfHwoZD1lLmF0dHIoXCJocmVmXCIpKSYmZC5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpLGc9YShmKSxoPWcuZGF0YShcImJzLmNvbGxhcHNlXCIpLGk9aD9cInRvZ2dsZVwiOmUuZGF0YSgpLGo9ZS5hdHRyKFwiZGF0YS1wYXJlbnRcIiksaz1qJiZhKGopO2gmJmgudHJhbnNpdGlvbmluZ3x8KGsmJmsuZmluZCgnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl1bZGF0YS1wYXJlbnQ9XCInK2orJ1wiXScpLm5vdChlKS5hZGRDbGFzcyhcImNvbGxhcHNlZFwiKSxlW2cuaGFzQ2xhc3MoXCJpblwiKT9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcImNvbGxhcHNlZFwiKSksYi5jYWxsKGcsaSl9KX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihiKXtiJiYzPT09Yi53aGljaHx8KGEoZSkucmVtb3ZlKCksYShmKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YyhhKHRoaXMpKSxlPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2QuaGFzQ2xhc3MoXCJvcGVuXCIpJiYoZC50cmlnZ2VyKGI9YS5FdmVudChcImhpZGUuYnMuZHJvcGRvd25cIixlKSksYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8ZC5yZW1vdmVDbGFzcyhcIm9wZW5cIikudHJpZ2dlcihcImhpZGRlbi5icy5kcm9wZG93blwiLGUpKX0pKX1mdW5jdGlvbiBjKGIpe3ZhciBjPWIuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2N8fChjPWIuYXR0cihcImhyZWZcIiksYz1jJiYvI1tBLVphLXpdLy50ZXN0KGMpJiZjLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBkPWMmJmEoYyk7cmV0dXJuIGQmJmQubGVuZ3RoP2Q6Yi5wYXJlbnQoKX1mdW5jdGlvbiBkKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5kYXRhKFwiYnMuZHJvcGRvd25cIik7ZHx8Yy5kYXRhKFwiYnMuZHJvcGRvd25cIixkPW5ldyBnKHRoaXMpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZFtiXS5jYWxsKGMpfSl9dmFyIGU9XCIuZHJvcGRvd24tYmFja2Ryb3BcIixmPSdbZGF0YS10b2dnbGU9XCJkcm9wZG93blwiXScsZz1mdW5jdGlvbihiKXthKGIpLm9uKFwiY2xpY2suYnMuZHJvcGRvd25cIix0aGlzLnRvZ2dsZSl9O2cuVkVSU0lPTj1cIjMuMi4wXCIsZy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGQpe3ZhciBlPWEodGhpcyk7aWYoIWUuaXMoXCIuZGlzYWJsZWQsIDpkaXNhYmxlZFwiKSl7dmFyIGY9YyhlKSxnPWYuaGFzQ2xhc3MoXCJvcGVuXCIpO2lmKGIoKSwhZyl7XCJvbnRvdWNoc3RhcnRcImluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCYmIWYuY2xvc2VzdChcIi5uYXZiYXItbmF2XCIpLmxlbmd0aCYmYSgnPGRpdiBjbGFzcz1cImRyb3Bkb3duLWJhY2tkcm9wXCIvPicpLmluc2VydEFmdGVyKGEodGhpcykpLm9uKFwiY2xpY2tcIixiKTt2YXIgaD17cmVsYXRlZFRhcmdldDp0aGlzfTtpZihmLnRyaWdnZXIoZD1hLkV2ZW50KFwic2hvdy5icy5kcm9wZG93blwiLGgpKSxkLmlzRGVmYXVsdFByZXZlbnRlZCgpKXJldHVybjtlLnRyaWdnZXIoXCJmb2N1c1wiKSxmLnRvZ2dsZUNsYXNzKFwib3BlblwiKS50cmlnZ2VyKFwic2hvd24uYnMuZHJvcGRvd25cIixoKX1yZXR1cm4hMX19LGcucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oYil7aWYoLygzOHw0MHwyNykvLnRlc3QoYi5rZXlDb2RlKSl7dmFyIGQ9YSh0aGlzKTtpZihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSwhZC5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgZT1jKGQpLGc9ZS5oYXNDbGFzcyhcIm9wZW5cIik7aWYoIWd8fGcmJjI3PT1iLmtleUNvZGUpcmV0dXJuIDI3PT1iLndoaWNoJiZlLmZpbmQoZikudHJpZ2dlcihcImZvY3VzXCIpLGQudHJpZ2dlcihcImNsaWNrXCIpO3ZhciBoPVwiIGxpOm5vdCguZGl2aWRlcik6dmlzaWJsZSBhXCIsaT1lLmZpbmQoJ1tyb2xlPVwibWVudVwiXScraCsnLCBbcm9sZT1cImxpc3Rib3hcIl0nK2gpO2lmKGkubGVuZ3RoKXt2YXIgaj1pLmluZGV4KGkuZmlsdGVyKFwiOmZvY3VzXCIpKTszOD09Yi5rZXlDb2RlJiZqPjAmJmotLSw0MD09Yi5rZXlDb2RlJiZqPGkubGVuZ3RoLTEmJmorKyx+anx8KGo9MCksaS5lcShqKS50cmlnZ2VyKFwiZm9jdXNcIil9fX19O3ZhciBoPWEuZm4uZHJvcGRvd247YS5mbi5kcm9wZG93bj1kLGEuZm4uZHJvcGRvd24uQ29uc3RydWN0b3I9ZyxhLmZuLmRyb3Bkb3duLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5kcm9wZG93bj1oLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixiKS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsXCIuZHJvcGRvd24gZm9ybVwiLGZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uKCl9KS5vbihcImNsaWNrLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsZixnLnByb3RvdHlwZS50b2dnbGUpLm9uKFwia2V5ZG93bi5icy5kcm9wZG93bi5kYXRhLWFwaVwiLGYrJywgW3JvbGU9XCJtZW51XCJdLCBbcm9sZT1cImxpc3Rib3hcIl0nLGcucHJvdG90eXBlLmtleWRvd24pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIsZCl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBlPWEodGhpcyksZj1lLmRhdGEoXCJicy5tb2RhbFwiKSxnPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZS5kYXRhKCksXCJvYmplY3RcIj09dHlwZW9mIGImJmIpO2Z8fGUuZGF0YShcImJzLm1vZGFsXCIsZj1uZXcgYyh0aGlzLGcpKSxcInN0cmluZ1wiPT10eXBlb2YgYj9mW2JdKGQpOmcuc2hvdyYmZi5zaG93KGQpfSl9dmFyIGM9ZnVuY3Rpb24oYixjKXt0aGlzLm9wdGlvbnM9Yyx0aGlzLiRib2R5PWEoZG9jdW1lbnQuYm9keSksdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuJGJhY2tkcm9wPXRoaXMuaXNTaG93bj1udWxsLHRoaXMuc2Nyb2xsYmFyV2lkdGg9MCx0aGlzLm9wdGlvbnMucmVtb3RlJiZ0aGlzLiRlbGVtZW50LmZpbmQoXCIubW9kYWwtY29udGVudFwiKS5sb2FkKHRoaXMub3B0aW9ucy5yZW1vdGUsYS5wcm94eShmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQudHJpZ2dlcihcImxvYWRlZC5icy5tb2RhbFwiKX0sdGhpcykpfTtjLlZFUlNJT049XCIzLjIuMFwiLGMuREVGQVVMVFM9e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwLHNob3c6ITB9LGMucHJvdG90eXBlLnRvZ2dsZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pc1Nob3duP3RoaXMuaGlkZSgpOnRoaXMuc2hvdyhhKX0sYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbihiKXt2YXIgYz10aGlzLGQ9YS5FdmVudChcInNob3cuYnMubW9kYWxcIix7cmVsYXRlZFRhcmdldDpifSk7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGQpLHRoaXMuaXNTaG93bnx8ZC5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8KHRoaXMuaXNTaG93bj0hMCx0aGlzLmNoZWNrU2Nyb2xsYmFyKCksdGhpcy4kYm9keS5hZGRDbGFzcyhcIm1vZGFsLW9wZW5cIiksdGhpcy5zZXRTY3JvbGxiYXIoKSx0aGlzLmVzY2FwZSgpLHRoaXMuJGVsZW1lbnQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsJ1tkYXRhLWRpc21pc3M9XCJtb2RhbFwiXScsYS5wcm94eSh0aGlzLmhpZGUsdGhpcykpLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXt2YXIgZD1hLnN1cHBvcnQudHJhbnNpdGlvbiYmYy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik7Yy4kZWxlbWVudC5wYXJlbnQoKS5sZW5ndGh8fGMuJGVsZW1lbnQuYXBwZW5kVG8oYy4kYm9keSksYy4kZWxlbWVudC5zaG93KCkuc2Nyb2xsVG9wKDApLGQmJmMuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGgsYy4kZWxlbWVudC5hZGRDbGFzcyhcImluXCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLCExKSxjLmVuZm9yY2VGb2N1cygpO3ZhciBlPWEuRXZlbnQoXCJzaG93bi5icy5tb2RhbFwiLHtyZWxhdGVkVGFyZ2V0OmJ9KTtkP2MuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1kaWFsb2dcIikub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZnVuY3Rpb24oKXtjLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKS50cmlnZ2VyKGUpfSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMzAwKTpjLiRlbGVtZW50LnRyaWdnZXIoXCJmb2N1c1wiKS50cmlnZ2VyKGUpfSkpfSxjLnByb3RvdHlwZS5oaWRlPWZ1bmN0aW9uKGIpe2ImJmIucHJldmVudERlZmF1bHQoKSxiPWEuRXZlbnQoXCJoaWRlLmJzLm1vZGFsXCIpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihiKSx0aGlzLmlzU2hvd24mJiFiLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYodGhpcy5pc1Nob3duPSExLHRoaXMuJGJvZHkucmVtb3ZlQ2xhc3MoXCJtb2RhbC1vcGVuXCIpLHRoaXMucmVzZXRTY3JvbGxiYXIoKSx0aGlzLmVzY2FwZSgpLGEoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIiksdGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhcImluXCIpLmF0dHIoXCJhcmlhLWhpZGRlblwiLCEwKS5vZmYoXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT90aGlzLiRlbGVtZW50Lm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGEucHJveHkodGhpcy5oaWRlTW9kYWwsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDMwMCk6dGhpcy5oaWRlTW9kYWwoKSl9LGMucHJvdG90eXBlLmVuZm9yY2VGb2N1cz1mdW5jdGlvbigpe2EoZG9jdW1lbnQpLm9mZihcImZvY3VzaW4uYnMubW9kYWxcIikub24oXCJmb2N1c2luLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXt0aGlzLiRlbGVtZW50WzBdPT09YS50YXJnZXR8fHRoaXMuJGVsZW1lbnQuaGFzKGEudGFyZ2V0KS5sZW5ndGh8fHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpfSx0aGlzKSl9LGMucHJvdG90eXBlLmVzY2FwZT1mdW5jdGlvbigpe3RoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmtleWJvYXJkP3RoaXMuJGVsZW1lbnQub24oXCJrZXl1cC5kaXNtaXNzLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXsyNz09YS53aGljaCYmdGhpcy5oaWRlKCl9LHRoaXMpKTp0aGlzLmlzU2hvd258fHRoaXMuJGVsZW1lbnQub2ZmKFwia2V5dXAuZGlzbWlzcy5icy5tb2RhbFwiKX0sYy5wcm90b3R5cGUuaGlkZU1vZGFsPWZ1bmN0aW9uKCl7dmFyIGE9dGhpczt0aGlzLiRlbGVtZW50LmhpZGUoKSx0aGlzLmJhY2tkcm9wKGZ1bmN0aW9uKCl7YS4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLm1vZGFsXCIpfSl9LGMucHJvdG90eXBlLnJlbW92ZUJhY2tkcm9wPWZ1bmN0aW9uKCl7dGhpcy4kYmFja2Ryb3AmJnRoaXMuJGJhY2tkcm9wLnJlbW92ZSgpLHRoaXMuJGJhY2tkcm9wPW51bGx9LGMucHJvdG90eXBlLmJhY2tkcm9wPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsZD10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKT9cImZhZGVcIjpcIlwiO2lmKHRoaXMuaXNTaG93biYmdGhpcy5vcHRpb25zLmJhY2tkcm9wKXt2YXIgZT1hLnN1cHBvcnQudHJhbnNpdGlvbiYmZDtpZih0aGlzLiRiYWNrZHJvcD1hKCc8ZGl2IGNsYXNzPVwibW9kYWwtYmFja2Ryb3AgJytkKydcIiAvPicpLmFwcGVuZFRvKHRoaXMuJGJvZHkpLHRoaXMuJGVsZW1lbnQub24oXCJjbGljay5kaXNtaXNzLmJzLm1vZGFsXCIsYS5wcm94eShmdW5jdGlvbihhKXthLnRhcmdldD09PWEuY3VycmVudFRhcmdldCYmKFwic3RhdGljXCI9PXRoaXMub3B0aW9ucy5iYWNrZHJvcD90aGlzLiRlbGVtZW50WzBdLmZvY3VzLmNhbGwodGhpcy4kZWxlbWVudFswXSk6dGhpcy5oaWRlLmNhbGwodGhpcykpfSx0aGlzKSksZSYmdGhpcy4kYmFja2Ryb3BbMF0ub2Zmc2V0V2lkdGgsdGhpcy4kYmFja2Ryb3AuYWRkQ2xhc3MoXCJpblwiKSwhYilyZXR1cm47ZT90aGlzLiRiYWNrZHJvcC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixiKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApOmIoKX1lbHNlIGlmKCF0aGlzLmlzU2hvd24mJnRoaXMuJGJhY2tkcm9wKXt0aGlzLiRiYWNrZHJvcC5yZW1vdmVDbGFzcyhcImluXCIpO3ZhciBmPWZ1bmN0aW9uKCl7Yy5yZW1vdmVCYWNrZHJvcCgpLGImJmIoKX07YS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP3RoaXMuJGJhY2tkcm9wLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGYpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6ZigpfWVsc2UgYiYmYigpfSxjLnByb3RvdHlwZS5jaGVja1Njcm9sbGJhcj1mdW5jdGlvbigpe2RvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg+PXdpbmRvdy5pbm5lcldpZHRofHwodGhpcy5zY3JvbGxiYXJXaWR0aD10aGlzLnNjcm9sbGJhcldpZHRofHx0aGlzLm1lYXN1cmVTY3JvbGxiYXIoKSl9LGMucHJvdG90eXBlLnNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPXBhcnNlSW50KHRoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiKXx8MCwxMCk7dGhpcy5zY3JvbGxiYXJXaWR0aCYmdGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIsYSt0aGlzLnNjcm9sbGJhcldpZHRoKX0sYy5wcm90b3R5cGUucmVzZXRTY3JvbGxiYXI9ZnVuY3Rpb24oKXt0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIixcIlwiKX0sYy5wcm90b3R5cGUubWVhc3VyZVNjcm9sbGJhcj1mdW5jdGlvbigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5jbGFzc05hbWU9XCJtb2RhbC1zY3JvbGxiYXItbWVhc3VyZVwiLHRoaXMuJGJvZHkuYXBwZW5kKGEpO3ZhciBiPWEub2Zmc2V0V2lkdGgtYS5jbGllbnRXaWR0aDtyZXR1cm4gdGhpcy4kYm9keVswXS5yZW1vdmVDaGlsZChhKSxifTt2YXIgZD1hLmZuLm1vZGFsO2EuZm4ubW9kYWw9YixhLmZuLm1vZGFsLkNvbnN0cnVjdG9yPWMsYS5mbi5tb2RhbC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4ubW9kYWw9ZCx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLm1vZGFsLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxmdW5jdGlvbihjKXt2YXIgZD1hKHRoaXMpLGU9ZC5hdHRyKFwiaHJlZlwiKSxmPWEoZC5hdHRyKFwiZGF0YS10YXJnZXRcIil8fGUmJmUucmVwbGFjZSgvLiooPz0jW15cXHNdKyQpLyxcIlwiKSksZz1mLmRhdGEoXCJicy5tb2RhbFwiKT9cInRvZ2dsZVwiOmEuZXh0ZW5kKHtyZW1vdGU6IS8jLy50ZXN0KGUpJiZlfSxmLmRhdGEoKSxkLmRhdGEoKSk7ZC5pcyhcImFcIikmJmMucHJldmVudERlZmF1bHQoKSxmLm9uZShcInNob3cuYnMubW9kYWxcIixmdW5jdGlvbihhKXthLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxmLm9uZShcImhpZGRlbi5icy5tb2RhbFwiLGZ1bmN0aW9uKCl7ZC5pcyhcIjp2aXNpYmxlXCIpJiZkLnRyaWdnZXIoXCJmb2N1c1wiKX0pfSksYi5jYWxsKGYsZyx0aGlzKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMudG9vbHRpcFwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiOyhlfHxcImRlc3Ryb3lcIiE9YikmJihlfHxkLmRhdGEoXCJicy50b29sdGlwXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpKX0pfXZhciBjPWZ1bmN0aW9uKGEsYil7dGhpcy50eXBlPXRoaXMub3B0aW9ucz10aGlzLmVuYWJsZWQ9dGhpcy50aW1lb3V0PXRoaXMuaG92ZXJTdGF0ZT10aGlzLiRlbGVtZW50PW51bGwsdGhpcy5pbml0KFwidG9vbHRpcFwiLGEsYil9O2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5ERUZBVUxUUz17YW5pbWF0aW9uOiEwLHBsYWNlbWVudDpcInRvcFwiLHNlbGVjdG9yOiExLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwidG9vbHRpcFwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiPjwvZGl2PjwvZGl2PicsdHJpZ2dlcjpcImhvdmVyIGZvY3VzXCIsdGl0bGU6XCJcIixkZWxheTowLGh0bWw6ITEsY29udGFpbmVyOiExLHZpZXdwb3J0OntzZWxlY3RvcjpcImJvZHlcIixwYWRkaW5nOjB9fSxjLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKGIsYyxkKXt0aGlzLmVuYWJsZWQ9ITAsdGhpcy50eXBlPWIsdGhpcy4kZWxlbWVudD1hKGMpLHRoaXMub3B0aW9ucz10aGlzLmdldE9wdGlvbnMoZCksdGhpcy4kdmlld3BvcnQ9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZhKHRoaXMub3B0aW9ucy52aWV3cG9ydC5zZWxlY3Rvcnx8dGhpcy5vcHRpb25zLnZpZXdwb3J0KTtmb3IodmFyIGU9dGhpcy5vcHRpb25zLnRyaWdnZXIuc3BsaXQoXCIgXCIpLGY9ZS5sZW5ndGg7Zi0tOyl7dmFyIGc9ZVtmXTtpZihcImNsaWNrXCI9PWcpdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLnRvZ2dsZSx0aGlzKSk7ZWxzZSBpZihcIm1hbnVhbFwiIT1nKXt2YXIgaD1cImhvdmVyXCI9PWc/XCJtb3VzZWVudGVyXCI6XCJmb2N1c2luXCIsaT1cImhvdmVyXCI9PWc/XCJtb3VzZWxlYXZlXCI6XCJmb2N1c291dFwiO3RoaXMuJGVsZW1lbnQub24oaCtcIi5cIit0aGlzLnR5cGUsdGhpcy5vcHRpb25zLnNlbGVjdG9yLGEucHJveHkodGhpcy5lbnRlcix0aGlzKSksdGhpcy4kZWxlbWVudC5vbihpK1wiLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmxlYXZlLHRoaXMpKX19dGhpcy5vcHRpb25zLnNlbGVjdG9yP3RoaXMuX29wdGlvbnM9YS5leHRlbmQoe30sdGhpcy5vcHRpb25zLHt0cmlnZ2VyOlwibWFudWFsXCIsc2VsZWN0b3I6XCJcIn0pOnRoaXMuZml4VGl0bGUoKX0sYy5wcm90b3R5cGUuZ2V0RGVmYXVsdHM9ZnVuY3Rpb24oKXtyZXR1cm4gYy5ERUZBVUxUU30sYy5wcm90b3R5cGUuZ2V0T3B0aW9ucz1mdW5jdGlvbihiKXtyZXR1cm4gYj1hLmV4dGVuZCh7fSx0aGlzLmdldERlZmF1bHRzKCksdGhpcy4kZWxlbWVudC5kYXRhKCksYiksYi5kZWxheSYmXCJudW1iZXJcIj09dHlwZW9mIGIuZGVsYXkmJihiLmRlbGF5PXtzaG93OmIuZGVsYXksaGlkZTpiLmRlbGF5fSksYn0sYy5wcm90b3R5cGUuZ2V0RGVsZWdhdGVPcHRpb25zPWZ1bmN0aW9uKCl7dmFyIGI9e30sYz10aGlzLmdldERlZmF1bHRzKCk7cmV0dXJuIHRoaXMuX29wdGlvbnMmJmEuZWFjaCh0aGlzLl9vcHRpb25zLGZ1bmN0aW9uKGEsZCl7Y1thXSE9ZCYmKGJbYV09ZCl9KSxifSxjLnByb3RvdHlwZS5lbnRlcj1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSxjbGVhclRpbWVvdXQoYy50aW1lb3V0KSxjLmhvdmVyU3RhdGU9XCJpblwiLGMub3B0aW9ucy5kZWxheSYmYy5vcHRpb25zLmRlbGF5LnNob3c/dm9pZChjLnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe1wiaW5cIj09Yy5ob3ZlclN0YXRlJiZjLnNob3coKX0sYy5vcHRpb25zLmRlbGF5LnNob3cpKTpjLnNob3coKX0sYy5wcm90b3R5cGUubGVhdmU9ZnVuY3Rpb24oYil7dmFyIGM9YiBpbnN0YW5jZW9mIHRoaXMuY29uc3RydWN0b3I/YjphKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxjKSksY2xlYXJUaW1lb3V0KGMudGltZW91dCksYy5ob3ZlclN0YXRlPVwib3V0XCIsYy5vcHRpb25zLmRlbGF5JiZjLm9wdGlvbnMuZGVsYXkuaGlkZT92b2lkKGMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJvdXRcIj09Yy5ob3ZlclN0YXRlJiZjLmhpZGUoKX0sYy5vcHRpb25zLmRlbGF5LmhpZGUpKTpjLmhpZGUoKX0sYy5wcm90b3R5cGUuc2hvdz1mdW5jdGlvbigpe3ZhciBiPWEuRXZlbnQoXCJzaG93LmJzLlwiK3RoaXMudHlwZSk7aWYodGhpcy5oYXNDb250ZW50KCkmJnRoaXMuZW5hYmxlZCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpO3ZhciBjPWEuY29udGFpbnMoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LHRoaXMuJGVsZW1lbnRbMF0pO2lmKGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fCFjKXJldHVybjt2YXIgZD10aGlzLGU9dGhpcy50aXAoKSxmPXRoaXMuZ2V0VUlEKHRoaXMudHlwZSk7dGhpcy5zZXRDb250ZW50KCksZS5hdHRyKFwiaWRcIixmKSx0aGlzLiRlbGVtZW50LmF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIsZiksdGhpcy5vcHRpb25zLmFuaW1hdGlvbiYmZS5hZGRDbGFzcyhcImZhZGVcIik7dmFyIGc9XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLnBsYWNlbWVudD90aGlzLm9wdGlvbnMucGxhY2VtZW50LmNhbGwodGhpcyxlWzBdLHRoaXMuJGVsZW1lbnRbMF0pOnRoaXMub3B0aW9ucy5wbGFjZW1lbnQsaD0vXFxzP2F1dG8/XFxzPy9pLGk9aC50ZXN0KGcpO2kmJihnPWcucmVwbGFjZShoLFwiXCIpfHxcInRvcFwiKSxlLmRldGFjaCgpLmNzcyh7dG9wOjAsbGVmdDowLGRpc3BsYXk6XCJibG9ja1wifSkuYWRkQ2xhc3MoZykuZGF0YShcImJzLlwiK3RoaXMudHlwZSx0aGlzKSx0aGlzLm9wdGlvbnMuY29udGFpbmVyP2UuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik6ZS5pbnNlcnRBZnRlcih0aGlzLiRlbGVtZW50KTt2YXIgaj10aGlzLmdldFBvc2l0aW9uKCksaz1lWzBdLm9mZnNldFdpZHRoLGw9ZVswXS5vZmZzZXRIZWlnaHQ7aWYoaSl7dmFyIG09ZyxuPXRoaXMuJGVsZW1lbnQucGFyZW50KCksbz10aGlzLmdldFBvc2l0aW9uKG4pO2c9XCJib3R0b21cIj09ZyYmai50b3Arai5oZWlnaHQrbC1vLnNjcm9sbD5vLmhlaWdodD9cInRvcFwiOlwidG9wXCI9PWcmJmoudG9wLW8uc2Nyb2xsLWw8MD9cImJvdHRvbVwiOlwicmlnaHRcIj09ZyYmai5yaWdodCtrPm8ud2lkdGg/XCJsZWZ0XCI6XCJsZWZ0XCI9PWcmJmoubGVmdC1rPG8ubGVmdD9cInJpZ2h0XCI6ZyxlLnJlbW92ZUNsYXNzKG0pLmFkZENsYXNzKGcpfXZhciBwPXRoaXMuZ2V0Q2FsY3VsYXRlZE9mZnNldChnLGosayxsKTt0aGlzLmFwcGx5UGxhY2VtZW50KHAsZyk7dmFyIHE9ZnVuY3Rpb24oKXtkLiRlbGVtZW50LnRyaWdnZXIoXCJzaG93bi5icy5cIitkLnR5cGUpLGQuaG92ZXJTdGF0ZT1udWxsfTthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kdGlwLmhhc0NsYXNzKFwiZmFkZVwiKT9lLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLHEpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6cSgpfX0sYy5wcm90b3R5cGUuYXBwbHlQbGFjZW1lbnQ9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLnRpcCgpLGU9ZFswXS5vZmZzZXRXaWR0aCxmPWRbMF0ub2Zmc2V0SGVpZ2h0LGc9cGFyc2VJbnQoZC5jc3MoXCJtYXJnaW4tdG9wXCIpLDEwKSxoPXBhcnNlSW50KGQuY3NzKFwibWFyZ2luLWxlZnRcIiksMTApO2lzTmFOKGcpJiYoZz0wKSxpc05hTihoKSYmKGg9MCksYi50b3A9Yi50b3ArZyxiLmxlZnQ9Yi5sZWZ0K2gsYS5vZmZzZXQuc2V0T2Zmc2V0KGRbMF0sYS5leHRlbmQoe3VzaW5nOmZ1bmN0aW9uKGEpe2QuY3NzKHt0b3A6TWF0aC5yb3VuZChhLnRvcCksbGVmdDpNYXRoLnJvdW5kKGEubGVmdCl9KX19LGIpLDApLGQuYWRkQ2xhc3MoXCJpblwiKTt2YXIgaT1kWzBdLm9mZnNldFdpZHRoLGo9ZFswXS5vZmZzZXRIZWlnaHQ7XCJ0b3BcIj09YyYmaiE9ZiYmKGIudG9wPWIudG9wK2Ytaik7dmFyIGs9dGhpcy5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGEoYyxiLGksaik7ay5sZWZ0P2IubGVmdCs9ay5sZWZ0OmIudG9wKz1rLnRvcDt2YXIgbD1rLmxlZnQ/MiprLmxlZnQtZStpOjIqay50b3AtZitqLG09ay5sZWZ0P1wibGVmdFwiOlwidG9wXCIsbj1rLmxlZnQ/XCJvZmZzZXRXaWR0aFwiOlwib2Zmc2V0SGVpZ2h0XCI7ZC5vZmZzZXQoYiksdGhpcy5yZXBsYWNlQXJyb3cobCxkWzBdW25dLG0pfSxjLnByb3RvdHlwZS5yZXBsYWNlQXJyb3c9ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYXJyb3coKS5jc3MoYyxhPzUwKigxLWEvYikrXCIlXCI6XCJcIil9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpO2EuZmluZChcIi50b29sdGlwLWlubmVyXCIpW3RoaXMub3B0aW9ucy5odG1sP1wiaHRtbFwiOlwidGV4dFwiXShiKSxhLnJlbW92ZUNsYXNzKFwiZmFkZSBpbiB0b3AgYm90dG9tIGxlZnQgcmlnaHRcIil9LGMucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKCl7XCJpblwiIT1jLmhvdmVyU3RhdGUmJmQuZGV0YWNoKCksYy4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLlwiK2MudHlwZSl9dmFyIGM9dGhpcyxkPXRoaXMudGlwKCksZT1hLkV2ZW50KFwiaGlkZS5icy5cIit0aGlzLnR5cGUpO3JldHVybiB0aGlzLiRlbGVtZW50LnJlbW92ZUF0dHIoXCJhcmlhLWRlc2NyaWJlZGJ5XCIpLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihlKSxlLmlzRGVmYXVsdFByZXZlbnRlZCgpP3ZvaWQgMDooZC5yZW1vdmVDbGFzcyhcImluXCIpLGEuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiR0aXAuaGFzQ2xhc3MoXCJmYWRlXCIpP2Qub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYikuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpiKCksdGhpcy5ob3ZlclN0YXRlPW51bGwsdGhpcyl9LGMucHJvdG90eXBlLmZpeFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudDsoYS5hdHRyKFwidGl0bGVcIil8fFwic3RyaW5nXCIhPXR5cGVvZiBhLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIpKSYmYS5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiLGEuYXR0cihcInRpdGxlXCIpfHxcIlwiKS5hdHRyKFwidGl0bGVcIixcIlwiKX0sYy5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpdGxlKCl9LGMucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKGIpe2I9Ynx8dGhpcy4kZWxlbWVudDt2YXIgYz1iWzBdLGQ9XCJCT0RZXCI9PWMudGFnTmFtZTtyZXR1cm4gYS5leHRlbmQoe30sXCJmdW5jdGlvblwiPT10eXBlb2YgYy5nZXRCb3VuZGluZ0NsaWVudFJlY3Q/Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTpudWxsLHtzY3JvbGw6ZD9kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxkb2N1bWVudC5ib2R5LnNjcm9sbFRvcDpiLnNjcm9sbFRvcCgpLHdpZHRoOmQ/YSh3aW5kb3cpLndpZHRoKCk6Yi5vdXRlcldpZHRoKCksaGVpZ2h0OmQ/YSh3aW5kb3cpLmhlaWdodCgpOmIub3V0ZXJIZWlnaHQoKX0sZD97dG9wOjAsbGVmdDowfTpiLm9mZnNldCgpKX0sYy5wcm90b3R5cGUuZ2V0Q2FsY3VsYXRlZE9mZnNldD1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5cImJvdHRvbVwiPT1hP3t0b3A6Yi50b3ArYi5oZWlnaHQsbGVmdDpiLmxlZnQrYi53aWR0aC8yLWMvMn06XCJ0b3BcIj09YT97dG9wOmIudG9wLWQsbGVmdDpiLmxlZnQrYi53aWR0aC8yLWMvMn06XCJsZWZ0XCI9PWE/e3RvcDpiLnRvcCtiLmhlaWdodC8yLWQvMixsZWZ0OmIubGVmdC1jfTp7dG9wOmIudG9wK2IuaGVpZ2h0LzItZC8yLGxlZnQ6Yi5sZWZ0K2Iud2lkdGh9fSxjLnByb3RvdHlwZS5nZXRWaWV3cG9ydEFkanVzdGVkRGVsdGE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9e3RvcDowLGxlZnQ6MH07aWYoIXRoaXMuJHZpZXdwb3J0KXJldHVybiBlO3ZhciBmPXRoaXMub3B0aW9ucy52aWV3cG9ydCYmdGhpcy5vcHRpb25zLnZpZXdwb3J0LnBhZGRpbmd8fDAsZz10aGlzLmdldFBvc2l0aW9uKHRoaXMuJHZpZXdwb3J0KTtpZigvcmlnaHR8bGVmdC8udGVzdChhKSl7dmFyIGg9Yi50b3AtZi1nLnNjcm9sbCxpPWIudG9wK2YtZy5zY3JvbGwrZDtoPGcudG9wP2UudG9wPWcudG9wLWg6aT5nLnRvcCtnLmhlaWdodCYmKGUudG9wPWcudG9wK2cuaGVpZ2h0LWkpfWVsc2V7dmFyIGo9Yi5sZWZ0LWYsaz1iLmxlZnQrZitjO2o8Zy5sZWZ0P2UubGVmdD1nLmxlZnQtajprPmcud2lkdGgmJihlLmxlZnQ9Zy5sZWZ0K2cud2lkdGgtayl9cmV0dXJuIGV9LGMucHJvdG90eXBlLmdldFRpdGxlPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLiRlbGVtZW50LGM9dGhpcy5vcHRpb25zO3JldHVybiBhPWIuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIil8fChcImZ1bmN0aW9uXCI9PXR5cGVvZiBjLnRpdGxlP2MudGl0bGUuY2FsbChiWzBdKTpjLnRpdGxlKX0sYy5wcm90b3R5cGUuZ2V0VUlEPWZ1bmN0aW9uKGEpe2RvIGErPX5+KDFlNipNYXRoLnJhbmRvbSgpKTt3aGlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKSk7cmV0dXJuIGF9LGMucHJvdG90eXBlLnRpcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0aXA9dGhpcy4kdGlwfHxhKHRoaXMub3B0aW9ucy50ZW1wbGF0ZSl9LGMucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoXCIudG9vbHRpcC1hcnJvd1wiKX0sYy5wcm90b3R5cGUudmFsaWRhdGU9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50WzBdLnBhcmVudE5vZGV8fCh0aGlzLmhpZGUoKSx0aGlzLiRlbGVtZW50PW51bGwsdGhpcy5vcHRpb25zPW51bGwpfSxjLnByb3RvdHlwZS5lbmFibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITB9LGMucHJvdG90eXBlLmRpc2FibGU9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9ITF9LGMucHJvdG90eXBlLnRvZ2dsZUVuYWJsZWQ9ZnVuY3Rpb24oKXt0aGlzLmVuYWJsZWQ9IXRoaXMuZW5hYmxlZH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXM7YiYmKGM9YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUpLGN8fChjPW5ldyB0aGlzLmNvbnN0cnVjdG9yKGIuY3VycmVudFRhcmdldCx0aGlzLmdldERlbGVnYXRlT3B0aW9ucygpKSxhKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSxjKSkpLGMudGlwKCkuaGFzQ2xhc3MoXCJpblwiKT9jLmxlYXZlKGMpOmMuZW50ZXIoYyl9LGMucHJvdG90eXBlLmRlc3Ryb3k9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KSx0aGlzLmhpZGUoKS4kZWxlbWVudC5vZmYoXCIuXCIrdGhpcy50eXBlKS5yZW1vdmVEYXRhKFwiYnMuXCIrdGhpcy50eXBlKX07dmFyIGQ9YS5mbi50b29sdGlwO2EuZm4udG9vbHRpcD1iLGEuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvcj1jLGEuZm4udG9vbHRpcC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4udG9vbHRpcD1kLHRoaXN9fShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMucG9wb3ZlclwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiOyhlfHxcImRlc3Ryb3lcIiE9YikmJihlfHxkLmRhdGEoXCJicy5wb3BvdmVyXCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpKX0pfXZhciBjPWZ1bmN0aW9uKGEsYil7dGhpcy5pbml0KFwicG9wb3ZlclwiLGEsYil9O2lmKCFhLmZuLnRvb2x0aXApdGhyb3cgbmV3IEVycm9yKFwiUG9wb3ZlciByZXF1aXJlcyB0b29sdGlwLmpzXCIpO2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5ERUZBVUxUUz1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IuREVGQVVMVFMse3BsYWNlbWVudDpcInJpZ2h0XCIsdHJpZ2dlcjpcImNsaWNrXCIsY29udGVudDpcIlwiLHRlbXBsYXRlOic8ZGl2IGNsYXNzPVwicG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCI+PGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+PGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiPjwvaDM+PGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiPjwvZGl2PjwvZGl2Pid9KSxjLnByb3RvdHlwZT1hLmV4dGVuZCh7fSxhLmZuLnRvb2x0aXAuQ29uc3RydWN0b3IucHJvdG90eXBlKSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLGMucHJvdG90eXBlLmdldERlZmF1bHRzPWZ1bmN0aW9uKCl7cmV0dXJuIGMuREVGQVVMVFN9LGMucHJvdG90eXBlLnNldENvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRpcCgpLGI9dGhpcy5nZXRUaXRsZSgpLGM9dGhpcy5nZXRDb250ZW50KCk7YS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEuZmluZChcIi5wb3BvdmVyLWNvbnRlbnRcIikuZW1wdHkoKVt0aGlzLm9wdGlvbnMuaHRtbD9cInN0cmluZ1wiPT10eXBlb2YgYz9cImh0bWxcIjpcImFwcGVuZFwiOlwidGV4dFwiXShjKSxhLnJlbW92ZUNsYXNzKFwiZmFkZSB0b3AgYm90dG9tIGxlZnQgcmlnaHQgaW5cIiksYS5maW5kKFwiLnBvcG92ZXItdGl0bGVcIikuaHRtbCgpfHxhLmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKS5oaWRlKCl9LGMucHJvdG90eXBlLmhhc0NvbnRlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRUaXRsZSgpfHx0aGlzLmdldENvbnRlbnQoKX0sYy5wcm90b3R5cGUuZ2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW1lbnQsYj10aGlzLm9wdGlvbnM7cmV0dXJuIGEuYXR0cihcImRhdGEtY29udGVudFwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGIuY29udGVudD9iLmNvbnRlbnQuY2FsbChhWzBdKTpiLmNvbnRlbnQpfSxjLnByb3RvdHlwZS5hcnJvdz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiRhcnJvdz10aGlzLiRhcnJvd3x8dGhpcy50aXAoKS5maW5kKFwiLmFycm93XCIpfSxjLnByb3RvdHlwZS50aXA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kdGlwfHwodGhpcy4kdGlwPWEodGhpcy5vcHRpb25zLnRlbXBsYXRlKSksdGhpcy4kdGlwfTt2YXIgZD1hLmZuLnBvcG92ZXI7YS5mbi5wb3BvdmVyPWIsYS5mbi5wb3BvdmVyLkNvbnN0cnVjdG9yPWMsYS5mbi5wb3BvdmVyLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5wb3BvdmVyPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYyxkKXt2YXIgZT1hLnByb3h5KHRoaXMucHJvY2Vzcyx0aGlzKTt0aGlzLiRib2R5PWEoXCJib2R5XCIpLHRoaXMuJHNjcm9sbEVsZW1lbnQ9YShhKGMpLmlzKFwiYm9keVwiKT93aW5kb3c6YyksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGIuREVGQVVMVFMsZCksdGhpcy5zZWxlY3Rvcj0odGhpcy5vcHRpb25zLnRhcmdldHx8XCJcIikrXCIgLm5hdiBsaSA+IGFcIix0aGlzLm9mZnNldHM9W10sdGhpcy50YXJnZXRzPVtdLHRoaXMuYWN0aXZlVGFyZ2V0PW51bGwsdGhpcy5zY3JvbGxIZWlnaHQ9MCx0aGlzLiRzY3JvbGxFbGVtZW50Lm9uKFwic2Nyb2xsLmJzLnNjcm9sbHNweVwiLGUpLHRoaXMucmVmcmVzaCgpLHRoaXMucHJvY2VzcygpfWZ1bmN0aW9uIGMoYyl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5zY3JvbGxzcHlcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYyYmYztlfHxkLmRhdGEoXCJicy5zY3JvbGxzcHlcIixlPW5ldyBiKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBjJiZlW2NdKCl9KX1iLlZFUlNJT049XCIzLjIuMFwiLGIuREVGQVVMVFM9e29mZnNldDoxMH0sYi5wcm90b3R5cGUuZ2V0U2Nyb2xsSGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHNjcm9sbEVsZW1lbnRbMF0uc2Nyb2xsSGVpZ2h0fHxNYXRoLm1heCh0aGlzLiRib2R5WzBdLnNjcm9sbEhlaWdodCxkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsSGVpZ2h0KX0sYi5wcm90b3R5cGUucmVmcmVzaD1mdW5jdGlvbigpe3ZhciBiPVwib2Zmc2V0XCIsYz0wO2EuaXNXaW5kb3codGhpcy4kc2Nyb2xsRWxlbWVudFswXSl8fChiPVwicG9zaXRpb25cIixjPXRoaXMuJHNjcm9sbEVsZW1lbnQuc2Nyb2xsVG9wKCkpLHRoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5zY3JvbGxIZWlnaHQ9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKTt2YXIgZD10aGlzO3RoaXMuJGJvZHkuZmluZCh0aGlzLnNlbGVjdG9yKS5tYXAoZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwidGFyZ2V0XCIpfHxkLmF0dHIoXCJocmVmXCIpLGY9L14jLi8udGVzdChlKSYmYShlKTtyZXR1cm4gZiYmZi5sZW5ndGgmJmYuaXMoXCI6dmlzaWJsZVwiKSYmW1tmW2JdKCkudG9wK2MsZV1dfHxudWxsfSkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhWzBdLWJbMF19KS5lYWNoKGZ1bmN0aW9uKCl7ZC5vZmZzZXRzLnB1c2godGhpc1swXSksZC50YXJnZXRzLnB1c2godGhpc1sxXSl9KX0sYi5wcm90b3R5cGUucHJvY2Vzcz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSt0aGlzLm9wdGlvbnMub2Zmc2V0LGM9dGhpcy5nZXRTY3JvbGxIZWlnaHQoKSxkPXRoaXMub3B0aW9ucy5vZmZzZXQrYy10aGlzLiRzY3JvbGxFbGVtZW50LmhlaWdodCgpLGU9dGhpcy5vZmZzZXRzLGY9dGhpcy50YXJnZXRzLGc9dGhpcy5hY3RpdmVUYXJnZXQ7aWYodGhpcy5zY3JvbGxIZWlnaHQhPWMmJnRoaXMucmVmcmVzaCgpLGI+PWQpcmV0dXJuIGchPShhPWZbZi5sZW5ndGgtMV0pJiZ0aGlzLmFjdGl2YXRlKGEpO2lmKGcmJmI8PWVbMF0pcmV0dXJuIGchPShhPWZbMF0pJiZ0aGlzLmFjdGl2YXRlKGEpO2ZvcihhPWUubGVuZ3RoO2EtLTspZyE9ZlthXSYmYj49ZVthXSYmKCFlW2ErMV18fGI8PWVbYSsxXSkmJnRoaXMuYWN0aXZhdGUoZlthXSl9LGIucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGIpe3RoaXMuYWN0aXZlVGFyZ2V0PWIsYSh0aGlzLnNlbGVjdG9yKS5wYXJlbnRzVW50aWwodGhpcy5vcHRpb25zLnRhcmdldCxcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dmFyIGM9dGhpcy5zZWxlY3RvcisnW2RhdGEtdGFyZ2V0PVwiJytiKydcIl0sJyt0aGlzLnNlbGVjdG9yKydbaHJlZj1cIicrYisnXCJdJyxkPWEoYykucGFyZW50cyhcImxpXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO2QucGFyZW50KFwiLmRyb3Bkb3duLW1lbnVcIikubGVuZ3RoJiYoZD1kLmNsb3Nlc3QoXCJsaS5kcm9wZG93blwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSksZC50cmlnZ2VyKFwiYWN0aXZhdGUuYnMuc2Nyb2xsc3B5XCIpfTt2YXIgZD1hLmZuLnNjcm9sbHNweTthLmZuLnNjcm9sbHNweT1jLGEuZm4uc2Nyb2xsc3B5LkNvbnN0cnVjdG9yPWIsYS5mbi5zY3JvbGxzcHkubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnNjcm9sbHNweT1kLHRoaXN9LGEod2luZG93KS5vbihcImxvYWQuYnMuc2Nyb2xsc3B5LmRhdGEtYXBpXCIsZnVuY3Rpb24oKXthKCdbZGF0YS1zcHk9XCJzY3JvbGxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGI9YSh0aGlzKTtjLmNhbGwoYixiLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMudGFiXCIpO2V8fGQuZGF0YShcImJzLnRhYlwiLGU9bmV3IGModGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgYz1mdW5jdGlvbihiKXt0aGlzLmVsZW1lbnQ9YShiKX07Yy5WRVJTSU9OPVwiMy4yLjBcIixjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5lbGVtZW50LGM9Yi5jbG9zZXN0KFwidWw6bm90KC5kcm9wZG93bi1tZW51KVwiKSxkPWIuZGF0YShcInRhcmdldFwiKTtpZihkfHwoZD1iLmF0dHIoXCJocmVmXCIpLGQ9ZCYmZC5yZXBsYWNlKC8uKig/PSNbXlxcc10qJCkvLFwiXCIpKSwhYi5wYXJlbnQoXCJsaVwiKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSl7dmFyIGU9Yy5maW5kKFwiLmFjdGl2ZTpsYXN0IGFcIilbMF0sZj1hLkV2ZW50KFwic2hvdy5icy50YWJcIix7cmVsYXRlZFRhcmdldDplfSk7aWYoYi50cmlnZ2VyKGYpLCFmLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgZz1hKGQpO3RoaXMuYWN0aXZhdGUoYi5jbG9zZXN0KFwibGlcIiksYyksdGhpcy5hY3RpdmF0ZShnLGcucGFyZW50KCksZnVuY3Rpb24oKXtiLnRyaWdnZXIoe3R5cGU6XCJzaG93bi5icy50YWJcIixyZWxhdGVkVGFyZ2V0OmV9KX0pfX19LGMucHJvdG90eXBlLmFjdGl2YXRlPWZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKCl7Zi5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKS5maW5kKFwiPiAuZHJvcGRvd24tbWVudSA+IC5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIiksYi5hZGRDbGFzcyhcImFjdGl2ZVwiKSxnPyhiWzBdLm9mZnNldFdpZHRoLGIuYWRkQ2xhc3MoXCJpblwiKSk6Yi5yZW1vdmVDbGFzcyhcImZhZGVcIiksYi5wYXJlbnQoXCIuZHJvcGRvd24tbWVudVwiKSYmYi5jbG9zZXN0KFwibGkuZHJvcGRvd25cIikuYWRkQ2xhc3MoXCJhY3RpdmVcIiksZCYmZCgpfXZhciBmPWMuZmluZChcIj4gLmFjdGl2ZVwiKSxnPWQmJmEuc3VwcG9ydC50cmFuc2l0aW9uJiZmLmhhc0NsYXNzKFwiZmFkZVwiKTtnP2Yub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTplKCksZi5yZW1vdmVDbGFzcyhcImluXCIpfTt2YXIgZD1hLmZuLnRhYjthLmZuLnRhYj1iLGEuZm4udGFiLkNvbnN0cnVjdG9yPWMsYS5mbi50YWIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnRhYj1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMudGFiLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZT1cInRhYlwiXSwgW2RhdGEtdG9nZ2xlPVwicGlsbFwiXScsZnVuY3Rpb24oYyl7Yy5wcmV2ZW50RGVmYXVsdCgpLGIuY2FsbChhKHRoaXMpLFwic2hvd1wiKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuYWZmaXhcIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoXCJicy5hZmZpeFwiLGU9bmV3IGModGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIsZCl7dGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy4kdGFyZ2V0PWEodGhpcy5vcHRpb25zLnRhcmdldCkub24oXCJzY3JvbGwuYnMuYWZmaXguZGF0YS1hcGlcIixhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSkub24oXCJjbGljay5icy5hZmZpeC5kYXRhLWFwaVwiLGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uV2l0aEV2ZW50TG9vcCx0aGlzKSksdGhpcy4kZWxlbWVudD1hKGIpLHRoaXMuYWZmaXhlZD10aGlzLnVucGluPXRoaXMucGlubmVkT2Zmc2V0PW51bGwsdGhpcy5jaGVja1Bvc2l0aW9uKCl9O2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5SRVNFVD1cImFmZml4IGFmZml4LXRvcCBhZmZpeC1ib3R0b21cIixjLkRFRkFVTFRTPXtvZmZzZXQ6MCx0YXJnZXQ6d2luZG93fSxjLnByb3RvdHlwZS5nZXRQaW5uZWRPZmZzZXQ9ZnVuY3Rpb24oKXtpZih0aGlzLnBpbm5lZE9mZnNldClyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ7dGhpcy4kZWxlbWVudC5yZW1vdmVDbGFzcyhjLlJFU0VUKS5hZGRDbGFzcyhcImFmZml4XCIpO3ZhciBhPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxiPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCk7cmV0dXJuIHRoaXMucGlubmVkT2Zmc2V0PWIudG9wLWF9LGMucHJvdG90eXBlLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wPWZ1bmN0aW9uKCl7c2V0VGltZW91dChhLnByb3h5KHRoaXMuY2hlY2tQb3NpdGlvbix0aGlzKSwxKX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbj1mdW5jdGlvbigpe2lmKHRoaXMuJGVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSl7dmFyIGI9YShkb2N1bWVudCkuaGVpZ2h0KCksZD10aGlzLiR0YXJnZXQuc2Nyb2xsVG9wKCksZT10aGlzLiRlbGVtZW50Lm9mZnNldCgpLGY9dGhpcy5vcHRpb25zLm9mZnNldCxnPWYudG9wLGg9Zi5ib3R0b207XCJvYmplY3RcIiE9dHlwZW9mIGYmJihoPWc9ZiksXCJmdW5jdGlvblwiPT10eXBlb2YgZyYmKGc9Zi50b3AodGhpcy4kZWxlbWVudCkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIGgmJihoPWYuYm90dG9tKHRoaXMuJGVsZW1lbnQpKTt2YXIgaT1udWxsIT10aGlzLnVucGluJiZkK3RoaXMudW5waW48PWUudG9wPyExOm51bGwhPWgmJmUudG9wK3RoaXMuJGVsZW1lbnQuaGVpZ2h0KCk+PWItaD9cImJvdHRvbVwiOm51bGwhPWcmJmc+PWQ/XCJ0b3BcIjohMTtpZih0aGlzLmFmZml4ZWQhPT1pKXtudWxsIT10aGlzLnVucGluJiZ0aGlzLiRlbGVtZW50LmNzcyhcInRvcFwiLFwiXCIpO3ZhciBqPVwiYWZmaXhcIisoaT9cIi1cIitpOlwiXCIpLGs9YS5FdmVudChqK1wiLmJzLmFmZml4XCIpO3RoaXMuJGVsZW1lbnQudHJpZ2dlcihrKSxrLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwodGhpcy5hZmZpeGVkPWksdGhpcy51bnBpbj1cImJvdHRvbVwiPT1pP3RoaXMuZ2V0UGlubmVkT2Zmc2V0KCk6bnVsbCx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGMuUkVTRVQpLmFkZENsYXNzKGopLnRyaWdnZXIoYS5FdmVudChqLnJlcGxhY2UoXCJhZmZpeFwiLFwiYWZmaXhlZFwiKSkpLFwiYm90dG9tXCI9PWkmJnRoaXMuJGVsZW1lbnQub2Zmc2V0KHt0b3A6Yi10aGlzLiRlbGVtZW50LmhlaWdodCgpLWh9KSl9fX07dmFyIGQ9YS5mbi5hZmZpeDthLmZuLmFmZml4PWIsYS5mbi5hZmZpeC5Db25zdHJ1Y3Rvcj1jLGEuZm4uYWZmaXgubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmFmZml4PWQsdGhpc30sYSh3aW5kb3cpLm9uKFwibG9hZFwiLGZ1bmN0aW9uKCl7YSgnW2RhdGEtc3B5PVwiYWZmaXhcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKSxkPWMuZGF0YSgpO2Qub2Zmc2V0PWQub2Zmc2V0fHx7fSxkLm9mZnNldEJvdHRvbSYmKGQub2Zmc2V0LmJvdHRvbT1kLm9mZnNldEJvdHRvbSksZC5vZmZzZXRUb3AmJihkLm9mZnNldC50b3A9ZC5vZmZzZXRUb3ApLGIuY2FsbChjLGQpfSl9KX0oalF1ZXJ5KTsiLCIvKiEgZmFuY3lCb3ggdjIuMS41IGZhbmN5YXBwcy5jb20gfCBmYW5jeWFwcHMuY29tL2ZhbmN5Ym94LyNsaWNlbnNlICovXG4oZnVuY3Rpb24ocixHLGYsdil7dmFyIEo9ZihcImh0bWxcIiksbj1mKHIpLHA9ZihHKSxiPWYuZmFuY3lib3g9ZnVuY3Rpb24oKXtiLm9wZW4uYXBwbHkodGhpcyxhcmd1bWVudHMpfSxJPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL21zaWUvaSksQj1udWxsLHM9Ry5jcmVhdGVUb3VjaCE9PXYsdD1mdW5jdGlvbihhKXtyZXR1cm4gYSYmYS5oYXNPd25Qcm9wZXJ0eSYmYSBpbnN0YW5jZW9mIGZ9LHE9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJlwic3RyaW5nXCI9PT1mLnR5cGUoYSl9LEU9ZnVuY3Rpb24oYSl7cmV0dXJuIHEoYSkmJjA8YS5pbmRleE9mKFwiJVwiKX0sbD1mdW5jdGlvbihhLGQpe3ZhciBlPXBhcnNlSW50KGEsMTApfHwwO2QmJkUoYSkmJihlKj1iLmdldFZpZXdwb3J0KClbZF0vMTAwKTtyZXR1cm4gTWF0aC5jZWlsKGUpfSx3PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGwoYSxiKStcInB4XCJ9O2YuZXh0ZW5kKGIse3ZlcnNpb246XCIyLjEuNVwiLGRlZmF1bHRzOntwYWRkaW5nOjE1LG1hcmdpbjoyMCxcbndpZHRoOjgwMCxoZWlnaHQ6NjAwLG1pbldpZHRoOjEwMCxtaW5IZWlnaHQ6MTAwLG1heFdpZHRoOjk5OTksbWF4SGVpZ2h0Ojk5OTkscGl4ZWxSYXRpbzoxLGF1dG9TaXplOiEwLGF1dG9IZWlnaHQ6ITEsYXV0b1dpZHRoOiExLGF1dG9SZXNpemU6ITAsYXV0b0NlbnRlcjohcyxmaXRUb1ZpZXc6ITAsYXNwZWN0UmF0aW86ITEsdG9wUmF0aW86MC41LGxlZnRSYXRpbzowLjUsc2Nyb2xsaW5nOlwiYXV0b1wiLHdyYXBDU1M6XCJcIixhcnJvd3M6ITAsY2xvc2VCdG46ITAsY2xvc2VDbGljazohMSxuZXh0Q2xpY2s6ITEsbW91c2VXaGVlbDohMCxhdXRvUGxheTohMSxwbGF5U3BlZWQ6M0UzLHByZWxvYWQ6Myxtb2RhbDohMSxsb29wOiEwLGFqYXg6e2RhdGFUeXBlOlwiaHRtbFwiLGhlYWRlcnM6e1wiWC1mYW5jeUJveFwiOiEwfX0saWZyYW1lOntzY3JvbGxpbmc6XCJhdXRvXCIscHJlbG9hZDohMH0sc3dmOnt3bW9kZTpcInRyYW5zcGFyZW50XCIsYWxsb3dmdWxsc2NyZWVuOlwidHJ1ZVwiLGFsbG93c2NyaXB0YWNjZXNzOlwiYWx3YXlzXCJ9LFxua2V5czp7bmV4dDp7MTM6XCJsZWZ0XCIsMzQ6XCJ1cFwiLDM5OlwibGVmdFwiLDQwOlwidXBcIn0scHJldjp7ODpcInJpZ2h0XCIsMzM6XCJkb3duXCIsMzc6XCJyaWdodFwiLDM4OlwiZG93blwifSxjbG9zZTpbMjddLHBsYXk6WzMyXSx0b2dnbGU6WzcwXX0sZGlyZWN0aW9uOntuZXh0OlwibGVmdFwiLHByZXY6XCJyaWdodFwifSxzY3JvbGxPdXRzaWRlOiEwLGluZGV4OjAsdHlwZTpudWxsLGhyZWY6bnVsbCxjb250ZW50Om51bGwsdGl0bGU6bnVsbCx0cGw6e3dyYXA6JzxkaXYgY2xhc3M9XCJmYW5jeWJveC13cmFwXCIgdGFiSW5kZXg9XCItMVwiPjxkaXYgY2xhc3M9XCJmYW5jeWJveC1za2luXCI+PGRpdiBjbGFzcz1cImZhbmN5Ym94LW91dGVyXCI+PGRpdiBjbGFzcz1cImZhbmN5Ym94LWlubmVyXCI+PC9kaXY+PC9kaXY+PC9kaXY+PC9kaXY+JyxpbWFnZTonPGltZyBjbGFzcz1cImZhbmN5Ym94LWltYWdlXCIgc3JjPVwie2hyZWZ9XCIgYWx0PVwiXCIgLz4nLGlmcmFtZTonPGlmcmFtZSBpZD1cImZhbmN5Ym94LWZyYW1le3JuZH1cIiBuYW1lPVwiZmFuY3lib3gtZnJhbWV7cm5kfVwiIGNsYXNzPVwiZmFuY3lib3gtaWZyYW1lXCIgZnJhbWVib3JkZXI9XCIwXCIgdnNwYWNlPVwiMFwiIGhzcGFjZT1cIjBcIiB3ZWJraXRBbGxvd0Z1bGxTY3JlZW4gbW96YWxsb3dmdWxsc2NyZWVuIGFsbG93RnVsbFNjcmVlbicrXG4oST8nIGFsbG93dHJhbnNwYXJlbmN5PVwidHJ1ZVwiJzpcIlwiKStcIj48L2lmcmFtZT5cIixlcnJvcjonPHAgY2xhc3M9XCJmYW5jeWJveC1lcnJvclwiPlRoZSByZXF1ZXN0ZWQgY29udGVudCBjYW5ub3QgYmUgbG9hZGVkLjxici8+UGxlYXNlIHRyeSBhZ2FpbiBsYXRlci48L3A+JyxjbG9zZUJ0bjonPGEgdGl0bGU9XCJDbG9zZVwiIGNsYXNzPVwiZmFuY3lib3gtaXRlbSBmYW5jeWJveC1jbG9zZVwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj48L2E+JyxuZXh0Oic8YSB0aXRsZT1cIk5leHRcIiBjbGFzcz1cImZhbmN5Ym94LW5hdiBmYW5jeWJveC1uZXh0XCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPjxzcGFuPjwvc3Bhbj48L2E+JyxwcmV2Oic8YSB0aXRsZT1cIlByZXZpb3VzXCIgY2xhc3M9XCJmYW5jeWJveC1uYXYgZmFuY3lib3gtcHJldlwiIGhyZWY9XCJqYXZhc2NyaXB0OjtcIj48c3Bhbj48L3NwYW4+PC9hPid9LG9wZW5FZmZlY3Q6XCJmYWRlXCIsb3BlblNwZWVkOjI1MCxvcGVuRWFzaW5nOlwic3dpbmdcIixvcGVuT3BhY2l0eTohMCxcbm9wZW5NZXRob2Q6XCJ6b29tSW5cIixjbG9zZUVmZmVjdDpcImZhZGVcIixjbG9zZVNwZWVkOjI1MCxjbG9zZUVhc2luZzpcInN3aW5nXCIsY2xvc2VPcGFjaXR5OiEwLGNsb3NlTWV0aG9kOlwiem9vbU91dFwiLG5leHRFZmZlY3Q6XCJlbGFzdGljXCIsbmV4dFNwZWVkOjI1MCxuZXh0RWFzaW5nOlwic3dpbmdcIixuZXh0TWV0aG9kOlwiY2hhbmdlSW5cIixwcmV2RWZmZWN0OlwiZWxhc3RpY1wiLHByZXZTcGVlZDoyNTAscHJldkVhc2luZzpcInN3aW5nXCIscHJldk1ldGhvZDpcImNoYW5nZU91dFwiLGhlbHBlcnM6e292ZXJsYXk6ITAsdGl0bGU6ITB9LG9uQ2FuY2VsOmYubm9vcCxiZWZvcmVMb2FkOmYubm9vcCxhZnRlckxvYWQ6Zi5ub29wLGJlZm9yZVNob3c6Zi5ub29wLGFmdGVyU2hvdzpmLm5vb3AsYmVmb3JlQ2hhbmdlOmYubm9vcCxiZWZvcmVDbG9zZTpmLm5vb3AsYWZ0ZXJDbG9zZTpmLm5vb3B9LGdyb3VwOnt9LG9wdHM6e30scHJldmlvdXM6bnVsbCxjb21pbmc6bnVsbCxjdXJyZW50Om51bGwsaXNBY3RpdmU6ITEsXG5pc09wZW46ITEsaXNPcGVuZWQ6ITEsd3JhcDpudWxsLHNraW46bnVsbCxvdXRlcjpudWxsLGlubmVyOm51bGwscGxheWVyOnt0aW1lcjpudWxsLGlzQWN0aXZlOiExfSxhamF4TG9hZDpudWxsLGltZ1ByZWxvYWQ6bnVsbCx0cmFuc2l0aW9uczp7fSxoZWxwZXJzOnt9LG9wZW46ZnVuY3Rpb24oYSxkKXtpZihhJiYoZi5pc1BsYWluT2JqZWN0KGQpfHwoZD17fSksITEhPT1iLmNsb3NlKCEwKSkpcmV0dXJuIGYuaXNBcnJheShhKXx8KGE9dChhKT9mKGEpLmdldCgpOlthXSksZi5lYWNoKGEsZnVuY3Rpb24oZSxjKXt2YXIgaz17fSxnLGgsaixtLGw7XCJvYmplY3RcIj09PWYudHlwZShjKSYmKGMubm9kZVR5cGUmJihjPWYoYykpLHQoYyk/KGs9e2hyZWY6Yy5kYXRhKFwiZmFuY3lib3gtaHJlZlwiKXx8Yy5hdHRyKFwiaHJlZlwiKSx0aXRsZTpjLmRhdGEoXCJmYW5jeWJveC10aXRsZVwiKXx8Yy5hdHRyKFwidGl0bGVcIiksaXNEb206ITAsZWxlbWVudDpjfSxmLm1ldGFkYXRhJiZmLmV4dGVuZCghMCxrLFxuYy5tZXRhZGF0YSgpKSk6az1jKTtnPWQuaHJlZnx8ay5ocmVmfHwocShjKT9jOm51bGwpO2g9ZC50aXRsZSE9PXY/ZC50aXRsZTprLnRpdGxlfHxcIlwiO209KGo9ZC5jb250ZW50fHxrLmNvbnRlbnQpP1wiaHRtbFwiOmQudHlwZXx8ay50eXBlOyFtJiZrLmlzRG9tJiYobT1jLmRhdGEoXCJmYW5jeWJveC10eXBlXCIpLG18fChtPShtPWMucHJvcChcImNsYXNzXCIpLm1hdGNoKC9mYW5jeWJveFxcLihcXHcrKS8pKT9tWzFdOm51bGwpKTtxKGcpJiYobXx8KGIuaXNJbWFnZShnKT9tPVwiaW1hZ2VcIjpiLmlzU1dGKGcpP209XCJzd2ZcIjpcIiNcIj09PWcuY2hhckF0KDApP209XCJpbmxpbmVcIjpxKGMpJiYobT1cImh0bWxcIixqPWMpKSxcImFqYXhcIj09PW0mJihsPWcuc3BsaXQoL1xccysvLDIpLGc9bC5zaGlmdCgpLGw9bC5zaGlmdCgpKSk7anx8KFwiaW5saW5lXCI9PT1tP2c/aj1mKHEoZyk/Zy5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpOmcpOmsuaXNEb20mJihqPWMpOlwiaHRtbFwiPT09bT9qPWc6IW0mJighZyYmXG5rLmlzRG9tKSYmKG09XCJpbmxpbmVcIixqPWMpKTtmLmV4dGVuZChrLHtocmVmOmcsdHlwZTptLGNvbnRlbnQ6aix0aXRsZTpoLHNlbGVjdG9yOmx9KTthW2VdPWt9KSxiLm9wdHM9Zi5leHRlbmQoITAse30sYi5kZWZhdWx0cyxkKSxkLmtleXMhPT12JiYoYi5vcHRzLmtleXM9ZC5rZXlzP2YuZXh0ZW5kKHt9LGIuZGVmYXVsdHMua2V5cyxkLmtleXMpOiExKSxiLmdyb3VwPWEsYi5fc3RhcnQoYi5vcHRzLmluZGV4KX0sY2FuY2VsOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jb21pbmc7YSYmITEhPT1iLnRyaWdnZXIoXCJvbkNhbmNlbFwiKSYmKGIuaGlkZUxvYWRpbmcoKSxiLmFqYXhMb2FkJiZiLmFqYXhMb2FkLmFib3J0KCksYi5hamF4TG9hZD1udWxsLGIuaW1nUHJlbG9hZCYmKGIuaW1nUHJlbG9hZC5vbmxvYWQ9Yi5pbWdQcmVsb2FkLm9uZXJyb3I9bnVsbCksYS53cmFwJiZhLndyYXAuc3RvcCghMCwhMCkudHJpZ2dlcihcIm9uUmVzZXRcIikucmVtb3ZlKCksYi5jb21pbmc9bnVsbCxiLmN1cnJlbnR8fFxuYi5fYWZ0ZXJab29tT3V0KGEpKX0sY2xvc2U6ZnVuY3Rpb24oYSl7Yi5jYW5jZWwoKTshMSE9PWIudHJpZ2dlcihcImJlZm9yZUNsb3NlXCIpJiYoYi51bmJpbmRFdmVudHMoKSxiLmlzQWN0aXZlJiYoIWIuaXNPcGVufHwhMD09PWE/KGYoXCIuZmFuY3lib3gtd3JhcFwiKS5zdG9wKCEwKS50cmlnZ2VyKFwib25SZXNldFwiKS5yZW1vdmUoKSxiLl9hZnRlclpvb21PdXQoKSk6KGIuaXNPcGVuPWIuaXNPcGVuZWQ9ITEsYi5pc0Nsb3Npbmc9ITAsZihcIi5mYW5jeWJveC1pdGVtLCAuZmFuY3lib3gtbmF2XCIpLnJlbW92ZSgpLGIud3JhcC5zdG9wKCEwLCEwKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LW9wZW5lZFwiKSxiLnRyYW5zaXRpb25zW2IuY3VycmVudC5jbG9zZU1ldGhvZF0oKSkpKX0scGxheTpmdW5jdGlvbihhKXt2YXIgZD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChiLnBsYXllci50aW1lcil9LGU9ZnVuY3Rpb24oKXtkKCk7Yi5jdXJyZW50JiZiLnBsYXllci5pc0FjdGl2ZSYmKGIucGxheWVyLnRpbWVyPVxuc2V0VGltZW91dChiLm5leHQsYi5jdXJyZW50LnBsYXlTcGVlZCkpfSxjPWZ1bmN0aW9uKCl7ZCgpO3AudW5iaW5kKFwiLnBsYXllclwiKTtiLnBsYXllci5pc0FjdGl2ZT0hMTtiLnRyaWdnZXIoXCJvblBsYXlFbmRcIil9O2lmKCEwPT09YXx8IWIucGxheWVyLmlzQWN0aXZlJiYhMSE9PWEpe2lmKGIuY3VycmVudCYmKGIuY3VycmVudC5sb29wfHxiLmN1cnJlbnQuaW5kZXg8Yi5ncm91cC5sZW5ndGgtMSkpYi5wbGF5ZXIuaXNBY3RpdmU9ITAscC5iaW5kKHtcIm9uQ2FuY2VsLnBsYXllciBiZWZvcmVDbG9zZS5wbGF5ZXJcIjpjLFwib25VcGRhdGUucGxheWVyXCI6ZSxcImJlZm9yZUxvYWQucGxheWVyXCI6ZH0pLGUoKSxiLnRyaWdnZXIoXCJvblBsYXlTdGFydFwiKX1lbHNlIGMoKX0sbmV4dDpmdW5jdGlvbihhKXt2YXIgZD1iLmN1cnJlbnQ7ZCYmKHEoYSl8fChhPWQuZGlyZWN0aW9uLm5leHQpLGIuanVtcHRvKGQuaW5kZXgrMSxhLFwibmV4dFwiKSl9LHByZXY6ZnVuY3Rpb24oYSl7dmFyIGQ9Yi5jdXJyZW50O1xuZCYmKHEoYSl8fChhPWQuZGlyZWN0aW9uLnByZXYpLGIuanVtcHRvKGQuaW5kZXgtMSxhLFwicHJldlwiKSl9LGp1bXB0bzpmdW5jdGlvbihhLGQsZSl7dmFyIGM9Yi5jdXJyZW50O2MmJihhPWwoYSksYi5kaXJlY3Rpb249ZHx8Yy5kaXJlY3Rpb25bYT49Yy5pbmRleD9cIm5leHRcIjpcInByZXZcIl0sYi5yb3V0ZXI9ZXx8XCJqdW1wdG9cIixjLmxvb3AmJigwPmEmJihhPWMuZ3JvdXAubGVuZ3RoK2ElYy5ncm91cC5sZW5ndGgpLGElPWMuZ3JvdXAubGVuZ3RoKSxjLmdyb3VwW2FdIT09diYmKGIuY2FuY2VsKCksYi5fc3RhcnQoYSkpKX0scmVwb3NpdGlvbjpmdW5jdGlvbihhLGQpe3ZhciBlPWIuY3VycmVudCxjPWU/ZS53cmFwOm51bGwsaztjJiYoaz1iLl9nZXRQb3NpdGlvbihkKSxhJiZcInNjcm9sbFwiPT09YS50eXBlPyhkZWxldGUgay5wb3NpdGlvbixjLnN0b3AoITAsITApLmFuaW1hdGUoaywyMDApKTooYy5jc3MoayksZS5wb3M9Zi5leHRlbmQoe30sZS5kaW0saykpKX0sdXBkYXRlOmZ1bmN0aW9uKGEpe3ZhciBkPVxuYSYmYS50eXBlLGU9IWR8fFwib3JpZW50YXRpb25jaGFuZ2VcIj09PWQ7ZSYmKGNsZWFyVGltZW91dChCKSxCPW51bGwpO2IuaXNPcGVuJiYhQiYmKEI9c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBjPWIuY3VycmVudDtjJiYhYi5pc0Nsb3NpbmcmJihiLndyYXAucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC10bXBcIiksKGV8fFwibG9hZFwiPT09ZHx8XCJyZXNpemVcIj09PWQmJmMuYXV0b1Jlc2l6ZSkmJmIuX3NldERpbWVuc2lvbigpLFwic2Nyb2xsXCI9PT1kJiZjLmNhblNocmlua3x8Yi5yZXBvc2l0aW9uKGEpLGIudHJpZ2dlcihcIm9uVXBkYXRlXCIpLEI9bnVsbCl9LGUmJiFzPzA6MzAwKSl9LHRvZ2dsZTpmdW5jdGlvbihhKXtiLmlzT3BlbiYmKGIuY3VycmVudC5maXRUb1ZpZXc9XCJib29sZWFuXCI9PT1mLnR5cGUoYSk/YTohYi5jdXJyZW50LmZpdFRvVmlldyxzJiYoYi53cmFwLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5hZGRDbGFzcyhcImZhbmN5Ym94LXRtcFwiKSxiLnRyaWdnZXIoXCJvblVwZGF0ZVwiKSksXG5iLnVwZGF0ZSgpKX0saGlkZUxvYWRpbmc6ZnVuY3Rpb24oKXtwLnVuYmluZChcIi5sb2FkaW5nXCIpO2YoXCIjZmFuY3lib3gtbG9hZGluZ1wiKS5yZW1vdmUoKX0sc2hvd0xvYWRpbmc6ZnVuY3Rpb24oKXt2YXIgYSxkO2IuaGlkZUxvYWRpbmcoKTthPWYoJzxkaXYgaWQ9XCJmYW5jeWJveC1sb2FkaW5nXCI+PGRpdj48L2Rpdj48L2Rpdj4nKS5jbGljayhiLmNhbmNlbCkuYXBwZW5kVG8oXCJib2R5XCIpO3AuYmluZChcImtleWRvd24ubG9hZGluZ1wiLGZ1bmN0aW9uKGEpe2lmKDI3PT09KGEud2hpY2h8fGEua2V5Q29kZSkpYS5wcmV2ZW50RGVmYXVsdCgpLGIuY2FuY2VsKCl9KTtiLmRlZmF1bHRzLmZpeGVkfHwoZD1iLmdldFZpZXdwb3J0KCksYS5jc3Moe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MC41KmQuaCtkLnksbGVmdDowLjUqZC53K2QueH0pKX0sZ2V0Vmlld3BvcnQ6ZnVuY3Rpb24oKXt2YXIgYT1iLmN1cnJlbnQmJmIuY3VycmVudC5sb2NrZWR8fCExLGQ9e3g6bi5zY3JvbGxMZWZ0KCksXG55Om4uc2Nyb2xsVG9wKCl9O2E/KGQudz1hWzBdLmNsaWVudFdpZHRoLGQuaD1hWzBdLmNsaWVudEhlaWdodCk6KGQudz1zJiZyLmlubmVyV2lkdGg/ci5pbm5lcldpZHRoOm4ud2lkdGgoKSxkLmg9cyYmci5pbm5lckhlaWdodD9yLmlubmVySGVpZ2h0Om4uaGVpZ2h0KCkpO3JldHVybiBkfSx1bmJpbmRFdmVudHM6ZnVuY3Rpb24oKXtiLndyYXAmJnQoYi53cmFwKSYmYi53cmFwLnVuYmluZChcIi5mYlwiKTtwLnVuYmluZChcIi5mYlwiKTtuLnVuYmluZChcIi5mYlwiKX0sYmluZEV2ZW50czpmdW5jdGlvbigpe3ZhciBhPWIuY3VycmVudCxkO2EmJihuLmJpbmQoXCJvcmllbnRhdGlvbmNoYW5nZS5mYlwiKyhzP1wiXCI6XCIgcmVzaXplLmZiXCIpKyhhLmF1dG9DZW50ZXImJiFhLmxvY2tlZD9cIiBzY3JvbGwuZmJcIjpcIlwiKSxiLnVwZGF0ZSksKGQ9YS5rZXlzKSYmcC5iaW5kKFwia2V5ZG93bi5mYlwiLGZ1bmN0aW9uKGUpe3ZhciBjPWUud2hpY2h8fGUua2V5Q29kZSxrPWUudGFyZ2V0fHxlLnNyY0VsZW1lbnQ7XG5pZigyNz09PWMmJmIuY29taW5nKXJldHVybiExOyFlLmN0cmxLZXkmJighZS5hbHRLZXkmJiFlLnNoaWZ0S2V5JiYhZS5tZXRhS2V5JiYoIWt8fCFrLnR5cGUmJiFmKGspLmlzKFwiW2NvbnRlbnRlZGl0YWJsZV1cIikpKSYmZi5lYWNoKGQsZnVuY3Rpb24oZCxrKXtpZigxPGEuZ3JvdXAubGVuZ3RoJiZrW2NdIT09dilyZXR1cm4gYltkXShrW2NdKSxlLnByZXZlbnREZWZhdWx0KCksITE7aWYoLTE8Zi5pbkFycmF5KGMsaykpcmV0dXJuIGJbZF0oKSxlLnByZXZlbnREZWZhdWx0KCksITF9KX0pLGYuZm4ubW91c2V3aGVlbCYmYS5tb3VzZVdoZWVsJiZiLndyYXAuYmluZChcIm1vdXNld2hlZWwuZmJcIixmdW5jdGlvbihkLGMsayxnKXtmb3IodmFyIGg9ZihkLnRhcmdldHx8bnVsbCksaj0hMTtoLmxlbmd0aCYmIWomJiFoLmlzKFwiLmZhbmN5Ym94LXNraW5cIikmJiFoLmlzKFwiLmZhbmN5Ym94LXdyYXBcIik7KWo9aFswXSYmIShoWzBdLnN0eWxlLm92ZXJmbG93JiZcImhpZGRlblwiPT09aFswXS5zdHlsZS5vdmVyZmxvdykmJlxuKGhbMF0uY2xpZW50V2lkdGgmJmhbMF0uc2Nyb2xsV2lkdGg+aFswXS5jbGllbnRXaWR0aHx8aFswXS5jbGllbnRIZWlnaHQmJmhbMF0uc2Nyb2xsSGVpZ2h0PmhbMF0uY2xpZW50SGVpZ2h0KSxoPWYoaCkucGFyZW50KCk7aWYoMCE9PWMmJiFqJiYxPGIuZ3JvdXAubGVuZ3RoJiYhYS5jYW5TaHJpbmspe2lmKDA8Z3x8MDxrKWIucHJldigwPGc/XCJkb3duXCI6XCJsZWZ0XCIpO2Vsc2UgaWYoMD5nfHwwPmspYi5uZXh0KDA+Zz9cInVwXCI6XCJyaWdodFwiKTtkLnByZXZlbnREZWZhdWx0KCl9fSkpfSx0cmlnZ2VyOmZ1bmN0aW9uKGEsZCl7dmFyIGUsYz1kfHxiLmNvbWluZ3x8Yi5jdXJyZW50O2lmKGMpe2YuaXNGdW5jdGlvbihjW2FdKSYmKGU9Y1thXS5hcHBseShjLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSkpO2lmKCExPT09ZSlyZXR1cm4hMTtjLmhlbHBlcnMmJmYuZWFjaChjLmhlbHBlcnMsZnVuY3Rpb24oZCxlKXtpZihlJiZiLmhlbHBlcnNbZF0mJmYuaXNGdW5jdGlvbihiLmhlbHBlcnNbZF1bYV0pKWIuaGVscGVyc1tkXVthXShmLmV4dGVuZCghMCxcbnt9LGIuaGVscGVyc1tkXS5kZWZhdWx0cyxlKSxjKX0pO3AudHJpZ2dlcihhKX19LGlzSW1hZ2U6ZnVuY3Rpb24oYSl7cmV0dXJuIHEoYSkmJmEubWF0Y2goLyheZGF0YTppbWFnZVxcLy4qLCl8KFxcLihqcChlfGd8ZWcpfGdpZnxwbmd8Ym1wfHdlYnB8c3ZnKSgoXFw/fCMpLiopPyQpL2kpfSxpc1NXRjpmdW5jdGlvbihhKXtyZXR1cm4gcShhKSYmYS5tYXRjaCgvXFwuKHN3ZikoKFxcP3wjKS4qKT8kL2kpfSxfc3RhcnQ6ZnVuY3Rpb24oYSl7dmFyIGQ9e30sZSxjO2E9bChhKTtlPWIuZ3JvdXBbYV18fG51bGw7aWYoIWUpcmV0dXJuITE7ZD1mLmV4dGVuZCghMCx7fSxiLm9wdHMsZSk7ZT1kLm1hcmdpbjtjPWQucGFkZGluZztcIm51bWJlclwiPT09Zi50eXBlKGUpJiYoZC5tYXJnaW49W2UsZSxlLGVdKTtcIm51bWJlclwiPT09Zi50eXBlKGMpJiYoZC5wYWRkaW5nPVtjLGMsYyxjXSk7ZC5tb2RhbCYmZi5leHRlbmQoITAsZCx7Y2xvc2VCdG46ITEsY2xvc2VDbGljazohMSxuZXh0Q2xpY2s6ITEsYXJyb3dzOiExLFxubW91c2VXaGVlbDohMSxrZXlzOm51bGwsaGVscGVyczp7b3ZlcmxheTp7Y2xvc2VDbGljazohMX19fSk7ZC5hdXRvU2l6ZSYmKGQuYXV0b1dpZHRoPWQuYXV0b0hlaWdodD0hMCk7XCJhdXRvXCI9PT1kLndpZHRoJiYoZC5hdXRvV2lkdGg9ITApO1wiYXV0b1wiPT09ZC5oZWlnaHQmJihkLmF1dG9IZWlnaHQ9ITApO2QuZ3JvdXA9Yi5ncm91cDtkLmluZGV4PWE7Yi5jb21pbmc9ZDtpZighMT09PWIudHJpZ2dlcihcImJlZm9yZUxvYWRcIikpYi5jb21pbmc9bnVsbDtlbHNle2M9ZC50eXBlO2U9ZC5ocmVmO2lmKCFjKXJldHVybiBiLmNvbWluZz1udWxsLGIuY3VycmVudCYmYi5yb3V0ZXImJlwianVtcHRvXCIhPT1iLnJvdXRlcj8oYi5jdXJyZW50LmluZGV4PWEsYltiLnJvdXRlcl0oYi5kaXJlY3Rpb24pKTohMTtiLmlzQWN0aXZlPSEwO2lmKFwiaW1hZ2VcIj09PWN8fFwic3dmXCI9PT1jKWQuYXV0b0hlaWdodD1kLmF1dG9XaWR0aD0hMSxkLnNjcm9sbGluZz1cInZpc2libGVcIjtcImltYWdlXCI9PT1jJiYoZC5hc3BlY3RSYXRpbz1cbiEwKTtcImlmcmFtZVwiPT09YyYmcyYmKGQuc2Nyb2xsaW5nPVwic2Nyb2xsXCIpO2Qud3JhcD1mKGQudHBsLndyYXApLmFkZENsYXNzKFwiZmFuY3lib3gtXCIrKHM/XCJtb2JpbGVcIjpcImRlc2t0b3BcIikrXCIgZmFuY3lib3gtdHlwZS1cIitjK1wiIGZhbmN5Ym94LXRtcCBcIitkLndyYXBDU1MpLmFwcGVuZFRvKGQucGFyZW50fHxcImJvZHlcIik7Zi5leHRlbmQoZCx7c2tpbjpmKFwiLmZhbmN5Ym94LXNraW5cIixkLndyYXApLG91dGVyOmYoXCIuZmFuY3lib3gtb3V0ZXJcIixkLndyYXApLGlubmVyOmYoXCIuZmFuY3lib3gtaW5uZXJcIixkLndyYXApfSk7Zi5lYWNoKFtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxmdW5jdGlvbihhLGIpe2Quc2tpbi5jc3MoXCJwYWRkaW5nXCIrYix3KGQucGFkZGluZ1thXSkpfSk7Yi50cmlnZ2VyKFwib25SZWFkeVwiKTtpZihcImlubGluZVwiPT09Y3x8XCJodG1sXCI9PT1jKXtpZighZC5jb250ZW50fHwhZC5jb250ZW50Lmxlbmd0aClyZXR1cm4gYi5fZXJyb3IoXCJjb250ZW50XCIpfWVsc2UgaWYoIWUpcmV0dXJuIGIuX2Vycm9yKFwiaHJlZlwiKTtcblwiaW1hZ2VcIj09PWM/Yi5fbG9hZEltYWdlKCk6XCJhamF4XCI9PT1jP2IuX2xvYWRBamF4KCk6XCJpZnJhbWVcIj09PWM/Yi5fbG9hZElmcmFtZSgpOmIuX2FmdGVyTG9hZCgpfX0sX2Vycm9yOmZ1bmN0aW9uKGEpe2YuZXh0ZW5kKGIuY29taW5nLHt0eXBlOlwiaHRtbFwiLGF1dG9XaWR0aDohMCxhdXRvSGVpZ2h0OiEwLG1pbldpZHRoOjAsbWluSGVpZ2h0OjAsc2Nyb2xsaW5nOlwibm9cIixoYXNFcnJvcjphLGNvbnRlbnQ6Yi5jb21pbmcudHBsLmVycm9yfSk7Yi5fYWZ0ZXJMb2FkKCl9LF9sb2FkSW1hZ2U6ZnVuY3Rpb24oKXt2YXIgYT1iLmltZ1ByZWxvYWQ9bmV3IEltYWdlO2Eub25sb2FkPWZ1bmN0aW9uKCl7dGhpcy5vbmxvYWQ9dGhpcy5vbmVycm9yPW51bGw7Yi5jb21pbmcud2lkdGg9dGhpcy53aWR0aC9iLm9wdHMucGl4ZWxSYXRpbztiLmNvbWluZy5oZWlnaHQ9dGhpcy5oZWlnaHQvYi5vcHRzLnBpeGVsUmF0aW87Yi5fYWZ0ZXJMb2FkKCl9O2Eub25lcnJvcj1mdW5jdGlvbigpe3RoaXMub25sb2FkPVxudGhpcy5vbmVycm9yPW51bGw7Yi5fZXJyb3IoXCJpbWFnZVwiKX07YS5zcmM9Yi5jb21pbmcuaHJlZjshMCE9PWEuY29tcGxldGUmJmIuc2hvd0xvYWRpbmcoKX0sX2xvYWRBamF4OmZ1bmN0aW9uKCl7dmFyIGE9Yi5jb21pbmc7Yi5zaG93TG9hZGluZygpO2IuYWpheExvYWQ9Zi5hamF4KGYuZXh0ZW5kKHt9LGEuYWpheCx7dXJsOmEuaHJlZixlcnJvcjpmdW5jdGlvbihhLGUpe2IuY29taW5nJiZcImFib3J0XCIhPT1lP2IuX2Vycm9yKFwiYWpheFwiLGEpOmIuaGlkZUxvYWRpbmcoKX0sc3VjY2VzczpmdW5jdGlvbihkLGUpe1wic3VjY2Vzc1wiPT09ZSYmKGEuY29udGVudD1kLGIuX2FmdGVyTG9hZCgpKX19KSl9LF9sb2FkSWZyYW1lOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jb21pbmcsZD1mKGEudHBsLmlmcmFtZS5yZXBsYWNlKC9cXHtybmRcXH0vZywobmV3IERhdGUpLmdldFRpbWUoKSkpLmF0dHIoXCJzY3JvbGxpbmdcIixzP1wiYXV0b1wiOmEuaWZyYW1lLnNjcm9sbGluZykuYXR0cihcInNyY1wiLGEuaHJlZik7XG5mKGEud3JhcCkuYmluZChcIm9uUmVzZXRcIixmdW5jdGlvbigpe3RyeXtmKHRoaXMpLmZpbmQoXCJpZnJhbWVcIikuaGlkZSgpLmF0dHIoXCJzcmNcIixcIi8vYWJvdXQ6YmxhbmtcIikuZW5kKCkuZW1wdHkoKX1jYXRjaChhKXt9fSk7YS5pZnJhbWUucHJlbG9hZCYmKGIuc2hvd0xvYWRpbmcoKSxkLm9uZShcImxvYWRcIixmdW5jdGlvbigpe2YodGhpcykuZGF0YShcInJlYWR5XCIsMSk7c3x8Zih0aGlzKS5iaW5kKFwibG9hZC5mYlwiLGIudXBkYXRlKTtmKHRoaXMpLnBhcmVudHMoXCIuZmFuY3lib3gtd3JhcFwiKS53aWR0aChcIjEwMCVcIikucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC10bXBcIikuc2hvdygpO2IuX2FmdGVyTG9hZCgpfSkpO2EuY29udGVudD1kLmFwcGVuZFRvKGEuaW5uZXIpO2EuaWZyYW1lLnByZWxvYWR8fGIuX2FmdGVyTG9hZCgpfSxfcHJlbG9hZEltYWdlczpmdW5jdGlvbigpe3ZhciBhPWIuZ3JvdXAsZD1iLmN1cnJlbnQsZT1hLmxlbmd0aCxjPWQucHJlbG9hZD9NYXRoLm1pbihkLnByZWxvYWQsXG5lLTEpOjAsZixnO2ZvcihnPTE7Zzw9YztnKz0xKWY9YVsoZC5pbmRleCtnKSVlXSxcImltYWdlXCI9PT1mLnR5cGUmJmYuaHJlZiYmKChuZXcgSW1hZ2UpLnNyYz1mLmhyZWYpfSxfYWZ0ZXJMb2FkOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jb21pbmcsZD1iLmN1cnJlbnQsZSxjLGssZyxoO2IuaGlkZUxvYWRpbmcoKTtpZihhJiYhMSE9PWIuaXNBY3RpdmUpaWYoITE9PT1iLnRyaWdnZXIoXCJhZnRlckxvYWRcIixhLGQpKWEud3JhcC5zdG9wKCEwKS50cmlnZ2VyKFwib25SZXNldFwiKS5yZW1vdmUoKSxiLmNvbWluZz1udWxsO2Vsc2V7ZCYmKGIudHJpZ2dlcihcImJlZm9yZUNoYW5nZVwiLGQpLGQud3JhcC5zdG9wKCEwKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LW9wZW5lZFwiKS5maW5kKFwiLmZhbmN5Ym94LWl0ZW0sIC5mYW5jeWJveC1uYXZcIikucmVtb3ZlKCkpO2IudW5iaW5kRXZlbnRzKCk7ZT1hLmNvbnRlbnQ7Yz1hLnR5cGU7az1hLnNjcm9sbGluZztmLmV4dGVuZChiLHt3cmFwOmEud3JhcCxza2luOmEuc2tpbixcbm91dGVyOmEub3V0ZXIsaW5uZXI6YS5pbm5lcixjdXJyZW50OmEscHJldmlvdXM6ZH0pO2c9YS5ocmVmO3N3aXRjaChjKXtjYXNlIFwiaW5saW5lXCI6Y2FzZSBcImFqYXhcIjpjYXNlIFwiaHRtbFwiOmEuc2VsZWN0b3I/ZT1mKFwiPGRpdj5cIikuaHRtbChlKS5maW5kKGEuc2VsZWN0b3IpOnQoZSkmJihlLmRhdGEoXCJmYW5jeWJveC1wbGFjZWhvbGRlclwiKXx8ZS5kYXRhKFwiZmFuY3lib3gtcGxhY2Vob2xkZXJcIixmKCc8ZGl2IGNsYXNzPVwiZmFuY3lib3gtcGxhY2Vob2xkZXJcIj48L2Rpdj4nKS5pbnNlcnRBZnRlcihlKS5oaWRlKCkpLGU9ZS5zaG93KCkuZGV0YWNoKCksYS53cmFwLmJpbmQoXCJvblJlc2V0XCIsZnVuY3Rpb24oKXtmKHRoaXMpLmZpbmQoZSkubGVuZ3RoJiZlLmhpZGUoKS5yZXBsYWNlQWxsKGUuZGF0YShcImZhbmN5Ym94LXBsYWNlaG9sZGVyXCIpKS5kYXRhKFwiZmFuY3lib3gtcGxhY2Vob2xkZXJcIiwhMSl9KSk7YnJlYWs7Y2FzZSBcImltYWdlXCI6ZT1hLnRwbC5pbWFnZS5yZXBsYWNlKFwie2hyZWZ9XCIsXG5nKTticmVhaztjYXNlIFwic3dmXCI6ZT0nPG9iamVjdCBpZD1cImZhbmN5Ym94LXN3ZlwiIGNsYXNzaWQ9XCJjbHNpZDpEMjdDREI2RS1BRTZELTExY2YtOTZCOC00NDQ1NTM1NDAwMDBcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+PHBhcmFtIG5hbWU9XCJtb3ZpZVwiIHZhbHVlPVwiJytnKydcIj48L3BhcmFtPicsaD1cIlwiLGYuZWFjaChhLnN3ZixmdW5jdGlvbihhLGIpe2UrPSc8cGFyYW0gbmFtZT1cIicrYSsnXCIgdmFsdWU9XCInK2IrJ1wiPjwvcGFyYW0+JztoKz1cIiBcIithKyc9XCInK2IrJ1wiJ30pLGUrPSc8ZW1iZWQgc3JjPVwiJytnKydcIiB0eXBlPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCInK2grXCI+PC9lbWJlZD48L29iamVjdD5cIn0oIXQoZSl8fCFlLnBhcmVudCgpLmlzKGEuaW5uZXIpKSYmYS5pbm5lci5hcHBlbmQoZSk7Yi50cmlnZ2VyKFwiYmVmb3JlU2hvd1wiKTthLmlubmVyLmNzcyhcIm92ZXJmbG93XCIsXCJ5ZXNcIj09PWs/XCJzY3JvbGxcIjpcblwibm9cIj09PWs/XCJoaWRkZW5cIjprKTtiLl9zZXREaW1lbnNpb24oKTtiLnJlcG9zaXRpb24oKTtiLmlzT3Blbj0hMTtiLmNvbWluZz1udWxsO2IuYmluZEV2ZW50cygpO2lmKGIuaXNPcGVuZWQpe2lmKGQucHJldk1ldGhvZCliLnRyYW5zaXRpb25zW2QucHJldk1ldGhvZF0oKX1lbHNlIGYoXCIuZmFuY3lib3gtd3JhcFwiKS5ub3QoYS53cmFwKS5zdG9wKCEwKS50cmlnZ2VyKFwib25SZXNldFwiKS5yZW1vdmUoKTtiLnRyYW5zaXRpb25zW2IuaXNPcGVuZWQ/YS5uZXh0TWV0aG9kOmEub3Blbk1ldGhvZF0oKTtiLl9wcmVsb2FkSW1hZ2VzKCl9fSxfc2V0RGltZW5zaW9uOmZ1bmN0aW9uKCl7dmFyIGE9Yi5nZXRWaWV3cG9ydCgpLGQ9MCxlPSExLGM9ITEsZT1iLndyYXAsaz1iLnNraW4sZz1iLmlubmVyLGg9Yi5jdXJyZW50LGM9aC53aWR0aCxqPWguaGVpZ2h0LG09aC5taW5XaWR0aCx1PWgubWluSGVpZ2h0LG49aC5tYXhXaWR0aCxwPWgubWF4SGVpZ2h0LHM9aC5zY3JvbGxpbmcscT1oLnNjcm9sbE91dHNpZGU/XG5oLnNjcm9sbGJhcldpZHRoOjAseD1oLm1hcmdpbix5PWwoeFsxXSt4WzNdKSxyPWwoeFswXSt4WzJdKSx2LHosdCxDLEEsRixCLEQsSDtlLmFkZChrKS5hZGQoZykud2lkdGgoXCJhdXRvXCIpLmhlaWdodChcImF1dG9cIikucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC10bXBcIik7eD1sKGsub3V0ZXJXaWR0aCghMCktay53aWR0aCgpKTt2PWwoay5vdXRlckhlaWdodCghMCktay5oZWlnaHQoKSk7ej15K3g7dD1yK3Y7Qz1FKGMpPyhhLncteikqbChjKS8xMDA6YztBPUUoaik/KGEuaC10KSpsKGopLzEwMDpqO2lmKFwiaWZyYW1lXCI9PT1oLnR5cGUpe2lmKEg9aC5jb250ZW50LGguYXV0b0hlaWdodCYmMT09PUguZGF0YShcInJlYWR5XCIpKXRyeXtIWzBdLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQubG9jYXRpb24mJihnLndpZHRoKEMpLmhlaWdodCg5OTk5KSxGPUguY29udGVudHMoKS5maW5kKFwiYm9keVwiKSxxJiZGLmNzcyhcIm92ZXJmbG93LXhcIixcImhpZGRlblwiKSxBPUYub3V0ZXJIZWlnaHQoITApKX1jYXRjaChHKXt9fWVsc2UgaWYoaC5hdXRvV2lkdGh8fFxuaC5hdXRvSGVpZ2h0KWcuYWRkQ2xhc3MoXCJmYW5jeWJveC10bXBcIiksaC5hdXRvV2lkdGh8fGcud2lkdGgoQyksaC5hdXRvSGVpZ2h0fHxnLmhlaWdodChBKSxoLmF1dG9XaWR0aCYmKEM9Zy53aWR0aCgpKSxoLmF1dG9IZWlnaHQmJihBPWcuaGVpZ2h0KCkpLGcucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC10bXBcIik7Yz1sKEMpO2o9bChBKTtEPUMvQTttPWwoRShtKT9sKG0sXCJ3XCIpLXo6bSk7bj1sKEUobik/bChuLFwid1wiKS16Om4pO3U9bChFKHUpP2wodSxcImhcIiktdDp1KTtwPWwoRShwKT9sKHAsXCJoXCIpLXQ6cCk7Rj1uO0I9cDtoLmZpdFRvVmlldyYmKG49TWF0aC5taW4oYS53LXosbikscD1NYXRoLm1pbihhLmgtdCxwKSk7ej1hLncteTtyPWEuaC1yO2guYXNwZWN0UmF0aW8/KGM+biYmKGM9bixqPWwoYy9EKSksaj5wJiYoaj1wLGM9bChqKkQpKSxjPG0mJihjPW0saj1sKGMvRCkpLGo8dSYmKGo9dSxjPWwoaipEKSkpOihjPU1hdGgubWF4KG0sTWF0aC5taW4oYyxuKSksaC5hdXRvSGVpZ2h0JiZcblwiaWZyYW1lXCIhPT1oLnR5cGUmJihnLndpZHRoKGMpLGo9Zy5oZWlnaHQoKSksaj1NYXRoLm1heCh1LE1hdGgubWluKGoscCkpKTtpZihoLmZpdFRvVmlldylpZihnLndpZHRoKGMpLmhlaWdodChqKSxlLndpZHRoKGMreCksYT1lLndpZHRoKCkseT1lLmhlaWdodCgpLGguYXNwZWN0UmF0aW8pZm9yKDsoYT56fHx5PnIpJiYoYz5tJiZqPnUpJiYhKDE5PGQrKyk7KWo9TWF0aC5tYXgodSxNYXRoLm1pbihwLGotMTApKSxjPWwoaipEKSxjPG0mJihjPW0saj1sKGMvRCkpLGM+biYmKGM9bixqPWwoYy9EKSksZy53aWR0aChjKS5oZWlnaHQoaiksZS53aWR0aChjK3gpLGE9ZS53aWR0aCgpLHk9ZS5oZWlnaHQoKTtlbHNlIGM9TWF0aC5tYXgobSxNYXRoLm1pbihjLGMtKGEteikpKSxqPU1hdGgubWF4KHUsTWF0aC5taW4oaixqLSh5LXIpKSk7cSYmKFwiYXV0b1wiPT09cyYmajxBJiZjK3grcTx6KSYmKGMrPXEpO2cud2lkdGgoYykuaGVpZ2h0KGopO2Uud2lkdGgoYyt4KTthPWUud2lkdGgoKTtcbnk9ZS5oZWlnaHQoKTtlPShhPnp8fHk+cikmJmM+bSYmaj51O2M9aC5hc3BlY3RSYXRpbz9jPEYmJmo8QiYmYzxDJiZqPEE6KGM8Rnx8ajxCKSYmKGM8Q3x8ajxBKTtmLmV4dGVuZChoLHtkaW06e3dpZHRoOncoYSksaGVpZ2h0OncoeSl9LG9yaWdXaWR0aDpDLG9yaWdIZWlnaHQ6QSxjYW5TaHJpbms6ZSxjYW5FeHBhbmQ6Yyx3UGFkZGluZzp4LGhQYWRkaW5nOnYsd3JhcFNwYWNlOnktay5vdXRlckhlaWdodCghMCksc2tpblNwYWNlOmsuaGVpZ2h0KCktan0pOyFIJiYoaC5hdXRvSGVpZ2h0JiZqPnUmJmo8cCYmIWMpJiZnLmhlaWdodChcImF1dG9cIil9LF9nZXRQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgZD1iLmN1cnJlbnQsZT1iLmdldFZpZXdwb3J0KCksYz1kLm1hcmdpbixmPWIud3JhcC53aWR0aCgpK2NbMV0rY1szXSxnPWIud3JhcC5oZWlnaHQoKStjWzBdK2NbMl0sYz17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDpjWzBdLGxlZnQ6Y1szXX07ZC5hdXRvQ2VudGVyJiZkLmZpeGVkJiZcbiFhJiZnPD1lLmgmJmY8PWUudz9jLnBvc2l0aW9uPVwiZml4ZWRcIjpkLmxvY2tlZHx8KGMudG9wKz1lLnksYy5sZWZ0Kz1lLngpO2MudG9wPXcoTWF0aC5tYXgoYy50b3AsYy50b3ArKGUuaC1nKSpkLnRvcFJhdGlvKSk7Yy5sZWZ0PXcoTWF0aC5tYXgoYy5sZWZ0LGMubGVmdCsoZS53LWYpKmQubGVmdFJhdGlvKSk7cmV0dXJuIGN9LF9hZnRlclpvb21JbjpmdW5jdGlvbigpe3ZhciBhPWIuY3VycmVudDthJiYoYi5pc09wZW49Yi5pc09wZW5lZD0hMCxiLndyYXAuY3NzKFwib3ZlcmZsb3dcIixcInZpc2libGVcIikuYWRkQ2xhc3MoXCJmYW5jeWJveC1vcGVuZWRcIiksYi51cGRhdGUoKSwoYS5jbG9zZUNsaWNrfHxhLm5leHRDbGljayYmMTxiLmdyb3VwLmxlbmd0aCkmJmIuaW5uZXIuY3NzKFwiY3Vyc29yXCIsXCJwb2ludGVyXCIpLmJpbmQoXCJjbGljay5mYlwiLGZ1bmN0aW9uKGQpeyFmKGQudGFyZ2V0KS5pcyhcImFcIikmJiFmKGQudGFyZ2V0KS5wYXJlbnQoKS5pcyhcImFcIikmJihkLnByZXZlbnREZWZhdWx0KCksXG5iW2EuY2xvc2VDbGljaz9cImNsb3NlXCI6XCJuZXh0XCJdKCkpfSksYS5jbG9zZUJ0biYmZihhLnRwbC5jbG9zZUJ0bikuYXBwZW5kVG8oYi5za2luKS5iaW5kKFwiY2xpY2suZmJcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7Yi5jbG9zZSgpfSksYS5hcnJvd3MmJjE8Yi5ncm91cC5sZW5ndGgmJigoYS5sb29wfHwwPGEuaW5kZXgpJiZmKGEudHBsLnByZXYpLmFwcGVuZFRvKGIub3V0ZXIpLmJpbmQoXCJjbGljay5mYlwiLGIucHJldiksKGEubG9vcHx8YS5pbmRleDxiLmdyb3VwLmxlbmd0aC0xKSYmZihhLnRwbC5uZXh0KS5hcHBlbmRUbyhiLm91dGVyKS5iaW5kKFwiY2xpY2suZmJcIixiLm5leHQpKSxiLnRyaWdnZXIoXCJhZnRlclNob3dcIiksIWEubG9vcCYmYS5pbmRleD09PWEuZ3JvdXAubGVuZ3RoLTE/Yi5wbGF5KCExKTpiLm9wdHMuYXV0b1BsYXkmJiFiLnBsYXllci5pc0FjdGl2ZSYmKGIub3B0cy5hdXRvUGxheT0hMSxiLnBsYXkoKSkpfSxfYWZ0ZXJab29tT3V0OmZ1bmN0aW9uKGEpe2E9XG5hfHxiLmN1cnJlbnQ7ZihcIi5mYW5jeWJveC13cmFwXCIpLnRyaWdnZXIoXCJvblJlc2V0XCIpLnJlbW92ZSgpO2YuZXh0ZW5kKGIse2dyb3VwOnt9LG9wdHM6e30scm91dGVyOiExLGN1cnJlbnQ6bnVsbCxpc0FjdGl2ZTohMSxpc09wZW5lZDohMSxpc09wZW46ITEsaXNDbG9zaW5nOiExLHdyYXA6bnVsbCxza2luOm51bGwsb3V0ZXI6bnVsbCxpbm5lcjpudWxsfSk7Yi50cmlnZ2VyKFwiYWZ0ZXJDbG9zZVwiLGEpfX0pO2IudHJhbnNpdGlvbnM9e2dldE9yaWdQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPWIuY3VycmVudCxkPWEuZWxlbWVudCxlPWEub3JpZyxjPXt9LGY9NTAsZz01MCxoPWEuaFBhZGRpbmcsaj1hLndQYWRkaW5nLG09Yi5nZXRWaWV3cG9ydCgpOyFlJiYoYS5pc0RvbSYmZC5pcyhcIjp2aXNpYmxlXCIpKSYmKGU9ZC5maW5kKFwiaW1nOmZpcnN0XCIpLGUubGVuZ3RofHwoZT1kKSk7dChlKT8oYz1lLm9mZnNldCgpLGUuaXMoXCJpbWdcIikmJihmPWUub3V0ZXJXaWR0aCgpLGc9ZS5vdXRlckhlaWdodCgpKSk6XG4oYy50b3A9bS55KyhtLmgtZykqYS50b3BSYXRpbyxjLmxlZnQ9bS54KyhtLnctZikqYS5sZWZ0UmF0aW8pO2lmKFwiZml4ZWRcIj09PWIud3JhcC5jc3MoXCJwb3NpdGlvblwiKXx8YS5sb2NrZWQpYy50b3AtPW0ueSxjLmxlZnQtPW0ueDtyZXR1cm4gYz17dG9wOncoYy50b3AtaCphLnRvcFJhdGlvKSxsZWZ0OncoYy5sZWZ0LWoqYS5sZWZ0UmF0aW8pLHdpZHRoOncoZitqKSxoZWlnaHQ6dyhnK2gpfX0sc3RlcDpmdW5jdGlvbihhLGQpe3ZhciBlLGMsZj1kLnByb3A7Yz1iLmN1cnJlbnQ7dmFyIGc9Yy53cmFwU3BhY2UsaD1jLnNraW5TcGFjZTtpZihcIndpZHRoXCI9PT1mfHxcImhlaWdodFwiPT09ZillPWQuZW5kPT09ZC5zdGFydD8xOihhLWQuc3RhcnQpLyhkLmVuZC1kLnN0YXJ0KSxiLmlzQ2xvc2luZyYmKGU9MS1lKSxjPVwid2lkdGhcIj09PWY/Yy53UGFkZGluZzpjLmhQYWRkaW5nLGM9YS1jLGIuc2tpbltmXShsKFwid2lkdGhcIj09PWY/YzpjLWcqZSkpLGIuaW5uZXJbZl0obChcIndpZHRoXCI9PT1cbmY/YzpjLWcqZS1oKmUpKX0sem9vbUluOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJyZW50LGQ9YS5wb3MsZT1hLm9wZW5FZmZlY3QsYz1cImVsYXN0aWNcIj09PWUsaz1mLmV4dGVuZCh7b3BhY2l0eToxfSxkKTtkZWxldGUgay5wb3NpdGlvbjtjPyhkPXRoaXMuZ2V0T3JpZ1Bvc2l0aW9uKCksYS5vcGVuT3BhY2l0eSYmKGQub3BhY2l0eT0wLjEpKTpcImZhZGVcIj09PWUmJihkLm9wYWNpdHk9MC4xKTtiLndyYXAuY3NzKGQpLmFuaW1hdGUoayx7ZHVyYXRpb246XCJub25lXCI9PT1lPzA6YS5vcGVuU3BlZWQsZWFzaW5nOmEub3BlbkVhc2luZyxzdGVwOmM/dGhpcy5zdGVwOm51bGwsY29tcGxldGU6Yi5fYWZ0ZXJab29tSW59KX0sem9vbU91dDpmdW5jdGlvbigpe3ZhciBhPWIuY3VycmVudCxkPWEuY2xvc2VFZmZlY3QsZT1cImVsYXN0aWNcIj09PWQsYz17b3BhY2l0eTowLjF9O2UmJihjPXRoaXMuZ2V0T3JpZ1Bvc2l0aW9uKCksYS5jbG9zZU9wYWNpdHkmJihjLm9wYWNpdHk9MC4xKSk7Yi53cmFwLmFuaW1hdGUoYyxcbntkdXJhdGlvbjpcIm5vbmVcIj09PWQ/MDphLmNsb3NlU3BlZWQsZWFzaW5nOmEuY2xvc2VFYXNpbmcsc3RlcDplP3RoaXMuc3RlcDpudWxsLGNvbXBsZXRlOmIuX2FmdGVyWm9vbU91dH0pfSxjaGFuZ2VJbjpmdW5jdGlvbigpe3ZhciBhPWIuY3VycmVudCxkPWEubmV4dEVmZmVjdCxlPWEucG9zLGM9e29wYWNpdHk6MX0sZj1iLmRpcmVjdGlvbixnO2Uub3BhY2l0eT0wLjE7XCJlbGFzdGljXCI9PT1kJiYoZz1cImRvd25cIj09PWZ8fFwidXBcIj09PWY/XCJ0b3BcIjpcImxlZnRcIixcImRvd25cIj09PWZ8fFwicmlnaHRcIj09PWY/KGVbZ109dyhsKGVbZ10pLTIwMCksY1tnXT1cIis9MjAwcHhcIik6KGVbZ109dyhsKGVbZ10pKzIwMCksY1tnXT1cIi09MjAwcHhcIikpO1wibm9uZVwiPT09ZD9iLl9hZnRlclpvb21JbigpOmIud3JhcC5jc3MoZSkuYW5pbWF0ZShjLHtkdXJhdGlvbjphLm5leHRTcGVlZCxlYXNpbmc6YS5uZXh0RWFzaW5nLGNvbXBsZXRlOmIuX2FmdGVyWm9vbUlufSl9LGNoYW5nZU91dDpmdW5jdGlvbigpe3ZhciBhPVxuYi5wcmV2aW91cyxkPWEucHJldkVmZmVjdCxlPXtvcGFjaXR5OjAuMX0sYz1iLmRpcmVjdGlvbjtcImVsYXN0aWNcIj09PWQmJihlW1wiZG93blwiPT09Y3x8XCJ1cFwiPT09Yz9cInRvcFwiOlwibGVmdFwiXT0oXCJ1cFwiPT09Y3x8XCJsZWZ0XCI9PT1jP1wiLVwiOlwiK1wiKStcIj0yMDBweFwiKTthLndyYXAuYW5pbWF0ZShlLHtkdXJhdGlvbjpcIm5vbmVcIj09PWQ/MDphLnByZXZTcGVlZCxlYXNpbmc6YS5wcmV2RWFzaW5nLGNvbXBsZXRlOmZ1bmN0aW9uKCl7Zih0aGlzKS50cmlnZ2VyKFwib25SZXNldFwiKS5yZW1vdmUoKX19KX19O2IuaGVscGVycy5vdmVybGF5PXtkZWZhdWx0czp7Y2xvc2VDbGljazohMCxzcGVlZE91dDoyMDAsc2hvd0Vhcmx5OiEwLGNzczp7fSxsb2NrZWQ6IXMsZml4ZWQ6ITB9LG92ZXJsYXk6bnVsbCxmaXhlZDohMSxlbDpmKFwiaHRtbFwiKSxjcmVhdGU6ZnVuY3Rpb24oYSl7YT1mLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRzLGEpO3RoaXMub3ZlcmxheSYmdGhpcy5jbG9zZSgpO3RoaXMub3ZlcmxheT1cbmYoJzxkaXYgY2xhc3M9XCJmYW5jeWJveC1vdmVybGF5XCI+PC9kaXY+JykuYXBwZW5kVG8oYi5jb21pbmc/Yi5jb21pbmcucGFyZW50OmEucGFyZW50KTt0aGlzLmZpeGVkPSExO2EuZml4ZWQmJmIuZGVmYXVsdHMuZml4ZWQmJih0aGlzLm92ZXJsYXkuYWRkQ2xhc3MoXCJmYW5jeWJveC1vdmVybGF5LWZpeGVkXCIpLHRoaXMuZml4ZWQ9ITApfSxvcGVuOmZ1bmN0aW9uKGEpe3ZhciBkPXRoaXM7YT1mLmV4dGVuZCh7fSx0aGlzLmRlZmF1bHRzLGEpO3RoaXMub3ZlcmxheT90aGlzLm92ZXJsYXkudW5iaW5kKFwiLm92ZXJsYXlcIikud2lkdGgoXCJhdXRvXCIpLmhlaWdodChcImF1dG9cIik6dGhpcy5jcmVhdGUoYSk7dGhpcy5maXhlZHx8KG4uYmluZChcInJlc2l6ZS5vdmVybGF5XCIsZi5wcm94eSh0aGlzLnVwZGF0ZSx0aGlzKSksdGhpcy51cGRhdGUoKSk7YS5jbG9zZUNsaWNrJiZ0aGlzLm92ZXJsYXkuYmluZChcImNsaWNrLm92ZXJsYXlcIixmdW5jdGlvbihhKXtpZihmKGEudGFyZ2V0KS5oYXNDbGFzcyhcImZhbmN5Ym94LW92ZXJsYXlcIikpcmV0dXJuIGIuaXNBY3RpdmU/XG5iLmNsb3NlKCk6ZC5jbG9zZSgpLCExfSk7dGhpcy5vdmVybGF5LmNzcyhhLmNzcykuc2hvdygpfSxjbG9zZTpmdW5jdGlvbigpe3ZhciBhLGI7bi51bmJpbmQoXCJyZXNpemUub3ZlcmxheVwiKTt0aGlzLmVsLmhhc0NsYXNzKFwiZmFuY3lib3gtbG9ja1wiKSYmKGYoXCIuZmFuY3lib3gtbWFyZ2luXCIpLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtbWFyZ2luXCIpLGE9bi5zY3JvbGxUb3AoKSxiPW4uc2Nyb2xsTGVmdCgpLHRoaXMuZWwucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1sb2NrXCIpLG4uc2Nyb2xsVG9wKGEpLnNjcm9sbExlZnQoYikpO2YoXCIuZmFuY3lib3gtb3ZlcmxheVwiKS5yZW1vdmUoKS5oaWRlKCk7Zi5leHRlbmQodGhpcyx7b3ZlcmxheTpudWxsLGZpeGVkOiExfSl9LHVwZGF0ZTpmdW5jdGlvbigpe3ZhciBhPVwiMTAwJVwiLGI7dGhpcy5vdmVybGF5LndpZHRoKGEpLmhlaWdodChcIjEwMCVcIik7ST8oYj1NYXRoLm1heChHLmRvY3VtZW50RWxlbWVudC5vZmZzZXRXaWR0aCxHLmJvZHkub2Zmc2V0V2lkdGgpLFxucC53aWR0aCgpPmImJihhPXAud2lkdGgoKSkpOnAud2lkdGgoKT5uLndpZHRoKCkmJihhPXAud2lkdGgoKSk7dGhpcy5vdmVybGF5LndpZHRoKGEpLmhlaWdodChwLmhlaWdodCgpKX0sb25SZWFkeTpmdW5jdGlvbihhLGIpe3ZhciBlPXRoaXMub3ZlcmxheTtmKFwiLmZhbmN5Ym94LW92ZXJsYXlcIikuc3RvcCghMCwhMCk7ZXx8dGhpcy5jcmVhdGUoYSk7YS5sb2NrZWQmJih0aGlzLmZpeGVkJiZiLmZpeGVkKSYmKGV8fCh0aGlzLm1hcmdpbj1wLmhlaWdodCgpPm4uaGVpZ2h0KCk/ZihcImh0bWxcIikuY3NzKFwibWFyZ2luLXJpZ2h0XCIpLnJlcGxhY2UoXCJweFwiLFwiXCIpOiExKSxiLmxvY2tlZD10aGlzLm92ZXJsYXkuYXBwZW5kKGIud3JhcCksYi5maXhlZD0hMSk7ITA9PT1hLnNob3dFYXJseSYmdGhpcy5iZWZvcmVTaG93LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYmVmb3JlU2hvdzpmdW5jdGlvbihhLGIpe3ZhciBlLGM7Yi5sb2NrZWQmJighMSE9PXRoaXMubWFyZ2luJiYoZihcIipcIikuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuXCJmaXhlZFwiPT09XG5mKHRoaXMpLmNzcyhcInBvc2l0aW9uXCIpJiYhZih0aGlzKS5oYXNDbGFzcyhcImZhbmN5Ym94LW92ZXJsYXlcIikmJiFmKHRoaXMpLmhhc0NsYXNzKFwiZmFuY3lib3gtd3JhcFwiKX0pLmFkZENsYXNzKFwiZmFuY3lib3gtbWFyZ2luXCIpLHRoaXMuZWwuYWRkQ2xhc3MoXCJmYW5jeWJveC1tYXJnaW5cIikpLGU9bi5zY3JvbGxUb3AoKSxjPW4uc2Nyb2xsTGVmdCgpLHRoaXMuZWwuYWRkQ2xhc3MoXCJmYW5jeWJveC1sb2NrXCIpLG4uc2Nyb2xsVG9wKGUpLnNjcm9sbExlZnQoYykpO3RoaXMub3BlbihhKX0sb25VcGRhdGU6ZnVuY3Rpb24oKXt0aGlzLmZpeGVkfHx0aGlzLnVwZGF0ZSgpfSxhZnRlckNsb3NlOmZ1bmN0aW9uKGEpe3RoaXMub3ZlcmxheSYmIWIuY29taW5nJiZ0aGlzLm92ZXJsYXkuZmFkZU91dChhLnNwZWVkT3V0LGYucHJveHkodGhpcy5jbG9zZSx0aGlzKSl9fTtiLmhlbHBlcnMudGl0bGU9e2RlZmF1bHRzOnt0eXBlOlwiZmxvYXRcIixwb3NpdGlvbjpcImJvdHRvbVwifSxiZWZvcmVTaG93OmZ1bmN0aW9uKGEpe3ZhciBkPVxuYi5jdXJyZW50LGU9ZC50aXRsZSxjPWEudHlwZTtmLmlzRnVuY3Rpb24oZSkmJihlPWUuY2FsbChkLmVsZW1lbnQsZCkpO2lmKHEoZSkmJlwiXCIhPT1mLnRyaW0oZSkpe2Q9ZignPGRpdiBjbGFzcz1cImZhbmN5Ym94LXRpdGxlIGZhbmN5Ym94LXRpdGxlLScrYysnLXdyYXBcIj4nK2UrXCI8L2Rpdj5cIik7c3dpdGNoKGMpe2Nhc2UgXCJpbnNpZGVcIjpjPWIuc2tpbjticmVhaztjYXNlIFwib3V0c2lkZVwiOmM9Yi53cmFwO2JyZWFrO2Nhc2UgXCJvdmVyXCI6Yz1iLmlubmVyO2JyZWFrO2RlZmF1bHQ6Yz1iLnNraW4sZC5hcHBlbmRUbyhcImJvZHlcIiksSSYmZC53aWR0aChkLndpZHRoKCkpLGQud3JhcElubmVyKCc8c3BhbiBjbGFzcz1cImNoaWxkXCI+PC9zcGFuPicpLGIuY3VycmVudC5tYXJnaW5bMl0rPU1hdGguYWJzKGwoZC5jc3MoXCJtYXJnaW4tYm90dG9tXCIpKSl9ZFtcInRvcFwiPT09YS5wb3NpdGlvbj9cInByZXBlbmRUb1wiOlwiYXBwZW5kVG9cIl0oYyl9fX07Zi5mbi5mYW5jeWJveD1mdW5jdGlvbihhKXt2YXIgZCxcbmU9Zih0aGlzKSxjPXRoaXMuc2VsZWN0b3J8fFwiXCIsaz1mdW5jdGlvbihnKXt2YXIgaD1mKHRoaXMpLmJsdXIoKSxqPWQsayxsOyFnLmN0cmxLZXkmJighZy5hbHRLZXkmJiFnLnNoaWZ0S2V5JiYhZy5tZXRhS2V5KSYmIWguaXMoXCIuZmFuY3lib3gtd3JhcFwiKSYmKGs9YS5ncm91cEF0dHJ8fFwiZGF0YS1mYW5jeWJveC1ncm91cFwiLGw9aC5hdHRyKGspLGx8fChrPVwicmVsXCIsbD1oLmdldCgwKVtrXSksbCYmKFwiXCIhPT1sJiZcIm5vZm9sbG93XCIhPT1sKSYmKGg9Yy5sZW5ndGg/ZihjKTplLGg9aC5maWx0ZXIoXCJbXCIraysnPVwiJytsKydcIl0nKSxqPWguaW5kZXgodGhpcykpLGEuaW5kZXg9aiwhMSE9PWIub3BlbihoLGEpJiZnLnByZXZlbnREZWZhdWx0KCkpfTthPWF8fHt9O2Q9YS5pbmRleHx8MDshY3x8ITE9PT1hLmxpdmU/ZS51bmJpbmQoXCJjbGljay5mYi1zdGFydFwiKS5iaW5kKFwiY2xpY2suZmItc3RhcnRcIixrKTpwLnVuZGVsZWdhdGUoYyxcImNsaWNrLmZiLXN0YXJ0XCIpLmRlbGVnYXRlKGMrXG5cIjpub3QoJy5mYW5jeWJveC1pdGVtLCAuZmFuY3lib3gtbmF2JylcIixcImNsaWNrLmZiLXN0YXJ0XCIsayk7dGhpcy5maWx0ZXIoXCJbZGF0YS1mYW5jeWJveC1zdGFydD0xXVwiKS50cmlnZ2VyKFwiY2xpY2tcIik7cmV0dXJuIHRoaXN9O3AucmVhZHkoZnVuY3Rpb24oKXt2YXIgYSxkO2Yuc2Nyb2xsYmFyV2lkdGg9PT12JiYoZi5zY3JvbGxiYXJXaWR0aD1mdW5jdGlvbigpe3ZhciBhPWYoJzxkaXYgc3R5bGU9XCJ3aWR0aDo1MHB4O2hlaWdodDo1MHB4O292ZXJmbG93OmF1dG9cIj48ZGl2Lz48L2Rpdj4nKS5hcHBlbmRUbyhcImJvZHlcIiksYj1hLmNoaWxkcmVuKCksYj1iLmlubmVyV2lkdGgoKS1iLmhlaWdodCg5OSkuaW5uZXJXaWR0aCgpO2EucmVtb3ZlKCk7cmV0dXJuIGJ9KTtpZihmLnN1cHBvcnQuZml4ZWRQb3NpdGlvbj09PXYpe2E9Zi5zdXBwb3J0O2Q9ZignPGRpdiBzdHlsZT1cInBvc2l0aW9uOmZpeGVkO3RvcDoyMHB4O1wiPjwvZGl2PicpLmFwcGVuZFRvKFwiYm9keVwiKTt2YXIgZT0yMD09PVxuZFswXS5vZmZzZXRUb3B8fDE1PT09ZFswXS5vZmZzZXRUb3A7ZC5yZW1vdmUoKTthLmZpeGVkUG9zaXRpb249ZX1mLmV4dGVuZChiLmRlZmF1bHRzLHtzY3JvbGxiYXJXaWR0aDpmLnNjcm9sbGJhcldpZHRoKCksZml4ZWQ6Zi5zdXBwb3J0LmZpeGVkUG9zaXRpb24scGFyZW50OmYoXCJib2R5XCIpfSk7YT1mKHIpLndpZHRoKCk7Si5hZGRDbGFzcyhcImZhbmN5Ym94LWxvY2stdGVzdFwiKTtkPWYocikud2lkdGgoKTtKLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtbG9jay10ZXN0XCIpO2YoXCI8c3R5bGUgdHlwZT0ndGV4dC9jc3MnPi5mYW5jeWJveC1tYXJnaW57bWFyZ2luLXJpZ2h0OlwiKyhkLWEpK1wicHg7fTwvc3R5bGU+XCIpLmFwcGVuZFRvKFwiaGVhZFwiKX0pfSkod2luZG93LGRvY3VtZW50LGpRdWVyeSk7IiwiLypcbiBBbmd1bGFySlMgdjEuMy4wLWJldGEuMTZcbiAoYykgMjAxMC0yMDE0IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuIExpY2Vuc2U6IE1JVFxuKi9cbihmdW5jdGlvbihQLFcsdCl7J3VzZSBzdHJpY3QnO2Z1bmN0aW9uIE8oYil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdLGMsYT1cIltcIisoYj9iK1wiOlwiOlwiXCIpK2ErXCJdIGh0dHA6Ly9lcnJvcnMuYW5ndWxhcmpzLm9yZy8xLjMuMC1iZXRhLjE2L1wiKyhiP2IrXCIvXCI6XCJcIikrYTtmb3IoYz0xO2M8YXJndW1lbnRzLmxlbmd0aDtjKyspYT1hKygxPT1jP1wiP1wiOlwiJlwiKStcInBcIisoYy0xKStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoXCJmdW5jdGlvblwiPT10eXBlb2YgYXJndW1lbnRzW2NdP2FyZ3VtZW50c1tjXS50b1N0cmluZygpLnJlcGxhY2UoLyBcXHtbXFxzXFxTXSokLyxcIlwiKTpcInVuZGVmaW5lZFwiPT10eXBlb2YgYXJndW1lbnRzW2NdP1widW5kZWZpbmVkXCI6XCJzdHJpbmdcIiE9dHlwZW9mIGFyZ3VtZW50c1tjXT9KU09OLnN0cmluZ2lmeShhcmd1bWVudHNbY10pOmFyZ3VtZW50c1tjXSk7cmV0dXJuIEVycm9yKGEpfX1mdW5jdGlvbiBiYihiKXtpZihudWxsPT1ifHxMYShiKSlyZXR1cm4hMTtcbnZhciBhPWIubGVuZ3RoO3JldHVybiAxPT09Yi5ub2RlVHlwZSYmYT8hMDpHKGIpfHxNKGIpfHwwPT09YXx8XCJudW1iZXJcIj09PXR5cGVvZiBhJiYwPGEmJmEtMSBpbiBifWZ1bmN0aW9uIHEoYixhLGMpe3ZhciBkLGU7aWYoYilpZihBKGIpKWZvcihkIGluIGIpXCJwcm90b3R5cGVcIj09ZHx8KFwibGVuZ3RoXCI9PWR8fFwibmFtZVwiPT1kfHxiLmhhc093blByb3BlcnR5JiYhYi5oYXNPd25Qcm9wZXJ0eShkKSl8fGEuY2FsbChjLGJbZF0sZCk7ZWxzZSBpZihNKGIpfHxiYihiKSlmb3IoZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKylhLmNhbGwoYyxiW2RdLGQpO2Vsc2UgaWYoYi5mb3JFYWNoJiZiLmZvckVhY2ghPT1xKWIuZm9yRWFjaChhLGMpO2Vsc2UgZm9yKGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiZhLmNhbGwoYyxiW2RdLGQpO3JldHVybiBifWZ1bmN0aW9uICRiKGIpe3ZhciBhPVtdLGM7Zm9yKGMgaW4gYiliLmhhc093blByb3BlcnR5KGMpJiZhLnB1c2goYyk7cmV0dXJuIGEuc29ydCgpfVxuZnVuY3Rpb24gaGQoYixhLGMpe2Zvcih2YXIgZD0kYihiKSxlPTA7ZTxkLmxlbmd0aDtlKyspYS5jYWxsKGMsYltkW2VdXSxkW2VdKTtyZXR1cm4gZH1mdW5jdGlvbiBhYyhiKXtyZXR1cm4gZnVuY3Rpb24oYSxjKXtiKGMsYSl9fWZ1bmN0aW9uIGlkKCl7cmV0dXJuKytjYn1mdW5jdGlvbiBiYyhiLGEpe2E/Yi4kJGhhc2hLZXk9YTpkZWxldGUgYi4kJGhhc2hLZXl9ZnVuY3Rpb24gRShiKXt2YXIgYT1iLiQkaGFzaEtleTtxKGFyZ3VtZW50cyxmdW5jdGlvbihhKXthIT09YiYmcShhLGZ1bmN0aW9uKGEsYyl7YltjXT1hfSl9KTtiYyhiLGEpO3JldHVybiBifWZ1bmN0aW9uIFUoYil7cmV0dXJuIHBhcnNlSW50KGIsMTApfWZ1bmN0aW9uIGNjKGIsYSl7cmV0dXJuIEUobmV3IChFKGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOmJ9KSksYSl9ZnVuY3Rpb24gQigpe31mdW5jdGlvbiBCYShiKXtyZXR1cm4gYn1mdW5jdGlvbiBiYShiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYn19ZnVuY3Rpb24gRihiKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09XG50eXBlb2YgYn1mdW5jdGlvbiB2KGIpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgYn1mdW5jdGlvbiBRKGIpe3JldHVybiBudWxsIT1iJiZcIm9iamVjdFwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gRyhiKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gQ2EoYil7cmV0dXJuXCJudW1iZXJcIj09PXR5cGVvZiBifWZ1bmN0aW9uIGRhKGIpe3JldHVyblwiW29iamVjdCBEYXRlXVwiPT09eWEuY2FsbChiKX1mdW5jdGlvbiBBKGIpe3JldHVyblwiZnVuY3Rpb25cIj09PXR5cGVvZiBifWZ1bmN0aW9uIGRiKGIpe3JldHVyblwiW29iamVjdCBSZWdFeHBdXCI9PT15YS5jYWxsKGIpfWZ1bmN0aW9uIExhKGIpe3JldHVybiBiJiZiLndpbmRvdz09PWJ9ZnVuY3Rpb24gamQoYil7cmV0dXJuISghYnx8IShiLm5vZGVOYW1lfHxiLnByb3AmJmIuYXR0ciYmYi5maW5kKSl9ZnVuY3Rpb24ga2QoYil7dmFyIGE9e307Yj1iLnNwbGl0KFwiLFwiKTt2YXIgYztmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKWFbYltjXV09XG4hMDtyZXR1cm4gYX1mdW5jdGlvbiBsZChiLGEsYyl7dmFyIGQ9W107cShiLGZ1bmN0aW9uKGIsZixoKXtkLnB1c2goYS5jYWxsKGMsYixmLGgpKX0pO3JldHVybiBkfWZ1bmN0aW9uIE1hKGIsYSl7aWYoYi5pbmRleE9mKXJldHVybiBiLmluZGV4T2YoYSk7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDtjKyspaWYoYT09PWJbY10pcmV0dXJuIGM7cmV0dXJuLTF9ZnVuY3Rpb24gRGEoYixhKXt2YXIgYz1NYShiLGEpOzA8PWMmJmIuc3BsaWNlKGMsMSk7cmV0dXJuIGF9ZnVuY3Rpb24gRWEoYixhLGMsZCl7aWYoTGEoYil8fGImJmIuJGV2YWxBc3luYyYmYi4kd2F0Y2gpdGhyb3cgTmEoXCJjcHdzXCIpO2lmKGEpe2lmKGI9PT1hKXRocm93IE5hKFwiY3BpXCIpO2M9Y3x8W107ZD1kfHxbXTtpZihRKGIpKXt2YXIgZT1NYShjLGIpO2lmKC0xIT09ZSlyZXR1cm4gZFtlXTtjLnB1c2goYik7ZC5wdXNoKGEpfWlmKE0oYikpZm9yKHZhciBmPWEubGVuZ3RoPTA7ZjxiLmxlbmd0aDtmKyspZT1FYShiW2ZdLFxubnVsbCxjLGQpLFEoYltmXSkmJihjLnB1c2goYltmXSksZC5wdXNoKGUpKSxhLnB1c2goZSk7ZWxzZXt2YXIgaD1hLiQkaGFzaEtleTtxKGEsZnVuY3Rpb24oYixjKXtkZWxldGUgYVtjXX0pO2ZvcihmIGluIGIpYi5oYXNPd25Qcm9wZXJ0eShmKSYmKGU9RWEoYltmXSxudWxsLGMsZCksUShiW2ZdKSYmKGMucHVzaChiW2ZdKSxkLnB1c2goZSkpLGFbZl09ZSk7YmMoYSxoKX19ZWxzZSBpZihhPWIpTShiKT9hPUVhKGIsW10sYyxkKTpkYShiKT9hPW5ldyBEYXRlKGIuZ2V0VGltZSgpKTpkYihiKT9hPVJlZ0V4cChiLnNvdXJjZSk6UShiKSYmKGU9T2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YoYikpLGE9RWEoYixlLGMsZCkpO3JldHVybiBhfWZ1bmN0aW9uIGphKGIsYSl7dmFyIGM9MDtpZihNKGIpKWZvcihhPWF8fFtdO2M8Yi5sZW5ndGg7YysrKWFbY109YltjXTtlbHNlIGlmKFEoYikpe2E9YXx8e307Zm9yKHZhciBkPU9iamVjdC5rZXlzKGIpLGU9ZC5sZW5ndGg7YzxcbmU7YysrKXt2YXIgZj1kW2NdO2lmKFwiJFwiIT09Zi5jaGFyQXQoMCl8fFwiJFwiIT09Zi5jaGFyQXQoMSkpYVtmXT1iW2ZdfX1yZXR1cm4gYXx8Yn1mdW5jdGlvbiByYShiLGEpe2lmKGI9PT1hKXJldHVybiEwO2lmKG51bGw9PT1ifHxudWxsPT09YSlyZXR1cm4hMTtpZihiIT09YiYmYSE9PWEpcmV0dXJuITA7dmFyIGM9dHlwZW9mIGIsZDtpZihjPT10eXBlb2YgYSYmXCJvYmplY3RcIj09YylpZihNKGIpKXtpZighTShhKSlyZXR1cm4hMTtpZigoYz1iLmxlbmd0aCk9PWEubGVuZ3RoKXtmb3IoZD0wO2Q8YztkKyspaWYoIXJhKGJbZF0sYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9fWVsc2V7aWYoZGEoYikpcmV0dXJuIGRhKGEpJiZiLmdldFRpbWUoKT09YS5nZXRUaW1lKCk7aWYoZGIoYikmJmRiKGEpKXJldHVybiBiLnRvU3RyaW5nKCk9PWEudG9TdHJpbmcoKTtpZihiJiZiLiRldmFsQXN5bmMmJmIuJHdhdGNofHxhJiZhLiRldmFsQXN5bmMmJmEuJHdhdGNofHxMYShiKXx8TGEoYSl8fE0oYSkpcmV0dXJuITE7XG5jPXt9O2ZvcihkIGluIGIpaWYoXCIkXCIhPT1kLmNoYXJBdCgwKSYmIUEoYltkXSkpe2lmKCFyYShiW2RdLGFbZF0pKXJldHVybiExO2NbZF09ITB9Zm9yKGQgaW4gYSlpZighYy5oYXNPd25Qcm9wZXJ0eShkKSYmXCIkXCIhPT1kLmNoYXJBdCgwKSYmYVtkXSE9PXQmJiFBKGFbZF0pKXJldHVybiExO3JldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIENiKGIsYSl7dmFyIGM9Mjxhcmd1bWVudHMubGVuZ3RoP2thLmNhbGwoYXJndW1lbnRzLDIpOltdO3JldHVybiFBKGEpfHxhIGluc3RhbmNlb2YgUmVnRXhwP2E6Yy5sZW5ndGg/ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9hLmFwcGx5KGIsYy5jb25jYXQoa2EuY2FsbChhcmd1bWVudHMsMCkpKTphLmFwcGx5KGIsYyl9OmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/YS5hcHBseShiLGFyZ3VtZW50cyk6YS5jYWxsKGIpfX1mdW5jdGlvbiBtZChiLGEpe3ZhciBjPWE7XCJzdHJpbmdcIj09PXR5cGVvZiBiJiZcIiRcIj09PVxuYi5jaGFyQXQoMCkmJlwiJFwiPT09Yi5jaGFyQXQoMSk/Yz10OkxhKGEpP2M9XCIkV0lORE9XXCI6YSYmVz09PWE/Yz1cIiRET0NVTUVOVFwiOmEmJihhLiRldmFsQXN5bmMmJmEuJHdhdGNoKSYmKGM9XCIkU0NPUEVcIik7cmV0dXJuIGN9ZnVuY3Rpb24gc2EoYixhKXtyZXR1cm5cInVuZGVmaW5lZFwiPT09dHlwZW9mIGI/dDpKU09OLnN0cmluZ2lmeShiLG1kLGE/XCIgIFwiOm51bGwpfWZ1bmN0aW9uIGRjKGIpe3JldHVybiBHKGIpP0pTT04ucGFyc2UoYik6Yn1mdW5jdGlvbiBnYShiKXtiPXooYikuY2xvbmUoKTt0cnl7Yi5lbXB0eSgpfWNhdGNoKGEpe312YXIgYz16KFwiPGRpdj5cIikuYXBwZW5kKGIpLmh0bWwoKTt0cnl7cmV0dXJuIDM9PT1iWzBdLm5vZGVUeXBlP0ooYyk6Yy5tYXRjaCgvXig8W14+XSs+KS8pWzFdLnJlcGxhY2UoL148KFtcXHdcXC1dKykvLGZ1bmN0aW9uKGEsYil7cmV0dXJuXCI8XCIrSihiKX0pfWNhdGNoKGQpe3JldHVybiBKKGMpfX1mdW5jdGlvbiBlYyhiKXt0cnl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChiKX1jYXRjaChhKXt9fVxuZnVuY3Rpb24gZmMoYil7dmFyIGE9e30sYyxkO3EoKGJ8fFwiXCIpLnNwbGl0KFwiJlwiKSxmdW5jdGlvbihiKXtiJiYoYz1iLnJlcGxhY2UoL1xcKy9nLFwiJTIwXCIpLnNwbGl0KFwiPVwiKSxkPWVjKGNbMF0pLHYoZCkmJihiPXYoY1sxXSk/ZWMoY1sxXSk6ITAsRGIuY2FsbChhLGQpP00oYVtkXSk/YVtkXS5wdXNoKGIpOmFbZF09W2FbZF0sYl06YVtkXT1iKSl9KTtyZXR1cm4gYX1mdW5jdGlvbiBFYihiKXt2YXIgYT1bXTtxKGIsZnVuY3Rpb24oYixkKXtNKGIpP3EoYixmdW5jdGlvbihiKXthLnB1c2goemEoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK3phKGIsITApKSl9KTphLnB1c2goemEoZCwhMCkrKCEwPT09Yj9cIlwiOlwiPVwiK3phKGIsITApKSl9KTtyZXR1cm4gYS5sZW5ndGg/YS5qb2luKFwiJlwiKTpcIlwifWZ1bmN0aW9uIGViKGIpe3JldHVybiB6YShiLCEwKS5yZXBsYWNlKC8lMjYvZ2ksXCImXCIpLnJlcGxhY2UoLyUzRC9naSxcIj1cIikucmVwbGFjZSgvJTJCL2dpLFwiK1wiKX1mdW5jdGlvbiB6YShiLGEpe3JldHVybiBlbmNvZGVVUklDb21wb25lbnQoYikucmVwbGFjZSgvJTQwL2dpLFxuXCJAXCIpLnJlcGxhY2UoLyUzQS9naSxcIjpcIikucmVwbGFjZSgvJTI0L2csXCIkXCIpLnJlcGxhY2UoLyUyQy9naSxcIixcIikucmVwbGFjZSgvJTIwL2csYT9cIiUyMFwiOlwiK1wiKX1mdW5jdGlvbiBuZChiLGEpe3ZhciBjLGQsZT1mYi5sZW5ndGg7Yj16KGIpO2ZvcihkPTA7ZDxlOysrZClpZihjPWZiW2RdK2EsRyhjPWIuYXR0cihjKSkpcmV0dXJuIGM7cmV0dXJuIG51bGx9ZnVuY3Rpb24gb2QoYixhKXt2YXIgYyxkLGU9e307cShmYixmdW5jdGlvbihhKXthKz1cImFwcFwiOyFjJiYoYi5oYXNBdHRyaWJ1dGUmJmIuaGFzQXR0cmlidXRlKGEpKSYmKGM9YixkPWIuZ2V0QXR0cmlidXRlKGEpKX0pO3EoZmIsZnVuY3Rpb24oYSl7YSs9XCJhcHBcIjt2YXIgZTshYyYmKGU9Yi5xdWVyeVNlbGVjdG9yKFwiW1wiK2EucmVwbGFjZShcIjpcIixcIlxcXFw6XCIpK1wiXVwiKSkmJihjPWUsZD1lLmdldEF0dHJpYnV0ZShhKSl9KTtjJiYoZS5zdHJpY3REaT1udWxsIT09bmQoYyxcInN0cmljdC1kaVwiKSxhKGMsZD9bZF06W10sZSkpfVxuZnVuY3Rpb24gZ2MoYixhLGMpe1EoYyl8fChjPXt9KTtjPUUoe3N0cmljdERpOiExfSxjKTt2YXIgZD1mdW5jdGlvbigpe2I9eihiKTtpZihiLmluamVjdG9yKCkpe3ZhciBkPWJbMF09PT1XP1wiZG9jdW1lbnRcIjpnYShiKTt0aHJvdyBOYShcImJ0c3RycGRcIixkKTt9YT1hfHxbXTthLnVuc2hpZnQoW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnZhbHVlKFwiJHJvb3RFbGVtZW50XCIsYil9XSk7YS51bnNoaWZ0KFwibmdcIik7ZD1GYihhLGMuc3RyaWN0RGkpO2QuaW52b2tlKFtcIiRyb290U2NvcGVcIixcIiRyb290RWxlbWVudFwiLFwiJGNvbXBpbGVcIixcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEsYixjLGQpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7Yi5kYXRhKFwiJGluamVjdG9yXCIsZCk7YyhiKShhKX0pfV0pO3JldHVybiBkfSxlPS9eTkdfREVGRVJfQk9PVFNUUkFQIS87aWYoUCYmIWUudGVzdChQLm5hbWUpKXJldHVybiBkKCk7UC5uYW1lPVAubmFtZS5yZXBsYWNlKGUsXCJcIik7T2EucmVzdW1lQm9vdHN0cmFwPVxuZnVuY3Rpb24oYil7cShiLGZ1bmN0aW9uKGIpe2EucHVzaChiKX0pO2QoKX19ZnVuY3Rpb24gZ2IoYixhKXthPWF8fFwiX1wiO3JldHVybiBiLnJlcGxhY2UocGQsZnVuY3Rpb24oYixkKXtyZXR1cm4oZD9hOlwiXCIpK2IudG9Mb3dlckNhc2UoKX0pfWZ1bmN0aW9uIHFkKCl7dmFyIGI7KHRhPVAualF1ZXJ5KSYmdGEuZm4ub24/KHo9dGEsRSh0YS5mbix7c2NvcGU6RmEuc2NvcGUsaXNvbGF0ZVNjb3BlOkZhLmlzb2xhdGVTY29wZSxjb250cm9sbGVyOkZhLmNvbnRyb2xsZXIsaW5qZWN0b3I6RmEuaW5qZWN0b3IsaW5oZXJpdGVkRGF0YTpGYS5pbmhlcml0ZWREYXRhfSksYj10YS5jbGVhbkRhdGEsYj1iLiQkb3JpZ2luYWx8fGIsdGEuY2xlYW5EYXRhPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYz0wLGQ7bnVsbCE9KGQ9YVtjXSk7YysrKXRhKGQpLnRyaWdnZXJIYW5kbGVyKFwiJGRlc3Ryb3lcIik7YihhKX0sdGEuY2xlYW5EYXRhLiQkb3JpZ2luYWw9Yik6ej1WO09hLmVsZW1lbnQ9en1mdW5jdGlvbiBHYihiLFxuYSxjKXtpZighYil0aHJvdyBOYShcImFyZXFcIixhfHxcIj9cIixjfHxcInJlcXVpcmVkXCIpO3JldHVybiBifWZ1bmN0aW9uIFBhKGIsYSxjKXtjJiZNKGIpJiYoYj1iW2IubGVuZ3RoLTFdKTtHYihBKGIpLGEsXCJub3QgYSBmdW5jdGlvbiwgZ290IFwiKyhiJiZcIm9iamVjdFwiPT09dHlwZW9mIGI/Yi5jb25zdHJ1Y3Rvci5uYW1lfHxcIk9iamVjdFwiOnR5cGVvZiBiKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gQWEoYixhKXtpZihcImhhc093blByb3BlcnR5XCI9PT1iKXRocm93IE5hKFwiYmFkbmFtZVwiLGEpO31mdW5jdGlvbiBoYyhiLGEsYyl7aWYoIWEpcmV0dXJuIGI7YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGQsZT1iLGY9YS5sZW5ndGgsaD0wO2g8ZjtoKyspZD1hW2hdLGImJihiPShlPWIpW2RdKTtyZXR1cm4hYyYmQShiKT9DYihlLGIpOmJ9ZnVuY3Rpb24gaGIoYil7dmFyIGE9YlswXTtiPWJbYi5sZW5ndGgtMV07aWYoYT09PWIpcmV0dXJuIHooYSk7dmFyIGM9W2FdO2Rve2E9YS5uZXh0U2libGluZztpZighYSlicmVhaztcbmMucHVzaChhKX13aGlsZShhIT09Yik7cmV0dXJuIHooYyl9ZnVuY3Rpb24gcmQoYil7dmFyIGE9TyhcIiRpbmplY3RvclwiKSxjPU8oXCJuZ1wiKTtiPWIuYW5ndWxhcnx8KGIuYW5ndWxhcj17fSk7Yi4kJG1pbkVycj1iLiQkbWluRXJyfHxPO3JldHVybiBiLm1vZHVsZXx8KGIubW9kdWxlPWZ1bmN0aW9uKCl7dmFyIGI9e307cmV0dXJuIGZ1bmN0aW9uKGUsZixoKXtpZihcImhhc093blByb3BlcnR5XCI9PT1lKXRocm93IGMoXCJiYWRuYW1lXCIsXCJtb2R1bGVcIik7ZiYmYi5oYXNPd25Qcm9wZXJ0eShlKSYmKGJbZV09bnVsbCk7cmV0dXJuIGJbZV18fChiW2VdPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihhLGQsZSxmKXtmfHwoZj1jKTtyZXR1cm4gZnVuY3Rpb24oKXtmW2V8fFwicHVzaFwiXShbYSxkLGFyZ3VtZW50c10pO3JldHVybiBrfX1pZighZil0aHJvdyBhKFwibm9tb2RcIixlKTt2YXIgYz1bXSxkPVtdLG09W10scD1iKFwiJGluamVjdG9yXCIsXCJpbnZva2VcIixcInB1c2hcIixkKSxrPXtfaW52b2tlUXVldWU6Yyxcbl9jb25maWdCbG9ja3M6ZCxfcnVuQmxvY2tzOm0scmVxdWlyZXM6ZixuYW1lOmUscHJvdmlkZXI6YihcIiRwcm92aWRlXCIsXCJwcm92aWRlclwiKSxmYWN0b3J5OmIoXCIkcHJvdmlkZVwiLFwiZmFjdG9yeVwiKSxzZXJ2aWNlOmIoXCIkcHJvdmlkZVwiLFwic2VydmljZVwiKSx2YWx1ZTpiKFwiJHByb3ZpZGVcIixcInZhbHVlXCIpLGNvbnN0YW50OmIoXCIkcHJvdmlkZVwiLFwiY29uc3RhbnRcIixcInVuc2hpZnRcIiksYW5pbWF0aW9uOmIoXCIkYW5pbWF0ZVByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxmaWx0ZXI6YihcIiRmaWx0ZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksY29udHJvbGxlcjpiKFwiJGNvbnRyb2xsZXJQcm92aWRlclwiLFwicmVnaXN0ZXJcIiksZGlyZWN0aXZlOmIoXCIkY29tcGlsZVByb3ZpZGVyXCIsXCJkaXJlY3RpdmVcIiksY29uZmlnOnAscnVuOmZ1bmN0aW9uKGEpe20ucHVzaChhKTtyZXR1cm4gdGhpc319O2gmJnAoaCk7cmV0dXJuIGt9KCkpfX0oKSl9ZnVuY3Rpb24gc2QoYil7RShiLHtib290c3RyYXA6Z2MsY29weTpFYSxcbmV4dGVuZDpFLGVxdWFsczpyYSxlbGVtZW50OnosZm9yRWFjaDpxLGluamVjdG9yOkZiLG5vb3A6QixiaW5kOkNiLHRvSnNvbjpzYSxmcm9tSnNvbjpkYyxpZGVudGl0eTpCYSxpc1VuZGVmaW5lZDpGLGlzRGVmaW5lZDp2LGlzU3RyaW5nOkcsaXNGdW5jdGlvbjpBLGlzT2JqZWN0OlEsaXNOdW1iZXI6Q2EsaXNFbGVtZW50OmpkLGlzQXJyYXk6TSx2ZXJzaW9uOnRkLGlzRGF0ZTpkYSxsb3dlcmNhc2U6Six1cHBlcmNhc2U6aWIsY2FsbGJhY2tzOntjb3VudGVyOjB9LCQkbWluRXJyOk8sJCRjc3A6UWF9KTtSYT1yZChQKTt0cnl7UmEoXCJuZ0xvY2FsZVwiKX1jYXRjaChhKXtSYShcIm5nTG9jYWxlXCIsW10pLnByb3ZpZGVyKFwiJGxvY2FsZVwiLHVkKX1SYShcIm5nXCIsW1wibmdMb2NhbGVcIl0sW1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXthLnByb3ZpZGVyKHskJHNhbml0aXplVXJpOnZkfSk7YS5wcm92aWRlcihcIiRjb21waWxlXCIsaWMpLmRpcmVjdGl2ZSh7YTp3ZCxpbnB1dDpqYyx0ZXh0YXJlYTpqYyxcbmZvcm06eGQsc2NyaXB0OnlkLHNlbGVjdDp6ZCxzdHlsZTpBZCxvcHRpb246QmQsbmdCaW5kOkNkLG5nQmluZEh0bWw6RGQsbmdCaW5kVGVtcGxhdGU6RWQsbmdDbGFzczpGZCxuZ0NsYXNzRXZlbjpHZCxuZ0NsYXNzT2RkOkhkLG5nQ2xvYWs6SWQsbmdDb250cm9sbGVyOkpkLG5nRm9ybTpLZCxuZ0hpZGU6TGQsbmdJZjpNZCxuZ0luY2x1ZGU6TmQsbmdJbml0Ok9kLG5nTm9uQmluZGFibGU6UGQsbmdQbHVyYWxpemU6UWQsbmdSZXBlYXQ6UmQsbmdTaG93OlNkLG5nU3R5bGU6VGQsbmdTd2l0Y2g6VWQsbmdTd2l0Y2hXaGVuOlZkLG5nU3dpdGNoRGVmYXVsdDpXZCxuZ09wdGlvbnM6WGQsbmdUcmFuc2NsdWRlOllkLG5nTW9kZWw6WmQsbmdMaXN0OiRkLG5nQ2hhbmdlOmFlLHBhdHRlcm46a2MsbmdQYXR0ZXJuOmtjLHJlcXVpcmVkOmxjLG5nUmVxdWlyZWQ6bGMsbWlubGVuZ3RoOm1jLG5nTWlubGVuZ3RoOm1jLG1heGxlbmd0aDpuYyxuZ01heGxlbmd0aDpuYyxuZ1ZhbHVlOmJlLG5nTW9kZWxPcHRpb25zOmNlfSkuZGlyZWN0aXZlKHtuZ0luY2x1ZGU6ZGV9KS5kaXJlY3RpdmUoamIpLmRpcmVjdGl2ZShvYyk7XG5hLnByb3ZpZGVyKHskYW5jaG9yU2Nyb2xsOmVlLCRhbmltYXRlOmZlLCRicm93c2VyOmdlLCRjYWNoZUZhY3Rvcnk6aGUsJGNvbnRyb2xsZXI6aWUsJGRvY3VtZW50OmplLCRleGNlcHRpb25IYW5kbGVyOmtlLCRmaWx0ZXI6cGMsJGludGVycG9sYXRlOmxlLCRpbnRlcnZhbDptZSwkaHR0cDpuZSwkaHR0cEJhY2tlbmQ6b2UsJGxvY2F0aW9uOnBlLCRsb2c6cWUsJHBhcnNlOnJlLCRyb290U2NvcGU6c2UsJHE6dGUsJCRxOnVlLCRzY2U6dmUsJHNjZURlbGVnYXRlOndlLCRzbmlmZmVyOnhlLCR0ZW1wbGF0ZUNhY2hlOnllLCR0aW1lb3V0OnplLCR3aW5kb3c6QWUsJCRyQUY6QmUsJCRhc3luY0NhbGxiYWNrOkNlfSl9XSl9ZnVuY3Rpb24gU2EoYil7cmV0dXJuIGIucmVwbGFjZShEZSxmdW5jdGlvbihhLGIsZCxlKXtyZXR1cm4gZT9kLnRvVXBwZXJDYXNlKCk6ZH0pLnJlcGxhY2UoRWUsXCJNb3okMVwiKX1mdW5jdGlvbiBGZShiLGEpe3ZhciBjLGQsZT1hLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcbmY9W107aWYoSGIudGVzdChiKSl7Yz1jfHxlLmFwcGVuZENoaWxkKGEuY3JlYXRlRWxlbWVudChcImRpdlwiKSk7ZD0oR2UuZXhlYyhiKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCk7ZD1lYVtkXXx8ZWEuX2RlZmF1bHQ7Yy5pbm5lckhUTUw9ZFsxXStiLnJlcGxhY2UoSGUsXCI8JDE+PC8kMj5cIikrZFsyXTtmb3IoZD1kWzBdO2QtLTspYz1jLmxhc3RDaGlsZDtmPWYuY29uY2F0KGthLmNhbGwoYy5jaGlsZE5vZGVzLHZvaWQgMCkpO2M9ZS5maXJzdENoaWxkO2MudGV4dENvbnRlbnQ9XCJcIn1lbHNlIGYucHVzaChhLmNyZWF0ZVRleHROb2RlKGIpKTtlLnRleHRDb250ZW50PVwiXCI7ZS5pbm5lckhUTUw9XCJcIjtxKGYsZnVuY3Rpb24oYSl7ZS5hcHBlbmRDaGlsZChhKX0pO3JldHVybiBlfWZ1bmN0aW9uIFYoYil7aWYoYiBpbnN0YW5jZW9mIFYpcmV0dXJuIGI7RyhiKSYmKGI9WihiKSk7aWYoISh0aGlzIGluc3RhbmNlb2YgVikpe2lmKEcoYikmJlwiPFwiIT1iLmNoYXJBdCgwKSl0aHJvdyBJYihcIm5vc2VsXCIpO1xucmV0dXJuIG5ldyBWKGIpfWlmKEcoYikpe3ZhciBhO2E9Vzt2YXIgYztiPShjPUllLmV4ZWMoYikpP1thLmNyZWF0ZUVsZW1lbnQoY1sxXSldOihjPUZlKGIsYSkpP2MuY2hpbGROb2RlczpbXX1xYyh0aGlzLGIpfWZ1bmN0aW9uIEpiKGIpe3JldHVybiBiLmNsb25lTm9kZSghMCl9ZnVuY3Rpb24ga2IoYixhKXthfHxsYihiKTtpZihiLmNoaWxkTm9kZXMmJmIuY2hpbGROb2Rlcy5sZW5ndGgpZm9yKHZhciBjPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWU/Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIik6Yi5xdWVyeVNlbGVjdG9yQWxsP2IucXVlcnlTZWxlY3RvckFsbChcIipcIik6W10sZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKylsYihjW2RdKX1mdW5jdGlvbiByYyhiLGEsYyxkKXtpZih2KGQpKXRocm93IEliKFwib2ZmYXJnc1wiKTt2YXIgZT1sYShiLFwiZXZlbnRzXCIpO2xhKGIsXCJoYW5kbGVcIikmJihGKGEpP3EoZSxmdW5jdGlvbihhLGMpe1RhKGIsYyxhKTtkZWxldGUgZVtjXX0pOnEoYS5zcGxpdChcIiBcIiksXG5mdW5jdGlvbihhKXtGKGMpPyhUYShiLGEsZVthXSksZGVsZXRlIGVbYV0pOkRhKGVbYV18fFtdLGMpfSkpfWZ1bmN0aW9uIGxiKGIsYSl7dmFyIGM9Yi5uZzMzOSxkPVVhW2NdO2QmJihhP2RlbGV0ZSBVYVtjXS5kYXRhW2FdOihkLmhhbmRsZSYmKGQuZXZlbnRzLiRkZXN0cm95JiZkLmhhbmRsZSh7fSxcIiRkZXN0cm95XCIpLHJjKGIpKSxkZWxldGUgVWFbY10sYi5uZzMzOT10KSl9ZnVuY3Rpb24gbGEoYixhLGMpe3ZhciBkPWIubmczMzksZD1VYVtkfHwtMV07aWYodihjKSlkfHwoYi5uZzMzOT1kPSsrSmUsZD1VYVtkXT17fSksZFthXT1jO2Vsc2UgcmV0dXJuIGQmJmRbYV19ZnVuY3Rpb24gS2IoYixhLGMpe2lmKCFiLm5vZGVUeXBlfHwxPT09Yi5ub2RlVHlwZXx8OT09PWIubm9kZVR5cGUpe3ZhciBkPWxhKGIsXCJkYXRhXCIpLGU9dihjKSxmPSFlJiZ2KGEpLGg9ZiYmIVEoYSk7ZHx8aHx8bGEoYixcImRhdGFcIixkPXt9KTtpZihlKWRbYV09YztlbHNlIGlmKGYpe2lmKGgpcmV0dXJuIGQmJlxuZFthXTtFKGQsYSl9ZWxzZSByZXR1cm4gZH19ZnVuY3Rpb24gTGIoYixhKXtyZXR1cm4gYi5nZXRBdHRyaWJ1dGU/LTE8KFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikuaW5kZXhPZihcIiBcIithK1wiIFwiKTohMX1mdW5jdGlvbiBtYihiLGEpe2EmJmIuc2V0QXR0cmlidXRlJiZxKGEuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGEpe2Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixaKChcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpLnJlcGxhY2UoXCIgXCIrWihhKStcIiBcIixcIiBcIikpKX0pfWZ1bmN0aW9uIG5iKGIsYSl7aWYoYSYmYi5zZXRBdHRyaWJ1dGUpe3ZhciBjPShcIiBcIisoYi5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKXx8XCJcIikrXCIgXCIpLnJlcGxhY2UoL1tcXG5cXHRdL2csXCIgXCIpO3EoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7YT1aKGEpOy0xPT09Yy5pbmRleE9mKFwiIFwiK2ErXCIgXCIpJiZcbihjKz1hK1wiIFwiKX0pO2Iuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixaKGMpKX19ZnVuY3Rpb24gcWMoYixhKXtpZihhKWlmKGEubm9kZVR5cGUpYltiLmxlbmd0aCsrXT1hO2Vsc2V7dmFyIGM9YS5sZW5ndGg7XCJudW1iZXJcIj09PXR5cGVvZiBjJiZhLndpbmRvdyE9PWE/YyYmKGEuaXRlbSYmKGE9a2EuY2FsbChhKSksc2MuYXBwbHkoYixhKSk6YltiLmxlbmd0aCsrXT1hfX1mdW5jdGlvbiB0YyhiLGEpe3JldHVybiBvYihiLFwiJFwiKyhhfHxcIm5nQ29udHJvbGxlclwiKStcIkNvbnRyb2xsZXJcIil9ZnVuY3Rpb24gb2IoYixhLGMpezk9PWIubm9kZVR5cGUmJihiPWIuZG9jdW1lbnRFbGVtZW50KTtmb3IoYT1NKGEpP2E6W2FdO2I7KXtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTtkKyspaWYoKGM9ei5kYXRhKGIsYVtkXSkpIT09dClyZXR1cm4gYztiPWIucGFyZW50Tm9kZXx8MTE9PT1iLm5vZGVUeXBlJiZiLmhvc3R9fWZ1bmN0aW9uIHVjKGIpe2ZvcihrYihiLCEwKTtiLmZpcnN0Q2hpbGQ7KWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKX1cbmZ1bmN0aW9uIHZjKGIsYSl7dmFyIGM9cGJbYS50b0xvd2VyQ2FzZSgpXTtyZXR1cm4gYyYmd2NbbWEoYildJiZjfWZ1bmN0aW9uIEtlKGIsYSl7dmFyIGM9Yi5ub2RlTmFtZTtyZXR1cm4oXCJJTlBVVFwiPT09Y3x8XCJURVhUQVJFQVwiPT09YykmJnhjW2FdfWZ1bmN0aW9uIExlKGIsYSl7dmFyIGM9ZnVuY3Rpb24oYyxlKXtjLnByZXZlbnREZWZhdWx0fHwoYy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2MucmV0dXJuVmFsdWU9ITF9KTtjLnN0b3BQcm9wYWdhdGlvbnx8KGMuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7Yy5jYW5jZWxCdWJibGU9ITB9KTtjLnRhcmdldHx8KGMudGFyZ2V0PWMuc3JjRWxlbWVudHx8Vyk7aWYoRihjLmRlZmF1bHRQcmV2ZW50ZWQpKXt2YXIgZj1jLnByZXZlbnREZWZhdWx0O2MucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtjLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7Zi5jYWxsKGMpfTtjLmRlZmF1bHRQcmV2ZW50ZWQ9ITF9Yy5pc0RlZmF1bHRQcmV2ZW50ZWQ9XG5mdW5jdGlvbigpe3JldHVybiBjLmRlZmF1bHRQcmV2ZW50ZWR8fCExPT09Yy5yZXR1cm5WYWx1ZX07dmFyIGg9amEoYVtlfHxjLnR5cGVdfHxbXSk7cShoLGZ1bmN0aW9uKGEpe2EuY2FsbChiLGMpfSk7OD49VD8oYy5wcmV2ZW50RGVmYXVsdD1udWxsLGMuc3RvcFByb3BhZ2F0aW9uPW51bGwsYy5pc0RlZmF1bHRQcmV2ZW50ZWQ9bnVsbCk6KGRlbGV0ZSBjLnByZXZlbnREZWZhdWx0LGRlbGV0ZSBjLnN0b3BQcm9wYWdhdGlvbixkZWxldGUgYy5pc0RlZmF1bHRQcmV2ZW50ZWQpfTtjLmVsZW09YjtyZXR1cm4gY31mdW5jdGlvbiBHYShiLGEpe3ZhciBjPXR5cGVvZiBiLGQ7XCJmdW5jdGlvblwiPT1jfHxcIm9iamVjdFwiPT1jJiZudWxsIT09Yj9cImZ1bmN0aW9uXCI9PXR5cGVvZihkPWIuJCRoYXNoS2V5KT9kPWIuJCRoYXNoS2V5KCk6ZD09PXQmJihkPWIuJCRoYXNoS2V5PShhfHxpZCkoKSk6ZD1iO3JldHVybiBjK1wiOlwiK2R9ZnVuY3Rpb24gVmEoYixhKXtpZihhKXt2YXIgYz0wO3RoaXMubmV4dFVpZD1cbmZ1bmN0aW9uKCl7cmV0dXJuKytjfX1xKGIsdGhpcy5wdXQsdGhpcyl9ZnVuY3Rpb24gTWUoYil7cmV0dXJuKGI9Yi50b1N0cmluZygpLnJlcGxhY2UoeWMsXCJcIikubWF0Y2goemMpKT9cImZ1bmN0aW9uKFwiKyhiWzFdfHxcIlwiKS5yZXBsYWNlKC9bXFxzXFxyXFxuXSsvLFwiIFwiKStcIilcIjpcImZuXCJ9ZnVuY3Rpb24gTWIoYixhLGMpe3ZhciBkO2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBiKXtpZighKGQ9Yi4kaW5qZWN0KSl7ZD1bXTtpZihiLmxlbmd0aCl7aWYoYSl0aHJvdyBHKGMpJiZjfHwoYz1iLm5hbWV8fE1lKGIpKSxIYShcInN0cmljdGRpXCIsYyk7YT1iLnRvU3RyaW5nKCkucmVwbGFjZSh5YyxcIlwiKTthPWEubWF0Y2goemMpO3EoYVsxXS5zcGxpdChOZSksZnVuY3Rpb24oYSl7YS5yZXBsYWNlKE9lLGZ1bmN0aW9uKGEsYixjKXtkLnB1c2goYyl9KX0pfWIuJGluamVjdD1kfX1lbHNlIE0oYik/KGE9Yi5sZW5ndGgtMSxQYShiW2FdLFwiZm5cIiksZD1iLnNsaWNlKDAsYSkpOlBhKGIsXCJmblwiLCEwKTtcbnJldHVybiBkfWZ1bmN0aW9uIEZiKGIsYSl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZihRKGIpKXEoYixhYyhhKSk7ZWxzZSByZXR1cm4gYShiLGMpfX1mdW5jdGlvbiBkKGEsYil7QWEoYSxcInNlcnZpY2VcIik7aWYoQShiKXx8TShiKSliPWsuaW5zdGFudGlhdGUoYik7aWYoIWIuJGdldCl0aHJvdyBIYShcInBnZXRcIixhKTtyZXR1cm4gcFthK25dPWJ9ZnVuY3Rpb24gZShhLGIpe3JldHVybiBkKGEseyRnZXQ6Yn0pfWZ1bmN0aW9uIGYoYSl7dmFyIGI9W10sYztxKGEsZnVuY3Rpb24oYSl7ZnVuY3Rpb24gZChhKXt2YXIgYixjO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZT1hW2JdLGY9ay5nZXQoZVswXSk7ZltlWzFdXS5hcHBseShmLGVbMl0pfX1pZighbS5nZXQoYSkpe20ucHV0KGEsITApO3RyeXtHKGEpPyhjPVJhKGEpLGI9Yi5jb25jYXQoZihjLnJlcXVpcmVzKSkuY29uY2F0KGMuX3J1bkJsb2NrcyksZChjLl9pbnZva2VRdWV1ZSksZChjLl9jb25maWdCbG9ja3MpKTpcbkEoYSk/Yi5wdXNoKGsuaW52b2tlKGEpKTpNKGEpP2IucHVzaChrLmludm9rZShhKSk6UGEoYSxcIm1vZHVsZVwiKX1jYXRjaChlKXt0aHJvdyBNKGEpJiYoYT1hW2EubGVuZ3RoLTFdKSxlLm1lc3NhZ2UmJihlLnN0YWNrJiYtMT09ZS5zdGFjay5pbmRleE9mKGUubWVzc2FnZSkpJiYoZT1lLm1lc3NhZ2UrXCJcXG5cIitlLnN0YWNrKSxIYShcIm1vZHVsZXJyXCIsYSxlLnN0YWNrfHxlLm1lc3NhZ2V8fGUpO319fSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaChiLGMpe2Z1bmN0aW9uIGQoYSl7aWYoYi5oYXNPd25Qcm9wZXJ0eShhKSl7aWYoYlthXT09PWcpdGhyb3cgSGEoXCJjZGVwXCIsYStcIiA8LSBcIitsLmpvaW4oXCIgPC0gXCIpKTtyZXR1cm4gYlthXX10cnl7cmV0dXJuIGwudW5zaGlmdChhKSxiW2FdPWcsYlthXT1jKGEpfWNhdGNoKGUpe3Rocm93IGJbYV09PT1nJiZkZWxldGUgYlthXSxlO31maW5hbGx5e2wuc2hpZnQoKX19ZnVuY3Rpb24gZShiLGMsZixnKXtcInN0cmluZ1wiPT09dHlwZW9mIGYmJihnPVxuZixmPW51bGwpO3ZhciBoPVtdO2c9TWIoYixhLGcpO3ZhciBuLGwsaztsPTA7Zm9yKG49Zy5sZW5ndGg7bDxuO2wrKyl7az1nW2xdO2lmKFwic3RyaW5nXCIhPT10eXBlb2Ygayl0aHJvdyBIYShcIml0a25cIixrKTtoLnB1c2goZiYmZi5oYXNPd25Qcm9wZXJ0eShrKT9mW2tdOmQoaykpfU0oYikmJihiPWJbbl0pO3JldHVybiBiLmFwcGx5KGMsaCl9cmV0dXJue2ludm9rZTplLGluc3RhbnRpYXRlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbigpe307ZC5wcm90b3R5cGU9KE0oYSk/YVthLmxlbmd0aC0xXTphKS5wcm90b3R5cGU7ZD1uZXcgZDthPWUoYSxkLGIsYyk7cmV0dXJuIFEoYSl8fEEoYSk/YTpkfSxnZXQ6ZCxhbm5vdGF0ZTpNYixoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIHAuaGFzT3duUHJvcGVydHkoYStuKXx8Yi5oYXNPd25Qcm9wZXJ0eShhKX19fWE9ITA9PT1hO3ZhciBnPXt9LG49XCJQcm92aWRlclwiLGw9W10sbT1uZXcgVmEoW10sITApLHA9eyRwcm92aWRlOntwcm92aWRlcjpjKGQpLFxuZmFjdG9yeTpjKGUpLHNlcnZpY2U6YyhmdW5jdGlvbihhLGIpe3JldHVybiBlKGEsW1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5zdGFudGlhdGUoYil9XSl9KSx2YWx1ZTpjKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGUoYSxiYShiKSl9KSxjb25zdGFudDpjKGZ1bmN0aW9uKGEsYil7QWEoYSxcImNvbnN0YW50XCIpO3BbYV09YjtzW2FdPWJ9KSxkZWNvcmF0b3I6ZnVuY3Rpb24oYSxiKXt2YXIgYz1rLmdldChhK24pLGQ9Yy4kZ2V0O2MuJGdldD1mdW5jdGlvbigpe3ZhciBhPXIuaW52b2tlKGQsYyk7cmV0dXJuIHIuaW52b2tlKGIsbnVsbCx7JGRlbGVnYXRlOmF9KX19fX0saz1wLiRpbmplY3Rvcj1oKHAsZnVuY3Rpb24oKXt0aHJvdyBIYShcInVucHJcIixsLmpvaW4oXCIgPC0gXCIpKTt9LGEpLHM9e30scj1zLiRpbmplY3Rvcj1oKHMsZnVuY3Rpb24oYSl7dmFyIGI9ay5nZXQoYStuKTtyZXR1cm4gci5pbnZva2UoYi4kZ2V0LGIsdCxhKX0sYSk7cShmKGIpLGZ1bmN0aW9uKGEpe3IuaW52b2tlKGF8fFxuQil9KTtyZXR1cm4gcn1mdW5jdGlvbiBlZSgpe3ZhciBiPSEwO3RoaXMuZGlzYWJsZUF1dG9TY3JvbGxpbmc9ZnVuY3Rpb24oKXtiPSExfTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvY2F0aW9uXCIsXCIkcm9vdFNjb3BlXCIsZnVuY3Rpb24oYSxjLGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9bnVsbDtxKGEsZnVuY3Rpb24oYSl7Ynx8XCJhXCIhPT1tYShhKXx8KGI9YSl9KTtyZXR1cm4gYn1mdW5jdGlvbiBmKCl7dmFyIGI9Yy5oYXNoKCksZDtiPyhkPWguZ2V0RWxlbWVudEJ5SWQoYikpP2Quc2Nyb2xsSW50b1ZpZXcoKTooZD1lKGguZ2V0RWxlbWVudHNCeU5hbWUoYikpKT9kLnNjcm9sbEludG9WaWV3KCk6XCJ0b3BcIj09PWImJmEuc2Nyb2xsVG8oMCwwKTphLnNjcm9sbFRvKDAsMCl9dmFyIGg9YS5kb2N1bWVudDtiJiZkLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBjLmhhc2goKX0sZnVuY3Rpb24oKXtkLiRldmFsQXN5bmMoZil9KTtyZXR1cm4gZn1dfWZ1bmN0aW9uIENlKCl7dGhpcy4kZ2V0PVxuW1wiJCRyQUZcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gYi5zdXBwb3J0ZWQ/ZnVuY3Rpb24oYSl7cmV0dXJuIGIoYSl9OmZ1bmN0aW9uKGIpe3JldHVybiBhKGIsMCwhMSl9fV19ZnVuY3Rpb24gUGUoYixhLGMsZCl7ZnVuY3Rpb24gZShhKXt0cnl7YS5hcHBseShudWxsLGthLmNhbGwoYXJndW1lbnRzLDEpKX1maW5hbGx5e2lmKHItLSwwPT09cilmb3IoO0wubGVuZ3RoOyl0cnl7TC5wb3AoKSgpfWNhdGNoKGIpe2MuZXJyb3IoYil9fX1mdW5jdGlvbiBmKGEsYil7KGZ1bmN0aW9uIHFiKCl7cSh1LGZ1bmN0aW9uKGEpe2EoKX0pO0s9YihxYixhKX0pKCl9ZnVuY3Rpb24gaCgpe3k9bnVsbDt3IT1nLnVybCgpJiYodz1nLnVybCgpLHEoWSxmdW5jdGlvbihhKXthKGcudXJsKCkpfSkpfXZhciBnPXRoaXMsbj1hWzBdLGw9Yi5sb2NhdGlvbixtPWIuaGlzdG9yeSxwPWIuc2V0VGltZW91dCxrPWIuY2xlYXJUaW1lb3V0LHM9e307Zy5pc01vY2s9ITE7dmFyIHI9MCxMPVtdO1xuZy4kJGNvbXBsZXRlT3V0c3RhbmRpbmdSZXF1ZXN0PWU7Zy4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50PWZ1bmN0aW9uKCl7cisrfTtnLm5vdGlmeVdoZW5Ob091dHN0YW5kaW5nUmVxdWVzdHM9ZnVuY3Rpb24oYSl7cSh1LGZ1bmN0aW9uKGEpe2EoKX0pOzA9PT1yP2EoKTpMLnB1c2goYSl9O3ZhciB1PVtdLEs7Zy5hZGRQb2xsRm49ZnVuY3Rpb24oYSl7RihLKSYmZigxMDAscCk7dS5wdXNoKGEpO3JldHVybiBhfTt2YXIgdz1sLmhyZWYseD1hLmZpbmQoXCJiYXNlXCIpLHk9bnVsbDtnLnVybD1mdW5jdGlvbihhLGMpe2whPT1iLmxvY2F0aW9uJiYobD1iLmxvY2F0aW9uKTttIT09Yi5oaXN0b3J5JiYobT1iLmhpc3RvcnkpO2lmKGEpe2lmKHchPWEpcmV0dXJuIHc9YSxkLmhpc3Rvcnk/Yz9tLnJlcGxhY2VTdGF0ZShudWxsLFwiXCIsYSk6KG0ucHVzaFN0YXRlKG51bGwsXCJcIixhKSx4LmF0dHIoXCJocmVmXCIseC5hdHRyKFwiaHJlZlwiKSkpOih5PWEsYz9sLnJlcGxhY2UoYSk6bC5ocmVmPVxuYSksZ31lbHNlIHJldHVybiB5fHxsLmhyZWYucmVwbGFjZSgvJTI3L2csXCInXCIpfTt2YXIgWT1bXSxOPSExO2cub25VcmxDaGFuZ2U9ZnVuY3Rpb24oYSl7aWYoIU4pe2lmKGQuaGlzdG9yeSl6KGIpLm9uKFwicG9wc3RhdGVcIixoKTtpZihkLmhhc2hjaGFuZ2UpeihiKS5vbihcImhhc2hjaGFuZ2VcIixoKTtlbHNlIGcuYWRkUG9sbEZuKGgpO049ITB9WS5wdXNoKGEpO3JldHVybiBhfTtnLmJhc2VIcmVmPWZ1bmN0aW9uKCl7dmFyIGE9eC5hdHRyKFwiaHJlZlwiKTtyZXR1cm4gYT9hLnJlcGxhY2UoL14oaHR0cHM/XFw6KT9cXC9cXC9bXlxcL10qLyxcIlwiKTpcIlwifTt2YXIgUj17fSxIPVwiXCIsQz1nLmJhc2VIcmVmKCk7Zy5jb29raWVzPWZ1bmN0aW9uKGEsYil7dmFyIGQsZSxmLGc7aWYoYSliPT09dD9uLmNvb2tpZT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9O3BhdGg9XCIrQytcIjtleHBpcmVzPVRodSwgMDEgSmFuIDE5NzAgMDA6MDA6MDAgR01UXCI6RyhiKSYmKGQ9KG4uY29va2llPWVuY29kZVVSSUNvbXBvbmVudChhKStcblwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKStcIjtwYXRoPVwiK0MpLmxlbmd0aCsxLDQwOTY8ZCYmYy53YXJuKFwiQ29va2llICdcIithK1wiJyBwb3NzaWJseSBub3Qgc2V0IG9yIG92ZXJmbG93ZWQgYmVjYXVzZSBpdCB3YXMgdG9vIGxhcmdlIChcIitkK1wiID4gNDA5NiBieXRlcykhXCIpKTtlbHNle2lmKG4uY29va2llIT09SClmb3IoSD1uLmNvb2tpZSxkPUguc3BsaXQoXCI7IFwiKSxSPXt9LGY9MDtmPGQubGVuZ3RoO2YrKyllPWRbZl0sZz1lLmluZGV4T2YoXCI9XCIpLDA8ZyYmKGE9ZGVjb2RlVVJJQ29tcG9uZW50KGUuc3Vic3RyaW5nKDAsZykpLFJbYV09PT10JiYoUlthXT1kZWNvZGVVUklDb21wb25lbnQoZS5zdWJzdHJpbmcoZysxKSkpKTtyZXR1cm4gUn19O2cuZGVmZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYztyKys7Yz1wKGZ1bmN0aW9uKCl7ZGVsZXRlIHNbY107ZShhKX0sYnx8MCk7c1tjXT0hMDtyZXR1cm4gY307Zy5kZWZlci5jYW5jZWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHNbYV0/KGRlbGV0ZSBzW2FdLFxuayhhKSxlKEIpLCEwKTohMX19ZnVuY3Rpb24gZ2UoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLFwiJGxvZ1wiLFwiJHNuaWZmZXJcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSxjLGQpe3JldHVybiBuZXcgUGUoYixkLGEsYyl9XX1mdW5jdGlvbiBoZSgpe3RoaXMuJGdldD1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoYixkKXtmdW5jdGlvbiBlKGEpe2EhPXAmJihrP2s9PWEmJihrPWEubik6az1hLGYoYS5uLGEucCksZihhLHApLHA9YSxwLm49bnVsbCl9ZnVuY3Rpb24gZihhLGIpe2EhPWImJihhJiYoYS5wPWIpLGImJihiLm49YSkpfWlmKGIgaW4gYSl0aHJvdyBPKFwiJGNhY2hlRmFjdG9yeVwiKShcImlpZFwiLGIpO3ZhciBoPTAsZz1FKHt9LGQse2lkOmJ9KSxuPXt9LGw9ZCYmZC5jYXBhY2l0eXx8TnVtYmVyLk1BWF9WQUxVRSxtPXt9LHA9bnVsbCxrPW51bGw7cmV0dXJuIGFbYl09e3B1dDpmdW5jdGlvbihhLGIpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGM9bVthXXx8KG1bYV09e2tleTphfSk7XG5lKGMpfWlmKCFGKGIpKXJldHVybiBhIGluIG58fGgrKyxuW2FdPWIsaD5sJiZ0aGlzLnJlbW92ZShrLmtleSksYn0sZ2V0OmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTtpZighYilyZXR1cm47ZShiKX1yZXR1cm4gblthXX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2lmKGw8TnVtYmVyLk1BWF9WQUxVRSl7dmFyIGI9bVthXTtpZighYilyZXR1cm47Yj09cCYmKHA9Yi5wKTtiPT1rJiYoaz1iLm4pO2YoYi5uLGIucCk7ZGVsZXRlIG1bYV19ZGVsZXRlIG5bYV07aC0tfSxyZW1vdmVBbGw6ZnVuY3Rpb24oKXtuPXt9O2g9MDttPXt9O3A9az1udWxsfSxkZXN0cm95OmZ1bmN0aW9uKCl7bT1nPW49bnVsbDtkZWxldGUgYVtiXX0saW5mbzpmdW5jdGlvbigpe3JldHVybiBFKHt9LGcse3NpemU6aH0pfX19dmFyIGE9e307Yi5pbmZvPWZ1bmN0aW9uKCl7dmFyIGI9e307cShhLGZ1bmN0aW9uKGEsZSl7YltlXT1hLmluZm8oKX0pO3JldHVybiBifTtiLmdldD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiXX07XG5yZXR1cm4gYn19ZnVuY3Rpb24geWUoKXt0aGlzLiRnZXQ9W1wiJGNhY2hlRmFjdG9yeVwiLGZ1bmN0aW9uKGIpe3JldHVybiBiKFwidGVtcGxhdGVzXCIpfV19ZnVuY3Rpb24gaWMoYixhKXt2YXIgYz17fSxkPVwiRGlyZWN0aXZlXCIsZT0vXlxccypkaXJlY3RpdmVcXDpcXHMqKFtcXGRcXHdfXFwtXSspXFxzKyguKikkLyxmPS8oKFtcXGRcXHdfXFwtXSspKD86XFw6KFteO10rKSk/Oz8pLyxoPWtkKFwibmdTcmMsbmdTcmNzZXQsc3JjLHNyY3NldFwiKSxnPS9eKG9uW2Etel0rfGZvcm1hY3Rpb24pJC87dGhpcy5kaXJlY3RpdmU9ZnVuY3Rpb24gbChhLGUpe0FhKGEsXCJkaXJlY3RpdmVcIik7RyhhKT8oR2IoZSxcImRpcmVjdGl2ZUZhY3RvcnlcIiksYy5oYXNPd25Qcm9wZXJ0eShhKXx8KGNbYV09W10sYi5mYWN0b3J5KGErZCxbXCIkaW5qZWN0b3JcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixkKXt2YXIgZT1bXTtxKGNbYV0sZnVuY3Rpb24oYyxmKXt0cnl7dmFyIGc9Yi5pbnZva2UoYyk7QShnKT9nPXtjb21waWxlOmJhKGcpfTpcbiFnLmNvbXBpbGUmJmcubGluayYmKGcuY29tcGlsZT1iYShnLmxpbmspKTtnLnByaW9yaXR5PWcucHJpb3JpdHl8fDA7Zy5pbmRleD1mO2cubmFtZT1nLm5hbWV8fGE7Zy5yZXF1aXJlPWcucmVxdWlyZXx8Zy5jb250cm9sbGVyJiZnLm5hbWU7Zy5yZXN0cmljdD1nLnJlc3RyaWN0fHxcIkFcIjtlLnB1c2goZyl9Y2F0Y2goaCl7ZChoKX19KTtyZXR1cm4gZX1dKSksY1thXS5wdXNoKGUpKTpxKGEsYWMobCkpO3JldHVybiB0aGlzfTt0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB2KGIpPyhhLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0KGIpLHRoaXMpOmEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/KGEuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KGIpLHRoaXMpOmEuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0KCl9O3RoaXMuJGdldD1cbltcIiRpbmplY3RvclwiLFwiJGludGVycG9sYXRlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkcGFyc2VcIixcIiRjb250cm9sbGVyXCIsXCIkcm9vdFNjb3BlXCIsXCIkZG9jdW1lbnRcIixcIiRzY2VcIixcIiRhbmltYXRlXCIsXCIkJHNhbml0aXplVXJpXCIsZnVuY3Rpb24oYSxiLHAsayxzLHIsTCx1LEssdyx4LHkpe2Z1bmN0aW9uIFkoYSxiLGMsZCxlKXthIGluc3RhbmNlb2Ygenx8KGE9eihhKSk7cShhLGZ1bmN0aW9uKGIsYyl7Mz09Yi5ub2RlVHlwZSYmYi5ub2RlVmFsdWUubWF0Y2goL1xcUysvKSYmKGFbY109eihiKS53cmFwKFwiPHNwYW4+PC9zcGFuPlwiKS5wYXJlbnQoKVswXSl9KTt2YXIgZj1SKGEsYixhLGMsZCxlKTtOKGEsXCJuZy1zY29wZVwiKTtyZXR1cm4gZnVuY3Rpb24oYixjLGQsZSl7R2IoYixcInNjb3BlXCIpO3ZhciBnPWM/RmEuY2xvbmUuY2FsbChhKTphO3EoZCxmdW5jdGlvbihhLGIpe2cuZGF0YShcIiRcIitiK1wiQ29udHJvbGxlclwiLGEpfSk7Zy5kYXRhKFwiJHNjb3BlXCIsXG5iKTtjJiZjKGcsYik7ZiYmZihiLGcsZyxlKTtyZXR1cm4gZ319ZnVuY3Rpb24gTihhLGIpe3RyeXthLmFkZENsYXNzKGIpfWNhdGNoKGMpe319ZnVuY3Rpb24gUihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGMsZCxlKXt2YXIgZixsLGssbSxwLHMsdTtmPWMubGVuZ3RoO3ZhciByPUFycmF5KGYpO2ZvcihtPTA7bTxmO20rKylyW21dPWNbbV07cz1tPTA7Zm9yKHA9aC5sZW5ndGg7bTxwO3MrKylsPXJbc10sYz1oW20rK10sZj1oW20rK10sYz8oYy5zY29wZT8oaz1hLiRuZXcoKSx6LmRhdGEobCxcIiRzY29wZVwiLGspKTprPWEsdT1jLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P0goYSxjLnRyYW5zY2x1ZGUsZSk6IWMudGVtcGxhdGVPblRoaXNFbGVtZW50JiZlP2U6IWUmJmI/SChhLGIpOm51bGwsYyhmLGssbCxkLHUpKTpmJiZmKGEsbC5jaGlsZE5vZGVzLHQsZSl9Zm9yKHZhciBoPVtdLGwsayxtLHAscz0wO3M8YS5sZW5ndGg7cysrKWw9bmV3IE5iLGs9QyhhW3NdLFtdLGwsMD09PVxucz9kOnQsZSksKGY9ay5sZW5ndGg/Y2EoayxhW3NdLGwsYixjLG51bGwsW10sW10sZik6bnVsbCkmJmYuc2NvcGUmJk4obC4kJGVsZW1lbnQsXCJuZy1zY29wZVwiKSxsPWYmJmYudGVybWluYWx8fCEobT1hW3NdLmNoaWxkTm9kZXMpfHwhbS5sZW5ndGg/bnVsbDpSKG0sZj8oZi50cmFuc2NsdWRlT25UaGlzRWxlbWVudHx8IWYudGVtcGxhdGVPblRoaXNFbGVtZW50KSYmZi50cmFuc2NsdWRlOmIpLGgucHVzaChmLGwpLHA9cHx8Znx8bCxmPW51bGw7cmV0dXJuIHA/ZzpudWxsfWZ1bmN0aW9uIEgoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZil7dmFyIGc9ITE7ZHx8KGQ9YS4kbmV3KCksZz1kLiQkdHJhbnNjbHVkZWQ9ITApO2U9YihkLGUsZixjKTtpZihnKWUub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZC4kZGVzdHJveSgpfSk7cmV0dXJuIGV9fWZ1bmN0aW9uIEMoYixnLGgsayxtKXt2YXIgcD1oLiRhdHRyLHM7c3dpdGNoKGIubm9kZVR5cGUpe2Nhc2UgMTp2KGcsb2EobWEoYikpLFxuXCJFXCIsayxtKTtmb3IodmFyIHUscixLLEw9Yi5hdHRyaWJ1dGVzLHg9MCx3PUwmJkwubGVuZ3RoO3g8dzt4Kyspe3ZhciB5PSExLE49ITE7dT1MW3hdO2lmKCFUfHw4PD1UfHx1LnNwZWNpZmllZCl7cz11Lm5hbWU7dT1aKHUudmFsdWUpO3I9b2Eocyk7aWYoSz11YS50ZXN0KHIpKXM9Z2Ioci5zdWJzdHIoNiksXCItXCIpO3ZhciBxPXIucmVwbGFjZSgvKFN0YXJ0fEVuZCkkLyxcIlwiKSxIO2E6e3ZhciBEPXE7aWYoYy5oYXNPd25Qcm9wZXJ0eShEKSl7SD12b2lkIDA7Zm9yKHZhciBEPWEuZ2V0KEQrZCksWD0wLEM9RC5sZW5ndGg7WDxDO1grKylpZihIPURbWF0sSC5tdWx0aUVsZW1lbnQpe0g9ITA7YnJlYWsgYX19SD0hMX1IJiZyPT09cStcIlN0YXJ0XCImJih5PXMsTj1zLnN1YnN0cigwLHMubGVuZ3RoLTUpK1wiZW5kXCIscz1zLnN1YnN0cigwLHMubGVuZ3RoLTYpKTtyPW9hKHMudG9Mb3dlckNhc2UoKSk7cFtyXT1zO2lmKEt8fCFoLmhhc093blByb3BlcnR5KHIpKWhbcl09dSx2YyhiLHIpJiZcbihoW3JdPSEwKTtTKGIsZyx1LHIpO3YoZyxyLFwiQVwiLGssbSx5LE4pfX1iPWIuY2xhc3NOYW1lO2lmKEcoYikmJlwiXCIhPT1iKWZvcig7cz1mLmV4ZWMoYik7KXI9b2Eoc1syXSksdihnLHIsXCJDXCIsayxtKSYmKGhbcl09WihzWzNdKSksYj1iLnN1YnN0cihzLmluZGV4K3NbMF0ubGVuZ3RoKTticmVhaztjYXNlIDM6TyhnLGIubm9kZVZhbHVlKTticmVhaztjYXNlIDg6dHJ5e2lmKHM9ZS5leGVjKGIubm9kZVZhbHVlKSlyPW9hKHNbMV0pLHYoZyxyLFwiTVwiLGssbSkmJihoW3JdPVooc1syXSkpfWNhdGNoKFIpe319Zy5zb3J0KEYpO3JldHVybiBnfWZ1bmN0aW9uIEQoYSxiLGMpe3ZhciBkPVtdLGU9MDtpZihiJiZhLmhhc0F0dHJpYnV0ZSYmYS5oYXNBdHRyaWJ1dGUoYikpe2Rve2lmKCFhKXRocm93IGhhKFwidXRlcmRpclwiLGIsYyk7MT09YS5ub2RlVHlwZSYmKGEuaGFzQXR0cmlidXRlKGIpJiZlKyssYS5oYXNBdHRyaWJ1dGUoYykmJmUtLSk7ZC5wdXNoKGEpO2E9YS5uZXh0U2libGluZ313aGlsZSgwPFxuZSl9ZWxzZSBkLnB1c2goYSk7cmV0dXJuIHooZCl9ZnVuY3Rpb24gWChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmLGcsaCl7ZT1EKGVbMF0sYixjKTtyZXR1cm4gYShkLGUsZixnLGgpfX1mdW5jdGlvbiBjYShhLGMsZCxlLGYsZyxoLGwsayl7ZnVuY3Rpb24gcyhhLGIsYyxkKXtpZihhKXtjJiYoYT1YKGEsYyxkKSk7YS5yZXF1aXJlPUkucmVxdWlyZTthLmRpcmVjdGl2ZU5hbWU9bmE7aWYoSD09PUl8fEkuJCRpc29sYXRlU2NvcGUpYT1DYyhhLHtpc29sYXRlU2NvcGU6ITB9KTtoLnB1c2goYSl9aWYoYil7YyYmKGI9WChiLGMsZCkpO2IucmVxdWlyZT1JLnJlcXVpcmU7Yi5kaXJlY3RpdmVOYW1lPW5hO2lmKEg9PT1JfHxJLiQkaXNvbGF0ZVNjb3BlKWI9Q2MoYix7aXNvbGF0ZVNjb3BlOiEwfSk7bC5wdXNoKGIpfX1mdW5jdGlvbiB1KGEsYixjLGQpe3ZhciBlLGY9XCJkYXRhXCIsZz0hMTtpZihHKGIpKXtmb3IoO1wiXlwiPT0oZT1iLmNoYXJBdCgwKSl8fFwiP1wiPT1lOyliPWIuc3Vic3RyKDEpLFxuXCJeXCI9PWUmJihmPVwiaW5oZXJpdGVkRGF0YVwiKSxnPWd8fFwiP1wiPT1lO2U9bnVsbDtkJiZcImRhdGFcIj09PWYmJihlPWRbYl0pO2U9ZXx8Y1tmXShcIiRcIitiK1wiQ29udHJvbGxlclwiKTtpZighZSYmIWcpdGhyb3cgaGEoXCJjdHJlcVwiLGIsYSk7fWVsc2UgTShiKSYmKGU9W10scShiLGZ1bmN0aW9uKGIpe2UucHVzaCh1KGEsYixjLGQpKX0pKTtyZXR1cm4gZX1mdW5jdGlvbiBLKGEsZSxmLGcsayl7ZnVuY3Rpb24gcyhhLGIpe3ZhciBjOzI+YXJndW1lbnRzLmxlbmd0aCYmKGI9YSxhPXQpO0YmJihjPWNhKTtyZXR1cm4gayhhLGIsYyl9dmFyIHgsdyxCYyxELFgsQyxjYT17fSxZO3g9Yz09PWY/ZDpqYShkLG5ldyBOYih6KGYpLGQuJGF0dHIpKTt3PXguJCRlbGVtZW50O2lmKEgpe3ZhciB2PS9eXFxzKihbQD0mXSkoXFw/PylcXHMqKFxcdyopXFxzKiQvO0M9ZS4kbmV3KCEwKTshUnx8UiE9PUgmJlIhPT1ILiQkb3JpZ2luYWxEaXJlY3RpdmU/dy5kYXRhKFwiJGlzb2xhdGVTY29wZU5vVGVtcGxhdGVcIixDKTpcbncuZGF0YShcIiRpc29sYXRlU2NvcGVcIixDKTtOKHcsXCJuZy1pc29sYXRlLXNjb3BlXCIpO3EoSC5zY29wZSxmdW5jdGlvbihhLGMpe3ZhciBkPWEubWF0Y2godil8fFtdLGY9ZFszXXx8YyxnPVwiP1wiPT1kWzJdLGQ9ZFsxXSxoLGssbCxzO0MuJCRpc29sYXRlQmluZGluZ3NbY109ZCtmO3N3aXRjaChkKXtjYXNlIFwiQFwiOnguJG9ic2VydmUoZixmdW5jdGlvbihhKXtDW2NdPWF9KTt4LiQkb2JzZXJ2ZXJzW2ZdLiQkc2NvcGU9ZTt4W2ZdJiYoQ1tjXT1iKHhbZl0pKGUpKTticmVhaztjYXNlIFwiPVwiOmlmKGcmJiF4W2ZdKWJyZWFrO2s9cih4W2ZdKTtzPWsubGl0ZXJhbD9yYTpmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yn07bD1rLmFzc2lnbnx8ZnVuY3Rpb24oKXtoPUNbY109ayhlKTt0aHJvdyBoYShcIm5vbmFzc2lnblwiLHhbZl0sSC5uYW1lKTt9O2g9Q1tjXT1rKGUpO2c9ZS4kd2F0Y2gocih4W2ZdLGZ1bmN0aW9uKGEpe3MoYSxDW2NdKXx8KHMoYSxoKT9sKGUsYT1DW2NdKTpDW2NdPWEpO1xucmV0dXJuIGg9YX0pLG51bGwsay5saXRlcmFsKTtDLiRvbihcIiRkZXN0cm95XCIsZyk7YnJlYWs7Y2FzZSBcIiZcIjprPXIoeFtmXSk7Q1tjXT1mdW5jdGlvbihhKXtyZXR1cm4gayhlLGEpfTticmVhaztkZWZhdWx0OnRocm93IGhhKFwiaXNjcFwiLEgubmFtZSxjLGEpO319KX1ZPWsmJnM7eSYmcSh5LGZ1bmN0aW9uKGEpe3ZhciBiPXskc2NvcGU6YT09PUh8fGEuJCRpc29sYXRlU2NvcGU/QzplLCRlbGVtZW50OncsJGF0dHJzOngsJHRyYW5zY2x1ZGU6WX0sYztYPWEuY29udHJvbGxlcjtcIkBcIj09WCYmKFg9eFthLm5hbWVdKTtjPUwoWCxiKTtjYVthLm5hbWVdPWM7Rnx8dy5kYXRhKFwiJFwiK2EubmFtZStcIkNvbnRyb2xsZXJcIixjKTthLmNvbnRyb2xsZXJBcyYmKGIuJHNjb3BlW2EuY29udHJvbGxlckFzXT1jKX0pO2c9MDtmb3IoQmM9aC5sZW5ndGg7ZzxCYztnKyspdHJ5e0Q9aFtnXSxEKEQuaXNvbGF0ZVNjb3BlP0M6ZSx3LHgsRC5yZXF1aXJlJiZ1KEQuZGlyZWN0aXZlTmFtZSxELnJlcXVpcmUsXG53LGNhKSxZKX1jYXRjaChRZSl7cChRZSxnYSh3KSl9Zz1lO0gmJihILnRlbXBsYXRlfHxudWxsPT09SC50ZW1wbGF0ZVVybCkmJihnPUMpO2EmJmEoZyxmLmNoaWxkTm9kZXMsdCxrKTtmb3IoZz1sLmxlbmd0aC0xOzA8PWc7Zy0tKXRyeXtEPWxbZ10sRChELmlzb2xhdGVTY29wZT9DOmUsdyx4LEQucmVxdWlyZSYmdShELmRpcmVjdGl2ZU5hbWUsRC5yZXF1aXJlLHcsY2EpLFkpfWNhdGNoKFMpe3AoUyxnYSh3KSl9fWs9a3x8e307Zm9yKHZhciB4PS1OdW1iZXIuTUFYX1ZBTFVFLHcseT1rLmNvbnRyb2xsZXJEaXJlY3RpdmVzLEg9ay5uZXdJc29sYXRlU2NvcGVEaXJlY3RpdmUsUj1rLnRlbXBsYXRlRGlyZWN0aXZlLGNhPWsubm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZSx2PSExLFdhPSExLEY9ay5oYXNFbGVtZW50VHJhbnNjbHVkZURpcmVjdGl2ZSxFPWQuJCRlbGVtZW50PXooYyksSSxuYSxTLE89ZSxKLFA9MCx1YT1hLmxlbmd0aDtQPHVhO1ArKyl7ST1hW1BdO3ZhciBUPUkuJCRzdGFydCxcblU9SS4kJGVuZDtUJiYoRT1EKGMsVCxVKSk7Uz10O2lmKHg+SS5wcmlvcml0eSlicmVhaztpZihTPUkuc2NvcGUpSS50ZW1wbGF0ZVVybHx8KFEoUyk/KElhKFwibmV3L2lzb2xhdGVkIHNjb3BlXCIsSHx8dyxJLEUpLEg9SSk6SWEoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixILEksRSkpLHc9d3x8STtuYT1JLm5hbWU7IUkudGVtcGxhdGVVcmwmJkkuY29udHJvbGxlciYmKFM9SS5jb250cm9sbGVyLHk9eXx8e30sSWEoXCInXCIrbmErXCInIGNvbnRyb2xsZXJcIix5W25hXSxJLEUpLHlbbmFdPUkpO2lmKFM9SS50cmFuc2NsdWRlKXY9ITAsSS4kJHRsYnx8KElhKFwidHJhbnNjbHVzaW9uXCIsY2EsSSxFKSxjYT1JKSxcImVsZW1lbnRcIj09Uz8oRj0hMCx4PUkucHJpb3JpdHksUz1FLEU9ZC4kJGVsZW1lbnQ9eihXLmNyZWF0ZUNvbW1lbnQoXCIgXCIrbmErXCI6IFwiK2RbbmFdK1wiIFwiKSksYz1FWzBdLHJiKGYsa2EuY2FsbChTLDApLGMpLE89WShTLGUseCxnJiZnLm5hbWUse25vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6Y2F9KSk6XG4oUz16KEpiKGMpKS5jb250ZW50cygpLEUuZW1wdHkoKSxPPVkoUyxlKSk7aWYoSS50ZW1wbGF0ZSlpZihXYT0hMCxJYShcInRlbXBsYXRlXCIsUixJLEUpLFI9SSxTPUEoSS50ZW1wbGF0ZSk/SS50ZW1wbGF0ZShFLGQpOkkudGVtcGxhdGUsUz1EYyhTKSxJLnJlcGxhY2Upe2c9STtTPUhiLnRlc3QoUyk/eihWKEkudHlwZSxaKFMpKSk6W107Yz1TWzBdO2lmKDEhPVMubGVuZ3RofHwxIT09Yy5ub2RlVHlwZSl0aHJvdyBoYShcInRwbHJ0XCIsbmEsXCJcIik7cmIoZixFLGMpO3VhPXskYXR0cjp7fX07Uz1DKGMsW10sdWEpO3ZhciBTZT1hLnNwbGljZShQKzEsYS5sZW5ndGgtKFArMSkpO0gmJnFiKFMpO2E9YS5jb25jYXQoUykuY29uY2F0KFNlKTtBYyhkLHVhKTt1YT1hLmxlbmd0aH1lbHNlIEUuaHRtbChTKTtpZihJLnRlbXBsYXRlVXJsKVdhPSEwLElhKFwidGVtcGxhdGVcIixSLEksRSksUj1JLEkucmVwbGFjZSYmKGc9SSksSz1CKGEuc3BsaWNlKFAsYS5sZW5ndGgtUCksRSxkLGYsdiYmTyxoLFxubCx7Y29udHJvbGxlckRpcmVjdGl2ZXM6eSxuZXdJc29sYXRlU2NvcGVEaXJlY3RpdmU6SCx0ZW1wbGF0ZURpcmVjdGl2ZTpSLG5vblRsYlRyYW5zY2x1ZGVEaXJlY3RpdmU6Y2F9KSx1YT1hLmxlbmd0aDtlbHNlIGlmKEkuY29tcGlsZSl0cnl7Sj1JLmNvbXBpbGUoRSxkLE8pLEEoSik/cyhudWxsLEosVCxVKTpKJiZzKEoucHJlLEoucG9zdCxULFUpfWNhdGNoKFJlKXtwKFJlLGdhKEUpKX1JLnRlcm1pbmFsJiYoSy50ZXJtaW5hbD0hMCx4PU1hdGgubWF4KHgsSS5wcmlvcml0eSkpfUsuc2NvcGU9dyYmITA9PT13LnNjb3BlO0sudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ9djtLLnRlbXBsYXRlT25UaGlzRWxlbWVudD1XYTtLLnRyYW5zY2x1ZGU9TztrLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlPUY7cmV0dXJuIEt9ZnVuY3Rpb24gcWIoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7YisrKWFbYl09Y2MoYVtiXSx7JCRpc29sYXRlU2NvcGU6ITB9KX1mdW5jdGlvbiB2KGIsXG5lLGYsZyxoLGssbSl7aWYoZT09PWgpcmV0dXJuIG51bGw7aD1udWxsO2lmKGMuaGFzT3duUHJvcGVydHkoZSkpe3ZhciBzO2U9YS5nZXQoZStkKTtmb3IodmFyIHU9MCxyPWUubGVuZ3RoO3U8cjt1KyspdHJ5e3M9ZVt1XSwoZz09PXR8fGc+cy5wcmlvcml0eSkmJi0xIT1zLnJlc3RyaWN0LmluZGV4T2YoZikmJihrJiYocz1jYyhzLHskJHN0YXJ0OmssJCRlbmQ6bX0pKSxiLnB1c2gocyksaD1zKX1jYXRjaChLKXtwKEspfX1yZXR1cm4gaH1mdW5jdGlvbiBBYyhhLGIpe3ZhciBjPWIuJGF0dHIsZD1hLiRhdHRyLGU9YS4kJGVsZW1lbnQ7cShhLGZ1bmN0aW9uKGQsZSl7XCIkXCIhPWUuY2hhckF0KDApJiYoYltlXSYmYltlXSE9PWQmJihkKz0oXCJzdHlsZVwiPT09ZT9cIjtcIjpcIiBcIikrYltlXSksYS4kc2V0KGUsZCwhMCxjW2VdKSl9KTtxKGIsZnVuY3Rpb24oYixmKXtcImNsYXNzXCI9PWY/KE4oZSxiKSxhW1wiY2xhc3NcIl09KGFbXCJjbGFzc1wiXT9hW1wiY2xhc3NcIl0rXCIgXCI6XCJcIikrYik6XCJzdHlsZVwiPT1cbmY/KGUuYXR0cihcInN0eWxlXCIsZS5hdHRyKFwic3R5bGVcIikrXCI7XCIrYiksYS5zdHlsZT0oYS5zdHlsZT9hLnN0eWxlK1wiO1wiOlwiXCIpK2IpOlwiJFwiPT1mLmNoYXJBdCgwKXx8YS5oYXNPd25Qcm9wZXJ0eShmKXx8KGFbZl09YixkW2ZdPWNbZl0pfSl9ZnVuY3Rpb24gQihhLGIsYyxkLGUsZixnLGgpe3ZhciBsPVtdLG0scCx1PWJbMF0scj1hLnNoaWZ0KCksSz1FKHt9LHIse3RlbXBsYXRlVXJsOm51bGwsdHJhbnNjbHVkZTpudWxsLHJlcGxhY2U6bnVsbCwkJG9yaWdpbmFsRGlyZWN0aXZlOnJ9KSx4PUEoci50ZW1wbGF0ZVVybCk/ci50ZW1wbGF0ZVVybChiLGMpOnIudGVtcGxhdGVVcmwsTD1yLnR5cGU7Yi5lbXB0eSgpO2suZ2V0KHcuZ2V0VHJ1c3RlZFJlc291cmNlVXJsKHgpLHtjYWNoZTpzfSkuc3VjY2VzcyhmdW5jdGlvbihrKXt2YXIgcyx3O2s9RGMoayk7aWYoci5yZXBsYWNlKXtrPUhiLnRlc3Qoayk/eihWKEwsWihrKSkpOltdO3M9a1swXTtpZigxIT1rLmxlbmd0aHx8MSE9PXMubm9kZVR5cGUpdGhyb3cgaGEoXCJ0cGxydFwiLFxuci5uYW1lLHgpO2s9eyRhdHRyOnt9fTtyYihkLGIscyk7dmFyIHk9QyhzLFtdLGspO1Eoci5zY29wZSkmJnFiKHkpO2E9eS5jb25jYXQoYSk7QWMoYyxrKX1lbHNlIHM9dSxiLmh0bWwoayk7YS51bnNoaWZ0KEspO209Y2EoYSxzLGMsZSxiLHIsZixnLGgpO3EoZCxmdW5jdGlvbihhLGMpe2E9PXMmJihkW2NdPWJbMF0pfSk7Zm9yKHA9UihiWzBdLmNoaWxkTm9kZXMsZSk7bC5sZW5ndGg7KXtrPWwuc2hpZnQoKTt3PWwuc2hpZnQoKTt2YXIgRD1sLnNoaWZ0KCksWD1sLnNoaWZ0KCkseT1iWzBdO2lmKHchPT11KXt2YXIgWT13LmNsYXNzTmFtZTtoLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlJiZyLnJlcGxhY2V8fCh5PUpiKHMpKTtyYihELHoodykseSk7Tih6KHkpLFkpfXc9bS50cmFuc2NsdWRlT25UaGlzRWxlbWVudD9IKGssbS50cmFuc2NsdWRlLFgpOlg7bShwLGsseSxkLHcpfWw9bnVsbH0pLmVycm9yKGZ1bmN0aW9uKGEsYixjLGQpe3Rocm93IGhhKFwidHBsb2FkXCIsZC51cmwpO1xufSk7cmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQsZSl7YT1lO2w/KGwucHVzaChiKSxsLnB1c2goYyksbC5wdXNoKGQpLGwucHVzaChhKSk6KG0udHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQmJihhPUgoYixtLnRyYW5zY2x1ZGUsZSkpLG0ocCxiLGMsZCxhKSl9fWZ1bmN0aW9uIEYoYSxiKXt2YXIgYz1iLnByaW9yaXR5LWEucHJpb3JpdHk7cmV0dXJuIDAhPT1jP2M6YS5uYW1lIT09Yi5uYW1lP2EubmFtZTxiLm5hbWU/LTE6MTphLmluZGV4LWIuaW5kZXh9ZnVuY3Rpb24gSWEoYSxiLGMsZCl7aWYoYil0aHJvdyBoYShcIm11bHRpZGlyXCIsYi5uYW1lLGMubmFtZSxhLGdhKGQpKTt9ZnVuY3Rpb24gTyhhLGMpe3ZhciBkPWIoYywhMCk7ZCYmYS5wdXNoKHtwcmlvcml0eTowLGNvbXBpbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnQoKS5sZW5ndGg7YiYmTihhLnBhcmVudCgpLFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oYSxjKXt2YXIgZT1jLnBhcmVudCgpLGY9ZS5kYXRhKFwiJGJpbmRpbmdcIil8fFxuW107Zi5wdXNoKGQpO2UuZGF0YShcIiRiaW5kaW5nXCIsZik7Ynx8TihlLFwibmctYmluZGluZ1wiKTthLiR3YXRjaChkLGZ1bmN0aW9uKGEpe2NbMF0ubm9kZVZhbHVlPWF9KX19fSl9ZnVuY3Rpb24gVihhLGIpe2E9SihhfHxcImh0bWxcIik7c3dpdGNoKGEpe2Nhc2UgXCJzdmdcIjpjYXNlIFwibWF0aFwiOnZhciBjPVcuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmlubmVySFRNTD1cIjxcIithK1wiPlwiK2IrXCI8L1wiK2ErXCI+XCI7cmV0dXJuIGMuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzO2RlZmF1bHQ6cmV0dXJuIGJ9fWZ1bmN0aW9uIFdhKGEsYil7aWYoXCJzcmNkb2NcIj09YilyZXR1cm4gdy5IVE1MO3ZhciBjPW1hKGEpO2lmKFwieGxpbmtIcmVmXCI9PWJ8fFwiZm9ybVwiPT1jJiZcImFjdGlvblwiPT1ifHxcImltZ1wiIT1jJiYoXCJzcmNcIj09Ynx8XCJuZ1NyY1wiPT1iKSlyZXR1cm4gdy5SRVNPVVJDRV9VUkx9ZnVuY3Rpb24gUyhhLGMsZCxlKXt2YXIgZj1iKGQsITApO2lmKGYpe2lmKFwibXVsdGlwbGVcIj09PWUmJlwic2VsZWN0XCI9PT1cbm1hKGEpKXRocm93IGhhKFwic2VsbXVsdGlcIixnYShhKSk7Yy5wdXNoKHtwcmlvcml0eToxMDAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYyxkLGspe2Q9ay4kJG9ic2VydmVyc3x8KGsuJCRvYnNlcnZlcnM9e30pO2lmKGcudGVzdChlKSl0aHJvdyBoYShcIm5vZG9tZXZlbnRzXCIpO2lmKGY9YihrW2VdLCEwLFdhKGEsZSksaFtlXSkpa1tlXT1mKGMpLChkW2VdfHwoZFtlXT1bXSkpLiQkaW50ZXI9ITAsKGsuJCRvYnNlcnZlcnMmJmsuJCRvYnNlcnZlcnNbZV0uJCRzY29wZXx8YykuJHdhdGNoKGYsZnVuY3Rpb24oYSxiKXtcImNsYXNzXCI9PT1lJiZhIT1iP2suJHVwZGF0ZUNsYXNzKGEsYik6ay4kc2V0KGUsYSl9KX19fX0pfX1mdW5jdGlvbiByYihhLGIsYyl7dmFyIGQ9YlswXSxlPWIubGVuZ3RoLGY9ZC5wYXJlbnROb2RlLGcsaDtpZihhKWZvcihnPTAsaD1hLmxlbmd0aDtnPGg7ZysrKWlmKGFbZ109PWQpe2FbZysrXT1jO2g9ZytlLTE7Zm9yKHZhciBrPWEubGVuZ3RoO2c8XG5rO2crKyxoKyspaDxrP2FbZ109YVtoXTpkZWxldGUgYVtnXTthLmxlbmd0aC09ZS0xO2JyZWFrfWYmJmYucmVwbGFjZUNoaWxkKGMsZCk7YT1XLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTthLmFwcGVuZENoaWxkKGQpO2Nbei5leHBhbmRvXT1kW3ouZXhwYW5kb107ZD0xO2ZvcihlPWIubGVuZ3RoO2Q8ZTtkKyspZj1iW2RdLHooZikucmVtb3ZlKCksYS5hcHBlbmRDaGlsZChmKSxkZWxldGUgYltkXTtiWzBdPWM7Yi5sZW5ndGg9MX1mdW5jdGlvbiBDYyhhLGIpe3JldHVybiBFKGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkobnVsbCxhcmd1bWVudHMpfSxhLGIpfXZhciBOYj1mdW5jdGlvbihhLGIpe3RoaXMuJCRlbGVtZW50PWE7dGhpcy4kYXR0cj1ifHx7fX07TmIucHJvdG90eXBlPXskbm9ybWFsaXplOm9hLCRhZGRDbGFzczpmdW5jdGlvbihhKXthJiYwPGEubGVuZ3RoJiZ4LmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkcmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSl7YSYmMDxcbmEubGVuZ3RoJiZ4LnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGEpfSwkdXBkYXRlQ2xhc3M6ZnVuY3Rpb24oYSxiKXt2YXIgYz1FYyhhLGIpLGQ9RWMoYixhKTswPT09Yy5sZW5ndGg/eC5yZW1vdmVDbGFzcyh0aGlzLiQkZWxlbWVudCxkKTowPT09ZC5sZW5ndGg/eC5hZGRDbGFzcyh0aGlzLiQkZWxlbWVudCxjKTp4LnNldENsYXNzKHRoaXMuJCRlbGVtZW50LGMsZCl9LCRzZXQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy4kJGVsZW1lbnRbMF0sZj12YyhlLGEpLGc9S2UoZSxhKSxlPWE7Zj8odGhpcy4kJGVsZW1lbnQucHJvcChhLGIpLGQ9Zik6ZyYmKHRoaXNbZ109YixlPWcpO3RoaXNbYV09YjtkP3RoaXMuJGF0dHJbYV09ZDooZD10aGlzLiRhdHRyW2FdKXx8KHRoaXMuJGF0dHJbYV09ZD1nYihhLFwiLVwiKSk7Zj1tYSh0aGlzLiQkZWxlbWVudCk7aWYoXCJhXCI9PT1mJiZcImhyZWZcIj09PWF8fFwiaW1nXCI9PT1mJiZcInNyY1wiPT09YSl0aGlzW2FdPWI9eShiLFwic3JjXCI9PT1hKTtcbiExIT09YyYmKG51bGw9PT1ifHxiPT09dD90aGlzLiQkZWxlbWVudC5yZW1vdmVBdHRyKGQpOnRoaXMuJCRlbGVtZW50LmF0dHIoZCxiKSk7KGE9dGhpcy4kJG9ic2VydmVycykmJnEoYVtlXSxmdW5jdGlvbihhKXt0cnl7YShiKX1jYXRjaChjKXtwKGMpfX0pfSwkb2JzZXJ2ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLiQkb2JzZXJ2ZXJzfHwoYy4kJG9ic2VydmVycz17fSksZT1kW2FdfHwoZFthXT1bXSk7ZS5wdXNoKGIpO3UuJGV2YWxBc3luYyhmdW5jdGlvbigpe2UuJCRpbnRlcnx8YihjW2FdKX0pO3JldHVybiBmdW5jdGlvbigpe0RhKGUsYil9fX07dmFyIFA9Yi5zdGFydFN5bWJvbCgpLFU9Yi5lbmRTeW1ib2woKSxEYz1cInt7XCI9PVB8fFwifX1cIj09VT9CYTpmdW5jdGlvbihhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXHtcXHsvZyxQKS5yZXBsYWNlKC99fS9nLFUpfSx1YT0vXm5nQXR0cltBLVpdLztyZXR1cm4gWX1dfWZ1bmN0aW9uIG9hKGIpe3JldHVybiBTYShiLnJlcGxhY2UoVGUsXG5cIlwiKSl9ZnVuY3Rpb24gRWMoYixhKXt2YXIgYz1cIlwiLGQ9Yi5zcGxpdCgvXFxzKy8pLGU9YS5zcGxpdCgvXFxzKy8pLGY9MDthOmZvcig7ZjxkLmxlbmd0aDtmKyspe2Zvcih2YXIgaD1kW2ZdLGc9MDtnPGUubGVuZ3RoO2crKylpZihoPT1lW2ddKWNvbnRpbnVlIGE7Yys9KDA8Yy5sZW5ndGg/XCIgXCI6XCJcIikraH1yZXR1cm4gY31mdW5jdGlvbiBpZSgpe3ZhciBiPXt9LGE9ITEsYz0vXihcXFMrKShcXHMrYXNcXHMrKFxcdyspKT8kLzt0aGlzLnJlZ2lzdGVyPWZ1bmN0aW9uKGEsYyl7QWEoYSxcImNvbnRyb2xsZXJcIik7UShhKT9FKGIsYSk6YlthXT1jfTt0aGlzLmFsbG93R2xvYmFscz1mdW5jdGlvbigpe2E9ITB9O3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixcIiR3aW5kb3dcIixmdW5jdGlvbihkLGUpe3JldHVybiBmdW5jdGlvbihmLGgpe3ZhciBnLG4sbDtHKGYpJiYoZz1mLm1hdGNoKGMpLG49Z1sxXSxsPWdbM10sZj1iLmhhc093blByb3BlcnR5KG4pP2Jbbl06aGMoaC4kc2NvcGUsbiwhMCl8fChhP1xuaGMoZSxuLCEwKTp0KSxQYShmLG4sITApKTtnPWQuaW5zdGFudGlhdGUoZixoLG4pO2lmKGwpe2lmKCFofHxcIm9iamVjdFwiIT09dHlwZW9mIGguJHNjb3BlKXRocm93IE8oXCIkY29udHJvbGxlclwiKShcIm5vc2NwXCIsbnx8Zi5uYW1lLGwpO2guJHNjb3BlW2xdPWd9cmV0dXJuIGd9fV19ZnVuY3Rpb24gamUoKXt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGIpe3JldHVybiB6KGIuZG9jdW1lbnQpfV19ZnVuY3Rpb24ga2UoKXt0aGlzLiRnZXQ9W1wiJGxvZ1wiLGZ1bmN0aW9uKGIpe3JldHVybiBmdW5jdGlvbihhLGMpe2IuZXJyb3IuYXBwbHkoYixhcmd1bWVudHMpfX1dfWZ1bmN0aW9uIEZjKGIpe3ZhciBhPXt9LGMsZCxlO2lmKCFiKXJldHVybiBhO3EoYi5zcGxpdChcIlxcblwiKSxmdW5jdGlvbihiKXtlPWIuaW5kZXhPZihcIjpcIik7Yz1KKFooYi5zdWJzdHIoMCxlKSkpO2Q9WihiLnN1YnN0cihlKzEpKTtjJiYoYVtjXT1hW2NdP2FbY10rXCIsIFwiK2Q6ZCl9KTtyZXR1cm4gYX1mdW5jdGlvbiBHYyhiKXt2YXIgYT1cblEoYik/Yjp0O3JldHVybiBmdW5jdGlvbihjKXthfHwoYT1GYyhiKSk7cmV0dXJuIGM/YVtKKGMpXXx8bnVsbDphfX1mdW5jdGlvbiBIYyhiLGEsYyl7aWYoQShjKSlyZXR1cm4gYyhiLGEpO3EoYyxmdW5jdGlvbihjKXtiPWMoYixhKX0pO3JldHVybiBifWZ1bmN0aW9uIG5lKCl7dmFyIGI9L15cXHMqKFxcW3xcXHtbXlxce10pLyxhPS9bXFx9XFxdXVxccyokLyxjPS9eXFwpXFxdXFx9Jyw/XFxuLyxkPXtcIkNvbnRlbnQtVHlwZVwiOlwiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04XCJ9LGU9dGhpcy5kZWZhdWx0cz17dHJhbnNmb3JtUmVzcG9uc2U6W2Z1bmN0aW9uKGQpe0coZCkmJihkPWQucmVwbGFjZShjLFwiXCIpLGIudGVzdChkKSYmYS50ZXN0KGQpJiYoZD1kYyhkKSkpO3JldHVybiBkfV0sdHJhbnNmb3JtUmVxdWVzdDpbZnVuY3Rpb24oYSl7cmV0dXJuIFEoYSkmJlwiW29iamVjdCBGaWxlXVwiIT09eWEuY2FsbChhKSYmXCJbb2JqZWN0IEJsb2JdXCIhPT15YS5jYWxsKGEpP3NhKGEpOmF9XSxoZWFkZXJzOntjb21tb246e0FjY2VwdDpcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvcGxhaW4sICovKlwifSxcbnBvc3Q6amEoZCkscHV0OmphKGQpLHBhdGNoOmphKGQpfSx4c3JmQ29va2llTmFtZTpcIlhTUkYtVE9LRU5cIix4c3JmSGVhZGVyTmFtZTpcIlgtWFNSRi1UT0tFTlwifSxmPXRoaXMuaW50ZXJjZXB0b3JzPVtdO3RoaXMuJGdldD1bXCIkaHR0cEJhY2tlbmRcIixcIiRicm93c2VyXCIsXCIkY2FjaGVGYWN0b3J5XCIsXCIkcm9vdFNjb3BlXCIsXCIkcVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oYSxiLGMsZCxtLHApe2Z1bmN0aW9uIGsoYSl7ZnVuY3Rpb24gYihhKXt2YXIgZD1FKHt9LGEse2RhdGE6SGMoYS5kYXRhLGEuaGVhZGVycyxjLnRyYW5zZm9ybVJlc3BvbnNlKX0pO3JldHVybiAyMDA8PWEuc3RhdHVzJiYzMDA+YS5zdGF0dXM/ZDptLnJlamVjdChkKX12YXIgYz17bWV0aG9kOlwiZ2V0XCIsdHJhbnNmb3JtUmVxdWVzdDplLnRyYW5zZm9ybVJlcXVlc3QsdHJhbnNmb3JtUmVzcG9uc2U6ZS50cmFuc2Zvcm1SZXNwb25zZX0sZD1mdW5jdGlvbihhKXt2YXIgYj1lLmhlYWRlcnMsYz1FKHt9LGEuaGVhZGVycyksXG5kLGYsYj1FKHt9LGIuY29tbW9uLGJbSihhLm1ldGhvZCldKTthOmZvcihkIGluIGIpe2E9SihkKTtmb3IoZiBpbiBjKWlmKEooZik9PT1hKWNvbnRpbnVlIGE7Y1tkXT1iW2RdfShmdW5jdGlvbihhKXt2YXIgYjtxKGEsZnVuY3Rpb24oYyxkKXtBKGMpJiYoYj1jKCksbnVsbCE9Yj9hW2RdPWI6ZGVsZXRlIGFbZF0pfSl9KShjKTtyZXR1cm4gY30oYSk7RShjLGEpO2MuaGVhZGVycz1kO2MubWV0aG9kPWliKGMubWV0aG9kKTt2YXIgZj1bZnVuY3Rpb24oYSl7ZD1hLmhlYWRlcnM7dmFyIGM9SGMoYS5kYXRhLEdjKGQpLGEudHJhbnNmb3JtUmVxdWVzdCk7RihjKSYmcShkLGZ1bmN0aW9uKGEsYil7XCJjb250ZW50LXR5cGVcIj09PUooYikmJmRlbGV0ZSBkW2JdfSk7RihhLndpdGhDcmVkZW50aWFscykmJiFGKGUud2l0aENyZWRlbnRpYWxzKSYmKGEud2l0aENyZWRlbnRpYWxzPWUud2l0aENyZWRlbnRpYWxzKTtyZXR1cm4gcyhhLGMsZCkudGhlbihiLGIpfSx0XSxnPW0ud2hlbihjKTtmb3IocSh1LFxuZnVuY3Rpb24oYSl7KGEucmVxdWVzdHx8YS5yZXF1ZXN0RXJyb3IpJiZmLnVuc2hpZnQoYS5yZXF1ZXN0LGEucmVxdWVzdEVycm9yKTsoYS5yZXNwb25zZXx8YS5yZXNwb25zZUVycm9yKSYmZi5wdXNoKGEucmVzcG9uc2UsYS5yZXNwb25zZUVycm9yKX0pO2YubGVuZ3RoOyl7YT1mLnNoaWZ0KCk7dmFyIGg9Zi5zaGlmdCgpLGc9Zy50aGVuKGEsaCl9Zy5zdWNjZXNzPWZ1bmN0aW9uKGEpe2cudGhlbihmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsYyl9KTtyZXR1cm4gZ307Zy5lcnJvcj1mdW5jdGlvbihhKXtnLnRoZW4obnVsbCxmdW5jdGlvbihiKXthKGIuZGF0YSxiLnN0YXR1cyxiLmhlYWRlcnMsYyl9KTtyZXR1cm4gZ307cmV0dXJuIGd9ZnVuY3Rpb24gcyhjLGYsbil7ZnVuY3Rpb24gcyhhLGIsYyxlKXtDJiYoMjAwPD1hJiYzMDA+YT9DLnB1dChYLFthLGIsRmMoYyksZV0pOkMucmVtb3ZlKFgpKTtwKGIsYSxjLGUpO2QuJCRwaGFzZXx8ZC4kYXBwbHkoKX1cbmZ1bmN0aW9uIHAoYSxiLGQsZSl7Yj1NYXRoLm1heChiLDApOygyMDA8PWImJjMwMD5iP3EucmVzb2x2ZTpxLnJlamVjdCkoe2RhdGE6YSxzdGF0dXM6YixoZWFkZXJzOkdjKGQpLGNvbmZpZzpjLHN0YXR1c1RleHQ6ZX0pfWZ1bmN0aW9uIHUoKXt2YXIgYT1NYShrLnBlbmRpbmdSZXF1ZXN0cyxjKTstMSE9PWEmJmsucGVuZGluZ1JlcXVlc3RzLnNwbGljZShhLDEpfXZhciBxPW0uZGVmZXIoKSxIPXEucHJvbWlzZSxDLEQsWD1yKGMudXJsLGMucGFyYW1zKTtrLnBlbmRpbmdSZXF1ZXN0cy5wdXNoKGMpO0gudGhlbih1LHUpOyhjLmNhY2hlfHxlLmNhY2hlKSYmKCExIT09Yy5jYWNoZSYmXCJHRVRcIj09Yy5tZXRob2QpJiYoQz1RKGMuY2FjaGUpP2MuY2FjaGU6UShlLmNhY2hlKT9lLmNhY2hlOkwpO2lmKEMpaWYoRD1DLmdldChYKSx2KEQpKXtpZihELnRoZW4pcmV0dXJuIEQudGhlbih1LHUpLEQ7TShEKT9wKERbMV0sRFswXSxqYShEWzJdKSxEWzNdKTpwKEQsMjAwLHt9LFwiT0tcIil9ZWxzZSBDLnB1dChYLFxuSCk7RihEKSYmKChEPU9iKGMudXJsKT9iLmNvb2tpZXMoKVtjLnhzcmZDb29raWVOYW1lfHxlLnhzcmZDb29raWVOYW1lXTp0KSYmKG5bYy54c3JmSGVhZGVyTmFtZXx8ZS54c3JmSGVhZGVyTmFtZV09RCksYShjLm1ldGhvZCxYLGYscyxuLGMudGltZW91dCxjLndpdGhDcmVkZW50aWFscyxjLnJlc3BvbnNlVHlwZSkpO3JldHVybiBIfWZ1bmN0aW9uIHIoYSxiKXtpZighYilyZXR1cm4gYTt2YXIgYz1bXTtoZChiLGZ1bmN0aW9uKGEsYil7bnVsbD09PWF8fEYoYSl8fChNKGEpfHwoYT1bYV0pLHEoYSxmdW5jdGlvbihhKXtRKGEpJiYoZGEoYSk/YT1hLnRvSVNPU3RyaW5nKCk6UShhKSYmKGE9c2EoYSkpKTtjLnB1c2goemEoYikrXCI9XCIremEoYSkpfSkpfSk7MDxjLmxlbmd0aCYmKGErPSgtMT09YS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIikrYy5qb2luKFwiJlwiKSk7cmV0dXJuIGF9dmFyIEw9YyhcIiRodHRwXCIpLHU9W107cShmLGZ1bmN0aW9uKGEpe3UudW5zaGlmdChHKGEpP3AuZ2V0KGEpOlxucC5pbnZva2UoYSkpfSk7ay5wZW5kaW5nUmVxdWVzdHM9W107KGZ1bmN0aW9uKGEpe3EoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2tbYV09ZnVuY3Rpb24oYixjKXtyZXR1cm4gayhFKGN8fHt9LHttZXRob2Q6YSx1cmw6Yn0pKX19KX0pKFwiZ2V0XCIsXCJkZWxldGVcIixcImhlYWRcIixcImpzb25wXCIpOyhmdW5jdGlvbihhKXtxKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtrW2FdPWZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gayhFKGR8fHt9LHttZXRob2Q6YSx1cmw6YixkYXRhOmN9KSl9fSl9KShcInBvc3RcIixcInB1dFwiLFwicGF0Y2hcIik7ay5kZWZhdWx0cz1lO3JldHVybiBrfV19ZnVuY3Rpb24gVWUoYil7aWYoOD49VCYmKCFiLm1hdGNoKC9eKGdldHxwb3N0fGhlYWR8cHV0fGRlbGV0ZXxvcHRpb25zKSQvaSl8fCFQLlhNTEh0dHBSZXF1ZXN0KSlyZXR1cm4gbmV3IFAuQWN0aXZlWE9iamVjdChcIk1pY3Jvc29mdC5YTUxIVFRQXCIpO2lmKFAuWE1MSHR0cFJlcXVlc3QpcmV0dXJuIG5ldyBQLlhNTEh0dHBSZXF1ZXN0O1xudGhyb3cgTyhcIiRodHRwQmFja2VuZFwiKShcIm5veGhyXCIpO31mdW5jdGlvbiBvZSgpe3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJHdpbmRvd1wiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhLGMpe3JldHVybiBWZShiLFVlLGIuZGVmZXIsYS5hbmd1bGFyLmNhbGxiYWNrcyxjWzBdKX1dfWZ1bmN0aW9uIFZlKGIsYSxjLGQsZSl7ZnVuY3Rpb24gZihhLGIsYyl7dmFyIGY9ZS5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGg9bnVsbDtmLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtmLnNyYz1hO2YuYXN5bmM9ITA7aD1mdW5jdGlvbihhKXtUYShmLFwibG9hZFwiLGgpO1RhKGYsXCJlcnJvclwiLGgpO2UuYm9keS5yZW1vdmVDaGlsZChmKTtmPW51bGw7dmFyIGc9LTEscj1cInVua25vd25cIjthJiYoXCJsb2FkXCIhPT1hLnR5cGV8fGRbYl0uY2FsbGVkfHwoYT17dHlwZTpcImVycm9yXCJ9KSxyPWEudHlwZSxnPVwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwKTtjJiZjKGcscil9O3NiKGYsXCJsb2FkXCIsaCk7c2IoZixcImVycm9yXCIsXG5oKTtlLmJvZHkuYXBwZW5kQ2hpbGQoZik7cmV0dXJuIGh9dmFyIGg9LTE7cmV0dXJuIGZ1bmN0aW9uKGUsbixsLG0scCxrLHMscil7ZnVuY3Rpb24gTCgpe0s9aDt4JiZ4KCk7eSYmeS5hYm9ydCgpfWZ1bmN0aW9uIHUoYSxkLGUsZixnKXtOJiZjLmNhbmNlbChOKTt4PXk9bnVsbDswPT09ZCYmKGQ9ZT8yMDA6XCJmaWxlXCI9PXZhKG4pLnByb3RvY29sPzQwNDowKTthKDEyMjM9PT1kPzIwNDpkLGUsZixnfHxcIlwiKTtiLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3QoQil9dmFyIEs7Yi4kJGluY091dHN0YW5kaW5nUmVxdWVzdENvdW50KCk7bj1ufHxiLnVybCgpO2lmKFwianNvbnBcIj09SihlKSl7dmFyIHc9XCJfXCIrKGQuY291bnRlcisrKS50b1N0cmluZygzNik7ZFt3XT1mdW5jdGlvbihhKXtkW3ddLmRhdGE9YTtkW3ddLmNhbGxlZD0hMH07dmFyIHg9ZihuLnJlcGxhY2UoXCJKU09OX0NBTExCQUNLXCIsXCJhbmd1bGFyLmNhbGxiYWNrcy5cIit3KSx3LGZ1bmN0aW9uKGEsYil7dShtLGEsZFt3XS5kYXRhLFxuXCJcIixiKTtkW3ddPUJ9KX1lbHNle3ZhciB5PWEoZSk7eS5vcGVuKGUsbiwhMCk7cShwLGZ1bmN0aW9uKGEsYil7dihhKSYmeS5zZXRSZXF1ZXN0SGVhZGVyKGIsYSl9KTt5Lm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpe2lmKHkmJjQ9PXkucmVhZHlTdGF0ZSl7dmFyIGE9bnVsbCxiPW51bGwsYz1cIlwiO0shPT1oJiYoYT15LmdldEFsbFJlc3BvbnNlSGVhZGVycygpLGI9XCJyZXNwb25zZVwiaW4geT95LnJlc3BvbnNlOnkucmVzcG9uc2VUZXh0KTtLPT09aCYmMTA+VHx8KGM9eS5zdGF0dXNUZXh0KTt1KG0sS3x8eS5zdGF0dXMsYixhLGMpfX07cyYmKHkud2l0aENyZWRlbnRpYWxzPSEwKTtpZihyKXRyeXt5LnJlc3BvbnNlVHlwZT1yfWNhdGNoKFkpe2lmKFwianNvblwiIT09cil0aHJvdyBZO315LnNlbmQobHx8bnVsbCl9aWYoMDxrKXZhciBOPWMoTCxrKTtlbHNlIGsmJmsudGhlbiYmay50aGVuKEwpfX1mdW5jdGlvbiBsZSgpe3ZhciBiPVwie3tcIixhPVwifX1cIjt0aGlzLnN0YXJ0U3ltYm9sPVxuZnVuY3Rpb24oYSl7cmV0dXJuIGE/KGI9YSx0aGlzKTpifTt0aGlzLmVuZFN5bWJvbD1mdW5jdGlvbihiKXtyZXR1cm4gYj8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkc2NlXCIsZnVuY3Rpb24oYyxkLGUpe2Z1bmN0aW9uIGYoYSl7cmV0dXJuXCJcXFxcXFxcXFxcXFxcIithfWZ1bmN0aW9uIGgoZixoLHMscil7ZnVuY3Rpb24gTChhKXt0cnl7dmFyIGI7dmFyIGM9cz9lLmdldFRydXN0ZWQocyxhKTplLnZhbHVlT2YoYSk7aWYobnVsbD09YyliPVwiXCI7ZWxzZXtzd2l0Y2godHlwZW9mIGMpe2Nhc2UgXCJzdHJpbmdcIjpicmVhaztjYXNlIFwibnVtYmVyXCI6Yz1cIlwiK2M7YnJlYWs7ZGVmYXVsdDpjPXNhKGMpfWI9Y31yZXR1cm4gYn1jYXRjaChnKXthPVBiKFwiaW50ZXJyXCIsZixnLnRvU3RyaW5nKCkpLGQoYSl9fXI9ISFyO2Zvcih2YXIgdSxLLHc9MCx4PVtdLHk9W10sWT1bXSxOPWYubGVuZ3RoLFI9ITEsSD0hMSxDPVtdO3c8TjspaWYoLTEhPSh1PWYuaW5kZXhPZihiLFxudykpJiYtMSE9KEs9Zi5pbmRleE9mKGEsdStnKSkpdyE9PXUmJihIPSEwKSx4LnB1c2goZi5zdWJzdHJpbmcodyx1KSksdz1mLnN1YnN0cmluZyh1K2csSykseS5wdXNoKHcpLFkucHVzaChjKHcsTCkpLHc9SytuLFI9ITA7ZWxzZXt3IT09TiYmKEg9ITAseC5wdXNoKGYuc3Vic3RyaW5nKHcpKSk7YnJlYWt9cSh4LGZ1bmN0aW9uKGMsZCl7eFtkXT14W2RdLnJlcGxhY2UobCxiKS5yZXBsYWNlKG0sYSl9KTt4Lmxlbmd0aD09PXkubGVuZ3RoJiZ4LnB1c2goXCJcIik7aWYocyYmUiYmKEh8fDE8eS5sZW5ndGgpKXRocm93IFBiKFwibm9jb25jYXRcIixmKTtpZighaHx8Uil7Qy5sZW5ndGg9eC5sZW5ndGgreS5sZW5ndGg7dmFyIEQ9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz15Lmxlbmd0aDtiPGM7YisrKXtpZihyJiZGKGFbYl0pKXJldHVybjtDWzIqYl09eFtiXTtDWzIqYisxXT1hW2JdfUNbMipjXT14W2NdO3JldHVybiBDLmpvaW4oXCJcIil9O3JldHVybiBFKGZ1bmN0aW9uKGEpe3ZhciBiPVxuMCxjPXkubGVuZ3RoLGU9QXJyYXkoYyk7dHJ5e2Zvcig7YjxjO2IrKyllW2JdPVlbYl0oYSk7cmV0dXJuIEQoZSl9Y2F0Y2goZyl7YT1QYihcImludGVyclwiLGYsZy50b1N0cmluZygpKSxkKGEpfX0se2V4cDpmLHNlcGFyYXRvcnM6eCxleHByZXNzaW9uczp5LCQkd2F0Y2hEZWxlZ2F0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZTtyZXR1cm4gYS4kd2F0Y2hHcm91cChZLGZ1bmN0aW9uKGMsZCl7dmFyIGY9RChjKTtBKGIpJiZiLmNhbGwodGhpcyxmLGMhPT1kP2U6ZixhKTtlPWZ9LGMsZCl9fSl9fXZhciBnPWIubGVuZ3RoLG49YS5sZW5ndGgsbD1SZWdFeHAoYi5yZXBsYWNlKC8uL2csZiksXCJnXCIpLG09UmVnRXhwKGEucmVwbGFjZSgvLi9nLGYpLFwiZ1wiKTtoLnN0YXJ0U3ltYm9sPWZ1bmN0aW9uKCl7cmV0dXJuIGJ9O2guZW5kU3ltYm9sPWZ1bmN0aW9uKCl7cmV0dXJuIGF9O3JldHVybiBofV19ZnVuY3Rpb24gbWUoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJHdpbmRvd1wiLFwiJHFcIixcblwiJCRxXCIsZnVuY3Rpb24oYixhLGMsZCl7ZnVuY3Rpb24gZShlLGcsbixsKXt2YXIgbT1hLnNldEludGVydmFsLHA9YS5jbGVhckludGVydmFsLGs9MCxzPXYobCkmJiFsLHI9KHM/ZDpjKS5kZWZlcigpLEw9ci5wcm9taXNlO249dihuKT9uOjA7TC50aGVuKG51bGwsbnVsbCxlKTtMLiQkaW50ZXJ2YWxJZD1tKGZ1bmN0aW9uKCl7ci5ub3RpZnkoaysrKTswPG4mJms+PW4mJihyLnJlc29sdmUoaykscChMLiQkaW50ZXJ2YWxJZCksZGVsZXRlIGZbTC4kJGludGVydmFsSWRdKTtzfHxiLiRhcHBseSgpfSxnKTtmW0wuJCRpbnRlcnZhbElkXT1yO3JldHVybiBMfXZhciBmPXt9O2UuY2FuY2VsPWZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkaW50ZXJ2YWxJZCBpbiBmPyhmW2IuJCRpbnRlcnZhbElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxhLmNsZWFySW50ZXJ2YWwoYi4kJGludGVydmFsSWQpLGRlbGV0ZSBmW2IuJCRpbnRlcnZhbElkXSwhMCk6ITF9O3JldHVybiBlfV19ZnVuY3Rpb24gdWQoKXt0aGlzLiRnZXQ9XG5mdW5jdGlvbigpe3JldHVybntpZDpcImVuLXVzXCIsTlVNQkVSX0ZPUk1BVFM6e0RFQ0lNQUxfU0VQOlwiLlwiLEdST1VQX1NFUDpcIixcIixQQVRURVJOUzpbe21pbkludDoxLG1pbkZyYWM6MCxtYXhGcmFjOjMscG9zUHJlOlwiXCIscG9zU3VmOlwiXCIsbmVnUHJlOlwiLVwiLG5lZ1N1ZjpcIlwiLGdTaXplOjMsbGdTaXplOjN9LHttaW5JbnQ6MSxtaW5GcmFjOjIsbWF4RnJhYzoyLHBvc1ByZTpcIlxcdTAwYTRcIixwb3NTdWY6XCJcIixuZWdQcmU6XCIoXFx1MDBhNFwiLG5lZ1N1ZjpcIilcIixnU2l6ZTozLGxnU2l6ZTozfV0sQ1VSUkVOQ1lfU1lNOlwiJFwifSxEQVRFVElNRV9GT1JNQVRTOntNT05USDpcIkphbnVhcnkgRmVicnVhcnkgTWFyY2ggQXByaWwgTWF5IEp1bmUgSnVseSBBdWd1c3QgU2VwdGVtYmVyIE9jdG9iZXIgTm92ZW1iZXIgRGVjZW1iZXJcIi5zcGxpdChcIiBcIiksU0hPUlRNT05USDpcIkphbiBGZWIgTWFyIEFwciBNYXkgSnVuIEp1bCBBdWcgU2VwIE9jdCBOb3YgRGVjXCIuc3BsaXQoXCIgXCIpLERBWTpcIlN1bmRheSBNb25kYXkgVHVlc2RheSBXZWRuZXNkYXkgVGh1cnNkYXkgRnJpZGF5IFNhdHVyZGF5XCIuc3BsaXQoXCIgXCIpLFxuU0hPUlREQVk6XCJTdW4gTW9uIFR1ZSBXZWQgVGh1IEZyaSBTYXRcIi5zcGxpdChcIiBcIiksQU1QTVM6W1wiQU1cIixcIlBNXCJdLG1lZGl1bTpcIk1NTSBkLCB5IGg6bW06c3MgYVwiLFwic2hvcnRcIjpcIk0vZC95eSBoOm1tIGFcIixmdWxsRGF0ZTpcIkVFRUUsIE1NTU0gZCwgeVwiLGxvbmdEYXRlOlwiTU1NTSBkLCB5XCIsbWVkaXVtRGF0ZTpcIk1NTSBkLCB5XCIsc2hvcnREYXRlOlwiTS9kL3l5XCIsbWVkaXVtVGltZTpcImg6bW06c3MgYVwiLHNob3J0VGltZTpcImg6bW0gYVwifSxwbHVyYWxDYXQ6ZnVuY3Rpb24oYil7cmV0dXJuIDE9PT1iP1wib25lXCI6XCJvdGhlclwifX19fWZ1bmN0aW9uIFFiKGIpe2I9Yi5zcGxpdChcIi9cIik7Zm9yKHZhciBhPWIubGVuZ3RoO2EtLTspYlthXT1lYihiW2FdKTtyZXR1cm4gYi5qb2luKFwiL1wiKX1mdW5jdGlvbiBJYyhiLGEsYyl7Yj12YShiLGMpO2EuJCRwcm90b2NvbD1iLnByb3RvY29sO2EuJCRob3N0PWIuaG9zdG5hbWU7YS4kJHBvcnQ9VShiLnBvcnQpfHxXZVtiLnByb3RvY29sXXx8bnVsbH1cbmZ1bmN0aW9uIEpjKGIsYSxjKXt2YXIgZD1cIi9cIiE9PWIuY2hhckF0KDApO2QmJihiPVwiL1wiK2IpO2I9dmEoYixjKTthLiQkcGF0aD1kZWNvZGVVUklDb21wb25lbnQoZCYmXCIvXCI9PT1iLnBhdGhuYW1lLmNoYXJBdCgwKT9iLnBhdGhuYW1lLnN1YnN0cmluZygxKTpiLnBhdGhuYW1lKTthLiQkc2VhcmNoPWZjKGIuc2VhcmNoKTthLiQkaGFzaD1kZWNvZGVVUklDb21wb25lbnQoYi5oYXNoKTthLiQkcGF0aCYmXCIvXCIhPWEuJCRwYXRoLmNoYXJBdCgwKSYmKGEuJCRwYXRoPVwiL1wiK2EuJCRwYXRoKX1mdW5jdGlvbiBwYShiLGEpe2lmKDA9PT1hLmluZGV4T2YoYikpcmV0dXJuIGEuc3Vic3RyKGIubGVuZ3RoKX1mdW5jdGlvbiBYYShiKXt2YXIgYT1iLmluZGV4T2YoXCIjXCIpO3JldHVybi0xPT1hP2I6Yi5zdWJzdHIoMCxhKX1mdW5jdGlvbiBSYihiKXtyZXR1cm4gYi5zdWJzdHIoMCxYYShiKS5sYXN0SW5kZXhPZihcIi9cIikrMSl9ZnVuY3Rpb24gS2MoYixhKXt0aGlzLiQkaHRtbDU9ITA7YT1hfHxcblwiXCI7dmFyIGM9UmIoYik7SWMoYix0aGlzLGIpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihhKXt2YXIgZT1wYShjLGEpO2lmKCFHKGUpKXRocm93IFNiKFwiaXB0aHByZnhcIixhLGMpO0pjKGUsdGhpcyxiKTt0aGlzLiQkcGF0aHx8KHRoaXMuJCRwYXRoPVwiL1wiKTt0aGlzLiQkY29tcG9zZSgpfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBhPUViKHRoaXMuJCRzZWFyY2gpLGI9dGhpcy4kJGhhc2g/XCIjXCIrZWIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGE/XCI/XCIrYTpcIlwiKStiO3RoaXMuJCRhYnNVcmw9Yyt0aGlzLiQkdXJsLnN1YnN0cigxKX07dGhpcy4kJHJld3JpdGU9ZnVuY3Rpb24oZCl7dmFyIGU7aWYoKGU9cGEoYixkKSkhPT10KXJldHVybiBkPWUsKGU9cGEoYSxlKSkhPT10P2MrKHBhKFwiL1wiLGUpfHxlKTpiK2Q7aWYoKGU9cGEoYyxkKSkhPT10KXJldHVybiBjK2U7aWYoYz09ZCtcIi9cIilyZXR1cm4gY319ZnVuY3Rpb24gVGIoYixhKXt2YXIgYz1cblJiKGIpO0ljKGIsdGhpcyxiKTt0aGlzLiQkcGFyc2U9ZnVuY3Rpb24oZCl7dmFyIGU9cGEoYixkKXx8cGEoYyxkKSxlPVwiI1wiPT1lLmNoYXJBdCgwKT9wYShhLGUpOnRoaXMuJCRodG1sNT9lOlwiXCI7aWYoIUcoZSkpdGhyb3cgU2IoXCJpaHNocHJmeFwiLGQsYSk7SmMoZSx0aGlzLGIpO2Q9dGhpcy4kJHBhdGg7dmFyIGY9L15cXC9bQS1aXTooXFwvLiopLzswPT09ZS5pbmRleE9mKGIpJiYoZT1lLnJlcGxhY2UoYixcIlwiKSk7Zi5leGVjKGUpfHwoZD0oZT1mLmV4ZWMoZCkpP2VbMV06ZCk7dGhpcy4kJHBhdGg9ZDt0aGlzLiQkY29tcG9zZSgpfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBjPUViKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XCIjXCIrZWIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YisodGhpcy4kJHVybD9hK3RoaXMuJCR1cmw6XCJcIil9O3RoaXMuJCRyZXdyaXRlPWZ1bmN0aW9uKGEpe2lmKFhhKGIpPT1cblhhKGEpKXJldHVybiBhfX1mdW5jdGlvbiBVYihiLGEpe3RoaXMuJCRodG1sNT0hMDtUYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGM9UmIoYik7dGhpcy4kJHJld3JpdGU9ZnVuY3Rpb24oZCl7dmFyIGU7aWYoYj09WGEoZCkpcmV0dXJuIGQ7aWYoZT1wYShjLGQpKXJldHVybiBiK2ErZTtpZihjPT09ZCtcIi9cIilyZXR1cm4gY307dGhpcy4kJGNvbXBvc2U9ZnVuY3Rpb24oKXt2YXIgYz1FYih0aGlzLiQkc2VhcmNoKSxlPXRoaXMuJCRoYXNoP1wiI1wiK2ViKHRoaXMuJCRoYXNoKTpcIlwiO3RoaXMuJCR1cmw9UWIodGhpcy4kJHBhdGgpKyhjP1wiP1wiK2M6XCJcIikrZTt0aGlzLiQkYWJzVXJsPWIrYSt0aGlzLiQkdXJsfX1mdW5jdGlvbiB0YihiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gdGhpc1tiXX19ZnVuY3Rpb24gTGMoYixhKXtyZXR1cm4gZnVuY3Rpb24oYyl7aWYoRihjKSlyZXR1cm4gdGhpc1tiXTt0aGlzW2JdPWEoYyk7dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc319ZnVuY3Rpb24gcGUoKXt2YXIgYj1cblwiXCIsYT0hMTt0aGlzLmhhc2hQcmVmaXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYSk/KGI9YSx0aGlzKTpifTt0aGlzLmh0bWw1TW9kZT1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRyb290RWxlbWVudFwiLGZ1bmN0aW9uKGMsZCxlLGYpe2Z1bmN0aW9uIGgoYSl7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGcuYWJzVXJsKCksYSl9dmFyIGcsbixsPWQuYmFzZUhyZWYoKSxtPWQudXJsKCkscDthPyhwPW0uc3Vic3RyaW5nKDAsbS5pbmRleE9mKFwiL1wiLG0uaW5kZXhPZihcIi8vXCIpKzIpKSsobHx8XCIvXCIpLG49ZS5oaXN0b3J5P0tjOlViKToocD1YYShtKSxuPVRiKTtnPW5ldyBuKHAsXCIjXCIrYik7Zy4kJHBhcnNlKGcuJCRyZXdyaXRlKG0pKTtmLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtpZighYS5jdHJsS2V5JiYhYS5tZXRhS2V5JiYyIT1hLndoaWNoKXtmb3IodmFyIGU9XG56KGEudGFyZ2V0KTtcImFcIiE9PW1hKGVbMF0pOylpZihlWzBdPT09ZlswXXx8IShlPWUucGFyZW50KCkpWzBdKXJldHVybjt2YXIgaD1lLnByb3AoXCJocmVmXCIpO1EoaCkmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PWgudG9TdHJpbmcoKSYmKGg9dmEoaC5hbmltVmFsKS5ocmVmKTtpZihuPT09VWIpe3ZhciBrPWUuYXR0cihcImhyZWZcIil8fGUuYXR0cihcInhsaW5rOmhyZWZcIik7aWYoMD5rLmluZGV4T2YoXCI6Ly9cIikpaWYoaD1cIiNcIitiLFwiL1wiPT1rWzBdKWg9cCtoK2s7ZWxzZSBpZihcIiNcIj09a1swXSloPXAraCsoZy5wYXRoKCl8fFwiL1wiKStrO2Vsc2V7Zm9yKHZhciBsPWcucGF0aCgpLnNwbGl0KFwiL1wiKSxrPWsuc3BsaXQoXCIvXCIpLG09MDttPGsubGVuZ3RoO20rKylcIi5cIiE9a1ttXSYmKFwiLi5cIj09a1ttXT9sLnBvcCgpOmtbbV0ubGVuZ3RoJiZsLnB1c2goa1ttXSkpO2g9cCtoK2wuam9pbihcIi9cIil9fWw9Zy4kJHJld3JpdGUoaCk7aCYmKCFlLmF0dHIoXCJ0YXJnZXRcIikmJmwmJlxuIWEuaXNEZWZhdWx0UHJldmVudGVkKCkpJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGwhPWQudXJsKCkmJihnLiQkcGFyc2UobCksYy4kYXBwbHkoKSxQLmFuZ3VsYXJbXCJmZi02ODQyMDgtcHJldmVudERlZmF1bHRcIl09ITApKX19KTtnLmFic1VybCgpIT1tJiZkLnVybChnLmFic1VybCgpLCEwKTtkLm9uVXJsQ2hhbmdlKGZ1bmN0aW9uKGEpe2cuYWJzVXJsKCkhPWEmJihjLiRldmFsQXN5bmMoZnVuY3Rpb24oKXt2YXIgYj1nLmFic1VybCgpO2cuJCRwYXJzZShhKTtjLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLGEsYikuZGVmYXVsdFByZXZlbnRlZD8oZy4kJHBhcnNlKGIpLGQudXJsKGIpKTpoKGIpfSksYy4kJHBoYXNlfHxjLiRkaWdlc3QoKSl9KTt2YXIgaz0wO2MuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGE9ZC51cmwoKSxiPWcuJCRyZXBsYWNlO2smJmE9PWcuYWJzVXJsKCl8fChrKyssYy4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7Yy4kYnJvYWRjYXN0KFwiJGxvY2F0aW9uQ2hhbmdlU3RhcnRcIixcbmcuYWJzVXJsKCksYSkuZGVmYXVsdFByZXZlbnRlZD9nLiQkcGFyc2UoYSk6KGQudXJsKGcuYWJzVXJsKCksYiksaChhKSl9KSk7Zy4kJHJlcGxhY2U9ITE7cmV0dXJuIGt9KTtyZXR1cm4gZ31dfWZ1bmN0aW9uIHFlKCl7dmFyIGI9ITAsYT10aGlzO3RoaXMuZGVidWdFbmFibGVkPWZ1bmN0aW9uKGEpe3JldHVybiB2KGEpPyhiPWEsdGhpcyk6Yn07dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEpe2EgaW5zdGFuY2VvZiBFcnJvciYmKGEuc3RhY2s/YT1hLm1lc3NhZ2UmJi0xPT09YS5zdGFjay5pbmRleE9mKGEubWVzc2FnZSk/XCJFcnJvcjogXCIrYS5tZXNzYWdlK1wiXFxuXCIrYS5zdGFjazphLnN0YWNrOmEuc291cmNlVVJMJiYoYT1hLm1lc3NhZ2UrXCJcXG5cIithLnNvdXJjZVVSTCtcIjpcIithLmxpbmUpKTtyZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3ZhciBiPWMuY29uc29sZXx8e30sZT1iW2FdfHxiLmxvZ3x8QjthPSExO3RyeXthPSEhZS5hcHBseX1jYXRjaChuKXt9cmV0dXJuIGE/XG5mdW5jdGlvbigpe3ZhciBhPVtdO3EoYXJndW1lbnRzLGZ1bmN0aW9uKGIpe2EucHVzaChkKGIpKX0pO3JldHVybiBlLmFwcGx5KGIsYSl9OmZ1bmN0aW9uKGEsYil7ZShhLG51bGw9PWI/XCJcIjpiKX19cmV0dXJue2xvZzplKFwibG9nXCIpLGluZm86ZShcImluZm9cIiksd2FybjplKFwid2FyblwiKSxlcnJvcjplKFwiZXJyb3JcIiksZGVidWc6ZnVuY3Rpb24oKXt2YXIgYz1lKFwiZGVidWdcIik7cmV0dXJuIGZ1bmN0aW9uKCl7YiYmYy5hcHBseShhLGFyZ3VtZW50cyl9fSgpfX1dfWZ1bmN0aW9uIHFhKGIsYSl7aWYoXCJfX2RlZmluZUdldHRlcl9fXCI9PT1ifHxcIl9fZGVmaW5lU2V0dGVyX19cIj09PWJ8fFwiX19sb29rdXBHZXR0ZXJfX1wiPT09Ynx8XCJfX2xvb2t1cFNldHRlcl9fXCI9PT1ifHxcIl9fcHJvdG9fX1wiPT09Yil0aHJvdyBpYShcImlzZWNmbGRcIixhKTtyZXR1cm4gYn1mdW5jdGlvbiBKYShiLGEpe2lmKGIpe2lmKGIuY29uc3RydWN0b3I9PT1iKXRocm93IGlhKFwiaXNlY2ZuXCIsYSk7aWYoYi53aW5kb3c9PT1cbmIpdGhyb3cgaWEoXCJpc2Vjd2luZG93XCIsYSk7aWYoYi5jaGlsZHJlbiYmKGIubm9kZU5hbWV8fGIucHJvcCYmYi5hdHRyJiZiLmZpbmQpKXRocm93IGlhKFwiaXNlY2RvbVwiLGEpO2lmKGI9PT1PYmplY3QpdGhyb3cgaWEoXCJpc2Vjb2JqXCIsYSk7fXJldHVybiBifWZ1bmN0aW9uIHViKGIsYSxjLGQpe2E9YS5zcGxpdChcIi5cIik7Zm9yKHZhciBlLGY9MDsxPGEubGVuZ3RoO2YrKyl7ZT1xYShhLnNoaWZ0KCksZCk7dmFyIGg9YltlXTtofHwoaD17fSxiW2VdPWgpO2I9aH1lPXFhKGEuc2hpZnQoKSxkKTtKYShiLGQpO0phKGJbZV0sZCk7cmV0dXJuIGJbZV09Y31mdW5jdGlvbiBNYyhiLGEsYyxkLGUsZil7cWEoYixmKTtxYShhLGYpO3FhKGMsZik7cWEoZCxmKTtxYShlLGYpO3JldHVybiBmdW5jdGlvbihmLGcpe3ZhciBuPWcmJmcuaGFzT3duUHJvcGVydHkoYik/ZzpmO2lmKG51bGw9PW4pcmV0dXJuIG47bj1uW2JdO2lmKCFhKXJldHVybiBuO2lmKG51bGw9PW4pcmV0dXJuIHQ7bj1uW2FdO1xuaWYoIWMpcmV0dXJuIG47aWYobnVsbD09bilyZXR1cm4gdDtuPW5bY107aWYoIWQpcmV0dXJuIG47aWYobnVsbD09bilyZXR1cm4gdDtuPW5bZF07cmV0dXJuIGU/bnVsbD09bj90Om49bltlXTpufX1mdW5jdGlvbiBOYyhiLGEsYyl7aWYoVmIuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuIFZiW2JdO3ZhciBkPWIuc3BsaXQoXCIuXCIpLGU9ZC5sZW5ndGg7aWYoYS5jc3ApYT02PmU/TWMoZFswXSxkWzFdLGRbMl0sZFszXSxkWzRdLGMpOmZ1bmN0aW9uKGEsYil7dmFyIGY9MCxsO2RvIGw9TWMoZFtmKytdLGRbZisrXSxkW2YrK10sZFtmKytdLGRbZisrXSxjKShhLGIpLGI9dCxhPWw7d2hpbGUoZjxlKTtyZXR1cm4gbH07ZWxzZXt2YXIgZj1cInZhciBwO1xcblwiO3EoZCxmdW5jdGlvbihhLGIpe3FhKGEsYyk7Zis9XCJpZihzID09IG51bGwpIHJldHVybiB1bmRlZmluZWQ7XFxucz1cIisoYj9cInNcIjonKChrJiZrLmhhc093blByb3BlcnR5KFwiJythKydcIikpP2s6cyknKSsnW1wiJythKydcIl07XFxuJ30pO1xuZis9XCJyZXR1cm4gcztcIjthPW5ldyBGdW5jdGlvbihcInNcIixcImtcIixmKTthLnRvU3RyaW5nPWJhKGYpfVwiaGFzT3duUHJvcGVydHlcIiE9PWImJihWYltiXT1hKTtyZXR1cm4gYX1mdW5jdGlvbiByZSgpe3ZhciBiPXt9LGE9e2NzcDohMX07dGhpcy4kZ2V0PVtcIiRmaWx0ZXJcIixcIiRzbmlmZmVyXCIsZnVuY3Rpb24oYyxkKXtmdW5jdGlvbiBlKGEsYixjLGQsZSl7dmFyIGYsaDtyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZShhKX0sZnVuY3Rpb24oYSxjLGQpe2g9YTtBKGIpJiZiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2KGEpJiZkLiQkcG9zdERpZ2VzdChmdW5jdGlvbigpe3YoaCkmJmYoKX0pfSxjLGQpfWZ1bmN0aW9uIGYoYSxiLGMsZCxlKXt2YXIgZjtyZXR1cm4gZj1hLiR3YXRjaChmdW5jdGlvbihhKXtyZXR1cm4gZShhKX0sZnVuY3Rpb24oYSxjLGQpe0EoYikmJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2YoKX0sYyxkKX1mdW5jdGlvbiBoKGEsYil7aWYoQShiKSl7dmFyIGM9XG5mdW5jdGlvbihjLGQpe3ZhciBlPWEoYyxkKSxmPWIoZSxjLGQpO3JldHVybiB2KGUpP2Y6ZX07Yy4kJHdhdGNoRGVsZWdhdGU9YS4kJHdhdGNoRGVsZWdhdGU7cmV0dXJuIGN9cmV0dXJuIGF9YS5jc3A9ZC5jc3A7cmV0dXJuIGZ1bmN0aW9uKGQsbil7dmFyIGwsbSxwPWQ9WihkKTtzd2l0Y2godHlwZW9mIGQpe2Nhc2UgXCJzdHJpbmdcIjpyZXR1cm4gYi5oYXNPd25Qcm9wZXJ0eShwKT9sPWJbcF06KFwiOlwiPT09ZC5jaGFyQXQoMCkmJlwiOlwiPT09ZC5jaGFyQXQoMSkmJihtPSEwLGQ9ZC5zdWJzdHJpbmcoMikpLGw9bmV3IFdiKGEpLGw9KG5ldyBZYShsLGMsYSkpLnBhcnNlKGQpLGwuY29uc3RhbnQ/bC4kJHdhdGNoRGVsZWdhdGU9ZjptJiYobC4kJHdhdGNoRGVsZWdhdGU9ZSksXCJoYXNPd25Qcm9wZXJ0eVwiIT09cCYmKGJbcF09bCkpLGgobCxuKTtjYXNlIFwiZnVuY3Rpb25cIjpyZXR1cm4gaChkLG4pO2RlZmF1bHQ6cmV0dXJuIGgoQixuKX19fV19ZnVuY3Rpb24gdGUoKXt0aGlzLiRnZXQ9XG5bXCIkcm9vdFNjb3BlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSl7cmV0dXJuIE9jKGZ1bmN0aW9uKGEpe2IuJGV2YWxBc3luYyhhKX0sYSl9XX1mdW5jdGlvbiB1ZSgpe3RoaXMuJGdldD1bXCIkYnJvd3NlclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGEpe3JldHVybiBPYyhmdW5jdGlvbihhKXtiLmRlZmVyKGEpfSxhKX1dfWZ1bmN0aW9uIE9jKGIsYSl7ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYX1mdW5jdGlvbiBkKGEpe3JldHVybiBoKGEpfXZhciBlPWZ1bmN0aW9uKCl7dmFyIGg9W10sbCxtO3JldHVybiBtPXtyZXNvbHZlOmZ1bmN0aW9uKGEpe2lmKGgpe3ZhciBjPWg7aD10O2w9ZihhKTtjLmxlbmd0aCYmYihmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTAsZD1jLmxlbmd0aDtiPGQ7YisrKWE9Y1tiXSxsLnRoZW4oYVswXSxhWzFdLGFbMl0pfSl9fSxyZWplY3Q6ZnVuY3Rpb24oYSl7bS5yZXNvbHZlKGcoYSkpfSxub3RpZnk6ZnVuY3Rpb24oYSl7aWYoaCl7dmFyIGM9XG5oO2gubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBiLGQ9MCxlPWMubGVuZ3RoO2Q8ZTtkKyspYj1jW2RdLGJbMl0oYSl9KX19LHByb21pc2U6e3RoZW46ZnVuY3Rpb24oYixmLGcpe3ZhciBtPWUoKSxMPWZ1bmN0aW9uKGQpe3RyeXttLnJlc29sdmUoKEEoYik/YjpjKShkKSl9Y2F0Y2goZSl7bS5yZWplY3QoZSksYShlKX19LHU9ZnVuY3Rpb24oYil7dHJ5e20ucmVzb2x2ZSgoQShmKT9mOmQpKGIpKX1jYXRjaChjKXttLnJlamVjdChjKSxhKGMpfX0sSz1mdW5jdGlvbihiKXt0cnl7bS5ub3RpZnkoKEEoZyk/ZzpjKShiKSl9Y2F0Y2goZCl7YShkKX19O2g/aC5wdXNoKFtMLHUsS10pOmwudGhlbihMLHUsSyk7cmV0dXJuIG0ucHJvbWlzZX0sXCJjYXRjaFwiOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnRoZW4obnVsbCxhKX0sXCJmaW5hbGx5XCI6ZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGMpe3ZhciBkPWUoKTtjP2QucmVzb2x2ZShhKTpkLnJlamVjdChhKTtyZXR1cm4gZC5wcm9taXNlfVxuZnVuY3Rpb24gZChlLGYpe3ZhciBnPW51bGw7dHJ5e2c9KGF8fGMpKCl9Y2F0Y2goaCl7cmV0dXJuIGIoaCwhMSl9cmV0dXJuIGcmJkEoZy50aGVuKT9nLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gYihlLGYpfSxmdW5jdGlvbihhKXtyZXR1cm4gYihhLCExKX0pOmIoZSxmKX1yZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uKGEpe3JldHVybiBkKGEsITApfSxmdW5jdGlvbihhKXtyZXR1cm4gZChhLCExKX0pfX19fSxmPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZBKGEudGhlbik/YTp7dGhlbjpmdW5jdGlvbihjKXt2YXIgZD1lKCk7YihmdW5jdGlvbigpe2QucmVzb2x2ZShjKGEpKX0pO3JldHVybiBkLnByb21pc2V9fX0saD1mdW5jdGlvbihhKXt2YXIgYj1lKCk7Yi5yZWplY3QoYSk7cmV0dXJuIGIucHJvbWlzZX0sZz1mdW5jdGlvbihjKXtyZXR1cm57dGhlbjpmdW5jdGlvbihmLGcpe3ZhciBoPWUoKTtiKGZ1bmN0aW9uKCl7dHJ5e2gucmVzb2x2ZSgoQShnKT9nOmQpKGMpKX1jYXRjaChiKXtoLnJlamVjdChiKSxcbmEoYil9fSk7cmV0dXJuIGgucHJvbWlzZX19fTtyZXR1cm57ZGVmZXI6ZSxyZWplY3Q6aCx3aGVuOmZ1bmN0aW9uKGcsbCxtLHApe3ZhciBrPWUoKSxzLHI9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihBKGwpP2w6YykoYil9Y2F0Y2goZCl7cmV0dXJuIGEoZCksaChkKX19LEw9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihBKG0pP206ZCkoYil9Y2F0Y2goYyl7cmV0dXJuIGEoYyksaChjKX19LHU9ZnVuY3Rpb24oYil7dHJ5e3JldHVybihBKHApP3A6YykoYil9Y2F0Y2goZCl7YShkKX19O2IoZnVuY3Rpb24oKXtmKGcpLnRoZW4oZnVuY3Rpb24oYSl7c3x8KHM9ITAsay5yZXNvbHZlKGYoYSkudGhlbihyLEwsdSkpKX0sZnVuY3Rpb24oYSl7c3x8KHM9ITAsay5yZXNvbHZlKEwoYSkpKX0sZnVuY3Rpb24oYSl7c3x8ay5ub3RpZnkodShhKSl9KX0pO3JldHVybiBrLnByb21pc2V9LGFsbDpmdW5jdGlvbihhKXt2YXIgYj1lKCksYz0wLGQ9TShhKT9bXTp7fTtxKGEsZnVuY3Rpb24oYSxlKXtjKys7XG5mKGEpLnRoZW4oZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8KGRbZV09YSwtLWN8fGIucmVzb2x2ZShkKSl9LGZ1bmN0aW9uKGEpe2QuaGFzT3duUHJvcGVydHkoZSl8fGIucmVqZWN0KGEpfSl9KTswPT09YyYmYi5yZXNvbHZlKGQpO3JldHVybiBiLnByb21pc2V9fX1mdW5jdGlvbiBCZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9Yi5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxiLm1velJlcXVlc3RBbmltYXRpb25GcmFtZSxkPWIuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGIud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lLGU9ISFjLGY9ZT9mdW5jdGlvbihhKXt2YXIgYj1jKGEpO3JldHVybiBmdW5jdGlvbigpe2QoYil9fTpmdW5jdGlvbihiKXt2YXIgYz1cbmEoYiwxNi42NiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7YS5jYW5jZWwoYyl9fTtmLnN1cHBvcnRlZD1lO3JldHVybiBmfV19ZnVuY3Rpb24gc2UoKXt2YXIgYj0xMCxhPU8oXCIkcm9vdFNjb3BlXCIpLGM9bnVsbDt0aGlzLmRpZ2VzdFR0bD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1hKTtyZXR1cm4gYn07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRwYXJzZVwiLFwiJGJyb3dzZXJcIixmdW5jdGlvbihkLGUsZixoKXtmdW5jdGlvbiBnKCl7dGhpcy4kaWQ9KytjYjt0aGlzLiQkcGhhc2U9dGhpcy4kcGFyZW50PXRoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXNbXCJ0aGlzXCJdPXRoaXMuJHJvb3Q9dGhpczt0aGlzLiQkZGVzdHJveWVkPSExO3RoaXMuJCRhc3luY1F1ZXVlPVtdO3RoaXMuJCRwb3N0RGlnZXN0UXVldWU9W107XG50aGlzLiQkbGlzdGVuZXJzPXt9O3RoaXMuJCRsaXN0ZW5lckNvdW50PXt9O3RoaXMuJCRpc29sYXRlQmluZGluZ3M9e319ZnVuY3Rpb24gbihiKXtpZihrLiQkcGhhc2UpdGhyb3cgYShcImlucHJvZ1wiLGsuJCRwaGFzZSk7ay4kJHBoYXNlPWJ9ZnVuY3Rpb24gbChhLGIpe3ZhciBjPWYoYSk7UGEoYyxiKTtyZXR1cm4gY31mdW5jdGlvbiBtKGEsYixjKXtkbyBhLiQkbGlzdGVuZXJDb3VudFtjXS09YiwwPT09YS4kJGxpc3RlbmVyQ291bnRbY10mJmRlbGV0ZSBhLiQkbGlzdGVuZXJDb3VudFtjXTt3aGlsZShhPWEuJHBhcmVudCl9ZnVuY3Rpb24gcCgpe31nLnByb3RvdHlwZT17Y29uc3RydWN0b3I6ZywkbmV3OmZ1bmN0aW9uKGEpe2E/KGE9bmV3IGcsYS4kcm9vdD10aGlzLiRyb290LGEuJCRhc3luY1F1ZXVlPXRoaXMuJCRhc3luY1F1ZXVlLGEuJCRwb3N0RGlnZXN0UXVldWU9dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSk6KHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3N8fCh0aGlzLiQkY2hpbGRTY29wZUNsYXNzPVxuZnVuY3Rpb24oKXt0aGlzLiQkd2F0Y2hlcnM9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1udWxsO3RoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kaWQ9KytjYjt0aGlzLiQkY2hpbGRTY29wZUNsYXNzPW51bGx9LHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3MucHJvdG90eXBlPXRoaXMpLGE9bmV3IHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3MpO2FbXCJ0aGlzXCJdPWE7YS4kcGFyZW50PXRoaXM7YS4kJHByZXZTaWJsaW5nPXRoaXMuJCRjaGlsZFRhaWw7dGhpcy4kJGNoaWxkSGVhZD90aGlzLiQkY2hpbGRUYWlsPXRoaXMuJCRjaGlsZFRhaWwuJCRuZXh0U2libGluZz1hOnRoaXMuJCRjaGlsZEhlYWQ9dGhpcy4kJGNoaWxkVGFpbD1hO3JldHVybiBhfSwkd2F0Y2g6ZnVuY3Rpb24oYSxiLGQsZSl7dmFyIGY9bChhLFwid2F0Y2hcIik7aWYoZi4kJHdhdGNoRGVsZWdhdGUpcmV0dXJuIGYuJCR3YXRjaERlbGVnYXRlKHRoaXMsXG5iLGQsZSxmKTt2YXIgZz10aGlzLiQkd2F0Y2hlcnMsaD17Zm46YixsYXN0OnAsZ2V0OmYsZXhwOmEsZXE6ISFkfTtjPW51bGw7QShiKXx8KGguZm49Qik7Z3x8KGc9dGhpcy4kJHdhdGNoZXJzPVtdKTtnLnVuc2hpZnQoaCk7cmV0dXJuIGZ1bmN0aW9uKCl7RGEoZyxoKTtjPW51bGw7QShlKSYmZSgpfX0sJHdhdGNoR3JvdXA6ZnVuY3Rpb24oYSxiKXt2YXIgYz1BcnJheShhLmxlbmd0aCksZD1BcnJheShhLmxlbmd0aCksZT1bXSxmPTAsZz10aGlzLGg7aWYoMT09PWEubGVuZ3RoKXJldHVybiB0aGlzLiR3YXRjaChhWzBdLGZ1bmN0aW9uKGEsZSxmKXtkWzBdPWE7Y1swXT1lO2IuY2FsbCh0aGlzLGQsYT09PWU/ZDpjLGYpfSk7cShhLGZ1bmN0aW9uKGEsYil7dmFyIGs9Zy4kd2F0Y2goYSxmdW5jdGlvbihhLGUpe2RbYl09YTtjW2JdPWU7ZisrfSwhMSxmdW5jdGlvbigpe0RhKGUsayk7ZS5sZW5ndGh8fGgoKX0pO2UucHVzaChrKX0sdGhpcyk7aD1nLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBmfSxcbmZ1bmN0aW9uKGEsZSl7YihkLGE9PT1lP2Q6YyxnKX0pO3JldHVybiBmdW5jdGlvbigpe2Zvcig7ZS5sZW5ndGg7KWVbMF0oKX19LCR3YXRjaENvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQsZSxnLGg9MTxiLmxlbmd0aCxrPTAsbj1mKGEsZnVuY3Rpb24oYSl7ZD1hO3ZhciBiLGM7aWYoUShkKSlpZihiYihkKSlmb3IoZSE9PWwmJihlPWwscT1lLmxlbmd0aD0wLGsrKyksYT1kLmxlbmd0aCxxIT09YSYmKGsrKyxlLmxlbmd0aD1xPWEpLGI9MDtiPGE7YisrKWM9ZVtiXSE9PWVbYl0mJmRbYl0hPT1kW2JdLGN8fGVbYl09PT1kW2JdfHwoaysrLGVbYl09ZFtiXSk7ZWxzZXtlIT09bSYmKGU9bT17fSxxPTAsaysrKTthPTA7Zm9yKGIgaW4gZClkLmhhc093blByb3BlcnR5KGIpJiYoYSsrLGUuaGFzT3duUHJvcGVydHkoYik/KGM9ZVtiXSE9PWVbYl0mJmRbYl0hPT1kW2JdLGN8fGVbYl09PT1kW2JdfHwoaysrLGVbYl09ZFtiXSkpOihxKyssZVtiXT1kW2JdLGsrKykpO1xuaWYocT5hKWZvcihiIGluIGsrKyxlKWUuaGFzT3duUHJvcGVydHkoYikmJiFkLmhhc093blByb3BlcnR5KGIpJiYocS0tLGRlbGV0ZSBlW2JdKX1lbHNlIGUhPT1kJiYoZT1kLGsrKyk7cmV0dXJuIGt9KSxsPVtdLG09e30scD0hMCxxPTA7cmV0dXJuIHRoaXMuJHdhdGNoKG4sZnVuY3Rpb24oKXtwPyhwPSExLGIoZCxkLGMpKTpiKGQsZyxjKTtpZihoKWlmKFEoZCkpaWYoYmIoZCkpe2c9QXJyYXkoZC5sZW5ndGgpO2Zvcih2YXIgYT0wO2E8ZC5sZW5ndGg7YSsrKWdbYV09ZFthXX1lbHNlIGZvcihhIGluIGc9e30sZClEYi5jYWxsKGQsYSkmJihnW2FdPWRbYV0pO2Vsc2UgZz1kfSl9LCRkaWdlc3Q6ZnVuY3Rpb24oKXt2YXIgZCxmLGcsaCxsPXRoaXMuJCRhc3luY1F1ZXVlLG09dGhpcy4kJHBvc3REaWdlc3RRdWV1ZSx4LHEsdj1iLE4sUj1bXSxILEMsRDtuKFwiJGRpZ2VzdFwiKTtjPW51bGw7ZG97cT0hMTtmb3IoTj10aGlzO2wubGVuZ3RoOyl7dHJ5e0Q9bC5zaGlmdCgpLEQuc2NvcGUuJGV2YWwoRC5leHByZXNzaW9uKX1jYXRjaCh0KXtrLiQkcGhhc2U9XG5udWxsLGUodCl9Yz1udWxsfWE6ZG97aWYoaD1OLiQkd2F0Y2hlcnMpZm9yKHg9aC5sZW5ndGg7eC0tOyl0cnl7aWYoZD1oW3hdKWlmKChmPWQuZ2V0KE4pKSE9PShnPWQubGFzdCkmJiEoZC5lcT9yYShmLGcpOlwibnVtYmVyXCI9PT10eXBlb2YgZiYmXCJudW1iZXJcIj09PXR5cGVvZiBnJiZpc05hTihmKSYmaXNOYU4oZykpKXE9ITAsYz1kLGQubGFzdD1kLmVxP0VhKGYsbnVsbCk6ZixkLmZuKGYsZz09PXA/ZjpnLE4pLDU+diYmKEg9NC12LFJbSF18fChSW0hdPVtdKSxDPUEoZC5leHApP1wiZm46IFwiKyhkLmV4cC5uYW1lfHxkLmV4cC50b1N0cmluZygpKTpkLmV4cCxDKz1cIjsgbmV3VmFsOiBcIitzYShmKStcIjsgb2xkVmFsOiBcIitzYShnKSxSW0hdLnB1c2goQykpO2Vsc2UgaWYoZD09PWMpe3E9ITE7YnJlYWsgYX19Y2F0Y2goRSl7ay4kJHBoYXNlPW51bGwsZShFKX1pZighKGg9Ti4kJGNoaWxkSGVhZHx8TiE9PXRoaXMmJk4uJCRuZXh0U2libGluZykpZm9yKDtOIT09dGhpcyYmIShoPU4uJCRuZXh0U2libGluZyk7KU49XG5OLiRwYXJlbnR9d2hpbGUoTj1oKTtpZigocXx8bC5sZW5ndGgpJiYhdi0tKXRocm93IGsuJCRwaGFzZT1udWxsLGEoXCJpbmZkaWdcIixiLHNhKFIpKTt9d2hpbGUocXx8bC5sZW5ndGgpO2ZvcihrLiQkcGhhc2U9bnVsbDttLmxlbmd0aDspdHJ5e20uc2hpZnQoKSgpfWNhdGNoKHope2Uoeil9fSwkZGVzdHJveTpmdW5jdGlvbigpe2lmKCF0aGlzLiQkZGVzdHJveWVkKXt2YXIgYT10aGlzLiRwYXJlbnQ7dGhpcy4kYnJvYWRjYXN0KFwiJGRlc3Ryb3lcIik7dGhpcy4kJGRlc3Ryb3llZD0hMDt0aGlzIT09ayYmKHEodGhpcy4kJGxpc3RlbmVyQ291bnQsQ2IobnVsbCxtLHRoaXMpKSxhLiQkY2hpbGRIZWFkPT10aGlzJiYoYS4kJGNoaWxkSGVhZD10aGlzLiQkbmV4dFNpYmxpbmcpLGEuJCRjaGlsZFRhaWw9PXRoaXMmJihhLiQkY2hpbGRUYWlsPXRoaXMuJCRwcmV2U2libGluZyksdGhpcy4kJHByZXZTaWJsaW5nJiYodGhpcy4kJHByZXZTaWJsaW5nLiQkbmV4dFNpYmxpbmc9dGhpcy4kJG5leHRTaWJsaW5nKSxcbnRoaXMuJCRuZXh0U2libGluZyYmKHRoaXMuJCRuZXh0U2libGluZy4kJHByZXZTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZyksdGhpcy4kcGFyZW50PXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPXRoaXMuJHJvb3Q9bnVsbCx0aGlzLiQkbGlzdGVuZXJzPXt9LHRoaXMuJCR3YXRjaGVycz10aGlzLiQkYXN5bmNRdWV1ZT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlPVtdLHRoaXMuJGRlc3Ryb3k9dGhpcy4kZGlnZXN0PXRoaXMuJGFwcGx5PUIsdGhpcy4kb249dGhpcy4kd2F0Y2g9dGhpcy4kd2F0Y2hHcm91cD1mdW5jdGlvbigpe3JldHVybiBCfSl9fSwkZXZhbDpmdW5jdGlvbihhLGIpe3JldHVybiBmKGEpKHRoaXMsYil9LCRldmFsQXN5bmM6ZnVuY3Rpb24oYSl7ay4kJHBoYXNlfHxrLiQkYXN5bmNRdWV1ZS5sZW5ndGh8fGguZGVmZXIoZnVuY3Rpb24oKXtrLiQkYXN5bmNRdWV1ZS5sZW5ndGgmJmsuJGRpZ2VzdCgpfSk7XG50aGlzLiQkYXN5bmNRdWV1ZS5wdXNoKHtzY29wZTp0aGlzLGV4cHJlc3Npb246YX0pfSwkJHBvc3REaWdlc3Q6ZnVuY3Rpb24oYSl7dGhpcy4kJHBvc3REaWdlc3RRdWV1ZS5wdXNoKGEpfSwkYXBwbHk6ZnVuY3Rpb24oYSl7dHJ5e3JldHVybiBuKFwiJGFwcGx5XCIpLHRoaXMuJGV2YWwoYSl9Y2F0Y2goYil7ZShiKX1maW5hbGx5e2suJCRwaGFzZT1udWxsO3RyeXtrLiRkaWdlc3QoKX1jYXRjaChjKXt0aHJvdyBlKGMpLGM7fX19LCRvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuJCRsaXN0ZW5lcnNbYV07Y3x8KHRoaXMuJCRsaXN0ZW5lcnNbYV09Yz1bXSk7Yy5wdXNoKGIpO3ZhciBkPXRoaXM7ZG8gZC4kJGxpc3RlbmVyQ291bnRbYV18fChkLiQkbGlzdGVuZXJDb3VudFthXT0wKSxkLiQkbGlzdGVuZXJDb3VudFthXSsrO3doaWxlKGQ9ZC4kcGFyZW50KTt2YXIgZT10aGlzO3JldHVybiBmdW5jdGlvbigpe2NbTWEoYyxiKV09bnVsbDttKGUsMSxhKX19LCRlbWl0OmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1bXSxkLGY9dGhpcyxnPSExLGg9e25hbWU6YSx0YXJnZXRTY29wZTpmLHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe2c9ITB9LHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7aC5kZWZhdWx0UHJldmVudGVkPSEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxrPVtoXS5jb25jYXQoa2EuY2FsbChhcmd1bWVudHMsMSkpLG4sbDtkb3tkPWYuJCRsaXN0ZW5lcnNbYV18fGM7aC5jdXJyZW50U2NvcGU9ZjtuPTA7Zm9yKGw9ZC5sZW5ndGg7bjxsO24rKylpZihkW25dKXRyeXtkW25dLmFwcGx5KG51bGwsayl9Y2F0Y2gobSl7ZShtKX1lbHNlIGQuc3BsaWNlKG4sMSksbi0tLGwtLTtpZihnKXJldHVybiBoLmN1cnJlbnRTY29wZT1udWxsLGg7Zj1mLiRwYXJlbnR9d2hpbGUoZik7aC5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gaH0sJGJyb2FkY2FzdDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLGQ9dGhpcyxmPXtuYW1lOmEsdGFyZ2V0U2NvcGU6dGhpcyxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe2YuZGVmYXVsdFByZXZlbnRlZD1cbiEwfSxkZWZhdWx0UHJldmVudGVkOiExfSxnPVtmXS5jb25jYXQoa2EuY2FsbChhcmd1bWVudHMsMSkpLGgsaztjPWQ7KXtmLmN1cnJlbnRTY29wZT1jO2Q9Yy4kJGxpc3RlbmVyc1thXXx8W107aD0wO2ZvcihrPWQubGVuZ3RoO2g8aztoKyspaWYoZFtoXSl0cnl7ZFtoXS5hcHBseShudWxsLGcpfWNhdGNoKG4pe2Uobil9ZWxzZSBkLnNwbGljZShoLDEpLGgtLSxrLS07aWYoIShkPWMuJCRsaXN0ZW5lckNvdW50W2FdJiZjLiQkY2hpbGRIZWFkfHxjIT09dGhpcyYmYy4kJG5leHRTaWJsaW5nKSlmb3IoO2MhPT10aGlzJiYhKGQ9Yy4kJG5leHRTaWJsaW5nKTspYz1jLiRwYXJlbnR9Zi5jdXJyZW50U2NvcGU9bnVsbDtyZXR1cm4gZn19O3ZhciBrPW5ldyBnO3JldHVybiBrfV19ZnVuY3Rpb24gdmQoKXt2YXIgYj0vXlxccyooaHR0cHM/fGZ0cHxtYWlsdG98dGVsfGZpbGUpOi8sYT0vXlxccyooaHR0cHM/fGZ0cHxmaWxlfGJsb2IpOnxkYXRhOmltYWdlXFwvLzt0aGlzLmFIcmVmU2FuaXRpemF0aW9uV2hpdGVsaXN0PVxuZnVuY3Rpb24oYSl7cmV0dXJuIHYoYSk/KGI9YSx0aGlzKTpifTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT8oYT1iLHRoaXMpOmF9O3RoaXMuJGdldD1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWQ/YTpiLGY7aWYoIVR8fDg8PVQpaWYoZj12YShjKS5ocmVmLFwiXCIhPT1mJiYhZi5tYXRjaChlKSlyZXR1cm5cInVuc2FmZTpcIitmO3JldHVybiBjfX19ZnVuY3Rpb24gWGUoYil7aWYoXCJzZWxmXCI9PT1iKXJldHVybiBiO2lmKEcoYikpe2lmKC0xPGIuaW5kZXhPZihcIioqKlwiKSl0aHJvdyB3YShcIml3Y2FyZFwiLGIpO2I9Yi5yZXBsYWNlKC8oWy0oKVxcW1xcXXt9Kz8qLiRcXF58LDojPCFcXFxcXSkvZyxcIlxcXFwkMVwiKS5yZXBsYWNlKC9cXHgwOC9nLFwiXFxcXHgwOFwiKS5yZXBsYWNlKFwiXFxcXCpcXFxcKlwiLFwiLipcIikucmVwbGFjZShcIlxcXFwqXCIsXCJbXjovLj8mO10qXCIpO3JldHVybiBSZWdFeHAoXCJeXCIrYitcIiRcIil9aWYoZGIoYikpcmV0dXJuIFJlZ0V4cChcIl5cIitcbmIuc291cmNlK1wiJFwiKTt0aHJvdyB3YShcImltYXRjaGVyXCIpO31mdW5jdGlvbiBQYyhiKXt2YXIgYT1bXTt2KGIpJiZxKGIsZnVuY3Rpb24oYil7YS5wdXNoKFhlKGIpKX0pO3JldHVybiBhfWZ1bmN0aW9uIHdlKCl7dGhpcy5TQ0VfQ09OVEVYVFM9ZmE7dmFyIGI9W1wic2VsZlwiXSxhPVtdO3RoaXMucmVzb3VyY2VVcmxXaGl0ZWxpc3Q9ZnVuY3Rpb24oYSl7YXJndW1lbnRzLmxlbmd0aCYmKGI9UGMoYSkpO3JldHVybiBifTt0aGlzLnJlc291cmNlVXJsQmxhY2tsaXN0PWZ1bmN0aW9uKGIpe2FyZ3VtZW50cy5sZW5ndGgmJihhPVBjKGIpKTtyZXR1cm4gYX07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9ZnVuY3Rpb24oYSl7dGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZT1mdW5jdGlvbigpe3JldHVybiBhfX07YSYmKGIucHJvdG90eXBlPW5ldyBhKTtiLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKX07XG5iLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCkudG9TdHJpbmcoKX07cmV0dXJuIGJ9dmFyIGU9ZnVuY3Rpb24oYSl7dGhyb3cgd2EoXCJ1bnNhZmVcIik7fTtjLmhhcyhcIiRzYW5pdGl6ZVwiKSYmKGU9Yy5nZXQoXCIkc2FuaXRpemVcIikpO3ZhciBmPWQoKSxoPXt9O2hbZmEuSFRNTF09ZChmKTtoW2ZhLkNTU109ZChmKTtoW2ZhLlVSTF09ZChmKTtoW2ZhLkpTXT1kKGYpO2hbZmEuUkVTT1VSQ0VfVVJMXT1kKGhbZmEuVVJMXSk7cmV0dXJue3RydXN0QXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1oLmhhc093blByb3BlcnR5KGEpP2hbYV06bnVsbDtpZighYyl0aHJvdyB3YShcImljb250ZXh0XCIsYSxiKTtpZihudWxsPT09Ynx8Yj09PXR8fFwiXCI9PT1iKXJldHVybiBiO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYil0aHJvdyB3YShcIml0eXBlXCIsYSk7cmV0dXJuIG5ldyBjKGIpfSxnZXRUcnVzdGVkOmZ1bmN0aW9uKGMsZCl7aWYobnVsbD09PVxuZHx8ZD09PXR8fFwiXCI9PT1kKXJldHVybiBkO3ZhciBmPWguaGFzT3duUHJvcGVydHkoYyk/aFtjXTpudWxsO2lmKGYmJmQgaW5zdGFuY2VvZiBmKXJldHVybiBkLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk7aWYoYz09PWZhLlJFU09VUkNFX1VSTCl7dmFyIGY9dmEoZC50b1N0cmluZygpKSxtLHAsaz0hMTttPTA7Zm9yKHA9Yi5sZW5ndGg7bTxwO20rKylpZihcInNlbGZcIj09PWJbbV0/T2IoZik6YlttXS5leGVjKGYuaHJlZikpe2s9ITA7YnJlYWt9aWYoaylmb3IobT0wLHA9YS5sZW5ndGg7bTxwO20rKylpZihcInNlbGZcIj09PWFbbV0/T2IoZik6YVttXS5leGVjKGYuaHJlZikpe2s9ITE7YnJlYWt9aWYoaylyZXR1cm4gZDt0aHJvdyB3YShcImluc2VjdXJsXCIsZC50b1N0cmluZygpKTt9aWYoYz09PWZhLkhUTUwpcmV0dXJuIGUoZCk7dGhyb3cgd2EoXCJ1bnNhZmVcIik7fSx2YWx1ZU9mOmZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgZj9hLiQkdW53cmFwVHJ1c3RlZFZhbHVlKCk6YX19fV19XG5mdW5jdGlvbiB2ZSgpe3ZhciBiPSEwO3RoaXMuZW5hYmxlZD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj0hIWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJHBhcnNlXCIsXCIkc25pZmZlclwiLFwiJHNjZURlbGVnYXRlXCIsZnVuY3Rpb24oYSxjLGQpe2lmKGImJmMubXNpZSYmOD5jLm1zaWVEb2N1bWVudE1vZGUpdGhyb3cgd2EoXCJpZXF1aXJrc1wiKTt2YXIgZT1qYShmYSk7ZS5pc0VuYWJsZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gYn07ZS50cnVzdEFzPWQudHJ1c3RBcztlLmdldFRydXN0ZWQ9ZC5nZXRUcnVzdGVkO2UudmFsdWVPZj1kLnZhbHVlT2Y7Ynx8KGUudHJ1c3RBcz1lLmdldFRydXN0ZWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYn0sZS52YWx1ZU9mPUJhKTtlLnBhcnNlQXM9ZnVuY3Rpb24oYixjKXt2YXIgZD1hKGMpO3JldHVybiBkLmxpdGVyYWwmJmQuY29uc3RhbnQ/ZDphKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGUuZ2V0VHJ1c3RlZChiLGEpfSl9O3ZhciBmPWUucGFyc2VBcyxcbmg9ZS5nZXRUcnVzdGVkLGc9ZS50cnVzdEFzO3EoZmEsZnVuY3Rpb24oYSxiKXt2YXIgYz1KKGIpO2VbU2EoXCJwYXJzZV9hc19cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGYoYSxiKX07ZVtTYShcImdldF90cnVzdGVkX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gaChhLGIpfTtlW1NhKFwidHJ1c3RfYXNfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBnKGEsYil9fSk7cmV0dXJuIGV9XX1mdW5jdGlvbiB4ZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihiLGEpe3ZhciBjPXt9LGQ9VSgoL2FuZHJvaWQgKFxcZCspLy5leGVjKEooKGIubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSl8fFtdKVsxXSksZT0vQm94ZWUvaS50ZXN0KChiLm5hdmlnYXRvcnx8e30pLnVzZXJBZ2VudCksZj1hWzBdfHx7fSxoPWYuZG9jdW1lbnRNb2RlLGcsbj0vXihNb3p8d2Via2l0fE98bXMpKD89W0EtWl0pLyxsPWYuYm9keSYmZi5ib2R5LnN0eWxlLG09ITEscD0hMTtpZihsKXtmb3IodmFyIGsgaW4gbClpZihtPVxubi5leGVjKGspKXtnPW1bMF07Zz1nLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrZy5zdWJzdHIoMSk7YnJlYWt9Z3x8KGc9XCJXZWJraXRPcGFjaXR5XCJpbiBsJiZcIndlYmtpdFwiKTttPSEhKFwidHJhbnNpdGlvblwiaW4gbHx8ZytcIlRyYW5zaXRpb25cImluIGwpO3A9ISEoXCJhbmltYXRpb25cImluIGx8fGcrXCJBbmltYXRpb25cImluIGwpOyFkfHxtJiZwfHwobT1HKGYuYm9keS5zdHlsZS53ZWJraXRUcmFuc2l0aW9uKSxwPUcoZi5ib2R5LnN0eWxlLndlYmtpdEFuaW1hdGlvbikpfXJldHVybntoaXN0b3J5OiEoIWIuaGlzdG9yeXx8IWIuaGlzdG9yeS5wdXNoU3RhdGV8fDQ+ZHx8ZSksaGFzaGNoYW5nZTpcIm9uaGFzaGNoYW5nZVwiaW4gYiYmKCFofHw3PGgpLGhhc0V2ZW50OmZ1bmN0aW9uKGEpe2lmKFwiaW5wdXRcIj09YSYmOT09VClyZXR1cm4hMTtpZihGKGNbYV0pKXt2YXIgYj1mLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Y1thXT1cIm9uXCIrYSBpbiBifXJldHVybiBjW2FdfSxjc3A6UWEoKSx2ZW5kb3JQcmVmaXg6ZyxcbnRyYW5zaXRpb25zOm0sYW5pbWF0aW9uczpwLGFuZHJvaWQ6ZCxtc2llOlQsbXNpZURvY3VtZW50TW9kZTpofX1dfWZ1bmN0aW9uIHplKCl7dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkcVwiLFwiJCRxXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSxjLGQsZSl7ZnVuY3Rpb24gZihmLG4sbCl7dmFyIG09dihsKSYmIWwscD0obT9kOmMpLmRlZmVyKCksaz1wLnByb21pc2U7bj1hLmRlZmVyKGZ1bmN0aW9uKCl7dHJ5e3AucmVzb2x2ZShmKCkpfWNhdGNoKGEpe3AucmVqZWN0KGEpLGUoYSl9ZmluYWxseXtkZWxldGUgaFtrLiQkdGltZW91dElkXX1tfHxiLiRhcHBseSgpfSxuKTtrLiQkdGltZW91dElkPW47aFtuXT1wO3JldHVybiBrfXZhciBoPXt9O2YuY2FuY2VsPWZ1bmN0aW9uKGIpe3JldHVybiBiJiZiLiQkdGltZW91dElkIGluIGg/KGhbYi4kJHRpbWVvdXRJZF0ucmVqZWN0KFwiY2FuY2VsZWRcIiksZGVsZXRlIGhbYi4kJHRpbWVvdXRJZF0sYS5kZWZlci5jYW5jZWwoYi4kJHRpbWVvdXRJZCkpOlxuITF9O3JldHVybiBmfV19ZnVuY3Rpb24gdmEoYixhKXt2YXIgYz1iO1QmJigkLnNldEF0dHJpYnV0ZShcImhyZWZcIixjKSxjPSQuaHJlZik7JC5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYyk7cmV0dXJue2hyZWY6JC5ocmVmLHByb3RvY29sOiQucHJvdG9jb2w/JC5wcm90b2NvbC5yZXBsYWNlKC86JC8sXCJcIik6XCJcIixob3N0OiQuaG9zdCxzZWFyY2g6JC5zZWFyY2g/JC5zZWFyY2gucmVwbGFjZSgvXlxcPy8sXCJcIik6XCJcIixoYXNoOiQuaGFzaD8kLmhhc2gucmVwbGFjZSgvXiMvLFwiXCIpOlwiXCIsaG9zdG5hbWU6JC5ob3N0bmFtZSxwb3J0OiQucG9ydCxwYXRobmFtZTpcIi9cIj09PSQucGF0aG5hbWUuY2hhckF0KDApPyQucGF0aG5hbWU6XCIvXCIrJC5wYXRobmFtZX19ZnVuY3Rpb24gT2IoYil7Yj1HKGIpP3ZhKGIpOmI7cmV0dXJuIGIucHJvdG9jb2w9PT1RYy5wcm90b2NvbCYmYi5ob3N0PT09UWMuaG9zdH1mdW5jdGlvbiBBZSgpe3RoaXMuJGdldD1iYShQKX1mdW5jdGlvbiBwYyhiKXtmdW5jdGlvbiBhKGQsXG5lKXtpZihRKGQpKXt2YXIgZj17fTtxKGQsZnVuY3Rpb24oYixjKXtmW2NdPWEoYyxiKX0pO3JldHVybiBmfXJldHVybiBiLmZhY3RvcnkoZCtjLGUpfXZhciBjPVwiRmlsdGVyXCI7dGhpcy5yZWdpc3Rlcj1hO3RoaXMuJGdldD1bXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGEuZ2V0KGIrYyl9fV07YShcImN1cnJlbmN5XCIsUmMpO2EoXCJkYXRlXCIsU2MpO2EoXCJmaWx0ZXJcIixZZSk7YShcImpzb25cIixaZSk7YShcImxpbWl0VG9cIiwkZSk7YShcImxvd2VyY2FzZVwiLGFmKTthKFwibnVtYmVyXCIsVGMpO2EoXCJvcmRlckJ5XCIsVWMpO2EoXCJ1cHBlcmNhc2VcIixiZil9ZnVuY3Rpb24gWWUoKXtyZXR1cm4gZnVuY3Rpb24oYixhLGMpe2lmKCFNKGIpKXJldHVybiBiO3ZhciBkPXR5cGVvZiBjLGU9W107ZS5jaGVjaz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MDtiPGUubGVuZ3RoO2IrKylpZighZVtiXShhKSlyZXR1cm4hMTtyZXR1cm4hMH07XCJmdW5jdGlvblwiIT09ZCYmXG4oYz1cImJvb2xlYW5cIj09PWQmJmM/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gT2EuZXF1YWxzKGEsYil9OmZ1bmN0aW9uKGEsYil7aWYoYSYmYiYmXCJvYmplY3RcIj09PXR5cGVvZiBhJiZcIm9iamVjdFwiPT09dHlwZW9mIGIpe2Zvcih2YXIgZCBpbiBhKWlmKFwiJFwiIT09ZC5jaGFyQXQoMCkmJkRiLmNhbGwoYSxkKSYmYyhhW2RdLGJbZF0pKXJldHVybiEwO3JldHVybiExfWI9KFwiXCIrYikudG9Mb3dlckNhc2UoKTtyZXR1cm4tMTwoXCJcIithKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoYil9KTt2YXIgZj1mdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiJiZcIiFcIj09PWIuY2hhckF0KDApKXJldHVybiFmKGEsYi5zdWJzdHIoMSkpO3N3aXRjaCh0eXBlb2YgYSl7Y2FzZSBcImJvb2xlYW5cIjpjYXNlIFwibnVtYmVyXCI6Y2FzZSBcInN0cmluZ1wiOnJldHVybiBjKGEsYik7Y2FzZSBcIm9iamVjdFwiOnN3aXRjaCh0eXBlb2YgYil7Y2FzZSBcIm9iamVjdFwiOnJldHVybiBjKGEsYik7ZGVmYXVsdDpmb3IodmFyIGQgaW4gYSlpZihcIiRcIiE9PVxuZC5jaGFyQXQoMCkmJmYoYVtkXSxiKSlyZXR1cm4hMH1yZXR1cm4hMTtjYXNlIFwiYXJyYXlcIjpmb3IoZD0wO2Q8YS5sZW5ndGg7ZCsrKWlmKGYoYVtkXSxiKSlyZXR1cm4hMDtyZXR1cm4hMTtkZWZhdWx0OnJldHVybiExfX07c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6YT17JDphfTtjYXNlIFwib2JqZWN0XCI6Zm9yKHZhciBoIGluIGEpKGZ1bmN0aW9uKGIpe1widW5kZWZpbmVkXCIhPT10eXBlb2YgYVtiXSYmZS5wdXNoKGZ1bmN0aW9uKGMpe3JldHVybiBmKFwiJFwiPT1iP2M6YyYmY1tiXSxhW2JdKX0pfSkoaCk7YnJlYWs7Y2FzZSBcImZ1bmN0aW9uXCI6ZS5wdXNoKGEpO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIGJ9ZD1bXTtmb3IoaD0wO2g8Yi5sZW5ndGg7aCsrKXt2YXIgZz1iW2hdO2UuY2hlY2soZykmJmQucHVzaChnKX1yZXR1cm4gZH19ZnVuY3Rpb24gUmMoYil7dmFyIGE9Yi5OVU1CRVJfRk9STUFUUztyZXR1cm4gZnVuY3Rpb24oYixcbmQpe0YoZCkmJihkPWEuQ1VSUkVOQ1lfU1lNKTtyZXR1cm4gVmMoYixhLlBBVFRFUk5TWzFdLGEuR1JPVVBfU0VQLGEuREVDSU1BTF9TRVAsMikucmVwbGFjZSgvXFx1MDBBNC9nLGQpfX1mdW5jdGlvbiBUYyhiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBWYyhiLGEuUEFUVEVSTlNbMF0sYS5HUk9VUF9TRVAsYS5ERUNJTUFMX1NFUCxkKX19ZnVuY3Rpb24gVmMoYixhLGMsZCxlKXtpZihudWxsPT1ifHwhaXNGaW5pdGUoYil8fFEoYikpcmV0dXJuXCJcIjt2YXIgZj0wPmI7Yj1NYXRoLmFicyhiKTt2YXIgaD1iK1wiXCIsZz1cIlwiLG49W10sbD0hMTtpZigtMSE9PWguaW5kZXhPZihcImVcIikpe3ZhciBtPWgubWF0Y2goLyhbXFxkXFwuXSspZSgtPykoXFxkKykvKTttJiZcIi1cIj09bVsyXSYmbVszXT5lKzE/KGg9XCIwXCIsYj0wKTooZz1oLGw9ITApfWlmKGwpMDxlJiYoLTE8YiYmMT5iKSYmKGc9Yi50b0ZpeGVkKGUpKTtlbHNle2g9KGguc3BsaXQoV2MpWzFdfHxcblwiXCIpLmxlbmd0aDtGKGUpJiYoZT1NYXRoLm1pbihNYXRoLm1heChhLm1pbkZyYWMsaCksYS5tYXhGcmFjKSk7Yj0rKE1hdGgucm91bmQoKyhiLnRvU3RyaW5nKCkrXCJlXCIrZSkpLnRvU3RyaW5nKCkrXCJlXCIrLWUpO2I9KFwiXCIrYikuc3BsaXQoV2MpO2g9YlswXTtiPWJbMV18fFwiXCI7dmFyIG09MCxwPWEubGdTaXplLGs9YS5nU2l6ZTtpZihoLmxlbmd0aD49cCtrKWZvcihtPWgubGVuZ3RoLXAsbD0wO2w8bTtsKyspMD09PShtLWwpJWsmJjAhPT1sJiYoZys9YyksZys9aC5jaGFyQXQobCk7Zm9yKGw9bTtsPGgubGVuZ3RoO2wrKykwPT09KGgubGVuZ3RoLWwpJXAmJjAhPT1sJiYoZys9YyksZys9aC5jaGFyQXQobCk7Zm9yKDtiLmxlbmd0aDxlOyliKz1cIjBcIjtlJiZcIjBcIiE9PWUmJihnKz1kK2Iuc3Vic3RyKDAsZSkpfW4ucHVzaChmP2EubmVnUHJlOmEucG9zUHJlKTtuLnB1c2goZyk7bi5wdXNoKGY/YS5uZWdTdWY6YS5wb3NTdWYpO3JldHVybiBuLmpvaW4oXCJcIil9ZnVuY3Rpb24gdmIoYixcbmEsYyl7dmFyIGQ9XCJcIjswPmImJihkPVwiLVwiLGI9LWIpO2ZvcihiPVwiXCIrYjtiLmxlbmd0aDxhOyliPVwiMFwiK2I7YyYmKGI9Yi5zdWJzdHIoYi5sZW5ndGgtYSkpO3JldHVybiBkK2J9ZnVuY3Rpb24gYWEoYixhLGMsZCl7Yz1jfHwwO3JldHVybiBmdW5jdGlvbihlKXtlPWVbXCJnZXRcIitiXSgpO2lmKDA8Y3x8ZT4tYyllKz1jOzA9PT1lJiYtMTI9PWMmJihlPTEyKTtyZXR1cm4gdmIoZSxhLGQpfX1mdW5jdGlvbiB3YihiLGEpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWNbXCJnZXRcIitiXSgpLGY9aWIoYT9cIlNIT1JUXCIrYjpiKTtyZXR1cm4gZFtmXVtlXX19ZnVuY3Rpb24gWGMoYil7dmFyIGE9KG5ldyBEYXRlKGIsMCwxKSkuZ2V0RGF5KCk7cmV0dXJuIG5ldyBEYXRlKGIsMCwoND49YT81OjEyKS1hKX1mdW5jdGlvbiBZYyhiKXtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9WGMoYS5nZXRGdWxsWWVhcigpKTthPStuZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpLGEuZ2V0RGF0ZSgpK1xuKDQtYS5nZXREYXkoKSkpLStjO2E9MStNYXRoLnJvdW5kKGEvNjA0OEU1KTtyZXR1cm4gdmIoYSxiKX19ZnVuY3Rpb24gU2MoYil7ZnVuY3Rpb24gYShhKXt2YXIgYjtpZihiPWEubWF0Y2goYykpe2E9bmV3IERhdGUoMCk7dmFyIGY9MCxoPTAsZz1iWzhdP2Euc2V0VVRDRnVsbFllYXI6YS5zZXRGdWxsWWVhcixuPWJbOF0/YS5zZXRVVENIb3VyczphLnNldEhvdXJzO2JbOV0mJihmPVUoYls5XStiWzEwXSksaD1VKGJbOV0rYlsxMV0pKTtnLmNhbGwoYSxVKGJbMV0pLFUoYlsyXSktMSxVKGJbM10pKTtmPVUoYls0XXx8MCktZjtoPVUoYls1XXx8MCktaDtnPVUoYls2XXx8MCk7Yj1NYXRoLnJvdW5kKDFFMypwYXJzZUZsb2F0KFwiMC5cIisoYls3XXx8MCkpKTtuLmNhbGwoYSxmLGgsZyxiKX1yZXR1cm4gYX12YXIgYz0vXihcXGR7NH0pLT8oXFxkXFxkKS0/KFxcZFxcZCkoPzpUKFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86Oj8oXFxkXFxkKSg/OlxcLihcXGQrKSk/KT8pPyhafChbKy1dKShcXGRcXGQpOj8oXFxkXFxkKSk/KT8kLztcbnJldHVybiBmdW5jdGlvbihjLGUpe3ZhciBmPVwiXCIsaD1bXSxnLG47ZT1lfHxcIm1lZGl1bURhdGVcIjtlPWIuREFURVRJTUVfRk9STUFUU1tlXXx8ZTtHKGMpJiYoYz1jZi50ZXN0KGMpP1UoYyk6YShjKSk7Q2EoYykmJihjPW5ldyBEYXRlKGMpKTtpZighZGEoYykpcmV0dXJuIGM7Zm9yKDtlOykobj1kZi5leGVjKGUpKT8oaD1oLmNvbmNhdChrYS5jYWxsKG4sMSkpLGU9aC5wb3AoKSk6KGgucHVzaChlKSxlPW51bGwpO3EoaCxmdW5jdGlvbihhKXtnPWVmW2FdO2YrPWc/ZyhjLGIuREFURVRJTUVfRk9STUFUUyk6YS5yZXBsYWNlKC8oXid8JyQpL2csXCJcIikucmVwbGFjZSgvJycvZyxcIidcIil9KTtyZXR1cm4gZn19ZnVuY3Rpb24gWmUoKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIHNhKGIsITApfX1mdW5jdGlvbiAkZSgpe3JldHVybiBmdW5jdGlvbihiLGEpe2lmKCFNKGIpJiYhRyhiKSlyZXR1cm4gYjthPUluZmluaXR5PT09TWF0aC5hYnMoTnVtYmVyKGEpKT9OdW1iZXIoYSk6VShhKTtcbmlmKEcoYikpcmV0dXJuIGE/MDw9YT9iLnNsaWNlKDAsYSk6Yi5zbGljZShhLGIubGVuZ3RoKTpcIlwiO3ZhciBjPVtdLGQsZTthPmIubGVuZ3RoP2E9Yi5sZW5ndGg6YTwtYi5sZW5ndGgmJihhPS1iLmxlbmd0aCk7MDxhPyhkPTAsZT1hKTooZD1iLmxlbmd0aCthLGU9Yi5sZW5ndGgpO2Zvcig7ZDxlO2QrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9fWZ1bmN0aW9uIFVjKGIpe3JldHVybiBmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhLGIpe3JldHVybiBiP2Z1bmN0aW9uKGIsYyl7cmV0dXJuIGEoYyxiKX06YX1mdW5jdGlvbiBmKGEsYil7dmFyIGM9dHlwZW9mIGEsZD10eXBlb2YgYjtyZXR1cm4gYz09ZD8oZGEoYSkmJmRhKGIpJiYoYT1hLnZhbHVlT2YoKSxiPWIudmFsdWVPZigpKSxcInN0cmluZ1wiPT1jJiYoYT1hLnRvTG93ZXJDYXNlKCksYj1iLnRvTG93ZXJDYXNlKCkpLGE9PT1iPzA6YTxiPy0xOjEpOmM8ZD8tMToxfWlmKCFNKGEpfHwhYylyZXR1cm4gYTtjPU0oYyk/YzpbY107XG5jPWxkKGMsZnVuY3Rpb24oYSl7dmFyIGM9ITEsZD1hfHxCYTtpZihHKGEpKXtpZihcIitcIj09YS5jaGFyQXQoMCl8fFwiLVwiPT1hLmNoYXJBdCgwKSljPVwiLVwiPT1hLmNoYXJBdCgwKSxhPWEuc3Vic3RyaW5nKDEpO2Q9YihhKTtpZihkLmNvbnN0YW50KXt2YXIgZz1kKCk7cmV0dXJuIGUoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihhW2ddLGJbZ10pfSxjKX19cmV0dXJuIGUoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZihkKGEpLGQoYikpfSxjKX0pO2Zvcih2YXIgaD1bXSxnPTA7ZzxhLmxlbmd0aDtnKyspaC5wdXNoKGFbZ10pO3JldHVybiBoLnNvcnQoZShmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdKGEsYik7aWYoMCE9PWUpcmV0dXJuIGV9cmV0dXJuIDB9LGQpKX19ZnVuY3Rpb24geGEoYil7QShiKSYmKGI9e2xpbms6Yn0pO2IucmVzdHJpY3Q9Yi5yZXN0cmljdHx8XCJBQ1wiO3JldHVybiBiYShiKX1mdW5jdGlvbiBaYyhiLGEsYyxkKXtmdW5jdGlvbiBlKGEsXG5jKXtjPWM/XCItXCIrZ2IoYyxcIi1cIik6XCJcIjtkLnJlbW92ZUNsYXNzKGIsKGE/eGI6eWIpK2MpO2QuYWRkQ2xhc3MoYiwoYT95Yjp4YikrYyl9dmFyIGY9dGhpcyxoPWIucGFyZW50KCkuY29udHJvbGxlcihcImZvcm1cIil8fHpiLGc9MCxuPWYuJGVycm9yPXt9LGw9W107Zi4kbmFtZT1hLm5hbWV8fGEubmdGb3JtO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO2YuJHZhbGlkPSEwO2YuJGludmFsaWQ9ITE7aC4kYWRkQ29udHJvbChmKTtiLmFkZENsYXNzKEthKTtlKCEwKTtmLiRyb2xsYmFja1ZpZXdWYWx1ZT1mdW5jdGlvbigpe3EobCxmdW5jdGlvbihhKXthLiRyb2xsYmFja1ZpZXdWYWx1ZSgpfSl9O2YuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbigpe3EobCxmdW5jdGlvbihhKXthLiRjb21taXRWaWV3VmFsdWUoKX0pfTtmLiRhZGRDb250cm9sPWZ1bmN0aW9uKGEpe0FhKGEuJG5hbWUsXCJpbnB1dFwiKTtsLnB1c2goYSk7YS4kbmFtZSYmKGZbYS4kbmFtZV09YSl9O2YuJHJlbW92ZUNvbnRyb2w9XG5mdW5jdGlvbihhKXthLiRuYW1lJiZmW2EuJG5hbWVdPT09YSYmZGVsZXRlIGZbYS4kbmFtZV07cShuLGZ1bmN0aW9uKGIsYyl7Zi4kc2V0VmFsaWRpdHkoYywhMCxhKX0pO0RhKGwsYSl9O2YuJHNldFZhbGlkaXR5PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1uW2FdO2lmKGIpZCYmKERhKGQsYyksZC5sZW5ndGh8fChnLS0sZ3x8KGUoYiksZi4kdmFsaWQ9ITAsZi4kaW52YWxpZD0hMSksblthXT0hMSxlKCEwLGEpLGguJHNldFZhbGlkaXR5KGEsITAsZikpKTtlbHNle2d8fGUoYik7aWYoZCl7aWYoLTEhPU1hKGQsYykpcmV0dXJufWVsc2UgblthXT1kPVtdLGcrKyxlKCExLGEpLGguJHNldFZhbGlkaXR5KGEsITEsZik7ZC5wdXNoKGMpO2YuJHZhbGlkPSExO2YuJGludmFsaWQ9ITB9fTtmLiRzZXREaXJ0eT1mdW5jdGlvbigpe2QucmVtb3ZlQ2xhc3MoYixLYSk7ZC5hZGRDbGFzcyhiLEFiKTtmLiRkaXJ0eT0hMDtmLiRwcmlzdGluZT0hMTtoLiRzZXREaXJ0eSgpfTtmLiRzZXRQcmlzdGluZT1cbmZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhiLEFiKTtkLmFkZENsYXNzKGIsS2EpO2YuJGRpcnR5PSExO2YuJHByaXN0aW5lPSEwO3EobCxmdW5jdGlvbihhKXthLiRzZXRQcmlzdGluZSgpfSl9fWZ1bmN0aW9uIFhiKGIsYSxjLGQpe2IuJHNldFZhbGlkaXR5KGEsYyk7cmV0dXJuIGM/ZDp0fWZ1bmN0aW9uICRjKGIsYSl7dmFyIGMsZDtpZihhKWZvcihjPTA7YzxhLmxlbmd0aDsrK2MpaWYoZD1hW2NdLGJbZF0pcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gZmYoYixhLGMsZCxlKXtRKGUpJiYoYi4kJGhhc05hdGl2ZVZhbGlkYXRvcnM9ITAsYi4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGYpe2lmKGIuJGVycm9yW2FdfHwkYyhlLGQpfHwhJGMoZSxjKSlyZXR1cm4gZjtiLiRzZXRWYWxpZGl0eShhLCExKX0pKX1mdW5jdGlvbiBaYShiLGEsYyxkLGUsZil7dmFyIGg9YS5wcm9wKGdmKSxnPWFbMF0ucGxhY2Vob2xkZXIsbj17fTtkLiQkdmFsaWRpdHlTdGF0ZT1oO2lmKCFlLmFuZHJvaWQpe3ZhciBsPVxuITE7YS5vbihcImNvbXBvc2l0aW9uc3RhcnRcIixmdW5jdGlvbihhKXtsPSEwfSk7YS5vbihcImNvbXBvc2l0aW9uZW5kXCIsZnVuY3Rpb24oKXtsPSExO20oKX0pfXZhciBtPWZ1bmN0aW9uKGUpe2lmKCFsKXt2YXIgZj1hLnZhbCgpLGs9ZSYmZS50eXBlO2lmKFQmJlwiaW5wdXRcIj09PShlfHxuKS50eXBlJiZhWzBdLnBsYWNlaG9sZGVyIT09ZylnPWFbMF0ucGxhY2Vob2xkZXI7ZWxzZXtjLm5nVHJpbSYmXCJmYWxzZVwiPT09Yy5uZ1RyaW18fChmPVooZikpO3ZhciBtPWgmJmQuJCRoYXNOYXRpdmVWYWxpZGF0b3JzO2lmKGQuJHZpZXdWYWx1ZSE9PWZ8fFwiXCI9PT1mJiZtKWIuJCRwaGFzZT9kLiRzZXRWaWV3VmFsdWUoZixrLG0pOmIuJGFwcGx5KGZ1bmN0aW9uKCl7ZC4kc2V0Vmlld1ZhbHVlKGYsayxtKX0pfX19O2lmKGUuaGFzRXZlbnQoXCJpbnB1dFwiKSlhLm9uKFwiaW5wdXRcIixtKTtlbHNle3ZhciBwLGs9ZnVuY3Rpb24oYSl7cHx8KHA9Zi5kZWZlcihmdW5jdGlvbigpe20oYSk7cD1udWxsfSkpfTtcbmEub24oXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5rZXlDb2RlOzkxPT09Ynx8KDE1PGImJjE5PmJ8fDM3PD1iJiY0MD49Yil8fGsoYSl9KTtpZihlLmhhc0V2ZW50KFwicGFzdGVcIikpYS5vbihcInBhc3RlIGN1dFwiLGspfWEub24oXCJjaGFuZ2VcIixtKTtkLiRyZW5kZXI9ZnVuY3Rpb24oKXthLnZhbChkLiRpc0VtcHR5KGQuJHZpZXdWYWx1ZSk/XCJcIjpkLiR2aWV3VmFsdWUpfX1mdW5jdGlvbiBCYihiLGEpe3JldHVybiBmdW5jdGlvbihjKXt2YXIgZDtyZXR1cm4gZGEoYyk/YzpHKGMpJiYoYi5sYXN0SW5kZXg9MCxjPWIuZXhlYyhjKSk/KGMuc2hpZnQoKSxkPXt5eXl5OjAsTU06MSxkZDoxLEhIOjAsbW06MH0scShjLGZ1bmN0aW9uKGIsYyl7YzxhLmxlbmd0aCYmKGRbYVtjXV09K2IpfSksbmV3IERhdGUoZC55eXl5LGQuTU0tMSxkLmRkLGQuSEgsZC5tbSkpOk5hTn19ZnVuY3Rpb24gJGEoYixhLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsZixoLGcsbixsLG0pe1phKGUsZixoLGcsXG5uLGwpO2cuJHBhcnNlcnMucHVzaChmdW5jdGlvbihkKXtpZihnLiRpc0VtcHR5KGQpKXJldHVybiBnLiRzZXRWYWxpZGl0eShiLCEwKSxudWxsO2lmKGEudGVzdChkKSlyZXR1cm4gZy4kc2V0VmFsaWRpdHkoYiwhMCksYyhkKTtnLiRzZXRWYWxpZGl0eShiLCExKTtyZXR1cm4gdH0pO2cuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gZGEoYSk/bShcImRhdGVcIikoYSxkKTpcIlwifSk7aC5taW4mJihlPWZ1bmN0aW9uKGEpe3ZhciBiPWcuJGlzRW1wdHkoYSl8fGMoYSk+PWMoaC5taW4pO2cuJHNldFZhbGlkaXR5KFwibWluXCIsYik7cmV0dXJuIGI/YTp0fSxnLiRwYXJzZXJzLnB1c2goZSksZy4kZm9ybWF0dGVycy5wdXNoKGUpKTtoLm1heCYmKGU9ZnVuY3Rpb24oYSl7dmFyIGI9Zy4kaXNFbXB0eShhKXx8YyhhKTw9YyhoLm1heCk7Zy4kc2V0VmFsaWRpdHkoXCJtYXhcIixiKTtyZXR1cm4gYj9hOnR9LGcuJHBhcnNlcnMucHVzaChlKSxnLiRmb3JtYXR0ZXJzLnB1c2goZSkpfX1cbmZ1bmN0aW9uIGFkKGIsYSxjLGQsZSl7aWYodihkKSl7Yj1iKGQpO2lmKCFiLmNvbnN0YW50KXRocm93KG5ldyBPKFwibmdNb2RlbFwiKSkoXCJjb25zdGV4cHJcIixcIkV4cGVjdGVkIGNvbnN0YW50IGV4cHJlc3Npb24gZm9yIGB7MH1gLCBidXQgc2F3IGB7MX1gLlwiLGMsZCk7cmV0dXJuIGIoYSl9cmV0dXJuIGV9ZnVuY3Rpb24gWWIoYixhKXtiPVwibmdDbGFzc1wiK2I7cmV0dXJuW1wiJGFuaW1hdGVcIixmdW5jdGlvbihjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9W10sZD0wO2E6Zm9yKDtkPGEubGVuZ3RoO2QrKyl7Zm9yKHZhciBlPWFbZF0sbT0wO208Yi5sZW5ndGg7bSsrKWlmKGU9PWJbbV0pY29udGludWUgYTtjLnB1c2goZSl9cmV0dXJuIGN9ZnVuY3Rpb24gZShhKXtpZighTShhKSl7aWYoRyhhKSlyZXR1cm4gYS5zcGxpdChcIiBcIik7aWYoUShhKSl7dmFyIGI9W107cShhLGZ1bmN0aW9uKGEsYyl7YSYmKGI9Yi5jb25jYXQoYy5zcGxpdChcIiBcIikpKX0pO3JldHVybiBifX1yZXR1cm4gYX1yZXR1cm57cmVzdHJpY3Q6XCJBQ1wiLFxubGluazpmdW5jdGlvbihmLGgsZyl7ZnVuY3Rpb24gbihhLGIpe3ZhciBjPWguZGF0YShcIiRjbGFzc0NvdW50c1wiKXx8e30sZD1bXTtxKGEsZnVuY3Rpb24oYSl7aWYoMDxifHxjW2FdKWNbYV09KGNbYV18fDApK2IsY1thXT09PSsoMDxiKSYmZC5wdXNoKGEpfSk7aC5kYXRhKFwiJGNsYXNzQ291bnRzXCIsYyk7cmV0dXJuIGQuam9pbihcIiBcIil9ZnVuY3Rpb24gbChiKXtpZighMD09PWF8fGYuJGluZGV4JTI9PT1hKXt2YXIgaz1lKGJ8fFtdKTtpZighbSl7dmFyIGw9bihrLDEpO2cuJGFkZENsYXNzKGwpfWVsc2UgaWYoIXJhKGIsbSkpe3ZhciBxPWUobSksbD1kKGsscSksaz1kKHEsayksaz1uKGssLTEpLGw9bihsLDEpOzA9PT1sLmxlbmd0aD9jLnJlbW92ZUNsYXNzKGgsayk6MD09PWsubGVuZ3RoP2MuYWRkQ2xhc3MoaCxsKTpjLnNldENsYXNzKGgsbCxrKX19bT1qYShiKX12YXIgbTtmLiR3YXRjaChnW2JdLGwsITApO2cuJG9ic2VydmUoXCJjbGFzc1wiLGZ1bmN0aW9uKGEpe2woZi4kZXZhbChnW2JdKSl9KTtcblwibmdDbGFzc1wiIT09YiYmZi4kd2F0Y2goXCIkaW5kZXhcIixmdW5jdGlvbihjLGQpe3ZhciBoPWMmMTtpZihoIT09KGQmMSkpe3ZhciBsPWUoZi4kZXZhbChnW2JdKSk7aD09PWE/KGg9bihsLDEpLGcuJGFkZENsYXNzKGgpKTooaD1uKGwsLTEpLGcuJHJlbW92ZUNsYXNzKGgpKX19KX19fV19dmFyIGhmPS9eXFwvKC4rKVxcLyhbYS16XSopJC8sZ2Y9XCJ2YWxpZGl0eVwiLEo9ZnVuY3Rpb24oYil7cmV0dXJuIEcoYik/Yi50b0xvd2VyQ2FzZSgpOmJ9LERiPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksaWI9ZnVuY3Rpb24oYil7cmV0dXJuIEcoYik/Yi50b1VwcGVyQ2FzZSgpOmJ9LFQseix0YSxrYT1bXS5zbGljZSxzYz1bXS5wdXNoLHlhPU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsTmE9TyhcIm5nXCIpLE9hPVAuYW5ndWxhcnx8KFAuYW5ndWxhcj17fSksUmEsbWEsY2I9MDtUPVUoKC9tc2llIChcXGQrKS8uZXhlYyhKKG5hdmlnYXRvci51c2VyQWdlbnQpKXx8W10pWzFdKTtpc05hTihUKSYmXG4oVD1VKCgvdHJpZGVudFxcLy4qOyBydjooXFxkKykvLmV4ZWMoSihuYXZpZ2F0b3IudXNlckFnZW50KSl8fFtdKVsxXSkpO0IuJGluamVjdD1bXTtCYS4kaW5qZWN0PVtdO3ZhciBNPWZ1bmN0aW9uKCl7cmV0dXJuIEEoQXJyYXkuaXNBcnJheSk/QXJyYXkuaXNBcnJheTpmdW5jdGlvbihiKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT15YS5jYWxsKGIpfX0oKSxaPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZy5wcm90b3R5cGUudHJpbT9mdW5jdGlvbihiKXtyZXR1cm4gRyhiKT9iLnRyaW0oKTpifTpmdW5jdGlvbihiKXtyZXR1cm4gRyhiKT9iLnJlcGxhY2UoL15cXHNcXHMqLyxcIlwiKS5yZXBsYWNlKC9cXHNcXHMqJC8sXCJcIik6Yn19KCk7bWE9OT5UP2Z1bmN0aW9uKGIpe2I9Yi5ub2RlTmFtZT9iOmJbMF07cmV0dXJuIEooYi5zY29wZU5hbWUmJlwiSFRNTFwiIT1iLnNjb3BlTmFtZT9iLnNjb3BlTmFtZStcIjpcIitiLm5vZGVOYW1lOmIubm9kZU5hbWUpfTpmdW5jdGlvbihiKXtyZXR1cm4gSihiLm5vZGVOYW1lP1xuYi5ub2RlTmFtZTpiWzBdLm5vZGVOYW1lKX07dmFyIFFhPWZ1bmN0aW9uKCl7aWYodihRYS5pc0FjdGl2ZV8pKXJldHVybiBRYS5pc0FjdGl2ZV87dmFyIGI9ISghVy5xdWVyeVNlbGVjdG9yKFwiW25nLWNzcF1cIikmJiFXLnF1ZXJ5U2VsZWN0b3IoXCJbZGF0YS1uZy1jc3BdXCIpKTtpZighYil0cnl7bmV3IEZ1bmN0aW9uKFwiXCIpfWNhdGNoKGEpe2I9ITB9cmV0dXJuIFFhLmlzQWN0aXZlXz1ifSxmYj1bXCJuZy1cIixcImRhdGEtbmctXCIsXCJuZzpcIixcIngtbmctXCJdLHBkPS9bQS1aXS9nLHRkPXtmdWxsOlwiMS4zLjAtYmV0YS4xNlwiLG1ham9yOjEsbWlub3I6Myxkb3Q6MCxjb2RlTmFtZTpcInBpenphLXRyYW5zdWJzdGFudGlhdGlvblwifTtWLmV4cGFuZG89XCJuZzMzOVwiO3ZhciBVYT1WLmNhY2hlPXt9LEplPTEsc2I9UC5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGIsYSxjKXtiLmFkZEV2ZW50TGlzdGVuZXIoYSxjLCExKX06ZnVuY3Rpb24oYixhLGMpe2IuYXR0YWNoRXZlbnQoXCJvblwiK1xuYSxjKX0sVGE9UC5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyP2Z1bmN0aW9uKGIsYSxjKXtiLnJlbW92ZUV2ZW50TGlzdGVuZXIoYSxjLCExKX06ZnVuY3Rpb24oYixhLGMpe2IuZGV0YWNoRXZlbnQoXCJvblwiK2EsYyl9O1YuX2RhdGE9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuY2FjaGVbYlt0aGlzLmV4cGFuZG9dXXx8e319O3ZhciBEZT0vKFtcXDpcXC1cXF9dKyguKSkvZyxFZT0vXm1veihbQS1aXSkvLEliPU8oXCJqcUxpdGVcIiksSWU9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLEhiPS88fCYjP1xcdys7LyxHZT0vPChbXFx3Ol0rKS8sSGU9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLGVhPXtvcHRpb246WzEsJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSxcbnRyOlsyLFwiPHRhYmxlPjx0Ym9keT5cIixcIjwvdGJvZHk+PC90YWJsZT5cIl0sdGQ6WzMsXCI8dGFibGU+PHRib2R5Pjx0cj5cIixcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiXSxfZGVmYXVsdDpbMCxcIlwiLFwiXCJdfTtlYS5vcHRncm91cD1lYS5vcHRpb247ZWEudGJvZHk9ZWEudGZvb3Q9ZWEuY29sZ3JvdXA9ZWEuY2FwdGlvbj1lYS50aGVhZDtlYS50aD1lYS50ZDt2YXIgRmE9Vi5wcm90b3R5cGU9e3JlYWR5OmZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGEoKXtjfHwoYz0hMCxiKCkpfXZhciBjPSExO1wiY29tcGxldGVcIj09PVcucmVhZHlTdGF0ZT9zZXRUaW1lb3V0KGEpOih0aGlzLm9uKFwiRE9NQ29udGVudExvYWRlZFwiLGEpLFYoUCkub24oXCJsb2FkXCIsYSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3ZhciBiPVtdO3EodGhpcyxmdW5jdGlvbihhKXtiLnB1c2goXCJcIithKX0pO3JldHVyblwiW1wiK2Iuam9pbihcIiwgXCIpK1wiXVwifSxlcTpmdW5jdGlvbihiKXtyZXR1cm4gMDw9Yj96KHRoaXNbYl0pOnoodGhpc1t0aGlzLmxlbmd0aCtcbmJdKX0sbGVuZ3RoOjAscHVzaDpzYyxzb3J0OltdLnNvcnQsc3BsaWNlOltdLnNwbGljZX0scGI9e307cShcIm11bHRpcGxlIHNlbGVjdGVkIGNoZWNrZWQgZGlzYWJsZWQgcmVhZE9ubHkgcmVxdWlyZWQgb3BlblwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihiKXtwYltKKGIpXT1ifSk7dmFyIHdjPXt9O3EoXCJpbnB1dCBzZWxlY3Qgb3B0aW9uIHRleHRhcmVhIGJ1dHRvbiBmb3JtIGRldGFpbHNcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYil7d2NbYl09ITB9KTt2YXIgeGM9e25nTWlubGVuZ3RoOlwibWlubGVuZ3RoXCIsbmdNYXhsZW5ndGg6XCJtYXhsZW5ndGhcIixuZ1BhdHRlcm46XCJwYXR0ZXJuXCJ9O3Eoe2RhdGE6S2IscmVtb3ZlRGF0YTpsYn0sZnVuY3Rpb24oYixhKXtWW2FdPWJ9KTtxKHtkYXRhOktiLGluaGVyaXRlZERhdGE6b2Isc2NvcGU6ZnVuY3Rpb24oYil7cmV0dXJuIHouZGF0YShiLFwiJHNjb3BlXCIpfHxvYihiLnBhcmVudE5vZGV8fGIsW1wiJGlzb2xhdGVTY29wZVwiLFwiJHNjb3BlXCJdKX0sXG5pc29sYXRlU2NvcGU6ZnVuY3Rpb24oYil7cmV0dXJuIHouZGF0YShiLFwiJGlzb2xhdGVTY29wZVwiKXx8ei5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiKX0sY29udHJvbGxlcjp0YyxpbmplY3RvcjpmdW5jdGlvbihiKXtyZXR1cm4gb2IoYixcIiRpbmplY3RvclwiKX0scmVtb3ZlQXR0cjpmdW5jdGlvbihiLGEpe2IucmVtb3ZlQXR0cmlidXRlKGEpfSxoYXNDbGFzczpMYixjc3M6ZnVuY3Rpb24oYixhLGMpe2E9U2EoYSk7aWYodihjKSliLnN0eWxlW2FdPWM7ZWxzZXt2YXIgZDs4Pj1UJiYoZD1iLmN1cnJlbnRTdHlsZSYmYi5jdXJyZW50U3R5bGVbYV0sXCJcIj09PWQmJihkPVwiYXV0b1wiKSk7ZD1kfHxiLnN0eWxlW2FdOzg+PVQmJihkPVwiXCI9PT1kP3Q6ZCk7cmV0dXJuIGR9fSxhdHRyOmZ1bmN0aW9uKGIsYSxjKXt2YXIgZD1KKGEpO2lmKHBiW2RdKWlmKHYoYykpYz8oYlthXT0hMCxiLnNldEF0dHJpYnV0ZShhLGQpKTooYlthXT0hMSxiLnJlbW92ZUF0dHJpYnV0ZShkKSk7ZWxzZSByZXR1cm4gYlthXXx8XG4oYi5hdHRyaWJ1dGVzLmdldE5hbWVkSXRlbShhKXx8Qikuc3BlY2lmaWVkP2Q6dDtlbHNlIGlmKHYoYykpYi5zZXRBdHRyaWJ1dGUoYSxjKTtlbHNlIGlmKGIuZ2V0QXR0cmlidXRlKXJldHVybiBiPWIuZ2V0QXR0cmlidXRlKGEsMiksbnVsbD09PWI/dDpifSxwcm9wOmZ1bmN0aW9uKGIsYSxjKXtpZih2KGMpKWJbYV09YztlbHNlIHJldHVybiBiW2FdfSx0ZXh0OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihhLGIpe2lmKEYoYikpe3ZhciBkPWEubm9kZVR5cGU7cmV0dXJuIDE9PT1kfHwzPT09ZD9hLnRleHRDb250ZW50OlwiXCJ9YS50ZXh0Q29udGVudD1ifWIuJGR2PVwiXCI7cmV0dXJuIGJ9KCksdmFsOmZ1bmN0aW9uKGIsYSl7aWYoRihhKSl7aWYoYi5tdWx0aXBsZSYmXCJzZWxlY3RcIj09PW1hKGIpKXt2YXIgYz1bXTtxKGIub3B0aW9ucyxmdW5jdGlvbihhKXthLnNlbGVjdGVkJiZjLnB1c2goYS52YWx1ZXx8YS50ZXh0KX0pO3JldHVybiAwPT09Yy5sZW5ndGg/bnVsbDpjfXJldHVybiBiLnZhbHVlfWIudmFsdWU9XG5hfSxodG1sOmZ1bmN0aW9uKGIsYSl7aWYoRihhKSlyZXR1cm4gYi5pbm5lckhUTUw7a2IoYiwhMCk7Yi5pbm5lckhUTUw9YX0sZW1wdHk6dWN9LGZ1bmN0aW9uKGIsYSl7Vi5wcm90b3R5cGVbYV09ZnVuY3Rpb24oYSxkKXt2YXIgZSxmLGg9dGhpcy5sZW5ndGg7aWYoYiE9PXVjJiYoMj09Yi5sZW5ndGgmJmIhPT1MYiYmYiE9PXRjP2E6ZCk9PT10KXtpZihRKGEpKXtmb3IoZT0wO2U8aDtlKyspaWYoYj09PUtiKWIodGhpc1tlXSxhKTtlbHNlIGZvcihmIGluIGEpYih0aGlzW2VdLGYsYVtmXSk7cmV0dXJuIHRoaXN9ZT1iLiRkdjtoPWU9PT10P01hdGgubWluKGgsMSk6aDtmb3IoZj0wO2Y8aDtmKyspe3ZhciBnPWIodGhpc1tmXSxhLGQpO2U9ZT9lK2c6Z31yZXR1cm4gZX1mb3IoZT0wO2U8aDtlKyspYih0aGlzW2VdLGEsZCk7cmV0dXJuIHRoaXN9fSk7cSh7cmVtb3ZlRGF0YTpsYixvbjpmdW5jdGlvbiBhKGMsZCxlLGYpe2lmKHYoZikpdGhyb3cgSWIoXCJvbmFyZ3NcIik7aWYoIWMubm9kZVR5cGV8fFxuMT09PWMubm9kZVR5cGV8fDk9PT1jLm5vZGVUeXBlKXt2YXIgaD1sYShjLFwiZXZlbnRzXCIpLGc9bGEoYyxcImhhbmRsZVwiKTtofHxsYShjLFwiZXZlbnRzXCIsaD17fSk7Z3x8bGEoYyxcImhhbmRsZVwiLGc9TGUoYyxoKSk7cShkLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihkKXt2YXIgZj1oW2RdO2lmKCFmKXtpZihcIm1vdXNlZW50ZXJcIj09ZHx8XCJtb3VzZWxlYXZlXCI9PWQpe3ZhciBtPVcuYm9keS5jb250YWluc3x8Vy5ib2R5LmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uP2Z1bmN0aW9uKGEsYyl7dmFyIGQ9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxlPWMmJmMucGFyZW50Tm9kZTtyZXR1cm4gYT09PWV8fCEhKGUmJjE9PT1lLm5vZGVUeXBlJiYoZC5jb250YWlucz9kLmNvbnRhaW5zKGUpOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZSkmMTYpKX06ZnVuY3Rpb24oYSxjKXtpZihjKWZvcig7Yz1jLnBhcmVudE5vZGU7KWlmKGM9PT1cbmEpcmV0dXJuITA7cmV0dXJuITF9O2hbZF09W107YShjLHttb3VzZWxlYXZlOlwibW91c2VvdXRcIixtb3VzZWVudGVyOlwibW91c2VvdmVyXCJ9W2RdLGZ1bmN0aW9uKGEpe3ZhciBjPWEucmVsYXRlZFRhcmdldDtjJiYoYz09PXRoaXN8fG0odGhpcyxjKSl8fGcoYSxkKX0pfWVsc2Ugc2IoYyxkLGcpLGhbZF09W107Zj1oW2RdfWYucHVzaChlKX0pfX0sb2ZmOnJjLG9uZTpmdW5jdGlvbihhLGMsZCl7YT16KGEpO2Eub24oYyxmdW5jdGlvbiBmKCl7YS5vZmYoYyxkKTthLm9mZihjLGYpfSk7YS5vbihjLGQpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbihhLGMpe3ZhciBkLGU9YS5wYXJlbnROb2RlO2tiKGEpO3EobmV3IFYoYyksZnVuY3Rpb24oYyl7ZD9lLmluc2VydEJlZm9yZShjLGQubmV4dFNpYmxpbmcpOmUucmVwbGFjZUNoaWxkKGMsYSk7ZD1jfSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3ZhciBjPVtdO3EoYS5jaGlsZE5vZGVzLGZ1bmN0aW9uKGEpezE9PT1hLm5vZGVUeXBlJiZjLnB1c2goYSl9KTtcbnJldHVybiBjfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fGEuY2hpbGROb2Rlc3x8W119LGFwcGVuZDpmdW5jdGlvbihhLGMpe3EobmV3IFYoYyksZnVuY3Rpb24oYyl7MSE9PWEubm9kZVR5cGUmJjExIT09YS5ub2RlVHlwZXx8YS5hcHBlbmRDaGlsZChjKX0pfSxwcmVwZW5kOmZ1bmN0aW9uKGEsYyl7aWYoMT09PWEubm9kZVR5cGUpe3ZhciBkPWEuZmlyc3RDaGlsZDtxKG5ldyBWKGMpLGZ1bmN0aW9uKGMpe2EuaW5zZXJ0QmVmb3JlKGMsZCl9KX19LHdyYXA6ZnVuY3Rpb24oYSxjKXtjPXooYylbMF07dmFyIGQ9YS5wYXJlbnROb2RlO2QmJmQucmVwbGFjZUNoaWxkKGMsYSk7Yy5hcHBlbmRDaGlsZChhKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2tiKGEpO3ZhciBjPWEucGFyZW50Tm9kZTtjJiZjLnJlbW92ZUNoaWxkKGEpfSxhZnRlcjpmdW5jdGlvbihhLGMpe3ZhciBkPWEsZT1hLnBhcmVudE5vZGU7cShuZXcgVihjKSxmdW5jdGlvbihhKXtlLmluc2VydEJlZm9yZShhLFxuZC5uZXh0U2libGluZyk7ZD1hfSl9LGFkZENsYXNzOm5iLHJlbW92ZUNsYXNzOm1iLHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYyxkKXtjJiZxKGMuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGMpe3ZhciBmPWQ7RihmKSYmKGY9IUxiKGEsYykpOyhmP25iOm1iKShhLGMpfSl9LHBhcmVudDpmdW5jdGlvbihhKXtyZXR1cm4oYT1hLnBhcmVudE5vZGUpJiYxMSE9PWEubm9kZVR5cGU/YTpudWxsfSxuZXh0OmZ1bmN0aW9uKGEpe2lmKGEubmV4dEVsZW1lbnRTaWJsaW5nKXJldHVybiBhLm5leHRFbGVtZW50U2libGluZztmb3IoYT1hLm5leHRTaWJsaW5nO251bGwhPWEmJjEhPT1hLm5vZGVUeXBlOylhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9LGZpbmQ6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYS5nZXRFbGVtZW50c0J5VGFnTmFtZT9hLmdldEVsZW1lbnRzQnlUYWdOYW1lKGMpOltdfSxjbG9uZTpKYix0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGMsZCl7Yz0obGEoYSxcImV2ZW50c1wiKXx8e30pW2NdO1xuZD1kfHxbXTt2YXIgZT1be3ByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwfSxpc0RlZmF1bHRQcmV2ZW50ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hMD09PXRoaXMuZGVmYXVsdFByZXZlbnRlZH0sc3RvcFByb3BhZ2F0aW9uOkJ9XTtxKGMsZnVuY3Rpb24oYyl7Yy5hcHBseShhLGUuY29uY2F0KGQpKX0pfX0sZnVuY3Rpb24oYSxjKXtWLnByb3RvdHlwZVtjXT1mdW5jdGlvbihjLGUsZil7Zm9yKHZhciBoLGc9MDtnPHRoaXMubGVuZ3RoO2crKylGKGgpPyhoPWEodGhpc1tnXSxjLGUsZiksdihoKSYmKGg9eihoKSkpOnFjKGgsYSh0aGlzW2ddLGMsZSxmKSk7cmV0dXJuIHYoaCk/aDp0aGlzfTtWLnByb3RvdHlwZS5iaW5kPVYucHJvdG90eXBlLm9uO1YucHJvdG90eXBlLnVuYmluZD1WLnByb3RvdHlwZS5vZmZ9KTtWYS5wcm90b3R5cGU9e3B1dDpmdW5jdGlvbihhLGMpe3RoaXNbR2EoYSx0aGlzLm5leHRVaWQpXT1jfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXNbR2EoYSxcbnRoaXMubmV4dFVpZCldfSxyZW1vdmU6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpc1thPUdhKGEsdGhpcy5uZXh0VWlkKV07ZGVsZXRlIHRoaXNbYV07cmV0dXJuIGN9fTt2YXIgemM9L15mdW5jdGlvblxccypbXlxcKF0qXFwoXFxzKihbXlxcKV0qKVxcKS9tLE5lPS8sLyxPZT0vXlxccyooXz8pKFxcUys/KVxcMVxccyokLyx5Yz0vKChcXC9cXC8uKiQpfChcXC9cXCpbXFxzXFxTXSo/XFwqXFwvKSkvbWcsSGE9TyhcIiRpbmplY3RvclwiKTtGYi4kJGFubm90YXRlPU1iO3ZhciBqZj1PKFwiJGFuaW1hdGVcIiksZmU9W1wiJHByb3ZpZGVcIixmdW5jdGlvbihhKXt0aGlzLiQkc2VsZWN0b3JzPXt9O3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYyxkKXt2YXIgZT1jK1wiLWFuaW1hdGlvblwiO2lmKGMmJlwiLlwiIT1jLmNoYXJBdCgwKSl0aHJvdyBqZihcIm5vdGNzZWxcIixjKTt0aGlzLiQkc2VsZWN0b3JzW2Muc3Vic3RyKDEpXT1lO2EuZmFjdG9yeShlLGQpfTt0aGlzLmNsYXNzTmFtZUZpbHRlcj1mdW5jdGlvbihhKXsxPT09YXJndW1lbnRzLmxlbmd0aCYmXG4odGhpcy4kJGNsYXNzTmFtZUZpbHRlcj1hIGluc3RhbmNlb2YgUmVnRXhwP2E6bnVsbCk7cmV0dXJuIHRoaXMuJCRjbGFzc05hbWVGaWx0ZXJ9O3RoaXMuJGdldD1bXCIkdGltZW91dFwiLFwiJCRhc3luY0NhbGxiYWNrXCIsZnVuY3Rpb24oYSxkKXtyZXR1cm57ZW50ZXI6ZnVuY3Rpb24oYSxjLGgsZyl7aD9oLmFmdGVyKGEpOmMucHJlcGVuZChhKTtnJiZkKGcpO3JldHVybiBCfSxsZWF2ZTpmdW5jdGlvbihhLGMpe2EucmVtb3ZlKCk7YyYmZChjKTtyZXR1cm4gQn0sbW92ZTpmdW5jdGlvbihhLGMsZCxnKXtyZXR1cm4gdGhpcy5lbnRlcihhLGMsZCxnKX0sYWRkQ2xhc3M6ZnVuY3Rpb24oYSxjLGgpe2M9RyhjKT9jOk0oYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3EoYSxmdW5jdGlvbihhKXtuYihhLGMpfSk7aCYmZChoKTtyZXR1cm4gQn0scmVtb3ZlQ2xhc3M6ZnVuY3Rpb24oYSxjLGgpe2M9RyhjKT9jOk0oYyk/Yy5qb2luKFwiIFwiKTpcIlwiO3EoYSxmdW5jdGlvbihhKXttYihhLGMpfSk7aCYmZChoKTtcbnJldHVybiBCfSxzZXRDbGFzczpmdW5jdGlvbihhLGMsaCxnKXtxKGEsZnVuY3Rpb24oYSl7bmIoYSxjKTttYihhLGgpfSk7ZyYmZChnKTtyZXR1cm4gQn0sZW5hYmxlZDpCfX1dfV0saGE9TyhcIiRjb21waWxlXCIpO2ljLiRpbmplY3Q9W1wiJHByb3ZpZGVcIixcIiQkc2FuaXRpemVVcmlQcm92aWRlclwiXTt2YXIgVGU9L14oeFtcXDpcXC1fXXxkYXRhW1xcOlxcLV9dKS9pLFBiPU8oXCIkaW50ZXJwb2xhdGVcIiksa2Y9L14oW15cXD8jXSopKFxcPyhbXiNdKikpPygjKC4qKSk/JC8sV2U9e2h0dHA6ODAsaHR0cHM6NDQzLGZ0cDoyMX0sU2I9TyhcIiRsb2NhdGlvblwiKTtVYi5wcm90b3R5cGU9VGIucHJvdG90eXBlPUtjLnByb3RvdHlwZT17JCRodG1sNTohMSwkJHJlcGxhY2U6ITEsYWJzVXJsOnRiKFwiJCRhYnNVcmxcIiksdXJsOmZ1bmN0aW9uKGEsYyl7aWYoRihhKSlyZXR1cm4gdGhpcy4kJHVybDt2YXIgZD1rZi5leGVjKGEpO2RbMV0mJnRoaXMucGF0aChkZWNvZGVVUklDb21wb25lbnQoZFsxXSkpOyhkWzJdfHxcbmRbMV0pJiZ0aGlzLnNlYXJjaChkWzNdfHxcIlwiKTt0aGlzLmhhc2goZFs1XXx8XCJcIixjKTtyZXR1cm4gdGhpc30scHJvdG9jb2w6dGIoXCIkJHByb3RvY29sXCIpLGhvc3Q6dGIoXCIkJGhvc3RcIikscG9ydDp0YihcIiQkcG9ydFwiKSxwYXRoOkxjKFwiJCRwYXRoXCIsZnVuY3Rpb24oYSl7cmV0dXJuXCIvXCI9PWEuY2hhckF0KDApP2E6XCIvXCIrYX0pLHNlYXJjaDpmdW5jdGlvbihhLGMpe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDA6cmV0dXJuIHRoaXMuJCRzZWFyY2g7Y2FzZSAxOmlmKEcoYSkpdGhpcy4kJHNlYXJjaD1mYyhhKTtlbHNlIGlmKFEoYSkpcShhLGZ1bmN0aW9uKGMsZSl7bnVsbD09YyYmZGVsZXRlIGFbZV19KSx0aGlzLiQkc2VhcmNoPWE7ZWxzZSB0aHJvdyBTYihcImlzcmNoYXJnXCIpO2JyZWFrO2RlZmF1bHQ6RihjKXx8bnVsbD09PWM/ZGVsZXRlIHRoaXMuJCRzZWFyY2hbYV06dGhpcy4kJHNlYXJjaFthXT1jfXRoaXMuJCRjb21wb3NlKCk7cmV0dXJuIHRoaXN9LGhhc2g6TGMoXCIkJGhhc2hcIixcbkJhKSxyZXBsYWNlOmZ1bmN0aW9uKCl7dGhpcy4kJHJlcGxhY2U9ITA7cmV0dXJuIHRoaXN9fTt2YXIgaWE9TyhcIiRwYXJzZVwiKSxsZj1GdW5jdGlvbi5wcm90b3R5cGUuY2FsbCxtZj1GdW5jdGlvbi5wcm90b3R5cGUuYXBwbHksbmY9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsYWI9e1wibnVsbFwiOmZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LFwidHJ1ZVwiOmZ1bmN0aW9uKCl7cmV0dXJuITB9LFwiZmFsc2VcIjpmdW5jdGlvbigpe3JldHVybiExfSx1bmRlZmluZWQ6QixcIitcIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4gdihkKT92KGUpP2QrZTpkOnYoZSk/ZTp0fSxcIi1cIjpmdW5jdGlvbihhLGMsZCxlKXtkPWQoYSxjKTtlPWUoYSxjKTtyZXR1cm4odihkKT9kOjApLSh2KGUpP2U6MCl9LFwiKlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykqZShhLGMpfSxcIi9cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpL2UoYSxjKX0sXCIlXCI6ZnVuY3Rpb24oYSxcbmMsZCxlKXtyZXR1cm4gZChhLGMpJWUoYSxjKX0sXCJeXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKV5lKGEsYyl9LFwiPVwiOkIsXCI9PT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPT09ZShhLGMpfSxcIiE9PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykhPT1lKGEsYyl9LFwiPT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPT1lKGEsYyl9LFwiIT1cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpIT1lKGEsYyl9LFwiPFwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8ZShhLGMpfSxcIj5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpPmUoYSxjKX0sXCI8PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk8PWUoYSxjKX0sXCI+PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk+PWUoYSxjKX0sXCImJlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykmJmUoYSxjKX0sXCJ8fFwiOmZ1bmN0aW9uKGEsXG5jLGQsZSl7cmV0dXJuIGQoYSxjKXx8ZShhLGMpfSxcIiZcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpJmUoYSxjKX0sXCJ8XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGUoYSxjKShhLGMsZChhLGMpKX0sXCIhXCI6ZnVuY3Rpb24oYSxjLGQpe3JldHVybiFkKGEsYyl9fSxvZj17bjpcIlxcblwiLGY6XCJcXGZcIixyOlwiXFxyXCIsdDpcIlxcdFwiLHY6XCJcXHZcIixcIidcIjpcIidcIiwnXCInOidcIid9LFdiPWZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz1hfTtXYi5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOldiLGxleDpmdW5jdGlvbihhKXt0aGlzLnRleHQ9YTt0aGlzLmluZGV4PTA7dGhpcy5jaD10O2Zvcih0aGlzLnRva2Vucz1bXTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KWlmKHRoaXMuY2g9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSx0aGlzLmlzKFwiXFxcIidcIikpdGhpcy5yZWFkU3RyaW5nKHRoaXMuY2gpO2Vsc2UgaWYodGhpcy5pc051bWJlcih0aGlzLmNoKXx8dGhpcy5pcyhcIi5cIikmJnRoaXMuaXNOdW1iZXIodGhpcy5wZWVrKCkpKXRoaXMucmVhZE51bWJlcigpO1xuZWxzZSBpZih0aGlzLmlzSWRlbnQodGhpcy5jaCkpdGhpcy5yZWFkSWRlbnQoKTtlbHNlIGlmKHRoaXMuaXMoXCIoKXt9W10uLDs6P1wiKSl0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6dGhpcy5jaH0pLHRoaXMuaW5kZXgrKztlbHNlIGlmKHRoaXMuaXNXaGl0ZXNwYWNlKHRoaXMuY2gpKXRoaXMuaW5kZXgrKztlbHNle2E9dGhpcy5jaCt0aGlzLnBlZWsoKTt2YXIgYz1hK3RoaXMucGVlaygyKSxkPWFiW3RoaXMuY2hdLGU9YWJbYV0sZj1hYltjXTtmPyh0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YyxmbjpmfSksdGhpcy5pbmRleCs9Myk6ZT8odGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OmEsZm46ZX0pLHRoaXMuaW5kZXgrPTIpOmQ/KHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNoLGZuOmR9KSx0aGlzLmluZGV4Kz0xKTp0aGlzLnRocm93RXJyb3IoXCJVbmV4cGVjdGVkIG5leHQgY2hhcmFjdGVyIFwiLFxudGhpcy5pbmRleCx0aGlzLmluZGV4KzEpfXJldHVybiB0aGlzLnRva2Vuc30saXM6ZnVuY3Rpb24oYSl7cmV0dXJuLTEhPT1hLmluZGV4T2YodGhpcy5jaCl9LHBlZWs6ZnVuY3Rpb24oYSl7YT1hfHwxO3JldHVybiB0aGlzLmluZGV4K2E8dGhpcy50ZXh0Lmxlbmd0aD90aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgrYSk6ITF9LGlzTnVtYmVyOmZ1bmN0aW9uKGEpe3JldHVyblwiMFwiPD1hJiZcIjlcIj49YX0saXNXaGl0ZXNwYWNlOmZ1bmN0aW9uKGEpe3JldHVyblwiIFwiPT09YXx8XCJcXHJcIj09PWF8fFwiXFx0XCI9PT1hfHxcIlxcblwiPT09YXx8XCJcXHZcIj09PWF8fFwiXFx1MDBhMFwiPT09YX0saXNJZGVudDpmdW5jdGlvbihhKXtyZXR1cm5cImFcIjw9YSYmXCJ6XCI+PWF8fFwiQVwiPD1hJiZcIlpcIj49YXx8XCJfXCI9PT1hfHxcIiRcIj09PWF9LGlzRXhwT3BlcmF0b3I6ZnVuY3Rpb24oYSl7cmV0dXJuXCItXCI9PT1hfHxcIitcIj09PWF8fHRoaXMuaXNOdW1iZXIoYSl9LHRocm93RXJyb3I6ZnVuY3Rpb24oYSxjLGQpe2Q9ZHx8dGhpcy5pbmRleDtcbmM9dihjKT9cInMgXCIrYytcIi1cIit0aGlzLmluZGV4K1wiIFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKGMsZCkrXCJdXCI6XCIgXCIrZDt0aHJvdyBpYShcImxleGVyclwiLGEsYyx0aGlzLnRleHQpO30scmVhZE51bWJlcjpmdW5jdGlvbigpe2Zvcih2YXIgYT1cIlwiLGM9dGhpcy5pbmRleDt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgZD1KKHRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCkpO2lmKFwiLlwiPT1kfHx0aGlzLmlzTnVtYmVyKGQpKWErPWQ7ZWxzZXt2YXIgZT10aGlzLnBlZWsoKTtpZihcImVcIj09ZCYmdGhpcy5pc0V4cE9wZXJhdG9yKGUpKWErPWQ7ZWxzZSBpZih0aGlzLmlzRXhwT3BlcmF0b3IoZCkmJmUmJnRoaXMuaXNOdW1iZXIoZSkmJlwiZVwiPT1hLmNoYXJBdChhLmxlbmd0aC0xKSlhKz1kO2Vsc2UgaWYoIXRoaXMuaXNFeHBPcGVyYXRvcihkKXx8ZSYmdGhpcy5pc051bWJlcihlKXx8XCJlXCIhPWEuY2hhckF0KGEubGVuZ3RoLTEpKWJyZWFrO2Vsc2UgdGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCBleHBvbmVudFwiKX10aGlzLmluZGV4Kyt9YSo9XG4xO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmMsdGV4dDphLGNvbnN0YW50OiEwLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIGF9fSl9LHJlYWRJZGVudDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLGM9XCJcIixkPXRoaXMuaW5kZXgsZSxmLGgsZzt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXtnPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCk7aWYoXCIuXCI9PT1nfHx0aGlzLmlzSWRlbnQoZyl8fHRoaXMuaXNOdW1iZXIoZykpXCIuXCI9PT1nJiYoZT10aGlzLmluZGV4KSxjKz1nO2Vsc2UgYnJlYWs7dGhpcy5pbmRleCsrfWlmKGUpZm9yKGY9dGhpcy5pbmRleDtmPHRoaXMudGV4dC5sZW5ndGg7KXtnPXRoaXMudGV4dC5jaGFyQXQoZik7aWYoXCIoXCI9PT1nKXtoPWMuc3Vic3RyKGUtZCsxKTtjPWMuc3Vic3RyKDAsZS1kKTt0aGlzLmluZGV4PWY7YnJlYWt9aWYodGhpcy5pc1doaXRlc3BhY2UoZykpZisrO2Vsc2UgYnJlYWt9ZD17aW5kZXg6ZCx0ZXh0OmN9O2lmKGFiLmhhc093blByb3BlcnR5KGMpKWQuZm49XG5hYltjXSxkLmNvbnN0YW50PSEwO2Vsc2V7dmFyIG49TmMoYyx0aGlzLm9wdGlvbnMsdGhpcy50ZXh0KTtkLmZuPUUoZnVuY3Rpb24oYSxjKXtyZXR1cm4gbihhLGMpfSx7YXNzaWduOmZ1bmN0aW9uKGQsZSl7cmV0dXJuIHViKGQsYyxlLGEudGV4dCl9fSl9dGhpcy50b2tlbnMucHVzaChkKTtoJiYodGhpcy50b2tlbnMucHVzaCh7aW5kZXg6ZSx0ZXh0OlwiLlwifSksdGhpcy50b2tlbnMucHVzaCh7aW5kZXg6ZSsxLHRleHQ6aH0pKX0scmVhZFN0cmluZzpmdW5jdGlvbihhKXt2YXIgYz10aGlzLmluZGV4O3RoaXMuaW5kZXgrKztmb3IodmFyIGQ9XCJcIixlPWEsZj0hMTt0aGlzLmluZGV4PHRoaXMudGV4dC5sZW5ndGg7KXt2YXIgaD10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLGU9ZStoO2lmKGYpXCJ1XCI9PT1oPyhmPXRoaXMudGV4dC5zdWJzdHJpbmcodGhpcy5pbmRleCsxLHRoaXMuaW5kZXgrNSksZi5tYXRjaCgvW1xcZGEtZl17NH0vaSl8fHRoaXMudGhyb3dFcnJvcihcIkludmFsaWQgdW5pY29kZSBlc2NhcGUgW1xcXFx1XCIrXG5mK1wiXVwiKSx0aGlzLmluZGV4Kz00LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZiwxNikpKTpkKz1vZltoXXx8aCxmPSExO2Vsc2UgaWYoXCJcXFxcXCI9PT1oKWY9ITA7ZWxzZXtpZihoPT09YSl7dGhpcy5pbmRleCsrO3RoaXMudG9rZW5zLnB1c2goe2luZGV4OmMsdGV4dDplLHN0cmluZzpkLGNvbnN0YW50OiEwLGZuOmZ1bmN0aW9uKCl7cmV0dXJuIGR9fSk7cmV0dXJufWQrPWh9dGhpcy5pbmRleCsrfXRoaXMudGhyb3dFcnJvcihcIlVudGVybWluYXRlZCBxdW90ZVwiLGMpfX07dmFyIFlhPWZ1bmN0aW9uKGEsYyxkKXt0aGlzLmxleGVyPWE7dGhpcy4kZmlsdGVyPWM7dGhpcy5vcHRpb25zPWR9O1lhLlpFUk89RShmdW5jdGlvbigpe3JldHVybiAwfSx7Y29uc3RhbnQ6ITB9KTtZYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOllhLHBhcnNlOmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMudG9rZW5zPXRoaXMubGV4ZXIubGV4KGEpO2E9dGhpcy5zdGF0ZW1lbnRzKCk7MCE9PVxudGhpcy50b2tlbnMubGVuZ3RoJiZ0aGlzLnRocm93RXJyb3IoXCJpcyBhbiB1bmV4cGVjdGVkIHRva2VuXCIsdGhpcy50b2tlbnNbMF0pO2EubGl0ZXJhbD0hIWEubGl0ZXJhbDthLmNvbnN0YW50PSEhYS5jb25zdGFudDtyZXR1cm4gYX0scHJpbWFyeTpmdW5jdGlvbigpe3ZhciBhO2lmKHRoaXMuZXhwZWN0KFwiKFwiKSlhPXRoaXMuZmlsdGVyQ2hhaW4oKSx0aGlzLmNvbnN1bWUoXCIpXCIpO2Vsc2UgaWYodGhpcy5leHBlY3QoXCJbXCIpKWE9dGhpcy5hcnJheURlY2xhcmF0aW9uKCk7ZWxzZSBpZih0aGlzLmV4cGVjdChcIntcIikpYT10aGlzLm9iamVjdCgpO2Vsc2V7dmFyIGM9dGhpcy5leHBlY3QoKTsoYT1jLmZuKXx8dGhpcy50aHJvd0Vycm9yKFwibm90IGEgcHJpbWFyeSBleHByZXNzaW9uXCIsYyk7Yy5jb25zdGFudCYmKGEuY29uc3RhbnQ9ITAsYS5saXRlcmFsPSEwKX1mb3IodmFyIGQ7Yz10aGlzLmV4cGVjdChcIihcIixcIltcIixcIi5cIik7KVwiKFwiPT09Yy50ZXh0PyhhPXRoaXMuZnVuY3Rpb25DYWxsKGEsXG5kKSxkPW51bGwpOlwiW1wiPT09Yy50ZXh0PyhkPWEsYT10aGlzLm9iamVjdEluZGV4KGEpKTpcIi5cIj09PWMudGV4dD8oZD1hLGE9dGhpcy5maWVsZEFjY2VzcyhhKSk6dGhpcy50aHJvd0Vycm9yKFwiSU1QT1NTSUJMRVwiKTtyZXR1cm4gYX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMpe3Rocm93IGlhKFwic3ludGF4XCIsYy50ZXh0LGEsYy5pbmRleCsxLHRoaXMudGV4dCx0aGlzLnRleHQuc3Vic3RyaW5nKGMuaW5kZXgpKTt9LHBlZWtUb2tlbjpmdW5jdGlvbigpe2lmKDA9PT10aGlzLnRva2Vucy5sZW5ndGgpdGhyb3cgaWEoXCJ1ZW9lXCIsdGhpcy50ZXh0KTtyZXR1cm4gdGhpcy50b2tlbnNbMF19LHBlZWs6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoMDx0aGlzLnRva2Vucy5sZW5ndGgpe3ZhciBmPXRoaXMudG9rZW5zWzBdLGg9Zi50ZXh0O2lmKGg9PT1hfHxoPT09Y3x8aD09PWR8fGg9PT1lfHwhKGF8fGN8fGR8fGUpKXJldHVybiBmfXJldHVybiExfSxleHBlY3Q6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuKGE9XG50aGlzLnBlZWsoYSxjLGQsZSkpPyh0aGlzLnRva2Vucy5zaGlmdCgpLGEpOiExfSxjb25zdW1lOmZ1bmN0aW9uKGEpe3RoaXMuZXhwZWN0KGEpfHx0aGlzLnRocm93RXJyb3IoXCJpcyB1bmV4cGVjdGVkLCBleHBlY3RpbmcgW1wiK2ErXCJdXCIsdGhpcy5wZWVrKCkpfSx1bmFyeUZuOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIEUoZnVuY3Rpb24oZCxlKXtyZXR1cm4gYShkLGUsYyl9LHtjb25zdGFudDpjLmNvbnN0YW50fSl9LHRlcm5hcnlGbjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIEUoZnVuY3Rpb24oZSxmKXtyZXR1cm4gYShlLGYpP2MoZSxmKTpkKGUsZil9LHtjb25zdGFudDphLmNvbnN0YW50JiZjLmNvbnN0YW50JiZkLmNvbnN0YW50fSl9LGJpbmFyeUZuOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gRShmdW5jdGlvbihlLGYpe3JldHVybiBjKGUsZixhLGQpfSx7Y29uc3RhbnQ6YS5jb25zdGFudCYmZC5jb25zdGFudH0pfSxzdGF0ZW1lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVtdOzspaWYoMDxcbnRoaXMudG9rZW5zLmxlbmd0aCYmIXRoaXMucGVlayhcIn1cIixcIilcIixcIjtcIixcIl1cIikmJmEucHVzaCh0aGlzLmZpbHRlckNoYWluKCkpLCF0aGlzLmV4cGVjdChcIjtcIikpcmV0dXJuIDE9PT1hLmxlbmd0aD9hWzBdOmZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBlLGY9MDtmPGEubGVuZ3RoO2YrKyl7dmFyIGg9YVtmXTtoJiYoZT1oKGMsZCkpfXJldHVybiBlfX0sZmlsdGVyQ2hhaW46ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5leHByZXNzaW9uKCksYzs7KWlmKGM9dGhpcy5leHBlY3QoXCJ8XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5maWx0ZXIoKSk7ZWxzZSByZXR1cm4gYX0sZmlsdGVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZXhwZWN0KCksYz10aGlzLiRmaWx0ZXIoYS50ZXh0KSxkPVtdO3RoaXMuZXhwZWN0KFwiOlwiKTspZC5wdXNoKHRoaXMuZXhwcmVzc2lvbigpKTtyZXR1cm4gYmEoZnVuY3Rpb24oYSxmLGgpe2g9W2hdO2Zvcih2YXIgZz0wO2c8ZC5sZW5ndGg7ZysrKWgucHVzaChkW2ddKGEsXG5mKSk7cmV0dXJuIGMuYXBwbHkoYSxoKX0pfSxleHByZXNzaW9uOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXNzaWdubWVudCgpfSxhc3NpZ25tZW50OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50ZXJuYXJ5KCksYyxkO3JldHVybihkPXRoaXMuZXhwZWN0KFwiPVwiKSk/KGEuYXNzaWdufHx0aGlzLnRocm93RXJyb3IoXCJpbXBsaWVzIGFzc2lnbm1lbnQgYnV0IFtcIit0aGlzLnRleHQuc3Vic3RyaW5nKDAsZC5pbmRleCkrXCJdIGNhbiBub3QgYmUgYXNzaWduZWQgdG9cIixkKSxjPXRoaXMudGVybmFyeSgpLGZ1bmN0aW9uKGQsZil7cmV0dXJuIGEuYXNzaWduKGQsYyhkLGYpLGYpfSk6YX0sdGVybmFyeTpmdW5jdGlvbigpe3ZhciBhPXRoaXMubG9naWNhbE9SKCksYyxkO2lmKHRoaXMuZXhwZWN0KFwiP1wiKSl7Yz10aGlzLnRlcm5hcnkoKTtpZihkPXRoaXMuZXhwZWN0KFwiOlwiKSlyZXR1cm4gdGhpcy50ZXJuYXJ5Rm4oYSxjLHRoaXMudGVybmFyeSgpKTt0aGlzLnRocm93RXJyb3IoXCJleHBlY3RlZCA6XCIsXG5kKX1lbHNlIHJldHVybiBhfSxsb2dpY2FsT1I6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5sb2dpY2FsQU5EKCksYzs7KWlmKGM9dGhpcy5leHBlY3QoXCJ8fFwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMubG9naWNhbEFORCgpKTtlbHNlIHJldHVybiBhfSxsb2dpY2FsQU5EOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lcXVhbGl0eSgpLGM7aWYoYz10aGlzLmV4cGVjdChcIiYmXCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5sb2dpY2FsQU5EKCkpO3JldHVybiBhfSxlcXVhbGl0eTpmdW5jdGlvbigpe3ZhciBhPXRoaXMucmVsYXRpb25hbCgpLGM7aWYoYz10aGlzLmV4cGVjdChcIj09XCIsXCIhPVwiLFwiPT09XCIsXCIhPT1cIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmVxdWFsaXR5KCkpO3JldHVybiBhfSxyZWxhdGlvbmFsOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hZGRpdGl2ZSgpLGM7aWYoYz10aGlzLmV4cGVjdChcIjxcIixcIj5cIixcIjw9XCIsXCI+PVwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxcbmMuZm4sdGhpcy5yZWxhdGlvbmFsKCkpO3JldHVybiBhfSxhZGRpdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLm11bHRpcGxpY2F0aXZlKCksYztjPXRoaXMuZXhwZWN0KFwiK1wiLFwiLVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLm11bHRpcGxpY2F0aXZlKCkpO3JldHVybiBhfSxtdWx0aXBsaWNhdGl2ZTpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLnVuYXJ5KCksYztjPXRoaXMuZXhwZWN0KFwiKlwiLFwiL1wiLFwiJVwiKTspYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLnVuYXJ5KCkpO3JldHVybiBhfSx1bmFyeTpmdW5jdGlvbigpe3ZhciBhO3JldHVybiB0aGlzLmV4cGVjdChcIitcIik/dGhpcy5wcmltYXJ5KCk6KGE9dGhpcy5leHBlY3QoXCItXCIpKT90aGlzLmJpbmFyeUZuKFlhLlpFUk8sYS5mbix0aGlzLnVuYXJ5KCkpOihhPXRoaXMuZXhwZWN0KFwiIVwiKSk/dGhpcy51bmFyeUZuKGEuZm4sdGhpcy51bmFyeSgpKTp0aGlzLnByaW1hcnkoKX0sZmllbGRBY2Nlc3M6ZnVuY3Rpb24oYSl7dmFyIGM9XG50aGlzLGQ9dGhpcy5leHBlY3QoKS50ZXh0LGU9TmMoZCx0aGlzLm9wdGlvbnMsdGhpcy50ZXh0KTtyZXR1cm4gRShmdW5jdGlvbihjLGQsZyl7cmV0dXJuIGUoZ3x8YShjLGQpKX0se2Fzc2lnbjpmdW5jdGlvbihlLGgsZyl7cmV0dXJuIHViKGEoZSxnKSxkLGgsYy50ZXh0KX19KX0sb2JqZWN0SW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcyxkPXRoaXMuZXhwcmVzc2lvbigpO3RoaXMuY29uc3VtZShcIl1cIik7cmV0dXJuIEUoZnVuY3Rpb24oZSxmKXt2YXIgaD1hKGUsZiksZz1kKGUsZik7cWEoZyxjLnRleHQpO3JldHVybiBoP0phKGhbZ10sYy50ZXh0KTp0fSx7YXNzaWduOmZ1bmN0aW9uKGUsZixoKXt2YXIgZz1kKGUsaCk7cmV0dXJuIEphKGEoZSxoKSxjLnRleHQpW2ddPWZ9fSl9LGZ1bmN0aW9uQ2FsbDpmdW5jdGlvbihhLGMpe3ZhciBkPVtdO2lmKFwiKVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkbyBkLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3doaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSlcbn10aGlzLmNvbnN1bWUoXCIpXCIpO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKGYsaCl7Zm9yKHZhciBnPVtdLG49Yz9jKGYsaCk6ZixsPTA7bDxkLmxlbmd0aDtsKyspZy5wdXNoKGRbbF0oZixoKSk7bD1hKGYsaCxuKXx8QjtKYShuLGUudGV4dCk7dmFyIG09ZS50ZXh0O2lmKGwpe2lmKGwuY29uc3RydWN0b3I9PT1sKXRocm93IGlhKFwiaXNlY2ZuXCIsbSk7aWYobD09PWxmfHxsPT09bWZ8fGw9PT1uZil0aHJvdyBpYShcImlzZWNmZlwiLG0pO31nPWwuYXBwbHk/bC5hcHBseShuLGcpOmwoZ1swXSxnWzFdLGdbMl0sZ1szXSxnWzRdKTtyZXR1cm4gSmEoZyxlLnRleHQpfX0sYXJyYXlEZWNsYXJhdGlvbjpmdW5jdGlvbigpe3ZhciBhPVtdLGM9ITA7aWYoXCJdXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2Rve2lmKHRoaXMucGVlayhcIl1cIikpYnJlYWs7dmFyIGQ9dGhpcy5leHByZXNzaW9uKCk7YS5wdXNoKGQpO2QuY29uc3RhbnR8fChjPSExKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIl1cIik7XG5yZXR1cm4gRShmdW5jdGlvbihjLGQpe2Zvcih2YXIgaD1bXSxnPTA7ZzxhLmxlbmd0aDtnKyspaC5wdXNoKGFbZ10oYyxkKSk7cmV0dXJuIGh9LHtsaXRlcmFsOiEwLGNvbnN0YW50OmN9KX0sb2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGE9W10sYz0hMDtpZihcIn1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwifVwiKSlicmVhazt2YXIgZD10aGlzLmV4cGVjdCgpLGQ9ZC5zdHJpbmd8fGQudGV4dDt0aGlzLmNvbnN1bWUoXCI6XCIpO3ZhciBlPXRoaXMuZXhwcmVzc2lvbigpO2EucHVzaCh7a2V5OmQsdmFsdWU6ZX0pO2UuY29uc3RhbnR8fChjPSExKX13aGlsZSh0aGlzLmV4cGVjdChcIixcIikpfXRoaXMuY29uc3VtZShcIn1cIik7cmV0dXJuIEUoZnVuY3Rpb24oYyxkKXtmb3IodmFyIGU9e30sbj0wO248YS5sZW5ndGg7bisrKXt2YXIgbD1hW25dO2VbbC5rZXldPWwudmFsdWUoYyxkKX1yZXR1cm4gZX0se2xpdGVyYWw6ITAsY29uc3RhbnQ6Y30pfX07dmFyIFZiPXt9LFxud2E9TyhcIiRzY2VcIiksZmE9e0hUTUw6XCJodG1sXCIsQ1NTOlwiY3NzXCIsVVJMOlwidXJsXCIsUkVTT1VSQ0VfVVJMOlwicmVzb3VyY2VVcmxcIixKUzpcImpzXCJ9LCQ9Vy5jcmVhdGVFbGVtZW50KFwiYVwiKSxRYz12YShQLmxvY2F0aW9uLmhyZWYsITApO3BjLiRpbmplY3Q9W1wiJHByb3ZpZGVcIl07UmMuJGluamVjdD1bXCIkbG9jYWxlXCJdO1RjLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTt2YXIgV2M9XCIuXCIsZWY9e3l5eXk6YWEoXCJGdWxsWWVhclwiLDQpLHl5OmFhKFwiRnVsbFllYXJcIiwyLDAsITApLHk6YWEoXCJGdWxsWWVhclwiLDEpLE1NTU06d2IoXCJNb250aFwiKSxNTU06d2IoXCJNb250aFwiLCEwKSxNTTphYShcIk1vbnRoXCIsMiwxKSxNOmFhKFwiTW9udGhcIiwxLDEpLGRkOmFhKFwiRGF0ZVwiLDIpLGQ6YWEoXCJEYXRlXCIsMSksSEg6YWEoXCJIb3Vyc1wiLDIpLEg6YWEoXCJIb3Vyc1wiLDEpLGhoOmFhKFwiSG91cnNcIiwyLC0xMiksaDphYShcIkhvdXJzXCIsMSwtMTIpLG1tOmFhKFwiTWludXRlc1wiLDIpLG06YWEoXCJNaW51dGVzXCIsMSksc3M6YWEoXCJTZWNvbmRzXCIsXG4yKSxzOmFhKFwiU2Vjb25kc1wiLDEpLHNzczphYShcIk1pbGxpc2Vjb25kc1wiLDMpLEVFRUU6d2IoXCJEYXlcIiksRUVFOndiKFwiRGF5XCIsITApLGE6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gMTI+YS5nZXRIb3VycygpP2MuQU1QTVNbMF06Yy5BTVBNU1sxXX0sWjpmdW5jdGlvbihhKXthPS0xKmEuZ2V0VGltZXpvbmVPZmZzZXQoKTtyZXR1cm4gYT0oMDw9YT9cIitcIjpcIlwiKSsodmIoTWF0aFswPGE/XCJmbG9vclwiOlwiY2VpbFwiXShhLzYwKSwyKSt2YihNYXRoLmFicyhhJTYwKSwyKSl9LHd3OlljKDIpLHc6WWMoMSl9LGRmPS8oKD86W155TWRIaG1zYVpFdyddKyl8KD86Jyg/OlteJ118JycpKicpfCg/OkUrfHkrfE0rfGQrfEgrfGgrfG0rfHMrfGF8Wnx3KykpKC4qKS8sY2Y9L15cXC0/XFxkKyQvO1NjLiRpbmplY3Q9W1wiJGxvY2FsZVwiXTt2YXIgYWY9YmEoSiksYmY9YmEoaWIpO1VjLiRpbmplY3Q9W1wiJHBhcnNlXCJdO3ZhciB3ZD1iYSh7cmVzdHJpY3Q6XCJFXCIsY29tcGlsZTpmdW5jdGlvbihhLGMpezg+PVQmJlxuKGMuaHJlZnx8Yy5uYW1lfHxjLiRzZXQoXCJocmVmXCIsXCJcIiksYS5hcHBlbmQoVy5jcmVhdGVDb21tZW50KFwiSUUgZml4XCIpKSk7aWYoIWMuaHJlZiYmIWMueGxpbmtIcmVmJiYhYy5uYW1lKXJldHVybiBmdW5jdGlvbihhLGMpe3ZhciBmPVwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PXlhLmNhbGwoYy5wcm9wKFwiaHJlZlwiKSk/XCJ4bGluazpocmVmXCI6XCJocmVmXCI7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oYSl7Yy5hdHRyKGYpfHxhLnByZXZlbnREZWZhdWx0KCl9KX19fSksamI9e307cShwYixmdW5jdGlvbihhLGMpe2lmKFwibXVsdGlwbGVcIiE9YSl7dmFyIGQ9b2EoXCJuZy1cIitjKTtqYltkXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eToxMDAsbGluazpmdW5jdGlvbihhLGYsaCl7YS4kd2F0Y2goaFtkXSxmdW5jdGlvbihhKXtoLiRzZXQoYywhIWEpfSl9fX19fSk7cSh4YyxmdW5jdGlvbihhLGMpe2piW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsXG5lLGYpe2lmKFwibmdQYXR0ZXJuXCI9PT1jJiZcIi9cIj09Zi5uZ1BhdHRlcm4uY2hhckF0KDApJiYoZT1mLm5nUGF0dGVybi5tYXRjaChoZikpKXtmLiRzZXQoXCJuZ1BhdHRlcm5cIixSZWdFeHAoZVsxXSxlWzJdKSk7cmV0dXJufWEuJHdhdGNoKGZbY10sZnVuY3Rpb24oYSl7Zi4kc2V0KGMsYSl9KX19fX0pO3EoW1wic3JjXCIsXCJzcmNzZXRcIixcImhyZWZcIl0sZnVuY3Rpb24oYSl7dmFyIGM9b2EoXCJuZy1cIithKTtqYltjXT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eTo5OSxsaW5rOmZ1bmN0aW9uKGQsZSxmKXt2YXIgaD1hLGc9YTtcImhyZWZcIj09PWEmJlwiW29iamVjdCBTVkdBbmltYXRlZFN0cmluZ11cIj09PXlhLmNhbGwoZS5wcm9wKFwiaHJlZlwiKSkmJihnPVwieGxpbmtIcmVmXCIsZi4kYXR0cltnXT1cInhsaW5rOmhyZWZcIixoPW51bGwpO2YuJG9ic2VydmUoYyxmdW5jdGlvbihhKXthJiYoZi4kc2V0KGcsYSksVCYmaCYmZS5wcm9wKGgsZltnXSkpfSl9fX19KTt2YXIgemI9eyRhZGRDb250cm9sOkIsXG4kcmVtb3ZlQ29udHJvbDpCLCRzZXRWYWxpZGl0eTpCLCRzZXREaXJ0eTpCLCRzZXRQcmlzdGluZTpCfTtaYy4kaW5qZWN0PVtcIiRlbGVtZW50XCIsXCIkYXR0cnNcIixcIiRzY29wZVwiLFwiJGFuaW1hdGVcIl07dmFyIGJkPWZ1bmN0aW9uKGEpe3JldHVybltcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYyl7cmV0dXJue25hbWU6XCJmb3JtXCIscmVzdHJpY3Q6YT9cIkVBQ1wiOlwiRVwiLGNvbnRyb2xsZXI6WmMsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxlLGYsaCl7aWYoIWYuYWN0aW9uKXt2YXIgZz1mdW5jdGlvbihjKXthLiRhcHBseShmdW5jdGlvbigpe2guJGNvbW1pdFZpZXdWYWx1ZSgpfSk7Yy5wcmV2ZW50RGVmYXVsdD9jLnByZXZlbnREZWZhdWx0KCk6Yy5yZXR1cm5WYWx1ZT0hMX07c2IoZVswXSxcInN1Ym1pdFwiLGcpO2Uub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7YyhmdW5jdGlvbigpe1RhKGVbMF0sXCJzdWJtaXRcIixnKX0sMCwhMSl9KX12YXIgbj1lLnBhcmVudCgpLmNvbnRyb2xsZXIoXCJmb3JtXCIpLFxubD1mLm5hbWV8fGYubmdGb3JtO2wmJnViKGEsbCxoLGwpO2lmKG4pZS5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtuLiRyZW1vdmVDb250cm9sKGgpO2wmJnViKGEsbCx0LGwpO0UoaCx6Yil9KX19fX19XX0seGQ9YmQoKSxLZD1iZCghMCkscGY9L14oZnRwfGh0dHB8aHR0cHMpOlxcL1xcLyhcXHcrOnswLDF9XFx3KkApPyhcXFMrKSg6WzAtOV0rKT8oXFwvfFxcLyhbXFx3IyE6Lj8rPSYlQCFcXC1cXC9dKSk/JC8scWY9L15bYS16MC05ISMkJSYnKitcXC89P15fYHt8fX4uLV0rQFthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KFxcLlthLXowLTldKFthLXowLTktXSpbYS16MC05XSk/KSokL2kscmY9L15cXHMqKFxcLXxcXCspPyhcXGQrfChcXGQqKFxcLlxcZCopKSlcXHMqJC8sY2Q9L14oXFxkezR9KS0oXFxkezJ9KS0oXFxkezJ9KSQvLGRkPS9eKFxcZHs0fSktKFxcZFxcZCktKFxcZFxcZClUKFxcZFxcZCk6KFxcZFxcZCkkLyxaYj0vXihcXGR7NH0pLVcoXFxkXFxkKSQvLGVkPS9eKFxcZHs0fSktKFxcZFxcZCkkLyxmZD0vXihcXGRcXGQpOihcXGRcXGQpJC8sXG5zZj0vKFxccyt8XilkZWZhdWx0KFxccyt8JCkvLGdkPXt0ZXh0OlphLGRhdGU6JGEoXCJkYXRlXCIsY2QsQmIoY2QsW1wieXl5eVwiLFwiTU1cIixcImRkXCJdKSxcInl5eXktTU0tZGRcIiksXCJkYXRldGltZS1sb2NhbFwiOiRhKFwiZGF0ZXRpbWVsb2NhbFwiLGRkLEJiKGRkLFtcInl5eXlcIixcIk1NXCIsXCJkZFwiLFwiSEhcIixcIm1tXCJdKSxcInl5eXktTU0tZGRUSEg6bW1cIiksdGltZTokYShcInRpbWVcIixmZCxCYihmZCxbXCJISFwiLFwibW1cIl0pLFwiSEg6bW1cIiksd2VlazokYShcIndlZWtcIixaYixmdW5jdGlvbihhKXtpZihkYShhKSlyZXR1cm4gYTtpZihHKGEpKXtaYi5sYXN0SW5kZXg9MDt2YXIgYz1aYi5leGVjKGEpO2lmKGMpe2E9K2NbMV07dmFyIGQ9K2NbMl0sYz1YYyhhKSxkPTcqKGQtMSk7cmV0dXJuIG5ldyBEYXRlKGEsMCxjLmdldERhdGUoKStkKX19cmV0dXJuIE5hTn0sXCJ5eXl5LVd3d1wiKSxtb250aDokYShcIm1vbnRoXCIsZWQsQmIoZWQsW1wieXl5eVwiLFwiTU1cIl0pLFwieXl5eS1NTVwiKSxudW1iZXI6ZnVuY3Rpb24oYSxcbmMsZCxlLGYsaCl7WmEoYSxjLGQsZSxmLGgpO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXt2YXIgYz1lLiRpc0VtcHR5KGEpO2lmKGN8fHJmLnRlc3QoYSkpcmV0dXJuIGUuJHNldFZhbGlkaXR5KFwibnVtYmVyXCIsITApLFwiXCI9PT1hP251bGw6Yz9hOnBhcnNlRmxvYXQoYSk7ZS4kc2V0VmFsaWRpdHkoXCJudW1iZXJcIiwhMSk7cmV0dXJuIHR9KTtmZihlLFwibnVtYmVyXCIsdGYsbnVsbCxlLiQkdmFsaWRpdHlTdGF0ZSk7ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpP1wiXCI6XCJcIithfSk7ZC5taW4mJihhPWZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlRmxvYXQoZC5taW4pO3JldHVybiBYYihlLFwibWluXCIsZS4kaXNFbXB0eShhKXx8YT49YyxhKX0sZS4kcGFyc2Vycy5wdXNoKGEpLGUuJGZvcm1hdHRlcnMucHVzaChhKSk7ZC5tYXgmJihhPWZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlRmxvYXQoZC5tYXgpO3JldHVybiBYYihlLFwibWF4XCIsZS4kaXNFbXB0eShhKXx8XG5hPD1jLGEpfSxlLiRwYXJzZXJzLnB1c2goYSksZS4kZm9ybWF0dGVycy5wdXNoKGEpKTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIFhiKGUsXCJudW1iZXJcIixlLiRpc0VtcHR5KGEpfHxDYShhKSxhKX0pfSx1cmw6ZnVuY3Rpb24oYSxjLGQsZSxmLGgpe1phKGEsYyxkLGUsZixoKTtlLiR2YWxpZGF0b3JzLnVybD1mdW5jdGlvbihhLGMpe3ZhciBkPWF8fGM7cmV0dXJuIGUuJGlzRW1wdHkoZCl8fHBmLnRlc3QoZCl9fSxlbWFpbDpmdW5jdGlvbihhLGMsZCxlLGYsaCl7WmEoYSxjLGQsZSxmLGgpO2UuJHZhbGlkYXRvcnMuZW1haWw9ZnVuY3Rpb24oYSxjKXt2YXIgZD1hfHxjO3JldHVybiBlLiRpc0VtcHR5KGQpfHxxZi50ZXN0KGQpfX0scmFkaW86ZnVuY3Rpb24oYSxjLGQsZSl7RihkLm5hbWUpJiZjLmF0dHIoXCJuYW1lXCIsKytjYik7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oZil7Y1swXS5jaGVja2VkJiZhLiRhcHBseShmdW5jdGlvbigpe2UuJHNldFZpZXdWYWx1ZShkLnZhbHVlLFxuZiYmZi50eXBlKX0pfSk7ZS4kcmVuZGVyPWZ1bmN0aW9uKCl7Y1swXS5jaGVja2VkPWQudmFsdWU9PWUuJHZpZXdWYWx1ZX07ZC4kb2JzZXJ2ZShcInZhbHVlXCIsZS4kcmVuZGVyKX0sY2hlY2tib3g6ZnVuY3Rpb24oYSxjLGQsZSxmLGgsZyxuKXt2YXIgbD1hZChuLGEsXCJuZ1RydWVWYWx1ZVwiLGQubmdUcnVlVmFsdWUsITApLG09YWQobixhLFwibmdGYWxzZVZhbHVlXCIsZC5uZ0ZhbHNlVmFsdWUsITEpO2Mub24oXCJjbGlja1wiLGZ1bmN0aW9uKGQpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7ZS4kc2V0Vmlld1ZhbHVlKGNbMF0uY2hlY2tlZCxkJiZkLnR5cGUpfSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZS4kdmlld1ZhbHVlfTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiBhIT09bH07ZS4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiByYShhLGwpfSk7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBhP2w6bX0pfSxoaWRkZW46QixcbmJ1dHRvbjpCLHN1Ym1pdDpCLHJlc2V0OkIsZmlsZTpCfSx0Zj1bXCJiYWRJbnB1dFwiXSxqYz1bXCIkYnJvd3NlclwiLFwiJHNuaWZmZXJcIixcIiRmaWx0ZXJcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcIj9uZ01vZGVsXCJdLGxpbms6ZnVuY3Rpb24oZixoLGcsbil7blswXSYmKGdkW0ooZy50eXBlKV18fGdkLnRleHQpKGYsaCxnLG5bMF0sYyxhLGQsZSl9fX1dLHliPVwibmctdmFsaWRcIix4Yj1cIm5nLWludmFsaWRcIixLYT1cIm5nLXByaXN0aW5lXCIsQWI9XCJuZy1kaXJ0eVwiLHVmPVtcIiRzY29wZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRhdHRyc1wiLFwiJGVsZW1lbnRcIixcIiRwYXJzZVwiLFwiJGFuaW1hdGVcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxjLGQsZSxmLGgsZyl7ZnVuY3Rpb24gbihhLGMpe2M9Yz9cIi1cIitnYihjLFwiLVwiKTpcIlwiO2gucmVtb3ZlQ2xhc3MoZSwoYT94Yjp5YikrYyk7aC5hZGRDbGFzcyhlLChhP3liOnhiKStjKX10aGlzLiRtb2RlbFZhbHVlPVxudGhpcy4kdmlld1ZhbHVlPU51bWJlci5OYU47dGhpcy4kdmFsaWRhdG9ycz17fTt0aGlzLiRwYXJzZXJzPVtdO3RoaXMuJGZvcm1hdHRlcnM9W107dGhpcy4kdmlld0NoYW5nZUxpc3RlbmVycz1bXTt0aGlzLiR1bnRvdWNoZWQ9ITA7dGhpcy4kdG91Y2hlZD0hMTt0aGlzLiRwcmlzdGluZT0hMDt0aGlzLiRkaXJ0eT0hMTt0aGlzLiR2YWxpZD0hMDt0aGlzLiRpbnZhbGlkPSExO3RoaXMuJG5hbWU9ZC5uYW1lO3ZhciBsPWYoZC5uZ01vZGVsKSxtPWwuYXNzaWduLHA9bnVsbCxrPXRoaXM7aWYoIW0pdGhyb3cgTyhcIm5nTW9kZWxcIikoXCJub25hc3NpZ25cIixkLm5nTW9kZWwsZ2EoZSkpO3RoaXMuJHJlbmRlcj1CO3RoaXMuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIEYoYSl8fFwiXCI9PT1hfHxudWxsPT09YXx8YSE9PWF9O3ZhciBzPWUuaW5oZXJpdGVkRGF0YShcIiRmb3JtQ29udHJvbGxlclwiKXx8emIscj0wLEw9dGhpcy4kZXJyb3I9e307ZS5hZGRDbGFzcyhLYSkuYWRkQ2xhc3MoXCJuZy11bnRvdWNoZWRcIik7XG5uKCEwKTt0aGlzLiRzZXRWYWxpZGl0eT1mdW5jdGlvbihhLGMpe0xbYV0hPT0hYyYmKGM/KExbYV0mJnItLSxyfHwobighMCksay4kdmFsaWQ9ITAsay4kaW52YWxpZD0hMSkpOihuKCExKSxrLiRpbnZhbGlkPSEwLGsuJHZhbGlkPSExLHIrKyksTFthXT0hYyxuKGMsYSkscy4kc2V0VmFsaWRpdHkoYSxjLGspKX07dGhpcy4kc2V0UHJpc3RpbmU9ZnVuY3Rpb24oKXtrLiRkaXJ0eT0hMTtrLiRwcmlzdGluZT0hMDtoLnJlbW92ZUNsYXNzKGUsQWIpO2guYWRkQ2xhc3MoZSxLYSl9O3RoaXMuJHNldFVudG91Y2hlZD1mdW5jdGlvbigpe2suJHRvdWNoZWQ9ITE7ay4kdW50b3VjaGVkPSEwO2guc2V0Q2xhc3MoZSxcIm5nLXVudG91Y2hlZFwiLFwibmctdG91Y2hlZFwiKX07dGhpcy4kc2V0VG91Y2hlZD1mdW5jdGlvbigpe2suJHRvdWNoZWQ9ITA7ay4kdW50b3VjaGVkPSExO2guc2V0Q2xhc3MoZSxcIm5nLXRvdWNoZWRcIixcIm5nLXVudG91Y2hlZFwiKX07dGhpcy4kcm9sbGJhY2tWaWV3VmFsdWU9ZnVuY3Rpb24oKXtnLmNhbmNlbChwKTtcbmsuJHZpZXdWYWx1ZT1rLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZTtrLiRyZW5kZXIoKX07dGhpcy4kdmFsaWRhdGU9ZnVuY3Rpb24oKXtpZihrLiRtb2RlbFZhbHVlPT09ay4kbW9kZWxWYWx1ZSl7dmFyIGE9ay4kbW9kZWxWYWx1ZTtrLiQkcnVuVmFsaWRhdG9ycyhrLiQkaW52YWxpZE1vZGVsVmFsdWV8fGsuJG1vZGVsVmFsdWUsay4kdmlld1ZhbHVlKTthIT09ay4kbW9kZWxWYWx1ZSYmay4kJHdyaXRlTW9kZWxUb1Njb3BlKCl9fTt0aGlzLiQkcnVuVmFsaWRhdG9ycz1mdW5jdGlvbihhLGMpe3Eoay4kdmFsaWRhdG9ycyxmdW5jdGlvbihkLGUpe2suJHNldFZhbGlkaXR5KGUsZChhLGMpKX0pO2suJG1vZGVsVmFsdWU9ay4kdmFsaWQ/YTp0O2suJCRpbnZhbGlkTW9kZWxWYWx1ZT1rLiR2YWxpZD90OmF9O3RoaXMuJGNvbW1pdFZpZXdWYWx1ZT1mdW5jdGlvbihhKXt2YXIgYz1rLiR2aWV3VmFsdWU7Zy5jYW5jZWwocCk7aWYoYXx8ay4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWUhPT1cbmMpe2suJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlPWM7ay4kcHJpc3RpbmUmJihrLiRkaXJ0eT0hMCxrLiRwcmlzdGluZT0hMSxoLnJlbW92ZUNsYXNzKGUsS2EpLGguYWRkQ2xhc3MoZSxBYikscy4kc2V0RGlydHkoKSk7dmFyIGQ9YztxKGsuJHBhcnNlcnMsZnVuY3Rpb24oYSl7ZD1hKGQpfSk7ay4kbW9kZWxWYWx1ZT09PWR8fCFGKGsuJCRpbnZhbGlkTW9kZWxWYWx1ZSkmJmsuJCRpbnZhbGlkTW9kZWxWYWx1ZT09ZHx8KGsuJCRydW5WYWxpZGF0b3JzKGQsYyksay4kJHdyaXRlTW9kZWxUb1Njb3BlKCkpfX07dGhpcy4kJHdyaXRlTW9kZWxUb1Njb3BlPWZ1bmN0aW9uKCl7dmFyIGQ7ay4kb3B0aW9ucyYmay4kb3B0aW9ucy5nZXR0ZXJTZXR0ZXImJkEoZD1sKGEpKT9kKGsuJG1vZGVsVmFsdWUpOm0oYSxrLiRtb2RlbFZhbHVlKTtxKGsuJHZpZXdDaGFuZ2VMaXN0ZW5lcnMsZnVuY3Rpb24oYSl7dHJ5e2EoKX1jYXRjaChkKXtjKGQpfX0pfTt0aGlzLiRzZXRWaWV3VmFsdWU9ZnVuY3Rpb24oYSxcbmMsZCl7ay4kdmlld1ZhbHVlPWE7ay4kb3B0aW9ucyYmIWsuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0fHxrLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoYyxkKX07dGhpcy4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0PWZ1bmN0aW9uKGEsYyl7dmFyIGQ9MCxlPWsuJG9wdGlvbnM7ZSYmdihlLmRlYm91bmNlKSYmKGU9ZS5kZWJvdW5jZSxDYShlKT9kPWU6Q2EoZVthXSk/ZD1lW2FdOkNhKGVbXCJkZWZhdWx0XCJdKSYmKGQ9ZVtcImRlZmF1bHRcIl0pKTtnLmNhbmNlbChwKTtkP3A9ZyhmdW5jdGlvbigpe2suJGNvbW1pdFZpZXdWYWx1ZShjKX0sZCk6ay4kY29tbWl0Vmlld1ZhbHVlKGMpfTthLiR3YXRjaChmdW5jdGlvbigpe3ZhciBjPWwoYSk7ay4kb3B0aW9ucyYmKGsuJG9wdGlvbnMuZ2V0dGVyU2V0dGVyJiZBKGMpKSYmKGM9YygpKTtpZihrLiRtb2RlbFZhbHVlIT09YyYmKEYoay4kJGludmFsaWRNb2RlbFZhbHVlKXx8ay4kJGludmFsaWRNb2RlbFZhbHVlIT1jKSl7Zm9yKHZhciBkPVxuay4kZm9ybWF0dGVycyxlPWQubGVuZ3RoLGY9YztlLS07KWY9ZFtlXShmKTtrLiQkcnVuVmFsaWRhdG9ycyhjLGYpO2suJHZpZXdWYWx1ZSE9PWYmJihrLiR2aWV3VmFsdWU9ay4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU9ZixrLiRyZW5kZXIoKSl9cmV0dXJuIGN9KX1dLFpkPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6W1wibmdNb2RlbFwiLFwiXj9mb3JtXCIsXCJeP25nTW9kZWxPcHRpb25zXCJdLGNvbnRyb2xsZXI6dWYsbGluazp7cHJlOmZ1bmN0aW9uKGEsYyxkLGUpe2VbMl0mJihlWzBdLiRvcHRpb25zPWVbMl0uJG9wdGlvbnMpO3ZhciBmPWVbMF0saD1lWzFdfHx6YjtoLiRhZGRDb250cm9sKGYpO2EuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2guJHJlbW92ZUNvbnRyb2woZil9KX0scG9zdDpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1lWzBdO2lmKGYuJG9wdGlvbnMmJmYuJG9wdGlvbnMudXBkYXRlT24pYy5vbihmLiRvcHRpb25zLnVwZGF0ZU9uLGZ1bmN0aW9uKGMpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7Zi4kJGRlYm91bmNlVmlld1ZhbHVlQ29tbWl0KGMmJlxuYy50eXBlKX0pfSk7Yy5vbihcImJsdXJcIixmdW5jdGlvbihjKXthLiRhcHBseShmdW5jdGlvbigpe2YuJHNldFRvdWNoZWQoKX0pfSl9fX19LGFlPWJhKHtyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7ZS4kdmlld0NoYW5nZUxpc3RlbmVycy5wdXNoKGZ1bmN0aW9uKCl7YS4kZXZhbChkLm5nQ2hhbmdlKX0pfX0pLGxjPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7ZSYmKGQucmVxdWlyZWQ9ITAsZS4kdmFsaWRhdG9ycy5yZXF1aXJlZD1mdW5jdGlvbihhLGMpe3JldHVybiFkLnJlcXVpcmVkfHwhZS4kaXNFbXB0eShjKX0sZC4kb2JzZXJ2ZShcInJlcXVpcmVkXCIsZnVuY3Rpb24oKXtlLiR2YWxpZGF0ZSgpfSkpfX19LGtjPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGYsaD1kLm5nUGF0dGVybnx8ZC5wYXR0ZXJuO2QuJG9ic2VydmUoXCJwYXR0ZXJuXCIsXG5mdW5jdGlvbihhKXtHKGEpJiYwPGEubGVuZ3RoJiYoYT1SZWdFeHAoYSkpO2lmKGEmJiFhLnRlc3QpdGhyb3cgTyhcIm5nUGF0dGVyblwiKShcIm5vcmVnZXhwXCIsaCxhLGdhKGMpKTtmPWF8fHQ7ZS4kdmFsaWRhdGUoKX0pO2UuJHZhbGlkYXRvcnMucGF0dGVybj1mdW5jdGlvbihhKXtyZXR1cm4gZS4kaXNFbXB0eShhKXx8RihmKXx8Zi50ZXN0KGEpfX19fX0sbmM9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXt2YXIgZj0wO2QuJG9ic2VydmUoXCJtYXhsZW5ndGhcIixmdW5jdGlvbihhKXtmPVUoYSl8fDA7ZS4kdmFsaWRhdGUoKX0pO2UuJHZhbGlkYXRvcnMubWF4bGVuZ3RoPWZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHxhLmxlbmd0aDw9Zn19fX19LG1jPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCI/bmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSl7aWYoZSl7dmFyIGY9MDtkLiRvYnNlcnZlKFwibWlubGVuZ3RoXCIsXG5mdW5jdGlvbihhKXtmPVUoYSl8fDA7ZS4kdmFsaWRhdGUoKX0pO2UuJHZhbGlkYXRvcnMubWlubGVuZ3RoPWZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHxhLmxlbmd0aD49Zn19fX19LCRkPWZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXt2YXIgZj1jLmF0dHIoZC4kYXR0ci5uZ0xpc3QpfHxcIiwgXCIsaD1cImZhbHNlXCIhPT1kLm5nVHJpbSxnPWg/WihmKTpmO2UuJHBhcnNlcnMucHVzaChmdW5jdGlvbihhKXtpZighRihhKSl7dmFyIGM9W107YSYmcShhLnNwbGl0KGcpLGZ1bmN0aW9uKGEpe2EmJmMucHVzaChoP1ooYSk6YSl9KTtyZXR1cm4gY319KTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIE0oYSk/YS5qb2luKGYpOnR9KTtlLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwhYS5sZW5ndGh9fX19LHZmPS9eKHRydWV8ZmFsc2V8XFxkKykkLyxiZT1mdW5jdGlvbigpe3JldHVybntwcmlvcml0eToxMDAsXG5jb21waWxlOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIHZmLnRlc3QoYy5uZ1ZhbHVlKT9mdW5jdGlvbihhLGMsZil7Zi4kc2V0KFwidmFsdWVcIixhLiRldmFsKGYubmdWYWx1ZSkpfTpmdW5jdGlvbihhLGMsZil7YS4kd2F0Y2goZi5uZ1ZhbHVlLGZ1bmN0aW9uKGEpe2YuJHNldChcInZhbHVlXCIsYSl9KX19fX0sY2U9ZnVuY3Rpb24oKXtyZXR1cm57Y29udHJvbGxlcjpbXCIkc2NvcGVcIixcIiRhdHRyc1wiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9dGhpczt0aGlzLiRvcHRpb25zPWEuJGV2YWwoYy5uZ01vZGVsT3B0aW9ucyk7dGhpcy4kb3B0aW9ucy51cGRhdGVPbiE9PXQ/KHRoaXMuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PSExLHRoaXMuJG9wdGlvbnMudXBkYXRlT249Wih0aGlzLiRvcHRpb25zLnVwZGF0ZU9uLnJlcGxhY2Uoc2YsZnVuY3Rpb24oKXtkLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMDtyZXR1cm5cIiBcIn0pKSk6dGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITB9XX19LENkPVxueGEoe2NvbXBpbGU6ZnVuY3Rpb24oYSl7YS5hZGRDbGFzcyhcIm5nLWJpbmRpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKGEsZCxlKXtkLmRhdGEoXCIkYmluZGluZ1wiLGUubmdCaW5kKTthLiR3YXRjaChlLm5nQmluZCxmdW5jdGlvbihhKXtkLnRleHQoYT09dD9cIlwiOmEpfSl9fX0pLEVkPVtcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yz1hKGQuYXR0cihlLiRhdHRyLm5nQmluZFRlbXBsYXRlKSk7ZC5hZGRDbGFzcyhcIm5nLWJpbmRpbmdcIikuZGF0YShcIiRiaW5kaW5nXCIsYyk7ZS4kb2JzZXJ2ZShcIm5nQmluZFRlbXBsYXRlXCIsZnVuY3Rpb24oYSl7ZC50ZXh0KGEpfSl9fV0sRGQ9W1wiJHNjZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjKXtyZXR1cm57Y29tcGlsZTpmdW5jdGlvbihkLGUpe2QuYWRkQ2xhc3MoXCJuZy1iaW5kaW5nXCIpO3JldHVybiBmdW5jdGlvbihkLGUsZyl7ZS5kYXRhKFwiJGJpbmRpbmdcIixnLm5nQmluZEh0bWwpO3ZhciBuPWMoZy5uZ0JpbmRIdG1sKTtcbmc9YyhnLm5nQmluZEh0bWwsZnVuY3Rpb24oYSl7cmV0dXJuKGF8fFwiXCIpLnRvU3RyaW5nKCl9KTtkLiR3YXRjaChnLGZ1bmN0aW9uKCl7ZS5odG1sKGEuZ2V0VHJ1c3RlZEh0bWwobihkKSl8fFwiXCIpfSl9fX19XSxGZD1ZYihcIlwiLCEwKSxIZD1ZYihcIk9kZFwiLDApLEdkPVliKFwiRXZlblwiLDEpLElkPXhhKHtjb21waWxlOmZ1bmN0aW9uKGEsYyl7Yy4kc2V0KFwibmdDbG9ha1wiLHQpO2EucmVtb3ZlQ2xhc3MoXCJuZy1jbG9ha1wiKX19KSxKZD1bZnVuY3Rpb24oKXtyZXR1cm57c2NvcGU6ITAsY29udHJvbGxlcjpcIkBcIixwcmlvcml0eTo1MDB9fV0sb2M9e307cShcImNsaWNrIGRibGNsaWNrIG1vdXNlZG93biBtb3VzZXVwIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZW1vdmUgbW91c2VlbnRlciBtb3VzZWxlYXZlIGtleWRvd24ga2V5dXAga2V5cHJlc3Mgc3VibWl0IGZvY3VzIGJsdXIgY29weSBjdXQgcGFzdGVcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7dmFyIGM9b2EoXCJuZy1cIithKTtvY1tjXT1cbltcIiRwYXJzZVwiLGZ1bmN0aW9uKGQpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGUsZil7dmFyIGg9ZChmW2NdKTtyZXR1cm4gZnVuY3Rpb24oYyxkKXtkLm9uKEooYSksZnVuY3Rpb24oYSl7Yy4kYXBwbHkoZnVuY3Rpb24oKXtoKGMseyRldmVudDphfSl9KX0pfX19fV19KTt2YXIgTWQ9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6NjAwLHRlcm1pbmFsOiEwLHJlc3RyaWN0OlwiQVwiLCQkdGxiOiEwLGxpbms6ZnVuY3Rpb24oYyxkLGUsZixoKXt2YXIgZyxuLGw7Yy4kd2F0Y2goZS5uZ0lmLGZ1bmN0aW9uKGMpe2M/bnx8aChmdW5jdGlvbihjLGYpe249ZjtjW2MubGVuZ3RoKytdPVcuY3JlYXRlQ29tbWVudChcIiBlbmQgbmdJZjogXCIrZS5uZ0lmK1wiIFwiKTtnPXtjbG9uZTpjfTthLmVudGVyKGMsZC5wYXJlbnQoKSxkKX0pOihsJiYobC5yZW1vdmUoKSxsPW51bGwpLG4mJihuLiRkZXN0cm95KCksbj1cbm51bGwpLGcmJihsPWhiKGcuY2xvbmUpLGEubGVhdmUobCxmdW5jdGlvbigpe2w9bnVsbH0pLGc9bnVsbCkpfSl9fX1dLE5kPVtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGFuY2hvclNjcm9sbFwiLFwiJGFuaW1hdGVcIixcIiRzY2VcIixmdW5jdGlvbihhLGMsZCxlLGYpe3JldHVybntyZXN0cmljdDpcIkVDQVwiLHByaW9yaXR5OjQwMCx0ZXJtaW5hbDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLGNvbnRyb2xsZXI6T2Eubm9vcCxjb21waWxlOmZ1bmN0aW9uKGgsZyl7dmFyIG49Zy5uZ0luY2x1ZGV8fGcuc3JjLGw9Zy5vbmxvYWR8fFwiXCIsbT1nLmF1dG9zY3JvbGw7cmV0dXJuIGZ1bmN0aW9uKGcsaCxxLHIsTCl7dmFyIHU9MCx0LHcseCx5PWZ1bmN0aW9uKCl7dyYmKHcucmVtb3ZlKCksdz1udWxsKTt0JiYodC4kZGVzdHJveSgpLHQ9bnVsbCk7eCYmKGUubGVhdmUoeCxmdW5jdGlvbigpe3c9bnVsbH0pLHc9eCx4PW51bGwpfTtnLiR3YXRjaChmLnBhcnNlQXNSZXNvdXJjZVVybChuKSxmdW5jdGlvbihmKXt2YXIgbj1cbmZ1bmN0aW9uKCl7IXYobSl8fG0mJiFnLiRldmFsKG0pfHxkKCl9LHE9Kyt1O2Y/KGEuZ2V0KGYse2NhY2hlOmN9KS5zdWNjZXNzKGZ1bmN0aW9uKGEpe2lmKHE9PT11KXt2YXIgYz1nLiRuZXcoKTtyLnRlbXBsYXRlPWE7YT1MKGMsZnVuY3Rpb24oYSl7eSgpO2UuZW50ZXIoYSxudWxsLGgsbil9KTt0PWM7eD1hO3QuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRMb2FkZWRcIik7Zy4kZXZhbChsKX19KS5lcnJvcihmdW5jdGlvbigpe3E9PT11JiYoeSgpLGcuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRFcnJvclwiKSl9KSxnLiRlbWl0KFwiJGluY2x1ZGVDb250ZW50UmVxdWVzdGVkXCIpKTooeSgpLHIudGVtcGxhdGU9bnVsbCl9KX19fX1dLGRlPVtcIiRjb21waWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6LTQwMCxyZXF1aXJlOlwibmdJbmNsdWRlXCIsbGluazpmdW5jdGlvbihjLGQsZSxmKXtkLmh0bWwoZi50ZW1wbGF0ZSk7YShkLmNvbnRlbnRzKCkpKGMpfX19XSxcbk9kPXhhKHtwcmlvcml0eTo0NTAsY29tcGlsZTpmdW5jdGlvbigpe3JldHVybntwcmU6ZnVuY3Rpb24oYSxjLGQpe2EuJGV2YWwoZC5uZ0luaXQpfX19fSksUGQ9eGEoe3Rlcm1pbmFsOiEwLHByaW9yaXR5OjFFM30pLFFkPVtcIiRsb2NhbGVcIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9L3t9L2c7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixsaW5rOmZ1bmN0aW9uKGUsZixoKXt2YXIgZz1oLmNvdW50LG49aC4kYXR0ci53aGVuJiZmLmF0dHIoaC4kYXR0ci53aGVuKSxsPWgub2Zmc2V0fHwwLG09ZS4kZXZhbChuKXx8e30scD17fSxrPWMuc3RhcnRTeW1ib2woKSxzPWMuZW5kU3ltYm9sKCkscj0vXndoZW4oTWludXMpPyguKykkLztxKGgsZnVuY3Rpb24oYSxjKXtyLnRlc3QoYykmJihtW0ooYy5yZXBsYWNlKFwid2hlblwiLFwiXCIpLnJlcGxhY2UoXCJNaW51c1wiLFwiLVwiKSldPWYuYXR0cihoLiRhdHRyW2NdKSl9KTtxKG0sZnVuY3Rpb24oYSxlKXtwW2VdPWMoYS5yZXBsYWNlKGQsXG5rK2crXCItXCIrbCtzKSl9KTtlLiR3YXRjaChmdW5jdGlvbigpe3ZhciBjPXBhcnNlRmxvYXQoZS4kZXZhbChnKSk7aWYoaXNOYU4oYykpcmV0dXJuXCJcIjtjIGluIG18fChjPWEucGx1cmFsQ2F0KGMtbCkpO3JldHVybiBwW2NdKGUpfSxmdW5jdGlvbihhKXtmLnRleHQoYSl9KX19fV0sUmQ9W1wiJHBhcnNlXCIsXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9TyhcIm5nUmVwZWF0XCIpO3JldHVybnttdWx0aUVsZW1lbnQ6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxRTMsdGVybWluYWw6ITAsJCR0bGI6ITAsbGluazpmdW5jdGlvbihlLGYsaCxnLG4pe3ZhciBsPWgubmdSZXBlYXQsbT1sLm1hdGNoKC9eXFxzKihbXFxzXFxTXSs/KVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT9cXHMqJC8pLHAsayxzLHIsdCx1LHY9eyRpZDpHYX07aWYoIW0pdGhyb3cgZChcImlleHBcIixsKTtoPW1bMV07Zz1tWzJdOyhtPW1bM10pPyhwPWEobSksaz1mdW5jdGlvbihhLFxuYyxkKXt1JiYodlt1XT1hKTt2W3RdPWM7di4kaW5kZXg9ZDtyZXR1cm4gcChlLHYpfSk6KHM9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gR2EoYyl9LHI9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9KTttPWgubWF0Y2goL14oPzooW1xcJFxcd10rKXxcXCgoW1xcJFxcd10rKVxccyosXFxzKihbXFwkXFx3XSspXFwpKSQvKTtpZighbSl0aHJvdyBkKFwiaWlkZXhwXCIsaCk7dD1tWzNdfHxtWzFdO3U9bVsyXTt2YXIgdz17fTtlLiR3YXRjaENvbGxlY3Rpb24oZyxmdW5jdGlvbihhKXt2YXIgZSxnLGg9ZlswXSxtLHA9e30sdixELEUsQixGLEcsQSxLPVtdLE09ZnVuY3Rpb24oYSxjKXthW3RdPUU7dSYmKGFbdV09RCk7YS4kaW5kZXg9YzthLiRmaXJzdD0wPT09YzthLiRsYXN0PWM9PT12LTE7YS4kbWlkZGxlPSEoYS4kZmlyc3R8fGEuJGxhc3QpO2EuJG9kZD0hKGEuJGV2ZW49MD09PShjJjEpKX07aWYoYmIoYSkpRz1hLEY9a3x8cztlbHNle0Y9a3x8cjtHPVtdO2ZvcihnIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShnKSYmXG5cIiRcIiE9Zy5jaGFyQXQoMCkmJkcucHVzaChnKTtHLnNvcnQoKX12PUcubGVuZ3RoO2c9Sy5sZW5ndGg9Ry5sZW5ndGg7Zm9yKGU9MDtlPGc7ZSsrKWlmKEQ9YT09PUc/ZTpHW2VdLEU9YVtEXSxCPUYoRCxFLGUpLEFhKEIsXCJgdHJhY2sgYnlgIGlkXCIpLHcuaGFzT3duUHJvcGVydHkoQikpQT13W0JdLGRlbGV0ZSB3W0JdLHBbQl09QSxLW2VdPUE7ZWxzZXtpZihwLmhhc093blByb3BlcnR5KEIpKXRocm93IHEoSyxmdW5jdGlvbihhKXthJiZhLnNjb3BlJiYod1thLmlkXT1hKX0pLGQoXCJkdXBlc1wiLGwsQik7S1tlXT17aWQ6Qn07cFtCXT0hMX1mb3IobSBpbiB3KXcuaGFzT3duUHJvcGVydHkobSkmJihBPXdbbV0sZz1oYihBLmNsb25lKSxjLmxlYXZlKGcpLHEoZyxmdW5jdGlvbihhKXthLiQkTkdfUkVNT1ZFRD0hMH0pLEEuc2NvcGUuJGRlc3Ryb3koKSk7ZT0wO2ZvcihnPUcubGVuZ3RoO2U8ZztlKyspaWYoRD1hPT09Rz9lOkdbZV0sRT1hW0RdLEE9S1tlXSxLW2UtMV0mJihoPUtbZS1cbjFdLmNsb25lW0tbZS0xXS5jbG9uZS5sZW5ndGgtMV0pLEEuc2NvcGUpe209aDtkbyBtPW0ubmV4dFNpYmxpbmc7d2hpbGUobSYmbS4kJE5HX1JFTU9WRUQpO0EuY2xvbmVbMF0hPW0mJmMubW92ZShoYihBLmNsb25lKSxudWxsLHooaCkpO2g9QS5jbG9uZVtBLmNsb25lLmxlbmd0aC0xXTtNKEEuc2NvcGUsZSl9ZWxzZSBuKGZ1bmN0aW9uKGEsZCl7QS5zY29wZT1kO2FbYS5sZW5ndGgrK109Vy5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1JlcGVhdDogXCIrbCtcIiBcIik7Yy5lbnRlcihhLG51bGwseihoKSk7aD1hO0EuY2xvbmU9YTtwW0EuaWRdPUE7TShBLnNjb3BlLGUpfSk7dz1wfSl9fX1dLFNkPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue211bHRpRWxlbWVudDohMCxsaW5rOmZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nU2hvdyxmdW5jdGlvbihjKXthW2M/XCJyZW1vdmVDbGFzc1wiOlwiYWRkQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIil9KX19fV0sTGQ9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLFxubGluazpmdW5jdGlvbihjLGQsZSl7Yy4kd2F0Y2goZS5uZ0hpZGUsZnVuY3Rpb24oYyl7YVtjP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKGQsXCJuZy1oaWRlXCIpfSl9fX1dLFRkPXhhKGZ1bmN0aW9uKGEsYyxkKXthLiR3YXRjaChkLm5nU3R5bGUsZnVuY3Rpb24oYSxkKXtkJiZhIT09ZCYmcShkLGZ1bmN0aW9uKGEsZCl7Yy5jc3MoZCxcIlwiKX0pO2EmJmMuY3NzKGEpfSwhMCl9KSxVZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpcIm5nU3dpdGNoXCIsY29udHJvbGxlcjpbXCIkc2NvcGVcIixmdW5jdGlvbigpe3RoaXMuY2FzZXM9e319XSxsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe3ZhciBoPVtdLGc9W10sbj1bXSxsPVtdO2MuJHdhdGNoKGUubmdTd2l0Y2h8fGUub24sZnVuY3Rpb24oZCl7dmFyIHAsaztwPTA7Zm9yKGs9bi5sZW5ndGg7cDxrOysrcCluW3BdLnJlbW92ZSgpO3A9bi5sZW5ndGg9MDtmb3Ioaz1sLmxlbmd0aDtwPGs7KytwKXt2YXIgcz1cbmhiKGdbcF0uY2xvbmUpO2xbcF0uJGRlc3Ryb3koKTtuW3BdPXM7YS5sZWF2ZShzLGZ1bmN0aW9uKCl7bi5zcGxpY2UocCwxKX0pfWcubGVuZ3RoPTA7bC5sZW5ndGg9MDtpZihoPWYuY2FzZXNbXCIhXCIrZF18fGYuY2FzZXNbXCI/XCJdKWMuJGV2YWwoZS5jaGFuZ2UpLHEoaCxmdW5jdGlvbihjKXtjLnRyYW5zY2x1ZGUoZnVuY3Rpb24oZCxlKXtsLnB1c2goZSk7dmFyIGY9Yy5lbGVtZW50O2RbZC5sZW5ndGgrK109Vy5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ1N3aXRjaFdoZW46IFwiKTtnLnB1c2goe2Nsb25lOmR9KTthLmVudGVyKGQsZi5wYXJlbnQoKSxmKX0pfSl9KX19fV0sVmQ9eGEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXT1lLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXXx8W107ZS5jYXNlc1tcIiFcIitkLm5nU3dpdGNoV2hlbl0ucHVzaCh7dHJhbnNjbHVkZTpmLFxuZWxlbWVudDpjfSl9fSksV2Q9eGEoe3RyYW5zY2x1ZGU6XCJlbGVtZW50XCIscHJpb3JpdHk6MTIwMCxyZXF1aXJlOlwiXm5nU3dpdGNoXCIsbXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtlLmNhc2VzW1wiP1wiXT1lLmNhc2VzW1wiP1wiXXx8W107ZS5jYXNlc1tcIj9cIl0ucHVzaCh7dHJhbnNjbHVkZTpmLGVsZW1lbnQ6Y30pfX0pLFlkPXhhKHtyZXN0cmljdDpcIkVBQ1wiLGxpbms6ZnVuY3Rpb24oYSxjLGQsZSxmKXtpZighZil0aHJvdyBPKFwibmdUcmFuc2NsdWRlXCIpKFwib3JwaGFuXCIsZ2EoYykpO2YoZnVuY3Rpb24oYSl7Yy5lbXB0eSgpO2MuYXBwZW5kKGEpfSl9fSkseWQ9W1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFXCIsdGVybWluYWw6ITAsY29tcGlsZTpmdW5jdGlvbihjLGQpe1widGV4dC9uZy10ZW1wbGF0ZVwiPT1kLnR5cGUmJmEucHV0KGQuaWQsY1swXS50ZXh0KX19fV0sd2Y9TyhcIm5nT3B0aW9uc1wiKSxYZD1iYSh7dGVybWluYWw6ITB9KSxcbnpkPVtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMpe3ZhciBkPS9eXFxzKihbXFxzXFxTXSs/KSg/Olxccythc1xccysoW1xcc1xcU10rPykpPyg/Olxccytncm91cFxccytieVxccysoW1xcc1xcU10rPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd10qKXwoPzpcXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpKSlcXHMraW5cXHMrKFtcXHNcXFNdKz8pKD86XFxzK3RyYWNrXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/JC8sZT17JHNldFZpZXdWYWx1ZTpCfTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscmVxdWlyZTpbXCJzZWxlY3RcIixcIj9uZ01vZGVsXCJdLGNvbnRyb2xsZXI6W1wiJGVsZW1lbnRcIixcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjLGQpe3ZhciBuPXRoaXMsbD17fSxtPWUscDtuLmRhdGFib3VuZD1kLm5nTW9kZWw7bi5pbml0PWZ1bmN0aW9uKGEsYyxkKXttPWE7cD1kfTtuLmFkZE9wdGlvbj1mdW5jdGlvbihjLGQpe0FhKGMsJ1wib3B0aW9uIHZhbHVlXCInKTtsW2NdPVxuITA7bS4kdmlld1ZhbHVlPT1jJiYoYS52YWwoYykscC5wYXJlbnQoKSYmcC5yZW1vdmUoKSk7ZFswXS5oYXNBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiKSYmKGRbMF0uc2VsZWN0ZWQ9ITApfTtuLnJlbW92ZU9wdGlvbj1mdW5jdGlvbihhKXt0aGlzLmhhc09wdGlvbihhKSYmKGRlbGV0ZSBsW2FdLG0uJHZpZXdWYWx1ZT09YSYmdGhpcy5yZW5kZXJVbmtub3duT3B0aW9uKGEpKX07bi5yZW5kZXJVbmtub3duT3B0aW9uPWZ1bmN0aW9uKGMpe2M9XCI/IFwiK0dhKGMpK1wiID9cIjtwLnZhbChjKTthLnByZXBlbmQocCk7YS52YWwoYyk7cC5wcm9wKFwic2VsZWN0ZWRcIiwhMCl9O24uaGFzT3B0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBsLmhhc093blByb3BlcnR5KGEpfTtjLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtuLnJlbmRlclVua25vd25PcHRpb249Qn0pfV0sbGluazpmdW5jdGlvbihlLGgsZyxuKXtmdW5jdGlvbiBsKGEsYyxkLGUpe2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWQuJHZpZXdWYWx1ZTtcbmUuaGFzT3B0aW9uKGEpPyh4LnBhcmVudCgpJiZ4LnJlbW92ZSgpLGMudmFsKGEpLFwiXCI9PT1hJiZ1LnByb3AoXCJzZWxlY3RlZFwiLCEwKSk6RihhKSYmdT9jLnZhbChcIlwiKTplLnJlbmRlclVua25vd25PcHRpb24oYSl9O2Mub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7eC5wYXJlbnQoKSYmeC5yZW1vdmUoKTtkLiRzZXRWaWV3VmFsdWUoYy52YWwoKSl9KX0pfWZ1bmN0aW9uIG0oYSxjLGQpe3ZhciBlO2QuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPW5ldyBWYShkLiR2aWV3VmFsdWUpO3EoYy5maW5kKFwib3B0aW9uXCIpLGZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQ9dihhLmdldChjLnZhbHVlKSl9KX07YS4kd2F0Y2goZnVuY3Rpb24oKXtyYShlLGQuJHZpZXdWYWx1ZSl8fChlPWphKGQuJHZpZXdWYWx1ZSksZC4kcmVuZGVyKCkpfSk7Yy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgYT1bXTtxKGMuZmluZChcIm9wdGlvblwiKSxcbmZ1bmN0aW9uKGMpe2Muc2VsZWN0ZWQmJmEucHVzaChjLnZhbHVlKX0pO2QuJHNldFZpZXdWYWx1ZShhKX0pfSl9ZnVuY3Rpb24gcChlLGYsZyl7ZnVuY3Rpb24gaCgpe3ZhciBhPXtcIlwiOltdfSxjPVtcIlwiXSxkLGsscix0LEI7dD1nLiRtb2RlbFZhbHVlO0I9eChlKXx8W107dmFyIEQ9bj8kYihCKTpCLEcseixDO3o9e307cj0hMTt2YXIgRixKO2lmKHMpaWYodSYmTSh0KSlmb3Iocj1uZXcgVmEoW10pLEM9MDtDPHQubGVuZ3RoO0MrKyl6W21dPXRbQ10sci5wdXQodShlLHopLHRbQ10pO2Vsc2Ugcj1uZXcgVmEodCk7Zm9yKEM9MDtHPUQubGVuZ3RoLEM8RztDKyspe2s9QztpZihuKXtrPURbQ107aWYoXCIkXCI9PT1rLmNoYXJBdCgwKSljb250aW51ZTt6W25dPWt9elttXT1CW2tdO2Q9cChlLHopfHxcIlwiOyhrPWFbZF0pfHwoaz1hW2RdPVtdLGMucHVzaChkKSk7cz9kPXYoci5yZW1vdmUodT91KGUseik6cShlLHopKSk6KHU/KGQ9e30sZFttXT10LGQ9dShlLGQpPT09dShlLHopKTpkPXQ9PT1cbnEoZSx6KSxyPXJ8fGQpO0Y9bChlLHopO0Y9dihGKT9GOlwiXCI7ay5wdXNoKHtpZDp1P3UoZSx6KTpuP0RbQ106QyxsYWJlbDpGLHNlbGVjdGVkOmR9KX1zfHwoQXx8bnVsbD09PXQ/YVtcIlwiXS51bnNoaWZ0KHtpZDpcIlwiLGxhYmVsOlwiXCIsc2VsZWN0ZWQ6IXJ9KTpyfHxhW1wiXCJdLnVuc2hpZnQoe2lkOlwiP1wiLGxhYmVsOlwiXCIsc2VsZWN0ZWQ6ITB9KSk7ej0wO2ZvcihEPWMubGVuZ3RoO3o8RDt6Kyspe2Q9Y1t6XTtrPWFbZF07eS5sZW5ndGg8PXo/KHQ9e2VsZW1lbnQ6dy5jbG9uZSgpLmF0dHIoXCJsYWJlbFwiLGQpLGxhYmVsOmsubGFiZWx9LEI9W3RdLHkucHVzaChCKSxmLmFwcGVuZCh0LmVsZW1lbnQpKTooQj15W3pdLHQ9QlswXSx0LmxhYmVsIT1kJiZ0LmVsZW1lbnQuYXR0cihcImxhYmVsXCIsdC5sYWJlbD1kKSk7Rj1udWxsO0M9MDtmb3IoRz1rLmxlbmd0aDtDPEc7QysrKXI9a1tDXSwoZD1CW0MrMV0pPyhGPWQuZWxlbWVudCxkLmxhYmVsIT09ci5sYWJlbCYmRi50ZXh0KGQubGFiZWw9ci5sYWJlbCksXG5kLmlkIT09ci5pZCYmRi52YWwoZC5pZD1yLmlkKSxkLnNlbGVjdGVkIT09ci5zZWxlY3RlZCYmKEYucHJvcChcInNlbGVjdGVkXCIsZC5zZWxlY3RlZD1yLnNlbGVjdGVkKSxUJiZGLnByb3AoXCJzZWxlY3RlZFwiLGQuc2VsZWN0ZWQpKSk6KFwiXCI9PT1yLmlkJiZBP0o9QTooSj1FLmNsb25lKCkpLnZhbChyLmlkKS5wcm9wKFwic2VsZWN0ZWRcIixyLnNlbGVjdGVkKS50ZXh0KHIubGFiZWwpLEIucHVzaCh7ZWxlbWVudDpKLGxhYmVsOnIubGFiZWwsaWQ6ci5pZCxzZWxlY3RlZDpyLnNlbGVjdGVkfSksRj9GLmFmdGVyKEopOnQuZWxlbWVudC5hcHBlbmQoSiksRj1KKTtmb3IoQysrO0IubGVuZ3RoPkM7KUIucG9wKCkuZWxlbWVudC5yZW1vdmUoKX1mb3IoO3kubGVuZ3RoPno7KXkucG9wKClbMF0uZWxlbWVudC5yZW1vdmUoKX12YXIgaztpZighKGs9ci5tYXRjaChkKSkpdGhyb3cgd2YoXCJpZXhwXCIscixnYShmKSk7dmFyIGw9YyhrWzJdfHxrWzFdKSxtPWtbNF18fGtbNl0sbj1rWzVdLHA9YyhrWzNdfHxcblwiXCIpLHE9YyhrWzJdP2tbMV06bSkseD1jKGtbN10pLHU9a1s4XT9jKGtbOF0pOm51bGwseT1bW3tlbGVtZW50OmYsbGFiZWw6XCJcIn1dXTtBJiYoYShBKShlKSxBLnJlbW92ZUNsYXNzKFwibmctc2NvcGVcIiksQS5yZW1vdmUoKSk7Zi5lbXB0eSgpO2Yub24oXCJjaGFuZ2VcIixmdW5jdGlvbigpe2UuJGFwcGx5KGZ1bmN0aW9uKCl7dmFyIGEsYz14KGUpfHxbXSxkPXt9LGgsayxsLHAscix3LHY7aWYocylmb3Ioaz1bXSxwPTAsdz15Lmxlbmd0aDtwPHc7cCsrKWZvcihhPXlbcF0sbD0xLHI9YS5sZW5ndGg7bDxyO2wrKyl7aWYoKGg9YVtsXS5lbGVtZW50KVswXS5zZWxlY3RlZCl7aD1oLnZhbCgpO24mJihkW25dPWgpO2lmKHUpZm9yKHY9MDt2PGMubGVuZ3RoJiYoZFttXT1jW3ZdLHUoZSxkKSE9aCk7disrKTtlbHNlIGRbbV09Y1toXTtrLnB1c2gocShlLGQpKX19ZWxzZXtoPWYudmFsKCk7aWYoXCI/XCI9PWgpaz10O2Vsc2UgaWYoXCJcIj09PWgpaz1udWxsO2Vsc2UgaWYodSlmb3Iodj0wO3Y8Yy5sZW5ndGg7disrKXtpZihkW21dPVxuY1t2XSx1KGUsZCk9PWgpe2s9cShlLGQpO2JyZWFrfX1lbHNlIGRbbV09Y1toXSxuJiYoZFtuXT1oKSxrPXEoZSxkKTsxPHlbMF0ubGVuZ3RoJiZ5WzBdWzFdLmlkIT09aCYmKHlbMF1bMV0uc2VsZWN0ZWQ9ITEpfWcuJHNldFZpZXdWYWx1ZShrKX0pfSk7Zy4kcmVuZGVyPWg7ZS4kd2F0Y2goaCl9aWYoblsxXSl7dmFyIGs9blswXTtuPW5bMV07dmFyIHM9Zy5tdWx0aXBsZSxyPWcubmdPcHRpb25zLEE9ITEsdSxFPXooVy5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKSx3PXooVy5jcmVhdGVFbGVtZW50KFwib3B0Z3JvdXBcIikpLHg9RS5jbG9uZSgpO2c9MDtmb3IodmFyIHk9aC5jaGlsZHJlbigpLEI9eS5sZW5ndGg7ZzxCO2crKylpZihcIlwiPT09eVtnXS52YWx1ZSl7dT1BPXkuZXEoZyk7YnJlYWt9ay5pbml0KG4sQSx4KTtzJiYobi4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4hYXx8MD09PWEubGVuZ3RofSk7cj9wKGUsaCxuKTpzP20oZSxoLG4pOmwoZSxoLG4sayl9fX19XSxCZD1bXCIkaW50ZXJwb2xhdGVcIixcbmZ1bmN0aW9uKGEpe3ZhciBjPXthZGRPcHRpb246QixyZW1vdmVPcHRpb246Qn07cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKGQsZSl7aWYoRihlLnZhbHVlKSl7dmFyIGY9YShkLnRleHQoKSwhMCk7Znx8ZS4kc2V0KFwidmFsdWVcIixkLnRleHQoKSl9cmV0dXJuIGZ1bmN0aW9uKGEsZCxlKXt2YXIgbD1kLnBhcmVudCgpLG09bC5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIil8fGwucGFyZW50KCkuZGF0YShcIiRzZWxlY3RDb250cm9sbGVyXCIpO20mJm0uZGF0YWJvdW5kP2QucHJvcChcInNlbGVjdGVkXCIsITEpOm09YztmP2EuJHdhdGNoKGYsZnVuY3Rpb24oYSxjKXtlLiRzZXQoXCJ2YWx1ZVwiLGEpO2MhPT1hJiZtLnJlbW92ZU9wdGlvbihjKTttLmFkZE9wdGlvbihhLGQpfSk6bS5hZGRPcHRpb24oZS52YWx1ZSxkKTtkLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe20ucmVtb3ZlT3B0aW9uKGUudmFsdWUpfSl9fX19XSxBZD1iYSh7cmVzdHJpY3Q6XCJFXCIsXG50ZXJtaW5hbDohMX0pO1AuYW5ndWxhci5ib290c3RyYXA/Y29uc29sZS5sb2coXCJXQVJOSU5HOiBUcmllZCB0byBsb2FkIGFuZ3VsYXIgbW9yZSB0aGFuIG9uY2UuXCIpOihxZCgpLHNkKE9hKSx6KFcpLnJlYWR5KGZ1bmN0aW9uKCl7b2QoVyxnYyl9KSl9KSh3aW5kb3csZG9jdW1lbnQpOyF3aW5kb3cuYW5ndWxhci4kJGNzcCgpJiZ3aW5kb3cuYW5ndWxhci5lbGVtZW50KGRvY3VtZW50KS5maW5kKFwiaGVhZFwiKS5wcmVwZW5kKCc8c3R5bGUgdHlwZT1cInRleHQvY3NzXCI+QGNoYXJzZXQgXCJVVEYtOFwiO1tuZ1xcXFw6Y2xvYWtdLFtuZy1jbG9ha10sW2RhdGEtbmctY2xvYWtdLFt4LW5nLWNsb2FrXSwubmctY2xvYWssLngtbmctY2xvYWssLm5nLWhpZGU6bm90KC5uZy1hbmltYXRlKXtkaXNwbGF5Om5vbmUgIWltcG9ydGFudDt9bmdcXFxcOmZvcm17ZGlzcGxheTpibG9jazt9PC9zdHlsZT4nKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFuZ3VsYXIubWluLmpzLm1hcFxuIiwiLypcbiAqIGFuZ3VsYXItdWktYm9vdHN0cmFwXG4gKiBodHRwOi8vYW5ndWxhci11aS5naXRodWIuaW8vYm9vdHN0cmFwL1xuXG4gKiBWZXJzaW9uOiAwLjExLjAgLSAyMDE0LTA1LTAxXG4gKiBMaWNlbnNlOiBNSVRcbiAqL1xuYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXBcIixbXCJ1aS5ib290c3RyYXAudHBsc1wiLFwidWkuYm9vdHN0cmFwLnRyYW5zaXRpb25cIixcInVpLmJvb3RzdHJhcC5jb2xsYXBzZVwiLFwidWkuYm9vdHN0cmFwLmFjY29yZGlvblwiLFwidWkuYm9vdHN0cmFwLmFsZXJ0XCIsXCJ1aS5ib290c3RyYXAuYmluZEh0bWxcIixcInVpLmJvb3RzdHJhcC5idXR0b25zXCIsXCJ1aS5ib290c3RyYXAuY2Fyb3VzZWxcIixcInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyXCIsXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIixcInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyXCIsXCJ1aS5ib290c3RyYXAuZHJvcGRvd25cIixcInVpLmJvb3RzdHJhcC5tb2RhbFwiLFwidWkuYm9vdHN0cmFwLnBhZ2luYXRpb25cIixcInVpLmJvb3RzdHJhcC50b29sdGlwXCIsXCJ1aS5ib290c3RyYXAucG9wb3ZlclwiLFwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyXCIsXCJ1aS5ib290c3RyYXAucmF0aW5nXCIsXCJ1aS5ib290c3RyYXAudGFic1wiLFwidWkuYm9vdHN0cmFwLnRpbWVwaWNrZXJcIixcInVpLmJvb3RzdHJhcC50eXBlYWhlYWRcIl0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRwbHNcIixbXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWxcIixcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwiLFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbFwiLFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbFwiLFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsXCJ0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWxcIixcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIixcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIixcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtcG9wdXAuaHRtbFwiXSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudHJhbnNpdGlvblwiLFtdKS5mYWN0b3J5KFwiJHRyYW5zaXRpb25cIixbXCIkcVwiLFwiJHRpbWVvdXRcIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtmb3IodmFyIGIgaW4gYSlpZih2b2lkIDAhPT1mLnN0eWxlW2JdKXJldHVybiBhW2JdfXZhciBlPWZ1bmN0aW9uKGQsZixnKXtnPWd8fHt9O3ZhciBoPWEuZGVmZXIoKSxpPWVbZy5hbmltYXRpb24/XCJhbmltYXRpb25FbmRFdmVudE5hbWVcIjpcInRyYW5zaXRpb25FbmRFdmVudE5hbWVcIl0saj1mdW5jdGlvbigpe2MuJGFwcGx5KGZ1bmN0aW9uKCl7ZC51bmJpbmQoaSxqKSxoLnJlc29sdmUoZCl9KX07cmV0dXJuIGkmJmQuYmluZChpLGopLGIoZnVuY3Rpb24oKXthbmd1bGFyLmlzU3RyaW5nKGYpP2QuYWRkQ2xhc3MoZik6YW5ndWxhci5pc0Z1bmN0aW9uKGYpP2YoZCk6YW5ndWxhci5pc09iamVjdChmKSYmZC5jc3MoZiksaXx8aC5yZXNvbHZlKGQpfSksaC5wcm9taXNlLmNhbmNlbD1mdW5jdGlvbigpe2kmJmQudW5iaW5kKGksaiksaC5yZWplY3QoXCJUcmFuc2l0aW9uIGNhbmNlbGxlZFwiKX0saC5wcm9taXNlfSxmPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0cmFuc1wiKSxnPXtXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZFwiLHRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCJ9LGg9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRBbmltYXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwiYW5pbWF0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvQW5pbWF0aW9uRW5kXCIsdHJhbnNpdGlvbjpcImFuaW1hdGlvbmVuZFwifTtyZXR1cm4gZS50cmFuc2l0aW9uRW5kRXZlbnROYW1lPWQoZyksZS5hbmltYXRpb25FbmRFdmVudE5hbWU9ZChoKSxlfV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmNvbGxhcHNlXCIsW1widWkuYm9vdHN0cmFwLnRyYW5zaXRpb25cIl0pLmRpcmVjdGl2ZShcImNvbGxhcHNlXCIsW1wiJHRyYW5zaXRpb25cIixmdW5jdGlvbihhKXtyZXR1cm57bGluazpmdW5jdGlvbihiLGMsZCl7ZnVuY3Rpb24gZShiKXtmdW5jdGlvbiBkKCl7aj09PWUmJihqPXZvaWQgMCl9dmFyIGU9YShjLGIpO3JldHVybiBqJiZqLmNhbmNlbCgpLGo9ZSxlLnRoZW4oZCxkKSxlfWZ1bmN0aW9uIGYoKXtrPyhrPSExLGcoKSk6KGMucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKS5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIiksZSh7aGVpZ2h0OmNbMF0uc2Nyb2xsSGVpZ2h0K1wicHhcIn0pLnRoZW4oZykpfWZ1bmN0aW9uIGcoKXtjLnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKSxjLmFkZENsYXNzKFwiY29sbGFwc2UgaW5cIiksYy5jc3Moe2hlaWdodDpcImF1dG9cIn0pfWZ1bmN0aW9uIGgoKXtpZihrKWs9ITEsaSgpLGMuY3NzKHtoZWlnaHQ6MH0pO2Vsc2V7Yy5jc3Moe2hlaWdodDpjWzBdLnNjcm9sbEhlaWdodCtcInB4XCJ9KTt7Y1swXS5vZmZzZXRXaWR0aH1jLnJlbW92ZUNsYXNzKFwiY29sbGFwc2UgaW5cIikuYWRkQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLGUoe2hlaWdodDowfSkudGhlbihpKX19ZnVuY3Rpb24gaSgpe2MucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLGMuYWRkQ2xhc3MoXCJjb2xsYXBzZVwiKX12YXIgaixrPSEwO2IuJHdhdGNoKGQuY29sbGFwc2UsZnVuY3Rpb24oYSl7YT9oKCk6ZigpfSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5hY2NvcmRpb25cIixbXCJ1aS5ib290c3RyYXAuY29sbGFwc2VcIl0pLmNvbnN0YW50KFwiYWNjb3JkaW9uQ29uZmlnXCIse2Nsb3NlT3RoZXJzOiEwfSkuY29udHJvbGxlcihcIkFjY29yZGlvbkNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiYWNjb3JkaW9uQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMpe3RoaXMuZ3JvdXBzPVtdLHRoaXMuY2xvc2VPdGhlcnM9ZnVuY3Rpb24oZCl7dmFyIGU9YW5ndWxhci5pc0RlZmluZWQoYi5jbG9zZU90aGVycyk/YS4kZXZhbChiLmNsb3NlT3RoZXJzKTpjLmNsb3NlT3RoZXJzO2UmJmFuZ3VsYXIuZm9yRWFjaCh0aGlzLmdyb3VwcyxmdW5jdGlvbihhKXthIT09ZCYmKGEuaXNPcGVuPSExKX0pfSx0aGlzLmFkZEdyb3VwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7dGhpcy5ncm91cHMucHVzaChhKSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtiLnJlbW92ZUdyb3VwKGEpfSl9LHRoaXMucmVtb3ZlR3JvdXA9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ncm91cHMuaW5kZXhPZihhKTstMSE9PWImJnRoaXMuZ3JvdXBzLnNwbGljZShiLDEpfX1dKS5kaXJlY3RpdmUoXCJhY2NvcmRpb25cIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIsY29udHJvbGxlcjpcIkFjY29yZGlvbkNvbnRyb2xsZXJcIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITEsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJhY2NvcmRpb25Hcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCJeYWNjb3JkaW9uXCIscmVzdHJpY3Q6XCJFQVwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLHNjb3BlOntoZWFkaW5nOlwiQFwiLGlzT3BlbjpcIj0/XCIsaXNEaXNhYmxlZDpcIj0/XCJ9LGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt0aGlzLnNldEhlYWRpbmc9ZnVuY3Rpb24oYSl7dGhpcy5oZWFkaW5nPWF9fSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkR3JvdXAoYSksYS4kd2F0Y2goXCJpc09wZW5cIixmdW5jdGlvbihiKXtiJiZkLmNsb3NlT3RoZXJzKGEpfSksYS50b2dnbGVPcGVuPWZ1bmN0aW9uKCl7YS5pc0Rpc2FibGVkfHwoYS5pc09wZW49IWEuaXNPcGVuKX19fX0pLmRpcmVjdGl2ZShcImFjY29yZGlvbkhlYWRpbmdcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIsdHJhbnNjbHVkZTohMCx0ZW1wbGF0ZTpcIlwiLHJlcGxhY2U6ITAscmVxdWlyZTpcIl5hY2NvcmRpb25Hcm91cFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCxlKXtkLnNldEhlYWRpbmcoZShhLGZ1bmN0aW9uKCl7fSkpfX19KS5kaXJlY3RpdmUoXCJhY2NvcmRpb25UcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIl5hY2NvcmRpb25Hcm91cFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7YS4kd2F0Y2goZnVuY3Rpb24oKXtyZXR1cm4gZFtjLmFjY29yZGlvblRyYW5zY2x1ZGVdfSxmdW5jdGlvbihhKXthJiYoYi5odG1sKFwiXCIpLGIuYXBwZW5kKGEpKX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5hbGVydFwiLFtdKS5jb250cm9sbGVyKFwiQWxlcnRDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGIpe2EuY2xvc2VhYmxlPVwiY2xvc2VcImluIGJ9XSkuZGlyZWN0aXZlKFwiYWxlcnRcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIsY29udHJvbGxlcjpcIkFsZXJ0Q29udHJvbGxlclwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCxzY29wZTp7dHlwZTpcIkBcIixjbG9zZTpcIiZcIn19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuYmluZEh0bWxcIixbXSkuZGlyZWN0aXZlKFwiYmluZEh0bWxVbnNhZmVcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhLGIsYyl7Yi5hZGRDbGFzcyhcIm5nLWJpbmRpbmdcIikuZGF0YShcIiRiaW5kaW5nXCIsYy5iaW5kSHRtbFVuc2FmZSksYS4kd2F0Y2goYy5iaW5kSHRtbFVuc2FmZSxmdW5jdGlvbihhKXtiLmh0bWwoYXx8XCJcIil9KX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5idXR0b25zXCIsW10pLmNvbnN0YW50KFwiYnV0dG9uQ29uZmlnXCIse2FjdGl2ZUNsYXNzOlwiYWN0aXZlXCIsdG9nZ2xlRXZlbnQ6XCJjbGlja1wifSkuY29udHJvbGxlcihcIkJ1dHRvbnNDb250cm9sbGVyXCIsW1wiYnV0dG9uQ29uZmlnXCIsZnVuY3Rpb24oYSl7dGhpcy5hY3RpdmVDbGFzcz1hLmFjdGl2ZUNsYXNzfHxcImFjdGl2ZVwiLHRoaXMudG9nZ2xlRXZlbnQ9YS50b2dnbGVFdmVudHx8XCJjbGlja1wifV0pLmRpcmVjdGl2ZShcImJ0blJhZGlvXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpbXCJidG5SYWRpb1wiLFwibmdNb2RlbFwiXSxjb250cm9sbGVyOlwiQnV0dG9uc0NvbnRyb2xsZXJcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF0sZj1kWzFdO2YuJHJlbmRlcj1mdW5jdGlvbigpe2IudG9nZ2xlQ2xhc3MoZS5hY3RpdmVDbGFzcyxhbmd1bGFyLmVxdWFscyhmLiRtb2RlbFZhbHVlLGEuJGV2YWwoYy5idG5SYWRpbykpKX0sYi5iaW5kKGUudG9nZ2xlRXZlbnQsZnVuY3Rpb24oKXt2YXIgZD1iLmhhc0NsYXNzKGUuYWN0aXZlQ2xhc3MpOyghZHx8YW5ndWxhci5pc0RlZmluZWQoYy51bmNoZWNrYWJsZSkpJiZhLiRhcHBseShmdW5jdGlvbigpe2YuJHNldFZpZXdWYWx1ZShkP251bGw6YS4kZXZhbChjLmJ0blJhZGlvKSksZi4kcmVuZGVyKCl9KX0pfX19KS5kaXJlY3RpdmUoXCJidG5DaGVja2JveFwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6W1wiYnRuQ2hlY2tib3hcIixcIm5nTW9kZWxcIl0sY29udHJvbGxlcjpcIkJ1dHRvbnNDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKCl7cmV0dXJuIGcoYy5idG5DaGVja2JveFRydWUsITApfWZ1bmN0aW9uIGYoKXtyZXR1cm4gZyhjLmJ0bkNoZWNrYm94RmFsc2UsITEpfWZ1bmN0aW9uIGcoYixjKXt2YXIgZD1hLiRldmFsKGIpO3JldHVybiBhbmd1bGFyLmlzRGVmaW5lZChkKT9kOmN9dmFyIGg9ZFswXSxpPWRbMV07aS4kcmVuZGVyPWZ1bmN0aW9uKCl7Yi50b2dnbGVDbGFzcyhoLmFjdGl2ZUNsYXNzLGFuZ3VsYXIuZXF1YWxzKGkuJG1vZGVsVmFsdWUsZSgpKSl9LGIuYmluZChoLnRvZ2dsZUV2ZW50LGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtpLiRzZXRWaWV3VmFsdWUoYi5oYXNDbGFzcyhoLmFjdGl2ZUNsYXNzKT9mKCk6ZSgpKSxpLiRyZW5kZXIoKX0pfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmNhcm91c2VsXCIsW1widWkuYm9vdHN0cmFwLnRyYW5zaXRpb25cIl0pLmNvbnRyb2xsZXIoXCJDYXJvdXNlbENvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiR0aW1lb3V0XCIsXCIkdHJhbnNpdGlvblwiLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKCl7ZSgpO3ZhciBjPSthLmludGVydmFsOyFpc05hTihjKSYmYz49MCYmKGc9YihmLGMpKX1mdW5jdGlvbiBlKCl7ZyYmKGIuY2FuY2VsKGcpLGc9bnVsbCl9ZnVuY3Rpb24gZigpe2g/KGEubmV4dCgpLGQoKSk6YS5wYXVzZSgpfXZhciBnLGgsaT10aGlzLGo9aS5zbGlkZXM9YS5zbGlkZXM9W10saz0tMTtpLmN1cnJlbnRTbGlkZT1udWxsO3ZhciBsPSExO2kuc2VsZWN0PWEuc2VsZWN0PWZ1bmN0aW9uKGUsZil7ZnVuY3Rpb24gZygpe2lmKCFsKXtpZihpLmN1cnJlbnRTbGlkZSYmYW5ndWxhci5pc1N0cmluZyhmKSYmIWEubm9UcmFuc2l0aW9uJiZlLiRlbGVtZW50KXtlLiRlbGVtZW50LmFkZENsYXNzKGYpO3tlLiRlbGVtZW50WzBdLm9mZnNldFdpZHRofWFuZ3VsYXIuZm9yRWFjaChqLGZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGEse2RpcmVjdGlvbjpcIlwiLGVudGVyaW5nOiExLGxlYXZpbmc6ITEsYWN0aXZlOiExfSl9KSxhbmd1bGFyLmV4dGVuZChlLHtkaXJlY3Rpb246ZixhY3RpdmU6ITAsZW50ZXJpbmc6ITB9KSxhbmd1bGFyLmV4dGVuZChpLmN1cnJlbnRTbGlkZXx8e30se2RpcmVjdGlvbjpmLGxlYXZpbmc6ITB9KSxhLiRjdXJyZW50VHJhbnNpdGlvbj1jKGUuJGVsZW1lbnQse30pLGZ1bmN0aW9uKGIsYyl7YS4kY3VycmVudFRyYW5zaXRpb24udGhlbihmdW5jdGlvbigpe2goYixjKX0sZnVuY3Rpb24oKXtoKGIsYyl9KX0oZSxpLmN1cnJlbnRTbGlkZSl9ZWxzZSBoKGUsaS5jdXJyZW50U2xpZGUpO2kuY3VycmVudFNsaWRlPWUsaz1tLGQoKX19ZnVuY3Rpb24gaChiLGMpe2FuZ3VsYXIuZXh0ZW5kKGIse2RpcmVjdGlvbjpcIlwiLGFjdGl2ZTohMCxsZWF2aW5nOiExLGVudGVyaW5nOiExfSksYW5ndWxhci5leHRlbmQoY3x8e30se2RpcmVjdGlvbjpcIlwiLGFjdGl2ZTohMSxsZWF2aW5nOiExLGVudGVyaW5nOiExfSksYS4kY3VycmVudFRyYW5zaXRpb249bnVsbH12YXIgbT1qLmluZGV4T2YoZSk7dm9pZCAwPT09ZiYmKGY9bT5rP1wibmV4dFwiOlwicHJldlwiKSxlJiZlIT09aS5jdXJyZW50U2xpZGUmJihhLiRjdXJyZW50VHJhbnNpdGlvbj8oYS4kY3VycmVudFRyYW5zaXRpb24uY2FuY2VsKCksYihnKSk6ZygpKX0sYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bD0hMH0pLGkuaW5kZXhPZlNsaWRlPWZ1bmN0aW9uKGEpe3JldHVybiBqLmluZGV4T2YoYSl9LGEubmV4dD1mdW5jdGlvbigpe3ZhciBiPShrKzEpJWoubGVuZ3RoO3JldHVybiBhLiRjdXJyZW50VHJhbnNpdGlvbj92b2lkIDA6aS5zZWxlY3QoaltiXSxcIm5leHRcIil9LGEucHJldj1mdW5jdGlvbigpe3ZhciBiPTA+ay0xP2oubGVuZ3RoLTE6ay0xO3JldHVybiBhLiRjdXJyZW50VHJhbnNpdGlvbj92b2lkIDA6aS5zZWxlY3QoaltiXSxcInByZXZcIil9LGEuaXNBY3RpdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIGkuY3VycmVudFNsaWRlPT09YX0sYS4kd2F0Y2goXCJpbnRlcnZhbFwiLGQpLGEuJG9uKFwiJGRlc3Ryb3lcIixlKSxhLnBsYXk9ZnVuY3Rpb24oKXtofHwoaD0hMCxkKCkpfSxhLnBhdXNlPWZ1bmN0aW9uKCl7YS5ub1BhdXNlfHwoaD0hMSxlKCkpfSxpLmFkZFNsaWRlPWZ1bmN0aW9uKGIsYyl7Yi4kZWxlbWVudD1jLGoucHVzaChiKSwxPT09ai5sZW5ndGh8fGIuYWN0aXZlPyhpLnNlbGVjdChqW2oubGVuZ3RoLTFdKSwxPT1qLmxlbmd0aCYmYS5wbGF5KCkpOmIuYWN0aXZlPSExfSxpLnJlbW92ZVNsaWRlPWZ1bmN0aW9uKGEpe3ZhciBiPWouaW5kZXhPZihhKTtqLnNwbGljZShiLDEpLGoubGVuZ3RoPjAmJmEuYWN0aXZlP2kuc2VsZWN0KGI+PWoubGVuZ3RoP2pbYi0xXTpqW2JdKTprPmImJmstLX19XSkuZGlyZWN0aXZlKFwiY2Fyb3VzZWxcIixbZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCxjb250cm9sbGVyOlwiQ2Fyb3VzZWxDb250cm9sbGVyXCIscmVxdWlyZTpcImNhcm91c2VsXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sXCIsc2NvcGU6e2ludGVydmFsOlwiPVwiLG5vVHJhbnNpdGlvbjpcIj1cIixub1BhdXNlOlwiPVwifX19XSkuZGlyZWN0aXZlKFwic2xpZGVcIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwiXmNhcm91c2VsXCIscmVzdHJpY3Q6XCJFQVwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWxcIixzY29wZTp7YWN0aXZlOlwiPT9cIn0sbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZFNsaWRlKGEsYiksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZC5yZW1vdmVTbGlkZShhKX0pLGEuJHdhdGNoKFwiYWN0aXZlXCIsZnVuY3Rpb24oYil7YiYmZC5zZWxlY3QoYSl9KX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuZGF0ZXBhcnNlclwiLFtdKS5zZXJ2aWNlKFwiZGF0ZVBhcnNlclwiLFtcIiRsb2NhbGVcIixcIm9yZGVyQnlGaWx0ZXJcIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiLGMpe3JldHVybiAxPT09YiYmYz4yOD8yOT09PWMmJihhJTQ9PT0wJiZhJTEwMCE9PTB8fGElNDAwPT09MCk6Mz09PWJ8fDU9PT1ifHw4PT09Ynx8MTA9PT1iPzMxPmM6ITB9dGhpcy5wYXJzZXJzPXt9O3ZhciBkPXt5eXl5OntyZWdleDpcIlxcXFxkezR9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy55ZWFyPSthfX0seXk6e3JlZ2V4OlwiXFxcXGR7Mn1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2ErMmUzfX0seTp7cmVnZXg6XCJcXFxcZHsxLDR9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy55ZWFyPSthfX0sTU1NTTp7cmVnZXg6YS5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmpvaW4oXCJ8XCIpLGFwcGx5OmZ1bmN0aW9uKGIpe3RoaXMubW9udGg9YS5EQVRFVElNRV9GT1JNQVRTLk1PTlRILmluZGV4T2YoYil9fSxNTU06e3JlZ2V4OmEuREFURVRJTUVfRk9STUFUUy5TSE9SVE1PTlRILmpvaW4oXCJ8XCIpLGFwcGx5OmZ1bmN0aW9uKGIpe3RoaXMubW9udGg9YS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguaW5kZXhPZihiKX19LE1NOntyZWdleDpcIjBbMS05XXwxWzAtMl1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWEtMX19LE06e3JlZ2V4OlwiWzEtOV18MVswLTJdXCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5tb250aD1hLTF9fSxkZDp7cmVnZXg6XCJbMC0yXVswLTldezF9fDNbMC0xXXsxfVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMuZGF0ZT0rYX19LGQ6e3JlZ2V4OlwiWzEtMl0/WzAtOV17MX18M1swLTFdezF9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5kYXRlPSthfX0sRUVFRTp7cmVnZXg6YS5EQVRFVElNRV9GT1JNQVRTLkRBWS5qb2luKFwifFwiKX0sRUVFOntyZWdleDphLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlREQVkuam9pbihcInxcIil9fTt0aGlzLmNyZWF0ZVBhcnNlcj1mdW5jdGlvbihhKXt2YXIgYz1bXSxlPWEuc3BsaXQoXCJcIik7cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChkLGZ1bmN0aW9uKGIsZCl7dmFyIGY9YS5pbmRleE9mKGQpO2lmKGY+LTEpe2E9YS5zcGxpdChcIlwiKSxlW2ZdPVwiKFwiK2IucmVnZXgrXCIpXCIsYVtmXT1cIiRcIjtmb3IodmFyIGc9ZisxLGg9ZitkLmxlbmd0aDtoPmc7ZysrKWVbZ109XCJcIixhW2ddPVwiJFwiO2E9YS5qb2luKFwiXCIpLGMucHVzaCh7aW5kZXg6ZixhcHBseTpiLmFwcGx5fSl9fSkse3JlZ2V4Om5ldyBSZWdFeHAoXCJeXCIrZS5qb2luKFwiXCIpK1wiJFwiKSxtYXA6YihjLFwiaW5kZXhcIil9fSx0aGlzLnBhcnNlPWZ1bmN0aW9uKGIsZCl7aWYoIWFuZ3VsYXIuaXNTdHJpbmcoYikpcmV0dXJuIGI7ZD1hLkRBVEVUSU1FX0ZPUk1BVFNbZF18fGQsdGhpcy5wYXJzZXJzW2RdfHwodGhpcy5wYXJzZXJzW2RdPXRoaXMuY3JlYXRlUGFyc2VyKGQpKTt2YXIgZT10aGlzLnBhcnNlcnNbZF0sZj1lLnJlZ2V4LGc9ZS5tYXAsaD1iLm1hdGNoKGYpO2lmKGgmJmgubGVuZ3RoKXtmb3IodmFyIGksaj17eWVhcjoxOTAwLG1vbnRoOjAsZGF0ZToxLGhvdXJzOjB9LGs9MSxsPWgubGVuZ3RoO2w+aztrKyspe3ZhciBtPWdbay0xXTttLmFwcGx5JiZtLmFwcGx5LmNhbGwoaixoW2tdKX1yZXR1cm4gYyhqLnllYXIsai5tb250aCxqLmRhdGUpJiYoaT1uZXcgRGF0ZShqLnllYXIsai5tb250aCxqLmRhdGUsai5ob3VycykpLGl9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFtdKS5mYWN0b3J5KFwiJHBvc2l0aW9uXCIsW1wiJGRvY3VtZW50XCIsXCIkd2luZG93XCIsZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBjKGEsYyl7cmV0dXJuIGEuY3VycmVudFN0eWxlP2EuY3VycmVudFN0eWxlW2NdOmIuZ2V0Q29tcHV0ZWRTdHlsZT9iLmdldENvbXB1dGVkU3R5bGUoYSlbY106YS5zdHlsZVtjXX1mdW5jdGlvbiBkKGEpe3JldHVyblwic3RhdGljXCI9PT0oYyhhLFwicG9zaXRpb25cIil8fFwic3RhdGljXCIpfXZhciBlPWZ1bmN0aW9uKGIpe2Zvcih2YXIgYz1hWzBdLGU9Yi5vZmZzZXRQYXJlbnR8fGM7ZSYmZSE9PWMmJmQoZSk7KWU9ZS5vZmZzZXRQYXJlbnQ7cmV0dXJuIGV8fGN9O3JldHVybntwb3NpdGlvbjpmdW5jdGlvbihiKXt2YXIgYz10aGlzLm9mZnNldChiKSxkPXt0b3A6MCxsZWZ0OjB9LGY9ZShiWzBdKTtmIT1hWzBdJiYoZD10aGlzLm9mZnNldChhbmd1bGFyLmVsZW1lbnQoZikpLGQudG9wKz1mLmNsaWVudFRvcC1mLnNjcm9sbFRvcCxkLmxlZnQrPWYuY2xpZW50TGVmdC1mLnNjcm9sbExlZnQpO3ZhciBnPWJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7cmV0dXJue3dpZHRoOmcud2lkdGh8fGIucHJvcChcIm9mZnNldFdpZHRoXCIpLGhlaWdodDpnLmhlaWdodHx8Yi5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpLHRvcDpjLnRvcC1kLnRvcCxsZWZ0OmMubGVmdC1kLmxlZnR9fSxvZmZzZXQ6ZnVuY3Rpb24oYyl7dmFyIGQ9Y1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57d2lkdGg6ZC53aWR0aHx8Yy5wcm9wKFwib2Zmc2V0V2lkdGhcIiksaGVpZ2h0OmQuaGVpZ2h0fHxjLnByb3AoXCJvZmZzZXRIZWlnaHRcIiksdG9wOmQudG9wKyhiLnBhZ2VZT2Zmc2V0fHxhWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLGxlZnQ6ZC5sZWZ0KyhiLnBhZ2VYT2Zmc2V0fHxhWzBdLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0KX19LHBvc2l0aW9uRWxlbWVudHM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGgsaT1jLnNwbGl0KFwiLVwiKSxqPWlbMF0saz1pWzFdfHxcImNlbnRlclwiO2U9ZD90aGlzLm9mZnNldChhKTp0aGlzLnBvc2l0aW9uKGEpLGY9Yi5wcm9wKFwib2Zmc2V0V2lkdGhcIiksZz1iLnByb3AoXCJvZmZzZXRIZWlnaHRcIik7dmFyIGw9e2NlbnRlcjpmdW5jdGlvbigpe3JldHVybiBlLmxlZnQrZS53aWR0aC8yLWYvMn0sbGVmdDpmdW5jdGlvbigpe3JldHVybiBlLmxlZnR9LHJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIGUubGVmdCtlLndpZHRofX0sbT17Y2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGUudG9wK2UuaGVpZ2h0LzItZy8yfSx0b3A6ZnVuY3Rpb24oKXtyZXR1cm4gZS50b3B9LGJvdHRvbTpmdW5jdGlvbigpe3JldHVybiBlLnRvcCtlLmhlaWdodH19O3N3aXRjaChqKXtjYXNlXCJyaWdodFwiOmg9e3RvcDptW2tdKCksbGVmdDpsW2pdKCl9O2JyZWFrO2Nhc2VcImxlZnRcIjpoPXt0b3A6bVtrXSgpLGxlZnQ6ZS5sZWZ0LWZ9O2JyZWFrO2Nhc2VcImJvdHRvbVwiOmg9e3RvcDptW2pdKCksbGVmdDpsW2tdKCl9O2JyZWFrO2RlZmF1bHQ6aD17dG9wOmUudG9wLWcsbGVmdDpsW2tdKCl9fXJldHVybiBofX19XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuZGF0ZXBpY2tlclwiLFtcInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyXCIsXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIl0pLmNvbnN0YW50KFwiZGF0ZXBpY2tlckNvbmZpZ1wiLHtmb3JtYXREYXk6XCJkZFwiLGZvcm1hdE1vbnRoOlwiTU1NTVwiLGZvcm1hdFllYXI6XCJ5eXl5XCIsZm9ybWF0RGF5SGVhZGVyOlwiRUVFXCIsZm9ybWF0RGF5VGl0bGU6XCJNTU1NIHl5eXlcIixmb3JtYXRNb250aFRpdGxlOlwieXl5eVwiLGRhdGVwaWNrZXJNb2RlOlwiZGF5XCIsbWluTW9kZTpcImRheVwiLG1heE1vZGU6XCJ5ZWFyXCIsc2hvd1dlZWtzOiEwLHN0YXJ0aW5nRGF5OjAseWVhclJhbmdlOjIwLG1pbkRhdGU6bnVsbCxtYXhEYXRlOm51bGx9KS5jb250cm9sbGVyKFwiRGF0ZXBpY2tlckNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJHBhcnNlXCIsXCIkaW50ZXJwb2xhdGVcIixcIiR0aW1lb3V0XCIsXCIkbG9nXCIsXCJkYXRlRmlsdGVyXCIsXCJkYXRlcGlja2VyQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaT10aGlzLGo9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfTt0aGlzLm1vZGVzPVtcImRheVwiLFwibW9udGhcIixcInllYXJcIl0sYW5ndWxhci5mb3JFYWNoKFtcImZvcm1hdERheVwiLFwiZm9ybWF0TW9udGhcIixcImZvcm1hdFllYXJcIixcImZvcm1hdERheUhlYWRlclwiLFwiZm9ybWF0RGF5VGl0bGVcIixcImZvcm1hdE1vbnRoVGl0bGVcIixcIm1pbk1vZGVcIixcIm1heE1vZGVcIixcInNob3dXZWVrc1wiLFwic3RhcnRpbmdEYXlcIixcInllYXJSYW5nZVwiXSxmdW5jdGlvbihjLGUpe2lbY109YW5ndWxhci5pc0RlZmluZWQoYltjXSk/OD5lP2QoYltjXSkoYS4kcGFyZW50KTphLiRwYXJlbnQuJGV2YWwoYltjXSk6aFtjXX0pLGFuZ3VsYXIuZm9yRWFjaChbXCJtaW5EYXRlXCIsXCJtYXhEYXRlXCJdLGZ1bmN0aW9uKGQpe2JbZF0/YS4kcGFyZW50LiR3YXRjaChjKGJbZF0pLGZ1bmN0aW9uKGEpe2lbZF09YT9uZXcgRGF0ZShhKTpudWxsLGkucmVmcmVzaFZpZXcoKX0pOmlbZF09aFtkXT9uZXcgRGF0ZShoW2RdKTpudWxsfSksYS5kYXRlcGlja2VyTW9kZT1hLmRhdGVwaWNrZXJNb2RlfHxoLmRhdGVwaWNrZXJNb2RlLGEudW5pcXVlSWQ9XCJkYXRlcGlja2VyLVwiK2EuJGlkK1wiLVwiK01hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpLHRoaXMuYWN0aXZlRGF0ZT1hbmd1bGFyLmlzRGVmaW5lZChiLmluaXREYXRlKT9hLiRwYXJlbnQuJGV2YWwoYi5pbml0RGF0ZSk6bmV3IERhdGUsYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gMD09PWkuY29tcGFyZShiLmRhdGUsaS5hY3RpdmVEYXRlKT8oYS5hY3RpdmVEYXRlSWQ9Yi51aWQsITApOiExfSx0aGlzLmluaXQ9ZnVuY3Rpb24oYSl7aj1hLGouJHJlbmRlcj1mdW5jdGlvbigpe2kucmVuZGVyKCl9fSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2lmKGouJG1vZGVsVmFsdWUpe3ZhciBhPW5ldyBEYXRlKGouJG1vZGVsVmFsdWUpLGI9IWlzTmFOKGEpO2I/dGhpcy5hY3RpdmVEYXRlPWE6Zi5lcnJvcignRGF0ZXBpY2tlciBkaXJlY3RpdmU6IFwibmctbW9kZWxcIiB2YWx1ZSBtdXN0IGJlIGEgRGF0ZSBvYmplY3QsIGEgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAwMS4wMS4xOTcwIG9yIGEgc3RyaW5nIHJlcHJlc2VudGluZyBhbiBSRkMyODIyIG9yIElTTyA4NjAxIGRhdGUuJyksai4kc2V0VmFsaWRpdHkoXCJkYXRlXCIsYil9dGhpcy5yZWZyZXNoVmlldygpfSx0aGlzLnJlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtZW50KXt0aGlzLl9yZWZyZXNoVmlldygpO3ZhciBhPWouJG1vZGVsVmFsdWU/bmV3IERhdGUoai4kbW9kZWxWYWx1ZSk6bnVsbDtqLiRzZXRWYWxpZGl0eShcImRhdGUtZGlzYWJsZWRcIiwhYXx8dGhpcy5lbGVtZW50JiYhdGhpcy5pc0Rpc2FibGVkKGEpKX19LHRoaXMuY3JlYXRlRGF0ZU9iamVjdD1mdW5jdGlvbihhLGIpe3ZhciBjPWouJG1vZGVsVmFsdWU/bmV3IERhdGUoai4kbW9kZWxWYWx1ZSk6bnVsbDtyZXR1cm57ZGF0ZTphLGxhYmVsOmcoYSxiKSxzZWxlY3RlZDpjJiYwPT09dGhpcy5jb21wYXJlKGEsYyksZGlzYWJsZWQ6dGhpcy5pc0Rpc2FibGVkKGEpLGN1cnJlbnQ6MD09PXRoaXMuY29tcGFyZShhLG5ldyBEYXRlKX19LHRoaXMuaXNEaXNhYmxlZD1mdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5taW5EYXRlJiZ0aGlzLmNvbXBhcmUoYyx0aGlzLm1pbkRhdGUpPDB8fHRoaXMubWF4RGF0ZSYmdGhpcy5jb21wYXJlKGMsdGhpcy5tYXhEYXRlKT4wfHxiLmRhdGVEaXNhYmxlZCYmYS5kYXRlRGlzYWJsZWQoe2RhdGU6Yyxtb2RlOmEuZGF0ZXBpY2tlck1vZGV9KX0sdGhpcy5zcGxpdD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthLmxlbmd0aD4wOyljLnB1c2goYS5zcGxpY2UoMCxiKSk7cmV0dXJuIGN9LGEuc2VsZWN0PWZ1bmN0aW9uKGIpe2lmKGEuZGF0ZXBpY2tlck1vZGU9PT1pLm1pbk1vZGUpe3ZhciBjPWouJG1vZGVsVmFsdWU/bmV3IERhdGUoai4kbW9kZWxWYWx1ZSk6bmV3IERhdGUoMCwwLDAsMCwwLDAsMCk7Yy5zZXRGdWxsWWVhcihiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpKSxqLiRzZXRWaWV3VmFsdWUoYyksai4kcmVuZGVyKCl9ZWxzZSBpLmFjdGl2ZURhdGU9YixhLmRhdGVwaWNrZXJNb2RlPWkubW9kZXNbaS5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpLTFdfSxhLm1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9aS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrYSooaS5zdGVwLnllYXJzfHwwKSxjPWkuYWN0aXZlRGF0ZS5nZXRNb250aCgpK2EqKGkuc3RlcC5tb250aHN8fDApO2kuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihiLGMsMSksaS5yZWZyZXNoVmlldygpfSxhLnRvZ2dsZU1vZGU9ZnVuY3Rpb24oYil7Yj1ifHwxLGEuZGF0ZXBpY2tlck1vZGU9PT1pLm1heE1vZGUmJjE9PT1ifHxhLmRhdGVwaWNrZXJNb2RlPT09aS5taW5Nb2RlJiYtMT09PWJ8fChhLmRhdGVwaWNrZXJNb2RlPWkubW9kZXNbaS5tb2Rlcy5pbmRleE9mKGEuZGF0ZXBpY2tlck1vZGUpK2JdKX0sYS5rZXlzPXsxMzpcImVudGVyXCIsMzI6XCJzcGFjZVwiLDMzOlwicGFnZXVwXCIsMzQ6XCJwYWdlZG93blwiLDM1OlwiZW5kXCIsMzY6XCJob21lXCIsMzc6XCJsZWZ0XCIsMzg6XCJ1cFwiLDM5OlwicmlnaHRcIiw0MDpcImRvd25cIn07dmFyIGs9ZnVuY3Rpb24oKXtlKGZ1bmN0aW9uKCl7aS5lbGVtZW50WzBdLmZvY3VzKCl9LDAsITEpfTthLiRvbihcImRhdGVwaWNrZXIuZm9jdXNcIixrKSxhLmtleWRvd249ZnVuY3Rpb24oYil7dmFyIGM9YS5rZXlzW2Iud2hpY2hdO2lmKGMmJiFiLnNoaWZ0S2V5JiYhYi5hbHRLZXkpaWYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksXCJlbnRlclwiPT09Y3x8XCJzcGFjZVwiPT09Yyl7aWYoaS5pc0Rpc2FibGVkKGkuYWN0aXZlRGF0ZSkpcmV0dXJuO2Euc2VsZWN0KGkuYWN0aXZlRGF0ZSksaygpfWVsc2UhYi5jdHJsS2V5fHxcInVwXCIhPT1jJiZcImRvd25cIiE9PWM/KGkuaGFuZGxlS2V5RG93bihjLGIpLGkucmVmcmVzaFZpZXcoKSk6KGEudG9nZ2xlTW9kZShcInVwXCI9PT1jPzE6LTEpLGsoKSl9fV0pLmRpcmVjdGl2ZShcImRhdGVwaWNrZXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sXCIsc2NvcGU6e2RhdGVwaWNrZXJNb2RlOlwiPT9cIixkYXRlRGlzYWJsZWQ6XCImXCJ9LHJlcXVpcmU6W1wiZGF0ZXBpY2tlclwiLFwiP15uZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJEYXRlcGlja2VyQ29udHJvbGxlclwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZiYmZS5pbml0KGYpfX19KS5kaXJlY3RpdmUoXCJkYXlwaWNrZXJcIixbXCJkYXRlRmlsdGVyXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwiLHJlcXVpcmU6XCJeZGF0ZXBpY2tlclwiLGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7ZnVuY3Rpb24gZihhLGIpe3JldHVybiAxIT09Ynx8YSU0IT09MHx8YSUxMDA9PT0wJiZhJTQwMCE9PTA/aVtiXToyOX1mdW5jdGlvbiBnKGEsYil7dmFyIGM9bmV3IEFycmF5KGIpLGQ9bmV3IERhdGUoYSksZT0wO2ZvcihkLnNldEhvdXJzKDEyKTtiPmU7KWNbZSsrXT1uZXcgRGF0ZShkKSxkLnNldERhdGUoZC5nZXREYXRlKCkrMSk7cmV0dXJuIGN9ZnVuY3Rpb24gaChhKXt2YXIgYj1uZXcgRGF0ZShhKTtiLnNldERhdGUoYi5nZXREYXRlKCkrNC0oYi5nZXREYXkoKXx8NykpO3ZhciBjPWIuZ2V0VGltZSgpO3JldHVybiBiLnNldE1vbnRoKDApLGIuc2V0RGF0ZSgxKSxNYXRoLmZsb29yKE1hdGgucm91bmQoKGMtYikvODY0ZTUpLzcpKzF9Yi5zaG93V2Vla3M9ZS5zaG93V2Vla3MsZS5zdGVwPXttb250aHM6MX0sZS5lbGVtZW50PWM7dmFyIGk9WzMxLDI4LDMxLDMwLDMxLDMwLDMxLDMxLDMwLDMxLDMwLDMxXTtlLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe3ZhciBjPWUuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLGQ9ZS5hY3RpdmVEYXRlLmdldE1vbnRoKCksZj1uZXcgRGF0ZShjLGQsMSksaT1lLnN0YXJ0aW5nRGF5LWYuZ2V0RGF5KCksaj1pPjA/Ny1pOi1pLGs9bmV3IERhdGUoZik7aj4wJiZrLnNldERhdGUoLWorMSk7Zm9yKHZhciBsPWcoayw0MiksbT0wOzQyPm07bSsrKWxbbV09YW5ndWxhci5leHRlbmQoZS5jcmVhdGVEYXRlT2JqZWN0KGxbbV0sZS5mb3JtYXREYXkpLHtzZWNvbmRhcnk6bFttXS5nZXRNb250aCgpIT09ZCx1aWQ6Yi51bmlxdWVJZCtcIi1cIittfSk7Yi5sYWJlbHM9bmV3IEFycmF5KDcpO2Zvcih2YXIgbj0wOzc+bjtuKyspYi5sYWJlbHNbbl09e2FiYnI6YShsW25dLmRhdGUsZS5mb3JtYXREYXlIZWFkZXIpLGZ1bGw6YShsW25dLmRhdGUsXCJFRUVFXCIpfTtpZihiLnRpdGxlPWEoZS5hY3RpdmVEYXRlLGUuZm9ybWF0RGF5VGl0bGUpLGIucm93cz1lLnNwbGl0KGwsNyksYi5zaG93V2Vla3Mpe2Iud2Vla051bWJlcnM9W107Zm9yKHZhciBvPWgoYi5yb3dzWzBdWzBdLmRhdGUpLHA9Yi5yb3dzLmxlbmd0aDtiLndlZWtOdW1iZXJzLnB1c2gobysrKTxwOyk7fX0sZS5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCksYS5nZXREYXRlKCkpLW5ldyBEYXRlKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpfSxlLmhhbmRsZUtleURvd249ZnVuY3Rpb24oYSl7dmFyIGI9ZS5hY3RpdmVEYXRlLmdldERhdGUoKTtpZihcImxlZnRcIj09PWEpYi09MTtlbHNlIGlmKFwidXBcIj09PWEpYi09NztlbHNlIGlmKFwicmlnaHRcIj09PWEpYis9MTtlbHNlIGlmKFwiZG93blwiPT09YSliKz03O2Vsc2UgaWYoXCJwYWdldXBcIj09PWF8fFwicGFnZWRvd25cIj09PWEpe3ZhciBjPWUuYWN0aXZlRGF0ZS5nZXRNb250aCgpKyhcInBhZ2V1cFwiPT09YT8tMToxKTtlLmFjdGl2ZURhdGUuc2V0TW9udGgoYywxKSxiPU1hdGgubWluKGYoZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksZS5hY3RpdmVEYXRlLmdldE1vbnRoKCkpLGIpfWVsc2VcImhvbWVcIj09PWE/Yj0xOlwiZW5kXCI9PT1hJiYoYj1mKGUuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpLGUuYWN0aXZlRGF0ZS5nZXRNb250aCgpKSk7ZS5hY3RpdmVEYXRlLnNldERhdGUoYil9LGUucmVmcmVzaFZpZXcoKX19fV0pLmRpcmVjdGl2ZShcIm1vbnRocGlja2VyXCIsW1wiZGF0ZUZpbHRlclwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLHJlcXVpcmU6XCJeZGF0ZXBpY2tlclwiLGxpbms6ZnVuY3Rpb24oYixjLGQsZSl7ZS5zdGVwPXt5ZWFyczoxfSxlLmVsZW1lbnQ9YyxlLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYz1uZXcgQXJyYXkoMTIpLGQ9ZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksZj0wOzEyPmY7ZisrKWNbZl09YW5ndWxhci5leHRlbmQoZS5jcmVhdGVEYXRlT2JqZWN0KG5ldyBEYXRlKGQsZiwxKSxlLmZvcm1hdE1vbnRoKSx7dWlkOmIudW5pcXVlSWQrXCItXCIrZn0pO2IudGl0bGU9YShlLmFjdGl2ZURhdGUsZS5mb3JtYXRNb250aFRpdGxlKSxiLnJvd3M9ZS5zcGxpdChjLDMpfSxlLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSktbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSl9LGUuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhKXt2YXIgYj1lLmFjdGl2ZURhdGUuZ2V0TW9udGgoKTtpZihcImxlZnRcIj09PWEpYi09MTtlbHNlIGlmKFwidXBcIj09PWEpYi09MztlbHNlIGlmKFwicmlnaHRcIj09PWEpYis9MTtlbHNlIGlmKFwiZG93blwiPT09YSliKz0zO2Vsc2UgaWYoXCJwYWdldXBcIj09PWF8fFwicGFnZWRvd25cIj09PWEpe3ZhciBjPWUuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKyhcInBhZ2V1cFwiPT09YT8tMToxKTtlLmFjdGl2ZURhdGUuc2V0RnVsbFllYXIoYyl9ZWxzZVwiaG9tZVwiPT09YT9iPTA6XCJlbmRcIj09PWEmJihiPTExKTtlLmFjdGl2ZURhdGUuc2V0TW9udGgoYil9LGUucmVmcmVzaFZpZXcoKX19fV0pLmRpcmVjdGl2ZShcInllYXJwaWNrZXJcIixbXCJkYXRlRmlsdGVyXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLHJlcXVpcmU6XCJeZGF0ZXBpY2tlclwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZnVuY3Rpb24gZShhKXtyZXR1cm4gcGFyc2VJbnQoKGEtMSkvZiwxMCkqZisxfXZhciBmPWQueWVhclJhbmdlO2Quc3RlcD17eWVhcnM6Zn0sZC5lbGVtZW50PWIsZC5fcmVmcmVzaFZpZXc9ZnVuY3Rpb24oKXtmb3IodmFyIGI9bmV3IEFycmF5KGYpLGM9MCxnPWUoZC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpO2Y+YztjKyspYltjXT1hbmd1bGFyLmV4dGVuZChkLmNyZWF0ZURhdGVPYmplY3QobmV3IERhdGUoZytjLDAsMSksZC5mb3JtYXRZZWFyKSx7dWlkOmEudW5pcXVlSWQrXCItXCIrY30pO2EudGl0bGU9W2JbMF0ubGFiZWwsYltmLTFdLmxhYmVsXS5qb2luKFwiIC0gXCIpLGEucm93cz1kLnNwbGl0KGIsNSl9LGQuY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiBhLmdldEZ1bGxZZWFyKCktYi5nZXRGdWxsWWVhcigpfSxkLmhhbmRsZUtleURvd249ZnVuY3Rpb24oYSl7dmFyIGI9ZC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCk7XCJsZWZ0XCI9PT1hP2ItPTE6XCJ1cFwiPT09YT9iLT01OlwicmlnaHRcIj09PWE/Yis9MTpcImRvd25cIj09PWE/Yis9NTpcInBhZ2V1cFwiPT09YXx8XCJwYWdlZG93blwiPT09YT9iKz0oXCJwYWdldXBcIj09PWE/LTE6MSkqZC5zdGVwLnllYXJzOlwiaG9tZVwiPT09YT9iPWUoZC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpOlwiZW5kXCI9PT1hJiYoYj1lKGQuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpKStmLTEpLGQuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihiKX0sZC5yZWZyZXNoVmlldygpfX19XSkuY29uc3RhbnQoXCJkYXRlcGlja2VyUG9wdXBDb25maWdcIix7ZGF0ZXBpY2tlclBvcHVwOlwieXl5eS1NTS1kZFwiLGN1cnJlbnRUZXh0OlwiVG9kYXlcIixjbGVhclRleHQ6XCJDbGVhclwiLGNsb3NlVGV4dDpcIkRvbmVcIixjbG9zZU9uRGF0ZVNlbGVjdGlvbjohMCxhcHBlbmRUb0JvZHk6ITEsc2hvd0J1dHRvbkJhcjohMH0pLmRpcmVjdGl2ZShcImRhdGVwaWNrZXJQb3B1cFwiLFtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixcIiRkb2N1bWVudFwiLFwiJHBvc2l0aW9uXCIsXCJkYXRlRmlsdGVyXCIsXCJkYXRlUGFyc2VyXCIsXCJkYXRlcGlja2VyUG9wdXBDb25maWdcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcXVpcmU6XCJuZ01vZGVsXCIsc2NvcGU6e2lzT3BlbjpcIj0/XCIsY3VycmVudFRleHQ6XCJAXCIsY2xlYXJUZXh0OlwiQFwiLGNsb3NlVGV4dDpcIkBcIixkYXRlRGlzYWJsZWQ6XCImXCJ9LGxpbms6ZnVuY3Rpb24oaCxpLGosayl7ZnVuY3Rpb24gbChhKXtyZXR1cm4gYS5yZXBsYWNlKC8oW0EtWl0pL2csZnVuY3Rpb24oYSl7cmV0dXJuXCItXCIrYS50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gbShhKXtpZihhKXtpZihhbmd1bGFyLmlzRGF0ZShhKSYmIWlzTmFOKGEpKXJldHVybiBrLiRzZXRWYWxpZGl0eShcImRhdGVcIiwhMCksYTtpZihhbmd1bGFyLmlzU3RyaW5nKGEpKXt2YXIgYj1mLnBhcnNlKGEsbil8fG5ldyBEYXRlKGEpO3JldHVybiBpc05hTihiKT92b2lkIGsuJHNldFZhbGlkaXR5KFwiZGF0ZVwiLCExKTooay4kc2V0VmFsaWRpdHkoXCJkYXRlXCIsITApLGIpfXJldHVybiB2b2lkIGsuJHNldFZhbGlkaXR5KFwiZGF0ZVwiLCExKX1yZXR1cm4gay4kc2V0VmFsaWRpdHkoXCJkYXRlXCIsITApLG51bGx9dmFyIG4sbz1hbmd1bGFyLmlzRGVmaW5lZChqLmNsb3NlT25EYXRlU2VsZWN0aW9uKT9oLiRwYXJlbnQuJGV2YWwoai5jbG9zZU9uRGF0ZVNlbGVjdGlvbik6Zy5jbG9zZU9uRGF0ZVNlbGVjdGlvbixwPWFuZ3VsYXIuaXNEZWZpbmVkKGouZGF0ZXBpY2tlckFwcGVuZFRvQm9keSk/aC4kcGFyZW50LiRldmFsKGouZGF0ZXBpY2tlckFwcGVuZFRvQm9keSk6Zy5hcHBlbmRUb0JvZHk7aC5zaG93QnV0dG9uQmFyPWFuZ3VsYXIuaXNEZWZpbmVkKGouc2hvd0J1dHRvbkJhcik/aC4kcGFyZW50LiRldmFsKGouc2hvd0J1dHRvbkJhcik6Zy5zaG93QnV0dG9uQmFyLGguZ2V0VGV4dD1mdW5jdGlvbihhKXtyZXR1cm4gaFthK1wiVGV4dFwiXXx8Z1thK1wiVGV4dFwiXX0sai4kb2JzZXJ2ZShcImRhdGVwaWNrZXJQb3B1cFwiLGZ1bmN0aW9uKGEpe249YXx8Zy5kYXRlcGlja2VyUG9wdXAsay4kcmVuZGVyKCl9KTt2YXIgcT1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2IGRhdGVwaWNrZXItcG9wdXAtd3JhcD48ZGl2IGRhdGVwaWNrZXI+PC9kaXY+PC9kaXY+XCIpO3EuYXR0cih7XCJuZy1tb2RlbFwiOlwiZGF0ZVwiLFwibmctY2hhbmdlXCI6XCJkYXRlU2VsZWN0aW9uKClcIn0pO3ZhciByPWFuZ3VsYXIuZWxlbWVudChxLmNoaWxkcmVuKClbMF0pO2ouZGF0ZXBpY2tlck9wdGlvbnMmJmFuZ3VsYXIuZm9yRWFjaChoLiRwYXJlbnQuJGV2YWwoai5kYXRlcGlja2VyT3B0aW9ucyksZnVuY3Rpb24oYSxiKXtyLmF0dHIobChiKSxhKX0pLGFuZ3VsYXIuZm9yRWFjaChbXCJtaW5EYXRlXCIsXCJtYXhEYXRlXCJdLGZ1bmN0aW9uKGEpe2pbYV0mJihoLiRwYXJlbnQuJHdhdGNoKGIoalthXSksZnVuY3Rpb24oYil7aFthXT1ifSksci5hdHRyKGwoYSksYSkpfSksai5kYXRlRGlzYWJsZWQmJnIuYXR0cihcImRhdGUtZGlzYWJsZWRcIixcImRhdGVEaXNhYmxlZCh7IGRhdGU6IGRhdGUsIG1vZGU6IG1vZGUgfSlcIiksay4kcGFyc2Vycy51bnNoaWZ0KG0pLGguZGF0ZVNlbGVjdGlvbj1mdW5jdGlvbihhKXthbmd1bGFyLmlzRGVmaW5lZChhKSYmKGguZGF0ZT1hKSxrLiRzZXRWaWV3VmFsdWUoaC5kYXRlKSxrLiRyZW5kZXIoKSxvJiYoaC5pc09wZW49ITEsaVswXS5mb2N1cygpKX0saS5iaW5kKFwiaW5wdXQgY2hhbmdlIGtleXVwXCIsZnVuY3Rpb24oKXtoLiRhcHBseShmdW5jdGlvbigpe2guZGF0ZT1rLiRtb2RlbFZhbHVlfSl9KSxrLiRyZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1rLiR2aWV3VmFsdWU/ZShrLiR2aWV3VmFsdWUsbik6XCJcIjtpLnZhbChhKSxoLmRhdGU9bShrLiRtb2RlbFZhbHVlKX07dmFyIHM9ZnVuY3Rpb24oYSl7aC5pc09wZW4mJmEudGFyZ2V0IT09aVswXSYmaC4kYXBwbHkoZnVuY3Rpb24oKXtoLmlzT3Blbj0hMX0pfSx0PWZ1bmN0aW9uKGEpe2gua2V5ZG93bihhKX07aS5iaW5kKFwia2V5ZG93blwiLHQpLGgua2V5ZG93bj1mdW5jdGlvbihhKXsyNz09PWEud2hpY2g/KGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpLGguY2xvc2UoKSk6NDAhPT1hLndoaWNofHxoLmlzT3Blbnx8KGguaXNPcGVuPSEwKX0saC4kd2F0Y2goXCJpc09wZW5cIixmdW5jdGlvbihhKXthPyhoLiRicm9hZGNhc3QoXCJkYXRlcGlja2VyLmZvY3VzXCIpLGgucG9zaXRpb249cD9kLm9mZnNldChpKTpkLnBvc2l0aW9uKGkpLGgucG9zaXRpb24udG9wPWgucG9zaXRpb24udG9wK2kucHJvcChcIm9mZnNldEhlaWdodFwiKSxjLmJpbmQoXCJjbGlja1wiLHMpKTpjLnVuYmluZChcImNsaWNrXCIscyl9KSxoLnNlbGVjdD1mdW5jdGlvbihhKXtpZihcInRvZGF5XCI9PT1hKXt2YXIgYj1uZXcgRGF0ZTthbmd1bGFyLmlzRGF0ZShrLiRtb2RlbFZhbHVlKT8oYT1uZXcgRGF0ZShrLiRtb2RlbFZhbHVlKSxhLnNldEZ1bGxZZWFyKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpKTphPW5ldyBEYXRlKGIuc2V0SG91cnMoMCwwLDAsMCkpfWguZGF0ZVNlbGVjdGlvbihhKX0saC5jbG9zZT1mdW5jdGlvbigpe2guaXNPcGVuPSExLGlbMF0uZm9jdXMoKX07dmFyIHU9YShxKShoKTtwP2MuZmluZChcImJvZHlcIikuYXBwZW5kKHUpOmkuYWZ0ZXIodSksaC4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7dS5yZW1vdmUoKSxpLnVuYmluZChcImtleWRvd25cIix0KSxjLnVuYmluZChcImNsaWNrXCIscyl9KX19fV0pLmRpcmVjdGl2ZShcImRhdGVwaWNrZXJQb3B1cFdyYXBcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsbGluazpmdW5jdGlvbihhLGIpe2IuYmluZChcImNsaWNrXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCl9KX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuZHJvcGRvd25cIixbXSkuY29uc3RhbnQoXCJkcm9wZG93bkNvbmZpZ1wiLHtvcGVuQ2xhc3M6XCJvcGVuXCJ9KS5zZXJ2aWNlKFwiZHJvcGRvd25TZXJ2aWNlXCIsW1wiJGRvY3VtZW50XCIsZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDt0aGlzLm9wZW49ZnVuY3Rpb24oZSl7Ynx8KGEuYmluZChcImNsaWNrXCIsYyksYS5iaW5kKFwia2V5ZG93blwiLGQpKSxiJiZiIT09ZSYmKGIuaXNPcGVuPSExKSxiPWV9LHRoaXMuY2xvc2U9ZnVuY3Rpb24oZSl7Yj09PWUmJihiPW51bGwsYS51bmJpbmQoXCJjbGlja1wiLGMpLGEudW5iaW5kKFwia2V5ZG93blwiLGQpKX07dmFyIGM9ZnVuY3Rpb24oYSl7YSYmYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8Yi4kYXBwbHkoZnVuY3Rpb24oKXtiLmlzT3Blbj0hMX0pfSxkPWZ1bmN0aW9uKGEpezI3PT09YS53aGljaCYmKGIuZm9jdXNUb2dnbGVFbGVtZW50KCksYygpKX19XSkuY29udHJvbGxlcihcIkRyb3Bkb3duQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkcGFyc2VcIixcImRyb3Bkb3duQ29uZmlnXCIsXCJkcm9wZG93blNlcnZpY2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnLGg9dGhpcyxpPWEuJG5ldygpLGo9ZC5vcGVuQ2xhc3Msaz1hbmd1bGFyLm5vb3AsbD1iLm9uVG9nZ2xlP2MoYi5vblRvZ2dsZSk6YW5ndWxhci5ub29wO3RoaXMuaW5pdD1mdW5jdGlvbihkKXtoLiRlbGVtZW50PWQsYi5pc09wZW4mJihnPWMoYi5pc09wZW4pLGs9Zy5hc3NpZ24sYS4kd2F0Y2goZyxmdW5jdGlvbihhKXtpLmlzT3Blbj0hIWF9KSl9LHRoaXMudG9nZ2xlPWZ1bmN0aW9uKGEpe3JldHVybiBpLmlzT3Blbj1hcmd1bWVudHMubGVuZ3RoPyEhYTohaS5pc09wZW59LHRoaXMuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIGkuaXNPcGVufSxpLmZvY3VzVG9nZ2xlRWxlbWVudD1mdW5jdGlvbigpe2gudG9nZ2xlRWxlbWVudCYmaC50b2dnbGVFbGVtZW50WzBdLmZvY3VzKCl9LGkuJHdhdGNoKFwiaXNPcGVuXCIsZnVuY3Rpb24oYixjKXtmW2I/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oaC4kZWxlbWVudCxqKSxiPyhpLmZvY3VzVG9nZ2xlRWxlbWVudCgpLGUub3BlbihpKSk6ZS5jbG9zZShpKSxrKGEsYiksYW5ndWxhci5pc0RlZmluZWQoYikmJmIhPT1jJiZsKGEse29wZW46ISFifSl9KSxhLiRvbihcIiRsb2NhdGlvbkNoYW5nZVN1Y2Nlc3NcIixmdW5jdGlvbigpe2kuaXNPcGVuPSExfSksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7aS4kZGVzdHJveSgpfSl9XSkuZGlyZWN0aXZlKFwiZHJvcGRvd25cIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkNBXCIsY29udHJvbGxlcjpcIkRyb3Bkb3duQ29udHJvbGxlclwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5pbml0KGIpfX19KS5kaXJlY3RpdmUoXCJkcm9wZG93blRvZ2dsZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQ0FcIixyZXF1aXJlOlwiP15kcm9wZG93blwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZCl7ZC50b2dnbGVFbGVtZW50PWI7dmFyIGU9ZnVuY3Rpb24oZSl7ZS5wcmV2ZW50RGVmYXVsdCgpLGIuaGFzQ2xhc3MoXCJkaXNhYmxlZFwiKXx8Yy5kaXNhYmxlZHx8YS4kYXBwbHkoZnVuY3Rpb24oKXtkLnRvZ2dsZSgpfSl9O2IuYmluZChcImNsaWNrXCIsZSksYi5hdHRyKHtcImFyaWEtaGFzcG9wdXBcIjohMCxcImFyaWEtZXhwYW5kZWRcIjohMX0pLGEuJHdhdGNoKGQuaXNPcGVuLGZ1bmN0aW9uKGEpe2IuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhIWEpfSksYS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Yi51bmJpbmQoXCJjbGlja1wiLGUpfSl9fX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5tb2RhbFwiLFtcInVpLmJvb3RzdHJhcC50cmFuc2l0aW9uXCJdKS5mYWN0b3J5KFwiJCRzdGFja2VkTWFwXCIsZnVuY3Rpb24oKXtyZXR1cm57Y3JlYXRlTmV3OmZ1bmN0aW9uKCl7dmFyIGE9W107cmV0dXJue2FkZDpmdW5jdGlvbihiLGMpe2EucHVzaCh7a2V5OmIsdmFsdWU6Y30pfSxnZXQ6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspaWYoYj09YVtjXS5rZXkpcmV0dXJuIGFbY119LGtleXM6ZnVuY3Rpb24oKXtmb3IodmFyIGI9W10sYz0wO2M8YS5sZW5ndGg7YysrKWIucHVzaChhW2NdLmtleSk7cmV0dXJuIGJ9LHRvcDpmdW5jdGlvbigpe3JldHVybiBhW2EubGVuZ3RoLTFdfSxyZW1vdmU6ZnVuY3Rpb24oYil7Zm9yKHZhciBjPS0xLGQ9MDtkPGEubGVuZ3RoO2QrKylpZihiPT1hW2RdLmtleSl7Yz1kO2JyZWFrfXJldHVybiBhLnNwbGljZShjLDEpWzBdfSxyZW1vdmVUb3A6ZnVuY3Rpb24oKXtyZXR1cm4gYS5zcGxpY2UoYS5sZW5ndGgtMSwxKVswXX0sbGVuZ3RoOmZ1bmN0aW9uKCl7cmV0dXJuIGEubGVuZ3RofX19fX0pLmRpcmVjdGl2ZShcIm1vZGFsQmFja2Ryb3BcIixbXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWxcIixsaW5rOmZ1bmN0aW9uKGIpe2IuYW5pbWF0ZT0hMSxhKGZ1bmN0aW9uKCl7Yi5hbmltYXRlPSEwfSl9fX1dKS5kaXJlY3RpdmUoXCJtb2RhbFdpbmRvd1wiLFtcIiRtb2RhbFN0YWNrXCIsXCIkdGltZW91dFwiLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7aW5kZXg6XCJAXCIsYW5pbWF0ZTpcIj1cIn0scmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHRlbXBsYXRlVXJsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudGVtcGxhdGVVcmx8fFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIn0sbGluazpmdW5jdGlvbihjLGQsZSl7ZC5hZGRDbGFzcyhlLndpbmRvd0NsYXNzfHxcIlwiKSxjLnNpemU9ZS5zaXplLGIoZnVuY3Rpb24oKXtjLmFuaW1hdGU9ITAsZFswXS5mb2N1cygpfSksYy5jbG9zZT1mdW5jdGlvbihiKXt2YXIgYz1hLmdldFRvcCgpO2MmJmMudmFsdWUuYmFja2Ryb3AmJlwic3RhdGljXCIhPWMudmFsdWUuYmFja2Ryb3AmJmIudGFyZ2V0PT09Yi5jdXJyZW50VGFyZ2V0JiYoYi5wcmV2ZW50RGVmYXVsdCgpLGIuc3RvcFByb3BhZ2F0aW9uKCksYS5kaXNtaXNzKGMua2V5LFwiYmFja2Ryb3AgY2xpY2tcIikpfX19fV0pLmZhY3RvcnkoXCIkbW9kYWxTdGFja1wiLFtcIiR0cmFuc2l0aW9uXCIsXCIkdGltZW91dFwiLFwiJGRvY3VtZW50XCIsXCIkY29tcGlsZVwiLFwiJHJvb3RTY29wZVwiLFwiJCRzdGFja2VkTWFwXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoKXtmb3IodmFyIGE9LTEsYj1uLmtleXMoKSxjPTA7YzxiLmxlbmd0aDtjKyspbi5nZXQoYltjXSkudmFsdWUuYmFja2Ryb3AmJihhPWMpO3JldHVybiBhfWZ1bmN0aW9uIGgoYSl7dmFyIGI9Yy5maW5kKFwiYm9keVwiKS5lcSgwKSxkPW4uZ2V0KGEpLnZhbHVlO24ucmVtb3ZlKGEpLGooZC5tb2RhbERvbUVsLGQubW9kYWxTY29wZSwzMDAsZnVuY3Rpb24oKXtkLm1vZGFsU2NvcGUuJGRlc3Ryb3koKSxiLnRvZ2dsZUNsYXNzKG0sbi5sZW5ndGgoKT4wKSxpKCl9KX1mdW5jdGlvbiBpKCl7aWYoayYmLTE9PWcoKSl7dmFyIGE9bDtqKGssbCwxNTAsZnVuY3Rpb24oKXthLiRkZXN0cm95KCksYT1udWxsfSksaz12b2lkIDAsbD12b2lkIDB9fWZ1bmN0aW9uIGooYyxkLGUsZil7ZnVuY3Rpb24gZygpe2cuZG9uZXx8KGcuZG9uZT0hMCxjLnJlbW92ZSgpLGYmJmYoKSl9ZC5hbmltYXRlPSExO3ZhciBoPWEudHJhbnNpdGlvbkVuZEV2ZW50TmFtZTtpZihoKXt2YXIgaT1iKGcsZSk7Yy5iaW5kKGgsZnVuY3Rpb24oKXtiLmNhbmNlbChpKSxnKCksZC4kYXBwbHkoKX0pfWVsc2UgYihnLDApfXZhciBrLGwsbT1cIm1vZGFsLW9wZW5cIixuPWYuY3JlYXRlTmV3KCksbz17fTtyZXR1cm4gZS4kd2F0Y2goZyxmdW5jdGlvbihhKXtsJiYobC5pbmRleD1hKX0pLGMuYmluZChcImtleWRvd25cIixmdW5jdGlvbihhKXt2YXIgYjsyNz09PWEud2hpY2gmJihiPW4udG9wKCksYiYmYi52YWx1ZS5rZXlib2FyZCYmKGEucHJldmVudERlZmF1bHQoKSxlLiRhcHBseShmdW5jdGlvbigpe28uZGlzbWlzcyhiLmtleSxcImVzY2FwZSBrZXkgcHJlc3NcIil9KSkpfSksby5vcGVuPWZ1bmN0aW9uKGEsYil7bi5hZGQoYSx7ZGVmZXJyZWQ6Yi5kZWZlcnJlZCxtb2RhbFNjb3BlOmIuc2NvcGUsYmFja2Ryb3A6Yi5iYWNrZHJvcCxrZXlib2FyZDpiLmtleWJvYXJkfSk7dmFyIGY9Yy5maW5kKFwiYm9keVwiKS5lcSgwKSxoPWcoKTtoPj0wJiYhayYmKGw9ZS4kbmV3KCEwKSxsLmluZGV4PWgsaz1kKFwiPGRpdiBtb2RhbC1iYWNrZHJvcD48L2Rpdj5cIikobCksZi5hcHBlbmQoaykpO3ZhciBpPWFuZ3VsYXIuZWxlbWVudChcIjxkaXYgbW9kYWwtd2luZG93PjwvZGl2PlwiKTtpLmF0dHIoe1widGVtcGxhdGUtdXJsXCI6Yi53aW5kb3dUZW1wbGF0ZVVybCxcIndpbmRvdy1jbGFzc1wiOmIud2luZG93Q2xhc3Msc2l6ZTpiLnNpemUsaW5kZXg6bi5sZW5ndGgoKS0xLGFuaW1hdGU6XCJhbmltYXRlXCJ9KS5odG1sKGIuY29udGVudCk7dmFyIGo9ZChpKShiLnNjb3BlKTtuLnRvcCgpLnZhbHVlLm1vZGFsRG9tRWw9aixmLmFwcGVuZChqKSxmLmFkZENsYXNzKG0pfSxvLmNsb3NlPWZ1bmN0aW9uKGEsYil7dmFyIGM9bi5nZXQoYSkudmFsdWU7YyYmKGMuZGVmZXJyZWQucmVzb2x2ZShiKSxoKGEpKX0sby5kaXNtaXNzPWZ1bmN0aW9uKGEsYil7dmFyIGM9bi5nZXQoYSkudmFsdWU7YyYmKGMuZGVmZXJyZWQucmVqZWN0KGIpLGgoYSkpfSxvLmRpc21pc3NBbGw9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMuZ2V0VG9wKCk7YjspdGhpcy5kaXNtaXNzKGIua2V5LGEpLGI9dGhpcy5nZXRUb3AoKX0sby5nZXRUb3A9ZnVuY3Rpb24oKXtyZXR1cm4gbi50b3AoKX0sb31dKS5wcm92aWRlcihcIiRtb2RhbFwiLGZ1bmN0aW9uKCl7dmFyIGE9e29wdGlvbnM6e2JhY2tkcm9wOiEwLGtleWJvYXJkOiEwfSwkZ2V0OltcIiRpbmplY3RvclwiLFwiJHJvb3RTY29wZVwiLFwiJHFcIixcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRtb2RhbFN0YWNrXCIsZnVuY3Rpb24oYixjLGQsZSxmLGcsaCl7ZnVuY3Rpb24gaShhKXtyZXR1cm4gYS50ZW1wbGF0ZT9kLndoZW4oYS50ZW1wbGF0ZSk6ZS5nZXQoYS50ZW1wbGF0ZVVybCx7Y2FjaGU6Zn0pLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGF0YX0pfWZ1bmN0aW9uIGooYSl7dmFyIGM9W107cmV0dXJuIGFuZ3VsYXIuZm9yRWFjaChhLGZ1bmN0aW9uKGEpeyhhbmd1bGFyLmlzRnVuY3Rpb24oYSl8fGFuZ3VsYXIuaXNBcnJheShhKSkmJmMucHVzaChkLndoZW4oYi5pbnZva2UoYSkpKX0pLGN9dmFyIGs9e307cmV0dXJuIGsub3Blbj1mdW5jdGlvbihiKXt2YXIgZT1kLmRlZmVyKCksZj1kLmRlZmVyKCksaz17cmVzdWx0OmUucHJvbWlzZSxvcGVuZWQ6Zi5wcm9taXNlLGNsb3NlOmZ1bmN0aW9uKGEpe2guY2xvc2UoayxhKX0sZGlzbWlzczpmdW5jdGlvbihhKXtoLmRpc21pc3MoayxhKX19O2lmKGI9YW5ndWxhci5leHRlbmQoe30sYS5vcHRpb25zLGIpLGIucmVzb2x2ZT1iLnJlc29sdmV8fHt9LCFiLnRlbXBsYXRlJiYhYi50ZW1wbGF0ZVVybCl0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgdGVtcGxhdGUgb3IgdGVtcGxhdGVVcmwgb3B0aW9ucyBpcyByZXF1aXJlZC5cIik7dmFyIGw9ZC5hbGwoW2koYildLmNvbmNhdChqKGIucmVzb2x2ZSkpKTtyZXR1cm4gbC50aGVuKGZ1bmN0aW9uKGEpe3ZhciBkPShiLnNjb3BlfHxjKS4kbmV3KCk7ZC4kY2xvc2U9ay5jbG9zZSxkLiRkaXNtaXNzPWsuZGlzbWlzczt2YXIgZixpPXt9LGo9MTtiLmNvbnRyb2xsZXImJihpLiRzY29wZT1kLGkuJG1vZGFsSW5zdGFuY2U9ayxhbmd1bGFyLmZvckVhY2goYi5yZXNvbHZlLGZ1bmN0aW9uKGIsYyl7aVtjXT1hW2orK119KSxmPWcoYi5jb250cm9sbGVyLGkpKSxoLm9wZW4oayx7c2NvcGU6ZCxkZWZlcnJlZDplLGNvbnRlbnQ6YVswXSxiYWNrZHJvcDpiLmJhY2tkcm9wLGtleWJvYXJkOmIua2V5Ym9hcmQsd2luZG93Q2xhc3M6Yi53aW5kb3dDbGFzcyx3aW5kb3dUZW1wbGF0ZVVybDpiLndpbmRvd1RlbXBsYXRlVXJsLHNpemU6Yi5zaXplfSl9LGZ1bmN0aW9uKGEpe2UucmVqZWN0KGEpfSksbC50aGVuKGZ1bmN0aW9uKCl7Zi5yZXNvbHZlKCEwKX0sZnVuY3Rpb24oKXtmLnJlamVjdCghMSl9KSxrfSxrfV19O3JldHVybiBhfSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucGFnaW5hdGlvblwiLFtdKS5jb250cm9sbGVyKFwiUGFnaW5hdGlvbkNvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9LGY9Yi5udW1QYWdlcz9jKGIubnVtUGFnZXMpLmFzc2lnbjphbmd1bGFyLm5vb3A7dGhpcy5pbml0PWZ1bmN0aW9uKGYsZyl7ZT1mLHRoaXMuY29uZmlnPWcsZS4kcmVuZGVyPWZ1bmN0aW9uKCl7ZC5yZW5kZXIoKX0sYi5pdGVtc1BlclBhZ2U/YS4kcGFyZW50LiR3YXRjaChjKGIuaXRlbXNQZXJQYWdlKSxmdW5jdGlvbihiKXtkLml0ZW1zUGVyUGFnZT1wYXJzZUludChiLDEwKSxhLnRvdGFsUGFnZXM9ZC5jYWxjdWxhdGVUb3RhbFBhZ2VzKCl9KTp0aGlzLml0ZW1zUGVyUGFnZT1nLml0ZW1zUGVyUGFnZX0sdGhpcy5jYWxjdWxhdGVUb3RhbFBhZ2VzPWZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5pdGVtc1BlclBhZ2U8MT8xOk1hdGguY2VpbChhLnRvdGFsSXRlbXMvdGhpcy5pdGVtc1BlclBhZ2UpO3JldHVybiBNYXRoLm1heChifHwwLDEpfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2EucGFnZT1wYXJzZUludChlLiR2aWV3VmFsdWUsMTApfHwxfSxhLnNlbGVjdFBhZ2U9ZnVuY3Rpb24oYil7YS5wYWdlIT09YiYmYj4wJiZiPD1hLnRvdGFsUGFnZXMmJihlLiRzZXRWaWV3VmFsdWUoYiksZS4kcmVuZGVyKCkpfSxhLmdldFRleHQ9ZnVuY3Rpb24oYil7cmV0dXJuIGFbYitcIlRleHRcIl18fGQuY29uZmlnW2IrXCJUZXh0XCJdfSxhLm5vUHJldmlvdXM9ZnVuY3Rpb24oKXtyZXR1cm4gMT09PWEucGFnZX0sYS5ub05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gYS5wYWdlPT09YS50b3RhbFBhZ2VzfSxhLiR3YXRjaChcInRvdGFsSXRlbXNcIixmdW5jdGlvbigpe2EudG90YWxQYWdlcz1kLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKX0pLGEuJHdhdGNoKFwidG90YWxQYWdlc1wiLGZ1bmN0aW9uKGIpe2YoYS4kcGFyZW50LGIpLGEucGFnZT5iP2Euc2VsZWN0UGFnZShiKTplLiRyZW5kZXIoKX0pfV0pLmNvbnN0YW50KFwicGFnaW5hdGlvbkNvbmZpZ1wiLHtpdGVtc1BlclBhZ2U6MTAsYm91bmRhcnlMaW5rczohMSxkaXJlY3Rpb25MaW5rczohMCxmaXJzdFRleHQ6XCJGaXJzdFwiLHByZXZpb3VzVGV4dDpcIlByZXZpb3VzXCIsbmV4dFRleHQ6XCJOZXh0XCIsbGFzdFRleHQ6XCJMYXN0XCIscm90YXRlOiEwfSkuZGlyZWN0aXZlKFwicGFnaW5hdGlvblwiLFtcIiRwYXJzZVwiLFwicGFnaW5hdGlvbkNvbmZpZ1wiLGZ1bmN0aW9uKGEsYil7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7dG90YWxJdGVtczpcIj1cIixmaXJzdFRleHQ6XCJAXCIscHJldmlvdXNUZXh0OlwiQFwiLG5leHRUZXh0OlwiQFwiLGxhc3RUZXh0OlwiQFwifSxyZXF1aXJlOltcInBhZ2luYXRpb25cIixcIj9uZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJQYWdpbmF0aW9uQ29udHJvbGxlclwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7ZnVuY3Rpb24gZyhhLGIsYyl7cmV0dXJue251bWJlcjphLHRleHQ6YixhY3RpdmU6Y319ZnVuY3Rpb24gaChhLGIpe3ZhciBjPVtdLGQ9MSxlPWIsZj1hbmd1bGFyLmlzRGVmaW5lZChrKSYmYj5rO2YmJihsPyhkPU1hdGgubWF4KGEtTWF0aC5mbG9vcihrLzIpLDEpLGU9ZCtrLTEsZT5iJiYoZT1iLGQ9ZS1rKzEpKTooZD0oTWF0aC5jZWlsKGEvayktMSkqaysxLGU9TWF0aC5taW4oZCtrLTEsYikpKTtmb3IodmFyIGg9ZDtlPj1oO2grKyl7dmFyIGk9ZyhoLGgsaD09PWEpO2MucHVzaChpKX1pZihmJiYhbCl7aWYoZD4xKXt2YXIgaj1nKGQtMSxcIi4uLlwiLCExKTtjLnVuc2hpZnQoail9aWYoYj5lKXt2YXIgbT1nKGUrMSxcIi4uLlwiLCExKTtjLnB1c2gobSl9fXJldHVybiBjfXZhciBpPWZbMF0saj1mWzFdO2lmKGope3ZhciBrPWFuZ3VsYXIuaXNEZWZpbmVkKGUubWF4U2l6ZSk/Yy4kcGFyZW50LiRldmFsKGUubWF4U2l6ZSk6Yi5tYXhTaXplLGw9YW5ndWxhci5pc0RlZmluZWQoZS5yb3RhdGUpP2MuJHBhcmVudC4kZXZhbChlLnJvdGF0ZSk6Yi5yb3RhdGU7Yy5ib3VuZGFyeUxpbmtzPWFuZ3VsYXIuaXNEZWZpbmVkKGUuYm91bmRhcnlMaW5rcyk/Yy4kcGFyZW50LiRldmFsKGUuYm91bmRhcnlMaW5rcyk6Yi5ib3VuZGFyeUxpbmtzLGMuZGlyZWN0aW9uTGlua3M9YW5ndWxhci5pc0RlZmluZWQoZS5kaXJlY3Rpb25MaW5rcyk/Yy4kcGFyZW50LiRldmFsKGUuZGlyZWN0aW9uTGlua3MpOmIuZGlyZWN0aW9uTGlua3MsaS5pbml0KGosYiksZS5tYXhTaXplJiZjLiRwYXJlbnQuJHdhdGNoKGEoZS5tYXhTaXplKSxmdW5jdGlvbihhKXtrPXBhcnNlSW50KGEsMTApLGkucmVuZGVyKCl9KTt2YXIgbT1pLnJlbmRlcjtpLnJlbmRlcj1mdW5jdGlvbigpe20oKSxjLnBhZ2U+MCYmYy5wYWdlPD1jLnRvdGFsUGFnZXMmJihjLnBhZ2VzPWgoYy5wYWdlLGMudG90YWxQYWdlcykpfX19fX1dKS5jb25zdGFudChcInBhZ2VyQ29uZmlnXCIse2l0ZW1zUGVyUGFnZToxMCxwcmV2aW91c1RleHQ6XCLCqyBQcmV2aW91c1wiLG5leHRUZXh0OlwiTmV4dCDCu1wiLGFsaWduOiEwfSkuZGlyZWN0aXZlKFwicGFnZXJcIixbXCJwYWdlckNvbmZpZ1wiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVBXCIsc2NvcGU6e3RvdGFsSXRlbXM6XCI9XCIscHJldmlvdXNUZXh0OlwiQFwiLG5leHRUZXh0OlwiQFwifSxyZXF1aXJlOltcInBhZ2VyXCIsXCI/bmdNb2RlbFwiXSxjb250cm9sbGVyOlwiUGFnaW5hdGlvbkNvbnRyb2xsZXJcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnZXIuaHRtbFwiLHJlcGxhY2U6ITAsbGluazpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1lWzBdLGc9ZVsxXTtnJiYoYi5hbGlnbj1hbmd1bGFyLmlzRGVmaW5lZChkLmFsaWduKT9iLiRwYXJlbnQuJGV2YWwoZC5hbGlnbik6YS5hbGlnbixmLmluaXQoZyxhKSl9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50b29sdGlwXCIsW1widWkuYm9vdHN0cmFwLnBvc2l0aW9uXCIsXCJ1aS5ib290c3RyYXAuYmluZEh0bWxcIl0pLnByb3ZpZGVyKFwiJHRvb2x0aXBcIixmdW5jdGlvbigpe2Z1bmN0aW9uIGEoYSl7dmFyIGI9L1tBLVpdL2csYz1cIi1cIjtcbnJldHVybiBhLnJlcGxhY2UoYixmdW5jdGlvbihhLGIpe3JldHVybihiP2M6XCJcIikrYS50b0xvd2VyQ2FzZSgpfSl9dmFyIGI9e3BsYWNlbWVudDpcInRvcFwiLGFuaW1hdGlvbjohMCxwb3B1cERlbGF5OjB9LGM9e21vdXNlZW50ZXI6XCJtb3VzZWxlYXZlXCIsY2xpY2s6XCJjbGlja1wiLGZvY3VzOlwiYmx1clwifSxkPXt9O3RoaXMub3B0aW9ucz1mdW5jdGlvbihhKXthbmd1bGFyLmV4dGVuZChkLGEpfSx0aGlzLnNldFRyaWdnZXJzPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGMsYSl9LHRoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkY29tcGlsZVwiLFwiJHRpbWVvdXRcIixcIiRwYXJzZVwiLFwiJGRvY3VtZW50XCIsXCIkcG9zaXRpb25cIixcIiRpbnRlcnBvbGF0ZVwiLGZ1bmN0aW9uKGUsZixnLGgsaSxqLGspe3JldHVybiBmdW5jdGlvbihlLGwsbSl7ZnVuY3Rpb24gbihhKXt2YXIgYj1hfHxvLnRyaWdnZXJ8fG0sZD1jW2JdfHxiO3JldHVybntzaG93OmIsaGlkZTpkfX12YXIgbz1hbmd1bGFyLmV4dGVuZCh7fSxiLGQpLHA9YShlKSxxPWsuc3RhcnRTeW1ib2woKSxyPWsuZW5kU3ltYm9sKCkscz1cIjxkaXYgXCIrcCsnLXBvcHVwIHRpdGxlPVwiJytxK1widHRfdGl0bGVcIityKydcIiBjb250ZW50PVwiJytxK1widHRfY29udGVudFwiK3IrJ1wiIHBsYWNlbWVudD1cIicrcStcInR0X3BsYWNlbWVudFwiK3IrJ1wiIGFuaW1hdGlvbj1cInR0X2FuaW1hdGlvblwiIGlzLW9wZW49XCJ0dF9pc09wZW5cIj48L2Rpdj4nO3JldHVybntyZXN0cmljdDpcIkVBXCIsc2NvcGU6ITAsY29tcGlsZTpmdW5jdGlvbigpe3ZhciBhPWYocyk7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBmKCl7Yi50dF9pc09wZW4/bSgpOmsoKX1mdW5jdGlvbiBrKCl7KCF5fHxiLiRldmFsKGRbbCtcIkVuYWJsZVwiXSkpJiYoYi50dF9wb3B1cERlbGF5P3Z8fCh2PWcocCxiLnR0X3BvcHVwRGVsYXksITEpLHYudGhlbihmdW5jdGlvbihhKXthKCl9KSk6cCgpKCkpfWZ1bmN0aW9uIG0oKXtiLiRhcHBseShmdW5jdGlvbigpe3EoKX0pfWZ1bmN0aW9uIHAoKXtyZXR1cm4gdj1udWxsLHUmJihnLmNhbmNlbCh1KSx1PW51bGwpLGIudHRfY29udGVudD8ocigpLHQuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheTpcImJsb2NrXCJ9KSx3P2kuZmluZChcImJvZHlcIikuYXBwZW5kKHQpOmMuYWZ0ZXIodCkseigpLGIudHRfaXNPcGVuPSEwLGIuJGRpZ2VzdCgpLHopOmFuZ3VsYXIubm9vcH1mdW5jdGlvbiBxKCl7Yi50dF9pc09wZW49ITEsZy5jYW5jZWwodiksdj1udWxsLGIudHRfYW5pbWF0aW9uP3V8fCh1PWcocyw1MDApKTpzKCl9ZnVuY3Rpb24gcigpe3QmJnMoKSx0PWEoYixmdW5jdGlvbigpe30pLGIuJGRpZ2VzdCgpfWZ1bmN0aW9uIHMoKXt1PW51bGwsdCYmKHQucmVtb3ZlKCksdD1udWxsKX12YXIgdCx1LHYsdz1hbmd1bGFyLmlzRGVmaW5lZChvLmFwcGVuZFRvQm9keSk/by5hcHBlbmRUb0JvZHk6ITEseD1uKHZvaWQgMCkseT1hbmd1bGFyLmlzRGVmaW5lZChkW2wrXCJFbmFibGVcIl0pLHo9ZnVuY3Rpb24oKXt2YXIgYT1qLnBvc2l0aW9uRWxlbWVudHMoYyx0LGIudHRfcGxhY2VtZW50LHcpO2EudG9wKz1cInB4XCIsYS5sZWZ0Kz1cInB4XCIsdC5jc3MoYSl9O2IudHRfaXNPcGVuPSExLGQuJG9ic2VydmUoZSxmdW5jdGlvbihhKXtiLnR0X2NvbnRlbnQ9YSwhYSYmYi50dF9pc09wZW4mJnEoKX0pLGQuJG9ic2VydmUobCtcIlRpdGxlXCIsZnVuY3Rpb24oYSl7Yi50dF90aXRsZT1hfSksZC4kb2JzZXJ2ZShsK1wiUGxhY2VtZW50XCIsZnVuY3Rpb24oYSl7Yi50dF9wbGFjZW1lbnQ9YW5ndWxhci5pc0RlZmluZWQoYSk/YTpvLnBsYWNlbWVudH0pLGQuJG9ic2VydmUobCtcIlBvcHVwRGVsYXlcIixmdW5jdGlvbihhKXt2YXIgYz1wYXJzZUludChhLDEwKTtiLnR0X3BvcHVwRGVsYXk9aXNOYU4oYyk/by5wb3B1cERlbGF5OmN9KTt2YXIgQT1mdW5jdGlvbigpe2MudW5iaW5kKHguc2hvdyxrKSxjLnVuYmluZCh4LmhpZGUsbSl9O2QuJG9ic2VydmUobCtcIlRyaWdnZXJcIixmdW5jdGlvbihhKXtBKCkseD1uKGEpLHguc2hvdz09PXguaGlkZT9jLmJpbmQoeC5zaG93LGYpOihjLmJpbmQoeC5zaG93LGspLGMuYmluZCh4LmhpZGUsbSkpfSk7dmFyIEI9Yi4kZXZhbChkW2wrXCJBbmltYXRpb25cIl0pO2IudHRfYW5pbWF0aW9uPWFuZ3VsYXIuaXNEZWZpbmVkKEIpPyEhQjpvLmFuaW1hdGlvbixkLiRvYnNlcnZlKGwrXCJBcHBlbmRUb0JvZHlcIixmdW5jdGlvbihhKXt3PWFuZ3VsYXIuaXNEZWZpbmVkKGEpP2goYSkoYik6d30pLHcmJmIuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKCl7Yi50dF9pc09wZW4mJnEoKX0pLGIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2cuY2FuY2VsKHUpLGcuY2FuY2VsKHYpLEEoKSxzKCl9KX19fX19XX0pLmRpcmVjdGl2ZShcInRvb2x0aXBQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50OlwiQFwiLHBsYWNlbWVudDpcIkBcIixhbmltYXRpb246XCImXCIsaXNPcGVuOlwiJlwifSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCJ9fSkuZGlyZWN0aXZlKFwidG9vbHRpcFwiLFtcIiR0b29sdGlwXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGEoXCJ0b29sdGlwXCIsXCJ0b29sdGlwXCIsXCJtb3VzZWVudGVyXCIpfV0pLmRpcmVjdGl2ZShcInRvb2x0aXBIdG1sVW5zYWZlUG9wdXBcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCxzY29wZTp7Y29udGVudDpcIkBcIixwbGFjZW1lbnQ6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbFwifX0pLmRpcmVjdGl2ZShcInRvb2x0aXBIdG1sVW5zYWZlXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInRvb2x0aXBIdG1sVW5zYWZlXCIsXCJ0b29sdGlwXCIsXCJtb3VzZWVudGVyXCIpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnBvcG92ZXJcIixbXCJ1aS5ib290c3RyYXAudG9vbHRpcFwiXSkuZGlyZWN0aXZlKFwicG9wb3ZlclBvcHVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsc2NvcGU6e3RpdGxlOlwiQFwiLGNvbnRlbnQ6XCJAXCIscGxhY2VtZW50OlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJwb3BvdmVyXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInBvcG92ZXJcIixcInBvcG92ZXJcIixcImNsaWNrXCIpfV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnByb2dyZXNzYmFyXCIsW10pLmNvbnN0YW50KFwicHJvZ3Jlc3NDb25maWdcIix7YW5pbWF0ZTohMCxtYXg6MTAwfSkuY29udHJvbGxlcihcIlByb2dyZXNzQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCJwcm9ncmVzc0NvbmZpZ1wiLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9YW5ndWxhci5pc0RlZmluZWQoYi5hbmltYXRlKT9hLiRwYXJlbnQuJGV2YWwoYi5hbmltYXRlKTpjLmFuaW1hdGU7dGhpcy5iYXJzPVtdLGEubWF4PWFuZ3VsYXIuaXNEZWZpbmVkKGIubWF4KT9hLiRwYXJlbnQuJGV2YWwoYi5tYXgpOmMubWF4LHRoaXMuYWRkQmFyPWZ1bmN0aW9uKGIsYyl7ZXx8Yy5jc3Moe3RyYW5zaXRpb246XCJub25lXCJ9KSx0aGlzLmJhcnMucHVzaChiKSxiLiR3YXRjaChcInZhbHVlXCIsZnVuY3Rpb24oYyl7Yi5wZXJjZW50PSsoMTAwKmMvYS5tYXgpLnRvRml4ZWQoMil9KSxiLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjPW51bGwsZC5yZW1vdmVCYXIoYil9KX0sdGhpcy5yZW1vdmVCYXI9ZnVuY3Rpb24oYSl7dGhpcy5iYXJzLnNwbGljZSh0aGlzLmJhcnMuaW5kZXhPZihhKSwxKX19XSkuZGlyZWN0aXZlKFwicHJvZ3Jlc3NcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLGNvbnRyb2xsZXI6XCJQcm9ncmVzc0NvbnRyb2xsZXJcIixyZXF1aXJlOlwicHJvZ3Jlc3NcIixzY29wZTp7fSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJiYXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLHJlcXVpcmU6XCJecHJvZ3Jlc3NcIixzY29wZTp7dmFsdWU6XCI9XCIsdHlwZTpcIkBcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRCYXIoYSxiKX19fSkuZGlyZWN0aXZlKFwicHJvZ3Jlc3NiYXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0cmFuc2NsdWRlOiEwLGNvbnRyb2xsZXI6XCJQcm9ncmVzc0NvbnRyb2xsZXJcIixzY29wZTp7dmFsdWU6XCI9XCIsdHlwZTpcIkBcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEJhcihhLGFuZ3VsYXIuZWxlbWVudChiLmNoaWxkcmVuKClbMF0pKX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucmF0aW5nXCIsW10pLmNvbnN0YW50KFwicmF0aW5nQ29uZmlnXCIse21heDo1LHN0YXRlT246bnVsbCxzdGF0ZU9mZjpudWxsfSkuY29udHJvbGxlcihcIlJhdGluZ0NvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLFwicmF0aW5nQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH07dGhpcy5pbml0PWZ1bmN0aW9uKGUpe2Q9ZSxkLiRyZW5kZXI9dGhpcy5yZW5kZXIsdGhpcy5zdGF0ZU9uPWFuZ3VsYXIuaXNEZWZpbmVkKGIuc3RhdGVPbik/YS4kcGFyZW50LiRldmFsKGIuc3RhdGVPbik6Yy5zdGF0ZU9uLHRoaXMuc3RhdGVPZmY9YW5ndWxhci5pc0RlZmluZWQoYi5zdGF0ZU9mZik/YS4kcGFyZW50LiRldmFsKGIuc3RhdGVPZmYpOmMuc3RhdGVPZmY7dmFyIGY9YW5ndWxhci5pc0RlZmluZWQoYi5yYXRpbmdTdGF0ZXMpP2EuJHBhcmVudC4kZXZhbChiLnJhdGluZ1N0YXRlcyk6bmV3IEFycmF5KGFuZ3VsYXIuaXNEZWZpbmVkKGIubWF4KT9hLiRwYXJlbnQuJGV2YWwoYi5tYXgpOmMubWF4KTthLnJhbmdlPXRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHMoZil9LHRoaXMuYnVpbGRUZW1wbGF0ZU9iamVjdHM9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKWFbYl09YW5ndWxhci5leHRlbmQoe2luZGV4OmJ9LHtzdGF0ZU9uOnRoaXMuc3RhdGVPbixzdGF0ZU9mZjp0aGlzLnN0YXRlT2ZmfSxhW2JdKTtyZXR1cm4gYX0sYS5yYXRlPWZ1bmN0aW9uKGIpeyFhLnJlYWRvbmx5JiZiPj0wJiZiPD1hLnJhbmdlLmxlbmd0aCYmKGQuJHNldFZpZXdWYWx1ZShiKSxkLiRyZW5kZXIoKSl9LGEuZW50ZXI9ZnVuY3Rpb24oYil7YS5yZWFkb25seXx8KGEudmFsdWU9YiksYS5vbkhvdmVyKHt2YWx1ZTpifSl9LGEucmVzZXQ9ZnVuY3Rpb24oKXthLnZhbHVlPWQuJHZpZXdWYWx1ZSxhLm9uTGVhdmUoKX0sYS5vbktleWRvd249ZnVuY3Rpb24oYil7LygzN3wzOHwzOXw0MCkvLnRlc3QoYi53aGljaCkmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxhLnJhdGUoYS52YWx1ZSsoMzg9PT1iLndoaWNofHwzOT09PWIud2hpY2g/MTotMSkpKX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXthLnZhbHVlPWQuJHZpZXdWYWx1ZX19XSkuZGlyZWN0aXZlKFwicmF0aW5nXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcXVpcmU6W1wicmF0aW5nXCIsXCJuZ01vZGVsXCJdLHNjb3BlOntyZWFkb25seTpcIj0/XCIsb25Ib3ZlcjpcIiZcIixvbkxlYXZlOlwiJlwifSxjb250cm9sbGVyOlwiUmF0aW5nQ29udHJvbGxlclwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIscmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWRbMF0sZj1kWzFdO2YmJmUuaW5pdChmKX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudGFic1wiLFtdKS5jb250cm9sbGVyKFwiVGFic2V0Q29udHJvbGxlclwiLFtcIiRzY29wZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnRhYnM9YS50YWJzPVtdO2Iuc2VsZWN0PWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZm9yRWFjaChjLGZ1bmN0aW9uKGIpe2IuYWN0aXZlJiZiIT09YSYmKGIuYWN0aXZlPSExLGIub25EZXNlbGVjdCgpKX0pLGEuYWN0aXZlPSEwLGEub25TZWxlY3QoKX0sYi5hZGRUYWI9ZnVuY3Rpb24oYSl7Yy5wdXNoKGEpLDE9PT1jLmxlbmd0aD9hLmFjdGl2ZT0hMDphLmFjdGl2ZSYmYi5zZWxlY3QoYSl9LGIucmVtb3ZlVGFiPWZ1bmN0aW9uKGEpe3ZhciBkPWMuaW5kZXhPZihhKTtpZihhLmFjdGl2ZSYmYy5sZW5ndGg+MSl7dmFyIGU9ZD09Yy5sZW5ndGgtMT9kLTE6ZCsxO2Iuc2VsZWN0KGNbZV0pfWMuc3BsaWNlKGQsMSl9fV0pLmRpcmVjdGl2ZShcInRhYnNldFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIix0cmFuc2NsdWRlOiEwLHJlcGxhY2U6ITAsc2NvcGU6e3R5cGU6XCJAXCJ9LGNvbnRyb2xsZXI6XCJUYWJzZXRDb250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsbGluazpmdW5jdGlvbihhLGIsYyl7YS52ZXJ0aWNhbD1hbmd1bGFyLmlzRGVmaW5lZChjLnZlcnRpY2FsKT9hLiRwYXJlbnQuJGV2YWwoYy52ZXJ0aWNhbCk6ITEsYS5qdXN0aWZpZWQ9YW5ndWxhci5pc0RlZmluZWQoYy5qdXN0aWZpZWQpP2EuJHBhcmVudC4kZXZhbChjLmp1c3RpZmllZCk6ITF9fX0pLmRpcmVjdGl2ZShcInRhYlwiLFtcIiRwYXJzZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXF1aXJlOlwiXnRhYnNldFwiLHJlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLHRyYW5zY2x1ZGU6ITAsc2NvcGU6e2FjdGl2ZTpcIj0/XCIsaGVhZGluZzpcIkBcIixvblNlbGVjdDpcIiZzZWxlY3RcIixvbkRlc2VsZWN0OlwiJmRlc2VsZWN0XCJ9LGNvbnRyb2xsZXI6ZnVuY3Rpb24oKXt9LGNvbXBpbGU6ZnVuY3Rpb24oYixjLGQpe3JldHVybiBmdW5jdGlvbihiLGMsZSxmKXtiLiR3YXRjaChcImFjdGl2ZVwiLGZ1bmN0aW9uKGEpe2EmJmYuc2VsZWN0KGIpfSksYi5kaXNhYmxlZD0hMSxlLmRpc2FibGVkJiZiLiRwYXJlbnQuJHdhdGNoKGEoZS5kaXNhYmxlZCksZnVuY3Rpb24oYSl7Yi5kaXNhYmxlZD0hIWF9KSxiLnNlbGVjdD1mdW5jdGlvbigpe2IuZGlzYWJsZWR8fChiLmFjdGl2ZT0hMCl9LGYuYWRkVGFiKGIpLGIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2YucmVtb3ZlVGFiKGIpfSksYi4kdHJhbnNjbHVkZUZuPWR9fX19XSkuZGlyZWN0aXZlKFwidGFiSGVhZGluZ1RyYW5zY2x1ZGVcIixbZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIl50YWJcIixsaW5rOmZ1bmN0aW9uKGEsYil7YS4kd2F0Y2goXCJoZWFkaW5nRWxlbWVudFwiLGZ1bmN0aW9uKGEpe2EmJihiLmh0bWwoXCJcIiksYi5hcHBlbmQoYSkpfSl9fX1dKS5kaXJlY3RpdmUoXCJ0YWJDb250ZW50VHJhbnNjbHVkZVwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS50YWdOYW1lJiYoYS5oYXNBdHRyaWJ1dGUoXCJ0YWItaGVhZGluZ1wiKXx8YS5oYXNBdHRyaWJ1dGUoXCJkYXRhLXRhYi1oZWFkaW5nXCIpfHxcInRhYi1oZWFkaW5nXCI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKXx8XCJkYXRhLXRhYi1oZWFkaW5nXCI9PT1hLnRhZ05hbWUudG9Mb3dlckNhc2UoKSl9cmV0dXJue3Jlc3RyaWN0OlwiQVwiLHJlcXVpcmU6XCJedGFic2V0XCIsbGluazpmdW5jdGlvbihiLGMsZCl7dmFyIGU9Yi4kZXZhbChkLnRhYkNvbnRlbnRUcmFuc2NsdWRlKTtlLiR0cmFuc2NsdWRlRm4oZS4kcGFyZW50LGZ1bmN0aW9uKGIpe2FuZ3VsYXIuZm9yRWFjaChiLGZ1bmN0aW9uKGIpe2EoYik/ZS5oZWFkaW5nRWxlbWVudD1iOmMuYXBwZW5kKGIpfSl9KX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudGltZXBpY2tlclwiLFtdKS5jb25zdGFudChcInRpbWVwaWNrZXJDb25maWdcIix7aG91clN0ZXA6MSxtaW51dGVTdGVwOjEsc2hvd01lcmlkaWFuOiEwLG1lcmlkaWFuczpudWxsLHJlYWRvbmx5SW5wdXQ6ITEsbW91c2V3aGVlbDohMH0pLmNvbnRyb2xsZXIoXCJUaW1lcGlja2VyQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkcGFyc2VcIixcIiRsb2dcIixcIiRsb2NhbGVcIixcInRpbWVwaWNrZXJDb25maWdcIixmdW5jdGlvbihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZygpe3ZhciBiPXBhcnNlSW50KGEuaG91cnMsMTApLGM9YS5zaG93TWVyaWRpYW4/Yj4wJiYxMz5iOmI+PTAmJjI0PmI7cmV0dXJuIGM/KGEuc2hvd01lcmlkaWFuJiYoMTI9PT1iJiYoYj0wKSxhLm1lcmlkaWFuPT09cFsxXSYmKGIrPTEyKSksYik6dm9pZCAwfWZ1bmN0aW9uIGgoKXt2YXIgYj1wYXJzZUludChhLm1pbnV0ZXMsMTApO3JldHVybiBiPj0wJiY2MD5iP2I6dm9pZCAwfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGEpJiZhLnRvU3RyaW5nKCkubGVuZ3RoPDI/XCIwXCIrYTphfWZ1bmN0aW9uIGooYSl7aygpLG8uJHNldFZpZXdWYWx1ZShuZXcgRGF0ZShuKSksbChhKX1mdW5jdGlvbiBrKCl7by4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITApLGEuaW52YWxpZEhvdXJzPSExLGEuaW52YWxpZE1pbnV0ZXM9ITF9ZnVuY3Rpb24gbChiKXt2YXIgYz1uLmdldEhvdXJzKCksZD1uLmdldE1pbnV0ZXMoKTthLnNob3dNZXJpZGlhbiYmKGM9MD09PWN8fDEyPT09Yz8xMjpjJTEyKSxhLmhvdXJzPVwiaFwiPT09Yj9jOmkoYyksYS5taW51dGVzPVwibVwiPT09Yj9kOmkoZCksYS5tZXJpZGlhbj1uLmdldEhvdXJzKCk8MTI/cFswXTpwWzFdfWZ1bmN0aW9uIG0oYSl7dmFyIGI9bmV3IERhdGUobi5nZXRUaW1lKCkrNmU0KmEpO24uc2V0SG91cnMoYi5nZXRIb3VycygpLGIuZ2V0TWludXRlcygpKSxqKCl9dmFyIG49bmV3IERhdGUsbz17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9LHA9YW5ndWxhci5pc0RlZmluZWQoYi5tZXJpZGlhbnMpP2EuJHBhcmVudC4kZXZhbChiLm1lcmlkaWFucyk6Zi5tZXJpZGlhbnN8fGUuREFURVRJTUVfRk9STUFUUy5BTVBNUzt0aGlzLmluaXQ9ZnVuY3Rpb24oYyxkKXtvPWMsby4kcmVuZGVyPXRoaXMucmVuZGVyO3ZhciBlPWQuZXEoMCksZz1kLmVxKDEpLGg9YW5ndWxhci5pc0RlZmluZWQoYi5tb3VzZXdoZWVsKT9hLiRwYXJlbnQuJGV2YWwoYi5tb3VzZXdoZWVsKTpmLm1vdXNld2hlZWw7aCYmdGhpcy5zZXR1cE1vdXNld2hlZWxFdmVudHMoZSxnKSxhLnJlYWRvbmx5SW5wdXQ9YW5ndWxhci5pc0RlZmluZWQoYi5yZWFkb25seUlucHV0KT9hLiRwYXJlbnQuJGV2YWwoYi5yZWFkb25seUlucHV0KTpmLnJlYWRvbmx5SW5wdXQsdGhpcy5zZXR1cElucHV0RXZlbnRzKGUsZyl9O3ZhciBxPWYuaG91clN0ZXA7Yi5ob3VyU3RlcCYmYS4kcGFyZW50LiR3YXRjaChjKGIuaG91clN0ZXApLGZ1bmN0aW9uKGEpe3E9cGFyc2VJbnQoYSwxMCl9KTt2YXIgcj1mLm1pbnV0ZVN0ZXA7Yi5taW51dGVTdGVwJiZhLiRwYXJlbnQuJHdhdGNoKGMoYi5taW51dGVTdGVwKSxmdW5jdGlvbihhKXtyPXBhcnNlSW50KGEsMTApfSksYS5zaG93TWVyaWRpYW49Zi5zaG93TWVyaWRpYW4sYi5zaG93TWVyaWRpYW4mJmEuJHBhcmVudC4kd2F0Y2goYyhiLnNob3dNZXJpZGlhbiksZnVuY3Rpb24oYil7aWYoYS5zaG93TWVyaWRpYW49ISFiLG8uJGVycm9yLnRpbWUpe3ZhciBjPWcoKSxkPWgoKTthbmd1bGFyLmlzRGVmaW5lZChjKSYmYW5ndWxhci5pc0RlZmluZWQoZCkmJihuLnNldEhvdXJzKGMpLGooKSl9ZWxzZSBsKCl9KSx0aGlzLnNldHVwTW91c2V3aGVlbEV2ZW50cz1mdW5jdGlvbihiLGMpe3ZhciBkPWZ1bmN0aW9uKGEpe2Eub3JpZ2luYWxFdmVudCYmKGE9YS5vcmlnaW5hbEV2ZW50KTt2YXIgYj1hLndoZWVsRGVsdGE/YS53aGVlbERlbHRhOi1hLmRlbHRhWTtyZXR1cm4gYS5kZXRhaWx8fGI+MH07Yi5iaW5kKFwibW91c2V3aGVlbCB3aGVlbFwiLGZ1bmN0aW9uKGIpe2EuJGFwcGx5KGQoYik/YS5pbmNyZW1lbnRIb3VycygpOmEuZGVjcmVtZW50SG91cnMoKSksYi5wcmV2ZW50RGVmYXVsdCgpfSksYy5iaW5kKFwibW91c2V3aGVlbCB3aGVlbFwiLGZ1bmN0aW9uKGIpe2EuJGFwcGx5KGQoYik/YS5pbmNyZW1lbnRNaW51dGVzKCk6YS5kZWNyZW1lbnRNaW51dGVzKCkpLGIucHJldmVudERlZmF1bHQoKX0pfSx0aGlzLnNldHVwSW5wdXRFdmVudHM9ZnVuY3Rpb24oYixjKXtpZihhLnJlYWRvbmx5SW5wdXQpcmV0dXJuIGEudXBkYXRlSG91cnM9YW5ndWxhci5ub29wLHZvaWQoYS51cGRhdGVNaW51dGVzPWFuZ3VsYXIubm9vcCk7dmFyIGQ9ZnVuY3Rpb24oYixjKXtvLiRzZXRWaWV3VmFsdWUobnVsbCksby4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITEpLGFuZ3VsYXIuaXNEZWZpbmVkKGIpJiYoYS5pbnZhbGlkSG91cnM9YiksYW5ndWxhci5pc0RlZmluZWQoYykmJihhLmludmFsaWRNaW51dGVzPWMpfTthLnVwZGF0ZUhvdXJzPWZ1bmN0aW9uKCl7dmFyIGE9ZygpO2FuZ3VsYXIuaXNEZWZpbmVkKGEpPyhuLnNldEhvdXJzKGEpLGooXCJoXCIpKTpkKCEwKX0sYi5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKCl7IWEuaW52YWxpZEhvdXJzJiZhLmhvdXJzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2EuaG91cnM9aShhLmhvdXJzKX0pfSksYS51cGRhdGVNaW51dGVzPWZ1bmN0aW9uKCl7dmFyIGE9aCgpO2FuZ3VsYXIuaXNEZWZpbmVkKGEpPyhuLnNldE1pbnV0ZXMoYSksaihcIm1cIikpOmQodm9pZCAwLCEwKX0sYy5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKCl7IWEuaW52YWxpZE1pbnV0ZXMmJmEubWludXRlczwxMCYmYS4kYXBwbHkoZnVuY3Rpb24oKXthLm1pbnV0ZXM9aShhLm1pbnV0ZXMpfSl9KX0sdGhpcy5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgYT1vLiRtb2RlbFZhbHVlP25ldyBEYXRlKG8uJG1vZGVsVmFsdWUpOm51bGw7aXNOYU4oYSk/KG8uJHNldFZhbGlkaXR5KFwidGltZVwiLCExKSxkLmVycm9yKCdUaW1lcGlja2VyIGRpcmVjdGl2ZTogXCJuZy1tb2RlbFwiIHZhbHVlIG11c3QgYmUgYSBEYXRlIG9iamVjdCwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgb3IgYSBzdHJpbmcgcmVwcmVzZW50aW5nIGFuIFJGQzI4MjIgb3IgSVNPIDg2MDEgZGF0ZS4nKSk6KGEmJihuPWEpLGsoKSxsKCkpfSxhLmluY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7bSg2MCpxKX0sYS5kZWNyZW1lbnRIb3Vycz1mdW5jdGlvbigpe20oNjAqLXEpfSxhLmluY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXttKHIpfSxhLmRlY3JlbWVudE1pbnV0ZXM9ZnVuY3Rpb24oKXttKC1yKX0sYS50b2dnbGVNZXJpZGlhbj1mdW5jdGlvbigpe20oNzIwKihuLmdldEhvdXJzKCk8MTI/MTotMSkpfX1dKS5kaXJlY3RpdmUoXCJ0aW1lcGlja2VyXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcXVpcmU6W1widGltZXBpY2tlclwiLFwiP15uZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJUaW1lcGlja2VyQ29udHJvbGxlclwiLHJlcGxhY2U6ITAsc2NvcGU6e30sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZiYmZS5pbml0KGYsYi5maW5kKFwiaW5wdXRcIikpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50eXBlYWhlYWRcIixbXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIixcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiXSkuZmFjdG9yeShcInR5cGVhaGVhZFBhcnNlclwiLFtcIiRwYXJzZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPS9eXFxzKiguKj8pKD86XFxzK2FzXFxzKyguKj8pKT9cXHMrZm9yXFxzKyg/OihbXFwkXFx3XVtcXCRcXHdcXGRdKikpXFxzK2luXFxzKyguKikkLztyZXR1cm57cGFyc2U6ZnVuY3Rpb24oYyl7dmFyIGQ9Yy5tYXRjaChiKTtpZighZCl0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHR5cGVhaGVhZCBzcGVjaWZpY2F0aW9uIGluIGZvcm0gb2YgXCJfbW9kZWxWYWx1ZV8gKGFzIF9sYWJlbF8pPyBmb3IgX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1wiIGJ1dCBnb3QgXCInK2MrJ1wiLicpO3JldHVybntpdGVtTmFtZTpkWzNdLHNvdXJjZTphKGRbNF0pLHZpZXdNYXBwZXI6YShkWzJdfHxkWzFdKSxtb2RlbE1hcHBlcjphKGRbMV0pfX19fV0pLmRpcmVjdGl2ZShcInR5cGVhaGVhZFwiLFtcIiRjb21waWxlXCIsXCIkcGFyc2VcIixcIiRxXCIsXCIkdGltZW91dFwiLFwiJGRvY3VtZW50XCIsXCIkcG9zaXRpb25cIixcInR5cGVhaGVhZFBhcnNlclwiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPVs5LDEzLDI3LDM4LDQwXTtyZXR1cm57cmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGksaixrLGwpe3ZhciBtLG49aS4kZXZhbChrLnR5cGVhaGVhZE1pbkxlbmd0aCl8fDEsbz1pLiRldmFsKGsudHlwZWFoZWFkV2FpdE1zKXx8MCxwPWkuJGV2YWwoay50eXBlYWhlYWRFZGl0YWJsZSkhPT0hMSxxPWIoay50eXBlYWhlYWRMb2FkaW5nKS5hc3NpZ258fGFuZ3VsYXIubm9vcCxyPWIoay50eXBlYWhlYWRPblNlbGVjdCkscz1rLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyP2Ioay50eXBlYWhlYWRJbnB1dEZvcm1hdHRlcik6dm9pZCAwLHQ9ay50eXBlYWhlYWRBcHBlbmRUb0JvZHk/aS4kZXZhbChrLnR5cGVhaGVhZEFwcGVuZFRvQm9keSk6ITEsdT1iKGsubmdNb2RlbCkuYXNzaWduLHY9Zy5wYXJzZShrLnR5cGVhaGVhZCksdz1pLiRuZXcoKTtpLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXt3LiRkZXN0cm95KCl9KTt2YXIgeD1cInR5cGVhaGVhZC1cIit3LiRpZCtcIi1cIitNYXRoLmZsb29yKDFlNCpNYXRoLnJhbmRvbSgpKTtqLmF0dHIoe1wiYXJpYS1hdXRvY29tcGxldGVcIjpcImxpc3RcIixcImFyaWEtZXhwYW5kZWRcIjohMSxcImFyaWEtb3duc1wiOnh9KTt2YXIgeT1hbmd1bGFyLmVsZW1lbnQoXCI8ZGl2IHR5cGVhaGVhZC1wb3B1cD48L2Rpdj5cIik7eS5hdHRyKHtpZDp4LG1hdGNoZXM6XCJtYXRjaGVzXCIsYWN0aXZlOlwiYWN0aXZlSWR4XCIsc2VsZWN0Olwic2VsZWN0KGFjdGl2ZUlkeClcIixxdWVyeTpcInF1ZXJ5XCIscG9zaXRpb246XCJwb3NpdGlvblwifSksYW5ndWxhci5pc0RlZmluZWQoay50eXBlYWhlYWRUZW1wbGF0ZVVybCkmJnkuYXR0cihcInRlbXBsYXRlLXVybFwiLGsudHlwZWFoZWFkVGVtcGxhdGVVcmwpO3ZhciB6PWZ1bmN0aW9uKCl7dy5tYXRjaGVzPVtdLHcuYWN0aXZlSWR4PS0xLGouYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMSl9LEE9ZnVuY3Rpb24oYSl7cmV0dXJuIHgrXCItb3B0aW9uLVwiK2F9O3cuJHdhdGNoKFwiYWN0aXZlSWR4XCIsZnVuY3Rpb24oYSl7MD5hP2oucmVtb3ZlQXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiKTpqLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixBKGEpKX0pO3ZhciBCPWZ1bmN0aW9uKGEpe3ZhciBiPXskdmlld1ZhbHVlOmF9O3EoaSwhMCksYy53aGVuKHYuc291cmNlKGksYikpLnRoZW4oZnVuY3Rpb24oYyl7dmFyIGQ9YT09PWwuJHZpZXdWYWx1ZTtpZihkJiZtKWlmKGMubGVuZ3RoPjApe3cuYWN0aXZlSWR4PTAsdy5tYXRjaGVzLmxlbmd0aD0wO2Zvcih2YXIgZT0wO2U8Yy5sZW5ndGg7ZSsrKWJbdi5pdGVtTmFtZV09Y1tlXSx3Lm1hdGNoZXMucHVzaCh7aWQ6QShlKSxsYWJlbDp2LnZpZXdNYXBwZXIodyxiKSxtb2RlbDpjW2VdfSk7dy5xdWVyeT1hLHcucG9zaXRpb249dD9mLm9mZnNldChqKTpmLnBvc2l0aW9uKGopLHcucG9zaXRpb24udG9wPXcucG9zaXRpb24udG9wK2oucHJvcChcIm9mZnNldEhlaWdodFwiKSxqLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITApfWVsc2UgeigpO2QmJnEoaSwhMSl9LGZ1bmN0aW9uKCl7eigpLHEoaSwhMSl9KX07eigpLHcucXVlcnk9dm9pZCAwO3ZhciBDO2wuJHBhcnNlcnMudW5zaGlmdChmdW5jdGlvbihhKXtyZXR1cm4gbT0hMCxhJiZhLmxlbmd0aD49bj9vPjA/KEMmJmQuY2FuY2VsKEMpLEM9ZChmdW5jdGlvbigpe0IoYSl9LG8pKTpCKGEpOihxKGksITEpLHooKSkscD9hOmE/dm9pZCBsLiRzZXRWYWxpZGl0eShcImVkaXRhYmxlXCIsITEpOihsLiRzZXRWYWxpZGl0eShcImVkaXRhYmxlXCIsITApLGEpfSksbC4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3ZhciBiLGMsZD17fTtyZXR1cm4gcz8oZC4kbW9kZWw9YSxzKGksZCkpOihkW3YuaXRlbU5hbWVdPWEsYj12LnZpZXdNYXBwZXIoaSxkKSxkW3YuaXRlbU5hbWVdPXZvaWQgMCxjPXYudmlld01hcHBlcihpLGQpLGIhPT1jP2I6YSl9KSx3LnNlbGVjdD1mdW5jdGlvbihhKXt2YXIgYixjLGU9e307ZVt2Lml0ZW1OYW1lXT1jPXcubWF0Y2hlc1thXS5tb2RlbCxiPXYubW9kZWxNYXBwZXIoaSxlKSx1KGksYiksbC4kc2V0VmFsaWRpdHkoXCJlZGl0YWJsZVwiLCEwKSxyKGkseyRpdGVtOmMsJG1vZGVsOmIsJGxhYmVsOnYudmlld01hcHBlcihpLGUpfSkseigpLGQoZnVuY3Rpb24oKXtqWzBdLmZvY3VzKCl9LDAsITEpfSxqLmJpbmQoXCJrZXlkb3duXCIsZnVuY3Rpb24oYSl7MCE9PXcubWF0Y2hlcy5sZW5ndGgmJi0xIT09aC5pbmRleE9mKGEud2hpY2gpJiYoYS5wcmV2ZW50RGVmYXVsdCgpLDQwPT09YS53aGljaD8ody5hY3RpdmVJZHg9KHcuYWN0aXZlSWR4KzEpJXcubWF0Y2hlcy5sZW5ndGgsdy4kZGlnZXN0KCkpOjM4PT09YS53aGljaD8ody5hY3RpdmVJZHg9KHcuYWN0aXZlSWR4P3cuYWN0aXZlSWR4OncubWF0Y2hlcy5sZW5ndGgpLTEsdy4kZGlnZXN0KCkpOjEzPT09YS53aGljaHx8OT09PWEud2hpY2g/dy4kYXBwbHkoZnVuY3Rpb24oKXt3LnNlbGVjdCh3LmFjdGl2ZUlkeCl9KToyNz09PWEud2hpY2gmJihhLnN0b3BQcm9wYWdhdGlvbigpLHooKSx3LiRkaWdlc3QoKSkpfSksai5iaW5kKFwiYmx1clwiLGZ1bmN0aW9uKCl7bT0hMX0pO3ZhciBEPWZ1bmN0aW9uKGEpe2pbMF0hPT1hLnRhcmdldCYmKHooKSx3LiRkaWdlc3QoKSl9O2UuYmluZChcImNsaWNrXCIsRCksaS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7ZS51bmJpbmQoXCJjbGlja1wiLEQpfSk7dmFyIEU9YSh5KSh3KTt0P2UuZmluZChcImJvZHlcIikuYXBwZW5kKEUpOmouYWZ0ZXIoRSl9fX1dKS5kaXJlY3RpdmUoXCJ0eXBlYWhlYWRQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7bWF0Y2hlczpcIj1cIixxdWVyeTpcIj1cIixhY3RpdmU6XCI9XCIscG9zaXRpb246XCI9XCIsc2VsZWN0OlwiJlwifSxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCIsbGluazpmdW5jdGlvbihhLGIsYyl7YS50ZW1wbGF0ZVVybD1jLnRlbXBsYXRlVXJsLGEuaXNPcGVuPWZ1bmN0aW9uKCl7cmV0dXJuIGEubWF0Y2hlcy5sZW5ndGg+MH0sYS5pc0FjdGl2ZT1mdW5jdGlvbihiKXtyZXR1cm4gYS5hY3RpdmU9PWJ9LGEuc2VsZWN0QWN0aXZlPWZ1bmN0aW9uKGIpe2EuYWN0aXZlPWJ9LGEuc2VsZWN0TWF0Y2g9ZnVuY3Rpb24oYil7YS5zZWxlY3Qoe2FjdGl2ZUlkeDpifSl9fX19KS5kaXJlY3RpdmUoXCJ0eXBlYWhlYWRNYXRjaFwiLFtcIiRodHRwXCIsXCIkdGVtcGxhdGVDYWNoZVwiLFwiJGNvbXBpbGVcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYixjLGQpe3JldHVybntyZXN0cmljdDpcIkVBXCIsc2NvcGU6e2luZGV4OlwiPVwiLG1hdGNoOlwiPVwiLHF1ZXJ5OlwiPVwifSxsaW5rOmZ1bmN0aW9uKGUsZixnKXt2YXIgaD1kKGcudGVtcGxhdGVVcmwpKGUuJHBhcmVudCl8fFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1tYXRjaC5odG1sXCI7YS5nZXQoaCx7Y2FjaGU6Yn0pLnN1Y2Nlc3MoZnVuY3Rpb24oYSl7Zi5yZXBsYWNlV2l0aChjKGEudHJpbSgpKShlKSl9KX19fV0pLmZpbHRlcihcInR5cGVhaGVhZEhpZ2hsaWdodFwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtyZXR1cm4gYS5yZXBsYWNlKC8oWy4/KiteJFtcXF1cXFxcKCl7fXwtXSkvZyxcIlxcXFwkMVwiKX1yZXR1cm4gZnVuY3Rpb24oYixjKXtyZXR1cm4gYz8oXCJcIitiKS5yZXBsYWNlKG5ldyBSZWdFeHAoYShjKSxcImdpXCIpLFwiPHN0cm9uZz4kJjwvc3Ryb25nPlwiKTpifX0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sXCIsJzxkaXYgY2xhc3M9XCJwYW5lbCBwYW5lbC1kZWZhdWx0XCI+XFxuICA8ZGl2IGNsYXNzPVwicGFuZWwtaGVhZGluZ1wiPlxcbiAgICA8aDQgY2xhc3M9XCJwYW5lbC10aXRsZVwiPlxcbiAgICAgIDxhIGNsYXNzPVwiYWNjb3JkaW9uLXRvZ2dsZVwiIG5nLWNsaWNrPVwidG9nZ2xlT3BlbigpXCIgYWNjb3JkaW9uLXRyYW5zY2x1ZGU9XCJoZWFkaW5nXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1tdXRlZFxcJzogaXNEaXNhYmxlZH1cIj57e2hlYWRpbmd9fTwvc3Bhbj48L2E+XFxuICAgIDwvaDQ+XFxuICA8L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJwYW5lbC1jb2xsYXBzZVwiIGNvbGxhcHNlPVwiIWlzT3BlblwiPlxcblx0ICA8ZGl2IGNsYXNzPVwicGFuZWwtYm9keVwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwiLCc8ZGl2IGNsYXNzPVwicGFuZWwtZ3JvdXBcIiBuZy10cmFuc2NsdWRlPjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2FsZXJ0L2FsZXJ0Lmh0bWxcIiwnPGRpdiBjbGFzcz1cImFsZXJ0XCIgbmctY2xhc3M9XCJ7XFwnYWxlcnQte3t0eXBlIHx8IFxcJ3dhcm5pbmdcXCd9fVxcJzogdHJ1ZSwgXFwnYWxlcnQtZGlzbWlzc2FibGVcXCc6IGNsb3NlYWJsZX1cIiByb2xlPVwiYWxlcnRcIj5cXG4gICAgPGJ1dHRvbiBuZy1zaG93PVwiY2xvc2VhYmxlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBuZy1jbGljaz1cImNsb3NlKClcIj5cXG4gICAgICAgIDxzcGFuIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPiZ0aW1lczs8L3NwYW4+XFxuICAgICAgICA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj5DbG9zZTwvc3Bhbj5cXG4gICAgPC9idXR0b24+XFxuICAgIDxkaXYgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sXCIsJzxkaXYgbmctbW91c2VlbnRlcj1cInBhdXNlKClcIiBuZy1tb3VzZWxlYXZlPVwicGxheSgpXCIgY2xhc3M9XCJjYXJvdXNlbFwiIG5nLXN3aXBlLXJpZ2h0PVwicHJldigpXCIgbmctc3dpcGUtbGVmdD1cIm5leHQoKVwiPlxcbiAgICA8b2wgY2xhc3M9XCJjYXJvdXNlbC1pbmRpY2F0b3JzXCIgbmctc2hvdz1cInNsaWRlcy5sZW5ndGggPiAxXCI+XFxuICAgICAgICA8bGkgbmctcmVwZWF0PVwic2xpZGUgaW4gc2xpZGVzIHRyYWNrIGJ5ICRpbmRleFwiIG5nLWNsYXNzPVwie2FjdGl2ZTogaXNBY3RpdmUoc2xpZGUpfVwiIG5nLWNsaWNrPVwic2VsZWN0KHNsaWRlKVwiPjwvbGk+XFxuICAgIDwvb2w+XFxuICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1pbm5lclwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuICAgIDxhIGNsYXNzPVwibGVmdCBjYXJvdXNlbC1jb250cm9sXCIgbmctY2xpY2s9XCJwcmV2KClcIiBuZy1zaG93PVwic2xpZGVzLmxlbmd0aCA+IDFcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XCI+PC9zcGFuPjwvYT5cXG4gICAgPGEgY2xhc3M9XCJyaWdodCBjYXJvdXNlbC1jb250cm9sXCIgbmctY2xpY2s9XCJuZXh0KClcIiBuZy1zaG93PVwic2xpZGVzLmxlbmd0aCA+IDFcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodFwiPjwvc3Bhbj48L2E+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLFwiPGRpdiBuZy1jbGFzcz1cXFwie1xcbiAgICAnYWN0aXZlJzogbGVhdmluZyB8fCAoYWN0aXZlICYmICFlbnRlcmluZyksXFxuICAgICdwcmV2JzogKG5leHQgfHwgYWN0aXZlKSAmJiBkaXJlY3Rpb249PSdwcmV2JyxcXG4gICAgJ25leHQnOiAobmV4dCB8fCBhY3RpdmUpICYmIGRpcmVjdGlvbj09J25leHQnLFxcbiAgICAncmlnaHQnOiBkaXJlY3Rpb249PSdwcmV2JyxcXG4gICAgJ2xlZnQnOiBkaXJlY3Rpb249PSduZXh0J1xcbiAgfVxcXCIgY2xhc3M9XFxcIml0ZW0gdGV4dC1jZW50ZXJcXFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+XFxuXCIpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLCc8ZGl2IG5nLXN3aXRjaD1cImRhdGVwaWNrZXJNb2RlXCIgcm9sZT1cImFwcGxpY2F0aW9uXCIgbmcta2V5ZG93bj1cImtleWRvd24oJGV2ZW50KVwiPlxcbiAgPGRheXBpY2tlciBuZy1zd2l0Y2gtd2hlbj1cImRheVwiIHRhYmluZGV4PVwiMFwiPjwvZGF5cGlja2VyPlxcbiAgPG1vbnRocGlja2VyIG5nLXN3aXRjaC13aGVuPVwibW9udGhcIiB0YWJpbmRleD1cIjBcIj48L21vbnRocGlja2VyPlxcbiAgPHllYXJwaWNrZXIgbmctc3dpdGNoLXdoZW49XCJ5ZWFyXCIgdGFiaW5kZXg9XCIwXCI+PC95ZWFycGlja2VyPlxcbjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF5Lmh0bWxcIiwnPHRhYmxlIHJvbGU9XCJncmlkXCIgYXJpYS1sYWJlbGxlZGJ5PVwie3t1bmlxdWVJZH19LXRpdGxlXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwie3thY3RpdmVEYXRlSWR9fVwiPlxcbiAgPHRoZWFkPlxcbiAgICA8dHI+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIm1vdmUoLTEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGggY29sc3Bhbj1cInt7NSArIHNob3dXZWVrc319XCI+PGJ1dHRvbiBpZD1cInt7dW5pcXVlSWR9fS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIG5nLWNsaWNrPVwidG9nZ2xlTW9kZSgpXCIgdGFiaW5kZXg9XCItMVwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0XCIgbmctY2xpY2s9XCJtb3ZlKDEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgIDwvdHI+XFxuICAgIDx0cj5cXG4gICAgICA8dGggbmctc2hvdz1cInNob3dXZWVrc1wiIGNsYXNzPVwidGV4dC1jZW50ZXJcIj48L3RoPlxcbiAgICAgIDx0aCBuZy1yZXBlYXQ9XCJsYWJlbCBpbiBsYWJlbHMgdHJhY2sgYnkgJGluZGV4XCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjxzbWFsbCBhcmlhLWxhYmVsPVwie3tsYWJlbC5mdWxsfX1cIj57e2xhYmVsLmFiYnJ9fTwvc21hbGw+PC90aD5cXG4gICAgPC90cj5cXG4gIDwvdGhlYWQ+XFxuICA8dGJvZHk+XFxuICAgIDx0ciBuZy1yZXBlYXQ9XCJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXhcIj5cXG4gICAgICA8dGQgbmctc2hvdz1cInNob3dXZWVrc1wiIGNsYXNzPVwidGV4dC1jZW50ZXIgaDZcIj48ZW0+e3sgd2Vla051bWJlcnNbJGluZGV4XSB9fTwvZW0+PC90ZD5cXG4gICAgICA8dGQgbmctcmVwZWF0PVwiZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGVcIiBjbGFzcz1cInRleHQtY2VudGVyXCIgcm9sZT1cImdyaWRjZWxsXCIgaWQ9XCJ7e2R0LnVpZH19XCIgYXJpYS1kaXNhYmxlZD1cInt7ISFkdC5kaXNhYmxlZH19XCI+XFxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBzdHlsZT1cIndpZHRoOjEwMCU7XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgbmctY2xhc3M9XCJ7XFwnYnRuLWluZm9cXCc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cIiBuZy1jbGljaz1cInNlbGVjdChkdC5kYXRlKVwiIG5nLWRpc2FibGVkPVwiZHQuZGlzYWJsZWRcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1tdXRlZFxcJzogZHQuc2Vjb25kYXJ5LCBcXCd0ZXh0LWluZm9cXCc6IGR0LmN1cnJlbnR9XCI+e3tkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxcbiAgICAgIDwvdGQ+XFxuICAgIDwvdHI+XFxuICA8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL21vbnRoLmh0bWxcIiwnPHRhYmxlIHJvbGU9XCJncmlkXCIgYXJpYS1sYWJlbGxlZGJ5PVwie3t1bmlxdWVJZH19LXRpdGxlXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVwie3thY3RpdmVEYXRlSWR9fVwiPlxcbiAgPHRoZWFkPlxcbiAgICA8dHI+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLWxlZnRcIiBuZy1jbGljaz1cIm1vdmUoLTEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiBpZD1cInt7dW5pcXVlSWR9fS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIG5nLWNsaWNrPVwidG9nZ2xlTW9kZSgpXCIgdGFiaW5kZXg9XCItMVwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0XCIgbmctY2xpY2s9XCJtb3ZlKDEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgIDwvdHI+XFxuICA8L3RoZWFkPlxcbiAgPHRib2R5PlxcbiAgICA8dHIgbmctcmVwZWF0PVwicm93IGluIHJvd3MgdHJhY2sgYnkgJGluZGV4XCI+XFxuICAgICAgPHRkIG5nLXJlcGVhdD1cImR0IGluIHJvdyB0cmFjayBieSBkdC5kYXRlXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIHJvbGU9XCJncmlkY2VsbFwiIGlkPVwie3tkdC51aWR9fVwiIGFyaWEtZGlzYWJsZWQ9XCJ7eyEhZHQuZGlzYWJsZWR9fVwiPlxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xhc3M9XCJ7XFwnYnRuLWluZm9cXCc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cIiBuZy1jbGljaz1cInNlbGVjdChkdC5kYXRlKVwiIG5nLWRpc2FibGVkPVwiZHQuZGlzYWJsZWRcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1pbmZvXFwnOiBkdC5jdXJyZW50fVwiPnt7ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG4gICAgICA8L3RkPlxcbiAgICA8L3RyPlxcbiAgPC90Ym9keT5cXG48L3RhYmxlPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvZGF0ZXBpY2tlci9wb3B1cC5odG1sXCIsJzx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiBuZy1zdHlsZT1cIntkaXNwbGF5OiAoaXNPcGVuICYmIFxcJ2Jsb2NrXFwnKSB8fCBcXCdub25lXFwnLCB0b3A6IHBvc2l0aW9uLnRvcCtcXCdweFxcJywgbGVmdDogcG9zaXRpb24ubGVmdCtcXCdweFxcJ31cIiBuZy1rZXlkb3duPVwia2V5ZG93bigkZXZlbnQpXCI+XFxuXHQ8bGkgbmctdHJhbnNjbHVkZT48L2xpPlxcblx0PGxpIG5nLWlmPVwic2hvd0J1dHRvbkJhclwiIHN0eWxlPVwicGFkZGluZzoxMHB4IDlweCAycHhcIj5cXG5cdFx0PHNwYW4gY2xhc3M9XCJidG4tZ3JvdXBcIj5cXG5cdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLWluZm9cIiBuZy1jbGljaz1cInNlbGVjdChcXCd0b2RheVxcJylcIj57eyBnZXRUZXh0KFxcJ2N1cnJlbnRcXCcpIH19PC9idXR0b24+XFxuXHRcdFx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1kYW5nZXJcIiBuZy1jbGljaz1cInNlbGVjdChudWxsKVwiPnt7IGdldFRleHQoXFwnY2xlYXJcXCcpIH19PC9idXR0b24+XFxuXHRcdDwvc3Bhbj5cXG5cdFx0PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1zdWNjZXNzIHB1bGwtcmlnaHRcIiBuZy1jbGljaz1cImNsb3NlKClcIj57eyBnZXRUZXh0KFxcJ2Nsb3NlXFwnKSB9fTwvYnV0dG9uPlxcblx0PC9saT5cXG48L3VsPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvZGF0ZXBpY2tlci95ZWFyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLCc8dGFibGUgcm9sZT1cImdyaWRcIiBhcmlhLWxhYmVsbGVkYnk9XCJ7e3VuaXF1ZUlkfX0tdGl0bGVcIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9XCJ7e2FjdGl2ZURhdGVJZH19XCI+XFxuICA8dGhlYWQ+XFxuICAgIDx0cj5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwibW92ZSgtMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aCBjb2xzcGFuPVwiM1wiPjxidXR0b24gaWQ9XCJ7e3VuaXF1ZUlkfX0tdGl0bGVcIiByb2xlPVwiaGVhZGluZ1wiIGFyaWEtbGl2ZT1cImFzc2VydGl2ZVwiIGFyaWEtYXRvbWljPVwidHJ1ZVwiIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIiBuZy1jbGljaz1cInRvZ2dsZU1vZGUoKVwiIHRhYmluZGV4PVwiLTFcIiBzdHlsZT1cIndpZHRoOjEwMCU7XCI+PHN0cm9uZz57e3RpdGxlfX08L3N0cm9uZz48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1yaWdodFwiIG5nLWNsaWNrPVwibW92ZSgxKVwiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1yaWdodFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICA8L3RyPlxcbiAgPC90aGVhZD5cXG4gIDx0Ym9keT5cXG4gICAgPHRyIG5nLXJlcGVhdD1cInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFwiPlxcbiAgICAgIDx0ZCBuZy1yZXBlYXQ9XCJkdCBpbiByb3cgdHJhY2sgYnkgZHQuZGF0ZVwiIGNsYXNzPVwidGV4dC1jZW50ZXJcIiByb2xlPVwiZ3JpZGNlbGxcIiBpZD1cInt7ZHQudWlkfX1cIiBhcmlhLWRpc2FibGVkPVwie3shIWR0LmRpc2FibGVkfX1cIj5cXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdFwiIG5nLWNsYXNzPVwie1xcJ2J0bi1pbmZvXFwnOiBkdC5zZWxlY3RlZCwgYWN0aXZlOiBpc0FjdGl2ZShkdCl9XCIgbmctY2xpY2s9XCJzZWxlY3QoZHQuZGF0ZSlcIiBuZy1kaXNhYmxlZD1cImR0LmRpc2FibGVkXCIgdGFiaW5kZXg9XCItMVwiPjxzcGFuIG5nLWNsYXNzPVwie1xcJ3RleHQtaW5mb1xcJzogZHQuY3VycmVudH1cIj57e2R0LmxhYmVsfX08L3NwYW4+PC9idXR0b24+XFxuICAgICAgPC90ZD5cXG4gICAgPC90cj5cXG4gIDwvdGJvZHk+XFxuPC90YWJsZT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsJzxkaXYgY2xhc3M9XCJtb2RhbC1iYWNrZHJvcCBmYWRlXCJcXG4gICAgIG5nLWNsYXNzPVwie2luOiBhbmltYXRlfVwiXFxuICAgICBuZy1zdHlsZT1cIntcXCd6LWluZGV4XFwnOiAxMDQwICsgKGluZGV4ICYmIDEgfHwgMCkgKyBpbmRleCoxMH1cIlxcbj48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL21vZGFsL3dpbmRvdy5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIiwnPGRpdiB0YWJpbmRleD1cIi0xXCIgcm9sZT1cImRpYWxvZ1wiIGNsYXNzPVwibW9kYWwgZmFkZVwiIG5nLWNsYXNzPVwie2luOiBhbmltYXRlfVwiIG5nLXN0eWxlPVwie1xcJ3otaW5kZXhcXCc6IDEwNTAgKyBpbmRleCoxMCwgZGlzcGxheTogXFwnYmxvY2tcXCd9XCIgbmctY2xpY2s9XCJjbG9zZSgkZXZlbnQpXCI+XFxuICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIiBuZy1jbGFzcz1cIntcXCdtb2RhbC1zbVxcJzogc2l6ZSA9PSBcXCdzbVxcJywgXFwnbW9kYWwtbGdcXCc6IHNpemUgPT0gXFwnbGdcXCd9XCI+PGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnRcIiBuZy10cmFuc2NsdWRlPjwvZGl2PjwvZGl2PlxcbjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIsJzx1bCBjbGFzcz1cInBhZ2VyXCI+XFxuICA8bGkgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKSwgcHJldmlvdXM6IGFsaWdufVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHBhZ2UgLSAxKVwiPnt7Z2V0VGV4dChcXCdwcmV2aW91c1xcJyl9fTwvYT48L2xpPlxcbiAgPGxpIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub05leHQoKSwgbmV4dDogYWxpZ259XCI+PGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdFBhZ2UocGFnZSArIDEpXCI+e3tnZXRUZXh0KFxcJ25leHRcXCcpfX08L2E+PC9saT5cXG48L3VsPicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLCc8dWwgY2xhc3M9XCJwYWdpbmF0aW9uXCI+XFxuICA8bGkgbmctaWY9XCJib3VuZGFyeUxpbmtzXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vUHJldmlvdXMoKX1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZSgxKVwiPnt7Z2V0VGV4dChcXCdmaXJzdFxcJyl9fTwvYT48L2xpPlxcbiAgPGxpIG5nLWlmPVwiZGlyZWN0aW9uTGlua3NcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9QcmV2aW91cygpfVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHBhZ2UgLSAxKVwiPnt7Z2V0VGV4dChcXCdwcmV2aW91c1xcJyl9fTwvYT48L2xpPlxcbiAgPGxpIG5nLXJlcGVhdD1cInBhZ2UgaW4gcGFnZXMgdHJhY2sgYnkgJGluZGV4XCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBwYWdlLmFjdGl2ZX1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlLm51bWJlcilcIj57e3BhZ2UudGV4dH19PC9hPjwvbGk+XFxuICA8bGkgbmctaWY9XCJkaXJlY3Rpb25MaW5rc1wiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub05leHQoKX1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlICsgMSlcIj57e2dldFRleHQoXFwnbmV4dFxcJyl9fTwvYT48L2xpPlxcbiAgPGxpIG5nLWlmPVwiYm91bmRhcnlMaW5rc1wiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub05leHQoKX1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZSh0b3RhbFBhZ2VzKVwiPnt7Z2V0VGV4dChcXCdsYXN0XFwnKX19PC9hPjwvbGk+XFxuPC91bD4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIiwnPGRpdiBjbGFzcz1cInRvb2x0aXAge3twbGFjZW1lbnR9fVwiIG5nLWNsYXNzPVwieyBpbjogaXNPcGVuKCksIGZhZGU6IGFuaW1hdGlvbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiIGJpbmQtaHRtbC11bnNhZmU9XCJjb250ZW50XCI+PC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtcG9wdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCIsJzxkaXYgY2xhc3M9XCJ0b29sdGlwIHt7cGxhY2VtZW50fX1cIiBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpLCBmYWRlOiBhbmltYXRpb24oKSB9XCI+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtaW5uZXJcIiBuZy1iaW5kPVwiY29udGVudFwiPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcG9wb3Zlci9wb3BvdmVyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicG9wb3ZlciB7e3BsYWNlbWVudH19XCIgbmctY2xhc3M9XCJ7IGluOiBpc09wZW4oKSwgZmFkZTogYW5pbWF0aW9uKCkgfVwiPlxcbiAgPGRpdiBjbGFzcz1cImFycm93XCI+PC9kaXY+XFxuXFxuICA8ZGl2IGNsYXNzPVwicG9wb3Zlci1pbm5lclwiPlxcbiAgICAgIDxoMyBjbGFzcz1cInBvcG92ZXItdGl0bGVcIiBuZy1iaW5kPVwidGl0bGVcIiBuZy1zaG93PVwidGl0bGVcIj48L2gzPlxcbiAgICAgIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWNvbnRlbnRcIiBuZy1iaW5kPVwiY29udGVudFwiPjwvZGl2PlxcbiAgPC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9iYXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsJzxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIiBuZy1jbGFzcz1cInR5cGUgJiYgXFwncHJvZ3Jlc3MtYmFyLVxcJyArIHR5cGVcIiByb2xlPVwicHJvZ3Jlc3NiYXJcIiBhcmlhLXZhbHVlbm93PVwie3t2YWx1ZX19XCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwie3ttYXh9fVwiIG5nLXN0eWxlPVwie3dpZHRoOiBwZXJjZW50ICsgXFwnJVxcJ31cIiBhcmlhLXZhbHVldGV4dD1cInt7cGVyY2VudCB8IG51bWJlcjowfX0lXCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzcy5odG1sXCIsJzxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbFwiLCc8ZGl2IGNsYXNzPVwicHJvZ3Jlc3NcIj5cXG4gIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXJcIiBuZy1jbGFzcz1cInR5cGUgJiYgXFwncHJvZ3Jlc3MtYmFyLVxcJyArIHR5cGVcIiByb2xlPVwicHJvZ3Jlc3NiYXJcIiBhcmlhLXZhbHVlbm93PVwie3t2YWx1ZX19XCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwie3ttYXh9fVwiIG5nLXN0eWxlPVwie3dpZHRoOiBwZXJjZW50ICsgXFwnJVxcJ31cIiBhcmlhLXZhbHVldGV4dD1cInt7cGVyY2VudCB8IG51bWJlcjowfX0lXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLCc8c3BhbiBuZy1tb3VzZWxlYXZlPVwicmVzZXQoKVwiIG5nLWtleWRvd249XCJvbktleWRvd24oJGV2ZW50KVwiIHRhYmluZGV4PVwiMFwiIHJvbGU9XCJzbGlkZXJcIiBhcmlhLXZhbHVlbWluPVwiMFwiIGFyaWEtdmFsdWVtYXg9XCJ7e3JhbmdlLmxlbmd0aH19XCIgYXJpYS12YWx1ZW5vdz1cInt7dmFsdWV9fVwiPlxcbiAgICA8aSBuZy1yZXBlYXQ9XCJyIGluIHJhbmdlIHRyYWNrIGJ5ICRpbmRleFwiIG5nLW1vdXNlZW50ZXI9XCJlbnRlcigkaW5kZXggKyAxKVwiIG5nLWNsaWNrPVwicmF0ZSgkaW5kZXggKyAxKVwiIGNsYXNzPVwiZ2x5cGhpY29uXCIgbmctY2xhc3M9XCIkaW5kZXggPCB2YWx1ZSAmJiAoci5zdGF0ZU9uIHx8IFxcJ2dseXBoaWNvbi1zdGFyXFwnKSB8fCAoci5zdGF0ZU9mZiB8fCBcXCdnbHlwaGljb24tc3Rhci1lbXB0eVxcJylcIj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPih7eyAkaW5kZXggPCB2YWx1ZSA/IFxcJypcXCcgOiBcXCcgXFwnIH19KTwvc3Bhbj5cXG4gICAgPC9pPlxcbjwvc3Bhbj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sXCIsJzxsaSBuZy1jbGFzcz1cInthY3RpdmU6IGFjdGl2ZSwgZGlzYWJsZWQ6IGRpc2FibGVkfVwiPlxcbiAgPGEgbmctY2xpY2s9XCJzZWxlY3QoKVwiIHRhYi1oZWFkaW5nLXRyYW5zY2x1ZGU+e3toZWFkaW5nfX08L2E+XFxuPC9saT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RhYnMvdGFic2V0LXRpdGxlcy5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdGFicy90YWJzZXQtdGl0bGVzLmh0bWxcIixcIjx1bCBjbGFzcz1cXFwibmF2IHt7dHlwZSAmJiAnbmF2LScgKyB0eXBlfX1cXFwiIG5nLWNsYXNzPVxcXCJ7J25hdi1zdGFja2VkJzogdmVydGljYWx9XFxcIj5cXG48L3VsPlxcblwiKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC5odG1sXCIsJ1xcbjxkaXY+XFxuICA8dWwgY2xhc3M9XCJuYXYgbmF2LXt7dHlwZSB8fCBcXCd0YWJzXFwnfX1cIiBuZy1jbGFzcz1cIntcXCduYXYtc3RhY2tlZFxcJzogdmVydGljYWwsIFxcJ25hdi1qdXN0aWZpZWRcXCc6IGp1c3RpZmllZH1cIiBuZy10cmFuc2NsdWRlPjwvdWw+XFxuICA8ZGl2IGNsYXNzPVwidGFiLWNvbnRlbnRcIj5cXG4gICAgPGRpdiBjbGFzcz1cInRhYi1wYW5lXCIgXFxuICAgICAgICAgbmctcmVwZWF0PVwidGFiIGluIHRhYnNcIiBcXG4gICAgICAgICBuZy1jbGFzcz1cInthY3RpdmU6IHRhYi5hY3RpdmV9XCJcXG4gICAgICAgICB0YWItY29udGVudC10cmFuc2NsdWRlPVwidGFiXCI+XFxuICAgIDwvZGl2PlxcbiAgPC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90aW1lcGlja2VyL3RpbWVwaWNrZXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsJzx0YWJsZT5cXG5cdDx0Ym9keT5cXG5cdFx0PHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cXG5cdFx0XHQ8dGQ+PGEgbmctY2xpY2s9XCJpbmNyZW1lbnRIb3VycygpXCIgY2xhc3M9XCJidG4gYnRuLWxpbmtcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi11cFwiPjwvc3Bhbj48L2E+PC90ZD5cXG5cdFx0XHQ8dGQ+Jm5ic3A7PC90ZD5cXG5cdFx0XHQ8dGQ+PGEgbmctY2xpY2s9XCJpbmNyZW1lbnRNaW51dGVzKClcIiBjbGFzcz1cImJ0biBidG4tbGlua1wiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCI+PC9zcGFuPjwvYT48L3RkPlxcblx0XHRcdDx0ZCBuZy1zaG93PVwic2hvd01lcmlkaWFuXCI+PC90ZD5cXG5cdFx0PC90cj5cXG5cdFx0PHRyPlxcblx0XHRcdDx0ZCBzdHlsZT1cIndpZHRoOjUwcHg7XCIgY2xhc3M9XCJmb3JtLWdyb3VwXCIgbmctY2xhc3M9XCJ7XFwnaGFzLWVycm9yXFwnOiBpbnZhbGlkSG91cnN9XCI+XFxuXHRcdFx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cImhvdXJzXCIgbmctY2hhbmdlPVwidXBkYXRlSG91cnMoKVwiIGNsYXNzPVwiZm9ybS1jb250cm9sIHRleHQtY2VudGVyXCIgbmctbW91c2V3aGVlbD1cImluY3JlbWVudEhvdXJzKClcIiBuZy1yZWFkb25seT1cInJlYWRvbmx5SW5wdXRcIiBtYXhsZW5ndGg9XCIyXCI+XFxuXHRcdFx0PC90ZD5cXG5cdFx0XHQ8dGQ+OjwvdGQ+XFxuXHRcdFx0PHRkIHN0eWxlPVwid2lkdGg6NTBweDtcIiBjbGFzcz1cImZvcm0tZ3JvdXBcIiBuZy1jbGFzcz1cIntcXCdoYXMtZXJyb3JcXCc6IGludmFsaWRNaW51dGVzfVwiPlxcblx0XHRcdFx0PGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmctbW9kZWw9XCJtaW51dGVzXCIgbmctY2hhbmdlPVwidXBkYXRlTWludXRlcygpXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXJcIiBuZy1yZWFkb25seT1cInJlYWRvbmx5SW5wdXRcIiBtYXhsZW5ndGg9XCIyXCI+XFxuXHRcdFx0PC90ZD5cXG5cdFx0XHQ8dGQgbmctc2hvdz1cInNob3dNZXJpZGlhblwiPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IHRleHQtY2VudGVyXCIgbmctY2xpY2s9XCJ0b2dnbGVNZXJpZGlhbigpXCI+e3ttZXJpZGlhbn19PC9idXR0b24+PC90ZD5cXG5cdFx0PC90cj5cXG5cdFx0PHRyIGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cXG5cdFx0XHQ8dGQ+PGEgbmctY2xpY2s9XCJkZWNyZW1lbnRIb3VycygpXCIgY2xhc3M9XCJidG4gYnRuLWxpbmtcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXCI+PC9zcGFuPjwvYT48L3RkPlxcblx0XHRcdDx0ZD4mbmJzcDs8L3RkPlxcblx0XHRcdDx0ZD48YSBuZy1jbGljaz1cImRlY3JlbWVudE1pbnV0ZXMoKVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93blwiPjwvc3Bhbj48L2E+PC90ZD5cXG5cdFx0XHQ8dGQgbmctc2hvdz1cInNob3dNZXJpZGlhblwiPjwvdGQ+XFxuXHRcdDwvdHI+XFxuXHQ8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIiwnPGEgdGFiaW5kZXg9XCItMVwiIGJpbmQtaHRtbC11bnNhZmU9XCJtYXRjaC5sYWJlbCB8IHR5cGVhaGVhZEhpZ2hsaWdodDpxdWVyeVwiPjwvYT4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtcG9wdXAuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtcG9wdXAuaHRtbFwiLCc8dWwgY2xhc3M9XCJkcm9wZG93bi1tZW51XCIgbmctaWY9XCJpc09wZW4oKVwiIG5nLXN0eWxlPVwie3RvcDogcG9zaXRpb24udG9wK1xcJ3B4XFwnLCBsZWZ0OiBwb3NpdGlvbi5sZWZ0K1xcJ3B4XFwnfVwiIHN0eWxlPVwiZGlzcGxheTogYmxvY2s7XCIgcm9sZT1cImxpc3Rib3hcIiBhcmlhLWhpZGRlbj1cInt7IWlzT3BlbigpfX1cIj5cXG4gICAgPGxpIG5nLXJlcGVhdD1cIm1hdGNoIGluIG1hdGNoZXMgdHJhY2sgYnkgJGluZGV4XCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBpc0FjdGl2ZSgkaW5kZXgpIH1cIiBuZy1tb3VzZWVudGVyPVwic2VsZWN0QWN0aXZlKCRpbmRleClcIiBuZy1jbGljaz1cInNlbGVjdE1hdGNoKCRpbmRleClcIiByb2xlPVwib3B0aW9uXCIgaWQ9XCJ7e21hdGNoLmlkfX1cIj5cXG4gICAgICAgIDxkaXYgdHlwZWFoZWFkLW1hdGNoIGluZGV4PVwiJGluZGV4XCIgbWF0Y2g9XCJtYXRjaFwiIHF1ZXJ5PVwicXVlcnlcIiB0ZW1wbGF0ZS11cmw9XCJ0ZW1wbGF0ZVVybFwiPjwvZGl2PlxcbiAgICA8L2xpPlxcbjwvdWw+Jylcbn1dKTsiLCJ2YXIgYW5ndWxhclNreWNvbnMgPSBhbmd1bGFyLm1vZHVsZSggJ2FuZ3VsYXItc2t5Y29ucycsIFtdICk7XG5cblxuYW5ndWxhclNreWNvbnMuZGlyZWN0aXZlKCAnc2t5Y29uJywgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnRScsXG4gICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBpY29uOiBcIj1cIixcbiAgICAgICAgICAgIHNpemU6IFwiPVwiXG4gICAgICAgIH0sXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uICggc2NvcGUsIGVsZW1lbnQsIGF0dHJzICkge1xuXG4gICAgICAgICAgICAvLyBtYWtlIGEgY2FudmFzIGZvciBvdXIgaWNvblxuICAgICAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoICdjYW52YXMnICk7XG5cbiAgICAgICAgICAgIC8vIHNldCB0aGUgQ1NTIGNsYXNzIGZyb20gYXR0cmlidXRlXG4gICAgICAgICAgICBpZiAoICFhdHRycy5jbGFzcyApIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuY2xhc3NOYW1lID0gXCJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLmNsYXNzTmFtZSA9IGF0dHJzLmNsYXNzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBzZXQgZGVmYXVsdCBjb2xvciBpZiBcImNvbG9yXCIgYXR0cmlidXRlIG5vdCBwcmVzZW50XG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge307XG4gICAgICAgICAgICBpZiAoICFhdHRycy5jb2xvciApIHtcbiAgICAgICAgICAgICAgICBjb25maWcuY29sb3IgPSBcImJsYWNrXCI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5jb2xvciA9IGF0dHJzLmNvbG9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc2t5Y29ucyA9IG5ldyBTa3ljb25zKCBjb25maWcgKTtcblxuICAgICAgICAgICAgLy8gd2F0Y2ggdGhlIHNpemUgcHJvcGVydHkgZnJvbSB0aGUgY29udHJvbGxlclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCBcInNpemVcIiwgZnVuY3Rpb24gKCBuZXdWYWwsIG9sZFZhbCApIHtcbiAgICAgICAgICAgICAgICBpZiAoIG5ld1ZhbCApIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IG5ld1ZhbDtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzY29wZS5zaXplIHx8IDY0O1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBzY29wZS5zaXplICB8fCA2NDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0cnVlICk7XG5cbiAgICAgICAgICAgIC8vIHdhdGNoIHRoZSBpY29uIHByb3BlcnR5IGZyb20gdGhlIGNvbnRyb2xsZXJcbiAgICAgICAgICAgIHNjb3BlLiR3YXRjaCggXCJpY29uXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBza3ljb25zLmFkZCggY2FudmFzLCBzY29wZS5pY29uICk7XG4gICAgICAgICAgICB9LCB0cnVlICk7XG5cbiAgICAgICAgICAgIHNreWNvbnMucGxheSgpO1xuXG4gICAgICAgICAgICBpZiAoIGVsZW1lbnRbMF0ubm9kZVR5cGUgPT09IDggKSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aCggY2FudmFzICk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGVsZW1lbnRbMF0uYXBwZW5kQ2hpbGQoIGNhbnZhcyApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNreWNvbnMucmVtb3ZlKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgaWYgKHNreWNvbnMubGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc2t5Y29ucy5wYXVzZShjYW52YXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn0gKTtcbiIsIihmdW5jdGlvbihnbG9iYWwpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8qIFNldCB1cCBhIFJlcXVlc3RBbmltYXRpb25GcmFtZSBzaGltIHNvIHdlIGNhbiBhbmltYXRlIGVmZmljaWVudGx5IEZPUlxuICAgICAqIEdSRUFUIEpVU1RJQ0UuICovXG4gICAgdmFyIHJlcXVlc3RJbnRlcnZhbCwgY2FuY2VsSW50ZXJ2YWw7XG5cbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByYWYgPSBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAgIHx8XG4gICAgICAgICAgICAgICAgZ2xvYmFsLndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuICAgICAgICAgICAgICAgIGdsb2JhbC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgfHxcbiAgICAgICAgICAgICAgICBnbG9iYWwub1JlcXVlc3RBbmltYXRpb25GcmFtZSAgICAgIHx8XG4gICAgICAgICAgICAgICAgZ2xvYmFsLm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAsXG4gICAgICAgICAgICBjYWYgPSBnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUgICAgICAgIHx8XG4gICAgICAgICAgICAgICAgZ2xvYmFsLndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lICB8fFxuICAgICAgICAgICAgICAgIGdsb2JhbC5tb3pDYW5jZWxBbmltYXRpb25GcmFtZSAgICAgfHxcbiAgICAgICAgICAgICAgICBnbG9iYWwub0NhbmNlbEFuaW1hdGlvbkZyYW1lICAgICAgIHx8XG4gICAgICAgICAgICAgICAgZ2xvYmFsLm1zQ2FuY2VsQW5pbWF0aW9uRnJhbWUgICAgICA7XG5cbiAgICAgICAgaWYocmFmICYmIGNhZikge1xuICAgICAgICAgICAgcmVxdWVzdEludGVydmFsID0gZnVuY3Rpb24oZm4sIGRlbGF5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGhhbmRsZSA9IHt2YWx1ZTogbnVsbH07XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb29wKCkge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGUudmFsdWUgPSByYWYobG9vcCk7XG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbG9vcCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBjYW5jZWxJbnRlcnZhbCA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgICAgIGNhZihoYW5kbGUudmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxdWVzdEludGVydmFsID0gc2V0SW50ZXJ2YWw7XG4gICAgICAgICAgICBjYW5jZWxJbnRlcnZhbCA9IGNsZWFySW50ZXJ2YWw7XG4gICAgICAgIH1cbiAgICB9KCkpO1xuXG4gICAgLyogQ2F0bXVsbC1yb20gc3BsaW5lIHN0dWZmcy4gKi9cbiAgICAvKlxuICAgICBmdW5jdGlvbiB1cHNhbXBsZShuLCBzcGxpbmUpIHtcbiAgICAgdmFyIHBvbHlsaW5lID0gW10sXG4gICAgIGxlbiA9IHNwbGluZS5sZW5ndGgsXG4gICAgIGJ4ICA9IHNwbGluZVswXSxcbiAgICAgYnkgID0gc3BsaW5lWzFdLFxuICAgICBjeCAgPSBzcGxpbmVbMl0sXG4gICAgIGN5ICA9IHNwbGluZVszXSxcbiAgICAgZHggID0gc3BsaW5lWzRdLFxuICAgICBkeSAgPSBzcGxpbmVbNV0sXG4gICAgIGksIGosIGF4LCBheSwgcHgsIHF4LCByeCwgc3gsIHB5LCBxeSwgcnksIHN5LCB0O1xuXG4gICAgIGZvcihpID0gNjsgaSAhPT0gc3BsaW5lLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgIGF4ID0gYng7XG4gICAgIGJ4ID0gY3g7XG4gICAgIGN4ID0gZHg7XG4gICAgIGR4ID0gc3BsaW5lW2kgICAgXTtcbiAgICAgcHggPSAtMC41ICogYXggKyAxLjUgKiBieCAtIDEuNSAqIGN4ICsgMC41ICogZHg7XG4gICAgIHF4ID0gICAgICAgIGF4IC0gMi41ICogYnggKyAyLjAgKiBjeCAtIDAuNSAqIGR4O1xuICAgICByeCA9IC0wLjUgKiBheCAgICAgICAgICAgICsgMC41ICogY3ggICAgICAgICAgIDtcbiAgICAgc3ggPSAgICAgICAgICAgICAgICAgICBieCAgICAgICAgICAgICAgICAgICAgICA7XG5cbiAgICAgYXkgPSBieTtcbiAgICAgYnkgPSBjeTtcbiAgICAgY3kgPSBkeTtcbiAgICAgZHkgPSBzcGxpbmVbaSArIDFdO1xuICAgICBweSA9IC0wLjUgKiBheSArIDEuNSAqIGJ5IC0gMS41ICogY3kgKyAwLjUgKiBkeTtcbiAgICAgcXkgPSAgICAgICAgYXkgLSAyLjUgKiBieSArIDIuMCAqIGN5IC0gMC41ICogZHk7XG4gICAgIHJ5ID0gLTAuNSAqIGF5ICAgICAgICAgICAgKyAwLjUgKiBjeSAgICAgICAgICAgO1xuICAgICBzeSA9ICAgICAgICAgICAgICAgICAgIGJ5ICAgICAgICAgICAgICAgICAgICAgIDtcblxuICAgICBmb3IoaiA9IDA7IGogIT09IG47ICsraikge1xuICAgICB0ID0gaiAvIG47XG5cbiAgICAgcG9seWxpbmUucHVzaChcbiAgICAgKChweCAqIHQgKyBxeCkgKiB0ICsgcngpICogdCArIHN4LFxuICAgICAoKHB5ICogdCArIHF5KSAqIHQgKyByeSkgKiB0ICsgc3lcbiAgICAgKTtcbiAgICAgfVxuICAgICB9XG5cbiAgICAgcG9seWxpbmUucHVzaChcbiAgICAgcHggKyBxeCArIHJ4ICsgc3gsXG4gICAgIHB5ICsgcXkgKyByeSArIHN5XG4gICAgICk7XG5cbiAgICAgcmV0dXJuIHBvbHlsaW5lO1xuICAgICB9XG5cbiAgICAgZnVuY3Rpb24gZG93bnNhbXBsZShuLCBwb2x5bGluZSkge1xuICAgICB2YXIgbGVuID0gMCxcbiAgICAgaSwgZHgsIGR5O1xuXG4gICAgIGZvcihpID0gMjsgaSAhPT0gcG9seWxpbmUubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgZHggPSBwb2x5bGluZVtpICAgIF0gLSBwb2x5bGluZVtpIC0gMl07XG4gICAgIGR5ID0gcG9seWxpbmVbaSArIDFdIC0gcG9seWxpbmVbaSAtIDFdO1xuICAgICBsZW4gKz0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgfVxuXG4gICAgIGxlbiAvPSBuO1xuXG4gICAgIHZhciBzbWFsbCA9IFtdLFxuICAgICB0YXJnZXQgPSBsZW4sXG4gICAgIG1pbiA9IDAsXG4gICAgIG1heCwgdDtcblxuICAgICBzbWFsbC5wdXNoKHBvbHlsaW5lWzBdLCBwb2x5bGluZVsxXSk7XG5cbiAgICAgZm9yKGkgPSAyOyBpICE9PSBwb2x5bGluZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICBkeCA9IHBvbHlsaW5lW2kgICAgXSAtIHBvbHlsaW5lW2kgLSAyXTtcbiAgICAgZHkgPSBwb2x5bGluZVtpICsgMV0gLSBwb2x5bGluZVtpIC0gMV07XG4gICAgIG1heCA9IG1pbiArIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XG5cbiAgICAgaWYobWF4ID4gdGFyZ2V0KSB7XG4gICAgIHQgPSAodGFyZ2V0IC0gbWluKSAvIChtYXggLSBtaW4pO1xuXG4gICAgIHNtYWxsLnB1c2goXG4gICAgIHBvbHlsaW5lW2kgLSAyXSArIGR4ICogdCxcbiAgICAgcG9seWxpbmVbaSAtIDFdICsgZHkgKiB0XG4gICAgICk7XG5cbiAgICAgdGFyZ2V0ICs9IGxlbjtcbiAgICAgfVxuXG4gICAgIG1pbiA9IG1heDtcbiAgICAgfVxuXG4gICAgIHNtYWxsLnB1c2gocG9seWxpbmVbcG9seWxpbmUubGVuZ3RoIC0gMl0sIHBvbHlsaW5lW3BvbHlsaW5lLmxlbmd0aCAtIDFdKTtcblxuICAgICByZXR1cm4gc21hbGw7XG4gICAgIH1cbiAgICAgKi9cblxuICAgIC8qIERlZmluZSBza3ljb24gdGhpbmdzLiAqL1xuICAgIC8qIEZJWE1FOiBJJ20gKnJlYWxseSByZWFsbHkqIHNvcnJ5IHRoYXQgdGhpcyBjb2RlIGlzIHNvIGdyb3NzLiBSZWFsbHksIEkgYW0uXG4gICAgICogSSdsbCB0cnkgdG8gY2xlYW4gaXQgdXAgZXZlbnR1YWxseSEgUHJvbWlzZSEgKi9cbiAgICB2YXIgS0VZRlJBTUUgPSA1MDAsXG4gICAgICAgIFNUUk9LRSA9IDAuMDgsXG4gICAgICAgIFRBVSA9IDIuMCAqIE1hdGguUEksXG4gICAgICAgIFRXT19PVkVSX1NRUlRfMiA9IDIuMCAvIE1hdGguc3FydCgyKTtcblxuICAgIGZ1bmN0aW9uIGNpcmNsZShjdHgsIHgsIHksIHIpIHtcbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKHgsIHksIHIsIDAsIFRBVSwgZmFsc2UpO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpbmUoY3R4LCBheCwgYXksIGJ4LCBieSkge1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oYXgsIGF5KTtcbiAgICAgICAgY3R4LmxpbmVUbyhieCwgYnkpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHVmZihjdHgsIHQsIGN4LCBjeSwgcngsIHJ5LCBybWluLCBybWF4KSB7XG4gICAgICAgIHZhciBjID0gTWF0aC5jb3ModCAqIFRBVSksXG4gICAgICAgICAgICBzID0gTWF0aC5zaW4odCAqIFRBVSk7XG5cbiAgICAgICAgcm1heCAtPSBybWluO1xuXG4gICAgICAgIGNpcmNsZShcbiAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgIGN4IC0gcyAqIHJ4LFxuICAgICAgICAgICAgY3kgKyBjICogcnkgKyBybWF4ICogMC41LFxuICAgICAgICAgICAgcm1pbiArICgxIC0gYyAqIDAuNSkgKiBybWF4XG4gICAgICAgICk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcHVmZnMoY3R4LCB0LCBjeCwgY3ksIHJ4LCByeSwgcm1pbiwgcm1heCkge1xuICAgICAgICB2YXIgaTtcblxuICAgICAgICBmb3IoaSA9IDU7IGktLTsgKVxuICAgICAgICAgICAgcHVmZihjdHgsIHQgKyBpIC8gNSwgY3gsIGN5LCByeCwgcnksIHJtaW4sIHJtYXgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsb3VkKGN0eCwgdCwgY3gsIGN5LCBjdywgcywgY29sb3IpIHtcbiAgICAgICAgdCAvPSAzMDAwMDtcblxuICAgICAgICB2YXIgYSA9IGN3ICogMC4yMSxcbiAgICAgICAgICAgIGIgPSBjdyAqIDAuMTIsXG4gICAgICAgICAgICBjID0gY3cgKiAwLjI0LFxuICAgICAgICAgICAgZCA9IGN3ICogMC4yODtcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIHB1ZmZzKGN0eCwgdCwgY3gsIGN5LCBhLCBiLCBjLCBkKTtcblxuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW91dCc7XG4gICAgICAgIHB1ZmZzKGN0eCwgdCwgY3gsIGN5LCBhLCBiLCBjIC0gcywgZCAtIHMpO1xuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdW4oY3R4LCB0LCBjeCwgY3ksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB0IC89IDEyMDAwMDtcblxuICAgICAgICB2YXIgYSA9IGN3ICogMC4yNSAtIHMgKiAwLjUsXG4gICAgICAgICAgICBiID0gY3cgKiAwLjMyICsgcyAqIDAuNSxcbiAgICAgICAgICAgIGMgPSBjdyAqIDAuNTAgLSBzICogMC41LFxuICAgICAgICAgICAgaSwgcCwgY29zLCBzaW47XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzO1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmFyYyhjeCwgY3ksIGEsIDAsIFRBVSwgZmFsc2UpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAgICAgZm9yKGkgPSA4OyBpLS07ICkge1xuICAgICAgICAgICAgcCA9ICh0ICsgaSAvIDgpICogVEFVO1xuICAgICAgICAgICAgY29zID0gTWF0aC5jb3MocCk7XG4gICAgICAgICAgICBzaW4gPSBNYXRoLnNpbihwKTtcbiAgICAgICAgICAgIGxpbmUoY3R4LCBjeCArIGNvcyAqIGIsIGN5ICsgc2luICogYiwgY3ggKyBjb3MgKiBjLCBjeSArIHNpbiAqIGMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbW9vbihjdHgsIHQsIGN4LCBjeSwgY3csIHMsIGNvbG9yKSB7XG4gICAgICAgIHQgLz0gMTUwMDA7XG5cbiAgICAgICAgdmFyIGEgPSBjdyAqIDAuMjkgLSBzICogMC41LFxuICAgICAgICAgICAgYiA9IGN3ICogMC4wNSxcbiAgICAgICAgICAgIGMgPSBNYXRoLmNvcyh0ICogVEFVKSxcbiAgICAgICAgICAgIHAgPSBjICogVEFVIC8gLTE2O1xuXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gcztcbiAgICAgICAgY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgICAgIGN0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcblxuICAgICAgICBjeCArPSBjICogYjtcblxuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmMoY3gsIGN5LCBhLCBwICsgVEFVIC8gOCwgcCArIFRBVSAqIDcgLyA4LCBmYWxzZSk7XG4gICAgICAgIGN0eC5hcmMoY3ggKyBNYXRoLmNvcyhwKSAqIGEgKiBUV09fT1ZFUl9TUVJUXzIsIGN5ICsgTWF0aC5zaW4ocCkgKiBhICogVFdPX09WRVJfU1FSVF8yLCBhLCBwICsgVEFVICogNSAvIDgsIHAgKyBUQVUgKiAzIC8gOCwgdHJ1ZSk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJhaW4oY3R4LCB0LCBjeCwgY3ksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB0IC89IDEzNTA7XG5cbiAgICAgICAgdmFyIGEgPSBjdyAqIDAuMTYsXG4gICAgICAgICAgICBiID0gVEFVICogMTEgLyAxMixcbiAgICAgICAgICAgIGMgPSBUQVUgKiAgNyAvIDEyLFxuICAgICAgICAgICAgaSwgcCwgeCwgeTtcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG5cbiAgICAgICAgZm9yKGkgPSA0OyBpLS07ICkge1xuICAgICAgICAgICAgcCA9ICh0ICsgaSAvIDQpICUgMTtcbiAgICAgICAgICAgIHggPSBjeCArICgoaSAtIDEuNSkgLyAxLjUpICogKGkgPT09IDEgfHwgaSA9PT0gMiA/IC0xIDogMSkgKiBhO1xuICAgICAgICAgICAgeSA9IGN5ICsgcCAqIHAgKiBjdztcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCwgeSAtIHMgKiAxLjUpO1xuICAgICAgICAgICAgY3R4LmFyYyh4LCB5LCBzICogMC43NSwgYiwgYywgZmFsc2UpO1xuICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNsZWV0KGN0eCwgdCwgY3gsIGN5LCBjdywgcywgY29sb3IpIHtcbiAgICAgICAgdCAvPSA3NTA7XG5cbiAgICAgICAgdmFyIGEgPSBjdyAqIDAuMTg3NSxcbiAgICAgICAgICAgIGIgPSBUQVUgKiAxMSAvIDEyLFxuICAgICAgICAgICAgYyA9IFRBVSAqICA3IC8gMTIsXG4gICAgICAgICAgICBpLCBwLCB4LCB5O1xuXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gcyAqIDAuNTtcbiAgICAgICAgY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgICAgIGN0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcblxuICAgICAgICBmb3IoaSA9IDQ7IGktLTsgKSB7XG4gICAgICAgICAgICBwID0gKHQgKyBpIC8gNCkgJSAxO1xuICAgICAgICAgICAgeCA9IE1hdGguZmxvb3IoY3ggKyAoKGkgLSAxLjUpIC8gMS41KSAqIChpID09PSAxIHx8IGkgPT09IDIgPyAtMSA6IDEpICogYSkgKyAwLjU7XG4gICAgICAgICAgICB5ID0gY3kgKyBwICogY3c7XG4gICAgICAgICAgICBsaW5lKGN0eCwgeCwgeSAtIHMgKiAxLjUsIHgsIHkgKyBzICogMS41KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNub3coY3R4LCB0LCBjeCwgY3ksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB0IC89IDMwMDA7XG5cbiAgICAgICAgdmFyIGEgID0gY3cgKiAwLjE2LFxuICAgICAgICAgICAgYiAgPSBzICogMC43NSxcbiAgICAgICAgICAgIHUgID0gdCAqIFRBVSAqIDAuNyxcbiAgICAgICAgICAgIHV4ID0gTWF0aC5jb3ModSkgKiBiLFxuICAgICAgICAgICAgdXkgPSBNYXRoLnNpbih1KSAqIGIsXG4gICAgICAgICAgICB2ICA9IHUgKyBUQVUgLyAzLFxuICAgICAgICAgICAgdnggPSBNYXRoLmNvcyh2KSAqIGIsXG4gICAgICAgICAgICB2eSA9IE1hdGguc2luKHYpICogYixcbiAgICAgICAgICAgIHcgID0gdSArIFRBVSAqIDIgLyAzLFxuICAgICAgICAgICAgd3ggPSBNYXRoLmNvcyh3KSAqIGIsXG4gICAgICAgICAgICB3eSA9IE1hdGguc2luKHcpICogYixcbiAgICAgICAgICAgIGksIHAsIHgsIHk7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzICogMC41O1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGZvcihpID0gNDsgaS0tOyApIHtcbiAgICAgICAgICAgIHAgPSAodCArIGkgLyA0KSAlIDE7XG4gICAgICAgICAgICB4ID0gY3ggKyBNYXRoLnNpbigocCArIGkgLyA0KSAqIFRBVSkgKiBhO1xuICAgICAgICAgICAgeSA9IGN5ICsgcCAqIGN3O1xuXG4gICAgICAgICAgICBsaW5lKGN0eCwgeCAtIHV4LCB5IC0gdXksIHggKyB1eCwgeSArIHV5KTtcbiAgICAgICAgICAgIGxpbmUoY3R4LCB4IC0gdngsIHkgLSB2eSwgeCArIHZ4LCB5ICsgdnkpO1xuICAgICAgICAgICAgbGluZShjdHgsIHggLSB3eCwgeSAtIHd5LCB4ICsgd3gsIHkgKyB3eSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmb2diYW5rKGN0eCwgdCwgY3gsIGN5LCBjdywgcywgY29sb3IpIHtcbiAgICAgICAgdCAvPSAzMDAwMDtcblxuICAgICAgICB2YXIgYSA9IGN3ICogMC4yMSxcbiAgICAgICAgICAgIGIgPSBjdyAqIDAuMDYsXG4gICAgICAgICAgICBjID0gY3cgKiAwLjIxLFxuICAgICAgICAgICAgZCA9IGN3ICogMC4yODtcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29sb3I7XG4gICAgICAgIHB1ZmZzKGN0eCwgdCwgY3gsIGN5LCBhLCBiLCBjLCBkKTtcblxuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW91dCc7XG4gICAgICAgIHB1ZmZzKGN0eCwgdCwgY3gsIGN5LCBhLCBiLCBjIC0gcywgZCAtIHMpO1xuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICB9XG5cbiAgICAvKlxuICAgICB2YXIgV0lORF9QQVRIUyA9IFtcbiAgICAgZG93bnNhbXBsZSg2MywgdXBzYW1wbGUoOCwgW1xuICAgICAtMS4wMCwgLTAuMjgsXG4gICAgIC0wLjc1LCAtMC4xOCxcbiAgICAgLTAuNTAsICAwLjEyLFxuICAgICAtMC4yMCwgIDAuMTIsXG4gICAgIC0wLjA0LCAtMC4wNCxcbiAgICAgLTAuMDcsIC0wLjE4LFxuICAgICAtMC4xOSwgLTAuMTgsXG4gICAgIC0wLjIzLCAtMC4wNSxcbiAgICAgLTAuMTIsICAwLjExLFxuICAgICAwLjAyLCAgMC4xNixcbiAgICAgMC4yMCwgIDAuMTUsXG4gICAgIDAuNTAsICAwLjA3LFxuICAgICAwLjc1LCAgMC4xOCxcbiAgICAgMS4wMCwgIDAuMjhcbiAgICAgXSkpLFxuICAgICBkb3duc2FtcGxlKDMxLCB1cHNhbXBsZSgxNiwgW1xuICAgICAtMS4wMCwgLTAuMTAsXG4gICAgIC0wLjc1LCAgMC4wMCxcbiAgICAgLTAuNTAsICAwLjEwLFxuICAgICAtMC4yNSwgIDAuMTQsXG4gICAgIDAuMDAsICAwLjEwLFxuICAgICAwLjI1LCAgMC4wMCxcbiAgICAgMC41MCwgLTAuMTAsXG4gICAgIDAuNzUsIC0wLjE0LFxuICAgICAxLjAwLCAtMC4xMFxuICAgICBdKSlcbiAgICAgXTtcbiAgICAgKi9cblxuICAgIHZhciBXSU5EX1BBVEhTID0gW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIC0wLjc1MDAsIC0wLjE4MDAsIC0wLjcyMTksIC0wLjE1MjcsIC0wLjY5NzEsIC0wLjEyMjUsXG4gICAgICAgICAgICAgICAgLTAuNjczOSwgLTAuMDkxMCwgLTAuNjUxNiwgLTAuMDU4OCwgLTAuNjI5OCwgLTAuMDI2MixcbiAgICAgICAgICAgICAgICAtMC42MDgzLCAgMC4wMDY1LCAtMC41ODY4LCAgMC4wMzk2LCAtMC41NjQzLCAgMC4wNzMxLFxuICAgICAgICAgICAgICAgIC0wLjUzNzIsICAwLjEwNDEsIC0wLjUwMzMsICAwLjEyNTksIC0wLjQ2NjIsICAwLjE0MDYsXG4gICAgICAgICAgICAgICAgLTAuNDI3NSwgIDAuMTQ5MywgLTAuMzg4MSwgIDAuMTUzMCwgLTAuMzQ4NywgIDAuMTUyNixcbiAgICAgICAgICAgICAgICAtMC4zMDk1LCAgMC4xNDg4LCAtMC4yNzA4LCAgMC4xNDIxLCAtMC4yMzE5LCAgMC4xMzQyLFxuICAgICAgICAgICAgICAgIC0wLjE5NDMsICAwLjEyMTcsIC0wLjE2MDAsICAwLjEwMjUsIC0wLjEyOTAsICAwLjA3ODUsXG4gICAgICAgICAgICAgICAgLTAuMTAxMiwgIDAuMDUwOSwgLTAuMDc2NCwgIDAuMDIwNiwgLTAuMDU0NywgLTAuMDEyMCxcbiAgICAgICAgICAgICAgICAtMC4wMzc4LCAtMC4wNDcyLCAtMC4wMzI0LCAtMC4wODU3LCAtMC4wMzg5LCAtMC4xMjQxLFxuICAgICAgICAgICAgICAgIC0wLjA1NDYsIC0wLjE1OTksIC0wLjA4MTQsIC0wLjE4NzYsIC0wLjExOTMsIC0wLjE5NjQsXG4gICAgICAgICAgICAgICAgLTAuMTU4MiwgLTAuMTkzNSwgLTAuMTkzMSwgLTAuMTc2OSwgLTAuMjE1NywgLTAuMTQ1MyxcbiAgICAgICAgICAgICAgICAtMC4yMjkwLCAtMC4xMDg1LCAtMC4yMzI3LCAtMC4wNjk3LCAtMC4yMjQwLCAtMC4wMzE3LFxuICAgICAgICAgICAgICAgIC0wLjIwNjQsICAwLjAwMzMsIC0wLjE4NTMsICAwLjAzNjIsIC0wLjE2MTMsICAwLjA2NzIsXG4gICAgICAgICAgICAgICAgLTAuMTM1MCwgIDAuMDk2MSwgLTAuMTA1MSwgIDAuMTIxMywgLTAuMDcwNiwgIDAuMTM5NyxcbiAgICAgICAgICAgICAgICAtMC4wMzMyLCAgMC4xNTEyLCAgMC4wMDUzLCAgMC4xNTgwLCAgMC4wNDQyLCAgMC4xNjI0LFxuICAgICAgICAgICAgICAgIDAuMDgzMywgIDAuMTYzNiwgIDAuMTIyNCwgIDAuMTYxNSwgIDAuMTYxMywgIDAuMTU2NSxcbiAgICAgICAgICAgICAgICAwLjE5OTksICAwLjE1MDAsICAwLjIzNzgsICAwLjE0MDIsICAwLjI3NDksICAwLjEyNzksXG4gICAgICAgICAgICAgICAgMC4zMTE4LCAgMC4xMTQ3LCAgMC4zNDg3LCAgMC4xMDE1LCAgMC4zODU4LCAgMC4wODkyLFxuICAgICAgICAgICAgICAgIDAuNDIzNiwgIDAuMDc4NywgIDAuNDYyMSwgIDAuMDcxNSwgIDAuNTAxMiwgIDAuMDcwMixcbiAgICAgICAgICAgICAgICAwLjUzOTgsICAwLjA3NjYsICAwLjU3NjgsICAwLjA4OTAsICAwLjYxMjMsICAwLjEwNTUsXG4gICAgICAgICAgICAgICAgMC42NDY2LCAgMC4xMjQ0LCAgMC42ODA1LCAgMC4xNDQwLCAgMC43MTQ3LCAgMC4xNjMwLFxuICAgICAgICAgICAgICAgIDAuNzUwMCwgIDAuMTgwMFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAtMC43NTAwLCAgMC4wMDAwLCAtMC43MDMzLCAgMC4wMTk1LCAtMC42NTY5LCAgMC4wMzk5LFxuICAgICAgICAgICAgICAgIC0wLjYxMDQsICAwLjA2MDAsIC0wLjU2MzQsICAwLjA3ODksIC0wLjUxNTUsICAwLjA5NTQsXG4gICAgICAgICAgICAgICAgLTAuNDY2NywgIDAuMTA4OSwgLTAuNDE3NCwgIDAuMTIwNiwgLTAuMzY3NiwgIDAuMTI5OSxcbiAgICAgICAgICAgICAgICAtMC4zMTc0LCAgMC4xMzY1LCAtMC4yNjY5LCAgMC4xMzk4LCAtMC4yMTYyLCAgMC4xMzkxLFxuICAgICAgICAgICAgICAgIC0wLjE2NTgsICAwLjEzNDcsIC0wLjExNTcsICAwLjEyNzEsIC0wLjA2NjEsICAwLjExNjksXG4gICAgICAgICAgICAgICAgLTAuMDE3MCwgIDAuMTA0NiwgIDAuMDMxNiwgIDAuMDkwMywgIDAuMDc5MSwgIDAuMDcyOCxcbiAgICAgICAgICAgICAgICAwLjEyNTksICAwLjA1MzQsICAwLjE3MjMsICAwLjAzMzEsICAwLjIxODgsICAwLjAxMjksXG4gICAgICAgICAgICAgICAgMC4yNjU2LCAtMC4wMDY0LCAgMC4zMTIyLCAtMC4wMjYzLCAgMC4zNTg2LCAtMC4wNDY2LFxuICAgICAgICAgICAgICAgIDAuNDA1MiwgLTAuMDY2NSwgIDAuNDUyNSwgLTAuMDg0NywgIDAuNTAwNywgLTAuMTAwMixcbiAgICAgICAgICAgICAgICAwLjU0OTcsIC0wLjExMzAsICAwLjU5OTEsIC0wLjEyNDAsICAwLjY0OTEsIC0wLjEzMjUsXG4gICAgICAgICAgICAgICAgMC42OTk0LCAtMC4xMzgwLCAgMC43NTAwLCAtMC4xNDAwXG4gICAgICAgICAgICBdXG4gICAgICAgIF0sXG4gICAgICAgIFdJTkRfT0ZGU0VUUyA9IFtcbiAgICAgICAgICAgIHtzdGFydDogMC4zNiwgZW5kOiAwLjExfSxcbiAgICAgICAgICAgIHtzdGFydDogMC41NiwgZW5kOiAwLjE2fVxuICAgICAgICBdO1xuXG4gICAgZnVuY3Rpb24gbGVhZihjdHgsIHQsIHgsIHksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB2YXIgYSA9IGN3IC8gOCxcbiAgICAgICAgICAgIGIgPSBhIC8gMyxcbiAgICAgICAgICAgIGMgPSAyICogYixcbiAgICAgICAgICAgIGQgPSAodCAlIDEpICogVEFVLFxuICAgICAgICAgICAgZSA9IE1hdGguY29zKGQpLFxuICAgICAgICAgICAgZiA9IE1hdGguc2luKGQpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzO1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmFyYyh4ICAgICAgICAsIHkgICAgICAgICwgYSwgZCAgICAgICAgICAsIGQgKyBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgIGN0eC5hcmMoeCAtIGIgKiBlLCB5IC0gYiAqIGYsIGMsIGQgKyBNYXRoLlBJLCBkICAgICAgICAgICwgZmFsc2UpO1xuICAgICAgICBjdHguYXJjKHggKyBjICogZSwgeSArIGMgKiBmLCBiLCBkICsgTWF0aC5QSSwgZCAgICAgICAgICAsIHRydWUgKTtcbiAgICAgICAgY3R4Lmdsb2JhbENvbXBvc2l0ZU9wZXJhdGlvbiA9ICdkZXN0aW5hdGlvbi1vdXQnO1xuICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ3NvdXJjZS1vdmVyJztcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN3b29zaChjdHgsIHQsIGN4LCBjeSwgY3csIHMsIGluZGV4LCB0b3RhbCwgY29sb3IpIHtcbiAgICAgICAgdCAvPSAyNTAwO1xuXG4gICAgICAgIHZhciBwYXRoID0gV0lORF9QQVRIU1tpbmRleF0sXG4gICAgICAgICAgICBhID0gKHQgKyBpbmRleCAtIFdJTkRfT0ZGU0VUU1tpbmRleF0uc3RhcnQpICUgdG90YWwsXG4gICAgICAgICAgICBjID0gKHQgKyBpbmRleCAtIFdJTkRfT0ZGU0VUU1tpbmRleF0uZW5kICApICUgdG90YWwsXG4gICAgICAgICAgICBlID0gKHQgKyBpbmRleCAgICAgICAgICAgICAgICAgICAgICAgICAgICApICUgdG90YWwsXG4gICAgICAgICAgICBiLCBkLCBmLCBpO1xuXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gcztcbiAgICAgICAgY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgICAgIGN0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcblxuICAgICAgICBpZihhIDwgMSkge1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgICAgICBhICo9IHBhdGgubGVuZ3RoIC8gMiAtIDE7XG4gICAgICAgICAgICBiICA9IE1hdGguZmxvb3IoYSk7XG4gICAgICAgICAgICBhIC09IGI7XG4gICAgICAgICAgICBiICo9IDI7XG4gICAgICAgICAgICBiICs9IDI7XG5cbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oXG4gICAgICAgICAgICAgICAgY3ggKyAocGF0aFtiIC0gMl0gKiAoMSAtIGEpICsgcGF0aFtiICAgIF0gKiBhKSAqIGN3LFxuICAgICAgICAgICAgICAgIGN5ICsgKHBhdGhbYiAtIDFdICogKDEgLSBhKSArIHBhdGhbYiArIDFdICogYSkgKiBjd1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYoYyA8IDEpIHtcbiAgICAgICAgICAgICAgICBjICo9IHBhdGgubGVuZ3RoIC8gMiAtIDE7XG4gICAgICAgICAgICAgICAgZCAgPSBNYXRoLmZsb29yKGMpO1xuICAgICAgICAgICAgICAgIGMgLT0gZDtcbiAgICAgICAgICAgICAgICBkICo9IDI7XG4gICAgICAgICAgICAgICAgZCArPSAyO1xuXG4gICAgICAgICAgICAgICAgZm9yKGkgPSBiOyBpICE9PSBkOyBpICs9IDIpXG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggKyBwYXRoW2ldICogY3csIGN5ICsgcGF0aFtpICsgMV0gKiBjdyk7XG5cbiAgICAgICAgICAgICAgICBjdHgubGluZVRvKFxuICAgICAgICAgICAgICAgICAgICBjeCArIChwYXRoW2QgLSAyXSAqICgxIC0gYykgKyBwYXRoW2QgICAgXSAqIGMpICogY3csXG4gICAgICAgICAgICAgICAgICAgIGN5ICsgKHBhdGhbZCAtIDFdICogKDEgLSBjKSArIHBhdGhbZCArIDFdICogYykgKiBjd1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBmb3IoaSA9IGI7IGkgIT09IHBhdGgubGVuZ3RoOyBpICs9IDIpXG4gICAgICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggKyBwYXRoW2ldICogY3csIGN5ICsgcGF0aFtpICsgMV0gKiBjdyk7XG5cbiAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVsc2UgaWYoYyA8IDEpIHtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcblxuICAgICAgICAgICAgYyAqPSBwYXRoLmxlbmd0aCAvIDIgLSAxO1xuICAgICAgICAgICAgZCAgPSBNYXRoLmZsb29yKGMpO1xuICAgICAgICAgICAgYyAtPSBkO1xuICAgICAgICAgICAgZCAqPSAyO1xuICAgICAgICAgICAgZCArPSAyO1xuXG4gICAgICAgICAgICBjdHgubW92ZVRvKGN4ICsgcGF0aFswXSAqIGN3LCBjeSArIHBhdGhbMV0gKiBjdyk7XG5cbiAgICAgICAgICAgIGZvcihpID0gMjsgaSAhPT0gZDsgaSArPSAyKVxuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oY3ggKyBwYXRoW2ldICogY3csIGN5ICsgcGF0aFtpICsgMV0gKiBjdyk7XG5cbiAgICAgICAgICAgIGN0eC5saW5lVG8oXG4gICAgICAgICAgICAgICAgY3ggKyAocGF0aFtkIC0gMl0gKiAoMSAtIGMpICsgcGF0aFtkICAgIF0gKiBjKSAqIGN3LFxuICAgICAgICAgICAgICAgIGN5ICsgKHBhdGhbZCAtIDFdICogKDEgLSBjKSArIHBhdGhbZCArIDFdICogYykgKiBjd1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZSA8IDEpIHtcbiAgICAgICAgICAgIGUgKj0gcGF0aC5sZW5ndGggLyAyIC0gMTtcbiAgICAgICAgICAgIGYgID0gTWF0aC5mbG9vcihlKTtcbiAgICAgICAgICAgIGUgLT0gZjtcbiAgICAgICAgICAgIGYgKj0gMjtcbiAgICAgICAgICAgIGYgKz0gMjtcblxuICAgICAgICAgICAgbGVhZihcbiAgICAgICAgICAgICAgICBjdHgsXG4gICAgICAgICAgICAgICAgdCxcbiAgICAgICAgICAgICAgICBjeCArIChwYXRoW2YgLSAyXSAqICgxIC0gZSkgKyBwYXRoW2YgICAgXSAqIGUpICogY3csXG4gICAgICAgICAgICAgICAgY3kgKyAocGF0aFtmIC0gMV0gKiAoMSAtIGUpICsgcGF0aFtmICsgMV0gKiBlKSAqIGN3LFxuICAgICAgICAgICAgICAgIGN3LFxuICAgICAgICAgICAgICAgIHMsXG4gICAgICAgICAgICAgICAgY29sb3JcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgU2t5Y29ucyA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgdGhpcy5saXN0ICAgICAgICA9IFtdO1xuICAgICAgICB0aGlzLmludGVydmFsICAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb2xvciAgICAgICA9IG9wdHMgJiYgb3B0cy5jb2xvciA/IG9wdHMuY29sb3IgOiBcImJsYWNrXCI7XG4gICAgICAgIHRoaXMucmVzaXplQ2xlYXIgPSAhIShvcHRzICYmIG9wdHMucmVzaXplQ2xlYXIpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLkNMRUFSX0RBWSA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIHN1bihjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjUsIHMsIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICB9O1xuXG4gICAgU2t5Y29ucy5DTEVBUl9OSUdIVCA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIG1vb24oY3R4LCB0LCB3ICogMC41LCBoICogMC41LCBzLCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuUEFSVExZX0NMT1VEWV9EQVkgPSBmdW5jdGlvbihjdHgsIHQsIGNvbG9yKSB7XG4gICAgICAgIHZhciB3ID0gY3R4LmNhbnZhcy53aWR0aCxcbiAgICAgICAgICAgIGggPSBjdHguY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIHMgPSBNYXRoLm1pbih3LCBoKTtcblxuICAgICAgICBzdW4oY3R4LCB0LCB3ICogMC42MjUsIGggKiAwLjM3NSwgcyAqIDAuNzUsIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICAgICAgY2xvdWQoY3R4LCB0LCB3ICogMC4zNzUsIGggKiAwLjYyNSwgcyAqIDAuNzUsIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICB9O1xuXG4gICAgU2t5Y29ucy5QQVJUTFlfQ0xPVURZX05JR0hUID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgbW9vbihjdHgsIHQsIHcgKiAwLjY2NywgaCAqIDAuMzc1LCBzICogMC43NSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgICAgICBjbG91ZChjdHgsIHQsIHcgKiAwLjM3NSwgaCAqIDAuNjI1LCBzICogMC43NSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLkNMT1VEWSA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIGNsb3VkKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuNSwgcywgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLlJBSU4gPSBmdW5jdGlvbihjdHgsIHQsIGNvbG9yKSB7XG4gICAgICAgIHZhciB3ID0gY3R4LmNhbnZhcy53aWR0aCxcbiAgICAgICAgICAgIGggPSBjdHguY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIHMgPSBNYXRoLm1pbih3LCBoKTtcblxuICAgICAgICByYWluKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuMzcsIHMgKiAwLjksIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICAgICAgY2xvdWQoY3R4LCB0LCB3ICogMC41LCBoICogMC4zNywgcyAqIDAuOSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLlNMRUVUID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgc2xlZXQoY3R4LCB0LCB3ICogMC41LCBoICogMC4zNywgcyAqIDAuOSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgICAgICBjbG91ZChjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjM3LCBzICogMC45LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuU05PVyA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIHNub3coY3R4LCB0LCB3ICogMC41LCBoICogMC4zNywgcyAqIDAuOSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgICAgICBjbG91ZChjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjM3LCBzICogMC45LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuV0lORCA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIHN3b29zaChjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjUsIHMsIHMgKiBTVFJPS0UsIDAsIDIsIGNvbG9yKTtcbiAgICAgICAgc3dvb3NoKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuNSwgcywgcyAqIFNUUk9LRSwgMSwgMiwgY29sb3IpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLkZPRyA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpLFxuICAgICAgICAgICAgayA9IHMgKiBTVFJPS0U7XG5cbiAgICAgICAgZm9nYmFuayhjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjMyLCBzICogMC43NSwgaywgY29sb3IpO1xuXG4gICAgICAgIHQgLz0gNTAwMDtcblxuICAgICAgICB2YXIgYSA9IE1hdGguY29zKCh0ICAgICAgICkgKiBUQVUpICogcyAqIDAuMDIsXG4gICAgICAgICAgICBiID0gTWF0aC5jb3MoKHQgKyAwLjI1KSAqIFRBVSkgKiBzICogMC4wMixcbiAgICAgICAgICAgIGMgPSBNYXRoLmNvcygodCArIDAuNTApICogVEFVKSAqIHMgKiAwLjAyLFxuICAgICAgICAgICAgZCA9IE1hdGguY29zKCh0ICsgMC43NSkgKiBUQVUpICogcyAqIDAuMDIsXG4gICAgICAgICAgICBuID0gaCAqIDAuOTM2LFxuICAgICAgICAgICAgZSA9IE1hdGguZmxvb3IobiAtIGsgKiAwLjUpICsgMC41LFxuICAgICAgICAgICAgZiA9IE1hdGguZmxvb3IobiAtIGsgKiAyLjUpICsgMC41O1xuXG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gaztcbiAgICAgICAgY3R4LmxpbmVDYXAgPSBcInJvdW5kXCI7XG4gICAgICAgIGN0eC5saW5lSm9pbiA9IFwicm91bmRcIjtcblxuICAgICAgICBsaW5lKGN0eCwgYSArIHcgKiAwLjIgKyBrICogMC41LCBlLCBiICsgdyAqIDAuOCAtIGsgKiAwLjUsIGUpO1xuICAgICAgICBsaW5lKGN0eCwgYyArIHcgKiAwLjIgKyBrICogMC41LCBmLCBkICsgdyAqIDAuOCAtIGsgKiAwLjUsIGYpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLnByb3RvdHlwZSA9IHtcbiAgICAgICAgX2RldGVybWluZURyYXdpbmdGdW5jdGlvbjogZnVuY3Rpb24oZHJhdykge1xuICAgICAgICAgICAgaWYodHlwZW9mIGRyYXcgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgZHJhdyA9IFNreWNvbnNbZHJhdy50b1VwcGVyQ2FzZSgpLnJlcGxhY2UoLy0vZywgXCJfXCIpXSB8fCBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gZHJhdztcbiAgICAgICAgfSxcbiAgICAgICAgYWRkOiBmdW5jdGlvbihlbCwgZHJhdykge1xuICAgICAgICAgICAgdmFyIG9iajtcblxuICAgICAgICAgICAgaWYodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xuXG4gICAgICAgICAgICAvLyBEb2VzIG5vdGhpbmcgaWYgY2FudmFzIG5hbWUgZG9lc24ndCBleGlzdHNcbiAgICAgICAgICAgIGlmKGVsID09PSBudWxsKVxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgZHJhdyA9IHRoaXMuX2RldGVybWluZURyYXdpbmdGdW5jdGlvbihkcmF3KTtcblxuICAgICAgICAgICAgLy8gRG9lcyBub3RoaW5nIGlmIHRoZSBkcmF3IGZ1bmN0aW9uIGlzbid0IGFjdHVhbGx5IGEgZnVuY3Rpb25cbiAgICAgICAgICAgIGlmKHR5cGVvZiBkcmF3ICE9PSBcImZ1bmN0aW9uXCIpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBvYmogPSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudDogZWwsXG4gICAgICAgICAgICAgICAgY29udGV4dDogZWwuZ2V0Q29udGV4dChcIjJkXCIpLFxuICAgICAgICAgICAgICAgIGRyYXdpbmc6IGRyYXdcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMubGlzdC5wdXNoKG9iaik7XG4gICAgICAgICAgICB0aGlzLmRyYXcob2JqLCBLRVlGUkFNRSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24oZWwsIGRyYXcpIHtcbiAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICBpZih0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7XG5cbiAgICAgICAgICAgIGZvcihpID0gdGhpcy5saXN0Lmxlbmd0aDsgaS0tOyApXG4gICAgICAgICAgICAgICAgaWYodGhpcy5saXN0W2ldLmVsZW1lbnQgPT09IGVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdFtpXS5kcmF3aW5nID0gdGhpcy5fZGV0ZXJtaW5lRHJhd2luZ0Z1bmN0aW9uKGRyYXcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYXcodGhpcy5saXN0W2ldLCBLRVlGUkFNRSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWRkKGVsLCBkcmF3KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTtcblxuICAgICAgICAgICAgZm9yKGkgPSB0aGlzLmxpc3QubGVuZ3RoOyBpLS07IClcbiAgICAgICAgICAgICAgICBpZih0aGlzLmxpc3RbaV0uZWxlbWVudCA9PT0gZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0LnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZHJhdzogZnVuY3Rpb24ob2JqLCB0aW1lKSB7XG4gICAgICAgICAgICB2YXIgY2FudmFzID0gb2JqLmNvbnRleHQuY2FudmFzO1xuXG4gICAgICAgICAgICBpZih0aGlzLnJlc2l6ZUNsZWFyKVxuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGNhbnZhcy53aWR0aDtcblxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIG9iai5jb250ZXh0LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgICAgICBvYmouZHJhd2luZyhvYmouY29udGV4dCwgdGltZSwgdGhpcy5jb2xvcik7XG4gICAgICAgIH0sXG4gICAgICAgIHBsYXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgICAgICB0aGlzLmludGVydmFsID0gcmVxdWVzdEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICBpO1xuXG4gICAgICAgICAgICAgICAgZm9yKGkgPSBzZWxmLmxpc3QubGVuZ3RoOyBpLS07IClcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kcmF3KHNlbGYubGlzdFtpXSwgbm93KTtcbiAgICAgICAgICAgIH0sIDEwMDAgLyA2MCk7XG4gICAgICAgIH0sXG4gICAgICAgIHBhdXNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICBpZih0aGlzLmludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgY2FuY2VsSW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcnZhbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZ2xvYmFsLlNreWNvbnMgPSBTa3ljb25zO1xufSh0aGlzKSk7XG4iLCIvLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rIFxcXFxcclxuLy8g77+9IFJhcGhh77+9bCAyLjEuMCAtIEphdmFTY3JpcHQgVmVjdG9yIExpYnJhcnkgICAgICAgICAgICAgICAgICAgICAgICAgIO+/vSBcXFxcXHJcbi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLe+/vSBcXFxcXHJcbi8vIO+/vSBDb3B5cmlnaHQg77+9IDIwMDgtMjAxMiBEbWl0cnkgQmFyYW5vdnNraXkgKGh0dHA6Ly9yYXBoYWVsanMuY29tKSAgICDvv70gXFxcXFxyXG4vLyDvv70gQ29weXJpZ2h0IO+/vSAyMDA4LTIwMTIgU2VuY2hhIExhYnMgKGh0dHA6Ly9zZW5jaGEuY29tKSAgICAgICAgICAgICAg77+9IFxcXFxcclxuLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t77+9IFxcXFxcclxuLy8g77+9IExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgKGh0dHA6Ly9yYXBoYWVsanMuY29tL2xpY2Vuc2UuaHRtbCkgbGljZW5zZS7vv70gXFxcXFxyXG4vLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rIFxcXFxcclxuXHJcbihmdW5jdGlvbihhKXt2YXIgYj1cIjAuMy40XCIsYz1cImhhc093blByb3BlcnR5XCIsZD0vW1xcLlxcL10vLGU9XCIqXCIsZj1mdW5jdGlvbigpe30sZz1mdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9LGgsaSxqPXtuOnt9fSxrPWZ1bmN0aW9uKGEsYil7dmFyIGM9aixkPWksZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMiksZj1rLmxpc3RlbmVycyhhKSxsPTAsbT0hMSxuLG89W10scD17fSxxPVtdLHI9aCxzPVtdO2g9YSxpPTA7Zm9yKHZhciB0PTAsdT1mLmxlbmd0aDt0PHU7dCsrKVwiekluZGV4XCJpbiBmW3RdJiYoby5wdXNoKGZbdF0uekluZGV4KSxmW3RdLnpJbmRleDwwJiYocFtmW3RdLnpJbmRleF09Zlt0XSkpO28uc29ydChnKTt3aGlsZShvW2xdPDApe249cFtvW2wrK11dLHEucHVzaChuLmFwcGx5KGIsZSkpO2lmKGkpe2k9ZDtyZXR1cm4gcX19Zm9yKHQ9MDt0PHU7dCsrKXtuPWZbdF07aWYoXCJ6SW5kZXhcImluIG4paWYobi56SW5kZXg9PW9bbF0pe3EucHVzaChuLmFwcGx5KGIsZSkpO2lmKGkpYnJlYWs7ZG97bCsrLG49cFtvW2xdXSxuJiZxLnB1c2gobi5hcHBseShiLGUpKTtpZihpKWJyZWFrfXdoaWxlKG4pfWVsc2UgcFtuLnpJbmRleF09bjtlbHNle3EucHVzaChuLmFwcGx5KGIsZSkpO2lmKGkpYnJlYWt9fWk9ZCxoPXI7cmV0dXJuIHEubGVuZ3RoP3E6bnVsbH07ay5saXN0ZW5lcnM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zcGxpdChkKSxjPWosZixnLGgsaSxrLGwsbSxuLG89W2NdLHA9W107Zm9yKGk9MCxrPWIubGVuZ3RoO2k8aztpKyspe249W107Zm9yKGw9MCxtPW8ubGVuZ3RoO2w8bTtsKyspe2M9b1tsXS5uLGc9W2NbYltpXV0sY1tlXV0saD0yO3doaWxlKGgtLSlmPWdbaF0sZiYmKG4ucHVzaChmKSxwPXAuY29uY2F0KGYuZnx8W10pKX1vPW59cmV0dXJuIHB9LGsub249ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnNwbGl0KGQpLGU9ajtmb3IodmFyIGc9MCxoPWMubGVuZ3RoO2c8aDtnKyspZT1lLm4sIWVbY1tnXV0mJihlW2NbZ11dPXtuOnt9fSksZT1lW2NbZ11dO2UuZj1lLmZ8fFtdO2ZvcihnPTAsaD1lLmYubGVuZ3RoO2c8aDtnKyspaWYoZS5mW2ddPT1iKXJldHVybiBmO2UuZi5wdXNoKGIpO3JldHVybiBmdW5jdGlvbihhKXsrYT09K2EmJihiLnpJbmRleD0rYSl9fSxrLnN0b3A9ZnVuY3Rpb24oKXtpPTF9LGsubnQ9ZnVuY3Rpb24oYSl7aWYoYSlyZXR1cm4obmV3IFJlZ0V4cChcIig/OlxcXFwufFxcXFwvfF4pXCIrYStcIig/OlxcXFwufFxcXFwvfCQpXCIpKS50ZXN0KGgpO3JldHVybiBofSxrLm9mZj1rLnVuYmluZD1mdW5jdGlvbihhLGIpe3ZhciBmPWEuc3BsaXQoZCksZyxoLGksayxsLG0sbixvPVtqXTtmb3Ioaz0wLGw9Zi5sZW5ndGg7azxsO2srKylmb3IobT0wO208by5sZW5ndGg7bSs9aS5sZW5ndGgtMil7aT1bbSwxXSxnPW9bbV0ubjtpZihmW2tdIT1lKWdbZltrXV0mJmkucHVzaChnW2Zba11dKTtlbHNlIGZvcihoIGluIGcpZ1tjXShoKSYmaS5wdXNoKGdbaF0pO28uc3BsaWNlLmFwcGx5KG8saSl9Zm9yKGs9MCxsPW8ubGVuZ3RoO2s8bDtrKyspe2c9b1trXTt3aGlsZShnLm4pe2lmKGIpe2lmKGcuZil7Zm9yKG09MCxuPWcuZi5sZW5ndGg7bTxuO20rKylpZihnLmZbbV09PWIpe2cuZi5zcGxpY2UobSwxKTticmVha30hZy5mLmxlbmd0aCYmZGVsZXRlIGcuZn1mb3IoaCBpbiBnLm4paWYoZy5uW2NdKGgpJiZnLm5baF0uZil7dmFyIHA9Zy5uW2hdLmY7Zm9yKG09MCxuPXAubGVuZ3RoO208bjttKyspaWYocFttXT09Yil7cC5zcGxpY2UobSwxKTticmVha30hcC5sZW5ndGgmJmRlbGV0ZSBnLm5baF0uZn19ZWxzZXtkZWxldGUgZy5mO2ZvcihoIGluIGcubilnLm5bY10oaCkmJmcubltoXS5mJiZkZWxldGUgZy5uW2hdLmZ9Zz1nLm59fX0say5vbmNlPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oKXt2YXIgZD1iLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtrLnVuYmluZChhLGMpO3JldHVybiBkfTtyZXR1cm4gay5vbihhLGMpfSxrLnZlcnNpb249YixrLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJZb3UgYXJlIHJ1bm5pbmcgRXZlIFwiK2J9LHR5cGVvZiBtb2R1bGUhPVwidW5kZWZpbmVkXCImJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWs6dHlwZW9mIGRlZmluZSE9XCJ1bmRlZmluZWRcIj9kZWZpbmUoXCJldmVcIixbXSxmdW5jdGlvbigpe3JldHVybiBrfSk6YS5ldmU9a30pKHRoaXMpLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY0YoYSl7Zm9yKHZhciBiPTA7YjxjeS5sZW5ndGg7YisrKWN5W2JdLmVsLnBhcGVyPT1hJiZjeS5zcGxpY2UoYi0tLDEpfWZ1bmN0aW9uIGNFKGIsZCxlLGYsaCxpKXtlPVEoZSk7dmFyIGosayxsLG09W10sbyxwLHEsdD1iLm1zLHU9e30sdj17fSx3PXt9O2lmKGYpZm9yKHk9MCx6PWN5Lmxlbmd0aDt5PHo7eSsrKXt2YXIgeD1jeVt5XTtpZih4LmVsLmlkPT1kLmlkJiZ4LmFuaW09PWIpe3gucGVyY2VudCE9ZT8oY3kuc3BsaWNlKHksMSksbD0xKTprPXgsZC5hdHRyKHgudG90YWxPcmlnaW4pO2JyZWFrfX1lbHNlIGY9K3Y7Zm9yKHZhciB5PTAsej1iLnBlcmNlbnRzLmxlbmd0aDt5PHo7eSsrKXtpZihiLnBlcmNlbnRzW3ldPT1lfHxiLnBlcmNlbnRzW3ldPmYqYi50b3Ape2U9Yi5wZXJjZW50c1t5XSxwPWIucGVyY2VudHNbeS0xXXx8MCx0PXQvYi50b3AqKGUtcCksbz1iLnBlcmNlbnRzW3krMV0saj1iLmFuaW1bZV07YnJlYWt9ZiYmZC5hdHRyKGIuYW5pbVtiLnBlcmNlbnRzW3ldXSl9aWYoISFqKXtpZighayl7Zm9yKHZhciBBIGluIGopaWYoaltnXShBKSlpZihVW2ddKEEpfHxkLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbZ10oQSkpe3VbQV09ZC5hdHRyKEEpLHVbQV09PW51bGwmJih1W0FdPVRbQV0pLHZbQV09altBXTtzd2l0Y2goVVtBXSl7Y2FzZSBDOndbQV09KHZbQV0tdVtBXSkvdDticmVhaztjYXNlXCJjb2xvdXJcIjp1W0FdPWEuZ2V0UkdCKHVbQV0pO3ZhciBCPWEuZ2V0UkdCKHZbQV0pO3dbQV09e3I6KEIuci11W0FdLnIpL3QsZzooQi5nLXVbQV0uZykvdCxiOihCLmItdVtBXS5iKS90fTticmVhaztjYXNlXCJwYXRoXCI6dmFyIEQ9YlIodVtBXSx2W0FdKSxFPURbMV07dVtBXT1EWzBdLHdbQV09W107Zm9yKHk9MCx6PXVbQV0ubGVuZ3RoO3k8ejt5Kyspe3dbQV1beV09WzBdO2Zvcih2YXIgRj0xLEc9dVtBXVt5XS5sZW5ndGg7RjxHO0YrKyl3W0FdW3ldW0ZdPShFW3ldW0ZdLXVbQV1beV1bRl0pL3R9YnJlYWs7Y2FzZVwidHJhbnNmb3JtXCI6dmFyIEg9ZC5fLEk9Y2EoSFtBXSx2W0FdKTtpZihJKXt1W0FdPUkuZnJvbSx2W0FdPUkudG8sd1tBXT1bXSx3W0FdLnJlYWw9ITA7Zm9yKHk9MCx6PXVbQV0ubGVuZ3RoO3k8ejt5Kyspe3dbQV1beV09W3VbQV1beV1bMF1dO2ZvcihGPTEsRz11W0FdW3ldLmxlbmd0aDtGPEc7RisrKXdbQV1beV1bRl09KHZbQV1beV1bRl0tdVtBXVt5XVtGXSkvdH19ZWxzZXt2YXIgSj1kLm1hdHJpeHx8bmV3IGNiLEs9e186e3RyYW5zZm9ybTpILnRyYW5zZm9ybX0sZ2V0QkJveDpmdW5jdGlvbigpe3JldHVybiBkLmdldEJCb3goMSl9fTt1W0FdPVtKLmEsSi5iLEouYyxKLmQsSi5lLEouZl0sYiQoSyx2W0FdKSx2W0FdPUsuXy50cmFuc2Zvcm0sd1tBXT1bKEsubWF0cml4LmEtSi5hKS90LChLLm1hdHJpeC5iLUouYikvdCwoSy5tYXRyaXguYy1KLmMpL3QsKEsubWF0cml4LmQtSi5kKS90LChLLm1hdHJpeC5lLUouZSkvdCwoSy5tYXRyaXguZi1KLmYpL3RdfWJyZWFrO2Nhc2VcImNzdlwiOnZhciBMPXIoaltBXSlbc10oYyksTT1yKHVbQV0pW3NdKGMpO2lmKEE9PVwiY2xpcC1yZWN0XCIpe3VbQV09TSx3W0FdPVtdLHk9TS5sZW5ndGg7d2hpbGUoeS0tKXdbQV1beV09KExbeV0tdVtBXVt5XSkvdH12W0FdPUw7YnJlYWs7ZGVmYXVsdDpMPVtdW25dKGpbQV0pLE09W11bbl0odVtBXSksd1tBXT1bXSx5PWQucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tBXS5sZW5ndGg7d2hpbGUoeS0tKXdbQV1beV09KChMW3ldfHwwKS0oTVt5XXx8MCkpL3R9fXZhciBPPWouZWFzaW5nLFA9YS5lYXNpbmdfZm9ybXVsYXNbT107aWYoIVApe1A9cihPKS5tYXRjaChOKTtpZihQJiZQLmxlbmd0aD09NSl7dmFyIFI9UDtQPWZ1bmN0aW9uKGEpe3JldHVybiBjQyhhLCtSWzFdLCtSWzJdLCtSWzNdLCtSWzRdLHQpfX1lbHNlIFA9YmZ9cT1qLnN0YXJ0fHxiLnN0YXJ0fHwrKG5ldyBEYXRlKSx4PXthbmltOmIscGVyY2VudDplLHRpbWVzdGFtcDpxLHN0YXJ0OnErKGIuZGVsfHwwKSxzdGF0dXM6MCxpbml0c3RhdHVzOmZ8fDAsc3RvcDohMSxtczp0LGVhc2luZzpQLGZyb206dSxkaWZmOncsdG86dixlbDpkLGNhbGxiYWNrOmouY2FsbGJhY2sscHJldjpwLG5leHQ6byxyZXBlYXQ6aXx8Yi50aW1lcyxvcmlnaW46ZC5hdHRyKCksdG90YWxPcmlnaW46aH0sY3kucHVzaCh4KTtpZihmJiYhayYmIWwpe3guc3RvcD0hMCx4LnN0YXJ0PW5ldyBEYXRlLXQqZjtpZihjeS5sZW5ndGg9PTEpcmV0dXJuIGNBKCl9bCYmKHguc3RhcnQ9bmV3IERhdGUteC5tcypmKSxjeS5sZW5ndGg9PTEmJmN6KGNBKX1lbHNlIGsuaW5pdHN0YXR1cz1mLGsuc3RhcnQ9bmV3IERhdGUtay5tcypmO2V2ZShcInJhcGhhZWwuYW5pbS5zdGFydC5cIitkLmlkLGQsYil9fWZ1bmN0aW9uIGNEKGEsYil7dmFyIGM9W10sZD17fTt0aGlzLm1zPWIsdGhpcy50aW1lcz0xO2lmKGEpe2Zvcih2YXIgZSBpbiBhKWFbZ10oZSkmJihkW1EoZSldPWFbZV0sYy5wdXNoKFEoZSkpKTtjLnNvcnQoYmQpfXRoaXMuYW5pbT1kLHRoaXMudG9wPWNbYy5sZW5ndGgtMV0sdGhpcy5wZXJjZW50cz1jfWZ1bmN0aW9uIGNDKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBvKGEsYil7dmFyIGMsZCxlLGYsaixrO2ZvcihlPWEsaz0wO2s8ODtrKyspe2Y9bShlKS1hO2lmKHooZik8YilyZXR1cm4gZTtqPSgzKmkqZSsyKmgpKmUrZztpZih6KGopPDFlLTYpYnJlYWs7ZT1lLWYvan1jPTAsZD0xLGU9YTtpZihlPGMpcmV0dXJuIGM7aWYoZT5kKXJldHVybiBkO3doaWxlKGM8ZCl7Zj1tKGUpO2lmKHooZi1hKTxiKXJldHVybiBlO2E+Zj9jPWU6ZD1lLGU9KGQtYykvMitjfXJldHVybiBlfWZ1bmN0aW9uIG4oYSxiKXt2YXIgYz1vKGEsYik7cmV0dXJuKChsKmMraykqYytqKSpjfWZ1bmN0aW9uIG0oYSl7cmV0dXJuKChpKmEraCkqYStnKSphfXZhciBnPTMqYixoPTMqKGQtYiktZyxpPTEtZy1oLGo9MypjLGs9MyooZS1jKS1qLGw9MS1qLWs7cmV0dXJuIG4oYSwxLygyMDAqZikpfWZ1bmN0aW9uIGNxKCl7cmV0dXJuIHRoaXMueCtxK3RoaXMueStxK3RoaXMud2lkdGgrXCIg77+9IFwiK3RoaXMuaGVpZ2h0fWZ1bmN0aW9uIGNwKCl7cmV0dXJuIHRoaXMueCtxK3RoaXMueX1mdW5jdGlvbiBjYihhLGIsYyxkLGUsZil7YSE9bnVsbD8odGhpcy5hPSthLHRoaXMuYj0rYix0aGlzLmM9K2MsdGhpcy5kPStkLHRoaXMuZT0rZSx0aGlzLmY9K2YpOih0aGlzLmE9MSx0aGlzLmI9MCx0aGlzLmM9MCx0aGlzLmQ9MSx0aGlzLmU9MCx0aGlzLmY9MCl9ZnVuY3Rpb24gYkgoYixjLGQpe2I9YS5fcGF0aDJjdXJ2ZShiKSxjPWEuX3BhdGgyY3VydmUoYyk7dmFyIGUsZixnLGgsaSxqLGssbCxtLG4sbz1kPzA6W107Zm9yKHZhciBwPTAscT1iLmxlbmd0aDtwPHE7cCsrKXt2YXIgcj1iW3BdO2lmKHJbMF09PVwiTVwiKWU9aT1yWzFdLGY9aj1yWzJdO2Vsc2V7clswXT09XCJDXCI/KG09W2UsZl0uY29uY2F0KHIuc2xpY2UoMSkpLGU9bVs2XSxmPW1bN10pOihtPVtlLGYsZSxmLGksaixpLGpdLGU9aSxmPWopO2Zvcih2YXIgcz0wLHQ9Yy5sZW5ndGg7czx0O3MrKyl7dmFyIHU9Y1tzXTtpZih1WzBdPT1cIk1cIilnPWs9dVsxXSxoPWw9dVsyXTtlbHNle3VbMF09PVwiQ1wiPyhuPVtnLGhdLmNvbmNhdCh1LnNsaWNlKDEpKSxnPW5bNl0saD1uWzddKToobj1bZyxoLGcsaCxrLGwsayxsXSxnPWssaD1sKTt2YXIgdj1iRyhtLG4sZCk7aWYoZClvKz12O2Vsc2V7Zm9yKHZhciB3PTAseD12Lmxlbmd0aDt3PHg7dysrKXZbd10uc2VnbWVudDE9cCx2W3ddLnNlZ21lbnQyPXMsdlt3XS5iZXoxPW0sdlt3XS5iZXoyPW47bz1vLmNvbmNhdCh2KX19fX19cmV0dXJuIG99ZnVuY3Rpb24gYkcoYixjLGQpe3ZhciBlPWEuYmV6aWVyQkJveChiKSxmPWEuYmV6aWVyQkJveChjKTtpZighYS5pc0JCb3hJbnRlcnNlY3QoZSxmKSlyZXR1cm4gZD8wOltdO3ZhciBnPWJCLmFwcGx5KDAsYiksaD1iQi5hcHBseSgwLGMpLGk9fn4oZy81KSxqPX5+KGgvNSksaz1bXSxsPVtdLG09e30sbj1kPzA6W107Zm9yKHZhciBvPTA7bzxpKzE7bysrKXt2YXIgcD1hLmZpbmREb3RzQXRTZWdtZW50LmFwcGx5KGEsYi5jb25jYXQoby9pKSk7ay5wdXNoKHt4OnAueCx5OnAueSx0Om8vaX0pfWZvcihvPTA7bzxqKzE7bysrKXA9YS5maW5kRG90c0F0U2VnbWVudC5hcHBseShhLGMuY29uY2F0KG8vaikpLGwucHVzaCh7eDpwLngseTpwLnksdDpvL2p9KTtmb3Iobz0wO288aTtvKyspZm9yKHZhciBxPTA7cTxqO3ErKyl7dmFyIHI9a1tvXSxzPWtbbysxXSx0PWxbcV0sdT1sW3ErMV0sdj16KHMueC1yLngpPC4wMDE/XCJ5XCI6XCJ4XCIsdz16KHUueC10LngpPC4wMDE/XCJ5XCI6XCJ4XCIseD1iRChyLngsci55LHMueCxzLnksdC54LHQueSx1LngsdS55KTtpZih4KXtpZihtW3gueC50b0ZpeGVkKDQpXT09eC55LnRvRml4ZWQoNCkpY29udGludWU7bVt4LngudG9GaXhlZCg0KV09eC55LnRvRml4ZWQoNCk7dmFyIHk9ci50K3ooKHhbdl0tclt2XSkvKHNbdl0tclt2XSkpKihzLnQtci50KSxBPXQudCt6KCh4W3ddLXRbd10pLyh1W3ddLXRbd10pKSoodS50LXQudCk7eT49MCYmeTw9MSYmQT49MCYmQTw9MSYmKGQ/bisrOm4ucHVzaCh7eDp4LngseTp4LnksdDE6eSx0MjpBfSkpfX1yZXR1cm4gbn1mdW5jdGlvbiBiRihhLGIpe3JldHVybiBiRyhhLGIsMSl9ZnVuY3Rpb24gYkUoYSxiKXtyZXR1cm4gYkcoYSxiKX1mdW5jdGlvbiBiRChhLGIsYyxkLGUsZixnLGgpe2lmKCEoeChhLGMpPHkoZSxnKXx8eShhLGMpPngoZSxnKXx8eChiLGQpPHkoZixoKXx8eShiLGQpPngoZixoKSkpe3ZhciBpPShhKmQtYipjKSooZS1nKS0oYS1jKSooZSpoLWYqZyksaj0oYSpkLWIqYykqKGYtaCktKGItZCkqKGUqaC1mKmcpLGs9KGEtYykqKGYtaCktKGItZCkqKGUtZyk7aWYoIWspcmV0dXJuO3ZhciBsPWkvayxtPWovayxuPStsLnRvRml4ZWQoMiksbz0rbS50b0ZpeGVkKDIpO2lmKG48K3koYSxjKS50b0ZpeGVkKDIpfHxuPit4KGEsYykudG9GaXhlZCgyKXx8bjwreShlLGcpLnRvRml4ZWQoMil8fG4+K3goZSxnKS50b0ZpeGVkKDIpfHxvPCt5KGIsZCkudG9GaXhlZCgyKXx8bz4reChiLGQpLnRvRml4ZWQoMil8fG88K3koZixoKS50b0ZpeGVkKDIpfHxvPit4KGYsaCkudG9GaXhlZCgyKSlyZXR1cm47cmV0dXJue3g6bCx5Om19fX1mdW5jdGlvbiBiQyhhLGIsYyxkLGUsZixnLGgsaSl7aWYoIShpPDB8fGJCKGEsYixjLGQsZSxmLGcsaCk8aSkpe3ZhciBqPTEsaz1qLzIsbD1qLWssbSxuPS4wMTttPWJCKGEsYixjLGQsZSxmLGcsaCxsKTt3aGlsZSh6KG0taSk+bilrLz0yLGwrPShtPGk/MTotMSkqayxtPWJCKGEsYixjLGQsZSxmLGcsaCxsKTtyZXR1cm4gbH19ZnVuY3Rpb24gYkIoYSxiLGMsZCxlLGYsZyxoLGkpe2k9PW51bGwmJihpPTEpLGk9aT4xPzE6aTwwPzA6aTt2YXIgaj1pLzIsaz0xMixsPVstMC4xMjUyLC4xMjUyLC0wLjM2NzgsLjM2NzgsLTAuNTg3MywuNTg3MywtMC43Njk5LC43Njk5LC0wLjkwNDEsLjkwNDEsLTAuOTgxNiwuOTgxNl0sbT1bLjI0OTEsLjI0OTEsLjIzMzUsLjIzMzUsLjIwMzIsLjIwMzIsLjE2MDEsLjE2MDEsLjEwNjksLjEwNjksLjA0NzIsLjA0NzJdLG49MDtmb3IodmFyIG89MDtvPGs7bysrKXt2YXIgcD1qKmxbb10raixxPWJBKHAsYSxjLGUsZykscj1iQShwLGIsZCxmLGgpLHM9cSpxK3IqcjtuKz1tW29dKncuc3FydChzKX1yZXR1cm4gaipufWZ1bmN0aW9uIGJBKGEsYixjLGQsZSl7dmFyIGY9LTMqYis5KmMtOSpkKzMqZSxnPWEqZis2KmItMTIqYys2KmQ7cmV0dXJuIGEqZy0zKmIrMypjfWZ1bmN0aW9uIGJ5KGEsYil7dmFyIGM9W107Zm9yKHZhciBkPTAsZT1hLmxlbmd0aDtlLTIqIWI+ZDtkKz0yKXt2YXIgZj1be3g6K2FbZC0yXSx5OithW2QtMV19LHt4OithW2RdLHk6K2FbZCsxXX0se3g6K2FbZCsyXSx5OithW2QrM119LHt4OithW2QrNF0seTorYVtkKzVdfV07Yj9kP2UtND09ZD9mWzNdPXt4OithWzBdLHk6K2FbMV19OmUtMj09ZCYmKGZbMl09e3g6K2FbMF0seTorYVsxXX0sZlszXT17eDorYVsyXSx5OithWzNdfSk6ZlswXT17eDorYVtlLTJdLHk6K2FbZS0xXX06ZS00PT1kP2ZbM109ZlsyXTpkfHwoZlswXT17eDorYVtkXSx5OithW2QrMV19KSxjLnB1c2goW1wiQ1wiLCgtZlswXS54KzYqZlsxXS54K2ZbMl0ueCkvNiwoLWZbMF0ueSs2KmZbMV0ueStmWzJdLnkpLzYsKGZbMV0ueCs2KmZbMl0ueC1mWzNdLngpLzYsKGZbMV0ueSs2KmZbMl0ueS1mWzNdLnkpLzYsZlsyXS54LGZbMl0ueV0pfXJldHVybiBjfWZ1bmN0aW9uIGJ4KCl7cmV0dXJuIHRoaXMuaGV4fWZ1bmN0aW9uIGJ2KGEsYixjKXtmdW5jdGlvbiBkKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLGY9ZS5qb2luKFwiP1wiKSxoPWQuY2FjaGU9ZC5jYWNoZXx8e30saT1kLmNvdW50PWQuY291bnR8fFtdO2lmKGhbZ10oZikpe2J1KGksZik7cmV0dXJuIGM/YyhoW2ZdKTpoW2ZdfWkubGVuZ3RoPj0xZTMmJmRlbGV0ZSBoW2kuc2hpZnQoKV0saS5wdXNoKGYpLGhbZl09YVttXShiLGUpO3JldHVybiBjP2MoaFtmXSk6aFtmXX1yZXR1cm4gZH1mdW5jdGlvbiBidShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkO2MrKylpZihhW2NdPT09YilyZXR1cm4gYS5wdXNoKGEuc3BsaWNlKGMsMSlbMF0pfWZ1bmN0aW9uIGJtKGEpe2lmKE9iamVjdChhKSE9PWEpcmV0dXJuIGE7dmFyIGI9bmV3IGEuY29uc3RydWN0b3I7Zm9yKHZhciBjIGluIGEpYVtnXShjKSYmKGJbY109Ym0oYVtjXSkpO3JldHVybiBifWZ1bmN0aW9uIGEoYyl7aWYoYS5pcyhjLFwiZnVuY3Rpb25cIikpcmV0dXJuIGI/YygpOmV2ZS5vbihcInJhcGhhZWwuRE9NbG9hZFwiLGMpO2lmKGEuaXMoYyxFKSlyZXR1cm4gYS5fZW5naW5lLmNyZWF0ZVttXShhLGMuc3BsaWNlKDAsMythLmlzKGNbMF0sQykpKS5hZGQoYyk7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO2lmKGEuaXMoZFtkLmxlbmd0aC0xXSxcImZ1bmN0aW9uXCIpKXt2YXIgZT1kLnBvcCgpO3JldHVybiBiP2UuY2FsbChhLl9lbmdpbmUuY3JlYXRlW21dKGEsZCkpOmV2ZS5vbihcInJhcGhhZWwuRE9NbG9hZFwiLGZ1bmN0aW9uKCl7ZS5jYWxsKGEuX2VuZ2luZS5jcmVhdGVbbV0oYSxkKSl9KX1yZXR1cm4gYS5fZW5naW5lLmNyZWF0ZVttXShhLGFyZ3VtZW50cyl9YS52ZXJzaW9uPVwiMi4xLjBcIixhLmV2ZT1ldmU7dmFyIGIsYz0vWywgXSsvLGQ9e2NpcmNsZToxLHJlY3Q6MSxwYXRoOjEsZWxsaXBzZToxLHRleHQ6MSxpbWFnZToxfSxlPS9cXHsoXFxkKylcXH0vZyxmPVwicHJvdG90eXBlXCIsZz1cImhhc093blByb3BlcnR5XCIsaD17ZG9jOmRvY3VtZW50LHdpbjp3aW5kb3d9LGk9e3dhczpPYmplY3QucHJvdG90eXBlW2ddLmNhbGwoaC53aW4sXCJSYXBoYWVsXCIpLGlzOmgud2luLlJhcGhhZWx9LGo9ZnVuY3Rpb24oKXt0aGlzLmNhPXRoaXMuY3VzdG9tQXR0cmlidXRlcz17fX0sayxsPVwiYXBwZW5kQ2hpbGRcIixtPVwiYXBwbHlcIixuPVwiY29uY2F0XCIsbz1cImNyZWF0ZVRvdWNoXCJpbiBoLmRvYyxwPVwiXCIscT1cIiBcIixyPVN0cmluZyxzPVwic3BsaXRcIix0PVwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNlbW92ZSBtb3VzZW91dCBtb3VzZW92ZXIgbW91c2V1cCB0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCB0b3VjaGNhbmNlbFwiW3NdKHEpLHU9e21vdXNlZG93bjpcInRvdWNoc3RhcnRcIixtb3VzZW1vdmU6XCJ0b3VjaG1vdmVcIixtb3VzZXVwOlwidG91Y2hlbmRcIn0sdj1yLnByb3RvdHlwZS50b0xvd2VyQ2FzZSx3PU1hdGgseD13Lm1heCx5PXcubWluLHo9dy5hYnMsQT13LnBvdyxCPXcuUEksQz1cIm51bWJlclwiLEQ9XCJzdHJpbmdcIixFPVwiYXJyYXlcIixGPVwidG9TdHJpbmdcIixHPVwiZmlsbFwiLEg9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxJPXt9LEo9XCJwdXNoXCIsSz1hLl9JU1VSTD0vXnVybFxcKFsnXCJdPyhbXlxcKV0rPylbJ1wiXT9cXCkkL2ksTD0vXlxccyooKCNbYS1mXFxkXXs2fSl8KCNbYS1mXFxkXXszfSl8cmdiYT9cXChcXHMqKFtcXGRcXC5dKyU/XFxzKixcXHMqW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSslPyg/OlxccyosXFxzKltcXGRcXC5dKyU/KT8pXFxzKlxcKXxoc2JhP1xcKFxccyooW1xcZFxcLl0rKD86ZGVnfFxceGIwfCUpP1xccyosXFxzKltcXGRcXC5dKyU/XFxzKixcXHMqW1xcZFxcLl0rKD86JT9cXHMqLFxccypbXFxkXFwuXSspPyklP1xccypcXCl8aHNsYT9cXChcXHMqKFtcXGRcXC5dKyg/OmRlZ3xcXHhiMHwlKT9cXHMqLFxccypbXFxkXFwuXSslP1xccyosXFxzKltcXGRcXC5dKyg/OiU/XFxzKixcXHMqW1xcZFxcLl0rKT8pJT9cXHMqXFwpKVxccyokL2ksTT17TmFOOjEsSW5maW5pdHk6MSxcIi1JbmZpbml0eVwiOjF9LE49L14oPzpjdWJpYy0pP2JlemllclxcKChbXixdKyksKFteLF0rKSwoW14sXSspLChbXlxcKV0rKVxcKS8sTz13LnJvdW5kLFA9XCJzZXRBdHRyaWJ1dGVcIixRPXBhcnNlRmxvYXQsUj1wYXJzZUludCxTPXIucHJvdG90eXBlLnRvVXBwZXJDYXNlLFQ9YS5fYXZhaWxhYmxlQXR0cnM9e1wiYXJyb3ctZW5kXCI6XCJub25lXCIsXCJhcnJvdy1zdGFydFwiOlwibm9uZVwiLGJsdXI6MCxcImNsaXAtcmVjdFwiOlwiMCAwIDFlOSAxZTlcIixjdXJzb3I6XCJkZWZhdWx0XCIsY3g6MCxjeTowLGZpbGw6XCIjZmZmXCIsXCJmaWxsLW9wYWNpdHlcIjoxLGZvbnQ6JzEwcHggXCJBcmlhbFwiJyxcImZvbnQtZmFtaWx5XCI6J1wiQXJpYWxcIicsXCJmb250LXNpemVcIjpcIjEwXCIsXCJmb250LXN0eWxlXCI6XCJub3JtYWxcIixcImZvbnQtd2VpZ2h0XCI6NDAwLGdyYWRpZW50OjAsaGVpZ2h0OjAsaHJlZjpcImh0dHA6Ly9yYXBoYWVsanMuY29tL1wiLFwibGV0dGVyLXNwYWNpbmdcIjowLG9wYWNpdHk6MSxwYXRoOlwiTTAsMFwiLHI6MCxyeDowLHJ5OjAsc3JjOlwiXCIsc3Ryb2tlOlwiIzAwMFwiLFwic3Ryb2tlLWRhc2hhcnJheVwiOlwiXCIsXCJzdHJva2UtbGluZWNhcFwiOlwiYnV0dFwiLFwic3Ryb2tlLWxpbmVqb2luXCI6XCJidXR0XCIsXCJzdHJva2UtbWl0ZXJsaW1pdFwiOjAsXCJzdHJva2Utb3BhY2l0eVwiOjEsXCJzdHJva2Utd2lkdGhcIjoxLHRhcmdldDpcIl9ibGFua1wiLFwidGV4dC1hbmNob3JcIjpcIm1pZGRsZVwiLHRpdGxlOlwiUmFwaGFlbFwiLHRyYW5zZm9ybTpcIlwiLHdpZHRoOjAseDowLHk6MH0sVT1hLl9hdmFpbGFibGVBbmltQXR0cnM9e2JsdXI6QyxcImNsaXAtcmVjdFwiOlwiY3N2XCIsY3g6QyxjeTpDLGZpbGw6XCJjb2xvdXJcIixcImZpbGwtb3BhY2l0eVwiOkMsXCJmb250LXNpemVcIjpDLGhlaWdodDpDLG9wYWNpdHk6QyxwYXRoOlwicGF0aFwiLHI6QyxyeDpDLHJ5OkMsc3Ryb2tlOlwiY29sb3VyXCIsXCJzdHJva2Utb3BhY2l0eVwiOkMsXCJzdHJva2Utd2lkdGhcIjpDLHRyYW5zZm9ybTpcInRyYW5zZm9ybVwiLHdpZHRoOkMseDpDLHk6Q30sVj0vW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XS9nLFc9L1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLFtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLyxYPXtoczoxLHJnOjF9LFk9Lyw/KFthY2hsbXFyc3R2eHpdKSw/L2dpLFo9LyhbYWNobG1ycXN0dnpdKVtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOSxdKigoLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLD9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKikrKS9pZywkPS8oW3JzdG1dKVtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOSxdKigoLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLD9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKikrKS9pZyxfPS8oLT9cXGQqXFwuP1xcZCooPzplW1xcLStdP1xcZCspPylbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKiw/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSovaWcsYmE9YS5fcmFkaWFsX2dyYWRpZW50PS9ecig/OlxcKChbXixdKz8pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSooW15cXCldKz8pXFwpKT8vLGJiPXt9LGJjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEua2V5LWIua2V5fSxiZD1mdW5jdGlvbihhLGIpe3JldHVybiBRKGEpLVEoYil9LGJlPWZ1bmN0aW9uKCl7fSxiZj1mdW5jdGlvbihhKXtyZXR1cm4gYX0sYmc9YS5fcmVjdFBhdGg9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZihlKXJldHVybltbXCJNXCIsYStlLGJdLFtcImxcIixjLWUqMiwwXSxbXCJhXCIsZSxlLDAsMCwxLGUsZV0sW1wibFwiLDAsZC1lKjJdLFtcImFcIixlLGUsMCwwLDEsLWUsZV0sW1wibFwiLGUqMi1jLDBdLFtcImFcIixlLGUsMCwwLDEsLWUsLWVdLFtcImxcIiwwLGUqMi1kXSxbXCJhXCIsZSxlLDAsMCwxLGUsLWVdLFtcInpcIl1dO3JldHVybltbXCJNXCIsYSxiXSxbXCJsXCIsYywwXSxbXCJsXCIsMCxkXSxbXCJsXCIsLWMsMF0sW1wielwiXV19LGJoPWZ1bmN0aW9uKGEsYixjLGQpe2Q9PW51bGwmJihkPWMpO3JldHVybltbXCJNXCIsYSxiXSxbXCJtXCIsMCwtZF0sW1wiYVwiLGMsZCwwLDEsMSwwLDIqZF0sW1wiYVwiLGMsZCwwLDEsMSwwLC0yKmRdLFtcInpcIl1dfSxiaT1hLl9nZXRQYXRoPXtwYXRoOmZ1bmN0aW9uKGEpe3JldHVybiBhLmF0dHIoXCJwYXRoXCIpfSxjaXJjbGU6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRycztyZXR1cm4gYmgoYi5jeCxiLmN5LGIucil9LGVsbGlwc2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRycztyZXR1cm4gYmgoYi5jeCxiLmN5LGIucngsYi5yeSl9LHJlY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRycztyZXR1cm4gYmcoYi54LGIueSxiLndpZHRoLGIuaGVpZ2h0LGIucil9LGltYWdlOmZ1bmN0aW9uKGEpe3ZhciBiPWEuYXR0cnM7cmV0dXJuIGJnKGIueCxiLnksYi53aWR0aCxiLmhlaWdodCl9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5fZ2V0QkJveCgpO3JldHVybiBiZyhiLngsYi55LGIud2lkdGgsYi5oZWlnaHQpfX0sYmo9YS5tYXBQYXRoPWZ1bmN0aW9uKGEsYil7aWYoIWIpcmV0dXJuIGE7dmFyIGMsZCxlLGYsZyxoLGk7YT1iUihhKTtmb3IoZT0wLGc9YS5sZW5ndGg7ZTxnO2UrKyl7aT1hW2VdO2ZvcihmPTEsaD1pLmxlbmd0aDtmPGg7Zis9MiljPWIueChpW2ZdLGlbZisxXSksZD1iLnkoaVtmXSxpW2YrMV0pLGlbZl09YyxpW2YrMV09ZH1yZXR1cm4gYX07YS5fZz1oLGEudHlwZT1oLndpbi5TVkdBbmdsZXx8aC5kb2MuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZShcImh0dHA6Ly93d3cudzMub3JnL1RSL1NWRzExL2ZlYXR1cmUjQmFzaWNTdHJ1Y3R1cmVcIixcIjEuMVwiKT9cIlNWR1wiOlwiVk1MXCI7aWYoYS50eXBlPT1cIlZNTFwiKXt2YXIgYms9aC5kb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSxibDtiay5pbm5lckhUTUw9Jzx2OnNoYXBlIGFkaj1cIjFcIi8+JyxibD1iay5maXJzdENoaWxkLGJsLnN0eWxlLmJlaGF2aW9yPVwidXJsKCNkZWZhdWx0I1ZNTClcIjtpZighYmx8fHR5cGVvZiBibC5hZGohPVwib2JqZWN0XCIpcmV0dXJuIGEudHlwZT1wO2JrPW51bGx9YS5zdmc9IShhLnZtbD1hLnR5cGU9PVwiVk1MXCIpLGEuX1BhcGVyPWosYS5mbj1rPWoucHJvdG90eXBlPWEucHJvdG90eXBlLGEuX2lkPTAsYS5fb2lkPTAsYS5pcz1mdW5jdGlvbihhLGIpe2I9di5jYWxsKGIpO2lmKGI9PVwiZmluaXRlXCIpcmV0dXJuIU1bZ10oK2EpO2lmKGI9PVwiYXJyYXlcIilyZXR1cm4gYSBpbnN0YW5jZW9mIEFycmF5O3JldHVybiBiPT1cIm51bGxcIiYmYT09PW51bGx8fGI9PXR5cGVvZiBhJiZhIT09bnVsbHx8Yj09XCJvYmplY3RcIiYmYT09PU9iamVjdChhKXx8Yj09XCJhcnJheVwiJiZBcnJheS5pc0FycmF5JiZBcnJheS5pc0FycmF5KGEpfHxILmNhbGwoYSkuc2xpY2UoOCwtMSkudG9Mb3dlckNhc2UoKT09Yn0sYS5hbmdsZT1mdW5jdGlvbihiLGMsZCxlLGYsZyl7aWYoZj09bnVsbCl7dmFyIGg9Yi1kLGk9Yy1lO2lmKCFoJiYhaSlyZXR1cm4gMDtyZXR1cm4oMTgwK3cuYXRhbjIoLWksLWgpKjE4MC9CKzM2MCklMzYwfXJldHVybiBhLmFuZ2xlKGIsYyxmLGcpLWEuYW5nbGUoZCxlLGYsZyl9LGEucmFkPWZ1bmN0aW9uKGEpe3JldHVybiBhJTM2MCpCLzE4MH0sYS5kZWc9ZnVuY3Rpb24oYSl7cmV0dXJuIGEqMTgwL0IlMzYwfSxhLnNuYXBUbz1mdW5jdGlvbihiLGMsZCl7ZD1hLmlzKGQsXCJmaW5pdGVcIik/ZDoxMDtpZihhLmlzKGIsRSkpe3ZhciBlPWIubGVuZ3RoO3doaWxlKGUtLSlpZih6KGJbZV0tYyk8PWQpcmV0dXJuIGJbZV19ZWxzZXtiPStiO3ZhciBmPWMlYjtpZihmPGQpcmV0dXJuIGMtZjtpZihmPmItZClyZXR1cm4gYy1mK2J9cmV0dXJuIGN9O3ZhciBibj1hLmNyZWF0ZVVVSUQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm5cInh4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eFwiLnJlcGxhY2UoYSxiKS50b1VwcGVyQ2FzZSgpfX0oL1t4eV0vZyxmdW5jdGlvbihhKXt2YXIgYj13LnJhbmRvbSgpKjE2fDAsYz1hPT1cInhcIj9iOmImM3w4O3JldHVybiBjLnRvU3RyaW5nKDE2KX0pO2Euc2V0V2luZG93PWZ1bmN0aW9uKGIpe2V2ZShcInJhcGhhZWwuc2V0V2luZG93XCIsYSxoLndpbixiKSxoLndpbj1iLGguZG9jPWgud2luLmRvY3VtZW50LGEuX2VuZ2luZS5pbml0V2luJiZhLl9lbmdpbmUuaW5pdFdpbihoLndpbil9O3ZhciBibz1mdW5jdGlvbihiKXtpZihhLnZtbCl7dmFyIGM9L15cXHMrfFxccyskL2csZDt0cnl7dmFyIGU9bmV3IEFjdGl2ZVhPYmplY3QoXCJodG1sZmlsZVwiKTtlLndyaXRlKFwiPGJvZHk+XCIpLGUuY2xvc2UoKSxkPWUuYm9keX1jYXRjaChmKXtkPWNyZWF0ZVBvcHVwKCkuZG9jdW1lbnQuYm9keX12YXIgZz1kLmNyZWF0ZVRleHRSYW5nZSgpO2JvPWJ2KGZ1bmN0aW9uKGEpe3RyeXtkLnN0eWxlLmNvbG9yPXIoYSkucmVwbGFjZShjLHApO3ZhciBiPWcucXVlcnlDb21tYW5kVmFsdWUoXCJGb3JlQ29sb3JcIik7Yj0oYiYyNTUpPDwxNnxiJjY1MjgwfChiJjE2NzExNjgwKT4+PjE2O3JldHVyblwiI1wiKyhcIjAwMDAwMFwiK2IudG9TdHJpbmcoMTYpKS5zbGljZSgtNil9Y2F0Y2goZSl7cmV0dXJuXCJub25lXCJ9fSl9ZWxzZXt2YXIgaT1oLmRvYy5jcmVhdGVFbGVtZW50KFwiaVwiKTtpLnRpdGxlPVwiUmFwaGHvv71sIENvbG91ciBQaWNrZXJcIixpLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsaC5kb2MuYm9keS5hcHBlbmRDaGlsZChpKSxibz1idihmdW5jdGlvbihhKXtpLnN0eWxlLmNvbG9yPWE7cmV0dXJuIGguZG9jLmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoaSxwKS5nZXRQcm9wZXJ0eVZhbHVlKFwiY29sb3JcIil9KX1yZXR1cm4gYm8oYil9LGJwPWZ1bmN0aW9uKCl7cmV0dXJuXCJoc2IoXCIrW3RoaXMuaCx0aGlzLnMsdGhpcy5iXStcIilcIn0sYnE9ZnVuY3Rpb24oKXtyZXR1cm5cImhzbChcIitbdGhpcy5oLHRoaXMucyx0aGlzLmxdK1wiKVwifSxicj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhleH0sYnM9ZnVuY3Rpb24oYixjLGQpe2M9PW51bGwmJmEuaXMoYixcIm9iamVjdFwiKSYmXCJyXCJpbiBiJiZcImdcImluIGImJlwiYlwiaW4gYiYmKGQ9Yi5iLGM9Yi5nLGI9Yi5yKTtpZihjPT1udWxsJiZhLmlzKGIsRCkpe3ZhciBlPWEuZ2V0UkdCKGIpO2I9ZS5yLGM9ZS5nLGQ9ZS5ifWlmKGI+MXx8Yz4xfHxkPjEpYi89MjU1LGMvPTI1NSxkLz0yNTU7cmV0dXJuW2IsYyxkXX0sYnQ9ZnVuY3Rpb24oYixjLGQsZSl7Yio9MjU1LGMqPTI1NSxkKj0yNTU7dmFyIGY9e3I6YixnOmMsYjpkLGhleDphLnJnYihiLGMsZCksdG9TdHJpbmc6YnJ9O2EuaXMoZSxcImZpbml0ZVwiKSYmKGYub3BhY2l0eT1lKTtyZXR1cm4gZn07YS5jb2xvcj1mdW5jdGlvbihiKXt2YXIgYzthLmlzKGIsXCJvYmplY3RcIikmJlwiaFwiaW4gYiYmXCJzXCJpbiBiJiZcImJcImluIGI/KGM9YS5oc2IycmdiKGIpLGIucj1jLnIsYi5nPWMuZyxiLmI9Yy5iLGIuaGV4PWMuaGV4KTphLmlzKGIsXCJvYmplY3RcIikmJlwiaFwiaW4gYiYmXCJzXCJpbiBiJiZcImxcImluIGI/KGM9YS5oc2wycmdiKGIpLGIucj1jLnIsYi5nPWMuZyxiLmI9Yy5iLGIuaGV4PWMuaGV4KTooYS5pcyhiLFwic3RyaW5nXCIpJiYoYj1hLmdldFJHQihiKSksYS5pcyhiLFwib2JqZWN0XCIpJiZcInJcImluIGImJlwiZ1wiaW4gYiYmXCJiXCJpbiBiPyhjPWEucmdiMmhzbChiKSxiLmg9Yy5oLGIucz1jLnMsYi5sPWMubCxjPWEucmdiMmhzYihiKSxiLnY9Yy5iKTooYj17aGV4Olwibm9uZVwifSxiLnI9Yi5nPWIuYj1iLmg9Yi5zPWIudj1iLmw9LTEpKSxiLnRvU3RyaW5nPWJyO3JldHVybiBifSxhLmhzYjJyZ2I9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5pcyhhLFwib2JqZWN0XCIpJiZcImhcImluIGEmJlwic1wiaW4gYSYmXCJiXCJpbiBhJiYoYz1hLmIsYj1hLnMsYT1hLmgsZD1hLm8pLGEqPTM2MDt2YXIgZSxmLGcsaCxpO2E9YSUzNjAvNjAsaT1jKmIsaD1pKigxLXooYSUyLTEpKSxlPWY9Zz1jLWksYT1+fmEsZSs9W2ksaCwwLDAsaCxpXVthXSxmKz1baCxpLGksaCwwLDBdW2FdLGcrPVswLDAsaCxpLGksaF1bYV07cmV0dXJuIGJ0KGUsZixnLGQpfSxhLmhzbDJyZ2I9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5pcyhhLFwib2JqZWN0XCIpJiZcImhcImluIGEmJlwic1wiaW4gYSYmXCJsXCJpbiBhJiYoYz1hLmwsYj1hLnMsYT1hLmgpO2lmKGE+MXx8Yj4xfHxjPjEpYS89MzYwLGIvPTEwMCxjLz0xMDA7YSo9MzYwO3ZhciBlLGYsZyxoLGk7YT1hJTM2MC82MCxpPTIqYiooYzwuNT9jOjEtYyksaD1pKigxLXooYSUyLTEpKSxlPWY9Zz1jLWkvMixhPX5+YSxlKz1baSxoLDAsMCxoLGldW2FdLGYrPVtoLGksaSxoLDAsMF1bYV0sZys9WzAsMCxoLGksaSxoXVthXTtyZXR1cm4gYnQoZSxmLGcsZCl9LGEucmdiMmhzYj1mdW5jdGlvbihhLGIsYyl7Yz1icyhhLGIsYyksYT1jWzBdLGI9Y1sxXSxjPWNbMl07dmFyIGQsZSxmLGc7Zj14KGEsYixjKSxnPWYteShhLGIsYyksZD1nPT0wP251bGw6Zj09YT8oYi1jKS9nOmY9PWI/KGMtYSkvZysyOihhLWIpL2crNCxkPShkKzM2MCklNio2MC8zNjAsZT1nPT0wPzA6Zy9mO3JldHVybntoOmQsczplLGI6Zix0b1N0cmluZzpicH19LGEucmdiMmhzbD1mdW5jdGlvbihhLGIsYyl7Yz1icyhhLGIsYyksYT1jWzBdLGI9Y1sxXSxjPWNbMl07dmFyIGQsZSxmLGcsaCxpO2c9eChhLGIsYyksaD15KGEsYixjKSxpPWctaCxkPWk9PTA/bnVsbDpnPT1hPyhiLWMpL2k6Zz09Yj8oYy1hKS9pKzI6KGEtYikvaSs0LGQ9KGQrMzYwKSU2KjYwLzM2MCxmPShnK2gpLzIsZT1pPT0wPzA6ZjwuNT9pLygyKmYpOmkvKDItMipmKTtyZXR1cm57aDpkLHM6ZSxsOmYsdG9TdHJpbmc6YnF9fSxhLl9wYXRoMnN0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmpvaW4oXCIsXCIpLnJlcGxhY2UoWSxcIiQxXCIpfTt2YXIgYnc9YS5fcHJlbG9hZD1mdW5jdGlvbihhLGIpe3ZhciBjPWguZG9jLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7Yy5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotOTk5OWVtO3RvcDotOTk5OWVtXCIsYy5vbmxvYWQ9ZnVuY3Rpb24oKXtiLmNhbGwodGhpcyksdGhpcy5vbmxvYWQ9bnVsbCxoLmRvYy5ib2R5LnJlbW92ZUNoaWxkKHRoaXMpfSxjLm9uZXJyb3I9ZnVuY3Rpb24oKXtoLmRvYy5ib2R5LnJlbW92ZUNoaWxkKHRoaXMpfSxoLmRvYy5ib2R5LmFwcGVuZENoaWxkKGMpLGMuc3JjPWF9O2EuZ2V0UkdCPWJ2KGZ1bmN0aW9uKGIpe2lmKCFifHwhISgoYj1yKGIpKS5pbmRleE9mKFwiLVwiKSsxKSlyZXR1cm57cjotMSxnOi0xLGI6LTEsaGV4Olwibm9uZVwiLGVycm9yOjEsdG9TdHJpbmc6Ynh9O2lmKGI9PVwibm9uZVwiKXJldHVybntyOi0xLGc6LTEsYjotMSxoZXg6XCJub25lXCIsdG9TdHJpbmc6Ynh9OyFYW2ddKGIudG9Mb3dlckNhc2UoKS5zdWJzdHJpbmcoMCwyKSkmJmIuY2hhckF0KCkhPVwiI1wiJiYoYj1ibyhiKSk7dmFyIGMsZCxlLGYsaCxpLGosaz1iLm1hdGNoKEwpO2lmKGspe2tbMl0mJihmPVIoa1syXS5zdWJzdHJpbmcoNSksMTYpLGU9UihrWzJdLnN1YnN0cmluZygzLDUpLDE2KSxkPVIoa1syXS5zdWJzdHJpbmcoMSwzKSwxNikpLGtbM10mJihmPVIoKGk9a1szXS5jaGFyQXQoMykpK2ksMTYpLGU9UigoaT1rWzNdLmNoYXJBdCgyKSkraSwxNiksZD1SKChpPWtbM10uY2hhckF0KDEpKStpLDE2KSksa1s0XSYmKGo9a1s0XVtzXShXKSxkPVEoalswXSksalswXS5zbGljZSgtMSk9PVwiJVwiJiYoZCo9Mi41NSksZT1RKGpbMV0pLGpbMV0uc2xpY2UoLTEpPT1cIiVcIiYmKGUqPTIuNTUpLGY9UShqWzJdKSxqWzJdLnNsaWNlKC0xKT09XCIlXCImJihmKj0yLjU1KSxrWzFdLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCw0KT09XCJyZ2JhXCImJihoPVEoalszXSkpLGpbM10mJmpbM10uc2xpY2UoLTEpPT1cIiVcIiYmKGgvPTEwMCkpO2lmKGtbNV0pe2o9a1s1XVtzXShXKSxkPVEoalswXSksalswXS5zbGljZSgtMSk9PVwiJVwiJiYoZCo9Mi41NSksZT1RKGpbMV0pLGpbMV0uc2xpY2UoLTEpPT1cIiVcIiYmKGUqPTIuNTUpLGY9UShqWzJdKSxqWzJdLnNsaWNlKC0xKT09XCIlXCImJihmKj0yLjU1KSwoalswXS5zbGljZSgtMyk9PVwiZGVnXCJ8fGpbMF0uc2xpY2UoLTEpPT1cIu+/vVwiKSYmKGQvPTM2MCksa1sxXS50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsNCk9PVwiaHNiYVwiJiYoaD1RKGpbM10pKSxqWzNdJiZqWzNdLnNsaWNlKC0xKT09XCIlXCImJihoLz0xMDApO3JldHVybiBhLmhzYjJyZ2IoZCxlLGYsaCl9aWYoa1s2XSl7aj1rWzZdW3NdKFcpLGQ9UShqWzBdKSxqWzBdLnNsaWNlKC0xKT09XCIlXCImJihkKj0yLjU1KSxlPVEoalsxXSksalsxXS5zbGljZSgtMSk9PVwiJVwiJiYoZSo9Mi41NSksZj1RKGpbMl0pLGpbMl0uc2xpY2UoLTEpPT1cIiVcIiYmKGYqPTIuNTUpLChqWzBdLnNsaWNlKC0zKT09XCJkZWdcInx8alswXS5zbGljZSgtMSk9PVwi77+9XCIpJiYoZC89MzYwKSxrWzFdLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCw0KT09XCJoc2xhXCImJihoPVEoalszXSkpLGpbM10mJmpbM10uc2xpY2UoLTEpPT1cIiVcIiYmKGgvPTEwMCk7cmV0dXJuIGEuaHNsMnJnYihkLGUsZixoKX1rPXtyOmQsZzplLGI6Zix0b1N0cmluZzpieH0say5oZXg9XCIjXCIrKDE2Nzc3MjE2fGZ8ZTw8OHxkPDwxNikudG9TdHJpbmcoMTYpLnNsaWNlKDEpLGEuaXMoaCxcImZpbml0ZVwiKSYmKGsub3BhY2l0eT1oKTtyZXR1cm4ga31yZXR1cm57cjotMSxnOi0xLGI6LTEsaGV4Olwibm9uZVwiLGVycm9yOjEsdG9TdHJpbmc6Ynh9fSxhKSxhLmhzYj1idihmdW5jdGlvbihiLGMsZCl7cmV0dXJuIGEuaHNiMnJnYihiLGMsZCkuaGV4fSksYS5oc2w9YnYoZnVuY3Rpb24oYixjLGQpe3JldHVybiBhLmhzbDJyZ2IoYixjLGQpLmhleH0pLGEucmdiPWJ2KGZ1bmN0aW9uKGEsYixjKXtyZXR1cm5cIiNcIisoMTY3NzcyMTZ8Y3xiPDw4fGE8PDE2KS50b1N0cmluZygxNikuc2xpY2UoMSl9KSxhLmdldENvbG9yPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ2V0Q29sb3Iuc3RhcnQ9dGhpcy5nZXRDb2xvci5zdGFydHx8e2g6MCxzOjEsYjphfHwuNzV9LGM9dGhpcy5oc2IycmdiKGIuaCxiLnMsYi5iKTtiLmgrPS4wNzUsYi5oPjEmJihiLmg9MCxiLnMtPS4yLGIuczw9MCYmKHRoaXMuZ2V0Q29sb3Iuc3RhcnQ9e2g6MCxzOjEsYjpiLmJ9KSk7cmV0dXJuIGMuaGV4fSxhLmdldENvbG9yLnJlc2V0PWZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXMuc3RhcnR9LGEucGFyc2VQYXRoU3RyaW5nPWZ1bmN0aW9uKGIpe2lmKCFiKXJldHVybiBudWxsO3ZhciBjPWJ6KGIpO2lmKGMuYXJyKXJldHVybiBiSihjLmFycik7dmFyIGQ9e2E6NyxjOjYsaDoxLGw6MixtOjIscjo0LHE6NCxzOjQsdDoyLHY6MSx6OjB9LGU9W107YS5pcyhiLEUpJiZhLmlzKGJbMF0sRSkmJihlPWJKKGIpKSxlLmxlbmd0aHx8cihiKS5yZXBsYWNlKFosZnVuY3Rpb24oYSxiLGMpe3ZhciBmPVtdLGc9Yi50b0xvd2VyQ2FzZSgpO2MucmVwbGFjZShfLGZ1bmN0aW9uKGEsYil7YiYmZi5wdXNoKCtiKX0pLGc9PVwibVwiJiZmLmxlbmd0aD4yJiYoZS5wdXNoKFtiXVtuXShmLnNwbGljZSgwLDIpKSksZz1cImxcIixiPWI9PVwibVwiP1wibFwiOlwiTFwiKTtpZihnPT1cInJcIillLnB1c2goW2JdW25dKGYpKTtlbHNlIHdoaWxlKGYubGVuZ3RoPj1kW2ddKXtlLnB1c2goW2JdW25dKGYuc3BsaWNlKDAsZFtnXSkpKTtpZighZFtnXSlicmVha319KSxlLnRvU3RyaW5nPWEuX3BhdGgyc3RyaW5nLGMuYXJyPWJKKGUpO3JldHVybiBlfSxhLnBhcnNlVHJhbnNmb3JtU3RyaW5nPWJ2KGZ1bmN0aW9uKGIpe2lmKCFiKXJldHVybiBudWxsO3ZhciBjPXtyOjMsczo0LHQ6MixtOjZ9LGQ9W107YS5pcyhiLEUpJiZhLmlzKGJbMF0sRSkmJihkPWJKKGIpKSxkLmxlbmd0aHx8cihiKS5yZXBsYWNlKCQsZnVuY3Rpb24oYSxiLGMpe3ZhciBlPVtdLGY9di5jYWxsKGIpO2MucmVwbGFjZShfLGZ1bmN0aW9uKGEsYil7YiYmZS5wdXNoKCtiKX0pLGQucHVzaChbYl1bbl0oZSkpfSksZC50b1N0cmluZz1hLl9wYXRoMnN0cmluZztyZXR1cm4gZH0pO3ZhciBiej1mdW5jdGlvbihhKXt2YXIgYj1iei5wcz1iei5wc3x8e307YlthXT9iW2FdLnNsZWVwPTEwMDpiW2FdPXtzbGVlcDoxMDB9LHNldFRpbWVvdXQoZnVuY3Rpb24oKXtmb3IodmFyIGMgaW4gYiliW2ddKGMpJiZjIT1hJiYoYltjXS5zbGVlcC0tLCFiW2NdLnNsZWVwJiZkZWxldGUgYltjXSl9KTtyZXR1cm4gYlthXX07YS5maW5kRG90c0F0U2VnbWVudD1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7dmFyIGo9MS1pLGs9QShqLDMpLGw9QShqLDIpLG09aSppLG49bSppLG89ayphK2wqMyppKmMraiozKmkqaSplK24qZyxwPWsqYitsKjMqaSpkK2oqMyppKmkqZituKmgscT1hKzIqaSooYy1hKSttKihlLTIqYythKSxyPWIrMippKihkLWIpK20qKGYtMipkK2IpLHM9YysyKmkqKGUtYykrbSooZy0yKmUrYyksdD1kKzIqaSooZi1kKSttKihoLTIqZitkKSx1PWoqYStpKmMsdj1qKmIraSpkLHg9aiplK2kqZyx5PWoqZitpKmgsej05MC13LmF0YW4yKHEtcyxyLXQpKjE4MC9COyhxPnN8fHI8dCkmJih6Kz0xODApO3JldHVybnt4Om8seTpwLG06e3g6cSx5OnJ9LG46e3g6cyx5OnR9LHN0YXJ0Ont4OnUseTp2fSxlbmQ6e3g6eCx5Onl9LGFscGhhOnp9fSxhLmJlemllckJCb3g9ZnVuY3Rpb24oYixjLGQsZSxmLGcsaCxpKXthLmlzKGIsXCJhcnJheVwiKXx8KGI9W2IsYyxkLGUsZixnLGgsaV0pO3ZhciBqPWJRLmFwcGx5KG51bGwsYik7cmV0dXJue3g6ai5taW4ueCx5OmoubWluLnkseDI6ai5tYXgueCx5MjpqLm1heC55LHdpZHRoOmoubWF4Lngtai5taW4ueCxoZWlnaHQ6ai5tYXgueS1qLm1pbi55fX0sYS5pc1BvaW50SW5zaWRlQkJveD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGI+PWEueCYmYjw9YS54MiYmYz49YS55JiZjPD1hLnkyfSxhLmlzQkJveEludGVyc2VjdD1mdW5jdGlvbihiLGMpe3ZhciBkPWEuaXNQb2ludEluc2lkZUJCb3g7cmV0dXJuIGQoYyxiLngsYi55KXx8ZChjLGIueDIsYi55KXx8ZChjLGIueCxiLnkyKXx8ZChjLGIueDIsYi55Mil8fGQoYixjLngsYy55KXx8ZChiLGMueDIsYy55KXx8ZChiLGMueCxjLnkyKXx8ZChiLGMueDIsYy55Mil8fChiLng8Yy54MiYmYi54PmMueHx8Yy54PGIueDImJmMueD5iLngpJiYoYi55PGMueTImJmIueT5jLnl8fGMueTxiLnkyJiZjLnk+Yi55KX0sYS5wYXRoSW50ZXJzZWN0aW9uPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGJIKGEsYil9LGEucGF0aEludGVyc2VjdGlvbk51bWJlcj1mdW5jdGlvbihhLGIpe3JldHVybiBiSChhLGIsMSl9LGEuaXNQb2ludEluc2lkZVBhdGg9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEucGF0aEJCb3goYik7cmV0dXJuIGEuaXNQb2ludEluc2lkZUJCb3goZSxjLGQpJiZiSChiLFtbXCJNXCIsYyxkXSxbXCJIXCIsZS54MisxMF1dLDEpJTI9PTF9LGEuX3JlbW92ZWRGYWN0b3J5PWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2V2ZShcInJhcGhhZWwubG9nXCIsbnVsbCxcIlJhcGhh77+9bDogeW91IGFyZSBjYWxsaW5nIHRvIG1ldGhvZCDvv71cIithK1wi77+9IG9mIHJlbW92ZWQgb2JqZWN0XCIsYSl9fTt2YXIgYkk9YS5wYXRoQkJveD1mdW5jdGlvbihhKXt2YXIgYj1ieihhKTtpZihiLmJib3gpcmV0dXJuIGIuYmJveDtpZighYSlyZXR1cm57eDowLHk6MCx3aWR0aDowLGhlaWdodDowLHgyOjAseTI6MH07YT1iUihhKTt2YXIgYz0wLGQ9MCxlPVtdLGY9W10sZztmb3IodmFyIGg9MCxpPWEubGVuZ3RoO2g8aTtoKyspe2c9YVtoXTtpZihnWzBdPT1cIk1cIiljPWdbMV0sZD1nWzJdLGUucHVzaChjKSxmLnB1c2goZCk7ZWxzZXt2YXIgaj1iUShjLGQsZ1sxXSxnWzJdLGdbM10sZ1s0XSxnWzVdLGdbNl0pO2U9ZVtuXShqLm1pbi54LGoubWF4LngpLGY9ZltuXShqLm1pbi55LGoubWF4LnkpLGM9Z1s1XSxkPWdbNl19fXZhciBrPXlbbV0oMCxlKSxsPXlbbV0oMCxmKSxvPXhbbV0oMCxlKSxwPXhbbV0oMCxmKSxxPXt4OmsseTpsLHgyOm8seTI6cCx3aWR0aDpvLWssaGVpZ2h0OnAtbH07Yi5iYm94PWJtKHEpO3JldHVybiBxfSxiSj1mdW5jdGlvbihiKXt2YXIgYz1ibShiKTtjLnRvU3RyaW5nPWEuX3BhdGgyc3RyaW5nO3JldHVybiBjfSxiSz1hLl9wYXRoVG9SZWxhdGl2ZT1mdW5jdGlvbihiKXt2YXIgYz1ieihiKTtpZihjLnJlbClyZXR1cm4gYkooYy5yZWwpO2lmKCFhLmlzKGIsRSl8fCFhLmlzKGImJmJbMF0sRSkpYj1hLnBhcnNlUGF0aFN0cmluZyhiKTt2YXIgZD1bXSxlPTAsZj0wLGc9MCxoPTAsaT0wO2JbMF1bMF09PVwiTVwiJiYoZT1iWzBdWzFdLGY9YlswXVsyXSxnPWUsaD1mLGkrKyxkLnB1c2goW1wiTVwiLGUsZl0pKTtmb3IodmFyIGo9aSxrPWIubGVuZ3RoO2o8aztqKyspe3ZhciBsPWRbal09W10sbT1iW2pdO2lmKG1bMF0hPXYuY2FsbChtWzBdKSl7bFswXT12LmNhbGwobVswXSk7c3dpdGNoKGxbMF0pe2Nhc2VcImFcIjpsWzFdPW1bMV0sbFsyXT1tWzJdLGxbM109bVszXSxsWzRdPW1bNF0sbFs1XT1tWzVdLGxbNl09KyhtWzZdLWUpLnRvRml4ZWQoMyksbFs3XT0rKG1bN10tZikudG9GaXhlZCgzKTticmVhaztjYXNlXCJ2XCI6bFsxXT0rKG1bMV0tZikudG9GaXhlZCgzKTticmVhaztjYXNlXCJtXCI6Zz1tWzFdLGg9bVsyXTtkZWZhdWx0OmZvcih2YXIgbj0xLG89bS5sZW5ndGg7bjxvO24rKylsW25dPSsobVtuXS0obiUyP2U6ZikpLnRvRml4ZWQoMyl9fWVsc2V7bD1kW2pdPVtdLG1bMF09PVwibVwiJiYoZz1tWzFdK2UsaD1tWzJdK2YpO2Zvcih2YXIgcD0wLHE9bS5sZW5ndGg7cDxxO3ArKylkW2pdW3BdPW1bcF19dmFyIHI9ZFtqXS5sZW5ndGg7c3dpdGNoKGRbal1bMF0pe2Nhc2VcInpcIjplPWcsZj1oO2JyZWFrO2Nhc2VcImhcIjplKz0rZFtqXVtyLTFdO2JyZWFrO2Nhc2VcInZcIjpmKz0rZFtqXVtyLTFdO2JyZWFrO2RlZmF1bHQ6ZSs9K2Rbal1bci0yXSxmKz0rZFtqXVtyLTFdfX1kLnRvU3RyaW5nPWEuX3BhdGgyc3RyaW5nLGMucmVsPWJKKGQpO3JldHVybiBkfSxiTD1hLl9wYXRoVG9BYnNvbHV0ZT1mdW5jdGlvbihiKXt2YXIgYz1ieihiKTtpZihjLmFicylyZXR1cm4gYkooYy5hYnMpO2lmKCFhLmlzKGIsRSl8fCFhLmlzKGImJmJbMF0sRSkpYj1hLnBhcnNlUGF0aFN0cmluZyhiKTtpZighYnx8IWIubGVuZ3RoKXJldHVybltbXCJNXCIsMCwwXV07dmFyIGQ9W10sZT0wLGY9MCxnPTAsaD0wLGk9MDtiWzBdWzBdPT1cIk1cIiYmKGU9K2JbMF1bMV0sZj0rYlswXVsyXSxnPWUsaD1mLGkrKyxkWzBdPVtcIk1cIixlLGZdKTt2YXIgaj1iLmxlbmd0aD09MyYmYlswXVswXT09XCJNXCImJmJbMV1bMF0udG9VcHBlckNhc2UoKT09XCJSXCImJmJbMl1bMF0udG9VcHBlckNhc2UoKT09XCJaXCI7Zm9yKHZhciBrLGwsbT1pLG89Yi5sZW5ndGg7bTxvO20rKyl7ZC5wdXNoKGs9W10pLGw9YlttXTtpZihsWzBdIT1TLmNhbGwobFswXSkpe2tbMF09Uy5jYWxsKGxbMF0pO3N3aXRjaChrWzBdKXtjYXNlXCJBXCI6a1sxXT1sWzFdLGtbMl09bFsyXSxrWzNdPWxbM10sa1s0XT1sWzRdLGtbNV09bFs1XSxrWzZdPSsobFs2XStlKSxrWzddPSsobFs3XStmKTticmVhaztjYXNlXCJWXCI6a1sxXT0rbFsxXStmO2JyZWFrO2Nhc2VcIkhcIjprWzFdPStsWzFdK2U7YnJlYWs7Y2FzZVwiUlwiOnZhciBwPVtlLGZdW25dKGwuc2xpY2UoMSkpO2Zvcih2YXIgcT0yLHI9cC5sZW5ndGg7cTxyO3ErKylwW3FdPStwW3FdK2UscFsrK3FdPStwW3FdK2Y7ZC5wb3AoKSxkPWRbbl0oYnkocCxqKSk7YnJlYWs7Y2FzZVwiTVwiOmc9K2xbMV0rZSxoPStsWzJdK2Y7ZGVmYXVsdDpmb3IocT0xLHI9bC5sZW5ndGg7cTxyO3ErKylrW3FdPStsW3FdKyhxJTI/ZTpmKX19ZWxzZSBpZihsWzBdPT1cIlJcIilwPVtlLGZdW25dKGwuc2xpY2UoMSkpLGQucG9wKCksZD1kW25dKGJ5KHAsaikpLGs9W1wiUlwiXVtuXShsLnNsaWNlKC0yKSk7ZWxzZSBmb3IodmFyIHM9MCx0PWwubGVuZ3RoO3M8dDtzKyspa1tzXT1sW3NdO3N3aXRjaChrWzBdKXtjYXNlXCJaXCI6ZT1nLGY9aDticmVhaztjYXNlXCJIXCI6ZT1rWzFdO2JyZWFrO2Nhc2VcIlZcIjpmPWtbMV07YnJlYWs7Y2FzZVwiTVwiOmc9a1trLmxlbmd0aC0yXSxoPWtbay5sZW5ndGgtMV07ZGVmYXVsdDplPWtbay5sZW5ndGgtMl0sZj1rW2subGVuZ3RoLTFdfX1kLnRvU3RyaW5nPWEuX3BhdGgyc3RyaW5nLGMuYWJzPWJKKGQpO3JldHVybiBkfSxiTT1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5bYSxiLGMsZCxjLGRdfSxiTj1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9MS8zLGg9Mi8zO3JldHVybltnKmEraCpjLGcqYitoKmQsZyplK2gqYyxnKmYraCpkLGUsZl19LGJPPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpLGope3ZhciBrPUIqMTIwLzE4MCxsPUIvMTgwKigrZXx8MCksbT1bXSxvLHA9YnYoZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEqdy5jb3MoYyktYip3LnNpbihjKSxlPWEqdy5zaW4oYykrYip3LmNvcyhjKTtyZXR1cm57eDpkLHk6ZX19KTtpZighail7bz1wKGEsYiwtbCksYT1vLngsYj1vLnksbz1wKGgsaSwtbCksaD1vLngsaT1vLnk7dmFyIHE9dy5jb3MoQi8xODAqZSkscj13LnNpbihCLzE4MCplKSx0PShhLWgpLzIsdT0oYi1pKS8yLHY9dCp0LyhjKmMpK3UqdS8oZCpkKTt2PjEmJih2PXcuc3FydCh2KSxjPXYqYyxkPXYqZCk7dmFyIHg9YypjLHk9ZCpkLEE9KGY9PWc/LTE6MSkqdy5zcXJ0KHooKHgqeS14KnUqdS15KnQqdCkvKHgqdSp1K3kqdCp0KSkpLEM9QSpjKnUvZCsoYStoKS8yLEQ9QSotZCp0L2MrKGIraSkvMixFPXcuYXNpbigoKGItRCkvZCkudG9GaXhlZCg5KSksRj13LmFzaW4oKChpLUQpL2QpLnRvRml4ZWQoOSkpO0U9YTxDP0ItRTpFLEY9aDxDP0ItRjpGLEU8MCYmKEU9QioyK0UpLEY8MCYmKEY9QioyK0YpLGcmJkU+RiYmKEU9RS1CKjIpLCFnJiZGPkUmJihGPUYtQioyKX1lbHNlIEU9alswXSxGPWpbMV0sQz1qWzJdLEQ9alszXTt2YXIgRz1GLUU7aWYoeihHKT5rKXt2YXIgSD1GLEk9aCxKPWk7Rj1FK2sqKGcmJkY+RT8xOi0xKSxoPUMrYyp3LmNvcyhGKSxpPUQrZCp3LnNpbihGKSxtPWJPKGgsaSxjLGQsZSwwLGcsSSxKLFtGLEgsQyxEXSl9Rz1GLUU7dmFyIEs9dy5jb3MoRSksTD13LnNpbihFKSxNPXcuY29zKEYpLE49dy5zaW4oRiksTz13LnRhbihHLzQpLFA9NC8zKmMqTyxRPTQvMypkKk8sUj1bYSxiXSxTPVthK1AqTCxiLVEqS10sVD1baCtQKk4saS1RKk1dLFU9W2gsaV07U1swXT0yKlJbMF0tU1swXSxTWzFdPTIqUlsxXS1TWzFdO2lmKGopcmV0dXJuW1MsVCxVXVtuXShtKTttPVtTLFQsVV1bbl0obSkuam9pbigpW3NdKFwiLFwiKTt2YXIgVj1bXTtmb3IodmFyIFc9MCxYPW0ubGVuZ3RoO1c8WDtXKyspVltXXT1XJTI/cChtW1ctMV0sbVtXXSxsKS55OnAobVtXXSxtW1crMV0sbCkueDtyZXR1cm4gVn0sYlA9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGkpe3ZhciBqPTEtaTtyZXR1cm57eDpBKGosMykqYStBKGosMikqMyppKmMraiozKmkqaSplK0EoaSwzKSpnLHk6QShqLDMpKmIrQShqLDIpKjMqaSpkK2oqMyppKmkqZitBKGksMykqaH19LGJRPWJ2KGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGk9ZS0yKmMrYS0oZy0yKmUrYyksaj0yKihjLWEpLTIqKGUtYyksaz1hLWMsbD0oLWordy5zcXJ0KGoqai00KmkqaykpLzIvaSxuPSgtai13LnNxcnQoaipqLTQqaSprKSkvMi9pLG89W2IsaF0scD1bYSxnXSxxO3oobCk+XCIxZTEyXCImJihsPS41KSx6KG4pPlwiMWUxMlwiJiYobj0uNSksbD4wJiZsPDEmJihxPWJQKGEsYixjLGQsZSxmLGcsaCxsKSxwLnB1c2gocS54KSxvLnB1c2gocS55KSksbj4wJiZuPDEmJihxPWJQKGEsYixjLGQsZSxmLGcsaCxuKSxwLnB1c2gocS54KSxvLnB1c2gocS55KSksaT1mLTIqZCtiLShoLTIqZitkKSxqPTIqKGQtYiktMiooZi1kKSxrPWItZCxsPSgtait3LnNxcnQoaipqLTQqaSprKSkvMi9pLG49KC1qLXcuc3FydChqKmotNCppKmspKS8yL2kseihsKT5cIjFlMTJcIiYmKGw9LjUpLHoobik+XCIxZTEyXCImJihuPS41KSxsPjAmJmw8MSYmKHE9YlAoYSxiLGMsZCxlLGYsZyxoLGwpLHAucHVzaChxLngpLG8ucHVzaChxLnkpKSxuPjAmJm48MSYmKHE9YlAoYSxiLGMsZCxlLGYsZyxoLG4pLHAucHVzaChxLngpLG8ucHVzaChxLnkpKTtyZXR1cm57bWluOnt4OnlbbV0oMCxwKSx5OnlbbV0oMCxvKX0sbWF4Ont4OnhbbV0oMCxwKSx5OnhbbV0oMCxvKX19fSksYlI9YS5fcGF0aDJjdXJ2ZT1idihmdW5jdGlvbihhLGIpe3ZhciBjPSFiJiZieihhKTtpZighYiYmYy5jdXJ2ZSlyZXR1cm4gYkooYy5jdXJ2ZSk7dmFyIGQ9YkwoYSksZT1iJiZiTChiKSxmPXt4OjAseTowLGJ4OjAsYnk6MCxYOjAsWTowLHF4Om51bGwscXk6bnVsbH0sZz17eDowLHk6MCxieDowLGJ5OjAsWDowLFk6MCxxeDpudWxsLHF5Om51bGx9LGg9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKCFhKXJldHVybltcIkNcIixiLngsYi55LGIueCxiLnksYi54LGIueV07IShhWzBdaW57VDoxLFE6MX0pJiYoYi5xeD1iLnF5PW51bGwpO3N3aXRjaChhWzBdKXtjYXNlXCJNXCI6Yi5YPWFbMV0sYi5ZPWFbMl07YnJlYWs7Y2FzZVwiQVwiOmE9W1wiQ1wiXVtuXShiT1ttXSgwLFtiLngsYi55XVtuXShhLnNsaWNlKDEpKSkpO2JyZWFrO2Nhc2VcIlNcIjpjPWIueCsoYi54LShiLmJ4fHxiLngpKSxkPWIueSsoYi55LShiLmJ5fHxiLnkpKSxhPVtcIkNcIixjLGRdW25dKGEuc2xpY2UoMSkpO2JyZWFrO2Nhc2VcIlRcIjpiLnF4PWIueCsoYi54LShiLnF4fHxiLngpKSxiLnF5PWIueSsoYi55LShiLnF5fHxiLnkpKSxhPVtcIkNcIl1bbl0oYk4oYi54LGIueSxiLnF4LGIucXksYVsxXSxhWzJdKSk7YnJlYWs7Y2FzZVwiUVwiOmIucXg9YVsxXSxiLnF5PWFbMl0sYT1bXCJDXCJdW25dKGJOKGIueCxiLnksYVsxXSxhWzJdLGFbM10sYVs0XSkpO2JyZWFrO2Nhc2VcIkxcIjphPVtcIkNcIl1bbl0oYk0oYi54LGIueSxhWzFdLGFbMl0pKTticmVhaztjYXNlXCJIXCI6YT1bXCJDXCJdW25dKGJNKGIueCxiLnksYVsxXSxiLnkpKTticmVhaztjYXNlXCJWXCI6YT1bXCJDXCJdW25dKGJNKGIueCxiLnksYi54LGFbMV0pKTticmVhaztjYXNlXCJaXCI6YT1bXCJDXCJdW25dKGJNKGIueCxiLnksYi5YLGIuWSkpfXJldHVybiBhfSxpPWZ1bmN0aW9uKGEsYil7aWYoYVtiXS5sZW5ndGg+Nyl7YVtiXS5zaGlmdCgpO3ZhciBjPWFbYl07d2hpbGUoYy5sZW5ndGgpYS5zcGxpY2UoYisrLDAsW1wiQ1wiXVtuXShjLnNwbGljZSgwLDYpKSk7YS5zcGxpY2UoYiwxKSxsPXgoZC5sZW5ndGgsZSYmZS5sZW5ndGh8fDApfX0saj1mdW5jdGlvbihhLGIsYyxmLGcpe2EmJmImJmFbZ11bMF09PVwiTVwiJiZiW2ddWzBdIT1cIk1cIiYmKGIuc3BsaWNlKGcsMCxbXCJNXCIsZi54LGYueV0pLGMuYng9MCxjLmJ5PTAsYy54PWFbZ11bMV0sYy55PWFbZ11bMl0sbD14KGQubGVuZ3RoLGUmJmUubGVuZ3RofHwwKSl9O2Zvcih2YXIgaz0wLGw9eChkLmxlbmd0aCxlJiZlLmxlbmd0aHx8MCk7azxsO2srKyl7ZFtrXT1oKGRba10sZiksaShkLGspLGUmJihlW2tdPWgoZVtrXSxnKSksZSYmaShlLGspLGooZCxlLGYsZyxrKSxqKGUsZCxnLGYsayk7dmFyIG89ZFtrXSxwPWUmJmVba10scT1vLmxlbmd0aCxyPWUmJnAubGVuZ3RoO2YueD1vW3EtMl0sZi55PW9bcS0xXSxmLmJ4PVEob1txLTRdKXx8Zi54LGYuYnk9UShvW3EtM10pfHxmLnksZy5ieD1lJiYoUShwW3ItNF0pfHxnLngpLGcuYnk9ZSYmKFEocFtyLTNdKXx8Zy55KSxnLng9ZSYmcFtyLTJdLGcueT1lJiZwW3ItMV19ZXx8KGMuY3VydmU9YkooZCkpO3JldHVybiBlP1tkLGVdOmR9LG51bGwsYkopLGJTPWEuX3BhcnNlRG90cz1idihmdW5jdGlvbihiKXt2YXIgYz1bXTtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPXt9LGc9YltkXS5tYXRjaCgvXihbXjpdKik6PyhbXFxkXFwuXSopLyk7Zi5jb2xvcj1hLmdldFJHQihnWzFdKTtpZihmLmNvbG9yLmVycm9yKXJldHVybiBudWxsO2YuY29sb3I9Zi5jb2xvci5oZXgsZ1syXSYmKGYub2Zmc2V0PWdbMl0rXCIlXCIpLGMucHVzaChmKX1mb3IoZD0xLGU9Yy5sZW5ndGgtMTtkPGU7ZCsrKWlmKCFjW2RdLm9mZnNldCl7dmFyIGg9UShjW2QtMV0ub2Zmc2V0fHwwKSxpPTA7Zm9yKHZhciBqPWQrMTtqPGU7aisrKWlmKGNbal0ub2Zmc2V0KXtpPWNbal0ub2Zmc2V0O2JyZWFrfWl8fChpPTEwMCxqPWUpLGk9UShpKTt2YXIgaz0oaS1oKS8oai1kKzEpO2Zvcig7ZDxqO2QrKyloKz1rLGNbZF0ub2Zmc2V0PWgrXCIlXCJ9cmV0dXJuIGN9KSxiVD1hLl90ZWFyPWZ1bmN0aW9uKGEsYil7YT09Yi50b3AmJihiLnRvcD1hLnByZXYpLGE9PWIuYm90dG9tJiYoYi5ib3R0b209YS5uZXh0KSxhLm5leHQmJihhLm5leHQucHJldj1hLnByZXYpLGEucHJldiYmKGEucHJldi5uZXh0PWEubmV4dCl9LGJVPWEuX3RvZnJvbnQ9ZnVuY3Rpb24oYSxiKXtiLnRvcCE9PWEmJihiVChhLGIpLGEubmV4dD1udWxsLGEucHJldj1iLnRvcCxiLnRvcC5uZXh0PWEsYi50b3A9YSl9LGJWPWEuX3RvYmFjaz1mdW5jdGlvbihhLGIpe2IuYm90dG9tIT09YSYmKGJUKGEsYiksYS5uZXh0PWIuYm90dG9tLGEucHJldj1udWxsLGIuYm90dG9tLnByZXY9YSxiLmJvdHRvbT1hKX0sYlc9YS5faW5zZXJ0YWZ0ZXI9ZnVuY3Rpb24oYSxiLGMpe2JUKGEsYyksYj09Yy50b3AmJihjLnRvcD1hKSxiLm5leHQmJihiLm5leHQucHJldj1hKSxhLm5leHQ9Yi5uZXh0LGEucHJldj1iLGIubmV4dD1hfSxiWD1hLl9pbnNlcnRiZWZvcmU9ZnVuY3Rpb24oYSxiLGMpe2JUKGEsYyksYj09Yy5ib3R0b20mJihjLmJvdHRvbT1hKSxiLnByZXYmJihiLnByZXYubmV4dD1hKSxhLnByZXY9Yi5wcmV2LGIucHJldj1hLGEubmV4dD1ifSxiWT1hLnRvTWF0cml4PWZ1bmN0aW9uKGEsYil7dmFyIGM9YkkoYSksZD17Xzp7dHJhbnNmb3JtOnB9LGdldEJCb3g6ZnVuY3Rpb24oKXtyZXR1cm4gY319O2IkKGQsYik7cmV0dXJuIGQubWF0cml4fSxiWj1hLnRyYW5zZm9ybVBhdGg9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYmooYSxiWShhLGIpKX0sYiQ9YS5fZXh0cmFjdFRyYW5zZm9ybT1mdW5jdGlvbihiLGMpe2lmKGM9PW51bGwpcmV0dXJuIGIuXy50cmFuc2Zvcm07Yz1yKGMpLnJlcGxhY2UoL1xcLnszfXxcXHUyMDI2L2csYi5fLnRyYW5zZm9ybXx8cCk7dmFyIGQ9YS5wYXJzZVRyYW5zZm9ybVN0cmluZyhjKSxlPTAsZj0wLGc9MCxoPTEsaT0xLGo9Yi5fLGs9bmV3IGNiO2oudHJhbnNmb3JtPWR8fFtdO2lmKGQpZm9yKHZhciBsPTAsbT1kLmxlbmd0aDtsPG07bCsrKXt2YXIgbj1kW2xdLG89bi5sZW5ndGgscT1yKG5bMF0pLnRvTG93ZXJDYXNlKCkscz1uWzBdIT1xLHQ9cz9rLmludmVydCgpOjAsdSx2LHcseCx5O3E9PVwidFwiJiZvPT0zP3M/KHU9dC54KDAsMCksdj10LnkoMCwwKSx3PXQueChuWzFdLG5bMl0pLHg9dC55KG5bMV0sblsyXSksay50cmFuc2xhdGUody11LHgtdikpOmsudHJhbnNsYXRlKG5bMV0sblsyXSk6cT09XCJyXCI/bz09Mj8oeT15fHxiLmdldEJCb3goMSksay5yb3RhdGUoblsxXSx5LngreS53aWR0aC8yLHkueSt5LmhlaWdodC8yKSxlKz1uWzFdKTpvPT00JiYocz8odz10LngoblsyXSxuWzNdKSx4PXQueShuWzJdLG5bM10pLGsucm90YXRlKG5bMV0sdyx4KSk6ay5yb3RhdGUoblsxXSxuWzJdLG5bM10pLGUrPW5bMV0pOnE9PVwic1wiP289PTJ8fG89PTM/KHk9eXx8Yi5nZXRCQm94KDEpLGsuc2NhbGUoblsxXSxuW28tMV0seS54K3kud2lkdGgvMix5LnkreS5oZWlnaHQvMiksaCo9blsxXSxpKj1uW28tMV0pOm89PTUmJihzPyh3PXQueChuWzNdLG5bNF0pLHg9dC55KG5bM10sbls0XSksay5zY2FsZShuWzFdLG5bMl0sdyx4KSk6ay5zY2FsZShuWzFdLG5bMl0sblszXSxuWzRdKSxoKj1uWzFdLGkqPW5bMl0pOnE9PVwibVwiJiZvPT03JiZrLmFkZChuWzFdLG5bMl0sblszXSxuWzRdLG5bNV0sbls2XSksai5kaXJ0eVQ9MSxiLm1hdHJpeD1rfWIubWF0cml4PWssai5zeD1oLGouc3k9aSxqLmRlZz1lLGouZHg9Zj1rLmUsai5keT1nPWsuZixoPT0xJiZpPT0xJiYhZSYmai5iYm94PyhqLmJib3gueCs9K2Ysai5iYm94LnkrPStnKTpqLmRpcnR5VD0xfSxiXz1mdW5jdGlvbihhKXt2YXIgYj1hWzBdO3N3aXRjaChiLnRvTG93ZXJDYXNlKCkpe2Nhc2VcInRcIjpyZXR1cm5bYiwwLDBdO2Nhc2VcIm1cIjpyZXR1cm5bYiwxLDAsMCwxLDAsMF07Y2FzZVwiclwiOnJldHVybiBhLmxlbmd0aD09ND9bYiwwLGFbMl0sYVszXV06W2IsMF07Y2FzZVwic1wiOnJldHVybiBhLmxlbmd0aD09NT9bYiwxLDEsYVszXSxhWzRdXTphLmxlbmd0aD09Mz9bYiwxLDFdOltiLDFdfX0sY2E9YS5fZXF1YWxpc2VUcmFuc2Zvcm09ZnVuY3Rpb24oYixjKXtjPXIoYykucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZyxiKSxiPWEucGFyc2VUcmFuc2Zvcm1TdHJpbmcoYil8fFtdLGM9YS5wYXJzZVRyYW5zZm9ybVN0cmluZyhjKXx8W107dmFyIGQ9eChiLmxlbmd0aCxjLmxlbmd0aCksZT1bXSxmPVtdLGc9MCxoLGksaixrO2Zvcig7ZzxkO2crKyl7aj1iW2ddfHxiXyhjW2ddKSxrPWNbZ118fGJfKGopO2lmKGpbMF0hPWtbMF18fGpbMF0udG9Mb3dlckNhc2UoKT09XCJyXCImJihqWzJdIT1rWzJdfHxqWzNdIT1rWzNdKXx8alswXS50b0xvd2VyQ2FzZSgpPT1cInNcIiYmKGpbM10hPWtbM118fGpbNF0hPWtbNF0pKXJldHVybjtlW2ddPVtdLGZbZ109W107Zm9yKGg9MCxpPXgoai5sZW5ndGgsay5sZW5ndGgpO2g8aTtoKyspaCBpbiBqJiYoZVtnXVtoXT1qW2hdKSxoIGluIGsmJihmW2ddW2hdPWtbaF0pfXJldHVybntmcm9tOmUsdG86Zn19O2EuX2dldENvbnRhaW5lcj1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZjtmPWU9PW51bGwmJiFhLmlzKGIsXCJvYmplY3RcIik/aC5kb2MuZ2V0RWxlbWVudEJ5SWQoYik6YjtpZihmIT1udWxsKXtpZihmLnRhZ05hbWUpcmV0dXJuIGM9PW51bGw/e2NvbnRhaW5lcjpmLHdpZHRoOmYuc3R5bGUucGl4ZWxXaWR0aHx8Zi5vZmZzZXRXaWR0aCxoZWlnaHQ6Zi5zdHlsZS5waXhlbEhlaWdodHx8Zi5vZmZzZXRIZWlnaHR9Ontjb250YWluZXI6Zix3aWR0aDpjLGhlaWdodDpkfTtyZXR1cm57Y29udGFpbmVyOjEseDpiLHk6Yyx3aWR0aDpkLGhlaWdodDplfX19LGEucGF0aFRvUmVsYXRpdmU9YkssYS5fZW5naW5lPXt9LGEucGF0aDJjdXJ2ZT1iUixhLm1hdHJpeD1mdW5jdGlvbihhLGIsYyxkLGUsZil7cmV0dXJuIG5ldyBjYihhLGIsYyxkLGUsZil9LGZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGQoYSl7dmFyIGI9dy5zcXJ0KGMoYSkpO2FbMF0mJihhWzBdLz1iKSxhWzFdJiYoYVsxXS89Yil9ZnVuY3Rpb24gYyhhKXtyZXR1cm4gYVswXSphWzBdK2FbMV0qYVsxXX1iLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9W1tdLFtdLFtdXSxoPVtbdGhpcy5hLHRoaXMuYyx0aGlzLmVdLFt0aGlzLmIsdGhpcy5kLHRoaXMuZl0sWzAsMCwxXV0saT1bW2EsYyxlXSxbYixkLGZdLFswLDAsMV1dLGosayxsLG07YSYmYSBpbnN0YW5jZW9mIGNiJiYoaT1bW2EuYSxhLmMsYS5lXSxbYS5iLGEuZCxhLmZdLFswLDAsMV1dKTtmb3Ioaj0wO2o8MztqKyspZm9yKGs9MDtrPDM7aysrKXttPTA7Zm9yKGw9MDtsPDM7bCsrKW0rPWhbal1bbF0qaVtsXVtrXTtnW2pdW2tdPW19dGhpcy5hPWdbMF1bMF0sdGhpcy5iPWdbMV1bMF0sdGhpcy5jPWdbMF1bMV0sdGhpcy5kPWdbMV1bMV0sdGhpcy5lPWdbMF1bMl0sdGhpcy5mPWdbMV1bMl19LGIuaW52ZXJ0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuYSphLmQtYS5iKmEuYztyZXR1cm4gbmV3IGNiKGEuZC9iLC1hLmIvYiwtYS5jL2IsYS5hL2IsKGEuYyphLmYtYS5kKmEuZSkvYiwoYS5iKmEuZS1hLmEqYS5mKS9iKX0sYi5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgY2IodGhpcy5hLHRoaXMuYix0aGlzLmMsdGhpcy5kLHRoaXMuZSx0aGlzLmYpfSxiLnRyYW5zbGF0ZT1mdW5jdGlvbihhLGIpe3RoaXMuYWRkKDEsMCwwLDEsYSxiKX0sYi5zY2FsZT1mdW5jdGlvbihhLGIsYyxkKXtiPT1udWxsJiYoYj1hKSwoY3x8ZCkmJnRoaXMuYWRkKDEsMCwwLDEsYyxkKSx0aGlzLmFkZChhLDAsMCxiLDAsMCksKGN8fGQpJiZ0aGlzLmFkZCgxLDAsMCwxLC1jLC1kKX0sYi5yb3RhdGU9ZnVuY3Rpb24oYixjLGQpe2I9YS5yYWQoYiksYz1jfHwwLGQ9ZHx8MDt2YXIgZT0rdy5jb3MoYikudG9GaXhlZCg5KSxmPSt3LnNpbihiKS50b0ZpeGVkKDkpO3RoaXMuYWRkKGUsZiwtZixlLGMsZCksdGhpcy5hZGQoMSwwLDAsMSwtYywtZCl9LGIueD1mdW5jdGlvbihhLGIpe3JldHVybiBhKnRoaXMuYStiKnRoaXMuYyt0aGlzLmV9LGIueT1mdW5jdGlvbihhLGIpe3JldHVybiBhKnRoaXMuYitiKnRoaXMuZCt0aGlzLmZ9LGIuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybit0aGlzW3IuZnJvbUNoYXJDb2RlKDk3K2EpXS50b0ZpeGVkKDQpfSxiLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGEuc3ZnP1wibWF0cml4KFwiK1t0aGlzLmdldCgwKSx0aGlzLmdldCgxKSx0aGlzLmdldCgyKSx0aGlzLmdldCgzKSx0aGlzLmdldCg0KSx0aGlzLmdldCg1KV0uam9pbigpK1wiKVwiOlt0aGlzLmdldCgwKSx0aGlzLmdldCgyKSx0aGlzLmdldCgxKSx0aGlzLmdldCgzKSwwLDBdLmpvaW4oKX0sYi50b0ZpbHRlcj1mdW5jdGlvbigpe3JldHVyblwicHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0Lk1hdHJpeChNMTE9XCIrdGhpcy5nZXQoMCkrXCIsIE0xMj1cIit0aGlzLmdldCgyKStcIiwgTTIxPVwiK3RoaXMuZ2V0KDEpK1wiLCBNMjI9XCIrdGhpcy5nZXQoMykrXCIsIER4PVwiK3RoaXMuZ2V0KDQpK1wiLCBEeT1cIit0aGlzLmdldCg1KStcIiwgc2l6aW5nbWV0aG9kPSdhdXRvIGV4cGFuZCcpXCJ9LGIub2Zmc2V0PWZ1bmN0aW9uKCl7cmV0dXJuW3RoaXMuZS50b0ZpeGVkKDQpLHRoaXMuZi50b0ZpeGVkKDQpXX0sYi5zcGxpdD1mdW5jdGlvbigpe3ZhciBiPXt9O2IuZHg9dGhpcy5lLGIuZHk9dGhpcy5mO3ZhciBlPVtbdGhpcy5hLHRoaXMuY10sW3RoaXMuYix0aGlzLmRdXTtiLnNjYWxleD13LnNxcnQoYyhlWzBdKSksZChlWzBdKSxiLnNoZWFyPWVbMF1bMF0qZVsxXVswXStlWzBdWzFdKmVbMV1bMV0sZVsxXT1bZVsxXVswXS1lWzBdWzBdKmIuc2hlYXIsZVsxXVsxXS1lWzBdWzFdKmIuc2hlYXJdLGIuc2NhbGV5PXcuc3FydChjKGVbMV0pKSxkKGVbMV0pLGIuc2hlYXIvPWIuc2NhbGV5O3ZhciBmPS1lWzBdWzFdLGc9ZVsxXVsxXTtnPDA/KGIucm90YXRlPWEuZGVnKHcuYWNvcyhnKSksZjwwJiYoYi5yb3RhdGU9MzYwLWIucm90YXRlKSk6Yi5yb3RhdGU9YS5kZWcody5hc2luKGYpKSxiLmlzU2ltcGxlPSErYi5zaGVhci50b0ZpeGVkKDkpJiYoYi5zY2FsZXgudG9GaXhlZCg5KT09Yi5zY2FsZXkudG9GaXhlZCg5KXx8IWIucm90YXRlKSxiLmlzU3VwZXJTaW1wbGU9IStiLnNoZWFyLnRvRml4ZWQoOSkmJmIuc2NhbGV4LnRvRml4ZWQoOSk9PWIuc2NhbGV5LnRvRml4ZWQoOSkmJiFiLnJvdGF0ZSxiLm5vUm90YXRpb249IStiLnNoZWFyLnRvRml4ZWQoOSkmJiFiLnJvdGF0ZTtyZXR1cm4gYn0sYi50b1RyYW5zZm9ybVN0cmluZz1mdW5jdGlvbihhKXt2YXIgYj1hfHx0aGlzW3NdKCk7aWYoYi5pc1NpbXBsZSl7Yi5zY2FsZXg9K2Iuc2NhbGV4LnRvRml4ZWQoNCksYi5zY2FsZXk9K2Iuc2NhbGV5LnRvRml4ZWQoNCksYi5yb3RhdGU9K2Iucm90YXRlLnRvRml4ZWQoNCk7cmV0dXJuKGIuZHh8fGIuZHk/XCJ0XCIrW2IuZHgsYi5keV06cCkrKGIuc2NhbGV4IT0xfHxiLnNjYWxleSE9MT9cInNcIitbYi5zY2FsZXgsYi5zY2FsZXksMCwwXTpwKSsoYi5yb3RhdGU/XCJyXCIrW2Iucm90YXRlLDAsMF06cCl9cmV0dXJuXCJtXCIrW3RoaXMuZ2V0KDApLHRoaXMuZ2V0KDEpLHRoaXMuZ2V0KDIpLHRoaXMuZ2V0KDMpLHRoaXMuZ2V0KDQpLHRoaXMuZ2V0KDUpXX19KGNiLnByb3RvdHlwZSk7dmFyIGNjPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL1ZlcnNpb25cXC8oLio/KVxccy8pfHxuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtuYXZpZ2F0b3IudmVuZG9yPT1cIkFwcGxlIENvbXB1dGVyLCBJbmMuXCImJihjYyYmY2NbMV08NHx8bmF2aWdhdG9yLnBsYXRmb3JtLnNsaWNlKDAsMik9PVwiaVBcIil8fG5hdmlnYXRvci52ZW5kb3I9PVwiR29vZ2xlIEluYy5cIiYmY2MmJmNjWzFdPDg/ay5zYWZhcmk9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnJlY3QoLTk5LC05OSx0aGlzLndpZHRoKzk5LHRoaXMuaGVpZ2h0Kzk5KS5hdHRyKHtzdHJva2U6XCJub25lXCJ9KTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5yZW1vdmUoKX0pfTprLnNhZmFyaT1iZTt2YXIgY2Q9ZnVuY3Rpb24oKXt0aGlzLnJldHVyblZhbHVlPSExfSxjZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKX0sY2Y9ZnVuY3Rpb24oKXt0aGlzLmNhbmNlbEJ1YmJsZT0hMH0sY2c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfSxjaD1mdW5jdGlvbigpe2lmKGguZG9jLmFkZEV2ZW50TGlzdGVuZXIpcmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW8mJnVbYl0/dVtiXTpiLGY9ZnVuY3Rpb24oZSl7dmFyIGY9aC5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8aC5kb2MuYm9keS5zY3JvbGxUb3AsaT1oLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8aC5kb2MuYm9keS5zY3JvbGxMZWZ0LGo9ZS5jbGllbnRYK2ksaz1lLmNsaWVudFkrZjtpZihvJiZ1W2ddKGIpKWZvcih2YXIgbD0wLG09ZS50YXJnZXRUb3VjaGVzJiZlLnRhcmdldFRvdWNoZXMubGVuZ3RoO2w8bTtsKyspaWYoZS50YXJnZXRUb3VjaGVzW2xdLnRhcmdldD09YSl7dmFyIG49ZTtlPWUudGFyZ2V0VG91Y2hlc1tsXSxlLm9yaWdpbmFsRXZlbnQ9bixlLnByZXZlbnREZWZhdWx0PWNlLGUuc3RvcFByb3BhZ2F0aW9uPWNnO2JyZWFrfXJldHVybiBjLmNhbGwoZCxlLGosayl9O2EuYWRkRXZlbnRMaXN0ZW5lcihlLGYsITEpO3JldHVybiBmdW5jdGlvbigpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLGYsITEpO3JldHVybiEwfX07aWYoaC5kb2MuYXR0YWNoRXZlbnQpcmV0dXJuIGZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWZ1bmN0aW9uKGEpe2E9YXx8aC53aW4uZXZlbnQ7dmFyIGI9aC5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8aC5kb2MuYm9keS5zY3JvbGxUb3AsZT1oLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8aC5kb2MuYm9keS5zY3JvbGxMZWZ0LGY9YS5jbGllbnRYK2UsZz1hLmNsaWVudFkrYjthLnByZXZlbnREZWZhdWx0PWEucHJldmVudERlZmF1bHR8fGNkLGEuc3RvcFByb3BhZ2F0aW9uPWEuc3RvcFByb3BhZ2F0aW9ufHxjZjtyZXR1cm4gYy5jYWxsKGQsYSxmLGcpfTthLmF0dGFjaEV2ZW50KFwib25cIitiLGUpO3ZhciBmPWZ1bmN0aW9uKCl7YS5kZXRhY2hFdmVudChcIm9uXCIrYixlKTtyZXR1cm4hMH07cmV0dXJuIGZ9fSgpLGNpPVtdLGNqPWZ1bmN0aW9uKGEpe3ZhciBiPWEuY2xpZW50WCxjPWEuY2xpZW50WSxkPWguZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGguZG9jLmJvZHkuc2Nyb2xsVG9wLGU9aC5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGguZG9jLmJvZHkuc2Nyb2xsTGVmdCxmLGc9Y2kubGVuZ3RoO3doaWxlKGctLSl7Zj1jaVtnXTtpZihvKXt2YXIgaT1hLnRvdWNoZXMubGVuZ3RoLGo7d2hpbGUoaS0tKXtqPWEudG91Y2hlc1tpXTtpZihqLmlkZW50aWZpZXI9PWYuZWwuX2RyYWcuaWQpe2I9ai5jbGllbnRYLGM9ai5jbGllbnRZLChhLm9yaWdpbmFsRXZlbnQ/YS5vcmlnaW5hbEV2ZW50OmEpLnByZXZlbnREZWZhdWx0KCk7YnJlYWt9fX1lbHNlIGEucHJldmVudERlZmF1bHQoKTt2YXIgaz1mLmVsLm5vZGUsbCxtPWsubmV4dFNpYmxpbmcsbj1rLnBhcmVudE5vZGUscD1rLnN0eWxlLmRpc3BsYXk7aC53aW4ub3BlcmEmJm4ucmVtb3ZlQ2hpbGQoayksay5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGw9Zi5lbC5wYXBlci5nZXRFbGVtZW50QnlQb2ludChiLGMpLGsuc3R5bGUuZGlzcGxheT1wLGgud2luLm9wZXJhJiYobT9uLmluc2VydEJlZm9yZShrLG0pOm4uYXBwZW5kQ2hpbGQoaykpLGwmJmV2ZShcInJhcGhhZWwuZHJhZy5vdmVyLlwiK2YuZWwuaWQsZi5lbCxsKSxiKz1lLGMrPWQsZXZlKFwicmFwaGFlbC5kcmFnLm1vdmUuXCIrZi5lbC5pZCxmLm1vdmVfc2NvcGV8fGYuZWwsYi1mLmVsLl9kcmFnLngsYy1mLmVsLl9kcmFnLnksYixjLGEpfX0sY2s9ZnVuY3Rpb24oYil7YS51bm1vdXNlbW92ZShjaikudW5tb3VzZXVwKGNrKTt2YXIgYz1jaS5sZW5ndGgsZDt3aGlsZShjLS0pZD1jaVtjXSxkLmVsLl9kcmFnPXt9LGV2ZShcInJhcGhhZWwuZHJhZy5lbmQuXCIrZC5lbC5pZCxkLmVuZF9zY29wZXx8ZC5zdGFydF9zY29wZXx8ZC5tb3ZlX3Njb3BlfHxkLmVsLGIpO2NpPVtdfSxjbD1hLmVsPXt9O2Zvcih2YXIgY209dC5sZW5ndGg7Y20tLTspKGZ1bmN0aW9uKGIpe2FbYl09Y2xbYl09ZnVuY3Rpb24oYyxkKXthLmlzKGMsXCJmdW5jdGlvblwiKSYmKHRoaXMuZXZlbnRzPXRoaXMuZXZlbnRzfHxbXSx0aGlzLmV2ZW50cy5wdXNoKHtuYW1lOmIsZjpjLHVuYmluZDpjaCh0aGlzLnNoYXBlfHx0aGlzLm5vZGV8fGguZG9jLGIsYyxkfHx0aGlzKX0pKTtyZXR1cm4gdGhpc30sYVtcInVuXCIrYl09Y2xbXCJ1blwiK2JdPWZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuZXZlbnRzfHxbXSxkPWMubGVuZ3RoO3doaWxlKGQtLSlpZihjW2RdLm5hbWU9PWImJmNbZF0uZj09YSl7Y1tkXS51bmJpbmQoKSxjLnNwbGljZShkLDEpLCFjLmxlbmd0aCYmZGVsZXRlIHRoaXMuZXZlbnRzO3JldHVybiB0aGlzfXJldHVybiB0aGlzfX0pKHRbY21dKTtjbC5kYXRhPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YmJbdGhpcy5pZF09YmJbdGhpcy5pZF18fHt9O2lmKGFyZ3VtZW50cy5sZW5ndGg9PTEpe2lmKGEuaXMoYixcIm9iamVjdFwiKSl7Zm9yKHZhciBlIGluIGIpYltnXShlKSYmdGhpcy5kYXRhKGUsYltlXSk7cmV0dXJuIHRoaXN9ZXZlKFwicmFwaGFlbC5kYXRhLmdldC5cIit0aGlzLmlkLHRoaXMsZFtiXSxiKTtyZXR1cm4gZFtiXX1kW2JdPWMsZXZlKFwicmFwaGFlbC5kYXRhLnNldC5cIit0aGlzLmlkLHRoaXMsYyxiKTtyZXR1cm4gdGhpc30sY2wucmVtb3ZlRGF0YT1mdW5jdGlvbihhKXthPT1udWxsP2JiW3RoaXMuaWRdPXt9OmJiW3RoaXMuaWRdJiZkZWxldGUgYmJbdGhpcy5pZF1bYV07cmV0dXJuIHRoaXN9LGNsLmhvdmVyPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm1vdXNlb3ZlcihhLGMpLm1vdXNlb3V0KGIsZHx8Yyl9LGNsLnVuaG92ZXI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy51bm1vdXNlb3ZlcihhKS51bm1vdXNlb3V0KGIpfTt2YXIgY249W107Y2wuZHJhZz1mdW5jdGlvbihiLGMsZCxlLGYsZyl7ZnVuY3Rpb24gaShpKXsoaS5vcmlnaW5hbEV2ZW50fHxpKS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBqPWguZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGguZG9jLmJvZHkuc2Nyb2xsVG9wLGs9aC5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnR8fGguZG9jLmJvZHkuc2Nyb2xsTGVmdDt0aGlzLl9kcmFnLng9aS5jbGllbnRYK2ssdGhpcy5fZHJhZy55PWkuY2xpZW50WStqLHRoaXMuX2RyYWcuaWQ9aS5pZGVudGlmaWVyLCFjaS5sZW5ndGgmJmEubW91c2Vtb3ZlKGNqKS5tb3VzZXVwKGNrKSxjaS5wdXNoKHtlbDp0aGlzLG1vdmVfc2NvcGU6ZSxzdGFydF9zY29wZTpmLGVuZF9zY29wZTpnfSksYyYmZXZlLm9uKFwicmFwaGFlbC5kcmFnLnN0YXJ0LlwiK3RoaXMuaWQsYyksYiYmZXZlLm9uKFwicmFwaGFlbC5kcmFnLm1vdmUuXCIrdGhpcy5pZCxiKSxkJiZldmUub24oXCJyYXBoYWVsLmRyYWcuZW5kLlwiK3RoaXMuaWQsZCksZXZlKFwicmFwaGFlbC5kcmFnLnN0YXJ0LlwiK3RoaXMuaWQsZnx8ZXx8dGhpcyxpLmNsaWVudFgrayxpLmNsaWVudFkraixpKX10aGlzLl9kcmFnPXt9LGNuLnB1c2goe2VsOnRoaXMsc3RhcnQ6aX0pLHRoaXMubW91c2Vkb3duKGkpO3JldHVybiB0aGlzfSxjbC5vbkRyYWdPdmVyPWZ1bmN0aW9uKGEpe2E/ZXZlLm9uKFwicmFwaGFlbC5kcmFnLm92ZXIuXCIrdGhpcy5pZCxhKTpldmUudW5iaW5kKFwicmFwaGFlbC5kcmFnLm92ZXIuXCIrdGhpcy5pZCl9LGNsLnVuZHJhZz1mdW5jdGlvbigpe3ZhciBiPWNuLmxlbmd0aDt3aGlsZShiLS0pY25bYl0uZWw9PXRoaXMmJih0aGlzLnVubW91c2Vkb3duKGNuW2JdLnN0YXJ0KSxjbi5zcGxpY2UoYiwxKSxldmUudW5iaW5kKFwicmFwaGFlbC5kcmFnLiouXCIrdGhpcy5pZCkpOyFjbi5sZW5ndGgmJmEudW5tb3VzZW1vdmUoY2opLnVubW91c2V1cChjayl9LGsuY2lyY2xlPWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLl9lbmdpbmUuY2lyY2xlKHRoaXMsYnx8MCxjfHwwLGR8fDApO3RoaXMuX19zZXRfXyYmdGhpcy5fX3NldF9fLnB1c2goZSk7cmV0dXJuIGV9LGsucmVjdD1mdW5jdGlvbihiLGMsZCxlLGYpe3ZhciBnPWEuX2VuZ2luZS5yZWN0KHRoaXMsYnx8MCxjfHwwLGR8fDAsZXx8MCxmfHwwKTt0aGlzLl9fc2V0X18mJnRoaXMuX19zZXRfXy5wdXNoKGcpO3JldHVybiBnfSxrLmVsbGlwc2U9ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGY9YS5fZW5naW5lLmVsbGlwc2UodGhpcyxifHwwLGN8fDAsZHx8MCxlfHwwKTt0aGlzLl9fc2V0X18mJnRoaXMuX19zZXRfXy5wdXNoKGYpO3JldHVybiBmfSxrLnBhdGg9ZnVuY3Rpb24oYil7YiYmIWEuaXMoYixEKSYmIWEuaXMoYlswXSxFKSYmKGIrPXApO3ZhciBjPWEuX2VuZ2luZS5wYXRoKGEuZm9ybWF0W21dKGEsYXJndW1lbnRzKSx0aGlzKTt0aGlzLl9fc2V0X18mJnRoaXMuX19zZXRfXy5wdXNoKGMpO3JldHVybiBjfSxrLmltYWdlPWZ1bmN0aW9uKGIsYyxkLGUsZil7dmFyIGc9YS5fZW5naW5lLmltYWdlKHRoaXMsYnx8XCJhYm91dDpibGFua1wiLGN8fDAsZHx8MCxlfHwwLGZ8fDApO3RoaXMuX19zZXRfXyYmdGhpcy5fX3NldF9fLnB1c2goZyk7cmV0dXJuIGd9LGsudGV4dD1mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5fZW5naW5lLnRleHQodGhpcyxifHwwLGN8fDAscihkKSk7dGhpcy5fX3NldF9fJiZ0aGlzLl9fc2V0X18ucHVzaChlKTtyZXR1cm4gZX0say5zZXQ9ZnVuY3Rpb24oYil7IWEuaXMoYixcImFycmF5XCIpJiYoYj1BcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLDAsYXJndW1lbnRzLmxlbmd0aCkpO3ZhciBjPW5ldyBjRyhiKTt0aGlzLl9fc2V0X18mJnRoaXMuX19zZXRfXy5wdXNoKGMpO3JldHVybiBjfSxrLnNldFN0YXJ0PWZ1bmN0aW9uKGEpe3RoaXMuX19zZXRfXz1hfHx0aGlzLnNldCgpfSxrLnNldEZpbmlzaD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLl9fc2V0X187ZGVsZXRlIHRoaXMuX19zZXRfXztyZXR1cm4gYn0say5zZXRTaXplPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuX2VuZ2luZS5zZXRTaXplLmNhbGwodGhpcyxiLGMpfSxrLnNldFZpZXdCb3g9ZnVuY3Rpb24oYixjLGQsZSxmKXtyZXR1cm4gYS5fZW5naW5lLnNldFZpZXdCb3guY2FsbCh0aGlzLGIsYyxkLGUsZil9LGsudG9wPWsuYm90dG9tPW51bGwsay5yYXBoYWVsPWE7dmFyIGNvPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksYz1hLm93bmVyRG9jdW1lbnQsZD1jLmJvZHksZT1jLmRvY3VtZW50RWxlbWVudCxmPWUuY2xpZW50VG9wfHxkLmNsaWVudFRvcHx8MCxnPWUuY2xpZW50TGVmdHx8ZC5jbGllbnRMZWZ0fHwwLGk9Yi50b3ArKGgud2luLnBhZ2VZT2Zmc2V0fHxlLnNjcm9sbFRvcHx8ZC5zY3JvbGxUb3ApLWYsaj1iLmxlZnQrKGgud2luLnBhZ2VYT2Zmc2V0fHxlLnNjcm9sbExlZnR8fGQuc2Nyb2xsTGVmdCktZztyZXR1cm57eTppLHg6an19O2suZ2V0RWxlbWVudEJ5UG9pbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jYW52YXMsZT1oLmRvYy5lbGVtZW50RnJvbVBvaW50KGEsYik7aWYoaC53aW4ub3BlcmEmJmUudGFnTmFtZT09XCJzdmdcIil7dmFyIGY9Y28oZCksZz1kLmNyZWF0ZVNWR1JlY3QoKTtnLng9YS1mLngsZy55PWItZi55LGcud2lkdGg9Zy5oZWlnaHQ9MTt2YXIgaT1kLmdldEludGVyc2VjdGlvbkxpc3QoZyxudWxsKTtpLmxlbmd0aCYmKGU9aVtpLmxlbmd0aC0xXSl9aWYoIWUpcmV0dXJuIG51bGw7d2hpbGUoZS5wYXJlbnROb2RlJiZlIT1kLnBhcmVudE5vZGUmJiFlLnJhcGhhZWwpZT1lLnBhcmVudE5vZGU7ZT09Yy5jYW52YXMucGFyZW50Tm9kZSYmKGU9ZCksZT1lJiZlLnJhcGhhZWw/Yy5nZXRCeUlkKGUucmFwaGFlbGlkKTpudWxsO3JldHVybiBlfSxrLmdldEJ5SWQ9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5ib3R0b207d2hpbGUoYil7aWYoYi5pZD09YSlyZXR1cm4gYjtiPWIubmV4dH1yZXR1cm4gbnVsbH0say5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ib3R0b207d2hpbGUoYyl7aWYoYS5jYWxsKGIsYyk9PT0hMSlyZXR1cm4gdGhpcztjPWMubmV4dH1yZXR1cm4gdGhpc30say5nZXRFbGVtZW50c0J5UG9pbnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnNldCgpO3RoaXMuZm9yRWFjaChmdW5jdGlvbihkKXtkLmlzUG9pbnRJbnNpZGUoYSxiKSYmYy5wdXNoKGQpfSk7cmV0dXJuIGN9LGNsLmlzUG9pbnRJbnNpZGU9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLnJlYWxQYXRoPXRoaXMucmVhbFBhdGh8fGJpW3RoaXMudHlwZV0odGhpcyk7cmV0dXJuIGEuaXNQb2ludEluc2lkZVBhdGgoZCxiLGMpfSxjbC5nZXRCQm94PWZ1bmN0aW9uKGEpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm57fTt2YXIgYj10aGlzLl87aWYoYSl7aWYoYi5kaXJ0eXx8IWIuYmJveHd0KXRoaXMucmVhbFBhdGg9YmlbdGhpcy50eXBlXSh0aGlzKSxiLmJib3h3dD1iSSh0aGlzLnJlYWxQYXRoKSxiLmJib3h3dC50b1N0cmluZz1jcSxiLmRpcnR5PTA7cmV0dXJuIGIuYmJveHd0fWlmKGIuZGlydHl8fGIuZGlydHlUfHwhYi5iYm94KXtpZihiLmRpcnR5fHwhdGhpcy5yZWFsUGF0aCliLmJib3h3dD0wLHRoaXMucmVhbFBhdGg9YmlbdGhpcy50eXBlXSh0aGlzKTtiLmJib3g9YkkoYmoodGhpcy5yZWFsUGF0aCx0aGlzLm1hdHJpeCkpLGIuYmJveC50b1N0cmluZz1jcSxiLmRpcnR5PWIuZGlydHlUPTB9cmV0dXJuIGIuYmJveH0sY2wuY2xvbmU9ZnVuY3Rpb24oKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIG51bGw7dmFyIGE9dGhpcy5wYXBlclt0aGlzLnR5cGVdKCkuYXR0cih0aGlzLmF0dHIoKSk7dGhpcy5fX3NldF9fJiZ0aGlzLl9fc2V0X18ucHVzaChhKTtyZXR1cm4gYX0sY2wuZ2xvdz1mdW5jdGlvbihhKXtpZih0aGlzLnR5cGU9PVwidGV4dFwiKXJldHVybiBudWxsO2E9YXx8e307dmFyIGI9e3dpZHRoOihhLndpZHRofHwxMCkrKCt0aGlzLmF0dHIoXCJzdHJva2Utd2lkdGhcIil8fDEpLGZpbGw6YS5maWxsfHwhMSxvcGFjaXR5OmEub3BhY2l0eXx8LjUsb2Zmc2V0eDphLm9mZnNldHh8fDAsb2Zmc2V0eTphLm9mZnNldHl8fDAsY29sb3I6YS5jb2xvcnx8XCIjMDAwXCJ9LGM9Yi53aWR0aC8yLGQ9dGhpcy5wYXBlcixlPWQuc2V0KCksZj10aGlzLnJlYWxQYXRofHxiaVt0aGlzLnR5cGVdKHRoaXMpO2Y9dGhpcy5tYXRyaXg/YmooZix0aGlzLm1hdHJpeCk6Zjtmb3IodmFyIGc9MTtnPGMrMTtnKyspZS5wdXNoKGQucGF0aChmKS5hdHRyKHtzdHJva2U6Yi5jb2xvcixmaWxsOmIuZmlsbD9iLmNvbG9yOlwibm9uZVwiLFwic3Ryb2tlLWxpbmVqb2luXCI6XCJyb3VuZFwiLFwic3Ryb2tlLWxpbmVjYXBcIjpcInJvdW5kXCIsXCJzdHJva2Utd2lkdGhcIjorKGIud2lkdGgvYypnKS50b0ZpeGVkKDMpLG9wYWNpdHk6KyhiLm9wYWNpdHkvYykudG9GaXhlZCgzKX0pKTtyZXR1cm4gZS5pbnNlcnRCZWZvcmUodGhpcykudHJhbnNsYXRlKGIub2Zmc2V0eCxiLm9mZnNldHkpfTt2YXIgY3I9e30sY3M9ZnVuY3Rpb24oYixjLGQsZSxmLGcsaCxpLGope3JldHVybiBqPT1udWxsP2JCKGIsYyxkLGUsZixnLGgsaSk6YS5maW5kRG90c0F0U2VnbWVudChiLGMsZCxlLGYsZyxoLGksYkMoYixjLGQsZSxmLGcsaCxpLGopKX0sY3Q9ZnVuY3Rpb24oYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe2Q9YlIoZCk7dmFyIGcsaCxpLGosaz1cIlwiLGw9e30sbSxuPTA7Zm9yKHZhciBvPTAscD1kLmxlbmd0aDtvPHA7bysrKXtpPWRbb107aWYoaVswXT09XCJNXCIpZz0raVsxXSxoPStpWzJdO2Vsc2V7aj1jcyhnLGgsaVsxXSxpWzJdLGlbM10saVs0XSxpWzVdLGlbNl0pO2lmKG4raj5lKXtpZihjJiYhbC5zdGFydCl7bT1jcyhnLGgsaVsxXSxpWzJdLGlbM10saVs0XSxpWzVdLGlbNl0sZS1uKSxrKz1bXCJDXCIrbS5zdGFydC54LG0uc3RhcnQueSxtLm0ueCxtLm0ueSxtLngsbS55XTtpZihmKXJldHVybiBrO2wuc3RhcnQ9ayxrPVtcIk1cIittLngsbS55K1wiQ1wiK20ubi54LG0ubi55LG0uZW5kLngsbS5lbmQueSxpWzVdLGlbNl1dLmpvaW4oKSxuKz1qLGc9K2lbNV0saD0raVs2XTtjb250aW51ZX1pZighYiYmIWMpe209Y3MoZyxoLGlbMV0saVsyXSxpWzNdLGlbNF0saVs1XSxpWzZdLGUtbik7cmV0dXJue3g6bS54LHk6bS55LGFscGhhOm0uYWxwaGF9fX1uKz1qLGc9K2lbNV0saD0raVs2XX1rKz1pLnNoaWZ0KCkraX1sLmVuZD1rLG09Yj9uOmM/bDphLmZpbmREb3RzQXRTZWdtZW50KGcsaCxpWzBdLGlbMV0saVsyXSxpWzNdLGlbNF0saVs1XSwxKSxtLmFscGhhJiYobT17eDptLngseTptLnksYWxwaGE6bS5hbHBoYX0pO3JldHVybiBtfX0sY3U9Y3QoMSksY3Y9Y3QoKSxjdz1jdCgwLDEpO2EuZ2V0VG90YWxMZW5ndGg9Y3UsYS5nZXRQb2ludEF0TGVuZ3RoPWN2LGEuZ2V0U3VicGF0aD1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5nZXRUb3RhbExlbmd0aChhKS1jPDFlLTYpcmV0dXJuIGN3KGEsYikuZW5kO3ZhciBkPWN3KGEsYywxKTtyZXR1cm4gYj9jdyhkLGIpLmVuZDpkfSxjbC5nZXRUb3RhbExlbmd0aD1mdW5jdGlvbigpe2lmKHRoaXMudHlwZT09XCJwYXRoXCIpe2lmKHRoaXMubm9kZS5nZXRUb3RhbExlbmd0aClyZXR1cm4gdGhpcy5ub2RlLmdldFRvdGFsTGVuZ3RoKCk7cmV0dXJuIGN1KHRoaXMuYXR0cnMucGF0aCl9fSxjbC5nZXRQb2ludEF0TGVuZ3RoPWZ1bmN0aW9uKGEpe2lmKHRoaXMudHlwZT09XCJwYXRoXCIpcmV0dXJuIGN2KHRoaXMuYXR0cnMucGF0aCxhKX0sY2wuZ2V0U3VicGF0aD1mdW5jdGlvbihiLGMpe2lmKHRoaXMudHlwZT09XCJwYXRoXCIpcmV0dXJuIGEuZ2V0U3VicGF0aCh0aGlzLmF0dHJzLnBhdGgsYixjKX07dmFyIGN4PWEuZWFzaW5nX2Zvcm11bGFzPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LFwiPFwiOmZ1bmN0aW9uKGEpe3JldHVybiBBKGEsMS43KX0sXCI+XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIEEoYSwuNDgpfSxcIjw+XCI6ZnVuY3Rpb24oYSl7dmFyIGI9LjQ4LWEvMS4wNCxjPXcuc3FydCguMTczNCtiKmIpLGQ9Yy1iLGU9QSh6KGQpLDEvMykqKGQ8MD8tMToxKSxmPS1jLWIsZz1BKHooZiksMS8zKSooZjwwPy0xOjEpLGg9ZStnKy41O3JldHVybigxLWgpKjMqaCpoK2gqaCpofSxiYWNrSW46ZnVuY3Rpb24oYSl7dmFyIGI9MS43MDE1ODtyZXR1cm4gYSphKigoYisxKSphLWIpfSxiYWNrT3V0OmZ1bmN0aW9uKGEpe2E9YS0xO3ZhciBiPTEuNzAxNTg7cmV0dXJuIGEqYSooKGIrMSkqYStiKSsxfSxlbGFzdGljOmZ1bmN0aW9uKGEpe2lmKGE9PSEhYSlyZXR1cm4gYTtyZXR1cm4gQSgyLC0xMCphKSp3LnNpbigoYS0uMDc1KSoyKkIvLjMpKzF9LGJvdW5jZTpmdW5jdGlvbihhKXt2YXIgYj03LjU2MjUsYz0yLjc1LGQ7YTwxL2M/ZD1iKmEqYTphPDIvYz8oYS09MS41L2MsZD1iKmEqYSsuNzUpOmE8Mi41L2M/KGEtPTIuMjUvYyxkPWIqYSphKy45Mzc1KTooYS09Mi42MjUvYyxkPWIqYSphKy45ODQzNzUpO3JldHVybiBkfX07Y3guZWFzZUluPWN4W1wiZWFzZS1pblwiXT1jeFtcIjxcIl0sY3guZWFzZU91dD1jeFtcImVhc2Utb3V0XCJdPWN4W1wiPlwiXSxjeC5lYXNlSW5PdXQ9Y3hbXCJlYXNlLWluLW91dFwiXT1jeFtcIjw+XCJdLGN4W1wiYmFjay1pblwiXT1jeC5iYWNrSW4sY3hbXCJiYWNrLW91dFwiXT1jeC5iYWNrT3V0O3ZhciBjeT1bXSxjej13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGEsMTYpfSxjQT1mdW5jdGlvbigpe3ZhciBiPSsobmV3IERhdGUpLGM9MDtmb3IoO2M8Y3kubGVuZ3RoO2MrKyl7dmFyIGQ9Y3lbY107aWYoZC5lbC5yZW1vdmVkfHxkLnBhdXNlZCljb250aW51ZTt2YXIgZT1iLWQuc3RhcnQsZj1kLm1zLGg9ZC5lYXNpbmcsaT1kLmZyb20saj1kLmRpZmYsaz1kLnRvLGw9ZC50LG09ZC5lbCxvPXt9LHAscj17fSxzO2QuaW5pdHN0YXR1cz8oZT0oZC5pbml0c3RhdHVzKmQuYW5pbS50b3AtZC5wcmV2KS8oZC5wZXJjZW50LWQucHJldikqZixkLnN0YXR1cz1kLmluaXRzdGF0dXMsZGVsZXRlIGQuaW5pdHN0YXR1cyxkLnN0b3AmJmN5LnNwbGljZShjLS0sMSkpOmQuc3RhdHVzPShkLnByZXYrKGQucGVyY2VudC1kLnByZXYpKihlL2YpKS9kLmFuaW0udG9wO2lmKGU8MCljb250aW51ZTtpZihlPGYpe3ZhciB0PWgoZS9mKTtmb3IodmFyIHUgaW4gaSlpZihpW2ddKHUpKXtzd2l0Y2goVVt1XSl7Y2FzZSBDOnA9K2lbdV0rdCpmKmpbdV07YnJlYWs7Y2FzZVwiY29sb3VyXCI6cD1cInJnYihcIitbY0IoTyhpW3VdLnIrdCpmKmpbdV0ucikpLGNCKE8oaVt1XS5nK3QqZipqW3VdLmcpKSxjQihPKGlbdV0uYit0KmYqalt1XS5iKSldLmpvaW4oXCIsXCIpK1wiKVwiO2JyZWFrO2Nhc2VcInBhdGhcIjpwPVtdO2Zvcih2YXIgdj0wLHc9aVt1XS5sZW5ndGg7djx3O3YrKyl7cFt2XT1baVt1XVt2XVswXV07Zm9yKHZhciB4PTEseT1pW3VdW3ZdLmxlbmd0aDt4PHk7eCsrKXBbdl1beF09K2lbdV1bdl1beF0rdCpmKmpbdV1bdl1beF07cFt2XT1wW3ZdLmpvaW4ocSl9cD1wLmpvaW4ocSk7YnJlYWs7Y2FzZVwidHJhbnNmb3JtXCI6aWYoalt1XS5yZWFsKXtwPVtdO2Zvcih2PTAsdz1pW3VdLmxlbmd0aDt2PHc7disrKXtwW3ZdPVtpW3VdW3ZdWzBdXTtmb3IoeD0xLHk9aVt1XVt2XS5sZW5ndGg7eDx5O3grKylwW3ZdW3hdPWlbdV1bdl1beF0rdCpmKmpbdV1bdl1beF19fWVsc2V7dmFyIHo9ZnVuY3Rpb24oYSl7cmV0dXJuK2lbdV1bYV0rdCpmKmpbdV1bYV19O3A9W1tcIm1cIix6KDApLHooMSkseigyKSx6KDMpLHooNCkseig1KV1dfWJyZWFrO2Nhc2VcImNzdlwiOmlmKHU9PVwiY2xpcC1yZWN0XCIpe3A9W10sdj00O3doaWxlKHYtLSlwW3ZdPStpW3VdW3ZdK3QqZipqW3VdW3ZdfWJyZWFrO2RlZmF1bHQ6dmFyIEE9W11bbl0oaVt1XSk7cD1bXSx2PW0ucGFwZXIuY3VzdG9tQXR0cmlidXRlc1t1XS5sZW5ndGg7d2hpbGUodi0tKXBbdl09K0Fbdl0rdCpmKmpbdV1bdl19b1t1XT1wfW0uYXR0cihvKSxmdW5jdGlvbihhLGIsYyl7c2V0VGltZW91dChmdW5jdGlvbigpe2V2ZShcInJhcGhhZWwuYW5pbS5mcmFtZS5cIithLGIsYyl9KX0obS5pZCxtLGQuYW5pbSl9ZWxzZXsoZnVuY3Rpb24oYixjLGQpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtldmUoXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIrYy5pZCxjLGQpLGV2ZShcInJhcGhhZWwuYW5pbS5maW5pc2guXCIrYy5pZCxjLGQpLGEuaXMoYixcImZ1bmN0aW9uXCIpJiZiLmNhbGwoYyl9KX0pKGQuY2FsbGJhY2ssbSxkLmFuaW0pLG0uYXR0cihrKSxjeS5zcGxpY2UoYy0tLDEpO2lmKGQucmVwZWF0PjEmJiFkLm5leHQpe2ZvcihzIGluIGspa1tnXShzKSYmKHJbc109ZC50b3RhbE9yaWdpbltzXSk7ZC5lbC5hdHRyKHIpLGNFKGQuYW5pbSxkLmVsLGQuYW5pbS5wZXJjZW50c1swXSxudWxsLGQudG90YWxPcmlnaW4sZC5yZXBlYXQtMSl9ZC5uZXh0JiYhZC5zdG9wJiZjRShkLmFuaW0sZC5lbCxkLm5leHQsbnVsbCxkLnRvdGFsT3JpZ2luLGQucmVwZWF0KX19YS5zdmcmJm0mJm0ucGFwZXImJm0ucGFwZXIuc2FmYXJpKCksY3kubGVuZ3RoJiZjeihjQSl9LGNCPWZ1bmN0aW9uKGEpe3JldHVybiBhPjI1NT8yNTU6YTwwPzA6YX07Y2wuYW5pbWF0ZVdpdGg9ZnVuY3Rpb24oYixjLGQsZSxmLGcpe3ZhciBoPXRoaXM7aWYoaC5yZW1vdmVkKXtnJiZnLmNhbGwoaCk7cmV0dXJuIGh9dmFyIGk9ZCBpbnN0YW5jZW9mIGNEP2Q6YS5hbmltYXRpb24oZCxlLGYsZyksaixrO2NFKGksaCxpLnBlcmNlbnRzWzBdLG51bGwsaC5hdHRyKCkpO2Zvcih2YXIgbD0wLG09Y3kubGVuZ3RoO2w8bTtsKyspaWYoY3lbbF0uYW5pbT09YyYmY3lbbF0uZWw9PWIpe2N5W20tMV0uc3RhcnQ9Y3lbbF0uc3RhcnQ7YnJlYWt9cmV0dXJuIGh9LGNsLm9uQW5pbWF0aW9uPWZ1bmN0aW9uKGEpe2E/ZXZlLm9uKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiK3RoaXMuaWQsYSk6ZXZlLnVuYmluZChcInJhcGhhZWwuYW5pbS5mcmFtZS5cIit0aGlzLmlkKTtyZXR1cm4gdGhpc30sY0QucHJvdG90eXBlLmRlbGF5PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBjRCh0aGlzLmFuaW0sdGhpcy5tcyk7Yi50aW1lcz10aGlzLnRpbWVzLGIuZGVsPSthfHwwO3JldHVybiBifSxjRC5wcm90b3R5cGUucmVwZWF0PWZ1bmN0aW9uKGEpe3ZhciBiPW5ldyBjRCh0aGlzLmFuaW0sdGhpcy5tcyk7Yi5kZWw9dGhpcy5kZWwsYi50aW1lcz13LmZsb29yKHgoYSwwKSl8fDE7cmV0dXJuIGJ9LGEuYW5pbWF0aW9uPWZ1bmN0aW9uKGIsYyxkLGUpe2lmKGIgaW5zdGFuY2VvZiBjRClyZXR1cm4gYjtpZihhLmlzKGQsXCJmdW5jdGlvblwiKXx8IWQpZT1lfHxkfHxudWxsLGQ9bnVsbDtiPU9iamVjdChiKSxjPStjfHwwO3ZhciBmPXt9LGgsaTtmb3IoaSBpbiBiKWJbZ10oaSkmJlEoaSkhPWkmJlEoaSkrXCIlXCIhPWkmJihoPSEwLGZbaV09YltpXSk7aWYoIWgpcmV0dXJuIG5ldyBjRChiLGMpO2QmJihmLmVhc2luZz1kKSxlJiYoZi5jYWxsYmFjaz1lKTtyZXR1cm4gbmV3IGNEKHsxMDA6Zn0sYyl9LGNsLmFuaW1hdGU9ZnVuY3Rpb24oYixjLGQsZSl7dmFyIGY9dGhpcztpZihmLnJlbW92ZWQpe2UmJmUuY2FsbChmKTtyZXR1cm4gZn12YXIgZz1iIGluc3RhbmNlb2YgY0Q/YjphLmFuaW1hdGlvbihiLGMsZCxlKTtjRShnLGYsZy5wZXJjZW50c1swXSxudWxsLGYuYXR0cigpKTtyZXR1cm4gZn0sY2wuc2V0VGltZT1mdW5jdGlvbihhLGIpe2EmJmIhPW51bGwmJnRoaXMuc3RhdHVzKGEseShiLGEubXMpL2EubXMpO3JldHVybiB0aGlzfSxjbC5zdGF0dXM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkPTAsZSxmO2lmKGIhPW51bGwpe2NFKGEsdGhpcywtMSx5KGIsMSkpO3JldHVybiB0aGlzfWU9Y3kubGVuZ3RoO2Zvcig7ZDxlO2QrKyl7Zj1jeVtkXTtpZihmLmVsLmlkPT10aGlzLmlkJiYoIWF8fGYuYW5pbT09YSkpe2lmKGEpcmV0dXJuIGYuc3RhdHVzO2MucHVzaCh7YW5pbTpmLmFuaW0sc3RhdHVzOmYuc3RhdHVzfSl9fWlmKGEpcmV0dXJuIDA7cmV0dXJuIGN9LGNsLnBhdXNlPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8Y3kubGVuZ3RoO2IrKyljeVtiXS5lbC5pZD09dGhpcy5pZCYmKCFhfHxjeVtiXS5hbmltPT1hKSYmZXZlKFwicmFwaGFlbC5hbmltLnBhdXNlLlwiK3RoaXMuaWQsdGhpcyxjeVtiXS5hbmltKSE9PSExJiYoY3lbYl0ucGF1c2VkPSEwKTtyZXR1cm4gdGhpc30sY2wucmVzdW1lPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8Y3kubGVuZ3RoO2IrKylpZihjeVtiXS5lbC5pZD09dGhpcy5pZCYmKCFhfHxjeVtiXS5hbmltPT1hKSl7dmFyIGM9Y3lbYl07ZXZlKFwicmFwaGFlbC5hbmltLnJlc3VtZS5cIit0aGlzLmlkLHRoaXMsYy5hbmltKSE9PSExJiYoZGVsZXRlIGMucGF1c2VkLHRoaXMuc3RhdHVzKGMuYW5pbSxjLnN0YXR1cykpfXJldHVybiB0aGlzfSxjbC5zdG9wPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8Y3kubGVuZ3RoO2IrKyljeVtiXS5lbC5pZD09dGhpcy5pZCYmKCFhfHxjeVtiXS5hbmltPT1hKSYmZXZlKFwicmFwaGFlbC5hbmltLnN0b3AuXCIrdGhpcy5pZCx0aGlzLGN5W2JdLmFuaW0pIT09ITEmJmN5LnNwbGljZShiLS0sMSk7cmV0dXJuIHRoaXN9LGV2ZS5vbihcInJhcGhhZWwucmVtb3ZlXCIsY0YpLGV2ZS5vbihcInJhcGhhZWwuY2xlYXJcIixjRiksY2wudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlJhcGhh77+9bO+/vXMgb2JqZWN0XCJ9O3ZhciBjRz1mdW5jdGlvbihhKXt0aGlzLml0ZW1zPVtdLHRoaXMubGVuZ3RoPTAsdGhpcy50eXBlPVwic2V0XCI7aWYoYSlmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspYVtiXSYmKGFbYl0uY29uc3RydWN0b3I9PWNsLmNvbnN0cnVjdG9yfHxhW2JdLmNvbnN0cnVjdG9yPT1jRykmJih0aGlzW3RoaXMuaXRlbXMubGVuZ3RoXT10aGlzLml0ZW1zW3RoaXMuaXRlbXMubGVuZ3RoXT1hW2JdLHRoaXMubGVuZ3RoKyspfSxjSD1jRy5wcm90b3R5cGU7Y0gucHVzaD1mdW5jdGlvbigpe3ZhciBhLGI7Zm9yKHZhciBjPTAsZD1hcmd1bWVudHMubGVuZ3RoO2M8ZDtjKyspYT1hcmd1bWVudHNbY10sYSYmKGEuY29uc3RydWN0b3I9PWNsLmNvbnN0cnVjdG9yfHxhLmNvbnN0cnVjdG9yPT1jRykmJihiPXRoaXMuaXRlbXMubGVuZ3RoLHRoaXNbYl09dGhpcy5pdGVtc1tiXT1hLHRoaXMubGVuZ3RoKyspO3JldHVybiB0aGlzfSxjSC5wb3A9ZnVuY3Rpb24oKXt0aGlzLmxlbmd0aCYmZGVsZXRlIHRoaXNbdGhpcy5sZW5ndGgtLV07cmV0dXJuIHRoaXMuaXRlbXMucG9wKCl9LGNILmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPXRoaXMuaXRlbXMubGVuZ3RoO2M8ZDtjKyspaWYoYS5jYWxsKGIsdGhpcy5pdGVtc1tjXSxjKT09PSExKXJldHVybiB0aGlzO3JldHVybiB0aGlzfTtmb3IodmFyIGNJIGluIGNsKWNsW2ddKGNJKSYmKGNIW2NJXT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHM7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihjKXtjW2FdW21dKGMsYil9KX19KGNJKSk7Y0guYXR0cj1mdW5jdGlvbihiLGMpe2lmKGImJmEuaXMoYixFKSYmYS5pcyhiWzBdLFwib2JqZWN0XCIpKWZvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKyl0aGlzLml0ZW1zW2RdLmF0dHIoYltkXSk7ZWxzZSBmb3IodmFyIGY9MCxnPXRoaXMuaXRlbXMubGVuZ3RoO2Y8ZztmKyspdGhpcy5pdGVtc1tmXS5hdHRyKGIsYyk7cmV0dXJuIHRoaXN9LGNILmNsZWFyPWZ1bmN0aW9uKCl7d2hpbGUodGhpcy5sZW5ndGgpdGhpcy5wb3AoKX0sY0guc3BsaWNlPWZ1bmN0aW9uKGEsYixjKXthPWE8MD94KHRoaXMubGVuZ3RoK2EsMCk6YSxiPXgoMCx5KHRoaXMubGVuZ3RoLWEsYikpO3ZhciBkPVtdLGU9W10sZj1bXSxnO2ZvcihnPTI7Zzxhcmd1bWVudHMubGVuZ3RoO2crKylmLnB1c2goYXJndW1lbnRzW2ddKTtmb3IoZz0wO2c8YjtnKyspZS5wdXNoKHRoaXNbYStnXSk7Zm9yKDtnPHRoaXMubGVuZ3RoLWE7ZysrKWQucHVzaCh0aGlzW2ErZ10pO3ZhciBoPWYubGVuZ3RoO2ZvcihnPTA7ZzxoK2QubGVuZ3RoO2crKyl0aGlzLml0ZW1zW2ErZ109dGhpc1thK2ddPWc8aD9mW2ddOmRbZy1oXTtnPXRoaXMuaXRlbXMubGVuZ3RoPXRoaXMubGVuZ3RoLT1iLWg7d2hpbGUodGhpc1tnXSlkZWxldGUgdGhpc1tnKytdO3JldHVybiBuZXcgY0coZSl9LGNILmV4Y2x1ZGU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxlbmd0aDtiPGM7YisrKWlmKHRoaXNbYl09PWEpe3RoaXMuc3BsaWNlKGIsMSk7cmV0dXJuITB9fSxjSC5hbmltYXRlPWZ1bmN0aW9uKGIsYyxkLGUpeyhhLmlzKGQsXCJmdW5jdGlvblwiKXx8IWQpJiYoZT1kfHxudWxsKTt2YXIgZj10aGlzLml0ZW1zLmxlbmd0aCxnPWYsaCxpPXRoaXMsajtpZighZilyZXR1cm4gdGhpcztlJiYoaj1mdW5jdGlvbigpeyEtLWYmJmUuY2FsbChpKX0pLGQ9YS5pcyhkLEQpP2Q6ajt2YXIgaz1hLmFuaW1hdGlvbihiLGMsZCxqKTtoPXRoaXMuaXRlbXNbLS1nXS5hbmltYXRlKGspO3doaWxlKGctLSl0aGlzLml0ZW1zW2ddJiYhdGhpcy5pdGVtc1tnXS5yZW1vdmVkJiZ0aGlzLml0ZW1zW2ddLmFuaW1hdGVXaXRoKGgsayxrKTtyZXR1cm4gdGhpc30sY0guaW5zZXJ0QWZ0ZXI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pdGVtcy5sZW5ndGg7d2hpbGUoYi0tKXRoaXMuaXRlbXNbYl0uaW5zZXJ0QWZ0ZXIoYSk7cmV0dXJuIHRoaXN9LGNILmdldEJCb3g9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPVtdLGM9W10sZD1bXTtmb3IodmFyIGU9dGhpcy5pdGVtcy5sZW5ndGg7ZS0tOylpZighdGhpcy5pdGVtc1tlXS5yZW1vdmVkKXt2YXIgZj10aGlzLml0ZW1zW2VdLmdldEJCb3goKTthLnB1c2goZi54KSxiLnB1c2goZi55KSxjLnB1c2goZi54K2Yud2lkdGgpLGQucHVzaChmLnkrZi5oZWlnaHQpfWE9eVttXSgwLGEpLGI9eVttXSgwLGIpLGM9eFttXSgwLGMpLGQ9eFttXSgwLGQpO3JldHVybnt4OmEseTpiLHgyOmMseTI6ZCx3aWR0aDpjLWEsaGVpZ2h0OmQtYn19LGNILmNsb25lPWZ1bmN0aW9uKGEpe2E9bmV3IGNHO2Zvcih2YXIgYj0wLGM9dGhpcy5pdGVtcy5sZW5ndGg7YjxjO2IrKylhLnB1c2godGhpcy5pdGVtc1tiXS5jbG9uZSgpKTtyZXR1cm4gYX0sY0gudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIlJhcGhh77+9bO+/vXMgc2V0XCJ9LGEucmVnaXN0ZXJGb250PWZ1bmN0aW9uKGEpe2lmKCFhLmZhY2UpcmV0dXJuIGE7dGhpcy5mb250cz10aGlzLmZvbnRzfHx7fTt2YXIgYj17dzphLncsZmFjZTp7fSxnbHlwaHM6e319LGM9YS5mYWNlW1wiZm9udC1mYW1pbHlcIl07Zm9yKHZhciBkIGluIGEuZmFjZSlhLmZhY2VbZ10oZCkmJihiLmZhY2VbZF09YS5mYWNlW2RdKTt0aGlzLmZvbnRzW2NdP3RoaXMuZm9udHNbY10ucHVzaChiKTp0aGlzLmZvbnRzW2NdPVtiXTtpZighYS5zdmcpe2IuZmFjZVtcInVuaXRzLXBlci1lbVwiXT1SKGEuZmFjZVtcInVuaXRzLXBlci1lbVwiXSwxMCk7Zm9yKHZhciBlIGluIGEuZ2x5cGhzKWlmKGEuZ2x5cGhzW2ddKGUpKXt2YXIgZj1hLmdseXBoc1tlXTtiLmdseXBoc1tlXT17dzpmLncsazp7fSxkOmYuZCYmXCJNXCIrZi5kLnJlcGxhY2UoL1ttbGN4dHJ2XS9nLGZ1bmN0aW9uKGEpe3JldHVybntsOlwiTFwiLGM6XCJDXCIseDpcInpcIix0OlwibVwiLHI6XCJsXCIsdjpcImNcIn1bYV18fFwiTVwifSkrXCJ6XCJ9O2lmKGYuaylmb3IodmFyIGggaW4gZi5rKWZbZ10oaCkmJihiLmdseXBoc1tlXS5rW2hdPWYua1toXSl9fXJldHVybiBhfSxrLmdldEZvbnQ9ZnVuY3Rpb24oYixjLGQsZSl7ZT1lfHxcIm5vcm1hbFwiLGQ9ZHx8XCJub3JtYWxcIixjPStjfHx7bm9ybWFsOjQwMCxib2xkOjcwMCxsaWdodGVyOjMwMCxib2xkZXI6ODAwfVtjXXx8NDAwO2lmKCEhYS5mb250cyl7dmFyIGY9YS5mb250c1tiXTtpZighZil7dmFyIGg9bmV3IFJlZ0V4cChcIihefFxcXFxzKVwiK2IucmVwbGFjZSgvW15cXHdcXGRcXHMrIX4uOl8tXS9nLHApK1wiKFxcXFxzfCQpXCIsXCJpXCIpO2Zvcih2YXIgaSBpbiBhLmZvbnRzKWlmKGEuZm9udHNbZ10oaSkmJmgudGVzdChpKSl7Zj1hLmZvbnRzW2ldO2JyZWFrfX12YXIgajtpZihmKWZvcih2YXIgaz0wLGw9Zi5sZW5ndGg7azxsO2srKyl7aj1mW2tdO2lmKGouZmFjZVtcImZvbnQtd2VpZ2h0XCJdPT1jJiYoai5mYWNlW1wiZm9udC1zdHlsZVwiXT09ZHx8IWouZmFjZVtcImZvbnQtc3R5bGVcIl0pJiZqLmZhY2VbXCJmb250LXN0cmV0Y2hcIl09PWUpYnJlYWt9cmV0dXJuIGp9fSxrLnByaW50PWZ1bmN0aW9uKGIsZCxlLGYsZyxoLGkpe2g9aHx8XCJtaWRkbGVcIixpPXgoeShpfHwwLDEpLC0xKTt2YXIgaj1yKGUpW3NdKHApLGs9MCxsPTAsbT1wLG47YS5pcyhmLGUpJiYoZj10aGlzLmdldEZvbnQoZikpO2lmKGYpe249KGd8fDE2KS9mLmZhY2VbXCJ1bml0cy1wZXItZW1cIl07dmFyIG89Zi5mYWNlLmJib3hbc10oYykscT0rb1swXSx0PW9bM10tb1sxXSx1PTAsdj0rb1sxXSsoaD09XCJiYXNlbGluZVwiP3QrICtmLmZhY2UuZGVzY2VudDp0LzIpO2Zvcih2YXIgdz0wLHo9ai5sZW5ndGg7dzx6O3crKyl7aWYoalt3XT09XCJcXG5cIilrPTAsQj0wLGw9MCx1Kz10O2Vsc2V7dmFyIEE9bCYmZi5nbHlwaHNbalt3LTFdXXx8e30sQj1mLmdseXBoc1tqW3ddXTtrKz1sPyhBLnd8fGYudykrKEEuayYmQS5rW2pbd11dfHwwKStmLncqaTowLGw9MX1CJiZCLmQmJihtKz1hLnRyYW5zZm9ybVBhdGgoQi5kLFtcInRcIixrKm4sdSpuLFwic1wiLG4sbixxLHYsXCJ0XCIsKGItcSkvbiwoZC12KS9uXSkpfX1yZXR1cm4gdGhpcy5wYXRoKG0pLmF0dHIoe2ZpbGw6XCIjMDAwXCIsc3Ryb2tlOlwibm9uZVwifSl9LGsuYWRkPWZ1bmN0aW9uKGIpe2lmKGEuaXMoYixcImFycmF5XCIpKXt2YXIgYz10aGlzLnNldCgpLGU9MCxmPWIubGVuZ3RoLGg7Zm9yKDtlPGY7ZSsrKWg9YltlXXx8e30sZFtnXShoLnR5cGUpJiZjLnB1c2godGhpc1toLnR5cGVdKCkuYXR0cihoKSl9cmV0dXJuIGN9LGEuZm9ybWF0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5pcyhjLEUpP1swXVtuXShjKTphcmd1bWVudHM7YiYmYS5pcyhiLEQpJiZkLmxlbmd0aC0xJiYoYj1iLnJlcGxhY2UoZSxmdW5jdGlvbihhLGIpe3JldHVybiBkWysrYl09PW51bGw/cDpkW2JdfSkpO3JldHVybiBifHxwfSxhLmZ1bGxmaWxsPWZ1bmN0aW9uKCl7dmFyIGE9L1xceyhbXlxcfV0rKVxcfS9nLGI9Lyg/Oig/Ol58XFwuKSguKz8pKD89XFxbfFxcLnwkfFxcKCl8XFxbKCd8XCIpKC4rPylcXDJcXF0pKFxcKFxcKSk/L2csYz1mdW5jdGlvbihhLGMsZCl7dmFyIGU9ZDtjLnJlcGxhY2UoYixmdW5jdGlvbihhLGIsYyxkLGYpe2I9Ynx8ZCxlJiYoYiBpbiBlJiYoZT1lW2JdKSx0eXBlb2YgZT09XCJmdW5jdGlvblwiJiZmJiYoZT1lKCkpKX0pLGU9KGU9PW51bGx8fGU9PWQ/YTplKStcIlwiO3JldHVybiBlfTtyZXR1cm4gZnVuY3Rpb24oYixkKXtyZXR1cm4gU3RyaW5nKGIpLnJlcGxhY2UoYSxmdW5jdGlvbihhLGIpe3JldHVybiBjKGEsYixkKX0pfX0oKSxhLm5pbmphPWZ1bmN0aW9uKCl7aS53YXM/aC53aW4uUmFwaGFlbD1pLmlzOmRlbGV0ZSBSYXBoYWVsO3JldHVybiBhfSxhLnN0PWNILGZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKCl7L2luLy50ZXN0KGIucmVhZHlTdGF0ZSk/c2V0VGltZW91dChlLDkpOmEuZXZlKFwicmFwaGFlbC5ET01sb2FkXCIpfWIucmVhZHlTdGF0ZT09bnVsbCYmYi5hZGRFdmVudExpc3RlbmVyJiYoYi5hZGRFdmVudExpc3RlbmVyKGMsZD1mdW5jdGlvbigpe2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsITEpLGIucmVhZHlTdGF0ZT1cImNvbXBsZXRlXCJ9LCExKSxiLnJlYWR5U3RhdGU9XCJsb2FkaW5nXCIpLGUoKX0oZG9jdW1lbnQsXCJET01Db250ZW50TG9hZGVkXCIpLGkud2FzP2gud2luLlJhcGhhZWw9YTpSYXBoYWVsPWEsZXZlLm9uKFwicmFwaGFlbC5ET01sb2FkXCIsZnVuY3Rpb24oKXtiPSEwfSl9KCksd2luZG93LlJhcGhhZWwuc3ZnJiZmdW5jdGlvbihhKXt2YXIgYj1cImhhc093blByb3BlcnR5XCIsYz1TdHJpbmcsZD1wYXJzZUZsb2F0LGU9cGFyc2VJbnQsZj1NYXRoLGc9Zi5tYXgsaD1mLmFicyxpPWYucG93LGo9L1ssIF0rLyxrPWEuZXZlLGw9XCJcIixtPVwiIFwiLG49XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsbz17YmxvY2s6XCJNNSwwIDAsMi41IDUsNXpcIixjbGFzc2ljOlwiTTUsMCAwLDIuNSA1LDUgMy41LDMgMy41LDJ6XCIsZGlhbW9uZDpcIk0yLjUsMCA1LDIuNSAyLjUsNSAwLDIuNXpcIixvcGVuOlwiTTYsMSAxLDMuNSA2LDZcIixvdmFsOlwiTTIuNSwwQTIuNSwyLjUsMCwwLDEsMi41LDUgMi41LDIuNSwwLDAsMSwyLjUsMHpcIn0scD17fTthLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJZb3VyIGJyb3dzZXIgc3VwcG9ydHMgU1ZHLlxcbllvdSBhcmUgcnVubmluZyBSYXBoYe+/vWwgXCIrdGhpcy52ZXJzaW9ufTt2YXIgcT1mdW5jdGlvbihkLGUpe2lmKGUpe3R5cGVvZiBkPT1cInN0cmluZ1wiJiYoZD1xKGQpKTtmb3IodmFyIGYgaW4gZSllW2JdKGYpJiYoZi5zdWJzdHJpbmcoMCw2KT09XCJ4bGluazpcIj9kLnNldEF0dHJpYnV0ZU5TKG4sZi5zdWJzdHJpbmcoNiksYyhlW2ZdKSk6ZC5zZXRBdHRyaWJ1dGUoZixjKGVbZl0pKSl9ZWxzZSBkPWEuX2cuZG9jLmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsZCksZC5zdHlsZSYmKGQuc3R5bGUud2Via2l0VGFwSGlnaGxpZ2h0Q29sb3I9XCJyZ2JhKDAsMCwwLDApXCIpO3JldHVybiBkfSxyPWZ1bmN0aW9uKGIsZSl7dmFyIGo9XCJsaW5lYXJcIixrPWIuaWQrZSxtPS41LG49LjUsbz1iLm5vZGUscD1iLnBhcGVyLHI9by5zdHlsZSxzPWEuX2cuZG9jLmdldEVsZW1lbnRCeUlkKGspO2lmKCFzKXtlPWMoZSkucmVwbGFjZShhLl9yYWRpYWxfZ3JhZGllbnQsZnVuY3Rpb24oYSxiLGMpe2o9XCJyYWRpYWxcIjtpZihiJiZjKXttPWQoYiksbj1kKGMpO3ZhciBlPShuPi41KSoyLTE7aShtLS41LDIpK2kobi0uNSwyKT4uMjUmJihuPWYuc3FydCguMjUtaShtLS41LDIpKSplKy41KSYmbiE9LjUmJihuPW4udG9GaXhlZCg1KS0xZS01KmUpfXJldHVybiBsfSksZT1lLnNwbGl0KC9cXHMqXFwtXFxzKi8pO2lmKGo9PVwibGluZWFyXCIpe3ZhciB0PWUuc2hpZnQoKTt0PS1kKHQpO2lmKGlzTmFOKHQpKXJldHVybiBudWxsO3ZhciB1PVswLDAsZi5jb3MoYS5yYWQodCkpLGYuc2luKGEucmFkKHQpKV0sdj0xLyhnKGgodVsyXSksaCh1WzNdKSl8fDEpO3VbMl0qPXYsdVszXSo9dix1WzJdPDAmJih1WzBdPS11WzJdLHVbMl09MCksdVszXTwwJiYodVsxXT0tdVszXSx1WzNdPTApfXZhciB3PWEuX3BhcnNlRG90cyhlKTtpZighdylyZXR1cm4gbnVsbDtrPWsucmVwbGFjZSgvW1xcKFxcKVxccyxcXHhiMCNdL2csXCJfXCIpLGIuZ3JhZGllbnQmJmshPWIuZ3JhZGllbnQuaWQmJihwLmRlZnMucmVtb3ZlQ2hpbGQoYi5ncmFkaWVudCksZGVsZXRlIGIuZ3JhZGllbnQpO2lmKCFiLmdyYWRpZW50KXtzPXEoaitcIkdyYWRpZW50XCIse2lkOmt9KSxiLmdyYWRpZW50PXMscShzLGo9PVwicmFkaWFsXCI/e2Z4Om0sZnk6bn06e3gxOnVbMF0seTE6dVsxXSx4Mjp1WzJdLHkyOnVbM10sZ3JhZGllbnRUcmFuc2Zvcm06Yi5tYXRyaXguaW52ZXJ0KCl9KSxwLmRlZnMuYXBwZW5kQ2hpbGQocyk7Zm9yKHZhciB4PTAseT13Lmxlbmd0aDt4PHk7eCsrKXMuYXBwZW5kQ2hpbGQocShcInN0b3BcIix7b2Zmc2V0OndbeF0ub2Zmc2V0P3dbeF0ub2Zmc2V0Ong/XCIxMDAlXCI6XCIwJVwiLFwic3RvcC1jb2xvclwiOndbeF0uY29sb3J8fFwiI2ZmZlwifSkpfX1xKG8se2ZpbGw6XCJ1cmwoI1wiK2srXCIpXCIsb3BhY2l0eToxLFwiZmlsbC1vcGFjaXR5XCI6MX0pLHIuZmlsbD1sLHIub3BhY2l0eT0xLHIuZmlsbE9wYWNpdHk9MTtyZXR1cm4gMX0scz1mdW5jdGlvbihhKXt2YXIgYj1hLmdldEJCb3goMSk7cShhLnBhdHRlcm4se3BhdHRlcm5UcmFuc2Zvcm06YS5tYXRyaXguaW52ZXJ0KCkrXCIgdHJhbnNsYXRlKFwiK2IueCtcIixcIitiLnkrXCIpXCJ9KX0sdD1mdW5jdGlvbihkLGUsZil7aWYoZC50eXBlPT1cInBhdGhcIil7dmFyIGc9YyhlKS50b0xvd2VyQ2FzZSgpLnNwbGl0KFwiLVwiKSxoPWQucGFwZXIsaT1mP1wiZW5kXCI6XCJzdGFydFwiLGo9ZC5ub2RlLGs9ZC5hdHRycyxtPWtbXCJzdHJva2Utd2lkdGhcIl0sbj1nLmxlbmd0aCxyPVwiY2xhc3NpY1wiLHMsdCx1LHYsdyx4PTMseT0zLHo9NTt3aGlsZShuLS0pc3dpdGNoKGdbbl0pe2Nhc2VcImJsb2NrXCI6Y2FzZVwiY2xhc3NpY1wiOmNhc2VcIm92YWxcIjpjYXNlXCJkaWFtb25kXCI6Y2FzZVwib3BlblwiOmNhc2VcIm5vbmVcIjpyPWdbbl07YnJlYWs7Y2FzZVwid2lkZVwiOnk9NTticmVhaztjYXNlXCJuYXJyb3dcIjp5PTI7YnJlYWs7Y2FzZVwibG9uZ1wiOng9NTticmVhaztjYXNlXCJzaG9ydFwiOng9Mn1yPT1cIm9wZW5cIj8oeCs9Mix5Kz0yLHorPTIsdT0xLHY9Zj80OjEsdz17ZmlsbDpcIm5vbmVcIixzdHJva2U6ay5zdHJva2V9KToodj11PXgvMix3PXtmaWxsOmsuc3Ryb2tlLHN0cm9rZTpcIm5vbmVcIn0pLGQuXy5hcnJvd3M/Zj8oZC5fLmFycm93cy5lbmRQYXRoJiZwW2QuXy5hcnJvd3MuZW5kUGF0aF0tLSxkLl8uYXJyb3dzLmVuZE1hcmtlciYmcFtkLl8uYXJyb3dzLmVuZE1hcmtlcl0tLSk6KGQuXy5hcnJvd3Muc3RhcnRQYXRoJiZwW2QuXy5hcnJvd3Muc3RhcnRQYXRoXS0tLGQuXy5hcnJvd3Muc3RhcnRNYXJrZXImJnBbZC5fLmFycm93cy5zdGFydE1hcmtlcl0tLSk6ZC5fLmFycm93cz17fTtpZihyIT1cIm5vbmVcIil7dmFyIEE9XCJyYXBoYWVsLW1hcmtlci1cIityLEI9XCJyYXBoYWVsLW1hcmtlci1cIitpK3IreCt5O2EuX2cuZG9jLmdldEVsZW1lbnRCeUlkKEEpP3BbQV0rKzooaC5kZWZzLmFwcGVuZENoaWxkKHEocShcInBhdGhcIikse1wic3Ryb2tlLWxpbmVjYXBcIjpcInJvdW5kXCIsZDpvW3JdLGlkOkF9KSkscFtBXT0xKTt2YXIgQz1hLl9nLmRvYy5nZXRFbGVtZW50QnlJZChCKSxEO0M/KHBbQl0rKyxEPUMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ1c2VcIilbMF0pOihDPXEocShcIm1hcmtlclwiKSx7aWQ6QixtYXJrZXJIZWlnaHQ6eSxtYXJrZXJXaWR0aDp4LG9yaWVudDpcImF1dG9cIixyZWZYOnYscmVmWTp5LzJ9KSxEPXEocShcInVzZVwiKSx7XCJ4bGluazpocmVmXCI6XCIjXCIrQSx0cmFuc2Zvcm06KGY/XCJyb3RhdGUoMTgwIFwiK3gvMitcIiBcIit5LzIrXCIpIFwiOmwpK1wic2NhbGUoXCIreC96K1wiLFwiK3kveitcIilcIixcInN0cm9rZS13aWR0aFwiOigxLygoeC96K3kveikvMikpLnRvRml4ZWQoNCl9KSxDLmFwcGVuZENoaWxkKEQpLGguZGVmcy5hcHBlbmRDaGlsZChDKSxwW0JdPTEpLHEoRCx3KTt2YXIgRj11KihyIT1cImRpYW1vbmRcIiYmciE9XCJvdmFsXCIpO2Y/KHM9ZC5fLmFycm93cy5zdGFydGR4Km18fDAsdD1hLmdldFRvdGFsTGVuZ3RoKGsucGF0aCktRiptKToocz1GKm0sdD1hLmdldFRvdGFsTGVuZ3RoKGsucGF0aCktKGQuXy5hcnJvd3MuZW5kZHgqbXx8MCkpLHc9e30sd1tcIm1hcmtlci1cIitpXT1cInVybCgjXCIrQitcIilcIjtpZih0fHxzKXcuZD1SYXBoYWVsLmdldFN1YnBhdGgoay5wYXRoLHMsdCk7cShqLHcpLGQuXy5hcnJvd3NbaStcIlBhdGhcIl09QSxkLl8uYXJyb3dzW2krXCJNYXJrZXJcIl09QixkLl8uYXJyb3dzW2krXCJkeFwiXT1GLGQuXy5hcnJvd3NbaStcIlR5cGVcIl09cixkLl8uYXJyb3dzW2krXCJTdHJpbmdcIl09ZX1lbHNlIGY/KHM9ZC5fLmFycm93cy5zdGFydGR4Km18fDAsdD1hLmdldFRvdGFsTGVuZ3RoKGsucGF0aCktcyk6KHM9MCx0PWEuZ2V0VG90YWxMZW5ndGgoay5wYXRoKS0oZC5fLmFycm93cy5lbmRkeCptfHwwKSksZC5fLmFycm93c1tpK1wiUGF0aFwiXSYmcShqLHtkOlJhcGhhZWwuZ2V0U3VicGF0aChrLnBhdGgscyx0KX0pLGRlbGV0ZSBkLl8uYXJyb3dzW2krXCJQYXRoXCJdLGRlbGV0ZSBkLl8uYXJyb3dzW2krXCJNYXJrZXJcIl0sZGVsZXRlIGQuXy5hcnJvd3NbaStcImR4XCJdLGRlbGV0ZSBkLl8uYXJyb3dzW2krXCJUeXBlXCJdLGRlbGV0ZSBkLl8uYXJyb3dzW2krXCJTdHJpbmdcIl07Zm9yKHcgaW4gcClpZihwW2JdKHcpJiYhcFt3XSl7dmFyIEc9YS5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQodyk7RyYmRy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEcpfX19LHU9e1wiXCI6WzBdLG5vbmU6WzBdLFwiLVwiOlszLDFdLFwiLlwiOlsxLDFdLFwiLS5cIjpbMywxLDEsMV0sXCItLi5cIjpbMywxLDEsMSwxLDFdLFwiLiBcIjpbMSwzXSxcIi0gXCI6WzQsM10sXCItLVwiOls4LDNdLFwiLSAuXCI6WzQsMywxLDNdLFwiLS0uXCI6WzgsMywxLDNdLFwiLS0uLlwiOls4LDMsMSwzLDEsM119LHY9ZnVuY3Rpb24oYSxiLGQpe2I9dVtjKGIpLnRvTG93ZXJDYXNlKCldO2lmKGIpe3ZhciBlPWEuYXR0cnNbXCJzdHJva2Utd2lkdGhcIl18fFwiMVwiLGY9e3JvdW5kOmUsc3F1YXJlOmUsYnV0dDowfVthLmF0dHJzW1wic3Ryb2tlLWxpbmVjYXBcIl18fGRbXCJzdHJva2UtbGluZWNhcFwiXV18fDAsZz1bXSxoPWIubGVuZ3RoO3doaWxlKGgtLSlnW2hdPWJbaF0qZSsoaCUyPzE6LTEpKmY7cShhLm5vZGUse1wic3Ryb2tlLWRhc2hhcnJheVwiOmcuam9pbihcIixcIil9KX19LHc9ZnVuY3Rpb24oZCxmKXt2YXIgaT1kLm5vZGUsaz1kLmF0dHJzLG09aS5zdHlsZS52aXNpYmlsaXR5O2kuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwiO2Zvcih2YXIgbyBpbiBmKWlmKGZbYl0obykpe2lmKCFhLl9hdmFpbGFibGVBdHRyc1tiXShvKSljb250aW51ZTt2YXIgcD1mW29dO2tbb109cDtzd2l0Y2gobyl7Y2FzZVwiYmx1clwiOmQuYmx1cihwKTticmVhaztjYXNlXCJocmVmXCI6Y2FzZVwidGl0bGVcIjpjYXNlXCJ0YXJnZXRcIjp2YXIgdT1pLnBhcmVudE5vZGU7aWYodS50YWdOYW1lLnRvTG93ZXJDYXNlKCkhPVwiYVwiKXt2YXIgdz1xKFwiYVwiKTt1Lmluc2VydEJlZm9yZSh3LGkpLHcuYXBwZW5kQ2hpbGQoaSksdT13fW89PVwidGFyZ2V0XCI/dS5zZXRBdHRyaWJ1dGVOUyhuLFwic2hvd1wiLHA9PVwiYmxhbmtcIj9cIm5ld1wiOnApOnUuc2V0QXR0cmlidXRlTlMobixvLHApO2JyZWFrO2Nhc2VcImN1cnNvclwiOmkuc3R5bGUuY3Vyc29yPXA7YnJlYWs7Y2FzZVwidHJhbnNmb3JtXCI6ZC50cmFuc2Zvcm0ocCk7YnJlYWs7Y2FzZVwiYXJyb3ctc3RhcnRcIjp0KGQscCk7YnJlYWs7Y2FzZVwiYXJyb3ctZW5kXCI6dChkLHAsMSk7YnJlYWs7Y2FzZVwiY2xpcC1yZWN0XCI6dmFyIHg9YyhwKS5zcGxpdChqKTtpZih4Lmxlbmd0aD09NCl7ZC5jbGlwJiZkLmNsaXAucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGQuY2xpcC5wYXJlbnROb2RlKTt2YXIgej1xKFwiY2xpcFBhdGhcIiksQT1xKFwicmVjdFwiKTt6LmlkPWEuY3JlYXRlVVVJRCgpLHEoQSx7eDp4WzBdLHk6eFsxXSx3aWR0aDp4WzJdLGhlaWdodDp4WzNdfSksei5hcHBlbmRDaGlsZChBKSxkLnBhcGVyLmRlZnMuYXBwZW5kQ2hpbGQoeikscShpLHtcImNsaXAtcGF0aFwiOlwidXJsKCNcIit6LmlkK1wiKVwifSksZC5jbGlwPUF9aWYoIXApe3ZhciBCPWkuZ2V0QXR0cmlidXRlKFwiY2xpcC1wYXRoXCIpO2lmKEIpe3ZhciBDPWEuX2cuZG9jLmdldEVsZW1lbnRCeUlkKEIucmVwbGFjZSgvKF51cmxcXCgjfFxcKSQpL2csbCkpO0MmJkMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChDKSxxKGkse1wiY2xpcC1wYXRoXCI6bH0pLGRlbGV0ZSBkLmNsaXB9fWJyZWFrO2Nhc2VcInBhdGhcIjpkLnR5cGU9PVwicGF0aFwiJiYocShpLHtkOnA/ay5wYXRoPWEuX3BhdGhUb0Fic29sdXRlKHApOlwiTTAsMFwifSksZC5fLmRpcnR5PTEsZC5fLmFycm93cyYmKFwic3RhcnRTdHJpbmdcImluIGQuXy5hcnJvd3MmJnQoZCxkLl8uYXJyb3dzLnN0YXJ0U3RyaW5nKSxcImVuZFN0cmluZ1wiaW4gZC5fLmFycm93cyYmdChkLGQuXy5hcnJvd3MuZW5kU3RyaW5nLDEpKSk7YnJlYWs7Y2FzZVwid2lkdGhcIjppLnNldEF0dHJpYnV0ZShvLHApLGQuXy5kaXJ0eT0xO2lmKGsuZngpbz1cInhcIixwPWsueDtlbHNlIGJyZWFrO2Nhc2VcInhcIjprLmZ4JiYocD0tay54LShrLndpZHRofHwwKSk7Y2FzZVwicnhcIjppZihvPT1cInJ4XCImJmQudHlwZT09XCJyZWN0XCIpYnJlYWs7Y2FzZVwiY3hcIjppLnNldEF0dHJpYnV0ZShvLHApLGQucGF0dGVybiYmcyhkKSxkLl8uZGlydHk9MTticmVhaztjYXNlXCJoZWlnaHRcIjppLnNldEF0dHJpYnV0ZShvLHApLGQuXy5kaXJ0eT0xO2lmKGsuZnkpbz1cInlcIixwPWsueTtlbHNlIGJyZWFrO2Nhc2VcInlcIjprLmZ5JiYocD0tay55LShrLmhlaWdodHx8MCkpO2Nhc2VcInJ5XCI6aWYobz09XCJyeVwiJiZkLnR5cGU9PVwicmVjdFwiKWJyZWFrO2Nhc2VcImN5XCI6aS5zZXRBdHRyaWJ1dGUobyxwKSxkLnBhdHRlcm4mJnMoZCksZC5fLmRpcnR5PTE7YnJlYWs7Y2FzZVwiclwiOmQudHlwZT09XCJyZWN0XCI/cShpLHtyeDpwLHJ5OnB9KTppLnNldEF0dHJpYnV0ZShvLHApLGQuXy5kaXJ0eT0xO2JyZWFrO2Nhc2VcInNyY1wiOmQudHlwZT09XCJpbWFnZVwiJiZpLnNldEF0dHJpYnV0ZU5TKG4sXCJocmVmXCIscCk7YnJlYWs7Y2FzZVwic3Ryb2tlLXdpZHRoXCI6aWYoZC5fLnN4IT0xfHxkLl8uc3khPTEpcC89ZyhoKGQuXy5zeCksaChkLl8uc3kpKXx8MTtkLnBhcGVyLl92YlNpemUmJihwKj1kLnBhcGVyLl92YlNpemUpLGkuc2V0QXR0cmlidXRlKG8scCksa1tcInN0cm9rZS1kYXNoYXJyYXlcIl0mJnYoZCxrW1wic3Ryb2tlLWRhc2hhcnJheVwiXSxmKSxkLl8uYXJyb3dzJiYoXCJzdGFydFN0cmluZ1wiaW4gZC5fLmFycm93cyYmdChkLGQuXy5hcnJvd3Muc3RhcnRTdHJpbmcpLFwiZW5kU3RyaW5nXCJpbiBkLl8uYXJyb3dzJiZ0KGQsZC5fLmFycm93cy5lbmRTdHJpbmcsMSkpO2JyZWFrO2Nhc2VcInN0cm9rZS1kYXNoYXJyYXlcIjp2KGQscCxmKTticmVhaztjYXNlXCJmaWxsXCI6dmFyIEQ9YyhwKS5tYXRjaChhLl9JU1VSTCk7aWYoRCl7ej1xKFwicGF0dGVyblwiKTt2YXIgRj1xKFwiaW1hZ2VcIik7ei5pZD1hLmNyZWF0ZVVVSUQoKSxxKHose3g6MCx5OjAscGF0dGVyblVuaXRzOlwidXNlclNwYWNlT25Vc2VcIixoZWlnaHQ6MSx3aWR0aDoxfSkscShGLHt4OjAseTowLFwieGxpbms6aHJlZlwiOkRbMV19KSx6LmFwcGVuZENoaWxkKEYpLGZ1bmN0aW9uKGIpe2EuX3ByZWxvYWQoRFsxXSxmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0V2lkdGgsYz10aGlzLm9mZnNldEhlaWdodDtxKGIse3dpZHRoOmEsaGVpZ2h0OmN9KSxxKEYse3dpZHRoOmEsaGVpZ2h0OmN9KSxkLnBhcGVyLnNhZmFyaSgpfSl9KHopLGQucGFwZXIuZGVmcy5hcHBlbmRDaGlsZCh6KSxxKGkse2ZpbGw6XCJ1cmwoI1wiK3ouaWQrXCIpXCJ9KSxkLnBhdHRlcm49eixkLnBhdHRlcm4mJnMoZCk7YnJlYWt9dmFyIEc9YS5nZXRSR0IocCk7aWYoIUcuZXJyb3IpZGVsZXRlIGYuZ3JhZGllbnQsZGVsZXRlIGsuZ3JhZGllbnQsIWEuaXMoay5vcGFjaXR5LFwidW5kZWZpbmVkXCIpJiZhLmlzKGYub3BhY2l0eSxcInVuZGVmaW5lZFwiKSYmcShpLHtvcGFjaXR5Omsub3BhY2l0eX0pLCFhLmlzKGtbXCJmaWxsLW9wYWNpdHlcIl0sXCJ1bmRlZmluZWRcIikmJmEuaXMoZltcImZpbGwtb3BhY2l0eVwiXSxcInVuZGVmaW5lZFwiKSYmcShpLHtcImZpbGwtb3BhY2l0eVwiOmtbXCJmaWxsLW9wYWNpdHlcIl19KTtlbHNlIGlmKChkLnR5cGU9PVwiY2lyY2xlXCJ8fGQudHlwZT09XCJlbGxpcHNlXCJ8fGMocCkuY2hhckF0KCkhPVwiclwiKSYmcihkLHApKXtpZihcIm9wYWNpdHlcImluIGt8fFwiZmlsbC1vcGFjaXR5XCJpbiBrKXt2YXIgSD1hLl9nLmRvYy5nZXRFbGVtZW50QnlJZChpLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLGwpKTtpZihIKXt2YXIgST1ILmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3RvcFwiKTtxKElbSS5sZW5ndGgtMV0se1wic3RvcC1vcGFjaXR5XCI6KFwib3BhY2l0eVwiaW4gaz9rLm9wYWNpdHk6MSkqKFwiZmlsbC1vcGFjaXR5XCJpbiBrP2tbXCJmaWxsLW9wYWNpdHlcIl06MSl9KX19ay5ncmFkaWVudD1wLGsuZmlsbD1cIm5vbmVcIjticmVha31HW2JdKFwib3BhY2l0eVwiKSYmcShpLHtcImZpbGwtb3BhY2l0eVwiOkcub3BhY2l0eT4xP0cub3BhY2l0eS8xMDA6Ry5vcGFjaXR5fSk7Y2FzZVwic3Ryb2tlXCI6Rz1hLmdldFJHQihwKSxpLnNldEF0dHJpYnV0ZShvLEcuaGV4KSxvPT1cInN0cm9rZVwiJiZHW2JdKFwib3BhY2l0eVwiKSYmcShpLHtcInN0cm9rZS1vcGFjaXR5XCI6Ry5vcGFjaXR5PjE/Ry5vcGFjaXR5LzEwMDpHLm9wYWNpdHl9KSxvPT1cInN0cm9rZVwiJiZkLl8uYXJyb3dzJiYoXCJzdGFydFN0cmluZ1wiaW4gZC5fLmFycm93cyYmdChkLGQuXy5hcnJvd3Muc3RhcnRTdHJpbmcpLFwiZW5kU3RyaW5nXCJpbiBkLl8uYXJyb3dzJiZ0KGQsZC5fLmFycm93cy5lbmRTdHJpbmcsMSkpO2JyZWFrO2Nhc2VcImdyYWRpZW50XCI6KGQudHlwZT09XCJjaXJjbGVcInx8ZC50eXBlPT1cImVsbGlwc2VcInx8YyhwKS5jaGFyQXQoKSE9XCJyXCIpJiZyKGQscCk7YnJlYWs7Y2FzZVwib3BhY2l0eVwiOmsuZ3JhZGllbnQmJiFrW2JdKFwic3Ryb2tlLW9wYWNpdHlcIikmJnEoaSx7XCJzdHJva2Utb3BhY2l0eVwiOnA+MT9wLzEwMDpwfSk7Y2FzZVwiZmlsbC1vcGFjaXR5XCI6aWYoay5ncmFkaWVudCl7SD1hLl9nLmRvYy5nZXRFbGVtZW50QnlJZChpLmdldEF0dHJpYnV0ZShcImZpbGxcIikucmVwbGFjZSgvXnVybFxcKCN8XFwpJC9nLGwpKSxIJiYoST1ILmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3RvcFwiKSxxKElbSS5sZW5ndGgtMV0se1wic3RvcC1vcGFjaXR5XCI6cH0pKTticmVha307ZGVmYXVsdDpvPT1cImZvbnQtc2l6ZVwiJiYocD1lKHAsMTApK1wicHhcIik7dmFyIEo9by5yZXBsYWNlKC8oXFwtLikvZyxmdW5jdGlvbihhKXtyZXR1cm4gYS5zdWJzdHJpbmcoMSkudG9VcHBlckNhc2UoKX0pO2kuc3R5bGVbSl09cCxkLl8uZGlydHk9MSxpLnNldEF0dHJpYnV0ZShvLHApfX15KGQsZiksaS5zdHlsZS52aXNpYmlsaXR5PW19LHg9MS4yLHk9ZnVuY3Rpb24oZCxmKXtpZihkLnR5cGU9PVwidGV4dFwiJiYhIShmW2JdKFwidGV4dFwiKXx8ZltiXShcImZvbnRcIil8fGZbYl0oXCJmb250LXNpemVcIil8fGZbYl0oXCJ4XCIpfHxmW2JdKFwieVwiKSkpe3ZhciBnPWQuYXR0cnMsaD1kLm5vZGUsaT1oLmZpcnN0Q2hpbGQ/ZShhLl9nLmRvYy5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGguZmlyc3RDaGlsZCxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiZm9udC1zaXplXCIpLDEwKToxMDtpZihmW2JdKFwidGV4dFwiKSl7Zy50ZXh0PWYudGV4dDt3aGlsZShoLmZpcnN0Q2hpbGQpaC5yZW1vdmVDaGlsZChoLmZpcnN0Q2hpbGQpO3ZhciBqPWMoZi50ZXh0KS5zcGxpdChcIlxcblwiKSxrPVtdLG07Zm9yKHZhciBuPTAsbz1qLmxlbmd0aDtuPG87bisrKW09cShcInRzcGFuXCIpLG4mJnEobSx7ZHk6aSp4LHg6Zy54fSksbS5hcHBlbmRDaGlsZChhLl9nLmRvYy5jcmVhdGVUZXh0Tm9kZShqW25dKSksaC5hcHBlbmRDaGlsZChtKSxrW25dPW19ZWxzZXtrPWguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0c3BhblwiKTtmb3Iobj0wLG89ay5sZW5ndGg7bjxvO24rKyluP3Eoa1tuXSx7ZHk6aSp4LHg6Zy54fSk6cShrWzBdLHtkeTowfSl9cShoLHt4OmcueCx5OmcueX0pLGQuXy5kaXJ0eT0xO3ZhciBwPWQuX2dldEJCb3goKSxyPWcueS0ocC55K3AuaGVpZ2h0LzIpO3ImJmEuaXMocixcImZpbml0ZVwiKSYmcShrWzBdLHtkeTpyfSl9fSx6PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9MCxlPTA7dGhpc1swXT10aGlzLm5vZGU9YixiLnJhcGhhZWw9ITAsdGhpcy5pZD1hLl9vaWQrKyxiLnJhcGhhZWxpZD10aGlzLmlkLHRoaXMubWF0cml4PWEubWF0cml4KCksdGhpcy5yZWFsUGF0aD1udWxsLHRoaXMucGFwZXI9Yyx0aGlzLmF0dHJzPXRoaXMuYXR0cnN8fHt9LHRoaXMuXz17dHJhbnNmb3JtOltdLHN4OjEsc3k6MSxkZWc6MCxkeDowLGR5OjAsZGlydHk6MX0sIWMuYm90dG9tJiYoYy5ib3R0b209dGhpcyksdGhpcy5wcmV2PWMudG9wLGMudG9wJiYoYy50b3AubmV4dD10aGlzKSxjLnRvcD10aGlzLHRoaXMubmV4dD1udWxsfSxBPWEuZWw7ei5wcm90b3R5cGU9QSxBLmNvbnN0cnVjdG9yPXosYS5fZW5naW5lLnBhdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1xKFwicGF0aFwiKTtiLmNhbnZhcyYmYi5jYW52YXMuYXBwZW5kQ2hpbGQoYyk7dmFyIGQ9bmV3IHooYyxiKTtkLnR5cGU9XCJwYXRoXCIsdyhkLHtmaWxsOlwibm9uZVwiLHN0cm9rZTpcIiMwMDBcIixwYXRoOmF9KTtyZXR1cm4gZH0sQS5yb3RhdGU9ZnVuY3Rpb24oYSxiLGUpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczthPWMoYSkuc3BsaXQoaiksYS5sZW5ndGgtMSYmKGI9ZChhWzFdKSxlPWQoYVsyXSkpLGE9ZChhWzBdKSxlPT1udWxsJiYoYj1lKTtpZihiPT1udWxsfHxlPT1udWxsKXt2YXIgZj10aGlzLmdldEJCb3goMSk7Yj1mLngrZi53aWR0aC8yLGU9Zi55K2YuaGVpZ2h0LzJ9dGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInJcIixhLGIsZV1dKSk7cmV0dXJuIHRoaXN9LEEuc2NhbGU9ZnVuY3Rpb24oYSxiLGUsZil7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2E9YyhhKS5zcGxpdChqKSxhLmxlbmd0aC0xJiYoYj1kKGFbMV0pLGU9ZChhWzJdKSxmPWQoYVszXSkpLGE9ZChhWzBdKSxiPT1udWxsJiYoYj1hKSxmPT1udWxsJiYoZT1mKTtpZihlPT1udWxsfHxmPT1udWxsKXZhciBnPXRoaXMuZ2V0QkJveCgxKTtlPWU9PW51bGw/Zy54K2cud2lkdGgvMjplLGY9Zj09bnVsbD9nLnkrZy5oZWlnaHQvMjpmLHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJzXCIsYSxiLGUsZl1dKSk7cmV0dXJuIHRoaXN9LEEudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2E9YyhhKS5zcGxpdChqKSxhLmxlbmd0aC0xJiYoYj1kKGFbMV0pKSxhPWQoYVswXSl8fDAsYj0rYnx8MCx0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1widFwiLGEsYl1dKSk7cmV0dXJuIHRoaXN9LEEudHJhbnNmb3JtPWZ1bmN0aW9uKGMpe3ZhciBkPXRoaXMuXztpZihjPT1udWxsKXJldHVybiBkLnRyYW5zZm9ybTthLl9leHRyYWN0VHJhbnNmb3JtKHRoaXMsYyksdGhpcy5jbGlwJiZxKHRoaXMuY2xpcCx7dHJhbnNmb3JtOnRoaXMubWF0cml4LmludmVydCgpfSksdGhpcy5wYXR0ZXJuJiZzKHRoaXMpLHRoaXMubm9kZSYmcSh0aGlzLm5vZGUse3RyYW5zZm9ybTp0aGlzLm1hdHJpeH0pO2lmKGQuc3ghPTF8fGQuc3khPTEpe3ZhciBlPXRoaXMuYXR0cnNbYl0oXCJzdHJva2Utd2lkdGhcIik/dGhpcy5hdHRyc1tcInN0cm9rZS13aWR0aFwiXToxO3RoaXMuYXR0cih7XCJzdHJva2Utd2lkdGhcIjplfSl9cmV0dXJuIHRoaXN9LEEuaGlkZT1mdW5jdGlvbigpeyF0aGlzLnJlbW92ZWQmJnRoaXMucGFwZXIuc2FmYXJpKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKTtyZXR1cm4gdGhpc30sQS5zaG93PWZ1bmN0aW9uKCl7IXRoaXMucmVtb3ZlZCYmdGhpcy5wYXBlci5zYWZhcmkodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXk9XCJcIik7cmV0dXJuIHRoaXN9LEEucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoIXRoaXMucmVtb3ZlZCYmISF0aGlzLm5vZGUucGFyZW50Tm9kZSl7dmFyIGI9dGhpcy5wYXBlcjtiLl9fc2V0X18mJmIuX19zZXRfXy5leGNsdWRlKHRoaXMpLGsudW5iaW5kKFwicmFwaGFlbC4qLiouXCIrdGhpcy5pZCksdGhpcy5ncmFkaWVudCYmYi5kZWZzLnJlbW92ZUNoaWxkKHRoaXMuZ3JhZGllbnQpLGEuX3RlYXIodGhpcyxiKSx0aGlzLm5vZGUucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PVwiYVwiP3RoaXMubm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ub2RlLnBhcmVudE5vZGUpOnRoaXMubm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZSk7Zm9yKHZhciBjIGluIHRoaXMpdGhpc1tjXT10eXBlb2YgdGhpc1tjXT09XCJmdW5jdGlvblwiP2EuX3JlbW92ZWRGYWN0b3J5KGMpOm51bGw7dGhpcy5yZW1vdmVkPSEwfX0sQS5fZ2V0QkJveD1mdW5jdGlvbigpe2lmKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5PT1cIm5vbmVcIil7dGhpcy5zaG93KCk7dmFyIGE9ITB9dmFyIGI9e307dHJ5e2I9dGhpcy5ub2RlLmdldEJCb3goKX1jYXRjaChjKXt9ZmluYWxseXtiPWJ8fHt9fWEmJnRoaXMuaGlkZSgpO3JldHVybiBifSxBLmF0dHI9ZnVuY3Rpb24oYyxkKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7aWYoYz09bnVsbCl7dmFyIGU9e307Zm9yKHZhciBmIGluIHRoaXMuYXR0cnMpdGhpcy5hdHRyc1tiXShmKSYmKGVbZl09dGhpcy5hdHRyc1tmXSk7ZS5ncmFkaWVudCYmZS5maWxsPT1cIm5vbmVcIiYmKGUuZmlsbD1lLmdyYWRpZW50KSYmZGVsZXRlIGUuZ3JhZGllbnQsZS50cmFuc2Zvcm09dGhpcy5fLnRyYW5zZm9ybTtyZXR1cm4gZX1pZihkPT1udWxsJiZhLmlzKGMsXCJzdHJpbmdcIikpe2lmKGM9PVwiZmlsbFwiJiZ0aGlzLmF0dHJzLmZpbGw9PVwibm9uZVwiJiZ0aGlzLmF0dHJzLmdyYWRpZW50KXJldHVybiB0aGlzLmF0dHJzLmdyYWRpZW50O2lmKGM9PVwidHJhbnNmb3JtXCIpcmV0dXJuIHRoaXMuXy50cmFuc2Zvcm07dmFyIGc9Yy5zcGxpdChqKSxoPXt9O2Zvcih2YXIgaT0wLGw9Zy5sZW5ndGg7aTxsO2krKyljPWdbaV0sYyBpbiB0aGlzLmF0dHJzP2hbY109dGhpcy5hdHRyc1tjXTphLmlzKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tjXSxcImZ1bmN0aW9uXCIpP2hbY109dGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2NdLmRlZjpoW2NdPWEuX2F2YWlsYWJsZUF0dHJzW2NdO3JldHVybiBsLTE/aDpoW2dbMF1dfWlmKGQ9PW51bGwmJmEuaXMoYyxcImFycmF5XCIpKXtoPXt9O2ZvcihpPTAsbD1jLmxlbmd0aDtpPGw7aSsrKWhbY1tpXV09dGhpcy5hdHRyKGNbaV0pO3JldHVybiBofWlmKGQhPW51bGwpe3ZhciBtPXt9O21bY109ZH1lbHNlIGMhPW51bGwmJmEuaXMoYyxcIm9iamVjdFwiKSYmKG09Yyk7Zm9yKHZhciBuIGluIG0payhcInJhcGhhZWwuYXR0ci5cIituK1wiLlwiK3RoaXMuaWQsdGhpcyxtW25dKTtmb3IobiBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpaWYodGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2JdKG4pJiZtW2JdKG4pJiZhLmlzKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tuXSxcImZ1bmN0aW9uXCIpKXt2YXIgbz10aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbbl0uYXBwbHkodGhpcyxbXS5jb25jYXQobVtuXSkpO3RoaXMuYXR0cnNbbl09bVtuXTtmb3IodmFyIHAgaW4gbylvW2JdKHApJiYobVtwXT1vW3BdKX13KHRoaXMsbSk7cmV0dXJuIHRoaXN9LEEudG9Gcm9udD1mdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczt0aGlzLm5vZGUucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCk9PVwiYVwiP3RoaXMubm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlLnBhcmVudE5vZGUpOnRoaXMubm9kZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSk7dmFyIGI9dGhpcy5wYXBlcjtiLnRvcCE9dGhpcyYmYS5fdG9mcm9udCh0aGlzLGIpO3JldHVybiB0aGlzfSxBLnRvQmFjaz1mdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczt2YXIgYj10aGlzLm5vZGUucGFyZW50Tm9kZTtiLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJhXCI/Yi5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUucGFyZW50Tm9kZSx0aGlzLm5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpOmIuZmlyc3RDaGlsZCE9dGhpcy5ub2RlJiZiLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsdGhpcy5ub2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCksYS5fdG9iYWNrKHRoaXMsdGhpcy5wYXBlcik7dmFyIGM9dGhpcy5wYXBlcjtyZXR1cm4gdGhpc30sQS5pbnNlcnRBZnRlcj1mdW5jdGlvbihiKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7dmFyIGM9Yi5ub2RlfHxiW2IubGVuZ3RoLTFdLm5vZGU7Yy5uZXh0U2libGluZz9jLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSxjLm5leHRTaWJsaW5nKTpjLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKSxhLl9pbnNlcnRhZnRlcih0aGlzLGIsdGhpcy5wYXBlcik7cmV0dXJuIHRoaXN9LEEuaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKGIpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczt2YXIgYz1iLm5vZGV8fGJbMF0ubm9kZTtjLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSxjKSxhLl9pbnNlcnRiZWZvcmUodGhpcyxiLHRoaXMucGFwZXIpO3JldHVybiB0aGlzfSxBLmJsdXI9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztpZigrYiE9PTApe3ZhciBkPXEoXCJmaWx0ZXJcIiksZT1xKFwiZmVHYXVzc2lhbkJsdXJcIik7Yy5hdHRycy5ibHVyPWIsZC5pZD1hLmNyZWF0ZVVVSUQoKSxxKGUse3N0ZERldmlhdGlvbjorYnx8MS41fSksZC5hcHBlbmRDaGlsZChlKSxjLnBhcGVyLmRlZnMuYXBwZW5kQ2hpbGQoZCksYy5fYmx1cj1kLHEoYy5ub2RlLHtmaWx0ZXI6XCJ1cmwoI1wiK2QuaWQrXCIpXCJ9KX1lbHNlIGMuX2JsdXImJihjLl9ibHVyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYy5fYmx1ciksZGVsZXRlIGMuX2JsdXIsZGVsZXRlIGMuYXR0cnMuYmx1ciksYy5ub2RlLnJlbW92ZUF0dHJpYnV0ZShcImZpbHRlclwiKX0sYS5fZW5naW5lLmNpcmNsZT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1xKFwiY2lyY2xlXCIpO2EuY2FudmFzJiZhLmNhbnZhcy5hcHBlbmRDaGlsZChlKTt2YXIgZj1uZXcgeihlLGEpO2YuYXR0cnM9e2N4OmIsY3k6YyxyOmQsZmlsbDpcIm5vbmVcIixzdHJva2U6XCIjMDAwXCJ9LGYudHlwZT1cImNpcmNsZVwiLHEoZSxmLmF0dHJzKTtyZXR1cm4gZn0sYS5fZW5naW5lLnJlY3Q9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXEoXCJyZWN0XCIpO2EuY2FudmFzJiZhLmNhbnZhcy5hcHBlbmRDaGlsZChnKTt2YXIgaD1uZXcgeihnLGEpO2guYXR0cnM9e3g6Yix5OmMsd2lkdGg6ZCxoZWlnaHQ6ZSxyOmZ8fDAscng6Znx8MCxyeTpmfHwwLGZpbGw6XCJub25lXCIsc3Ryb2tlOlwiIzAwMFwifSxoLnR5cGU9XCJyZWN0XCIscShnLGguYXR0cnMpO3JldHVybiBofSxhLl9lbmdpbmUuZWxsaXBzZT1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXEoXCJlbGxpcHNlXCIpO2EuY2FudmFzJiZhLmNhbnZhcy5hcHBlbmRDaGlsZChmKTt2YXIgZz1uZXcgeihmLGEpO2cuYXR0cnM9e2N4OmIsY3k6YyxyeDpkLHJ5OmUsZmlsbDpcIm5vbmVcIixzdHJva2U6XCIjMDAwXCJ9LGcudHlwZT1cImVsbGlwc2VcIixxKGYsZy5hdHRycyk7cmV0dXJuIGd9LGEuX2VuZ2luZS5pbWFnZT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9cShcImltYWdlXCIpO3EoZyx7eDpjLHk6ZCx3aWR0aDplLGhlaWdodDpmLHByZXNlcnZlQXNwZWN0UmF0aW86XCJub25lXCJ9KSxnLnNldEF0dHJpYnV0ZU5TKG4sXCJocmVmXCIsYiksYS5jYW52YXMmJmEuY2FudmFzLmFwcGVuZENoaWxkKGcpO3ZhciBoPW5ldyB6KGcsYSk7aC5hdHRycz17eDpjLHk6ZCx3aWR0aDplLGhlaWdodDpmLHNyYzpifSxoLnR5cGU9XCJpbWFnZVwiO3JldHVybiBofSxhLl9lbmdpbmUudGV4dD1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1xKFwidGV4dFwiKTtiLmNhbnZhcyYmYi5jYW52YXMuYXBwZW5kQ2hpbGQoZik7dmFyIGc9bmV3IHooZixiKTtnLmF0dHJzPXt4OmMseTpkLFwidGV4dC1hbmNob3JcIjpcIm1pZGRsZVwiLHRleHQ6ZSxmb250OmEuX2F2YWlsYWJsZUF0dHJzLmZvbnQsc3Ryb2tlOlwibm9uZVwiLGZpbGw6XCIjMDAwXCJ9LGcudHlwZT1cInRleHRcIix3KGcsZy5hdHRycyk7cmV0dXJuIGd9LGEuX2VuZ2luZS5zZXRTaXplPWZ1bmN0aW9uKGEsYil7dGhpcy53aWR0aD1hfHx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0PWJ8fHRoaXMuaGVpZ2h0LHRoaXMuY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsdGhpcy53aWR0aCksdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsdGhpcy5oZWlnaHQpLHRoaXMuX3ZpZXdCb3gmJnRoaXMuc2V0Vmlld0JveC5hcHBseSh0aGlzLHRoaXMuX3ZpZXdCb3gpO3JldHVybiB0aGlzfSxhLl9lbmdpbmUuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIGI9YS5fZ2V0Q29udGFpbmVyLmFwcGx5KDAsYXJndW1lbnRzKSxjPWImJmIuY29udGFpbmVyLGQ9Yi54LGU9Yi55LGY9Yi53aWR0aCxnPWIuaGVpZ2h0O2lmKCFjKXRocm93IG5ldyBFcnJvcihcIlNWRyBjb250YWluZXIgbm90IGZvdW5kLlwiKTt2YXIgaD1xKFwic3ZnXCIpLGk9XCJvdmVyZmxvdzpoaWRkZW47XCIsajtkPWR8fDAsZT1lfHwwLGY9Znx8NTEyLGc9Z3x8MzQyLHEoaCx7aGVpZ2h0OmcsdmVyc2lvbjoxLjEsd2lkdGg6Zix4bWxuczpcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCJ9KSxjPT0xPyhoLnN0eWxlLmNzc1RleHQ9aStcInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6XCIrZCtcInB4O3RvcDpcIitlK1wicHhcIixhLl9nLmRvYy5ib2R5LmFwcGVuZENoaWxkKGgpLGo9MSk6KGguc3R5bGUuY3NzVGV4dD1pK1wicG9zaXRpb246cmVsYXRpdmVcIixjLmZpcnN0Q2hpbGQ/Yy5pbnNlcnRCZWZvcmUoaCxjLmZpcnN0Q2hpbGQpOmMuYXBwZW5kQ2hpbGQoaCkpLGM9bmV3IGEuX1BhcGVyLGMud2lkdGg9ZixjLmhlaWdodD1nLGMuY2FudmFzPWgsYy5jbGVhcigpLGMuX2xlZnQ9Yy5fdG9wPTAsaiYmKGMucmVuZGVyZml4PWZ1bmN0aW9uKCl7fSksYy5yZW5kZXJmaXgoKTtyZXR1cm4gY30sYS5fZW5naW5lLnNldFZpZXdCb3g9ZnVuY3Rpb24oYSxiLGMsZCxlKXtrKFwicmFwaGFlbC5zZXRWaWV3Qm94XCIsdGhpcyx0aGlzLl92aWV3Qm94LFthLGIsYyxkLGVdKTt2YXIgZj1nKGMvdGhpcy53aWR0aCxkL3RoaXMuaGVpZ2h0KSxoPXRoaXMudG9wLGk9ZT9cIm1lZXRcIjpcInhNaW5ZTWluXCIsaixsO2E9PW51bGw/KHRoaXMuX3ZiU2l6ZSYmKGY9MSksZGVsZXRlIHRoaXMuX3ZiU2l6ZSxqPVwiMCAwIFwiK3RoaXMud2lkdGgrbSt0aGlzLmhlaWdodCk6KHRoaXMuX3ZiU2l6ZT1mLGo9YSttK2IrbStjK20rZCkscSh0aGlzLmNhbnZhcyx7dmlld0JveDpqLHByZXNlcnZlQXNwZWN0UmF0aW86aX0pO3doaWxlKGYmJmgpbD1cInN0cm9rZS13aWR0aFwiaW4gaC5hdHRycz9oLmF0dHJzW1wic3Ryb2tlLXdpZHRoXCJdOjEsaC5hdHRyKHtcInN0cm9rZS13aWR0aFwiOmx9KSxoLl8uZGlydHk9MSxoLl8uZGlydHlUPTEsaD1oLnByZXY7dGhpcy5fdmlld0JveD1bYSxiLGMsZCwhIWVdO3JldHVybiB0aGlzfSxhLnByb3RvdHlwZS5yZW5kZXJmaXg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNhbnZhcyxiPWEuc3R5bGUsYzt0cnl7Yz1hLmdldFNjcmVlbkNUTSgpfHxhLmNyZWF0ZVNWR01hdHJpeCgpfWNhdGNoKGQpe2M9YS5jcmVhdGVTVkdNYXRyaXgoKX12YXIgZT0tYy5lJTEsZj0tYy5mJTE7aWYoZXx8ZillJiYodGhpcy5fbGVmdD0odGhpcy5fbGVmdCtlKSUxLGIubGVmdD10aGlzLl9sZWZ0K1wicHhcIiksZiYmKHRoaXMuX3RvcD0odGhpcy5fdG9wK2YpJTEsYi50b3A9dGhpcy5fdG9wK1wicHhcIil9LGEucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7YS5ldmUoXCJyYXBoYWVsLmNsZWFyXCIsdGhpcyk7dmFyIGI9dGhpcy5jYW52YXM7d2hpbGUoYi5maXJzdENoaWxkKWIucmVtb3ZlQ2hpbGQoYi5maXJzdENoaWxkKTt0aGlzLmJvdHRvbT10aGlzLnRvcD1udWxsLCh0aGlzLmRlc2M9cShcImRlc2NcIikpLmFwcGVuZENoaWxkKGEuX2cuZG9jLmNyZWF0ZVRleHROb2RlKFwiQ3JlYXRlZCB3aXRoIFJhcGhh77+9bCBcIithLnZlcnNpb24pKSxiLmFwcGVuZENoaWxkKHRoaXMuZGVzYyksYi5hcHBlbmRDaGlsZCh0aGlzLmRlZnM9cShcImRlZnNcIikpfSxhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtrKFwicmFwaGFlbC5yZW1vdmVcIix0aGlzKSx0aGlzLmNhbnZhcy5wYXJlbnROb2RlJiZ0aGlzLmNhbnZhcy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY2FudmFzKTtmb3IodmFyIGIgaW4gdGhpcyl0aGlzW2JdPXR5cGVvZiB0aGlzW2JdPT1cImZ1bmN0aW9uXCI/YS5fcmVtb3ZlZEZhY3RvcnkoYik6bnVsbH07dmFyIEI9YS5zdDtmb3IodmFyIEMgaW4gQSlBW2JdKEMpJiYhQltiXShDKSYmKEJbQ109ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzO3JldHVybiB0aGlzLmZvckVhY2goZnVuY3Rpb24oYyl7Y1thXS5hcHBseShjLGIpfSl9fShDKSl9KHdpbmRvdy5SYXBoYWVsKSx3aW5kb3cuUmFwaGFlbC52bWwmJmZ1bmN0aW9uKGEpe3ZhciBiPVwiaGFzT3duUHJvcGVydHlcIixjPVN0cmluZyxkPXBhcnNlRmxvYXQsZT1NYXRoLGY9ZS5yb3VuZCxnPWUubWF4LGg9ZS5taW4saT1lLmFicyxqPVwiZmlsbFwiLGs9L1ssIF0rLyxsPWEuZXZlLG09XCIgcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0XCIsbj1cIiBcIixvPVwiXCIscD17TTpcIm1cIixMOlwibFwiLEM6XCJjXCIsWjpcInhcIixtOlwidFwiLGw6XCJyXCIsYzpcInZcIix6OlwieFwifSxxPS8oW2NsbXpdKSw/KFteY2xtel0qKS9naSxyPS8gcHJvZ2lkOlxcUytCbHVyXFwoW15cXCldK1xcKS9nLHM9Ly0/W14sXFxzLV0rL2csdD1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6MDt0b3A6MDt3aWR0aDoxcHg7aGVpZ2h0OjFweFwiLHU9MjE2MDAsdj17cGF0aDoxLHJlY3Q6MSxpbWFnZToxfSx3PXtjaXJjbGU6MSxlbGxpcHNlOjF9LHg9ZnVuY3Rpb24oYil7dmFyIGQ9L1thaHFzdHZdL2lnLGU9YS5fcGF0aFRvQWJzb2x1dGU7YyhiKS5tYXRjaChkKSYmKGU9YS5fcGF0aDJjdXJ2ZSksZD0vW2NsbXpdL2c7aWYoZT09YS5fcGF0aFRvQWJzb2x1dGUmJiFjKGIpLm1hdGNoKGQpKXt2YXIgZz1jKGIpLnJlcGxhY2UocSxmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT1iLnRvTG93ZXJDYXNlKCk9PVwibVwiLGc9cFtiXTtjLnJlcGxhY2UocyxmdW5jdGlvbihhKXtlJiZkLmxlbmd0aD09MiYmKGcrPWQrcFtiPT1cIm1cIj9cImxcIjpcIkxcIl0sZD1bXSksZC5wdXNoKGYoYSp1KSl9KTtyZXR1cm4gZytkfSk7cmV0dXJuIGd9dmFyIGg9ZShiKSxpLGo7Zz1bXTtmb3IodmFyIGs9MCxsPWgubGVuZ3RoO2s8bDtrKyspe2k9aFtrXSxqPWhba11bMF0udG9Mb3dlckNhc2UoKSxqPT1cInpcIiYmKGo9XCJ4XCIpO2Zvcih2YXIgbT0xLHI9aS5sZW5ndGg7bTxyO20rKylqKz1mKGlbbV0qdSkrKG0hPXItMT9cIixcIjpvKTtnLnB1c2goail9cmV0dXJuIGcuam9pbihuKX0seT1mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5tYXRyaXgoKTtlLnJvdGF0ZSgtYiwuNSwuNSk7cmV0dXJue2R4OmUueChjLGQpLGR5OmUueShjLGQpfX0sej1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9YS5fLGg9YS5tYXRyaXgsaz1nLmZpbGxwb3MsbD1hLm5vZGUsbT1sLnN0eWxlLG89MSxwPVwiXCIscSxyPXUvYixzPXUvYzttLnZpc2liaWxpdHk9XCJoaWRkZW5cIjtpZighIWImJiEhYyl7bC5jb29yZHNpemU9aShyKStuK2kocyksbS5yb3RhdGlvbj1mKihiKmM8MD8tMToxKTtpZihmKXt2YXIgdD15KGYsZCxlKTtkPXQuZHgsZT10LmR5fWI8MCYmKHArPVwieFwiKSxjPDAmJihwKz1cIiB5XCIpJiYobz0tMSksbS5mbGlwPXAsbC5jb29yZG9yaWdpbj1kKi1yK24rZSotcztpZihrfHxnLmZpbGxzaXplKXt2YXIgdj1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKGopO3Y9diYmdlswXSxsLnJlbW92ZUNoaWxkKHYpLGsmJih0PXkoZixoLngoa1swXSxrWzFdKSxoLnkoa1swXSxrWzFdKSksdi5wb3NpdGlvbj10LmR4Km8rbit0LmR5Km8pLGcuZmlsbHNpemUmJih2LnNpemU9Zy5maWxsc2l6ZVswXSppKGIpK24rZy5maWxsc2l6ZVsxXSppKGMpKSxsLmFwcGVuZENoaWxkKHYpfW0udmlzaWJpbGl0eT1cInZpc2libGVcIn19O2EudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIllvdXIgYnJvd3NlciBkb2Vzbu+/vXQgc3VwcG9ydCBTVkcuIEZhbGxpbmcgZG93biB0byBWTUwuXFxuWW91IGFyZSBydW5uaW5nIFJhcGhh77+9bCBcIit0aGlzLnZlcnNpb259O3ZhciBBPWZ1bmN0aW9uKGEsYixkKXt2YXIgZT1jKGIpLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCItXCIpLGY9ZD9cImVuZFwiOlwic3RhcnRcIixnPWUubGVuZ3RoLGg9XCJjbGFzc2ljXCIsaT1cIm1lZGl1bVwiLGo9XCJtZWRpdW1cIjt3aGlsZShnLS0pc3dpdGNoKGVbZ10pe2Nhc2VcImJsb2NrXCI6Y2FzZVwiY2xhc3NpY1wiOmNhc2VcIm92YWxcIjpjYXNlXCJkaWFtb25kXCI6Y2FzZVwib3BlblwiOmNhc2VcIm5vbmVcIjpoPWVbZ107YnJlYWs7Y2FzZVwid2lkZVwiOmNhc2VcIm5hcnJvd1wiOmo9ZVtnXTticmVhaztjYXNlXCJsb25nXCI6Y2FzZVwic2hvcnRcIjppPWVbZ119dmFyIGs9YS5ub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpWzBdO2tbZitcImFycm93XCJdPWgsa1tmK1wiYXJyb3dsZW5ndGhcIl09aSxrW2YrXCJhcnJvd3dpZHRoXCJdPWp9LEI9ZnVuY3Rpb24oZSxpKXtlLmF0dHJzPWUuYXR0cnN8fHt9O3ZhciBsPWUubm9kZSxtPWUuYXR0cnMscD1sLnN0eWxlLHEscj12W2UudHlwZV0mJihpLnghPW0ueHx8aS55IT1tLnl8fGkud2lkdGghPW0ud2lkdGh8fGkuaGVpZ2h0IT1tLmhlaWdodHx8aS5jeCE9bS5jeHx8aS5jeSE9bS5jeXx8aS5yeCE9bS5yeHx8aS5yeSE9bS5yeXx8aS5yIT1tLnIpLHM9d1tlLnR5cGVdJiYobS5jeCE9aS5jeHx8bS5jeSE9aS5jeXx8bS5yIT1pLnJ8fG0ucnghPWkucnh8fG0ucnkhPWkucnkpLHQ9ZTtmb3IodmFyIHkgaW4gaSlpW2JdKHkpJiYobVt5XT1pW3ldKTtyJiYobS5wYXRoPWEuX2dldFBhdGhbZS50eXBlXShlKSxlLl8uZGlydHk9MSksaS5ocmVmJiYobC5ocmVmPWkuaHJlZiksaS50aXRsZSYmKGwudGl0bGU9aS50aXRsZSksaS50YXJnZXQmJihsLnRhcmdldD1pLnRhcmdldCksaS5jdXJzb3ImJihwLmN1cnNvcj1pLmN1cnNvciksXCJibHVyXCJpbiBpJiZlLmJsdXIoaS5ibHVyKTtpZihpLnBhdGgmJmUudHlwZT09XCJwYXRoXCJ8fHIpbC5wYXRoPXgofmMobS5wYXRoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJyXCIpP2EuX3BhdGhUb0Fic29sdXRlKG0ucGF0aCk6bS5wYXRoKSxlLnR5cGU9PVwiaW1hZ2VcIiYmKGUuXy5maWxscG9zPVttLngsbS55XSxlLl8uZmlsbHNpemU9W20ud2lkdGgsbS5oZWlnaHRdLHooZSwxLDEsMCwwLDApKTtcInRyYW5zZm9ybVwiaW4gaSYmZS50cmFuc2Zvcm0oaS50cmFuc2Zvcm0pO2lmKHMpe3ZhciBCPSttLmN4LEQ9K20uY3ksRT0rbS5yeHx8K20ucnx8MCxHPSttLnJ5fHwrbS5yfHwwO2wucGF0aD1hLmZvcm1hdChcImFyezB9LHsxfSx7Mn0sezN9LHs0fSx7MX0sezR9LHsxfXhcIixmKChCLUUpKnUpLGYoKEQtRykqdSksZigoQitFKSp1KSxmKChEK0cpKnUpLGYoQip1KSl9aWYoXCJjbGlwLXJlY3RcImluIGkpe3ZhciBIPWMoaVtcImNsaXAtcmVjdFwiXSkuc3BsaXQoayk7aWYoSC5sZW5ndGg9PTQpe0hbMl09K0hbMl0rICtIWzBdLEhbM109K0hbM10rICtIWzFdO3ZhciBJPWwuY2xpcFJlY3R8fGEuX2cuZG9jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksSj1JLnN0eWxlO0ouY2xpcD1hLmZvcm1hdChcInJlY3QoezF9cHggezJ9cHggezN9cHggezB9cHgpXCIsSCksbC5jbGlwUmVjdHx8KEoucG9zaXRpb249XCJhYnNvbHV0ZVwiLEoudG9wPTAsSi5sZWZ0PTAsSi53aWR0aD1lLnBhcGVyLndpZHRoK1wicHhcIixKLmhlaWdodD1lLnBhcGVyLmhlaWdodCtcInB4XCIsbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShJLGwpLEkuYXBwZW5kQ2hpbGQobCksbC5jbGlwUmVjdD1JKX1pW1wiY2xpcC1yZWN0XCJdfHxsLmNsaXBSZWN0JiYobC5jbGlwUmVjdC5zdHlsZS5jbGlwPVwiYXV0b1wiKX1pZihlLnRleHRwYXRoKXt2YXIgSz1lLnRleHRwYXRoLnN0eWxlO2kuZm9udCYmKEsuZm9udD1pLmZvbnQpLGlbXCJmb250LWZhbWlseVwiXSYmKEsuZm9udEZhbWlseT0nXCInK2lbXCJmb250LWZhbWlseVwiXS5zcGxpdChcIixcIilbMF0ucmVwbGFjZSgvXlsnXCJdK3xbJ1wiXSskL2csbykrJ1wiJyksaVtcImZvbnQtc2l6ZVwiXSYmKEsuZm9udFNpemU9aVtcImZvbnQtc2l6ZVwiXSksaVtcImZvbnQtd2VpZ2h0XCJdJiYoSy5mb250V2VpZ2h0PWlbXCJmb250LXdlaWdodFwiXSksaVtcImZvbnQtc3R5bGVcIl0mJihLLmZvbnRTdHlsZT1pW1wiZm9udC1zdHlsZVwiXSl9XCJhcnJvdy1zdGFydFwiaW4gaSYmQSh0LGlbXCJhcnJvdy1zdGFydFwiXSksXCJhcnJvdy1lbmRcImluIGkmJkEodCxpW1wiYXJyb3ctZW5kXCJdLDEpO2lmKGkub3BhY2l0eSE9bnVsbHx8aVtcInN0cm9rZS13aWR0aFwiXSE9bnVsbHx8aS5maWxsIT1udWxsfHxpLnNyYyE9bnVsbHx8aS5zdHJva2UhPW51bGx8fGlbXCJzdHJva2Utd2lkdGhcIl0hPW51bGx8fGlbXCJzdHJva2Utb3BhY2l0eVwiXSE9bnVsbHx8aVtcImZpbGwtb3BhY2l0eVwiXSE9bnVsbHx8aVtcInN0cm9rZS1kYXNoYXJyYXlcIl0hPW51bGx8fGlbXCJzdHJva2UtbWl0ZXJsaW1pdFwiXSE9bnVsbHx8aVtcInN0cm9rZS1saW5lam9pblwiXSE9bnVsbHx8aVtcInN0cm9rZS1saW5lY2FwXCJdIT1udWxsKXt2YXIgTD1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKGopLE09ITE7TD1MJiZMWzBdLCFMJiYoTT1MPUYoaikpLGUudHlwZT09XCJpbWFnZVwiJiZpLnNyYyYmKEwuc3JjPWkuc3JjKSxpLmZpbGwmJihMLm9uPSEwKTtpZihMLm9uPT1udWxsfHxpLmZpbGw9PVwibm9uZVwifHxpLmZpbGw9PT1udWxsKUwub249ITE7aWYoTC5vbiYmaS5maWxsKXt2YXIgTj1jKGkuZmlsbCkubWF0Y2goYS5fSVNVUkwpO2lmKE4pe0wucGFyZW50Tm9kZT09bCYmbC5yZW1vdmVDaGlsZChMKSxMLnJvdGF0ZT0hMCxMLnNyYz1OWzFdLEwudHlwZT1cInRpbGVcIjt2YXIgTz1lLmdldEJCb3goMSk7TC5wb3NpdGlvbj1PLngrbitPLnksZS5fLmZpbGxwb3M9W08ueCxPLnldLGEuX3ByZWxvYWQoTlsxXSxmdW5jdGlvbigpe2UuXy5maWxsc2l6ZT1bdGhpcy5vZmZzZXRXaWR0aCx0aGlzLm9mZnNldEhlaWdodF19KX1lbHNlIEwuY29sb3I9YS5nZXRSR0IoaS5maWxsKS5oZXgsTC5zcmM9byxMLnR5cGU9XCJzb2xpZFwiLGEuZ2V0UkdCKGkuZmlsbCkuZXJyb3ImJih0LnR5cGUgaW57Y2lyY2xlOjEsZWxsaXBzZToxfXx8YyhpLmZpbGwpLmNoYXJBdCgpIT1cInJcIikmJkModCxpLmZpbGwsTCkmJihtLmZpbGw9XCJub25lXCIsbS5ncmFkaWVudD1pLmZpbGwsTC5yb3RhdGU9ITEpfWlmKFwiZmlsbC1vcGFjaXR5XCJpbiBpfHxcIm9wYWNpdHlcImluIGkpe3ZhciBQPSgoK21bXCJmaWxsLW9wYWNpdHlcIl0rMXx8MiktMSkqKCgrbS5vcGFjaXR5KzF8fDIpLTEpKigoK2EuZ2V0UkdCKGkuZmlsbCkubysxfHwyKS0xKTtQPWgoZyhQLDApLDEpLEwub3BhY2l0eT1QLEwuc3JjJiYoTC5jb2xvcj1cIm5vbmVcIil9bC5hcHBlbmRDaGlsZChMKTt2YXIgUT1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpJiZsLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpWzBdLFQ9ITE7IVEmJihUPVE9RihcInN0cm9rZVwiKSk7aWYoaS5zdHJva2UmJmkuc3Ryb2tlIT1cIm5vbmVcInx8aVtcInN0cm9rZS13aWR0aFwiXXx8aVtcInN0cm9rZS1vcGFjaXR5XCJdIT1udWxsfHxpW1wic3Ryb2tlLWRhc2hhcnJheVwiXXx8aVtcInN0cm9rZS1taXRlcmxpbWl0XCJdfHxpW1wic3Ryb2tlLWxpbmVqb2luXCJdfHxpW1wic3Ryb2tlLWxpbmVjYXBcIl0pUS5vbj0hMDsoaS5zdHJva2U9PVwibm9uZVwifHxpLnN0cm9rZT09PW51bGx8fFEub249PW51bGx8fGkuc3Ryb2tlPT0wfHxpW1wic3Ryb2tlLXdpZHRoXCJdPT0wKSYmKFEub249ITEpO3ZhciBVPWEuZ2V0UkdCKGkuc3Ryb2tlKTtRLm9uJiZpLnN0cm9rZSYmKFEuY29sb3I9VS5oZXgpLFA9KCgrbVtcInN0cm9rZS1vcGFjaXR5XCJdKzF8fDIpLTEpKigoK20ub3BhY2l0eSsxfHwyKS0xKSooKCtVLm8rMXx8MiktMSk7dmFyIFY9KGQoaVtcInN0cm9rZS13aWR0aFwiXSl8fDEpKi43NTtQPWgoZyhQLDApLDEpLGlbXCJzdHJva2Utd2lkdGhcIl09PW51bGwmJihWPW1bXCJzdHJva2Utd2lkdGhcIl0pLGlbXCJzdHJva2Utd2lkdGhcIl0mJihRLndlaWdodD1WKSxWJiZWPDEmJihQKj1WKSYmKFEud2VpZ2h0PTEpLFEub3BhY2l0eT1QLGlbXCJzdHJva2UtbGluZWpvaW5cIl0mJihRLmpvaW5zdHlsZT1pW1wic3Ryb2tlLWxpbmVqb2luXCJdfHxcIm1pdGVyXCIpLFEubWl0ZXJsaW1pdD1pW1wic3Ryb2tlLW1pdGVybGltaXRcIl18fDgsaVtcInN0cm9rZS1saW5lY2FwXCJdJiYoUS5lbmRjYXA9aVtcInN0cm9rZS1saW5lY2FwXCJdPT1cImJ1dHRcIj9cImZsYXRcIjppW1wic3Ryb2tlLWxpbmVjYXBcIl09PVwic3F1YXJlXCI/XCJzcXVhcmVcIjpcInJvdW5kXCIpO2lmKGlbXCJzdHJva2UtZGFzaGFycmF5XCJdKXt2YXIgVz17XCItXCI6XCJzaG9ydGRhc2hcIixcIi5cIjpcInNob3J0ZG90XCIsXCItLlwiOlwic2hvcnRkYXNoZG90XCIsXCItLi5cIjpcInNob3J0ZGFzaGRvdGRvdFwiLFwiLiBcIjpcImRvdFwiLFwiLSBcIjpcImRhc2hcIixcIi0tXCI6XCJsb25nZGFzaFwiLFwiLSAuXCI6XCJkYXNoZG90XCIsXCItLS5cIjpcImxvbmdkYXNoZG90XCIsXCItLS4uXCI6XCJsb25nZGFzaGRvdGRvdFwifTtRLmRhc2hzdHlsZT1XW2JdKGlbXCJzdHJva2UtZGFzaGFycmF5XCJdKT9XW2lbXCJzdHJva2UtZGFzaGFycmF5XCJdXTpvfVQmJmwuYXBwZW5kQ2hpbGQoUSl9aWYodC50eXBlPT1cInRleHRcIil7dC5wYXBlci5jYW52YXMuc3R5bGUuZGlzcGxheT1vO3ZhciBYPXQucGFwZXIuc3BhbixZPTEwMCxaPW0uZm9udCYmbS5mb250Lm1hdGNoKC9cXGQrKD86XFwuXFxkKik/KD89cHgpLyk7cD1YLnN0eWxlLG0uZm9udCYmKHAuZm9udD1tLmZvbnQpLG1bXCJmb250LWZhbWlseVwiXSYmKHAuZm9udEZhbWlseT1tW1wiZm9udC1mYW1pbHlcIl0pLG1bXCJmb250LXdlaWdodFwiXSYmKHAuZm9udFdlaWdodD1tW1wiZm9udC13ZWlnaHRcIl0pLG1bXCJmb250LXN0eWxlXCJdJiYocC5mb250U3R5bGU9bVtcImZvbnQtc3R5bGVcIl0pLFo9ZChtW1wiZm9udC1zaXplXCJdfHxaJiZaWzBdKXx8MTAscC5mb250U2l6ZT1aKlkrXCJweFwiLHQudGV4dHBhdGguc3RyaW5nJiYoWC5pbm5lckhUTUw9Yyh0LnRleHRwYXRoLnN0cmluZykucmVwbGFjZSgvPC9nLFwiJiM2MDtcIikucmVwbGFjZSgvJi9nLFwiJiMzODtcIikucmVwbGFjZSgvXFxuL2csXCI8YnI+XCIpKTt2YXIgJD1YLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3QuVz1tLnc9KCQucmlnaHQtJC5sZWZ0KS9ZLHQuSD1tLmg9KCQuYm90dG9tLSQudG9wKS9ZLHQuWD1tLngsdC5ZPW0ueSt0LkgvMiwoXCJ4XCJpbiBpfHxcInlcImluIGkpJiYodC5wYXRoLnY9YS5mb3JtYXQoXCJtezB9LHsxfWx7Mn0sezF9XCIsZihtLngqdSksZihtLnkqdSksZihtLngqdSkrMSkpO3ZhciBfPVtcInhcIixcInlcIixcInRleHRcIixcImZvbnRcIixcImZvbnQtZmFtaWx5XCIsXCJmb250LXdlaWdodFwiLFwiZm9udC1zdHlsZVwiLFwiZm9udC1zaXplXCJdO2Zvcih2YXIgYmE9MCxiYj1fLmxlbmd0aDtiYTxiYjtiYSsrKWlmKF9bYmFdaW4gaSl7dC5fLmRpcnR5PTE7YnJlYWt9c3dpdGNoKG1bXCJ0ZXh0LWFuY2hvclwiXSl7Y2FzZVwic3RhcnRcIjp0LnRleHRwYXRoLnN0eWxlW1widi10ZXh0LWFsaWduXCJdPVwibGVmdFwiLHQuYmJ4PXQuVy8yO2JyZWFrO2Nhc2VcImVuZFwiOnQudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQtYWxpZ25cIl09XCJyaWdodFwiLHQuYmJ4PS10LlcvMjticmVhaztkZWZhdWx0OnQudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQtYWxpZ25cIl09XCJjZW50ZXJcIix0LmJieD0wfXQudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQta2VyblwiXT0hMH19LEM9ZnVuY3Rpb24oYixmLGcpe2IuYXR0cnM9Yi5hdHRyc3x8e307dmFyIGg9Yi5hdHRycyxpPU1hdGgucG93LGosayxsPVwibGluZWFyXCIsbT1cIi41IC41XCI7Yi5hdHRycy5ncmFkaWVudD1mLGY9YyhmKS5yZXBsYWNlKGEuX3JhZGlhbF9ncmFkaWVudCxmdW5jdGlvbihhLGIsYyl7bD1cInJhZGlhbFwiLGImJmMmJihiPWQoYiksYz1kKGMpLGkoYi0uNSwyKStpKGMtLjUsMik+LjI1JiYoYz1lLnNxcnQoLjI1LWkoYi0uNSwyKSkqKChjPi41KSoyLTEpKy41KSxtPWIrbitjKTtyZXR1cm4gb30pLGY9Zi5zcGxpdCgvXFxzKlxcLVxccyovKTtpZihsPT1cImxpbmVhclwiKXt2YXIgcD1mLnNoaWZ0KCk7cD0tZChwKTtpZihpc05hTihwKSlyZXR1cm4gbnVsbH12YXIgcT1hLl9wYXJzZURvdHMoZik7aWYoIXEpcmV0dXJuIG51bGw7Yj1iLnNoYXBlfHxiLm5vZGU7aWYocS5sZW5ndGgpe2IucmVtb3ZlQ2hpbGQoZyksZy5vbj0hMCxnLm1ldGhvZD1cIm5vbmVcIixnLmNvbG9yPXFbMF0uY29sb3IsZy5jb2xvcjI9cVtxLmxlbmd0aC0xXS5jb2xvcjt2YXIgcj1bXTtmb3IodmFyIHM9MCx0PXEubGVuZ3RoO3M8dDtzKyspcVtzXS5vZmZzZXQmJnIucHVzaChxW3NdLm9mZnNldCtuK3Fbc10uY29sb3IpO2cuY29sb3JzPXIubGVuZ3RoP3Iuam9pbigpOlwiMCUgXCIrZy5jb2xvcixsPT1cInJhZGlhbFwiPyhnLnR5cGU9XCJncmFkaWVudFRpdGxlXCIsZy5mb2N1cz1cIjEwMCVcIixnLmZvY3Vzc2l6ZT1cIjAgMFwiLGcuZm9jdXNwb3NpdGlvbj1tLGcuYW5nbGU9MCk6KGcudHlwZT1cImdyYWRpZW50XCIsZy5hbmdsZT0oMjcwLXApJTM2MCksYi5hcHBlbmRDaGlsZChnKX1yZXR1cm4gMX0sRD1mdW5jdGlvbihiLGMpe3RoaXNbMF09dGhpcy5ub2RlPWIsYi5yYXBoYWVsPSEwLHRoaXMuaWQ9YS5fb2lkKyssYi5yYXBoYWVsaWQ9dGhpcy5pZCx0aGlzLlg9MCx0aGlzLlk9MCx0aGlzLmF0dHJzPXt9LHRoaXMucGFwZXI9Yyx0aGlzLm1hdHJpeD1hLm1hdHJpeCgpLHRoaXMuXz17dHJhbnNmb3JtOltdLHN4OjEsc3k6MSxkeDowLGR5OjAsZGVnOjAsZGlydHk6MSxkaXJ0eVQ6MX0sIWMuYm90dG9tJiYoYy5ib3R0b209dGhpcyksdGhpcy5wcmV2PWMudG9wLGMudG9wJiYoYy50b3AubmV4dD10aGlzKSxjLnRvcD10aGlzLHRoaXMubmV4dD1udWxsfSxFPWEuZWw7RC5wcm90b3R5cGU9RSxFLmNvbnN0cnVjdG9yPUQsRS50cmFuc2Zvcm09ZnVuY3Rpb24oYil7aWYoYj09bnVsbClyZXR1cm4gdGhpcy5fLnRyYW5zZm9ybTt2YXIgZD10aGlzLnBhcGVyLl92aWV3Qm94U2hpZnQsZT1kP1wic1wiK1tkLnNjYWxlLGQuc2NhbGVdK1wiLTEtMXRcIitbZC5keCxkLmR5XTpvLGY7ZCYmKGY9Yj1jKGIpLnJlcGxhY2UoL1xcLnszfXxcXHUyMDI2L2csdGhpcy5fLnRyYW5zZm9ybXx8bykpLGEuX2V4dHJhY3RUcmFuc2Zvcm0odGhpcyxlK2IpO3ZhciBnPXRoaXMubWF0cml4LmNsb25lKCksaD10aGlzLnNrZXcsaT10aGlzLm5vZGUsaixrPX5jKHRoaXMuYXR0cnMuZmlsbCkuaW5kZXhPZihcIi1cIiksbD0hYyh0aGlzLmF0dHJzLmZpbGwpLmluZGV4T2YoXCJ1cmwoXCIpO2cudHJhbnNsYXRlKC0wLjUsLTAuNSk7aWYobHx8a3x8dGhpcy50eXBlPT1cImltYWdlXCIpe2gubWF0cml4PVwiMSAwIDAgMVwiLGgub2Zmc2V0PVwiMCAwXCIsaj1nLnNwbGl0KCk7aWYoayYmai5ub1JvdGF0aW9ufHwhai5pc1NpbXBsZSl7aS5zdHlsZS5maWx0ZXI9Zy50b0ZpbHRlcigpO3ZhciBtPXRoaXMuZ2V0QkJveCgpLHA9dGhpcy5nZXRCQm94KDEpLHE9bS54LXAueCxyPW0ueS1wLnk7aS5jb29yZG9yaWdpbj1xKi11K24rciotdSx6KHRoaXMsMSwxLHEsciwwKX1lbHNlIGkuc3R5bGUuZmlsdGVyPW8seih0aGlzLGouc2NhbGV4LGouc2NhbGV5LGouZHgsai5keSxqLnJvdGF0ZSl9ZWxzZSBpLnN0eWxlLmZpbHRlcj1vLGgubWF0cml4PWMoZyksaC5vZmZzZXQ9Zy5vZmZzZXQoKTtmJiYodGhpcy5fLnRyYW5zZm9ybT1mKTtyZXR1cm4gdGhpc30sRS5yb3RhdGU9ZnVuY3Rpb24oYSxiLGUpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpcztpZihhIT1udWxsKXthPWMoYSkuc3BsaXQoayksYS5sZW5ndGgtMSYmKGI9ZChhWzFdKSxlPWQoYVsyXSkpLGE9ZChhWzBdKSxlPT1udWxsJiYoYj1lKTtpZihiPT1udWxsfHxlPT1udWxsKXt2YXIgZj10aGlzLmdldEJCb3goMSk7Yj1mLngrZi53aWR0aC8yLGU9Zi55K2YuaGVpZ2h0LzJ9dGhpcy5fLmRpcnR5VD0xLHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJyXCIsYSxiLGVdXSkpO3JldHVybiB0aGlzfX0sRS50cmFuc2xhdGU9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7YT1jKGEpLnNwbGl0KGspLGEubGVuZ3RoLTEmJihiPWQoYVsxXSkpLGE9ZChhWzBdKXx8MCxiPStifHwwLHRoaXMuXy5iYm94JiYodGhpcy5fLmJib3gueCs9YSx0aGlzLl8uYmJveC55Kz1iKSx0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1widFwiLGEsYl1dKSk7cmV0dXJuIHRoaXN9LEUuc2NhbGU9ZnVuY3Rpb24oYSxiLGUsZil7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2E9YyhhKS5zcGxpdChrKSxhLmxlbmd0aC0xJiYoYj1kKGFbMV0pLGU9ZChhWzJdKSxmPWQoYVszXSksaXNOYU4oZSkmJihlPW51bGwpLGlzTmFOKGYpJiYoZj1udWxsKSksYT1kKGFbMF0pLGI9PW51bGwmJihiPWEpLGY9PW51bGwmJihlPWYpO2lmKGU9PW51bGx8fGY9PW51bGwpdmFyIGc9dGhpcy5nZXRCQm94KDEpO2U9ZT09bnVsbD9nLngrZy53aWR0aC8yOmUsZj1mPT1udWxsP2cueStnLmhlaWdodC8yOmYsdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInNcIixhLGIsZSxmXV0pKSx0aGlzLl8uZGlydHlUPTE7cmV0dXJuIHRoaXN9LEUuaGlkZT1mdW5jdGlvbigpeyF0aGlzLnJlbW92ZWQmJih0aGlzLm5vZGUuc3R5bGUuZGlzcGxheT1cIm5vbmVcIik7cmV0dXJuIHRoaXN9LEUuc2hvdz1mdW5jdGlvbigpeyF0aGlzLnJlbW92ZWQmJih0aGlzLm5vZGUuc3R5bGUuZGlzcGxheT1vKTtyZXR1cm4gdGhpc30sRS5fZ2V0QkJveD1mdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm57fTtyZXR1cm57eDp0aGlzLlgrKHRoaXMuYmJ4fHwwKS10aGlzLlcvMix5OnRoaXMuWS10aGlzLkgsd2lkdGg6dGhpcy5XLGhlaWdodDp0aGlzLkh9fSxFLnJlbW92ZT1mdW5jdGlvbigpe2lmKCF0aGlzLnJlbW92ZWQmJiEhdGhpcy5ub2RlLnBhcmVudE5vZGUpe3RoaXMucGFwZXIuX19zZXRfXyYmdGhpcy5wYXBlci5fX3NldF9fLmV4Y2x1ZGUodGhpcyksYS5ldmUudW5iaW5kKFwicmFwaGFlbC4qLiouXCIrdGhpcy5pZCksYS5fdGVhcih0aGlzLHRoaXMucGFwZXIpLHRoaXMubm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMubm9kZSksdGhpcy5zaGFwZSYmdGhpcy5zaGFwZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuc2hhcGUpO2Zvcih2YXIgYiBpbiB0aGlzKXRoaXNbYl09dHlwZW9mIHRoaXNbYl09PVwiZnVuY3Rpb25cIj9hLl9yZW1vdmVkRmFjdG9yeShiKTpudWxsO3RoaXMucmVtb3ZlZD0hMH19LEUuYXR0cj1mdW5jdGlvbihjLGQpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpcztpZihjPT1udWxsKXt2YXIgZT17fTtmb3IodmFyIGYgaW4gdGhpcy5hdHRycyl0aGlzLmF0dHJzW2JdKGYpJiYoZVtmXT10aGlzLmF0dHJzW2ZdKTtlLmdyYWRpZW50JiZlLmZpbGw9PVwibm9uZVwiJiYoZS5maWxsPWUuZ3JhZGllbnQpJiZkZWxldGUgZS5ncmFkaWVudCxlLnRyYW5zZm9ybT10aGlzLl8udHJhbnNmb3JtO3JldHVybiBlfWlmKGQ9PW51bGwmJmEuaXMoYyxcInN0cmluZ1wiKSl7aWYoYz09aiYmdGhpcy5hdHRycy5maWxsPT1cIm5vbmVcIiYmdGhpcy5hdHRycy5ncmFkaWVudClyZXR1cm4gdGhpcy5hdHRycy5ncmFkaWVudDt2YXIgZz1jLnNwbGl0KGspLGg9e307Zm9yKHZhciBpPTAsbT1nLmxlbmd0aDtpPG07aSsrKWM9Z1tpXSxjIGluIHRoaXMuYXR0cnM/aFtjXT10aGlzLmF0dHJzW2NdOmEuaXModGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2NdLFwiZnVuY3Rpb25cIik/aFtjXT10aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbY10uZGVmOmhbY109YS5fYXZhaWxhYmxlQXR0cnNbY107cmV0dXJuIG0tMT9oOmhbZ1swXV19aWYodGhpcy5hdHRycyYmZD09bnVsbCYmYS5pcyhjLFwiYXJyYXlcIikpe2g9e307Zm9yKGk9MCxtPWMubGVuZ3RoO2k8bTtpKyspaFtjW2ldXT10aGlzLmF0dHIoY1tpXSk7cmV0dXJuIGh9dmFyIG47ZCE9bnVsbCYmKG49e30sbltjXT1kKSxkPT1udWxsJiZhLmlzKGMsXCJvYmplY3RcIikmJihuPWMpO2Zvcih2YXIgbyBpbiBuKWwoXCJyYXBoYWVsLmF0dHIuXCIrbytcIi5cIit0aGlzLmlkLHRoaXMsbltvXSk7aWYobil7Zm9yKG8gaW4gdGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzKWlmKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tiXShvKSYmbltiXShvKSYmYS5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbb10sXCJmdW5jdGlvblwiKSl7dmFyIHA9dGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW29dLmFwcGx5KHRoaXMsW10uY29uY2F0KG5bb10pKTt0aGlzLmF0dHJzW29dPW5bb107Zm9yKHZhciBxIGluIHApcFtiXShxKSYmKG5bcV09cFtxXSl9bi50ZXh0JiZ0aGlzLnR5cGU9PVwidGV4dFwiJiYodGhpcy50ZXh0cGF0aC5zdHJpbmc9bi50ZXh0KSxCKHRoaXMsbil9cmV0dXJuIHRoaXN9LEUudG9Gcm9udD1mdW5jdGlvbigpeyF0aGlzLnJlbW92ZWQmJnRoaXMubm9kZS5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMubm9kZSksdGhpcy5wYXBlciYmdGhpcy5wYXBlci50b3AhPXRoaXMmJmEuX3RvZnJvbnQodGhpcyx0aGlzLnBhcGVyKTtyZXR1cm4gdGhpc30sRS50b0JhY2s9ZnVuY3Rpb24oKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7dGhpcy5ub2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCE9dGhpcy5ub2RlJiYodGhpcy5ub2RlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSx0aGlzLm5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkKSxhLl90b2JhY2sodGhpcyx0aGlzLnBhcGVyKSk7cmV0dXJuIHRoaXN9LEUuaW5zZXJ0QWZ0ZXI9ZnVuY3Rpb24oYil7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2IuY29uc3RydWN0b3I9PWEuc3QuY29uc3RydWN0b3ImJihiPWJbYi5sZW5ndGgtMV0pLGIubm9kZS5uZXh0U2libGluZz9iLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGIubm9kZS5uZXh0U2libGluZyk6Yi5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKSxhLl9pbnNlcnRhZnRlcih0aGlzLGIsdGhpcy5wYXBlcik7cmV0dXJuIHRoaXN9LEUuaW5zZXJ0QmVmb3JlPWZ1bmN0aW9uKGIpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpcztiLmNvbnN0cnVjdG9yPT1hLnN0LmNvbnN0cnVjdG9yJiYoYj1iWzBdKSxiLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGIubm9kZSksYS5faW5zZXJ0YmVmb3JlKHRoaXMsYix0aGlzLnBhcGVyKTtyZXR1cm4gdGhpc30sRS5ibHVyPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMubm9kZS5ydW50aW1lU3R5bGUsZD1jLmZpbHRlcjtkPWQucmVwbGFjZShyLG8pLCtiIT09MD8odGhpcy5hdHRycy5ibHVyPWIsYy5maWx0ZXI9ZCtuK20rXCIuQmx1cihwaXhlbHJhZGl1cz1cIisoK2J8fDEuNSkrXCIpXCIsYy5tYXJnaW49YS5mb3JtYXQoXCItezB9cHggMCAwIC17MH1weFwiLGYoK2J8fDEuNSkpKTooYy5maWx0ZXI9ZCxjLm1hcmdpbj0wLGRlbGV0ZSB0aGlzLmF0dHJzLmJsdXIpfSxhLl9lbmdpbmUucGF0aD1mdW5jdGlvbihhLGIpe3ZhciBjPUYoXCJzaGFwZVwiKTtjLnN0eWxlLmNzc1RleHQ9dCxjLmNvb3Jkc2l6ZT11K24rdSxjLmNvb3Jkb3JpZ2luPWIuY29vcmRvcmlnaW47dmFyIGQ9bmV3IEQoYyxiKSxlPXtmaWxsOlwibm9uZVwiLHN0cm9rZTpcIiMwMDBcIn07YSYmKGUucGF0aD1hKSxkLnR5cGU9XCJwYXRoXCIsZC5wYXRoPVtdLGQuUGF0aD1vLEIoZCxlKSxiLmNhbnZhcy5hcHBlbmRDaGlsZChjKTt2YXIgZj1GKFwic2tld1wiKTtmLm9uPSEwLGMuYXBwZW5kQ2hpbGQoZiksZC5za2V3PWYsZC50cmFuc2Zvcm0obyk7cmV0dXJuIGR9LGEuX2VuZ2luZS5yZWN0PWZ1bmN0aW9uKGIsYyxkLGUsZixnKXt2YXIgaD1hLl9yZWN0UGF0aChjLGQsZSxmLGcpLGk9Yi5wYXRoKGgpLGo9aS5hdHRycztpLlg9ai54PWMsaS5ZPWoueT1kLGkuVz1qLndpZHRoPWUsaS5IPWouaGVpZ2h0PWYsai5yPWcsai5wYXRoPWgsaS50eXBlPVwicmVjdFwiO3JldHVybiBpfSxhLl9lbmdpbmUuZWxsaXBzZT1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEucGF0aCgpLGc9Zi5hdHRycztmLlg9Yi1kLGYuWT1jLWUsZi5XPWQqMixmLkg9ZSoyLGYudHlwZT1cImVsbGlwc2VcIixCKGYse2N4OmIsY3k6YyxyeDpkLHJ5OmV9KTtyZXR1cm4gZn0sYS5fZW5naW5lLmNpcmNsZT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1hLnBhdGgoKSxmPWUuYXR0cnM7ZS5YPWItZCxlLlk9Yy1kLGUuVz1lLkg9ZCoyLGUudHlwZT1cImNpcmNsZVwiLEIoZSx7Y3g6YixjeTpjLHI6ZH0pO3JldHVybiBlfSxhLl9lbmdpbmUuaW1hZ2U9ZnVuY3Rpb24oYixjLGQsZSxmLGcpe3ZhciBoPWEuX3JlY3RQYXRoKGQsZSxmLGcpLGk9Yi5wYXRoKGgpLmF0dHIoe3N0cm9rZTpcIm5vbmVcIn0pLGs9aS5hdHRycyxsPWkubm9kZSxtPWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoailbMF07ay5zcmM9YyxpLlg9ay54PWQsaS5ZPWsueT1lLGkuVz1rLndpZHRoPWYsaS5IPWsuaGVpZ2h0PWcsay5wYXRoPWgsaS50eXBlPVwiaW1hZ2VcIixtLnBhcmVudE5vZGU9PWwmJmwucmVtb3ZlQ2hpbGQobSksbS5yb3RhdGU9ITAsbS5zcmM9YyxtLnR5cGU9XCJ0aWxlXCIsaS5fLmZpbGxwb3M9W2QsZV0saS5fLmZpbGxzaXplPVtmLGddLGwuYXBwZW5kQ2hpbGQobSkseihpLDEsMSwwLDAsMCk7cmV0dXJuIGl9LGEuX2VuZ2luZS50ZXh0PWZ1bmN0aW9uKGIsZCxlLGcpe3ZhciBoPUYoXCJzaGFwZVwiKSxpPUYoXCJwYXRoXCIpLGo9RihcInRleHRwYXRoXCIpO2Q9ZHx8MCxlPWV8fDAsZz1nfHxcIlwiLGkudj1hLmZvcm1hdChcIm17MH0sezF9bHsyfSx7MX1cIixmKGQqdSksZihlKnUpLGYoZCp1KSsxKSxpLnRleHRwYXRob2s9ITAsai5zdHJpbmc9YyhnKSxqLm9uPSEwLGguc3R5bGUuY3NzVGV4dD10LGguY29vcmRzaXplPXUrbit1LGguY29vcmRvcmlnaW49XCIwIDBcIjt2YXIgaz1uZXcgRChoLGIpLGw9e2ZpbGw6XCIjMDAwXCIsc3Ryb2tlOlwibm9uZVwiLGZvbnQ6YS5fYXZhaWxhYmxlQXR0cnMuZm9udCx0ZXh0Omd9O2suc2hhcGU9aCxrLnBhdGg9aSxrLnRleHRwYXRoPWosay50eXBlPVwidGV4dFwiLGsuYXR0cnMudGV4dD1jKGcpLGsuYXR0cnMueD1kLGsuYXR0cnMueT1lLGsuYXR0cnMudz0xLGsuYXR0cnMuaD0xLEIoayxsKSxoLmFwcGVuZENoaWxkKGopLGguYXBwZW5kQ2hpbGQoaSksYi5jYW52YXMuYXBwZW5kQ2hpbGQoaCk7dmFyIG09RihcInNrZXdcIik7bS5vbj0hMCxoLmFwcGVuZENoaWxkKG0pLGsuc2tldz1tLGsudHJhbnNmb3JtKG8pO3JldHVybiBrfSxhLl9lbmdpbmUuc2V0U2l6ZT1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuY2FudmFzLnN0eWxlO3RoaXMud2lkdGg9Yix0aGlzLmhlaWdodD1jLGI9PStiJiYoYis9XCJweFwiKSxjPT0rYyYmKGMrPVwicHhcIiksZC53aWR0aD1iLGQuaGVpZ2h0PWMsZC5jbGlwPVwicmVjdCgwIFwiK2IrXCIgXCIrYytcIiAwKVwiLHRoaXMuX3ZpZXdCb3gmJmEuX2VuZ2luZS5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsdGhpcy5fdmlld0JveCk7cmV0dXJuIHRoaXN9LGEuX2VuZ2luZS5zZXRWaWV3Qm94PWZ1bmN0aW9uKGIsYyxkLGUsZil7YS5ldmUoXCJyYXBoYWVsLnNldFZpZXdCb3hcIix0aGlzLHRoaXMuX3ZpZXdCb3gsW2IsYyxkLGUsZl0pO3ZhciBoPXRoaXMud2lkdGgsaT10aGlzLmhlaWdodCxqPTEvZyhkL2gsZS9pKSxrLGw7ZiYmKGs9aS9lLGw9aC9kLGQqazxoJiYoYi09KGgtZCprKS8yL2spLGUqbDxpJiYoYy09KGktZSpsKS8yL2wpKSx0aGlzLl92aWV3Qm94PVtiLGMsZCxlLCEhZl0sdGhpcy5fdmlld0JveFNoaWZ0PXtkeDotYixkeTotYyxzY2FsZTpqfSx0aGlzLmZvckVhY2goZnVuY3Rpb24oYSl7YS50cmFuc2Zvcm0oXCIuLi5cIil9KTtyZXR1cm4gdGhpc307dmFyIEY7YS5fZW5naW5lLmluaXRXaW49ZnVuY3Rpb24oYSl7dmFyIGI9YS5kb2N1bWVudDtiLmNyZWF0ZVN0eWxlU2hlZXQoKS5hZGRSdWxlKFwiLnJ2bWxcIixcImJlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpXCIpO3RyeXshYi5uYW1lc3BhY2VzLnJ2bWwmJmIubmFtZXNwYWNlcy5hZGQoXCJydm1sXCIsXCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiKSxGPWZ1bmN0aW9uKGEpe3JldHVybiBiLmNyZWF0ZUVsZW1lbnQoXCI8cnZtbDpcIithKycgY2xhc3M9XCJydm1sXCI+Jyl9fWNhdGNoKGMpe0Y9ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY3JlYXRlRWxlbWVudChcIjxcIithKycgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQuY29tOnZtbFwiIGNsYXNzPVwicnZtbFwiPicpfX19LGEuX2VuZ2luZS5pbml0V2luKGEuX2cud2luKSxhLl9lbmdpbmUuY3JlYXRlPWZ1bmN0aW9uKCl7dmFyIGI9YS5fZ2V0Q29udGFpbmVyLmFwcGx5KDAsYXJndW1lbnRzKSxjPWIuY29udGFpbmVyLGQ9Yi5oZWlnaHQsZSxmPWIud2lkdGgsZz1iLngsaD1iLnk7aWYoIWMpdGhyb3cgbmV3IEVycm9yKFwiVk1MIGNvbnRhaW5lciBub3QgZm91bmQuXCIpO3ZhciBpPW5ldyBhLl9QYXBlcixqPWkuY2FudmFzPWEuX2cuZG9jLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksaz1qLnN0eWxlO2c9Z3x8MCxoPWh8fDAsZj1mfHw1MTIsZD1kfHwzNDIsaS53aWR0aD1mLGkuaGVpZ2h0PWQsZj09K2YmJihmKz1cInB4XCIpLGQ9PStkJiYoZCs9XCJweFwiKSxpLmNvb3Jkc2l6ZT11KjFlMytuK3UqMWUzLGkuY29vcmRvcmlnaW49XCIwIDBcIixpLnNwYW49YS5fZy5kb2MuY3JlYXRlRWxlbWVudChcInNwYW5cIiksaS5zcGFuLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW07cGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjE7XCIsai5hcHBlbmRDaGlsZChpLnNwYW4pLGsuY3NzVGV4dD1hLmZvcm1hdChcInRvcDowO2xlZnQ6MDt3aWR0aDp7MH07aGVpZ2h0OnsxfTtkaXNwbGF5OmlubGluZS1ibG9jaztwb3NpdGlvbjpyZWxhdGl2ZTtjbGlwOnJlY3QoMCB7MH0gezF9IDApO292ZXJmbG93OmhpZGRlblwiLGYsZCksYz09MT8oYS5fZy5kb2MuYm9keS5hcHBlbmRDaGlsZChqKSxrLmxlZnQ9ZytcInB4XCIsay50b3A9aCtcInB4XCIsay5wb3NpdGlvbj1cImFic29sdXRlXCIpOmMuZmlyc3RDaGlsZD9jLmluc2VydEJlZm9yZShqLGMuZmlyc3RDaGlsZCk6Yy5hcHBlbmRDaGlsZChqKSxpLnJlbmRlcmZpeD1mdW5jdGlvbigpe307cmV0dXJuIGl9LGEucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7YS5ldmUoXCJyYXBoYWVsLmNsZWFyXCIsdGhpcyksdGhpcy5jYW52YXMuaW5uZXJIVE1MPW8sdGhpcy5zcGFuPWEuX2cuZG9jLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuc3Bhbi5zdHlsZS5jc3NUZXh0PVwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotOTk5OWVtO3RvcDotOTk5OWVtO3BhZGRpbmc6MDttYXJnaW46MDtsaW5lLWhlaWdodDoxO2Rpc3BsYXk6aW5saW5lO1wiLHRoaXMuY2FudmFzLmFwcGVuZENoaWxkKHRoaXMuc3BhbiksdGhpcy5ib3R0b209dGhpcy50b3A9bnVsbH0sYS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7YS5ldmUoXCJyYXBoYWVsLnJlbW92ZVwiLHRoaXMpLHRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO2Zvcih2YXIgYiBpbiB0aGlzKXRoaXNbYl09dHlwZW9mIHRoaXNbYl09PVwiZnVuY3Rpb25cIj9hLl9yZW1vdmVkRmFjdG9yeShiKTpudWxsO3JldHVybiEwfTt2YXIgRz1hLnN0O2Zvcih2YXIgSCBpbiBFKUVbYl0oSCkmJiFHW2JdKEgpJiYoR1tIXT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHM7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihjKXtjW2FdLmFwcGx5KGMsYil9KX19KEgpKX0od2luZG93LlJhcGhhZWwpIiwiLyoqXHJcbiAqIEp1c3RHYWdlIC0gYSBoYW5keSBKYXZhU2NyaXB0IHBsdWdpbiBmb3IgZ2VuZXJhdGluZyBhbmQgYW5pbWF0aW5nIG5pY2UgJiBjbGVhbiBkYXNoYm9hcmQgZ2F1Z2VzLlxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgQm9qYW4gRGp1cmljaWMgLSBwaW5kanVyKGF0KWdtYWlsKGRvdCljb20gfCBodHRwOi8vd3d3Lm1hZGNvZy5jb21cclxuICogTGljZW5zZWQgdW5kZXIgTUlULlxyXG4gKiBEYXRlOiAzMS8wNy8yMDEyXHJcbiAqIEBhdXRob3IgQm9qYW4gRGp1cmljaWMgIChAVG9vcnNoaWEpXHJcbiAqIEB2ZXJzaW9uIDEuMFxyXG4gKlxyXG4gKiBodHRwOi8vd3d3Lmp1c3RnYWdlLmNvbVxyXG4gKi9cclxuXHJcbkp1c3RHYWdlID0gZnVuY3Rpb24oY29uZmlnKSB7IFxyXG4gIFxyXG4gIGlmICghY29uZmlnLmlkKSB7YWxlcnQoXCJNaXNzaW5nIGlkIHBhcmFtZXRlciBmb3IgZ2F1Z2UhXCIpOyByZXR1cm4gZmFsc2U7fSBcclxuICBpZiAoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbmZpZy5pZCkpIHthbGVydChcIk5vIGVsZW1lbnQgd2l0aCBpZDogXFxcIlwiK2NvbmZpZy5pZCtcIlxcXCIgZm91bmQhXCIpOyByZXR1cm4gZmFsc2U7fSBcclxuICBcclxuICAvLyBjb25maWd1cmFibGUgcGFyYW1ldGVyc1xyXG4gIHRoaXMuY29uZmlnID0gXHJcbiAge1xyXG4gICAgLy8gaWQgOiBzdHJpbmcgXHJcbiAgICAvLyB0aGlzIGlzIGNvbnRhaW5lciBlbGVtZW50IGlkXHJcbiAgICBpZCA6IGNvbmZpZy5pZCxcclxuICAgIFxyXG4gICAgLy8gdGl0bGUgOiBzdHJpbmdcclxuICAgIC8vIGdhdWdlIHRpdGxlIFxyXG4gICAgdGl0bGUgOiAoY29uZmlnLnRpdGxlKSA/IGNvbmZpZy50aXRsZSA6IFwiVGl0bGVcIixcclxuICAgIFxyXG4gICAgLy8gdGl0bGVGb250Q29sb3IgOiBzdHJpbmdcclxuICAgIC8vIGNvbG9yIG9mIGdhdWdlIHRpdGxlIFxyXG4gICAgdGl0bGVGb250Q29sb3IgOiAoY29uZmlnLnRpdGxlRm9udENvbG9yKSA/IGNvbmZpZy50aXRsZUZvbnRDb2xvciA6IFwiIzk5OTk5OVwiLFxyXG4gICAgXHJcbiAgICAvLyB2YWx1ZSA6IGludFxyXG4gICAgLy8gdmFsdWUgZ2F1Z2UgaXMgc2hvd2luZyBcclxuICAgIHZhbHVlIDogKGNvbmZpZy52YWx1ZSkgPyBjb25maWcudmFsdWUgOiAwLFxyXG4gICAgXHJcbiAgICAvLyB2YWx1ZUZvbnRDb2xvciA6IHN0cmluZ1xyXG4gICAgLy8gY29sb3Igb2YgbGFiZWwgc2hvd2luZyBjdXJyZW50IHZhbHVlXHJcbiAgICB2YWx1ZUZvbnRDb2xvciA6IChjb25maWcudmFsdWVGb250Q29sb3IpID8gY29uZmlnLnZhbHVlRm9udENvbG9yIDogXCIjMDEwMTAxXCIsXHJcbiAgICBcclxuICAgIC8vIG1pbiA6IGludFxyXG4gICAgLy8gbWluIHZhbHVlXHJcbiAgICBtaW4gOiAoY29uZmlnLm1pbikgPyBjb25maWcubWluIDogMCxcclxuICAgIFxyXG4gICAgLy8gbWF4IDogaW50XHJcbiAgICAvLyBtYXggdmFsdWVcclxuICAgIG1heCA6IChjb25maWcubWF4KSA/IGNvbmZpZy5tYXggOiAxMDAsXHJcbiAgICBcclxuICAgIC8vIHNob3dNaW5NYXggOiBib29sXHJcbiAgICAvLyBoaWRlIG9yIGRpc3BsYXkgbWluIGFuZCBtYXggdmFsdWVzXHJcbiAgICBzaG93TWluTWF4IDogKGNvbmZpZy5zaG93TWluTWF4ICE9IG51bGwpID8gY29uZmlnLnNob3dNaW5NYXggOiB0cnVlLFxyXG4gICAgXHJcbiAgICAvLyBnYXVnZVdpZHRoU2NhbGUgOiBmbG9hdFxyXG4gICAgLy8gd2lkdGggb2YgdGhlIGdhdWdlIGVsZW1lbnRcclxuICAgIGdhdWdlV2lkdGhTY2FsZSA6IChjb25maWcuZ2F1Z2VXaWR0aFNjYWxlKSA/IGNvbmZpZy5nYXVnZVdpZHRoU2NhbGUgOiAxLjAsXHJcbiAgICBcclxuICAgIC8vIGdhdWdlQ29sb3IgOiBzdHJpbmdcclxuICAgIC8vIGJhY2tncm91bmQgY29sb3Igb2YgZ2F1Z2UgZWxlbWVudCBcclxuICAgIGdhdWdlQ29sb3IgOiAoY29uZmlnLmdhdWdlQ29sb3IpID8gY29uZmlnLmdhdWdlQ29sb3IgOiBcIiNlZGViZWJcIixcclxuICAgIFxyXG4gICAgLy8gbGFiZWwgOiBzdHJpbmdcclxuICAgIC8vIHRleHQgdG8gc2hvdyBiZWxvdyB2YWx1ZVxyXG4gICAgbGFiZWwgOiAoY29uZmlnLmxhYmVsKSA/IGNvbmZpZy5sYWJlbCA6IFwiXCIsXHJcbiAgICBcclxuICAgIC8vIHNob3dJbm5lclNoYWRvdyA6IGJvb2xcclxuICAgIC8vIGdpdmUgZ2F1Z2UgZWxlbWVudCBzbWFsbCBhbW91bnQgb2YgaW5uZXIgc2hhZG93IFxyXG4gICAgc2hvd0lubmVyU2hhZG93IDogKGNvbmZpZy5zaG93SW5uZXJTaGFkb3cgIT0gbnVsbCkgPyBjb25maWcuc2hvd0lubmVyU2hhZG93IDogdHJ1ZSxcclxuICAgIFxyXG4gICAgLy8gc2hhZG93T3BhY2l0eSA6IGludFxyXG4gICAgLy8gMCB+IDFcclxuICAgIHNoYWRvd09wYWNpdHkgOiAoY29uZmlnLnNoYWRvd09wYWNpdHkpID8gY29uZmlnLnNoYWRvd09wYWNpdHkgOiAwLjIsXHJcbiAgICBcclxuICAgIC8vIHNoYWRvd1NpemU6IGludFxyXG4gICAgLy8gaW5uZXIgc2hhZG93IHNpemVcclxuICAgIHNoYWRvd1NpemUgOiAoY29uZmlnLnNoYWRvd1NpemUpID8gY29uZmlnLnNoYWRvd1NpemUgOiA1LFxyXG4gICAgXHJcbiAgICAvLyBzaGFkb3dWZXJ0aWNhbE9mZnNldCA6IGludFxyXG4gICAgLy8gaG93IG11Y2ggc2hhZG93IGlzIG9mZnNldCBmcm9tIHRvcCBcclxuICAgIHNoYWRvd1ZlcnRpY2FsT2Zmc2V0IDogKGNvbmZpZy5zaGFkb3dWZXJ0aWNhbE9mZnNldCkgPyBjb25maWcuc2hhZG93VmVydGljYWxPZmZzZXQgOiAzLFxyXG4gICAgXHJcbiAgICAvLyBsZXZlbENvbG9ycyA6IHN0cmluZ1tdXHJcbiAgICAvLyBjb2xvcnMgb2YgaW5kaWNhdG9yLCBmcm9tIGxvd2VyIHRvIHVwcGVyLCBpbiBSR0IgZm9ybWF0IFxyXG4gICAgbGV2ZWxDb2xvcnMgOiAoY29uZmlnLmxldmVsQ29sb3JzKSA/IGNvbmZpZy5sZXZlbENvbG9ycyA6IHBlcmNlbnRDb2xvcnMsXHJcbiAgICBcclxuICAgIC8vIGxldmVsQ29sb3JzR3JhZGllbnQgOiBib29sXHJcbiAgICAvLyB3aGV0aGVyIHRvIHVzZSBncmFkdWFsIGNvbG9yIGNoYW5nZSBmb3IgdmFsdWUsIG9yIHNlY3Rvci1iYXNlZFxyXG4gICAgbGV2ZWxDb2xvcnNHcmFkaWVudCA6IChjb25maWcubGV2ZWxDb2xvcnNHcmFkaWVudCAhPSBudWxsKSA/IGNvbmZpZy5sZXZlbENvbG9yc0dyYWRpZW50IDogdHJ1ZSxcclxuICAgIFxyXG4gICAgLy8gbGFiZWxGb250Q29sb3IgOiBzdHJpbmdcclxuICAgIC8vIGNvbG9yIG9mIGxhYmVsIHNob3dpbmcgbGFiZWwgdW5kZXIgdmFsdWVcclxuICAgIGxhYmVsRm9udENvbG9yIDogKGNvbmZpZy5sYWJlbEZvbnRDb2xvcikgPyBjb25maWcubGFiZWxGb250Q29sb3IgOiBcIiNiM2IzYjNcIixcclxuICAgIFxyXG4gICAgLy8gc3RhcnRBbmltYXRpb25UaW1lIDogaW50XHJcbiAgICAvLyBsZW5ndGggb2YgaW5pdGlhbCBhbmltYXRpb24gXHJcbiAgICBzdGFydEFuaW1hdGlvblRpbWUgOiAoY29uZmlnLnN0YXJ0QW5pbWF0aW9uVGltZSkgPyBjb25maWcuc3RhcnRBbmltYXRpb25UaW1lIDogNzAwLFxyXG4gICAgXHJcbiAgICAvLyBzdGFydEFuaW1hdGlvblR5cGUgOiBzdHJpbmdcclxuICAgIC8vIHR5cGUgb2YgaW5pdGlhbCBhbmltYXRpb24gKGxpbmVhciwgPiwgPCwgIDw+LCBib3VuY2UpIFxyXG4gICAgc3RhcnRBbmltYXRpb25UeXBlIDogKGNvbmZpZy5zdGFydEFuaW1hdGlvblR5cGUpID8gY29uZmlnLnN0YXJ0QW5pbWF0aW9uVHlwZSA6IFwiPlwiLFxyXG4gICAgXHJcbiAgICAvLyByZWZyZXNoQW5pbWF0aW9uVGltZSA6IGludFxyXG4gICAgLy8gbGVuZ3RoIG9mIHJlZnJlc2ggYW5pbWF0aW9uIFxyXG4gICAgcmVmcmVzaEFuaW1hdGlvblRpbWUgOiAoY29uZmlnLnJlZnJlc2hBbmltYXRpb25UaW1lKSA/IGNvbmZpZy5yZWZyZXNoQW5pbWF0aW9uVGltZSA6IDcwMCxcclxuICAgIFxyXG4gICAgLy8gcmVmcmVzaEFuaW1hdGlvblR5cGUgOiBzdHJpbmdcclxuICAgIC8vIHR5cGUgb2YgcmVmcmVzaCBhbmltYXRpb24gKGxpbmVhciwgPiwgPCwgIDw+LCBib3VuY2UpIFxyXG4gICAgcmVmcmVzaEFuaW1hdGlvblR5cGUgOiAoY29uZmlnLnJlZnJlc2hBbmltYXRpb25UeXBlKSA/IGNvbmZpZy5yZWZyZXNoQW5pbWF0aW9uVHlwZSA6IFwiPlwiXHJcbiAgfTtcclxuICBcclxuICAvLyBvdmVyZmxvdyB2YWx1ZXNcclxuICBpZiAoY29uZmlnLnZhbHVlID4gdGhpcy5jb25maWcubWF4KSB0aGlzLmNvbmZpZy52YWx1ZSA9IHRoaXMuY29uZmlnLm1heDsgXHJcbiAgaWYgKGNvbmZpZy52YWx1ZSA8IHRoaXMuY29uZmlnLm1pbikgdGhpcy5jb25maWcudmFsdWUgPSB0aGlzLmNvbmZpZy5taW47XHJcbiAgdGhpcy5vcmlnaW5hbFZhbHVlID0gY29uZmlnLnZhbHVlO1xyXG4gIFxyXG4gIC8vIGNhbnZhc1xyXG4gIHRoaXMuY2FudmFzID0gUmFwaGFlbCh0aGlzLmNvbmZpZy5pZCwgXCIxMDAlXCIsIFwiMTAwJVwiKTtcclxuICBcclxuICAvLyBjYW52YXMgZGltZW5zaW9uc1xyXG4gIC8vdmFyIGNhbnZhc1cgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5pZCkuY2xpZW50V2lkdGg7XHJcbiAgLy92YXIgY2FudmFzSCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmlkKS5jbGllbnRIZWlnaHQ7XHJcbiAgdmFyIGNhbnZhc1cgPSBnZXRTdHlsZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNvbmZpZy5pZCksIFwid2lkdGhcIikuc2xpY2UoMCwgLTIpICogMTtcclxuICB2YXIgY2FudmFzSCA9IGdldFN0eWxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmlkKSwgXCJoZWlnaHRcIikuc2xpY2UoMCwgLTIpICogMTtcclxuICBcclxuICAvLyB3aWRnZXQgZGltZW5zaW9uc1xyXG4gIHZhciB3aWRnZXRXLCB3aWRnZXRIO1xyXG4gIGlmICgoY2FudmFzVyAvIGNhbnZhc0gpID4gMS4yNSkge1xyXG4gICAgd2lkZ2V0VyA9IDEuMjUgKiBjYW52YXNIO1xyXG4gICAgd2lkZ2V0SCA9IGNhbnZhc0g7XHJcbiAgfSBlbHNlIHtcclxuICAgIHdpZGdldFcgPSBjYW52YXNXO1xyXG4gICAgd2lkZ2V0SCA9IGNhbnZhc1cgLyAxLjI1O1xyXG4gIH1cclxuICBcclxuICAvLyBkZWx0YSBcclxuICB2YXIgZHggPSAoY2FudmFzVyAtIHdpZGdldFcpLzI7XHJcbiAgdmFyIGR5ID0gKGNhbnZhc0ggLSB3aWRnZXRIKS8yO1xyXG4gIFxyXG4gIC8vIHRpdGxlIFxyXG4gIHZhciB0aXRsZUZvbnRTaXplID0gKCh3aWRnZXRIIC8gOCkgPiAxMCkgPyAod2lkZ2V0SCAvIDEwKSA6IDEwO1xyXG4gIHZhciB0aXRsZVggPSBkeCArIHdpZGdldFcgLyAyO1xyXG4gIHZhciB0aXRsZVkgPSBkeSArIHdpZGdldEggLyA5O1xyXG4gIFxyXG4gIC8vIHZhbHVlIFxyXG4gIHZhciB2YWx1ZUZvbnRTaXplID0gKCh3aWRnZXRIIC8gNi40KSA+IDE2KSA/ICh3aWRnZXRIIC8gNi40KSA6IDE2O1xyXG4gIHZhciB2YWx1ZVggPSBkeCArIHdpZGdldFcgLyAyO1xyXG4gIHZhciB2YWx1ZVkgPSBkeSArIHdpZGdldEggLyAxLjQ7XHJcbiAgXHJcbiAgLy8gbGFiZWwgXHJcbiAgdmFyIGxhYmVsRm9udFNpemUgPSAoKHdpZGdldEggLyAxNikgPiAxMCkgPyAod2lkZ2V0SCAvIDE2KSA6IDEwO1xyXG4gIHZhciBsYWJlbFggPSBkeCArIHdpZGdldFcgLyAyO1xyXG4gIC8vdmFyIGxhYmVsWSA9IGR5ICsgd2lkZ2V0SCAvIDEuMTI2NzYwNTYzMzgwMjgyO1xyXG4gIHZhciBsYWJlbFkgPSB2YWx1ZVkgKyB2YWx1ZUZvbnRTaXplIC8gMiArIDY7XHJcbiAgXHJcbiAgLy8gbWluIFxyXG4gIHZhciBtaW5Gb250U2l6ZSA9ICgod2lkZ2V0SCAvIDE2KSA+IDEwKSA/ICh3aWRnZXRIIC8gMTYpIDogMTA7XHJcbiAgdmFyIG1pblggPSBkeCArICh3aWRnZXRXIC8gMTApICsgKHdpZGdldFcgLyA2LjY2NjY2NjY2NjY2NjY2NyAqIHRoaXMuY29uZmlnLmdhdWdlV2lkdGhTY2FsZSkgLyAyIDtcclxuICB2YXIgbWluWSA9IGR5ICsgd2lkZ2V0SCAvIDEuMTI2NzYwNTYzMzgwMjgyO1xyXG4gIFxyXG4gIC8vIG1heCBcclxuICB2YXIgbWF4Rm9udFNpemUgPSAoKHdpZGdldEggLyAxNikgPiAxMCkgPyAod2lkZ2V0SCAvIDE2KSA6IDEwO1xyXG4gIHZhciBtYXhYID0gZHggKyB3aWRnZXRXIC0gKHdpZGdldFcgLyAxMCkgLSAod2lkZ2V0VyAvIDYuNjY2NjY2NjY2NjY2NjY3ICogdGhpcy5jb25maWcuZ2F1Z2VXaWR0aFNjYWxlKSAvIDIgO1xyXG4gIHZhciBtYXhZID0gZHkgKyB3aWRnZXRIIC8gMS4xMjY3NjA1NjMzODAyODI7XHJcbiAgXHJcbiAgLy8gcGFyYW1ldGVyc1xyXG4gIHRoaXMucGFyYW1zICA9IHtcclxuICAgIGNhbnZhc1cgOiBjYW52YXNXLFxyXG4gICAgY2FudmFzSCA6IGNhbnZhc0gsXHJcbiAgICB3aWRnZXRXIDogd2lkZ2V0VyxcclxuICAgIHdpZGdldEggOiB3aWRnZXRILFxyXG4gICAgZHggOiBkeCxcclxuICAgIGR5IDogZHksXHJcbiAgICB0aXRsZUZvbnRTaXplIDogdGl0bGVGb250U2l6ZSxcclxuICAgIHRpdGxlWCA6IHRpdGxlWCxcclxuICAgIHRpdGxlWSA6IHRpdGxlWSxcclxuICAgIHZhbHVlRm9udFNpemUgOiB2YWx1ZUZvbnRTaXplLFxyXG4gICAgdmFsdWVYIDogdmFsdWVYLFxyXG4gICAgdmFsdWVZIDogdmFsdWVZLFxyXG4gICAgbGFiZWxGb250U2l6ZSA6IGxhYmVsRm9udFNpemUsXHJcbiAgICBsYWJlbFggOiBsYWJlbFgsXHJcbiAgICBsYWJlbFkgOiBsYWJlbFksXHJcbiAgICBtaW5Gb250U2l6ZSA6IG1pbkZvbnRTaXplLFxyXG4gICAgbWluWCA6IG1pblgsXHJcbiAgICBtaW5ZIDogbWluWSxcclxuICAgIG1heEZvbnRTaXplIDogbWF4Rm9udFNpemUsXHJcbiAgICBtYXhYIDogbWF4WCxcclxuICAgIG1heFkgOiBtYXhZXHJcbiAgfTtcclxuICBcclxuICAvLyBwa2kgLSBjdXN0b20gYXR0cmlidXRlIGZvciBnZW5lcmF0aW5nIGdhdWdlIHBhdGhzXHJcbiAgdGhpcy5jYW52YXMuY3VzdG9tQXR0cmlidXRlcy5wa2kgPSBmdW5jdGlvbiAodmFsdWUsIG1pbiwgbWF4LCB3LCBoLCBkeCwgZHksIGd3cykge1xyXG4gICAgXHJcbiAgICAgICB2YXIgYWxwaGEgPSAoMSAtICh2YWx1ZSAtIG1pbikgLyAobWF4IC0gbWluKSkgKiBNYXRoLlBJICxcclxuICAgICAgICAgIFJvID0gdyAvIDIgLSB3IC8gMTAsXHJcbiAgICAgICAgICBSaSA9IFJvIC0gdyAvIDYuNjY2NjY2NjY2NjY2NjY3ICogZ3dzLFxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBDeCA9IHcgLyAyICsgZHgsXHJcbiAgICAgICAgICBDeSA9IGggLyAxLjI1ICsgZHksXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIFhvID0gdyAvIDIgKyBkeCArIFJvICogTWF0aC5jb3MoYWxwaGEpLFxyXG4gICAgICAgICAgWW8gPSBoIC0gKGggLSBDeSkgKyBkeSAtIFJvICogTWF0aC5zaW4oYWxwaGEpLFxyXG4gICAgICAgICAgWGkgPSB3IC8gMiArIGR4ICsgUmkgKiBNYXRoLmNvcyhhbHBoYSksXHJcbiAgICAgICAgICBZaSA9IGggLSAoaCAtIEN5KSArIGR5IC0gUmkgKiBNYXRoLnNpbihhbHBoYSksXHJcbiAgICAgICAgICBwYXRoO1xyXG4gICAgXHJcbiAgICAgIHBhdGggKz0gXCJNXCIgKyAoQ3ggLSBSaSkgKyBcIixcIiArIEN5ICsgXCIgXCI7XHJcbiAgICAgIHBhdGggKz0gXCJMXCIgKyAoQ3ggLSBSbykgKyBcIixcIiArIEN5ICsgXCIgXCI7XHJcbiAgICAgIHBhdGggKz0gXCJBXCIgKyBSbyArIFwiLFwiICsgUm8gKyBcIiAwIDAsMSBcIiArIFhvICsgXCIsXCIgKyBZbyArIFwiIFwiO1xyXG4gICAgICBwYXRoICs9IFwiTFwiICsgWGkgKyBcIixcIiArIFlpICsgXCIgXCI7XHJcbiAgICAgIHBhdGggKz0gXCJBXCIgKyBSaSArIFwiLFwiICsgUmkgKyBcIiAwIDAsMCBcIiArIChDeCAtIFJpKSArIFwiLFwiICsgQ3kgKyBcIiBcIjtcclxuICAgICAgcGF0aCArPSBcInogXCI7XHJcbiAgICAgIHJldHVybiB7IHBhdGg6IHBhdGggfTtcclxuICB9ICBcclxuICBcclxuICAvLyBnYXVnZVxyXG4gIHRoaXMuZ2F1Z2UgPSB0aGlzLmNhbnZhcy5wYXRoKCkuYXR0cih7XHJcbiAgICBcInN0cm9rZVwiOiBcIm5vbmVcIixcclxuICAgIFwiZmlsbFwiOiB0aGlzLmNvbmZpZy5nYXVnZUNvbG9yLCAgIFxyXG4gICAgcGtpOiBbdGhpcy5jb25maWcubWF4LCB0aGlzLmNvbmZpZy5taW4sIHRoaXMuY29uZmlnLm1heCwgdGhpcy5wYXJhbXMud2lkZ2V0VywgdGhpcy5wYXJhbXMud2lkZ2V0SCwgIHRoaXMucGFyYW1zLmR4LCB0aGlzLnBhcmFtcy5keSwgdGhpcy5jb25maWcuZ2F1Z2VXaWR0aFNjYWxlXVxyXG4gIH0pO1xyXG4gIHRoaXMuZ2F1Z2UuaWQgPSB0aGlzLmNvbmZpZy5pZCtcIi1nYXVnZVwiO1xyXG4gIFxyXG4gIC8vIGxldmVsXHJcbiAgdGhpcy5sZXZlbCA9IHRoaXMuY2FudmFzLnBhdGgoKS5hdHRyKHtcclxuICAgIFwic3Ryb2tlXCI6IFwibm9uZVwiLFxyXG4gICAgXCJmaWxsXCI6IGdldENvbG9yRm9yUGVyY2VudGFnZSgodGhpcy5jb25maWcudmFsdWUgLSB0aGlzLmNvbmZpZy5taW4pIC8gKHRoaXMuY29uZmlnLm1heCAtIHRoaXMuY29uZmlnLm1pbiksIHRoaXMuY29uZmlnLmxldmVsQ29sb3JzLCB0aGlzLmNvbmZpZy5sZXZlbENvbG9yc0dyYWRpZW50KSwgIFxyXG4gICAgcGtpOiBbdGhpcy5jb25maWcubWluLCB0aGlzLmNvbmZpZy5taW4sIHRoaXMuY29uZmlnLm1heCwgdGhpcy5wYXJhbXMud2lkZ2V0VywgdGhpcy5wYXJhbXMud2lkZ2V0SCwgIHRoaXMucGFyYW1zLmR4LCB0aGlzLnBhcmFtcy5keSwgdGhpcy5jb25maWcuZ2F1Z2VXaWR0aFNjYWxlXVxyXG4gIH0pO1xyXG4gIHRoaXMubGV2ZWwuaWQgPSB0aGlzLmNvbmZpZy5pZCtcIi1sZXZlbFwiO1xyXG4gIFxyXG4gIC8vIHRpdGxlXHJcbiAgdGhpcy50eHRUaXRsZSA9IHRoaXMuY2FudmFzLnRleHQodGhpcy5wYXJhbXMudGl0bGVYLCB0aGlzLnBhcmFtcy50aXRsZVksIHRoaXMuY29uZmlnLnRpdGxlKTtcclxuICB0aGlzLnR4dFRpdGxlLiBhdHRyKHtcclxuICAgIFwiZm9udC1zaXplXCI6dGhpcy5wYXJhbXMudGl0bGVGb250U2l6ZSxcclxuICAgIFwiZm9udC13ZWlnaHRcIjpcImJvbGRcIixcclxuICAgIFwiZm9udC1mYW1pbHlcIjpcIkFyaWFsXCIsXHJcbiAgICBcImZpbGxcIjp0aGlzLmNvbmZpZy50aXRsZUZvbnRDb2xvcixcclxuICAgIFwiZmlsbC1vcGFjaXR5XCI6XCIxXCIgICAgICAgICBcclxuICB9KTtcclxuICB0aGlzLnR4dFRpdGxlLmlkID0gdGhpcy5jb25maWcuaWQrXCItdHh0dGl0bGVcIjtcclxuICBcclxuICAvLyB2YWx1ZVxyXG4gIHRoaXMudHh0VmFsdWUgPSB0aGlzLmNhbnZhcy50ZXh0KHRoaXMucGFyYW1zLnZhbHVlWCwgdGhpcy5wYXJhbXMudmFsdWVZLCB0aGlzLm9yaWdpbmFsVmFsdWUpO1xyXG4gIHRoaXMudHh0VmFsdWUuIGF0dHIoe1xyXG4gICAgXCJmb250LXNpemVcIjp0aGlzLnBhcmFtcy52YWx1ZUZvbnRTaXplLFxyXG4gICAgXCJmb250LXdlaWdodFwiOlwiYm9sZFwiLFxyXG4gICAgXCJmb250LWZhbWlseVwiOlwiQXJpYWxcIixcclxuICAgIFwiZmlsbFwiOnRoaXMuY29uZmlnLnZhbHVlRm9udENvbG9yLFxyXG4gICAgXCJmaWxsLW9wYWNpdHlcIjpcIjBcIiAgICAgICAgICBcclxuICB9KTtcclxuICB0aGlzLnR4dFZhbHVlLmlkID0gdGhpcy5jb25maWcuaWQrXCItdHh0dmFsdWVcIjtcclxuICBcclxuICAvLyBsYWJlbFxyXG4gIHRoaXMudHh0TGFiZWwgPSB0aGlzLmNhbnZhcy50ZXh0KHRoaXMucGFyYW1zLmxhYmVsWCwgdGhpcy5wYXJhbXMubGFiZWxZLCB0aGlzLmNvbmZpZy5sYWJlbCk7XHJcbiAgdGhpcy50eHRMYWJlbC4gYXR0cih7XHJcbiAgICBcImZvbnQtc2l6ZVwiOnRoaXMucGFyYW1zLmxhYmVsRm9udFNpemUsXHJcbiAgICBcImZvbnQtd2VpZ2h0XCI6XCJub3JtYWxcIixcclxuICAgIFwiZm9udC1mYW1pbHlcIjpcIkFyaWFsXCIsXHJcbiAgICBcImZpbGxcIjp0aGlzLmNvbmZpZy5sYWJlbEZvbnRDb2xvciwgICBcclxuICAgIFwiZmlsbC1vcGFjaXR5XCI6XCIwXCJcclxuICB9KTtcclxuICB0aGlzLnR4dExhYmVsLmlkID0gdGhpcy5jb25maWcuaWQrXCItdHh0bGFiZWxcIjtcclxuICBcclxuICAvLyBtaW5cclxuICB0aGlzLnR4dE1pbiA9IHRoaXMuY2FudmFzLnRleHQodGhpcy5wYXJhbXMubWluWCwgdGhpcy5wYXJhbXMubWluWSwgdGhpcy5jb25maWcubWluKTtcclxuICB0aGlzLnR4dE1pbi4gYXR0cih7XHJcbiAgICBcImZvbnQtc2l6ZVwiOnRoaXMucGFyYW1zLm1pbkZvbnRTaXplLFxyXG4gICAgXCJmb250LXdlaWdodFwiOlwibm9ybWFsXCIsXHJcbiAgICBcImZvbnQtZmFtaWx5XCI6XCJBcmlhbFwiLFxyXG4gICAgXCJmaWxsXCI6dGhpcy5jb25maWcubGFiZWxGb250Q29sb3IsICAgXHJcbiAgICBcImZpbGwtb3BhY2l0eVwiOiAodGhpcy5jb25maWcuc2hvd01pbk1heCA9PSB0cnVlKT8gXCIxXCIgOiBcIjBcIlxyXG4gIH0pO1xyXG4gIHRoaXMudHh0TWluLmlkID0gdGhpcy5jb25maWcuaWQrXCItdHh0bWluXCI7XHJcbiAgXHJcbiAgLy8gbWF4XHJcbiAgdGhpcy50eHRNYXggPSB0aGlzLmNhbnZhcy50ZXh0KHRoaXMucGFyYW1zLm1heFgsIHRoaXMucGFyYW1zLm1heFksIHRoaXMuY29uZmlnLm1heCk7XHJcbiAgdGhpcy50eHRNYXguIGF0dHIoe1xyXG4gICAgXCJmb250LXNpemVcIjp0aGlzLnBhcmFtcy5tYXhGb250U2l6ZSxcclxuICAgIFwiZm9udC13ZWlnaHRcIjpcIm5vcm1hbFwiLFxyXG4gICAgXCJmb250LWZhbWlseVwiOlwiQXJpYWxcIixcclxuICAgIFwiZmlsbFwiOnRoaXMuY29uZmlnLmxhYmVsRm9udENvbG9yLCAgIFxyXG4gICAgXCJmaWxsLW9wYWNpdHlcIjogKHRoaXMuY29uZmlnLnNob3dNaW5NYXggPT0gdHJ1ZSk/IFwiMVwiIDogXCIwXCJcclxuICB9KTtcclxuICB0aGlzLnR4dE1heC5pZCA9IHRoaXMuY29uZmlnLmlkK1wiLXR4dG1heFwiO1xyXG4gIFxyXG4gIHZhciBkZWZzID0gdGhpcy5jYW52YXMuY2FudmFzLmNoaWxkTm9kZXNbMV07XHJcbiAgdmFyIHN2ZyA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIjtcclxuICBcclxuICBcclxuICBcclxuICBpZiAoaWUgPCA5KSB7XHJcbiAgICBvbkNyZWF0ZUVsZW1lbnROc1JlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aGlzLmdlbmVyYXRlU2hhZG93KCk7XHJcbiAgICB9KTsgIFxyXG4gIH0gZWxzZSB7XHJcbiAgICB0aGlzLmdlbmVyYXRlU2hhZG93KHN2ZywgZGVmcyk7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIGFuaW1hdGUgXHJcbiAgdGhpcy5sZXZlbC5hbmltYXRlKHtwa2k6IFt0aGlzLmNvbmZpZy52YWx1ZSwgdGhpcy5jb25maWcubWluLCB0aGlzLmNvbmZpZy5tYXgsIHRoaXMucGFyYW1zLndpZGdldFcsIHRoaXMucGFyYW1zLndpZGdldEgsICB0aGlzLnBhcmFtcy5keCwgdGhpcy5wYXJhbXMuZHksIHRoaXMuY29uZmlnLmdhdWdlV2lkdGhTY2FsZV19LCAgdGhpcy5jb25maWcuc3RhcnRBbmltYXRpb25UaW1lLCB0aGlzLmNvbmZpZy5zdGFydEFuaW1hdGlvblR5cGUpO1xyXG4gIFxyXG4gIHRoaXMudHh0VmFsdWUuYW5pbWF0ZSh7XCJmaWxsLW9wYWNpdHlcIjpcIjFcIn0sIHRoaXMuY29uZmlnLnN0YXJ0QW5pbWF0aW9uVGltZSwgdGhpcy5jb25maWcuc3RhcnRBbmltYXRpb25UeXBlKTsgXHJcbiAgdGhpcy50eHRMYWJlbC5hbmltYXRlKHtcImZpbGwtb3BhY2l0eVwiOlwiMVwifSwgdGhpcy5jb25maWcuc3RhcnRBbmltYXRpb25UaW1lLCB0aGlzLmNvbmZpZy5zdGFydEFuaW1hdGlvblR5cGUpOyAgXHJcbn07XHJcblxyXG4vLyByZWZyZXNoIGdhdWdlIGxldmVsXHJcbkp1c3RHYWdlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgLy8gb3ZlcmZsb3cgdmFsdWVzXHJcbiAgb3JpZ2luYWxWYWwgPSB2YWw7XHJcbiAgaWYgKHZhbCA+IHRoaXMuY29uZmlnLm1heCkge3ZhbCA9IHRoaXMuY29uZmlnLm1heDt9XHJcbiAgaWYgKHZhbCA8IHRoaXMuY29uZmlnLm1pbikge3ZhbCA9IHRoaXMuY29uZmlnLm1pbjt9XHJcbiAgICBcclxuICB2YXIgY29sb3IgPSBnZXRDb2xvckZvclBlcmNlbnRhZ2UoKHZhbCAtIHRoaXMuY29uZmlnLm1pbikgLyAodGhpcy5jb25maWcubWF4IC0gdGhpcy5jb25maWcubWluKSwgdGhpcy5jb25maWcubGV2ZWxDb2xvcnMsIHRoaXMuY29uZmlnLmxldmVsQ29sb3JzR3JhZGllbnQpO1xyXG4gIHRoaXMuY2FudmFzLmdldEJ5SWQodGhpcy5jb25maWcuaWQrXCItdHh0dmFsdWVcIikuYXR0cih7XCJ0ZXh0XCI6b3JpZ2luYWxWYWx9KTtcclxuICB0aGlzLmNhbnZhcy5nZXRCeUlkKHRoaXMuY29uZmlnLmlkK1wiLWxldmVsXCIpLmFuaW1hdGUoe3BraTogW3ZhbCwgdGhpcy5jb25maWcubWluLCB0aGlzLmNvbmZpZy5tYXgsIHRoaXMucGFyYW1zLndpZGdldFcsIHRoaXMucGFyYW1zLndpZGdldEgsICB0aGlzLnBhcmFtcy5keCwgdGhpcy5wYXJhbXMuZHksIHRoaXMuY29uZmlnLmdhdWdlV2lkdGhTY2FsZV0sIFwiZmlsbFwiOmNvbG9yfSwgIHRoaXMuY29uZmlnLnJlZnJlc2hBbmltYXRpb25UaW1lLCB0aGlzLmNvbmZpZy5yZWZyZXNoQW5pbWF0aW9uVHlwZSk7XHJcbn07XHJcblxyXG52YXIgcGVyY2VudENvbG9ycyA9IFtcclxuICBcIiNhOWQ3MGJcIixcclxuICBcIiNmOWM4MDJcIixcclxuICBcIiNmZjAwMDBcIlxyXG5dXHJcblxyXG5KdXN0R2FnZS5wcm90b3R5cGUuZ2VuZXJhdGVTaGFkb3cgPSBmdW5jdGlvbihzdmcsIGRlZnMpIHtcclxuICAgIC8vIEZJTFRFUlxyXG4gICAgdmFyIGdhdXNzRmlsdGVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmaWx0ZXJcIik7XHJcbiAgICBnYXVzc0ZpbHRlci5zZXRBdHRyaWJ1dGUoXCJpZFwiLCB0aGlzLmNvbmZpZy5pZCArIFwiLWlubmVyLXNoYWRvd1wiKTtcclxuICAgIGRlZnMuYXBwZW5kQ2hpbGQoZ2F1c3NGaWx0ZXIpO1xyXG4gICAgXHJcbiAgICAvLyBvZmZzZXRcclxuICAgIHZhciBmZU9mZnNldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmZU9mZnNldFwiKTtcclxuICAgIGZlT2Zmc2V0LnNldEF0dHJpYnV0ZShcImR4XCIsIDApO1xyXG4gICAgZmVPZmZzZXQuc2V0QXR0cmlidXRlKFwiZHlcIiwgdGhpcy5jb25maWcuc2hhZG93VmVydGljYWxPZmZzZXQpO1xyXG4gICAgZ2F1c3NGaWx0ZXIuYXBwZW5kQ2hpbGQoZmVPZmZzZXQpO1xyXG4gICAgXHJcbiAgICAvLyBibHVyXHJcbiAgICB2YXIgZmVHYXVzc2lhbkJsdXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnLFwiZmVHYXVzc2lhbkJsdXJcIik7XHJcbiAgICBmZUdhdXNzaWFuQmx1ci5zZXRBdHRyaWJ1dGUoXCJyZXN1bHRcIixcIm9mZnNldC1ibHVyXCIpO1xyXG4gICAgZmVHYXVzc2lhbkJsdXIuc2V0QXR0cmlidXRlKFwic3RkRGV2aWF0aW9uXCIsIHRoaXMuY29uZmlnLnNoYWRvd1NpemUpO1xyXG4gICAgZ2F1c3NGaWx0ZXIuYXBwZW5kQ2hpbGQoZmVHYXVzc2lhbkJsdXIpO1xyXG4gICAgXHJcbiAgICAvLyBjb21wb3NpdGUgMVxyXG4gICAgdmFyIGZlQ29tcG9zaXRlMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmZUNvbXBvc2l0ZVwiKTtcclxuICAgIGZlQ29tcG9zaXRlMS5zZXRBdHRyaWJ1dGUoXCJvcGVyYXRvclwiLFwib3V0XCIpO1xyXG4gICAgZmVDb21wb3NpdGUxLnNldEF0dHJpYnV0ZShcImluXCIsIFwiU291cmNlR3JhcGhpY1wiKTtcclxuICAgIGZlQ29tcG9zaXRlMS5zZXRBdHRyaWJ1dGUoXCJpbjJcIixcIm9mZnNldC1ibHVyXCIpO1xyXG4gICAgZmVDb21wb3NpdGUxLnNldEF0dHJpYnV0ZShcInJlc3VsdFwiLFwiaW52ZXJzZVwiKTtcclxuICAgIGdhdXNzRmlsdGVyLmFwcGVuZENoaWxkKGZlQ29tcG9zaXRlMSk7XHJcbiAgICBcclxuICAgIC8vIGZsb29kXHJcbiAgICB2YXIgZmVGbG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmZUZsb29kXCIpO1xyXG4gICAgZmVGbG9vZC5zZXRBdHRyaWJ1dGUoXCJmbG9vZC1jb2xvclwiLFwiYmxhY2tcIik7XHJcbiAgICBmZUZsb29kLnNldEF0dHJpYnV0ZShcImZsb29kLW9wYWNpdHlcIiwgdGhpcy5jb25maWcuc2hhZG93T3BhY2l0eSk7XHJcbiAgICBmZUZsb29kLnNldEF0dHJpYnV0ZShcInJlc3VsdFwiLFwiY29sb3JcIik7XHJcbiAgICBnYXVzc0ZpbHRlci5hcHBlbmRDaGlsZChmZUZsb29kKTtcclxuICAgIFxyXG4gICAgLy8gY29tcG9zaXRlIDJcclxuICAgIHZhciBmZUNvbXBvc2l0ZTIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnLFwiZmVDb21wb3NpdGVcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTIuc2V0QXR0cmlidXRlKFwib3BlcmF0b3JcIixcImluXCIpO1xyXG4gICAgZmVDb21wb3NpdGUyLnNldEF0dHJpYnV0ZShcImluXCIsIFwiY29sb3JcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTIuc2V0QXR0cmlidXRlKFwiaW4yXCIsXCJpbnZlcnNlXCIpO1xyXG4gICAgZmVDb21wb3NpdGUyLnNldEF0dHJpYnV0ZShcInJlc3VsdFwiLFwic2hhZG93XCIpO1xyXG4gICAgZ2F1c3NGaWx0ZXIuYXBwZW5kQ2hpbGQoZmVDb21wb3NpdGUyKTtcclxuICAgIFxyXG4gICAgLy8gY29tcG9zaXRlIDNcclxuICAgIHZhciBmZUNvbXBvc2l0ZTMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnLFwiZmVDb21wb3NpdGVcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTMuc2V0QXR0cmlidXRlKFwib3BlcmF0b3JcIixcIm92ZXJcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTMuc2V0QXR0cmlidXRlKFwiaW5cIiwgXCJzaGFkb3dcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTMuc2V0QXR0cmlidXRlKFwiaW4yXCIsXCJTb3VyY2VHcmFwaGljXCIpO1xyXG4gICAgZ2F1c3NGaWx0ZXIuYXBwZW5kQ2hpbGQoZmVDb21wb3NpdGUzKTtcclxuXHJcbiAgICAvLyBzZXQgc2hhZG93XHJcbiAgICBpZiAodGhpcy5jb25maWcuc2hvd0lubmVyU2hhZG93ID09IHRydWUpIHtcclxuICAgICAgdGhpcy5jYW52YXMuY2FudmFzLmNoaWxkTm9kZXNbMl0uc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsIFwidXJsKCNcIiArIHRoaXMuY29uZmlnLmlkICsgXCItaW5uZXItc2hhZG93KVwiKTtcclxuICAgICAgdGhpcy5jYW52YXMuY2FudmFzLmNoaWxkTm9kZXNbM10uc2V0QXR0cmlidXRlKFwiZmlsdGVyXCIsIFwidXJsKCNcIiArIHRoaXMuY29uZmlnLmlkICsgXCItaW5uZXItc2hhZG93KVwiKTtcclxuICAgIH1cclxufVxyXG5cclxudmFyIGdldENvbG9yRm9yUGVyY2VudGFnZSA9IGZ1bmN0aW9uKHBjdCwgY29sLCBncmFkKSB7XHJcbiAgICBcclxuICAgIHZhciBubyA9IGNvbC5sZW5ndGg7XHJcbiAgICBpZiAobm8gPT09IDEpIHJldHVybiBjb2xbMF07XHJcbiAgICB2YXIgaW5jID0gKGdyYWQpID8gKDEgLyAobm8gLSAxKSkgOiAoMSAvIG5vKTtcclxuICAgIHZhciBjb2xvcnMgPSBuZXcgQXJyYXkoKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHZhciBwZXJjZW50YWdlID0gKGdyYWQpID8gKGluYyAqIGkpIDogKGluYyAqIChpICsgMSkpO1xyXG4gICAgICB2YXIgcnZhbCA9IHBhcnNlSW50KChjdXRIZXgoY29sW2ldKSkuc3Vic3RyaW5nKDAsMiksMTYpO1xyXG4gICAgICB2YXIgZ3ZhbCA9IHBhcnNlSW50KChjdXRIZXgoY29sW2ldKSkuc3Vic3RyaW5nKDIsNCksMTYpO1xyXG4gICAgICB2YXIgYnZhbCA9IHBhcnNlSW50KChjdXRIZXgoY29sW2ldKSkuc3Vic3RyaW5nKDQsNiksMTYpO1xyXG4gICAgICBjb2xvcnNbaV0gPSB7IHBjdDogcGVyY2VudGFnZSwgY29sb3I6IHsgcjogcnZhbCwgZzogZ3ZhbCwgYjogYnZhbCAgfSB9O1xyXG4gICAgfVxyXG4gICAgICAgIFxyXG4gICAgaWYocGN0ID09IDApIHJldHVybiAncmdiKCcgKyBbY29sb3JzWzBdLmNvbG9yLnIsIGNvbG9yc1swXS5jb2xvci5nLCBjb2xvcnNbMF0uY29sb3IuYl0uam9pbignLCcpICsgJyknO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgaWYgKHBjdCA8PSBjb2xvcnNbaV0ucGN0KSB7XHJcbiAgICAgICAgICAgIGlmIChncmFkID09IHRydWUpIHtcclxuICAgICAgICAgICAgICB2YXIgbG93ZXIgPSBjb2xvcnNbaSAtIDFdO1xyXG4gICAgICAgICAgICAgIHZhciB1cHBlciA9IGNvbG9yc1tpXTtcclxuICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSB1cHBlci5wY3QgLSBsb3dlci5wY3Q7XHJcbiAgICAgICAgICAgICAgdmFyIHJhbmdlUGN0ID0gKHBjdCAtIGxvd2VyLnBjdCkgLyByYW5nZTtcclxuICAgICAgICAgICAgICB2YXIgcGN0TG93ZXIgPSAxIC0gcmFuZ2VQY3Q7XHJcbiAgICAgICAgICAgICAgdmFyIHBjdFVwcGVyID0gcmFuZ2VQY3Q7XHJcbiAgICAgICAgICAgICAgdmFyIGNvbG9yID0ge1xyXG4gICAgICAgICAgICAgICAgICByOiBNYXRoLmZsb29yKGxvd2VyLmNvbG9yLnIgKiBwY3RMb3dlciArIHVwcGVyLmNvbG9yLnIgKiBwY3RVcHBlciksXHJcbiAgICAgICAgICAgICAgICAgIGc6IE1hdGguZmxvb3IobG93ZXIuY29sb3IuZyAqIHBjdExvd2VyICsgdXBwZXIuY29sb3IuZyAqIHBjdFVwcGVyKSxcclxuICAgICAgICAgICAgICAgICAgYjogTWF0aC5mbG9vcihsb3dlci5jb2xvci5iICogcGN0TG93ZXIgKyB1cHBlci5jb2xvci5iICogcGN0VXBwZXIpXHJcbiAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICByZXR1cm4gJ3JnYignICsgW2NvbG9yLnIsIGNvbG9yLmcsIGNvbG9yLmJdLmpvaW4oJywnKSArICcpJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICByZXR1cm4gJ3JnYignICsgW2NvbG9yc1tpXS5jb2xvci5yLCBjb2xvcnNbaV0uY29sb3IuZywgY29sb3JzW2ldLmNvbG9yLmJdLmpvaW4oJywnKSArICcpJzsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG59IFxyXG5cclxuZnVuY3Rpb24gZ2V0UmFuZG9tSW50IChtaW4sIG1heCkge1xyXG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XHJcbn0gICAgXHJcblxyXG5mdW5jdGlvbiBjdXRIZXgoc3RyKSB7cmV0dXJuIChzdHIuY2hhckF0KDApPT1cIiNcIikgPyBzdHIuc3Vic3RyaW5nKDEsNyk6c3RyfVxyXG5cclxuZnVuY3Rpb24gZ2V0U3R5bGUob0VsbSwgc3RyQ3NzUnVsZSl7XHJcblx0dmFyIHN0clZhbHVlID0gXCJcIjtcclxuXHRpZihkb2N1bWVudC5kZWZhdWx0VmlldyAmJiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKXtcclxuXHRcdHN0clZhbHVlID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShvRWxtLCBcIlwiKS5nZXRQcm9wZXJ0eVZhbHVlKHN0ckNzc1J1bGUpO1xyXG5cdH1cclxuXHRlbHNlIGlmKG9FbG0uY3VycmVudFN0eWxlKXtcclxuXHRcdHN0ckNzc1J1bGUgPSBzdHJDc3NSdWxlLnJlcGxhY2UoL1xcLShcXHcpL2csIGZ1bmN0aW9uIChzdHJNYXRjaCwgcDEpe1xyXG5cdFx0XHRyZXR1cm4gcDEudG9VcHBlckNhc2UoKTtcclxuXHRcdH0pO1xyXG5cdFx0c3RyVmFsdWUgPSBvRWxtLmN1cnJlbnRTdHlsZVtzdHJDc3NSdWxlXTtcclxuXHR9XHJcblx0cmV0dXJuIHN0clZhbHVlO1xyXG59XHJcblxyXG4gZnVuY3Rpb24gb25DcmVhdGVFbGVtZW50TnNSZWFkeShmdW5jKSB7XHJcbiAgaWYgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyAhPSB1bmRlZmluZWQpIHtcclxuICAgIGZ1bmMoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsgb25DcmVhdGVFbGVtZW50TnNSZWFkeShmdW5jKTsgfSwgMTAwKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gQSBzaG9ydCBzbmlwcGV0IGZvciBkZXRlY3RpbmcgdmVyc2lvbnMgb2YgSUUgaW4gSmF2YVNjcmlwdFxyXG4vLyB3aXRob3V0IHJlc29ydGluZyB0byB1c2VyLWFnZW50IHNuaWZmaW5nXHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy8gSWYgeW91J3JlIG5vdCBpbiBJRSAob3IgSUUgdmVyc2lvbiBpcyBsZXNzIHRoYW4gNSkgdGhlbjpcclxuLy8gaWUgPT09IHVuZGVmaW5lZFxyXG4vLyBJZiB5b3UncmUgaW4gSUUgKD49NSkgdGhlbiB5b3UgY2FuIGRldGVybWluZSB3aGljaCB2ZXJzaW9uOlxyXG4vLyBpZSA9PT0gNzsgLy8gSUU3XHJcbi8vIFRodXMsIHRvIGRldGVjdCBJRTpcclxuLy8gaWYgKGllKSB7fVxyXG4vLyBBbmQgdG8gZGV0ZWN0IHRoZSB2ZXJzaW9uOlxyXG4vLyBpZSA9PT0gNiAvLyBJRTZcclxuLy8gaWUgPiA3IC8vIElFOCwgSUU5IC4uLlxyXG4vLyBpZSA8IDkgLy8gQW55dGhpbmcgbGVzcyB0aGFuIElFOVxyXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vLyBVUERBVEU6IE5vdyB1c2luZyBMaXZlIE5vZGVMaXN0IGlkZWEgZnJvbSBAamRhbHRvblxyXG5cclxudmFyIGllID0gKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgdmFyIHVuZGVmLFxyXG4gICAgICAgIHYgPSAzLFxyXG4gICAgICAgIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgIGFsbCA9IGRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaScpO1xyXG5cclxuICAgIHdoaWxlIChcclxuICAgICAgICBkaXYuaW5uZXJIVE1MID0gJzwhLS1baWYgZ3QgSUUgJyArICgrK3YpICsgJ10+PGk+PC9pPjwhW2VuZGlmXS0tPicsXHJcbiAgICAgICAgYWxsWzBdXHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB2ID4gNCA/IHYgOiB1bmRlZjtcclxuXHJcbn0oKSk7IiwiLy8hIG1vbWVudC5qc1xuLy8hIHZlcnNpb24gOiAyLjguMVxuLy8hIGF1dGhvcnMgOiBUaW0gV29vZCwgSXNrcmVuIENoZXJuZXYsIE1vbWVudC5qcyBjb250cmlidXRvcnNcbi8vISBsaWNlbnNlIDogTUlUXG4vLyEgbW9tZW50anMuY29tXG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMjpyZXR1cm4gbnVsbCE9YT9hOmI7Y2FzZSAzOnJldHVybiBudWxsIT1hP2E6bnVsbCE9Yj9iOmM7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbXBsZW1lbnQgbWVcIil9fWZ1bmN0aW9uIGMoKXtyZXR1cm57ZW1wdHk6ITEsdW51c2VkVG9rZW5zOltdLHVudXNlZElucHV0OltdLG92ZXJmbG93Oi0yLGNoYXJzTGVmdE92ZXI6MCxudWxsSW5wdXQ6ITEsaW52YWxpZE1vbnRoOm51bGwsaW52YWxpZEZvcm1hdDohMSx1c2VySW52YWxpZGF0ZWQ6ITEsaXNvOiExfX1mdW5jdGlvbiBkKGEpe3JiLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz09PSExJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgY29uc29sZSYmY29uc29sZS53YXJuJiZjb25zb2xlLndhcm4oXCJEZXByZWNhdGlvbiB3YXJuaW5nOiBcIithKX1mdW5jdGlvbiBlKGEsYil7dmFyIGM9ITA7cmV0dXJuIGwoZnVuY3Rpb24oKXtyZXR1cm4gYyYmKGQoYSksYz0hMSksYi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LGIpfWZ1bmN0aW9uIGYoYSxiKXtuY1thXXx8KGQoYiksbmNbYV09ITApfWZ1bmN0aW9uIGcoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIG8oYS5jYWxsKHRoaXMsYyksYil9fWZ1bmN0aW9uIGgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm9yZGluYWwoYS5jYWxsKHRoaXMsYyksYil9fWZ1bmN0aW9uIGkoKXt9ZnVuY3Rpb24gaihhLGIpe2IhPT0hMSYmRShhKSxtKHRoaXMsYSksdGhpcy5fZD1uZXcgRGF0ZSgrYS5fZCl9ZnVuY3Rpb24gayhhKXt2YXIgYj14KGEpLGM9Yi55ZWFyfHwwLGQ9Yi5xdWFydGVyfHwwLGU9Yi5tb250aHx8MCxmPWIud2Vla3x8MCxnPWIuZGF5fHwwLGg9Yi5ob3VyfHwwLGk9Yi5taW51dGV8fDAsaj1iLnNlY29uZHx8MCxrPWIubWlsbGlzZWNvbmR8fDA7dGhpcy5fbWlsbGlzZWNvbmRzPStrKzFlMypqKzZlNCppKzM2ZTUqaCx0aGlzLl9kYXlzPStnKzcqZix0aGlzLl9tb250aHM9K2UrMypkKzEyKmMsdGhpcy5fZGF0YT17fSx0aGlzLl9sb2NhbGU9cmIubG9jYWxlRGF0YSgpLHRoaXMuX2J1YmJsZSgpfWZ1bmN0aW9uIGwoYSxiKXtmb3IodmFyIGMgaW4gYiliLmhhc093blByb3BlcnR5KGMpJiYoYVtjXT1iW2NdKTtyZXR1cm4gYi5oYXNPd25Qcm9wZXJ0eShcInRvU3RyaW5nXCIpJiYoYS50b1N0cmluZz1iLnRvU3RyaW5nKSxiLmhhc093blByb3BlcnR5KFwidmFsdWVPZlwiKSYmKGEudmFsdWVPZj1iLnZhbHVlT2YpLGF9ZnVuY3Rpb24gbShhLGIpe3ZhciBjLGQsZTtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5faXNBTW9tZW50T2JqZWN0JiYoYS5faXNBTW9tZW50T2JqZWN0PWIuX2lzQU1vbWVudE9iamVjdCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuX2kmJihhLl9pPWIuX2kpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl9mJiYoYS5fZj1iLl9mKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5fbCYmKGEuX2w9Yi5fbCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuX3N0cmljdCYmKGEuX3N0cmljdD1iLl9zdHJpY3QpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl90em0mJihhLl90em09Yi5fdHptKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5faXNVVEMmJihhLl9pc1VUQz1iLl9pc1VUQyksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuX29mZnNldCYmKGEuX29mZnNldD1iLl9vZmZzZXQpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl9wZiYmKGEuX3BmPWIuX3BmKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5fbG9jYWxlJiYoYS5fbG9jYWxlPWIuX2xvY2FsZSksRmIubGVuZ3RoPjApZm9yKGMgaW4gRmIpZD1GYltjXSxlPWJbZF0sXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGUmJihhW2RdPWUpO3JldHVybiBhfWZ1bmN0aW9uIG4oYSl7cmV0dXJuIDA+YT9NYXRoLmNlaWwoYSk6TWF0aC5mbG9vcihhKX1mdW5jdGlvbiBvKGEsYixjKXtmb3IodmFyIGQ9XCJcIitNYXRoLmFicyhhKSxlPWE+PTA7ZC5sZW5ndGg8YjspZD1cIjBcIitkO3JldHVybihlP2M/XCIrXCI6XCJcIjpcIi1cIikrZH1mdW5jdGlvbiBwKGEsYil7dmFyIGM9e21pbGxpc2Vjb25kczowLG1vbnRoczowfTtyZXR1cm4gYy5tb250aHM9Yi5tb250aCgpLWEubW9udGgoKSsxMiooYi55ZWFyKCktYS55ZWFyKCkpLGEuY2xvbmUoKS5hZGQoYy5tb250aHMsXCJNXCIpLmlzQWZ0ZXIoYikmJi0tYy5tb250aHMsYy5taWxsaXNlY29uZHM9K2ItK2EuY2xvbmUoKS5hZGQoYy5tb250aHMsXCJNXCIpLGN9ZnVuY3Rpb24gcShhLGIpe3ZhciBjO3JldHVybiBiPUooYixhKSxhLmlzQmVmb3JlKGIpP2M9cChhLGIpOihjPXAoYixhKSxjLm1pbGxpc2Vjb25kcz0tYy5taWxsaXNlY29uZHMsYy5tb250aHM9LWMubW9udGhzKSxjfWZ1bmN0aW9uIHIoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZSxnO3JldHVybiBudWxsPT09ZHx8aXNOYU4oK2QpfHwoZihiLFwibW9tZW50KCkuXCIrYitcIihwZXJpb2QsIG51bWJlcikgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBtb21lbnQoKS5cIitiK1wiKG51bWJlciwgcGVyaW9kKS5cIiksZz1jLGM9ZCxkPWcpLGM9XCJzdHJpbmdcIj09dHlwZW9mIGM/K2M6YyxlPXJiLmR1cmF0aW9uKGMsZCkscyh0aGlzLGUsYSksdGhpc319ZnVuY3Rpb24gcyhhLGIsYyxkKXt2YXIgZT1iLl9taWxsaXNlY29uZHMsZj1iLl9kYXlzLGc9Yi5fbW9udGhzO2Q9bnVsbD09ZD8hMDpkLGUmJmEuX2Quc2V0VGltZSgrYS5fZCtlKmMpLGYmJmxiKGEsXCJEYXRlXCIsa2IoYSxcIkRhdGVcIikrZipjKSxnJiZqYihhLGtiKGEsXCJNb250aFwiKStnKmMpLGQmJnJiLnVwZGF0ZU9mZnNldChhLGZ8fGcpfWZ1bmN0aW9uIHQoYSl7cmV0dXJuXCJbb2JqZWN0IEFycmF5XVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpfWZ1bmN0aW9uIHUoYSl7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl8fGEgaW5zdGFuY2VvZiBEYXRlfWZ1bmN0aW9uIHYoYSxiLGMpe3ZhciBkLGU9TWF0aC5taW4oYS5sZW5ndGgsYi5sZW5ndGgpLGY9TWF0aC5hYnMoYS5sZW5ndGgtYi5sZW5ndGgpLGc9MDtmb3IoZD0wO2U+ZDtkKyspKGMmJmFbZF0hPT1iW2RdfHwhYyYmeihhW2RdKSE9PXooYltkXSkpJiZnKys7cmV0dXJuIGcrZn1mdW5jdGlvbiB3KGEpe2lmKGEpe3ZhciBiPWEudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8oLilzJC8sXCIkMVwiKTthPWdjW2FdfHxoY1tiXXx8Yn1yZXR1cm4gYX1mdW5jdGlvbiB4KGEpe3ZhciBiLGMsZD17fTtmb3IoYyBpbiBhKWEuaGFzT3duUHJvcGVydHkoYykmJihiPXcoYyksYiYmKGRbYl09YVtjXSkpO3JldHVybiBkfWZ1bmN0aW9uIHkoYil7dmFyIGMsZDtpZigwPT09Yi5pbmRleE9mKFwid2Vla1wiKSljPTcsZD1cImRheVwiO2Vsc2V7aWYoMCE9PWIuaW5kZXhPZihcIm1vbnRoXCIpKXJldHVybjtjPTEyLGQ9XCJtb250aFwifXJiW2JdPWZ1bmN0aW9uKGUsZil7dmFyIGcsaCxpPXJiLl9sb2NhbGVbYl0saj1bXTtpZihcIm51bWJlclwiPT10eXBlb2YgZSYmKGY9ZSxlPWEpLGg9ZnVuY3Rpb24oYSl7dmFyIGI9cmIoKS51dGMoKS5zZXQoZCxhKTtyZXR1cm4gaS5jYWxsKHJiLl9sb2NhbGUsYixlfHxcIlwiKX0sbnVsbCE9ZilyZXR1cm4gaChmKTtmb3IoZz0wO2M+ZztnKyspai5wdXNoKGgoZykpO3JldHVybiBqfX1mdW5jdGlvbiB6KGEpe3ZhciBiPSthLGM9MDtyZXR1cm4gMCE9PWImJmlzRmluaXRlKGIpJiYoYz1iPj0wP01hdGguZmxvb3IoYik6TWF0aC5jZWlsKGIpKSxjfWZ1bmN0aW9uIEEoYSxiKXtyZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoYSxiKzEsMCkpLmdldFVUQ0RhdGUoKX1mdW5jdGlvbiBCKGEsYixjKXtyZXR1cm4gZmIocmIoW2EsMTEsMzErYi1jXSksYixjKS53ZWVrfWZ1bmN0aW9uIEMoYSl7cmV0dXJuIEQoYSk/MzY2OjM2NX1mdW5jdGlvbiBEKGEpe3JldHVybiBhJTQ9PT0wJiZhJTEwMCE9PTB8fGElNDAwPT09MH1mdW5jdGlvbiBFKGEpe3ZhciBiO2EuX2EmJi0yPT09YS5fcGYub3ZlcmZsb3cmJihiPWEuX2FbeWJdPDB8fGEuX2FbeWJdPjExP3liOmEuX2FbemJdPDF8fGEuX2FbemJdPkEoYS5fYVt4Yl0sYS5fYVt5Yl0pP3piOmEuX2FbQWJdPDB8fGEuX2FbQWJdPjIzP0FiOmEuX2FbQmJdPDB8fGEuX2FbQmJdPjU5P0JiOmEuX2FbQ2JdPDB8fGEuX2FbQ2JdPjU5P0NiOmEuX2FbRGJdPDB8fGEuX2FbRGJdPjk5OT9EYjotMSxhLl9wZi5fb3ZlcmZsb3dEYXlPZlllYXImJih4Yj5ifHxiPnpiKSYmKGI9emIpLGEuX3BmLm92ZXJmbG93PWIpfWZ1bmN0aW9uIEYoYSl7cmV0dXJuIG51bGw9PWEuX2lzVmFsaWQmJihhLl9pc1ZhbGlkPSFpc05hTihhLl9kLmdldFRpbWUoKSkmJmEuX3BmLm92ZXJmbG93PDAmJiFhLl9wZi5lbXB0eSYmIWEuX3BmLmludmFsaWRNb250aCYmIWEuX3BmLm51bGxJbnB1dCYmIWEuX3BmLmludmFsaWRGb3JtYXQmJiFhLl9wZi51c2VySW52YWxpZGF0ZWQsYS5fc3RyaWN0JiYoYS5faXNWYWxpZD1hLl9pc1ZhbGlkJiYwPT09YS5fcGYuY2hhcnNMZWZ0T3ZlciYmMD09PWEuX3BmLnVudXNlZFRva2Vucy5sZW5ndGgpKSxhLl9pc1ZhbGlkfWZ1bmN0aW9uIEcoYSl7cmV0dXJuIGE/YS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJfXCIsXCItXCIpOmF9ZnVuY3Rpb24gSChhKXtmb3IodmFyIGIsYyxkLGUsZj0wO2Y8YS5sZW5ndGg7KXtmb3IoZT1HKGFbZl0pLnNwbGl0KFwiLVwiKSxiPWUubGVuZ3RoLGM9RyhhW2YrMV0pLGM9Yz9jLnNwbGl0KFwiLVwiKTpudWxsO2I+MDspe2lmKGQ9SShlLnNsaWNlKDAsYikuam9pbihcIi1cIikpKXJldHVybiBkO2lmKGMmJmMubGVuZ3RoPj1iJiZ2KGUsYywhMCk+PWItMSlicmVhaztiLS19ZisrfXJldHVybiBudWxsfWZ1bmN0aW9uIEkoYSl7dmFyIGI9bnVsbDtpZighRWJbYV0mJkdiKXRyeXtiPXJiLmxvY2FsZSgpLHJlcXVpcmUoXCIuL2xvY2FsZS9cIithKSxyYi5sb2NhbGUoYil9Y2F0Y2goYyl7fXJldHVybiBFYlthXX1mdW5jdGlvbiBKKGEsYil7cmV0dXJuIGIuX2lzVVRDP3JiKGEpLnpvbmUoYi5fb2Zmc2V0fHwwKTpyYihhKS5sb2NhbCgpfWZ1bmN0aW9uIEsoYSl7cmV0dXJuIGEubWF0Y2goL1xcW1tcXHNcXFNdLyk/YS5yZXBsYWNlKC9eXFxbfFxcXSQvZyxcIlwiKTphLnJlcGxhY2UoL1xcXFwvZyxcIlwiKX1mdW5jdGlvbiBMKGEpe3ZhciBiLGMsZD1hLm1hdGNoKEtiKTtmb3IoYj0wLGM9ZC5sZW5ndGg7Yz5iO2IrKylkW2JdPW1jW2RbYl1dP21jW2RbYl1dOksoZFtiXSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciBmPVwiXCI7Zm9yKGI9MDtjPmI7YisrKWYrPWRbYl1pbnN0YW5jZW9mIEZ1bmN0aW9uP2RbYl0uY2FsbChlLGEpOmRbYl07cmV0dXJuIGZ9fWZ1bmN0aW9uIE0oYSxiKXtyZXR1cm4gYS5pc1ZhbGlkKCk/KGI9TihiLGEubG9jYWxlRGF0YSgpKSxpY1tiXXx8KGljW2JdPUwoYikpLGljW2JdKGEpKTphLmxvY2FsZURhdGEoKS5pbnZhbGlkRGF0ZSgpfWZ1bmN0aW9uIE4oYSxiKXtmdW5jdGlvbiBjKGEpe3JldHVybiBiLmxvbmdEYXRlRm9ybWF0KGEpfHxhfXZhciBkPTU7Zm9yKExiLmxhc3RJbmRleD0wO2Q+PTAmJkxiLnRlc3QoYSk7KWE9YS5yZXBsYWNlKExiLGMpLExiLmxhc3RJbmRleD0wLGQtPTE7cmV0dXJuIGF9ZnVuY3Rpb24gTyhhLGIpe3ZhciBjLGQ9Yi5fc3RyaWN0O3N3aXRjaChhKXtjYXNlXCJRXCI6cmV0dXJuIFdiO2Nhc2VcIkRERERcIjpyZXR1cm4gWWI7Y2FzZVwiWVlZWVwiOmNhc2VcIkdHR0dcIjpjYXNlXCJnZ2dnXCI6cmV0dXJuIGQ/WmI6T2I7Y2FzZVwiWVwiOmNhc2VcIkdcIjpjYXNlXCJnXCI6cmV0dXJuIF9iO2Nhc2VcIllZWVlZWVwiOmNhc2VcIllZWVlZXCI6Y2FzZVwiR0dHR0dcIjpjYXNlXCJnZ2dnZ1wiOnJldHVybiBkPyRiOlBiO2Nhc2VcIlNcIjppZihkKXJldHVybiBXYjtjYXNlXCJTU1wiOmlmKGQpcmV0dXJuIFhiO2Nhc2VcIlNTU1wiOmlmKGQpcmV0dXJuIFliO2Nhc2VcIkRERFwiOnJldHVybiBOYjtjYXNlXCJNTU1cIjpjYXNlXCJNTU1NXCI6Y2FzZVwiZGRcIjpjYXNlXCJkZGRcIjpjYXNlXCJkZGRkXCI6cmV0dXJuIFJiO2Nhc2VcImFcIjpjYXNlXCJBXCI6cmV0dXJuIGIuX2xvY2FsZS5fbWVyaWRpZW1QYXJzZTtjYXNlXCJYXCI6cmV0dXJuIFViO2Nhc2VcIlpcIjpjYXNlXCJaWlwiOnJldHVybiBTYjtjYXNlXCJUXCI6cmV0dXJuIFRiO2Nhc2VcIlNTU1NcIjpyZXR1cm4gUWI7Y2FzZVwiTU1cIjpjYXNlXCJERFwiOmNhc2VcIllZXCI6Y2FzZVwiR0dcIjpjYXNlXCJnZ1wiOmNhc2VcIkhIXCI6Y2FzZVwiaGhcIjpjYXNlXCJtbVwiOmNhc2VcInNzXCI6Y2FzZVwid3dcIjpjYXNlXCJXV1wiOnJldHVybiBkP1hiOk1iO2Nhc2VcIk1cIjpjYXNlXCJEXCI6Y2FzZVwiZFwiOmNhc2VcIkhcIjpjYXNlXCJoXCI6Y2FzZVwibVwiOmNhc2VcInNcIjpjYXNlXCJ3XCI6Y2FzZVwiV1wiOmNhc2VcImVcIjpjYXNlXCJFXCI6cmV0dXJuIE1iO2Nhc2VcIkRvXCI6cmV0dXJuIFZiO2RlZmF1bHQ6cmV0dXJuIGM9bmV3IFJlZ0V4cChYKFcoYS5yZXBsYWNlKFwiXFxcXFwiLFwiXCIpKSxcImlcIikpfX1mdW5jdGlvbiBQKGEpe2E9YXx8XCJcIjt2YXIgYj1hLm1hdGNoKFNiKXx8W10sYz1iW2IubGVuZ3RoLTFdfHxbXSxkPShjK1wiXCIpLm1hdGNoKGVjKXx8W1wiLVwiLDAsMF0sZT0rKDYwKmRbMV0pK3ooZFsyXSk7cmV0dXJuXCIrXCI9PT1kWzBdPy1lOmV9ZnVuY3Rpb24gUShhLGIsYyl7dmFyIGQsZT1jLl9hO3N3aXRjaChhKXtjYXNlXCJRXCI6bnVsbCE9YiYmKGVbeWJdPTMqKHooYiktMSkpO2JyZWFrO2Nhc2VcIk1cIjpjYXNlXCJNTVwiOm51bGwhPWImJihlW3liXT16KGIpLTEpO2JyZWFrO2Nhc2VcIk1NTVwiOmNhc2VcIk1NTU1cIjpkPWMuX2xvY2FsZS5tb250aHNQYXJzZShiKSxudWxsIT1kP2VbeWJdPWQ6Yy5fcGYuaW52YWxpZE1vbnRoPWI7YnJlYWs7Y2FzZVwiRFwiOmNhc2VcIkREXCI6bnVsbCE9YiYmKGVbemJdPXooYikpO2JyZWFrO2Nhc2VcIkRvXCI6bnVsbCE9YiYmKGVbemJdPXoocGFyc2VJbnQoYiwxMCkpKTticmVhaztjYXNlXCJERERcIjpjYXNlXCJEREREXCI6bnVsbCE9YiYmKGMuX2RheU9mWWVhcj16KGIpKTticmVhaztjYXNlXCJZWVwiOmVbeGJdPXJiLnBhcnNlVHdvRGlnaXRZZWFyKGIpO2JyZWFrO2Nhc2VcIllZWVlcIjpjYXNlXCJZWVlZWVwiOmNhc2VcIllZWVlZWVwiOmVbeGJdPXooYik7YnJlYWs7Y2FzZVwiYVwiOmNhc2VcIkFcIjpjLl9pc1BtPWMuX2xvY2FsZS5pc1BNKGIpO2JyZWFrO2Nhc2VcIkhcIjpjYXNlXCJISFwiOmNhc2VcImhcIjpjYXNlXCJoaFwiOmVbQWJdPXooYik7YnJlYWs7Y2FzZVwibVwiOmNhc2VcIm1tXCI6ZVtCYl09eihiKTticmVhaztjYXNlXCJzXCI6Y2FzZVwic3NcIjplW0NiXT16KGIpO2JyZWFrO2Nhc2VcIlNcIjpjYXNlXCJTU1wiOmNhc2VcIlNTU1wiOmNhc2VcIlNTU1NcIjplW0RiXT16KDFlMyooXCIwLlwiK2IpKTticmVhaztjYXNlXCJYXCI6Yy5fZD1uZXcgRGF0ZSgxZTMqcGFyc2VGbG9hdChiKSk7YnJlYWs7Y2FzZVwiWlwiOmNhc2VcIlpaXCI6Yy5fdXNlVVRDPSEwLGMuX3R6bT1QKGIpO2JyZWFrO2Nhc2VcImRkXCI6Y2FzZVwiZGRkXCI6Y2FzZVwiZGRkZFwiOmQ9Yy5fbG9jYWxlLndlZWtkYXlzUGFyc2UoYiksbnVsbCE9ZD8oYy5fdz1jLl93fHx7fSxjLl93LmQ9ZCk6Yy5fcGYuaW52YWxpZFdlZWtkYXk9YjticmVhaztjYXNlXCJ3XCI6Y2FzZVwid3dcIjpjYXNlXCJXXCI6Y2FzZVwiV1dcIjpjYXNlXCJkXCI6Y2FzZVwiZVwiOmNhc2VcIkVcIjphPWEuc3Vic3RyKDAsMSk7Y2FzZVwiZ2dnZ1wiOmNhc2VcIkdHR0dcIjpjYXNlXCJHR0dHR1wiOmE9YS5zdWJzdHIoMCwyKSxiJiYoYy5fdz1jLl93fHx7fSxjLl93W2FdPXooYikpO2JyZWFrO2Nhc2VcImdnXCI6Y2FzZVwiR0dcIjpjLl93PWMuX3d8fHt9LGMuX3dbYV09cmIucGFyc2VUd29EaWdpdFllYXIoYil9fWZ1bmN0aW9uIFIoYSl7dmFyIGMsZCxlLGYsZyxoLGk7Yz1hLl93LG51bGwhPWMuR0d8fG51bGwhPWMuV3x8bnVsbCE9Yy5FPyhnPTEsaD00LGQ9YihjLkdHLGEuX2FbeGJdLGZiKHJiKCksMSw0KS55ZWFyKSxlPWIoYy5XLDEpLGY9YihjLkUsMSkpOihnPWEuX2xvY2FsZS5fd2Vlay5kb3csaD1hLl9sb2NhbGUuX3dlZWsuZG95LGQ9YihjLmdnLGEuX2FbeGJdLGZiKHJiKCksZyxoKS55ZWFyKSxlPWIoYy53LDEpLG51bGwhPWMuZD8oZj1jLmQsZz5mJiYrK2UpOmY9bnVsbCE9Yy5lP2MuZStnOmcpLGk9Z2IoZCxlLGYsaCxnKSxhLl9hW3hiXT1pLnllYXIsYS5fZGF5T2ZZZWFyPWkuZGF5T2ZZZWFyfWZ1bmN0aW9uIFMoYSl7dmFyIGMsZCxlLGYsZz1bXTtpZighYS5fZCl7Zm9yKGU9VShhKSxhLl93JiZudWxsPT1hLl9hW3piXSYmbnVsbD09YS5fYVt5Yl0mJlIoYSksYS5fZGF5T2ZZZWFyJiYoZj1iKGEuX2FbeGJdLGVbeGJdKSxhLl9kYXlPZlllYXI+QyhmKSYmKGEuX3BmLl9vdmVyZmxvd0RheU9mWWVhcj0hMCksZD1iYihmLDAsYS5fZGF5T2ZZZWFyKSxhLl9hW3liXT1kLmdldFVUQ01vbnRoKCksYS5fYVt6Yl09ZC5nZXRVVENEYXRlKCkpLGM9MDszPmMmJm51bGw9PWEuX2FbY107KytjKWEuX2FbY109Z1tjXT1lW2NdO2Zvcig7Nz5jO2MrKylhLl9hW2NdPWdbY109bnVsbD09YS5fYVtjXT8yPT09Yz8xOjA6YS5fYVtjXTthLl9kPShhLl91c2VVVEM/YmI6YWIpLmFwcGx5KG51bGwsZyksbnVsbCE9YS5fdHptJiZhLl9kLnNldFVUQ01pbnV0ZXMoYS5fZC5nZXRVVENNaW51dGVzKCkrYS5fdHptKX19ZnVuY3Rpb24gVChhKXt2YXIgYjthLl9kfHwoYj14KGEuX2kpLGEuX2E9W2IueWVhcixiLm1vbnRoLGIuZGF5LGIuaG91cixiLm1pbnV0ZSxiLnNlY29uZCxiLm1pbGxpc2Vjb25kXSxTKGEpKX1mdW5jdGlvbiBVKGEpe3ZhciBiPW5ldyBEYXRlO3JldHVybiBhLl91c2VVVEM/W2IuZ2V0VVRDRnVsbFllYXIoKSxiLmdldFVUQ01vbnRoKCksYi5nZXRVVENEYXRlKCldOltiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpLGIuZ2V0RGF0ZSgpXX1mdW5jdGlvbiBWKGEpe2lmKGEuX2Y9PT1yYi5JU09fODYwMSlyZXR1cm4gdm9pZCBaKGEpO2EuX2E9W10sYS5fcGYuZW1wdHk9ITA7dmFyIGIsYyxkLGUsZixnPVwiXCIrYS5faSxoPWcubGVuZ3RoLGk9MDtmb3IoZD1OKGEuX2YsYS5fbG9jYWxlKS5tYXRjaChLYil8fFtdLGI9MDtiPGQubGVuZ3RoO2IrKyllPWRbYl0sYz0oZy5tYXRjaChPKGUsYSkpfHxbXSlbMF0sYyYmKGY9Zy5zdWJzdHIoMCxnLmluZGV4T2YoYykpLGYubGVuZ3RoPjAmJmEuX3BmLnVudXNlZElucHV0LnB1c2goZiksZz1nLnNsaWNlKGcuaW5kZXhPZihjKStjLmxlbmd0aCksaSs9Yy5sZW5ndGgpLG1jW2VdPyhjP2EuX3BmLmVtcHR5PSExOmEuX3BmLnVudXNlZFRva2Vucy5wdXNoKGUpLFEoZSxjLGEpKTphLl9zdHJpY3QmJiFjJiZhLl9wZi51bnVzZWRUb2tlbnMucHVzaChlKTthLl9wZi5jaGFyc0xlZnRPdmVyPWgtaSxnLmxlbmd0aD4wJiZhLl9wZi51bnVzZWRJbnB1dC5wdXNoKGcpLGEuX2lzUG0mJmEuX2FbQWJdPDEyJiYoYS5fYVtBYl0rPTEyKSxhLl9pc1BtPT09ITEmJjEyPT09YS5fYVtBYl0mJihhLl9hW0FiXT0wKSxTKGEpLEUoYSl9ZnVuY3Rpb24gVyhhKXtyZXR1cm4gYS5yZXBsYWNlKC9cXFxcKFxcWyl8XFxcXChcXF0pfFxcWyhbXlxcXVxcW10qKVxcXXxcXFxcKC4pL2csZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gYnx8Y3x8ZHx8ZX0pfWZ1bmN0aW9uIFgoYSl7cmV0dXJuIGEucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLFwiXFxcXCQmXCIpfWZ1bmN0aW9uIFkoYSl7dmFyIGIsZCxlLGYsZztpZigwPT09YS5fZi5sZW5ndGgpcmV0dXJuIGEuX3BmLmludmFsaWRGb3JtYXQ9ITAsdm9pZChhLl9kPW5ldyBEYXRlKDAvMCkpO2ZvcihmPTA7ZjxhLl9mLmxlbmd0aDtmKyspZz0wLGI9bSh7fSxhKSxiLl9wZj1jKCksYi5fZj1hLl9mW2ZdLFYoYiksRihiKSYmKGcrPWIuX3BmLmNoYXJzTGVmdE92ZXIsZys9MTAqYi5fcGYudW51c2VkVG9rZW5zLmxlbmd0aCxiLl9wZi5zY29yZT1nLChudWxsPT1lfHxlPmcpJiYoZT1nLGQ9YikpO2woYSxkfHxiKX1mdW5jdGlvbiBaKGEpe3ZhciBiLGMsZD1hLl9pLGU9YWMuZXhlYyhkKTtpZihlKXtmb3IoYS5fcGYuaXNvPSEwLGI9MCxjPWNjLmxlbmd0aDtjPmI7YisrKWlmKGNjW2JdWzFdLmV4ZWMoZCkpe2EuX2Y9Y2NbYl1bMF0rKGVbNl18fFwiIFwiKTticmVha31mb3IoYj0wLGM9ZGMubGVuZ3RoO2M+YjtiKyspaWYoZGNbYl1bMV0uZXhlYyhkKSl7YS5fZis9ZGNbYl1bMF07YnJlYWt9ZC5tYXRjaChTYikmJihhLl9mKz1cIlpcIiksVihhKX1lbHNlIGEuX2lzVmFsaWQ9ITF9ZnVuY3Rpb24gJChhKXtaKGEpLGEuX2lzVmFsaWQ9PT0hMSYmKGRlbGV0ZSBhLl9pc1ZhbGlkLHJiLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGEpKX1mdW5jdGlvbiBfKGIpe3ZhciBjLGQ9Yi5faTtkPT09YT9iLl9kPW5ldyBEYXRlOnUoZCk/Yi5fZD1uZXcgRGF0ZSgrZCk6bnVsbCE9PShjPUhiLmV4ZWMoZCkpP2IuX2Q9bmV3IERhdGUoK2NbMV0pOlwic3RyaW5nXCI9PXR5cGVvZiBkPyQoYik6dChkKT8oYi5fYT1kLnNsaWNlKDApLFMoYikpOlwib2JqZWN0XCI9PXR5cGVvZiBkP1QoYik6XCJudW1iZXJcIj09dHlwZW9mIGQ/Yi5fZD1uZXcgRGF0ZShkKTpyYi5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjayhiKX1mdW5jdGlvbiBhYihhLGIsYyxkLGUsZixnKXt2YXIgaD1uZXcgRGF0ZShhLGIsYyxkLGUsZixnKTtyZXR1cm4gMTk3MD5hJiZoLnNldEZ1bGxZZWFyKGEpLGh9ZnVuY3Rpb24gYmIoYSl7dmFyIGI9bmV3IERhdGUoRGF0ZS5VVEMuYXBwbHkobnVsbCxhcmd1bWVudHMpKTtyZXR1cm4gMTk3MD5hJiZiLnNldFVUQ0Z1bGxZZWFyKGEpLGJ9ZnVuY3Rpb24gY2IoYSxiKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYSlpZihpc05hTihhKSl7aWYoYT1iLndlZWtkYXlzUGFyc2UoYSksXCJudW1iZXJcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGx9ZWxzZSBhPXBhcnNlSW50KGEsMTApO3JldHVybiBhfWZ1bmN0aW9uIGRiKGEsYixjLGQsZSl7cmV0dXJuIGUucmVsYXRpdmVUaW1lKGJ8fDEsISFjLGEsZCl9ZnVuY3Rpb24gZWIoYSxiLGMpe3ZhciBkPXJiLmR1cmF0aW9uKGEpLmFicygpLGU9d2IoZC5hcyhcInNcIikpLGY9d2IoZC5hcyhcIm1cIikpLGc9d2IoZC5hcyhcImhcIikpLGg9d2IoZC5hcyhcImRcIikpLGk9d2IoZC5hcyhcIk1cIikpLGo9d2IoZC5hcyhcInlcIikpLGs9ZTxqYy5zJiZbXCJzXCIsZV18fDE9PT1mJiZbXCJtXCJdfHxmPGpjLm0mJltcIm1tXCIsZl18fDE9PT1nJiZbXCJoXCJdfHxnPGpjLmgmJltcImhoXCIsZ118fDE9PT1oJiZbXCJkXCJdfHxoPGpjLmQmJltcImRkXCIsaF18fDE9PT1pJiZbXCJNXCJdfHxpPGpjLk0mJltcIk1NXCIsaV18fDE9PT1qJiZbXCJ5XCJdfHxbXCJ5eVwiLGpdO3JldHVybiBrWzJdPWIsa1szXT0rYT4wLGtbNF09YyxkYi5hcHBseSh7fSxrKX1mdW5jdGlvbiBmYihhLGIsYyl7dmFyIGQsZT1jLWIsZj1jLWEuZGF5KCk7cmV0dXJuIGY+ZSYmKGYtPTcpLGUtNz5mJiYoZis9NyksZD1yYihhKS5hZGQoZixcImRcIikse3dlZWs6TWF0aC5jZWlsKGQuZGF5T2ZZZWFyKCkvNykseWVhcjpkLnllYXIoKX19ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXt2YXIgZixnLGg9YmIoYSwwLDEpLmdldFVUQ0RheSgpO3JldHVybiBoPTA9PT1oPzc6aCxjPW51bGwhPWM/YzplLGY9ZS1oKyhoPmQ/NzowKS0oZT5oPzc6MCksZz03KihiLTEpKyhjLWUpK2YrMSx7eWVhcjpnPjA/YTphLTEsZGF5T2ZZZWFyOmc+MD9nOkMoYS0xKStnfX1mdW5jdGlvbiBoYihiKXt2YXIgYz1iLl9pLGQ9Yi5fZjtyZXR1cm4gYi5fbG9jYWxlPWIuX2xvY2FsZXx8cmIubG9jYWxlRGF0YShiLl9sKSxudWxsPT09Y3x8ZD09PWEmJlwiXCI9PT1jP3JiLmludmFsaWQoe251bGxJbnB1dDohMH0pOihcInN0cmluZ1wiPT10eXBlb2YgYyYmKGIuX2k9Yz1iLl9sb2NhbGUucHJlcGFyc2UoYykpLHJiLmlzTW9tZW50KGMpP25ldyBqKGMsITApOihkP3QoZCk/WShiKTpWKGIpOl8oYiksbmV3IGooYikpKX1mdW5jdGlvbiBpYihhLGIpe3ZhciBjLGQ7aWYoMT09PWIubGVuZ3RoJiZ0KGJbMF0pJiYoYj1iWzBdKSwhYi5sZW5ndGgpcmV0dXJuIHJiKCk7Zm9yKGM9YlswXSxkPTE7ZDxiLmxlbmd0aDsrK2QpYltkXVthXShjKSYmKGM9YltkXSk7cmV0dXJuIGN9ZnVuY3Rpb24gamIoYSxiKXt2YXIgYztyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGI9YS5sb2NhbGVEYXRhKCkubW9udGhzUGFyc2UoYiksXCJudW1iZXJcIiE9dHlwZW9mIGIpP2E6KGM9TWF0aC5taW4oYS5kYXRlKCksQShhLnllYXIoKSxiKSksYS5fZFtcInNldFwiKyhhLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK1wiTW9udGhcIl0oYixjKSxhKX1mdW5jdGlvbiBrYihhLGIpe3JldHVybiBhLl9kW1wiZ2V0XCIrKGEuX2lzVVRDP1wiVVRDXCI6XCJcIikrYl0oKX1mdW5jdGlvbiBsYihhLGIsYyl7cmV0dXJuXCJNb250aFwiPT09Yj9qYihhLGMpOmEuX2RbXCJzZXRcIisoYS5faXNVVEM/XCJVVENcIjpcIlwiKStiXShjKX1mdW5jdGlvbiBtYihhLGIpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gbnVsbCE9Yz8obGIodGhpcyxhLGMpLHJiLnVwZGF0ZU9mZnNldCh0aGlzLGIpLHRoaXMpOmtiKHRoaXMsYSl9fWZ1bmN0aW9uIG5iKGEpe3JldHVybiA0MDAqYS8xNDYwOTd9ZnVuY3Rpb24gb2IoYSl7cmV0dXJuIDE0NjA5NyphLzQwMH1mdW5jdGlvbiBwYihhKXtyYi5kdXJhdGlvbi5mblthXT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhW2FdfX1mdW5jdGlvbiBxYihhKXtcInVuZGVmaW5lZFwiPT10eXBlb2YgZW5kZXImJihzYj12Yi5tb21lbnQsdmIubW9tZW50PWE/ZShcIkFjY2Vzc2luZyBNb21lbnQgdGhyb3VnaCB0aGUgZ2xvYmFsIHNjb3BlIGlzIGRlcHJlY2F0ZWQsIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gYW4gdXBjb21pbmcgcmVsZWFzZS5cIixyYik6cmIpfWZvcih2YXIgcmIsc2IsdGIsdWI9XCIyLjguMVwiLHZiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOnRoaXMsd2I9TWF0aC5yb3VuZCx4Yj0wLHliPTEsemI9MixBYj0zLEJiPTQsQ2I9NSxEYj02LEViPXt9LEZiPVtdLEdiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzLEhiPS9eXFwvP0RhdGVcXCgoXFwtP1xcZCspL2ksSWI9LyhcXC0pPyg/OihcXGQqKVxcLik/KFxcZCspXFw6KFxcZCspKD86XFw6KFxcZCspXFwuPyhcXGR7M30pPyk/LyxKYj0vXigtKT9QKD86KD86KFswLTksLl0qKVkpPyg/OihbMC05LC5dKilNKT8oPzooWzAtOSwuXSopRCk/KD86VCg/OihbMC05LC5dKilIKT8oPzooWzAtOSwuXSopTSk/KD86KFswLTksLl0qKVMpPyk/fChbMC05LC5dKilXKSQvLEtiPS8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhNb3xNTT9NP00/fERvfERERG98REQ/RD9EP3xkZGQ/ZD98ZG8/fHdbb3x3XT98V1tvfFddP3xRfFlZWVlZWXxZWVlZWXxZWVlZfFlZfGdnKGdnZz8pP3xHRyhHR0c/KT98ZXxFfGF8QXxoaD98SEg/fG1tP3xzcz98U3sxLDR9fFh8eno/fFpaP3wuKS9nLExiPS8oXFxbW15cXFtdKlxcXSl8KFxcXFwpPyhMVHxMTD9MP0w/fGx7MSw0fSkvZyxNYj0vXFxkXFxkPy8sTmI9L1xcZHsxLDN9LyxPYj0vXFxkezEsNH0vLFBiPS9bK1xcLV0/XFxkezEsNn0vLFFiPS9cXGQrLyxSYj0vWzAtOV0qWydhLXpcXHUwMEEwLVxcdTA1RkZcXHUwNzAwLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRUZdK3xbXFx1MDYwMC1cXHUwNkZGXFwvXSsoXFxzKj9bXFx1MDYwMC1cXHUwNkZGXSspezEsMn0vaSxTYj0vWnxbXFwrXFwtXVxcZFxcZDo/XFxkXFxkL2dpLFRiPS9UL2ksVWI9L1tcXCtcXC1dP1xcZCsoXFwuXFxkezEsM30pPy8sVmI9L1xcZHsxLDJ9LyxXYj0vXFxkLyxYYj0vXFxkXFxkLyxZYj0vXFxkezN9LyxaYj0vXFxkezR9LywkYj0vWystXT9cXGR7Nn0vLF9iPS9bKy1dP1xcZCsvLGFjPS9eXFxzKig/OlsrLV1cXGR7Nn18XFxkezR9KS0oPzooXFxkXFxkLVxcZFxcZCl8KFdcXGRcXGQkKXwoV1xcZFxcZC1cXGQpfChcXGRcXGRcXGQpKSgoVHwgKShcXGRcXGQoOlxcZFxcZCg6XFxkXFxkKFxcLlxcZCspPyk/KT8pPyhbXFwrXFwtXVxcZFxcZCg/Ojo/XFxkXFxkKT98XFxzKlopPyk/JC8sYmM9XCJZWVlZLU1NLUREVEhIOm1tOnNzWlwiLGNjPVtbXCJZWVlZWVktTU0tRERcIiwvWystXVxcZHs2fS1cXGR7Mn0tXFxkezJ9L10sW1wiWVlZWS1NTS1ERFwiLC9cXGR7NH0tXFxkezJ9LVxcZHsyfS9dLFtcIkdHR0ctW1ddV1ctRVwiLC9cXGR7NH0tV1xcZHsyfS1cXGQvXSxbXCJHR0dHLVtXXVdXXCIsL1xcZHs0fS1XXFxkezJ9L10sW1wiWVlZWS1ERERcIiwvXFxkezR9LVxcZHszfS9dXSxkYz1bW1wiSEg6bW06c3MuU1NTU1wiLC8oVHwgKVxcZFxcZDpcXGRcXGQ6XFxkXFxkXFwuXFxkKy9dLFtcIkhIOm1tOnNzXCIsLyhUfCApXFxkXFxkOlxcZFxcZDpcXGRcXGQvXSxbXCJISDptbVwiLC8oVHwgKVxcZFxcZDpcXGRcXGQvXSxbXCJISFwiLC8oVHwgKVxcZFxcZC9dXSxlYz0vKFtcXCtcXC1dfFxcZFxcZCkvZ2ksZmM9KFwiRGF0ZXxIb3Vyc3xNaW51dGVzfFNlY29uZHN8TWlsbGlzZWNvbmRzXCIuc3BsaXQoXCJ8XCIpLHtNaWxsaXNlY29uZHM6MSxTZWNvbmRzOjFlMyxNaW51dGVzOjZlNCxIb3VyczozNmU1LERheXM6ODY0ZTUsTW9udGhzOjI1OTJlNixZZWFyczozMTUzNmU2fSksZ2M9e21zOlwibWlsbGlzZWNvbmRcIixzOlwic2Vjb25kXCIsbTpcIm1pbnV0ZVwiLGg6XCJob3VyXCIsZDpcImRheVwiLEQ6XCJkYXRlXCIsdzpcIndlZWtcIixXOlwiaXNvV2Vla1wiLE06XCJtb250aFwiLFE6XCJxdWFydGVyXCIseTpcInllYXJcIixEREQ6XCJkYXlPZlllYXJcIixlOlwid2Vla2RheVwiLEU6XCJpc29XZWVrZGF5XCIsZ2c6XCJ3ZWVrWWVhclwiLEdHOlwiaXNvV2Vla1llYXJcIn0saGM9e2RheW9meWVhcjpcImRheU9mWWVhclwiLGlzb3dlZWtkYXk6XCJpc29XZWVrZGF5XCIsaXNvd2VlazpcImlzb1dlZWtcIix3ZWVreWVhcjpcIndlZWtZZWFyXCIsaXNvd2Vla3llYXI6XCJpc29XZWVrWWVhclwifSxpYz17fSxqYz17czo0NSxtOjQ1LGg6MjIsZDoyNixNOjExfSxrYz1cIkRERCB3IFcgTSBEIGRcIi5zcGxpdChcIiBcIiksbGM9XCJNIEQgSCBoIG0gcyB3IFdcIi5zcGxpdChcIiBcIiksbWM9e006ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tb250aCgpKzF9LE1NTTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzU2hvcnQodGhpcyxhKX0sTU1NTTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubW9udGhzKHRoaXMsYSl9LEQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRlKCl9LERERDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRheU9mWWVhcigpfSxkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF5KCl9LGRkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5c01pbih0aGlzLGEpfSxkZGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzU2hvcnQodGhpcyxhKX0sZGRkZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXModGhpcyxhKX0sdzpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlZWsoKX0sVzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzb1dlZWsoKX0sWVk6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLnllYXIoKSUxMDAsMil9LFlZWVk6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLnllYXIoKSw0KX0sWVlZWVk6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLnllYXIoKSw1KX0sWVlZWVlZOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy55ZWFyKCksYj1hPj0wP1wiK1wiOlwiLVwiO3JldHVybiBiK28oTWF0aC5hYnMoYSksNil9LGdnOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy53ZWVrWWVhcigpJTEwMCwyKX0sZ2dnZzpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMud2Vla1llYXIoKSw0KX0sZ2dnZ2c6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLndlZWtZZWFyKCksNSl9LEdHOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy5pc29XZWVrWWVhcigpJTEwMCwyKX0sR0dHRzpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMuaXNvV2Vla1llYXIoKSw0KX0sR0dHR0c6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLmlzb1dlZWtZZWFyKCksNSl9LGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZWVrZGF5KCl9LEU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pc29XZWVrZGF5KCl9LGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkubWVyaWRpZW0odGhpcy5ob3VycygpLHRoaXMubWludXRlcygpLCEwKX0sQTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksdGhpcy5taW51dGVzKCksITEpfSxIOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG91cnMoKX0saDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmhvdXJzKCklMTJ8fDEyfSxtOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWludXRlcygpfSxzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2Vjb25kcygpfSxTOmZ1bmN0aW9uKCl7cmV0dXJuIHoodGhpcy5taWxsaXNlY29uZHMoKS8xMDApfSxTUzpmdW5jdGlvbigpe3JldHVybiBvKHoodGhpcy5taWxsaXNlY29uZHMoKS8xMCksMil9LFNTUzpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMubWlsbGlzZWNvbmRzKCksMyl9LFNTU1M6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLm1pbGxpc2Vjb25kcygpLDMpfSxaOmZ1bmN0aW9uKCl7dmFyIGE9LXRoaXMuem9uZSgpLGI9XCIrXCI7cmV0dXJuIDA+YSYmKGE9LWEsYj1cIi1cIiksYitvKHooYS82MCksMikrXCI6XCIrbyh6KGEpJTYwLDIpfSxaWjpmdW5jdGlvbigpe3ZhciBhPS10aGlzLnpvbmUoKSxiPVwiK1wiO3JldHVybiAwPmEmJihhPS1hLGI9XCItXCIpLGIrbyh6KGEvNjApLDIpK28oeihhKSU2MCwyKX0sejpmdW5jdGlvbigpe3JldHVybiB0aGlzLnpvbmVBYmJyKCl9LHp6OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuem9uZU5hbWUoKX0sWDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnVuaXgoKX0sUTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnF1YXJ0ZXIoKX19LG5jPXt9LG9jPVtcIm1vbnRoc1wiLFwibW9udGhzU2hvcnRcIixcIndlZWtkYXlzXCIsXCJ3ZWVrZGF5c1Nob3J0XCIsXCJ3ZWVrZGF5c01pblwiXTtrYy5sZW5ndGg7KXRiPWtjLnBvcCgpLG1jW3RiK1wib1wiXT1oKG1jW3RiXSx0Yik7Zm9yKDtsYy5sZW5ndGg7KXRiPWxjLnBvcCgpLG1jW3RiK3RiXT1nKG1jW3RiXSwyKTttYy5EREREPWcobWMuRERELDMpLGwoaS5wcm90b3R5cGUse3NldDpmdW5jdGlvbihhKXt2YXIgYixjO2ZvcihjIGluIGEpYj1hW2NdLFwiZnVuY3Rpb25cIj09dHlwZW9mIGI/dGhpc1tjXT1iOnRoaXNbXCJfXCIrY109Yn0sX21vbnRoczpcIkphbnVhcnlfRmVicnVhcnlfTWFyY2hfQXByaWxfTWF5X0p1bmVfSnVseV9BdWd1c3RfU2VwdGVtYmVyX09jdG9iZXJfTm92ZW1iZXJfRGVjZW1iZXJcIi5zcGxpdChcIl9cIiksbW9udGhzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9tb250aHNbYS5tb250aCgpXX0sX21vbnRoc1Nob3J0OlwiSmFuX0ZlYl9NYXJfQXByX01heV9KdW5fSnVsX0F1Z19TZXBfT2N0X05vdl9EZWNcIi5zcGxpdChcIl9cIiksbW9udGhzU2hvcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX21vbnRoc1Nob3J0W2EubW9udGgoKV19LG1vbnRoc1BhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtmb3IodGhpcy5fbW9udGhzUGFyc2V8fCh0aGlzLl9tb250aHNQYXJzZT1bXSksYj0wOzEyPmI7YisrKWlmKHRoaXMuX21vbnRoc1BhcnNlW2JdfHwoYz1yYi51dGMoWzJlMyxiXSksZD1cIl5cIit0aGlzLm1vbnRocyhjLFwiXCIpK1wifF5cIit0aGlzLm1vbnRoc1Nob3J0KGMsXCJcIiksdGhpcy5fbW9udGhzUGFyc2VbYl09bmV3IFJlZ0V4cChkLnJlcGxhY2UoXCIuXCIsXCJcIiksXCJpXCIpKSx0aGlzLl9tb250aHNQYXJzZVtiXS50ZXN0KGEpKXJldHVybiBifSxfd2Vla2RheXM6XCJTdW5kYXlfTW9uZGF5X1R1ZXNkYXlfV2VkbmVzZGF5X1RodXJzZGF5X0ZyaWRheV9TYXR1cmRheVwiLnNwbGl0KFwiX1wiKSx3ZWVrZGF5czpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fd2Vla2RheXNbYS5kYXkoKV19LF93ZWVrZGF5c1Nob3J0OlwiU3VuX01vbl9UdWVfV2VkX1RodV9GcmlfU2F0XCIuc3BsaXQoXCJfXCIpLHdlZWtkYXlzU2hvcnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzU2hvcnRbYS5kYXkoKV19LF93ZWVrZGF5c01pbjpcIlN1X01vX1R1X1dlX1RoX0ZyX1NhXCIuc3BsaXQoXCJfXCIpLHdlZWtkYXlzTWluOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl93ZWVrZGF5c01pblthLmRheSgpXX0sd2Vla2RheXNQYXJzZTpmdW5jdGlvbihhKXt2YXIgYixjLGQ7Zm9yKHRoaXMuX3dlZWtkYXlzUGFyc2V8fCh0aGlzLl93ZWVrZGF5c1BhcnNlPVtdKSxiPTA7Nz5iO2IrKylpZih0aGlzLl93ZWVrZGF5c1BhcnNlW2JdfHwoYz1yYihbMmUzLDFdKS5kYXkoYiksZD1cIl5cIit0aGlzLndlZWtkYXlzKGMsXCJcIikrXCJ8XlwiK3RoaXMud2Vla2RheXNTaG9ydChjLFwiXCIpK1wifF5cIit0aGlzLndlZWtkYXlzTWluKGMsXCJcIiksdGhpcy5fd2Vla2RheXNQYXJzZVtiXT1uZXcgUmVnRXhwKGQucmVwbGFjZShcIi5cIixcIlwiKSxcImlcIikpLHRoaXMuX3dlZWtkYXlzUGFyc2VbYl0udGVzdChhKSlyZXR1cm4gYn0sX2xvbmdEYXRlRm9ybWF0OntMVDpcImg6bW0gQVwiLEw6XCJNTS9ERC9ZWVlZXCIsTEw6XCJNTU1NIEQsIFlZWVlcIixMTEw6XCJNTU1NIEQsIFlZWVkgTFRcIixMTExMOlwiZGRkZCwgTU1NTSBELCBZWVlZIExUXCJ9LGxvbmdEYXRlRm9ybWF0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2xvbmdEYXRlRm9ybWF0W2FdO3JldHVybiFiJiZ0aGlzLl9sb25nRGF0ZUZvcm1hdFthLnRvVXBwZXJDYXNlKCldJiYoYj10aGlzLl9sb25nRGF0ZUZvcm1hdFthLnRvVXBwZXJDYXNlKCldLnJlcGxhY2UoL01NTU18TU18RER8ZGRkZC9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnNsaWNlKDEpfSksdGhpcy5fbG9uZ0RhdGVGb3JtYXRbYV09YiksYn0saXNQTTpmdW5jdGlvbihhKXtyZXR1cm5cInBcIj09PShhK1wiXCIpLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApfSxfbWVyaWRpZW1QYXJzZTovW2FwXVxcLj9tP1xcLj8vaSxtZXJpZGllbTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGE+MTE/Yz9cInBtXCI6XCJQTVwiOmM/XCJhbVwiOlwiQU1cIn0sX2NhbGVuZGFyOntzYW1lRGF5OlwiW1RvZGF5IGF0XSBMVFwiLG5leHREYXk6XCJbVG9tb3Jyb3cgYXRdIExUXCIsbmV4dFdlZWs6XCJkZGRkIFthdF0gTFRcIixsYXN0RGF5OlwiW1llc3RlcmRheSBhdF0gTFRcIixsYXN0V2VlazpcIltMYXN0XSBkZGRkIFthdF0gTFRcIixzYW1lRWxzZTpcIkxcIn0sY2FsZW5kYXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9jYWxlbmRhclthXTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBjP2MuYXBwbHkoYik6Y30sX3JlbGF0aXZlVGltZTp7ZnV0dXJlOlwiaW4gJXNcIixwYXN0OlwiJXMgYWdvXCIsczpcImEgZmV3IHNlY29uZHNcIixtOlwiYSBtaW51dGVcIixtbTpcIiVkIG1pbnV0ZXNcIixoOlwiYW4gaG91clwiLGhoOlwiJWQgaG91cnNcIixkOlwiYSBkYXlcIixkZDpcIiVkIGRheXNcIixNOlwiYSBtb250aFwiLE1NOlwiJWQgbW9udGhzXCIseTpcImEgeWVhclwiLHl5OlwiJWQgeWVhcnNcIn0scmVsYXRpdmVUaW1lOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuX3JlbGF0aXZlVGltZVtjXTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlP2UoYSxiLGMsZCk6ZS5yZXBsYWNlKC8lZC9pLGEpfSxwYXN0RnV0dXJlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5fcmVsYXRpdmVUaW1lW2E+MD9cImZ1dHVyZVwiOlwicGFzdFwiXTtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBjP2MoYik6Yy5yZXBsYWNlKC8lcy9pLGIpfSxvcmRpbmFsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9vcmRpbmFsLnJlcGxhY2UoXCIlZFwiLGEpfSxfb3JkaW5hbDpcIiVkXCIscHJlcGFyc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHBvc3Rmb3JtYXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHdlZWs6ZnVuY3Rpb24oYSl7cmV0dXJuIGZiKGEsdGhpcy5fd2Vlay5kb3csdGhpcy5fd2Vlay5kb3kpLndlZWt9LF93ZWVrOntkb3c6MCxkb3k6Nn0sX2ludmFsaWREYXRlOlwiSW52YWxpZCBkYXRlXCIsaW52YWxpZERhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW52YWxpZERhdGV9fSkscmI9ZnVuY3Rpb24oYixkLGUsZil7dmFyIGc7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlJiYoZj1lLGU9YSksZz17fSxnLl9pc0FNb21lbnRPYmplY3Q9ITAsZy5faT1iLGcuX2Y9ZCxnLl9sPWUsZy5fc3RyaWN0PWYsZy5faXNVVEM9ITEsZy5fcGY9YygpLGhiKGcpfSxyYi5zdXBwcmVzc0RlcHJlY2F0aW9uV2FybmluZ3M9ITEscmIuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2s9ZShcIm1vbWVudCBjb25zdHJ1Y3Rpb24gZmFsbHMgYmFjayB0byBqcyBEYXRlLiBUaGlzIGlzIGRpc2NvdXJhZ2VkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBjb21pbmcgbWFqb3IgcmVsZWFzZS4gUGxlYXNlIHJlZmVyIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNDA3IGZvciBtb3JlIGluZm8uXCIsZnVuY3Rpb24oYSl7YS5fZD1uZXcgRGF0ZShhLl9pKX0pLHJiLm1pbj1mdW5jdGlvbigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBpYihcImlzQmVmb3JlXCIsYSl9LHJiLm1heD1mdW5jdGlvbigpe3ZhciBhPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBpYihcImlzQWZ0ZXJcIixhKX0scmIudXRjPWZ1bmN0aW9uKGIsZCxlLGYpe3ZhciBnO3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZSYmKGY9ZSxlPWEpLGc9e30sZy5faXNBTW9tZW50T2JqZWN0PSEwLGcuX3VzZVVUQz0hMCxnLl9pc1VUQz0hMCxnLl9sPWUsZy5faT1iLGcuX2Y9ZCxnLl9zdHJpY3Q9ZixnLl9wZj1jKCksaGIoZykudXRjKCl9LHJiLnVuaXg9ZnVuY3Rpb24oYSl7cmV0dXJuIHJiKDFlMyphKX0scmIuZHVyYXRpb249ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZixnPWEsaD1udWxsO3JldHVybiByYi5pc0R1cmF0aW9uKGEpP2c9e21zOmEuX21pbGxpc2Vjb25kcyxkOmEuX2RheXMsTTphLl9tb250aHN9OlwibnVtYmVyXCI9PXR5cGVvZiBhPyhnPXt9LGI/Z1tiXT1hOmcubWlsbGlzZWNvbmRzPWEpOihoPUliLmV4ZWMoYSkpPyhjPVwiLVwiPT09aFsxXT8tMToxLGc9e3k6MCxkOnooaFt6Yl0pKmMsaDp6KGhbQWJdKSpjLG06eihoW0JiXSkqYyxzOnooaFtDYl0pKmMsbXM6eihoW0RiXSkqY30pOihoPUpiLmV4ZWMoYSkpPyhjPVwiLVwiPT09aFsxXT8tMToxLGU9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmcGFyc2VGbG9hdChhLnJlcGxhY2UoXCIsXCIsXCIuXCIpKTtyZXR1cm4oaXNOYU4oYik/MDpiKSpjfSxnPXt5OmUoaFsyXSksTTplKGhbM10pLGQ6ZShoWzRdKSxoOmUoaFs1XSksbTplKGhbNl0pLHM6ZShoWzddKSx3OmUoaFs4XSl9KTpcIm9iamVjdFwiPT10eXBlb2YgZyYmKFwiZnJvbVwiaW4gZ3x8XCJ0b1wiaW4gZykmJihmPXEocmIoZy5mcm9tKSxyYihnLnRvKSksZz17fSxnLm1zPWYubWlsbGlzZWNvbmRzLGcuTT1mLm1vbnRocyksZD1uZXcgayhnKSxyYi5pc0R1cmF0aW9uKGEpJiZhLmhhc093blByb3BlcnR5KFwiX2xvY2FsZVwiKSYmKGQuX2xvY2FsZT1hLl9sb2NhbGUpLGR9LHJiLnZlcnNpb249dWIscmIuZGVmYXVsdEZvcm1hdD1iYyxyYi5JU09fODYwMT1mdW5jdGlvbigpe30scmIubW9tZW50UHJvcGVydGllcz1GYixyYi51cGRhdGVPZmZzZXQ9ZnVuY3Rpb24oKXt9LHJiLnJlbGF0aXZlVGltZVRocmVzaG9sZD1mdW5jdGlvbihiLGMpe3JldHVybiBqY1tiXT09PWE/ITE6Yz09PWE/amNbYl06KGpjW2JdPWMsITApfSxyYi5sYW5nPWUoXCJtb21lbnQubGFuZyBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50LmxvY2FsZSBpbnN0ZWFkLlwiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIHJiLmxvY2FsZShhLGIpfSkscmIubG9jYWxlPWZ1bmN0aW9uKGEsYil7dmFyIGM7cmV0dXJuIGEmJihjPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP3JiLmRlZmluZUxvY2FsZShhLGIpOnJiLmxvY2FsZURhdGEoYSksYyYmKHJiLmR1cmF0aW9uLl9sb2NhbGU9cmIuX2xvY2FsZT1jKSkscmIuX2xvY2FsZS5fYWJicn0scmIuZGVmaW5lTG9jYWxlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGwhPT1iPyhiLmFiYnI9YSxFYlthXXx8KEViW2FdPW5ldyBpKSxFYlthXS5zZXQoYikscmIubG9jYWxlKGEpLEViW2FdKTooZGVsZXRlIEViW2FdLG51bGwpfSxyYi5sYW5nRGF0YT1lKFwibW9tZW50LmxhbmdEYXRhIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlRGF0YSBpbnN0ZWFkLlwiLGZ1bmN0aW9uKGEpe3JldHVybiByYi5sb2NhbGVEYXRhKGEpfSkscmIubG9jYWxlRGF0YT1mdW5jdGlvbihhKXt2YXIgYjtpZihhJiZhLl9sb2NhbGUmJmEuX2xvY2FsZS5fYWJiciYmKGE9YS5fbG9jYWxlLl9hYmJyKSwhYSlyZXR1cm4gcmIuX2xvY2FsZTtpZighdChhKSl7aWYoYj1JKGEpKXJldHVybiBiO2E9W2FdfXJldHVybiBIKGEpfSxyYi5pc01vbWVudD1mdW5jdGlvbihhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIGp8fG51bGwhPWEmJmEuaGFzT3duUHJvcGVydHkoXCJfaXNBTW9tZW50T2JqZWN0XCIpfSxyYi5pc0R1cmF0aW9uPWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2Yga307Zm9yKHRiPW9jLmxlbmd0aC0xO3RiPj0wOy0tdGIpeShvY1t0Yl0pO3JiLm5vcm1hbGl6ZVVuaXRzPWZ1bmN0aW9uKGEpe3JldHVybiB3KGEpfSxyYi5pbnZhbGlkPWZ1bmN0aW9uKGEpe3ZhciBiPXJiLnV0YygwLzApO3JldHVybiBudWxsIT1hP2woYi5fcGYsYSk6Yi5fcGYudXNlckludmFsaWRhdGVkPSEwLGJ9LHJiLnBhcnNlWm9uZT1mdW5jdGlvbigpe3JldHVybiByYi5hcHBseShudWxsLGFyZ3VtZW50cykucGFyc2Vab25lKCl9LHJiLnBhcnNlVHdvRGlnaXRZZWFyPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpKyh6KGEpPjY4PzE5MDA6MmUzKX0sbChyYi5mbj1qLnByb3RvdHlwZSx7Y2xvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gcmIodGhpcyl9LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4rdGhpcy5fZCs2ZTQqKHRoaXMuX29mZnNldHx8MCl9LHVuaXg6ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5mbG9vcigrdGhpcy8xZTMpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNsb25lKCkubG9jYWxlKFwiZW5cIikuZm9ybWF0KFwiZGRkIE1NTSBERCBZWVlZIEhIOm1tOnNzIFtHTVRdWlpcIil9LHRvRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9vZmZzZXQ/bmV3IERhdGUoK3RoaXMpOnRoaXMuX2R9LHRvSVNPU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGE9cmIodGhpcykudXRjKCk7cmV0dXJuIDA8YS55ZWFyKCkmJmEueWVhcigpPD05OTk5P00oYSxcIllZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl1cIik6TShhLFwiWVlZWVlZLU1NLUREW1RdSEg6bW06c3MuU1NTW1pdXCIpfSx0b0FycmF5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztyZXR1cm5bYS55ZWFyKCksYS5tb250aCgpLGEuZGF0ZSgpLGEuaG91cnMoKSxhLm1pbnV0ZXMoKSxhLnNlY29uZHMoKSxhLm1pbGxpc2Vjb25kcygpXX0saXNWYWxpZDpmdW5jdGlvbigpe3JldHVybiBGKHRoaXMpfSxpc0RTVFNoaWZ0ZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYT90aGlzLmlzVmFsaWQoKSYmdih0aGlzLl9hLCh0aGlzLl9pc1VUQz9yYi51dGModGhpcy5fYSk6cmIodGhpcy5fYSkpLnRvQXJyYXkoKSk+MDohMX0scGFyc2luZ0ZsYWdzOmZ1bmN0aW9uKCl7cmV0dXJuIGwoe30sdGhpcy5fcGYpfSxpbnZhbGlkQXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGYub3ZlcmZsb3d9LHV0YzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy56b25lKDAsYSl9LGxvY2FsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl9pc1VUQyYmKHRoaXMuem9uZSgwLGEpLHRoaXMuX2lzVVRDPSExLGEmJnRoaXMuYWRkKHRoaXMuX2QuZ2V0VGltZXpvbmVPZmZzZXQoKSxcIm1cIikpLHRoaXN9LGZvcm1hdDpmdW5jdGlvbihhKXt2YXIgYj1NKHRoaXMsYXx8cmIuZGVmYXVsdEZvcm1hdCk7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQoYil9LGFkZDpyKDEsXCJhZGRcIiksc3VidHJhY3Q6cigtMSxcInN1YnRyYWN0XCIpLGRpZmY6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1KKGEsdGhpcyksZz02ZTQqKHRoaXMuem9uZSgpLWYuem9uZSgpKTtyZXR1cm4gYj13KGIpLFwieWVhclwiPT09Ynx8XCJtb250aFwiPT09Yj8oZD00MzJlNSoodGhpcy5kYXlzSW5Nb250aCgpK2YuZGF5c0luTW9udGgoKSksZT0xMioodGhpcy55ZWFyKCktZi55ZWFyKCkpKyh0aGlzLm1vbnRoKCktZi5tb250aCgpKSxlKz0odGhpcy1yYih0aGlzKS5zdGFydE9mKFwibW9udGhcIiktKGYtcmIoZikuc3RhcnRPZihcIm1vbnRoXCIpKSkvZCxlLT02ZTQqKHRoaXMuem9uZSgpLXJiKHRoaXMpLnN0YXJ0T2YoXCJtb250aFwiKS56b25lKCktKGYuem9uZSgpLXJiKGYpLnN0YXJ0T2YoXCJtb250aFwiKS56b25lKCkpKS9kLFwieWVhclwiPT09YiYmKGUvPTEyKSk6KGQ9dGhpcy1mLGU9XCJzZWNvbmRcIj09PWI/ZC8xZTM6XCJtaW51dGVcIj09PWI/ZC82ZTQ6XCJob3VyXCI9PT1iP2QvMzZlNTpcImRheVwiPT09Yj8oZC1nKS84NjRlNTpcIndlZWtcIj09PWI/KGQtZykvNjA0OGU1OmQpLGM/ZTpuKGUpfSxmcm9tOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHJiLmR1cmF0aW9uKHt0bzp0aGlzLGZyb206YX0pLmxvY2FsZSh0aGlzLmxvY2FsZSgpKS5odW1hbml6ZSghYil9LGZyb21Ob3c6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZnJvbShyYigpLGEpfSxjYWxlbmRhcjpmdW5jdGlvbihhKXt2YXIgYj1hfHxyYigpLGM9SihiLHRoaXMpLnN0YXJ0T2YoXCJkYXlcIiksZD10aGlzLmRpZmYoYyxcImRheXNcIiwhMCksZT0tNj5kP1wic2FtZUVsc2VcIjotMT5kP1wibGFzdFdlZWtcIjowPmQ/XCJsYXN0RGF5XCI6MT5kP1wic2FtZURheVwiOjI+ZD9cIm5leHREYXlcIjo3PmQ/XCJuZXh0V2Vla1wiOlwic2FtZUVsc2VcIjtyZXR1cm4gdGhpcy5mb3JtYXQodGhpcy5sb2NhbGVEYXRhKCkuY2FsZW5kYXIoZSx0aGlzKSl9LGlzTGVhcFllYXI6ZnVuY3Rpb24oKXtyZXR1cm4gRCh0aGlzLnllYXIoKSl9LGlzRFNUOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuem9uZSgpPHRoaXMuY2xvbmUoKS5tb250aCgwKS56b25lKCl8fHRoaXMuem9uZSgpPHRoaXMuY2xvbmUoKS5tb250aCg1KS56b25lKCl9LGRheTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLl9pc1VUQz90aGlzLl9kLmdldFVUQ0RheSgpOnRoaXMuX2QuZ2V0RGF5KCk7cmV0dXJuIG51bGwhPWE/KGE9Y2IoYSx0aGlzLmxvY2FsZURhdGEoKSksdGhpcy5hZGQoYS1iLFwiZFwiKSk6Yn0sbW9udGg6bWIoXCJNb250aFwiLCEwKSxzdGFydE9mOmZ1bmN0aW9uKGEpe3N3aXRjaChhPXcoYSkpe2Nhc2VcInllYXJcIjp0aGlzLm1vbnRoKDApO2Nhc2VcInF1YXJ0ZXJcIjpjYXNlXCJtb250aFwiOnRoaXMuZGF0ZSgxKTtjYXNlXCJ3ZWVrXCI6Y2FzZVwiaXNvV2Vla1wiOmNhc2VcImRheVwiOnRoaXMuaG91cnMoMCk7Y2FzZVwiaG91clwiOnRoaXMubWludXRlcygwKTtjYXNlXCJtaW51dGVcIjp0aGlzLnNlY29uZHMoMCk7Y2FzZVwic2Vjb25kXCI6dGhpcy5taWxsaXNlY29uZHMoMCl9cmV0dXJuXCJ3ZWVrXCI9PT1hP3RoaXMud2Vla2RheSgwKTpcImlzb1dlZWtcIj09PWEmJnRoaXMuaXNvV2Vla2RheSgxKSxcInF1YXJ0ZXJcIj09PWEmJnRoaXMubW9udGgoMypNYXRoLmZsb29yKHRoaXMubW9udGgoKS8zKSksdGhpc30sZW5kT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dyhhKSx0aGlzLnN0YXJ0T2YoYSkuYWRkKDEsXCJpc29XZWVrXCI9PT1hP1wid2Vla1wiOmEpLnN1YnRyYWN0KDEsXCJtc1wiKX0saXNBZnRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP2I6XCJtaWxsaXNlY29uZFwiLCt0aGlzLmNsb25lKCkuc3RhcnRPZihiKT4rcmIoYSkuc3RhcnRPZihiKX0saXNCZWZvcmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj1cInVuZGVmaW5lZFwiIT10eXBlb2YgYj9iOlwibWlsbGlzZWNvbmRcIiwrdGhpcy5jbG9uZSgpLnN0YXJ0T2YoYik8K3JiKGEpLnN0YXJ0T2YoYil9LGlzU2FtZTpmdW5jdGlvbihhLGIpe3JldHVybiBiPWJ8fFwibXNcIiwrdGhpcy5jbG9uZSgpLnN0YXJ0T2YoYik9PT0rSihhLHRoaXMpLnN0YXJ0T2YoYil9LG1pbjplKFwibW9tZW50KCkubWluIGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWluIGluc3RlYWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNTQ4XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGE9cmIuYXBwbHkobnVsbCxhcmd1bWVudHMpLHRoaXM+YT90aGlzOmF9KSxtYXg6ZShcIm1vbWVudCgpLm1heCBpcyBkZXByZWNhdGVkLCB1c2UgbW9tZW50Lm1heCBpbnN0ZWFkLiBodHRwczovL2dpdGh1Yi5jb20vbW9tZW50L21vbWVudC9pc3N1ZXMvMTU0OFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhPXJiLmFwcGx5KG51bGwsYXJndW1lbnRzKSxhPnRoaXM/dGhpczphfSksem9uZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5fb2Zmc2V0fHwwO3JldHVybiBudWxsPT1hP3RoaXMuX2lzVVRDP2Q6dGhpcy5fZC5nZXRUaW1lem9uZU9mZnNldCgpOihcInN0cmluZ1wiPT10eXBlb2YgYSYmKGE9UChhKSksTWF0aC5hYnMoYSk8MTYmJihhPTYwKmEpLCF0aGlzLl9pc1VUQyYmYiYmKGM9dGhpcy5fZC5nZXRUaW1lem9uZU9mZnNldCgpKSx0aGlzLl9vZmZzZXQ9YSx0aGlzLl9pc1VUQz0hMCxudWxsIT1jJiZ0aGlzLnN1YnRyYWN0KGMsXCJtXCIpLGQhPT1hJiYoIWJ8fHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M/cyh0aGlzLHJiLmR1cmF0aW9uKGQtYSxcIm1cIiksMSwhMSk6dGhpcy5fY2hhbmdlSW5Qcm9ncmVzc3x8KHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9ITAscmIudXBkYXRlT2Zmc2V0KHRoaXMsITApLHRoaXMuX2NoYW5nZUluUHJvZ3Jlc3M9bnVsbCkpLHRoaXMpfSx6b25lQWJicjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1VUQz9cIlVUQ1wiOlwiXCJ9LHpvbmVOYW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDP1wiQ29vcmRpbmF0ZWQgVW5pdmVyc2FsIFRpbWVcIjpcIlwifSxwYXJzZVpvbmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHptP3RoaXMuem9uZSh0aGlzLl90em0pOlwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLl9pJiZ0aGlzLnpvbmUodGhpcy5faSksdGhpc30saGFzQWxpZ25lZEhvdXJPZmZzZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9YT9yYihhKS56b25lKCk6MCwodGhpcy56b25lKCktYSklNjA9PT0wfSxkYXlzSW5Nb250aDpmdW5jdGlvbigpe3JldHVybiBBKHRoaXMueWVhcigpLHRoaXMubW9udGgoKSl9LGRheU9mWWVhcjpmdW5jdGlvbihhKXt2YXIgYj13YigocmIodGhpcykuc3RhcnRPZihcImRheVwiKS1yYih0aGlzKS5zdGFydE9mKFwieWVhclwiKSkvODY0ZTUpKzE7cmV0dXJuIG51bGw9PWE/Yjp0aGlzLmFkZChhLWIsXCJkXCIpfSxxdWFydGVyOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP01hdGguY2VpbCgodGhpcy5tb250aCgpKzEpLzMpOnRoaXMubW9udGgoMyooYS0xKSt0aGlzLm1vbnRoKCklMyl9LHdlZWtZZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPWZiKHRoaXMsdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93LHRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRveSkueWVhcjtyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcInlcIil9LGlzb1dlZWtZZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPWZiKHRoaXMsMSw0KS55ZWFyO3JldHVybiBudWxsPT1hP2I6dGhpcy5hZGQoYS1iLFwieVwiKX0sd2VlazpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmxvY2FsZURhdGEoKS53ZWVrKHRoaXMpO3JldHVybiBudWxsPT1hP2I6dGhpcy5hZGQoNyooYS1iKSxcImRcIil9LGlzb1dlZWs6ZnVuY3Rpb24oYSl7dmFyIGI9ZmIodGhpcywxLDQpLndlZWs7cmV0dXJuIG51bGw9PWE/Yjp0aGlzLmFkZCg3KihhLWIpLFwiZFwiKX0sd2Vla2RheTpmdW5jdGlvbihhKXt2YXIgYj0odGhpcy5kYXkoKSs3LXRoaXMubG9jYWxlRGF0YSgpLl93ZWVrLmRvdyklNztyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcImRcIil9LGlzb1dlZWtkYXk6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/dGhpcy5kYXkoKXx8Nzp0aGlzLmRheSh0aGlzLmRheSgpJTc/YTphLTcpfSxpc29XZWVrc0luWWVhcjpmdW5jdGlvbigpe3JldHVybiBCKHRoaXMueWVhcigpLDEsNCl9LHdlZWtzSW5ZZWFyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2NhbGVEYXRhKCkuX3dlZWs7cmV0dXJuIEIodGhpcy55ZWFyKCksYS5kb3csYS5kb3kpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dyhhKSx0aGlzW2FdKCl9LHNldDpmdW5jdGlvbihhLGIpe3JldHVybiBhPXcoYSksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1thXSYmdGhpc1thXShiKSx0aGlzfSxsb2NhbGU6ZnVuY3Rpb24oYil7cmV0dXJuIGI9PT1hP3RoaXMuX2xvY2FsZS5fYWJicjoodGhpcy5fbG9jYWxlPXJiLmxvY2FsZURhdGEoYiksdGhpcyl9LGxhbmc6ZShcIm1vbWVudCgpLmxhbmcoKSBpcyBkZXByZWNhdGVkLiBVc2UgbW9tZW50KCkubG9jYWxlRGF0YSgpIGluc3RlYWQuXCIsZnVuY3Rpb24oYil7cmV0dXJuIGI9PT1hP3RoaXMubG9jYWxlRGF0YSgpOih0aGlzLl9sb2NhbGU9cmIubG9jYWxlRGF0YShiKSx0aGlzKX0pLGxvY2FsZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxlfX0pLHJiLmZuLm1pbGxpc2Vjb25kPXJiLmZuLm1pbGxpc2Vjb25kcz1tYihcIk1pbGxpc2Vjb25kc1wiLCExKSxyYi5mbi5zZWNvbmQ9cmIuZm4uc2Vjb25kcz1tYihcIlNlY29uZHNcIiwhMSkscmIuZm4ubWludXRlPXJiLmZuLm1pbnV0ZXM9bWIoXCJNaW51dGVzXCIsITEpLHJiLmZuLmhvdXI9cmIuZm4uaG91cnM9bWIoXCJIb3Vyc1wiLCEwKSxyYi5mbi5kYXRlPW1iKFwiRGF0ZVwiLCEwKSxyYi5mbi5kYXRlcz1lKFwiZGF0ZXMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIGRhdGUgaW5zdGVhZC5cIixtYihcIkRhdGVcIiwhMCkpLHJiLmZuLnllYXI9bWIoXCJGdWxsWWVhclwiLCEwKSxyYi5mbi55ZWFycz1lKFwieWVhcnMgYWNjZXNzb3IgaXMgZGVwcmVjYXRlZC4gVXNlIHllYXIgaW5zdGVhZC5cIixtYihcIkZ1bGxZZWFyXCIsITApKSxyYi5mbi5kYXlzPXJiLmZuLmRheSxyYi5mbi5tb250aHM9cmIuZm4ubW9udGgscmIuZm4ud2Vla3M9cmIuZm4ud2VlayxyYi5mbi5pc29XZWVrcz1yYi5mbi5pc29XZWVrLHJiLmZuLnF1YXJ0ZXJzPXJiLmZuLnF1YXJ0ZXIscmIuZm4udG9KU09OPXJiLmZuLnRvSVNPU3RyaW5nLGwocmIuZHVyYXRpb24uZm49ay5wcm90b3R5cGUse19idWJibGU6ZnVuY3Rpb24oKXt2YXIgYSxiLGMsZD10aGlzLl9taWxsaXNlY29uZHMsZT10aGlzLl9kYXlzLGY9dGhpcy5fbW9udGhzLGc9dGhpcy5fZGF0YSxoPTA7Zy5taWxsaXNlY29uZHM9ZCUxZTMsYT1uKGQvMWUzKSxnLnNlY29uZHM9YSU2MCxiPW4oYS82MCksZy5taW51dGVzPWIlNjAsYz1uKGIvNjApLGcuaG91cnM9YyUyNCxlKz1uKGMvMjQpLGg9bihuYihlKSksZS09bihvYihoKSksZis9bihlLzMwKSxlJT0zMCxoKz1uKGYvMTIpLGYlPTEyLGcuZGF5cz1lLGcubW9udGhzPWYsZy55ZWFycz1ofSxhYnM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWlsbGlzZWNvbmRzPU1hdGguYWJzKHRoaXMuX21pbGxpc2Vjb25kcyksdGhpcy5fZGF5cz1NYXRoLmFicyh0aGlzLl9kYXlzKSx0aGlzLl9tb250aHM9TWF0aC5hYnModGhpcy5fbW9udGhzKSx0aGlzLl9kYXRhLm1pbGxpc2Vjb25kcz1NYXRoLmFicyh0aGlzLl9kYXRhLm1pbGxpc2Vjb25kcyksdGhpcy5fZGF0YS5zZWNvbmRzPU1hdGguYWJzKHRoaXMuX2RhdGEuc2Vjb25kcyksdGhpcy5fZGF0YS5taW51dGVzPU1hdGguYWJzKHRoaXMuX2RhdGEubWludXRlcyksdGhpcy5fZGF0YS5ob3Vycz1NYXRoLmFicyh0aGlzLl9kYXRhLmhvdXJzKSx0aGlzLl9kYXRhLm1vbnRocz1NYXRoLmFicyh0aGlzLl9kYXRhLm1vbnRocyksdGhpcy5fZGF0YS55ZWFycz1NYXRoLmFicyh0aGlzLl9kYXRhLnllYXJzKSx0aGlzfSx3ZWVrczpmdW5jdGlvbigpe3JldHVybiBuKHRoaXMuZGF5cygpLzcpfSx2YWx1ZU9mOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcys4NjRlNSp0aGlzLl9kYXlzK3RoaXMuX21vbnRocyUxMioyNTkyZTYrMzE1MzZlNip6KHRoaXMuX21vbnRocy8xMil9LGh1bWFuaXplOmZ1bmN0aW9uKGEpe3ZhciBiPWViKHRoaXMsIWEsdGhpcy5sb2NhbGVEYXRhKCkpO3JldHVybiBhJiYoYj10aGlzLmxvY2FsZURhdGEoKS5wYXN0RnV0dXJlKCt0aGlzLGIpKSx0aGlzLmxvY2FsZURhdGEoKS5wb3N0Zm9ybWF0KGIpfSxhZGQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1yYi5kdXJhdGlvbihhLGIpO3JldHVybiB0aGlzLl9taWxsaXNlY29uZHMrPWMuX21pbGxpc2Vjb25kcyx0aGlzLl9kYXlzKz1jLl9kYXlzLHRoaXMuX21vbnRocys9Yy5fbW9udGhzLHRoaXMuX2J1YmJsZSgpLHRoaXN9LHN1YnRyYWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9cmIuZHVyYXRpb24oYSxiKTtyZXR1cm4gdGhpcy5fbWlsbGlzZWNvbmRzLT1jLl9taWxsaXNlY29uZHMsdGhpcy5fZGF5cy09Yy5fZGF5cyx0aGlzLl9tb250aHMtPWMuX21vbnRocyx0aGlzLl9idWJibGUoKSx0aGlzfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dyhhKSx0aGlzW2EudG9Mb3dlckNhc2UoKStcInNcIl0oKX0sYXM6ZnVuY3Rpb24oYSl7dmFyIGIsYztpZihhPXcoYSksYj10aGlzLl9kYXlzK3RoaXMuX21pbGxpc2Vjb25kcy84NjRlNSxcIm1vbnRoXCI9PT1hfHxcInllYXJcIj09PWEpcmV0dXJuIGM9dGhpcy5fbW9udGhzKzEyKm5iKGIpLFwibW9udGhcIj09PWE/YzpjLzEyO3N3aXRjaChiKz1vYih0aGlzLl9tb250aHMvMTIpLGEpe2Nhc2VcIndlZWtcIjpyZXR1cm4gYi83O2Nhc2VcImRheVwiOnJldHVybiBiO2Nhc2VcImhvdXJcIjpyZXR1cm4gMjQqYjtjYXNlXCJtaW51dGVcIjpyZXR1cm4gMjQqYio2MDtjYXNlXCJzZWNvbmRcIjpyZXR1cm4gMjQqYio2MCo2MDtjYXNlXCJtaWxsaXNlY29uZFwiOnJldHVybiAyNCpiKjYwKjYwKjFlMztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIlVua25vd24gdW5pdCBcIithKX19LGxhbmc6cmIuZm4ubGFuZyxsb2NhbGU6cmIuZm4ubG9jYWxlLHRvSXNvU3RyaW5nOmUoXCJ0b0lzb1N0cmluZygpIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgdG9JU09TdHJpbmcoKSBpbnN0ZWFkIChub3RpY2UgdGhlIGNhcGl0YWxzKVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9JU09TdHJpbmcoKX0pLHRvSVNPU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGE9TWF0aC5hYnModGhpcy55ZWFycygpKSxiPU1hdGguYWJzKHRoaXMubW9udGhzKCkpLGM9TWF0aC5hYnModGhpcy5kYXlzKCkpLGQ9TWF0aC5hYnModGhpcy5ob3VycygpKSxlPU1hdGguYWJzKHRoaXMubWludXRlcygpKSxmPU1hdGguYWJzKHRoaXMuc2Vjb25kcygpK3RoaXMubWlsbGlzZWNvbmRzKCkvMWUzKTtyZXR1cm4gdGhpcy5hc1NlY29uZHMoKT8odGhpcy5hc1NlY29uZHMoKTwwP1wiLVwiOlwiXCIpK1wiUFwiKyhhP2ErXCJZXCI6XCJcIikrKGI/YitcIk1cIjpcIlwiKSsoYz9jK1wiRFwiOlwiXCIpKyhkfHxlfHxmP1wiVFwiOlwiXCIpKyhkP2QrXCJIXCI6XCJcIikrKGU/ZStcIk1cIjpcIlwiKSsoZj9mK1wiU1wiOlwiXCIpOlwiUDBEXCJ9LGxvY2FsZURhdGE6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9jYWxlfX0pO2Zvcih0YiBpbiBmYylmYy5oYXNPd25Qcm9wZXJ0eSh0YikmJnBiKHRiLnRvTG93ZXJDYXNlKCkpO3JiLmR1cmF0aW9uLmZuLmFzTWlsbGlzZWNvbmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoXCJtc1wiKX0scmIuZHVyYXRpb24uZm4uYXNTZWNvbmRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoXCJzXCIpfSxyYi5kdXJhdGlvbi5mbi5hc01pbnV0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcyhcIm1cIil9LHJiLmR1cmF0aW9uLmZuLmFzSG91cnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcyhcImhcIil9LHJiLmR1cmF0aW9uLmZuLmFzRGF5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKFwiZFwiKX0scmIuZHVyYXRpb24uZm4uYXNXZWVrcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKFwid2Vla3NcIil9LHJiLmR1cmF0aW9uLmZuLmFzTW9udGhzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoXCJNXCIpfSxyYi5kdXJhdGlvbi5mbi5hc1llYXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoXCJ5XCIpfSxyYi5sb2NhbGUoXCJlblwiLHtvcmRpbmFsOmZ1bmN0aW9uKGEpe3ZhciBiPWElMTAsYz0xPT09eihhJTEwMC8xMCk/XCJ0aFwiOjE9PT1iP1wic3RcIjoyPT09Yj9cIm5kXCI6Mz09PWI/XCJyZFwiOlwidGhcIjtyZXR1cm4gYStjfX0pLEdiP21vZHVsZS5leHBvcnRzPXJiOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD8oZGVmaW5lKFwibW9tZW50XCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjLmNvbmZpZyYmYy5jb25maWcoKSYmYy5jb25maWcoKS5ub0dsb2JhbD09PSEwJiYodmIubW9tZW50PXNiKSxyYn0pLHFiKCEwKSk6cWIoKX0pLmNhbGwodGhpcyk7IiwiLyoqXG4qIEB2ZXJzaW9uOiAxLjMuMTNcbiogQGF1dGhvcjogRGFuIEdyb3NzbWFuIGh0dHA6Ly93d3cuZGFuZ3Jvc3NtYW4uaW5mby9cbiogQGRhdGU6IDIwMTQtMDktMDRcbiogQGNvcHlyaWdodDogQ29weXJpZ2h0IChjKSAyMDEyLTIwMTQgRGFuIEdyb3NzbWFuLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuKiBAbGljZW5zZTogTGljZW5zZWQgdW5kZXIgQXBhY2hlIExpY2Vuc2UgdjIuMC4gU2VlIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuKiBAd2Vic2l0ZTogaHR0cDovL3d3dy5pbXByb3ZlbHkuY29tL1xuKi9cblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFsnbW9tZW50JywgJ2pxdWVyeScsICdleHBvcnRzJ10sIGZ1bmN0aW9uKG1vbWVudGpzLCAkLCBleHBvcnRzKSB7XG4gICAgICByb290LmRhdGVyYW5nZXBpY2tlciA9IGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgbW9tZW50anMsICQpO1xuICAgIH0pO1xuXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIG1vbWVudGpzID0gcmVxdWlyZSgnbW9tZW50Jyk7XG4gICAgdmFyIGpRdWVyeTtcbiAgICB0cnkge1xuICAgICAgalF1ZXJ5ID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBqUXVlcnkgPSB3aW5kb3cualF1ZXJ5O1xuICAgICAgaWYgKCFqUXVlcnkpIHRocm93IG5ldyBFcnJvcignalF1ZXJ5IGRlcGVuZGVuY3kgbm90IGZvdW5kJyk7XG4gICAgfVxuXG4gICAgZmFjdG9yeShyb290LCBleHBvcnRzLCBtb21lbnRqcywgalF1ZXJ5KTtcblxuICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxuICB9IGVsc2Uge1xuICAgIHJvb3QuZGF0ZXJhbmdlcGlja2VyID0gZmFjdG9yeShyb290LCB7fSwgcm9vdC5tb21lbnQsIChyb290LmpRdWVyeSB8fCByb290LlplcHRvIHx8IHJvb3QuZW5kZXIgfHwgcm9vdC4kKSk7XG4gIH1cblxufSh0aGlzLCBmdW5jdGlvbihyb290LCBkYXRlcmFuZ2VwaWNrZXIsIG1vbWVudCwgJCkge1xuXG4gICAgdmFyIERhdGVSYW5nZVBpY2tlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zLCBjYikge1xuXG4gICAgICAgIC8vIGJ5IGRlZmF1bHQsIHRoZSBkYXRlcmFuZ2VwaWNrZXIgZWxlbWVudCBpcyBwbGFjZWQgYXQgdGhlIGJvdHRvbSBvZiBIVE1MIGJvZHlcbiAgICAgICAgdGhpcy5wYXJlbnRFbCA9ICdib2R5JztcblxuICAgICAgICAvL2VsZW1lbnQgdGhhdCB0cmlnZ2VyZWQgdGhlIGRhdGUgcmFuZ2UgcGlja2VyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9ICQoZWxlbWVudCk7XG5cbiAgICAgICAgLy90cmFja3MgdmlzaWJsZSBzdGF0ZVxuICAgICAgICB0aGlzLmlzU2hvd2luZyA9IGZhbHNlO1xuXG4gICAgICAgIC8vY3JlYXRlIHRoZSBwaWNrZXIgSFRNTCBvYmplY3RcbiAgICAgICAgdmFyIERSUFRlbXBsYXRlID0gJzxkaXYgY2xhc3M9XCJkYXRlcmFuZ2VwaWNrZXIgZHJvcGRvd24tbWVudVwiPicgK1xuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY2FsZW5kYXIgbGVmdFwiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY2FsZW5kYXIgcmlnaHRcIj48L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJhbmdlc1wiPicgK1xuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJyYW5nZV9pbnB1dHNcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkYXRlcmFuZ2VwaWNrZXJfc3RhcnRfaW5wdXRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cImRhdGVyYW5nZXBpY2tlcl9zdGFydFwiPjwvbGFiZWw+JyArXG4gICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBjbGFzcz1cImlucHV0LW1pbmlcIiB0eXBlPVwidGV4dFwiIG5hbWU9XCJkYXRlcmFuZ2VwaWNrZXJfc3RhcnRcIiB2YWx1ZT1cIlwiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkYXRlcmFuZ2VwaWNrZXJfZW5kX2lucHV0XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgJzxsYWJlbCBmb3I9XCJkYXRlcmFuZ2VwaWNrZXJfZW5kXCI+PC9sYWJlbD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGNsYXNzPVwiaW5wdXQtbWluaVwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImRhdGVyYW5nZXBpY2tlcl9lbmRcIiB2YWx1ZT1cIlwiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJhcHBseUJ0blwiIGRpc2FibGVkPVwiZGlzYWJsZWRcIj48L2J1dHRvbj4mbmJzcDsnICtcbiAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJjYW5jZWxCdG5cIj48L2J1dHRvbj4nICtcbiAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICc8L2Rpdj4nO1xuXG4gICAgICAgIC8vY3VzdG9tIG9wdGlvbnNcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zICE9PSAnb2JqZWN0JyB8fCBvcHRpb25zID09PSBudWxsKVxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xuXG4gICAgICAgIHRoaXMucGFyZW50RWwgPSAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnICYmIG9wdGlvbnMucGFyZW50RWwgJiYgJChvcHRpb25zLnBhcmVudEVsKS5sZW5ndGgpID8gJChvcHRpb25zLnBhcmVudEVsKSA6ICQodGhpcy5wYXJlbnRFbCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gJChEUlBUZW1wbGF0ZSkuYXBwZW5kVG8odGhpcy5wYXJlbnRFbCk7XG5cbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMsIGNiKTtcblxuICAgICAgICAvL2FwcGx5IENTUyBjbGFzc2VzIGFuZCBsYWJlbHMgdG8gYnV0dG9uc1xuICAgICAgICB2YXIgYyA9IHRoaXMuY29udGFpbmVyO1xuICAgICAgICAkLmVhY2godGhpcy5idXR0b25DbGFzc2VzLCBmdW5jdGlvbiAoaWR4LCB2YWwpIHtcbiAgICAgICAgICAgIGMuZmluZCgnYnV0dG9uJykuYWRkQ2xhc3ModmFsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5kYXRlcmFuZ2VwaWNrZXJfc3RhcnRfaW5wdXQgbGFiZWwnKS5odG1sKHRoaXMubG9jYWxlLmZyb21MYWJlbCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5kYXRlcmFuZ2VwaWNrZXJfZW5kX2lucHV0IGxhYmVsJykuaHRtbCh0aGlzLmxvY2FsZS50b0xhYmVsKTtcbiAgICAgICAgaWYgKHRoaXMuYXBwbHlDbGFzcy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcuYXBwbHlCdG4nKS5hZGRDbGFzcyh0aGlzLmFwcGx5Q2xhc3MpO1xuICAgICAgICBpZiAodGhpcy5jYW5jZWxDbGFzcy5sZW5ndGgpXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcuY2FuY2VsQnRuJykuYWRkQ2xhc3ModGhpcy5jYW5jZWxDbGFzcyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5hcHBseUJ0bicpLmh0bWwodGhpcy5sb2NhbGUuYXBwbHlMYWJlbCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYW5jZWxCdG4nKS5odG1sKHRoaXMubG9jYWxlLmNhbmNlbExhYmVsKTtcblxuICAgICAgICAvL2V2ZW50IGxpc3RlbmVyc1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhcicpXG4gICAgICAgICAgICAub24oJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcicsICcucHJldicsICQucHJveHkodGhpcy5jbGlja1ByZXYsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdjbGljay5kYXRlcmFuZ2VwaWNrZXInLCAnLm5leHQnLCAkLnByb3h5KHRoaXMuY2xpY2tOZXh0LCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJ3RkLmF2YWlsYWJsZScsICQucHJveHkodGhpcy5jbGlja0RhdGUsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyLmRhdGVyYW5nZXBpY2tlcicsICd0ZC5hdmFpbGFibGUnLCAkLnByb3h5KHRoaXMuaG92ZXJEYXRlLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignbW91c2VsZWF2ZS5kYXRlcmFuZ2VwaWNrZXInLCAndGQuYXZhaWxhYmxlJywgJC5wcm94eSh0aGlzLnVwZGF0ZUZvcm1JbnB1dHMsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdjaGFuZ2UuZGF0ZXJhbmdlcGlja2VyJywgJ3NlbGVjdC55ZWFyc2VsZWN0JywgJC5wcm94eSh0aGlzLnVwZGF0ZU1vbnRoWWVhciwgdGhpcykpXG4gICAgICAgICAgICAub24oJ2NoYW5nZS5kYXRlcmFuZ2VwaWNrZXInLCAnc2VsZWN0Lm1vbnRoc2VsZWN0JywgJC5wcm94eSh0aGlzLnVwZGF0ZU1vbnRoWWVhciwgdGhpcykpXG4gICAgICAgICAgICAub24oJ2NoYW5nZS5kYXRlcmFuZ2VwaWNrZXInLCAnc2VsZWN0LmhvdXJzZWxlY3Qsc2VsZWN0Lm1pbnV0ZXNlbGVjdCxzZWxlY3QuYW1wbXNlbGVjdCcsICQucHJveHkodGhpcy51cGRhdGVUaW1lLCB0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcycpXG4gICAgICAgICAgICAub24oJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcicsICdidXR0b24uYXBwbHlCdG4nLCAkLnByb3h5KHRoaXMuY2xpY2tBcHBseSwgdGhpcykpXG4gICAgICAgICAgICAub24oJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcicsICdidXR0b24uY2FuY2VsQnRuJywgJC5wcm94eSh0aGlzLmNsaWNrQ2FuY2VsLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJy5kYXRlcmFuZ2VwaWNrZXJfc3RhcnRfaW5wdXQsLmRhdGVyYW5nZXBpY2tlcl9lbmRfaW5wdXQnLCAkLnByb3h5KHRoaXMuc2hvd0NhbGVuZGFycywgdGhpcykpXG4gICAgICAgICAgICAub24oJ2NoYW5nZS5kYXRlcmFuZ2VwaWNrZXInLCAnLmRhdGVyYW5nZXBpY2tlcl9zdGFydF9pbnB1dCwuZGF0ZXJhbmdlcGlja2VyX2VuZF9pbnB1dCcsICQucHJveHkodGhpcy5pbnB1dHNDaGFuZ2VkLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbigna2V5ZG93bi5kYXRlcmFuZ2VwaWNrZXInLCAnLmRhdGVyYW5nZXBpY2tlcl9zdGFydF9pbnB1dCwuZGF0ZXJhbmdlcGlja2VyX2VuZF9pbnB1dCcsICQucHJveHkodGhpcy5pbnB1dHNLZXlkb3duLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJ2xpJywgJC5wcm94eSh0aGlzLmNsaWNrUmFuZ2UsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZWVudGVyLmRhdGVyYW5nZXBpY2tlcicsICdsaScsICQucHJveHkodGhpcy5lbnRlclJhbmdlLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignbW91c2VsZWF2ZS5kYXRlcmFuZ2VwaWNrZXInLCAnbGknLCAkLnByb3h5KHRoaXMudXBkYXRlRm9ybUlucHV0cywgdGhpcykpO1xuXG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykpIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5vbih7XG4gICAgICAgICAgICAgICAgJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcic6ICQucHJveHkodGhpcy5zaG93LCB0aGlzKSxcbiAgICAgICAgICAgICAgICAnZm9jdXMuZGF0ZXJhbmdlcGlja2VyJzogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpLFxuICAgICAgICAgICAgICAgICdrZXl1cC5kYXRlcmFuZ2VwaWNrZXInOiAkLnByb3h5KHRoaXMudXBkYXRlRnJvbUNvbnRyb2wsIHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJC5wcm94eSh0aGlzLnRvZ2dsZSwgdGhpcykpO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgRGF0ZVJhbmdlUGlja2VyLnByb3RvdHlwZSA9IHtcblxuICAgICAgICBjb25zdHJ1Y3RvcjogRGF0ZVJhbmdlUGlja2VyLFxuXG4gICAgICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQoKS5lbmRPZignZGF5Jyk7XG4gICAgICAgICAgICB0aGlzLm1pbkRhdGUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubWF4RGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kYXRlTGltaXQgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5zaG93RHJvcGRvd25zID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnNob3dXZWVrTnVtYmVycyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy50aW1lUGlja2VyID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXJJbmNyZW1lbnQgPSAzMDtcbiAgICAgICAgICAgIHRoaXMudGltZVBpY2tlcjEySG91ciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnNpbmdsZURhdGVQaWNrZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmFuZ2VzID0ge307XG5cbiAgICAgICAgICAgIHRoaXMub3BlbnMgPSAncmlnaHQnO1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5oYXNDbGFzcygncHVsbC1yaWdodCcpKVxuICAgICAgICAgICAgICAgIHRoaXMub3BlbnMgPSAnbGVmdCc7XG5cbiAgICAgICAgICAgIHRoaXMuYnV0dG9uQ2xhc3NlcyA9IFsnYnRuJywgJ2J0bi1zbWFsbCBidG4tc20nXTtcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDbGFzcyA9ICdidG4tc3VjY2Vzcyc7XG4gICAgICAgICAgICB0aGlzLmNhbmNlbENsYXNzID0gJ2J0bi1kZWZhdWx0JztcblxuICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSAnTU0vREQvWVlZWSc7XG4gICAgICAgICAgICB0aGlzLnNlcGFyYXRvciA9ICcgLSAnO1xuXG4gICAgICAgICAgICB0aGlzLmxvY2FsZSA9IHtcbiAgICAgICAgICAgICAgICBhcHBseUxhYmVsOiAnQXBwbHknLFxuICAgICAgICAgICAgICAgIGNhbmNlbExhYmVsOiAnQ2FuY2VsJyxcbiAgICAgICAgICAgICAgICBmcm9tTGFiZWw6ICdGcm9tJyxcbiAgICAgICAgICAgICAgICB0b0xhYmVsOiAnVG8nLFxuICAgICAgICAgICAgICAgIHdlZWtMYWJlbDogJ1cnLFxuICAgICAgICAgICAgICAgIGN1c3RvbVJhbmdlTGFiZWw6ICdDdXN0b20gUmFuZ2UnLFxuICAgICAgICAgICAgICAgIGRheXNPZldlZWs6IG1vbWVudC53ZWVrZGF5c01pbigpLFxuICAgICAgICAgICAgICAgIG1vbnRoTmFtZXM6IG1vbWVudC5tb250aHNTaG9ydCgpLFxuICAgICAgICAgICAgICAgIGZpcnN0RGF5OiBtb21lbnQubG9jYWxlRGF0YSgpLl93ZWVrLmRvd1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jYiA9IGZ1bmN0aW9uICgpIHsgfTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmZvcm1hdCA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtYXQgPSBvcHRpb25zLmZvcm1hdDtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNlcGFyYXRvciA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5zZXBhcmF0b3IgPSBvcHRpb25zLnNlcGFyYXRvcjtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnN0YXJ0RGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQob3B0aW9ucy5zdGFydERhdGUsIHRoaXMuZm9ybWF0KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmVuZERhdGUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudChvcHRpb25zLmVuZERhdGUsIHRoaXMuZm9ybWF0KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1pbkRhdGUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRoaXMubWluRGF0ZSA9IG1vbWVudChvcHRpb25zLm1pbkRhdGUsIHRoaXMuZm9ybWF0KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heERhdGUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRoaXMubWF4RGF0ZSA9IG1vbWVudChvcHRpb25zLm1heERhdGUsIHRoaXMuZm9ybWF0KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnN0YXJ0RGF0ZSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQob3B0aW9ucy5zdGFydERhdGUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZW5kRGF0ZSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KG9wdGlvbnMuZW5kRGF0ZSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5taW5EYXRlID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aGlzLm1pbkRhdGUgPSBtb21lbnQob3B0aW9ucy5taW5EYXRlKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1heERhdGUgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgIHRoaXMubWF4RGF0ZSA9IG1vbWVudChvcHRpb25zLm1heERhdGUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYXBwbHlDbGFzcyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNsYXNzID0gb3B0aW9ucy5hcHBseUNsYXNzO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuY2FuY2VsQ2xhc3MgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsQ2xhc3MgPSBvcHRpb25zLmNhbmNlbENsYXNzO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZGF0ZUxpbWl0ID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGVMaW1pdCA9IG9wdGlvbnMuZGF0ZUxpbWl0O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlID09PSAnb2JqZWN0Jykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxvY2FsZS5kYXlzT2ZXZWVrID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBjb3B5IG9mIGRheXNPZldlZWsgdG8gYXZvaWQgbW9kaWZpY2F0aW9uIG9mIG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgICAgIC8vIG9wdGlvbnMgb2JqZWN0IGZvciByZXVzYWJpbGl0eSBpbiBtdWx0aXBsZSBkYXRlcmFuZ2VwaWNrZXIgaW5zdGFuY2VzXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlLmRheXNPZldlZWsgPSBvcHRpb25zLmxvY2FsZS5kYXlzT2ZXZWVrLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmxvY2FsZS5tb250aE5hbWVzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUubW9udGhOYW1lcyA9IG9wdGlvbnMubG9jYWxlLm1vbnRoTmFtZXMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLmZpcnN0RGF5ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUuZmlyc3REYXkgPSBvcHRpb25zLmxvY2FsZS5maXJzdERheTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLmFwcGx5TGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS5hcHBseUxhYmVsID0gb3B0aW9ucy5sb2NhbGUuYXBwbHlMYWJlbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLmNhbmNlbExhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUuY2FuY2VsTGFiZWwgPSBvcHRpb25zLmxvY2FsZS5jYW5jZWxMYWJlbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLmZyb21MYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlLmZyb21MYWJlbCA9IG9wdGlvbnMubG9jYWxlLmZyb21MYWJlbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLnRvTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS50b0xhYmVsID0gb3B0aW9ucy5sb2NhbGUudG9MYWJlbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLndlZWtMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlLndlZWtMYWJlbCA9IG9wdGlvbnMubG9jYWxlLndlZWtMYWJlbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLmN1c3RvbVJhbmdlTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS5jdXN0b21SYW5nZUxhYmVsID0gb3B0aW9ucy5sb2NhbGUuY3VzdG9tUmFuZ2VMYWJlbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5vcGVucyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVucyA9IG9wdGlvbnMub3BlbnM7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zaG93V2Vla051bWJlcnMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1dlZWtOdW1iZXJzID0gb3B0aW9ucy5zaG93V2Vla051bWJlcnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5idXR0b25DbGFzc2VzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQ2xhc3NlcyA9IFtvcHRpb25zLmJ1dHRvbkNsYXNzZXNdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuYnV0dG9uQ2xhc3NlcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbkNsYXNzZXMgPSBvcHRpb25zLmJ1dHRvbkNsYXNzZXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zaG93RHJvcGRvd25zID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dEcm9wZG93bnMgPSBvcHRpb25zLnNob3dEcm9wZG93bnM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5zaW5nbGVEYXRlUGlja2VyID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZURhdGVQaWNrZXIgPSBvcHRpb25zLnNpbmdsZURhdGVQaWNrZXI7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRpbWVQaWNrZXIgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZVBpY2tlciA9IG9wdGlvbnMudGltZVBpY2tlcjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnRpbWVQaWNrZXJJbmNyZW1lbnQgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VySW5jcmVtZW50ID0gb3B0aW9ucy50aW1lUGlja2VySW5jcmVtZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGltZVBpY2tlcjEySG91ciA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VyMTJIb3VyID0gb3B0aW9ucy50aW1lUGlja2VyMTJIb3VyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB1cGRhdGUgZGF5IG5hbWVzIG9yZGVyIHRvIGZpcnN0RGF5XG4gICAgICAgICAgICBpZiAodGhpcy5sb2NhbGUuZmlyc3REYXkgIT0gMCkge1xuICAgICAgICAgICAgICAgIHZhciBpdGVyYXRvciA9IHRoaXMubG9jYWxlLmZpcnN0RGF5O1xuICAgICAgICAgICAgICAgIHdoaWxlIChpdGVyYXRvciA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUuZGF5c09mV2Vlay5wdXNoKHRoaXMubG9jYWxlLmRheXNPZldlZWsuc2hpZnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGl0ZXJhdG9yLS07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgc3RhcnQsIGVuZCwgcmFuZ2U7XG5cbiAgICAgICAgICAgIC8vaWYgbm8gc3RhcnQvZW5kIGRhdGVzIHNldCwgY2hlY2sgaWYgYW4gaW5wdXQgZWxlbWVudCBjb250YWlucyBpbml0aWFsIHZhbHVlc1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnN0YXJ0RGF0ZSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9wdGlvbnMuZW5kRGF0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBpZiAoJCh0aGlzLmVsZW1lbnQpLmlzKCdpbnB1dFt0eXBlPXRleHRdJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9ICQodGhpcy5lbGVtZW50KS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0ID0gdmFsLnNwbGl0KHRoaXMuc2VwYXJhdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBlbmQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3BsaXQubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbW9tZW50KHNwbGl0WzBdLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBtb21lbnQoc3BsaXRbMV0sIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNpbmdsZURhdGVQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbW9tZW50KHZhbCwgdGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gbW9tZW50KHZhbCwgdGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydCAhPT0gbnVsbCAmJiBlbmQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gc3RhcnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBlbmQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yYW5nZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgZm9yIChyYW5nZSBpbiBvcHRpb25zLnJhbmdlcykge1xuXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbW9tZW50KG9wdGlvbnMucmFuZ2VzW3JhbmdlXVswXSk7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IG1vbWVudChvcHRpb25zLnJhbmdlc1tyYW5nZV1bMV0pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYSBtaW4vbWF4IGRhdGUgc2V0LCBib3VuZCB0aGlzIHJhbmdlXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIGl0LCBidXQgb25seSBpZiBpdCB3b3VsZCBvdGhlcndpc2UgZmFsbFxuICAgICAgICAgICAgICAgICAgICAvLyBvdXRzaWRlIG9mIHRoZSBtaW4vbWF4LlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5taW5EYXRlICYmIHN0YXJ0LmlzQmVmb3JlKHRoaXMubWluRGF0ZSkpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydCA9IG1vbWVudCh0aGlzLm1pbkRhdGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heERhdGUgJiYgZW5kLmlzQWZ0ZXIodGhpcy5tYXhEYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IG1vbWVudCh0aGlzLm1heERhdGUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbmQgb2YgdGhlIHJhbmdlIGlzIGJlZm9yZSB0aGUgbWluaW11bSAoaWYgbWluIGlzIHNldCkgT1JcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHN0YXJ0IG9mIHRoZSByYW5nZSBpcyBhZnRlciB0aGUgbWF4IChhbHNvIGlmIHNldCkgZG9uJ3QgZGlzcGxheSB0aGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJhbmdlIG9wdGlvbi5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCh0aGlzLm1pbkRhdGUgJiYgZW5kLmlzQmVmb3JlKHRoaXMubWluRGF0ZSkpIHx8ICh0aGlzLm1heERhdGUgJiYgc3RhcnQuaXNBZnRlcih0aGlzLm1heERhdGUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJhbmdlc1tyYW5nZV0gPSBbc3RhcnQsIGVuZF07XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGxpc3QgPSAnPHVsPic7XG4gICAgICAgICAgICAgICAgZm9yIChyYW5nZSBpbiB0aGlzLnJhbmdlcykge1xuICAgICAgICAgICAgICAgICAgICBsaXN0ICs9ICc8bGk+JyArIHJhbmdlICsgJzwvbGk+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGlzdCArPSAnPGxpPicgKyB0aGlzLmxvY2FsZS5jdXN0b21SYW5nZUxhYmVsICsgJzwvbGk+JztcbiAgICAgICAgICAgICAgICBsaXN0ICs9ICc8L3VsPic7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcyB1bCcpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5yYW5nZXMnKS5wcmVwZW5kKGxpc3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYiA9IGNhbGxiYWNrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIXRoaXMudGltZVBpY2tlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy5zdGFydERhdGUuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gdGhpcy5lbmREYXRlLmVuZE9mKCdkYXknKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlcikge1xuICAgICAgICAgICAgXHR0aGlzLm9wZW5zID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIFx0dGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ3NpbmdsZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci5yaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcuY2FsZW5kYXIubGVmdCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGltZVBpY2tlcikge1xuXHQgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIFx0dGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcyAuZGF0ZXJhbmdlcGlja2VyX3N0YXJ0X2lucHV0LCAucmFuZ2VzIC5kYXRlcmFuZ2VwaWNrZXJfZW5kX2lucHV0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci5yaWdodCcpLmhhc0NsYXNzKCdzaW5nbGUnKSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLnJpZ2h0JykuYWRkQ2xhc3MoJ3NpbmdsZScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFx0dGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ3NpbmdsZScpO1xuICAgICAgICAgICAgXHR0aGlzLmNvbnRhaW5lci5maW5kKCcuY2FsZW5kYXIucmlnaHQnKS5yZW1vdmVDbGFzcygnc2luZ2xlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcycpLnNob3coKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5vbGRTdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgdGhpcy5vbGRFbmREYXRlID0gdGhpcy5lbmREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICB0aGlzLm9sZENob3NlbkxhYmVsID0gdGhpcy5jaG9zZW5MYWJlbDtcblxuICAgICAgICAgICAgdGhpcy5sZWZ0Q2FsZW5kYXIgPSB7XG4gICAgICAgICAgICAgICAgbW9udGg6IG1vbWVudChbdGhpcy5zdGFydERhdGUueWVhcigpLCB0aGlzLnN0YXJ0RGF0ZS5tb250aCgpLCAxLCB0aGlzLnN0YXJ0RGF0ZS5ob3VyKCksIHRoaXMuc3RhcnREYXRlLm1pbnV0ZSgpXSksXG4gICAgICAgICAgICAgICAgY2FsZW5kYXI6IFtdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnJpZ2h0Q2FsZW5kYXIgPSB7XG4gICAgICAgICAgICAgICAgbW9udGg6IG1vbWVudChbdGhpcy5lbmREYXRlLnllYXIoKSwgdGhpcy5lbmREYXRlLm1vbnRoKCksIDEsIHRoaXMuZW5kRGF0ZS5ob3VyKCksIHRoaXMuZW5kRGF0ZS5taW51dGUoKV0pLFxuICAgICAgICAgICAgICAgIGNhbGVuZGFyOiBbXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3BlbnMgPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgIC8vc3dhcCBjYWxlbmRhciBwb3NpdGlvbnNcbiAgICAgICAgICAgICAgICB2YXIgbGVmdCA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci5sZWZ0Jyk7XG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLnJpZ2h0Jyk7XG5cbiAgICAgICAgICAgICAgICBpZiAocmlnaHQuaGFzQ2xhc3MoJ3NpbmdsZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0LnJlbW92ZUNsYXNzKCdzaW5nbGUnKTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdC5hZGRDbGFzcygnc2luZ2xlJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbGVmdC5yZW1vdmVDbGFzcygnbGVmdCcpLmFkZENsYXNzKCdyaWdodCcpO1xuICAgICAgICAgICAgICAgIHJpZ2h0LnJlbW92ZUNsYXNzKCdyaWdodCcpLmFkZENsYXNzKCdsZWZ0Jyk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVEYXRlUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICByaWdodC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMucmFuZ2VzID09PSAndW5kZWZpbmVkJyAmJiAhdGhpcy5zaW5nbGVEYXRlUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ3Nob3ctY2FsZW5kYXInKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ29wZW5zJyArIHRoaXMub3BlbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBzZXRTdGFydERhdGU6IGZ1bmN0aW9uKHN0YXJ0RGF0ZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBzdGFydERhdGUgPT09ICdzdHJpbmcnKVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gbW9tZW50KHN0YXJ0RGF0ZSwgdGhpcy5mb3JtYXQpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXJ0RGF0ZSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoc3RhcnREYXRlKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVQaWNrZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5zdGFydE9mKCdkYXknKTtcblxuICAgICAgICAgICAgdGhpcy5vbGRTdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5jbG9uZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0VGV4dCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldEVuZERhdGU6IGZ1bmN0aW9uKGVuZERhdGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZW5kRGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KGVuZERhdGUsIHRoaXMuZm9ybWF0KTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbmREYXRlID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQoZW5kRGF0ZSk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy50aW1lUGlja2VyKVxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZS5lbmRPZignZGF5Jyk7XG5cbiAgICAgICAgICAgIHRoaXMub2xkRW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZS5jbG9uZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0VGV4dCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVZpZXc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLm1vbnRoKHRoaXMuc3RhcnREYXRlLm1vbnRoKCkpLnllYXIodGhpcy5zdGFydERhdGUueWVhcigpKS5ob3VyKHRoaXMuc3RhcnREYXRlLmhvdXIoKSkubWludXRlKHRoaXMuc3RhcnREYXRlLm1pbnV0ZSgpKTtcbiAgICAgICAgICAgIHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5tb250aCh0aGlzLmVuZERhdGUubW9udGgoKSkueWVhcih0aGlzLmVuZERhdGUueWVhcigpKS5ob3VyKHRoaXMuZW5kRGF0ZS5ob3VyKCkpLm1pbnV0ZSh0aGlzLmVuZERhdGUubWludXRlKCkpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVGb3JtSW5wdXRzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlRm9ybUlucHV0czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1kYXRlcmFuZ2VwaWNrZXJfc3RhcnRdJykudmFsKHRoaXMuc3RhcnREYXRlLmZvcm1hdCh0aGlzLmZvcm1hdCkpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1kYXRlcmFuZ2VwaWNrZXJfZW5kXScpLnZhbCh0aGlzLmVuZERhdGUuZm9ybWF0KHRoaXMuZm9ybWF0KSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0RGF0ZS5pc1NhbWUodGhpcy5lbmREYXRlKSB8fCB0aGlzLnN0YXJ0RGF0ZS5pc0JlZm9yZSh0aGlzLmVuZERhdGUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnYnV0dG9uLmFwcGx5QnRuJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnYnV0dG9uLmFwcGx5QnRuJykuYXR0cignZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVGcm9tQ29udHJvbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykpIHJldHVybjtcbiAgICAgICAgICAgIGlmICghdGhpcy5lbGVtZW50LnZhbCgpLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgZGF0ZVN0cmluZyA9IHRoaXMuZWxlbWVudC52YWwoKS5zcGxpdCh0aGlzLnNlcGFyYXRvciksXG4gICAgICAgICAgICAgICAgc3RhcnQgPSBudWxsLFxuICAgICAgICAgICAgICAgIGVuZCA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmKGRhdGVTdHJpbmcubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBtb21lbnQoZGF0ZVN0cmluZ1swXSwgdGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgICAgIGVuZCA9IG1vbWVudChkYXRlU3RyaW5nWzFdLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZURhdGVQaWNrZXIgfHwgc3RhcnQgPT09IG51bGwgfHwgZW5kID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBtb21lbnQodGhpcy5lbGVtZW50LnZhbCgpLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgZW5kID0gc3RhcnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChlbmQuaXNCZWZvcmUoc3RhcnQpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHRoaXMub2xkU3RhcnREYXRlID0gdGhpcy5zdGFydERhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgIHRoaXMub2xkRW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZS5jbG9uZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gZW5kO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RhcnREYXRlLmlzU2FtZSh0aGlzLm9sZFN0YXJ0RGF0ZSkgfHwgIXRoaXMuZW5kRGF0ZS5pc1NhbWUodGhpcy5vbGRFbmREYXRlKSlcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgpO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG5vdGlmeTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgICAgICAgICB0aGlzLmNiKHRoaXMuc3RhcnREYXRlLCB0aGlzLmVuZERhdGUsIHRoaXMuY2hvc2VuTGFiZWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnRPZmZzZXQgPSB7IHRvcDogMCwgbGVmdDogMCB9O1xuICAgICAgICAgICAgdmFyIHBhcmVudFJpZ2h0RWRnZSA9ICQod2luZG93KS53aWR0aCgpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnBhcmVudEVsLmlzKCdib2R5JykpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnRPZmZzZXQgPSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogdGhpcy5wYXJlbnRFbC5vZmZzZXQoKS50b3AgLSB0aGlzLnBhcmVudEVsLnNjcm9sbFRvcCgpLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnBhcmVudEVsLm9mZnNldCgpLmxlZnQgLSB0aGlzLnBhcmVudEVsLnNjcm9sbExlZnQoKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcGFyZW50UmlnaHRFZGdlID0gdGhpcy5wYXJlbnRFbFswXS5jbGllbnRXaWR0aCArIHRoaXMucGFyZW50RWwub2Zmc2V0KCkubGVmdDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMub3BlbnMgPT0gJ2xlZnQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLmVsZW1lbnQub2Zmc2V0KCkudG9wICsgdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkgLSBwYXJlbnRPZmZzZXQudG9wLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogcGFyZW50UmlnaHRFZGdlIC0gdGhpcy5lbGVtZW50Lm9mZnNldCgpLmxlZnQgLSB0aGlzLmVsZW1lbnQub3V0ZXJXaWR0aCgpLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnYXV0bydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIub2Zmc2V0KCkubGVmdCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiA5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLmVsZW1lbnQub2Zmc2V0KCkudG9wICsgdGhpcy5lbGVtZW50Lm91dGVySGVpZ2h0KCkgLSBwYXJlbnRPZmZzZXQudG9wLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLmVsZW1lbnQub2Zmc2V0KCkubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0LFxuICAgICAgICAgICAgICAgICAgICByaWdodDogJ2F1dG8nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyLm9mZnNldCgpLmxlZnQgKyB0aGlzLmNvbnRhaW5lci5vdXRlcldpZHRoKCkgPiAkKHdpbmRvdykud2lkdGgoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogJ2F1dG8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Nob3dpbmcpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnNob3coKTtcbiAgICAgICAgICAgIHRoaXMubW92ZSgpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBjbGljayBwcm94eSB0aGF0IGlzIHByaXZhdGUgdG8gdGhpcyBpbnN0YW5jZSBvZiBkYXRlcGlja2VyLCBmb3IgdW5iaW5kaW5nXG4gICAgICAgICAgICB0aGlzLl9vdXRzaWRlQ2xpY2tQcm94eSA9ICQucHJveHkoZnVuY3Rpb24gKGUpIHsgdGhpcy5vdXRzaWRlQ2xpY2soZSk7IH0sIHRoaXMpO1xuICAgICAgICAgICAgLy8gQmluZCBnbG9iYWwgZGF0ZXBpY2tlciBtb3VzZWRvd24gZm9yIGhpZGluZyBhbmRcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXG4gICAgICAgICAgICAgIC5vbignbW91c2Vkb3duLmRhdGVyYW5nZXBpY2tlcicsIHRoaXMuX291dHNpZGVDbGlja1Byb3h5KVxuICAgICAgICAgICAgICAvLyBhbHNvIGV4cGxpY2l0bHkgcGxheSBuaWNlIHdpdGggQm9vdHN0cmFwIGRyb3Bkb3ducywgd2hpY2ggc3RvcFByb3BhZ2F0aW9uIHdoZW4gY2xpY2tpbmcgdGhlbVxuICAgICAgICAgICAgICAub24oJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcicsICdbZGF0YS10b2dnbGU9ZHJvcGRvd25dJywgdGhpcy5fb3V0c2lkZUNsaWNrUHJveHkpXG4gICAgICAgICAgICAgIC8vIGFuZCBhbHNvIGNsb3NlIHdoZW4gZm9jdXMgY2hhbmdlcyB0byBvdXRzaWRlIHRoZSBwaWNrZXIgKGVnLiB0YWJiaW5nIGJldHdlZW4gY29udHJvbHMpXG4gICAgICAgICAgICAgIC5vbignZm9jdXNpbi5kYXRlcmFuZ2VwaWNrZXInLCB0aGlzLl9vdXRzaWRlQ2xpY2tQcm94eSk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNTaG93aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKCdzaG93LmRhdGVyYW5nZXBpY2tlcicsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG91dHNpZGVDbGljazogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIGlmIHRoZSBwYWdlIGlzIGNsaWNrZWQgYW55d2hlcmUgZXhjZXB0IHdpdGhpbiB0aGUgZGF0ZXJhbmdlcnBpY2tlci9idXR0b25cbiAgICAgICAgICAgIC8vIGl0c2VsZiB0aGVuIGNhbGwgdGhpcy5oaWRlKClcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCh0aGlzLmVsZW1lbnQpLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KHRoaXMuY29udGFpbmVyKS5sZW5ndGggfHxcbiAgICAgICAgICAgICAgICB0YXJnZXQuY2xvc2VzdCgnLmNhbGVuZGFyLWRhdGUnKS5sZW5ndGhcbiAgICAgICAgICAgICAgICApIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNTaG93aW5nKSByZXR1cm47XG5cbiAgICAgICAgICAgICQoZG9jdW1lbnQpXG4gICAgICAgICAgICAgIC5vZmYoJ21vdXNlZG93bi5kYXRlcmFuZ2VwaWNrZXInKVxuICAgICAgICAgICAgICAub2ZmKCdjbGljay5kYXRlcmFuZ2VwaWNrZXInLCAnW2RhdGEtdG9nZ2xlPWRyb3Bkb3duXScpXG4gICAgICAgICAgICAgIC5vZmYoJ2ZvY3VzaW4uZGF0ZXJhbmdlcGlja2VyJyk7XG5cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5oaWRlKCk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5zdGFydERhdGUuaXNTYW1lKHRoaXMub2xkU3RhcnREYXRlKSB8fCAhdGhpcy5lbmREYXRlLmlzU2FtZSh0aGlzLm9sZEVuZERhdGUpKVxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCk7XG5cbiAgICAgICAgICAgIHRoaXMub2xkU3RhcnREYXRlID0gdGhpcy5zdGFydERhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgIHRoaXMub2xkRW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZS5jbG9uZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmlzU2hvd2luZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ2hpZGUuZGF0ZXJhbmdlcGlja2VyJywgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZW50ZXJSYW5nZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIC8vIG1vdXNlIHBvaW50ZXIgaGFzIGVudGVyZWQgYSByYW5nZSBsYWJlbFxuICAgICAgICAgICAgdmFyIGxhYmVsID0gZS50YXJnZXQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgaWYgKGxhYmVsID09IHRoaXMubG9jYWxlLmN1c3RvbVJhbmdlTGFiZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVzID0gdGhpcy5yYW5nZXNbbGFiZWxdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJ2lucHV0W25hbWU9ZGF0ZXJhbmdlcGlja2VyX3N0YXJ0XScpLnZhbChkYXRlc1swXS5mb3JtYXQodGhpcy5mb3JtYXQpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPWRhdGVyYW5nZXBpY2tlcl9lbmRdJykudmFsKGRhdGVzWzFdLmZvcm1hdCh0aGlzLmZvcm1hdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dDYWxlbmRhcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ3Nob3ctY2FsZW5kYXInKTtcbiAgICAgICAgICAgIHRoaXMubW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ3Nob3dDYWxlbmRhci5kYXRlcmFuZ2VwaWNrZXInLCB0aGlzKTtcbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlQ2FsZW5kYXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzaG93LWNhbGVuZGFyJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcignaGlkZUNhbGVuZGFyLmRhdGVyYW5nZXBpY2tlcicsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHdoZW4gYSBkYXRlIGlzIHR5cGVkIGludG8gdGhlIHN0YXJ0IHRvIGVuZCBkYXRlIHRleHRib3hlc1xuICAgICAgICBpbnB1dHNDaGFuZ2VkOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGVsID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICB2YXIgZGF0ZSA9IG1vbWVudChlbC52YWwoKSwgdGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgaWYgKCFkYXRlLmlzVmFsaWQoKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgc3RhcnREYXRlLCBlbmREYXRlO1xuICAgICAgICAgICAgaWYgKGVsLmF0dHIoJ25hbWUnKSA9PT0gJ2RhdGVyYW5nZXBpY2tlcl9zdGFydCcpIHtcbiAgICAgICAgICAgICAgICBzdGFydERhdGUgPSBkYXRlO1xuICAgICAgICAgICAgICAgIGVuZERhdGUgPSB0aGlzLmVuZERhdGU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSA9IHRoaXMuc3RhcnREYXRlO1xuICAgICAgICAgICAgICAgIGVuZERhdGUgPSBkYXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zZXRDdXN0b21EYXRlcyhzdGFydERhdGUsIGVuZERhdGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGlucHV0c0tleWRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dHNDaGFuZ2VkKGUpO1xuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlSW5wdXRUZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykgJiYgIXRoaXMuc2luZ2xlRGF0ZVBpY2tlcikge1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC52YWwodGhpcy5zdGFydERhdGUuZm9ybWF0KHRoaXMuZm9ybWF0KSArIHRoaXMuc2VwYXJhdG9yICsgdGhpcy5lbmREYXRlLmZvcm1hdCh0aGlzLmZvcm1hdCkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2lucHV0JykpIHtcbiAgICAgICAgICAgIFx0dGhpcy5lbGVtZW50LnZhbCh0aGlzLmVuZERhdGUuZm9ybWF0KHRoaXMuZm9ybWF0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpY2tSYW5nZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBsYWJlbCA9IGUudGFyZ2V0LmlubmVySFRNTDtcbiAgICAgICAgICAgIHRoaXMuY2hvc2VuTGFiZWwgPSBsYWJlbDtcbiAgICAgICAgICAgIGlmIChsYWJlbCA9PSB0aGlzLmxvY2FsZS5jdXN0b21SYW5nZUxhYmVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkYXRlcyA9IHRoaXMucmFuZ2VzW2xhYmVsXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gZGF0ZXNbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gZGF0ZXNbMV07XG5cbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudGltZVBpY2tlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlLmVuZE9mKCdkYXknKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRDYWxlbmRhci5tb250aC5tb250aCh0aGlzLnN0YXJ0RGF0ZS5tb250aCgpKS55ZWFyKHRoaXMuc3RhcnREYXRlLnllYXIoKSkuaG91cih0aGlzLnN0YXJ0RGF0ZS5ob3VyKCkpLm1pbnV0ZSh0aGlzLnN0YXJ0RGF0ZS5taW51dGUoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLm1vbnRoKHRoaXMuZW5kRGF0ZS5tb250aCgpKS55ZWFyKHRoaXMuZW5kRGF0ZS55ZWFyKCkpLmhvdXIodGhpcy5lbmREYXRlLmhvdXIoKSkubWludXRlKHRoaXMuZW5kRGF0ZS5taW51dGUoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRUZXh0KCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcignYXBwbHkuZGF0ZXJhbmdlcGlja2VyJywgdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpY2tQcmV2OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNhbCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5jYWxlbmRhcicpO1xuICAgICAgICAgICAgaWYgKGNhbC5oYXNDbGFzcygnbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGguc3VidHJhY3QoMSwgJ21vbnRoJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5zdWJ0cmFjdCgxLCAnbW9udGgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpY2tOZXh0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGNhbCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5jYWxlbmRhcicpO1xuICAgICAgICAgICAgaWYgKGNhbC5oYXNDbGFzcygnbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGguYWRkKDEsICdtb250aCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGguYWRkKDEsICdtb250aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBob3ZlckRhdGU6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAkKGUudGFyZ2V0KS5hdHRyKCdkYXRhLXRpdGxlJyk7XG4gICAgICAgICAgICB2YXIgcm93ID0gdGl0bGUuc3Vic3RyKDEsIDEpO1xuICAgICAgICAgICAgdmFyIGNvbCA9IHRpdGxlLnN1YnN0cigzLCAxKTtcbiAgICAgICAgICAgIHZhciBjYWwgPSAkKGUudGFyZ2V0KS5wYXJlbnRzKCcuY2FsZW5kYXInKTtcblxuICAgICAgICAgICAgaWYgKGNhbC5oYXNDbGFzcygnbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1kYXRlcmFuZ2VwaWNrZXJfc3RhcnRdJykudmFsKHRoaXMubGVmdENhbGVuZGFyLmNhbGVuZGFyW3Jvd11bY29sXS5mb3JtYXQodGhpcy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1kYXRlcmFuZ2VwaWNrZXJfZW5kXScpLnZhbCh0aGlzLnJpZ2h0Q2FsZW5kYXIuY2FsZW5kYXJbcm93XVtjb2xdLmZvcm1hdCh0aGlzLmZvcm1hdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNldEN1c3RvbURhdGVzOiBmdW5jdGlvbihzdGFydERhdGUsIGVuZERhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2hvc2VuTGFiZWwgPSB0aGlzLmxvY2FsZS5jdXN0b21SYW5nZUxhYmVsO1xuICAgICAgICAgICAgaWYgKHN0YXJ0RGF0ZS5pc0FmdGVyKGVuZERhdGUpKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpZmZlcmVuY2UgPSB0aGlzLmVuZERhdGUuZGlmZih0aGlzLnN0YXJ0RGF0ZSk7XG4gICAgICAgICAgICAgICAgZW5kRGF0ZSA9IG1vbWVudChzdGFydERhdGUpLmFkZChkaWZmZXJlbmNlLCAnbXMnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gc3RhcnREYXRlO1xuICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gZW5kRGF0ZTtcblxuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsaWNrRGF0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQoZS50YXJnZXQpLmF0dHIoJ2RhdGEtdGl0bGUnKTtcbiAgICAgICAgICAgIHZhciByb3cgPSB0aXRsZS5zdWJzdHIoMSwgMSk7XG4gICAgICAgICAgICB2YXIgY29sID0gdGl0bGUuc3Vic3RyKDMsIDEpO1xuICAgICAgICAgICAgdmFyIGNhbCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5jYWxlbmRhcicpO1xuXG4gICAgICAgICAgICB2YXIgc3RhcnREYXRlLCBlbmREYXRlO1xuICAgICAgICAgICAgaWYgKGNhbC5oYXNDbGFzcygnbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlID0gdGhpcy5sZWZ0Q2FsZW5kYXIuY2FsZW5kYXJbcm93XVtjb2xdO1xuICAgICAgICAgICAgICAgIGVuZERhdGUgPSB0aGlzLmVuZERhdGU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGVMaW1pdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heERhdGUgPSBtb21lbnQoc3RhcnREYXRlKS5hZGQodGhpcy5kYXRlTGltaXQpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW5kRGF0ZS5pc0FmdGVyKG1heERhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmREYXRlID0gbWF4RGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlID0gdGhpcy5zdGFydERhdGU7XG4gICAgICAgICAgICAgICAgZW5kRGF0ZSA9IHRoaXMucmlnaHRDYWxlbmRhci5jYWxlbmRhcltyb3ddW2NvbF07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmRhdGVMaW1pdCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbkRhdGUgPSBtb21lbnQoZW5kRGF0ZSkuc3VidHJhY3QodGhpcy5kYXRlTGltaXQpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnREYXRlLmlzQmVmb3JlKG1pbkRhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydERhdGUgPSBtaW5EYXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVEYXRlUGlja2VyICYmIGNhbC5oYXNDbGFzcygnbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgZW5kRGF0ZSA9IHN0YXJ0RGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNpbmdsZURhdGVQaWNrZXIgJiYgY2FsLmhhc0NsYXNzKCdyaWdodCcpKSB7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlID0gZW5kRGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWwuZmluZCgndGQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRDdXN0b21EYXRlcyhzdGFydERhdGUsIGVuZERhdGUpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMudGltZVBpY2tlcilcbiAgICAgICAgICAgICAgICBlbmREYXRlLmVuZE9mKCdkYXknKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlciAmJiAhdGhpcy50aW1lUGlja2VyKVxuICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tBcHBseSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsaWNrQXBwbHk6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0VGV4dCgpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcignYXBwbHkuZGF0ZXJhbmdlcGlja2VyJywgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpY2tDYW5jZWw6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHRoaXMub2xkU3RhcnREYXRlO1xuICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gdGhpcy5vbGRFbmREYXRlO1xuICAgICAgICAgICAgdGhpcy5jaG9zZW5MYWJlbCA9IHRoaXMub2xkQ2hvc2VuTGFiZWw7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKCdjYW5jZWwuZGF0ZXJhbmdlcGlja2VyJywgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlTW9udGhZZWFyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGlzTGVmdCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jYWxlbmRhcicpLmhhc0NsYXNzKCdsZWZ0JyksXG4gICAgICAgICAgICAgICAgbGVmdE9yUmlnaHQgPSBpc0xlZnQgPyAnbGVmdCcgOiAncmlnaHQnLFxuICAgICAgICAgICAgICAgIGNhbCA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci4nK2xlZnRPclJpZ2h0KTtcblxuICAgICAgICAgICAgLy8gTW9udGggbXVzdCBiZSBOdW1iZXIgZm9yIG5ldyBtb21lbnQgdmVyc2lvbnNcbiAgICAgICAgICAgIHZhciBtb250aCA9IHBhcnNlSW50KGNhbC5maW5kKCcubW9udGhzZWxlY3QnKS52YWwoKSwgMTApO1xuICAgICAgICAgICAgdmFyIHllYXIgPSBjYWwuZmluZCgnLnllYXJzZWxlY3QnKS52YWwoKTtcblxuICAgICAgICAgICAgdGhpc1tsZWZ0T3JSaWdodCsnQ2FsZW5kYXInXS5tb250aC5tb250aChtb250aCkueWVhcih5ZWFyKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlVGltZTogZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgICB2YXIgY2FsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhbGVuZGFyJyksXG4gICAgICAgICAgICAgICAgaXNMZWZ0ID0gY2FsLmhhc0NsYXNzKCdsZWZ0Jyk7XG5cbiAgICAgICAgICAgIHZhciBob3VyID0gcGFyc2VJbnQoY2FsLmZpbmQoJy5ob3Vyc2VsZWN0JykudmFsKCksIDEwKTtcbiAgICAgICAgICAgIHZhciBtaW51dGUgPSBwYXJzZUludChjYWwuZmluZCgnLm1pbnV0ZXNlbGVjdCcpLnZhbCgpLCAxMCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVQaWNrZXIxMkhvdXIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW1wbSA9IGNhbC5maW5kKCcuYW1wbXNlbGVjdCcpLnZhbCgpO1xuICAgICAgICAgICAgICAgIGlmIChhbXBtID09PSAnUE0nICYmIGhvdXIgPCAxMilcbiAgICAgICAgICAgICAgICAgICAgaG91ciArPSAxMjtcbiAgICAgICAgICAgICAgICBpZiAoYW1wbSA9PT0gJ0FNJyAmJiBob3VyID09PSAxMilcbiAgICAgICAgICAgICAgICAgICAgaG91ciA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChpc0xlZnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0RGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIHN0YXJ0LmhvdXIoaG91cik7XG4gICAgICAgICAgICAgICAgc3RhcnQubWludXRlKG1pbnV0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBzdGFydDtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRDYWxlbmRhci5tb250aC5ob3VyKGhvdXIpLm1pbnV0ZShtaW51dGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gdGhpcy5lbmREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgZW5kLmhvdXIoaG91cik7XG4gICAgICAgICAgICAgICAgZW5kLm1pbnV0ZShtaW51dGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IGVuZDtcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGguaG91cihob3VyKS5taW51dGUobWludXRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVDYWxlbmRhcnM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubGVmdENhbGVuZGFyLmNhbGVuZGFyID0gdGhpcy5idWlsZENhbGVuZGFyKHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLm1vbnRoKCksIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLnllYXIoKSwgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGguaG91cigpLCB0aGlzLmxlZnRDYWxlbmRhci5tb250aC5taW51dGUoKSwgJ2xlZnQnKTtcbiAgICAgICAgICAgIHRoaXMucmlnaHRDYWxlbmRhci5jYWxlbmRhciA9IHRoaXMuYnVpbGRDYWxlbmRhcih0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGgubW9udGgoKSwgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLnllYXIoKSwgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLmhvdXIoKSwgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLm1pbnV0ZSgpLCAncmlnaHQnKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci5sZWZ0JykuZW1wdHkoKS5odG1sKHRoaXMucmVuZGVyQ2FsZW5kYXIodGhpcy5sZWZ0Q2FsZW5kYXIuY2FsZW5kYXIsIHRoaXMuc3RhcnREYXRlLCB0aGlzLm1pbkRhdGUsIHRoaXMubWF4RGF0ZSkpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLnJpZ2h0JykuZW1wdHkoKS5odG1sKHRoaXMucmVuZGVyQ2FsZW5kYXIodGhpcy5yaWdodENhbGVuZGFyLmNhbGVuZGFyLCB0aGlzLmVuZERhdGUsIHRoaXMuc2luZ2xlRGF0ZVBpY2tlciA/IHRoaXMubWluRGF0ZSA6IHRoaXMuc3RhcnREYXRlLCB0aGlzLm1heERhdGUpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcyBsaScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHZhciBjdXN0b21SYW5nZSA9IHRydWU7XG4gICAgICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciByYW5nZSBpbiB0aGlzLnJhbmdlcykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbWVQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnREYXRlLmlzU2FtZSh0aGlzLnJhbmdlc1tyYW5nZV1bMF0pICYmIHRoaXMuZW5kRGF0ZS5pc1NhbWUodGhpcy5yYW5nZXNbcmFuZ2VdWzFdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hvc2VuTGFiZWwgPSB0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzIGxpOmVxKCcgKyBpICsgJyknKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnYWN0aXZlJykuaHRtbCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9pZ25vcmUgdGltZXMgd2hlbiBjb21wYXJpbmcgZGF0ZXMgaWYgdGltZSBwaWNrZXIgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09IHRoaXMucmFuZ2VzW3JhbmdlXVswXS5mb3JtYXQoJ1lZWVktTU0tREQnKSAmJiB0aGlzLmVuZERhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykgPT0gdGhpcy5yYW5nZXNbcmFuZ2VdWzFdLmZvcm1hdCgnWVlZWS1NTS1ERCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9zZW5MYWJlbCA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy5yYW5nZXMgbGk6ZXEoJyArIGkgKyAnKScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1c3RvbVJhbmdlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jaG9zZW5MYWJlbCA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy5yYW5nZXMgbGk6bGFzdCcpLmFkZENsYXNzKCdhY3RpdmUnKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93Q2FsZW5kYXJzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYnVpbGRDYWxlbmRhcjogZnVuY3Rpb24gKG1vbnRoLCB5ZWFyLCBob3VyLCBtaW51dGUsIHNpZGUpIHtcbiAgICAgICAgICAgIHZhciBkYXlzSW5Nb250aCA9IG1vbWVudChbeWVhciwgbW9udGhdKS5kYXlzSW5Nb250aCgpO1xuICAgICAgICAgICAgdmFyIGZpcnN0RGF5ID0gbW9tZW50KFt5ZWFyLCBtb250aCwgMV0pO1xuICAgICAgICAgICAgdmFyIGxhc3REYXkgPSBtb21lbnQoW3llYXIsIG1vbnRoLCBkYXlzSW5Nb250aF0pO1xuICAgICAgICAgICAgdmFyIGxhc3RNb250aCA9IG1vbWVudChmaXJzdERheSkuc3VidHJhY3QoMSwgJ21vbnRoJykubW9udGgoKTtcbiAgICAgICAgICAgIHZhciBsYXN0WWVhciA9IG1vbWVudChmaXJzdERheSkuc3VidHJhY3QoMSwgJ21vbnRoJykueWVhcigpO1xuXG4gICAgICAgICAgICB2YXIgZGF5c0luTGFzdE1vbnRoID0gbW9tZW50KFtsYXN0WWVhciwgbGFzdE1vbnRoXSkuZGF5c0luTW9udGgoKTtcblxuICAgICAgICAgICAgdmFyIGRheU9mV2VlayA9IGZpcnN0RGF5LmRheSgpO1xuXG4gICAgICAgICAgICB2YXIgaTtcblxuICAgICAgICAgICAgLy9pbml0aWFsaXplIGEgNiByb3dzIHggNyBjb2x1bW5zIGFycmF5IGZvciB0aGUgY2FsZW5kYXJcbiAgICAgICAgICAgIHZhciBjYWxlbmRhciA9IFtdO1xuICAgICAgICAgICAgY2FsZW5kYXIuZmlyc3REYXkgPSBmaXJzdERheTtcbiAgICAgICAgICAgIGNhbGVuZGFyLmxhc3REYXkgPSBsYXN0RGF5O1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJbaV0gPSBbXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy9wb3B1bGF0ZSB0aGUgY2FsZW5kYXIgd2l0aCBkYXRlIG9iamVjdHNcbiAgICAgICAgICAgIHZhciBzdGFydERheSA9IGRheXNJbkxhc3RNb250aCAtIGRheU9mV2VlayArIHRoaXMubG9jYWxlLmZpcnN0RGF5ICsgMTtcbiAgICAgICAgICAgIGlmIChzdGFydERheSA+IGRheXNJbkxhc3RNb250aClcbiAgICAgICAgICAgICAgICBzdGFydERheSAtPSA3O1xuXG4gICAgICAgICAgICBpZiAoZGF5T2ZXZWVrID09IHRoaXMubG9jYWxlLmZpcnN0RGF5KVxuICAgICAgICAgICAgICAgIHN0YXJ0RGF5ID0gZGF5c0luTGFzdE1vbnRoIC0gNjtcblxuICAgICAgICAgICAgdmFyIGN1ckRhdGUgPSBtb21lbnQoW2xhc3RZZWFyLCBsYXN0TW9udGgsIHN0YXJ0RGF5LCAxMiwgbWludXRlXSk7XG4gICAgICAgICAgICB2YXIgY29sLCByb3c7XG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBjb2wgPSAwLCByb3cgPSAwOyBpIDwgNDI7IGkrKywgY29sKyssIGN1ckRhdGUgPSBtb21lbnQoY3VyRGF0ZSkuYWRkKDI0LCAnaG91cicpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPiAwICYmIGNvbCAlIDcgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29sID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcm93Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhbGVuZGFyW3Jvd11bY29sXSA9IGN1ckRhdGUuY2xvbmUoKS5ob3VyKGhvdXIpO1xuICAgICAgICAgICAgICAgIGN1ckRhdGUuaG91cigxMik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxlbmRhcjtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXJEcm9wZG93bnM6IGZ1bmN0aW9uIChzZWxlY3RlZCwgbWluRGF0ZSwgbWF4RGF0ZSkge1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRNb250aCA9IHNlbGVjdGVkLm1vbnRoKCk7XG4gICAgICAgICAgICB2YXIgbW9udGhIdG1sID0gJzxzZWxlY3QgY2xhc3M9XCJtb250aHNlbGVjdFwiPic7XG4gICAgICAgICAgICB2YXIgaW5NaW5ZZWFyID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgaW5NYXhZZWFyID0gZmFsc2U7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG0gPSAwOyBtIDwgMTI7IG0rKykge1xuICAgICAgICAgICAgICAgIGlmICgoIWluTWluWWVhciB8fCBtID49IG1pbkRhdGUubW9udGgoKSkgJiYgKCFpbk1heFllYXIgfHwgbSA8PSBtYXhEYXRlLm1vbnRoKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoSHRtbCArPSBcIjxvcHRpb24gdmFsdWU9J1wiICsgbSArIFwiJ1wiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIChtID09PSBjdXJyZW50TW9udGggPyBcIiBzZWxlY3RlZD0nc2VsZWN0ZWQnXCIgOiBcIlwiKSArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIj5cIiArIHRoaXMubG9jYWxlLm1vbnRoTmFtZXNbbV0gKyBcIjwvb3B0aW9uPlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1vbnRoSHRtbCArPSBcIjwvc2VsZWN0PlwiO1xuXG4gICAgICAgICAgICB2YXIgY3VycmVudFllYXIgPSBzZWxlY3RlZC55ZWFyKCk7XG4gICAgICAgICAgICB2YXIgbWF4WWVhciA9IChtYXhEYXRlICYmIG1heERhdGUueWVhcigpKSB8fCAoY3VycmVudFllYXIgKyA1KTtcbiAgICAgICAgICAgIHZhciBtaW5ZZWFyID0gKG1pbkRhdGUgJiYgbWluRGF0ZS55ZWFyKCkpIHx8IChjdXJyZW50WWVhciAtIDUwKTtcbiAgICAgICAgICAgIHZhciB5ZWFySHRtbCA9ICc8c2VsZWN0IGNsYXNzPVwieWVhcnNlbGVjdFwiPic7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHkgPSBtaW5ZZWFyOyB5IDw9IG1heFllYXI7IHkrKykge1xuICAgICAgICAgICAgICAgIHllYXJIdG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHkgKyAnXCInICtcbiAgICAgICAgICAgICAgICAgICAgKHkgPT09IGN1cnJlbnRZZWFyID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInIDogJycpICtcbiAgICAgICAgICAgICAgICAgICAgJz4nICsgeSArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB5ZWFySHRtbCArPSAnPC9zZWxlY3Q+JztcblxuICAgICAgICAgICAgcmV0dXJuIG1vbnRoSHRtbCArIHllYXJIdG1sO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlckNhbGVuZGFyOiBmdW5jdGlvbiAoY2FsZW5kYXIsIHNlbGVjdGVkLCBtaW5EYXRlLCBtYXhEYXRlKSB7XG5cbiAgICAgICAgICAgIHZhciBodG1sID0gJzxkaXYgY2xhc3M9XCJjYWxlbmRhci1kYXRlXCI+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPic7XG4gICAgICAgICAgICBodG1sICs9ICc8dGhlYWQ+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzx0cj4nO1xuXG4gICAgICAgICAgICAvLyBhZGQgZW1wdHkgY2VsbCBmb3Igd2VlayBudW1iZXJcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dXZWVrTnVtYmVycylcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGg+PC90aD4nO1xuXG4gICAgICAgICAgICBpZiAoIW1pbkRhdGUgfHwgbWluRGF0ZS5pc0JlZm9yZShjYWxlbmRhci5maXJzdERheSkpIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGggY2xhc3M9XCJwcmV2IGF2YWlsYWJsZVwiPjxpIGNsYXNzPVwiZmEgZmEtYXJyb3ctbGVmdCBpY29uLWFycm93LWxlZnQgZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1sZWZ0XCI+PC9pPjwvdGg+JztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPHRoPjwvdGg+JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRhdGVIdG1sID0gdGhpcy5sb2NhbGUubW9udGhOYW1lc1tjYWxlbmRhclsxXVsxXS5tb250aCgpXSArIGNhbGVuZGFyWzFdWzFdLmZvcm1hdChcIiBZWVlZXCIpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93RHJvcGRvd25zKSB7XG4gICAgICAgICAgICAgICAgZGF0ZUh0bWwgPSB0aGlzLnJlbmRlckRyb3Bkb3ducyhjYWxlbmRhclsxXVsxXSwgbWluRGF0ZSwgbWF4RGF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGh0bWwgKz0gJzx0aCBjb2xzcGFuPVwiNVwiIGNsYXNzPVwibW9udGhcIj4nICsgZGF0ZUh0bWwgKyAnPC90aD4nO1xuICAgICAgICAgICAgaWYgKCFtYXhEYXRlIHx8IG1heERhdGUuaXNBZnRlcihjYWxlbmRhci5sYXN0RGF5KSkge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0aCBjbGFzcz1cIm5leHQgYXZhaWxhYmxlXCI+PGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1yaWdodCBpY29uLWFycm93LXJpZ2h0IGdseXBoaWNvbiBnbHlwaGljb24tYXJyb3ctcmlnaHRcIj48L2k+PC90aD4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGg+PC90aD4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBodG1sICs9ICc8L3RyPic7XG4gICAgICAgICAgICBodG1sICs9ICc8dHI+JztcblxuICAgICAgICAgICAgLy8gYWRkIHdlZWsgbnVtYmVyIGxhYmVsXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93V2Vla051bWJlcnMpXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPHRoIGNsYXNzPVwid2Vla1wiPicgKyB0aGlzLmxvY2FsZS53ZWVrTGFiZWwgKyAnPC90aD4nO1xuXG4gICAgICAgICAgICAkLmVhY2godGhpcy5sb2NhbGUuZGF5c09mV2VlaywgZnVuY3Rpb24gKGluZGV4LCBkYXlPZldlZWspIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGg+JyArIGRheU9mV2VlayArICc8L3RoPic7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaHRtbCArPSAnPC90cj4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPC90aGVhZD4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPHRib2R5Pic7XG5cbiAgICAgICAgICAgIGZvciAodmFyIHJvdyA9IDA7IHJvdyA8IDY7IHJvdysrKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPHRyPic7XG5cbiAgICAgICAgICAgICAgICAvLyBhZGQgd2VlayBudW1iZXJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93V2Vla051bWJlcnMpXG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0ZCBjbGFzcz1cIndlZWtcIj4nICsgY2FsZW5kYXJbcm93XVswXS53ZWVrKCkgKyAnPC90ZD4nO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgY29sID0gMDsgY29sIDwgNzsgY29sKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNuYW1lID0gJ2F2YWlsYWJsZSAnO1xuICAgICAgICAgICAgICAgICAgICBjbmFtZSArPSAoY2FsZW5kYXJbcm93XVtjb2xdLm1vbnRoKCkgPT0gY2FsZW5kYXJbMV1bMV0ubW9udGgoKSkgPyAnJyA6ICdvZmYnO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgobWluRGF0ZSAmJiBjYWxlbmRhcltyb3ddW2NvbF0uaXNCZWZvcmUobWluRGF0ZSwgJ2RheScpKSB8fCAobWF4RGF0ZSAmJiBjYWxlbmRhcltyb3ddW2NvbF0uaXNBZnRlcihtYXhEYXRlLCAnZGF5JykpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbmFtZSA9ICcgb2ZmIGRpc2FibGVkICc7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJbcm93XVtjb2xdLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09IHNlbGVjdGVkLmZvcm1hdCgnWVlZWS1NTS1ERCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbmFtZSArPSAnIGFjdGl2ZSAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGVuZGFyW3Jvd11bY29sXS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PSB0aGlzLnN0YXJ0RGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNuYW1lICs9ICcgc3RhcnQtZGF0ZSAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGVuZGFyW3Jvd11bY29sXS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PSB0aGlzLmVuZERhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbmFtZSArPSAnIGVuZC1kYXRlICc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsZW5kYXJbcm93XVtjb2xdID49IHRoaXMuc3RhcnREYXRlICYmIGNhbGVuZGFyW3Jvd11bY29sXSA8PSB0aGlzLmVuZERhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNuYW1lICs9ICcgaW4tcmFuZ2UgJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWxlbmRhcltyb3ddW2NvbF0uaXNTYW1lKHRoaXMuc3RhcnREYXRlKSkgeyBjbmFtZSArPSAnIHN0YXJ0LWRhdGUgJzsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGVuZGFyW3Jvd11bY29sXS5pc1NhbWUodGhpcy5lbmREYXRlKSkgeyBjbmFtZSArPSAnIGVuZC1kYXRlICc7IH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aXRsZSA9ICdyJyArIHJvdyArICdjJyArIGNvbDtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHRkIGNsYXNzPVwiJyArIGNuYW1lLnJlcGxhY2UoL1xccysvZywgJyAnKS5yZXBsYWNlKC9eXFxzPyguKj8pXFxzPyQvLCAnJDEnKSArICdcIiBkYXRhLXRpdGxlPVwiJyArIHRpdGxlICsgJ1wiPicgKyBjYWxlbmRhcltyb3ddW2NvbF0uZGF0ZSgpICsgJzwvdGQ+JztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC90cj4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBodG1sICs9ICc8L3Rib2R5Pic7XG4gICAgICAgICAgICBodG1sICs9ICc8L3RhYmxlPic7XG4gICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVQaWNrZXIpIHtcblxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxkaXYgY2xhc3M9XCJjYWxlbmRhci10aW1lXCI+JztcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8c2VsZWN0IGNsYXNzPVwiaG91cnNlbGVjdFwiPic7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gMjM7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkX2hvdXIgPSBzZWxlY3RlZC5ob3VyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGltZVBpY2tlcjEySG91cikge1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGVuZCA9IDEyO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRfaG91ciA+PSAxMilcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkX2hvdXIgLT0gMTI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZF9ob3VyID09PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRfaG91ciA9IDEyO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZvciAoaSA9IHN0YXJ0OyBpIDw9IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IHNlbGVjdGVkX2hvdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgaSArICdcIiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+JyArIGkgKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgaSArICdcIj4nICsgaSArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9zZWxlY3Q+IDogJztcblxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxzZWxlY3QgY2xhc3M9XCJtaW51dGVzZWxlY3RcIj4nO1xuXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IDYwOyBpICs9IHRoaXMudGltZVBpY2tlckluY3JlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gaTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bSA8IDEwKVxuICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gJzAnICsgbnVtO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PSBzZWxlY3RlZC5taW51dGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBpICsgJ1wiIHNlbGVjdGVkPVwic2VsZWN0ZWRcIj4nICsgbnVtICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGkgKyAnXCI+JyArIG51bSArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9zZWxlY3Q+ICc7XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aW1lUGlja2VyMTJIb3VyKSB7XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxzZWxlY3QgY2xhc3M9XCJhbXBtc2VsZWN0XCI+JztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkLmhvdXIoKSA+PSAxMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIkFNXCI+QU08L29wdGlvbj48b3B0aW9uIHZhbHVlPVwiUE1cIiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+UE08L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIkFNXCIgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPkFNPC9vcHRpb24+PG9wdGlvbiB2YWx1ZT1cIlBNXCI+UE08L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzwvc2VsZWN0Pic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gaHRtbDtcblxuICAgICAgICB9LFxuXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm9mZignLmRhdGVyYW5nZXBpY2tlcicpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZURhdGEoJ2RhdGVyYW5nZXBpY2tlcicpO1xuXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICAkLmZuLmRhdGVyYW5nZXBpY2tlciA9IGZ1bmN0aW9uIChvcHRpb25zLCBjYikge1xuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gJCh0aGlzKTtcbiAgICAgICAgICAgIGlmIChlbC5kYXRhKCdkYXRlcmFuZ2VwaWNrZXInKSlcbiAgICAgICAgICAgICAgICBlbC5kYXRhKCdkYXRlcmFuZ2VwaWNrZXInKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIGVsLmRhdGEoJ2RhdGVyYW5nZXBpY2tlcicsIG5ldyBEYXRlUmFuZ2VQaWNrZXIoZWwsIG9wdGlvbnMsIGNiKSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG59KSk7XG4iLCIvKlxuIEhpZ2hjaGFydHMgSlMgdjQuMC40ICgyMDE0LTA5LTAyKVxuXG4gKGMpIDIwMDktMjAxNCBUb3JzdGVpbiBIb25zaVxuXG4gTGljZW5zZTogd3d3LmhpZ2hjaGFydHMuY29tL2xpY2Vuc2VcbiovXG4oZnVuY3Rpb24oKXtmdW5jdGlvbiByKGEsYil7dmFyIGM7YXx8KGE9e30pO2ZvcihjIGluIGIpYVtjXT1iW2NdO3JldHVybiBhfWZ1bmN0aW9uIHcoKXt2YXIgYSxiPWFyZ3VtZW50cyxjLGQ9e30sZT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7dHlwZW9mIGEhPT1cIm9iamVjdFwiJiYoYT17fSk7Zm9yKGQgaW4gYiliLmhhc093blByb3BlcnR5KGQpJiYoYz1iW2RdLGFbZF09YyYmdHlwZW9mIGM9PT1cIm9iamVjdFwiJiZPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYykhPT1cIltvYmplY3QgQXJyYXldXCImJmQhPT1cInJlbmRlclRvXCImJnR5cGVvZiBjLm5vZGVUeXBlIT09XCJudW1iZXJcIj9lKGFbZF18fHt9LGMpOmJbZF0pO3JldHVybiBhfTtiWzBdPT09ITAmJihkPWJbMV0sYj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiLDIpKTtjPWIubGVuZ3RoO2ZvcihhPTA7YTxjO2ErKylkPWUoZCxiW2FdKTtyZXR1cm4gZH1mdW5jdGlvbiB5KGEsYil7cmV0dXJuIHBhcnNlSW50KGEsYnx8XG4xMCl9ZnVuY3Rpb24gR2EoYSl7cmV0dXJuIHR5cGVvZiBhPT09XCJzdHJpbmdcIn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gYSYmdHlwZW9mIGE9PT1cIm9iamVjdFwifWZ1bmN0aW9uIEhhKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSk9PT1cIltvYmplY3QgQXJyYXldXCJ9ZnVuY3Rpb24gamEoYSl7cmV0dXJuIHR5cGVvZiBhPT09XCJudW1iZXJcIn1mdW5jdGlvbiB6YShhKXtyZXR1cm4gVi5sb2coYSkvVi5MTjEwfWZ1bmN0aW9uIGthKGEpe3JldHVybiBWLnBvdygxMCxhKX1mdW5jdGlvbiBsYShhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aDtjLS07KWlmKGFbY109PT1iKXthLnNwbGljZShjLDEpO2JyZWFrfX1mdW5jdGlvbiBzKGEpe3JldHVybiBhIT09dSYmYSE9PW51bGx9ZnVuY3Rpb24gRihhLGIsYyl7dmFyIGQsZTtpZihHYShiKSlzKGMpP2Euc2V0QXR0cmlidXRlKGIsYyk6YSYmYS5nZXRBdHRyaWJ1dGUmJihlPWEuZ2V0QXR0cmlidXRlKGIpKTtlbHNlIGlmKHMoYikmJlxuZGEoYikpZm9yKGQgaW4gYilhLnNldEF0dHJpYnV0ZShkLGJbZF0pO3JldHVybiBlfWZ1bmN0aW9uIHJhKGEpe3JldHVybiBIYShhKT9hOlthXX1mdW5jdGlvbiBwKCl7dmFyIGE9YXJndW1lbnRzLGIsYyxkPWEubGVuZ3RoO2ZvcihiPTA7YjxkO2IrKylpZihjPWFbYl0sYyE9PXUmJmMhPT1udWxsKXJldHVybiBjfWZ1bmN0aW9uIEIoYSxiKXtpZihBYSYmIWJhJiZiJiZiLm9wYWNpdHkhPT11KWIuZmlsdGVyPVwiYWxwaGEob3BhY2l0eT1cIitiLm9wYWNpdHkqMTAwK1wiKVwiO3IoYS5zdHlsZSxiKX1mdW5jdGlvbiAkKGEsYixjLGQsZSl7YT14LmNyZWF0ZUVsZW1lbnQoYSk7YiYmcihhLGIpO2UmJkIoYSx7cGFkZGluZzowLGJvcmRlcjpQLG1hcmdpbjowfSk7YyYmQihhLGMpO2QmJmQuYXBwZW5kQ2hpbGQoYSk7cmV0dXJuIGF9ZnVuY3Rpb24gbWEoYSxiKXt2YXIgYz1mdW5jdGlvbigpe3JldHVybiB1fTtjLnByb3RvdHlwZT1uZXcgYTtyKGMucHJvdG90eXBlLGIpO3JldHVybiBjfWZ1bmN0aW9uIEJhKGEsXG5iLGMsZCl7dmFyIGU9Sy5udW1iZXJGb3JtYXQsZj1FLmxhbmcsZz0rYXx8MCxoPWI9PT0tMT8oZy50b1N0cmluZygpLnNwbGl0KFwiLlwiKVsxXXx8XCJcIikubGVuZ3RoOmlzTmFOKGI9UShiKSk/MjpiLGk9Yz09PXZvaWQgMD9mLmRlY2ltYWxQb2ludDpjLGY9ZD09PXZvaWQgMD9mLnRob3VzYW5kc1NlcDpkLGo9ZzwwP1wiLVwiOlwiXCIsaz1TdHJpbmcoeShnPVEoZykudG9GaXhlZChoKSkpLGw9ay5sZW5ndGg+Mz9rLmxlbmd0aCUzOjA7cmV0dXJuIGUhPT1CYT9lKGEsYixjLGQpOmorKGw/ay5zdWJzdHIoMCxsKStmOlwiXCIpK2suc3Vic3RyKGwpLnJlcGxhY2UoLyhcXGR7M30pKD89XFxkKS9nLFwiJDFcIitmKSsoaD9pK1EoZy1rKS50b0ZpeGVkKGgpLnNsaWNlKDIpOlwiXCIpfWZ1bmN0aW9uIElhKGEsYil7cmV0dXJuIEFycmF5KChifHwyKSsxLVN0cmluZyhhKS5sZW5ndGgpLmpvaW4oMCkrYX1mdW5jdGlvbiBOYShhLGIsYyl7dmFyIGQ9YVtiXTthW2JdPWZ1bmN0aW9uKCl7dmFyIGE9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbmEudW5zaGlmdChkKTtyZXR1cm4gYy5hcHBseSh0aGlzLGEpfX1mdW5jdGlvbiBKYShhLGIpe2Zvcih2YXIgYz1cIntcIixkPSExLGUsZixnLGgsaSxqPVtdOyhjPWEuaW5kZXhPZihjKSkhPT0tMTspe2U9YS5zbGljZSgwLGMpO2lmKGQpe2Y9ZS5zcGxpdChcIjpcIik7Zz1mLnNoaWZ0KCkuc3BsaXQoXCIuXCIpO2k9Zy5sZW5ndGg7ZT1iO2ZvcihoPTA7aDxpO2grKyllPWVbZ1toXV07aWYoZi5sZW5ndGgpZj1mLmpvaW4oXCI6XCIpLGc9L1xcLihbMC05XSkvLGg9RS5sYW5nLGk9dm9pZCAwLC9mJC8udGVzdChmKT8oaT0oaT1mLm1hdGNoKGcpKT9pWzFdOi0xLGUhPT1udWxsJiYoZT1CYShlLGksaC5kZWNpbWFsUG9pbnQsZi5pbmRleE9mKFwiLFwiKT4tMT9oLnRob3VzYW5kc1NlcDpcIlwiKSkpOmU9Y2IoZixlKX1qLnB1c2goZSk7YT1hLnNsaWNlKGMrMSk7Yz0oZD0hZCk/XCJ9XCI6XCJ7XCJ9ai5wdXNoKGEpO3JldHVybiBqLmpvaW4oXCJcIil9ZnVuY3Rpb24gbWIoYSl7cmV0dXJuIFYucG93KDEwLFUoVi5sb2coYSkvXG5WLkxOMTApKX1mdW5jdGlvbiBuYihhLGIsYyxkKXt2YXIgZSxjPXAoYywxKTtlPWEvYztifHwoYj1bMSwyLDIuNSw1LDEwXSxkPT09ITEmJihjPT09MT9iPVsxLDIsNSwxMF06Yzw9MC4xJiYoYj1bMS9jXSkpKTtmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWlmKGE9YltkXSxlPD0oYltkXSsoYltkKzFdfHxiW2RdKSkvMilicmVhazthKj1jO3JldHVybiBhfWZ1bmN0aW9uIG9iKGEsYil7dmFyIGM9YS5sZW5ndGgsZCxlO2ZvcihlPTA7ZTxjO2UrKylhW2VdLnNzX2k9ZTthLnNvcnQoZnVuY3Rpb24oYSxjKXtkPWIoYSxjKTtyZXR1cm4gZD09PTA/YS5zc19pLWMuc3NfaTpkfSk7Zm9yKGU9MDtlPGM7ZSsrKWRlbGV0ZSBhW2VdLnNzX2l9ZnVuY3Rpb24gT2EoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9YVswXTtiLS07KWFbYl08YyYmKGM9YVtiXSk7cmV0dXJuIGN9ZnVuY3Rpb24gQ2EoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9YVswXTtiLS07KWFbYl0+YyYmKGM9YVtiXSk7cmV0dXJuIGN9XG5mdW5jdGlvbiBQYShhLGIpe2Zvcih2YXIgYyBpbiBhKWFbY10mJmFbY10hPT1iJiZhW2NdLmRlc3Ryb3kmJmFbY10uZGVzdHJveSgpLGRlbGV0ZSBhW2NdfWZ1bmN0aW9uIFFhKGEpe2RifHwoZGI9JChLYSkpO2EmJmRiLmFwcGVuZENoaWxkKGEpO2RiLmlubmVySFRNTD1cIlwifWZ1bmN0aW9uIGVhKGEpe3JldHVybiBwYXJzZUZsb2F0KGEudG9QcmVjaXNpb24oMTQpKX1mdW5jdGlvbiBSYShhLGIpe3ZhPXAoYSxiLmFuaW1hdGlvbil9ZnVuY3Rpb24gQmIoKXt2YXIgYT1FLmdsb2JhbC51c2VVVEMsYj1hP1wiZ2V0VVRDXCI6XCJnZXRcIixjPWE/XCJzZXRVVENcIjpcInNldFwiO0RhPUUuZ2xvYmFsLkRhdGV8fHdpbmRvdy5EYXRlO1NhPShhJiZFLmdsb2JhbC50aW1lem9uZU9mZnNldHx8MCkqNkU0O2ViPWE/RGEuVVRDOmZ1bmN0aW9uKGEsYixjLGcsaCxpKXtyZXR1cm4obmV3IERhKGEsYixwKGMsMSkscChnLDApLHAoaCwwKSxwKGksMCkpKS5nZXRUaW1lKCl9O3BiPWIrXCJNaW51dGVzXCI7cWI9YitcblwiSG91cnNcIjtyYj1iK1wiRGF5XCI7WGE9YitcIkRhdGVcIjtmYj1iK1wiTW9udGhcIjtnYj1iK1wiRnVsbFllYXJcIjtDYj1jK1wiTWludXRlc1wiO0RiPWMrXCJIb3Vyc1wiO3NiPWMrXCJEYXRlXCI7RWI9YytcIk1vbnRoXCI7RmI9YytcIkZ1bGxZZWFyXCJ9ZnVuY3Rpb24gUygpe31mdW5jdGlvbiBUYShhLGIsYyxkKXt0aGlzLmF4aXM9YTt0aGlzLnBvcz1iO3RoaXMudHlwZT1jfHxcIlwiO3RoaXMuaXNOZXc9ITA7IWMmJiFkJiZ0aGlzLmFkZExhYmVsKCl9ZnVuY3Rpb24gbmEoKXt0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIFlhKCl7dGhpcy5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX1mdW5jdGlvbiBHYihhLGIsYyxkLGUpe3ZhciBmPWEuY2hhcnQuaW52ZXJ0ZWQ7dGhpcy5heGlzPWE7dGhpcy5pc05lZ2F0aXZlPWM7dGhpcy5vcHRpb25zPWI7dGhpcy54PWQ7dGhpcy50b3RhbD1udWxsO3RoaXMucG9pbnRzPXt9O3RoaXMuc3RhY2s9ZTt0aGlzLmFsaWduT3B0aW9ucz17YWxpZ246Yi5hbGlnbnx8XG4oZj9jP1wibGVmdFwiOlwicmlnaHRcIjpcImNlbnRlclwiKSx2ZXJ0aWNhbEFsaWduOmIudmVydGljYWxBbGlnbnx8KGY/XCJtaWRkbGVcIjpjP1wiYm90dG9tXCI6XCJ0b3BcIikseTpwKGIueSxmPzQ6Yz8xNDotNikseDpwKGIueCxmP2M/LTY6NjowKX07dGhpcy50ZXh0QWxpZ249Yi50ZXh0QWxpZ258fChmP2M/XCJyaWdodFwiOlwibGVmdFwiOlwiY2VudGVyXCIpfXZhciB1LHg9ZG9jdW1lbnQsRz13aW5kb3csVj1NYXRoLHY9Vi5yb3VuZCxVPVYuZmxvb3IsTGE9Vi5jZWlsLHQ9Vi5tYXgsTD1WLm1pbixRPVYuYWJzLGFhPVYuY29zLGZhPVYuc2luLG9hPVYuUEksRWE9b2EqMi8zNjAsd2E9bmF2aWdhdG9yLnVzZXJBZ2VudCxIYj1HLm9wZXJhLEFhPS9tc2llL2kudGVzdCh3YSkmJiFIYixoYj14LmRvY3VtZW50TW9kZT09PTgsdGI9L0FwcGxlV2ViS2l0Ly50ZXN0KHdhKSxVYT0vRmlyZWZveC8udGVzdCh3YSksSWI9LyhNb2JpbGV8QW5kcm9pZHxXaW5kb3dzIFBob25lKS8udGVzdCh3YSkseGE9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuYmE9ISF4LmNyZWF0ZUVsZW1lbnROUyYmISF4LmNyZWF0ZUVsZW1lbnROUyh4YSxcInN2Z1wiKS5jcmVhdGVTVkdSZWN0LE9iPVVhJiZwYXJzZUludCh3YS5zcGxpdChcIkZpcmVmb3gvXCIpWzFdLDEwKTw0LGdhPSFiYSYmIUFhJiYhIXguY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0LFphLCRhLEpiPXt9LHViPTAsZGIsRSxjYix2YSx2YixBLGhhLHNhPWZ1bmN0aW9uKCl7cmV0dXJuIHV9LFc9W10sYWI9MCxLYT1cImRpdlwiLFA9XCJub25lXCIsUGI9L15bMC05XSskLyxRYj1cInN0cm9rZS13aWR0aFwiLERhLGViLFNhLHBiLHFiLHJiLFhhLGZiLGdiLENiLERiLHNiLEViLEZiLEg9e30sSztHLkhpZ2hjaGFydHM/aGEoMTYsITApOks9Ry5IaWdoY2hhcnRzPXt9O2NiPWZ1bmN0aW9uKGEsYixjKXtpZighcyhiKXx8aXNOYU4oYikpcmV0dXJuXCJJbnZhbGlkIGRhdGVcIjt2YXIgYT1wKGEsXCIlWS0lbS0lZCAlSDolTTolU1wiKSxkPW5ldyBEYShiLVNhKSxlLGY9ZFtxYl0oKSxnPWRbcmJdKCksXG5oPWRbWGFdKCksaT1kW2ZiXSgpLGo9ZFtnYl0oKSxrPUUubGFuZyxsPWsud2Vla2RheXMsZD1yKHthOmxbZ10uc3Vic3RyKDAsMyksQTpsW2ddLGQ6SWEoaCksZTpoLGI6ay5zaG9ydE1vbnRoc1tpXSxCOmsubW9udGhzW2ldLG06SWEoaSsxKSx5OmoudG9TdHJpbmcoKS5zdWJzdHIoMiwyKSxZOmosSDpJYShmKSxJOklhKGYlMTJ8fDEyKSxsOmYlMTJ8fDEyLE06SWEoZFtwYl0oKSkscDpmPDEyP1wiQU1cIjpcIlBNXCIsUDpmPDEyP1wiYW1cIjpcInBtXCIsUzpJYShkLmdldFNlY29uZHMoKSksTDpJYSh2KGIlMUUzKSwzKX0sSy5kYXRlRm9ybWF0cyk7Zm9yKGUgaW4gZClmb3IoO2EuaW5kZXhPZihcIiVcIitlKSE9PS0xOylhPWEucmVwbGFjZShcIiVcIitlLHR5cGVvZiBkW2VdPT09XCJmdW5jdGlvblwiP2RbZV0oYik6ZFtlXSk7cmV0dXJuIGM/YS5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpK2Euc3Vic3RyKDEpOmF9O2hhPWZ1bmN0aW9uKGEsYil7dmFyIGM9XCJIaWdoY2hhcnRzIGVycm9yICNcIithK1wiOiB3d3cuaGlnaGNoYXJ0cy5jb20vZXJyb3JzL1wiK1xuYTtpZihiKXRocm93IGM7Ry5jb25zb2xlJiZjb25zb2xlLmxvZyhjKX07QT17bWlsbGlzZWNvbmQ6MSxzZWNvbmQ6MUUzLG1pbnV0ZTo2RTQsaG91cjozNkU1LGRheTo4NjRFNSx3ZWVrOjYwNDhFNSxtb250aDoyNjc4NEU1LHllYXI6MzE1NTY5NTJFM307dmI9e2luaXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBiPWJ8fFwiXCIsZD1hLnNoaWZ0LGU9Yi5pbmRleE9mKFwiQ1wiKT4tMSxmPWU/NzozLGcsYj1iLnNwbGl0KFwiIFwiKSxjPVtdLmNvbmNhdChjKSxoLGksaj1mdW5jdGlvbihhKXtmb3IoZz1hLmxlbmd0aDtnLS07KWFbZ109PT1cIk1cIiYmYS5zcGxpY2UoZysxLDAsYVtnKzFdLGFbZysyXSxhW2crMV0sYVtnKzJdKX07ZSYmKGooYiksaihjKSk7YS5pc0FyZWEmJihoPWIuc3BsaWNlKGIubGVuZ3RoLTYsNiksaT1jLnNwbGljZShjLmxlbmd0aC02LDYpKTtpZihkPD1jLmxlbmd0aC9mJiZiLmxlbmd0aD09PWMubGVuZ3RoKWZvcig7ZC0tOyljPVtdLmNvbmNhdChjKS5zcGxpY2UoMCxmKS5jb25jYXQoYyk7XG5hLnNoaWZ0PTA7aWYoYi5sZW5ndGgpZm9yKGE9Yy5sZW5ndGg7Yi5sZW5ndGg8YTspZD1bXS5jb25jYXQoYikuc3BsaWNlKGIubGVuZ3RoLWYsZiksZSYmKGRbZi02XT1kW2YtMl0sZFtmLTVdPWRbZi0xXSksYj1iLmNvbmNhdChkKTtoJiYoYj1iLmNvbmNhdChoKSxjPWMuY29uY2F0KGkpKTtyZXR1cm5bYixjXX0sc3RlcDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1bXSxmPWEubGVuZ3RoO2lmKGM9PT0xKWU9ZDtlbHNlIGlmKGY9PT1iLmxlbmd0aCYmYzwxKWZvcig7Zi0tOylkPXBhcnNlRmxvYXQoYVtmXSksZVtmXT1pc05hTihkKT9hW2ZdOmMqcGFyc2VGbG9hdChiW2ZdLWQpK2Q7ZWxzZSBlPWI7cmV0dXJuIGV9fTsoZnVuY3Rpb24oYSl7Ry5IaWdoY2hhcnRzQWRhcHRlcj1HLkhpZ2hjaGFydHNBZGFwdGVyfHxhJiZ7aW5pdDpmdW5jdGlvbihiKXt2YXIgYz1hLmZ4O2EuZXh0ZW5kKGEuZWFzaW5nLHtlYXNlT3V0UXVhZDpmdW5jdGlvbihhLGIsYyxnLGgpe3JldHVybi1nKihiLz1cbmgpKihiLTIpK2N9fSk7YS5lYWNoKFtcImN1clwiLFwiX2RlZmF1bHRcIixcIndpZHRoXCIsXCJoZWlnaHRcIixcIm9wYWNpdHlcIl0sZnVuY3Rpb24oYixlKXt2YXIgZj1jLnN0ZXAsZztlPT09XCJjdXJcIj9mPWMucHJvdG90eXBlOmU9PT1cIl9kZWZhdWx0XCImJmEuVHdlZW4mJihmPWEuVHdlZW4ucHJvcEhvb2tzW2VdLGU9XCJzZXRcIik7KGc9ZltlXSkmJihmW2VdPWZ1bmN0aW9uKGEpe3ZhciBjLGE9Yj9hOnRoaXM7aWYoYS5wcm9wIT09XCJhbGlnblwiKXJldHVybiBjPWEuZWxlbSxjLmF0dHI/Yy5hdHRyKGEucHJvcCxlPT09XCJjdXJcIj91OmEubm93KTpnLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pfSk7TmEoYS5jc3NIb29rcy5vcGFjaXR5LFwiZ2V0XCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiLmF0dHI/Yi5vcGFjaXR5fHwwOmEuY2FsbCh0aGlzLGIsYyl9KTt0aGlzLmFkZEFuaW1TZXR0ZXIoXCJkXCIsZnVuY3Rpb24oYSl7dmFyIGM9YS5lbGVtLGY7aWYoIWEuc3RhcnRlZClmPWIuaW5pdChjLGMuZCxjLnRvRCksXG5hLnN0YXJ0PWZbMF0sYS5lbmQ9ZlsxXSxhLnN0YXJ0ZWQ9ITA7Yy5hdHRyKFwiZFwiLGIuc3RlcChhLnN0YXJ0LGEuZW5kLGEucG9zLGMudG9EKSl9KTt0aGlzLmVhY2g9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGIpfTpmdW5jdGlvbihhLGIpe3ZhciBjLGc9YS5sZW5ndGg7Zm9yKGM9MDtjPGc7YysrKWlmKGIuY2FsbChhW2NdLGFbY10sYyxhKT09PSExKXJldHVybiBjfTthLmZuLmhpZ2hjaGFydHM9ZnVuY3Rpb24oKXt2YXIgYT1cIkNoYXJ0XCIsYj1hcmd1bWVudHMsYyxnO2lmKHRoaXNbMF0pe0dhKGJbMF0pJiYoYT1iWzBdLGI9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYiwxKSk7Yz1iWzBdO2lmKGMhPT11KWMuY2hhcnQ9Yy5jaGFydHx8e30sYy5jaGFydC5yZW5kZXJUbz10aGlzWzBdLG5ldyBLW2FdKGMsYlsxXSksZz10aGlzO2M9PT11JiYoZz1XW0YodGhpc1swXSxcImRhdGEtaGlnaGNoYXJ0cy1jaGFydFwiKV0pfXJldHVybiBnfX0sXG5hZGRBbmltU2V0dGVyOmZ1bmN0aW9uKGIsYyl7YS5Ud2Vlbj9hLlR3ZWVuLnByb3BIb29rc1tiXT17c2V0OmN9OmEuZnguc3RlcFtiXT1jfSxnZXRTY3JpcHQ6YS5nZXRTY3JpcHQsaW5BcnJheTphLmluQXJyYXksYWRhcHRlclJ1bjpmdW5jdGlvbihiLGMpe3JldHVybiBhKGIpW2NdKCl9LGdyZXA6YS5ncmVwLG1hcDpmdW5jdGlvbihhLGMpe2Zvcih2YXIgZD1bXSxlPTAsZj1hLmxlbmd0aDtlPGY7ZSsrKWRbZV09Yy5jYWxsKGFbZV0sYVtlXSxlLGEpO3JldHVybiBkfSxvZmZzZXQ6ZnVuY3Rpb24oYil7cmV0dXJuIGEoYikub2Zmc2V0KCl9LGFkZEV2ZW50OmZ1bmN0aW9uKGIsYyxkKXthKGIpLmJpbmQoYyxkKX0scmVtb3ZlRXZlbnQ6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPXgucmVtb3ZlRXZlbnRMaXN0ZW5lcj9cInJlbW92ZUV2ZW50TGlzdGVuZXJcIjpcImRldGFjaEV2ZW50XCI7eFtlXSYmYiYmIWJbZV0mJihiW2VdPWZ1bmN0aW9uKCl7fSk7YShiKS51bmJpbmQoYyxkKX0sZmlyZUV2ZW50OmZ1bmN0aW9uKGIsXG5jLGQsZSl7dmFyIGY9YS5FdmVudChjKSxnPVwiZGV0YWNoZWRcIitjLGg7IUFhJiZkJiYoZGVsZXRlIGQubGF5ZXJYLGRlbGV0ZSBkLmxheWVyWSxkZWxldGUgZC5yZXR1cm5WYWx1ZSk7cihmLGQpO2JbY10mJihiW2ddPWJbY10sYltjXT1udWxsKTthLmVhY2goW1wicHJldmVudERlZmF1bHRcIixcInN0b3BQcm9wYWdhdGlvblwiXSxmdW5jdGlvbihhLGIpe3ZhciBjPWZbYl07ZltiXT1mdW5jdGlvbigpe3RyeXtjLmNhbGwoZil9Y2F0Y2goYSl7Yj09PVwicHJldmVudERlZmF1bHRcIiYmKGg9ITApfX19KTthKGIpLnRyaWdnZXIoZik7YltnXSYmKGJbY109YltnXSxiW2ddPW51bGwpO2UmJiFmLmlzRGVmYXVsdFByZXZlbnRlZCgpJiYhaCYmZShmKX0sd2FzaE1vdXNlRXZlbnQ6ZnVuY3Rpb24oYSl7dmFyIGM9YS5vcmlnaW5hbEV2ZW50fHxhO2lmKGMucGFnZVg9PT11KWMucGFnZVg9YS5wYWdlWCxjLnBhZ2VZPWEucGFnZVk7cmV0dXJuIGN9LGFuaW1hdGU6ZnVuY3Rpb24oYixjLGQpe3ZhciBlPVxuYShiKTtpZighYi5zdHlsZSliLnN0eWxlPXt9O2lmKGMuZCliLnRvRD1jLmQsYy5kPTE7ZS5zdG9wKCk7Yy5vcGFjaXR5IT09dSYmYi5hdHRyJiYoYy5vcGFjaXR5Kz1cInB4XCIpO2IuaGFzQW5pbT0xO2UuYW5pbWF0ZShjLGQpfSxzdG9wOmZ1bmN0aW9uKGIpe2IuaGFzQW5pbSYmYShiKS5zdG9wKCl9fX0pKEcualF1ZXJ5KTt2YXIgVD1HLkhpZ2hjaGFydHNBZGFwdGVyLE09VHx8e307VCYmVC5pbml0LmNhbGwoVCx2Yik7dmFyIGliPU0uYWRhcHRlclJ1bixSYj1NLmdldFNjcmlwdCxNYT1NLmluQXJyYXkscT1NLmVhY2gsd2I9TS5ncmVwLFNiPU0ub2Zmc2V0LFZhPU0ubWFwLE49TS5hZGRFdmVudCxYPU0ucmVtb3ZlRXZlbnQsST1NLmZpcmVFdmVudCxUYj1NLndhc2hNb3VzZUV2ZW50LGpiPU0uYW5pbWF0ZSxiYj1NLnN0b3AsTT17ZW5hYmxlZDohMCx4OjAseToxNSxzdHlsZTp7Y29sb3I6XCIjNjA2MDYwXCIsY3Vyc29yOlwiZGVmYXVsdFwiLGZvbnRTaXplOlwiMTFweFwifX07RT17Y29sb3JzOlwiIzdjYjVlYywjNDM0MzQ4LCM5MGVkN2QsI2Y3YTM1YywjODA4NWU5LCNmMTVjODAsI2U0ZDM1NCwjODA4NWU4LCM4ZDQ2NTMsIzkxZThlMVwiLnNwbGl0KFwiLFwiKSxcbnN5bWJvbHM6W1wiY2lyY2xlXCIsXCJkaWFtb25kXCIsXCJzcXVhcmVcIixcInRyaWFuZ2xlXCIsXCJ0cmlhbmdsZS1kb3duXCJdLGxhbmc6e2xvYWRpbmc6XCJMb2FkaW5nLi4uXCIsbW9udGhzOlwiSmFudWFyeSxGZWJydWFyeSxNYXJjaCxBcHJpbCxNYXksSnVuZSxKdWx5LEF1Z3VzdCxTZXB0ZW1iZXIsT2N0b2JlcixOb3ZlbWJlcixEZWNlbWJlclwiLnNwbGl0KFwiLFwiKSxzaG9ydE1vbnRoczpcIkphbixGZWIsTWFyLEFwcixNYXksSnVuLEp1bCxBdWcsU2VwLE9jdCxOb3YsRGVjXCIuc3BsaXQoXCIsXCIpLHdlZWtkYXlzOlwiU3VuZGF5LE1vbmRheSxUdWVzZGF5LFdlZG5lc2RheSxUaHVyc2RheSxGcmlkYXksU2F0dXJkYXlcIi5zcGxpdChcIixcIiksZGVjaW1hbFBvaW50OlwiLlwiLG51bWVyaWNTeW1ib2xzOlwiayxNLEcsVCxQLEVcIi5zcGxpdChcIixcIikscmVzZXRab29tOlwiUmVzZXQgem9vbVwiLHJlc2V0Wm9vbVRpdGxlOlwiUmVzZXQgem9vbSBsZXZlbCAxOjFcIix0aG91c2FuZHNTZXA6XCIsXCJ9LGdsb2JhbDp7dXNlVVRDOiEwLFxuY2FudmFzVG9vbHNVUkw6XCJodHRwOi8vY29kZS5oaWdoY2hhcnRzLmNvbS80LjAuNC9tb2R1bGVzL2NhbnZhcy10b29scy5qc1wiLFZNTFJhZGlhbEdyYWRpZW50VVJMOlwiaHR0cDovL2NvZGUuaGlnaGNoYXJ0cy5jb20vNC4wLjQvZ2Z4L3ZtbC1yYWRpYWwtZ3JhZGllbnQucG5nXCJ9LGNoYXJ0Ontib3JkZXJDb2xvcjpcIiM0NTcyQTdcIixib3JkZXJSYWRpdXM6MCxkZWZhdWx0U2VyaWVzVHlwZTpcImxpbmVcIixpZ25vcmVIaWRkZW5TZXJpZXM6ITAsc3BhY2luZzpbMTAsMTAsMTUsMTBdLGJhY2tncm91bmRDb2xvcjpcIiNGRkZGRkZcIixwbG90Qm9yZGVyQ29sb3I6XCIjQzBDMEMwXCIscmVzZXRab29tQnV0dG9uOnt0aGVtZTp7ekluZGV4OjIwfSxwb3NpdGlvbjp7YWxpZ246XCJyaWdodFwiLHg6LTEwLHk6MTB9fX0sdGl0bGU6e3RleHQ6XCJDaGFydCB0aXRsZVwiLGFsaWduOlwiY2VudGVyXCIsbWFyZ2luOjE1LHN0eWxlOntjb2xvcjpcIiMzMzMzMzNcIixmb250U2l6ZTpcIjE4cHhcIn19LHN1YnRpdGxlOnt0ZXh0OlwiXCIsXG5hbGlnbjpcImNlbnRlclwiLHN0eWxlOntjb2xvcjpcIiM1NTU1NTVcIn19LHBsb3RPcHRpb25zOntsaW5lOnthbGxvd1BvaW50U2VsZWN0OiExLHNob3dDaGVja2JveDohMSxhbmltYXRpb246e2R1cmF0aW9uOjFFM30sZXZlbnRzOnt9LGxpbmVXaWR0aDoyLG1hcmtlcjp7bGluZVdpZHRoOjAscmFkaXVzOjQsbGluZUNvbG9yOlwiI0ZGRkZGRlwiLHN0YXRlczp7aG92ZXI6e2VuYWJsZWQ6ITAsbGluZVdpZHRoUGx1czoxLHJhZGl1c1BsdXM6Mn0sc2VsZWN0OntmaWxsQ29sb3I6XCIjRkZGRkZGXCIsbGluZUNvbG9yOlwiIzAwMDAwMFwiLGxpbmVXaWR0aDoyfX19LHBvaW50OntldmVudHM6e319LGRhdGFMYWJlbHM6dyhNLHthbGlnbjpcImNlbnRlclwiLGVuYWJsZWQ6ITEsZm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMueT09PW51bGw/XCJcIjpCYSh0aGlzLnksLTEpfSx2ZXJ0aWNhbEFsaWduOlwiYm90dG9tXCIseTowfSksY3JvcFRocmVzaG9sZDozMDAscG9pbnRSYW5nZTowLHN0YXRlczp7aG92ZXI6e2xpbmVXaWR0aFBsdXM6MSxcbm1hcmtlcjp7fSxoYWxvOntzaXplOjEwLG9wYWNpdHk6MC4yNX19LHNlbGVjdDp7bWFya2VyOnt9fX0sc3RpY2t5VHJhY2tpbmc6ITAsdHVyYm9UaHJlc2hvbGQ6MUUzfX0sbGFiZWxzOntzdHlsZTp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGNvbG9yOlwiIzNFNTc2RlwifX0sbGVnZW5kOntlbmFibGVkOiEwLGFsaWduOlwiY2VudGVyXCIsbGF5b3V0OlwiaG9yaXpvbnRhbFwiLGxhYmVsRm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmFtZX0sYm9yZGVyQ29sb3I6XCIjOTA5MDkwXCIsYm9yZGVyUmFkaXVzOjAsbmF2aWdhdGlvbjp7YWN0aXZlQ29sb3I6XCIjMjc0YjZkXCIsaW5hY3RpdmVDb2xvcjpcIiNDQ0NcIn0sc2hhZG93OiExLGl0ZW1TdHlsZTp7Y29sb3I6XCIjMzMzMzMzXCIsZm9udFNpemU6XCIxMnB4XCIsZm9udFdlaWdodDpcImJvbGRcIn0saXRlbUhvdmVyU3R5bGU6e2NvbG9yOlwiIzAwMFwifSxpdGVtSGlkZGVuU3R5bGU6e2NvbG9yOlwiI0NDQ1wifSxpdGVtQ2hlY2tib3hTdHlsZTp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLFxud2lkdGg6XCIxM3B4XCIsaGVpZ2h0OlwiMTNweFwifSxzeW1ib2xQYWRkaW5nOjUsdmVydGljYWxBbGlnbjpcImJvdHRvbVwiLHg6MCx5OjAsdGl0bGU6e3N0eWxlOntmb250V2VpZ2h0OlwiYm9sZFwifX19LGxvYWRpbmc6e2xhYmVsU3R5bGU6e2ZvbnRXZWlnaHQ6XCJib2xkXCIscG9zaXRpb246XCJyZWxhdGl2ZVwiLHRvcDpcIjQ1JVwifSxzdHlsZTp7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGJhY2tncm91bmRDb2xvcjpcIndoaXRlXCIsb3BhY2l0eTowLjUsdGV4dEFsaWduOlwiY2VudGVyXCJ9fSx0b29sdGlwOntlbmFibGVkOiEwLGFuaW1hdGlvbjpiYSxiYWNrZ3JvdW5kQ29sb3I6XCJyZ2JhKDI0OSwgMjQ5LCAyNDksIC44NSlcIixib3JkZXJXaWR0aDoxLGJvcmRlclJhZGl1czozLGRhdGVUaW1lTGFiZWxGb3JtYXRzOnttaWxsaXNlY29uZDpcIiVBLCAlYiAlZSwgJUg6JU06JVMuJUxcIixzZWNvbmQ6XCIlQSwgJWIgJWUsICVIOiVNOiVTXCIsbWludXRlOlwiJUEsICViICVlLCAlSDolTVwiLGhvdXI6XCIlQSwgJWIgJWUsICVIOiVNXCIsXG5kYXk6XCIlQSwgJWIgJWUsICVZXCIsd2VlazpcIldlZWsgZnJvbSAlQSwgJWIgJWUsICVZXCIsbW9udGg6XCIlQiAlWVwiLHllYXI6XCIlWVwifSxoZWFkZXJGb3JtYXQ6JzxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxMHB4XCI+e3BvaW50LmtleX08L3NwYW4+PGJyLz4nLHBvaW50Rm9ybWF0Oic8c3BhbiBzdHlsZT1cImNvbG9yOntzZXJpZXMuY29sb3J9XCI+4pePPC9zcGFuPiB7c2VyaWVzLm5hbWV9OiA8Yj57cG9pbnQueX08L2I+PGJyLz4nLHNoYWRvdzohMCxzbmFwOkliPzI1OjEwLHN0eWxlOntjb2xvcjpcIiMzMzMzMzNcIixjdXJzb3I6XCJkZWZhdWx0XCIsZm9udFNpemU6XCIxMnB4XCIscGFkZGluZzpcIjhweFwiLHdoaXRlU3BhY2U6XCJub3dyYXBcIn19LGNyZWRpdHM6e2VuYWJsZWQ6ITAsdGV4dDpcIkhpZ2hjaGFydHMuY29tXCIsaHJlZjpcImh0dHA6Ly93d3cuaGlnaGNoYXJ0cy5jb21cIixwb3NpdGlvbjp7YWxpZ246XCJyaWdodFwiLHg6LTEwLHZlcnRpY2FsQWxpZ246XCJib3R0b21cIix5Oi01fSxzdHlsZTp7Y3Vyc29yOlwicG9pbnRlclwiLFxuY29sb3I6XCIjOTA5MDkwXCIsZm9udFNpemU6XCI5cHhcIn19fTt2YXIgY2E9RS5wbG90T3B0aW9ucyxUPWNhLmxpbmU7QmIoKTt2YXIgVWI9L3JnYmFcXChcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldPyg/OlxcLlswLTldKyk/KVxccypcXCkvLFZiPS8jKFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkoW2EtZkEtRjAtOV17Mn0pLyxXYj0vcmdiXFwoXFxzKihbMC05XXsxLDN9KVxccyosXFxzKihbMC05XXsxLDN9KVxccyosXFxzKihbMC05XXsxLDN9KVxccypcXCkvLHlhPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGMsZDsoZnVuY3Rpb24oYSl7YSYmYS5zdG9wcz9kPVZhKGEuc3RvcHMsZnVuY3Rpb24oYSl7cmV0dXJuIHlhKGFbMV0pfSk6KGM9VWIuZXhlYyhhKSk/Yj1beShjWzFdKSx5KGNbMl0pLHkoY1szXSkscGFyc2VGbG9hdChjWzRdLDEwKV06KGM9VmIuZXhlYyhhKSk/Yj1beShjWzFdLDE2KSx5KGNbMl0sMTYpLHkoY1szXSxcbjE2KSwxXTooYz1XYi5leGVjKGEpKSYmKGI9W3koY1sxXSkseShjWzJdKSx5KGNbM10pLDFdKX0pKGEpO3JldHVybntnZXQ6ZnVuY3Rpb24oYyl7dmFyIGY7ZD8oZj13KGEpLGYuc3RvcHM9W10uY29uY2F0KGYuc3RvcHMpLHEoZCxmdW5jdGlvbihhLGIpe2Yuc3RvcHNbYl09W2Yuc3RvcHNbYl1bMF0sYS5nZXQoYyldfSkpOmY9YiYmIWlzTmFOKGJbMF0pP2M9PT1cInJnYlwiP1wicmdiKFwiK2JbMF0rXCIsXCIrYlsxXStcIixcIitiWzJdK1wiKVwiOmM9PT1cImFcIj9iWzNdOlwicmdiYShcIitiLmpvaW4oXCIsXCIpK1wiKVwiOmE7cmV0dXJuIGZ9LGJyaWdodGVuOmZ1bmN0aW9uKGEpe2lmKGQpcShkLGZ1bmN0aW9uKGIpe2IuYnJpZ2h0ZW4oYSl9KTtlbHNlIGlmKGphKGEpJiZhIT09MCl7dmFyIGM7Zm9yKGM9MDtjPDM7YysrKWJbY10rPXkoYSoyNTUpLGJbY108MCYmKGJbY109MCksYltjXT4yNTUmJihiW2NdPTI1NSl9cmV0dXJuIHRoaXN9LHJnYmE6YixzZXRPcGFjaXR5OmZ1bmN0aW9uKGEpe2JbM109YTtyZXR1cm4gdGhpc319fTtcblMucHJvdG90eXBlPXtvcGFjaXR5OjEsdGV4dFByb3BzOlwiZm9udFNpemUsZm9udFdlaWdodCxmb250RmFtaWx5LGNvbG9yLGxpbmVIZWlnaHQsd2lkdGgsdGV4dERlY29yYXRpb24sdGV4dFNoYWRvdyxIY1RleHRTdHJva2VcIi5zcGxpdChcIixcIiksaW5pdDpmdW5jdGlvbihhLGIpe3RoaXMuZWxlbWVudD1iPT09XCJzcGFuXCI/JChiKTp4LmNyZWF0ZUVsZW1lbnROUyh4YSxiKTt0aGlzLnJlbmRlcmVyPWF9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMpe2I9cChiLHZhLCEwKTtiYih0aGlzKTtpZihiKXtiPXcoYix7fSk7aWYoYyliLmNvbXBsZXRlPWM7amIodGhpcyxhLGIpfWVsc2UgdGhpcy5hdHRyKGEpLGMmJmMoKTtyZXR1cm4gdGhpc30sY29sb3JHcmFkaWVudDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5yZW5kZXJlcixlLGYsZyxoLGksaixrLGwsbixtLG89W107YS5saW5lYXJHcmFkaWVudD9mPVwibGluZWFyR3JhZGllbnRcIjphLnJhZGlhbEdyYWRpZW50JiYoZj1cInJhZGlhbEdyYWRpZW50XCIpO1xuaWYoZil7Zz1hW2ZdO2g9ZC5ncmFkaWVudHM7aj1hLnN0b3BzO249Yy5yYWRpYWxSZWZlcmVuY2U7SGEoZykmJihhW2ZdPWc9e3gxOmdbMF0seTE6Z1sxXSx4MjpnWzJdLHkyOmdbM10sZ3JhZGllbnRVbml0czpcInVzZXJTcGFjZU9uVXNlXCJ9KTtmPT09XCJyYWRpYWxHcmFkaWVudFwiJiZuJiYhcyhnLmdyYWRpZW50VW5pdHMpJiYoZz13KGcse2N4Om5bMF0tblsyXS8yK2cuY3gqblsyXSxjeTpuWzFdLW5bMl0vMitnLmN5Km5bMl0scjpnLnIqblsyXSxncmFkaWVudFVuaXRzOlwidXNlclNwYWNlT25Vc2VcIn0pKTtmb3IobSBpbiBnKW0hPT1cImlkXCImJm8ucHVzaChtLGdbbV0pO2ZvcihtIGluIGopby5wdXNoKGpbbV0pO289by5qb2luKFwiLFwiKTtoW29dP2E9aFtvXS5hdHRyKFwiaWRcIik6KGcuaWQ9YT1cImhpZ2hjaGFydHMtXCIrdWIrKyxoW29dPWk9ZC5jcmVhdGVFbGVtZW50KGYpLmF0dHIoZykuYWRkKGQuZGVmcyksaS5zdG9wcz1bXSxxKGosZnVuY3Rpb24oYSl7YVsxXS5pbmRleE9mKFwicmdiYVwiKT09PVxuMD8oZT15YShhWzFdKSxrPWUuZ2V0KFwicmdiXCIpLGw9ZS5nZXQoXCJhXCIpKTooaz1hWzFdLGw9MSk7YT1kLmNyZWF0ZUVsZW1lbnQoXCJzdG9wXCIpLmF0dHIoe29mZnNldDphWzBdLFwic3RvcC1jb2xvclwiOmssXCJzdG9wLW9wYWNpdHlcIjpsfSkuYWRkKGkpO2kuc3RvcHMucHVzaChhKX0pKTtjLnNldEF0dHJpYnV0ZShiLFwidXJsKFwiK2QudXJsK1wiI1wiK2ErXCIpXCIpfX0sYXR0cjpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZT10aGlzLmVsZW1lbnQsZixnPXRoaXMsaDt0eXBlb2YgYT09PVwic3RyaW5nXCImJmIhPT11JiYoYz1hLGE9e30sYVtjXT1iKTtpZih0eXBlb2YgYT09PVwic3RyaW5nXCIpZz0odGhpc1thK1wiR2V0dGVyXCJdfHx0aGlzLl9kZWZhdWx0R2V0dGVyKS5jYWxsKHRoaXMsYSxlKTtlbHNle2ZvcihjIGluIGEpe2Q9YVtjXTtoPSExO3RoaXMuc3ltYm9sTmFtZSYmL14oeHx5fHdpZHRofGhlaWdodHxyfHN0YXJ0fGVuZHxpbm5lclJ8YW5jaG9yWHxhbmNob3JZKS8udGVzdChjKSYmKGZ8fCh0aGlzLnN5bWJvbEF0dHIoYSksXG5mPSEwKSxoPSEwKTtpZih0aGlzLnJvdGF0aW9uJiYoYz09PVwieFwifHxjPT09XCJ5XCIpKXRoaXMuZG9UcmFuc2Zvcm09ITA7aHx8KHRoaXNbYytcIlNldHRlclwiXXx8dGhpcy5fZGVmYXVsdFNldHRlcikuY2FsbCh0aGlzLGQsYyxlKTt0aGlzLnNoYWRvd3MmJi9eKHdpZHRofGhlaWdodHx2aXNpYmlsaXR5fHh8eXxkfHRyYW5zZm9ybXxjeHxjeXxyKSQvLnRlc3QoYykmJnRoaXMudXBkYXRlU2hhZG93cyhjLGQpfWlmKHRoaXMuZG9UcmFuc2Zvcm0pdGhpcy51cGRhdGVUcmFuc2Zvcm0oKSx0aGlzLmRvVHJhbnNmb3JtPSExfXJldHVybiBnfSx1cGRhdGVTaGFkb3dzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuc2hhZG93cyxkPWMubGVuZ3RoO2QtLTspY1tkXS5zZXRBdHRyaWJ1dGUoYSxhPT09XCJoZWlnaHRcIj90KGItKGNbZF0uY3V0SGVpZ2h0fHwwKSwwKTphPT09XCJkXCI/dGhpcy5kOmIpfSxhZGRDbGFzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnQsYz1GKGIsXCJjbGFzc1wiKXx8XG5cIlwiO2MuaW5kZXhPZihhKT09PS0xJiZGKGIsXCJjbGFzc1wiLGMrXCIgXCIrYSk7cmV0dXJuIHRoaXN9LHN5bWJvbEF0dHI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztxKFwieCx5LHIsc3RhcnQsZW5kLHdpZHRoLGhlaWdodCxpbm5lclIsYW5jaG9yWCxhbmNob3JZXCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGMpe2JbY109cChhW2NdLGJbY10pfSk7Yi5hdHRyKHtkOmIucmVuZGVyZXIuc3ltYm9sc1tiLnN5bWJvbE5hbWVdKGIueCxiLnksYi53aWR0aCxiLmhlaWdodCxiKX0pfSxjbGlwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmF0dHIoXCJjbGlwLXBhdGhcIixhP1widXJsKFwiK3RoaXMucmVuZGVyZXIudXJsK1wiI1wiK2EuaWQrXCIpXCI6UCl9LGNyaXNwOmZ1bmN0aW9uKGEpe3ZhciBiLGM9e30sZCxlPWEuc3Ryb2tlV2lkdGh8fHRoaXMuc3Ryb2tlV2lkdGh8fDA7ZD12KGUpJTIvMjthLng9VShhLnh8fHRoaXMueHx8MCkrZDthLnk9VShhLnl8fHRoaXMueXx8MCkrZDthLndpZHRoPVUoKGEud2lkdGh8fHRoaXMud2lkdGh8fFxuMCktMipkKTthLmhlaWdodD1VKChhLmhlaWdodHx8dGhpcy5oZWlnaHR8fDApLTIqZCk7YS5zdHJva2VXaWR0aD1lO2ZvcihiIGluIGEpdGhpc1tiXSE9PWFbYl0mJih0aGlzW2JdPWNbYl09YVtiXSk7cmV0dXJuIGN9LGNzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnN0eWxlcyxjPXt9LGQ9dGhpcy5lbGVtZW50LGUsZixnPVwiXCI7ZT0hYjtpZihhJiZhLmNvbG9yKWEuZmlsbD1hLmNvbG9yO2lmKGIpZm9yKGYgaW4gYSlhW2ZdIT09YltmXSYmKGNbZl09YVtmXSxlPSEwKTtpZihlKXtlPXRoaXMudGV4dFdpZHRoPWEmJmEud2lkdGgmJmQubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PVwidGV4dFwiJiZ5KGEud2lkdGgpO2ImJihhPXIoYixjKSk7dGhpcy5zdHlsZXM9YTtlJiYoZ2F8fCFiYSYmdGhpcy5yZW5kZXJlci5mb3JFeHBvcnQpJiZkZWxldGUgYS53aWR0aDtpZihBYSYmIWJhKUIodGhpcy5lbGVtZW50LGEpO2Vsc2V7Yj1mdW5jdGlvbihhLGIpe3JldHVyblwiLVwiK2IudG9Mb3dlckNhc2UoKX07XG5mb3IoZiBpbiBhKWcrPWYucmVwbGFjZSgvKFtBLVpdKS9nLGIpK1wiOlwiK2FbZl0rXCI7XCI7RihkLFwic3R5bGVcIixnKX1lJiZ0aGlzLmFkZGVkJiZ0aGlzLnJlbmRlcmVyLmJ1aWxkVGV4dCh0aGlzKX1yZXR1cm4gdGhpc30sb246ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5lbGVtZW50OyRhJiZhPT09XCJjbGlja1wiPyhkLm9udG91Y2hzdGFydD1mdW5jdGlvbihhKXtjLnRvdWNoRXZlbnRGaXJlZD1EYS5ub3coKTthLnByZXZlbnREZWZhdWx0KCk7Yi5jYWxsKGQsYSl9LGQub25jbGljaz1mdW5jdGlvbihhKXsod2EuaW5kZXhPZihcIkFuZHJvaWRcIik9PT0tMXx8RGEubm93KCktKGMudG91Y2hFdmVudEZpcmVkfHwwKT4xMTAwKSYmYi5jYWxsKGQsYSl9KTpkW1wib25cIithXT1iO3JldHVybiB0aGlzfSxzZXRSYWRpYWxSZWZlcmVuY2U6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50LnJhZGlhbFJlZmVyZW5jZT1hO3JldHVybiB0aGlzfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5hdHRyKHt0cmFuc2xhdGVYOmEsXG50cmFuc2xhdGVZOmJ9KX0saW52ZXJ0OmZ1bmN0aW9uKCl7dGhpcy5pbnZlcnRlZD0hMDt0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpO3JldHVybiB0aGlzfSx1cGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRyYW5zbGF0ZVh8fDAsYj10aGlzLnRyYW5zbGF0ZVl8fDAsYz10aGlzLnNjYWxlWCxkPXRoaXMuc2NhbGVZLGU9dGhpcy5pbnZlcnRlZCxmPXRoaXMucm90YXRpb24sZz10aGlzLmVsZW1lbnQ7ZSYmKGErPXRoaXMuYXR0cihcIndpZHRoXCIpLGIrPXRoaXMuYXR0cihcImhlaWdodFwiKSk7YT1bXCJ0cmFuc2xhdGUoXCIrYStcIixcIitiK1wiKVwiXTtlP2EucHVzaChcInJvdGF0ZSg5MCkgc2NhbGUoLTEsMSlcIik6ZiYmYS5wdXNoKFwicm90YXRlKFwiK2YrXCIgXCIrKGcuZ2V0QXR0cmlidXRlKFwieFwiKXx8MCkrXCIgXCIrKGcuZ2V0QXR0cmlidXRlKFwieVwiKXx8MCkrXCIpXCIpOyhzKGMpfHxzKGQpKSYmYS5wdXNoKFwic2NhbGUoXCIrcChjLDEpK1wiIFwiK3AoZCwxKStcIilcIik7YS5sZW5ndGgmJmcuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsXG5hLmpvaW4oXCIgXCIpKX0sdG9Gcm9udDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudDthLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoYSk7cmV0dXJuIHRoaXN9LGFsaWduOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoPXt9O2U9dGhpcy5yZW5kZXJlcjtmPWUuYWxpZ25lZE9iamVjdHM7aWYoYSl7aWYodGhpcy5hbGlnbk9wdGlvbnM9YSx0aGlzLmFsaWduQnlUcmFuc2xhdGU9YiwhY3x8R2EoYykpdGhpcy5hbGlnblRvPWQ9Y3x8XCJyZW5kZXJlclwiLGxhKGYsdGhpcyksZi5wdXNoKHRoaXMpLGM9bnVsbH1lbHNlIGE9dGhpcy5hbGlnbk9wdGlvbnMsYj10aGlzLmFsaWduQnlUcmFuc2xhdGUsZD10aGlzLmFsaWduVG87Yz1wKGMsZVtkXSxlKTtkPWEuYWxpZ247ZT1hLnZlcnRpY2FsQWxpZ247Zj0oYy54fHwwKSsoYS54fHwwKTtnPShjLnl8fDApKyhhLnl8fDApO2lmKGQ9PT1cInJpZ2h0XCJ8fGQ9PT1cImNlbnRlclwiKWYrPShjLndpZHRoLShhLndpZHRofHwwKSkve3JpZ2h0OjEsY2VudGVyOjJ9W2RdO1xuaFtiP1widHJhbnNsYXRlWFwiOlwieFwiXT12KGYpO2lmKGU9PT1cImJvdHRvbVwifHxlPT09XCJtaWRkbGVcIilnKz0oYy5oZWlnaHQtKGEuaGVpZ2h0fHwwKSkvKHtib3R0b206MSxtaWRkbGU6Mn1bZV18fDEpO2hbYj9cInRyYW5zbGF0ZVlcIjpcInlcIl09dihnKTt0aGlzW3RoaXMucGxhY2VkP1wiYW5pbWF0ZVwiOlwiYXR0clwiXShoKTt0aGlzLnBsYWNlZD0hMDt0aGlzLmFsaWduQXR0cj1oO3JldHVybiB0aGlzfSxnZXRCQm94OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iQm94LGI9dGhpcy5yZW5kZXJlcixjLGQsZT10aGlzLnJvdGF0aW9uO2M9dGhpcy5lbGVtZW50O3ZhciBmPXRoaXMuc3R5bGVzLGc9ZSpFYTtkPXRoaXMudGV4dFN0cjt2YXIgaDtpZihkPT09XCJcInx8UGIudGVzdChkKSloPVwibnVtLlwiK2QudG9TdHJpbmcoKS5sZW5ndGgrKGY/XCJ8XCIrZi5mb250U2l6ZStcInxcIitmLmZvbnRGYW1pbHk6XCJcIik7aCYmKGE9Yi5jYWNoZVtoXSk7aWYoIWEpe2lmKGMubmFtZXNwYWNlVVJJPT09eGF8fGIuZm9yRXhwb3J0KXt0cnl7YT1cbmMuZ2V0QkJveD9yKHt9LGMuZ2V0QkJveCgpKTp7d2lkdGg6Yy5vZmZzZXRXaWR0aCxoZWlnaHQ6Yy5vZmZzZXRIZWlnaHR9fWNhdGNoKGkpe31pZighYXx8YS53aWR0aDwwKWE9e3dpZHRoOjAsaGVpZ2h0OjB9fWVsc2UgYT10aGlzLmh0bWxHZXRCQm94KCk7aWYoYi5pc1NWRyl7Yz1hLndpZHRoO2Q9YS5oZWlnaHQ7aWYoQWEmJmYmJmYuZm9udFNpemU9PT1cIjExcHhcIiYmZC50b1ByZWNpc2lvbigzKT09PVwiMTYuOVwiKWEuaGVpZ2h0PWQ9MTQ7aWYoZSlhLndpZHRoPVEoZCpmYShnKSkrUShjKmFhKGcpKSxhLmhlaWdodD1RKGQqYWEoZykpK1EoYypmYShnKSl9dGhpcy5iQm94PWE7aCYmKGIuY2FjaGVbaF09YSl9cmV0dXJuIGF9LHNob3c6ZnVuY3Rpb24oYSl7YSYmdGhpcy5lbGVtZW50Lm5hbWVzcGFjZVVSST09PXhhP3RoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJ2aXNpYmlsaXR5XCIpOnRoaXMuYXR0cih7dmlzaWJpbGl0eTphP1wiaW5oZXJpdFwiOlwidmlzaWJsZVwifSk7cmV0dXJuIHRoaXN9LFxuaGlkZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmF0dHIoe3Zpc2liaWxpdHk6XCJoaWRkZW5cIn0pfSxmYWRlT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7Yi5hbmltYXRlKHtvcGFjaXR5OjB9LHtkdXJhdGlvbjphfHwxNTAsY29tcGxldGU6ZnVuY3Rpb24oKXtiLmF0dHIoe3k6LTk5OTl9KX19KX0sYWRkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVuZGVyZXIsYz1hfHxiLGQ9Yy5lbGVtZW50fHxiLmJveCxlPXRoaXMuZWxlbWVudCxmPXRoaXMuekluZGV4LGcsaDtpZihhKXRoaXMucGFyZW50R3JvdXA9YTt0aGlzLnBhcmVudEludmVydGVkPWEmJmEuaW52ZXJ0ZWQ7dGhpcy50ZXh0U3RyIT09dm9pZCAwJiZiLmJ1aWxkVGV4dCh0aGlzKTtpZihmKWMuaGFuZGxlWj0hMCxmPXkoZik7aWYoYy5oYW5kbGVaKXthPWQuY2hpbGROb2Rlcztmb3IoZz0wO2c8YS5sZW5ndGg7ZysrKWlmKGI9YVtnXSxjPUYoYixcInpJbmRleFwiKSxiIT09ZSYmKHkoYyk+Znx8IXMoZikmJnMoYykpKXtkLmluc2VydEJlZm9yZShlLFxuYik7aD0hMDticmVha319aHx8ZC5hcHBlbmRDaGlsZChlKTt0aGlzLmFkZGVkPSEwO2lmKHRoaXMub25BZGQpdGhpcy5vbkFkZCgpO3JldHVybiB0aGlzfSxzYWZlUmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO2ImJmIucmVtb3ZlQ2hpbGQoYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5lbGVtZW50fHx7fSxjPWEuc2hhZG93cyxkPWEucmVuZGVyZXIuaXNTVkcmJmIubm9kZU5hbWU9PT1cIlNQQU5cIiYmYS5wYXJlbnRHcm91cCxlLGY7Yi5vbmNsaWNrPWIub25tb3VzZW91dD1iLm9ubW91c2VvdmVyPWIub25tb3VzZW1vdmU9Yi5wb2ludD1udWxsO2JiKGEpO2lmKGEuY2xpcFBhdGgpYS5jbGlwUGF0aD1hLmNsaXBQYXRoLmRlc3Ryb3koKTtpZihhLnN0b3BzKXtmb3IoZj0wO2Y8YS5zdG9wcy5sZW5ndGg7ZisrKWEuc3RvcHNbZl09YS5zdG9wc1tmXS5kZXN0cm95KCk7YS5zdG9wcz1udWxsfWEuc2FmZVJlbW92ZUNoaWxkKGIpO2ZvcihjJiZcbnEoYyxmdW5jdGlvbihiKXthLnNhZmVSZW1vdmVDaGlsZChiKX0pO2QmJmQuZGl2JiZkLmRpdi5jaGlsZE5vZGVzLmxlbmd0aD09PTA7KWI9ZC5wYXJlbnRHcm91cCxhLnNhZmVSZW1vdmVDaGlsZChkLmRpdiksZGVsZXRlIGQuZGl2LGQ9YjthLmFsaWduVG8mJmxhKGEucmVuZGVyZXIuYWxpZ25lZE9iamVjdHMsYSk7Zm9yKGUgaW4gYSlkZWxldGUgYVtlXTtyZXR1cm4gbnVsbH0sc2hhZG93OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlLGYsZz10aGlzLmVsZW1lbnQsaCxpLGosaztpZihhKXtpPXAoYS53aWR0aCwzKTtqPShhLm9wYWNpdHl8fDAuMTUpL2k7az10aGlzLnBhcmVudEludmVydGVkP1wiKC0xLC0xKVwiOlwiKFwiK3AoYS5vZmZzZXRYLDEpK1wiLCBcIitwKGEub2Zmc2V0WSwxKStcIilcIjtmb3IoZT0xO2U8PWk7ZSsrKXtmPWcuY2xvbmVOb2RlKDApO2g9aSoyKzEtMiplO0YoZix7aXNTaGFkb3c6XCJ0cnVlXCIsc3Ryb2tlOmEuY29sb3J8fFwiYmxhY2tcIixcInN0cm9rZS1vcGFjaXR5XCI6aipcbmUsXCJzdHJva2Utd2lkdGhcIjpoLHRyYW5zZm9ybTpcInRyYW5zbGF0ZVwiK2ssZmlsbDpQfSk7aWYoYylGKGYsXCJoZWlnaHRcIix0KEYoZixcImhlaWdodFwiKS1oLDApKSxmLmN1dEhlaWdodD1oO2I/Yi5lbGVtZW50LmFwcGVuZENoaWxkKGYpOmcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZixnKTtkLnB1c2goZil9dGhpcy5zaGFkb3dzPWR9cmV0dXJuIHRoaXN9LHhHZXR0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50Lm5vZGVOYW1lPT09XCJjaXJjbGVcIiYmKGE9e3g6XCJjeFwiLHk6XCJjeVwifVthXXx8YSk7cmV0dXJuIHRoaXMuX2RlZmF1bHRHZXR0ZXIoYSl9LF9kZWZhdWx0R2V0dGVyOmZ1bmN0aW9uKGEpe2E9cCh0aGlzW2FdLHRoaXMuZWxlbWVudD90aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKGEpOm51bGwsMCk7L15bXFwtMC05XFwuXSskLy50ZXN0KGEpJiYoYT1wYXJzZUZsb2F0KGEpKTtyZXR1cm4gYX0sZFNldHRlcjpmdW5jdGlvbihhLGIsYyl7YSYmYS5qb2luJiYoYT1hLmpvaW4oXCIgXCIpKTtcbi8oTmFOfCB7Mn18XiQpLy50ZXN0KGEpJiYoYT1cIk0gMCAwXCIpO2Muc2V0QXR0cmlidXRlKGIsYSk7dGhpc1tiXT1hfSxkYXNoc3R5bGVTZXR0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYT1hJiZhLnRvTG93ZXJDYXNlKCkpe2E9YS5yZXBsYWNlKFwic2hvcnRkYXNoZG90ZG90XCIsXCIzLDEsMSwxLDEsMSxcIikucmVwbGFjZShcInNob3J0ZGFzaGRvdFwiLFwiMywxLDEsMVwiKS5yZXBsYWNlKFwic2hvcnRkb3RcIixcIjEsMSxcIikucmVwbGFjZShcInNob3J0ZGFzaFwiLFwiMywxLFwiKS5yZXBsYWNlKFwibG9uZ2Rhc2hcIixcIjgsMyxcIikucmVwbGFjZSgvZG90L2csXCIxLDMsXCIpLnJlcGxhY2UoXCJkYXNoXCIsXCI0LDMsXCIpLnJlcGxhY2UoLywkLyxcIlwiKS5zcGxpdChcIixcIik7Zm9yKGI9YS5sZW5ndGg7Yi0tOylhW2JdPXkoYVtiXSkqdGhpc1tcInN0cm9rZS13aWR0aFwiXTthPWEuam9pbihcIixcIikucmVwbGFjZShcIk5hTlwiLFwibm9uZVwiKTt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLGEpfX0sXG5hbGlnblNldHRlcjpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwidGV4dC1hbmNob3JcIix7bGVmdDpcInN0YXJ0XCIsY2VudGVyOlwibWlkZGxlXCIscmlnaHQ6XCJlbmRcIn1bYV0pfSxvcGFjaXR5U2V0dGVyOmZ1bmN0aW9uKGEsYixjKXt0aGlzW2JdPWE7Yy5zZXRBdHRyaWJ1dGUoYixhKX0sdGl0bGVTZXR0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5lbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGl0bGVcIilbMF07Ynx8KGI9eC5jcmVhdGVFbGVtZW50TlMoeGEsXCJ0aXRsZVwiKSx0aGlzLmVsZW1lbnQuYXBwZW5kQ2hpbGQoYikpO2IudGV4dENvbnRlbnQ9cChhLFwiXCIpLnJlcGxhY2UoLzxbXj5dKj4vZyxcIlwiKX0sdGV4dFNldHRlcjpmdW5jdGlvbihhKXtpZihhIT09dGhpcy50ZXh0U3RyKWRlbGV0ZSB0aGlzLmJCb3gsdGhpcy50ZXh0U3RyPWEsdGhpcy5hZGRlZCYmdGhpcy5yZW5kZXJlci5idWlsZFRleHQodGhpcyl9LGZpbGxTZXR0ZXI6ZnVuY3Rpb24oYSxiLFxuYyl7dHlwZW9mIGE9PT1cInN0cmluZ1wiP2Muc2V0QXR0cmlidXRlKGIsYSk6YSYmdGhpcy5jb2xvckdyYWRpZW50KGEsYixjKX0sekluZGV4U2V0dGVyOmZ1bmN0aW9uKGEsYixjKXtjLnNldEF0dHJpYnV0ZShiLGEpO3RoaXNbYl09YX0sX2RlZmF1bHRTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe2Muc2V0QXR0cmlidXRlKGIsYSl9fTtTLnByb3RvdHlwZS55R2V0dGVyPVMucHJvdG90eXBlLnhHZXR0ZXI7Uy5wcm90b3R5cGUudHJhbnNsYXRlWFNldHRlcj1TLnByb3RvdHlwZS50cmFuc2xhdGVZU2V0dGVyPVMucHJvdG90eXBlLnJvdGF0aW9uU2V0dGVyPVMucHJvdG90eXBlLnZlcnRpY2FsQWxpZ25TZXR0ZXI9Uy5wcm90b3R5cGUuc2NhbGVYU2V0dGVyPVMucHJvdG90eXBlLnNjYWxlWVNldHRlcj1mdW5jdGlvbihhLGIpe3RoaXNbYl09YTt0aGlzLmRvVHJhbnNmb3JtPSEwfTtTLnByb3RvdHlwZVtcInN0cm9rZS13aWR0aFNldHRlclwiXT1TLnByb3RvdHlwZS5zdHJva2VTZXR0ZXI9ZnVuY3Rpb24oYSxcbmIsYyl7dGhpc1tiXT1hO2lmKHRoaXMuc3Ryb2tlJiZ0aGlzW1wic3Ryb2tlLXdpZHRoXCJdKXRoaXMuc3Ryb2tlV2lkdGg9dGhpc1tcInN0cm9rZS13aWR0aFwiXSxTLnByb3RvdHlwZS5maWxsU2V0dGVyLmNhbGwodGhpcyx0aGlzLnN0cm9rZSxcInN0cm9rZVwiLGMpLGMuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsdGhpc1tcInN0cm9rZS13aWR0aFwiXSksdGhpcy5oYXNTdHJva2U9ITA7ZWxzZSBpZihiPT09XCJzdHJva2Utd2lkdGhcIiYmYT09PTAmJnRoaXMuaGFzU3Ryb2tlKWMucmVtb3ZlQXR0cmlidXRlKFwic3Ryb2tlXCIpLHRoaXMuaGFzU3Ryb2tlPSExfTt2YXIgdGE9ZnVuY3Rpb24oKXt0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTt0YS5wcm90b3R5cGU9e0VsZW1lbnQ6Uyxpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9bG9jYXRpb24sZyxkPXRoaXMuY3JlYXRlRWxlbWVudChcInN2Z1wiKS5hdHRyKHt2ZXJzaW9uOlwiMS4xXCJ9KS5jc3ModGhpcy5nZXRTdHlsZShkKSk7XG5nPWQuZWxlbWVudDthLmFwcGVuZENoaWxkKGcpO2EuaW5uZXJIVE1MLmluZGV4T2YoXCJ4bWxuc1wiKT09PS0xJiZGKGcsXCJ4bWxuc1wiLHhhKTt0aGlzLmlzU1ZHPSEwO3RoaXMuYm94PWc7dGhpcy5ib3hXcmFwcGVyPWQ7dGhpcy5hbGlnbmVkT2JqZWN0cz1bXTt0aGlzLnVybD0oVWF8fHRiKSYmeC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImJhc2VcIikubGVuZ3RoP2YuaHJlZi5yZXBsYWNlKC8jLio/JC8sXCJcIikucmVwbGFjZSgvKFtcXCgnXFwpXSkvZyxcIlxcXFwkMVwiKS5yZXBsYWNlKC8gL2csXCIlMjBcIik6XCJcIjt0aGlzLmNyZWF0ZUVsZW1lbnQoXCJkZXNjXCIpLmFkZCgpLmVsZW1lbnQuYXBwZW5kQ2hpbGQoeC5jcmVhdGVUZXh0Tm9kZShcIkNyZWF0ZWQgd2l0aCBIaWdoY2hhcnRzIDQuMC40XCIpKTt0aGlzLmRlZnM9dGhpcy5jcmVhdGVFbGVtZW50KFwiZGVmc1wiKS5hZGQoKTt0aGlzLmZvckV4cG9ydD1lO3RoaXMuZ3JhZGllbnRzPXt9O3RoaXMuY2FjaGU9e307dGhpcy5zZXRTaXplKGIsYywhMSk7dmFyIGg7XG5pZihVYSYmYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QpdGhpcy5zdWJQaXhlbEZpeD1iPWZ1bmN0aW9uKCl7QihhLHtsZWZ0OjAsdG9wOjB9KTtoPWEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7QihhLHtsZWZ0OkxhKGgubGVmdCktaC5sZWZ0K1wicHhcIix0b3A6TGEoaC50b3ApLWgudG9wK1wicHhcIn0pfSxiKCksTihHLFwicmVzaXplXCIsYil9LGdldFN0eWxlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnN0eWxlPXIoe2ZvbnRGYW1pbHk6J1wiTHVjaWRhIEdyYW5kZVwiLCBcIkx1Y2lkYSBTYW5zIFVuaWNvZGVcIiwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZicsZm9udFNpemU6XCIxMnB4XCJ9LGEpfSxpc0hpZGRlbjpmdW5jdGlvbigpe3JldHVybiF0aGlzLmJveFdyYXBwZXIuZ2V0QkJveCgpLndpZHRofSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kZWZzO3RoaXMuYm94PW51bGw7dGhpcy5ib3hXcmFwcGVyPXRoaXMuYm94V3JhcHBlci5kZXN0cm95KCk7UGEodGhpcy5ncmFkaWVudHN8fFxue30pO3RoaXMuZ3JhZGllbnRzPW51bGw7aWYoYSl0aGlzLmRlZnM9YS5kZXN0cm95KCk7dGhpcy5zdWJQaXhlbEZpeCYmWChHLFwicmVzaXplXCIsdGhpcy5zdWJQaXhlbEZpeCk7cmV0dXJuIHRoaXMuYWxpZ25lZE9iamVjdHM9bnVsbH0sY3JlYXRlRWxlbWVudDpmdW5jdGlvbihhKXt2YXIgYj1uZXcgdGhpcy5FbGVtZW50O2IuaW5pdCh0aGlzLGEpO3JldHVybiBifSxkcmF3OmZ1bmN0aW9uKCl7fSxidWlsZFRleHQ6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEuZWxlbWVudCxjPXRoaXMsZD1jLmZvckV4cG9ydCxlPXAoYS50ZXh0U3RyLFwiXCIpLnRvU3RyaW5nKCksZj1lLmluZGV4T2YoXCI8XCIpIT09LTEsZz1iLmNoaWxkTm9kZXMsaCxpLGo9RihiLFwieFwiKSxrPWEuc3R5bGVzLGw9YS50ZXh0V2lkdGgsbj1rJiZrLmxpbmVIZWlnaHQsbT1rJiZrLkhjVGV4dFN0cm9rZSxvPWcubGVuZ3RoLFk9ZnVuY3Rpb24oYSl7cmV0dXJuIG4/eShuKTpjLmZvbnRNZXRyaWNzKC8ocHh8ZW0pJC8udGVzdChhJiZcbmEuc3R5bGUuZm9udFNpemUpP2Euc3R5bGUuZm9udFNpemU6ayYmay5mb250U2l6ZXx8Yy5zdHlsZS5mb250U2l6ZXx8MTIsYSkuaH07by0tOyliLnJlbW92ZUNoaWxkKGdbb10pOyFmJiYhbSYmZS5pbmRleE9mKFwiIFwiKT09PS0xP2IuYXBwZW5kQ2hpbGQoeC5jcmVhdGVUZXh0Tm9kZShlKSk6KGg9LzwuKnN0eWxlPVwiKFteXCJdKylcIi4qPi8saT0vPC4qaHJlZj1cIihodHRwW15cIl0rKVwiLio+LyxsJiYhYS5hZGRlZCYmdGhpcy5ib3guYXBwZW5kQ2hpbGQoYiksZT1mP2UucmVwbGFjZSgvPChifHN0cm9uZyk+L2csJzxzcGFuIHN0eWxlPVwiZm9udC13ZWlnaHQ6Ym9sZFwiPicpLnJlcGxhY2UoLzwoaXxlbSk+L2csJzxzcGFuIHN0eWxlPVwiZm9udC1zdHlsZTppdGFsaWNcIj4nKS5yZXBsYWNlKC88YS9nLFwiPHNwYW5cIikucmVwbGFjZSgvPFxcLyhifHN0cm9uZ3xpfGVtfGEpPi9nLFwiPC9zcGFuPlwiKS5zcGxpdCgvPGJyLio/Pi9nKTpbZV0sZVtlLmxlbmd0aC0xXT09PVwiXCImJmUucG9wKCkscShlLGZ1bmN0aW9uKGUsXG5mKXt2YXIgZyxuPTAsZT1lLnJlcGxhY2UoLzxzcGFuL2csXCJ8fHw8c3BhblwiKS5yZXBsYWNlKC88XFwvc3Bhbj4vZyxcIjwvc3Bhbj58fHxcIik7Zz1lLnNwbGl0KFwifHx8XCIpO3EoZyxmdW5jdGlvbihlKXtpZihlIT09XCJcInx8Zy5sZW5ndGg9PT0xKXt2YXIgbT17fSxvPXguY3JlYXRlRWxlbWVudE5TKHhhLFwidHNwYW5cIikscDtoLnRlc3QoZSkmJihwPWUubWF0Y2goaClbMV0ucmVwbGFjZSgvKDt8IHxeKWNvbG9yKFsgOl0pLyxcIiQxZmlsbCQyXCIpLEYobyxcInN0eWxlXCIscCkpO2kudGVzdChlKSYmIWQmJihGKG8sXCJvbmNsaWNrXCIsJ2xvY2F0aW9uLmhyZWY9XCInK2UubWF0Y2goaSlbMV0rJ1wiJyksQihvLHtjdXJzb3I6XCJwb2ludGVyXCJ9KSk7ZT0oZS5yZXBsYWNlKC88KC58XFxuKSo/Pi9nLFwiXCIpfHxcIiBcIikucmVwbGFjZSgvJmx0Oy9nLFwiPFwiKS5yZXBsYWNlKC8mZ3Q7L2csXCI+XCIpO2lmKGUhPT1cIiBcIil7by5hcHBlbmRDaGlsZCh4LmNyZWF0ZVRleHROb2RlKGUpKTtpZihuKW0uZHg9MDtlbHNlIGlmKGYmJlxuaiE9PW51bGwpbS54PWo7RihvLG0pO2IuYXBwZW5kQ2hpbGQobyk7IW4mJmYmJighYmEmJmQmJkIobyx7ZGlzcGxheTpcImJsb2NrXCJ9KSxGKG8sXCJkeVwiLFkobykpKTtpZihsKWZvcih2YXIgZT1lLnJlcGxhY2UoLyhbXlxcXl0pLS9nLFwiJDEtIFwiKS5zcGxpdChcIiBcIiksbT1nLmxlbmd0aD4xfHxlLmxlbmd0aD4xJiZrLndoaXRlU3BhY2UhPT1cIm5vd3JhcFwiLHEsRCxzPWsuSGNIZWlnaHQsdD1bXSx1PVkobyksTGI9MTttJiYoZS5sZW5ndGh8fHQubGVuZ3RoKTspZGVsZXRlIGEuYkJveCxxPWEuZ2V0QkJveCgpLEQ9cS53aWR0aCwhYmEmJmMuZm9yRXhwb3J0JiYoRD1jLm1lYXN1cmVTcGFuV2lkdGgoby5maXJzdENoaWxkLmRhdGEsYS5zdHlsZXMpKSxxPUQ+bCwhcXx8ZS5sZW5ndGg9PT0xPyhlPXQsdD1bXSxlLmxlbmd0aCYmKExiKysscyYmTGIqdT5zPyhlPVtcIi4uLlwiXSxhLmF0dHIoXCJ0aXRsZVwiLGEudGV4dFN0cikpOihvPXguY3JlYXRlRWxlbWVudE5TKHhhLFwidHNwYW5cIiksRihvLHtkeTp1LFxueDpqfSkscCYmRihvLFwic3R5bGVcIixwKSxiLmFwcGVuZENoaWxkKG8pKSksRD5sJiYobD1EKSk6KG8ucmVtb3ZlQ2hpbGQoby5maXJzdENoaWxkKSx0LnVuc2hpZnQoZS5wb3AoKSkpLGUubGVuZ3RoJiZvLmFwcGVuZENoaWxkKHguY3JlYXRlVGV4dE5vZGUoZS5qb2luKFwiIFwiKS5yZXBsYWNlKC8tIC9nLFwiLVwiKSkpO24rK319fSl9KSl9LGJ1dHRvbjpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7dmFyIGo9dGhpcy5sYWJlbChhLGIsYyxpLG51bGwsbnVsbCxudWxsLG51bGwsXCJidXR0b25cIiksaz0wLGwsbixtLG8scCxxLGE9e3gxOjAseTE6MCx4MjowLHkyOjF9LGU9dyh7XCJzdHJva2Utd2lkdGhcIjoxLHN0cm9rZTpcIiNDQ0NDQ0NcIixmaWxsOntsaW5lYXJHcmFkaWVudDphLHN0b3BzOltbMCxcIiNGRUZFRkVcIl0sWzEsXCIjRjZGNkY2XCJdXX0scjoyLHBhZGRpbmc6NSxzdHlsZTp7Y29sb3I6XCJibGFja1wifX0sZSk7bT1lLnN0eWxlO2RlbGV0ZSBlLnN0eWxlO2Y9dyhlLHtzdHJva2U6XCIjNjhBXCIsXG5maWxsOntsaW5lYXJHcmFkaWVudDphLHN0b3BzOltbMCxcIiNGRkZcIl0sWzEsXCIjQUNGXCJdXX19LGYpO289Zi5zdHlsZTtkZWxldGUgZi5zdHlsZTtnPXcoZSx7c3Ryb2tlOlwiIzY4QVwiLGZpbGw6e2xpbmVhckdyYWRpZW50OmEsc3RvcHM6W1swLFwiIzlCRFwiXSxbMSxcIiNDREZcIl1dfX0sZyk7cD1nLnN0eWxlO2RlbGV0ZSBnLnN0eWxlO2g9dyhlLHtzdHlsZTp7Y29sb3I6XCIjQ0NDXCJ9fSxoKTtxPWguc3R5bGU7ZGVsZXRlIGguc3R5bGU7TihqLmVsZW1lbnQsQWE/XCJtb3VzZW92ZXJcIjpcIm1vdXNlZW50ZXJcIixmdW5jdGlvbigpe2shPT0zJiZqLmF0dHIoZikuY3NzKG8pfSk7TihqLmVsZW1lbnQsQWE/XCJtb3VzZW91dFwiOlwibW91c2VsZWF2ZVwiLGZ1bmN0aW9uKCl7ayE9PTMmJihsPVtlLGYsZ11ba10sbj1bbSxvLHBdW2tdLGouYXR0cihsKS5jc3MobikpfSk7ai5zZXRTdGF0ZT1mdW5jdGlvbihhKXsoai5zdGF0ZT1rPWEpP2E9PT0yP2ouYXR0cihnKS5jc3MocCk6YT09PTMmJmouYXR0cihoKS5jc3MocSk6XG5qLmF0dHIoZSkuY3NzKG0pfTtyZXR1cm4gai5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtrIT09MyYmZC5jYWxsKGopfSkuYXR0cihlKS5jc3Mocih7Y3Vyc29yOlwiZGVmYXVsdFwifSxtKSl9LGNyaXNwTGluZTpmdW5jdGlvbihhLGIpe2FbMV09PT1hWzRdJiYoYVsxXT1hWzRdPXYoYVsxXSktYiUyLzIpO2FbMl09PT1hWzVdJiYoYVsyXT1hWzVdPXYoYVsyXSkrYiUyLzIpO3JldHVybiBhfSxwYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPXtmaWxsOlB9O0hhKGEpP2IuZD1hOmRhKGEpJiZyKGIsYSk7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudChcInBhdGhcIikuYXR0cihiKX0sY2lyY2xlOmZ1bmN0aW9uKGEsYixjKXthPWRhKGEpP2E6e3g6YSx5OmIscjpjfTtiPXRoaXMuY3JlYXRlRWxlbWVudChcImNpcmNsZVwiKTtiLnhTZXR0ZXI9ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcImN4XCIsYSl9O2IueVNldHRlcj1mdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY3lcIixcbmEpfTtyZXR1cm4gYi5hdHRyKGEpfSxhcmM6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2lmKGRhKGEpKWI9YS55LGM9YS5yLGQ9YS5pbm5lclIsZT1hLnN0YXJ0LGY9YS5lbmQsYT1hLng7YT10aGlzLnN5bWJvbChcImFyY1wiLGF8fDAsYnx8MCxjfHwwLGN8fDAse2lubmVyUjpkfHwwLHN0YXJ0OmV8fDAsZW5kOmZ8fDB9KTthLnI9YztyZXR1cm4gYX0scmVjdDpmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGU9ZGEoYSk/YS5yOmUsZz10aGlzLmNyZWF0ZUVsZW1lbnQoXCJyZWN0XCIpLGE9ZGEoYSk/YTphPT09dT97fTp7eDphLHk6Yix3aWR0aDp0KGMsMCksaGVpZ2h0OnQoZCwwKX07aWYoZiE9PXUpYS5zdHJva2VXaWR0aD1mLGE9Zy5jcmlzcChhKTtpZihlKWEucj1lO2cuclNldHRlcj1mdW5jdGlvbihhKXtGKHRoaXMuZWxlbWVudCx7cng6YSxyeTphfSl9O3JldHVybiBnLmF0dHIoYSl9LHNldFNpemU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuYWxpZ25lZE9iamVjdHMsZT1kLmxlbmd0aDtcbnRoaXMud2lkdGg9YTt0aGlzLmhlaWdodD1iO2Zvcih0aGlzLmJveFdyYXBwZXJbcChjLCEwKT9cImFuaW1hdGVcIjpcImF0dHJcIl0oe3dpZHRoOmEsaGVpZ2h0OmJ9KTtlLS07KWRbZV0uYWxpZ24oKX0sZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNyZWF0ZUVsZW1lbnQoXCJnXCIpO3JldHVybiBzKGEpP2IuYXR0cih7XCJjbGFzc1wiOlwiaGlnaGNoYXJ0cy1cIithfSk6Yn0saW1hZ2U6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj17cHJlc2VydmVBc3BlY3RSYXRpbzpQfTthcmd1bWVudHMubGVuZ3RoPjEmJnIoZix7eDpiLHk6Yyx3aWR0aDpkLGhlaWdodDplfSk7Zj10aGlzLmNyZWF0ZUVsZW1lbnQoXCJpbWFnZVwiKS5hdHRyKGYpO2YuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUz9mLmVsZW1lbnQuc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsXCJocmVmXCIsYSk6Zi5lbGVtZW50LnNldEF0dHJpYnV0ZShcImhjLXN2Zy1ocmVmXCIsYSk7cmV0dXJuIGZ9LHN5bWJvbDpmdW5jdGlvbihhLFxuYixjLGQsZSxmKXt2YXIgZyxoPXRoaXMuc3ltYm9sc1thXSxoPWgmJmgodihiKSx2KGMpLGQsZSxmKSxpPS9edXJsXFwoKC4qPylcXCkkLyxqLGs7aWYoaClnPXRoaXMucGF0aChoKSxyKGcse3N5bWJvbE5hbWU6YSx4OmIseTpjLHdpZHRoOmQsaGVpZ2h0OmV9KSxmJiZyKGcsZik7ZWxzZSBpZihpLnRlc3QoYSkpaz1mdW5jdGlvbihhLGIpe2EuZWxlbWVudCYmKGEuYXR0cih7d2lkdGg6YlswXSxoZWlnaHQ6YlsxXX0pLGEuYWxpZ25CeVRyYW5zbGF0ZXx8YS50cmFuc2xhdGUodigoZC1iWzBdKS8yKSx2KChlLWJbMV0pLzIpKSl9LGo9YS5tYXRjaChpKVsxXSxhPUpiW2pdfHxmJiZmLndpZHRoJiZmLmhlaWdodCYmW2Yud2lkdGgsZi5oZWlnaHRdLGc9dGhpcy5pbWFnZShqKS5hdHRyKHt4OmIseTpjfSksZy5pc0ltZz0hMCxhP2soZyxhKTooZy5hdHRyKHt3aWR0aDowLGhlaWdodDowfSksJChcImltZ1wiLHtvbmxvYWQ6ZnVuY3Rpb24oKXtrKGcsSmJbal09W3RoaXMud2lkdGgsdGhpcy5oZWlnaHRdKX0sXG5zcmM6an0pKTtyZXR1cm4gZ30sc3ltYm9sczp7Y2lyY2xlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPTAuMTY2KmM7cmV0dXJuW1wiTVwiLGErYy8yLGIsXCJDXCIsYStjK2UsYixhK2MrZSxiK2QsYStjLzIsYitkLFwiQ1wiLGEtZSxiK2QsYS1lLGIsYStjLzIsYixcIlpcIl19LHNxdWFyZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5bXCJNXCIsYSxiLFwiTFwiLGErYyxiLGErYyxiK2QsYSxiK2QsXCJaXCJdfSx0cmlhbmdsZTpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5bXCJNXCIsYStjLzIsYixcIkxcIixhK2MsYitkLGEsYitkLFwiWlwiXX0sXCJ0cmlhbmdsZS1kb3duXCI6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuW1wiTVwiLGEsYixcIkxcIixhK2MsYixhK2MvMixiK2QsXCJaXCJdfSxkaWFtb25kOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybltcIk1cIixhK2MvMixiLFwiTFwiLGErYyxiK2QvMixhK2MvMixiK2QsYSxiK2QvMixcIlpcIl19LGFyYzpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWUuc3RhcnQsYz1lLnJ8fGN8fGQsZz1lLmVuZC1cbjAuMDAxLGQ9ZS5pbm5lclIsaD1lLm9wZW4saT1hYShmKSxqPWZhKGYpLGs9YWEoZyksZz1mYShnKSxlPWUuZW5kLWY8b2E/MDoxO3JldHVybltcIk1cIixhK2MqaSxiK2MqaixcIkFcIixjLGMsMCxlLDEsYStjKmssYitjKmcsaD9cIk1cIjpcIkxcIixhK2QqayxiK2QqZyxcIkFcIixkLGQsMCxlLDAsYStkKmksYitkKmosaD9cIlwiOlwiWlwiXX0sY2FsbG91dDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPUwoZSYmZS5yfHwwLGMsZCksZz1mKzYsaD1lJiZlLmFuY2hvclgsaT1lJiZlLmFuY2hvclksZT12KGUuc3Ryb2tlV2lkdGh8fDApJTIvMjthKz1lO2IrPWU7ZT1bXCJNXCIsYStmLGIsXCJMXCIsYStjLWYsYixcIkNcIixhK2MsYixhK2MsYixhK2MsYitmLFwiTFwiLGErYyxiK2QtZixcIkNcIixhK2MsYitkLGErYyxiK2QsYStjLWYsYitkLFwiTFwiLGErZixiK2QsXCJDXCIsYSxiK2QsYSxiK2QsYSxiK2QtZixcIkxcIixhLGIrZixcIkNcIixhLGIsYSxiLGErZixiXTtoJiZoPmMmJmk+YitnJiZpPGIrZC1nP2Uuc3BsaWNlKDEzLDMsXG5cIkxcIixhK2MsaS02LGErYys2LGksYStjLGkrNixhK2MsYitkLWYpOmgmJmg8MCYmaT5iK2cmJmk8YitkLWc/ZS5zcGxpY2UoMzMsMyxcIkxcIixhLGkrNixhLTYsaSxhLGktNixhLGIrZik6aSYmaT5kJiZoPmErZyYmaDxhK2MtZz9lLnNwbGljZSgyMywzLFwiTFwiLGgrNixiK2QsaCxiK2QrNixoLTYsYitkLGErZixiK2QpOmkmJmk8MCYmaD5hK2cmJmg8YStjLWcmJmUuc3BsaWNlKDMsMyxcIkxcIixoLTYsYixoLGItNixoKzYsYixjLWYsYik7cmV0dXJuIGV9fSxjbGlwUmVjdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1cImhpZ2hjaGFydHMtXCIrdWIrKyxmPXRoaXMuY3JlYXRlRWxlbWVudChcImNsaXBQYXRoXCIpLmF0dHIoe2lkOmV9KS5hZGQodGhpcy5kZWZzKSxhPXRoaXMucmVjdChhLGIsYyxkLDApLmFkZChmKTthLmlkPWU7YS5jbGlwUGF0aD1mO3JldHVybiBhfSx0ZXh0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWdhfHwhYmEmJnRoaXMuZm9yRXhwb3J0LGY9e307aWYoZCYmIXRoaXMuZm9yRXhwb3J0KXJldHVybiB0aGlzLmh0bWwoYSxcbmIsYyk7Zi54PU1hdGgucm91bmQoYnx8MCk7aWYoYylmLnk9TWF0aC5yb3VuZChjKTtpZihhfHxhPT09MClmLnRleHQ9YTthPXRoaXMuY3JlYXRlRWxlbWVudChcInRleHRcIikuYXR0cihmKTtlJiZhLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwifSk7aWYoIWQpYS54U2V0dGVyPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidHNwYW5cIiksZSxmPWMuZ2V0QXR0cmlidXRlKGIpLG47Zm9yKG49MDtuPGQubGVuZ3RoO24rKyllPWRbbl0sZS5nZXRBdHRyaWJ1dGUoYik9PT1mJiZlLnNldEF0dHJpYnV0ZShiLGEpO2Muc2V0QXR0cmlidXRlKGIsYSl9O3JldHVybiBhfSxmb250TWV0cmljczpmdW5jdGlvbihhLGIpe2E9YXx8dGhpcy5zdHlsZS5mb250U2l6ZTtpZihiJiZHLmdldENvbXB1dGVkU3R5bGUpYj1iLmVsZW1lbnR8fGIsYT1HLmdldENvbXB1dGVkU3R5bGUoYixcIlwiKS5mb250U2l6ZTt2YXIgYT0vcHgvLnRlc3QoYSk/eShhKTovZW0vLnRlc3QoYSk/XG5wYXJzZUZsb2F0KGEpKjEyOjEyLGM9YTwyND9hKzQ6dihhKjEuMiksZD12KGMqMC44KTtyZXR1cm57aDpjLGI6ZCxmOmF9fSxsYWJlbDpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7ZnVuY3Rpb24gaigpe3ZhciBhLGI7YT1vLmVsZW1lbnQuc3R5bGU7RD0odD09PXZvaWQgMHx8eGI9PT12b2lkIDB8fG0uc3R5bGVzLnRleHRBbGlnbikmJm8udGV4dFN0ciYmby5nZXRCQm94KCk7bS53aWR0aD0odHx8RC53aWR0aHx8MCkrMipDK2tiO20uaGVpZ2h0PSh4Ynx8RC5oZWlnaHR8fDApKzIqQztSPUMrbi5mb250TWV0cmljcyhhJiZhLmZvbnRTaXplLG8pLmI7aWYoeSl7aWYoIXApYT12KC1KKkMpLGI9aD8tUjowLG0uYm94PXA9ZD9uLnN5bWJvbChkLGEsYixtLndpZHRoLG0uaGVpZ2h0LHopOm4ucmVjdChhLGIsbS53aWR0aCxtLmhlaWdodCwwLHpbUWJdKSxwLmF0dHIoXCJmaWxsXCIsUCkuYWRkKG0pO3AuaXNJbWd8fHAuYXR0cihyKHt3aWR0aDp2KG0ud2lkdGgpLGhlaWdodDp2KG0uaGVpZ2h0KX0sXG56KSk7ej1udWxsfX1mdW5jdGlvbiBrKCl7dmFyIGE9bS5zdHlsZXMsYT1hJiZhLnRleHRBbGlnbixiPWtiK0MqKDEtSiksYztjPWg/MDpSO2lmKHModCkmJkQmJihhPT09XCJjZW50ZXJcInx8YT09PVwicmlnaHRcIikpYis9e2NlbnRlcjowLjUscmlnaHQ6MX1bYV0qKHQtRC53aWR0aCk7aWYoYiE9PW8ueHx8YyE9PW8ueSlvLmF0dHIoXCJ4XCIsYiksYyE9PXUmJm8uYXR0cihcInlcIixjKTtvLng9YjtvLnk9Y31mdW5jdGlvbiBsKGEsYil7cD9wLmF0dHIoYSxiKTp6W2FdPWJ9dmFyIG49dGhpcyxtPW4uZyhpKSxvPW4udGV4dChcIlwiLDAsMCxnKS5hdHRyKHt6SW5kZXg6MX0pLHAsRCxKPTAsQz0zLGtiPTAsdCx4Yix5Yix4LEtiPTAsej17fSxSLHk7bS5vbkFkZD1mdW5jdGlvbigpe28uYWRkKG0pO20uYXR0cih7dGV4dDphfHxhPT09MD9hOlwiXCIseDpiLHk6Y30pO3AmJnMoZSkmJm0uYXR0cih7YW5jaG9yWDplLGFuY2hvclk6Zn0pfTttLndpZHRoU2V0dGVyPWZ1bmN0aW9uKGEpe3Q9YX07bS5oZWlnaHRTZXR0ZXI9XG5mdW5jdGlvbihhKXt4Yj1hfTttLnBhZGRpbmdTZXR0ZXI9ZnVuY3Rpb24oYSl7cyhhKSYmYSE9PUMmJihDPWEsaygpKX07bS5wYWRkaW5nTGVmdFNldHRlcj1mdW5jdGlvbihhKXtzKGEpJiZhIT09a2ImJihrYj1hLGsoKSl9O20uYWxpZ25TZXR0ZXI9ZnVuY3Rpb24oYSl7Sj17bGVmdDowLGNlbnRlcjowLjUscmlnaHQ6MX1bYV19O20udGV4dFNldHRlcj1mdW5jdGlvbihhKXthIT09dSYmby50ZXh0U2V0dGVyKGEpO2ooKTtrKCl9O21bXCJzdHJva2Utd2lkdGhTZXR0ZXJcIl09ZnVuY3Rpb24oYSxiKXthJiYoeT0hMCk7S2I9YSUyLzI7bChiLGEpfTttLnN0cm9rZVNldHRlcj1tLmZpbGxTZXR0ZXI9bS5yU2V0dGVyPWZ1bmN0aW9uKGEsYil7Yj09PVwiZmlsbFwiJiZhJiYoeT0hMCk7bChiLGEpfTttLmFuY2hvclhTZXR0ZXI9ZnVuY3Rpb24oYSxiKXtlPWE7bChiLGErS2IteWIpfTttLmFuY2hvcllTZXR0ZXI9ZnVuY3Rpb24oYSxiKXtmPWE7bChiLGEteCl9O20ueFNldHRlcj1mdW5jdGlvbihhKXttLng9XG5hO0omJihhLT1KKigodHx8RC53aWR0aCkrQykpO3liPXYoYSk7bS5hdHRyKFwidHJhbnNsYXRlWFwiLHliKX07bS55U2V0dGVyPWZ1bmN0aW9uKGEpe3g9bS55PXYoYSk7bS5hdHRyKFwidHJhbnNsYXRlWVwiLHgpfTt2YXIgQT1tLmNzcztyZXR1cm4gcihtLHtjc3M6ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9e30sYT13KGEpO3EobS50ZXh0UHJvcHMsZnVuY3Rpb24oYyl7YVtjXSE9PXUmJihiW2NdPWFbY10sZGVsZXRlIGFbY10pfSk7by5jc3MoYil9cmV0dXJuIEEuY2FsbChtLGEpfSxnZXRCQm94OmZ1bmN0aW9uKCl7cmV0dXJue3dpZHRoOkQud2lkdGgrMipDLGhlaWdodDpELmhlaWdodCsyKkMseDpELngtQyx5OkQueS1DfX0sc2hhZG93OmZ1bmN0aW9uKGEpe3AmJnAuc2hhZG93KGEpO3JldHVybiBtfSxkZXN0cm95OmZ1bmN0aW9uKCl7WChtLmVsZW1lbnQsXCJtb3VzZWVudGVyXCIpO1gobS5lbGVtZW50LFwibW91c2VsZWF2ZVwiKTtvJiYobz1vLmRlc3Ryb3koKSk7cCYmKHA9cC5kZXN0cm95KCkpO1xuUy5wcm90b3R5cGUuZGVzdHJveS5jYWxsKG0pO209bj1qPWs9bD1udWxsfX0pfX07WmE9dGE7cihTLnByb3RvdHlwZSx7aHRtbENzczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnQ7aWYoYj1hJiZiLnRhZ05hbWU9PT1cIlNQQU5cIiYmYS53aWR0aClkZWxldGUgYS53aWR0aCx0aGlzLnRleHRXaWR0aD1iLHRoaXMudXBkYXRlVHJhbnNmb3JtKCk7dGhpcy5zdHlsZXM9cih0aGlzLnN0eWxlcyxhKTtCKHRoaXMuZWxlbWVudCxhKTtyZXR1cm4gdGhpc30saHRtbEdldEJCb3g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVsZW1lbnQsYj10aGlzLmJCb3g7aWYoIWIpe2lmKGEubm9kZU5hbWU9PT1cInRleHRcIilhLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjtiPXRoaXMuYkJveD17eDphLm9mZnNldExlZnQseTphLm9mZnNldFRvcCx3aWR0aDphLm9mZnNldFdpZHRoLGhlaWdodDphLm9mZnNldEhlaWdodH19cmV0dXJuIGJ9LGh0bWxVcGRhdGVUcmFuc2Zvcm06ZnVuY3Rpb24oKXtpZih0aGlzLmFkZGVkKXt2YXIgYT1cbnRoaXMucmVuZGVyZXIsYj10aGlzLmVsZW1lbnQsYz10aGlzLnRyYW5zbGF0ZVh8fDAsZD10aGlzLnRyYW5zbGF0ZVl8fDAsZT10aGlzLnh8fDAsZj10aGlzLnl8fDAsZz10aGlzLnRleHRBbGlnbnx8XCJsZWZ0XCIsaD17bGVmdDowLGNlbnRlcjowLjUscmlnaHQ6MX1bZ10saT10aGlzLnNoYWRvd3M7QihiLHttYXJnaW5MZWZ0OmMsbWFyZ2luVG9wOmR9KTtpJiZxKGksZnVuY3Rpb24oYSl7QihhLHttYXJnaW5MZWZ0OmMrMSxtYXJnaW5Ub3A6ZCsxfSl9KTt0aGlzLmludmVydGVkJiZxKGIuY2hpbGROb2RlcyxmdW5jdGlvbihjKXthLmludmVydENoaWxkKGMsYil9KTtpZihiLnRhZ05hbWU9PT1cIlNQQU5cIil7dmFyIGo9dGhpcy5yb3RhdGlvbixrLGw9eSh0aGlzLnRleHRXaWR0aCksbj1baixnLGIuaW5uZXJIVE1MLHRoaXMudGV4dFdpZHRoXS5qb2luKFwiLFwiKTtpZihuIT09dGhpcy5jVFQpe2s9YS5mb250TWV0cmljcyhiLnN0eWxlLmZvbnRTaXplKS5iO3MoaikmJnRoaXMuc2V0U3BhblJvdGF0aW9uKGosXG5oLGspO2k9cCh0aGlzLmVsZW1XaWR0aCxiLm9mZnNldFdpZHRoKTtpZihpPmwmJi9bIFxcLV0vLnRlc3QoYi50ZXh0Q29udGVudHx8Yi5pbm5lclRleHQpKUIoYix7d2lkdGg6bCtcInB4XCIsZGlzcGxheTpcImJsb2NrXCIsd2hpdGVTcGFjZTpcIm5vcm1hbFwifSksaT1sO3RoaXMuZ2V0U3BhbkNvcnJlY3Rpb24oaSxrLGgsaixnKX1CKGIse2xlZnQ6ZSsodGhpcy54Q29ycnx8MCkrXCJweFwiLHRvcDpmKyh0aGlzLnlDb3JyfHwwKStcInB4XCJ9KTtpZih0YilrPWIub2Zmc2V0SGVpZ2h0O3RoaXMuY1RUPW59fWVsc2UgdGhpcy5hbGlnbk9uQWRkPSEwfSxzZXRTcGFuUm90YXRpb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXt9LGU9QWE/XCItbXMtdHJhbnNmb3JtXCI6dGI/XCItd2Via2l0LXRyYW5zZm9ybVwiOlVhP1wiTW96VHJhbnNmb3JtXCI6SGI/XCItby10cmFuc2Zvcm1cIjpcIlwiO2RbZV09ZC50cmFuc2Zvcm09XCJyb3RhdGUoXCIrYStcImRlZylcIjtkW2UrKFVhP1wiT3JpZ2luXCI6XCItb3JpZ2luXCIpXT1kLnRyYW5zZm9ybU9yaWdpbj1cbmIqMTAwK1wiJSBcIitjK1wicHhcIjtCKHRoaXMuZWxlbWVudCxkKX0sZ2V0U3BhbkNvcnJlY3Rpb246ZnVuY3Rpb24oYSxiLGMpe3RoaXMueENvcnI9LWEqYzt0aGlzLnlDb3JyPS1ifX0pO3IodGEucHJvdG90eXBlLHtodG1sOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGU9ZC5lbGVtZW50LGY9ZC5yZW5kZXJlcjtkLnRleHRTZXR0ZXI9ZnVuY3Rpb24oYSl7YSE9PWUuaW5uZXJIVE1MJiZkZWxldGUgdGhpcy5iQm94O2UuaW5uZXJIVE1MPXRoaXMudGV4dFN0cj1hfTtkLnhTZXR0ZXI9ZC55U2V0dGVyPWQuYWxpZ25TZXR0ZXI9ZC5yb3RhdGlvblNldHRlcj1mdW5jdGlvbihhLGIpe2I9PT1cImFsaWduXCImJihiPVwidGV4dEFsaWduXCIpO2RbYl09YTtkLmh0bWxVcGRhdGVUcmFuc2Zvcm0oKX07ZC5hdHRyKHt0ZXh0OmEseDp2KGIpLHk6dihjKX0pLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHdoaXRlU3BhY2U6XCJub3dyYXBcIixmb250RmFtaWx5OnRoaXMuc3R5bGUuZm9udEZhbWlseSxcbmZvbnRTaXplOnRoaXMuc3R5bGUuZm9udFNpemV9KTtkLmNzcz1kLmh0bWxDc3M7aWYoZi5pc1NWRylkLmFkZD1mdW5jdGlvbihhKXt2YXIgYixjPWYuYm94LnBhcmVudE5vZGUsaj1bXTtpZih0aGlzLnBhcmVudEdyb3VwPWEpe2lmKGI9YS5kaXYsIWIpe2Zvcig7YTspai5wdXNoKGEpLGE9YS5wYXJlbnRHcm91cDtxKGoucmV2ZXJzZSgpLGZ1bmN0aW9uKGEpe3ZhciBkO2I9YS5kaXY9YS5kaXZ8fCQoS2Ese2NsYXNzTmFtZTpGKGEuZWxlbWVudCxcImNsYXNzXCIpfSx7cG9zaXRpb246XCJhYnNvbHV0ZVwiLGxlZnQ6KGEudHJhbnNsYXRlWHx8MCkrXCJweFwiLHRvcDooYS50cmFuc2xhdGVZfHwwKStcInB4XCJ9LGJ8fGMpO2Q9Yi5zdHlsZTtyKGEse3RyYW5zbGF0ZVhTZXR0ZXI6ZnVuY3Rpb24oYixjKXtkLmxlZnQ9YitcInB4XCI7YVtjXT1iO2EuZG9UcmFuc2Zvcm09ITB9LHRyYW5zbGF0ZVlTZXR0ZXI6ZnVuY3Rpb24oYixjKXtkLnRvcD1iK1wicHhcIjthW2NdPWI7YS5kb1RyYW5zZm9ybT0hMH0sdmlzaWJpbGl0eVNldHRlcjpmdW5jdGlvbihhLFxuYil7ZFtiXT1hfX0pfSl9fWVsc2UgYj1jO2IuYXBwZW5kQ2hpbGQoZSk7ZC5hZGRlZD0hMDtkLmFsaWduT25BZGQmJmQuaHRtbFVwZGF0ZVRyYW5zZm9ybSgpO3JldHVybiBkfTtyZXR1cm4gZH19KTt2YXIgWjtpZighYmEmJiFnYSl7Wj17aW5pdDpmdW5jdGlvbihhLGIpe3ZhciBjPVtcIjxcIixiLCcgZmlsbGVkPVwiZlwiIHN0cm9rZWQ9XCJmXCInXSxkPVtcInBvc2l0aW9uOiBcIixcImFic29sdXRlXCIsXCI7XCJdLGU9Yj09PUthOyhiPT09XCJzaGFwZVwifHxlKSYmZC5wdXNoKFwibGVmdDowO3RvcDowO3dpZHRoOjFweDtoZWlnaHQ6MXB4O1wiKTtkLnB1c2goXCJ2aXNpYmlsaXR5OiBcIixlP1wiaGlkZGVuXCI6XCJ2aXNpYmxlXCIpO2MucHVzaCgnIHN0eWxlPVwiJyxkLmpvaW4oXCJcIiksJ1wiLz4nKTtpZihiKWM9ZXx8Yj09PVwic3BhblwifHxiPT09XCJpbWdcIj9jLmpvaW4oXCJcIik6YS5wcmVwVk1MKGMpLHRoaXMuZWxlbWVudD0kKGMpO3RoaXMucmVuZGVyZXI9YX0sYWRkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVuZGVyZXIsXG5jPXRoaXMuZWxlbWVudCxkPWIuYm94LGQ9YT9hLmVsZW1lbnR8fGE6ZDthJiZhLmludmVydGVkJiZiLmludmVydENoaWxkKGMsZCk7ZC5hcHBlbmRDaGlsZChjKTt0aGlzLmFkZGVkPSEwO3RoaXMuYWxpZ25PbkFkZCYmIXRoaXMuZGVmZXJVcGRhdGVUcmFuc2Zvcm0mJnRoaXMudXBkYXRlVHJhbnNmb3JtKCk7aWYodGhpcy5vbkFkZCl0aGlzLm9uQWRkKCk7cmV0dXJuIHRoaXN9LHVwZGF0ZVRyYW5zZm9ybTpTLnByb3RvdHlwZS5odG1sVXBkYXRlVHJhbnNmb3JtLHNldFNwYW5Sb3RhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMucm90YXRpb24sYj1hYShhKkVhKSxjPWZhKGEqRWEpO0IodGhpcy5lbGVtZW50LHtmaWx0ZXI6YT9bXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuTWF0cml4KE0xMT1cIixiLFwiLCBNMTI9XCIsLWMsXCIsIE0yMT1cIixjLFwiLCBNMjI9XCIsYixcIiwgc2l6aW5nTWV0aG9kPSdhdXRvIGV4cGFuZCcpXCJdLmpvaW4oXCJcIik6UH0pfSxnZXRTcGFuQ29ycmVjdGlvbjpmdW5jdGlvbihhLFxuYixjLGQsZSl7dmFyIGY9ZD9hYShkKkVhKToxLGc9ZD9mYShkKkVhKTowLGg9cCh0aGlzLmVsZW1IZWlnaHQsdGhpcy5lbGVtZW50Lm9mZnNldEhlaWdodCksaTt0aGlzLnhDb3JyPWY8MCYmLWE7dGhpcy55Q29ycj1nPDAmJi1oO2k9ZipnPDA7dGhpcy54Q29ycis9ZypiKihpPzEtYzpjKTt0aGlzLnlDb3JyLT1mKmIqKGQ/aT9jOjEtYzoxKTtlJiZlIT09XCJsZWZ0XCImJih0aGlzLnhDb3JyLT1hKmMqKGY8MD8tMToxKSxkJiYodGhpcy55Q29yci09aCpjKihnPDA/LTE6MSkpLEIodGhpcy5lbGVtZW50LHt0ZXh0QWxpZ246ZX0pKX0scGF0aFRvVk1MOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPVtdO2ItLTspaWYoamEoYVtiXSkpY1tiXT12KGFbYl0qMTApLTU7ZWxzZSBpZihhW2JdPT09XCJaXCIpY1tiXT1cInhcIjtlbHNlIGlmKGNbYl09YVtiXSxhLmlzQXJjJiYoYVtiXT09PVwid2FcInx8YVtiXT09PVwiYXRcIikpY1tiKzVdPT09Y1tiKzddJiYoY1tiKzddKz1hW2IrN10+YVtiK1xuNV0/MTotMSksY1tiKzZdPT09Y1tiKzhdJiYoY1tiKzhdKz1hW2IrOF0+YVtiKzZdPzE6LTEpO3JldHVybiBjLmpvaW4oXCIgXCIpfHxcInhcIn0sY2xpcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM7YT8oYz1hLm1lbWJlcnMsbGEoYyxiKSxjLnB1c2goYiksYi5kZXN0cm95Q2xpcD1mdW5jdGlvbigpe2xhKGMsYil9LGE9YS5nZXRDU1MoYikpOihiLmRlc3Ryb3lDbGlwJiZiLmRlc3Ryb3lDbGlwKCksYT17Y2xpcDpoYj9cImluaGVyaXRcIjpcInJlY3QoYXV0bylcIn0pO3JldHVybiBiLmNzcyhhKX0sY3NzOlMucHJvdG90eXBlLmh0bWxDc3Msc2FmZVJlbW92ZUNoaWxkOmZ1bmN0aW9uKGEpe2EucGFyZW50Tm9kZSYmUWEoYSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLmRlc3Ryb3lDbGlwJiZ0aGlzLmRlc3Ryb3lDbGlwKCk7cmV0dXJuIFMucHJvdG90eXBlLmRlc3Ryb3kuYXBwbHkodGhpcyl9LG9uOmZ1bmN0aW9uKGEsYil7dGhpcy5lbGVtZW50W1wib25cIithXT1mdW5jdGlvbigpe3ZhciBhPVxuRy5ldmVudDthLnRhcmdldD1hLnNyY0VsZW1lbnQ7YihhKX07cmV0dXJuIHRoaXN9LGN1dE9mZlBhdGg6ZnVuY3Rpb24oYSxiKXt2YXIgYyxhPWEuc3BsaXQoL1sgLF0vKTtjPWEubGVuZ3RoO2lmKGM9PT05fHxjPT09MTEpYVtjLTRdPWFbYy0yXT15KGFbYy0yXSktMTAqYjtyZXR1cm4gYS5qb2luKFwiIFwiKX0sc2hhZG93OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlLGY9dGhpcy5lbGVtZW50LGc9dGhpcy5yZW5kZXJlcixoLGk9Zi5zdHlsZSxqLGs9Zi5wYXRoLGwsbixtLG87ayYmdHlwZW9mIGsudmFsdWUhPT1cInN0cmluZ1wiJiYoaz1cInhcIik7bj1rO2lmKGEpe209cChhLndpZHRoLDMpO289KGEub3BhY2l0eXx8MC4xNSkvbTtmb3IoZT0xO2U8PTM7ZSsrKXtsPW0qMisxLTIqZTtjJiYobj10aGlzLmN1dE9mZlBhdGgoay52YWx1ZSxsKzAuNSkpO2o9Wyc8c2hhcGUgaXNTaGFkb3c9XCJ0cnVlXCIgc3Ryb2tld2VpZ2h0PVwiJyxsLCdcIiBmaWxsZWQ9XCJmYWxzZVwiIHBhdGg9XCInLG4sJ1wiIGNvb3Jkc2l6ZT1cIjEwIDEwXCIgc3R5bGU9XCInLFxuZi5zdHlsZS5jc3NUZXh0LCdcIiAvPiddO2g9JChnLnByZXBWTUwoaiksbnVsbCx7bGVmdDp5KGkubGVmdCkrcChhLm9mZnNldFgsMSksdG9wOnkoaS50b3ApK3AoYS5vZmZzZXRZLDEpfSk7aWYoYyloLmN1dE9mZj1sKzE7aj1bJzxzdHJva2UgY29sb3I9XCInLGEuY29sb3J8fFwiYmxhY2tcIiwnXCIgb3BhY2l0eT1cIicsbyplLCdcIi8+J107JChnLnByZXBWTUwoaiksbnVsbCxudWxsLGgpO2I/Yi5lbGVtZW50LmFwcGVuZENoaWxkKGgpOmYucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaCxmKTtkLnB1c2goaCl9dGhpcy5zaGFkb3dzPWR9cmV0dXJuIHRoaXN9LHVwZGF0ZVNoYWRvd3M6c2Esc2V0QXR0cjpmdW5jdGlvbihhLGIpe2hiP3RoaXMuZWxlbWVudFthXT1iOnRoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoYSxiKX0sY2xhc3NTZXR0ZXI6ZnVuY3Rpb24oYSl7dGhpcy5lbGVtZW50LmNsYXNzTmFtZT1hfSxkYXNoc3R5bGVTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpeyhjLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic3Ryb2tlXCIpWzBdfHxcbiQodGhpcy5yZW5kZXJlci5wcmVwVk1MKFtcIjxzdHJva2UvPlwiXSksbnVsbCxudWxsLGMpKVtiXT1hfHxcInNvbGlkXCI7dGhpc1tiXT1hfSxkU2V0dGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnNoYWRvd3MsYT1hfHxbXTt0aGlzLmQ9YS5qb2luJiZhLmpvaW4oXCIgXCIpO2MucGF0aD1hPXRoaXMucGF0aFRvVk1MKGEpO2lmKGQpZm9yKGM9ZC5sZW5ndGg7Yy0tOylkW2NdLnBhdGg9ZFtjXS5jdXRPZmY/dGhpcy5jdXRPZmZQYXRoKGEsZFtjXS5jdXRPZmYpOmE7dGhpcy5zZXRBdHRyKGIsYSl9LGZpbGxTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMubm9kZU5hbWU7aWYoZD09PVwiU1BBTlwiKWMuc3R5bGUuY29sb3I9YTtlbHNlIGlmKGQhPT1cIklNR1wiKWMuZmlsbGVkPWEhPT1QLHRoaXMuc2V0QXR0cihcImZpbGxjb2xvclwiLHRoaXMucmVuZGVyZXIuY29sb3IoYSxjLGIsdGhpcykpfSxvcGFjaXR5U2V0dGVyOnNhLHJvdGF0aW9uU2V0dGVyOmZ1bmN0aW9uKGEsYixjKXtjPWMuc3R5bGU7XG50aGlzW2JdPWNbYl09YTtjLmxlZnQ9LXYoZmEoYSpFYSkrMSkrXCJweFwiO2MudG9wPXYoYWEoYSpFYSkpK1wicHhcIn0sc3Ryb2tlU2V0dGVyOmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNldEF0dHIoXCJzdHJva2Vjb2xvclwiLHRoaXMucmVuZGVyZXIuY29sb3IoYSxjLGIpKX0sXCJzdHJva2Utd2lkdGhTZXR0ZXJcIjpmdW5jdGlvbihhLGIsYyl7Yy5zdHJva2VkPSEhYTt0aGlzW2JdPWE7amEoYSkmJihhKz1cInB4XCIpO3RoaXMuc2V0QXR0cihcInN0cm9rZXdlaWdodFwiLGEpfSx0aXRsZVNldHRlcjpmdW5jdGlvbihhLGIpe3RoaXMuc2V0QXR0cihiLGEpfSx2aXNpYmlsaXR5U2V0dGVyOmZ1bmN0aW9uKGEsYixjKXthPT09XCJpbmhlcml0XCImJihhPVwidmlzaWJsZVwiKTt0aGlzLnNoYWRvd3MmJnEodGhpcy5zaGFkb3dzLGZ1bmN0aW9uKGMpe2Muc3R5bGVbYl09YX0pO2Mubm9kZU5hbWU9PT1cIkRJVlwiJiYoYT1hPT09XCJoaWRkZW5cIj9cIi05OTllbVwiOjAsaGJ8fChjLnN0eWxlW2JdPWE/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIiksXG5iPVwidG9wXCIpO2Muc3R5bGVbYl09YX0seFNldHRlcjpmdW5jdGlvbihhLGIsYyl7dGhpc1tiXT1hO2I9PT1cInhcIj9iPVwibGVmdFwiOmI9PT1cInlcIiYmKGI9XCJ0b3BcIik7dGhpcy51cGRhdGVDbGlwcGluZz8odGhpc1tiXT1hLHRoaXMudXBkYXRlQ2xpcHBpbmcoKSk6Yy5zdHlsZVtiXT1hfSx6SW5kZXhTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe2Muc3R5bGVbYl09YX19O0suVk1MRWxlbWVudD1aPW1hKFMsWik7Wi5wcm90b3R5cGUueVNldHRlcj1aLnByb3RvdHlwZS53aWR0aFNldHRlcj1aLnByb3RvdHlwZS5oZWlnaHRTZXR0ZXI9Wi5wcm90b3R5cGUueFNldHRlcjt2YXIgaWE9e0VsZW1lbnQ6Wixpc0lFODp3YS5pbmRleE9mKFwiTVNJRSA4LjBcIik+LTEsaW5pdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZTt0aGlzLmFsaWduZWRPYmplY3RzPVtdO2Q9dGhpcy5jcmVhdGVFbGVtZW50KEthKS5jc3Mocih0aGlzLmdldFN0eWxlKGQpLHtwb3NpdGlvbjpcInJlbGF0aXZlXCJ9KSk7ZT1kLmVsZW1lbnQ7XG5hLmFwcGVuZENoaWxkKGQuZWxlbWVudCk7dGhpcy5pc1ZNTD0hMDt0aGlzLmJveD1lO3RoaXMuYm94V3JhcHBlcj1kO3RoaXMuY2FjaGU9e307dGhpcy5zZXRTaXplKGIsYywhMSk7aWYoIXgubmFtZXNwYWNlcy5oY3Ype3gubmFtZXNwYWNlcy5hZGQoXCJoY3ZcIixcInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sXCIpO3RyeXt4LmNyZWF0ZVN0eWxlU2hlZXQoKS5jc3NUZXh0PVwiaGN2XFxcXDpmaWxsLCBoY3ZcXFxcOnBhdGgsIGhjdlxcXFw6c2hhcGUsIGhjdlxcXFw6c3Ryb2tleyBiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKTsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB9IFwifWNhdGNoKGYpe3guc3R5bGVTaGVldHNbMF0uY3NzVGV4dCs9XCJoY3ZcXFxcOmZpbGwsIGhjdlxcXFw6cGF0aCwgaGN2XFxcXDpzaGFwZSwgaGN2XFxcXDpzdHJva2V7IGJlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0gXCJ9fX0saXNIaWRkZW46ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5ib3gub2Zmc2V0V2lkdGh9LFxuY2xpcFJlY3Q6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5jcmVhdGVFbGVtZW50KCksZj1kYShhKTtyZXR1cm4gcihlLHttZW1iZXJzOltdLGxlZnQ6KGY/YS54OmEpKzEsdG9wOihmP2EueTpiKSsxLHdpZHRoOihmP2Eud2lkdGg6YyktMSxoZWlnaHQ6KGY/YS5oZWlnaHQ6ZCktMSxnZXRDU1M6ZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50LGM9Yi5ub2RlTmFtZSxhPWEuaW52ZXJ0ZWQsZD10aGlzLnRvcC0oYz09PVwic2hhcGVcIj9iLm9mZnNldFRvcDowKSxlPXRoaXMubGVmdCxiPWUrdGhpcy53aWR0aCxmPWQrdGhpcy5oZWlnaHQsZD17Y2xpcDpcInJlY3QoXCIrdihhP2U6ZCkrXCJweCxcIit2KGE/ZjpiKStcInB4LFwiK3YoYT9iOmYpK1wicHgsXCIrdihhP2Q6ZSkrXCJweClcIn07IWEmJmhiJiZjPT09XCJESVZcIiYmcihkLHt3aWR0aDpiK1wicHhcIixoZWlnaHQ6ZitcInB4XCJ9KTtyZXR1cm4gZH0sdXBkYXRlQ2xpcHBpbmc6ZnVuY3Rpb24oKXtxKGUubWVtYmVycyxmdW5jdGlvbihhKXthLmVsZW1lbnQmJlxuYS5jc3MoZS5nZXRDU1MoYSkpfSl9fSl9LGNvbG9yOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZixnPS9ecmdiYS8saCxpLGo9UDthJiZhLmxpbmVhckdyYWRpZW50P2k9XCJncmFkaWVudFwiOmEmJmEucmFkaWFsR3JhZGllbnQmJihpPVwicGF0dGVyblwiKTtpZihpKXt2YXIgayxsLG49YS5saW5lYXJHcmFkaWVudHx8YS5yYWRpYWxHcmFkaWVudCxtLG8scCxELEosQz1cIlwiLGE9YS5zdG9wcyx0LHM9W10sdT1mdW5jdGlvbigpe2g9Wyc8ZmlsbCBjb2xvcnM9XCInK3Muam9pbihcIixcIikrJ1wiIG9wYWNpdHk9XCInLHAsJ1wiIG86b3BhY2l0eTI9XCInLG8sJ1wiIHR5cGU9XCInLGksJ1wiICcsQywnZm9jdXM9XCIxMDAlXCIgbWV0aG9kPVwiYW55XCIgLz4nXTskKGUucHJlcFZNTChoKSxudWxsLG51bGwsYil9O209YVswXTt0PWFbYS5sZW5ndGgtMV07bVswXT4wJiZhLnVuc2hpZnQoWzAsbVsxXV0pO3RbMF08MSYmYS5wdXNoKFsxLHRbMV1dKTtxKGEsZnVuY3Rpb24oYSxiKXtnLnRlc3QoYVsxXSk/KGY9XG55YShhWzFdKSxrPWYuZ2V0KFwicmdiXCIpLGw9Zi5nZXQoXCJhXCIpKTooaz1hWzFdLGw9MSk7cy5wdXNoKGFbMF0qMTAwK1wiJSBcIitrKTtiPyhwPWwsRD1rKToobz1sLEo9ayl9KTtpZihjPT09XCJmaWxsXCIpaWYoaT09PVwiZ3JhZGllbnRcIiljPW4ueDF8fG5bMF18fDAsYT1uLnkxfHxuWzFdfHwwLG09bi54Mnx8blsyXXx8MCxuPW4ueTJ8fG5bM118fDAsQz0nYW5nbGU9XCInKyg5MC1WLmF0YW4oKG4tYSkvKG0tYykpKjE4MC9vYSkrJ1wiJyx1KCk7ZWxzZXt2YXIgaj1uLnIscj1qKjIsdj1qKjIseD1uLmN4LHo9bi5jeSxSPWIucmFkaWFsUmVmZXJlbmNlLHcsaj1mdW5jdGlvbigpe1ImJih3PWQuZ2V0QkJveCgpLHgrPShSWzBdLXcueCkvdy53aWR0aC0wLjUseis9KFJbMV0tdy55KS93LmhlaWdodC0wLjUscio9UlsyXS93LndpZHRoLHYqPVJbMl0vdy5oZWlnaHQpO0M9J3NyYz1cIicrRS5nbG9iYWwuVk1MUmFkaWFsR3JhZGllbnRVUkwrJ1wiIHNpemU9XCInK3IrXCIsXCIrdisnXCIgb3JpZ2luPVwiMC41LDAuNVwiIHBvc2l0aW9uPVwiJytcbngrXCIsXCIreisnXCIgY29sb3IyPVwiJytKKydcIiAnO3UoKX07ZC5hZGRlZD9qKCk6ZC5vbkFkZD1qO2o9RH1lbHNlIGo9a31lbHNlIGlmKGcudGVzdChhKSYmYi50YWdOYW1lIT09XCJJTUdcIilmPXlhKGEpLGg9W1wiPFwiLGMsJyBvcGFjaXR5PVwiJyxmLmdldChcImFcIiksJ1wiLz4nXSwkKHRoaXMucHJlcFZNTChoKSxudWxsLG51bGwsYiksaj1mLmdldChcInJnYlwiKTtlbHNle2o9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShjKTtpZihqLmxlbmd0aClqWzBdLm9wYWNpdHk9MSxqWzBdLnR5cGU9XCJzb2xpZFwiO2o9YX1yZXR1cm4gan0scHJlcFZNTDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmlzSUU4LGE9YS5qb2luKFwiXCIpO2I/KGE9YS5yZXBsYWNlKFwiLz5cIiwnIHhtbG5zPVwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWxcIiAvPicpLGE9YS5pbmRleE9mKCdzdHlsZT1cIicpPT09LTE/YS5yZXBsYWNlKFwiLz5cIiwnIHN0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7YmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTCk7XCIgLz4nKTpcbmEucmVwbGFjZSgnc3R5bGU9XCInLCdzdHlsZT1cImRpc3BsYXk6aW5saW5lLWJsb2NrO2JlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpOycpKTphPWEucmVwbGFjZShcIjxcIixcIjxoY3Y6XCIpO3JldHVybiBhfSx0ZXh0OnRhLnByb3RvdHlwZS5odG1sLHBhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9e2Nvb3Jkc2l6ZTpcIjEwIDEwXCJ9O0hhKGEpP2IuZD1hOmRhKGEpJiZyKGIsYSk7cmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudChcInNoYXBlXCIpLmF0dHIoYil9LGNpcmNsZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5zeW1ib2woXCJjaXJjbGVcIik7aWYoZGEoYSkpYz1hLnIsYj1hLnksYT1hLng7ZC5pc0NpcmNsZT0hMDtkLnI9YztyZXR1cm4gZC5hdHRyKHt4OmEseTpifSl9LGc6ZnVuY3Rpb24oYSl7dmFyIGI7YSYmKGI9e2NsYXNzTmFtZTpcImhpZ2hjaGFydHMtXCIrYSxcImNsYXNzXCI6XCJoaWdoY2hhcnRzLVwiK2F9KTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50KEthKS5hdHRyKGIpfSxpbWFnZTpmdW5jdGlvbihhLFxuYixjLGQsZSl7dmFyIGY9dGhpcy5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLmF0dHIoe3NyYzphfSk7YXJndW1lbnRzLmxlbmd0aD4xJiZmLmF0dHIoe3g6Yix5OmMsd2lkdGg6ZCxoZWlnaHQ6ZX0pO3JldHVybiBmfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09XCJyZWN0XCI/dGhpcy5zeW1ib2woYSk6dGEucHJvdG90eXBlLmNyZWF0ZUVsZW1lbnQuY2FsbCh0aGlzLGEpfSxpbnZlcnRDaGlsZDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1iLnN0eWxlLGU9YS50YWdOYW1lPT09XCJJTUdcIiYmYS5zdHlsZTtCKGEse2ZsaXA6XCJ4XCIsbGVmdDp5KGQud2lkdGgpLShlP3koZS50b3ApOjEpLHRvcDp5KGQuaGVpZ2h0KS0oZT95KGUubGVmdCk6MSkscm90YXRpb246LTkwfSk7cShhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYil7Yy5pbnZlcnRDaGlsZChiLGEpfSl9LHN5bWJvbHM6e2FyYzpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWUuc3RhcnQsZz1lLmVuZCxoPWUucnx8Y3x8XG5kLGM9ZS5pbm5lclIsZD1hYShmKSxpPWZhKGYpLGo9YWEoZyksaz1mYShnKTtpZihnLWY9PT0wKXJldHVybltcInhcIl07Zj1bXCJ3YVwiLGEtaCxiLWgsYStoLGIraCxhK2gqZCxiK2gqaSxhK2gqaixiK2gqa107ZS5vcGVuJiYhYyYmZi5wdXNoKFwiZVwiLFwiTVwiLGEsYik7Zi5wdXNoKFwiYXRcIixhLWMsYi1jLGErYyxiK2MsYStjKmosYitjKmssYStjKmQsYitjKmksXCJ4XCIsXCJlXCIpO2YuaXNBcmM9ITA7cmV0dXJuIGZ9LGNpcmNsZTpmdW5jdGlvbihhLGIsYyxkLGUpe2UmJihjPWQ9MiplLnIpO2UmJmUuaXNDaXJjbGUmJihhLT1jLzIsYi09ZC8yKTtyZXR1cm5bXCJ3YVwiLGEsYixhK2MsYitkLGErYyxiK2QvMixhK2MsYitkLzIsXCJlXCJdfSxyZWN0OmZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIHRhLnByb3RvdHlwZS5zeW1ib2xzWyFzKGUpfHwhZS5yP1wic3F1YXJlXCI6XCJjYWxsb3V0XCJdLmNhbGwoMCxhLGIsYyxkLGUpfX19O0suVk1MUmVuZGVyZXI9Wj1mdW5jdGlvbigpe3RoaXMuaW5pdC5hcHBseSh0aGlzLFxuYXJndW1lbnRzKX07Wi5wcm90b3R5cGU9dyh0YS5wcm90b3R5cGUsaWEpO1phPVp9dGEucHJvdG90eXBlLm1lYXN1cmVTcGFuV2lkdGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz14LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGQ7ZD14LmNyZWF0ZVRleHROb2RlKGEpO2MuYXBwZW5kQ2hpbGQoZCk7QihjLGIpO3RoaXMuYm94LmFwcGVuZENoaWxkKGMpO2Q9Yy5vZmZzZXRXaWR0aDtRYShjKTtyZXR1cm4gZH07dmFyIE1iO2lmKGdhKUsuQ2FuVkdSZW5kZXJlcj1aPWZ1bmN0aW9uKCl7eGE9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCJ9LFoucHJvdG90eXBlLnN5bWJvbHM9e30sTWI9ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGE9Yi5sZW5ndGgsZDtmb3IoZD0wO2Q8YTtkKyspYltkXSgpO2I9W119dmFyIGI9W107cmV0dXJue3B1c2g6ZnVuY3Rpb24oYyxkKXtiLmxlbmd0aD09PTAmJlJiKGQsYSk7Yi5wdXNoKGMpfX19KCksWmE9WjtUYS5wcm90b3R5cGU9e2FkZExhYmVsOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmF4aXMsYj1hLm9wdGlvbnMsYz1hLmNoYXJ0LGQ9YS5ob3JpeixlPWEuY2F0ZWdvcmllcyxmPWEubmFtZXMsZz10aGlzLnBvcyxoPWIubGFiZWxzLGk9aC5yb3RhdGlvbixqPWEudGlja1Bvc2l0aW9ucyxkPWQmJmUmJiFoLnN0ZXAmJiFoLnN0YWdnZXJMaW5lcyYmIWgucm90YXRpb24mJmMucGxvdFdpZHRoL2oubGVuZ3RofHwhZCYmKGMubWFyZ2luWzNdfHxjLmNoYXJ0V2lkdGgqMC4zMyksaz1nPT09alswXSxsPWc9PT1qW2oubGVuZ3RoLTFdLG4sZj1lP3AoZVtnXSxmW2ddLGcpOmcsZT10aGlzLmxhYmVsLG09ai5pbmZvO2EuaXNEYXRldGltZUF4aXMmJm0mJihuPWIuZGF0ZVRpbWVMYWJlbEZvcm1hdHNbbS5oaWdoZXJSYW5rc1tnXXx8bS51bml0TmFtZV0pO3RoaXMuaXNGaXJzdD1rO3RoaXMuaXNMYXN0PWw7Yj1hLmxhYmVsRm9ybWF0dGVyLmNhbGwoe2F4aXM6YSxjaGFydDpjLGlzRmlyc3Q6ayxpc0xhc3Q6bCxkYXRlVGltZUxhYmVsRm9ybWF0Om4sdmFsdWU6YS5pc0xvZz9cbmVhKGthKGYpKTpmfSk7Zz1kJiZ7d2lkdGg6dCgxLHYoZC0yKihoLnBhZGRpbmd8fDEwKSkpK1wicHhcIn07aWYocyhlKSllJiZlLmF0dHIoe3RleHQ6Yn0pLmNzcyhnKTtlbHNle249e2FsaWduOmEubGFiZWxBbGlnbn07aWYoamEoaSkpbi5yb3RhdGlvbj1pO2lmKGQmJmguZWxsaXBzaXMpZy5IY0hlaWdodD1hLmxlbi9qLmxlbmd0aDt0aGlzLmxhYmVsPWU9cyhiKSYmaC5lbmFibGVkP2MucmVuZGVyZXIudGV4dChiLDAsMCxoLnVzZUhUTUwpLmF0dHIobikuY3NzKHIoZyxoLnN0eWxlKSkuYWRkKGEubGFiZWxHcm91cCk6bnVsbDthLnRpY2tCYXNlbGluZT1jLnJlbmRlcmVyLmZvbnRNZXRyaWNzKGguc3R5bGUuZm9udFNpemUsZSkuYjtpJiZhLnNpZGU9PT0yJiYoYS50aWNrQmFzZWxpbmUqPWFhKGkqRWEpKX10aGlzLnlPZmZzZXQ9ZT9wKGgueSxhLnRpY2tCYXNlbGluZSsoYS5zaWRlPT09Mj84Oi0oZS5nZXRCQm94KCkuaGVpZ2h0LzIpKSk6MH0sZ2V0TGFiZWxTaXplOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmxhYmVsLGI9dGhpcy5heGlzO3JldHVybiBhP2EuZ2V0QkJveCgpW2IuaG9yaXo/XCJoZWlnaHRcIjpcIndpZHRoXCJdOjB9LGdldExhYmVsU2lkZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxhYmVsLmdldEJCb3goKSxiPXRoaXMuYXhpcyxjPWIuaG9yaXosZD1iLm9wdGlvbnMubGFiZWxzLGE9Yz9hLndpZHRoOmEuaGVpZ2h0LGI9Yz9kLngtYSp7bGVmdDowLGNlbnRlcjowLjUscmlnaHQ6MX1bYi5sYWJlbEFsaWduXTowO3JldHVybltiLGM/YStiOmFdfSxoYW5kbGVPdmVyZmxvdzpmdW5jdGlvbihhLGIpe3ZhciBjPSEwLGQ9dGhpcy5heGlzLGU9dGhpcy5pc0ZpcnN0LGY9dGhpcy5pc0xhc3QsZz1kLmhvcml6P2IueDpiLnksaD1kLnJldmVyc2VkLGk9ZC50aWNrUG9zaXRpb25zLGo9dGhpcy5nZXRMYWJlbFNpZGVzKCksaz1qWzBdLGo9alsxXSxsLG4sbSxvPXRoaXMubGFiZWwubGluZTtsPW98fDA7bj1kLmxhYmVsRWRnZTttPWQuanVzdGlmeUxhYmVscyYmKGV8fGYpO25bbF09PT1cbnV8fGcraz5uW2xdP25bbF09ZytqOm18fChjPSExKTtpZihtKXtsPShuPWQuanVzdGlmeVRvUGxvdCk/ZC5wb3M6MDtuPW4/bCtkLmxlbjpkLmNoYXJ0LmNoYXJ0V2lkdGg7ZG8gYSs9ZT8xOi0xLG09ZC50aWNrc1tpW2FdXTt3aGlsZShpW2FdJiYoIW18fCFtLmxhYmVsfHxtLmxhYmVsLmxpbmUhPT1vKSk7ZD1tJiZtLmxhYmVsLnh5JiZtLmxhYmVsLnh5LngrbS5nZXRMYWJlbFNpZGVzKClbZT8wOjFdO2UmJiFofHxmJiZoP2crazxsJiYoZz1sLWssbSYmZytqPmQmJihjPSExKSk6ZytqPm4mJihnPW4taixtJiZnK2s8ZCYmKGM9ITEpKTtiLng9Z31yZXR1cm4gY30sZ2V0UG9zaXRpb246ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5heGlzLGY9ZS5jaGFydCxnPWQmJmYub2xkQ2hhcnRIZWlnaHR8fGYuY2hhcnRIZWlnaHQ7cmV0dXJue3g6YT9lLnRyYW5zbGF0ZShiK2MsbnVsbCxudWxsLGQpK2UudHJhbnNCOmUubGVmdCtlLm9mZnNldCsoZS5vcHBvc2l0ZT8oZCYmZi5vbGRDaGFydFdpZHRofHxcbmYuY2hhcnRXaWR0aCktZS5yaWdodC1lLmxlZnQ6MCkseTphP2ctZS5ib3R0b20rZS5vZmZzZXQtKGUub3Bwb3NpdGU/ZS5oZWlnaHQ6MCk6Zy1lLnRyYW5zbGF0ZShiK2MsbnVsbCxudWxsLGQpLWUudHJhbnNCfX0sZ2V0TGFiZWxQb3NpdGlvbjpmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBpPXRoaXMuYXhpcyxqPWkudHJhbnNBLGs9aS5yZXZlcnNlZCxsPWkuc3RhZ2dlckxpbmVzLGE9YStlLngtKGYmJmQ/ZipqKihrPy0xOjEpOjApLGI9Yit0aGlzLnlPZmZzZXQtKGYmJiFkP2Yqaiooaz8xOi0xKTowKTtpZihsKWMubGluZT1nLyhofHwxKSVsLGIrPWMubGluZSooaS5sYWJlbE9mZnNldC9sKTtyZXR1cm57eDphLHk6Yn19LGdldE1hcmtQYXRoOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm4gZi5jcmlzcExpbmUoW1wiTVwiLGEsYixcIkxcIixhKyhlPzA6LWMpLGIrKGU/YzowKV0sZCl9LHJlbmRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5heGlzLGU9ZC5vcHRpb25zLFxuZj1kLmNoYXJ0LnJlbmRlcmVyLGc9ZC5ob3JpeixoPXRoaXMudHlwZSxpPXRoaXMubGFiZWwsaj10aGlzLnBvcyxrPWUubGFiZWxzLGw9dGhpcy5ncmlkTGluZSxuPWg/aCtcIkdyaWRcIjpcImdyaWRcIixtPWg/aCtcIlRpY2tcIjpcInRpY2tcIixvPWVbbitcIkxpbmVXaWR0aFwiXSxxPWVbbitcIkxpbmVDb2xvclwiXSxEPWVbbitcIkxpbmVEYXNoU3R5bGVcIl0sSj1lW20rXCJMZW5ndGhcIl0sbj1lW20rXCJXaWR0aFwiXXx8MCxDPWVbbStcIkNvbG9yXCJdLHQ9ZVttK1wiUG9zaXRpb25cIl0sbT10aGlzLm1hcmsscz1rLnN0ZXAscj0hMCx2PWQudGlja21hcmtPZmZzZXQsdz10aGlzLmdldFBvc2l0aW9uKGcsaix2LGIpLHg9dy54LHc9dy55LHo9ZyYmeD09PWQucG9zK2QubGVufHwhZyYmdz09PWQucG9zPy0xOjEsYz1wKGMsMSk7dGhpcy5pc0FjdGl2ZT0hMDtpZihvKXtqPWQuZ2V0UGxvdExpbmVQYXRoKGordixvKnosYiwhMCk7aWYobD09PXUpe2w9e3N0cm9rZTpxLFwic3Ryb2tlLXdpZHRoXCI6b307aWYoRClsLmRhc2hzdHlsZT1cbkQ7aWYoIWgpbC56SW5kZXg9MTtpZihiKWwub3BhY2l0eT0wO3RoaXMuZ3JpZExpbmU9bD1vP2YucGF0aChqKS5hdHRyKGwpLmFkZChkLmdyaWRHcm91cCk6bnVsbH1pZighYiYmbCYmailsW3RoaXMuaXNOZXc/XCJhdHRyXCI6XCJhbmltYXRlXCJdKHtkOmosb3BhY2l0eTpjfSl9aWYobiYmSil0PT09XCJpbnNpZGVcIiYmKEo9LUopLGQub3Bwb3NpdGUmJihKPS1KKSxoPXRoaXMuZ2V0TWFya1BhdGgoeCx3LEosbip6LGcsZiksbT9tLmFuaW1hdGUoe2Q6aCxvcGFjaXR5OmN9KTp0aGlzLm1hcms9Zi5wYXRoKGgpLmF0dHIoe3N0cm9rZTpDLFwic3Ryb2tlLXdpZHRoXCI6bixvcGFjaXR5OmN9KS5hZGQoZC5heGlzR3JvdXApO2lmKGkmJiFpc05hTih4KSlpLnh5PXc9dGhpcy5nZXRMYWJlbFBvc2l0aW9uKHgsdyxpLGcsayx2LGEscyksdGhpcy5pc0ZpcnN0JiYhdGhpcy5pc0xhc3QmJiFwKGUuc2hvd0ZpcnN0TGFiZWwsMSl8fHRoaXMuaXNMYXN0JiYhdGhpcy5pc0ZpcnN0JiYhcChlLnNob3dMYXN0TGFiZWwsXG4xKT9yPSExOiFkLmlzUmFkaWFsJiYhay5zdGVwJiYhay5yb3RhdGlvbiYmIWImJmMhPT0wJiYocj10aGlzLmhhbmRsZU92ZXJmbG93KGEsdykpLHMmJmElcyYmKHI9ITEpLHImJiFpc05hTih3LnkpPyh3Lm9wYWNpdHk9YyxpW3RoaXMuaXNOZXc/XCJhdHRyXCI6XCJhbmltYXRlXCJdKHcpLHRoaXMuaXNOZXc9ITEpOmkuYXR0cihcInlcIiwtOTk5OSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtQYSh0aGlzLHRoaXMuYXhpcyl9fTtLLlBsb3RMaW5lT3JCYW5kPWZ1bmN0aW9uKGEsYil7dGhpcy5heGlzPWE7aWYoYil0aGlzLm9wdGlvbnM9Yix0aGlzLmlkPWIuaWR9O0suUGxvdExpbmVPckJhbmQucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5heGlzLGM9Yi5ob3JpeixkPShiLnBvaW50UmFuZ2V8fDApLzIsZT1hLm9wdGlvbnMsZj1lLmxhYmVsLGc9YS5sYWJlbCxoPWUud2lkdGgsaT1lLnRvLGo9ZS5mcm9tLGs9cyhqKSYmcyhpKSxsPWUudmFsdWUsbj1lLmRhc2hTdHlsZSxcbm09YS5zdmdFbGVtLG89W10scCxxPWUuY29sb3IsSj1lLnpJbmRleCxDPWUuZXZlbnRzLHI9e30sdT1iLmNoYXJ0LnJlbmRlcmVyO2IuaXNMb2cmJihqPXphKGopLGk9emEoaSksbD16YShsKSk7aWYoaCl7aWYobz1iLmdldFBsb3RMaW5lUGF0aChsLGgpLHI9e3N0cm9rZTpxLFwic3Ryb2tlLXdpZHRoXCI6aH0sbilyLmRhc2hzdHlsZT1ufWVsc2UgaWYoayl7aj10KGosYi5taW4tZCk7aT1MKGksYi5tYXgrZCk7bz1iLmdldFBsb3RCYW5kUGF0aChqLGksZSk7aWYocSlyLmZpbGw9cTtpZihlLmJvcmRlcldpZHRoKXIuc3Ryb2tlPWUuYm9yZGVyQ29sb3IscltcInN0cm9rZS13aWR0aFwiXT1lLmJvcmRlcldpZHRofWVsc2UgcmV0dXJuO2lmKHMoSikpci56SW5kZXg9SjtpZihtKWlmKG8pbS5hbmltYXRlKHtkOm99LG51bGwsbS5vbkdldFBhdGgpO2Vsc2V7aWYobS5oaWRlKCksbS5vbkdldFBhdGg9ZnVuY3Rpb24oKXttLnNob3coKX0sZylhLmxhYmVsPWc9Zy5kZXN0cm95KCl9ZWxzZSBpZihvJiZcbm8ubGVuZ3RoJiYoYS5zdmdFbGVtPW09dS5wYXRoKG8pLmF0dHIocikuYWRkKCksQykpZm9yKHAgaW4gZD1mdW5jdGlvbihiKXttLm9uKGIsZnVuY3Rpb24oYyl7Q1tiXS5hcHBseShhLFtjXSl9KX0sQylkKHApO2lmKGYmJnMoZi50ZXh0KSYmbyYmby5sZW5ndGgmJmIud2lkdGg+MCYmYi5oZWlnaHQ+MCl7Zj13KHthbGlnbjpjJiZrJiZcImNlbnRlclwiLHg6Yz8hayYmNDoxMCx2ZXJ0aWNhbEFsaWduOiFjJiZrJiZcIm1pZGRsZVwiLHk6Yz9rPzE2OjEwOms/NjotNCxyb3RhdGlvbjpjJiYhayYmOTB9LGYpO2lmKCFnKXtyPXthbGlnbjpmLnRleHRBbGlnbnx8Zi5hbGlnbixyb3RhdGlvbjpmLnJvdGF0aW9ufTtpZihzKEopKXIuekluZGV4PUo7YS5sYWJlbD1nPXUudGV4dChmLnRleHQsMCwwLGYudXNlSFRNTCkuYXR0cihyKS5jc3MoZi5zdHlsZSkuYWRkKCl9Yj1bb1sxXSxvWzRdLGs/b1s2XTpvWzFdXTtrPVtvWzJdLG9bNV0saz9vWzddOm9bMl1dO289T2EoYik7Yz1PYShrKTtnLmFsaWduKGYsXG4hMSx7eDpvLHk6Yyx3aWR0aDpDYShiKS1vLGhlaWdodDpDYShrKS1jfSk7Zy5zaG93KCl9ZWxzZSBnJiZnLmhpZGUoKTtyZXR1cm4gYX0sZGVzdHJveTpmdW5jdGlvbigpe2xhKHRoaXMuYXhpcy5wbG90TGluZXNBbmRCYW5kcyx0aGlzKTtkZWxldGUgdGhpcy5heGlzO1BhKHRoaXMpfX07bmEucHJvdG90eXBlPXtkZWZhdWx0T3B0aW9uczp7ZGF0ZVRpbWVMYWJlbEZvcm1hdHM6e21pbGxpc2Vjb25kOlwiJUg6JU06JVMuJUxcIixzZWNvbmQ6XCIlSDolTTolU1wiLG1pbnV0ZTpcIiVIOiVNXCIsaG91cjpcIiVIOiVNXCIsZGF5OlwiJWUuICViXCIsd2VlazpcIiVlLiAlYlwiLG1vbnRoOlwiJWIgJyV5XCIseWVhcjpcIiVZXCJ9LGVuZE9uVGljazohMSxncmlkTGluZUNvbG9yOlwiI0MwQzBDMFwiLGxhYmVsczpNLGxpbmVDb2xvcjpcIiNDMEQwRTBcIixsaW5lV2lkdGg6MSxtaW5QYWRkaW5nOjAuMDEsbWF4UGFkZGluZzowLjAxLG1pbm9yR3JpZExpbmVDb2xvcjpcIiNFMEUwRTBcIixtaW5vckdyaWRMaW5lV2lkdGg6MSxtaW5vclRpY2tDb2xvcjpcIiNBMEEwQTBcIixcbm1pbm9yVGlja0xlbmd0aDoyLG1pbm9yVGlja1Bvc2l0aW9uOlwib3V0c2lkZVwiLHN0YXJ0T2ZXZWVrOjEsc3RhcnRPblRpY2s6ITEsdGlja0NvbG9yOlwiI0MwRDBFMFwiLHRpY2tMZW5ndGg6MTAsdGlja21hcmtQbGFjZW1lbnQ6XCJiZXR3ZWVuXCIsdGlja1BpeGVsSW50ZXJ2YWw6MTAwLHRpY2tQb3NpdGlvbjpcIm91dHNpZGVcIix0aWNrV2lkdGg6MSx0aXRsZTp7YWxpZ246XCJtaWRkbGVcIixzdHlsZTp7Y29sb3I6XCIjNzA3MDcwXCJ9fSx0eXBlOlwibGluZWFyXCJ9LGRlZmF1bHRZQXhpc09wdGlvbnM6e2VuZE9uVGljazohMCxncmlkTGluZVdpZHRoOjEsdGlja1BpeGVsSW50ZXJ2YWw6NzIsc2hvd0xhc3RMYWJlbDohMCxsYWJlbHM6e3g6LTgseTozfSxsaW5lV2lkdGg6MCxtYXhQYWRkaW5nOjAuMDUsbWluUGFkZGluZzowLjA1LHN0YXJ0T25UaWNrOiEwLHRpY2tXaWR0aDowLHRpdGxlOntyb3RhdGlvbjoyNzAsdGV4dDpcIlZhbHVlc1wifSxzdGFja0xhYmVsczp7ZW5hYmxlZDohMSxmb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gQmEodGhpcy50b3RhbCxcbi0xKX0sc3R5bGU6TS5zdHlsZX19LGRlZmF1bHRMZWZ0QXhpc09wdGlvbnM6e2xhYmVsczp7eDotMTUseTpudWxsfSx0aXRsZTp7cm90YXRpb246MjcwfX0sZGVmYXVsdFJpZ2h0QXhpc09wdGlvbnM6e2xhYmVsczp7eDoxNSx5Om51bGx9LHRpdGxlOntyb3RhdGlvbjo5MH19LGRlZmF1bHRCb3R0b21BeGlzT3B0aW9uczp7bGFiZWxzOnt4OjAseTpudWxsfSx0aXRsZTp7cm90YXRpb246MH19LGRlZmF1bHRUb3BBeGlzT3B0aW9uczp7bGFiZWxzOnt4OjAseTotMTV9LHRpdGxlOntyb3RhdGlvbjowfX0saW5pdDpmdW5jdGlvbihhLGIpe3ZhciBjPWIuaXNYO3RoaXMuaG9yaXo9YS5pbnZlcnRlZD8hYzpjO3RoaXMuY29sbD0odGhpcy5pc1hBeGlzPWMpP1wieEF4aXNcIjpcInlBeGlzXCI7dGhpcy5vcHBvc2l0ZT1iLm9wcG9zaXRlO3RoaXMuc2lkZT1iLnNpZGV8fCh0aGlzLmhvcml6P3RoaXMub3Bwb3NpdGU/MDoyOnRoaXMub3Bwb3NpdGU/MTozKTt0aGlzLnNldE9wdGlvbnMoYik7dmFyIGQ9XG50aGlzLm9wdGlvbnMsZT1kLnR5cGU7dGhpcy5sYWJlbEZvcm1hdHRlcj1kLmxhYmVscy5mb3JtYXR0ZXJ8fHRoaXMuZGVmYXVsdExhYmVsRm9ybWF0dGVyO3RoaXMudXNlck9wdGlvbnM9Yjt0aGlzLm1pblBpeGVsUGFkZGluZz0wO3RoaXMuY2hhcnQ9YTt0aGlzLnJldmVyc2VkPWQucmV2ZXJzZWQ7dGhpcy56b29tRW5hYmxlZD1kLnpvb21FbmFibGVkIT09ITE7dGhpcy5jYXRlZ29yaWVzPWQuY2F0ZWdvcmllc3x8ZT09PVwiY2F0ZWdvcnlcIjt0aGlzLm5hbWVzPVtdO3RoaXMuaXNMb2c9ZT09PVwibG9nYXJpdGhtaWNcIjt0aGlzLmlzRGF0ZXRpbWVBeGlzPWU9PT1cImRhdGV0aW1lXCI7dGhpcy5pc0xpbmtlZD1zKGQubGlua2VkVG8pO3RoaXMudGlja21hcmtPZmZzZXQ9dGhpcy5jYXRlZ29yaWVzJiZkLnRpY2ttYXJrUGxhY2VtZW50PT09XCJiZXR3ZWVuXCImJnAoZC50aWNrSW50ZXJ2YWwsMSk9PT0xPzAuNTowO3RoaXMudGlja3M9e307dGhpcy5sYWJlbEVkZ2U9W107dGhpcy5taW5vclRpY2tzPVxue307dGhpcy5wbG90TGluZXNBbmRCYW5kcz1bXTt0aGlzLmFsdGVybmF0ZUJhbmRzPXt9O3RoaXMubGVuPTA7dGhpcy5taW5SYW5nZT10aGlzLnVzZXJNaW5SYW5nZT1kLm1pblJhbmdlfHxkLm1heFpvb207dGhpcy5yYW5nZT1kLnJhbmdlO3RoaXMub2Zmc2V0PWQub2Zmc2V0fHwwO3RoaXMuc3RhY2tzPXt9O3RoaXMub2xkU3RhY2tzPXt9O3RoaXMubWluPXRoaXMubWF4PW51bGw7dGhpcy5jcm9zc2hhaXI9cChkLmNyb3NzaGFpcixyYShhLm9wdGlvbnMudG9vbHRpcC5jcm9zc2hhaXJzKVtjPzA6MV0sITEpO3ZhciBmLGQ9dGhpcy5vcHRpb25zLmV2ZW50cztNYSh0aGlzLGEuYXhlcyk9PT0tMSYmKGMmJiF0aGlzLmlzQ29sb3JBeGlzP2EuYXhlcy5zcGxpY2UoYS54QXhpcy5sZW5ndGgsMCx0aGlzKTphLmF4ZXMucHVzaCh0aGlzKSxhW3RoaXMuY29sbF0ucHVzaCh0aGlzKSk7dGhpcy5zZXJpZXM9dGhpcy5zZXJpZXN8fFtdO2lmKGEuaW52ZXJ0ZWQmJmMmJnRoaXMucmV2ZXJzZWQ9PT1cbnUpdGhpcy5yZXZlcnNlZD0hMDt0aGlzLnJlbW92ZVBsb3RMaW5lPXRoaXMucmVtb3ZlUGxvdEJhbmQ9dGhpcy5yZW1vdmVQbG90QmFuZE9yTGluZTtmb3IoZiBpbiBkKU4odGhpcyxmLGRbZl0pO2lmKHRoaXMuaXNMb2cpdGhpcy52YWwybGluPXphLHRoaXMubGluMnZhbD1rYX0sc2V0T3B0aW9uczpmdW5jdGlvbihhKXt0aGlzLm9wdGlvbnM9dyh0aGlzLmRlZmF1bHRPcHRpb25zLHRoaXMuaXNYQXhpcz97fTp0aGlzLmRlZmF1bHRZQXhpc09wdGlvbnMsW3RoaXMuZGVmYXVsdFRvcEF4aXNPcHRpb25zLHRoaXMuZGVmYXVsdFJpZ2h0QXhpc09wdGlvbnMsdGhpcy5kZWZhdWx0Qm90dG9tQXhpc09wdGlvbnMsdGhpcy5kZWZhdWx0TGVmdEF4aXNPcHRpb25zXVt0aGlzLnNpZGVdLHcoRVt0aGlzLmNvbGxdLGEpKX0sZGVmYXVsdExhYmVsRm9ybWF0dGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5heGlzLGI9dGhpcy52YWx1ZSxjPWEuY2F0ZWdvcmllcyxkPXRoaXMuZGF0ZVRpbWVMYWJlbEZvcm1hdCxcbmU9RS5sYW5nLm51bWVyaWNTeW1ib2xzLGY9ZSYmZS5sZW5ndGgsZyxoPWEub3B0aW9ucy5sYWJlbHMuZm9ybWF0LGE9YS5pc0xvZz9iOmEudGlja0ludGVydmFsO2lmKGgpZz1KYShoLHRoaXMpO2Vsc2UgaWYoYylnPWI7ZWxzZSBpZihkKWc9Y2IoZCxiKTtlbHNlIGlmKGYmJmE+PTFFMylmb3IoO2YtLSYmZz09PXU7KWM9TWF0aC5wb3coMUUzLGYrMSksYT49YyYmZVtmXSE9PW51bGwmJihnPUJhKGIvYywtMSkrZVtmXSk7Zz09PXUmJihnPVEoYik+PTFFND9CYShiLDApOkJhKGIsLTEsdSxcIlwiKSk7cmV0dXJuIGd9LGdldFNlcmllc0V4dHJlbWVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2hhcnQ7YS5oYXNWaXNpYmxlU2VyaWVzPSExO2EuZGF0YU1pbj1hLmRhdGFNYXg9YS5pZ25vcmVNaW5QYWRkaW5nPWEuaWdub3JlTWF4UGFkZGluZz1udWxsO2EuYnVpbGRTdGFja3MmJmEuYnVpbGRTdGFja3MoKTtxKGEuc2VyaWVzLGZ1bmN0aW9uKGMpe2lmKGMudmlzaWJsZXx8IWIub3B0aW9ucy5jaGFydC5pZ25vcmVIaWRkZW5TZXJpZXMpe3ZhciBkO1xuZD1jLm9wdGlvbnMudGhyZXNob2xkO3ZhciBlO2EuaGFzVmlzaWJsZVNlcmllcz0hMDthLmlzTG9nJiZkPD0wJiYoZD1udWxsKTtpZihhLmlzWEF4aXMpe2lmKGQ9Yy54RGF0YSxkLmxlbmd0aClhLmRhdGFNaW49TChwKGEuZGF0YU1pbixkWzBdKSxPYShkKSksYS5kYXRhTWF4PXQocChhLmRhdGFNYXgsZFswXSksQ2EoZCkpfWVsc2V7Yy5nZXRFeHRyZW1lcygpO2U9Yy5kYXRhTWF4O2M9Yy5kYXRhTWluO2lmKHMoYykmJnMoZSkpYS5kYXRhTWluPUwocChhLmRhdGFNaW4sYyksYyksYS5kYXRhTWF4PXQocChhLmRhdGFNYXgsZSksZSk7aWYocyhkKSlpZihhLmRhdGFNaW4+PWQpYS5kYXRhTWluPWQsYS5pZ25vcmVNaW5QYWRkaW5nPSEwO2Vsc2UgaWYoYS5kYXRhTWF4PGQpYS5kYXRhTWF4PWQsYS5pZ25vcmVNYXhQYWRkaW5nPSEwfX19KX0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0xLGg9MCxpPWQ/dGhpcy5vbGRUcmFuc0E6dGhpcy50cmFuc0EsZD1kP3RoaXMub2xkTWluOlxudGhpcy5taW4saj10aGlzLm1pblBpeGVsUGFkZGluZyxlPSh0aGlzLm9wdGlvbnMub3JkaW5hbHx8dGhpcy5pc0xvZyYmZSkmJnRoaXMubGluMnZhbDtpZighaSlpPXRoaXMudHJhbnNBO2lmKGMpZyo9LTEsaD10aGlzLmxlbjt0aGlzLnJldmVyc2VkJiYoZyo9LTEsaC09ZyoodGhpcy5zZWN0b3J8fHRoaXMubGVuKSk7Yj8oYT1hKmcraCxhLT1qLGE9YS9pK2QsZSYmKGE9dGhpcy5saW4ydmFsKGEpKSk6KGUmJihhPXRoaXMudmFsMmxpbihhKSksZj09PVwiYmV0d2VlblwiJiYoZj0wLjUpLGE9ZyooYS1kKSppK2grZypqKyhqYShmKT9pKmYqdGhpcy5wb2ludFJhbmdlOjApKTtyZXR1cm4gYX0sdG9QaXhlbHM6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy50cmFuc2xhdGUoYSwhMSwhdGhpcy5ob3JpeixudWxsLCEwKSsoYj8wOnRoaXMucG9zKX0sdG9WYWx1ZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZShhLShiPzA6dGhpcy5wb3MpLCEwLCF0aGlzLmhvcml6LG51bGwsXG4hMCl9LGdldFBsb3RMaW5lUGF0aDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXRoaXMuY2hhcnQsZz10aGlzLmxlZnQsaD10aGlzLnRvcCxpLGosaz1jJiZmLm9sZENoYXJ0SGVpZ2h0fHxmLmNoYXJ0SGVpZ2h0LGw9YyYmZi5vbGRDaGFydFdpZHRofHxmLmNoYXJ0V2lkdGgsbjtpPXRoaXMudHJhbnNCO2U9cChlLHRoaXMudHJhbnNsYXRlKGEsbnVsbCxudWxsLGMpKTthPWM9dihlK2kpO2k9aj12KGstZS1pKTtpZihpc05hTihlKSluPSEwO2Vsc2UgaWYodGhpcy5ob3Jpeil7aWYoaT1oLGo9ay10aGlzLmJvdHRvbSxhPGd8fGE+Zyt0aGlzLndpZHRoKW49ITB9ZWxzZSBpZihhPWcsYz1sLXRoaXMucmlnaHQsaTxofHxpPmgrdGhpcy5oZWlnaHQpbj0hMDtyZXR1cm4gbiYmIWQ/bnVsbDpmLnJlbmRlcmVyLmNyaXNwTGluZShbXCJNXCIsYSxpLFwiTFwiLGMsal0sYnx8MSl9LGdldExpbmVhclRpY2tQb3NpdGlvbnM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9ZWEoVShiL2EpKmEpLGY9ZWEoTGEoYy9cbmEpKmEpLGc9W107aWYoYj09PWMmJmphKGIpKXJldHVybltiXTtmb3IoYj1lO2I8PWY7KXtnLnB1c2goYik7Yj1lYShiK2EpO2lmKGI9PT1kKWJyZWFrO2Q9Yn1yZXR1cm4gZ30sZ2V0TWlub3JUaWNrUG9zaXRpb25zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLGI9dGhpcy50aWNrUG9zaXRpb25zLGM9dGhpcy5taW5vclRpY2tJbnRlcnZhbCxkPVtdLGU7aWYodGhpcy5pc0xvZyl7ZT1iLmxlbmd0aDtmb3IoYT0xO2E8ZTthKyspZD1kLmNvbmNhdCh0aGlzLmdldExvZ1RpY2tQb3NpdGlvbnMoYyxiW2EtMV0sYlthXSwhMCkpfWVsc2UgaWYodGhpcy5pc0RhdGV0aW1lQXhpcyYmYS5taW5vclRpY2tJbnRlcnZhbD09PVwiYXV0b1wiKWQ9ZC5jb25jYXQodGhpcy5nZXRUaW1lVGlja3ModGhpcy5ub3JtYWxpemVUaW1lVGlja0ludGVydmFsKGMpLHRoaXMubWluLHRoaXMubWF4LGEuc3RhcnRPZldlZWspKSxkWzBdPHRoaXMubWluJiZkLnNoaWZ0KCk7ZWxzZSBmb3IoYj10aGlzLm1pbitcbihiWzBdLXRoaXMubWluKSVjO2I8PXRoaXMubWF4O2IrPWMpZC5wdXNoKGIpO3JldHVybiBkfSxhZGp1c3RGb3JNaW5SYW5nZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucyxiPXRoaXMubWluLGM9dGhpcy5tYXgsZCxlPXRoaXMuZGF0YU1heC10aGlzLmRhdGFNaW4+PXRoaXMubWluUmFuZ2UsZixnLGgsaSxqO2lmKHRoaXMuaXNYQXhpcyYmdGhpcy5taW5SYW5nZT09PXUmJiF0aGlzLmlzTG9nKXMoYS5taW4pfHxzKGEubWF4KT90aGlzLm1pblJhbmdlPW51bGw6KHEodGhpcy5zZXJpZXMsZnVuY3Rpb24oYSl7aT1hLnhEYXRhO2ZvcihnPWo9YS54SW5jcmVtZW50PzE6aS5sZW5ndGgtMTtnPjA7Zy0tKWlmKGg9aVtnXS1pW2ctMV0sZj09PXV8fGg8ZilmPWh9KSx0aGlzLm1pblJhbmdlPUwoZio1LHRoaXMuZGF0YU1heC10aGlzLmRhdGFNaW4pKTtpZihjLWI8dGhpcy5taW5SYW5nZSl7dmFyIGs9dGhpcy5taW5SYW5nZTtkPShrLWMrYikvMjtkPVtiLWQscChhLm1pbixiLWQpXTtcbmlmKGUpZFsyXT10aGlzLmRhdGFNaW47Yj1DYShkKTtjPVtiK2sscChhLm1heCxiK2spXTtpZihlKWNbMl09dGhpcy5kYXRhTWF4O2M9T2EoYyk7Yy1iPGsmJihkWzBdPWMtayxkWzFdPXAoYS5taW4sYy1rKSxiPUNhKGQpKX10aGlzLm1pbj1iO3RoaXMubWF4PWN9LHNldEF4aXNUcmFuc2xhdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5tYXgtYi5taW4sZD1iLmF4aXNQb2ludFJhbmdlfHwwLGUsZj0wLGc9MCxoPWIubGlua2VkUGFyZW50LGk9ISFiLmNhdGVnb3JpZXMsaj1iLnRyYW5zQTtpZihiLmlzWEF4aXN8fGl8fGQpaD8oZj1oLm1pblBvaW50T2Zmc2V0LGc9aC5wb2ludFJhbmdlUGFkZGluZyk6cShiLnNlcmllcyxmdW5jdGlvbihhKXt2YXIgaD1pPzE6Yi5pc1hBeGlzP2EucG9pbnRSYW5nZTpiLmF4aXNQb2ludFJhbmdlfHwwLGo9YS5vcHRpb25zLnBvaW50UGxhY2VtZW50LG09YS5jbG9zZXN0UG9pbnRSYW5nZTtoPmMmJihoPTApO2Q9dChkLGgpO2Y9dChmLEdhKGopP1xuMDpoLzIpO2c9dChnLGo9PT1cIm9uXCI/MDpoKTshYS5ub1NoYXJlZFRvb2x0aXAmJnMobSkmJihlPXMoZSk/TChlLG0pOm0pfSksaD1iLm9yZGluYWxTbG9wZSYmZT9iLm9yZGluYWxTbG9wZS9lOjEsYi5taW5Qb2ludE9mZnNldD1mKj1oLGIucG9pbnRSYW5nZVBhZGRpbmc9Zyo9aCxiLnBvaW50UmFuZ2U9TChkLGMpLGIuY2xvc2VzdFBvaW50UmFuZ2U9ZTtpZihhKWIub2xkVHJhbnNBPWo7Yi50cmFuc2xhdGlvblNsb3BlPWIudHJhbnNBPWo9Yi5sZW4vKGMrZ3x8MSk7Yi50cmFuc0I9Yi5ob3Jpej9iLmxlZnQ6Yi5ib3R0b207Yi5taW5QaXhlbFBhZGRpbmc9aipmfSxzZXRUaWNrUG9zaXRpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNoYXJ0LGQ9Yi5vcHRpb25zLGU9ZC5zdGFydE9uVGljayxmPWQuZW5kT25UaWNrLGc9Yi5pc0xvZyxoPWIuaXNEYXRldGltZUF4aXMsaT1iLmlzWEF4aXMsaj1iLmlzTGlua2VkLGs9Yi5vcHRpb25zLnRpY2tQb3NpdGlvbmVyLGw9ZC5tYXhQYWRkaW5nLFxubj1kLm1pblBhZGRpbmcsbT1kLnRpY2tJbnRlcnZhbCxvPWQubWluVGlja0ludGVydmFsLFk9ZC50aWNrUGl4ZWxJbnRlcnZhbCxELEo9Yi5jYXRlZ29yaWVzO2o/KGIubGlua2VkUGFyZW50PWNbYi5jb2xsXVtkLmxpbmtlZFRvXSxjPWIubGlua2VkUGFyZW50LmdldEV4dHJlbWVzKCksYi5taW49cChjLm1pbixjLmRhdGFNaW4pLGIubWF4PXAoYy5tYXgsYy5kYXRhTWF4KSxkLnR5cGUhPT1iLmxpbmtlZFBhcmVudC5vcHRpb25zLnR5cGUmJmhhKDExLDEpKTooYi5taW49cChiLnVzZXJNaW4sZC5taW4sYi5kYXRhTWluKSxiLm1heD1wKGIudXNlck1heCxkLm1heCxiLmRhdGFNYXgpKTtpZihnKSFhJiZMKGIubWluLHAoYi5kYXRhTWluLGIubWluKSk8PTAmJmhhKDEwLDEpLGIubWluPWVhKHphKGIubWluKSksYi5tYXg9ZWEoemEoYi5tYXgpKTtpZihiLnJhbmdlJiZzKGIubWF4KSliLnVzZXJNaW49Yi5taW49dChiLm1pbixiLm1heC1iLnJhbmdlKSxiLnVzZXJNYXg9Yi5tYXgsYi5yYW5nZT1cbm51bGw7Yi5iZWZvcmVQYWRkaW5nJiZiLmJlZm9yZVBhZGRpbmcoKTtiLmFkanVzdEZvck1pblJhbmdlKCk7aWYoIUomJiFiLmF4aXNQb2ludFJhbmdlJiYhYi51c2VQZXJjZW50YWdlJiYhaiYmcyhiLm1pbikmJnMoYi5tYXgpJiYoYz1iLm1heC1iLm1pbikpe2lmKCFzKGQubWluKSYmIXMoYi51c2VyTWluKSYmbiYmKGIuZGF0YU1pbjwwfHwhYi5pZ25vcmVNaW5QYWRkaW5nKSliLm1pbi09YypuO2lmKCFzKGQubWF4KSYmIXMoYi51c2VyTWF4KSYmbCYmKGIuZGF0YU1heD4wfHwhYi5pZ25vcmVNYXhQYWRkaW5nKSliLm1heCs9YypsfWlmKGphKGQuZmxvb3IpKWIubWluPXQoYi5taW4sZC5mbG9vcik7aWYoamEoZC5jZWlsaW5nKSliLm1heD1MKGIubWF4LGQuY2VpbGluZyk7Yi5taW49PT1iLm1heHx8Yi5taW49PT12b2lkIDB8fGIubWF4PT09dm9pZCAwP2IudGlja0ludGVydmFsPTE6aiYmIW0mJlk9PT1iLmxpbmtlZFBhcmVudC5vcHRpb25zLnRpY2tQaXhlbEludGVydmFsP2IudGlja0ludGVydmFsPVxuYi5saW5rZWRQYXJlbnQudGlja0ludGVydmFsOihiLnRpY2tJbnRlcnZhbD1wKG0sSj8xOihiLm1heC1iLm1pbikqWS90KGIubGVuLFkpKSwhcyhtKSYmYi5sZW48WSYmIXRoaXMuaXNSYWRpYWwmJiF0aGlzLmlzTG9nJiYhSiYmZSYmZiYmKEQ9ITAsYi50aWNrSW50ZXJ2YWwvPTQpKTtpJiYhYSYmcShiLnNlcmllcyxmdW5jdGlvbihhKXthLnByb2Nlc3NEYXRhKGIubWluIT09Yi5vbGRNaW58fGIubWF4IT09Yi5vbGRNYXgpfSk7Yi5zZXRBeGlzVHJhbnNsYXRpb24oITApO2IuYmVmb3JlU2V0VGlja1Bvc2l0aW9ucyYmYi5iZWZvcmVTZXRUaWNrUG9zaXRpb25zKCk7aWYoYi5wb3N0UHJvY2Vzc1RpY2tJbnRlcnZhbCliLnRpY2tJbnRlcnZhbD1iLnBvc3RQcm9jZXNzVGlja0ludGVydmFsKGIudGlja0ludGVydmFsKTtpZihiLnBvaW50UmFuZ2UpYi50aWNrSW50ZXJ2YWw9dChiLnBvaW50UmFuZ2UsYi50aWNrSW50ZXJ2YWwpO2lmKCFtJiZiLnRpY2tJbnRlcnZhbDxvKWIudGlja0ludGVydmFsPVxubztpZighaCYmIWcmJiFtKWIudGlja0ludGVydmFsPW5iKGIudGlja0ludGVydmFsLG51bGwsbWIoYi50aWNrSW50ZXJ2YWwpLHAoZC5hbGxvd0RlY2ltYWxzLCEoYi50aWNrSW50ZXJ2YWw+MSYmYi50aWNrSW50ZXJ2YWw8NSYmYi5tYXg+MUUzJiZiLm1heDw5OTk5KSkpO2IubWlub3JUaWNrSW50ZXJ2YWw9ZC5taW5vclRpY2tJbnRlcnZhbD09PVwiYXV0b1wiJiZiLnRpY2tJbnRlcnZhbD9iLnRpY2tJbnRlcnZhbC81OmQubWlub3JUaWNrSW50ZXJ2YWw7Yi50aWNrUG9zaXRpb25zPWE9ZC50aWNrUG9zaXRpb25zP1tdLmNvbmNhdChkLnRpY2tQb3NpdGlvbnMpOmsmJmsuYXBwbHkoYixbYi5taW4sYi5tYXhdKTtpZighYSkhYi5vcmRpbmFsUG9zaXRpb25zJiYoYi5tYXgtYi5taW4pL2IudGlja0ludGVydmFsPnQoMipiLmxlbiwyMDApJiZoYSgxOSwhMCksYT1oP2IuZ2V0VGltZVRpY2tzKGIubm9ybWFsaXplVGltZVRpY2tJbnRlcnZhbChiLnRpY2tJbnRlcnZhbCxkLnVuaXRzKSxiLm1pbixcbmIubWF4LGQuc3RhcnRPZldlZWssYi5vcmRpbmFsUG9zaXRpb25zLGIuY2xvc2VzdFBvaW50UmFuZ2UsITApOmc/Yi5nZXRMb2dUaWNrUG9zaXRpb25zKGIudGlja0ludGVydmFsLGIubWluLGIubWF4KTpiLmdldExpbmVhclRpY2tQb3NpdGlvbnMoYi50aWNrSW50ZXJ2YWwsYi5taW4sYi5tYXgpLEQmJmEuc3BsaWNlKDEsYS5sZW5ndGgtMiksYi50aWNrUG9zaXRpb25zPWE7aWYoIWopZD1hWzBdLGc9YVthLmxlbmd0aC0xXSxoPWIubWluUG9pbnRPZmZzZXR8fDAsZT9iLm1pbj1kOmIubWluLWg+ZCYmYS5zaGlmdCgpLGY/Yi5tYXg9ZzpiLm1heCtoPGcmJmEucG9wKCksYS5sZW5ndGg9PT0wJiZzKGQpJiZhLnB1c2goKGcrZCkvMiksYS5sZW5ndGg9PT0xJiYoZT1RKGIubWF4KT4xRTEzPzE6MC4wMDEsYi5taW4tPWUsYi5tYXgrPWUpfSxzZXRNYXhUaWNrczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2hhcnQsYj1hLm1heFRpY2tzfHx7fSxjPXRoaXMudGlja1Bvc2l0aW9ucyxkPXRoaXMuX21heFRpY2tzS2V5PVxuW3RoaXMuY29sbCx0aGlzLnBvcyx0aGlzLmxlbl0uam9pbihcIi1cIik7aWYoIXRoaXMuaXNMaW5rZWQmJiF0aGlzLmlzRGF0ZXRpbWVBeGlzJiZjJiZjLmxlbmd0aD4oYltkXXx8MCkmJnRoaXMub3B0aW9ucy5hbGlnblRpY2tzIT09ITEpYltkXT1jLmxlbmd0aDthLm1heFRpY2tzPWJ9LGFkanVzdFRpY2tBbW91bnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLl9tYXhUaWNrc0tleSxiPXRoaXMudGlja1Bvc2l0aW9ucyxjPXRoaXMuY2hhcnQubWF4VGlja3M7aWYoYyYmY1thXSYmIXRoaXMuaXNEYXRldGltZUF4aXMmJiF0aGlzLmNhdGVnb3JpZXMmJiF0aGlzLmlzTGlua2VkJiZ0aGlzLm9wdGlvbnMuYWxpZ25UaWNrcyE9PSExJiZ0aGlzLm1pbiE9PXUpe3ZhciBkPXRoaXMudGlja0Ftb3VudCxlPWIubGVuZ3RoO3RoaXMudGlja0Ftb3VudD1hPWNbYV07aWYoZTxhKXtmb3IoO2IubGVuZ3RoPGE7KWIucHVzaChlYShiW2IubGVuZ3RoLTFdK3RoaXMudGlja0ludGVydmFsKSk7dGhpcy50cmFuc0EqPVxuKGUtMSkvKGEtMSk7dGhpcy5tYXg9YltiLmxlbmd0aC0xXX1pZihzKGQpJiZhIT09ZCl0aGlzLmlzRGlydHk9ITB9fSxzZXRTY2FsZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhY2tzLGIsYyxkLGU7dGhpcy5vbGRNaW49dGhpcy5taW47dGhpcy5vbGRNYXg9dGhpcy5tYXg7dGhpcy5vbGRBeGlzTGVuZ3RoPXRoaXMubGVuO3RoaXMuc2V0QXhpc1NpemUoKTtlPXRoaXMubGVuIT09dGhpcy5vbGRBeGlzTGVuZ3RoO3EodGhpcy5zZXJpZXMsZnVuY3Rpb24oYSl7aWYoYS5pc0RpcnR5RGF0YXx8YS5pc0RpcnR5fHxhLnhBeGlzLmlzRGlydHkpZD0hMH0pO2lmKGV8fGR8fHRoaXMuaXNMaW5rZWR8fHRoaXMuZm9yY2VSZWRyYXd8fHRoaXMudXNlck1pbiE9PXRoaXMub2xkVXNlck1pbnx8dGhpcy51c2VyTWF4IT09dGhpcy5vbGRVc2VyTWF4KXtpZighdGhpcy5pc1hBeGlzKWZvcihiIGluIGEpZm9yKGMgaW4gYVtiXSlhW2JdW2NdLnRvdGFsPW51bGwsYVtiXVtjXS5jdW09MDt0aGlzLmZvcmNlUmVkcmF3PVxuITE7dGhpcy5nZXRTZXJpZXNFeHRyZW1lcygpO3RoaXMuc2V0VGlja1Bvc2l0aW9ucygpO3RoaXMub2xkVXNlck1pbj10aGlzLnVzZXJNaW47dGhpcy5vbGRVc2VyTWF4PXRoaXMudXNlck1heDtpZighdGhpcy5pc0RpcnR5KXRoaXMuaXNEaXJ0eT1lfHx0aGlzLm1pbiE9PXRoaXMub2xkTWlufHx0aGlzLm1heCE9PXRoaXMub2xkTWF4fWVsc2UgaWYoIXRoaXMuaXNYQXhpcyl7aWYodGhpcy5vbGRTdGFja3MpYT10aGlzLnN0YWNrcz10aGlzLm9sZFN0YWNrcztmb3IoYiBpbiBhKWZvcihjIGluIGFbYl0pYVtiXVtjXS5jdW09YVtiXVtjXS50b3RhbH10aGlzLnNldE1heFRpY2tzKCl9LHNldEV4dHJlbWVzOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9dGhpcyxnPWYuY2hhcnQsYz1wKGMsITApLGU9cihlLHttaW46YSxtYXg6Yn0pO0koZixcInNldEV4dHJlbWVzXCIsZSxmdW5jdGlvbigpe2YudXNlck1pbj1hO2YudXNlck1heD1iO2YuZXZlbnRBcmdzPWU7Zi5pc0RpcnR5RXh0cmVtZXM9XG4hMDtjJiZnLnJlZHJhdyhkKX0pfSx6b29tOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5kYXRhTWluLGQ9dGhpcy5kYXRhTWF4LGU9dGhpcy5vcHRpb25zO3RoaXMuYWxsb3dab29tT3V0c2lkZXx8KHMoYykmJmE8PUwoYyxwKGUubWluLGMpKSYmKGE9dSkscyhkKSYmYj49dChkLHAoZS5tYXgsZCkpJiYoYj11KSk7dGhpcy5kaXNwbGF5QnRuPWEhPT11fHxiIT09dTt0aGlzLnNldEV4dHJlbWVzKGEsYiwhMSx1LHt0cmlnZ2VyOlwiem9vbVwifSk7cmV0dXJuITB9LHNldEF4aXNTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGFydCxiPXRoaXMub3B0aW9ucyxjPWIub2Zmc2V0TGVmdHx8MCxkPXRoaXMuaG9yaXosZT1wKGIud2lkdGgsYS5wbG90V2lkdGgtYysoYi5vZmZzZXRSaWdodHx8MCkpLGY9cChiLmhlaWdodCxhLnBsb3RIZWlnaHQpLGc9cChiLnRvcCxhLnBsb3RUb3ApLGI9cChiLmxlZnQsYS5wbG90TGVmdCtjKSxjPS8lJC87Yy50ZXN0KGYpJiYoZj1wYXJzZUludChmLDEwKS9cbjEwMCphLnBsb3RIZWlnaHQpO2MudGVzdChnKSYmKGc9cGFyc2VJbnQoZywxMCkvMTAwKmEucGxvdEhlaWdodCthLnBsb3RUb3ApO3RoaXMubGVmdD1iO3RoaXMudG9wPWc7dGhpcy53aWR0aD1lO3RoaXMuaGVpZ2h0PWY7dGhpcy5ib3R0b209YS5jaGFydEhlaWdodC1mLWc7dGhpcy5yaWdodD1hLmNoYXJ0V2lkdGgtZS1iO3RoaXMubGVuPXQoZD9lOmYsMCk7dGhpcy5wb3M9ZD9iOmd9LGdldEV4dHJlbWVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pc0xvZztyZXR1cm57bWluOmE/ZWEoa2EodGhpcy5taW4pKTp0aGlzLm1pbixtYXg6YT9lYShrYSh0aGlzLm1heCkpOnRoaXMubWF4LGRhdGFNaW46dGhpcy5kYXRhTWluLGRhdGFNYXg6dGhpcy5kYXRhTWF4LHVzZXJNaW46dGhpcy51c2VyTWluLHVzZXJNYXg6dGhpcy51c2VyTWF4fX0sZ2V0VGhyZXNob2xkOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaXNMb2csYz1iP2thKHRoaXMubWluKTp0aGlzLm1pbixiPWI/a2EodGhpcy5tYXgpOlxudGhpcy5tYXg7Yz5hfHxhPT09bnVsbD9hPWM6YjxhJiYoYT1iKTtyZXR1cm4gdGhpcy50cmFuc2xhdGUoYSwwLDEsMCwxKX0sYXV0b0xhYmVsQWxpZ246ZnVuY3Rpb24oYSl7YT0ocChhLDApLXRoaXMuc2lkZSo5MCs3MjApJTM2MDtyZXR1cm4gYT4xNSYmYTwxNjU/XCJyaWdodFwiOmE+MTk1JiZhPDM0NT9cImxlZnRcIjpcImNlbnRlclwifSxnZXRPZmZzZXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydCxjPWIucmVuZGVyZXIsZD1hLm9wdGlvbnMsZT1hLnRpY2tQb3NpdGlvbnMsZj1hLnRpY2tzLGc9YS5ob3JpeixoPWEuc2lkZSxpPWIuaW52ZXJ0ZWQ/WzEsMCwzLDJdW2hdOmgsaixrLGw9MCxuLG09MCxvPWQudGl0bGUsWT1kLmxhYmVscyxEPTAsSj1iLmF4aXNPZmZzZXQsYj1iLmNsaXBPZmZzZXQsQz1bLTEsMSwxLC0xXVtoXSxyLHY9MSx3PXAoWS5tYXhTdGFnZ2VyTGluZXMsNSkseCx5LEEseixSO2EuaGFzRGF0YT1qPWEuaGFzVmlzaWJsZVNlcmllc3x8cyhhLm1pbikmJnMoYS5tYXgpJiZcbiEhZTthLnNob3dBeGlzPWs9anx8cChkLnNob3dFbXB0eSwhMCk7YS5zdGFnZ2VyTGluZXM9YS5ob3JpeiYmWS5zdGFnZ2VyTGluZXM7aWYoIWEuYXhpc0dyb3VwKWEuZ3JpZEdyb3VwPWMuZyhcImdyaWRcIikuYXR0cih7ekluZGV4OmQuZ3JpZFpJbmRleHx8MX0pLmFkZCgpLGEuYXhpc0dyb3VwPWMuZyhcImF4aXNcIikuYXR0cih7ekluZGV4OmQuekluZGV4fHwyfSkuYWRkKCksYS5sYWJlbEdyb3VwPWMuZyhcImF4aXMtbGFiZWxzXCIpLmF0dHIoe3pJbmRleDpZLnpJbmRleHx8N30pLmFkZENsYXNzKFwiaGlnaGNoYXJ0cy1cIithLmNvbGwudG9Mb3dlckNhc2UoKStcIi1sYWJlbHNcIikuYWRkKCk7aWYoanx8YS5pc0xpbmtlZCl7YS5sYWJlbEFsaWduPXAoWS5hbGlnbnx8YS5hdXRvTGFiZWxBbGlnbihZLnJvdGF0aW9uKSk7cShlLGZ1bmN0aW9uKGIpe2ZbYl0/ZltiXS5hZGRMYWJlbCgpOmZbYl09bmV3IFRhKGEsYil9KTtpZihhLmhvcml6JiYhYS5zdGFnZ2VyTGluZXMmJncmJiFZLnJvdGF0aW9uKXtmb3Ioaj1cbmEucmV2ZXJzZWQ/W10uY29uY2F0KGUpLnJldmVyc2UoKTplO3Y8dzspe3g9W107eT0hMTtmb3Iocj0wO3I8ai5sZW5ndGg7cisrKUE9altyXSx6PSh6PWZbQV0ubGFiZWwmJmZbQV0ubGFiZWwuZ2V0QkJveCgpKT96LndpZHRoOjAsUj1yJXYseiYmKEE9YS50cmFuc2xhdGUoQSkseFtSXSE9PXUmJkE8eFtSXSYmKHk9ITApLHhbUl09QSt6KTtpZih5KXYrKztlbHNlIGJyZWFrfWlmKHY+MSlhLnN0YWdnZXJMaW5lcz12fXEoZSxmdW5jdGlvbihiKXtpZihoPT09MHx8aD09PTJ8fHsxOlwibGVmdFwiLDM6XCJyaWdodFwifVtoXT09PWEubGFiZWxBbGlnbilEPXQoZltiXS5nZXRMYWJlbFNpemUoKSxEKX0pO2lmKGEuc3RhZ2dlckxpbmVzKUQqPWEuc3RhZ2dlckxpbmVzLGEubGFiZWxPZmZzZXQ9RH1lbHNlIGZvcihyIGluIGYpZltyXS5kZXN0cm95KCksZGVsZXRlIGZbcl07aWYobyYmby50ZXh0JiZvLmVuYWJsZWQhPT0hMSl7aWYoIWEuYXhpc1RpdGxlKWEuYXhpc1RpdGxlPWMudGV4dChvLnRleHQsXG4wLDAsby51c2VIVE1MKS5hdHRyKHt6SW5kZXg6Nyxyb3RhdGlvbjpvLnJvdGF0aW9ufHwwLGFsaWduOm8udGV4dEFsaWdufHx7bG93OlwibGVmdFwiLG1pZGRsZTpcImNlbnRlclwiLGhpZ2g6XCJyaWdodFwifVtvLmFsaWduXX0pLmFkZENsYXNzKFwiaGlnaGNoYXJ0cy1cIit0aGlzLmNvbGwudG9Mb3dlckNhc2UoKStcIi10aXRsZVwiKS5jc3Moby5zdHlsZSkuYWRkKGEuYXhpc0dyb3VwKSxhLmF4aXNUaXRsZS5pc05ldz0hMDtpZihrKWw9YS5heGlzVGl0bGUuZ2V0QkJveCgpW2c/XCJoZWlnaHRcIjpcIndpZHRoXCJdLG49by5vZmZzZXQsbT1zKG4pPzA6cChvLm1hcmdpbixnPzU6MTApO2EuYXhpc1RpdGxlW2s/XCJzaG93XCI6XCJoaWRlXCJdKCl9YS5vZmZzZXQ9QypwKGQub2Zmc2V0LEpbaF0pO2M9aD09PTI/YS50aWNrQmFzZWxpbmU6MDtnPUQrbSsoRCYmQyooZz9wKFkueSxhLnRpY2tCYXNlbGluZSs4KTpZLngpLWMpO2EuYXhpc1RpdGxlTWFyZ2luPXAobixnKTtKW2hdPXQoSltoXSxhLmF4aXNUaXRsZU1hcmdpbitcbmwrQyphLm9mZnNldCxnKTtiW2ldPXQoYltpXSxVKGQubGluZVdpZHRoLzIpKjIpfSxnZXRMaW5lUGF0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9dGhpcy5vcHBvc2l0ZSxkPXRoaXMub2Zmc2V0LGU9dGhpcy5ob3JpeixmPXRoaXMubGVmdCsoYz90aGlzLndpZHRoOjApK2QsZD1iLmNoYXJ0SGVpZ2h0LXRoaXMuYm90dG9tLShjP3RoaXMuaGVpZ2h0OjApK2Q7YyYmKGEqPS0xKTtyZXR1cm4gYi5yZW5kZXJlci5jcmlzcExpbmUoW1wiTVwiLGU/dGhpcy5sZWZ0OmYsZT9kOnRoaXMudG9wLFwiTFwiLGU/Yi5jaGFydFdpZHRoLXRoaXMucmlnaHQ6ZixlP2Q6Yi5jaGFydEhlaWdodC10aGlzLmJvdHRvbV0sYSl9LGdldFRpdGxlUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmhvcml6LGI9dGhpcy5sZWZ0LGM9dGhpcy50b3AsZD10aGlzLmxlbixlPXRoaXMub3B0aW9ucy50aXRsZSxmPWE/YjpjLGc9dGhpcy5vcHBvc2l0ZSxoPXRoaXMub2Zmc2V0LGk9eShlLnN0eWxlLmZvbnRTaXplfHxcbjEyKSxkPXtsb3c6ZisoYT8wOmQpLG1pZGRsZTpmK2QvMixoaWdoOmYrKGE/ZDowKX1bZS5hbGlnbl0sYj0oYT9jK3RoaXMuaGVpZ2h0OmIpKyhhPzE6LTEpKihnPy0xOjEpKnRoaXMuYXhpc1RpdGxlTWFyZ2luKyh0aGlzLnNpZGU9PT0yP2k6MCk7cmV0dXJue3g6YT9kOmIrKGc/dGhpcy53aWR0aDowKStoKyhlLnh8fDApLHk6YT9iLShnP3RoaXMuaGVpZ2h0OjApK2g6ZCsoZS55fHwwKX19LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmhvcml6LGM9YS5yZXZlcnNlZCxkPWEuY2hhcnQsZT1kLnJlbmRlcmVyLGY9YS5vcHRpb25zLGc9YS5pc0xvZyxoPWEuaXNMaW5rZWQsaT1hLnRpY2tQb3NpdGlvbnMsaixrPWEuYXhpc1RpdGxlLGw9YS50aWNrcyxuPWEubWlub3JUaWNrcyxtPWEuYWx0ZXJuYXRlQmFuZHMsbz1mLnN0YWNrTGFiZWxzLHA9Zi5hbHRlcm5hdGVHcmlkQ29sb3IsRD1hLnRpY2ttYXJrT2Zmc2V0LEo9Zi5saW5lV2lkdGgsQz1kLmhhc1JlbmRlcmVkJiZzKGEub2xkTWluKSYmXG4haXNOYU4oYS5vbGRNaW4pLHI9YS5oYXNEYXRhLHQ9YS5zaG93QXhpcyx2LHc9Zi5sYWJlbHMub3ZlcmZsb3cseD1hLmp1c3RpZnlMYWJlbHM9YiYmdyE9PSExLEE7YS5sYWJlbEVkZ2UubGVuZ3RoPTA7YS5qdXN0aWZ5VG9QbG90PXc9PT1cImp1c3RpZnlcIjtxKFtsLG4sbV0sZnVuY3Rpb24oYSl7Zm9yKHZhciBiIGluIGEpYVtiXS5pc0FjdGl2ZT0hMX0pO2lmKHJ8fGgpaWYoYS5taW5vclRpY2tJbnRlcnZhbCYmIWEuY2F0ZWdvcmllcyYmcShhLmdldE1pbm9yVGlja1Bvc2l0aW9ucygpLGZ1bmN0aW9uKGIpe25bYl18fChuW2JdPW5ldyBUYShhLGIsXCJtaW5vclwiKSk7QyYmbltiXS5pc05ldyYmbltiXS5yZW5kZXIobnVsbCwhMCk7bltiXS5yZW5kZXIobnVsbCwhMSwxKX0pLGkubGVuZ3RoJiYoaj1pLnNsaWNlKCksKGImJmN8fCFiJiYhYykmJmoucmV2ZXJzZSgpLHgmJihqPWouc2xpY2UoMSkuY29uY2F0KFtqWzBdXSkpLHEoaixmdW5jdGlvbihiLGMpe3gmJihjPWM9PT1qLmxlbmd0aC1cbjE/MDpjKzEpO2lmKCFofHxiPj1hLm1pbiYmYjw9YS5tYXgpbFtiXXx8KGxbYl09bmV3IFRhKGEsYikpLEMmJmxbYl0uaXNOZXcmJmxbYl0ucmVuZGVyKGMsITAsMC4xKSxsW2JdLnJlbmRlcihjKX0pLEQmJmEubWluPT09MCYmKGxbLTFdfHwobFstMV09bmV3IFRhKGEsLTEsbnVsbCwhMCkpLGxbLTFdLnJlbmRlcigtMSkpKSxwJiZxKGksZnVuY3Rpb24oYixjKXtpZihjJTI9PT0wJiZiPGEubWF4KW1bYl18fChtW2JdPW5ldyBLLlBsb3RMaW5lT3JCYW5kKGEpKSx2PWIrRCxBPWlbYysxXSE9PXU/aVtjKzFdK0Q6YS5tYXgsbVtiXS5vcHRpb25zPXtmcm9tOmc/a2Eodik6dix0bzpnP2thKEEpOkEsY29sb3I6cH0sbVtiXS5yZW5kZXIoKSxtW2JdLmlzQWN0aXZlPSEwfSksIWEuX2FkZGVkUGxvdExCKXEoKGYucGxvdExpbmVzfHxbXSkuY29uY2F0KGYucGxvdEJhbmRzfHxbXSksZnVuY3Rpb24oYil7YS5hZGRQbG90QmFuZE9yTGluZShiKX0pLGEuX2FkZGVkUGxvdExCPSEwO3EoW2wsbixcbm1dLGZ1bmN0aW9uKGEpe3ZhciBiLGMsZT1bXSxmPXZhP3ZhLmR1cmF0aW9ufHw1MDA6MCxnPWZ1bmN0aW9uKCl7Zm9yKGM9ZS5sZW5ndGg7Yy0tOylhW2VbY11dJiYhYVtlW2NdXS5pc0FjdGl2ZSYmKGFbZVtjXV0uZGVzdHJveSgpLGRlbGV0ZSBhW2VbY11dKX07Zm9yKGIgaW4gYSlpZighYVtiXS5pc0FjdGl2ZSlhW2JdLnJlbmRlcihiLCExLDApLGFbYl0uaXNBY3RpdmU9ITEsZS5wdXNoKGIpO2E9PT1tfHwhZC5oYXNSZW5kZXJlZHx8IWY/ZygpOmYmJnNldFRpbWVvdXQoZyxmKX0pO2lmKEopYj1hLmdldExpbmVQYXRoKEopLGEuYXhpc0xpbmU/YS5heGlzTGluZS5hbmltYXRlKHtkOmJ9KTphLmF4aXNMaW5lPWUucGF0aChiKS5hdHRyKHtzdHJva2U6Zi5saW5lQ29sb3IsXCJzdHJva2Utd2lkdGhcIjpKLHpJbmRleDo3fSkuYWRkKGEuYXhpc0dyb3VwKSxhLmF4aXNMaW5lW3Q/XCJzaG93XCI6XCJoaWRlXCJdKCk7aWYoayYmdClrW2suaXNOZXc/XCJhdHRyXCI6XCJhbmltYXRlXCJdKGEuZ2V0VGl0bGVQb3NpdGlvbigpKSxcbmsuaXNOZXc9ITE7byYmby5lbmFibGVkJiZhLnJlbmRlclN0YWNrVG90YWxzKCk7YS5pc0RpcnR5PSExfSxyZWRyYXc6ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcigpO3EodGhpcy5wbG90TGluZXNBbmRCYW5kcyxmdW5jdGlvbihhKXthLnJlbmRlcigpfSk7cSh0aGlzLnNlcmllcyxmdW5jdGlvbihhKXthLmlzRGlydHk9ITB9KX0sZGVzdHJveTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5zdGFja3MsZCxlPWIucGxvdExpbmVzQW5kQmFuZHM7YXx8WChiKTtmb3IoZCBpbiBjKVBhKGNbZF0pLGNbZF09bnVsbDtxKFtiLnRpY2tzLGIubWlub3JUaWNrcyxiLmFsdGVybmF0ZUJhbmRzXSxmdW5jdGlvbihhKXtQYShhKX0pO2ZvcihhPWUubGVuZ3RoO2EtLTspZVthXS5kZXN0cm95KCk7cShcInN0YWNrVG90YWxHcm91cCxheGlzTGluZSxheGlzVGl0bGUsYXhpc0dyb3VwLGNyb3NzLGdyaWRHcm91cCxsYWJlbEdyb3VwXCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGEpe2JbYV0mJihiW2FdPWJbYV0uZGVzdHJveSgpKX0pO1xudGhpcy5jcm9zcyYmdGhpcy5jcm9zcy5kZXN0cm95KCl9LGRyYXdDcm9zc2hhaXI6ZnVuY3Rpb24oYSxiKXtpZih0aGlzLmNyb3NzaGFpcilpZigocyhiKXx8IXAodGhpcy5jcm9zc2hhaXIuc25hcCwhMCkpPT09ITEpdGhpcy5oaWRlQ3Jvc3NoYWlyKCk7ZWxzZXt2YXIgYyxkPXRoaXMuY3Jvc3NoYWlyLGU9ZC5hbmltYXRpb247cChkLnNuYXAsITApP3MoYikmJihjPXRoaXMuY2hhcnQuaW52ZXJ0ZWQhPXRoaXMuaG9yaXo/Yi5wbG90WDp0aGlzLmxlbi1iLnBsb3RZKTpjPXRoaXMuaG9yaXo/YS5jaGFydFgtdGhpcy5wb3M6dGhpcy5sZW4tYS5jaGFydFkrdGhpcy5wb3M7Yz10aGlzLmlzUmFkaWFsP3RoaXMuZ2V0UGxvdExpbmVQYXRoKHRoaXMuaXNYQXhpcz9iLng6cChiLnN0YWNrWSxiLnkpKTp0aGlzLmdldFBsb3RMaW5lUGF0aChudWxsLG51bGwsbnVsbCxudWxsLGMpO2lmKGM9PT1udWxsKXRoaXMuaGlkZUNyb3NzaGFpcigpO2Vsc2UgaWYodGhpcy5jcm9zcyl0aGlzLmNyb3NzLmF0dHIoe3Zpc2liaWxpdHk6XCJ2aXNpYmxlXCJ9KVtlP1xuXCJhbmltYXRlXCI6XCJhdHRyXCJdKHtkOmN9LGUpO2Vsc2V7ZT17XCJzdHJva2Utd2lkdGhcIjpkLndpZHRofHwxLHN0cm9rZTpkLmNvbG9yfHxcIiNDMEMwQzBcIix6SW5kZXg6ZC56SW5kZXh8fDJ9O2lmKGQuZGFzaFN0eWxlKWUuZGFzaHN0eWxlPWQuZGFzaFN0eWxlO3RoaXMuY3Jvc3M9dGhpcy5jaGFydC5yZW5kZXJlci5wYXRoKGMpLmF0dHIoZSkuYWRkKCl9fX0saGlkZUNyb3NzaGFpcjpmdW5jdGlvbigpe3RoaXMuY3Jvc3MmJnRoaXMuY3Jvc3MuaGlkZSgpfX07cihuYS5wcm90b3R5cGUse2dldFBsb3RCYW5kUGF0aDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZ2V0UGxvdExpbmVQYXRoKGIpLGQ9dGhpcy5nZXRQbG90TGluZVBhdGgoYSk7ZCYmYz9kLnB1c2goY1s0XSxjWzVdLGNbMV0sY1syXSk6ZD1udWxsO3JldHVybiBkfSxhZGRQbG90QmFuZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGRQbG90QmFuZE9yTGluZShhLFwicGxvdEJhbmRzXCIpfSxhZGRQbG90TGluZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hZGRQbG90QmFuZE9yTGluZShhLFxuXCJwbG90TGluZXNcIil9LGFkZFBsb3RCYW5kT3JMaW5lOmZ1bmN0aW9uKGEsYil7dmFyIGM9KG5ldyBLLlBsb3RMaW5lT3JCYW5kKHRoaXMsYSkpLnJlbmRlcigpLGQ9dGhpcy51c2VyT3B0aW9ucztjJiYoYiYmKGRbYl09ZFtiXXx8W10sZFtiXS5wdXNoKGEpKSx0aGlzLnBsb3RMaW5lc0FuZEJhbmRzLnB1c2goYykpO3JldHVybiBjfSxyZW1vdmVQbG90QmFuZE9yTGluZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wbG90TGluZXNBbmRCYW5kcyxjPXRoaXMub3B0aW9ucyxkPXRoaXMudXNlck9wdGlvbnMsZT1iLmxlbmd0aDtlLS07KWJbZV0uaWQ9PT1hJiZiW2VdLmRlc3Ryb3koKTtxKFtjLnBsb3RMaW5lc3x8W10sZC5wbG90TGluZXN8fFtdLGMucGxvdEJhbmRzfHxbXSxkLnBsb3RCYW5kc3x8W11dLGZ1bmN0aW9uKGIpe2ZvcihlPWIubGVuZ3RoO2UtLTspYltlXS5pZD09PWEmJmxhKGIsYltlXSl9KX19KTtuYS5wcm90b3R5cGUuZ2V0VGltZVRpY2tzPWZ1bmN0aW9uKGEsYixcbmMsZCl7dmFyIGU9W10sZj17fSxnPUUuZ2xvYmFsLnVzZVVUQyxoLGk9bmV3IERhKGItU2EpLGo9YS51bml0UmFuZ2Usaz1hLmNvdW50O2lmKHMoYikpe2o+PUEuc2Vjb25kJiYoaS5zZXRNaWxsaXNlY29uZHMoMCksaS5zZXRTZWNvbmRzKGo+PUEubWludXRlPzA6aypVKGkuZ2V0U2Vjb25kcygpL2spKSk7aWYoaj49QS5taW51dGUpaVtDYl0oaj49QS5ob3VyPzA6aypVKGlbcGJdKCkvaykpO2lmKGo+PUEuaG91cilpW0RiXShqPj1BLmRheT8wOmsqVShpW3FiXSgpL2spKTtpZihqPj1BLmRheSlpW3NiXShqPj1BLm1vbnRoPzE6aypVKGlbWGFdKCkvaykpO2o+PUEubW9udGgmJihpW0ViXShqPj1BLnllYXI/MDprKlUoaVtmYl0oKS9rKSksaD1pW2diXSgpKTtqPj1BLnllYXImJihoLT1oJWssaVtGYl0oaCkpO2lmKGo9PT1BLndlZWspaVtzYl0oaVtYYV0oKS1pW3JiXSgpK3AoZCwxKSk7Yj0xO1NhJiYoaT1uZXcgRGEoaS5nZXRUaW1lKCkrU2EpKTtoPWlbZ2JdKCk7Zm9yKHZhciBkPVxuaS5nZXRUaW1lKCksbD1pW2ZiXSgpLG49aVtYYV0oKSxtPShBLmRheSsoZz9TYTppLmdldFRpbWV6b25lT2Zmc2V0KCkqNkU0KSklQS5kYXk7ZDxjOyllLnB1c2goZCksaj09PUEueWVhcj9kPWViKGgrYiprLDApOmo9PT1BLm1vbnRoP2Q9ZWIoaCxsK2Iqayk6IWcmJihqPT09QS5kYXl8fGo9PT1BLndlZWspP2Q9ZWIoaCxsLG4rYiprKihqPT09QS5kYXk/MTo3KSk6ZCs9aiprLGIrKztlLnB1c2goZCk7cSh3YihlLGZ1bmN0aW9uKGEpe3JldHVybiBqPD1BLmhvdXImJmElQS5kYXk9PT1tfSksZnVuY3Rpb24oYSl7ZlthXT1cImRheVwifSl9ZS5pbmZvPXIoYSx7aGlnaGVyUmFua3M6Zix0b3RhbFJhbmdlOmoqa30pO3JldHVybiBlfTtuYS5wcm90b3R5cGUubm9ybWFsaXplVGltZVRpY2tJbnRlcnZhbD1mdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtbXCJtaWxsaXNlY29uZFwiLFsxLDIsNSwxMCwyMCwyNSw1MCwxMDAsMjAwLDUwMF1dLFtcInNlY29uZFwiLFsxLDIsNSwxMCwxNSwzMF1dLFtcIm1pbnV0ZVwiLFxuWzEsMiw1LDEwLDE1LDMwXV0sW1wiaG91clwiLFsxLDIsMyw0LDYsOCwxMl1dLFtcImRheVwiLFsxLDJdXSxbXCJ3ZWVrXCIsWzEsMl1dLFtcIm1vbnRoXCIsWzEsMiwzLDQsNl1dLFtcInllYXJcIixudWxsXV0sZD1jW2MubGVuZ3RoLTFdLGU9QVtkWzBdXSxmPWRbMV0sZztmb3IoZz0wO2c8Yy5sZW5ndGg7ZysrKWlmKGQ9Y1tnXSxlPUFbZFswXV0sZj1kWzFdLGNbZysxXSYmYTw9KGUqZltmLmxlbmd0aC0xXStBW2NbZysxXVswXV0pLzIpYnJlYWs7ZT09PUEueWVhciYmYTw1KmUmJihmPVsxLDIsNV0pO2M9bmIoYS9lLGYsZFswXT09PVwieWVhclwiP3QobWIoYS9lKSwxKToxKTtyZXR1cm57dW5pdFJhbmdlOmUsY291bnQ6Yyx1bml0TmFtZTpkWzBdfX07bmEucHJvdG90eXBlLmdldExvZ1RpY2tQb3NpdGlvbnM9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5vcHRpb25zLGY9dGhpcy5sZW4sZz1bXTtpZighZCl0aGlzLl9taW5vckF1dG9JbnRlcnZhbD1udWxsO2lmKGE+PTAuNSlhPXYoYSksZz10aGlzLmdldExpbmVhclRpY2tQb3NpdGlvbnMoYSxcbmIsYyk7ZWxzZSBpZihhPj0wLjA4KWZvcih2YXIgZj1VKGIpLGgsaSxqLGssbCxlPWE+MC4zP1sxLDIsNF06YT4wLjE1P1sxLDIsNCw2LDhdOlsxLDIsMyw0LDUsNiw3LDgsOV07ZjxjKzEmJiFsO2YrKyl7aT1lLmxlbmd0aDtmb3IoaD0wO2g8aSYmIWw7aCsrKWo9emEoa2EoZikqZVtoXSksaj5iJiYoIWR8fGs8PWMpJiZrIT09dSYmZy5wdXNoKGspLGs+YyYmKGw9ITApLGs9an1lbHNlIGlmKGI9a2EoYiksYz1rYShjKSxhPWVbZD9cIm1pbm9yVGlja0ludGVydmFsXCI6XCJ0aWNrSW50ZXJ2YWxcIl0sYT1wKGE9PT1cImF1dG9cIj9udWxsOmEsdGhpcy5fbWlub3JBdXRvSW50ZXJ2YWwsKGMtYikqKGUudGlja1BpeGVsSW50ZXJ2YWwvKGQ/NToxKSkvKChkP2YvdGhpcy50aWNrUG9zaXRpb25zLmxlbmd0aDpmKXx8MSkpLGE9bmIoYSxudWxsLG1iKGEpKSxnPVZhKHRoaXMuZ2V0TGluZWFyVGlja1Bvc2l0aW9ucyhhLGIsYyksemEpLCFkKXRoaXMuX21pbm9yQXV0b0ludGVydmFsPWEvNTtpZighZCl0aGlzLnRpY2tJbnRlcnZhbD1cbmE7cmV0dXJuIGd9O3ZhciBOYj1LLlRvb2x0aXA9ZnVuY3Rpb24oKXt0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfTtOYi5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmJvcmRlcldpZHRoLGQ9Yi5zdHlsZSxlPXkoZC5wYWRkaW5nKTt0aGlzLmNoYXJ0PWE7dGhpcy5vcHRpb25zPWI7dGhpcy5jcm9zc2hhaXJzPVtdO3RoaXMubm93PXt4OjAseTowfTt0aGlzLmlzSGlkZGVuPSEwO3RoaXMubGFiZWw9YS5yZW5kZXJlci5sYWJlbChcIlwiLDAsMCxiLnNoYXBlfHxcImNhbGxvdXRcIixudWxsLG51bGwsYi51c2VIVE1MLG51bGwsXCJ0b29sdGlwXCIpLmF0dHIoe3BhZGRpbmc6ZSxmaWxsOmIuYmFja2dyb3VuZENvbG9yLFwic3Ryb2tlLXdpZHRoXCI6YyxyOmIuYm9yZGVyUmFkaXVzLHpJbmRleDo4fSkuY3NzKGQpLmNzcyh7cGFkZGluZzowfSkuYWRkKCkuYXR0cih7eTotOTk5OX0pO2dhfHx0aGlzLmxhYmVsLnNoYWRvdyhiLnNoYWRvdyk7dGhpcy5zaGFyZWQ9Yi5zaGFyZWR9LFxuZGVzdHJveTpmdW5jdGlvbigpe2lmKHRoaXMubGFiZWwpdGhpcy5sYWJlbD10aGlzLmxhYmVsLmRlc3Ryb3koKTtjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZXIpO2NsZWFyVGltZW91dCh0aGlzLnRvb2x0aXBUaW1lb3V0KX0sbW92ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLGY9ZS5ub3csZz1lLm9wdGlvbnMuYW5pbWF0aW9uIT09ITEmJiFlLmlzSGlkZGVuJiYoUShhLWYueCk+MXx8UShiLWYueSk+MSksaD1lLmZvbGxvd1BvaW50ZXJ8fGUubGVuPjE7cihmLHt4Omc/KDIqZi54K2EpLzM6YSx5Omc/KGYueStiKS8yOmIsYW5jaG9yWDpoP3U6Zz8oMipmLmFuY2hvclgrYykvMzpjLGFuY2hvclk6aD91Omc/KGYuYW5jaG9yWStkKS8yOmR9KTtlLmxhYmVsLmF0dHIoZik7aWYoZyljbGVhclRpbWVvdXQodGhpcy50b29sdGlwVGltZW91dCksdGhpcy50b29sdGlwVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSYmZS5tb3ZlKGEsYixjLGQpfSwzMil9LGhpZGU6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLGM7Y2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTtpZighdGhpcy5pc0hpZGRlbiljPXRoaXMuY2hhcnQuaG92ZXJQb2ludHMsdGhpcy5oaWRlVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2IubGFiZWwuZmFkZU91dCgpO2IuaXNIaWRkZW49ITB9LHAoYSx0aGlzLm9wdGlvbnMuaGlkZURlbGF5LDUwMCkpLGMmJnEoYyxmdW5jdGlvbihhKXthLnNldFN0YXRlKCl9KSx0aGlzLmNoYXJ0LmhvdmVyUG9pbnRzPW51bGx9LGdldEFuY2hvcjpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9dGhpcy5jaGFydCxlPWQuaW52ZXJ0ZWQsZj1kLnBsb3RUb3AsZz0wLGg9MCxpLGE9cmEoYSk7Yz1hWzBdLnRvb2x0aXBQb3M7dGhpcy5mb2xsb3dQb2ludGVyJiZiJiYoYi5jaGFydFg9PT11JiYoYj1kLnBvaW50ZXIubm9ybWFsaXplKGIpKSxjPVtiLmNoYXJ0WC1kLnBsb3RMZWZ0LGIuY2hhcnRZLWZdKTtjfHwocShhLGZ1bmN0aW9uKGEpe2k9YS5zZXJpZXMueUF4aXM7Zys9YS5wbG90WDtoKz1cbihhLnBsb3RMb3c/KGEucGxvdExvdythLnBsb3RIaWdoKS8yOmEucGxvdFkpKyghZSYmaT9pLnRvcC1mOjApfSksZy89YS5sZW5ndGgsaC89YS5sZW5ndGgsYz1bZT9kLnBsb3RXaWR0aC1oOmcsdGhpcy5zaGFyZWQmJiFlJiZhLmxlbmd0aD4xJiZiP2IuY2hhcnRZLWY6ZT9kLnBsb3RIZWlnaHQtZzpoXSk7cmV0dXJuIFZhKGMsdil9LGdldFBvc2l0aW9uOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmNoYXJ0LGU9dGhpcy5kaXN0YW5jZSxmPXt9LGcsaD1bXCJ5XCIsZC5jaGFydEhlaWdodCxiLGMucGxvdFkrZC5wbG90VG9wXSxpPVtcInhcIixkLmNoYXJ0V2lkdGgsYSxjLnBsb3RYK2QucGxvdExlZnRdLGo9Yy50dEJlbG93fHxkLmludmVydGVkJiYhYy5uZWdhdGl2ZXx8IWQuaW52ZXJ0ZWQmJmMubmVnYXRpdmUsaz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZz1jPGQtZSxiPWQrZStjPGIsYz1kLWUtYztkKz1lO2lmKGomJmIpZlthXT1kO2Vsc2UgaWYoIWomJmcpZlthXT1jO2Vsc2UgaWYoZylmW2FdPVxuYztlbHNlIGlmKGIpZlthXT1kO2Vsc2UgcmV0dXJuITF9LGw9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZDxlfHxkPmItZSlyZXR1cm4hMTtlbHNlIGZbYV09ZDxjLzI/MTpkPmItYy8yP2ItYy0yOmQtYy8yfSxuPWZ1bmN0aW9uKGEpe3ZhciBiPWg7aD1pO2k9YjtnPWF9LG09ZnVuY3Rpb24oKXtrLmFwcGx5KDAsaCkhPT0hMT9sLmFwcGx5KDAsaSk9PT0hMSYmIWcmJihuKCEwKSxtKCkpOmc/Zi54PWYueT0wOihuKCEwKSxtKCkpfTsoZC5pbnZlcnRlZHx8dGhpcy5sZW4+MSkmJm4oKTttKCk7cmV0dXJuIGZ9LGRlZmF1bHRGb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5wb2ludHN8fHJhKHRoaXMpLGM9YlswXS5zZXJpZXMsZDtkPVthLnRvb2x0aXBIZWFkZXJGb3JtYXR0ZXIoYlswXSldO3EoYixmdW5jdGlvbihhKXtjPWEuc2VyaWVzO2QucHVzaChjLnRvb2x0aXBGb3JtYXR0ZXImJmMudG9vbHRpcEZvcm1hdHRlcihhKXx8YS5wb2ludC50b29sdGlwRm9ybWF0dGVyKGMudG9vbHRpcE9wdGlvbnMucG9pbnRGb3JtYXQpKX0pO1xuZC5wdXNoKGEub3B0aW9ucy5mb290ZXJGb3JtYXR8fFwiXCIpO3JldHVybiBkLmpvaW4oXCJcIil9LHJlZnJlc2g6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNoYXJ0LGQ9dGhpcy5sYWJlbCxlPXRoaXMub3B0aW9ucyxmLGcsaD17fSxpLGo9W107aT1lLmZvcm1hdHRlcnx8dGhpcy5kZWZhdWx0Rm9ybWF0dGVyO3ZhciBoPWMuaG92ZXJQb2ludHMsayxsPXRoaXMuc2hhcmVkO2NsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lcik7dGhpcy5mb2xsb3dQb2ludGVyPXJhKGEpWzBdLnNlcmllcy50b29sdGlwT3B0aW9ucy5mb2xsb3dQb2ludGVyO2c9dGhpcy5nZXRBbmNob3IoYSxiKTtmPWdbMF07Zz1nWzFdO2wmJighYS5zZXJpZXN8fCFhLnNlcmllcy5ub1NoYXJlZFRvb2x0aXApPyhjLmhvdmVyUG9pbnRzPWEsaCYmcShoLGZ1bmN0aW9uKGEpe2Euc2V0U3RhdGUoKX0pLHEoYSxmdW5jdGlvbihhKXthLnNldFN0YXRlKFwiaG92ZXJcIik7ai5wdXNoKGEuZ2V0TGFiZWxDb25maWcoKSl9KSxoPXt4OmFbMF0uY2F0ZWdvcnksXG55OmFbMF0ueX0saC5wb2ludHM9aix0aGlzLmxlbj1qLmxlbmd0aCxhPWFbMF0pOmg9YS5nZXRMYWJlbENvbmZpZygpO2k9aS5jYWxsKGgsdGhpcyk7aD1hLnNlcmllczt0aGlzLmRpc3RhbmNlPXAoaC50b29sdGlwT3B0aW9ucy5kaXN0YW5jZSwxNik7aT09PSExP3RoaXMuaGlkZSgpOih0aGlzLmlzSGlkZGVuJiYoYmIoZCksZC5hdHRyKFwib3BhY2l0eVwiLDEpLnNob3coKSksZC5hdHRyKHt0ZXh0Oml9KSxrPWUuYm9yZGVyQ29sb3J8fGEuY29sb3J8fGguY29sb3J8fFwiIzYwNjA2MFwiLGQuYXR0cih7c3Ryb2tlOmt9KSx0aGlzLnVwZGF0ZVBvc2l0aW9uKHtwbG90WDpmLHBsb3RZOmcsbmVnYXRpdmU6YS5uZWdhdGl2ZSx0dEJlbG93OmEudHRCZWxvd30pLHRoaXMuaXNIaWRkZW49ITEpO0koYyxcInRvb2x0aXBSZWZyZXNoXCIse3RleHQ6aSx4OmYrYy5wbG90TGVmdCx5OmcrYy5wbG90VG9wLGJvcmRlckNvbG9yOmt9KX0sdXBkYXRlUG9zaXRpb246ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxcbmM9dGhpcy5sYWJlbCxjPSh0aGlzLm9wdGlvbnMucG9zaXRpb25lcnx8dGhpcy5nZXRQb3NpdGlvbikuY2FsbCh0aGlzLGMud2lkdGgsYy5oZWlnaHQsYSk7dGhpcy5tb3ZlKHYoYy54KSx2KGMueSksYS5wbG90WCtiLnBsb3RMZWZ0LGEucGxvdFkrYi5wbG90VG9wKX0sdG9vbHRpcEhlYWRlckZvcm1hdHRlcjpmdW5jdGlvbihhKXt2YXIgYj1hLnNlcmllcyxjPWIudG9vbHRpcE9wdGlvbnMsZD1jLmRhdGVUaW1lTGFiZWxGb3JtYXRzLGU9Yy54RGF0ZUZvcm1hdCxmPWIueEF4aXMsZz1mJiZmLm9wdGlvbnMudHlwZT09PVwiZGF0ZXRpbWVcIiYmamEoYS5rZXkpLGM9Yy5oZWFkZXJGb3JtYXQsZj1mJiZmLmNsb3Nlc3RQb2ludFJhbmdlLGg7aWYoZyYmIWUpe2lmKGYpZm9yKGggaW4gQSl7aWYoQVtoXT49Znx8QVtoXTw9QS5kYXkmJmEua2V5JUFbaF0+MCl7ZT1kW2hdO2JyZWFrfX1lbHNlIGU9ZC5kYXk7ZT1lfHxkLnllYXJ9ZyYmZSYmKGM9Yy5yZXBsYWNlKFwie3BvaW50LmtleX1cIixcIntwb2ludC5rZXk6XCIrXG5lK1wifVwiKSk7cmV0dXJuIEphKGMse3BvaW50OmEsc2VyaWVzOmJ9KX19O3ZhciBwYTskYT14LmRvY3VtZW50RWxlbWVudC5vbnRvdWNoc3RhcnQhPT11O3ZhciBXYT1LLlBvaW50ZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLmluaXQoYSxiKX07V2EucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5jaGFydCxkPWMuZXZlbnRzLGU9Z2E/XCJcIjpjLnpvb21UeXBlLGM9YS5pbnZlcnRlZCxmO3RoaXMub3B0aW9ucz1iO3RoaXMuY2hhcnQ9YTt0aGlzLnpvb21YPWY9L3gvLnRlc3QoZSk7dGhpcy56b29tWT1lPS95Ly50ZXN0KGUpO3RoaXMuem9vbUhvcj1mJiYhY3x8ZSYmYzt0aGlzLnpvb21WZXJ0PWUmJiFjfHxmJiZjO3RoaXMuaGFzWm9vbT1mfHxlO3RoaXMucnVuQ2hhcnRDbGljaz1kJiYhIWQuY2xpY2s7dGhpcy5waW5jaERvd249W107dGhpcy5sYXN0VmFsaWRUb3VjaD17fTtpZihLLlRvb2x0aXAmJmIudG9vbHRpcC5lbmFibGVkKWEudG9vbHRpcD1uZXcgTmIoYSxiLnRvb2x0aXApLFxudGhpcy5mb2xsb3dUb3VjaE1vdmU9Yi50b29sdGlwLmZvbGxvd1RvdWNoTW92ZTt0aGlzLnNldERPTUV2ZW50cygpfSxub3JtYWxpemU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGE9YXx8d2luZG93LmV2ZW50LGE9VGIoYSk7aWYoIWEudGFyZ2V0KWEudGFyZ2V0PWEuc3JjRWxlbWVudDtkPWEudG91Y2hlcz9hLnRvdWNoZXMubGVuZ3RoP2EudG91Y2hlcy5pdGVtKDApOmEuY2hhbmdlZFRvdWNoZXNbMF06YTtpZighYil0aGlzLmNoYXJ0UG9zaXRpb249Yj1TYih0aGlzLmNoYXJ0LmNvbnRhaW5lcik7ZC5wYWdlWD09PXU/KGM9dChhLngsYS5jbGllbnRYLWIubGVmdCksZD1hLnkpOihjPWQucGFnZVgtYi5sZWZ0LGQ9ZC5wYWdlWS1iLnRvcCk7cmV0dXJuIHIoYSx7Y2hhcnRYOnYoYyksY2hhcnRZOnYoZCl9KX0sZ2V0Q29vcmRpbmF0ZXM6ZnVuY3Rpb24oYSl7dmFyIGI9e3hBeGlzOltdLHlBeGlzOltdfTtxKHRoaXMuY2hhcnQuYXhlcyxmdW5jdGlvbihjKXtiW2MuaXNYQXhpcz9cInhBeGlzXCI6XG5cInlBeGlzXCJdLnB1c2goe2F4aXM6Yyx2YWx1ZTpjLnRvVmFsdWUoYVtjLmhvcml6P1wiY2hhcnRYXCI6XCJjaGFydFlcIl0pfSl9KTtyZXR1cm4gYn0sZ2V0SW5kZXg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydDtyZXR1cm4gYi5pbnZlcnRlZD9iLnBsb3RIZWlnaHQrYi5wbG90VG9wLWEuY2hhcnRZOmEuY2hhcnRYLWIucGxvdExlZnR9LHJ1blBvaW50QWN0aW9uczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9Yi5zZXJpZXMsZD1iLnRvb2x0aXAsZSxmLGc9Yi5ob3ZlclBvaW50LGg9Yi5ob3ZlclNlcmllcyxpLGosaz1iLmNoYXJ0V2lkdGgsbD10aGlzLmdldEluZGV4KGEpO2lmKGQmJnRoaXMub3B0aW9ucy50b29sdGlwLnNoYXJlZCYmKCFofHwhaC5ub1NoYXJlZFRvb2x0aXApKXtmPVtdO2k9Yy5sZW5ndGg7Zm9yKGo9MDtqPGk7aisrKWlmKGNbal0udmlzaWJsZSYmY1tqXS5vcHRpb25zLmVuYWJsZU1vdXNlVHJhY2tpbmchPT0hMSYmIWNbal0ubm9TaGFyZWRUb29sdGlwJiZcbmNbal0uc2luZ3VsYXJUb29sdGlwcyE9PSEwJiZjW2pdLnRvb2x0aXBQb2ludHMubGVuZ3RoJiYoZT1jW2pdLnRvb2x0aXBQb2ludHNbbF0pJiZlLnNlcmllcyllLl9kaXN0PVEobC1lLmNsaWVudFgpLGs9TChrLGUuX2Rpc3QpLGYucHVzaChlKTtmb3IoaT1mLmxlbmd0aDtpLS07KWZbaV0uX2Rpc3Q+ayYmZi5zcGxpY2UoaSwxKTtpZihmLmxlbmd0aCYmZlswXS5jbGllbnRYIT09dGhpcy5ob3ZlclgpZC5yZWZyZXNoKGYsYSksdGhpcy5ob3Zlclg9ZlswXS5jbGllbnRYfWM9aCYmaC50b29sdGlwT3B0aW9ucy5mb2xsb3dQb2ludGVyO2lmKGgmJmgudHJhY2tlciYmIWMpe2lmKChlPWgudG9vbHRpcFBvaW50c1tsXSkmJmUhPT1nKWUub25Nb3VzZU92ZXIoYSl9ZWxzZSBkJiZjJiYhZC5pc0hpZGRlbiYmKGg9ZC5nZXRBbmNob3IoW3t9XSxhKSxkLnVwZGF0ZVBvc2l0aW9uKHtwbG90WDpoWzBdLHBsb3RZOmhbMV19KSk7aWYoZCYmIXRoaXMuX29uRG9jdW1lbnRNb3VzZU1vdmUpdGhpcy5fb25Eb2N1bWVudE1vdXNlTW92ZT1cbmZ1bmN0aW9uKGEpe2lmKFdbcGFdKVdbcGFdLnBvaW50ZXIub25Eb2N1bWVudE1vdXNlTW92ZShhKX0sTih4LFwibW91c2Vtb3ZlXCIsdGhpcy5fb25Eb2N1bWVudE1vdXNlTW92ZSk7cShiLmF4ZXMsZnVuY3Rpb24oYil7Yi5kcmF3Q3Jvc3NoYWlyKGEscChlLGcpKX0pfSxyZXNldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2hhcnQsZD1jLmhvdmVyU2VyaWVzLGU9Yy5ob3ZlclBvaW50LGY9Yy50b29sdGlwLGc9ZiYmZi5zaGFyZWQ/Yy5ob3ZlclBvaW50czplOyhhPWEmJmYmJmcpJiZyYShnKVswXS5wbG90WD09PXUmJihhPSExKTtpZihhKWYucmVmcmVzaChnKSxlJiZlLnNldFN0YXRlKGUuc3RhdGUsITApO2Vsc2V7aWYoZSllLm9uTW91c2VPdXQoKTtpZihkKWQub25Nb3VzZU91dCgpO2YmJmYuaGlkZShiKTtpZih0aGlzLl9vbkRvY3VtZW50TW91c2VNb3ZlKVgoeCxcIm1vdXNlbW92ZVwiLHRoaXMuX29uRG9jdW1lbnRNb3VzZU1vdmUpLHRoaXMuX29uRG9jdW1lbnRNb3VzZU1vdmU9XG5udWxsO3EoYy5heGVzLGZ1bmN0aW9uKGEpe2EuaGlkZUNyb3NzaGFpcigpfSk7dGhpcy5ob3Zlclg9bnVsbH19LHNjYWxlR3JvdXBzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jaGFydCxkO3EoYy5zZXJpZXMsZnVuY3Rpb24oZSl7ZD1hfHxlLmdldFBsb3RCb3goKTtlLnhBeGlzJiZlLnhBeGlzLnpvb21FbmFibGVkJiYoZS5ncm91cC5hdHRyKGQpLGUubWFya2VyR3JvdXAmJihlLm1hcmtlckdyb3VwLmF0dHIoZCksZS5tYXJrZXJHcm91cC5jbGlwKGI/Yy5jbGlwUmVjdDpudWxsKSksZS5kYXRhTGFiZWxzR3JvdXAmJmUuZGF0YUxhYmVsc0dyb3VwLmF0dHIoZCkpfSk7Yy5jbGlwUmVjdC5hdHRyKGJ8fGMuY2xpcEJveCl9LGRyYWdTdGFydDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0O2IubW91c2VJc0Rvd249YS50eXBlO2IuY2FuY2VsQ2xpY2s9ITE7Yi5tb3VzZURvd25YPXRoaXMubW91c2VEb3duWD1hLmNoYXJ0WDtiLm1vdXNlRG93blk9dGhpcy5tb3VzZURvd25ZPWEuY2hhcnRZfSxcbmRyYWc6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxjPWIub3B0aW9ucy5jaGFydCxkPWEuY2hhcnRYLGU9YS5jaGFydFksZj10aGlzLnpvb21Ib3IsZz10aGlzLnpvb21WZXJ0LGg9Yi5wbG90TGVmdCxpPWIucGxvdFRvcCxqPWIucGxvdFdpZHRoLGs9Yi5wbG90SGVpZ2h0LGwsbj10aGlzLm1vdXNlRG93blgsbT10aGlzLm1vdXNlRG93blksbz1jLnBhbktleSYmYVtjLnBhbktleStcIktleVwiXTtkPGg/ZD1oOmQ+aCtqJiYoZD1oK2opO2U8aT9lPWk6ZT5pK2smJihlPWkrayk7dGhpcy5oYXNEcmFnZ2VkPU1hdGguc3FydChNYXRoLnBvdyhuLWQsMikrTWF0aC5wb3cobS1lLDIpKTtpZih0aGlzLmhhc0RyYWdnZWQ+MTApe2w9Yi5pc0luc2lkZVBsb3Qobi1oLG0taSk7aWYoYi5oYXNDYXJ0ZXNpYW5TZXJpZXMmJih0aGlzLnpvb21YfHx0aGlzLnpvb21ZKSYmbCYmIW8mJiF0aGlzLnNlbGVjdGlvbk1hcmtlcil0aGlzLnNlbGVjdGlvbk1hcmtlcj1iLnJlbmRlcmVyLnJlY3QoaCxpLFxuZj8xOmosZz8xOmssMCkuYXR0cih7ZmlsbDpjLnNlbGVjdGlvbk1hcmtlckZpbGx8fFwicmdiYSg2OSwxMTQsMTY3LDAuMjUpXCIsekluZGV4Ojd9KS5hZGQoKTt0aGlzLnNlbGVjdGlvbk1hcmtlciYmZiYmKGQtPW4sdGhpcy5zZWxlY3Rpb25NYXJrZXIuYXR0cih7d2lkdGg6UShkKSx4OihkPjA/MDpkKStufSkpO3RoaXMuc2VsZWN0aW9uTWFya2VyJiZnJiYoZD1lLW0sdGhpcy5zZWxlY3Rpb25NYXJrZXIuYXR0cih7aGVpZ2h0OlEoZCkseTooZD4wPzA6ZCkrbX0pKTtsJiYhdGhpcy5zZWxlY3Rpb25NYXJrZXImJmMucGFubmluZyYmYi5wYW4oYSxjLnBhbm5pbmcpfX0sZHJvcDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9dGhpcy5oYXNQaW5jaGVkO2lmKHRoaXMuc2VsZWN0aW9uTWFya2VyKXt2YXIgZD17eEF4aXM6W10seUF4aXM6W10sb3JpZ2luYWxFdmVudDphLm9yaWdpbmFsRXZlbnR8fGF9LGU9dGhpcy5zZWxlY3Rpb25NYXJrZXIsZj1lLmF0dHI/ZS5hdHRyKFwieFwiKTpcbmUueCxnPWUuYXR0cj9lLmF0dHIoXCJ5XCIpOmUueSxoPWUuYXR0cj9lLmF0dHIoXCJ3aWR0aFwiKTplLndpZHRoLGk9ZS5hdHRyP2UuYXR0cihcImhlaWdodFwiKTplLmhlaWdodCxqO2lmKHRoaXMuaGFzRHJhZ2dlZHx8YylxKGIuYXhlcyxmdW5jdGlvbihiKXtpZihiLnpvb21FbmFibGVkKXt2YXIgYz1iLmhvcml6LGU9YS50eXBlPT09XCJ0b3VjaGVuZFwiP2IubWluUGl4ZWxQYWRkaW5nOjAsbT1iLnRvVmFsdWUoKGM/ZjpnKStlKSxjPWIudG9WYWx1ZSgoYz9mK2g6ZytpKS1lKTshaXNOYU4obSkmJiFpc05hTihjKSYmKGRbYi5jb2xsXS5wdXNoKHtheGlzOmIsbWluOkwobSxjKSxtYXg6dChtLGMpfSksaj0hMCl9fSksaiYmSShiLFwic2VsZWN0aW9uXCIsZCxmdW5jdGlvbihhKXtiLnpvb20ocihhLGM/e2FuaW1hdGlvbjohMX06bnVsbCkpfSk7dGhpcy5zZWxlY3Rpb25NYXJrZXI9dGhpcy5zZWxlY3Rpb25NYXJrZXIuZGVzdHJveSgpO2MmJnRoaXMuc2NhbGVHcm91cHMoKX1pZihiKUIoYi5jb250YWluZXIsXG57Y3Vyc29yOmIuX2N1cnNvcn0pLGIuY2FuY2VsQ2xpY2s9dGhpcy5oYXNEcmFnZ2VkPjEwLGIubW91c2VJc0Rvd249dGhpcy5oYXNEcmFnZ2VkPXRoaXMuaGFzUGluY2hlZD0hMSx0aGlzLnBpbmNoRG93bj1bXX0sb25Db250YWluZXJNb3VzZURvd246ZnVuY3Rpb24oYSl7YT10aGlzLm5vcm1hbGl6ZShhKTthLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCk7dGhpcy5kcmFnU3RhcnQoYSl9LG9uRG9jdW1lbnRNb3VzZVVwOmZ1bmN0aW9uKGEpe1dbcGFdJiZXW3BhXS5wb2ludGVyLmRyb3AoYSl9LG9uRG9jdW1lbnRNb3VzZU1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxjPXRoaXMuY2hhcnRQb3NpdGlvbixkPWIuaG92ZXJTZXJpZXMsYT10aGlzLm5vcm1hbGl6ZShhLGMpO2MmJmQmJiF0aGlzLmluQ2xhc3MoYS50YXJnZXQsXCJoaWdoY2hhcnRzLXRyYWNrZXJcIikmJiFiLmlzSW5zaWRlUGxvdChhLmNoYXJ0WC1iLnBsb3RMZWZ0LGEuY2hhcnRZLWIucGxvdFRvcCkmJlxudGhpcy5yZXNldCgpfSxvbkNvbnRhaW5lck1vdXNlTGVhdmU6ZnVuY3Rpb24oKXt2YXIgYT1XW3BhXTtpZihhKWEucG9pbnRlci5yZXNldCgpLGEucG9pbnRlci5jaGFydFBvc2l0aW9uPW51bGx9LG9uQ29udGFpbmVyTW91c2VNb3ZlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQ7cGE9Yi5pbmRleDthPXRoaXMubm9ybWFsaXplKGEpO2EucmV0dXJuVmFsdWU9ITE7Yi5tb3VzZUlzRG93bj09PVwibW91c2Vkb3duXCImJnRoaXMuZHJhZyhhKTsodGhpcy5pbkNsYXNzKGEudGFyZ2V0LFwiaGlnaGNoYXJ0cy10cmFja2VyXCIpfHxiLmlzSW5zaWRlUGxvdChhLmNoYXJ0WC1iLnBsb3RMZWZ0LGEuY2hhcnRZLWIucGxvdFRvcCkpJiYhYi5vcGVuTWVudSYmdGhpcy5ydW5Qb2ludEFjdGlvbnMoYSl9LGluQ2xhc3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM7YTspe2lmKGM9RihhLFwiY2xhc3NcIikpaWYoYy5pbmRleE9mKGIpIT09LTEpcmV0dXJuITA7ZWxzZSBpZihjLmluZGV4T2YoXCJoaWdoY2hhcnRzLWNvbnRhaW5lclwiKSE9PVxuLTEpcmV0dXJuITE7YT1hLnBhcmVudE5vZGV9fSxvblRyYWNrZXJNb3VzZU91dDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LmhvdmVyU2VyaWVzLGM9KGE9YS5yZWxhdGVkVGFyZ2V0fHxhLnRvRWxlbWVudCkmJmEucG9pbnQmJmEucG9pbnQuc2VyaWVzO2lmKGImJiFiLm9wdGlvbnMuc3RpY2t5VHJhY2tpbmcmJiF0aGlzLmluQ2xhc3MoYSxcImhpZ2hjaGFydHMtdG9vbHRpcFwiKSYmYyE9PWIpYi5vbk1vdXNlT3V0KCl9LG9uQ29udGFpbmVyQ2xpY2s6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxjPWIuaG92ZXJQb2ludCxkPWIucGxvdExlZnQsZT1iLnBsb3RUb3AsYT10aGlzLm5vcm1hbGl6ZShhKTthLmNhbmNlbEJ1YmJsZT0hMDtiLmNhbmNlbENsaWNrfHwoYyYmdGhpcy5pbkNsYXNzKGEudGFyZ2V0LFwiaGlnaGNoYXJ0cy10cmFja2VyXCIpPyhJKGMuc2VyaWVzLFwiY2xpY2tcIixyKGEse3BvaW50OmN9KSksYi5ob3ZlclBvaW50JiZjLmZpcmVQb2ludEV2ZW50KFwiY2xpY2tcIixcbmEpKToocihhLHRoaXMuZ2V0Q29vcmRpbmF0ZXMoYSkpLGIuaXNJbnNpZGVQbG90KGEuY2hhcnRYLWQsYS5jaGFydFktZSkmJkkoYixcImNsaWNrXCIsYSkpKX0sc2V0RE9NRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2hhcnQuY29udGFpbmVyO2Iub25tb3VzZWRvd249ZnVuY3Rpb24oYil7YS5vbkNvbnRhaW5lck1vdXNlRG93bihiKX07Yi5vbm1vdXNlbW92ZT1mdW5jdGlvbihiKXthLm9uQ29udGFpbmVyTW91c2VNb3ZlKGIpfTtiLm9uY2xpY2s9ZnVuY3Rpb24oYil7YS5vbkNvbnRhaW5lckNsaWNrKGIpfTtOKGIsXCJtb3VzZWxlYXZlXCIsYS5vbkNvbnRhaW5lck1vdXNlTGVhdmUpO2FiPT09MSYmTih4LFwibW91c2V1cFwiLGEub25Eb2N1bWVudE1vdXNlVXApO2lmKCRhKWIub250b3VjaHN0YXJ0PWZ1bmN0aW9uKGIpe2Eub25Db250YWluZXJUb3VjaFN0YXJ0KGIpfSxiLm9udG91Y2htb3ZlPWZ1bmN0aW9uKGIpe2Eub25Db250YWluZXJUb3VjaE1vdmUoYil9LGFiPT09MSYmXG5OKHgsXCJ0b3VjaGVuZFwiLGEub25Eb2N1bWVudFRvdWNoRW5kKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhO1godGhpcy5jaGFydC5jb250YWluZXIsXCJtb3VzZWxlYXZlXCIsdGhpcy5vbkNvbnRhaW5lck1vdXNlTGVhdmUpO2FifHwoWCh4LFwibW91c2V1cFwiLHRoaXMub25Eb2N1bWVudE1vdXNlVXApLFgoeCxcInRvdWNoZW5kXCIsdGhpcy5vbkRvY3VtZW50VG91Y2hFbmQpKTtjbGVhckludGVydmFsKHRoaXMudG9vbHRpcFRpbWVvdXQpO2ZvcihhIGluIHRoaXMpdGhpc1thXT1udWxsfX07cihLLlBvaW50ZXIucHJvdG90eXBlLHtwaW5jaFRyYW5zbGF0ZTpmdW5jdGlvbihhLGIsYyxkLGUsZil7KHRoaXMuem9vbUhvcnx8dGhpcy5waW5jaEhvcikmJnRoaXMucGluY2hUcmFuc2xhdGVEaXJlY3Rpb24oITAsYSxiLGMsZCxlLGYpOyh0aGlzLnpvb21WZXJ0fHx0aGlzLnBpbmNoVmVydCkmJnRoaXMucGluY2hUcmFuc2xhdGVEaXJlY3Rpb24oITEsYSxiLGMsZCxlLGYpfSxwaW5jaFRyYW5zbGF0ZURpcmVjdGlvbjpmdW5jdGlvbihhLFxuYixjLGQsZSxmLGcsaCl7dmFyIGk9dGhpcy5jaGFydCxqPWE/XCJ4XCI6XCJ5XCIsaz1hP1wiWFwiOlwiWVwiLGw9XCJjaGFydFwiK2ssbj1hP1wid2lkdGhcIjpcImhlaWdodFwiLG09aVtcInBsb3RcIisoYT9cIkxlZnRcIjpcIlRvcFwiKV0sbyxwLHE9aHx8MSxyPWkuaW52ZXJ0ZWQsQz1pLmJvdW5kc1thP1wiaFwiOlwidlwiXSx0PWIubGVuZ3RoPT09MSxzPWJbMF1bbF0sdj1jWzBdW2xdLHU9IXQmJmJbMV1bbF0sdz0hdCYmY1sxXVtsXSx4LGM9ZnVuY3Rpb24oKXshdCYmUShzLXUpPjIwJiYocT1ofHxRKHYtdykvUShzLXUpKTtwPShtLXYpL3ErcztvPWlbXCJwbG90XCIrKGE/XCJXaWR0aFwiOlwiSGVpZ2h0XCIpXS9xfTtjKCk7Yj1wO2I8Qy5taW4/KGI9Qy5taW4seD0hMCk6YitvPkMubWF4JiYoYj1DLm1heC1vLHg9ITApO3g/KHYtPTAuOCoodi1nW2pdWzBdKSx0fHwody09MC44Kih3LWdbal1bMV0pKSxjKCkpOmdbal09W3Ysd107cnx8KGZbal09cC1tLGZbbl09byk7Zj1yPzEvcTpxO2Vbbl09bztlW2pdPWI7ZFtyP2E/XCJzY2FsZVlcIjpcblwic2NhbGVYXCI6XCJzY2FsZVwiK2tdPXE7ZFtcInRyYW5zbGF0ZVwiK2tdPWYqbSsodi1mKnMpfSxwaW5jaDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5jaGFydCxkPWIucGluY2hEb3duLGU9Yi5mb2xsb3dUb3VjaE1vdmUsZj1hLnRvdWNoZXMsZz1mLmxlbmd0aCxoPWIubGFzdFZhbGlkVG91Y2gsaT1iLmhhc1pvb20saj1iLnNlbGVjdGlvbk1hcmtlcixrPXt9LGw9Zz09PTEmJihiLmluQ2xhc3MoYS50YXJnZXQsXCJoaWdoY2hhcnRzLXRyYWNrZXJcIikmJmMucnVuVHJhY2tlckNsaWNrfHxiLnJ1bkNoYXJ0Q2xpY2spLG49e307KGl8fGUpJiYhbCYmYS5wcmV2ZW50RGVmYXVsdCgpO1ZhKGYsZnVuY3Rpb24oYSl7cmV0dXJuIGIubm9ybWFsaXplKGEpfSk7aWYoYS50eXBlPT09XCJ0b3VjaHN0YXJ0XCIpcShmLGZ1bmN0aW9uKGEsYil7ZFtiXT17Y2hhcnRYOmEuY2hhcnRYLGNoYXJ0WTphLmNoYXJ0WX19KSxoLng9W2RbMF0uY2hhcnRYLGRbMV0mJmRbMV0uY2hhcnRYXSxoLnk9W2RbMF0uY2hhcnRZLFxuZFsxXSYmZFsxXS5jaGFydFldLHEoYy5heGVzLGZ1bmN0aW9uKGEpe2lmKGEuem9vbUVuYWJsZWQpe3ZhciBiPWMuYm91bmRzW2EuaG9yaXo/XCJoXCI6XCJ2XCJdLGQ9YS5taW5QaXhlbFBhZGRpbmcsZT1hLnRvUGl4ZWxzKHAoYS5vcHRpb25zLm1pbixhLmRhdGFNaW4pKSxmPWEudG9QaXhlbHMocChhLm9wdGlvbnMubWF4LGEuZGF0YU1heCkpLGc9TChlLGYpLGU9dChlLGYpO2IubWluPUwoYS5wb3MsZy1kKTtiLm1heD10KGEucG9zK2EubGVuLGUrZCl9fSksYi5yZXM9ITA7ZWxzZSBpZihkLmxlbmd0aCl7aWYoIWopYi5zZWxlY3Rpb25NYXJrZXI9aj1yKHtkZXN0cm95OnNhfSxjLnBsb3RCb3gpO2IucGluY2hUcmFuc2xhdGUoZCxmLGssaixuLGgpO2IuaGFzUGluY2hlZD1pO2Iuc2NhbGVHcm91cHMoayxuKTtpZighaSYmZSYmZz09PTEpdGhpcy5ydW5Qb2ludEFjdGlvbnMoYi5ub3JtYWxpemUoYSkpO2Vsc2UgaWYoYi5yZXMpYi5yZXM9ITEsdGhpcy5yZXNldCghMSwwKX19LG9uQ29udGFpbmVyVG91Y2hTdGFydDpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMuY2hhcnQ7cGE9Yi5pbmRleDthLnRvdWNoZXMubGVuZ3RoPT09MT8oYT10aGlzLm5vcm1hbGl6ZShhKSxiLmlzSW5zaWRlUGxvdChhLmNoYXJ0WC1iLnBsb3RMZWZ0LGEuY2hhcnRZLWIucGxvdFRvcCk/KHRoaXMucnVuUG9pbnRBY3Rpb25zKGEpLHRoaXMucGluY2goYSkpOnRoaXMucmVzZXQoKSk6YS50b3VjaGVzLmxlbmd0aD09PTImJnRoaXMucGluY2goYSl9LG9uQ29udGFpbmVyVG91Y2hNb3ZlOmZ1bmN0aW9uKGEpeyhhLnRvdWNoZXMubGVuZ3RoPT09MXx8YS50b3VjaGVzLmxlbmd0aD09PTIpJiZ0aGlzLnBpbmNoKGEpfSxvbkRvY3VtZW50VG91Y2hFbmQ6ZnVuY3Rpb24oYSl7V1twYV0mJldbcGFdLnBvaW50ZXIuZHJvcChhKX19KTtpZihHLlBvaW50ZXJFdmVudHx8Ry5NU1BvaW50ZXJFdmVudCl7dmFyIHVhPXt9LHpiPSEhRy5Qb2ludGVyRXZlbnQsWGI9ZnVuY3Rpb24oKXt2YXIgYSxiPVtdO2IuaXRlbT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpc1thXX07Zm9yKGEgaW4gdWEpdWEuaGFzT3duUHJvcGVydHkoYSkmJlxuYi5wdXNoKHtwYWdlWDp1YVthXS5wYWdlWCxwYWdlWTp1YVthXS5wYWdlWSx0YXJnZXQ6dWFbYV0udGFyZ2V0fSk7cmV0dXJuIGJ9LEFiPWZ1bmN0aW9uKGEsYixjLGQpe2E9YS5vcmlnaW5hbEV2ZW50fHxhO2lmKChhLnBvaW50ZXJUeXBlPT09XCJ0b3VjaFwifHxhLnBvaW50ZXJUeXBlPT09YS5NU1BPSU5URVJfVFlQRV9UT1VDSCkmJldbcGFdKWQoYSksZD1XW3BhXS5wb2ludGVyLGRbYl0oe3R5cGU6Yyx0YXJnZXQ6YS5jdXJyZW50VGFyZ2V0LHByZXZlbnREZWZhdWx0OnNhLHRvdWNoZXM6WGIoKX0pfTtyKFdhLnByb3RvdHlwZSx7b25Db250YWluZXJQb2ludGVyRG93bjpmdW5jdGlvbihhKXtBYihhLFwib25Db250YWluZXJUb3VjaFN0YXJ0XCIsXCJ0b3VjaHN0YXJ0XCIsZnVuY3Rpb24oYSl7dWFbYS5wb2ludGVySWRdPXtwYWdlWDphLnBhZ2VYLHBhZ2VZOmEucGFnZVksdGFyZ2V0OmEuY3VycmVudFRhcmdldH19KX0sb25Db250YWluZXJQb2ludGVyTW92ZTpmdW5jdGlvbihhKXtBYihhLFxuXCJvbkNvbnRhaW5lclRvdWNoTW92ZVwiLFwidG91Y2htb3ZlXCIsZnVuY3Rpb24oYSl7dWFbYS5wb2ludGVySWRdPXtwYWdlWDphLnBhZ2VYLHBhZ2VZOmEucGFnZVl9O2lmKCF1YVthLnBvaW50ZXJJZF0udGFyZ2V0KXVhW2EucG9pbnRlcklkXS50YXJnZXQ9YS5jdXJyZW50VGFyZ2V0fSl9LG9uRG9jdW1lbnRQb2ludGVyVXA6ZnVuY3Rpb24oYSl7QWIoYSxcIm9uQ29udGFpbmVyVG91Y2hFbmRcIixcInRvdWNoZW5kXCIsZnVuY3Rpb24oYSl7ZGVsZXRlIHVhW2EucG9pbnRlcklkXX0pfSxiYXRjaE1TRXZlbnRzOmZ1bmN0aW9uKGEpe2EodGhpcy5jaGFydC5jb250YWluZXIsemI/XCJwb2ludGVyZG93blwiOlwiTVNQb2ludGVyRG93blwiLHRoaXMub25Db250YWluZXJQb2ludGVyRG93bik7YSh0aGlzLmNoYXJ0LmNvbnRhaW5lcix6Yj9cInBvaW50ZXJtb3ZlXCI6XCJNU1BvaW50ZXJNb3ZlXCIsdGhpcy5vbkNvbnRhaW5lclBvaW50ZXJNb3ZlKTthKHgsemI/XCJwb2ludGVydXBcIjpcIk1TUG9pbnRlclVwXCIsdGhpcy5vbkRvY3VtZW50UG9pbnRlclVwKX19KTtcbk5hKFdhLnByb3RvdHlwZSxcImluaXRcIixmdW5jdGlvbihhLGIsYyl7YS5jYWxsKHRoaXMsYixjKTsodGhpcy5oYXNab29tfHx0aGlzLmZvbGxvd1RvdWNoTW92ZSkmJkIoYi5jb250YWluZXIse1wiLW1zLXRvdWNoLWFjdGlvblwiOlAsXCJ0b3VjaC1hY3Rpb25cIjpQfSl9KTtOYShXYS5wcm90b3R5cGUsXCJzZXRET01FdmVudHNcIixmdW5jdGlvbihhKXthLmFwcGx5KHRoaXMpOyh0aGlzLmhhc1pvb218fHRoaXMuZm9sbG93VG91Y2hNb3ZlKSYmdGhpcy5iYXRjaE1TRXZlbnRzKE4pfSk7TmEoV2EucHJvdG90eXBlLFwiZGVzdHJveVwiLGZ1bmN0aW9uKGEpe3RoaXMuYmF0Y2hNU0V2ZW50cyhYKTthLmNhbGwodGhpcyl9KX12YXIgbGI9Sy5MZWdlbmQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmluaXQoYSxiKX07bGIucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWIuaXRlbVN0eWxlLGU9cChiLnBhZGRpbmcsOCksZj1iLml0ZW1NYXJnaW5Ub3B8fDA7dGhpcy5vcHRpb25zPWI7XG5pZihiLmVuYWJsZWQpYy5pdGVtU3R5bGU9ZCxjLml0ZW1IaWRkZW5TdHlsZT13KGQsYi5pdGVtSGlkZGVuU3R5bGUpLGMuaXRlbU1hcmdpblRvcD1mLGMucGFkZGluZz1lLGMuaW5pdGlhbEl0ZW1YPWUsYy5pbml0aWFsSXRlbVk9ZS01LGMubWF4SXRlbVdpZHRoPTAsYy5jaGFydD1hLGMuaXRlbUhlaWdodD0wLGMubGFzdExpbmVIZWlnaHQ9MCxjLnN5bWJvbFdpZHRoPXAoYi5zeW1ib2xXaWR0aCwxNiksYy5wYWdlcz1bXSxjLnJlbmRlcigpLE4oYy5jaGFydCxcImVuZFJlc2l6ZVwiLGZ1bmN0aW9uKCl7Yy5wb3NpdGlvbkNoZWNrYm94ZXMoKX0pfSxjb2xvcml6ZUl0ZW06ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLm9wdGlvbnMsZD1hLmxlZ2VuZEl0ZW0sZT1hLmxlZ2VuZExpbmUsZj1hLmxlZ2VuZFN5bWJvbCxnPXRoaXMuaXRlbUhpZGRlblN0eWxlLmNvbG9yLGM9Yj9jLml0ZW1TdHlsZS5jb2xvcjpnLGg9Yj9hLmxlZ2VuZENvbG9yfHxhLmNvbG9yfHxcIiNDQ0NcIjpnLGc9YS5vcHRpb25zJiZcbmEub3B0aW9ucy5tYXJrZXIsaT17ZmlsbDpofSxqO2QmJmQuY3NzKHtmaWxsOmMsY29sb3I6Y30pO2UmJmUuYXR0cih7c3Ryb2tlOmh9KTtpZihmKXtpZihnJiZmLmlzTWFya2VyKWZvcihqIGluIGkuc3Ryb2tlPWgsZz1hLmNvbnZlcnRBdHRyaWJzKGcpLGcpZD1nW2pdLGQhPT11JiYoaVtqXT1kKTtmLmF0dHIoaSl9fSxwb3NpdGlvbkl0ZW06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9Yi5zeW1ib2xQYWRkaW5nLGI9IWIucnRsLGQ9YS5fbGVnZW5kSXRlbVBvcyxlPWRbMF0sZD1kWzFdLGY9YS5jaGVja2JveDthLmxlZ2VuZEdyb3VwJiZhLmxlZ2VuZEdyb3VwLnRyYW5zbGF0ZShiP2U6dGhpcy5sZWdlbmRXaWR0aC1lLTIqYy00LGQpO2lmKGYpZi54PWUsZi55PWR9LGRlc3Ryb3lJdGVtOmZ1bmN0aW9uKGEpe3ZhciBiPWEuY2hlY2tib3g7cShbXCJsZWdlbmRJdGVtXCIsXCJsZWdlbmRMaW5lXCIsXCJsZWdlbmRTeW1ib2xcIixcImxlZ2VuZEdyb3VwXCJdLGZ1bmN0aW9uKGIpe2FbYl0mJlxuKGFbYl09YVtiXS5kZXN0cm95KCkpfSk7YiYmUWEoYS5jaGVja2JveCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdyb3VwLGI9dGhpcy5ib3g7aWYoYil0aGlzLmJveD1iLmRlc3Ryb3koKTtpZihhKXRoaXMuZ3JvdXA9YS5kZXN0cm95KCl9LHBvc2l0aW9uQ2hlY2tib3hlczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmdyb3VwLmFsaWduQXR0cixjLGQ9dGhpcy5jbGlwSGVpZ2h0fHx0aGlzLmxlZ2VuZEhlaWdodDtpZihiKWM9Yi50cmFuc2xhdGVZLHEodGhpcy5hbGxJdGVtcyxmdW5jdGlvbihlKXt2YXIgZj1lLmNoZWNrYm94LGc7ZiYmKGc9YytmLnkrKGF8fDApKzMsQihmLHtsZWZ0OmIudHJhbnNsYXRlWCtlLmNoZWNrYm94T2Zmc2V0K2YueC0yMCtcInB4XCIsdG9wOmcrXCJweFwiLGRpc3BsYXk6Zz5jLTYmJmc8YytkLTY/XCJcIjpQfSkpfSl9LHJlbmRlclRpdGxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5wYWRkaW5nLGI9dGhpcy5vcHRpb25zLnRpdGxlLGM9MDtpZihiLnRleHQpe2lmKCF0aGlzLnRpdGxlKXRoaXMudGl0bGU9XG50aGlzLmNoYXJ0LnJlbmRlcmVyLmxhYmVsKGIudGV4dCxhLTMsYS00LG51bGwsbnVsbCxudWxsLG51bGwsbnVsbCxcImxlZ2VuZC10aXRsZVwiKS5hdHRyKHt6SW5kZXg6MX0pLmNzcyhiLnN0eWxlKS5hZGQodGhpcy5ncm91cCk7YT10aGlzLnRpdGxlLmdldEJCb3goKTtjPWEuaGVpZ2h0O3RoaXMub2Zmc2V0V2lkdGg9YS53aWR0aDt0aGlzLmNvbnRlbnRHcm91cC5hdHRyKHt0cmFuc2xhdGVZOmN9KX10aGlzLnRpdGxlSGVpZ2h0PWN9LHJlbmRlckl0ZW06ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxjPWIucmVuZGVyZXIsZD10aGlzLm9wdGlvbnMsZT1kLmxheW91dD09PVwiaG9yaXpvbnRhbFwiLGY9dGhpcy5zeW1ib2xXaWR0aCxnPWQuc3ltYm9sUGFkZGluZyxoPXRoaXMuaXRlbVN0eWxlLGk9dGhpcy5pdGVtSGlkZGVuU3R5bGUsaj10aGlzLnBhZGRpbmcsaz1lP3AoZC5pdGVtRGlzdGFuY2UsMjApOjAsbD0hZC5ydGwsbj1kLndpZHRoLG09ZC5pdGVtTWFyZ2luQm90dG9tfHwwLFxubz10aGlzLml0ZW1NYXJnaW5Ub3AscT10aGlzLmluaXRpYWxJdGVtWCxyPWEubGVnZW5kSXRlbSxzPWEuc2VyaWVzJiZhLnNlcmllcy5kcmF3TGVnZW5kU3ltYm9sP2Euc2VyaWVzOmEsQz1zLm9wdGlvbnMsQz10aGlzLmNyZWF0ZUNoZWNrYm94Rm9ySXRlbSYmQyYmQy5zaG93Q2hlY2tib3gsdT1kLnVzZUhUTUw7aWYoIXIpe2EubGVnZW5kR3JvdXA9Yy5nKFwibGVnZW5kLWl0ZW1cIikuYXR0cih7ekluZGV4OjF9KS5hZGQodGhpcy5zY3JvbGxHcm91cCk7YS5sZWdlbmRJdGVtPXI9Yy50ZXh0KGQubGFiZWxGb3JtYXQ/SmEoZC5sYWJlbEZvcm1hdCxhKTpkLmxhYmVsRm9ybWF0dGVyLmNhbGwoYSksbD9mK2c6LWcsdGhpcy5iYXNlbGluZXx8MCx1KS5jc3ModyhhLnZpc2libGU/aDppKSkuYXR0cih7YWxpZ246bD9cImxlZnRcIjpcInJpZ2h0XCIsekluZGV4OjJ9KS5hZGQoYS5sZWdlbmRHcm91cCk7aWYoIXRoaXMuYmFzZWxpbmUpdGhpcy5iYXNlbGluZT1jLmZvbnRNZXRyaWNzKGguZm9udFNpemUsXG5yKS5mKzMrbyxyLmF0dHIoXCJ5XCIsdGhpcy5iYXNlbGluZSk7cy5kcmF3TGVnZW5kU3ltYm9sKHRoaXMsYSk7dGhpcy5zZXRJdGVtRXZlbnRzJiZ0aGlzLnNldEl0ZW1FdmVudHMoYSxyLHUsaCxpKTt0aGlzLmNvbG9yaXplSXRlbShhLGEudmlzaWJsZSk7QyYmdGhpcy5jcmVhdGVDaGVja2JveEZvckl0ZW0oYSl9Yz1yLmdldEJCb3goKTtmPWEuY2hlY2tib3hPZmZzZXQ9ZC5pdGVtV2lkdGh8fGEubGVnZW5kSXRlbVdpZHRofHxmK2crYy53aWR0aCtrKyhDPzIwOjApO3RoaXMuaXRlbUhlaWdodD1nPXYoYS5sZWdlbmRJdGVtSGVpZ2h0fHxjLmhlaWdodCk7aWYoZSYmdGhpcy5pdGVtWC1xK2Y+KG58fGIuY2hhcnRXaWR0aC0yKmotcS1kLngpKXRoaXMuaXRlbVg9cSx0aGlzLml0ZW1ZKz1vK3RoaXMubGFzdExpbmVIZWlnaHQrbSx0aGlzLmxhc3RMaW5lSGVpZ2h0PTA7dGhpcy5tYXhJdGVtV2lkdGg9dCh0aGlzLm1heEl0ZW1XaWR0aCxmKTt0aGlzLmxhc3RJdGVtWT1vK3RoaXMuaXRlbVkrXG5tO3RoaXMubGFzdExpbmVIZWlnaHQ9dChnLHRoaXMubGFzdExpbmVIZWlnaHQpO2EuX2xlZ2VuZEl0ZW1Qb3M9W3RoaXMuaXRlbVgsdGhpcy5pdGVtWV07ZT90aGlzLml0ZW1YKz1mOih0aGlzLml0ZW1ZKz1vK2crbSx0aGlzLmxhc3RMaW5lSGVpZ2h0PWcpO3RoaXMub2Zmc2V0V2lkdGg9bnx8dCgoZT90aGlzLml0ZW1YLXEtazpmKStqLHRoaXMub2Zmc2V0V2lkdGgpfSxnZXRBbGxJdGVtczpmdW5jdGlvbigpe3ZhciBhPVtdO3EodGhpcy5jaGFydC5zZXJpZXMsZnVuY3Rpb24oYil7dmFyIGM9Yi5vcHRpb25zO2lmKHAoYy5zaG93SW5MZWdlbmQsIXMoYy5saW5rZWRUbyk/dTohMSwhMCkpYT1hLmNvbmNhdChiLmxlZ2VuZEl0ZW1zfHwoYy5sZWdlbmRUeXBlPT09XCJwb2ludFwiP2IuZGF0YTpiKSl9KTtyZXR1cm4gYX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2hhcnQsYz1iLnJlbmRlcmVyLGQ9YS5ncm91cCxlLGYsZyxoLGk9YS5ib3gsaj1hLm9wdGlvbnMsaz1hLnBhZGRpbmcsXG5sPWouYm9yZGVyV2lkdGgsbj1qLmJhY2tncm91bmRDb2xvcjthLml0ZW1YPWEuaW5pdGlhbEl0ZW1YO2EuaXRlbVk9YS5pbml0aWFsSXRlbVk7YS5vZmZzZXRXaWR0aD0wO2EubGFzdEl0ZW1ZPTA7aWYoIWQpYS5ncm91cD1kPWMuZyhcImxlZ2VuZFwiKS5hdHRyKHt6SW5kZXg6N30pLmFkZCgpLGEuY29udGVudEdyb3VwPWMuZygpLmF0dHIoe3pJbmRleDoxfSkuYWRkKGQpLGEuc2Nyb2xsR3JvdXA9Yy5nKCkuYWRkKGEuY29udGVudEdyb3VwKTthLnJlbmRlclRpdGxlKCk7ZT1hLmdldEFsbEl0ZW1zKCk7b2IoZSxmdW5jdGlvbihhLGIpe3JldHVybihhLm9wdGlvbnMmJmEub3B0aW9ucy5sZWdlbmRJbmRleHx8MCktKGIub3B0aW9ucyYmYi5vcHRpb25zLmxlZ2VuZEluZGV4fHwwKX0pO2oucmV2ZXJzZWQmJmUucmV2ZXJzZSgpO2EuYWxsSXRlbXM9ZTthLmRpc3BsYXk9Zj0hIWUubGVuZ3RoO3EoZSxmdW5jdGlvbihiKXthLnJlbmRlckl0ZW0oYil9KTtnPWoud2lkdGh8fGEub2Zmc2V0V2lkdGg7XG5oPWEubGFzdEl0ZW1ZK2EubGFzdExpbmVIZWlnaHQrYS50aXRsZUhlaWdodDtoPWEuaGFuZGxlT3ZlcmZsb3coaCk7aWYobHx8bil7Zys9aztoKz1rO2lmKGkpe2lmKGc+MCYmaD4wKWlbaS5pc05ldz9cImF0dHJcIjpcImFuaW1hdGVcIl0oaS5jcmlzcCh7d2lkdGg6ZyxoZWlnaHQ6aH0pKSxpLmlzTmV3PSExfWVsc2UgYS5ib3g9aT1jLnJlY3QoMCwwLGcsaCxqLmJvcmRlclJhZGl1cyxsfHwwKS5hdHRyKHtzdHJva2U6ai5ib3JkZXJDb2xvcixcInN0cm9rZS13aWR0aFwiOmx8fDAsZmlsbDpufHxQfSkuYWRkKGQpLnNoYWRvdyhqLnNoYWRvdyksaS5pc05ldz0hMDtpW2Y/XCJzaG93XCI6XCJoaWRlXCJdKCl9YS5sZWdlbmRXaWR0aD1nO2EubGVnZW5kSGVpZ2h0PWg7cShlLGZ1bmN0aW9uKGIpe2EucG9zaXRpb25JdGVtKGIpfSk7ZiYmZC5hbGlnbihyKHt3aWR0aDpnLGhlaWdodDpofSxqKSwhMCxcInNwYWNpbmdCb3hcIik7Yi5pc1Jlc2l6aW5nfHx0aGlzLnBvc2l0aW9uQ2hlY2tib3hlcygpfSxoYW5kbGVPdmVyZmxvdzpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMsYz10aGlzLmNoYXJ0LGQ9Yy5yZW5kZXJlcixlPXRoaXMub3B0aW9ucyxmPWUueSxmPWMuc3BhY2luZ0JveC5oZWlnaHQrKGUudmVydGljYWxBbGlnbj09PVwidG9wXCI/LWY6ZiktdGhpcy5wYWRkaW5nLGc9ZS5tYXhIZWlnaHQsaCxpPXRoaXMuY2xpcFJlY3Qsaj1lLm5hdmlnYXRpb24saz1wKGouYW5pbWF0aW9uLCEwKSxsPWouYXJyb3dTaXplfHwxMixuPXRoaXMubmF2LG09dGhpcy5wYWdlcyxvLHI9dGhpcy5hbGxJdGVtcztlLmxheW91dD09PVwiaG9yaXpvbnRhbFwiJiYoZi89Mik7ZyYmKGY9TChmLGcpKTttLmxlbmd0aD0wO2lmKGE+ZiYmIWUudXNlSFRNTCl7dGhpcy5jbGlwSGVpZ2h0PWg9dChmLTIwLXRoaXMudGl0bGVIZWlnaHQtdGhpcy5wYWRkaW5nLDApO3RoaXMuY3VycmVudFBhZ2U9cCh0aGlzLmN1cnJlbnRQYWdlLDEpO3RoaXMuZnVsbEhlaWdodD1hO3EocixmdW5jdGlvbihhLGIpe3ZhciBjPWEuX2xlZ2VuZEl0ZW1Qb3NbMV0sZD12KGEubGVnZW5kSXRlbS5nZXRCQm94KCkuaGVpZ2h0KSxcbmU9bS5sZW5ndGg7aWYoIWV8fGMtbVtlLTFdPmgmJihvfHxjKSE9PW1bZS0xXSltLnB1c2gob3x8YyksZSsrO2I9PT1yLmxlbmd0aC0xJiZjK2QtbVtlLTFdPmgmJm0ucHVzaChjKTtjIT09byYmKG89Yyl9KTtpZighaSlpPWIuY2xpcFJlY3Q9ZC5jbGlwUmVjdCgwLHRoaXMucGFkZGluZyw5OTk5LDApLGIuY29udGVudEdyb3VwLmNsaXAoaSk7aS5hdHRyKHtoZWlnaHQ6aH0pO2lmKCFuKXRoaXMubmF2PW49ZC5nKCkuYXR0cih7ekluZGV4OjF9KS5hZGQodGhpcy5ncm91cCksdGhpcy51cD1kLnN5bWJvbChcInRyaWFuZ2xlXCIsMCwwLGwsbCkub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7Yi5zY3JvbGwoLTEsayl9KS5hZGQobiksdGhpcy5wYWdlcj1kLnRleHQoXCJcIiwxNSwxMCkuY3NzKGouc3R5bGUpLmFkZChuKSx0aGlzLmRvd249ZC5zeW1ib2woXCJ0cmlhbmdsZS1kb3duXCIsMCwwLGwsbCkub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7Yi5zY3JvbGwoMSxrKX0pLmFkZChuKTtiLnNjcm9sbCgwKTtcbmE9Zn1lbHNlIGlmKG4paS5hdHRyKHtoZWlnaHQ6Yy5jaGFydEhlaWdodH0pLG4uaGlkZSgpLHRoaXMuc2Nyb2xsR3JvdXAuYXR0cih7dHJhbnNsYXRlWToxfSksdGhpcy5jbGlwSGVpZ2h0PTA7cmV0dXJuIGF9LHNjcm9sbDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMucGFnZXMsZD1jLmxlbmd0aCxlPXRoaXMuY3VycmVudFBhZ2UrYSxmPXRoaXMuY2xpcEhlaWdodCxnPXRoaXMub3B0aW9ucy5uYXZpZ2F0aW9uLGg9Zy5hY3RpdmVDb2xvcixnPWcuaW5hY3RpdmVDb2xvcixpPXRoaXMucGFnZXIsaj10aGlzLnBhZGRpbmc7ZT5kJiYoZT1kKTtpZihlPjApYiE9PXUmJlJhKGIsdGhpcy5jaGFydCksdGhpcy5uYXYuYXR0cih7dHJhbnNsYXRlWDpqLHRyYW5zbGF0ZVk6Zit0aGlzLnBhZGRpbmcrNyt0aGlzLnRpdGxlSGVpZ2h0LHZpc2liaWxpdHk6XCJ2aXNpYmxlXCJ9KSx0aGlzLnVwLmF0dHIoe2ZpbGw6ZT09PTE/ZzpofSkuY3NzKHtjdXJzb3I6ZT09PTE/XCJkZWZhdWx0XCI6XCJwb2ludGVyXCJ9KSxcbmkuYXR0cih7dGV4dDplK1wiL1wiK2R9KSx0aGlzLmRvd24uYXR0cih7eDoxOCt0aGlzLnBhZ2VyLmdldEJCb3goKS53aWR0aCxmaWxsOmU9PT1kP2c6aH0pLmNzcyh7Y3Vyc29yOmU9PT1kP1wiZGVmYXVsdFwiOlwicG9pbnRlclwifSksYz0tY1tlLTFdK3RoaXMuaW5pdGlhbEl0ZW1ZLHRoaXMuc2Nyb2xsR3JvdXAuYW5pbWF0ZSh7dHJhbnNsYXRlWTpjfSksdGhpcy5jdXJyZW50UGFnZT1lLHRoaXMucG9zaXRpb25DaGVja2JveGVzKGMpfX07TT1LLkxlZ2VuZFN5bWJvbE1peGluPXtkcmF3UmVjdGFuZ2xlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5vcHRpb25zLnN5bWJvbEhlaWdodHx8MTI7Yi5sZWdlbmRTeW1ib2w9dGhpcy5jaGFydC5yZW5kZXJlci5yZWN0KDAsYS5iYXNlbGluZS01LWMvMixhLnN5bWJvbFdpZHRoLGMsYS5vcHRpb25zLnN5bWJvbFJhZGl1c3x8MCkuYXR0cih7ekluZGV4OjN9KS5hZGQoYi5sZWdlbmRHcm91cCl9LGRyYXdMaW5lTWFya2VyOmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcy5vcHRpb25zLGM9Yi5tYXJrZXIsZDtkPWEuc3ltYm9sV2lkdGg7dmFyIGU9dGhpcy5jaGFydC5yZW5kZXJlcixmPXRoaXMubGVnZW5kR3JvdXAsYT1hLmJhc2VsaW5lLXYoZS5mb250TWV0cmljcyhhLm9wdGlvbnMuaXRlbVN0eWxlLmZvbnRTaXplLHRoaXMubGVnZW5kSXRlbSkuYiowLjMpLGc7aWYoYi5saW5lV2lkdGgpe2c9e1wic3Ryb2tlLXdpZHRoXCI6Yi5saW5lV2lkdGh9O2lmKGIuZGFzaFN0eWxlKWcuZGFzaHN0eWxlPWIuZGFzaFN0eWxlO3RoaXMubGVnZW5kTGluZT1lLnBhdGgoW1wiTVwiLDAsYSxcIkxcIixkLGFdKS5hdHRyKGcpLmFkZChmKX1pZihjJiZjLmVuYWJsZWQhPT0hMSliPWMucmFkaXVzLHRoaXMubGVnZW5kU3ltYm9sPWQ9ZS5zeW1ib2wodGhpcy5zeW1ib2wsZC8yLWIsYS1iLDIqYiwyKmIpLmFkZChmKSxkLmlzTWFya2VyPSEwfX07KC9UcmlkZW50XFwvN1xcLjAvLnRlc3Qod2EpfHxVYSkmJk5hKGxiLnByb3RvdHlwZSxcInBvc2l0aW9uSXRlbVwiLGZ1bmN0aW9uKGEsXG5iKXt2YXIgYz10aGlzLGQ9ZnVuY3Rpb24oKXtiLl9sZWdlbmRJdGVtUG9zJiZhLmNhbGwoYyxiKX07ZCgpO3NldFRpbWVvdXQoZCl9KTtZYS5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPWEuc2VyaWVzO2Euc2VyaWVzPW51bGw7Yz13KEUsYSk7Yy5zZXJpZXM9YS5zZXJpZXM9ZDt0aGlzLnVzZXJPcHRpb25zPWE7ZD1jLmNoYXJ0O3RoaXMubWFyZ2luPXRoaXMuc3BsYXNoQXJyYXkoXCJtYXJnaW5cIixkKTt0aGlzLnNwYWNpbmc9dGhpcy5zcGxhc2hBcnJheShcInNwYWNpbmdcIixkKTt2YXIgZT1kLmV2ZW50czt0aGlzLmJvdW5kcz17aDp7fSx2Ont9fTt0aGlzLmNhbGxiYWNrPWI7dGhpcy5pc1Jlc2l6aW5nPTA7dGhpcy5vcHRpb25zPWM7dGhpcy5heGVzPVtdO3RoaXMuc2VyaWVzPVtdO3RoaXMuaGFzQ2FydGVzaWFuU2VyaWVzPWQuc2hvd0F4ZXM7dmFyIGY9dGhpcyxnO2YuaW5kZXg9Vy5sZW5ndGg7Vy5wdXNoKGYpO2FiKys7ZC5yZWZsb3chPT0hMSYmTihmLFwibG9hZFwiLFxuZnVuY3Rpb24oKXtmLmluaXRSZWZsb3coKX0pO2lmKGUpZm9yKGcgaW4gZSlOKGYsZyxlW2ddKTtmLnhBeGlzPVtdO2YueUF4aXM9W107Zi5hbmltYXRpb249Z2E/ITE6cChkLmFuaW1hdGlvbiwhMCk7Zi5wb2ludENvdW50PWYuY29sb3JDb3VudGVyPWYuc3ltYm9sQ291bnRlcj0wO2YuZmlyc3RSZW5kZXIoKX0saW5pdFNlcmllczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMuY2hhcnQ7KGI9SFthLnR5cGV8fGIudHlwZXx8Yi5kZWZhdWx0U2VyaWVzVHlwZV0pfHxoYSgxNywhMCk7Yj1uZXcgYjtiLmluaXQodGhpcyxhKTtyZXR1cm4gYn0saXNJbnNpZGVQbG90OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jP2I6YSxhPWM/YTpiO3JldHVybiBkPj0wJiZkPD10aGlzLnBsb3RXaWR0aCYmYT49MCYmYTw9dGhpcy5wbG90SGVpZ2h0fSxhZGp1c3RUaWNrQW1vdW50czpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5jaGFydC5hbGlnblRpY2tzIT09ITEmJnEodGhpcy5heGVzLGZ1bmN0aW9uKGEpe2EuYWRqdXN0VGlja0Ftb3VudCgpfSk7XG50aGlzLm1heFRpY2tzPW51bGx9LHJlZHJhdzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmF4ZXMsYz10aGlzLnNlcmllcyxkPXRoaXMucG9pbnRlcixlPXRoaXMubGVnZW5kLGY9dGhpcy5pc0RpcnR5TGVnZW5kLGcsaCxpPXRoaXMuaGFzQ2FydGVzaWFuU2VyaWVzLGo9dGhpcy5pc0RpcnR5Qm94LGs9Yy5sZW5ndGgsbD1rLG49dGhpcy5yZW5kZXJlcixtPW4uaXNIaWRkZW4oKSxvPVtdO1JhKGEsdGhpcyk7bSYmdGhpcy5jbG9uZVJlbmRlclRvKCk7Zm9yKHRoaXMubGF5T3V0VGl0bGVzKCk7bC0tOylpZihhPWNbbF0sYS5vcHRpb25zLnN0YWNraW5nJiYoZz0hMCxhLmlzRGlydHkpKXtoPSEwO2JyZWFrfWlmKGgpZm9yKGw9aztsLS07KWlmKGE9Y1tsXSxhLm9wdGlvbnMuc3RhY2tpbmcpYS5pc0RpcnR5PSEwO3EoYyxmdW5jdGlvbihhKXthLmlzRGlydHkmJmEub3B0aW9ucy5sZWdlbmRUeXBlPT09XCJwb2ludFwiJiYoZj0hMCl9KTtpZihmJiZlLm9wdGlvbnMuZW5hYmxlZCllLnJlbmRlcigpLFxudGhpcy5pc0RpcnR5TGVnZW5kPSExO2cmJnRoaXMuZ2V0U3RhY2tzKCk7aWYoaSl7aWYoIXRoaXMuaXNSZXNpemluZyl0aGlzLm1heFRpY2tzPW51bGwscShiLGZ1bmN0aW9uKGEpe2Euc2V0U2NhbGUoKX0pO3RoaXMuYWRqdXN0VGlja0Ftb3VudHMoKX10aGlzLmdldE1hcmdpbnMoKTtpJiYocShiLGZ1bmN0aW9uKGEpe2EuaXNEaXJ0eSYmKGo9ITApfSkscShiLGZ1bmN0aW9uKGEpe2lmKGEuaXNEaXJ0eUV4dHJlbWVzKWEuaXNEaXJ0eUV4dHJlbWVzPSExLG8ucHVzaChmdW5jdGlvbigpe0koYSxcImFmdGVyU2V0RXh0cmVtZXNcIixyKGEuZXZlbnRBcmdzLGEuZ2V0RXh0cmVtZXMoKSkpO2RlbGV0ZSBhLmV2ZW50QXJnc30pOyhqfHxnKSYmYS5yZWRyYXcoKX0pKTtqJiZ0aGlzLmRyYXdDaGFydEJveCgpO3EoYyxmdW5jdGlvbihhKXthLmlzRGlydHkmJmEudmlzaWJsZSYmKCFhLmlzQ2FydGVzaWFufHxhLnhBeGlzKSYmYS5yZWRyYXcoKX0pO2QmJmQucmVzZXQoITApO24uZHJhdygpO0kodGhpcyxcblwicmVkcmF3XCIpO20mJnRoaXMuY2xvbmVSZW5kZXJUbyghMCk7cShvLGZ1bmN0aW9uKGEpe2EuY2FsbCgpfSl9LGdldDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmF4ZXMsYz10aGlzLnNlcmllcyxkLGU7Zm9yKGQ9MDtkPGIubGVuZ3RoO2QrKylpZihiW2RdLm9wdGlvbnMuaWQ9PT1hKXJldHVybiBiW2RdO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspaWYoY1tkXS5vcHRpb25zLmlkPT09YSlyZXR1cm4gY1tkXTtmb3IoZD0wO2Q8Yy5sZW5ndGg7ZCsrKXtlPWNbZF0ucG9pbnRzfHxbXTtmb3IoYj0wO2I8ZS5sZW5ndGg7YisrKWlmKGVbYl0uaWQ9PT1hKXJldHVybiBlW2JdfXJldHVybiBudWxsfSxnZXRBeGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPXRoaXMub3B0aW9ucyxjPWIueEF4aXM9cmEoYi54QXhpc3x8e30pLGI9Yi55QXhpcz1yYShiLnlBeGlzfHx7fSk7cShjLGZ1bmN0aW9uKGEsYil7YS5pbmRleD1iO2EuaXNYPSEwfSk7cShiLGZ1bmN0aW9uKGEsYil7YS5pbmRleD1ifSk7XG5jPWMuY29uY2F0KGIpO3EoYyxmdW5jdGlvbihiKXtuZXcgbmEoYSxiKX0pO2EuYWRqdXN0VGlja0Ftb3VudHMoKX0sZ2V0U2VsZWN0ZWRQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT1bXTtxKHRoaXMuc2VyaWVzLGZ1bmN0aW9uKGIpe2E9YS5jb25jYXQod2IoYi5wb2ludHN8fFtdLGZ1bmN0aW9uKGEpe3JldHVybiBhLnNlbGVjdGVkfSkpfSk7cmV0dXJuIGF9LGdldFNlbGVjdGVkU2VyaWVzOmZ1bmN0aW9uKCl7cmV0dXJuIHdiKHRoaXMuc2VyaWVzLGZ1bmN0aW9uKGEpe3JldHVybiBhLnNlbGVjdGVkfSl9LGdldFN0YWNrczpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cShhLnlBeGlzLGZ1bmN0aW9uKGEpe2lmKGEuc3RhY2tzJiZhLmhhc1Zpc2libGVTZXJpZXMpYS5vbGRTdGFja3M9YS5zdGFja3N9KTtxKGEuc2VyaWVzLGZ1bmN0aW9uKGIpe2lmKGIub3B0aW9ucy5zdGFja2luZyYmKGIudmlzaWJsZT09PSEwfHxhLm9wdGlvbnMuY2hhcnQuaWdub3JlSGlkZGVuU2VyaWVzPT09ITEpKWIuc3RhY2tLZXk9XG5iLnR5cGUrcChiLm9wdGlvbnMuc3RhY2ssXCJcIil9KX0sc2V0VGl0bGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBnO3ZhciBkPXRoaXMsZT1kLm9wdGlvbnMsZjtmPWUudGl0bGU9dyhlLnRpdGxlLGEpO2c9ZS5zdWJ0aXRsZT13KGUuc3VidGl0bGUsYiksZT1nO3EoW1tcInRpdGxlXCIsYSxmXSxbXCJzdWJ0aXRsZVwiLGIsZV1dLGZ1bmN0aW9uKGEpe3ZhciBiPWFbMF0sYz1kW2JdLGU9YVsxXSxhPWFbMl07YyYmZSYmKGRbYl09Yz1jLmRlc3Ryb3koKSk7YSYmYS50ZXh0JiYhYyYmKGRbYl09ZC5yZW5kZXJlci50ZXh0KGEudGV4dCwwLDAsYS51c2VIVE1MKS5hdHRyKHthbGlnbjphLmFsaWduLFwiY2xhc3NcIjpcImhpZ2hjaGFydHMtXCIrYix6SW5kZXg6YS56SW5kZXh8fDR9KS5jc3MoYS5zdHlsZSkuYWRkKCkpfSk7ZC5sYXlPdXRUaXRsZXMoYyl9LGxheU91dFRpdGxlczpmdW5jdGlvbihhKXt2YXIgYj0wLGM9dGhpcy50aXRsZSxkPXRoaXMuc3VidGl0bGUsZT10aGlzLm9wdGlvbnMsZj1lLnRpdGxlLFxuZT1lLnN1YnRpdGxlLGc9dGhpcy5yZW5kZXJlcixoPXRoaXMuc3BhY2luZ0JveC53aWR0aC00NDtpZihjJiYoYy5jc3Moe3dpZHRoOihmLndpZHRofHxoKStcInB4XCJ9KS5hbGlnbihyKHt5OmcuZm9udE1ldHJpY3MoZi5zdHlsZS5mb250U2l6ZSxjKS5iLTN9LGYpLCExLFwic3BhY2luZ0JveFwiKSwhZi5mbG9hdGluZyYmIWYudmVydGljYWxBbGlnbikpYj1jLmdldEJCb3goKS5oZWlnaHQ7ZCYmKGQuY3NzKHt3aWR0aDooZS53aWR0aHx8aCkrXCJweFwifSkuYWxpZ24ocih7eTpiKyhmLm1hcmdpbi0xMykrZy5mb250TWV0cmljcyhmLnN0eWxlLmZvbnRTaXplLGQpLmJ9LGUpLCExLFwic3BhY2luZ0JveFwiKSwhZS5mbG9hdGluZyYmIWUudmVydGljYWxBbGlnbiYmKGI9TGEoYitkLmdldEJCb3goKS5oZWlnaHQpKSk7Yz10aGlzLnRpdGxlT2Zmc2V0IT09Yjt0aGlzLnRpdGxlT2Zmc2V0PWI7aWYoIXRoaXMuaXNEaXJ0eUJveCYmYyl0aGlzLmlzRGlydHlCb3g9Yyx0aGlzLmhhc1JlbmRlcmVkJiZcbnAoYSwhMCkmJnRoaXMuaXNEaXJ0eUJveCYmdGhpcy5yZWRyYXcoKX0sZ2V0Q2hhcnRTaXplOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLmNoYXJ0LGI9YS53aWR0aCxhPWEuaGVpZ2h0LGM9dGhpcy5yZW5kZXJUb0Nsb25lfHx0aGlzLnJlbmRlclRvO2lmKCFzKGIpKXRoaXMuY29udGFpbmVyV2lkdGg9aWIoYyxcIndpZHRoXCIpO2lmKCFzKGEpKXRoaXMuY29udGFpbmVySGVpZ2h0PWliKGMsXCJoZWlnaHRcIik7dGhpcy5jaGFydFdpZHRoPXQoMCxifHx0aGlzLmNvbnRhaW5lcldpZHRofHw2MDApO3RoaXMuY2hhcnRIZWlnaHQ9dCgwLHAoYSx0aGlzLmNvbnRhaW5lckhlaWdodD4xOT90aGlzLmNvbnRhaW5lckhlaWdodDo0MDApKX0sY2xvbmVSZW5kZXJUbzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnJlbmRlclRvQ2xvbmUsYz10aGlzLmNvbnRhaW5lcjthP2ImJih0aGlzLnJlbmRlclRvLmFwcGVuZENoaWxkKGMpLFFhKGIpLGRlbGV0ZSB0aGlzLnJlbmRlclRvQ2xvbmUpOihjJiZcbmMucGFyZW50Tm9kZT09PXRoaXMucmVuZGVyVG8mJnRoaXMucmVuZGVyVG8ucmVtb3ZlQ2hpbGQoYyksdGhpcy5yZW5kZXJUb0Nsb25lPWI9dGhpcy5yZW5kZXJUby5jbG9uZU5vZGUoMCksQihiLHtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOlwiLTk5OTlweFwiLGRpc3BsYXk6XCJibG9ja1wifSksYi5zdHlsZS5zZXRQcm9wZXJ0eSYmYi5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIixcImJsb2NrXCIsXCJpbXBvcnRhbnRcIikseC5ib2R5LmFwcGVuZENoaWxkKGIpLGMmJmIuYXBwZW5kQ2hpbGQoYykpfSxnZXRDb250YWluZXI6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMub3B0aW9ucy5jaGFydCxjLGQsZTt0aGlzLnJlbmRlclRvPWE9Yi5yZW5kZXJUbztlPVwiaGlnaGNoYXJ0cy1cIit1YisrO2lmKEdhKGEpKXRoaXMucmVuZGVyVG89YT14LmdldEVsZW1lbnRCeUlkKGEpO2F8fGhhKDEzLCEwKTtjPXkoRihhLFwiZGF0YS1oaWdoY2hhcnRzLWNoYXJ0XCIpKTshaXNOYU4oYykmJldbY10mJldbY10uaGFzUmVuZGVyZWQmJlxuV1tjXS5kZXN0cm95KCk7RihhLFwiZGF0YS1oaWdoY2hhcnRzLWNoYXJ0XCIsdGhpcy5pbmRleCk7YS5pbm5lckhUTUw9XCJcIjshYi5za2lwQ2xvbmUmJiFhLm9mZnNldFdpZHRoJiZ0aGlzLmNsb25lUmVuZGVyVG8oKTt0aGlzLmdldENoYXJ0U2l6ZSgpO2M9dGhpcy5jaGFydFdpZHRoO2Q9dGhpcy5jaGFydEhlaWdodDt0aGlzLmNvbnRhaW5lcj1hPSQoS2Ese2NsYXNzTmFtZTpcImhpZ2hjaGFydHMtY29udGFpbmVyXCIrKGIuY2xhc3NOYW1lP1wiIFwiK2IuY2xhc3NOYW1lOlwiXCIpLGlkOmV9LHIoe3Bvc2l0aW9uOlwicmVsYXRpdmVcIixvdmVyZmxvdzpcImhpZGRlblwiLHdpZHRoOmMrXCJweFwiLGhlaWdodDpkK1wicHhcIix0ZXh0QWxpZ246XCJsZWZ0XCIsbGluZUhlaWdodDpcIm5vcm1hbFwiLHpJbmRleDowLFwiLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yXCI6XCJyZ2JhKDAsMCwwLDApXCJ9LGIuc3R5bGUpLHRoaXMucmVuZGVyVG9DbG9uZXx8YSk7dGhpcy5fY3Vyc29yPWEuc3R5bGUuY3Vyc29yO3RoaXMucmVuZGVyZXI9XG5iLmZvckV4cG9ydD9uZXcgdGEoYSxjLGQsYi5zdHlsZSwhMCk6bmV3IFphKGEsYyxkLGIuc3R5bGUpO2dhJiZ0aGlzLnJlbmRlcmVyLmNyZWF0ZSh0aGlzLGEsYyxkKX0sZ2V0TWFyZ2luczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc3BhY2luZyxiLGM9dGhpcy5sZWdlbmQsZD10aGlzLm1hcmdpbixlPXRoaXMub3B0aW9ucy5sZWdlbmQsZj1wKGUubWFyZ2luLDIwKSxnPWUueCxoPWUueSxpPWUuYWxpZ24saj1lLnZlcnRpY2FsQWxpZ24saz10aGlzLnRpdGxlT2Zmc2V0O3RoaXMucmVzZXRNYXJnaW5zKCk7Yj10aGlzLmF4aXNPZmZzZXQ7aWYoayYmIXMoZFswXSkpdGhpcy5wbG90VG9wPXQodGhpcy5wbG90VG9wLGsrdGhpcy5vcHRpb25zLnRpdGxlLm1hcmdpbithWzBdKTtpZihjLmRpc3BsYXkmJiFlLmZsb2F0aW5nKWlmKGk9PT1cInJpZ2h0XCIpe2lmKCFzKGRbMV0pKXRoaXMubWFyZ2luUmlnaHQ9dCh0aGlzLm1hcmdpblJpZ2h0LGMubGVnZW5kV2lkdGgtZytmK2FbMV0pfWVsc2UgaWYoaT09PVxuXCJsZWZ0XCIpe2lmKCFzKGRbM10pKXRoaXMucGxvdExlZnQ9dCh0aGlzLnBsb3RMZWZ0LGMubGVnZW5kV2lkdGgrZytmK2FbM10pfWVsc2UgaWYoaj09PVwidG9wXCIpe2lmKCFzKGRbMF0pKXRoaXMucGxvdFRvcD10KHRoaXMucGxvdFRvcCxjLmxlZ2VuZEhlaWdodCtoK2YrYVswXSl9ZWxzZSBpZihqPT09XCJib3R0b21cIiYmIXMoZFsyXSkpdGhpcy5tYXJnaW5Cb3R0b209dCh0aGlzLm1hcmdpbkJvdHRvbSxjLmxlZ2VuZEhlaWdodC1oK2YrYVsyXSk7dGhpcy5leHRyYUJvdHRvbU1hcmdpbiYmKHRoaXMubWFyZ2luQm90dG9tKz10aGlzLmV4dHJhQm90dG9tTWFyZ2luKTt0aGlzLmV4dHJhVG9wTWFyZ2luJiYodGhpcy5wbG90VG9wKz10aGlzLmV4dHJhVG9wTWFyZ2luKTt0aGlzLmhhc0NhcnRlc2lhblNlcmllcyYmcSh0aGlzLmF4ZXMsZnVuY3Rpb24oYSl7YS5nZXRPZmZzZXQoKX0pO3MoZFszXSl8fCh0aGlzLnBsb3RMZWZ0Kz1iWzNdKTtzKGRbMF0pfHwodGhpcy5wbG90VG9wKz1iWzBdKTtcbnMoZFsyXSl8fCh0aGlzLm1hcmdpbkJvdHRvbSs9YlsyXSk7cyhkWzFdKXx8KHRoaXMubWFyZ2luUmlnaHQrPWJbMV0pO3RoaXMuc2V0Q2hhcnRTaXplKCl9LHJlZmxvdzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5vcHRpb25zLmNoYXJ0LGQ9Yi5yZW5kZXJUbyxlPWMud2lkdGh8fGliKGQsXCJ3aWR0aFwiKSxmPWMuaGVpZ2h0fHxpYihkLFwiaGVpZ2h0XCIpLGM9YT9hLnRhcmdldDpHLGQ9ZnVuY3Rpb24oKXtpZihiLmNvbnRhaW5lciliLnNldFNpemUoZSxmLCExKSxiLmhhc1VzZXJTaXplPW51bGx9O2lmKCFiLmhhc1VzZXJTaXplJiZlJiZmJiYoYz09PUd8fGM9PT14KSl7aWYoZSE9PWIuY29udGFpbmVyV2lkdGh8fGYhPT1iLmNvbnRhaW5lckhlaWdodCljbGVhclRpbWVvdXQoYi5yZWZsb3dUaW1lb3V0KSxhP2IucmVmbG93VGltZW91dD1zZXRUaW1lb3V0KGQsMTAwKTpkKCk7Yi5jb250YWluZXJXaWR0aD1lO2IuY29udGFpbmVySGVpZ2h0PWZ9fSxpbml0UmVmbG93OmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLGI9ZnVuY3Rpb24oYil7YS5yZWZsb3coYil9O04oRyxcInJlc2l6ZVwiLGIpO04oYSxcImRlc3Ryb3lcIixmdW5jdGlvbigpe1goRyxcInJlc2l6ZVwiLGIpfSl9LHNldFNpemU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZSxmLGc7ZC5pc1Jlc2l6aW5nKz0xO2c9ZnVuY3Rpb24oKXtkJiZJKGQsXCJlbmRSZXNpemVcIixudWxsLGZ1bmN0aW9uKCl7ZC5pc1Jlc2l6aW5nLT0xfSl9O1JhKGMsZCk7ZC5vbGRDaGFydEhlaWdodD1kLmNoYXJ0SGVpZ2h0O2Qub2xkQ2hhcnRXaWR0aD1kLmNoYXJ0V2lkdGg7aWYocyhhKSlkLmNoYXJ0V2lkdGg9ZT10KDAsdihhKSksZC5oYXNVc2VyU2l6ZT0hIWU7aWYocyhiKSlkLmNoYXJ0SGVpZ2h0PWY9dCgwLHYoYikpOyh2YT9qYjpCKShkLmNvbnRhaW5lcix7d2lkdGg6ZStcInB4XCIsaGVpZ2h0OmYrXCJweFwifSx2YSk7ZC5zZXRDaGFydFNpemUoITApO2QucmVuZGVyZXIuc2V0U2l6ZShlLGYsYyk7ZC5tYXhUaWNrcz1udWxsO3EoZC5heGVzLGZ1bmN0aW9uKGEpe2EuaXNEaXJ0eT1cbiEwO2Euc2V0U2NhbGUoKX0pO3EoZC5zZXJpZXMsZnVuY3Rpb24oYSl7YS5pc0RpcnR5PSEwfSk7ZC5pc0RpcnR5TGVnZW5kPSEwO2QuaXNEaXJ0eUJveD0hMDtkLmxheU91dFRpdGxlcygpO2QuZ2V0TWFyZ2lucygpO2QucmVkcmF3KGMpO2Qub2xkQ2hhcnRIZWlnaHQ9bnVsbDtJKGQsXCJyZXNpemVcIik7dmE9PT0hMT9nKCk6c2V0VGltZW91dChnLHZhJiZ2YS5kdXJhdGlvbnx8NTAwKX0sc2V0Q2hhcnRTaXplOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaW52ZXJ0ZWQsYz10aGlzLnJlbmRlcmVyLGQ9dGhpcy5jaGFydFdpZHRoLGU9dGhpcy5jaGFydEhlaWdodCxmPXRoaXMub3B0aW9ucy5jaGFydCxnPXRoaXMuc3BhY2luZyxoPXRoaXMuY2xpcE9mZnNldCxpLGosayxsO3RoaXMucGxvdExlZnQ9aT12KHRoaXMucGxvdExlZnQpO3RoaXMucGxvdFRvcD1qPXYodGhpcy5wbG90VG9wKTt0aGlzLnBsb3RXaWR0aD1rPXQoMCx2KGQtaS10aGlzLm1hcmdpblJpZ2h0KSk7dGhpcy5wbG90SGVpZ2h0PVxubD10KDAsdihlLWotdGhpcy5tYXJnaW5Cb3R0b20pKTt0aGlzLnBsb3RTaXplWD1iP2w6azt0aGlzLnBsb3RTaXplWT1iP2s6bDt0aGlzLnBsb3RCb3JkZXJXaWR0aD1mLnBsb3RCb3JkZXJXaWR0aHx8MDt0aGlzLnNwYWNpbmdCb3g9Yy5zcGFjaW5nQm94PXt4OmdbM10seTpnWzBdLHdpZHRoOmQtZ1szXS1nWzFdLGhlaWdodDplLWdbMF0tZ1syXX07dGhpcy5wbG90Qm94PWMucGxvdEJveD17eDppLHk6aix3aWR0aDprLGhlaWdodDpsfTtkPTIqVSh0aGlzLnBsb3RCb3JkZXJXaWR0aC8yKTtiPUxhKHQoZCxoWzNdKS8yKTtjPUxhKHQoZCxoWzBdKS8yKTt0aGlzLmNsaXBCb3g9e3g6Yix5OmMsd2lkdGg6VSh0aGlzLnBsb3RTaXplWC10KGQsaFsxXSkvMi1iKSxoZWlnaHQ6dCgwLFUodGhpcy5wbG90U2l6ZVktdChkLGhbMl0pLzItYykpfTthfHxxKHRoaXMuYXhlcyxmdW5jdGlvbihhKXthLnNldEF4aXNTaXplKCk7YS5zZXRBeGlzVHJhbnNsYXRpb24oKX0pfSxyZXNldE1hcmdpbnM6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMuc3BhY2luZyxiPXRoaXMubWFyZ2luO3RoaXMucGxvdFRvcD1wKGJbMF0sYVswXSk7dGhpcy5tYXJnaW5SaWdodD1wKGJbMV0sYVsxXSk7dGhpcy5tYXJnaW5Cb3R0b209cChiWzJdLGFbMl0pO3RoaXMucGxvdExlZnQ9cChiWzNdLGFbM10pO3RoaXMuYXhpc09mZnNldD1bMCwwLDAsMF07dGhpcy5jbGlwT2Zmc2V0PVswLDAsMCwwXX0sZHJhd0NoYXJ0Qm94OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLmNoYXJ0LGI9dGhpcy5yZW5kZXJlcixjPXRoaXMuY2hhcnRXaWR0aCxkPXRoaXMuY2hhcnRIZWlnaHQsZT10aGlzLmNoYXJ0QmFja2dyb3VuZCxmPXRoaXMucGxvdEJhY2tncm91bmQsZz10aGlzLnBsb3RCb3JkZXIsaD10aGlzLnBsb3RCR0ltYWdlLGk9YS5ib3JkZXJXaWR0aHx8MCxqPWEuYmFja2dyb3VuZENvbG9yLGs9YS5wbG90QmFja2dyb3VuZENvbG9yLGw9YS5wbG90QmFja2dyb3VuZEltYWdlLG49YS5wbG90Qm9yZGVyV2lkdGh8fDAsbSxvPXRoaXMucGxvdExlZnQsXG5wPXRoaXMucGxvdFRvcCxxPXRoaXMucGxvdFdpZHRoLHI9dGhpcy5wbG90SGVpZ2h0LHQ9dGhpcy5wbG90Qm94LHM9dGhpcy5jbGlwUmVjdCx2PXRoaXMuY2xpcEJveDttPWkrKGEuc2hhZG93Pzg6MCk7aWYoaXx8ailpZihlKWUuYW5pbWF0ZShlLmNyaXNwKHt3aWR0aDpjLW0saGVpZ2h0OmQtbX0pKTtlbHNle2U9e2ZpbGw6anx8UH07aWYoaSllLnN0cm9rZT1hLmJvcmRlckNvbG9yLGVbXCJzdHJva2Utd2lkdGhcIl09aTt0aGlzLmNoYXJ0QmFja2dyb3VuZD1iLnJlY3QobS8yLG0vMixjLW0sZC1tLGEuYm9yZGVyUmFkaXVzLGkpLmF0dHIoZSkuYWRkQ2xhc3MoXCJoaWdoY2hhcnRzLWJhY2tncm91bmRcIikuYWRkKCkuc2hhZG93KGEuc2hhZG93KX1pZihrKWY/Zi5hbmltYXRlKHQpOnRoaXMucGxvdEJhY2tncm91bmQ9Yi5yZWN0KG8scCxxLHIsMCkuYXR0cih7ZmlsbDprfSkuYWRkKCkuc2hhZG93KGEucGxvdFNoYWRvdyk7aWYobCloP2guYW5pbWF0ZSh0KTp0aGlzLnBsb3RCR0ltYWdlPVxuYi5pbWFnZShsLG8scCxxLHIpLmFkZCgpO3M/cy5hbmltYXRlKHt3aWR0aDp2LndpZHRoLGhlaWdodDp2LmhlaWdodH0pOnRoaXMuY2xpcFJlY3Q9Yi5jbGlwUmVjdCh2KTtpZihuKWc/Zy5hbmltYXRlKGcuY3Jpc3Aoe3g6byx5OnAsd2lkdGg6cSxoZWlnaHQ6cixzdHJva2VXaWR0aDotbn0pKTp0aGlzLnBsb3RCb3JkZXI9Yi5yZWN0KG8scCxxLHIsMCwtbikuYXR0cih7c3Ryb2tlOmEucGxvdEJvcmRlckNvbG9yLFwic3Ryb2tlLXdpZHRoXCI6bixmaWxsOlAsekluZGV4OjF9KS5hZGQoKTt0aGlzLmlzRGlydHlCb3g9ITF9LHByb3BGcm9tU2VyaWVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucy5jaGFydCxjLGQ9YS5vcHRpb25zLnNlcmllcyxlLGY7cShbXCJpbnZlcnRlZFwiLFwiYW5ndWxhclwiLFwicG9sYXJcIl0sZnVuY3Rpb24oZyl7Yz1IW2IudHlwZXx8Yi5kZWZhdWx0U2VyaWVzVHlwZV07Zj1hW2ddfHxiW2ddfHxjJiZjLnByb3RvdHlwZVtnXTtmb3IoZT1kJiZkLmxlbmd0aDshZiYmXG5lLS07KShjPUhbZFtlXS50eXBlXSkmJmMucHJvdG90eXBlW2ddJiYoZj0hMCk7YVtnXT1mfSl9LGxpbmtTZXJpZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5zZXJpZXM7cShiLGZ1bmN0aW9uKGEpe2EubGlua2VkU2VyaWVzLmxlbmd0aD0wfSk7cShiLGZ1bmN0aW9uKGIpe3ZhciBkPWIub3B0aW9ucy5saW5rZWRUbztpZihHYShkKSYmKGQ9ZD09PVwiOnByZXZpb3VzXCI/YS5zZXJpZXNbYi5pbmRleC0xXTphLmdldChkKSkpZC5saW5rZWRTZXJpZXMucHVzaChiKSxiLmxpbmtlZFBhcmVudD1kfSl9LHJlbmRlclNlcmllczpmdW5jdGlvbigpe3EodGhpcy5zZXJpZXMsZnVuY3Rpb24oYSl7YS50cmFuc2xhdGUoKTthLnNldFRvb2x0aXBQb2ludHMmJmEuc2V0VG9vbHRpcFBvaW50cygpO2EucmVuZGVyKCl9KX0scmVuZGVyTGFiZWxzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucy5sYWJlbHM7Yi5pdGVtcyYmcShiLml0ZW1zLGZ1bmN0aW9uKGMpe3ZhciBkPXIoYi5zdHlsZSxcbmMuc3R5bGUpLGU9eShkLmxlZnQpK2EucGxvdExlZnQsZj15KGQudG9wKSthLnBsb3RUb3ArMTI7ZGVsZXRlIGQubGVmdDtkZWxldGUgZC50b3A7YS5yZW5kZXJlci50ZXh0KGMuaHRtbCxlLGYpLmF0dHIoe3pJbmRleDoyfSkuY3NzKGQpLmFkZCgpfSl9LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYXhlcyxiPXRoaXMucmVuZGVyZXIsYz10aGlzLm9wdGlvbnM7dGhpcy5zZXRUaXRsZSgpO3RoaXMubGVnZW5kPW5ldyBsYih0aGlzLGMubGVnZW5kKTt0aGlzLmdldFN0YWNrcygpO3EoYSxmdW5jdGlvbihhKXthLnNldFNjYWxlKCl9KTt0aGlzLmdldE1hcmdpbnMoKTt0aGlzLm1heFRpY2tzPW51bGw7cShhLGZ1bmN0aW9uKGEpe2Euc2V0VGlja1Bvc2l0aW9ucyghMCk7YS5zZXRNYXhUaWNrcygpfSk7dGhpcy5hZGp1c3RUaWNrQW1vdW50cygpO3RoaXMuZ2V0TWFyZ2lucygpO3RoaXMuZHJhd0NoYXJ0Qm94KCk7dGhpcy5oYXNDYXJ0ZXNpYW5TZXJpZXMmJnEoYSxmdW5jdGlvbihhKXthLnJlbmRlcigpfSk7XG5pZighdGhpcy5zZXJpZXNHcm91cCl0aGlzLnNlcmllc0dyb3VwPWIuZyhcInNlcmllcy1ncm91cFwiKS5hdHRyKHt6SW5kZXg6M30pLmFkZCgpO3RoaXMucmVuZGVyU2VyaWVzKCk7dGhpcy5yZW5kZXJMYWJlbHMoKTt0aGlzLnNob3dDcmVkaXRzKGMuY3JlZGl0cyk7dGhpcy5oYXNSZW5kZXJlZD0hMH0sc2hvd0NyZWRpdHM6ZnVuY3Rpb24oYSl7aWYoYS5lbmFibGVkJiYhdGhpcy5jcmVkaXRzKXRoaXMuY3JlZGl0cz10aGlzLnJlbmRlcmVyLnRleHQoYS50ZXh0LDAsMCkub24oXCJjbGlja1wiLGZ1bmN0aW9uKCl7aWYoYS5ocmVmKWxvY2F0aW9uLmhyZWY9YS5ocmVmfSkuYXR0cih7YWxpZ246YS5wb3NpdGlvbi5hbGlnbix6SW5kZXg6OH0pLmNzcyhhLnN0eWxlKS5hZGQoKS5hbGlnbihhLnBvc2l0aW9uKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmF4ZXMsYz1hLnNlcmllcyxkPWEuY29udGFpbmVyLGUsZj1kJiZkLnBhcmVudE5vZGU7SShhLFwiZGVzdHJveVwiKTtXW2EuaW5kZXhdPVxudTthYi0tO2EucmVuZGVyVG8ucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1oaWdoY2hhcnRzLWNoYXJ0XCIpO1goYSk7Zm9yKGU9Yi5sZW5ndGg7ZS0tOyliW2VdPWJbZV0uZGVzdHJveSgpO2ZvcihlPWMubGVuZ3RoO2UtLTspY1tlXT1jW2VdLmRlc3Ryb3koKTtxKFwidGl0bGUsc3VidGl0bGUsY2hhcnRCYWNrZ3JvdW5kLHBsb3RCYWNrZ3JvdW5kLHBsb3RCR0ltYWdlLHBsb3RCb3JkZXIsc2VyaWVzR3JvdXAsY2xpcFJlY3QsY3JlZGl0cyxwb2ludGVyLHNjcm9sbGVyLHJhbmdlU2VsZWN0b3IsbGVnZW5kLHJlc2V0Wm9vbUJ1dHRvbix0b29sdGlwLHJlbmRlcmVyXCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGIpe3ZhciBjPWFbYl07YyYmYy5kZXN0cm95JiYoYVtiXT1jLmRlc3Ryb3koKSl9KTtpZihkKWQuaW5uZXJIVE1MPVwiXCIsWChkKSxmJiZRYShkKTtmb3IoZSBpbiBhKWRlbGV0ZSBhW2VdfSxpc1JlYWR5VG9SZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVybiFiYSYmRz09Ry50b3AmJlxueC5yZWFkeVN0YXRlIT09XCJjb21wbGV0ZVwifHxnYSYmIUcuY2Fudmc/KGdhP01iLnB1c2goZnVuY3Rpb24oKXthLmZpcnN0UmVuZGVyKCl9LGEub3B0aW9ucy5nbG9iYWwuY2FudmFzVG9vbHNVUkwpOnguYXR0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixmdW5jdGlvbigpe3guZGV0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIixhLmZpcnN0UmVuZGVyKTt4LnJlYWR5U3RhdGU9PT1cImNvbXBsZXRlXCImJmEuZmlyc3RSZW5kZXIoKX0pLCExKTohMH0sZmlyc3RSZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9YS5jYWxsYmFjaztpZihhLmlzUmVhZHlUb1JlbmRlcigpKXthLmdldENvbnRhaW5lcigpO0koYSxcImluaXRcIik7YS5yZXNldE1hcmdpbnMoKTthLnNldENoYXJ0U2l6ZSgpO2EucHJvcEZyb21TZXJpZXMoKTthLmdldEF4ZXMoKTtxKGIuc2VyaWVzfHxbXSxmdW5jdGlvbihiKXthLmluaXRTZXJpZXMoYil9KTthLmxpbmtTZXJpZXMoKTtJKGEsXG5cImJlZm9yZVJlbmRlclwiKTtpZihLLlBvaW50ZXIpYS5wb2ludGVyPW5ldyBXYShhLGIpO2EucmVuZGVyKCk7YS5yZW5kZXJlci5kcmF3KCk7YyYmYy5hcHBseShhLFthXSk7cShhLmNhbGxiYWNrcyxmdW5jdGlvbihiKXtiLmFwcGx5KGEsW2FdKX0pO2EuY2xvbmVSZW5kZXJUbyghMCk7SShhLFwibG9hZFwiKX19LHNwbGFzaEFycmF5OmZ1bmN0aW9uKGEsYil7dmFyIGM9YlthXSxjPWRhKGMpP2M6W2MsYyxjLGNdO3JldHVybltwKGJbYStcIlRvcFwiXSxjWzBdKSxwKGJbYStcIlJpZ2h0XCJdLGNbMV0pLHAoYlthK1wiQm90dG9tXCJdLGNbMl0pLHAoYlthK1wiTGVmdFwiXSxjWzNdKV19fTtZYS5wcm90b3R5cGUuY2FsbGJhY2tzPVtdO1o9Sy5DZW50ZXJlZFNlcmllc01peGluPXtnZXRDZW50ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMsYj10aGlzLmNoYXJ0LGM9MiooYS5zbGljZWRPZmZzZXR8fDApLGQsZT1iLnBsb3RXaWR0aC0yKmMsZj1iLnBsb3RIZWlnaHQtMipjLGI9YS5jZW50ZXIsXG5hPVtwKGJbMF0sXCI1MCVcIikscChiWzFdLFwiNTAlXCIpLGEuc2l6ZXx8XCIxMDAlXCIsYS5pbm5lclNpemV8fDBdLGc9TChlLGYpLGg7cmV0dXJuIFZhKGEsZnVuY3Rpb24oYSxiKXtoPS8lJC8udGVzdChhKTtkPWI8Mnx8Yj09PTImJmg7cmV0dXJuKGg/W2UsZixnLGddW2JdKnkoYSkvMTAwOmEpKyhkP2M6MCl9KX19O3ZhciBGYT1mdW5jdGlvbigpe307RmEucHJvdG90eXBlPXtpbml0OmZ1bmN0aW9uKGEsYixjKXt0aGlzLnNlcmllcz1hO3RoaXMuYXBwbHlPcHRpb25zKGIsYyk7dGhpcy5wb2ludEF0dHI9e307aWYoYS5vcHRpb25zLmNvbG9yQnlQb2ludCYmKGI9YS5vcHRpb25zLmNvbG9yc3x8YS5jaGFydC5vcHRpb25zLmNvbG9ycyx0aGlzLmNvbG9yPXRoaXMuY29sb3J8fGJbYS5jb2xvckNvdW50ZXIrK10sYS5jb2xvckNvdW50ZXI9PT1iLmxlbmd0aCkpYS5jb2xvckNvdW50ZXI9MDthLmNoYXJ0LnBvaW50Q291bnQrKztyZXR1cm4gdGhpc30sYXBwbHlPcHRpb25zOmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz10aGlzLnNlcmllcyxkPWMub3B0aW9ucy5wb2ludFZhbEtleXx8Yy5wb2ludFZhbEtleSxhPUZhLnByb3RvdHlwZS5vcHRpb25zVG9PYmplY3QuY2FsbCh0aGlzLGEpO3IodGhpcyxhKTt0aGlzLm9wdGlvbnM9dGhpcy5vcHRpb25zP3IodGhpcy5vcHRpb25zLGEpOmE7aWYoZCl0aGlzLnk9dGhpc1tkXTtpZih0aGlzLng9PT11JiZjKXRoaXMueD1iPT09dT9jLmF1dG9JbmNyZW1lbnQoKTpiO3JldHVybiB0aGlzfSxvcHRpb25zVG9PYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI9e30sYz10aGlzLnNlcmllcyxkPWMucG9pbnRBcnJheU1hcHx8W1wieVwiXSxlPWQubGVuZ3RoLGY9MCxnPTA7aWYodHlwZW9mIGE9PT1cIm51bWJlclwifHxhPT09bnVsbCliW2RbMF1dPWE7ZWxzZSBpZihIYShhKSl7aWYoYS5sZW5ndGg+ZSl7Yz10eXBlb2YgYVswXTtpZihjPT09XCJzdHJpbmdcIiliLm5hbWU9YVswXTtlbHNlIGlmKGM9PT1cIm51bWJlclwiKWIueD1hWzBdO2YrK31mb3IoO2c8ZTspYltkW2crK11dPVxuYVtmKytdfWVsc2UgaWYodHlwZW9mIGE9PT1cIm9iamVjdFwiKXtiPWE7aWYoYS5kYXRhTGFiZWxzKWMuX2hhc1BvaW50TGFiZWxzPSEwO2lmKGEubWFya2VyKWMuX2hhc1BvaW50TWFya2Vycz0hMH1yZXR1cm4gYn0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2VyaWVzLmNoYXJ0LGI9YS5ob3ZlclBvaW50cyxjO2EucG9pbnRDb3VudC0tO2lmKGImJih0aGlzLnNldFN0YXRlKCksbGEoYix0aGlzKSwhYi5sZW5ndGgpKWEuaG92ZXJQb2ludHM9bnVsbDtpZih0aGlzPT09YS5ob3ZlclBvaW50KXRoaXMub25Nb3VzZU91dCgpO2lmKHRoaXMuZ3JhcGhpY3x8dGhpcy5kYXRhTGFiZWwpWCh0aGlzKSx0aGlzLmRlc3Ryb3lFbGVtZW50cygpO3RoaXMubGVnZW5kSXRlbSYmYS5sZWdlbmQuZGVzdHJveUl0ZW0odGhpcyk7Zm9yKGMgaW4gdGhpcyl0aGlzW2NdPW51bGx9LGRlc3Ryb3lFbGVtZW50czpmdW5jdGlvbigpe2Zvcih2YXIgYT1cImdyYXBoaWMsZGF0YUxhYmVsLGRhdGFMYWJlbFVwcGVyLGdyb3VwLGNvbm5lY3RvcixzaGFkb3dHcm91cFwiLnNwbGl0KFwiLFwiKSxcbmIsYz02O2MtLTspYj1hW2NdLHRoaXNbYl0mJih0aGlzW2JdPXRoaXNbYl0uZGVzdHJveSgpKX0sZ2V0TGFiZWxDb25maWc6ZnVuY3Rpb24oKXtyZXR1cm57eDp0aGlzLmNhdGVnb3J5LHk6dGhpcy55LGtleTp0aGlzLm5hbWV8fHRoaXMuY2F0ZWdvcnksc2VyaWVzOnRoaXMuc2VyaWVzLHBvaW50OnRoaXMscGVyY2VudGFnZTp0aGlzLnBlcmNlbnRhZ2UsdG90YWw6dGhpcy50b3RhbHx8dGhpcy5zdGFja1RvdGFsfX0sdG9vbHRpcEZvcm1hdHRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlcmllcyxjPWIudG9vbHRpcE9wdGlvbnMsZD1wKGMudmFsdWVEZWNpbWFscyxcIlwiKSxlPWMudmFsdWVQcmVmaXh8fFwiXCIsZj1jLnZhbHVlU3VmZml4fHxcIlwiO3EoYi5wb2ludEFycmF5TWFwfHxbXCJ5XCJdLGZ1bmN0aW9uKGIpe2I9XCJ7cG9pbnQuXCIrYjtpZihlfHxmKWE9YS5yZXBsYWNlKGIrXCJ9XCIsZStiK1wifVwiK2YpO2E9YS5yZXBsYWNlKGIrXCJ9XCIsYitcIjosLlwiK2QrXCJmfVwiKX0pO3JldHVybiBKYShhLFxue3BvaW50OnRoaXMsc2VyaWVzOnRoaXMuc2VyaWVzfSl9LGZpcmVQb2ludEV2ZW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLGU9dGhpcy5zZXJpZXMub3B0aW9uczsoZS5wb2ludC5ldmVudHNbYV18fGQub3B0aW9ucyYmZC5vcHRpb25zLmV2ZW50cyYmZC5vcHRpb25zLmV2ZW50c1thXSkmJnRoaXMuaW1wb3J0RXZlbnRzKCk7YT09PVwiY2xpY2tcIiYmZS5hbGxvd1BvaW50U2VsZWN0JiYoYz1mdW5jdGlvbihhKXtkLnNlbGVjdChudWxsLGEuY3RybEtleXx8YS5tZXRhS2V5fHxhLnNoaWZ0S2V5KX0pO0kodGhpcyxhLGIsYyl9fTt2YXIgTz1mdW5jdGlvbigpe307Ty5wcm90b3R5cGU9e2lzQ2FydGVzaWFuOiEwLHR5cGU6XCJsaW5lXCIscG9pbnRDbGFzczpGYSxzb3J0ZWQ6ITAscmVxdWlyZVNvcnRpbmc6ITAscG9pbnRBdHRyVG9PcHRpb25zOntzdHJva2U6XCJsaW5lQ29sb3JcIixcInN0cm9rZS13aWR0aFwiOlwibGluZVdpZHRoXCIsZmlsbDpcImZpbGxDb2xvclwiLHI6XCJyYWRpdXNcIn0sYXhpc1R5cGVzOltcInhBeGlzXCIsXG5cInlBeGlzXCJdLGNvbG9yQ291bnRlcjowLHBhcmFsbGVsQXJyYXlzOltcInhcIixcInlcIl0saW5pdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZCxlLGY9YS5zZXJpZXMsZz1mdW5jdGlvbihhLGIpe3JldHVybiBwKGEub3B0aW9ucy5pbmRleCxhLl9pKS1wKGIub3B0aW9ucy5pbmRleCxiLl9pKX07Yy5jaGFydD1hO2Mub3B0aW9ucz1iPWMuc2V0T3B0aW9ucyhiKTtjLmxpbmtlZFNlcmllcz1bXTtjLmJpbmRBeGVzKCk7cihjLHtuYW1lOmIubmFtZSxzdGF0ZTpcIlwiLHBvaW50QXR0cjp7fSx2aXNpYmxlOmIudmlzaWJsZSE9PSExLHNlbGVjdGVkOmIuc2VsZWN0ZWQ9PT0hMH0pO2lmKGdhKWIuYW5pbWF0aW9uPSExO2U9Yi5ldmVudHM7Zm9yKGQgaW4gZSlOKGMsZCxlW2RdKTtpZihlJiZlLmNsaWNrfHxiLnBvaW50JiZiLnBvaW50LmV2ZW50cyYmYi5wb2ludC5ldmVudHMuY2xpY2t8fGIuYWxsb3dQb2ludFNlbGVjdClhLnJ1blRyYWNrZXJDbGljaz0hMDtjLmdldENvbG9yKCk7Yy5nZXRTeW1ib2woKTtcbnEoYy5wYXJhbGxlbEFycmF5cyxmdW5jdGlvbihhKXtjW2ErXCJEYXRhXCJdPVtdfSk7Yy5zZXREYXRhKGIuZGF0YSwhMSk7aWYoYy5pc0NhcnRlc2lhbilhLmhhc0NhcnRlc2lhblNlcmllcz0hMDtmLnB1c2goYyk7Yy5faT1mLmxlbmd0aC0xO29iKGYsZyk7dGhpcy55QXhpcyYmb2IodGhpcy55QXhpcy5zZXJpZXMsZyk7cShmLGZ1bmN0aW9uKGEsYil7YS5pbmRleD1iO2EubmFtZT1hLm5hbWV8fFwiU2VyaWVzIFwiKyhiKzEpfSl9LGJpbmRBeGVzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucyxjPWEuY2hhcnQsZDtxKGEuYXhpc1R5cGVzfHxbXSxmdW5jdGlvbihlKXtxKGNbZV0sZnVuY3Rpb24oYyl7ZD1jLm9wdGlvbnM7aWYoYltlXT09PWQuaW5kZXh8fGJbZV0hPT11JiZiW2VdPT09ZC5pZHx8YltlXT09PXUmJmQuaW5kZXg9PT0wKWMuc2VyaWVzLnB1c2goYSksYVtlXT1jLGMuaXNEaXJ0eT0hMH0pOyFhW2VdJiZhLm9wdGlvbmFsQXhpcyE9PWUmJmhhKDE4LCEwKX0pfSxcbnVwZGF0ZVBhcmFsbGVsQXJyYXlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5zZXJpZXMsZD1hcmd1bWVudHM7cShjLnBhcmFsbGVsQXJyYXlzLHR5cGVvZiBiPT09XCJudW1iZXJcIj9mdW5jdGlvbihkKXt2YXIgZj1kPT09XCJ5XCImJmMudG9ZRGF0YT9jLnRvWURhdGEoYSk6YVtkXTtjW2QrXCJEYXRhXCJdW2JdPWZ9OmZ1bmN0aW9uKGEpe0FycmF5LnByb3RvdHlwZVtiXS5hcHBseShjW2ErXCJEYXRhXCJdLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGQsMikpfSl9LGF1dG9JbmNyZW1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMsYj10aGlzLnhJbmNyZW1lbnQsYj1wKGIsYS5wb2ludFN0YXJ0LDApO3RoaXMucG9pbnRJbnRlcnZhbD1wKHRoaXMucG9pbnRJbnRlcnZhbCxhLnBvaW50SW50ZXJ2YWwsMSk7dGhpcy54SW5jcmVtZW50PWIrdGhpcy5wb2ludEludGVydmFsO3JldHVybiBifSxnZXRTZWdtZW50czpmdW5jdGlvbigpe3ZhciBhPS0xLGI9W10sYyxkPXRoaXMucG9pbnRzLFxuZT1kLmxlbmd0aDtpZihlKWlmKHRoaXMub3B0aW9ucy5jb25uZWN0TnVsbHMpe2ZvcihjPWU7Yy0tOylkW2NdLnk9PT1udWxsJiZkLnNwbGljZShjLDEpO2QubGVuZ3RoJiYoYj1bZF0pfWVsc2UgcShkLGZ1bmN0aW9uKGMsZyl7Yy55PT09bnVsbD8oZz5hKzEmJmIucHVzaChkLnNsaWNlKGErMSxnKSksYT1nKTpnPT09ZS0xJiZiLnB1c2goZC5zbGljZShhKzEsZysxKSl9KTt0aGlzLnNlZ21lbnRzPWJ9LHNldE9wdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydCxjPWIub3B0aW9ucy5wbG90T3B0aW9ucyxiPWIudXNlck9wdGlvbnN8fHt9LGQ9Yi5wbG90T3B0aW9uc3x8e30sZT1jW3RoaXMudHlwZV07dGhpcy51c2VyT3B0aW9ucz1hO2M9dyhlLGMuc2VyaWVzLGEpO3RoaXMudG9vbHRpcE9wdGlvbnM9dyhFLnRvb2x0aXAsRS5wbG90T3B0aW9uc1t0aGlzLnR5cGVdLnRvb2x0aXAsYi50b29sdGlwLGQuc2VyaWVzJiZkLnNlcmllcy50b29sdGlwLGRbdGhpcy50eXBlXSYmXG5kW3RoaXMudHlwZV0udG9vbHRpcCxhLnRvb2x0aXApO2UubWFya2VyPT09bnVsbCYmZGVsZXRlIGMubWFya2VyO3JldHVybiBjfSxnZXRDeWNsaWM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMudXNlck9wdGlvbnMsZT1cIl9cIithK1wiSW5kZXhcIixmPWErXCJDb3VudGVyXCI7Ynx8KHMoZFtlXSk/Yj1kW2VdOihkW2VdPWI9dGhpcy5jaGFydFtmXSVjLmxlbmd0aCx0aGlzLmNoYXJ0W2ZdKz0xKSxiPWNbYl0pO3RoaXNbYV09Yn0sZ2V0Q29sb3I6ZnVuY3Rpb24oKXt0aGlzLm9wdGlvbnMuY29sb3JCeVBvaW50fHx0aGlzLmdldEN5Y2xpYyhcImNvbG9yXCIsdGhpcy5vcHRpb25zLmNvbG9yfHxjYVt0aGlzLnR5cGVdLmNvbG9yLHRoaXMuY2hhcnQub3B0aW9ucy5jb2xvcnMpfSxnZXRTeW1ib2w6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMubWFya2VyO3RoaXMuZ2V0Q3ljbGljKFwic3ltYm9sXCIsYS5zeW1ib2wsdGhpcy5jaGFydC5vcHRpb25zLnN5bWJvbHMpO2lmKC9edXJsLy50ZXN0KHRoaXMuc3ltYm9sKSlhLnJhZGl1cz1cbjB9LGRyYXdMZWdlbmRTeW1ib2w6TS5kcmF3TGluZU1hcmtlcixzZXREYXRhOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1lLnBvaW50cyxnPWYmJmYubGVuZ3RofHwwLGgsaT1lLm9wdGlvbnMsaj1lLmNoYXJ0LGs9bnVsbCxsPWUueEF4aXMsbj1sJiYhIWwuY2F0ZWdvcmllcyxtPWUudG9vbHRpcFBvaW50cyxvPWkudHVyYm9UaHJlc2hvbGQscj10aGlzLnhEYXRhLHQ9dGhpcy55RGF0YSxzPShoPWUucG9pbnRBcnJheU1hcCkmJmgubGVuZ3RoLGE9YXx8W107aD1hLmxlbmd0aDtiPXAoYiwhMCk7aWYoZCE9PSExJiZoJiZnPT09aCYmIWUuY3JvcHBlZCYmIWUuaGFzR3JvdXBlZERhdGEpcShhLGZ1bmN0aW9uKGEsYil7ZltiXS51cGRhdGUoYSwhMSxudWxsLCExKX0pO2Vsc2V7ZS54SW5jcmVtZW50PW51bGw7ZS5wb2ludFJhbmdlPW4/MTppLnBvaW50UmFuZ2U7ZS5jb2xvckNvdW50ZXI9MDtxKHRoaXMucGFyYWxsZWxBcnJheXMsZnVuY3Rpb24oYSl7ZVthK1wiRGF0YVwiXS5sZW5ndGg9XG4wfSk7aWYobyYmaD5vKXtmb3IoYz0wO2s9PT1udWxsJiZjPGg7KWs9YVtjXSxjKys7aWYoamEoaykpe249cChpLnBvaW50U3RhcnQsMCk7aT1wKGkucG9pbnRJbnRlcnZhbCwxKTtmb3IoYz0wO2M8aDtjKyspcltjXT1uLHRbY109YVtjXSxuKz1pO2UueEluY3JlbWVudD1ufWVsc2UgaWYoSGEoaykpaWYocylmb3IoYz0wO2M8aDtjKyspaT1hW2NdLHJbY109aVswXSx0W2NdPWkuc2xpY2UoMSxzKzEpO2Vsc2UgZm9yKGM9MDtjPGg7YysrKWk9YVtjXSxyW2NdPWlbMF0sdFtjXT1pWzFdO2Vsc2UgaGEoMTIpfWVsc2UgZm9yKGM9MDtjPGg7YysrKWlmKGFbY10hPT11JiYoaT17c2VyaWVzOmV9LGUucG9pbnRDbGFzcy5wcm90b3R5cGUuYXBwbHlPcHRpb25zLmFwcGx5KGksW2FbY11dKSxlLnVwZGF0ZVBhcmFsbGVsQXJyYXlzKGksYyksbiYmaS5uYW1lKSlsLm5hbWVzW2kueF09aS5uYW1lO0dhKHRbMF0pJiZoYSgxNCwhMCk7ZS5kYXRhPVtdO2Uub3B0aW9ucy5kYXRhPWE7Zm9yKGM9ZztjLS07KWZbY10mJlxuZltjXS5kZXN0cm95JiZmW2NdLmRlc3Ryb3koKTtpZihtKW0ubGVuZ3RoPTA7aWYobClsLm1pblJhbmdlPWwudXNlck1pblJhbmdlO2UuaXNEaXJ0eT1lLmlzRGlydHlEYXRhPWouaXNEaXJ0eUJveD0hMDtjPSExfWImJmoucmVkcmF3KGMpfSxwcm9jZXNzRGF0YTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnhEYXRhLGM9dGhpcy55RGF0YSxkPWIubGVuZ3RoLGU7ZT0wO3ZhciBmLGcsaD10aGlzLnhBeGlzLGksaj10aGlzLm9wdGlvbnM7aT1qLmNyb3BUaHJlc2hvbGQ7dmFyIGs9MCxsPXRoaXMuaXNDYXJ0ZXNpYW4sbixtO2lmKGwmJiF0aGlzLmlzRGlydHkmJiFoLmlzRGlydHkmJiF0aGlzLnlBeGlzLmlzRGlydHkmJiFhKXJldHVybiExO2lmKGgpbj1oLmdldEV4dHJlbWVzKCksbT1uLm1pbixuPW4ubWF4O2lmKGwmJnRoaXMuc29ydGVkJiYoIWl8fGQ+aXx8dGhpcy5mb3JjZUNyb3ApKWlmKGJbZC0xXTxtfHxiWzBdPm4pYj1bXSxjPVtdO2Vsc2UgaWYoYlswXTxtfHxiW2QtMV0+billPVxudGhpcy5jcm9wRGF0YSh0aGlzLnhEYXRhLHRoaXMueURhdGEsbSxuKSxiPWUueERhdGEsYz1lLnlEYXRhLGU9ZS5zdGFydCxmPSEwLGs9Yi5sZW5ndGg7Zm9yKGk9Yi5sZW5ndGgtMTtpPj0wO2ktLSlkPWJbaV0tYltpLTFdLCFmJiZiW2ldPm0mJmJbaV08biYmaysrLGQ+MCYmKGc9PT11fHxkPGcpP2c9ZDpkPDAmJnRoaXMucmVxdWlyZVNvcnRpbmcmJmhhKDE1KTt0aGlzLmNyb3BwZWQ9Zjt0aGlzLmNyb3BTdGFydD1lO3RoaXMucHJvY2Vzc2VkWERhdGE9Yjt0aGlzLnByb2Nlc3NlZFlEYXRhPWM7dGhpcy5hY3RpdmVQb2ludENvdW50PWs7aWYoai5wb2ludFJhbmdlPT09bnVsbCl0aGlzLnBvaW50UmFuZ2U9Z3x8MTt0aGlzLmNsb3Nlc3RQb2ludFJhbmdlPWd9LGNyb3BEYXRhOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEubGVuZ3RoLGY9MCxnPWUsaD1wKHRoaXMuY3JvcFNob3VsZGVyLDEpLGk7Zm9yKGk9MDtpPGU7aSsrKWlmKGFbaV0+PWMpe2Y9dCgwLGktaCk7YnJlYWt9Zm9yKDtpPFxuZTtpKyspaWYoYVtpXT5kKXtnPWkraDticmVha31yZXR1cm57eERhdGE6YS5zbGljZShmLGcpLHlEYXRhOmIuc2xpY2UoZixnKSxzdGFydDpmLGVuZDpnfX0sZ2VuZXJhdGVQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuZGF0YSxiPXRoaXMuZGF0YSxjLGQ9dGhpcy5wcm9jZXNzZWRYRGF0YSxlPXRoaXMucHJvY2Vzc2VkWURhdGEsZj10aGlzLnBvaW50Q2xhc3MsZz1kLmxlbmd0aCxoPXRoaXMuY3JvcFN0YXJ0fHwwLGksaj10aGlzLmhhc0dyb3VwZWREYXRhLGssbD1bXSxuO2lmKCFiJiYhailiPVtdLGIubGVuZ3RoPWEubGVuZ3RoLGI9dGhpcy5kYXRhPWI7Zm9yKG49MDtuPGc7bisrKWk9aCtuLGo/bFtuXT0obmV3IGYpLmluaXQodGhpcyxbZFtuXV0uY29uY2F0KHJhKGVbbl0pKSk6KGJbaV0/az1iW2ldOmFbaV0hPT11JiYoYltpXT1rPShuZXcgZikuaW5pdCh0aGlzLGFbaV0sZFtuXSkpLGxbbl09ayksbFtuXS5pbmRleD1pO2lmKGImJihnIT09KGM9Yi5sZW5ndGgpfHxcbmopKWZvcihuPTA7bjxjO24rKylpZihuPT09aCYmIWomJihuKz1nKSxiW25dKWJbbl0uZGVzdHJveUVsZW1lbnRzKCksYltuXS5wbG90WD11O3RoaXMuZGF0YT1iO3RoaXMucG9pbnRzPWx9LGdldEV4dHJlbWVzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueUF4aXMsYz10aGlzLnByb2Nlc3NlZFhEYXRhLGQsZT1bXSxmPTA7ZD10aGlzLnhBeGlzLmdldEV4dHJlbWVzKCk7dmFyIGc9ZC5taW4saD1kLm1heCxpLGosayxsLGE9YXx8dGhpcy5zdGFja2VkWURhdGF8fHRoaXMucHJvY2Vzc2VkWURhdGE7ZD1hLmxlbmd0aDtmb3IobD0wO2w8ZDtsKyspaWYoaj1jW2xdLGs9YVtsXSxpPWshPT1udWxsJiZrIT09dSYmKCFiLmlzTG9nfHxrLmxlbmd0aHx8az4wKSxqPXRoaXMuZ2V0RXh0cmVtZXNGcm9tQWxsfHx0aGlzLmNyb3BwZWR8fChjW2wrMV18fGopPj1nJiYoY1tsLTFdfHxqKTw9aCxpJiZqKWlmKGk9ay5sZW5ndGgpZm9yKDtpLS07KWtbaV0hPT1udWxsJiYoZVtmKytdPWtbaV0pO2Vsc2UgZVtmKytdPVxuazt0aGlzLmRhdGFNaW49cCh2b2lkIDAsT2EoZSkpO3RoaXMuZGF0YU1heD1wKHZvaWQgMCxDYShlKSl9LHRyYW5zbGF0ZTpmdW5jdGlvbigpe3RoaXMucHJvY2Vzc2VkWERhdGF8fHRoaXMucHJvY2Vzc0RhdGEoKTt0aGlzLmdlbmVyYXRlUG9pbnRzKCk7Zm9yKHZhciBhPXRoaXMub3B0aW9ucyxiPWEuc3RhY2tpbmcsYz10aGlzLnhBeGlzLGQ9Yy5jYXRlZ29yaWVzLGU9dGhpcy55QXhpcyxmPXRoaXMucG9pbnRzLGc9Zi5sZW5ndGgsaD0hIXRoaXMubW9kaWZ5VmFsdWUsaT1hLnBvaW50UGxhY2VtZW50LGo9aT09PVwiYmV0d2VlblwifHxqYShpKSxrPWEudGhyZXNob2xkLGE9MDthPGc7YSsrKXt2YXIgbD1mW2FdLG49bC54LG09bC55LG89bC5sb3cscT1iJiZlLnN0YWNrc1sodGhpcy5uZWdTdGFja3MmJm08az9cIi1cIjpcIlwiKSt0aGlzLnN0YWNrS2V5XTtpZihlLmlzTG9nJiZtPD0wKWwueT1tPW51bGwsaGEoMTApO2wucGxvdFg9Yy50cmFuc2xhdGUobiwwLDAsMCwxLGksdGhpcy50eXBlPT09XG5cImZsYWdzXCIpO2lmKGImJnRoaXMudmlzaWJsZSYmcSYmcVtuXSlxPXFbbl0sbT1xLnBvaW50c1t0aGlzLmluZGV4K1wiLFwiK2FdLG89bVswXSxtPW1bMV0sbz09PTAmJihvPXAoayxlLm1pbikpLGUuaXNMb2cmJm88PTAmJihvPW51bGwpLGwudG90YWw9bC5zdGFja1RvdGFsPXEudG90YWwsbC5wZXJjZW50YWdlPXEudG90YWwmJmwueS9xLnRvdGFsKjEwMCxsLnN0YWNrWT1tLHEuc2V0T2Zmc2V0KHRoaXMucG9pbnRYT2Zmc2V0fHwwLHRoaXMuYmFyV3x8MCk7bC55Qm90dG9tPXMobyk/ZS50cmFuc2xhdGUobywwLDEsMCwxKTpudWxsO2gmJihtPXRoaXMubW9kaWZ5VmFsdWUobSxsKSk7bC5wbG90WT10eXBlb2YgbT09PVwibnVtYmVyXCImJm0hPT1JbmZpbml0eT9lLnRyYW5zbGF0ZShtLDAsMSwwLDEpOnU7bC5jbGllbnRYPWo/Yy50cmFuc2xhdGUobiwwLDAsMCwxKTpsLnBsb3RYO2wubmVnYXRpdmU9bC55PChrfHwwKTtsLmNhdGVnb3J5PWQmJmRbbC54XSE9PXU/ZFtsLnhdOmwueH10aGlzLmdldFNlZ21lbnRzKCl9LFxuYW5pbWF0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9Yi5yZW5kZXJlcixkO2Q9dGhpcy5vcHRpb25zLmFuaW1hdGlvbjt2YXIgZT10aGlzLmNsaXBCb3h8fGIuY2xpcEJveCxmPWIuaW52ZXJ0ZWQsZztpZihkJiYhZGEoZCkpZD1jYVt0aGlzLnR5cGVdLmFuaW1hdGlvbjtnPVtcIl9zaGFyZWRDbGlwXCIsZC5kdXJhdGlvbixkLmVhc2luZyxlLmhlaWdodF0uam9pbihcIixcIik7YT8oYT1iW2ddLGQ9YltnK1wibVwiXSxhfHwoYltnXT1hPWMuY2xpcFJlY3QocihlLHt3aWR0aDowfSkpLGJbZytcIm1cIl09ZD1jLmNsaXBSZWN0KC05OSxmPy1iLnBsb3RMZWZ0Oi1iLnBsb3RUb3AsOTksZj9iLmNoYXJ0V2lkdGg6Yi5jaGFydEhlaWdodCkpLHRoaXMuZ3JvdXAuY2xpcChhKSx0aGlzLm1hcmtlckdyb3VwLmNsaXAoZCksdGhpcy5zaGFyZWRDbGlwS2V5PWcpOigoYT1iW2ddKSYmYS5hbmltYXRlKHt3aWR0aDpiLnBsb3RTaXplWH0sZCksYltnK1wibVwiXSYmYltnK1wibVwiXS5hbmltYXRlKHt3aWR0aDpiLnBsb3RTaXplWCtcbjk5fSxkKSx0aGlzLmFuaW1hdGU9bnVsbCl9LGFmdGVyQW5pbWF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2hhcnQsYj10aGlzLnNoYXJlZENsaXBLZXksYz10aGlzLmdyb3VwLGQ9dGhpcy5jbGlwQm94O2lmKGMmJnRoaXMub3B0aW9ucy5jbGlwIT09ITEpe2lmKCFifHwhZCljLmNsaXAoZD9hLnJlbmRlcmVyLmNsaXBSZWN0KGQpOmEuY2xpcFJlY3QpO3RoaXMubWFya2VyR3JvdXAuY2xpcCgpfUkodGhpcyxcImFmdGVyQW5pbWF0ZVwiKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YiYmYVtiXSYmKGR8fChhW2JdPWFbYl0uZGVzdHJveSgpKSxhW2IrXCJtXCJdJiYoYVtiK1wibVwiXT1hW2IrXCJtXCJdLmRlc3Ryb3koKSkpfSwxMDApfSxkcmF3UG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLnBvaW50cyxjPXRoaXMuY2hhcnQsZCxlLGYsZyxoLGksaixrLGw9dGhpcy5vcHRpb25zLm1hcmtlcixuPXRoaXMucG9pbnRBdHRyW1wiXCJdLG0sbyxxLHQ9dGhpcy5tYXJrZXJHcm91cCxzPXAobC5lbmFibGVkLFxuIXRoaXMucmVxdWlyZVNvcnRpbmd8fHRoaXMuYWN0aXZlUG9pbnRDb3VudDwwLjUqdGhpcy54QXhpcy5sZW4vbC5yYWRpdXMpO2lmKGwuZW5hYmxlZCE9PSExfHx0aGlzLl9oYXNQb2ludE1hcmtlcnMpZm9yKGY9Yi5sZW5ndGg7Zi0tOylpZihnPWJbZl0sZD1VKGcucGxvdFgpLGU9Zy5wbG90WSxrPWcuZ3JhcGhpYyxtPWcubWFya2VyfHx7fSxvPSEhZy5tYXJrZXIsYT1zJiZtLmVuYWJsZWQ9PT11fHxtLmVuYWJsZWQscT1jLmlzSW5zaWRlUGxvdCh2KGQpLGUsYy5pbnZlcnRlZCksYSYmZSE9PXUmJiFpc05hTihlKSYmZy55IT09bnVsbClpZihhPWcucG9pbnRBdHRyW2cuc2VsZWN0ZWQ/XCJzZWxlY3RcIjpcIlwiXXx8bixoPWEucixpPXAobS5zeW1ib2wsdGhpcy5zeW1ib2wpLGo9aS5pbmRleE9mKFwidXJsXCIpPT09MCxrKWtbcT9cInNob3dcIjpcImhpZGVcIl0oITApLmFuaW1hdGUocih7eDpkLWgseTplLWh9LGsuc3ltYm9sTmFtZT97d2lkdGg6MipoLGhlaWdodDoyKmh9Ont9KSk7ZWxzZXtpZihxJiZcbihoPjB8fGopKWcuZ3JhcGhpYz1jLnJlbmRlcmVyLnN5bWJvbChpLGQtaCxlLWgsMipoLDIqaCxvP206bCkuYXR0cihhKS5hZGQodCl9ZWxzZSBpZihrKWcuZ3JhcGhpYz1rLmRlc3Ryb3koKX0sY29udmVydEF0dHJpYnM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5wb2ludEF0dHJUb09wdGlvbnMsZixnLGg9e30sYT1hfHx7fSxiPWJ8fHt9LGM9Y3x8e30sZD1kfHx7fTtmb3IoZiBpbiBlKWc9ZVtmXSxoW2ZdPXAoYVtnXSxiW2ZdLGNbZl0sZFtmXSk7cmV0dXJuIGh9LGdldEF0dHJpYnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9Y2FbYS50eXBlXS5tYXJrZXI/Yi5tYXJrZXI6YixkPWMuc3RhdGVzLGU9ZC5ob3ZlcixmLGc9YS5jb2xvcjtmPXtzdHJva2U6ZyxmaWxsOmd9O3ZhciBoPWEucG9pbnRzfHxbXSxpLGo9W10sayxsPWEucG9pbnRBdHRyVG9PcHRpb25zO2s9YS5oYXNQb2ludFNwZWNpZmljT3B0aW9uczt2YXIgbj1iLm5lZ2F0aXZlQ29sb3IsbT1cbmMubGluZUNvbG9yLG89Yy5maWxsQ29sb3I7aT1iLnR1cmJvVGhyZXNob2xkO3ZhciBwO2IubWFya2VyPyhlLnJhZGl1cz1lLnJhZGl1c3x8Yy5yYWRpdXMrZS5yYWRpdXNQbHVzLGUubGluZVdpZHRoPWUubGluZVdpZHRofHxjLmxpbmVXaWR0aCtlLmxpbmVXaWR0aFBsdXMpOmUuY29sb3I9ZS5jb2xvcnx8eWEoZS5jb2xvcnx8ZykuYnJpZ2h0ZW4oZS5icmlnaHRuZXNzKS5nZXQoKTtqW1wiXCJdPWEuY29udmVydEF0dHJpYnMoYyxmKTtxKFtcImhvdmVyXCIsXCJzZWxlY3RcIl0sZnVuY3Rpb24oYil7altiXT1hLmNvbnZlcnRBdHRyaWJzKGRbYl0saltcIlwiXSl9KTthLnBvaW50QXR0cj1qO2c9aC5sZW5ndGg7aWYoIWl8fGc8aXx8aylmb3IoO2ctLTspe2k9aFtnXTtpZigoYz1pLm9wdGlvbnMmJmkub3B0aW9ucy5tYXJrZXJ8fGkub3B0aW9ucykmJmMuZW5hYmxlZD09PSExKWMucmFkaXVzPTA7aWYoaS5uZWdhdGl2ZSYmbilpLmNvbG9yPWkuZmlsbENvbG9yPW47az1iLmNvbG9yQnlQb2ludHx8XG5pLmNvbG9yO2lmKGkub3B0aW9ucylmb3IocCBpbiBsKXMoY1tsW3BdXSkmJihrPSEwKTtpZihrKXtjPWN8fHt9O2s9W107ZD1jLnN0YXRlc3x8e307Zj1kLmhvdmVyPWQuaG92ZXJ8fHt9O2lmKCFiLm1hcmtlcilmLmNvbG9yPWYuY29sb3J8fCFpLm9wdGlvbnMuY29sb3ImJmUuY29sb3J8fHlhKGkuY29sb3IpLmJyaWdodGVuKGYuYnJpZ2h0bmVzc3x8ZS5icmlnaHRuZXNzKS5nZXQoKTtmPXtjb2xvcjppLmNvbG9yfTtpZighbylmLmZpbGxDb2xvcj1pLmNvbG9yO2lmKCFtKWYubGluZUNvbG9yPWkuY29sb3I7a1tcIlwiXT1hLmNvbnZlcnRBdHRyaWJzKHIoZixjKSxqW1wiXCJdKTtrLmhvdmVyPWEuY29udmVydEF0dHJpYnMoZC5ob3ZlcixqLmhvdmVyLGtbXCJcIl0pO2suc2VsZWN0PWEuY29udmVydEF0dHJpYnMoZC5zZWxlY3Qsai5zZWxlY3Qsa1tcIlwiXSl9ZWxzZSBrPWo7aS5wb2ludEF0dHI9a319LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydCxjPS9BcHBsZVdlYktpdFxcLzUzMy8udGVzdCh3YSksXG5kLGUsZj1hLmRhdGF8fFtdLGcsaCxpO0koYSxcImRlc3Ryb3lcIik7WChhKTtxKGEuYXhpc1R5cGVzfHxbXSxmdW5jdGlvbihiKXtpZihpPWFbYl0pbGEoaS5zZXJpZXMsYSksaS5pc0RpcnR5PWkuZm9yY2VSZWRyYXc9ITB9KTthLmxlZ2VuZEl0ZW0mJmEuY2hhcnQubGVnZW5kLmRlc3Ryb3lJdGVtKGEpO2ZvcihlPWYubGVuZ3RoO2UtLTspKGc9ZltlXSkmJmcuZGVzdHJveSYmZy5kZXN0cm95KCk7YS5wb2ludHM9bnVsbDtjbGVhclRpbWVvdXQoYS5hbmltYXRpb25UaW1lb3V0KTtxKFwiYXJlYSxncmFwaCxkYXRhTGFiZWxzR3JvdXAsZ3JvdXAsbWFya2VyR3JvdXAsdHJhY2tlcixncmFwaE5lZyxhcmVhTmVnLHBvc0NsaXAsbmVnQ2xpcFwiLnNwbGl0KFwiLFwiKSxmdW5jdGlvbihiKXthW2JdJiYoZD1jJiZiPT09XCJncm91cFwiP1wiaGlkZVwiOlwiZGVzdHJveVwiLGFbYl1bZF0oKSl9KTtpZihiLmhvdmVyU2VyaWVzPT09YSliLmhvdmVyU2VyaWVzPW51bGw7bGEoYi5zZXJpZXMsYSk7Zm9yKGggaW4gYSlkZWxldGUgYVtoXX0sXG5nZXRTZWdtZW50UGF0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9W10sZD1iLm9wdGlvbnMuc3RlcDtxKGEsZnVuY3Rpb24oZSxmKXt2YXIgZz1lLnBsb3RYLGg9ZS5wbG90WSxpO2IuZ2V0UG9pbnRTcGxpbmU/Yy5wdXNoLmFwcGx5KGMsYi5nZXRQb2ludFNwbGluZShhLGUsZikpOihjLnB1c2goZj9cIkxcIjpcIk1cIiksZCYmZiYmKGk9YVtmLTFdLGQ9PT1cInJpZ2h0XCI/Yy5wdXNoKGkucGxvdFgsaCk6ZD09PVwiY2VudGVyXCI/Yy5wdXNoKChpLnBsb3RYK2cpLzIsaS5wbG90WSwoaS5wbG90WCtnKS8yLGgpOmMucHVzaChnLGkucGxvdFkpKSxjLnB1c2goZS5wbG90WCxlLnBsb3RZKSl9KTtyZXR1cm4gY30sZ2V0R3JhcGhQYXRoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVtdLGMsZD1bXTtxKGEuc2VnbWVudHMsZnVuY3Rpb24oZSl7Yz1hLmdldFNlZ21lbnRQYXRoKGUpO2UubGVuZ3RoPjE/Yj1iLmNvbmNhdChjKTpkLnB1c2goZVswXSl9KTthLnNpbmdsZVBvaW50cz1kO3JldHVybiBhLmdyYXBoUGF0aD1cbmJ9LGRyYXdHcmFwaDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLm9wdGlvbnMsYz1bW1wiZ3JhcGhcIixiLmxpbmVDb2xvcnx8dGhpcy5jb2xvcl1dLGQ9Yi5saW5lV2lkdGgsZT1iLmRhc2hTdHlsZSxmPWIubGluZWNhcCE9PVwic3F1YXJlXCIsZz10aGlzLmdldEdyYXBoUGF0aCgpLGg9Yi5uZWdhdGl2ZUNvbG9yO2gmJmMucHVzaChbXCJncmFwaE5lZ1wiLGhdKTtxKGMsZnVuY3Rpb24oYyxoKXt2YXIgaz1jWzBdLGw9YVtrXTtpZihsKWJiKGwpLGwuYW5pbWF0ZSh7ZDpnfSk7ZWxzZSBpZihkJiZnLmxlbmd0aClsPXtzdHJva2U6Y1sxXSxcInN0cm9rZS13aWR0aFwiOmQsZmlsbDpQLHpJbmRleDoxfSxlP2wuZGFzaHN0eWxlPWU6ZiYmKGxbXCJzdHJva2UtbGluZWNhcFwiXT1sW1wic3Ryb2tlLWxpbmVqb2luXCJdPVwicm91bmRcIiksYVtrXT1hLmNoYXJ0LnJlbmRlcmVyLnBhdGgoZykuYXR0cihsKS5hZGQoYS5ncm91cCkuc2hhZG93KCFoJiZiLnNoYWRvdyl9KX0sY2xpcE5lZzpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5vcHRpb25zLGI9dGhpcy5jaGFydCxjPWIucmVuZGVyZXIsZD1hLm5lZ2F0aXZlQ29sb3J8fGEubmVnYXRpdmVGaWxsQ29sb3IsZSxmPXRoaXMuZ3JhcGgsZz10aGlzLmFyZWEsaD10aGlzLnBvc0NsaXAsaT10aGlzLm5lZ0NsaXA7ZT1iLmNoYXJ0V2lkdGg7dmFyIGo9Yi5jaGFydEhlaWdodCxrPXQoZSxqKSxsPXRoaXMueUF4aXM7aWYoZCYmKGZ8fGcpKXtkPXYobC50b1BpeGVscyhhLnRocmVzaG9sZHx8MCwhMCkpO2Q8MCYmKGstPWQpO2E9e3g6MCx5OjAsd2lkdGg6ayxoZWlnaHQ6ZH07az17eDowLHk6ZCx3aWR0aDprLGhlaWdodDprfTtpZihiLmludmVydGVkKWEuaGVpZ2h0PWsueT1iLnBsb3RXaWR0aC1kLGMuaXNWTUwmJihhPXt4OmIucGxvdFdpZHRoLWQtYi5wbG90TGVmdCx5OjAsd2lkdGg6ZSxoZWlnaHQ6an0saz17eDpkK2IucGxvdExlZnQtZSx5OjAsd2lkdGg6Yi5wbG90TGVmdCtkLGhlaWdodDplfSk7bC5yZXZlcnNlZD8oYj1rLGU9YSk6KGI9YSxlPWspO2g/XG4oaC5hbmltYXRlKGIpLGkuYW5pbWF0ZShlKSk6KHRoaXMucG9zQ2xpcD1oPWMuY2xpcFJlY3QoYiksdGhpcy5uZWdDbGlwPWk9Yy5jbGlwUmVjdChlKSxmJiZ0aGlzLmdyYXBoTmVnJiYoZi5jbGlwKGgpLHRoaXMuZ3JhcGhOZWcuY2xpcChpKSksZyYmKGcuY2xpcChoKSx0aGlzLmFyZWFOZWcuY2xpcChpKSkpfX0saW52ZXJ0R3JvdXBzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYSgpe3ZhciBhPXt3aWR0aDpiLnlBeGlzLmxlbixoZWlnaHQ6Yi54QXhpcy5sZW59O3EoW1wiZ3JvdXBcIixcIm1hcmtlckdyb3VwXCJdLGZ1bmN0aW9uKGMpe2JbY10mJmJbY10uYXR0cihhKS5pbnZlcnQoKX0pfXZhciBiPXRoaXMsYz1iLmNoYXJ0O2lmKGIueEF4aXMpTihjLFwicmVzaXplXCIsYSksTihiLFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7WChjLFwicmVzaXplXCIsYSl9KSxhKCksYi5pbnZlcnRHcm91cHM9YX0scGxvdEdyb3VwOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9dGhpc1thXSxnPSFmO2cmJih0aGlzW2FdPVxuZj10aGlzLmNoYXJ0LnJlbmRlcmVyLmcoYikuYXR0cih7dmlzaWJpbGl0eTpjLHpJbmRleDpkfHwwLjF9KS5hZGQoZSkpO2ZbZz9cImF0dHJcIjpcImFuaW1hdGVcIl0odGhpcy5nZXRQbG90Qm94KCkpO3JldHVybiBmfSxnZXRQbG90Qm94OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGFydCxiPXRoaXMueEF4aXMsYz10aGlzLnlBeGlzO2lmKGEuaW52ZXJ0ZWQpYj1jLGM9dGhpcy54QXhpcztyZXR1cm57dHJhbnNsYXRlWDpiP2IubGVmdDphLnBsb3RMZWZ0LHRyYW5zbGF0ZVk6Yz9jLnRvcDphLnBsb3RUb3Asc2NhbGVYOjEsc2NhbGVZOjF9fSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydCxjLGQ9YS5vcHRpb25zLGU9KGM9ZC5hbmltYXRpb24pJiYhIWEuYW5pbWF0ZSYmYi5yZW5kZXJlci5pc1NWRyYmcChjLmR1cmF0aW9uLDUwMCl8fDAsZj1hLnZpc2libGU/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIixnPWQuekluZGV4LGg9YS5oYXNSZW5kZXJlZCxpPWIuc2VyaWVzR3JvdXA7XG5jPWEucGxvdEdyb3VwKFwiZ3JvdXBcIixcInNlcmllc1wiLGYsZyxpKTthLm1hcmtlckdyb3VwPWEucGxvdEdyb3VwKFwibWFya2VyR3JvdXBcIixcIm1hcmtlcnNcIixmLGcsaSk7ZSYmYS5hbmltYXRlKCEwKTthLmdldEF0dHJpYnMoKTtjLmludmVydGVkPWEuaXNDYXJ0ZXNpYW4/Yi5pbnZlcnRlZDohMTthLmRyYXdHcmFwaCYmKGEuZHJhd0dyYXBoKCksYS5jbGlwTmVnKCkpO3EoYS5wb2ludHMsZnVuY3Rpb24oYSl7YS5yZWRyYXcmJmEucmVkcmF3KCl9KTthLmRyYXdEYXRhTGFiZWxzJiZhLmRyYXdEYXRhTGFiZWxzKCk7YS52aXNpYmxlJiZhLmRyYXdQb2ludHMoKTthLmRyYXdUcmFja2VyJiZhLm9wdGlvbnMuZW5hYmxlTW91c2VUcmFja2luZyE9PSExJiZhLmRyYXdUcmFja2VyKCk7Yi5pbnZlcnRlZCYmYS5pbnZlcnRHcm91cHMoKTtkLmNsaXAhPT0hMSYmIWEuc2hhcmVkQ2xpcEtleSYmIWgmJmMuY2xpcChiLmNsaXBSZWN0KTtlJiZhLmFuaW1hdGUoKTtpZighaCllP2EuYW5pbWF0aW9uVGltZW91dD1cbnNldFRpbWVvdXQoZnVuY3Rpb24oKXthLmFmdGVyQW5pbWF0ZSgpfSxlKTphLmFmdGVyQW5pbWF0ZSgpO2EuaXNEaXJ0eT1hLmlzRGlydHlEYXRhPSExO2EuaGFzUmVuZGVyZWQ9ITB9LHJlZHJhdzpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2hhcnQsYj10aGlzLmlzRGlydHlEYXRhLGM9dGhpcy5ncm91cCxkPXRoaXMueEF4aXMsZT10aGlzLnlBeGlzO2MmJihhLmludmVydGVkJiZjLmF0dHIoe3dpZHRoOmEucGxvdFdpZHRoLGhlaWdodDphLnBsb3RIZWlnaHR9KSxjLmFuaW1hdGUoe3RyYW5zbGF0ZVg6cChkJiZkLmxlZnQsYS5wbG90TGVmdCksdHJhbnNsYXRlWTpwKGUmJmUudG9wLGEucGxvdFRvcCl9KSk7dGhpcy50cmFuc2xhdGUoKTt0aGlzLnNldFRvb2x0aXBQb2ludHMmJnRoaXMuc2V0VG9vbHRpcFBvaW50cyghMCk7dGhpcy5yZW5kZXIoKTtiJiZJKHRoaXMsXCJ1cGRhdGVkRGF0YVwiKX19O0diLnByb3RvdHlwZT17ZGVzdHJveTpmdW5jdGlvbigpe1BhKHRoaXMsdGhpcy5heGlzKX0sXG5yZW5kZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9Yi5mb3JtYXQsYz1jP0phKGMsdGhpcyk6Yi5mb3JtYXR0ZXIuY2FsbCh0aGlzKTt0aGlzLmxhYmVsP3RoaXMubGFiZWwuYXR0cih7dGV4dDpjLHZpc2liaWxpdHk6XCJoaWRkZW5cIn0pOnRoaXMubGFiZWw9dGhpcy5heGlzLmNoYXJ0LnJlbmRlcmVyLnRleHQoYyxudWxsLG51bGwsYi51c2VIVE1MKS5jc3MoYi5zdHlsZSkuYXR0cih7YWxpZ246dGhpcy50ZXh0QWxpZ24scm90YXRpb246Yi5yb3RhdGlvbix2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9KS5hZGQoYSl9LHNldE9mZnNldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYXhpcyxkPWMuY2hhcnQsZT1kLmludmVydGVkLGY9dGhpcy5pc05lZ2F0aXZlLGc9Yy50cmFuc2xhdGUoYy51c2VQZXJjZW50YWdlPzEwMDp0aGlzLnRvdGFsLDAsMCwwLDEpLGM9Yy50cmFuc2xhdGUoMCksYz1RKGctYyksaD1kLnhBeGlzWzBdLnRyYW5zbGF0ZSh0aGlzLngpK2EsaT1kLnBsb3RIZWlnaHQsXG5mPXt4OmU/Zj9nOmctYzpoLHk6ZT9pLWgtYjpmP2ktZy1jOmktZyx3aWR0aDplP2M6YixoZWlnaHQ6ZT9iOmN9O2lmKGU9dGhpcy5sYWJlbCllLmFsaWduKHRoaXMuYWxpZ25PcHRpb25zLG51bGwsZiksZj1lLmFsaWduQXR0cixlW3RoaXMub3B0aW9ucy5jcm9wPT09ITF8fGQuaXNJbnNpZGVQbG90KGYueCxmLnkpP1wic2hvd1wiOlwiaGlkZVwiXSghMCl9fTtuYS5wcm90b3R5cGUuYnVpbGRTdGFja3M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlcmllcyxiPXAodGhpcy5vcHRpb25zLnJldmVyc2VkU3RhY2tzLCEwKSxjPWEubGVuZ3RoO2lmKCF0aGlzLmlzWEF4aXMpe2Zvcih0aGlzLnVzZVBlcmNlbnRhZ2U9ITE7Yy0tOylhW2I/YzphLmxlbmd0aC1jLTFdLnNldFN0YWNrZWRQb2ludHMoKTtpZih0aGlzLnVzZVBlcmNlbnRhZ2UpZm9yKGM9MDtjPGEubGVuZ3RoO2MrKylhW2NdLnNldFBlcmNlbnRTdGFja3MoKX19O25hLnByb3RvdHlwZS5yZW5kZXJTdGFja1RvdGFscz1mdW5jdGlvbigpe3ZhciBhPVxudGhpcy5jaGFydCxiPWEucmVuZGVyZXIsYz10aGlzLnN0YWNrcyxkLGUsZj10aGlzLnN0YWNrVG90YWxHcm91cDtpZighZil0aGlzLnN0YWNrVG90YWxHcm91cD1mPWIuZyhcInN0YWNrLWxhYmVsc1wiKS5hdHRyKHt2aXNpYmlsaXR5OlwidmlzaWJsZVwiLHpJbmRleDo2fSkuYWRkKCk7Zi50cmFuc2xhdGUoYS5wbG90TGVmdCxhLnBsb3RUb3ApO2ZvcihkIGluIGMpZm9yKGUgaW4gYT1jW2RdLGEpYVtlXS5yZW5kZXIoZil9O08ucHJvdG90eXBlLnNldFN0YWNrZWRQb2ludHM9ZnVuY3Rpb24oKXtpZih0aGlzLm9wdGlvbnMuc3RhY2tpbmcmJiEodGhpcy52aXNpYmxlIT09ITAmJnRoaXMuY2hhcnQub3B0aW9ucy5jaGFydC5pZ25vcmVIaWRkZW5TZXJpZXMhPT0hMSkpe3ZhciBhPXRoaXMucHJvY2Vzc2VkWERhdGEsYj10aGlzLnByb2Nlc3NlZFlEYXRhLGM9W10sZD1iLmxlbmd0aCxlPXRoaXMub3B0aW9ucyxmPWUudGhyZXNob2xkLGc9ZS5zdGFjayxlPWUuc3RhY2tpbmcsaD10aGlzLnN0YWNrS2V5LFxuaT1cIi1cIitoLGo9dGhpcy5uZWdTdGFja3Msaz10aGlzLnlBeGlzLGw9ay5zdGFja3Msbj1rLm9sZFN0YWNrcyxtLG8scCxxLHIscztmb3IocT0wO3E8ZDtxKyspe3I9YVtxXTtzPWJbcV07cD10aGlzLmluZGV4K1wiLFwiK3E7bz0obT1qJiZzPGYpP2k6aDtsW29dfHwobFtvXT17fSk7aWYoIWxbb11bcl0pbltvXSYmbltvXVtyXT8obFtvXVtyXT1uW29dW3JdLGxbb11bcl0udG90YWw9bnVsbCk6bFtvXVtyXT1uZXcgR2IoayxrLm9wdGlvbnMuc3RhY2tMYWJlbHMsbSxyLGcpO289bFtvXVtyXTtvLnBvaW50c1twXT1bby5jdW18fDBdO2U9PT1cInBlcmNlbnRcIj8obT1tP2g6aSxqJiZsW21dJiZsW21dW3JdPyhtPWxbbV1bcl0sby50b3RhbD1tLnRvdGFsPXQobS50b3RhbCxvLnRvdGFsKStRKHMpfHwwKTpvLnRvdGFsPWVhKG8udG90YWwrKFEocyl8fDApKSk6by50b3RhbD1lYShvLnRvdGFsKyhzfHwwKSk7by5jdW09KG8uY3VtfHwwKSsoc3x8MCk7by5wb2ludHNbcF0ucHVzaChvLmN1bSk7XG5jW3FdPW8uY3VtfWlmKGU9PT1cInBlcmNlbnRcIilrLnVzZVBlcmNlbnRhZ2U9ITA7dGhpcy5zdGFja2VkWURhdGE9YztrLm9sZFN0YWNrcz17fX19O08ucHJvdG90eXBlLnNldFBlcmNlbnRTdGFja3M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5zdGFja0tleSxjPWEueUF4aXMuc3RhY2tzLGQ9YS5wcm9jZXNzZWRYRGF0YTtxKFtiLFwiLVwiK2JdLGZ1bmN0aW9uKGIpe3ZhciBlO2Zvcih2YXIgZj1kLmxlbmd0aCxnLGg7Zi0tOylpZihnPWRbZl0sZT0oaD1jW2JdJiZjW2JdW2ddKSYmaC5wb2ludHNbYS5pbmRleCtcIixcIitmXSxnPWUpaD1oLnRvdGFsPzEwMC9oLnRvdGFsOjAsZ1swXT1lYShnWzBdKmgpLGdbMV09ZWEoZ1sxXSpoKSxhLnN0YWNrZWRZRGF0YVtmXT1nWzFdfSl9O3IoWWEucHJvdG90eXBlLHthZGRTZXJpZXM6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9dGhpczthJiYoYj1wKGIsITApLEkoZSxcImFkZFNlcmllc1wiLHtvcHRpb25zOmF9LGZ1bmN0aW9uKCl7ZD1lLmluaXRTZXJpZXMoYSk7XG5lLmlzRGlydHlMZWdlbmQ9ITA7ZS5saW5rU2VyaWVzKCk7YiYmZS5yZWRyYXcoYyl9KSk7cmV0dXJuIGR9LGFkZEF4aXM6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yj9cInhBeGlzXCI6XCJ5QXhpc1wiLGY9dGhpcy5vcHRpb25zO25ldyBuYSh0aGlzLHcoYSx7aW5kZXg6dGhpc1tlXS5sZW5ndGgsaXNYOmJ9KSk7ZltlXT1yYShmW2VdfHx7fSk7ZltlXS5wdXNoKGEpO3AoYywhMCkmJnRoaXMucmVkcmF3KGQpfSxzaG93TG9hZGluZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5vcHRpb25zLGQ9Yi5sb2FkaW5nRGl2LGU9Yy5sb2FkaW5nLGY9ZnVuY3Rpb24oKXtkJiZCKGQse2xlZnQ6Yi5wbG90TGVmdCtcInB4XCIsdG9wOmIucGxvdFRvcCtcInB4XCIsd2lkdGg6Yi5wbG90V2lkdGgrXCJweFwiLGhlaWdodDpiLnBsb3RIZWlnaHQrXCJweFwifSl9O2lmKCFkKWIubG9hZGluZ0Rpdj1kPSQoS2Ese2NsYXNzTmFtZTpcImhpZ2hjaGFydHMtbG9hZGluZ1wifSxyKGUuc3R5bGUse3pJbmRleDoxMCxkaXNwbGF5OlB9KSxcbmIuY29udGFpbmVyKSxiLmxvYWRpbmdTcGFuPSQoXCJzcGFuXCIsbnVsbCxlLmxhYmVsU3R5bGUsZCksTihiLFwicmVkcmF3XCIsZik7Yi5sb2FkaW5nU3Bhbi5pbm5lckhUTUw9YXx8Yy5sYW5nLmxvYWRpbmc7aWYoIWIubG9hZGluZ1Nob3duKUIoZCx7b3BhY2l0eTowLGRpc3BsYXk6XCJcIn0pLGpiKGQse29wYWNpdHk6ZS5zdHlsZS5vcGFjaXR5fSx7ZHVyYXRpb246ZS5zaG93RHVyYXRpb258fDB9KSxiLmxvYWRpbmdTaG93bj0hMDtmKCl9LGhpZGVMb2FkaW5nOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLGI9dGhpcy5sb2FkaW5nRGl2O2ImJmpiKGIse29wYWNpdHk6MH0se2R1cmF0aW9uOmEubG9hZGluZy5oaWRlRHVyYXRpb258fDEwMCxjb21wbGV0ZTpmdW5jdGlvbigpe0IoYix7ZGlzcGxheTpQfSl9fSk7dGhpcy5sb2FkaW5nU2hvd249ITF9fSk7cihGYS5wcm90b3R5cGUse3VwZGF0ZTpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKCl7Zi5hcHBseU9wdGlvbnMoYSk7aWYoZGEoYSkmJlxuIUhhKGEpKWYucmVkcmF3PWZ1bmN0aW9uKCl7aWYoaClhJiZhLm1hcmtlciYmYS5tYXJrZXIuc3ltYm9sP2YuZ3JhcGhpYz1oLmRlc3Ryb3koKTpoLmF0dHIoZi5wb2ludEF0dHJbZi5zdGF0ZXx8XCJcIl0pO2lmKGEmJmEuZGF0YUxhYmVscyYmZi5kYXRhTGFiZWwpZi5kYXRhTGFiZWw9Zi5kYXRhTGFiZWwuZGVzdHJveSgpO2YucmVkcmF3PW51bGx9O2k9Zi5pbmRleDtnLnVwZGF0ZVBhcmFsbGVsQXJyYXlzKGYsaSk7ay5kYXRhW2ldPWYub3B0aW9ucztnLmlzRGlydHk9Zy5pc0RpcnR5RGF0YT0hMDtpZighZy5maXhlZEJveCYmZy5oYXNDYXJ0ZXNpYW5TZXJpZXMpai5pc0RpcnR5Qm94PSEwO2subGVnZW5kVHlwZT09PVwicG9pbnRcIiYmai5sZWdlbmQuZGVzdHJveUl0ZW0oZik7YiYmai5yZWRyYXcoYyl9dmFyIGY9dGhpcyxnPWYuc2VyaWVzLGg9Zi5ncmFwaGljLGksaj1nLmNoYXJ0LGs9Zy5vcHRpb25zLGI9cChiLCEwKTtkPT09ITE/ZSgpOmYuZmlyZVBvaW50RXZlbnQoXCJ1cGRhdGVcIixcbntvcHRpb25zOmF9LGUpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5zZXJpZXMsZT1kLnBvaW50cyxmPWQuY2hhcnQsZyxoPWQuZGF0YTtSYShiLGYpO2E9cChhLCEwKTtjLmZpcmVQb2ludEV2ZW50KFwicmVtb3ZlXCIsbnVsbCxmdW5jdGlvbigpe2c9TWEoYyxoKTtoLmxlbmd0aD09PWUubGVuZ3RoJiZlLnNwbGljZShnLDEpO2guc3BsaWNlKGcsMSk7ZC5vcHRpb25zLmRhdGEuc3BsaWNlKGcsMSk7ZC51cGRhdGVQYXJhbGxlbEFycmF5cyhjLFwic3BsaWNlXCIsZywxKTtjLmRlc3Ryb3koKTtkLmlzRGlydHk9ITA7ZC5pc0RpcnR5RGF0YT0hMDthJiZmLnJlZHJhdygpfSl9fSk7cihPLnByb3RvdHlwZSx7YWRkUG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5vcHRpb25zLGY9dGhpcy5kYXRhLGc9dGhpcy5ncmFwaCxoPXRoaXMuYXJlYSxpPXRoaXMuY2hhcnQsaj10aGlzLnhBeGlzJiZ0aGlzLnhBeGlzLm5hbWVzLGs9ZyYmZy5zaGlmdHx8MCxsPWUuZGF0YSxcbm4sbT10aGlzLnhEYXRhO1JhKGQsaSk7YyYmcShbZyxoLHRoaXMuZ3JhcGhOZWcsdGhpcy5hcmVhTmVnXSxmdW5jdGlvbihhKXtpZihhKWEuc2hpZnQ9aysxfSk7aWYoaCloLmlzQXJlYT0hMDtiPXAoYiwhMCk7ZD17c2VyaWVzOnRoaXN9O3RoaXMucG9pbnRDbGFzcy5wcm90b3R5cGUuYXBwbHlPcHRpb25zLmFwcGx5KGQsW2FdKTtnPWQueDtoPW0ubGVuZ3RoO2lmKHRoaXMucmVxdWlyZVNvcnRpbmcmJmc8bVtoLTFdKWZvcihuPSEwO2gmJm1baC0xXT5nOyloLS07dGhpcy51cGRhdGVQYXJhbGxlbEFycmF5cyhkLFwic3BsaWNlXCIsaCwwLDApO3RoaXMudXBkYXRlUGFyYWxsZWxBcnJheXMoZCxoKTtpZihqJiZkLm5hbWUpaltnXT1kLm5hbWU7bC5zcGxpY2UoaCwwLGEpO24mJih0aGlzLmRhdGEuc3BsaWNlKGgsMCxudWxsKSx0aGlzLnByb2Nlc3NEYXRhKCkpO2UubGVnZW5kVHlwZT09PVwicG9pbnRcIiYmdGhpcy5nZW5lcmF0ZVBvaW50cygpO2MmJihmWzBdJiZmWzBdLnJlbW92ZT9mWzBdLnJlbW92ZSghMSk6XG4oZi5zaGlmdCgpLHRoaXMudXBkYXRlUGFyYWxsZWxBcnJheXMoZCxcInNoaWZ0XCIpLGwuc2hpZnQoKSkpO3RoaXMuaXNEaXJ0eURhdGE9dGhpcy5pc0RpcnR5PSEwO2ImJih0aGlzLmdldEF0dHJpYnMoKSxpLnJlZHJhdygpKX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY2hhcnQsYT1wKGEsITApO2lmKCFjLmlzUmVtb3ZpbmcpYy5pc1JlbW92aW5nPSEwLEkoYyxcInJlbW92ZVwiLG51bGwsZnVuY3Rpb24oKXtjLmRlc3Ryb3koKTtkLmlzRGlydHlMZWdlbmQ9ZC5pc0RpcnR5Qm94PSEwO2QubGlua1NlcmllcygpO2EmJmQucmVkcmF3KGIpfSk7Yy5pc1JlbW92aW5nPSExfSx1cGRhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9dGhpcy5jaGFydCxlPXRoaXMudXNlck9wdGlvbnMsZj10aGlzLnR5cGUsZz1IW2ZdLnByb3RvdHlwZSxoPVtcImdyb3VwXCIsXCJtYXJrZXJHcm91cFwiLFwiZGF0YUxhYmVsc0dyb3VwXCJdLGk7cShoLGZ1bmN0aW9uKGEpe2hbYV09Y1thXTtkZWxldGUgY1thXX0pO1xuYT13KGUse2FuaW1hdGlvbjohMSxpbmRleDp0aGlzLmluZGV4LHBvaW50U3RhcnQ6dGhpcy54RGF0YVswXX0se2RhdGE6dGhpcy5vcHRpb25zLmRhdGF9LGEpO3RoaXMucmVtb3ZlKCExKTtmb3IoaSBpbiBnKWcuaGFzT3duUHJvcGVydHkoaSkmJih0aGlzW2ldPXUpO3IodGhpcyxIW2EudHlwZXx8Zl0ucHJvdG90eXBlKTtxKGgsZnVuY3Rpb24oYSl7Y1thXT1oW2FdfSk7dGhpcy5pbml0KGQsYSk7ZC5saW5rU2VyaWVzKCk7cChiLCEwKSYmZC5yZWRyYXcoITEpfX0pO3IobmEucHJvdG90eXBlLHt1cGRhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNoYXJ0LGE9Yy5vcHRpb25zW3RoaXMuY29sbF1bdGhpcy5vcHRpb25zLmluZGV4XT13KHRoaXMudXNlck9wdGlvbnMsYSk7dGhpcy5kZXN0cm95KCEwKTt0aGlzLl9hZGRlZFBsb3RMQj11O3RoaXMuaW5pdChjLHIoYSx7ZXZlbnRzOnV9KSk7Yy5pc0RpcnR5Qm94PSEwO3AoYiwhMCkmJmMucmVkcmF3KCl9LHJlbW92ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9XG50aGlzLmNoYXJ0LGM9dGhpcy5jb2xsLGQ9dGhpcy5zZXJpZXMsZT1kLmxlbmd0aDtlLS07KWRbZV0mJmRbZV0ucmVtb3ZlKCExKTtsYShiLmF4ZXMsdGhpcyk7bGEoYltjXSx0aGlzKTtiLm9wdGlvbnNbY10uc3BsaWNlKHRoaXMub3B0aW9ucy5pbmRleCwxKTtxKGJbY10sZnVuY3Rpb24oYSxiKXthLm9wdGlvbnMuaW5kZXg9Yn0pO3RoaXMuZGVzdHJveSgpO2IuaXNEaXJ0eUJveD0hMDtwKGEsITApJiZiLnJlZHJhdygpfSxzZXRUaXRsZTpmdW5jdGlvbihhLGIpe3RoaXMudXBkYXRlKHt0aXRsZTphfSxiKX0sc2V0Q2F0ZWdvcmllczpmdW5jdGlvbihhLGIpe3RoaXMudXBkYXRlKHtjYXRlZ29yaWVzOmF9LGIpfX0pO2lhPW1hKE8pO0gubGluZT1pYTtjYS5hcmVhPXcoVCx7dGhyZXNob2xkOjB9KTt2YXIgcWE9bWEoTyx7dHlwZTpcImFyZWFcIixnZXRTZWdtZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1bXSxjPVtdLGQ9W10sZT10aGlzLnhBeGlzLGY9dGhpcy55QXhpcyxnPWYuc3RhY2tzW3RoaXMuc3RhY2tLZXldLFxuaD17fSxpLGosaz10aGlzLnBvaW50cyxsPXRoaXMub3B0aW9ucy5jb25uZWN0TnVsbHMsbixtO2lmKHRoaXMub3B0aW9ucy5zdGFja2luZyYmIXRoaXMuY3JvcHBlZCl7Zm9yKG49MDtuPGsubGVuZ3RoO24rKyloW2tbbl0ueF09a1tuXTtmb3IobSBpbiBnKWdbbV0udG90YWwhPT1udWxsJiZkLnB1c2goK20pO2Quc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhLWJ9KTtxKGQsZnVuY3Rpb24oYil7dmFyIGQ9MCxrO2lmKCFsfHxoW2JdJiZoW2JdLnkhPT1udWxsKWlmKGhbYl0pYy5wdXNoKGhbYl0pO2Vsc2V7Zm9yKG49YS5pbmRleDtuPD1mLnNlcmllcy5sZW5ndGg7bisrKWlmKGs9Z1tiXS5wb2ludHNbbitcIixcIitiXSl7ZD1rWzFdO2JyZWFrfWk9ZS50cmFuc2xhdGUoYik7aj1mLnRvUGl4ZWxzKGQsITApO2MucHVzaCh7eTpudWxsLHBsb3RYOmksY2xpZW50WDppLHBsb3RZOmoseUJvdHRvbTpqLG9uTW91c2VPdmVyOnNhfSl9fSk7Yy5sZW5ndGgmJmIucHVzaChjKX1lbHNlIE8ucHJvdG90eXBlLmdldFNlZ21lbnRzLmNhbGwodGhpcyksXG5iPXRoaXMuc2VnbWVudHM7dGhpcy5zZWdtZW50cz1ifSxnZXRTZWdtZW50UGF0aDpmdW5jdGlvbihhKXt2YXIgYj1PLnByb3RvdHlwZS5nZXRTZWdtZW50UGF0aC5jYWxsKHRoaXMsYSksYz1bXS5jb25jYXQoYiksZCxlPXRoaXMub3B0aW9ucztkPWIubGVuZ3RoO3ZhciBmPXRoaXMueUF4aXMuZ2V0VGhyZXNob2xkKGUudGhyZXNob2xkKSxnO2Q9PT0zJiZjLnB1c2goXCJMXCIsYlsxXSxiWzJdKTtpZihlLnN0YWNraW5nJiYhdGhpcy5jbG9zZWRTdGFja3MpZm9yKGQ9YS5sZW5ndGgtMTtkPj0wO2QtLSlnPXAoYVtkXS55Qm90dG9tLGYpLGQ8YS5sZW5ndGgtMSYmZS5zdGVwJiZjLnB1c2goYVtkKzFdLnBsb3RYLGcpLGMucHVzaChhW2RdLnBsb3RYLGcpO2Vsc2UgdGhpcy5jbG9zZVNlZ21lbnQoYyxhLGYpO3RoaXMuYXJlYVBhdGg9dGhpcy5hcmVhUGF0aC5jb25jYXQoYyk7cmV0dXJuIGJ9LGNsb3NlU2VnbWVudDpmdW5jdGlvbihhLGIsYyl7YS5wdXNoKFwiTFwiLGJbYi5sZW5ndGgtMV0ucGxvdFgsXG5jLFwiTFwiLGJbMF0ucGxvdFgsYyl9LGRyYXdHcmFwaDpmdW5jdGlvbigpe3RoaXMuYXJlYVBhdGg9W107Ty5wcm90b3R5cGUuZHJhd0dyYXBoLmFwcGx5KHRoaXMpO3ZhciBhPXRoaXMsYj10aGlzLmFyZWFQYXRoLGM9dGhpcy5vcHRpb25zLGQ9Yy5uZWdhdGl2ZUNvbG9yLGU9Yy5uZWdhdGl2ZUZpbGxDb2xvcixmPVtbXCJhcmVhXCIsdGhpcy5jb2xvcixjLmZpbGxDb2xvcl1dOyhkfHxlKSYmZi5wdXNoKFtcImFyZWFOZWdcIixkLGVdKTtxKGYsZnVuY3Rpb24oZCl7dmFyIGU9ZFswXSxmPWFbZV07Zj9mLmFuaW1hdGUoe2Q6Yn0pOmFbZV09YS5jaGFydC5yZW5kZXJlci5wYXRoKGIpLmF0dHIoe2ZpbGw6cChkWzJdLHlhKGRbMV0pLnNldE9wYWNpdHkocChjLmZpbGxPcGFjaXR5LDAuNzUpKS5nZXQoKSksekluZGV4OjB9KS5hZGQoYS5ncm91cCl9KX0sZHJhd0xlZ2VuZFN5bWJvbDpNLmRyYXdSZWN0YW5nbGV9KTtILmFyZWE9cWE7Y2Euc3BsaW5lPXcoVCk7aWE9bWEoTyx7dHlwZTpcInNwbGluZVwiLFxuZ2V0UG9pbnRTcGxpbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWIucGxvdFgsZT1iLnBsb3RZLGY9YVtjLTFdLGc9YVtjKzFdLGgsaSxqLGs7aWYoZiYmZyl7YT1mLnBsb3RZO2o9Zy5wbG90WDt2YXIgZz1nLnBsb3RZLGw7aD0oMS41KmQrZi5wbG90WCkvMi41O2k9KDEuNSplK2EpLzIuNTtqPSgxLjUqZCtqKS8yLjU7az0oMS41KmUrZykvMi41O2w9KGstaSkqKGotZCkvKGotaCkrZS1rO2krPWw7ays9bDtpPmEmJmk+ZT8oaT10KGEsZSksaz0yKmUtaSk6aTxhJiZpPGUmJihpPUwoYSxlKSxrPTIqZS1pKTtrPmcmJms+ZT8oaz10KGcsZSksaT0yKmUtayk6azxnJiZrPGUmJihrPUwoZyxlKSxpPTIqZS1rKTtiLnJpZ2h0Q29udFg9ajtiLnJpZ2h0Q29udFk9a31jPyhiPVtcIkNcIixmLnJpZ2h0Q29udFh8fGYucGxvdFgsZi5yaWdodENvbnRZfHxmLnBsb3RZLGh8fGQsaXx8ZSxkLGVdLGYucmlnaHRDb250WD1mLnJpZ2h0Q29udFk9bnVsbCk6Yj1bXCJNXCIsZCxlXTtyZXR1cm4gYn19KTtILnNwbGluZT1cbmlhO2NhLmFyZWFzcGxpbmU9dyhjYS5hcmVhKTtxYT1xYS5wcm90b3R5cGU7aWE9bWEoaWEse3R5cGU6XCJhcmVhc3BsaW5lXCIsY2xvc2VkU3RhY2tzOiEwLGdldFNlZ21lbnRQYXRoOnFhLmdldFNlZ21lbnRQYXRoLGNsb3NlU2VnbWVudDpxYS5jbG9zZVNlZ21lbnQsZHJhd0dyYXBoOnFhLmRyYXdHcmFwaCxkcmF3TGVnZW5kU3ltYm9sOk0uZHJhd1JlY3RhbmdsZX0pO0guYXJlYXNwbGluZT1pYTtjYS5jb2x1bW49dyhULHtib3JkZXJDb2xvcjpcIiNGRkZGRkZcIixib3JkZXJSYWRpdXM6MCxncm91cFBhZGRpbmc6MC4yLG1hcmtlcjpudWxsLHBvaW50UGFkZGluZzowLjEsbWluUG9pbnRMZW5ndGg6MCxjcm9wVGhyZXNob2xkOjUwLHBvaW50UmFuZ2U6bnVsbCxzdGF0ZXM6e2hvdmVyOnticmlnaHRuZXNzOjAuMSxzaGFkb3c6ITEsaGFsbzohMX0sc2VsZWN0Ontjb2xvcjpcIiNDMEMwQzBcIixib3JkZXJDb2xvcjpcIiMwMDAwMDBcIixzaGFkb3c6ITF9fSxkYXRhTGFiZWxzOnthbGlnbjpudWxsLFxudmVydGljYWxBbGlnbjpudWxsLHk6bnVsbH0sc3RpY2t5VHJhY2tpbmc6ITEsdG9vbHRpcDp7ZGlzdGFuY2U6Nn0sdGhyZXNob2xkOjB9KTtpYT1tYShPLHt0eXBlOlwiY29sdW1uXCIscG9pbnRBdHRyVG9PcHRpb25zOntzdHJva2U6XCJib3JkZXJDb2xvclwiLGZpbGw6XCJjb2xvclwiLHI6XCJib3JkZXJSYWRpdXNcIn0sY3JvcFNob3VsZGVyOjAsdHJhY2tlckdyb3VwczpbXCJncm91cFwiLFwiZGF0YUxhYmVsc0dyb3VwXCJdLG5lZ1N0YWNrczohMCxpbml0OmZ1bmN0aW9uKCl7Ty5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGE9dGhpcyxiPWEuY2hhcnQ7Yi5oYXNSZW5kZXJlZCYmcShiLnNlcmllcyxmdW5jdGlvbihiKXtpZihiLnR5cGU9PT1hLnR5cGUpYi5pc0RpcnR5PSEwfSl9LGdldENvbHVtbk1ldHJpY3M6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9YS54QXhpcyxkPWEueUF4aXMsZT1jLnJldmVyc2VkLGYsZz17fSxoLGk9MDtiLmdyb3VwaW5nPT09XG4hMT9pPTE6cShhLmNoYXJ0LnNlcmllcyxmdW5jdGlvbihiKXt2YXIgYz1iLm9wdGlvbnMsZT1iLnlBeGlzO2lmKGIudHlwZT09PWEudHlwZSYmYi52aXNpYmxlJiZkLmxlbj09PWUubGVuJiZkLnBvcz09PWUucG9zKWMuc3RhY2tpbmc/KGY9Yi5zdGFja0tleSxnW2ZdPT09dSYmKGdbZl09aSsrKSxoPWdbZl0pOmMuZ3JvdXBpbmchPT0hMSYmKGg9aSsrKSxiLmNvbHVtbkluZGV4PWh9KTt2YXIgYz1MKFEoYy50cmFuc0EpKihjLm9yZGluYWxTbG9wZXx8Yi5wb2ludFJhbmdlfHxjLmNsb3Nlc3RQb2ludFJhbmdlfHxjLnRpY2tJbnRlcnZhbHx8MSksYy5sZW4pLGo9YypiLmdyb3VwUGFkZGluZyxrPShjLTIqaikvaSxsPWIucG9pbnRXaWR0aCxiPXMobCk/KGstbCkvMjprKmIucG9pbnRQYWRkaW5nLGw9cChsLGstMipiKTtyZXR1cm4gYS5jb2x1bW5NZXRyaWNzPXt3aWR0aDpsLG9mZnNldDpiKyhqKygoZT9pLShhLmNvbHVtbkluZGV4fHwwKTphLmNvbHVtbkluZGV4KXx8MCkqay1jLzIpKlxuKGU/LTE6MSl9fSx0cmFuc2xhdGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydCxjPWEub3B0aW9ucyxkPWEuYm9yZGVyV2lkdGg9cChjLmJvcmRlcldpZHRoLGEuYWN0aXZlUG9pbnRDb3VudD4wLjUqYS54QXhpcy5sZW4/MDoxKSxlPWEueUF4aXMsZj1hLnRyYW5zbGF0ZWRUaHJlc2hvbGQ9ZS5nZXRUaHJlc2hvbGQoYy50aHJlc2hvbGQpLGc9cChjLm1pblBvaW50TGVuZ3RoLDUpLGg9YS5nZXRDb2x1bW5NZXRyaWNzKCksaT1oLndpZHRoLGo9YS5iYXJXPXQoaSwxKzIqZCksaz1hLnBvaW50WE9mZnNldD1oLm9mZnNldCxsPS0oZCUyPzAuNTowKSxuPWQlMj8wLjU6MTtiLnJlbmRlcmVyLmlzVk1MJiZiLmludmVydGVkJiYobis9MSk7Yy5wb2ludFBhZGRpbmcmJihqPUxhKGopKTtPLnByb3RvdHlwZS50cmFuc2xhdGUuYXBwbHkoYSk7cShhLnBvaW50cyxmdW5jdGlvbihjKXt2YXIgZD1wKGMueUJvdHRvbSxmKSxoPUwodCgtOTk5LWQsYy5wbG90WSksZS5sZW4rOTk5K2QpLFxucT1jLnBsb3RYK2sscj1qLHM9TChoLGQpLHU7dT10KGgsZCktcztRKHUpPGcmJmcmJih1PWcscz12KFEocy1mKT5nP2QtZzpmLShlLnRyYW5zbGF0ZShjLnksMCwxLDAsMSk8PWY/ZzowKSkpO2MuYmFyWD1xO2MucG9pbnRXaWR0aD1pO2MudG9vbHRpcFBvcz1iLmludmVydGVkP1tlLmxlbi1oLGEueEF4aXMubGVuLXEtci8yXTpbcStyLzIsaCtlLnBvcy1iLnBsb3RUb3BdO3I9dihxK3IpK2w7cT12KHEpK2w7ci09cTtkPVEocyk8MC41O3U9dihzK3UpK247cz12KHMpK247dS09cztkJiYocy09MSx1Kz0xKTtjLnNoYXBlVHlwZT1cInJlY3RcIjtjLnNoYXBlQXJncz17eDpxLHk6cyx3aWR0aDpyLGhlaWdodDp1fX0pfSxnZXRTeW1ib2w6c2EsZHJhd0xlZ2VuZFN5bWJvbDpNLmRyYXdSZWN0YW5nbGUsZHJhd0dyYXBoOnNhLGRyYXdQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5jaGFydCxjPWEub3B0aW9ucyxkPWIucmVuZGVyZXIsZT1jLmFuaW1hdGlvbkxpbWl0fHwyNTAsXG5mLGc7cShhLnBvaW50cyxmdW5jdGlvbihoKXt2YXIgaT1oLnBsb3RZLGo9aC5ncmFwaGljO2lmKGkhPT11JiYhaXNOYU4oaSkmJmgueSE9PW51bGwpZj1oLnNoYXBlQXJncyxpPXMoYS5ib3JkZXJXaWR0aCk/e1wic3Ryb2tlLXdpZHRoXCI6YS5ib3JkZXJXaWR0aH06e30sZz1oLnBvaW50QXR0cltoLnNlbGVjdGVkP1wic2VsZWN0XCI6XCJcIl18fGEucG9pbnRBdHRyW1wiXCJdLGo/KGJiKGopLGouYXR0cihpKVtiLnBvaW50Q291bnQ8ZT9cImFuaW1hdGVcIjpcImF0dHJcIl0odyhmKSkpOmguZ3JhcGhpYz1kW2guc2hhcGVUeXBlXShmKS5hdHRyKGcpLmF0dHIoaSkuYWRkKGEuZ3JvdXApLnNoYWRvdyhjLnNoYWRvdyxudWxsLGMuc3RhY2tpbmcmJiFjLmJvcmRlclJhZGl1cyk7ZWxzZSBpZihqKWguZ3JhcGhpYz1qLmRlc3Ryb3koKX0pfSxhbmltYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueUF4aXMsYz10aGlzLm9wdGlvbnMsZD10aGlzLmNoYXJ0LmludmVydGVkLGU9e307aWYoYmEpYT8oZS5zY2FsZVk9XG4wLjAwMSxhPUwoYi5wb3MrYi5sZW4sdChiLnBvcyxiLnRvUGl4ZWxzKGMudGhyZXNob2xkKSkpLGQ/ZS50cmFuc2xhdGVYPWEtYi5sZW46ZS50cmFuc2xhdGVZPWEsdGhpcy5ncm91cC5hdHRyKGUpKTooZS5zY2FsZVk9MSxlW2Q/XCJ0cmFuc2xhdGVYXCI6XCJ0cmFuc2xhdGVZXCJdPWIucG9zLHRoaXMuZ3JvdXAuYW5pbWF0ZShlLHRoaXMub3B0aW9ucy5hbmltYXRpb24pLHRoaXMuYW5pbWF0ZT1udWxsKX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuY2hhcnQ7Yi5oYXNSZW5kZXJlZCYmcShiLnNlcmllcyxmdW5jdGlvbihiKXtpZihiLnR5cGU9PT1hLnR5cGUpYi5pc0RpcnR5PSEwfSk7Ty5wcm90b3R5cGUucmVtb3ZlLmFwcGx5KGEsYXJndW1lbnRzKX19KTtILmNvbHVtbj1pYTtjYS5iYXI9dyhjYS5jb2x1bW4pO3FhPW1hKGlhLHt0eXBlOlwiYmFyXCIsaW52ZXJ0ZWQ6ITB9KTtILmJhcj1xYTtjYS5zY2F0dGVyPXcoVCx7bGluZVdpZHRoOjAsdG9vbHRpcDp7aGVhZGVyRm9ybWF0Oic8c3BhbiBzdHlsZT1cImNvbG9yOntzZXJpZXMuY29sb3J9XCI+4pePPC9zcGFuPiA8c3BhbiBzdHlsZT1cImZvbnQtc2l6ZTogMTBweDtcIj4ge3Nlcmllcy5uYW1lfTwvc3Bhbj48YnIvPicsXG5wb2ludEZvcm1hdDpcIng6IDxiPntwb2ludC54fTwvYj48YnIvPnk6IDxiPntwb2ludC55fTwvYj48YnIvPlwifSxzdGlja3lUcmFja2luZzohMX0pO3FhPW1hKE8se3R5cGU6XCJzY2F0dGVyXCIsc29ydGVkOiExLHJlcXVpcmVTb3J0aW5nOiExLG5vU2hhcmVkVG9vbHRpcDohMCx0cmFja2VyR3JvdXBzOltcIm1hcmtlckdyb3VwXCIsXCJkYXRhTGFiZWxzR3JvdXBcIl0sdGFrZU9yZGluYWxQb3NpdGlvbjohMSxzaW5ndWxhclRvb2x0aXBzOiEwLGRyYXdHcmFwaDpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5saW5lV2lkdGgmJk8ucHJvdG90eXBlLmRyYXdHcmFwaC5jYWxsKHRoaXMpfX0pO0guc2NhdHRlcj1xYTtjYS5waWU9dyhULHtib3JkZXJDb2xvcjpcIiNGRkZGRkZcIixib3JkZXJXaWR0aDoxLGNlbnRlcjpbbnVsbCxudWxsXSxjbGlwOiExLGNvbG9yQnlQb2ludDohMCxkYXRhTGFiZWxzOntkaXN0YW5jZTozMCxlbmFibGVkOiEwLGZvcm1hdHRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvaW50Lm5hbWV9fSxcbmlnbm9yZUhpZGRlblBvaW50OiEwLGxlZ2VuZFR5cGU6XCJwb2ludFwiLG1hcmtlcjpudWxsLHNpemU6bnVsbCxzaG93SW5MZWdlbmQ6ITEsc2xpY2VkT2Zmc2V0OjEwLHN0YXRlczp7aG92ZXI6e2JyaWdodG5lc3M6MC4xLHNoYWRvdzohMX19LHN0aWNreVRyYWNraW5nOiExLHRvb2x0aXA6e2ZvbGxvd1BvaW50ZXI6ITB9fSk7VD17dHlwZTpcInBpZVwiLGlzQ2FydGVzaWFuOiExLHBvaW50Q2xhc3M6bWEoRmEse2luaXQ6ZnVuY3Rpb24oKXtGYS5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGE9dGhpcyxiO2lmKGEueTwwKWEueT1udWxsO3IoYSx7dmlzaWJsZTphLnZpc2libGUhPT0hMSxuYW1lOnAoYS5uYW1lLFwiU2xpY2VcIil9KTtiPWZ1bmN0aW9uKGIpe2Euc2xpY2UoYi50eXBlPT09XCJzZWxlY3RcIil9O04oYSxcInNlbGVjdFwiLGIpO04oYSxcInVuc2VsZWN0XCIsYik7cmV0dXJuIGF9LHNldFZpc2libGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuc2VyaWVzLFxuZD1jLmNoYXJ0O2IudmlzaWJsZT1iLm9wdGlvbnMudmlzaWJsZT1hPWE9PT11PyFiLnZpc2libGU6YTtjLm9wdGlvbnMuZGF0YVtNYShiLGMuZGF0YSldPWIub3B0aW9ucztxKFtcImdyYXBoaWNcIixcImRhdGFMYWJlbFwiLFwiY29ubmVjdG9yXCIsXCJzaGFkb3dHcm91cFwiXSxmdW5jdGlvbihjKXtpZihiW2NdKWJbY11bYT9cInNob3dcIjpcImhpZGVcIl0oITApfSk7Yi5sZWdlbmRJdGVtJiZkLmxlZ2VuZC5jb2xvcml6ZUl0ZW0oYixhKTtpZighYy5pc0RpcnR5JiZjLm9wdGlvbnMuaWdub3JlSGlkZGVuUG9pbnQpYy5pc0RpcnR5PSEwLGQucmVkcmF3KCl9LHNsaWNlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnNlcmllcztSYShjLGQuY2hhcnQpO3AoYiwhMCk7dGhpcy5zbGljZWQ9dGhpcy5vcHRpb25zLnNsaWNlZD1hPXMoYSk/YTohdGhpcy5zbGljZWQ7ZC5vcHRpb25zLmRhdGFbTWEodGhpcyxkLmRhdGEpXT10aGlzLm9wdGlvbnM7YT1hP3RoaXMuc2xpY2VkVHJhbnNsYXRpb246e3RyYW5zbGF0ZVg6MCxcbnRyYW5zbGF0ZVk6MH07dGhpcy5ncmFwaGljLmFuaW1hdGUoYSk7dGhpcy5zaGFkb3dHcm91cCYmdGhpcy5zaGFkb3dHcm91cC5hbmltYXRlKGEpfSxoYWxvUGF0aDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNoYXBlQXJncyxjPXRoaXMuc2VyaWVzLmNoYXJ0O3JldHVybiB0aGlzLnNsaWNlZHx8IXRoaXMudmlzaWJsZT9bXTp0aGlzLnNlcmllcy5jaGFydC5yZW5kZXJlci5zeW1ib2xzLmFyYyhjLnBsb3RMZWZ0K2IueCxjLnBsb3RUb3ArYi55LGIucithLGIucithLHtpbm5lclI6dGhpcy5zaGFwZUFyZ3MucixzdGFydDpiLnN0YXJ0LGVuZDpiLmVuZH0pfX0pLHJlcXVpcmVTb3J0aW5nOiExLG5vU2hhcmVkVG9vbHRpcDohMCx0cmFja2VyR3JvdXBzOltcImdyb3VwXCIsXCJkYXRhTGFiZWxzR3JvdXBcIl0sYXhpc1R5cGVzOltdLHBvaW50QXR0clRvT3B0aW9uczp7c3Ryb2tlOlwiYm9yZGVyQ29sb3JcIixcInN0cm9rZS13aWR0aFwiOlwiYm9yZGVyV2lkdGhcIixmaWxsOlwiY29sb3JcIn0sc2luZ3VsYXJUb29sdGlwczohMCxcbmdldENvbG9yOnNhLGFuaW1hdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIucG9pbnRzLGQ9Yi5zdGFydEFuZ2xlUmFkO2lmKCFhKXEoYyxmdW5jdGlvbihhKXt2YXIgYz1hLmdyYXBoaWMsYT1hLnNoYXBlQXJncztjJiYoYy5hdHRyKHtyOmIuY2VudGVyWzNdLzIsc3RhcnQ6ZCxlbmQ6ZH0pLGMuYW5pbWF0ZSh7cjphLnIsc3RhcnQ6YS5zdGFydCxlbmQ6YS5lbmR9LGIub3B0aW9ucy5hbmltYXRpb24pKX0pLGIuYW5pbWF0ZT1udWxsfSxzZXREYXRhOmZ1bmN0aW9uKGEsYixjLGQpe08ucHJvdG90eXBlLnNldERhdGEuY2FsbCh0aGlzLGEsITEsYyxkKTt0aGlzLnByb2Nlc3NEYXRhKCk7dGhpcy5nZW5lcmF0ZVBvaW50cygpO3AoYiwhMCkmJnRoaXMuY2hhcnQucmVkcmF3KGMpfSxnZW5lcmF0ZVBvaW50czpmdW5jdGlvbigpe3ZhciBhLGI9MCxjLGQsZSxmPXRoaXMub3B0aW9ucy5pZ25vcmVIaWRkZW5Qb2ludDtPLnByb3RvdHlwZS5nZW5lcmF0ZVBvaW50cy5jYWxsKHRoaXMpO1xuYz10aGlzLnBvaW50cztkPWMubGVuZ3RoO2ZvcihhPTA7YTxkO2ErKyllPWNbYV0sYis9ZiYmIWUudmlzaWJsZT8wOmUueTt0aGlzLnRvdGFsPWI7Zm9yKGE9MDthPGQ7YSsrKWU9Y1thXSxlLnBlcmNlbnRhZ2U9Yj4wP2UueS9iKjEwMDowLGUudG90YWw9Yn0sdHJhbnNsYXRlOmZ1bmN0aW9uKGEpe3RoaXMuZ2VuZXJhdGVQb2ludHMoKTt2YXIgYj0wLGM9dGhpcy5vcHRpb25zLGQ9Yy5zbGljZWRPZmZzZXQsZT1kK2MuYm9yZGVyV2lkdGgsZixnLGgsaT1jLnN0YXJ0QW5nbGV8fDAsaj10aGlzLnN0YXJ0QW5nbGVSYWQ9b2EvMTgwKihpLTkwKSxpPSh0aGlzLmVuZEFuZ2xlUmFkPW9hLzE4MCoocChjLmVuZEFuZ2xlLGkrMzYwKS05MCkpLWosaz10aGlzLnBvaW50cyxsPWMuZGF0YUxhYmVscy5kaXN0YW5jZSxjPWMuaWdub3JlSGlkZGVuUG9pbnQsbixtPWsubGVuZ3RoLG87aWYoIWEpdGhpcy5jZW50ZXI9YT10aGlzLmdldENlbnRlcigpO3RoaXMuZ2V0WD1mdW5jdGlvbihiLGMpe2g9XG5WLmFzaW4oTCgoYi1hWzFdKS8oYVsyXS8yK2wpLDEpKTtyZXR1cm4gYVswXSsoYz8tMToxKSphYShoKSooYVsyXS8yK2wpfTtmb3Iobj0wO248bTtuKyspe289a1tuXTtmPWorYippO2lmKCFjfHxvLnZpc2libGUpYis9by5wZXJjZW50YWdlLzEwMDtnPWorYippO28uc2hhcGVUeXBlPVwiYXJjXCI7by5zaGFwZUFyZ3M9e3g6YVswXSx5OmFbMV0scjphWzJdLzIsaW5uZXJSOmFbM10vMixzdGFydDp2KGYqMUUzKS8xRTMsZW5kOnYoZyoxRTMpLzFFM307aD0oZytmKS8yO2g+MS41Km9hP2gtPTIqb2E6aDwtb2EvMiYmKGgrPTIqb2EpO28uc2xpY2VkVHJhbnNsYXRpb249e3RyYW5zbGF0ZVg6dihhYShoKSpkKSx0cmFuc2xhdGVZOnYoZmEoaCkqZCl9O2Y9YWEoaCkqYVsyXS8yO2c9ZmEoaCkqYVsyXS8yO28udG9vbHRpcFBvcz1bYVswXStmKjAuNyxhWzFdK2cqMC43XTtvLmhhbGY9aDwtb2EvMnx8aD5vYS8yPzE6MDtvLmFuZ2xlPWg7ZT1MKGUsbC8yKTtvLmxhYmVsUG9zPVthWzBdK2YrYWEoaCkqXG5sLGFbMV0rZytmYShoKSpsLGFbMF0rZithYShoKSplLGFbMV0rZytmYShoKSplLGFbMF0rZixhWzFdK2csbDwwP1wiY2VudGVyXCI6by5oYWxmP1wicmlnaHRcIjpcImxlZnRcIixoXX19LGRyYXdHcmFwaDpudWxsLGRyYXdQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydC5yZW5kZXJlcixjLGQsZT1hLm9wdGlvbnMuc2hhZG93LGYsZztpZihlJiYhYS5zaGFkb3dHcm91cClhLnNoYWRvd0dyb3VwPWIuZyhcInNoYWRvd1wiKS5hZGQoYS5ncm91cCk7cShhLnBvaW50cyxmdW5jdGlvbihoKXtkPWguZ3JhcGhpYztnPWguc2hhcGVBcmdzO2Y9aC5zaGFkb3dHcm91cDtpZihlJiYhZilmPWguc2hhZG93R3JvdXA9Yi5nKFwic2hhZG93XCIpLmFkZChhLnNoYWRvd0dyb3VwKTtjPWguc2xpY2VkP2guc2xpY2VkVHJhbnNsYXRpb246e3RyYW5zbGF0ZVg6MCx0cmFuc2xhdGVZOjB9O2YmJmYuYXR0cihjKTtkP2QuYW5pbWF0ZShyKGcsYykpOmguZ3JhcGhpYz1kPWJbaC5zaGFwZVR5cGVdKGcpLnNldFJhZGlhbFJlZmVyZW5jZShhLmNlbnRlcikuYXR0cihoLnBvaW50QXR0cltoLnNlbGVjdGVkP1xuXCJzZWxlY3RcIjpcIlwiXSkuYXR0cih7XCJzdHJva2UtbGluZWpvaW5cIjpcInJvdW5kXCJ9KS5hdHRyKGMpLmFkZChhLmdyb3VwKS5zaGFkb3coZSxmKTtoLnZpc2libGUhPT12b2lkIDAmJmguc2V0VmlzaWJsZShoLnZpc2libGUpfSl9LHNvcnRCeUFuZ2xlOmZ1bmN0aW9uKGEsYil7YS5zb3J0KGZ1bmN0aW9uKGEsZCl7cmV0dXJuIGEuYW5nbGUhPT12b2lkIDAmJihkLmFuZ2xlLWEuYW5nbGUpKmJ9KX0sZHJhd0xlZ2VuZFN5bWJvbDpNLmRyYXdSZWN0YW5nbGUsZ2V0Q2VudGVyOlouZ2V0Q2VudGVyLGdldFN5bWJvbDpzYX07VD1tYShPLFQpO0gucGllPVQ7Ty5wcm90b3R5cGUuZHJhd0RhdGFMYWJlbHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9Yi5jdXJzb3IsZD1iLmRhdGFMYWJlbHMsZT1hLnBvaW50cyxmLGcsaD1hLmhhc1JlbmRlcmVkfHwwLGksajtpZihkLmVuYWJsZWR8fGEuX2hhc1BvaW50TGFiZWxzKWEuZGxQcm9jZXNzT3B0aW9ucyYmYS5kbFByb2Nlc3NPcHRpb25zKGQpLFxuaj1hLnBsb3RHcm91cChcImRhdGFMYWJlbHNHcm91cFwiLFwiZGF0YS1sYWJlbHNcIixkLmRlZmVyP1wiaGlkZGVuXCI6XCJ2aXNpYmxlXCIsZC56SW5kZXh8fDYpLHAoZC5kZWZlciwhMCkmJihqLmF0dHIoe29wYWNpdHk6K2h9KSxofHxOKGEsXCJhZnRlckFuaW1hdGVcIixmdW5jdGlvbigpe2EudmlzaWJsZSYmai5zaG93KCk7altiLmFuaW1hdGlvbj9cImFuaW1hdGVcIjpcImF0dHJcIl0oe29wYWNpdHk6MX0se2R1cmF0aW9uOjIwMH0pfSkpLGc9ZCxxKGUsZnVuY3Rpb24oYil7dmFyIGUsaD1iLmRhdGFMYWJlbCxtLG8scT1iLmNvbm5lY3Rvcix0PSEwO2Y9Yi5vcHRpb25zJiZiLm9wdGlvbnMuZGF0YUxhYmVscztlPXAoZiYmZi5lbmFibGVkLGcuZW5hYmxlZCk7aWYoaCYmIWUpYi5kYXRhTGFiZWw9aC5kZXN0cm95KCk7ZWxzZSBpZihlKXtkPXcoZyxmKTtlPWQucm90YXRpb247bT1iLmdldExhYmVsQ29uZmlnKCk7aT1kLmZvcm1hdD9KYShkLmZvcm1hdCxtKTpkLmZvcm1hdHRlci5jYWxsKG0sZCk7ZC5zdHlsZS5jb2xvcj1cbnAoZC5jb2xvcixkLnN0eWxlLmNvbG9yLGEuY29sb3IsXCJibGFja1wiKTtpZihoKWlmKHMoaSkpaC5hdHRyKHt0ZXh0Oml9KSx0PSExO2Vsc2V7aWYoYi5kYXRhTGFiZWw9aD1oLmRlc3Ryb3koKSxxKWIuY29ubmVjdG9yPXEuZGVzdHJveSgpfWVsc2UgaWYocyhpKSl7aD17ZmlsbDpkLmJhY2tncm91bmRDb2xvcixzdHJva2U6ZC5ib3JkZXJDb2xvcixcInN0cm9rZS13aWR0aFwiOmQuYm9yZGVyV2lkdGgscjpkLmJvcmRlclJhZGl1c3x8MCxyb3RhdGlvbjplLHBhZGRpbmc6ZC5wYWRkaW5nLHpJbmRleDoxfTtmb3IobyBpbiBoKWhbb109PT11JiZkZWxldGUgaFtvXTtoPWIuZGF0YUxhYmVsPWEuY2hhcnQucmVuZGVyZXJbZT9cInRleHRcIjpcImxhYmVsXCJdKGksMCwtOTk5LG51bGwsbnVsbCxudWxsLGQudXNlSFRNTCkuYXR0cihoKS5jc3MocihkLnN0eWxlLGMmJntjdXJzb3I6Y30pKS5hZGQoaikuc2hhZG93KGQuc2hhZG93KX1oJiZhLmFsaWduRGF0YUxhYmVsKGIsaCxkLG51bGwsdCl9fSl9O1xuTy5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWw9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLmNoYXJ0LGc9Zi5pbnZlcnRlZCxoPXAoYS5wbG90WCwtOTk5KSxpPXAoYS5wbG90WSwtOTk5KSxqPWIuZ2V0QkJveCgpO2lmKGE9dGhpcy52aXNpYmxlJiYoYS5zZXJpZXMuZm9yY2VETHx8Zi5pc0luc2lkZVBsb3QoaCx2KGkpLGcpfHxkJiZmLmlzSW5zaWRlUGxvdChoLGc/ZC54KzE6ZC55K2QuaGVpZ2h0LTEsZykpKWQ9cih7eDpnP2YucGxvdFdpZHRoLWk6aCx5OnYoZz9mLnBsb3RIZWlnaHQtaDppKSx3aWR0aDowLGhlaWdodDowfSxkKSxyKGMse3dpZHRoOmoud2lkdGgsaGVpZ2h0OmouaGVpZ2h0fSksYy5yb3RhdGlvbj9iW2U/XCJhdHRyXCI6XCJhbmltYXRlXCJdKHt4OmQueCtjLngrZC53aWR0aC8yLHk6ZC55K2MueStkLmhlaWdodC8yfSkuYXR0cih7YWxpZ246Yy5hbGlnbn0pOihiLmFsaWduKGMsbnVsbCxkKSxnPWIuYWxpZ25BdHRyLHAoYy5vdmVyZmxvdyxcImp1c3RpZnlcIik9PT1cblwianVzdGlmeVwiP3RoaXMuanVzdGlmeURhdGFMYWJlbChiLGMsZyxqLGQsZSk6cChjLmNyb3AsITApJiYoYT1mLmlzSW5zaWRlUGxvdChnLngsZy55KSYmZi5pc0luc2lkZVBsb3QoZy54K2oud2lkdGgsZy55K2ouaGVpZ2h0KSkpO2lmKCFhKWIuYXR0cih7eTotOTk5fSksYi5wbGFjZWQ9ITF9O08ucHJvdG90eXBlLmp1c3RpZnlEYXRhTGFiZWw9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPXRoaXMuY2hhcnQsaD1iLmFsaWduLGk9Yi52ZXJ0aWNhbEFsaWduLGosaztqPWMueDtpZihqPDApaD09PVwicmlnaHRcIj9iLmFsaWduPVwibGVmdFwiOmIueD0taixrPSEwO2o9Yy54K2Qud2lkdGg7aWYoaj5nLnBsb3RXaWR0aCloPT09XCJsZWZ0XCI/Yi5hbGlnbj1cInJpZ2h0XCI6Yi54PWcucGxvdFdpZHRoLWosaz0hMDtqPWMueTtpZihqPDApaT09PVwiYm90dG9tXCI/Yi52ZXJ0aWNhbEFsaWduPVwidG9wXCI6Yi55PS1qLGs9ITA7aj1jLnkrZC5oZWlnaHQ7aWYoaj5nLnBsb3RIZWlnaHQpaT09PVwidG9wXCI/XG5iLnZlcnRpY2FsQWxpZ249XCJib3R0b21cIjpiLnk9Zy5wbG90SGVpZ2h0LWosaz0hMDtpZihrKWEucGxhY2VkPSFmLGEuYWxpZ24oYixudWxsLGUpfTtpZihILnBpZSlILnBpZS5wcm90b3R5cGUuZHJhd0RhdGFMYWJlbHM9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5kYXRhLGMsZD1hLmNoYXJ0LGU9YS5vcHRpb25zLmRhdGFMYWJlbHMsZj1wKGUuY29ubmVjdG9yUGFkZGluZywxMCksZz1wKGUuY29ubmVjdG9yV2lkdGgsMSksaD1kLnBsb3RXaWR0aCxpPWQucGxvdEhlaWdodCxqLGssbD1wKGUuc29mdENvbm5lY3RvciwhMCksbj1lLmRpc3RhbmNlLG09YS5jZW50ZXIsbz1tWzJdLzIscj1tWzFdLHM9bj4wLHUsdyx4LEE9W1tdLFtdXSx5LEIsSSxILHosUj1bMCwwLDAsMF0sTj1mdW5jdGlvbihhLGIpe3JldHVybiBiLnktYS55fTtpZihhLnZpc2libGUmJihlLmVuYWJsZWR8fGEuX2hhc1BvaW50TGFiZWxzKSl7Ty5wcm90b3R5cGUuZHJhd0RhdGFMYWJlbHMuYXBwbHkoYSk7cShiLFxuZnVuY3Rpb24oYSl7YS5kYXRhTGFiZWwmJmEudmlzaWJsZSYmQVthLmhhbGZdLnB1c2goYSl9KTtmb3IoSD0yO0gtLTspe3ZhciBHPVtdLE09W10sRj1BW0hdLEs9Ri5sZW5ndGgsRTtpZihLKXthLnNvcnRCeUFuZ2xlKEYsSC0wLjUpO2Zvcih6PWI9MDshYiYmRlt6XTspYj1GW3pdJiZGW3pdLmRhdGFMYWJlbCYmKEZbel0uZGF0YUxhYmVsLmdldEJCb3goKS5oZWlnaHR8fDIxKSx6Kys7aWYobj4wKXt3PUwocitvK24sZC5wbG90SGVpZ2h0KTtmb3Ioej10KDAsci1vLW4pO3o8PXc7eis9YilHLnB1c2goeik7dz1HLmxlbmd0aDtpZihLPncpe2M9W10uY29uY2F0KEYpO2Muc29ydChOKTtmb3Ioej1LO3otLTspY1t6XS5yYW5rPXo7Zm9yKHo9Szt6LS07KUZbel0ucmFuaz49dyYmRi5zcGxpY2UoeiwxKTtLPUYubGVuZ3RofWZvcih6PTA7ejxLO3orKyl7Yz1GW3pdO3g9Yy5sYWJlbFBvcztjPTk5OTk7dmFyIFMsUDtmb3IoUD0wO1A8dztQKyspUz1RKEdbUF0teFsxXSksUzxjJiYoYz1TLFxuRT1QKTtpZihFPHomJkdbel0hPT1udWxsKUU9ejtlbHNlIGZvcih3PEsteitFJiZHW3pdIT09bnVsbCYmKEU9dy1LK3opO0dbRV09PT1udWxsOylFKys7TS5wdXNoKHtpOkUseTpHW0VdfSk7R1tFXT1udWxsfU0uc29ydChOKX1mb3Ioej0wO3o8Szt6Kyspe2M9Rlt6XTt4PWMubGFiZWxQb3M7dT1jLmRhdGFMYWJlbDtJPWMudmlzaWJsZT09PSExP1wiaGlkZGVuXCI6XCJ2aXNpYmxlXCI7Yz14WzFdO2lmKG4+MCl7aWYodz1NLnBvcCgpLEU9dy5pLEI9dy55LGM+QiYmR1tFKzFdIT09bnVsbHx8YzxCJiZHW0UtMV0hPT1udWxsKUI9TCh0KDAsYyksZC5wbG90SGVpZ2h0KX1lbHNlIEI9Yzt5PWUuanVzdGlmeT9tWzBdKyhIPy0xOjEpKihvK24pOmEuZ2V0WChCPT09ci1vLW58fEI9PT1yK28rbj9jOkIsSCk7dS5fYXR0cj17dmlzaWJpbGl0eTpJLGFsaWduOnhbNl19O3UuX3Bvcz17eDp5K2UueCsoe2xlZnQ6ZixyaWdodDotZn1beFs2XV18fDApLHk6QitlLnktMTB9O3UuY29ublg9eTt1LmNvbm5ZPVxuQjtpZih0aGlzLm9wdGlvbnMuc2l6ZT09PW51bGwpdz11LndpZHRoLHktdzxmP1JbM109dCh2KHcteStmKSxSWzNdKTp5K3c+aC1mJiYoUlsxXT10KHYoeSt3LWgrZiksUlsxXSkpLEItYi8yPDA/UlswXT10KHYoLUIrYi8yKSxSWzBdKTpCK2IvMj5pJiYoUlsyXT10KHYoQitiLzItaSksUlsyXSkpfX19aWYoQ2EoUik9PT0wfHx0aGlzLnZlcmlmeURhdGFMYWJlbE92ZXJmbG93KFIpKXRoaXMucGxhY2VEYXRhTGFiZWxzKCkscyYmZyYmcSh0aGlzLnBvaW50cyxmdW5jdGlvbihiKXtqPWIuY29ubmVjdG9yO3g9Yi5sYWJlbFBvcztpZigodT1iLmRhdGFMYWJlbCkmJnUuX3BvcylJPXUuX2F0dHIudmlzaWJpbGl0eSx5PXUuY29ublgsQj11LmNvbm5ZLGs9bD9bXCJNXCIseSsoeFs2XT09PVwibGVmdFwiPzU6LTUpLEIsXCJDXCIseSxCLDIqeFsyXS14WzRdLDIqeFszXS14WzVdLHhbMl0seFszXSxcIkxcIix4WzRdLHhbNV1dOltcIk1cIix5Kyh4WzZdPT09XCJsZWZ0XCI/NTotNSksQixcIkxcIix4WzJdLHhbM10sXG5cIkxcIix4WzRdLHhbNV1dLGo/KGouYW5pbWF0ZSh7ZDprfSksai5hdHRyKFwidmlzaWJpbGl0eVwiLEkpKTpiLmNvbm5lY3Rvcj1qPWEuY2hhcnQucmVuZGVyZXIucGF0aChrKS5hdHRyKHtcInN0cm9rZS13aWR0aFwiOmcsc3Ryb2tlOmUuY29ubmVjdG9yQ29sb3J8fGIuY29sb3J8fFwiIzYwNjA2MFwiLHZpc2liaWxpdHk6SX0pLmFkZChhLmRhdGFMYWJlbHNHcm91cCk7ZWxzZSBpZihqKWIuY29ubmVjdG9yPWouZGVzdHJveSgpfSl9fSxILnBpZS5wcm90b3R5cGUucGxhY2VEYXRhTGFiZWxzPWZ1bmN0aW9uKCl7cSh0aGlzLnBvaW50cyxmdW5jdGlvbihhKXt2YXIgYT1hLmRhdGFMYWJlbCxiO2lmKGEpKGI9YS5fcG9zKT8oYS5hdHRyKGEuX2F0dHIpLGFbYS5tb3ZlZD9cImFuaW1hdGVcIjpcImF0dHJcIl0oYiksYS5tb3ZlZD0hMCk6YSYmYS5hdHRyKHt5Oi05OTl9KX0pfSxILnBpZS5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWw9c2EsSC5waWUucHJvdG90eXBlLnZlcmlmeURhdGFMYWJlbE92ZXJmbG93PVxuZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jZW50ZXIsYz10aGlzLm9wdGlvbnMsZD1jLmNlbnRlcixlPWM9Yy5taW5TaXplfHw4MCxmO2RbMF0hPT1udWxsP2U9dChiWzJdLXQoYVsxXSxhWzNdKSxjKTooZT10KGJbMl0tYVsxXS1hWzNdLGMpLGJbMF0rPShhWzNdLWFbMV0pLzIpO2RbMV0hPT1udWxsP2U9dChMKGUsYlsyXS10KGFbMF0sYVsyXSkpLGMpOihlPXQoTChlLGJbMl0tYVswXS1hWzJdKSxjKSxiWzFdKz0oYVswXS1hWzJdKS8yKTtlPGJbMl0/KGJbMl09ZSx0aGlzLnRyYW5zbGF0ZShiKSxxKHRoaXMucG9pbnRzLGZ1bmN0aW9uKGEpe2lmKGEuZGF0YUxhYmVsKWEuZGF0YUxhYmVsLl9wb3M9bnVsbH0pLHRoaXMuZHJhd0RhdGFMYWJlbHMmJnRoaXMuZHJhd0RhdGFMYWJlbHMoKSk6Zj0hMDtyZXR1cm4gZn07aWYoSC5jb2x1bW4pSC5jb2x1bW4ucHJvdG90eXBlLmFsaWduRGF0YUxhYmVsPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9dGhpcy5jaGFydCxnPWYuaW52ZXJ0ZWQsXG5oPWEuZGxCb3h8fGEuc2hhcGVBcmdzLGk9YS5iZWxvd3x8YS5wbG90WT5wKHRoaXMudHJhbnNsYXRlZFRocmVzaG9sZCxmLnBsb3RTaXplWSksaj1wKGMuaW5zaWRlLCEhdGhpcy5vcHRpb25zLnN0YWNraW5nKTtpZihoJiYoZD13KGgpLGcmJihkPXt4OmYucGxvdFdpZHRoLWQueS1kLmhlaWdodCx5OmYucGxvdEhlaWdodC1kLngtZC53aWR0aCx3aWR0aDpkLmhlaWdodCxoZWlnaHQ6ZC53aWR0aH0pLCFqKSlnPyhkLngrPWk/MDpkLndpZHRoLGQud2lkdGg9MCk6KGQueSs9aT9kLmhlaWdodDowLGQuaGVpZ2h0PTApO2MuYWxpZ249cChjLmFsaWduLCFnfHxqP1wiY2VudGVyXCI6aT9cInJpZ2h0XCI6XCJsZWZ0XCIpO2MudmVydGljYWxBbGlnbj1wKGMudmVydGljYWxBbGlnbixnfHxqP1wibWlkZGxlXCI6aT9cInRvcFwiOlwiYm90dG9tXCIpO08ucHJvdG90eXBlLmFsaWduRGF0YUxhYmVsLmNhbGwodGhpcyxhLGIsYyxkLGUpfTtUPUsuVHJhY2tlck1peGluPXtkcmF3VHJhY2tlclBvaW50OmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLGI9YS5jaGFydCxjPWIucG9pbnRlcixkPWEub3B0aW9ucy5jdXJzb3IsZT1kJiZ7Y3Vyc29yOmR9LGY9ZnVuY3Rpb24oYyl7dmFyIGQ9Yy50YXJnZXQsZTtpZihiLmhvdmVyU2VyaWVzIT09YSlhLm9uTW91c2VPdmVyKCk7Zm9yKDtkJiYhZTspZT1kLnBvaW50LGQ9ZC5wYXJlbnROb2RlO2lmKGUhPT11JiZlIT09Yi5ob3ZlclBvaW50KWUub25Nb3VzZU92ZXIoYyl9O3EoYS5wb2ludHMsZnVuY3Rpb24oYSl7aWYoYS5ncmFwaGljKWEuZ3JhcGhpYy5lbGVtZW50LnBvaW50PWE7aWYoYS5kYXRhTGFiZWwpYS5kYXRhTGFiZWwuZWxlbWVudC5wb2ludD1hfSk7aWYoIWEuX2hhc1RyYWNraW5nKXEoYS50cmFja2VyR3JvdXBzLGZ1bmN0aW9uKGIpe2lmKGFbYl0mJihhW2JdLmFkZENsYXNzKFwiaGlnaGNoYXJ0cy10cmFja2VyXCIpLm9uKFwibW91c2VvdmVyXCIsZikub24oXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGEpe2Mub25UcmFja2VyTW91c2VPdXQoYSl9KS5jc3MoZSksJGEpKWFbYl0ub24oXCJ0b3VjaHN0YXJ0XCIsXG5mKX0pLGEuX2hhc1RyYWNraW5nPSEwfSxkcmF3VHJhY2tlckdyYXBoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3B0aW9ucyxjPWIudHJhY2tCeUFyZWEsZD1bXS5jb25jYXQoYz9hLmFyZWFQYXRoOmEuZ3JhcGhQYXRoKSxlPWQubGVuZ3RoLGY9YS5jaGFydCxnPWYucG9pbnRlcixoPWYucmVuZGVyZXIsaT1mLm9wdGlvbnMudG9vbHRpcC5zbmFwLGo9YS50cmFja2VyLGs9Yi5jdXJzb3IsbD1rJiZ7Y3Vyc29yOmt9LGs9YS5zaW5nbGVQb2ludHMsbixtPWZ1bmN0aW9uKCl7aWYoZi5ob3ZlclNlcmllcyE9PWEpYS5vbk1vdXNlT3ZlcigpfSxvPVwicmdiYSgxOTIsMTkyLDE5MixcIisoYmE/MS4wRS00OjAuMDAyKStcIilcIjtpZihlJiYhYylmb3Iobj1lKzE7bi0tOylkW25dPT09XCJNXCImJmQuc3BsaWNlKG4rMSwwLGRbbisxXS1pLGRbbisyXSxcIkxcIiksKG4mJmRbbl09PT1cIk1cInx8bj09PWUpJiZkLnNwbGljZShuLDAsXCJMXCIsZFtuLTJdK2ksZFtuLTFdKTtmb3Iobj0wO248ay5sZW5ndGg7bisrKWU9XG5rW25dLGQucHVzaChcIk1cIixlLnBsb3RYLWksZS5wbG90WSxcIkxcIixlLnBsb3RYK2ksZS5wbG90WSk7aj9qLmF0dHIoe2Q6ZH0pOihhLnRyYWNrZXI9aC5wYXRoKGQpLmF0dHIoe1wic3Ryb2tlLWxpbmVqb2luXCI6XCJyb3VuZFwiLHZpc2liaWxpdHk6YS52aXNpYmxlP1widmlzaWJsZVwiOlwiaGlkZGVuXCIsc3Ryb2tlOm8sZmlsbDpjP286UCxcInN0cm9rZS13aWR0aFwiOmIubGluZVdpZHRoKyhjPzA6MippKSx6SW5kZXg6Mn0pLmFkZChhLmdyb3VwKSxxKFthLnRyYWNrZXIsYS5tYXJrZXJHcm91cF0sZnVuY3Rpb24oYSl7YS5hZGRDbGFzcyhcImhpZ2hjaGFydHMtdHJhY2tlclwiKS5vbihcIm1vdXNlb3ZlclwiLG0pLm9uKFwibW91c2VvdXRcIixmdW5jdGlvbihhKXtnLm9uVHJhY2tlck1vdXNlT3V0KGEpfSkuY3NzKGwpO2lmKCRhKWEub24oXCJ0b3VjaHN0YXJ0XCIsbSl9KSl9fTtpZihILmNvbHVtbilpYS5wcm90b3R5cGUuZHJhd1RyYWNrZXI9VC5kcmF3VHJhY2tlclBvaW50O2lmKEgucGllKUgucGllLnByb3RvdHlwZS5kcmF3VHJhY2tlcj1cblQuZHJhd1RyYWNrZXJQb2ludDtpZihILnNjYXR0ZXIpcWEucHJvdG90eXBlLmRyYXdUcmFja2VyPVQuZHJhd1RyYWNrZXJQb2ludDtyKGxiLnByb3RvdHlwZSx7c2V0SXRlbUV2ZW50czpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXRoaXM7KGM/YjphLmxlZ2VuZEdyb3VwKS5vbihcIm1vdXNlb3ZlclwiLGZ1bmN0aW9uKCl7YS5zZXRTdGF0ZShcImhvdmVyXCIpO2IuY3NzKGYub3B0aW9ucy5pdGVtSG92ZXJTdHlsZSl9KS5vbihcIm1vdXNlb3V0XCIsZnVuY3Rpb24oKXtiLmNzcyhhLnZpc2libGU/ZDplKTthLnNldFN0YXRlKCl9KS5vbihcImNsaWNrXCIsZnVuY3Rpb24oYil7dmFyIGM9ZnVuY3Rpb24oKXthLnNldFZpc2libGUoKX0sYj17YnJvd3NlckV2ZW50OmJ9O2EuZmlyZVBvaW50RXZlbnQ/YS5maXJlUG9pbnRFdmVudChcImxlZ2VuZEl0ZW1DbGlja1wiLGIsYyk6SShhLFwibGVnZW5kSXRlbUNsaWNrXCIsYixjKX0pfSxjcmVhdGVDaGVja2JveEZvckl0ZW06ZnVuY3Rpb24oYSl7YS5jaGVja2JveD1cbiQoXCJpbnB1dFwiLHt0eXBlOlwiY2hlY2tib3hcIixjaGVja2VkOmEuc2VsZWN0ZWQsZGVmYXVsdENoZWNrZWQ6YS5zZWxlY3RlZH0sdGhpcy5vcHRpb25zLml0ZW1DaGVja2JveFN0eWxlLHRoaXMuY2hhcnQuY29udGFpbmVyKTtOKGEuY2hlY2tib3gsXCJjbGlja1wiLGZ1bmN0aW9uKGIpe0koYSxcImNoZWNrYm94Q2xpY2tcIix7Y2hlY2tlZDpiLnRhcmdldC5jaGVja2VkfSxmdW5jdGlvbigpe2Euc2VsZWN0KCl9KX0pfX0pO0UubGVnZW5kLml0ZW1TdHlsZS5jdXJzb3I9XCJwb2ludGVyXCI7cihZYS5wcm90b3R5cGUse3Nob3dSZXNldFpvb206ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9RS5sYW5nLGM9YS5vcHRpb25zLmNoYXJ0LnJlc2V0Wm9vbUJ1dHRvbixkPWMudGhlbWUsZT1kLnN0YXRlcyxmPWMucmVsYXRpdmVUbz09PVwiY2hhcnRcIj9udWxsOlwicGxvdEJveFwiO3RoaXMucmVzZXRab29tQnV0dG9uPWEucmVuZGVyZXIuYnV0dG9uKGIucmVzZXRab29tLG51bGwsbnVsbCxmdW5jdGlvbigpe2Euem9vbU91dCgpfSxcbmQsZSYmZS5ob3ZlcikuYXR0cih7YWxpZ246Yy5wb3NpdGlvbi5hbGlnbix0aXRsZTpiLnJlc2V0Wm9vbVRpdGxlfSkuYWRkKCkuYWxpZ24oYy5wb3NpdGlvbiwhMSxmKX0sem9vbU91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7SShhLFwic2VsZWN0aW9uXCIse3Jlc2V0U2VsZWN0aW9uOiEwfSxmdW5jdGlvbigpe2Euem9vbSgpfSl9LHpvb206ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLnBvaW50ZXIsZD0hMSxlOyFhfHxhLnJlc2V0U2VsZWN0aW9uP3EodGhpcy5heGVzLGZ1bmN0aW9uKGEpe2I9YS56b29tKCl9KTpxKGEueEF4aXMuY29uY2F0KGEueUF4aXMpLGZ1bmN0aW9uKGEpe3ZhciBlPWEuYXhpcyxoPWUuaXNYQXhpcztpZihjW2g/XCJ6b29tWFwiOlwiem9vbVlcIl18fGNbaD9cInBpbmNoWFwiOlwicGluY2hZXCJdKWI9ZS56b29tKGEubWluLGEubWF4KSxlLmRpc3BsYXlCdG4mJihkPSEwKX0pO2U9dGhpcy5yZXNldFpvb21CdXR0b247aWYoZCYmIWUpdGhpcy5zaG93UmVzZXRab29tKCk7ZWxzZSBpZighZCYmXG5kYShlKSl0aGlzLnJlc2V0Wm9vbUJ1dHRvbj1lLmRlc3Ryb3koKTtiJiZ0aGlzLnJlZHJhdyhwKHRoaXMub3B0aW9ucy5jaGFydC5hbmltYXRpb24sYSYmYS5hbmltYXRpb24sdGhpcy5wb2ludENvdW50PDEwMCkpfSxwYW46ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5ob3ZlclBvaW50cyxlO2QmJnEoZCxmdW5jdGlvbihhKXthLnNldFN0YXRlKCl9KTtxKGI9PT1cInh5XCI/WzEsMF06WzFdLGZ1bmN0aW9uKGIpe3ZhciBkPWFbYj9cImNoYXJ0WFwiOlwiY2hhcnRZXCJdLGg9Y1tiP1wieEF4aXNcIjpcInlBeGlzXCJdWzBdLGk9Y1tiP1wibW91c2VEb3duWFwiOlwibW91c2VEb3duWVwiXSxqPShoLnBvaW50UmFuZ2V8fDApLzIsaz1oLmdldEV4dHJlbWVzKCksbD1oLnRvVmFsdWUoaS1kLCEwKStqLGk9aC50b1ZhbHVlKGkrY1tiP1wicGxvdFdpZHRoXCI6XCJwbG90SGVpZ2h0XCJdLWQsITApLWo7aC5zZXJpZXMubGVuZ3RoJiZsPkwoay5kYXRhTWluLGsubWluKSYmaTx0KGsuZGF0YU1heCxrLm1heCkmJihoLnNldEV4dHJlbWVzKGwsXG5pLCExLCExLHt0cmlnZ2VyOlwicGFuXCJ9KSxlPSEwKTtjW2I/XCJtb3VzZURvd25YXCI6XCJtb3VzZURvd25ZXCJdPWR9KTtlJiZjLnJlZHJhdyghMSk7QihjLmNvbnRhaW5lcix7Y3Vyc29yOlwibW92ZVwifSl9fSk7cihGYS5wcm90b3R5cGUse3NlbGVjdDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLnNlcmllcyxlPWQuY2hhcnQsYT1wKGEsIWMuc2VsZWN0ZWQpO2MuZmlyZVBvaW50RXZlbnQoYT9cInNlbGVjdFwiOlwidW5zZWxlY3RcIix7YWNjdW11bGF0ZTpifSxmdW5jdGlvbigpe2Muc2VsZWN0ZWQ9Yy5vcHRpb25zLnNlbGVjdGVkPWE7ZC5vcHRpb25zLmRhdGFbTWEoYyxkLmRhdGEpXT1jLm9wdGlvbnM7Yy5zZXRTdGF0ZShhJiZcInNlbGVjdFwiKTtifHxxKGUuZ2V0U2VsZWN0ZWRQb2ludHMoKSxmdW5jdGlvbihhKXtpZihhLnNlbGVjdGVkJiZhIT09YylhLnNlbGVjdGVkPWEub3B0aW9ucy5zZWxlY3RlZD0hMSxkLm9wdGlvbnMuZGF0YVtNYShhLGQuZGF0YSldPWEub3B0aW9ucyxhLnNldFN0YXRlKFwiXCIpLFxuYS5maXJlUG9pbnRFdmVudChcInVuc2VsZWN0XCIpfSl9KX0sb25Nb3VzZU92ZXI6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZXJpZXMsYz1iLmNoYXJ0LGQ9Yy50b29sdGlwLGU9Yy5ob3ZlclBvaW50O2lmKGUmJmUhPT10aGlzKWUub25Nb3VzZU91dCgpO3RoaXMuZmlyZVBvaW50RXZlbnQoXCJtb3VzZU92ZXJcIik7ZCYmKCFkLnNoYXJlZHx8Yi5ub1NoYXJlZFRvb2x0aXApJiZkLnJlZnJlc2godGhpcyxhKTt0aGlzLnNldFN0YXRlKFwiaG92ZXJcIik7Yy5ob3ZlclBvaW50PXRoaXN9LG9uTW91c2VPdXQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNlcmllcy5jaGFydCxiPWEuaG92ZXJQb2ludHM7dGhpcy5maXJlUG9pbnRFdmVudChcIm1vdXNlT3V0XCIpO2lmKCFifHxNYSh0aGlzLGIpPT09LTEpdGhpcy5zZXRTdGF0ZSgpLGEuaG92ZXJQb2ludD1udWxsfSxpbXBvcnRFdmVudHM6ZnVuY3Rpb24oKXtpZighdGhpcy5oYXNJbXBvcnRlZEV2ZW50cyl7dmFyIGE9dyh0aGlzLnNlcmllcy5vcHRpb25zLnBvaW50LFxudGhpcy5vcHRpb25zKS5ldmVudHMsYjt0aGlzLmV2ZW50cz1hO2ZvcihiIGluIGEpTih0aGlzLGIsYVtiXSk7dGhpcy5oYXNJbXBvcnRlZEV2ZW50cz0hMH19LHNldFN0YXRlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wbG90WCxkPXRoaXMucGxvdFksZT10aGlzLnNlcmllcyxmPWUub3B0aW9ucy5zdGF0ZXMsZz1jYVtlLnR5cGVdLm1hcmtlciYmZS5vcHRpb25zLm1hcmtlcixoPWcmJiFnLmVuYWJsZWQsaT1nJiZnLnN0YXRlc1thXSxqPWkmJmkuZW5hYmxlZD09PSExLGs9ZS5zdGF0ZU1hcmtlckdyYXBoaWMsbD10aGlzLm1hcmtlcnx8e30sbj1lLmNoYXJ0LG09ZS5oYWxvLG8sYT1hfHxcIlwiO289dGhpcy5wb2ludEF0dHJbYV18fGUucG9pbnRBdHRyW2FdO2lmKCEoYT09PXRoaXMuc3RhdGUmJiFifHx0aGlzLnNlbGVjdGVkJiZhIT09XCJzZWxlY3RcInx8ZlthXSYmZlthXS5lbmFibGVkPT09ITF8fGEmJihqfHxoJiZpLmVuYWJsZWQ9PT0hMSl8fGEmJmwuc3RhdGVzJiZsLnN0YXRlc1thXSYmXG5sLnN0YXRlc1thXS5lbmFibGVkPT09ITEpKXtpZih0aGlzLmdyYXBoaWMpZz1nJiZ0aGlzLmdyYXBoaWMuc3ltYm9sTmFtZSYmby5yLHRoaXMuZ3JhcGhpYy5hdHRyKHcobyxnP3t4OmMtZyx5OmQtZyx3aWR0aDoyKmcsaGVpZ2h0OjIqZ306e30pKSxrJiZrLmhpZGUoKTtlbHNle2lmKGEmJmkpaWYoZz1pLnJhZGl1cyxsPWwuc3ltYm9sfHxlLnN5bWJvbCxrJiZrLmN1cnJlbnRTeW1ib2whPT1sJiYoaz1rLmRlc3Ryb3koKSksaylrW2I/XCJhbmltYXRlXCI6XCJhdHRyXCJdKHt4OmMtZyx5OmQtZ30pO2Vsc2UgaWYobCllLnN0YXRlTWFya2VyR3JhcGhpYz1rPW4ucmVuZGVyZXIuc3ltYm9sKGwsYy1nLGQtZywyKmcsMipnKS5hdHRyKG8pLmFkZChlLm1hcmtlckdyb3VwKSxrLmN1cnJlbnRTeW1ib2w9bDtpZihrKWtbYSYmbi5pc0luc2lkZVBsb3QoYyxkLG4uaW52ZXJ0ZWQpP1wic2hvd1wiOlwiaGlkZVwiXSgpfWlmKChjPWZbYV0mJmZbYV0uaGFsbykmJmMuc2l6ZSl7aWYoIW0pZS5oYWxvPW09bi5yZW5kZXJlci5wYXRoKCkuYWRkKGUuc2VyaWVzR3JvdXApO1xubS5hdHRyKHIoe2ZpbGw6eWEodGhpcy5jb2xvcnx8ZS5jb2xvcikuc2V0T3BhY2l0eShjLm9wYWNpdHkpLmdldCgpfSxjLmF0dHJpYnV0ZXMpKVtiP1wiYW5pbWF0ZVwiOlwiYXR0clwiXSh7ZDp0aGlzLmhhbG9QYXRoKGMuc2l6ZSl9KX1lbHNlIG0mJm0uYXR0cih7ZDpbXX0pO3RoaXMuc3RhdGU9YX19LGhhbG9QYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VyaWVzLGM9Yi5jaGFydCxkPWIuZ2V0UGxvdEJveCgpLGU9Yy5pbnZlcnRlZDtyZXR1cm4gYy5yZW5kZXJlci5zeW1ib2xzLmNpcmNsZShkLnRyYW5zbGF0ZVgrKGU/Yi55QXhpcy5sZW4tdGhpcy5wbG90WTp0aGlzLnBsb3RYKS1hLGQudHJhbnNsYXRlWSsoZT9iLnhBeGlzLmxlbi10aGlzLnBsb3RYOnRoaXMucGxvdFkpLWEsYSoyLGEqMil9fSk7cihPLnByb3RvdHlwZSx7b25Nb3VzZU92ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNoYXJ0LGI9YS5ob3ZlclNlcmllcztpZihiJiZiIT09dGhpcyliLm9uTW91c2VPdXQoKTt0aGlzLm9wdGlvbnMuZXZlbnRzLm1vdXNlT3ZlciYmXG5JKHRoaXMsXCJtb3VzZU92ZXJcIik7dGhpcy5zZXRTdGF0ZShcImhvdmVyXCIpO2EuaG92ZXJTZXJpZXM9dGhpc30sb25Nb3VzZU91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucyxiPXRoaXMuY2hhcnQsYz1iLnRvb2x0aXAsZD1iLmhvdmVyUG9pbnQ7aWYoZClkLm9uTW91c2VPdXQoKTt0aGlzJiZhLmV2ZW50cy5tb3VzZU91dCYmSSh0aGlzLFwibW91c2VPdXRcIik7YyYmIWEuc3RpY2t5VHJhY2tpbmcmJighYy5zaGFyZWR8fHRoaXMubm9TaGFyZWRUb29sdGlwKSYmYy5oaWRlKCk7dGhpcy5zZXRTdGF0ZSgpO2IuaG92ZXJTZXJpZXM9bnVsbH0sc2V0U3RhdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vcHRpb25zLGM9dGhpcy5ncmFwaCxkPXRoaXMuZ3JhcGhOZWcsZT1iLnN0YXRlcyxiPWIubGluZVdpZHRoLGE9YXx8XCJcIjtpZih0aGlzLnN0YXRlIT09YSl0aGlzLnN0YXRlPWEsZVthXSYmZVthXS5lbmFibGVkPT09ITF8fChhJiYoYj1lW2FdLmxpbmVXaWR0aHx8YisoZVthXS5saW5lV2lkdGhQbHVzfHxcbjApKSxjJiYhYy5kYXNoc3R5bGUmJihhPXtcInN0cm9rZS13aWR0aFwiOmJ9LGMuYXR0cihhKSxkJiZkLmF0dHIoYSkpKX0sc2V0VmlzaWJsZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmNoYXJ0LGU9Yy5sZWdlbmRJdGVtLGYsZz1kLm9wdGlvbnMuY2hhcnQuaWdub3JlSGlkZGVuU2VyaWVzLGg9Yy52aXNpYmxlO2Y9KGMudmlzaWJsZT1hPWMudXNlck9wdGlvbnMudmlzaWJsZT1hPT09dT8haDphKT9cInNob3dcIjpcImhpZGVcIjtxKFtcImdyb3VwXCIsXCJkYXRhTGFiZWxzR3JvdXBcIixcIm1hcmtlckdyb3VwXCIsXCJ0cmFja2VyXCJdLGZ1bmN0aW9uKGEpe2lmKGNbYV0pY1thXVtmXSgpfSk7aWYoZC5ob3ZlclNlcmllcz09PWMpYy5vbk1vdXNlT3V0KCk7ZSYmZC5sZWdlbmQuY29sb3JpemVJdGVtKGMsYSk7Yy5pc0RpcnR5PSEwO2Mub3B0aW9ucy5zdGFja2luZyYmcShkLnNlcmllcyxmdW5jdGlvbihhKXtpZihhLm9wdGlvbnMuc3RhY2tpbmcmJmEudmlzaWJsZSlhLmlzRGlydHk9ITB9KTtxKGMubGlua2VkU2VyaWVzLFxuZnVuY3Rpb24oYil7Yi5zZXRWaXNpYmxlKGEsITEpfSk7aWYoZylkLmlzRGlydHlCb3g9ITA7YiE9PSExJiZkLnJlZHJhdygpO0koYyxmKX0sc2V0VG9vbHRpcFBvaW50czpmdW5jdGlvbihhKXt2YXIgYj1bXSxjLGQsZT10aGlzLnhBeGlzLGY9ZSYmZS5nZXRFeHRyZW1lcygpLGc9ZT9lLnRvb2x0aXBMZW58fGUubGVuOnRoaXMuY2hhcnQucGxvdFNpemVYLGgsaSxqPVtdO2lmKCEodGhpcy5vcHRpb25zLmVuYWJsZU1vdXNlVHJhY2tpbmc9PT0hMXx8dGhpcy5zaW5ndWxhclRvb2x0aXBzKSl7aWYoYSl0aGlzLnRvb2x0aXBQb2ludHM9bnVsbDtxKHRoaXMuc2VnbWVudHN8fHRoaXMucG9pbnRzLGZ1bmN0aW9uKGEpe2I9Yi5jb25jYXQoYSl9KTtlJiZlLnJldmVyc2VkJiYoYj1iLnJldmVyc2UoKSk7dGhpcy5vcmRlclRvb2x0aXBQb2ludHMmJnRoaXMub3JkZXJUb29sdGlwUG9pbnRzKGIpO2E9Yi5sZW5ndGg7Zm9yKGk9MDtpPGE7aSsrKWlmKGU9YltpXSxjPWUueCxjPj1mLm1pbiYmXG5jPD1mLm1heCl7aD1iW2krMV07Yz1kPT09dT8wOmQrMTtmb3IoZD1iW2krMV0/TCh0KDAsVSgoZS5jbGllbnRYKyhoP2gud3JhcHBlZENsaWVudFh8fGguY2xpZW50WDpnKSkvMikpLGcpOmc7Yz49MCYmYzw9ZDspaltjKytdPWV9dGhpcy50b29sdGlwUG9pbnRzPWp9fSxzaG93OmZ1bmN0aW9uKCl7dGhpcy5zZXRWaXNpYmxlKCEwKX0saGlkZTpmdW5jdGlvbigpe3RoaXMuc2V0VmlzaWJsZSghMSl9LHNlbGVjdDpmdW5jdGlvbihhKXt0aGlzLnNlbGVjdGVkPWE9YT09PXU/IXRoaXMuc2VsZWN0ZWQ6YTtpZih0aGlzLmNoZWNrYm94KXRoaXMuY2hlY2tib3guY2hlY2tlZD1hO0kodGhpcyxhP1wic2VsZWN0XCI6XCJ1bnNlbGVjdFwiKX0sZHJhd1RyYWNrZXI6VC5kcmF3VHJhY2tlckdyYXBofSk7cihLLHtBeGlzOm5hLENoYXJ0OllhLENvbG9yOnlhLFBvaW50OkZhLFRpY2s6VGEsUmVuZGVyZXI6WmEsU2VyaWVzOk8sU1ZHRWxlbWVudDpTLFNWR1JlbmRlcmVyOnRhLGFycmF5TWluOk9hLGFycmF5TWF4OkNhLFxuY2hhcnRzOlcsZGF0ZUZvcm1hdDpjYixmb3JtYXQ6SmEscGF0aEFuaW06dmIsZ2V0T3B0aW9uczpmdW5jdGlvbigpe3JldHVybiBFfSxoYXNCaWRpQnVnOk9iLGlzVG91Y2hEZXZpY2U6SWIsbnVtYmVyRm9ybWF0OkJhLHNlcmllc1R5cGVzOkgsc2V0T3B0aW9uczpmdW5jdGlvbihhKXtFPXcoITAsRSxhKTtCYigpO3JldHVybiBFfSxhZGRFdmVudDpOLHJlbW92ZUV2ZW50OlgsY3JlYXRlRWxlbWVudDokLGRpc2NhcmRFbGVtZW50OlFhLGNzczpCLGVhY2g6cSxleHRlbmQ6cixtYXA6VmEsbWVyZ2U6dyxwaWNrOnAsc3BsYXQ6cmEsZXh0ZW5kQ2xhc3M6bWEscEludDp5LHdyYXA6TmEsc3ZnOmJhLGNhbnZhczpnYSx2bWw6IWJhJiYhZ2EscHJvZHVjdDpcIkhpZ2hjaGFydHNcIix2ZXJzaW9uOlwiNC4wLjRcIn0pfSkoKTtcbiIsIid1c2Ugc3RyaWN0JztcblxudmFyIHJpZ2h0Tm93QXBwID0gYW5ndWxhci5tb2R1bGUoJ3JpZ2h0Tm93QXBwJywgW1xuICAgICdhbmd1bGFyLXNreWNvbnMnLFxuICAgICd1aS5ib290c3RyYXAnXG5dKTtcblxucmlnaHROb3dBcHAuY29udHJvbGxlcignUmlnaHROb3dDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkaHR0cCwgJGludGVydmFsKSB7XG5cbiAgICAvLyBMb2NhbCBjdXJyZW50IHdlYXRoZXJcblxuICAgIHZhciBnYyA9IG5ldyBKdXN0R2FnZSh7XG4gICAgICAgIGlkOiBcImdhdWdlLWNvdXJ0aG91c2VcIixcbiAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgIG1pbjogMCxcbiAgICAgICAgbWF4OiAyMCxcbiAgICAgICAgdGl0bGU6IFwiV2luZCBrbS9oXCJcbiAgICB9KTtcblxuXG4gICAgZnVuY3Rpb24gZ2V0Q3VycmVudCgpIHtcbiAgICAgICAgJGh0dHAuZ2V0KCdhcGkvbG9jYWwuanNvbicpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmNvdXJ0aG91c2UgPSBkYXRhO1xuXG4gICAgICAgICAgICB2YXIgd2luZFNwZWVkID0gZGF0YS5zcGVlZCAqIDEuNjA5MzQ7XG4gICAgICAgICAgICAkc2NvcGUud2luZFNwZWVkID0gTWF0aC5jZWlsKHdpbmRTcGVlZCAqIDEwKSAvIDEwO1xuICAgICAgICAgICAgZ2MucmVmcmVzaCgkc2NvcGUud2luZFNwZWVkKTtcblxuICAgICAgICAgICAgdmFyIGRlZ3JlZXMgPSAwO1xuICAgICAgICAgICAgc3dpdGNoIChkYXRhLmRpcmVjdGlvbikge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJOXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTkVcIjpcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlcyA9IDQ1O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiRVwiOlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gOTA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTRVwiOlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gMTM1O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiU1wiOlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gMTgwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiU1dcIjpcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlcyA9IDIyNTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIldcIjpcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlcyA9IDI3MDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk5XXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAzMTU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlcyA9ICdOJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRzY29wZS5hcnJvd0NvdXJ0aG91c2UgPSB7XG4gICAgICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknLFxuICAgICAgICAgICAgICAgICctby10cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknLFxuICAgICAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJ1xuICAgICAgICAgICAgfTtcbi8vXG4vLyAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLiRhcHBseShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgZ2V0Q3VycmVudCgpO1xuICAgICAgICB9KTtcbiAgICB9LCA1MDAwKTtcbiAgICBnZXRDdXJyZW50KCk7XG5cblxuICAgIC8qKlxuICAgICAqIEZvcmVjYXN0LmlvXG4gICAgICovXG5cbiAgICB2YXIgZ2QgPSBuZXcgSnVzdEdhZ2Uoe1xuICAgICAgICBpZDogXCJnYXVnZS1kb3dudG93blwiLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDIwLFxuICAgICAgICB0aXRsZTogXCJXaW5kIGttL2hcIlxuICAgIH0pO1xuXG4gICAgJHNjb3BlLmlzRm9yZWNhc3RDb2xsYXBzZWQgPSBmYWxzZTtcblxuICAgICRodHRwLmdldCgnYXBpL3JldmVsc3Rva2UuanNvbicpLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICRzY29wZS5mb3JlY2FzdGlvID0gZGF0YTtcblxuICAgICAgICAkc2NvcGUuY3VycmVudFdlYXRoZXIgPSB7XG4gICAgICAgICAgICBmb3JlY2FzdDoge1xuICAgICAgICAgICAgICAgIGljb246IGRhdGEuY3VycmVudGx5Lmljb24sXG4gICAgICAgICAgICAgICAgaWNvblNpemU6IDgwXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHdpbmRTcGVlZCA9IGRhdGEuY3VycmVudGx5LndpbmRTcGVlZDtcbiAgICAgICAgd2luZFNwZWVkID0gTWF0aC5jZWlsKHdpbmRTcGVlZCAqIDEwKSAvIDEwO1xuICAgICAgICBnZC5yZWZyZXNoKHdpbmRTcGVlZCk7XG5cbiAgICAgICAgdmFyIGRlZ3JlZXMgPSBkYXRhLmN1cnJlbnRseS53aW5kQmVhcmluZztcblxuICAgICAgICAkc2NvcGUuYXJyb3dEb3dudG93biA9IHtcbiAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknLFxuICAgICAgICAgICAgJy1vLXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAndHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJ1xuICAgICAgICB9O1xuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogRW52aXJvbm1lbnQgQ2FuYWRhXG4gICAgICovXG4gICAgJHNjb3BlLmlzRWNGb3JlY2FzdENvbGxhcHNlZCA9IGZhbHNlO1xuXG4gICAgdmFyIGdhID0gbmV3IEp1c3RHYWdlKHtcbiAgICAgICAgaWQ6IFwiZ2F1Z2UtYWlycG9ydFwiLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDIwLFxuICAgICAgICB0aXRsZTogXCJXaW5kIGttL2hcIlxuICAgIH0pO1xuXG4gICAgJGh0dHAuZ2V0KCdhcGkvcmV2ZWxzdG9rZS1lYy5qc29uJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICRzY29wZS5haXJwb3J0ID0gZGF0YTtcblxuICAgICAgICBpZiAoZGF0YS53YXJuaW5ncy5ldmVudCkge1xuICAgICAgICAgICAgKGRhdGEud2FybmluZ3MuZXZlbnRbJ0BhdHRyaWJ1dGVzJ10udHlwZSA9PSBcIlwiKSA/ICRzY29wZS5haXJwb3J0Lndhcm5pbmdzID0gZmFsc2UgOiAkc2NvcGUuYWlycG9ydC53YXJuaW5ncyA9IHRydWU7XG5cbiAgICAgICAgICAgIHN3aXRjaCAoZGF0YS53YXJuaW5ncy5ldmVudFsnQGF0dHJpYnV0ZXMnXS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnd2F0Y2gnOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxlcnRDbGFzcyA9ICdhbGVydC1kYW5nZXInO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2Fkdmlzb3J5JzpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0Q2xhc3MgPSAnYWxlcnQtd2FybmluZyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnd2FybmluZyc6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGVydENsYXNzID0gJ2FsZXJ0LXdhcm5pbmcnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIGNhc2UgJ2VuZGVkJzpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0Q2xhc3MgPSAnYWxlcnQtc3VjY2Vzcyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnc3RhdGVtZW50JzpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0Q2xhc3MgPSAnYWxlcnQtaW5mbyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0Q2xhc3MgPSAnYWxlcnQtaW5mbyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRlZ3JlZXMgPSBkYXRhLmN1cnJlbnRDb25kaXRpb25zLndpbmQuYmVhcmluZztcblxuICAgICAgICAkc2NvcGUuYXJyb3dBaXJwb3J0ID0ge1xuICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHdpbmRTcGVlZCA9IGRhdGEuY3VycmVudENvbmRpdGlvbnMud2luZC5zcGVlZDtcbiAgICAgICAgZ2EucmVmcmVzaCh3aW5kU3BlZWQpO1xuICAgIH0pO1xufSk7XG5cbnJpZ2h0Tm93QXBwLmZpbHRlcignY2xpbWFjb25zJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC8tL2csIFwiIFwiKTtcbiAgICB9XG59KTtcblxucmlnaHROb3dBcHAuZmlsdGVyKCd3aW5kRGlyZWN0aW9uJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb25zID0gWydOJywgJ05FJywgJ0UnLCAnU0UnLCAnUycsICdTVycsICdXJywgJ05XJywgJ04nXTtcbiAgICAgICAgcmV0dXJuIGRpcmVjdGlvbnNbTWF0aC5yb3VuZChpbnB1dC80NSldO1xuICAgIH1cbn0pO1xuXG5yaWdodE5vd0FwcC5maWx0ZXIoJ2VjRGlyZWN0aW9uJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIGlmIChpbnB1dCA9PSBcIlwiIHx8IGlucHV0ID09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgIH1cbn0pO1xuIiwiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IE1haW4gZnVuY3Rpb24gc3JjLlxuICovXG5cbi8vIEhUTUw1IFNoaXYuIE11c3QgYmUgaW4gPGhlYWQ+IHRvIHN1cHBvcnQgb2xkZXIgYnJvd3NlcnMuXG5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpO1xuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYXVkaW8nKTtcbmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyYWNrJyk7XG5cbi8qKlxuICogRG91YmxlcyBhcyB0aGUgbWFpbiBmdW5jdGlvbiBmb3IgdXNlcnMgdG8gY3JlYXRlIGEgcGxheWVyIGluc3RhbmNlIGFuZCBhbHNvXG4gKiB0aGUgbWFpbiBsaWJyYXJ5IG9iamVjdC5cbiAqXG4gKiAqKkFMSUFTRVMqKiB2aWRlb2pzLCBfVl8gKGRlcHJlY2F0ZWQpXG4gKlxuICogVGhlIGB2anNgIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIGluaXRpYWxpemUgb3IgcmV0cmlldmUgYSBwbGF5ZXIuXG4gKlxuICogICAgIHZhciBteVBsYXllciA9IHZqcygnbXlfdmlkZW9faWQnKTtcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd8RWxlbWVudH0gaWQgICAgICBWaWRlbyBlbGVtZW50IG9yIHZpZGVvIGVsZW1lbnQgSURcbiAqIEBwYXJhbSAge09iamVjdD19IG9wdGlvbnMgICAgICAgIE9wdGlvbmFsIG9wdGlvbnMgb2JqZWN0IGZvciBjb25maWcvc2V0dGluZ3NcbiAqIEBwYXJhbSAge0Z1bmN0aW9uPX0gcmVhZHkgICAgICAgIE9wdGlvbmFsIHJlYWR5IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSAgICAgICAgICAgICBBIHBsYXllciBpbnN0YW5jZVxuICogQG5hbWVzcGFjZVxuICovXG52YXIgdmpzID0gZnVuY3Rpb24oaWQsIG9wdGlvbnMsIHJlYWR5KXtcbiAgdmFyIHRhZzsgLy8gRWxlbWVudCBvZiBJRFxuXG4gIC8vIEFsbG93IGZvciBlbGVtZW50IG9yIElEIHRvIGJlIHBhc3NlZCBpblxuICAvLyBTdHJpbmcgSURcbiAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcblxuICAgIC8vIEFkanVzdCBmb3IgalF1ZXJ5IElEIHN5bnRheFxuICAgIGlmIChpZC5pbmRleE9mKCcjJykgPT09IDApIHtcbiAgICAgIGlkID0gaWQuc2xpY2UoMSk7XG4gICAgfVxuXG4gICAgLy8gSWYgYSBwbGF5ZXIgaW5zdGFuY2UgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkIGZvciB0aGlzIElEIHJldHVybiBpdC5cbiAgICBpZiAodmpzLnBsYXllcnNbaWRdKSB7XG4gICAgICByZXR1cm4gdmpzLnBsYXllcnNbaWRdO1xuXG4gICAgLy8gT3RoZXJ3aXNlIGdldCBlbGVtZW50IGZvciBJRFxuICAgIH0gZWxzZSB7XG4gICAgICB0YWcgPSB2anMuZWwoaWQpO1xuICAgIH1cblxuICAvLyBJRCBpcyBhIG1lZGlhIGVsZW1lbnRcbiAgfSBlbHNlIHtcbiAgICB0YWcgPSBpZDtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBhIHVzZWFibGUgZWxlbWVudFxuICBpZiAoIXRhZyB8fCAhdGFnLm5vZGVOYW1lKSB7IC8vIHJlOiBub2RlTmFtZSwgY291bGQgYmUgYSBib3ggZGl2IGFsc29cbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgZWxlbWVudCBvciBJRCBzdXBwbGllZCBpcyBub3QgdmFsaWQuICh2aWRlb2pzKScpOyAvLyBSZXR1cm5zXG4gIH1cblxuICAvLyBFbGVtZW50IG1heSBoYXZlIGEgcGxheWVyIGF0dHIgcmVmZXJyaW5nIHRvIGFuIGFscmVhZHkgY3JlYXRlZCBwbGF5ZXIgaW5zdGFuY2UuXG4gIC8vIElmIG5vdCwgc2V0IHVwIGEgbmV3IHBsYXllciBhbmQgcmV0dXJuIHRoZSBpbnN0YW5jZS5cbiAgcmV0dXJuIHRhZ1sncGxheWVyJ10gfHwgbmV3IHZqcy5QbGF5ZXIodGFnLCBvcHRpb25zLCByZWFkeSk7XG59O1xuXG4vLyBFeHRlbmRlZCBuYW1lLCBhbHNvIGF2YWlsYWJsZSBleHRlcm5hbGx5LCB3aW5kb3cudmlkZW9qc1xudmFyIHZpZGVvanMgPSB3aW5kb3dbJ3ZpZGVvanMnXSA9IHZqcztcblxuLy8gQ0ROIFZlcnNpb24uIFVzZWQgdG8gdGFyZ2V0IHJpZ2h0IGZsYXNoIHN3Zi5cbnZqcy5DRE5fVkVSU0lPTiA9ICc0LjgnO1xudmpzLkFDQ0VTU19QUk9UT0NPTCA9ICgnaHR0cHM6JyA9PSBkb2N1bWVudC5sb2NhdGlvbi5wcm90b2NvbCA/ICdodHRwczovLycgOiAnaHR0cDovLycpO1xuXG4vKipcbiAqIEdsb2JhbCBQbGF5ZXIgaW5zdGFuY2Ugb3B0aW9ucywgc3VyZmFjZWQgZnJvbSB2anMuUGxheWVyLnByb3RvdHlwZS5vcHRpb25zX1xuICogdmpzLm9wdGlvbnMgPSB2anMuUGxheWVyLnByb3RvdHlwZS5vcHRpb25zX1xuICogQWxsIG9wdGlvbnMgc2hvdWxkIHVzZSBzdHJpbmcga2V5cyBzbyB0aGV5IGF2b2lkXG4gKiByZW5hbWluZyBieSBjbG9zdXJlIGNvbXBpbGVyXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG52anMub3B0aW9ucyA9IHtcbiAgLy8gRGVmYXVsdCBvcmRlciBvZiBmYWxsYmFjayB0ZWNobm9sb2d5XG4gICd0ZWNoT3JkZXInOiBbJ2h0bWw1JywnZmxhc2gnXSxcbiAgLy8gdGVjaE9yZGVyOiBbJ2ZsYXNoJywnaHRtbDUnXSxcblxuICAnaHRtbDUnOiB7fSxcbiAgJ2ZsYXNoJzoge30sXG5cbiAgLy8gRGVmYXVsdCBvZiB3ZWIgYnJvd3NlciBpcyAzMDB4MTUwLiBTaG91bGQgcmVseSBvbiBzb3VyY2Ugd2lkdGgvaGVpZ2h0LlxuICAnd2lkdGgnOiAzMDAsXG4gICdoZWlnaHQnOiAxNTAsXG4gIC8vIGRlZmF1bHRWb2x1bWU6IDAuODUsXG4gICdkZWZhdWx0Vm9sdW1lJzogMC4wMCwgLy8gVGhlIGZyZWFraW4gc2VhZ3VscyBhcmUgZHJpdmluZyBtZSBjcmF6eSFcblxuICAvLyBkZWZhdWx0IHBsYXliYWNrIHJhdGVzXG4gICdwbGF5YmFja1JhdGVzJzogW10sXG4gIC8vIEFkZCBwbGF5YmFjayByYXRlIHNlbGVjdGlvbiBieSBhZGRpbmcgcmF0ZXNcbiAgLy8gJ3BsYXliYWNrUmF0ZXMnOiBbMC41LCAxLCAxLjUsIDJdLFxuXG4gIC8vIGRlZmF1bHQgaW5hY3Rpdml0eSB0aW1lb3V0XG4gICdpbmFjdGl2aXR5VGltZW91dCc6IDIwMDAsXG5cbiAgLy8gSW5jbHVkZWQgY29udHJvbCBzZXRzXG4gICdjaGlsZHJlbic6IHtcbiAgICAnbWVkaWFMb2FkZXInOiB7fSxcbiAgICAncG9zdGVySW1hZ2UnOiB7fSxcbiAgICAndGV4dFRyYWNrRGlzcGxheSc6IHt9LFxuICAgICdsb2FkaW5nU3Bpbm5lcic6IHt9LFxuICAgICdiaWdQbGF5QnV0dG9uJzoge30sXG4gICAgJ2NvbnRyb2xCYXInOiB7fSxcbiAgICAnZXJyb3JEaXNwbGF5Jzoge31cbiAgfSxcblxuICAnbGFuZ3VhZ2UnOiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaHRtbCcpWzBdLmdldEF0dHJpYnV0ZSgnbGFuZycpIHx8IG5hdmlnYXRvci5sYW5ndWFnZXMgJiYgbmF2aWdhdG9yLmxhbmd1YWdlc1swXSB8fCBuYXZpZ2F0b3IudXNlckxhbmd1YWdlIHx8IG5hdmlnYXRvci5sYW5ndWFnZSB8fCAnZW4nLFxuXG4gIC8vIGxvY2FsZXMgYW5kIHRoZWlyIGxhbmd1YWdlIHRyYW5zbGF0aW9uc1xuICAnbGFuZ3VhZ2VzJzoge30sXG5cbiAgLy8gRGVmYXVsdCBtZXNzYWdlIHRvIHNob3cgd2hlbiBhIHZpZGVvIGNhbm5vdCBiZSBwbGF5ZWQuXG4gICdub3RTdXBwb3J0ZWRNZXNzYWdlJzogJ05vIGNvbXBhdGlibGUgc291cmNlIHdhcyBmb3VuZCBmb3IgdGhpcyB2aWRlby4nXG59O1xuXG4vLyBTZXQgQ0ROIFZlcnNpb24gb2Ygc3dmXG4vLyBUaGUgYWRkZWQgKCspIGJsb2NrcyB0aGUgcmVwbGFjZSBmcm9tIGNoYW5naW5nIHRoaXMgNC44IHN0cmluZ1xuaWYgKHZqcy5DRE5fVkVSU0lPTiAhPT0gJ0dFTkVSQVRFRCcrJ19DRE5fVlNOJykge1xuICB2aWRlb2pzLm9wdGlvbnNbJ2ZsYXNoJ11bJ3N3ZiddID0gdmpzLkFDQ0VTU19QUk9UT0NPTCArICd2anMuemVuY2RuLm5ldC8nK3Zqcy5DRE5fVkVSU0lPTisnL3ZpZGVvLWpzLnN3Zic7XG59XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgYWRkaW5nIGxhbmd1YWdlcyB0byB0aGUgZGVmYXVsdCBvcHRpb25zLiBVc2VmdWwgZm9yXG4gKiBhbWVuZGluZyBtdWx0aXBsZSBsYW5ndWFnZSBzdXBwb3J0IGF0IHJ1bnRpbWUuXG4gKlxuICogRXhhbXBsZTogdmpzLmFkZExhbmd1YWdlKCdlcycsIHsnSGVsbG8nOidIb2xhJ30pO1xuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gY29kZSBUaGUgbGFuZ3VhZ2UgY29kZSBvciBkaWN0aW9uYXJ5IHByb3BlcnR5XG4gKiBAcGFyYW0gIHtPYmplY3R9IGRhdGEgVGhlIGRhdGEgdmFsdWVzIHRvIGJlIHRyYW5zbGF0ZWRcbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIHJlc3VsdGluZyBnbG9iYWwgbGFuZ3VhZ2VzIGRpY3Rpb25hcnkgb2JqZWN0XG4gKi9cbnZqcy5hZGRMYW5ndWFnZSA9IGZ1bmN0aW9uKGNvZGUsIGRhdGEpe1xuICBpZih2anMub3B0aW9uc1snbGFuZ3VhZ2VzJ11bY29kZV0gIT09IHVuZGVmaW5lZCkge1xuICAgIHZqcy5vcHRpb25zWydsYW5ndWFnZXMnXVtjb2RlXSA9IHZqcy51dGlsLm1lcmdlT3B0aW9ucyh2anMub3B0aW9uc1snbGFuZ3VhZ2VzJ11bY29kZV0sIGRhdGEpO1xuICB9IGVsc2Uge1xuICAgIHZqcy5vcHRpb25zWydsYW5ndWFnZXMnXVtjb2RlXSA9IGRhdGE7XG4gIH1cbiAgcmV0dXJuIHZqcy5vcHRpb25zWydsYW5ndWFnZXMnXTtcbn07XG5cbi8qKlxuICogR2xvYmFsIHBsYXllciBsaXN0XG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG52anMucGxheWVycyA9IHt9O1xuXG4vKiFcbiAqIEN1c3RvbSBVbml2ZXJzYWwgTW9kdWxlIERlZmluaXRpb24gKFVNRClcbiAqXG4gKiBWaWRlby5qcyB3aWxsIG5ldmVyIGJlIGEgbm9uLWJyb3dzZXIgbGliIHNvIHdlIGNhbiBzaW1wbGlmeSBVTUQgYSBidW5jaCBhbmRcbiAqIHN0aWxsIHN1cHBvcnQgcmVxdWlyZWpzIGFuZCBicm93c2VyaWZ5LiBUaGlzIGFsc28gbmVlZHMgdG8gYmUgY2xvc3VyZVxuICogY29tcGlsZXIgY29tcGF0aWJsZSwgc28gc3RyaW5nIGtleXMgYXJlIHVzZWQuXG4gKi9cbmlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZVsnYW1kJ10pIHtcbiAgZGVmaW5lKFtdLCBmdW5jdGlvbigpeyByZXR1cm4gdmlkZW9qczsgfSk7XG5cbi8vIGNoZWNraW5nIHRoYXQgbW9kdWxlIGlzIGFuIG9iamVjdCB0b28gYmVjYXVzZSBvZiB1bWRqcy91bWQjMzVcbn0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKSB7XG4gIG1vZHVsZVsnZXhwb3J0cyddID0gdmlkZW9qcztcbn1cbi8qKlxuICogQ29yZSBPYmplY3QvQ2xhc3MgZm9yIG9iamVjdHMgdGhhdCB1c2UgaW5oZXJpdGFuY2UgKyBjb250c3RydWN0b3JzXG4gKlxuICogVG8gY3JlYXRlIGEgY2xhc3MgdGhhdCBjYW4gYmUgc3ViY2xhc3NlZCBpdHNlbGYsIGV4dGVuZCB0aGUgQ29yZU9iamVjdCBjbGFzcy5cbiAqXG4gKiAgICAgdmFyIEFuaW1hbCA9IENvcmVPYmplY3QuZXh0ZW5kKCk7XG4gKiAgICAgdmFyIEhvcnNlID0gQW5pbWFsLmV4dGVuZCgpO1xuICpcbiAqIFRoZSBjb25zdHJ1Y3RvciBjYW4gYmUgZGVmaW5lZCB0aHJvdWdoIHRoZSBpbml0IHByb3BlcnR5IG9mIGFuIG9iamVjdCBhcmd1bWVudC5cbiAqXG4gKiAgICAgdmFyIEFuaW1hbCA9IENvcmVPYmplY3QuZXh0ZW5kKHtcbiAqICAgICAgIGluaXQ6IGZ1bmN0aW9uKG5hbWUsIHNvdW5kKXtcbiAqICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAqICAgICAgIH1cbiAqICAgICB9KTtcbiAqXG4gKiBPdGhlciBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGNhbiBiZSBhZGRlZCB0aGUgc2FtZSB3YXksIG9yIGRpcmVjdGx5IHRvIHRoZVxuICogcHJvdG90eXBlLlxuICpcbiAqICAgIHZhciBBbmltYWwgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gKiAgICAgICBpbml0OiBmdW5jdGlvbihuYW1lKXtcbiAqICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAqICAgICAgIH0sXG4gKiAgICAgICBnZXROYW1lOiBmdW5jdGlvbigpe1xuICogICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICogICAgICAgfSxcbiAqICAgICAgIHNvdW5kOiAnLi4uJ1xuICogICAgfSk7XG4gKlxuICogICAgQW5pbWFsLnByb3RvdHlwZS5tYWtlU291bmQgPSBmdW5jdGlvbigpe1xuICogICAgICBhbGVydCh0aGlzLnNvdW5kKTtcbiAqICAgIH07XG4gKlxuICogVG8gY3JlYXRlIGFuIGluc3RhbmNlIG9mIGEgY2xhc3MsIHVzZSB0aGUgY3JlYXRlIG1ldGhvZC5cbiAqXG4gKiAgICB2YXIgZmx1ZmZ5ID0gQW5pbWFsLmNyZWF0ZSgnRmx1ZmZ5Jyk7XG4gKiAgICBmbHVmZnkuZ2V0TmFtZSgpOyAvLyAtPiBGbHVmZnlcbiAqXG4gKiBNZXRob2RzIGFuZCBwcm9wZXJ0aWVzIGNhbiBiZSBvdmVycmlkZGVuIGluIHN1YmNsYXNzZXMuXG4gKlxuICogICAgIHZhciBIb3JzZSA9IEFuaW1hbC5leHRlbmQoe1xuICogICAgICAgc291bmQ6ICdOZWlnaGhoaGghJ1xuICogICAgIH0pO1xuICpcbiAqICAgICB2YXIgaG9yc2V5ID0gSG9yc2UuY3JlYXRlKCdIb3JzZXknKTtcbiAqICAgICBob3JzZXkuZ2V0TmFtZSgpOyAvLyAtPiBIb3JzZXlcbiAqICAgICBob3JzZXkubWFrZVNvdW5kKCk7IC8vIC0+IEFsZXJ0OiBOZWlnaGhoaGghXG4gKlxuICogQGNsYXNzXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkNvcmVPYmplY3QgPSB2anNbJ0NvcmVPYmplY3QnXSA9IGZ1bmN0aW9uKCl7fTtcbi8vIE1hbnVhbGx5IGV4cG9ydGluZyB2anNbJ0NvcmVPYmplY3QnXSBoZXJlIGZvciBDbG9zdXJlIENvbXBpbGVyXG4vLyBiZWNhdXNlIG9mIHRoZSB1c2Ugb2YgdGhlIGV4dGVuZC9jcmVhdGUgY2xhc3MgbWV0aG9kc1xuLy8gSWYgd2UgZGlkbid0IGRvIHRoaXMsIHRob3NlIGZ1bmN0aW9ucyB3b3VsZCBnZXQgZmxhdHRlbmQgdG8gc29tZXRoaW5nIGxpa2Vcbi8vIGBhID0gLi4uYCBhbmQgYHRoaXMucHJvdG90eXBlYCB3b3VsZCByZWZlciB0byB0aGUgZ2xvYmFsIG9iamVjdCBpbnN0ZWFkIG9mXG4vLyBDb3JlT2JqZWN0XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhpcyBPYmplY3RcbiAqXG4gKiAgICAgdmFyIEFuaW1hbCA9IENvcmVPYmplY3QuZXh0ZW5kKCk7XG4gKiAgICAgdmFyIEhvcnNlID0gQW5pbWFsLmV4dGVuZCgpO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBGdW5jdGlvbnMgYW5kIHByb3BlcnRpZXMgdG8gYmUgYXBwbGllZCB0byB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICBuZXcgb2JqZWN0J3MgcHJvdG90eXBlXG4gKiBAcmV0dXJuIHt2anMuQ29yZU9iamVjdH0gQW4gb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBDb3JlT2JqZWN0XG4gKiBAdGhpcyB7Kn1cbiAqL1xudmpzLkNvcmVPYmplY3QuZXh0ZW5kID0gZnVuY3Rpb24ocHJvcHMpe1xuICB2YXIgaW5pdCwgc3ViT2JqO1xuXG4gIHByb3BzID0gcHJvcHMgfHwge307XG4gIC8vIFNldCB1cCB0aGUgY29uc3RydWN0b3IgdXNpbmcgdGhlIHN1cHBsaWVkIGluaXQgbWV0aG9kXG4gIC8vIG9yIHVzaW5nIHRoZSBpbml0IG9mIHRoZSBwYXJlbnQgb2JqZWN0XG4gIC8vIE1ha2Ugc3VyZSB0byBjaGVjayB0aGUgdW5vYmZ1c2NhdGVkIHZlcnNpb24gZm9yIGV4dGVybmFsIGxpYnNcbiAgaW5pdCA9IHByb3BzWydpbml0J10gfHwgcHJvcHMuaW5pdCB8fCB0aGlzLnByb3RvdHlwZVsnaW5pdCddIHx8IHRoaXMucHJvdG90eXBlLmluaXQgfHwgZnVuY3Rpb24oKXt9O1xuICAvLyBJbiBSZXNpZydzIHNpbXBsZSBjbGFzcyBpbmhlcml0YW5jZSAocHJldmlvdXNseSB1c2VkKSB0aGUgY29uc3RydWN0b3JcbiAgLy8gIGlzIGEgZnVuY3Rpb24gdGhhdCBjYWxscyBgdGhpcy5pbml0LmFwcGx5KGFyZ3VtZW50cylgXG4gIC8vIEhvd2V2ZXIgdGhhdCB3b3VsZCBwcmV2ZW50IHVzIGZyb20gdXNpbmcgYFBhcmVudE9iamVjdC5jYWxsKHRoaXMpO2BcbiAgLy8gIGluIGEgQ2hpbGQgY29uc3R1Y3RvciBiZWNhdXNlIHRoZSBgdGhpc2AgaW4gYHRoaXMuaW5pdGBcbiAgLy8gIHdvdWxkIHN0aWxsIHJlZmVyIHRvIHRoZSBDaGlsZCBhbmQgY2F1c2UgYW4gaW5pZmluaXRlIGxvb3AuXG4gIC8vIFdlIHdvdWxkIGluc3RlYWQgaGF2ZSB0byBkb1xuICAvLyAgICBgUGFyZW50T2JqZWN0LnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtbmVudHMpO2BcbiAgLy8gIEJsZWguIFdlJ3JlIG5vdCBjcmVhdGluZyBhIF9zdXBlcigpIGZ1bmN0aW9uLCBzbyBpdCdzIGdvb2QgdG8ga2VlcFxuICAvLyAgdGhlIHBhcmVudCBjb25zdHJ1Y3RvciByZWZlcmVuY2Ugc2ltcGxlLlxuICBzdWJPYmogPSBmdW5jdGlvbigpe1xuICAgIGluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBJbmhlcml0IGZyb20gdGhpcyBvYmplY3QncyBwcm90b3R5cGVcbiAgc3ViT2JqLnByb3RvdHlwZSA9IHZqcy5vYmouY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcbiAgLy8gUmVzZXQgdGhlIGNvbnN0cnVjdG9yIHByb3BlcnR5IGZvciBzdWJPYmogb3RoZXJ3aXNlXG4gIC8vIGluc3RhbmNlcyBvZiBzdWJPYmogd291bGQgaGF2ZSB0aGUgY29uc3RydWN0b3Igb2YgdGhlIHBhcmVudCBPYmplY3RcbiAgc3ViT2JqLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1Yk9iajtcblxuICAvLyBNYWtlIHRoZSBjbGFzcyBleHRlbmRhYmxlXG4gIHN1Yk9iai5leHRlbmQgPSB2anMuQ29yZU9iamVjdC5leHRlbmQ7XG4gIC8vIE1ha2UgYSBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgaW5zdGFuY2VzXG4gIHN1Yk9iai5jcmVhdGUgPSB2anMuQ29yZU9iamVjdC5jcmVhdGU7XG5cbiAgLy8gRXh0ZW5kIHN1Yk9iaidzIHByb3RvdHlwZSB3aXRoIGZ1bmN0aW9ucyBhbmQgb3RoZXIgcHJvcGVydGllcyBmcm9tIHByb3BzXG4gIGZvciAodmFyIG5hbWUgaW4gcHJvcHMpIHtcbiAgICBpZiAocHJvcHMuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgIHN1Yk9iai5wcm90b3R5cGVbbmFtZV0gPSBwcm9wc1tuYW1lXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3ViT2JqO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcgaW5zdGFjZSBvZiB0aGlzIE9iamVjdCBjbGFzc1xuICpcbiAqICAgICB2YXIgbXlBbmltYWwgPSBBbmltYWwuY3JlYXRlKCk7XG4gKlxuICogQHJldHVybiB7dmpzLkNvcmVPYmplY3R9IEFuIGluc3RhbmNlIG9mIGEgQ29yZU9iamVjdCBzdWJjbGFzc1xuICogQHRoaXMgeyp9XG4gKi9cbnZqcy5Db3JlT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uKCl7XG4gIC8vIENyZWF0ZSBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoaXMgb2JqZWN0J3MgcHJvdG90eXBlXG4gIHZhciBpbnN0ID0gdmpzLm9iai5jcmVhdGUodGhpcy5wcm90b3R5cGUpO1xuXG4gIC8vIEFwcGx5IHRoaXMgY29uc3RydWN0b3IgZnVuY3Rpb24gdG8gdGhlIG5ldyBvYmplY3RcbiAgdGhpcy5hcHBseShpbnN0LCBhcmd1bWVudHMpO1xuXG4gIC8vIFJldHVybiB0aGUgbmV3IG9iamVjdFxuICByZXR1cm4gaW5zdDtcbn07XG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRXZlbnQgU3lzdGVtIChKb2huIFJlc2lnIC0gU2VjcmV0cyBvZiBhIEpTIE5pbmphIGh0dHA6Ly9qc25pbmphLmNvbS8pXG4gKiAoT3JpZ2luYWwgYm9vayB2ZXJzaW9uIHdhc24ndCBjb21wbGV0ZWx5IHVzYWJsZSwgc28gZml4ZWQgc29tZSB0aGluZ3MgYW5kIG1hZGUgQ2xvc3VyZSBDb21waWxlciBjb21wYXRpYmxlKVxuICogVGhpcyBzaG91bGQgd29yayB2ZXJ5IHNpbWlsYXJseSB0byBqUXVlcnkncyBldmVudHMsIGhvd2V2ZXIgaXQncyBiYXNlZCBvZmYgdGhlIGJvb2sgdmVyc2lvbiB3aGljaCBpc24ndCBhc1xuICogcm9idXN0IGFzIGpxdWVyeSdzLCBzbyB0aGVyZSdzIHByb2JhYmx5IHNvbWUgZGlmZmVyZW5jZXMuXG4gKi9cblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gZWxlbWVudFxuICogSXQgc3RvcmVzIHRoZSBoYW5kbGVyIGZ1bmN0aW9uIGluIGEgc2VwYXJhdGUgY2FjaGUgb2JqZWN0XG4gKiBhbmQgYWRkcyBhIGdlbmVyaWMgaGFuZGxlciB0byB0aGUgZWxlbWVudCdzIGV2ZW50LFxuICogYWxvbmcgd2l0aCBhIHVuaXF1ZSBpZCAoZ3VpZCkgdG8gdGhlIGVsZW1lbnQuXG4gKiBAcGFyYW0gIHtFbGVtZW50fE9iamVjdH0gICBlbGVtIEVsZW1lbnQgb3Igb2JqZWN0IHRvIGJpbmQgbGlzdGVuZXJzIHRvXG4gKiBAcGFyYW0gIHtTdHJpbmd8QXJyYXl9ICAgdHlwZSBUeXBlIG9mIGV2ZW50IHRvIGJpbmQgdG8uXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICBFdmVudCBsaXN0ZW5lci5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vbiA9IGZ1bmN0aW9uKGVsZW0sIHR5cGUsIGZuKXtcbiAgaWYgKHZqcy5vYmouaXNBcnJheSh0eXBlKSkge1xuICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHModmpzLm9uLCBlbGVtLCB0eXBlLCBmbik7XG4gIH1cblxuICB2YXIgZGF0YSA9IHZqcy5nZXREYXRhKGVsZW0pO1xuXG4gIC8vIFdlIG5lZWQgYSBwbGFjZSB0byBzdG9yZSBhbGwgb3VyIGhhbmRsZXIgZGF0YVxuICBpZiAoIWRhdGEuaGFuZGxlcnMpIGRhdGEuaGFuZGxlcnMgPSB7fTtcblxuICBpZiAoIWRhdGEuaGFuZGxlcnNbdHlwZV0pIGRhdGEuaGFuZGxlcnNbdHlwZV0gPSBbXTtcblxuICBpZiAoIWZuLmd1aWQpIGZuLmd1aWQgPSB2anMuZ3VpZCsrO1xuXG4gIGRhdGEuaGFuZGxlcnNbdHlwZV0ucHVzaChmbik7XG5cbiAgaWYgKCFkYXRhLmRpc3BhdGNoZXIpIHtcbiAgICBkYXRhLmRpc2FibGVkID0gZmFsc2U7XG5cbiAgICBkYXRhLmRpc3BhdGNoZXIgPSBmdW5jdGlvbiAoZXZlbnQpe1xuXG4gICAgICBpZiAoZGF0YS5kaXNhYmxlZCkgcmV0dXJuO1xuICAgICAgZXZlbnQgPSB2anMuZml4RXZlbnQoZXZlbnQpO1xuXG4gICAgICB2YXIgaGFuZGxlcnMgPSBkYXRhLmhhbmRsZXJzW2V2ZW50LnR5cGVdO1xuXG4gICAgICBpZiAoaGFuZGxlcnMpIHtcbiAgICAgICAgLy8gQ29weSBoYW5kbGVycyBzbyBpZiBoYW5kbGVycyBhcmUgYWRkZWQvcmVtb3ZlZCBkdXJpbmcgdGhlIHByb2Nlc3MgaXQgZG9lc24ndCB0aHJvdyBldmVyeXRoaW5nIG9mZi5cbiAgICAgICAgdmFyIGhhbmRsZXJzQ29weSA9IGhhbmRsZXJzLnNsaWNlKDApO1xuXG4gICAgICAgIGZvciAodmFyIG0gPSAwLCBuID0gaGFuZGxlcnNDb3B5Lmxlbmd0aDsgbSA8IG47IG0rKykge1xuICAgICAgICAgIGlmIChldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaGFuZGxlcnNDb3B5W21dLmNhbGwoZWxlbSwgZXZlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBpZiAoZGF0YS5oYW5kbGVyc1t0eXBlXS5sZW5ndGggPT0gMSkge1xuICAgIGlmIChlbGVtLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBkYXRhLmRpc3BhdGNoZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQpIHtcbiAgICAgIGVsZW0uYXR0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGRhdGEuZGlzcGF0Y2hlcik7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZXMgZXZlbnQgbGlzdGVuZXJzIGZyb20gYW4gZWxlbWVudFxuICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9ICAgZWxlbSBPYmplY3QgdG8gcmVtb3ZlIGxpc3RlbmVycyBmcm9tXG4gKiBAcGFyYW0gIHtTdHJpbmd8QXJyYXk9fSAgIHR5cGUgVHlwZSBvZiBsaXN0ZW5lciB0byByZW1vdmUuIERvbid0IGluY2x1ZGUgdG8gcmVtb3ZlIGFsbCBldmVudHMgZnJvbSBlbGVtZW50LlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgU3BlY2lmaWMgbGlzdGVuZXIgdG8gcmVtb3ZlLiBEb24ndCBpbmNsZHVlIHRvIHJlbW92ZSBsaXN0ZW5lcnMgZm9yIGFuIGV2ZW50IHR5cGUuXG4gKiBAcHJpdmF0ZVxuICovXG52anMub2ZmID0gZnVuY3Rpb24oZWxlbSwgdHlwZSwgZm4pIHtcbiAgLy8gRG9uJ3Qgd2FudCB0byBhZGQgYSBjYWNoZSBvYmplY3QgdGhyb3VnaCBnZXREYXRhIGlmIG5vdCBuZWVkZWRcbiAgaWYgKCF2anMuaGFzRGF0YShlbGVtKSkgcmV0dXJuO1xuXG4gIHZhciBkYXRhID0gdmpzLmdldERhdGEoZWxlbSk7XG5cbiAgLy8gSWYgbm8gZXZlbnRzIGV4aXN0LCBub3RoaW5nIHRvIHVuYmluZFxuICBpZiAoIWRhdGEuaGFuZGxlcnMpIHsgcmV0dXJuOyB9XG5cbiAgaWYgKHZqcy5vYmouaXNBcnJheSh0eXBlKSkge1xuICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHModmpzLm9mZiwgZWxlbSwgdHlwZSwgZm4pO1xuICB9XG5cbiAgLy8gVXRpbGl0eSBmdW5jdGlvblxuICB2YXIgcmVtb3ZlVHlwZSA9IGZ1bmN0aW9uKHQpe1xuICAgICBkYXRhLmhhbmRsZXJzW3RdID0gW107XG4gICAgIHZqcy5jbGVhblVwRXZlbnRzKGVsZW0sdCk7XG4gIH07XG5cbiAgLy8gQXJlIHdlIHJlbW92aW5nIGFsbCBib3VuZCBldmVudHM/XG4gIGlmICghdHlwZSkge1xuICAgIGZvciAodmFyIHQgaW4gZGF0YS5oYW5kbGVycykgcmVtb3ZlVHlwZSh0KTtcbiAgICByZXR1cm47XG4gIH1cblxuICB2YXIgaGFuZGxlcnMgPSBkYXRhLmhhbmRsZXJzW3R5cGVdO1xuXG4gIC8vIElmIG5vIGhhbmRsZXJzIGV4aXN0LCBub3RoaW5nIHRvIHVuYmluZFxuICBpZiAoIWhhbmRsZXJzKSByZXR1cm47XG5cbiAgLy8gSWYgbm8gbGlzdGVuZXIgd2FzIHByb3ZpZGVkLCByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgdHlwZVxuICBpZiAoIWZuKSB7XG4gICAgcmVtb3ZlVHlwZSh0eXBlKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBXZSdyZSBvbmx5IHJlbW92aW5nIGEgc2luZ2xlIGhhbmRsZXJcbiAgaWYgKGZuLmd1aWQpIHtcbiAgICBmb3IgKHZhciBuID0gMDsgbiA8IGhhbmRsZXJzLmxlbmd0aDsgbisrKSB7XG4gICAgICBpZiAoaGFuZGxlcnNbbl0uZ3VpZCA9PT0gZm4uZ3VpZCkge1xuICAgICAgICBoYW5kbGVycy5zcGxpY2Uobi0tLCAxKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2anMuY2xlYW5VcEV2ZW50cyhlbGVtLCB0eXBlKTtcbn07XG5cbi8qKlxuICogQ2xlYW4gdXAgdGhlIGxpc3RlbmVyIGNhY2hlIGFuZCBkaXNwYXRjaGVyc1xuICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9IGVsZW0gRWxlbWVudCB0byBjbGVhbiB1cFxuICogQHBhcmFtICB7U3RyaW5nfSB0eXBlIFR5cGUgb2YgZXZlbnQgdG8gY2xlYW4gdXBcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5jbGVhblVwRXZlbnRzID0gZnVuY3Rpb24oZWxlbSwgdHlwZSkge1xuICB2YXIgZGF0YSA9IHZqcy5nZXREYXRhKGVsZW0pO1xuXG4gIC8vIFJlbW92ZSB0aGUgZXZlbnRzIG9mIGEgcGFydGljdWxhciB0eXBlIGlmIHRoZXJlIGFyZSBub25lIGxlZnRcbiAgaWYgKGRhdGEuaGFuZGxlcnNbdHlwZV0ubGVuZ3RoID09PSAwKSB7XG4gICAgZGVsZXRlIGRhdGEuaGFuZGxlcnNbdHlwZV07XG4gICAgLy8gZGF0YS5oYW5kbGVyc1t0eXBlXSA9IG51bGw7XG4gICAgLy8gU2V0dGluZyB0byBudWxsIHdhcyBjYXVzaW5nIGFuIGVycm9yIHdpdGggZGF0YS5oYW5kbGVyc1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBtZXRhLWhhbmRsZXIgZnJvbSB0aGUgZWxlbWVudFxuICAgIGlmIChlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcbiAgICAgIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBkYXRhLmRpc3BhdGNoZXIsIGZhbHNlKTtcbiAgICB9IGVsc2UgaWYgKGVsZW0uZGV0YWNoRXZlbnQpIHtcbiAgICAgIGVsZW0uZGV0YWNoRXZlbnQoJ29uJyArIHR5cGUsIGRhdGEuZGlzcGF0Y2hlcik7XG4gICAgfVxuICB9XG5cbiAgLy8gUmVtb3ZlIHRoZSBldmVudHMgb2JqZWN0IGlmIHRoZXJlIGFyZSBubyB0eXBlcyBsZWZ0XG4gIGlmICh2anMuaXNFbXB0eShkYXRhLmhhbmRsZXJzKSkge1xuICAgIGRlbGV0ZSBkYXRhLmhhbmRsZXJzO1xuICAgIGRlbGV0ZSBkYXRhLmRpc3BhdGNoZXI7XG4gICAgZGVsZXRlIGRhdGEuZGlzYWJsZWQ7XG5cbiAgICAvLyBkYXRhLmhhbmRsZXJzID0gbnVsbDtcbiAgICAvLyBkYXRhLmRpc3BhdGNoZXIgPSBudWxsO1xuICAgIC8vIGRhdGEuZGlzYWJsZWQgPSBudWxsO1xuICB9XG5cbiAgLy8gRmluYWxseSByZW1vdmUgdGhlIGV4cGFuZG8gaWYgdGhlcmUgaXMgbm8gZGF0YSBsZWZ0XG4gIGlmICh2anMuaXNFbXB0eShkYXRhKSkge1xuICAgIHZqcy5yZW1vdmVEYXRhKGVsZW0pO1xuICB9XG59O1xuXG4vKipcbiAqIEZpeCBhIG5hdGl2ZSBldmVudCB0byBoYXZlIHN0YW5kYXJkIHByb3BlcnR5IHZhbHVlc1xuICogQHBhcmFtICB7T2JqZWN0fSBldmVudCBFdmVudCBvYmplY3QgdG8gZml4XG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuZml4RXZlbnQgPSBmdW5jdGlvbihldmVudCkge1xuXG4gIGZ1bmN0aW9uIHJldHVyblRydWUoKSB7IHJldHVybiB0cnVlOyB9XG4gIGZ1bmN0aW9uIHJldHVybkZhbHNlKCkgeyByZXR1cm4gZmFsc2U7IH1cblxuICAvLyBUZXN0IGlmIGZpeGluZyB1cCBpcyBuZWVkZWRcbiAgLy8gVXNlZCB0byBjaGVjayBpZiAhZXZlbnQuc3RvcFByb3BhZ2F0aW9uIGluc3RlYWQgb2YgaXNQcm9wYWdhdGlvblN0b3BwZWRcbiAgLy8gQnV0IG5hdGl2ZSBldmVudHMgcmV0dXJuIHRydWUgZm9yIHN0b3BQcm9wYWdhdGlvbiwgYnV0IGRvbid0IGhhdmVcbiAgLy8gb3RoZXIgZXhwZWN0ZWQgbWV0aG9kcyBsaWtlIGlzUHJvcGFnYXRpb25TdG9wcGVkLiBTZWVtcyB0byBiZSBhIHByb2JsZW1cbiAgLy8gd2l0aCB0aGUgSmF2YXNjcmlwdCBOaW5qYSBjb2RlLiBTbyB3ZSdyZSBqdXN0IG92ZXJyaWRpbmcgYWxsIGV2ZW50cyBub3cuXG4gIGlmICghZXZlbnQgfHwgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKSB7XG4gICAgdmFyIG9sZCA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudDtcblxuICAgIGV2ZW50ID0ge307XG4gICAgLy8gQ2xvbmUgdGhlIG9sZCBvYmplY3Qgc28gdGhhdCB3ZSBjYW4gbW9kaWZ5IHRoZSB2YWx1ZXMgZXZlbnQgPSB7fTtcbiAgICAvLyBJRTggRG9lc24ndCBsaWtlIHdoZW4geW91IG1lc3Mgd2l0aCBuYXRpdmUgZXZlbnQgcHJvcGVydGllc1xuICAgIC8vIEZpcmVmb3ggcmV0dXJucyBmYWxzZSBmb3IgZXZlbnQuaGFzT3duUHJvcGVydHkoJ3R5cGUnKSBhbmQgb3RoZXIgcHJvcHNcbiAgICAvLyAgd2hpY2ggbWFrZXMgY29weWluZyBtb3JlIGRpZmZpY3VsdC5cbiAgICAvLyBUT0RPOiBQcm9iYWJseSBiZXN0IHRvIGNyZWF0ZSBhIHdoaXRlbGlzdCBvZiBldmVudCBwcm9wc1xuICAgIGZvciAodmFyIGtleSBpbiBvbGQpIHtcbiAgICAgIC8vIFNhZmFyaSA2LjAuMyB3YXJucyB5b3UgaWYgeW91IHRyeSB0byBjb3B5IGRlcHJlY2F0ZWQgbGF5ZXJYL1lcbiAgICAgIC8vIENocm9tZSB3YXJucyB5b3UgaWYgeW91IHRyeSB0byBjb3B5IGRlcHJlY2F0ZWQga2V5Ym9hcmRFdmVudC5rZXlMb2NhdGlvblxuICAgICAgaWYgKGtleSAhPT0gJ2xheWVyWCcgJiYga2V5ICE9PSAnbGF5ZXJZJyAmJiBrZXkgIT09ICdrZXlib2FyZEV2ZW50LmtleUxvY2F0aW9uJykge1xuICAgICAgICAvLyBDaHJvbWUgMzIrIHdhcm5zIGlmIHlvdSB0cnkgdG8gY29weSBkZXByZWNhdGVkIHJldHVyblZhbHVlLCBidXRcbiAgICAgICAgLy8gd2Ugc3RpbGwgd2FudCB0byBpZiBwcmV2ZW50RGVmYXVsdCBpc24ndCBzdXBwb3J0ZWQgKElFOCkuXG4gICAgICAgIGlmICghKGtleSA9PSAncmV0dXJuVmFsdWUnICYmIG9sZC5wcmV2ZW50RGVmYXVsdCkpIHtcbiAgICAgICAgICBldmVudFtrZXldID0gb2xkW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGUgZXZlbnQgb2NjdXJyZWQgb24gdGhpcyBlbGVtZW50XG4gICAgaWYgKCFldmVudC50YXJnZXQpIHtcbiAgICAgIGV2ZW50LnRhcmdldCA9IGV2ZW50LnNyY0VsZW1lbnQgfHwgZG9jdW1lbnQ7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHdoaWNoIG90aGVyIGVsZW1lbnQgdGhlIGV2ZW50IGlzIHJlbGF0ZWQgdG9cbiAgICBldmVudC5yZWxhdGVkVGFyZ2V0ID0gZXZlbnQuZnJvbUVsZW1lbnQgPT09IGV2ZW50LnRhcmdldCA/XG4gICAgICBldmVudC50b0VsZW1lbnQgOlxuICAgICAgZXZlbnQuZnJvbUVsZW1lbnQ7XG5cbiAgICAvLyBTdG9wIHRoZSBkZWZhdWx0IGJyb3dzZXIgYWN0aW9uXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob2xkLnByZXZlbnREZWZhdWx0KSB7XG4gICAgICAgIG9sZC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuICAgICAgZXZlbnQucmV0dXJuVmFsdWUgPSBmYWxzZTtcbiAgICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWU7XG4gICAgICBldmVudC5kZWZhdWx0UHJldmVudGVkID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuRmFsc2U7XG4gICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IGZhbHNlO1xuXG4gICAgLy8gU3RvcCB0aGUgZXZlbnQgZnJvbSBidWJibGluZ1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChvbGQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICAgIG9sZC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cbiAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgICBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG4gICAgfTtcblxuICAgIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuRmFsc2U7XG5cbiAgICAvLyBTdG9wIHRoZSBldmVudCBmcm9tIGJ1YmJsaW5nIGFuZCBleGVjdXRpbmcgb3RoZXIgaGFuZGxlcnNcbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob2xkLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbikge1xuICAgICAgICBvbGQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICBldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9O1xuXG4gICAgZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5GYWxzZTtcblxuICAgIC8vIEhhbmRsZSBtb3VzZSBwb3NpdGlvblxuICAgIGlmIChldmVudC5jbGllbnRYICE9IG51bGwpIHtcbiAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gICAgICBldmVudC5wYWdlWCA9IGV2ZW50LmNsaWVudFggK1xuICAgICAgICAoZG9jICYmIGRvYy5zY3JvbGxMZWZ0IHx8IGJvZHkgJiYgYm9keS5zY3JvbGxMZWZ0IHx8IDApIC1cbiAgICAgICAgKGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwKTtcbiAgICAgIGV2ZW50LnBhZ2VZID0gZXZlbnQuY2xpZW50WSArXG4gICAgICAgIChkb2MgJiYgZG9jLnNjcm9sbFRvcCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsVG9wIHx8IDApIC1cbiAgICAgICAgKGRvYyAmJiBkb2MuY2xpZW50VG9wIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgfHwgMCk7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGtleSBwcmVzc2VzXG4gICAgZXZlbnQud2hpY2ggPSBldmVudC5jaGFyQ29kZSB8fCBldmVudC5rZXlDb2RlO1xuXG4gICAgLy8gRml4IGJ1dHRvbiBmb3IgbW91c2UgY2xpY2tzOlxuICAgIC8vIDAgPT0gbGVmdDsgMSA9PSBtaWRkbGU7IDIgPT0gcmlnaHRcbiAgICBpZiAoZXZlbnQuYnV0dG9uICE9IG51bGwpIHtcbiAgICAgIGV2ZW50LmJ1dHRvbiA9IChldmVudC5idXR0b24gJiAxID8gMCA6XG4gICAgICAgIChldmVudC5idXR0b24gJiA0ID8gMSA6XG4gICAgICAgICAgKGV2ZW50LmJ1dHRvbiAmIDIgPyAyIDogMCkpKTtcbiAgICB9XG4gIH1cblxuICAvLyBSZXR1cm5zIGZpeGVkLXVwIGluc3RhbmNlXG4gIHJldHVybiBldmVudDtcbn07XG5cbi8qKlxuICogVHJpZ2dlciBhbiBldmVudCBmb3IgYW4gZWxlbWVudFxuICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9ICAgICAgZWxlbSAgRWxlbWVudCB0byB0cmlnZ2VyIGFuIGV2ZW50IG9uXG4gKiBAcGFyYW0gIHtFdmVudHxPYmplY3R8U3RyaW5nfSBldmVudCBBIHN0cmluZyAodGhlIHR5cGUpIG9yIGFuIGV2ZW50IG9iamVjdCB3aXRoIGEgdHlwZSBhdHRyaWJ1dGVcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy50cmlnZ2VyID0gZnVuY3Rpb24oZWxlbSwgZXZlbnQpIHtcbiAgLy8gRmV0Y2hlcyBlbGVtZW50IGRhdGEgYW5kIGEgcmVmZXJlbmNlIHRvIHRoZSBwYXJlbnQgKGZvciBidWJibGluZykuXG4gIC8vIERvbid0IHdhbnQgdG8gYWRkIGEgZGF0YSBvYmplY3QgdG8gY2FjaGUgZm9yIGV2ZXJ5IHBhcmVudCxcbiAgLy8gc28gY2hlY2tpbmcgaGFzRGF0YSBmaXJzdC5cbiAgdmFyIGVsZW1EYXRhID0gKHZqcy5oYXNEYXRhKGVsZW0pKSA/IHZqcy5nZXREYXRhKGVsZW0pIDoge307XG4gIHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGUgfHwgZWxlbS5vd25lckRvY3VtZW50O1xuICAgICAgLy8gdHlwZSA9IGV2ZW50LnR5cGUgfHwgZXZlbnQsXG4gICAgICAvLyBoYW5kbGVyO1xuXG4gIC8vIElmIGFuIGV2ZW50IG5hbWUgd2FzIHBhc3NlZCBhcyBhIHN0cmluZywgY3JlYXRlcyBhbiBldmVudCBvdXQgb2YgaXRcbiAgaWYgKHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZycpIHtcbiAgICBldmVudCA9IHsgdHlwZTpldmVudCwgdGFyZ2V0OmVsZW0gfTtcbiAgfVxuICAvLyBOb3JtYWxpemVzIHRoZSBldmVudCBwcm9wZXJ0aWVzLlxuICBldmVudCA9IHZqcy5maXhFdmVudChldmVudCk7XG5cbiAgLy8gSWYgdGhlIHBhc3NlZCBlbGVtZW50IGhhcyBhIGRpc3BhdGNoZXIsIGV4ZWN1dGVzIHRoZSBlc3RhYmxpc2hlZCBoYW5kbGVycy5cbiAgaWYgKGVsZW1EYXRhLmRpc3BhdGNoZXIpIHtcbiAgICBlbGVtRGF0YS5kaXNwYXRjaGVyLmNhbGwoZWxlbSwgZXZlbnQpO1xuICB9XG5cbiAgLy8gVW5sZXNzIGV4cGxpY2l0bHkgc3RvcHBlZCBvciB0aGUgZXZlbnQgZG9lcyBub3QgYnViYmxlIChlLmcuIG1lZGlhIGV2ZW50cylcbiAgICAvLyByZWN1cnNpdmVseSBjYWxscyB0aGlzIGZ1bmN0aW9uIHRvIGJ1YmJsZSB0aGUgZXZlbnQgdXAgdGhlIERPTS5cbiAgICBpZiAocGFyZW50ICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICYmIGV2ZW50LmJ1YmJsZXMgIT09IGZhbHNlKSB7XG4gICAgdmpzLnRyaWdnZXIocGFyZW50LCBldmVudCk7XG5cbiAgLy8gSWYgYXQgdGhlIHRvcCBvZiB0aGUgRE9NLCB0cmlnZ2VycyB0aGUgZGVmYXVsdCBhY3Rpb24gdW5sZXNzIGRpc2FibGVkLlxuICB9IGVsc2UgaWYgKCFwYXJlbnQgJiYgIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICB2YXIgdGFyZ2V0RGF0YSA9IHZqcy5nZXREYXRhKGV2ZW50LnRhcmdldCk7XG5cbiAgICAvLyBDaGVja3MgaWYgdGhlIHRhcmdldCBoYXMgYSBkZWZhdWx0IGFjdGlvbiBmb3IgdGhpcyBldmVudC5cbiAgICBpZiAoZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdKSB7XG4gICAgICAvLyBUZW1wb3JhcmlseSBkaXNhYmxlcyBldmVudCBkaXNwYXRjaGluZyBvbiB0aGUgdGFyZ2V0IGFzIHdlIGhhdmUgYWxyZWFkeSBleGVjdXRlZCB0aGUgaGFuZGxlci5cbiAgICAgIHRhcmdldERhdGEuZGlzYWJsZWQgPSB0cnVlO1xuICAgICAgLy8gRXhlY3V0ZXMgdGhlIGRlZmF1bHQgYWN0aW9uLlxuICAgICAgaWYgKHR5cGVvZiBldmVudC50YXJnZXRbZXZlbnQudHlwZV0gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdKCk7XG4gICAgICB9XG4gICAgICAvLyBSZS1lbmFibGVzIGV2ZW50IGRpc3BhdGNoaW5nLlxuICAgICAgdGFyZ2V0RGF0YS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIEluZm9ybSB0aGUgdHJpZ2dlcmVyIGlmIHRoZSBkZWZhdWx0IHdhcyBwcmV2ZW50ZWQgYnkgcmV0dXJuaW5nIGZhbHNlXG4gIHJldHVybiAhZXZlbnQuZGVmYXVsdFByZXZlbnRlZDtcbiAgLyogT3JpZ2luYWwgdmVyc2lvbiBvZiBqcyBuaW5qYSBldmVudHMgd2Fzbid0IGNvbXBsZXRlLlxuICAgKiBXZSd2ZSBzaW5jZSB1cGRhdGVkIHRvIHRoZSBsYXRlc3QgdmVyc2lvbiwgYnV0IGtlZXBpbmcgdGhpcyBhcm91bmRcbiAgICogZm9yIG5vdyBqdXN0IGluIGNhc2UuXG4gICAqL1xuICAvLyAvLyBBZGRlZCBpbiBhdHRpb24gdG8gYm9vay4gQm9vayBjb2RlIHdhcyBicm9rZS5cbiAgLy8gZXZlbnQgPSB0eXBlb2YgZXZlbnQgPT09ICdvYmplY3QnID9cbiAgLy8gICBldmVudFt2anMuZXhwYW5kb10gP1xuICAvLyAgICAgZXZlbnQgOlxuICAvLyAgICAgbmV3IHZqcy5FdmVudCh0eXBlLCBldmVudCkgOlxuICAvLyAgIG5ldyB2anMuRXZlbnQodHlwZSk7XG5cbiAgLy8gZXZlbnQudHlwZSA9IHR5cGU7XG4gIC8vIGlmIChoYW5kbGVyKSB7XG4gIC8vICAgaGFuZGxlci5jYWxsKGVsZW0sIGV2ZW50KTtcbiAgLy8gfVxuXG4gIC8vIC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuICAvLyBldmVudC5yZXN1bHQgPSB1bmRlZmluZWQ7XG4gIC8vIGV2ZW50LnRhcmdldCA9IGVsZW07XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgYSBsaXN0ZW5lciBvbmx5IG9uY2UgZm9yIGFuIGV2ZW50XG4gKiBAcGFyYW0gIHtFbGVtZW50fE9iamVjdH0gICBlbGVtIEVsZW1lbnQgb3Igb2JqZWN0IHRvXG4gKiBAcGFyYW0gIHtTdHJpbmd8QXJyYXl9ICAgdHlwZVxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuXG4gKiBAcHJpdmF0ZVxuICovXG52anMub25lID0gZnVuY3Rpb24oZWxlbSwgdHlwZSwgZm4pIHtcbiAgaWYgKHZqcy5vYmouaXNBcnJheSh0eXBlKSkge1xuICAgIHJldHVybiBfaGFuZGxlTXVsdGlwbGVFdmVudHModmpzLm9uZSwgZWxlbSwgdHlwZSwgZm4pO1xuICB9XG4gIHZhciBmdW5jID0gZnVuY3Rpb24oKXtcbiAgICB2anMub2ZmKGVsZW0sIHR5cGUsIGZ1bmMpO1xuICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG4gIC8vIGNvcHkgdGhlIGd1aWQgdG8gdGhlIG5ldyBmdW5jdGlvbiBzbyBpdCBjYW4gcmVtb3ZlZCB1c2luZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24ncyBJRFxuICBmdW5jLmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCB2anMuZ3VpZCsrO1xuICB2anMub24oZWxlbSwgdHlwZSwgZnVuYyk7XG59O1xuXG4vKipcbiAqIExvb3BzIHRocm91Z2ggYW4gYXJyYXkgb2YgZXZlbnQgdHlwZXMgYW5kIGNhbGxzIHRoZSByZXF1ZXN0ZWQgbWV0aG9kIGZvciBlYWNoIHR5cGUuXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICBUaGUgZXZlbnQgbWV0aG9kIHdlIHdhbnQgdG8gdXNlLlxuICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9IGVsZW0gRWxlbWVudCBvciBvYmplY3QgdG8gYmluZCBsaXN0ZW5lcnMgdG9cbiAqIEBwYXJhbSAge1N0cmluZ30gICB0eXBlIFR5cGUgb2YgZXZlbnQgdG8gYmluZCB0by5cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAgIEV2ZW50IGxpc3RlbmVyLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gX2hhbmRsZU11bHRpcGxlRXZlbnRzKGZuLCBlbGVtLCB0eXBlLCBjYWxsYmFjaykge1xuICB2anMuYXJyLmZvckVhY2godHlwZSwgZnVuY3Rpb24odHlwZSkge1xuICAgIGZuKGVsZW0sIHR5cGUsIGNhbGxiYWNrKTsgLy9DYWxsIHRoZSBldmVudCBtZXRob2QgZm9yIGVhY2ggb25lIG9mIHRoZSB0eXBlc1xuICB9KTtcbn1cbnZhciBoYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGVsZW1lbnQgYW5kIGFwcGxpZXMgcHJvcGVydGllcy5cbiAqIEBwYXJhbSAge1N0cmluZz19IHRhZ05hbWUgICAgTmFtZSBvZiB0YWcgdG8gYmUgY3JlYXRlZC5cbiAqIEBwYXJhbSAge09iamVjdD19IHByb3BlcnRpZXMgRWxlbWVudCBwcm9wZXJ0aWVzIHRvIGJlIGFwcGxpZWQuXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmNyZWF0ZUVsID0gZnVuY3Rpb24odGFnTmFtZSwgcHJvcGVydGllcyl7XG4gIHZhciBlbDtcblxuICB0YWdOYW1lID0gdGFnTmFtZSB8fCAnZGl2JztcbiAgcHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG5cbiAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZ05hbWUpO1xuXG4gIHZqcy5vYmouZWFjaChwcm9wZXJ0aWVzLCBmdW5jdGlvbihwcm9wTmFtZSwgdmFsKXtcbiAgICAvLyBOb3QgcmVtZW1iZXJpbmcgd2h5IHdlIHdlcmUgY2hlY2tpbmcgZm9yIGRhc2hcbiAgICAvLyBidXQgdXNpbmcgc2V0QXR0cmlidXRlIG1lYW5zIHlvdSBoYXZlIHRvIHVzZSBnZXRBdHRyaWJ1dGVcblxuICAgIC8vIFRoZSBjaGVjayBmb3IgZGFzaCBjaGVja3MgZm9yIHRoZSBhcmlhLSogYXR0cmlidXRlcywgbGlrZSBhcmlhLWxhYmVsLCBhcmlhLXZhbHVlbWluLlxuICAgIC8vIFRoZSBhZGRpdGlvbmFsIGNoZWNrIGZvciBcInJvbGVcIiBpcyBiZWNhdXNlIHRoZSBkZWZhdWx0IG1ldGhvZCBmb3IgYWRkaW5nIGF0dHJpYnV0ZXMgZG9lcyBub3RcbiAgICAvLyBhZGQgdGhlIGF0dHJpYnV0ZSBcInJvbGVcIi4gTXkgZ3Vlc3MgaXMgYmVjYXVzZSBpdCdzIG5vdCBhIHZhbGlkIGF0dHJpYnV0ZSBpbiBzb21lIG5hbWVzcGFjZXMsIGFsdGhvdWdoXG4gICAgLy8gYnJvd3NlcnMgaGFuZGxlIHRoZSBhdHRyaWJ1dGUganVzdCBmaW5lLiBUaGUgVzNDIGFsbG93cyBmb3IgYXJpYS0qIGF0dHJpYnV0ZXMgdG8gYmUgdXNlZCBpbiBwcmUtSFRNTDUgZG9jcy5cbiAgICAvLyBodHRwOi8vd3d3LnczLm9yZy9UUi93YWktYXJpYS1wcmltZXIvI2FyaWFodG1sLiBVc2luZyBzZXRBdHRyaWJ1dGUgZ2V0cyBhcm91bmQgdGhpcyBwcm9ibGVtLlxuICAgIGlmIChwcm9wTmFtZS5pbmRleE9mKCdhcmlhLScpICE9PSAtMSB8fCBwcm9wTmFtZSA9PSAncm9sZScpIHtcbiAgICAgZWwuc2V0QXR0cmlidXRlKHByb3BOYW1lLCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgIGVsW3Byb3BOYW1lXSA9IHZhbDtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBlbDtcbn07XG5cbi8qKlxuICogVXBwZXJjYXNlIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmdcbiAqIEBwYXJhbSAge1N0cmluZ30gc3RyaW5nIFN0cmluZyB0byBiZSB1cHBlcmNhc2VkXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuY2FwaXRhbGl6ZSA9IGZ1bmN0aW9uKHN0cmluZyl7XG4gIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG59O1xuXG4vKipcbiAqIE9iamVjdCBmdW5jdGlvbnMgY29udGFpbmVyXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLm9iaiA9IHt9O1xuXG4vKipcbiAqIE9iamVjdC5jcmVhdGUgc2hpbSBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZVxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvT2JqZWN0L2NyZWF0ZVxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7T2JqZWN0fSAgIG9iaiBPYmplY3QgdG8gdXNlIGFzIHByb3RvdHlwZVxuICogQHByaXZhdGVcbiAqL1xudmpzLm9iai5jcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uKG9iail7XG4gIC8vQ3JlYXRlIGEgbmV3IGZ1bmN0aW9uIGNhbGxlZCAnRicgd2hpY2ggaXMganVzdCBhbiBlbXB0eSBvYmplY3QuXG4gIGZ1bmN0aW9uIEYoKSB7fVxuXG4gIC8vdGhlIHByb3RvdHlwZSBvZiB0aGUgJ0YnIGZ1bmN0aW9uIHNob3VsZCBwb2ludCB0byB0aGVcbiAgLy9wYXJhbWV0ZXIgb2YgdGhlIGFub255bW91cyBmdW5jdGlvbi5cbiAgRi5wcm90b3R5cGUgPSBvYmo7XG5cbiAgLy9jcmVhdGUgYSBuZXcgY29uc3RydWN0b3IgZnVuY3Rpb24gYmFzZWQgb2ZmIG9mIHRoZSAnRicgZnVuY3Rpb24uXG4gIHJldHVybiBuZXcgRigpO1xufTtcblxuLyoqXG4gKiBMb29wIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBpbiBhbiBvYmplY3QgYW5kIGNhbGwgYSBmdW5jdGlvblxuICogd2hvc2UgYXJndW1lbnRzIGFyZSAoa2V5LHZhbHVlKVxuICogQHBhcmFtICB7T2JqZWN0fSAgIG9iaiBPYmplY3Qgb2YgcHJvcGVydGllc1xuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICBGdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gZWFjaCBwcm9wZXJ0eS5cbiAqIEB0aGlzIHsqfVxuICogQHByaXZhdGVcbiAqL1xudmpzLm9iai5lYWNoID0gZnVuY3Rpb24ob2JqLCBmbiwgY29udGV4dCl7XG4gIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICBpZiAoaGFzT3duUHJvcC5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgZm4uY2FsbChjb250ZXh0IHx8IHRoaXMsIGtleSwgb2JqW2tleV0pO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBNZXJnZSB0d28gb2JqZWN0cyB0b2dldGhlciBhbmQgcmV0dXJuIHRoZSBvcmlnaW5hbC5cbiAqIEBwYXJhbSAge09iamVjdH0gb2JqMVxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoyXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMub2JqLm1lcmdlID0gZnVuY3Rpb24ob2JqMSwgb2JqMil7XG4gIGlmICghb2JqMikgeyByZXR1cm4gb2JqMTsgfVxuICBmb3IgKHZhciBrZXkgaW4gb2JqMil7XG4gICAgaWYgKGhhc093blByb3AuY2FsbChvYmoyLCBrZXkpKSB7XG4gICAgICBvYmoxW2tleV0gPSBvYmoyW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmoxO1xufTtcblxuLyoqXG4gKiBNZXJnZSB0d28gb2JqZWN0cywgYW5kIG1lcmdlIGFueSBwcm9wZXJ0aWVzIHRoYXQgYXJlIG9iamVjdHNcbiAqIGluc3RlYWQgb2YganVzdCBvdmVyd3JpdGluZyBvbmUuIFVzZXMgdG8gbWVyZ2Ugb3B0aW9ucyBoYXNoZXNcbiAqIHdoZXJlIGRlZXBlciBkZWZhdWx0IHNldHRpbmdzIGFyZSBpbXBvcnRhbnQuXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG92ZXJyaWRlXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajIgT3ZlcnJpZGluZyBvYmplY3RcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICBOZXcgb2JqZWN0LiBPYmoxIGFuZCBPYmoyIHdpbGwgYmUgdW50b3VjaGVkLlxuICogQHByaXZhdGVcbiAqL1xudmpzLm9iai5kZWVwTWVyZ2UgPSBmdW5jdGlvbihvYmoxLCBvYmoyKXtcbiAgdmFyIGtleSwgdmFsMSwgdmFsMjtcblxuICAvLyBtYWtlIGEgY29weSBvZiBvYmoxIHNvIHdlJ3JlIG5vdCBvdmV3cml0aW5nIG9yaWdpbmFsIHZhbHVlcy5cbiAgLy8gbGlrZSBwcm90b3R5cGUub3B0aW9uc18gYW5kIGFsbCBzdWIgb3B0aW9ucyBvYmplY3RzXG4gIG9iajEgPSB2anMub2JqLmNvcHkob2JqMSk7XG5cbiAgZm9yIChrZXkgaW4gb2JqMil7XG4gICAgaWYgKGhhc093blByb3AuY2FsbChvYmoyLCBrZXkpKSB7XG4gICAgICB2YWwxID0gb2JqMVtrZXldO1xuICAgICAgdmFsMiA9IG9iajJba2V5XTtcblxuICAgICAgLy8gQ2hlY2sgaWYgYm90aCBwcm9wZXJ0aWVzIGFyZSBwdXJlIG9iamVjdHMgYW5kIGRvIGEgZGVlcCBtZXJnZSBpZiBzb1xuICAgICAgaWYgKHZqcy5vYmouaXNQbGFpbih2YWwxKSAmJiB2anMub2JqLmlzUGxhaW4odmFsMikpIHtcbiAgICAgICAgb2JqMVtrZXldID0gdmpzLm9iai5kZWVwTWVyZ2UodmFsMSwgdmFsMik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmoxW2tleV0gPSBvYmoyW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmoxO1xufTtcblxuLyoqXG4gKiBNYWtlIGEgY29weSBvZiB0aGUgc3VwcGxpZWQgb2JqZWN0XG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iaiBPYmplY3QgdG8gY29weVxuICogQHJldHVybiB7T2JqZWN0fSAgICAgQ29weSBvZiBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vYmouY29weSA9IGZ1bmN0aW9uKG9iail7XG4gIHJldHVybiB2anMub2JqLm1lcmdlKHt9LCBvYmopO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgcGxhaW4sIGFuZCBub3QgYSBkb20gbm9kZSBvciBhbnkgb2JqZWN0IHN1Yi1pbnN0YW5jZVxuICogQHBhcmFtICB7T2JqZWN0fSBvYmogT2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtCb29sZWFufSAgICAgVHJ1ZSBpZiBwbGFpbiwgZmFsc2Ugb3RoZXJ3aXNlXG4gKiBAcHJpdmF0ZVxuICovXG52anMub2JqLmlzUGxhaW4gPSBmdW5jdGlvbihvYmope1xuICByZXR1cm4gISFvYmpcbiAgICAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0J1xuICAgICYmIG9iai50b1N0cmluZygpID09PSAnW29iamVjdCBPYmplY3RdJ1xuICAgICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0O1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgQXJyYXlcbiogIFNpbmNlIGluc3RhbmNlb2YgQXJyYXkgd2lsbCBub3Qgd29yayBvbiBhcnJheXMgY3JlYXRlZCBpbiBhbm90aGVyIGZyYW1lIHdlIG5lZWQgdG8gdXNlIEFycmF5LmlzQXJyYXksIGJ1dCBzaW5jZSBJRTggZG9lcyBub3Qgc3VwcG9ydCBBcnJheS5pc0FycmF5IHdlIG5lZWQgdGhpcyBzaGltXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iaiBPYmplY3QgdG8gY2hlY2tcbiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgICBUcnVlIGlmIHBsYWluLCBmYWxzZSBvdGhlcndpc2VcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vYmouaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24oYXJyKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJyKSA9PT0gJ1tvYmplY3QgQXJyYXldJztcbn07XG5cbi8qKlxuICogQ2hlY2sgdG8gc2VlIHdoZXRoZXIgdGhlIGlucHV0IGlzIE5hTiBvciBub3QuXG4gKiBOYU4gaXMgdGhlIG9ubHkgSmF2YVNjcmlwdCBjb25zdHJ1Y3QgdGhhdCBpc24ndCBlcXVhbCB0byBpdHNlbGZcbiAqIEBwYXJhbSB7TnVtYmVyfSBudW0gTnVtYmVyIHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIE5hTiwgZmFsc2Ugb3RoZXJ3aXNlXG4gKiBAcHJpdmF0ZVxuICovXG52anMuaXNOYU4gPSBmdW5jdGlvbihudW0pIHtcbiAgcmV0dXJuIG51bSAhPT0gbnVtO1xufTtcblxuLyoqXG4gKiBCaW5kIChhLmsuYSBwcm94eSBvciBDb250ZXh0KS4gQSBzaW1wbGUgbWV0aG9kIGZvciBjaGFuZ2luZyB0aGUgY29udGV4dCBvZiBhIGZ1bmN0aW9uXG4gICBJdCBhbHNvIHN0b3JlcyBhIHVuaXF1ZSBpZCBvbiB0aGUgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGVhc2lseSByZW1vdmVkIGZyb20gZXZlbnRzXG4gKiBAcGFyYW0gIHsqfSAgIGNvbnRleHQgVGhlIG9iamVjdCB0byBiaW5kIGFzIHNjb3BlXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gICAgICBUaGUgZnVuY3Rpb24gdG8gYmUgYm91bmQgdG8gYSBzY29wZVxuICogQHBhcmFtICB7TnVtYmVyPX0gICB1aWQgICAgIEFuIG9wdGlvbmFsIHVuaXF1ZSBJRCBmb3IgdGhlIGZ1bmN0aW9uIHRvIGJlIHNldFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiBAcHJpdmF0ZVxuICovXG52anMuYmluZCA9IGZ1bmN0aW9uKGNvbnRleHQsIGZuLCB1aWQpIHtcbiAgLy8gTWFrZSBzdXJlIHRoZSBmdW5jdGlvbiBoYXMgYSB1bmlxdWUgSURcbiAgaWYgKCFmbi5ndWlkKSB7IGZuLmd1aWQgPSB2anMuZ3VpZCsrOyB9XG5cbiAgLy8gQ3JlYXRlIHRoZSBuZXcgZnVuY3Rpb24gdGhhdCBjaGFuZ2VzIHRoZSBjb250ZXh0XG4gIHZhciByZXQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZm4uYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBBbGxvdyBmb3IgdGhlIGFiaWxpdHkgdG8gaW5kaXZpZHVhbGl6ZSB0aGlzIGZ1bmN0aW9uXG4gIC8vIE5lZWRlZCBpbiB0aGUgY2FzZSB3aGVyZSBtdWx0aXBsZSBvYmplY3RzIG1pZ2h0IHNoYXJlIHRoZSBzYW1lIHByb3RvdHlwZVxuICAvLyBJRiBib3RoIGl0ZW1zIGFkZCBhbiBldmVudCBsaXN0ZW5lciB3aXRoIHRoZSBzYW1lIGZ1bmN0aW9uLCB0aGVuIHlvdSB0cnkgdG8gcmVtb3ZlIGp1c3Qgb25lXG4gIC8vIGl0IHdpbGwgcmVtb3ZlIGJvdGggYmVjYXVzZSB0aGV5IGJvdGggaGF2ZSB0aGUgc2FtZSBndWlkLlxuICAvLyB3aGVuIHVzaW5nIHRoaXMsIHlvdSBuZWVkIHRvIHVzZSB0aGUgYmluZCBtZXRob2Qgd2hlbiB5b3UgcmVtb3ZlIHRoZSBsaXN0ZW5lciBhcyB3ZWxsLlxuICAvLyBjdXJyZW50bHkgdXNlZCBpbiB0ZXh0IHRyYWNrc1xuICByZXQuZ3VpZCA9ICh1aWQpID8gdWlkICsgJ18nICsgZm4uZ3VpZCA6IGZuLmd1aWQ7XG5cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogRWxlbWVudCBEYXRhIFN0b3JlLiBBbGxvd3MgZm9yIGJpbmRpbmcgZGF0YSB0byBhbiBlbGVtZW50IHdpdGhvdXQgcHV0dGluZyBpdCBkaXJlY3RseSBvbiB0aGUgZWxlbWVudC5cbiAqIEV4LiBFdmVudCBsaXN0bmVyZXMgYXJlIHN0b3JlZCBoZXJlLlxuICogKGFsc28gZnJvbSBqc25pbmphLmNvbSwgc2xpZ2h0bHkgbW9kaWZpZWQgYW5kIHVwZGF0ZWQgZm9yIGNsb3N1cmUgY29tcGlsZXIpXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmNhY2hlID0ge307XG5cbi8qKlxuICogVW5pcXVlIElEIGZvciBhbiBlbGVtZW50IG9yIGZ1bmN0aW9uXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQHByaXZhdGVcbiAqL1xudmpzLmd1aWQgPSAxO1xuXG4vKipcbiAqIFVuaXF1ZSBhdHRyaWJ1dGUgbmFtZSB0byBzdG9yZSBhbiBlbGVtZW50J3MgZ3VpZCBpblxuICogQHR5cGUge1N0cmluZ31cbiAqIEBjb25zdGFudFxuICogQHByaXZhdGVcbiAqL1xudmpzLmV4cGFuZG8gPSAndmRhdGEnICsgKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjYWNoZSBvYmplY3Qgd2hlcmUgZGF0YSBmb3IgYW4gZWxlbWVudCBpcyBzdG9yZWRcbiAqIEBwYXJhbSAge0VsZW1lbnR9IGVsIEVsZW1lbnQgdG8gc3RvcmUgZGF0YSBmb3IuXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuZ2V0RGF0YSA9IGZ1bmN0aW9uKGVsKXtcbiAgdmFyIGlkID0gZWxbdmpzLmV4cGFuZG9dO1xuICBpZiAoIWlkKSB7XG4gICAgaWQgPSBlbFt2anMuZXhwYW5kb10gPSB2anMuZ3VpZCsrO1xuICAgIHZqcy5jYWNoZVtpZF0gPSB7fTtcbiAgfVxuICByZXR1cm4gdmpzLmNhY2hlW2lkXTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2FjaGUgb2JqZWN0IHdoZXJlIGRhdGEgZm9yIGFuIGVsZW1lbnQgaXMgc3RvcmVkXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbCBFbGVtZW50IHRvIHN0b3JlIGRhdGEgZm9yLlxuICogQHJldHVybiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmhhc0RhdGEgPSBmdW5jdGlvbihlbCl7XG4gIHZhciBpZCA9IGVsW3Zqcy5leHBhbmRvXTtcbiAgcmV0dXJuICEoIWlkIHx8IHZqcy5pc0VtcHR5KHZqcy5jYWNoZVtpZF0pKTtcbn07XG5cbi8qKlxuICogRGVsZXRlIGRhdGEgZm9yIHRoZSBlbGVtZW50IGZyb20gdGhlIGNhY2hlIGFuZCB0aGUgZ3VpZCBhdHRyIGZyb20gZ2V0RWxlbWVudEJ5SWRcbiAqIEBwYXJhbSAge0VsZW1lbnR9IGVsIFJlbW92ZSBkYXRhIGZvciBhbiBlbGVtZW50XG4gKiBAcHJpdmF0ZVxuICovXG52anMucmVtb3ZlRGF0YSA9IGZ1bmN0aW9uKGVsKXtcbiAgdmFyIGlkID0gZWxbdmpzLmV4cGFuZG9dO1xuICBpZiAoIWlkKSB7IHJldHVybjsgfVxuICAvLyBSZW1vdmUgYWxsIHN0b3JlZCBkYXRhXG4gIC8vIENoYW5nZWQgdG8gPSBudWxsXG4gIC8vIGh0dHA6Ly9jb2Rpbmcuc21hc2hpbmdtYWdhemluZS5jb20vMjAxMi8xMS8wNS93cml0aW5nLWZhc3QtbWVtb3J5LWVmZmljaWVudC1qYXZhc2NyaXB0L1xuICAvLyB2anMuY2FjaGVbaWRdID0gbnVsbDtcbiAgZGVsZXRlIHZqcy5jYWNoZVtpZF07XG5cbiAgLy8gUmVtb3ZlIHRoZSBleHBhbmRvIHByb3BlcnR5IGZyb20gdGhlIERPTSBub2RlXG4gIHRyeSB7XG4gICAgZGVsZXRlIGVsW3Zqcy5leHBhbmRvXTtcbiAgfSBjYXRjaChlKSB7XG4gICAgaWYgKGVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKHZqcy5leHBhbmRvKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSUUgZG9lc24ndCBhcHBlYXIgdG8gc3VwcG9ydCByZW1vdmVBdHRyaWJ1dGUgb24gdGhlIGRvY3VtZW50IGVsZW1lbnRcbiAgICAgIGVsW3Zqcy5leHBhbmRvXSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFuIG9iamVjdCBpcyBlbXB0eVxuICogQHBhcmFtICB7T2JqZWN0fSAgb2JqIFRoZSBvYmplY3QgdG8gY2hlY2sgZm9yIGVtcHRpbmVzc1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gIGZvciAodmFyIHByb3AgaW4gb2JqKSB7XG4gICAgLy8gSW5sdWRlIG51bGwgcHJvcGVydGllcyBhcyBlbXB0eS5cbiAgICBpZiAob2JqW3Byb3BdICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuLyoqXG4gKiBBZGQgYSBDU1MgY2xhc3MgbmFtZSB0byBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnQgICAgRWxlbWVudCB0byBhZGQgY2xhc3MgbmFtZSB0b1xuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzVG9BZGQgQ2xhc3NuYW1lIHRvIGFkZFxuICogQHByaXZhdGVcbiAqL1xudmpzLmFkZENsYXNzID0gZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NUb0FkZCl7XG4gIGlmICgoJyAnK2VsZW1lbnQuY2xhc3NOYW1lKycgJykuaW5kZXhPZignICcrY2xhc3NUb0FkZCsnICcpID09IC0xKSB7XG4gICAgZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZSA9PT0gJycgPyBjbGFzc1RvQWRkIDogZWxlbWVudC5jbGFzc05hbWUgKyAnICcgKyBjbGFzc1RvQWRkO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIENTUyBjbGFzcyBuYW1lIGZyb20gYW4gZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50ICAgIEVsZW1lbnQgdG8gcmVtb3ZlIGZyb20gY2xhc3MgbmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzVG9BZGQgQ2xhc3NuYW1lIHRvIHJlbW92ZVxuICogQHByaXZhdGVcbiAqL1xudmpzLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24oZWxlbWVudCwgY2xhc3NUb1JlbW92ZSl7XG4gIHZhciBjbGFzc05hbWVzLCBpO1xuXG4gIGlmIChlbGVtZW50LmNsYXNzTmFtZS5pbmRleE9mKGNsYXNzVG9SZW1vdmUpID09IC0xKSB7IHJldHVybjsgfVxuXG4gIGNsYXNzTmFtZXMgPSBlbGVtZW50LmNsYXNzTmFtZS5zcGxpdCgnICcpO1xuXG4gIC8vIG5vIGFyci5pbmRleE9mIGluIGllOCwgYW5kIHdlIGRvbid0IHdhbnQgdG8gYWRkIGEgYmlnIHNoaW1cbiAgZm9yIChpID0gY2xhc3NOYW1lcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmIChjbGFzc05hbWVzW2ldID09PSBjbGFzc1RvUmVtb3ZlKSB7XG4gICAgICBjbGFzc05hbWVzLnNwbGljZShpLDEpO1xuICAgIH1cbiAgfVxuXG4gIGVsZW1lbnQuY2xhc3NOYW1lID0gY2xhc3NOYW1lcy5qb2luKCcgJyk7XG59O1xuXG4vKipcbiAqIEVsZW1lbnQgZm9yIHRlc3RpbmcgYnJvd3NlciBIVE1MNSB2aWRlbyBjYXBhYmlsaXRpZXNcbiAqIEB0eXBlIHtFbGVtZW50fVxuICogQGNvbnN0YW50XG4gKiBAcHJpdmF0ZVxuICovXG52anMuVEVTVF9WSUQgPSB2anMuY3JlYXRlRWwoJ3ZpZGVvJyk7XG5cbi8qKlxuICogVXNlcmFnZW50IGZvciBicm93c2VyIHRlc3RpbmcuXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQGNvbnN0YW50XG4gKiBAcHJpdmF0ZVxuICovXG52anMuVVNFUl9BR0VOVCA9IG5hdmlnYXRvci51c2VyQWdlbnQ7XG5cbi8qKlxuICogRGV2aWNlIGlzIGFuIGlQaG9uZVxuICogQHR5cGUge0Jvb2xlYW59XG4gKiBAY29uc3RhbnRcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5JU19JUEhPTkUgPSAoL2lQaG9uZS9pKS50ZXN0KHZqcy5VU0VSX0FHRU5UKTtcbnZqcy5JU19JUEFEID0gKC9pUGFkL2kpLnRlc3QodmpzLlVTRVJfQUdFTlQpO1xudmpzLklTX0lQT0QgPSAoL2lQb2QvaSkudGVzdCh2anMuVVNFUl9BR0VOVCk7XG52anMuSVNfSU9TID0gdmpzLklTX0lQSE9ORSB8fCB2anMuSVNfSVBBRCB8fCB2anMuSVNfSVBPRDtcblxudmpzLklPU19WRVJTSU9OID0gKGZ1bmN0aW9uKCl7XG4gIHZhciBtYXRjaCA9IHZqcy5VU0VSX0FHRU5ULm1hdGNoKC9PUyAoXFxkKylfL2kpO1xuICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHsgcmV0dXJuIG1hdGNoWzFdOyB9XG59KSgpO1xuXG52anMuSVNfQU5EUk9JRCA9ICgvQW5kcm9pZC9pKS50ZXN0KHZqcy5VU0VSX0FHRU5UKTtcbnZqcy5BTkRST0lEX1ZFUlNJT04gPSAoZnVuY3Rpb24oKSB7XG4gIC8vIFRoaXMgbWF0Y2hlcyBBbmRyb2lkIE1ham9yLk1pbm9yLlBhdGNoIHZlcnNpb25zXG4gIC8vIEFORFJPSURfVkVSU0lPTiBpcyBNYWpvci5NaW5vciBhcyBhIE51bWJlciwgaWYgTWlub3IgaXNuJ3QgYXZhaWxhYmxlLCB0aGVuIG9ubHkgTWFqb3IgaXMgcmV0dXJuZWRcbiAgdmFyIG1hdGNoID0gdmpzLlVTRVJfQUdFTlQubWF0Y2goL0FuZHJvaWQgKFxcZCspKD86XFwuKFxcZCspKT8oPzpcXC4oXFxkKykpKi9pKSxcbiAgICBtYWpvcixcbiAgICBtaW5vcjtcblxuICBpZiAoIW1hdGNoKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBtYWpvciA9IG1hdGNoWzFdICYmIHBhcnNlRmxvYXQobWF0Y2hbMV0pO1xuICBtaW5vciA9IG1hdGNoWzJdICYmIHBhcnNlRmxvYXQobWF0Y2hbMl0pO1xuXG4gIGlmIChtYWpvciAmJiBtaW5vcikge1xuICAgIHJldHVybiBwYXJzZUZsb2F0KG1hdGNoWzFdICsgJy4nICsgbWF0Y2hbMl0pO1xuICB9IGVsc2UgaWYgKG1ham9yKSB7XG4gICAgcmV0dXJuIG1ham9yO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59KSgpO1xuLy8gT2xkIEFuZHJvaWQgaXMgZGVmaW5lZCBhcyBWZXJzaW9uIG9sZGVyIHRoYW4gMi4zLCBhbmQgcmVxdWlyaW5nIGEgd2Via2l0IHZlcnNpb24gb2YgdGhlIGFuZHJvaWQgYnJvd3NlclxudmpzLklTX09MRF9BTkRST0lEID0gdmpzLklTX0FORFJPSUQgJiYgKC93ZWJraXQvaSkudGVzdCh2anMuVVNFUl9BR0VOVCkgJiYgdmpzLkFORFJPSURfVkVSU0lPTiA8IDIuMztcblxudmpzLklTX0ZJUkVGT1ggPSAoL0ZpcmVmb3gvaSkudGVzdCh2anMuVVNFUl9BR0VOVCk7XG52anMuSVNfQ0hST01FID0gKC9DaHJvbWUvaSkudGVzdCh2anMuVVNFUl9BR0VOVCk7XG5cbnZqcy5UT1VDSF9FTkFCTEVEID0gISEoKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykgfHwgd2luZG93LkRvY3VtZW50VG91Y2ggJiYgZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCk7XG5cbi8qKlxuICogQXBwbHkgYXR0cmlidXRlcyB0byBhbiBIVE1MIGVsZW1lbnQuXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbCAgICAgICAgIFRhcmdldCBlbGVtZW50LlxuICogQHBhcmFtICB7T2JqZWN0PX0gYXR0cmlidXRlcyBFbGVtZW50IGF0dHJpYnV0ZXMgdG8gYmUgYXBwbGllZC5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5zZXRFbGVtZW50QXR0cmlidXRlcyA9IGZ1bmN0aW9uKGVsLCBhdHRyaWJ1dGVzKXtcbiAgdmpzLm9iai5lYWNoKGF0dHJpYnV0ZXMsIGZ1bmN0aW9uKGF0dHJOYW1lLCBhdHRyVmFsdWUpIHtcbiAgICBpZiAoYXR0clZhbHVlID09PSBudWxsIHx8IHR5cGVvZiBhdHRyVmFsdWUgPT09ICd1bmRlZmluZWQnIHx8IGF0dHJWYWx1ZSA9PT0gZmFsc2UpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyTmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyTmFtZSwgKGF0dHJWYWx1ZSA9PT0gdHJ1ZSA/ICcnIDogYXR0clZhbHVlKSk7XG4gICAgfVxuICB9KTtcbn07XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyBhdHRyaWJ1dGUgdmFsdWVzLCBhcyBkZWZpbmVkIG9uIHRoZSBIVE1MIHRhZ1xuICogQXR0cmlidXRzIGFyZSBub3QgdGhlIHNhbWUgYXMgcHJvcGVydGllcy4gVGhleSdyZSBkZWZpbmVkIG9uIHRoZSB0YWdcbiAqIG9yIHdpdGggc2V0QXR0cmlidXRlICh3aGljaCBzaG91bGRuJ3QgYmUgdXNlZCB3aXRoIEhUTUwpXG4gKiBUaGlzIHdpbGwgcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIGJvb2xlYW4gYXR0cmlidXRlcy5cbiAqIEBwYXJhbSAge0VsZW1lbnR9IHRhZyBFbGVtZW50IGZyb20gd2hpY2ggdG8gZ2V0IHRhZyBhdHRyaWJ1dGVzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuZ2V0RWxlbWVudEF0dHJpYnV0ZXMgPSBmdW5jdGlvbih0YWcpe1xuICB2YXIgb2JqLCBrbm93bkJvb2xlYW5zLCBhdHRycywgYXR0ck5hbWUsIGF0dHJWYWw7XG5cbiAgb2JqID0ge307XG5cbiAgLy8ga25vd24gYm9vbGVhbiBhdHRyaWJ1dGVzXG4gIC8vIHdlIGNhbiBjaGVjayBmb3IgbWF0Y2hpbmcgYm9vbGVhbiBwcm9wZXJ0aWVzLCBidXQgb2xkZXIgYnJvd3NlcnNcbiAgLy8gd29uJ3Qga25vdyBhYm91dCBIVE1MNSBib29sZWFuIGF0dHJpYnV0ZXMgdGhhdCB3ZSBzdGlsbCByZWFkIGZyb21cbiAga25vd25Cb29sZWFucyA9ICcsJysnYXV0b3BsYXksY29udHJvbHMsbG9vcCxtdXRlZCxkZWZhdWx0JysnLCc7XG5cbiAgaWYgKHRhZyAmJiB0YWcuYXR0cmlidXRlcyAmJiB0YWcuYXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XG4gICAgYXR0cnMgPSB0YWcuYXR0cmlidXRlcztcblxuICAgIGZvciAodmFyIGkgPSBhdHRycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgYXR0ck5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgYXR0clZhbCA9IGF0dHJzW2ldLnZhbHVlO1xuXG4gICAgICAvLyBjaGVjayBmb3Iga25vd24gYm9vbGVhbnNcbiAgICAgIC8vIHRoZSBtYXRjaGluZyBlbGVtZW50IHByb3BlcnR5IHdpbGwgcmV0dXJuIGEgdmFsdWUgZm9yIHR5cGVvZlxuICAgICAgaWYgKHR5cGVvZiB0YWdbYXR0ck5hbWVdID09PSAnYm9vbGVhbicgfHwga25vd25Cb29sZWFucy5pbmRleE9mKCcsJythdHRyTmFtZSsnLCcpICE9PSAtMSkge1xuICAgICAgICAvLyB0aGUgdmFsdWUgb2YgYW4gaW5jbHVkZWQgYm9vbGVhbiBhdHRyaWJ1dGUgaXMgdHlwaWNhbGx5IGFuIGVtcHR5XG4gICAgICAgIC8vIHN0cmluZyAoJycpIHdoaWNoIHdvdWxkIGVxdWFsIGZhbHNlIGlmIHdlIGp1c3QgY2hlY2sgZm9yIGEgZmFsc2UgdmFsdWUuXG4gICAgICAgIC8vIHdlIGFsc28gZG9uJ3Qgd2FudCBzdXBwb3J0IGJhZCBjb2RlIGxpa2UgYXV0b3BsYXk9J2ZhbHNlJ1xuICAgICAgICBhdHRyVmFsID0gKGF0dHJWYWwgIT09IG51bGwpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICBvYmpbYXR0ck5hbWVdID0gYXR0clZhbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvbXB1dGVkIHN0eWxlIHZhbHVlIGZvciBhbiBlbGVtZW50XG4gKiBGcm9tIGh0dHA6Ly9yb2JlcnRueW1hbi5jb20vMjAwNi8wNC8yNC9nZXQtdGhlLXJlbmRlcmVkLXN0eWxlLW9mLWFuLWVsZW1lbnQvXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbCAgICAgICAgRWxlbWVudCB0byBnZXQgc3R5bGUgdmFsdWUgZm9yXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHN0ckNzc1J1bGUgU3R5bGUgbmFtZVxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgIFN0eWxlIHZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG52anMuZ2V0Q29tcHV0ZWREaW1lbnNpb24gPSBmdW5jdGlvbihlbCwgc3RyQ3NzUnVsZSl7XG4gIHZhciBzdHJWYWx1ZSA9ICcnO1xuICBpZihkb2N1bWVudC5kZWZhdWx0VmlldyAmJiBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKXtcbiAgICBzdHJWYWx1ZSA9IGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoZWwsICcnKS5nZXRQcm9wZXJ0eVZhbHVlKHN0ckNzc1J1bGUpO1xuXG4gIH0gZWxzZSBpZihlbC5jdXJyZW50U3R5bGUpe1xuICAgIC8vIElFOCBXaWR0aC9IZWlnaHQgc3VwcG9ydFxuICAgIHN0clZhbHVlID0gZWxbJ2NsaWVudCcrc3RyQ3NzUnVsZS5zdWJzdHIoMCwxKS50b1VwcGVyQ2FzZSgpICsgc3RyQ3NzUnVsZS5zdWJzdHIoMSldICsgJ3B4JztcbiAgfVxuICByZXR1cm4gc3RyVmFsdWU7XG59O1xuXG4vKipcbiAqIEluc2VydCBhbiBlbGVtZW50IGFzIHRoZSBmaXJzdCBjaGlsZCBub2RlIG9mIGFub3RoZXJcbiAqIEBwYXJhbSAge0VsZW1lbnR9IGNoaWxkICAgRWxlbWVudCB0byBpbnNlcnRcbiAqIEBwYXJhbSAge1t0eXBlXX0gcGFyZW50IEVsZW1lbnQgdG8gaW5zZXJ0IGNoaWxkIGludG9cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5pbnNlcnRGaXJzdCA9IGZ1bmN0aW9uKGNoaWxkLCBwYXJlbnQpe1xuICBpZiAocGFyZW50LmZpcnN0Q2hpbGQpIHtcbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNoaWxkLCBwYXJlbnQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgcGFyZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYmplY3QgdG8gaG9sZCBicm93c2VyIHN1cHBvcnQgaW5mb3JtYXRpb25cbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuYnJvd3NlciA9IHt9O1xuXG4vKipcbiAqIFNob3J0aGFuZCBmb3IgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoKVxuICogQWxzbyBhbGxvd3MgZm9yIENTUyAoalF1ZXJ5KSBJRCBzeW50YXguIEJ1dCBub3RoaW5nIG90aGVyIHRoYW4gSURzLlxuICogQHBhcmFtICB7U3RyaW5nfSBpZCAgRWxlbWVudCBJRFxuICogQHJldHVybiB7RWxlbWVudH0gICAgRWxlbWVudCB3aXRoIHN1cHBsaWVkIElEXG4gKiBAcHJpdmF0ZVxuICovXG52anMuZWwgPSBmdW5jdGlvbihpZCl7XG4gIGlmIChpZC5pbmRleE9mKCcjJykgPT09IDApIHtcbiAgICBpZCA9IGlkLnNsaWNlKDEpO1xuICB9XG5cbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcbn07XG5cbi8qKlxuICogRm9ybWF0IHNlY29uZHMgYXMgYSB0aW1lIHN0cmluZywgSDpNTTpTUyBvciBNOlNTXG4gKiBTdXBwbHlpbmcgYSBndWlkZSAoaW4gc2Vjb25kcykgd2lsbCBmb3JjZSBhIG51bWJlciBvZiBsZWFkaW5nIHplcm9zXG4gKiB0byBjb3ZlciB0aGUgbGVuZ3RoIG9mIHRoZSBndWlkZVxuICogQHBhcmFtICB7TnVtYmVyfSBzZWNvbmRzIE51bWJlciBvZiBzZWNvbmRzIHRvIGJlIHR1cm5lZCBpbnRvIGEgc3RyaW5nXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IGd1aWRlICAgTnVtYmVyIChpbiBzZWNvbmRzKSB0byBtb2RlbCB0aGUgc3RyaW5nIGFmdGVyXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICAgICAgVGltZSBmb3JtYXR0ZWQgYXMgSDpNTTpTUyBvciBNOlNTXG4gKiBAcHJpdmF0ZVxuICovXG52anMuZm9ybWF0VGltZSA9IGZ1bmN0aW9uKHNlY29uZHMsIGd1aWRlKSB7XG4gIC8vIERlZmF1bHQgdG8gdXNpbmcgc2Vjb25kcyBhcyBndWlkZVxuICBndWlkZSA9IGd1aWRlIHx8IHNlY29uZHM7XG4gIHZhciBzID0gTWF0aC5mbG9vcihzZWNvbmRzICUgNjApLFxuICAgICAgbSA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDYwICUgNjApLFxuICAgICAgaCA9IE1hdGguZmxvb3Ioc2Vjb25kcyAvIDM2MDApLFxuICAgICAgZ20gPSBNYXRoLmZsb29yKGd1aWRlIC8gNjAgJSA2MCksXG4gICAgICBnaCA9IE1hdGguZmxvb3IoZ3VpZGUgLyAzNjAwKTtcblxuICAvLyBoYW5kbGUgaW52YWxpZCB0aW1lc1xuICBpZiAoaXNOYU4oc2Vjb25kcykgfHwgc2Vjb25kcyA9PT0gSW5maW5pdHkpIHtcbiAgICAvLyAnLScgaXMgZmFsc2UgZm9yIGFsbCByZWxhdGlvbmFsIG9wZXJhdG9ycyAoZS5nLiA8LCA+PSkgc28gdGhpcyBzZXR0aW5nXG4gICAgLy8gd2lsbCBhZGQgdGhlIG1pbmltdW0gbnVtYmVyIG9mIGZpZWxkcyBzcGVjaWZpZWQgYnkgdGhlIGd1aWRlXG4gICAgaCA9IG0gPSBzID0gJy0nO1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgd2UgbmVlZCB0byBzaG93IGhvdXJzXG4gIGggPSAoaCA+IDAgfHwgZ2ggPiAwKSA/IGggKyAnOicgOiAnJztcblxuICAvLyBJZiBob3VycyBhcmUgc2hvd2luZywgd2UgbWF5IG5lZWQgdG8gYWRkIGEgbGVhZGluZyB6ZXJvLlxuICAvLyBBbHdheXMgc2hvdyBhdCBsZWFzdCBvbmUgZGlnaXQgb2YgbWludXRlcy5cbiAgbSA9ICgoKGggfHwgZ20gPj0gMTApICYmIG0gPCAxMCkgPyAnMCcgKyBtIDogbSkgKyAnOic7XG5cbiAgLy8gQ2hlY2sgaWYgbGVhZGluZyB6ZXJvIGlzIG5lZWQgZm9yIHNlY29uZHNcbiAgcyA9IChzIDwgMTApID8gJzAnICsgcyA6IHM7XG5cbiAgcmV0dXJuIGggKyBtICsgcztcbn07XG5cbi8vIEF0dGVtcHQgdG8gYmxvY2sgdGhlIGFiaWxpdHkgdG8gc2VsZWN0IHRleHQgd2hpbGUgZHJhZ2dpbmcgY29udHJvbHNcbnZqcy5ibG9ja1RleHRTZWxlY3Rpb24gPSBmdW5jdGlvbigpe1xuICBkb2N1bWVudC5ib2R5LmZvY3VzKCk7XG4gIGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBmYWxzZTsgfTtcbn07XG4vLyBUdXJuIG9mZiB0ZXh0IHNlbGVjdGlvbiBibG9ja2luZ1xudmpzLnVuYmxvY2tUZXh0U2VsZWN0aW9uID0gZnVuY3Rpb24oKXsgZG9jdW1lbnQub25zZWxlY3RzdGFydCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07IH07XG5cbi8qKlxuICogVHJpbSB3aGl0ZXNwYWNlIGZyb20gdGhlIGVuZHMgb2YgYSBzdHJpbmcuXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gdHJpbVxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgVHJpbW1lZCBzdHJpbmdcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy50cmltID0gZnVuY3Rpb24oc3RyKXtcbiAgcmV0dXJuIChzdHIrJycpLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKTtcbn07XG5cbi8qKlxuICogU2hvdWxkIHJvdW5kIG9mZiBhIG51bWJlciB0byBhIGRlY2ltYWwgcGxhY2VcbiAqIEBwYXJhbSAge051bWJlcn0gbnVtIE51bWJlciB0byByb3VuZFxuICogQHBhcmFtICB7TnVtYmVyfSBkZWMgTnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIHRvIHJvdW5kIHRvXG4gKiBAcmV0dXJuIHtOdW1iZXJ9ICAgICBSb3VuZGVkIG51bWJlclxuICogQHByaXZhdGVcbiAqL1xudmpzLnJvdW5kID0gZnVuY3Rpb24obnVtLCBkZWMpIHtcbiAgaWYgKCFkZWMpIHsgZGVjID0gMDsgfVxuICByZXR1cm4gTWF0aC5yb3VuZChudW0qTWF0aC5wb3coMTAsZGVjKSkvTWF0aC5wb3coMTAsZGVjKTtcbn07XG5cbi8qKlxuICogU2hvdWxkIGNyZWF0ZSBhIGZha2UgVGltZVJhbmdlIG9iamVjdFxuICogTWltaWNzIGFuIEhUTUw1IHRpbWUgcmFuZ2UgaW5zdGFuY2UsIHdoaWNoIGhhcyBmdW5jdGlvbnMgdGhhdFxuICogcmV0dXJuIHRoZSBzdGFydCBhbmQgZW5kIHRpbWVzIGZvciBhIHJhbmdlXG4gKiBUaW1lUmFuZ2VzIGFyZSByZXR1cm5lZCBieSB0aGUgYnVmZmVyZWQoKSBtZXRob2RcbiAqIEBwYXJhbSAge051bWJlcn0gc3RhcnQgU3RhcnQgdGltZSBpbiBzZWNvbmRzXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IGVuZCAgIEVuZCB0aW1lIGluIHNlY29uZHNcbiAqIEByZXR1cm4ge09iamVjdH0gICAgICAgRmFrZSBUaW1lUmFuZ2Ugb2JqZWN0XG4gKiBAcHJpdmF0ZVxuICovXG52anMuY3JlYXRlVGltZVJhbmdlID0gZnVuY3Rpb24oc3RhcnQsIGVuZCl7XG4gIHJldHVybiB7XG4gICAgbGVuZ3RoOiAxLFxuICAgIHN0YXJ0OiBmdW5jdGlvbigpIHsgcmV0dXJuIHN0YXJ0OyB9LFxuICAgIGVuZDogZnVuY3Rpb24oKSB7IHJldHVybiBlbmQ7IH1cbiAgfTtcbn07XG5cbi8qKlxuICogU2ltcGxlIGh0dHAgcmVxdWVzdCBmb3IgcmV0cmlldmluZyBleHRlcm5hbCBmaWxlcyAoZS5nLiB0ZXh0IHRyYWNrcylcbiAqIEBwYXJhbSAge1N0cmluZ30gICAgdXJsICAgICAgICAgICAgIFVSTCBvZiByZXNvdXJjZVxuICogQHBhcmFtICB7RnVuY3Rpb259IG9uU3VjY2VzcyAgICAgICBTdWNjZXNzIGNhbGxiYWNrXG4gKiBAcGFyYW0gIHtGdW5jdGlvbj19IG9uRXJyb3IgICAgICAgICBFcnJvciBjYWxsYmFja1xuICogQHBhcmFtICB7Qm9vbGVhbj19ICAgd2l0aENyZWRlbnRpYWxzIEZsYWcgd2hpY2ggYWxsb3cgY3JlZGVudGlhbHNcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5nZXQgPSBmdW5jdGlvbih1cmwsIG9uU3VjY2Vzcywgb25FcnJvciwgd2l0aENyZWRlbnRpYWxzKXtcbiAgdmFyIGZpbGVVcmwsIHJlcXVlc3QsIHVybEluZm8sIHdpbkxvYywgY3Jvc3NPcmlnaW47XG5cbiAgb25FcnJvciA9IG9uRXJyb3IgfHwgZnVuY3Rpb24oKXt9O1xuXG4gIGlmICh0eXBlb2YgWE1MSHR0cFJlcXVlc3QgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gU2hpbSBYTUxIdHRwUmVxdWVzdCBmb3Igb2xkZXIgSUVzXG4gICAgd2luZG93LlhNTEh0dHBSZXF1ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdHJ5IHsgcmV0dXJuIG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuNi4wJyk7IH0gY2F0Y2ggKGUpIHt9XG4gICAgICB0cnkgeyByZXR1cm4gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUC4zLjAnKTsgfSBjYXRjaCAoZikge31cbiAgICAgIHRyeSB7IHJldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQJyk7IH0gY2F0Y2ggKGcpIHt9XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IFhNTEh0dHBSZXF1ZXN0LicpO1xuICAgIH07XG4gIH1cblxuICByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgdXJsSW5mbyA9IHZqcy5wYXJzZVVybCh1cmwpO1xuICB3aW5Mb2MgPSB3aW5kb3cubG9jYXRpb247XG4gIC8vIGNoZWNrIGlmIHVybCBpcyBmb3IgYW5vdGhlciBkb21haW4vb3JpZ2luXG4gIC8vIGllOCBkb2Vzbid0IGtub3cgbG9jYXRpb24ub3JpZ2luLCBzbyB3ZSB3b24ndCByZWx5IG9uIGl0IGhlcmVcbiAgY3Jvc3NPcmlnaW4gPSAodXJsSW5mby5wcm90b2NvbCArIHVybEluZm8uaG9zdCkgIT09ICh3aW5Mb2MucHJvdG9jb2wgKyB3aW5Mb2MuaG9zdCk7XG5cbiAgLy8gVXNlIFhEb21haW5SZXF1ZXN0IGZvciBJRSBpZiBYTUxIVFRQUmVxdWVzdDIgaXNuJ3QgYXZhaWxhYmxlXG4gIC8vICd3aXRoQ3JlZGVudGlhbHMnIGlzIG9ubHkgYXZhaWxhYmxlIGluIFhNTEhUVFBSZXF1ZXN0MlxuICAvLyBBbHNvIFhEb21haW5SZXF1ZXN0IGhhcyBhIGxvdCBvZiBnb3RjaGFzLCBzbyBvbmx5IHVzZSBpZiBjcm9zcyBkb21haW5cbiAgaWYoY3Jvc3NPcmlnaW4gJiYgd2luZG93LlhEb21haW5SZXF1ZXN0ICYmICEoJ3dpdGhDcmVkZW50aWFscycgaW4gcmVxdWVzdCkpIHtcbiAgICByZXF1ZXN0ID0gbmV3IHdpbmRvdy5YRG9tYWluUmVxdWVzdCgpO1xuICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICBvblN1Y2Nlc3MocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgIH07XG4gICAgcmVxdWVzdC5vbmVycm9yID0gb25FcnJvcjtcbiAgICAvLyB0aGVzZSBibGFuayBoYW5kbGVycyBuZWVkIHRvIGJlIHNldCB0byBmaXggaWU5IGh0dHA6Ly9jeXByZXNzbm9ydGguY29tL3Byb2dyYW1taW5nL2ludGVybmV0LWV4cGxvcmVyLWFib3J0aW5nLWFqYXgtcmVxdWVzdHMtZml4ZWQvXG4gICAgcmVxdWVzdC5vbnByb2dyZXNzID0gZnVuY3Rpb24oKSB7fTtcbiAgICByZXF1ZXN0Lm9udGltZW91dCA9IG9uRXJyb3I7XG5cbiAgLy8gWE1MSFRUUFJlcXVlc3RcbiAgfSBlbHNlIHtcbiAgICBmaWxlVXJsID0gKHVybEluZm8ucHJvdG9jb2wgPT0gJ2ZpbGU6JyB8fCB3aW5Mb2MucHJvdG9jb2wgPT0gJ2ZpbGU6Jyk7XG5cbiAgICByZXF1ZXN0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKHJlcXVlc3QucmVhZHlTdGF0ZSA9PT0gNCkge1xuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDIwMCB8fCBmaWxlVXJsICYmIHJlcXVlc3Quc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgb25TdWNjZXNzKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbkVycm9yKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBvcGVuIHRoZSBjb25uZWN0aW9uXG4gIHRyeSB7XG4gICAgLy8gVGhpcmQgYXJnIGlzIGFzeW5jLCBvciBpZ25vcmVkIGJ5IFhEb21haW5SZXF1ZXN0XG4gICAgcmVxdWVzdC5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuICAgIC8vIHdpdGhDcmVkZW50aWFscyBvbmx5IHN1cHBvcnRlZCBieSBYTUxIdHRwUmVxdWVzdDJcbiAgICBpZih3aXRoQ3JlZGVudGlhbHMpIHtcbiAgICAgIHJlcXVlc3Qud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTtcbiAgICB9XG4gIH0gY2F0Y2goZSkge1xuICAgIG9uRXJyb3IoZSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gc2VuZCB0aGUgcmVxdWVzdFxuICB0cnkge1xuICAgIHJlcXVlc3Quc2VuZCgpO1xuICB9IGNhdGNoKGUpIHtcbiAgICBvbkVycm9yKGUpO1xuICB9XG59O1xuXG4vKipcbiAqIEFkZCB0byBsb2NhbCBzdG9yYWdlIChtYXkgcmVtb3ZlYWJsZSlcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5zZXRMb2NhbFN0b3JhZ2UgPSBmdW5jdGlvbihrZXksIHZhbHVlKXtcbiAgdHJ5IHtcbiAgICAvLyBJRSB3YXMgdGhyb3dpbmcgZXJyb3JzIHJlZmVyZW5jaW5nIHRoZSB2YXIgYW55d2hlcmUgd2l0aG91dCB0aGlzXG4gICAgdmFyIGxvY2FsU3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UgfHwgZmFsc2U7XG4gICAgaWYgKCFsb2NhbFN0b3JhZ2UpIHsgcmV0dXJuOyB9XG4gICAgbG9jYWxTdG9yYWdlW2tleV0gPSB2YWx1ZTtcbiAgfSBjYXRjaChlKSB7XG4gICAgaWYgKGUuY29kZSA9PSAyMiB8fCBlLmNvZGUgPT0gMTAxNCkgeyAvLyBXZWJraXQgPT0gMjIgLyBGaXJlZm94ID09IDEwMTRcbiAgICAgIHZqcy5sb2coJ0xvY2FsU3RvcmFnZSBGdWxsIChWaWRlb0pTKScsIGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZS5jb2RlID09IDE4KSB7XG4gICAgICAgIHZqcy5sb2coJ0xvY2FsU3RvcmFnZSBub3QgYWxsb3dlZCAoVmlkZW9KUyknLCBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZqcy5sb2coJ0xvY2FsU3RvcmFnZSBFcnJvciAoVmlkZW9KUyknLCBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFib3NvbHV0ZSB2ZXJzaW9uIG9mIHJlbGF0aXZlIFVSTC4gVXNlZCB0byB0ZWxsIGZsYXNoIGNvcnJlY3QgVVJMLlxuICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NzA4MzIvZ2V0dGluZy1hbi1hYnNvbHV0ZS11cmwtZnJvbS1hLXJlbGF0aXZlLW9uZS1pZTYtaXNzdWVcbiAqIEBwYXJhbSAge1N0cmluZ30gdXJsIFVSTCB0byBtYWtlIGFic29sdXRlXG4gKiBAcmV0dXJuIHtTdHJpbmd9ICAgICBBYnNvbHV0ZSBVUkxcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5nZXRBYnNvbHV0ZVVSTCA9IGZ1bmN0aW9uKHVybCl7XG5cbiAgLy8gQ2hlY2sgaWYgYWJzb2x1dGUgVVJMXG4gIGlmICghdXJsLm1hdGNoKC9eaHR0cHM/OlxcL1xcLy8pKSB7XG4gICAgLy8gQ29udmVydCB0byBhYnNvbHV0ZSBVUkwuIEZsYXNoIGhvc3RlZCBvZmYtc2l0ZSBuZWVkcyBhbiBhYnNvbHV0ZSBVUkwuXG4gICAgdXJsID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBpbm5lckhUTUw6ICc8YSBocmVmPVwiJyt1cmwrJ1wiPng8L2E+J1xuICAgIH0pLmZpcnN0Q2hpbGQuaHJlZjtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59O1xuXG5cbi8qKlxuICogUmVzb2x2ZSBhbmQgcGFyc2UgdGhlIGVsZW1lbnRzIG9mIGEgVVJMXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVybCBUaGUgdXJsIHRvIHBhcnNlXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICBBbiBvYmplY3Qgb2YgdXJsIGRldGFpbHNcbiAqL1xudmpzLnBhcnNlVXJsID0gZnVuY3Rpb24odXJsKSB7XG4gIHZhciBkaXYsIGEsIGFkZFRvQm9keSwgcHJvcHMsIGRldGFpbHM7XG5cbiAgcHJvcHMgPSBbJ3Byb3RvY29sJywgJ2hvc3RuYW1lJywgJ3BvcnQnLCAncGF0aG5hbWUnLCAnc2VhcmNoJywgJ2hhc2gnLCAnaG9zdCddO1xuXG4gIC8vIGFkZCB0aGUgdXJsIHRvIGFuIGFuY2hvciBhbmQgbGV0IHRoZSBicm93c2VyIHBhcnNlIHRoZSBVUkxcbiAgYSA9IHZqcy5jcmVhdGVFbCgnYScsIHsgaHJlZjogdXJsIH0pO1xuXG4gIC8vIElFOCAoYW5kIDk/KSBGaXhcbiAgLy8gaWU4IGRvZXNuJ3QgcGFyc2UgdGhlIFVSTCBjb3JyZWN0bHkgdW50aWwgdGhlIGFuY2hvciBpcyBhY3R1YWxseVxuICAvLyBhZGRlZCB0byB0aGUgYm9keSwgYW5kIGFuIGlubmVySFRNTCBpcyBuZWVkZWQgdG8gdHJpZ2dlciB0aGUgcGFyc2luZ1xuICBhZGRUb0JvZHkgPSAoYS5ob3N0ID09PSAnJyAmJiBhLnByb3RvY29sICE9PSAnZmlsZTonKTtcbiAgaWYgKGFkZFRvQm9keSkge1xuICAgIGRpdiA9IHZqcy5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgZGl2LmlubmVySFRNTCA9ICc8YSBocmVmPVwiJyt1cmwrJ1wiPjwvYT4nO1xuICAgIGEgPSBkaXYuZmlyc3RDaGlsZDtcbiAgICAvLyBwcmV2ZW50IHRoZSBkaXYgZnJvbSBhZmZlY3RpbmcgbGF5b3V0XG4gICAgZGl2LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTpub25lOyBwb3NpdGlvbjphYnNvbHV0ZTsnKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRpdik7XG4gIH1cblxuICAvLyBDb3B5IHRoZSBzcGVjaWZpYyBVUkwgcHJvcGVydGllcyB0byBhIG5ldyBvYmplY3RcbiAgLy8gVGhpcyBpcyBhbHNvIG5lZWRlZCBmb3IgSUU4IGJlY2F1c2UgdGhlIGFuY2hvciBsb3NlcyBpdHNcbiAgLy8gcHJvcGVydGllcyB3aGVuIGl0J3MgcmVtb3ZlZCBmcm9tIHRoZSBkb21cbiAgZGV0YWlscyA9IHt9O1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgZGV0YWlsc1twcm9wc1tpXV0gPSBhW3Byb3BzW2ldXTtcbiAgfVxuXG4gIGlmIChhZGRUb0JvZHkpIHtcbiAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGRpdik7XG4gIH1cblxuICByZXR1cm4gZGV0YWlscztcbn07XG5cbi8qKlxuICogTG9nIG1lc3NhZ3MgdG8gdGhlIGNvbnNvbGUgYW5kIGhpc3RvcnkgYmFzZWQgb24gdGhlIHR5cGUgb2YgbWVzc2FnZVxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBtZXNzYWdlLCBvciBgbnVsbGAgZm9yIGBsb2dgXG4gKiBAcGFyYW0gIHtbdHlwZV19IGFyZ3MgVGhlIGFyZ3MgdG8gYmUgcGFzc2VkIHRvIHRoZSBsb2dcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9sb2dUeXBlKHR5cGUsIGFyZ3Mpe1xuICB2YXIgYXJnc0FycmF5LCBub29wLCBjb25zb2xlO1xuXG4gIC8vIGNvbnZlcnQgYXJncyB0byBhbiBhcnJheSB0byBnZXQgYXJyYXkgZnVuY3Rpb25zXG4gIGFyZ3NBcnJheSA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpO1xuICAvLyBpZiB0aGVyZSdzIG5vIGNvbnNvbGUgdGhlbiBkb24ndCB0cnkgdG8gb3V0cHV0IG1lc3NhZ2VzXG4gIC8vIHRoZXkgd2lsbCBzdGlsbCBiZSBzdG9yZWQgaW4gdmpzLmxvZy5oaXN0b3J5XG4gIC8vIFdhcyBzZXR0aW5nIHRoZXNlIG9uY2Ugb3V0c2lkZSBvZiB0aGlzIGZ1bmN0aW9uLCBidXQgY29udGFpbmluZyB0aGVtXG4gIC8vIGluIHRoZSBmdW5jdGlvbiBtYWtlcyBpdCBlYXNpZXIgdG8gdGVzdCBjYXNlcyB3aGVyZSBjb25zb2xlIGRvZXNuJ3QgZXhpc3RcbiAgbm9vcCA9IGZ1bmN0aW9uKCl7fTtcbiAgY29uc29sZSA9IHdpbmRvd1snY29uc29sZSddIHx8IHtcbiAgICAnbG9nJzogbm9vcCxcbiAgICAnd2Fybic6IG5vb3AsXG4gICAgJ2Vycm9yJzogbm9vcFxuICB9O1xuXG4gIGlmICh0eXBlKSB7XG4gICAgLy8gYWRkIHRoZSB0eXBlIHRvIHRoZSBmcm9udCBvZiB0aGUgbWVzc2FnZVxuICAgIGFyZ3NBcnJheS51bnNoaWZ0KHR5cGUudG9VcHBlckNhc2UoKSsnOicpO1xuICB9IGVsc2Uge1xuICAgIC8vIGRlZmF1bHQgdG8gbG9nIHdpdGggbm8gcHJlZml4XG4gICAgdHlwZSA9ICdsb2cnO1xuICB9XG5cbiAgLy8gYWRkIHRvIGhpc3RvcnlcbiAgdmpzLmxvZy5oaXN0b3J5LnB1c2goYXJnc0FycmF5KTtcblxuICAvLyBhZGQgY29uc29sZSBwcmVmaXggYWZ0ZXIgYWRkaW5nIHRvIGhpc3RvcnlcbiAgYXJnc0FycmF5LnVuc2hpZnQoJ1ZJREVPSlM6Jyk7XG5cbiAgLy8gY2FsbCBhcHByb3ByaWF0ZSBsb2cgZnVuY3Rpb25cbiAgaWYgKGNvbnNvbGVbdHlwZV0uYXBwbHkpIHtcbiAgICBjb25zb2xlW3R5cGVdLmFwcGx5KGNvbnNvbGUsIGFyZ3NBcnJheSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gaWU4IGRvZXNuJ3QgYWxsb3cgZXJyb3IuYXBwbHksIGJ1dCBpdCB3aWxsIGp1c3Qgam9pbigpIHRoZSBhcnJheSBhbnl3YXlcbiAgICBjb25zb2xlW3R5cGVdKGFyZ3NBcnJheS5qb2luKCcgJykpO1xuICB9XG59XG5cbi8qKlxuICogTG9nIHBsYWluIGRlYnVnIG1lc3NhZ2VzXG4gKi9cbnZqcy5sb2cgPSBmdW5jdGlvbigpe1xuICBfbG9nVHlwZShudWxsLCBhcmd1bWVudHMpO1xufTtcblxuLyoqXG4gKiBLZWVwIGEgaGlzdG9yeSBvZiBsb2cgbWVzc2FnZXNcbiAqIEB0eXBlIHtBcnJheX1cbiAqL1xudmpzLmxvZy5oaXN0b3J5ID0gW107XG5cbi8qKlxuICogTG9nIGVycm9yIG1lc3NhZ2VzXG4gKi9cbnZqcy5sb2cuZXJyb3IgPSBmdW5jdGlvbigpe1xuICBfbG9nVHlwZSgnZXJyb3InLCBhcmd1bWVudHMpO1xufTtcblxuLyoqXG4gKiBMb2cgd2FybmluZyBtZXNzYWdlc1xuICovXG52anMubG9nLndhcm4gPSBmdW5jdGlvbigpe1xuICBfbG9nVHlwZSgnd2FybicsIGFyZ3VtZW50cyk7XG59O1xuXG4vLyBPZmZzZXQgTGVmdFxuLy8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0IHRlY2huaXF1ZSBmcm9tIEpvaG4gUmVzaWcgaHR0cDovL2Vqb2huLm9yZy9ibG9nL2dldGJvdW5kaW5nY2xpZW50cmVjdC1pcy1hd2Vzb21lL1xudmpzLmZpbmRQb3NpdGlvbiA9IGZ1bmN0aW9uKGVsKSB7XG4gIHZhciBib3gsIGRvY0VsLCBib2R5LCBjbGllbnRMZWZ0LCBzY3JvbGxMZWZ0LCBsZWZ0LCBjbGllbnRUb3AsIHNjcm9sbFRvcCwgdG9wO1xuXG4gIGlmIChlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QgJiYgZWwucGFyZW50Tm9kZSkge1xuICAgIGJveCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB9XG5cbiAgaWYgKCFib3gpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdDogMCxcbiAgICAgIHRvcDogMFxuICAgIH07XG4gIH1cblxuICBkb2NFbCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgYm9keSA9IGRvY3VtZW50LmJvZHk7XG5cbiAgY2xpZW50TGVmdCA9IGRvY0VsLmNsaWVudExlZnQgfHwgYm9keS5jbGllbnRMZWZ0IHx8IDA7XG4gIHNjcm9sbExlZnQgPSB3aW5kb3cucGFnZVhPZmZzZXQgfHwgYm9keS5zY3JvbGxMZWZ0O1xuICBsZWZ0ID0gYm94LmxlZnQgKyBzY3JvbGxMZWZ0IC0gY2xpZW50TGVmdDtcblxuICBjbGllbnRUb3AgPSBkb2NFbC5jbGllbnRUb3AgfHwgYm9keS5jbGllbnRUb3AgfHwgMDtcbiAgc2Nyb2xsVG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0IHx8IGJvZHkuc2Nyb2xsVG9wO1xuICB0b3AgPSBib3gudG9wICsgc2Nyb2xsVG9wIC0gY2xpZW50VG9wO1xuXG4gIC8vIEFuZHJvaWQgc29tZXRpbWVzIHJldHVybnMgc2xpZ2h0bHkgb2ZmIGRlY2ltYWwgdmFsdWVzLCBzbyBuZWVkIHRvIHJvdW5kXG4gIHJldHVybiB7XG4gICAgbGVmdDogdmpzLnJvdW5kKGxlZnQpLFxuICAgIHRvcDogdmpzLnJvdW5kKHRvcClcbiAgfTtcbn07XG5cbi8qKlxuICogQXJyYXkgZnVuY3Rpb25zIGNvbnRhaW5lclxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5hcnIgPSB7fTtcblxuLypcbiAqIExvb3BzIHRocm91Z2ggYW4gYXJyYXkgYW5kIHJ1bnMgYSBmdW5jdGlvbiBmb3IgZWFjaCBpdGVtIGluc2lkZSBpdC5cbiAqIEBwYXJhbSAge0FycmF5fSAgICBhcnJheSAgICAgICBUaGUgYXJyYXlcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAgICBUaGUgZnVuY3Rpb24gdG8gYmUgcnVuIGZvciBlYWNoIGl0ZW1cbiAqIEBwYXJhbSAgeyp9ICAgICAgICB0aGlzQXJnICAgICBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgY2FsbGJhY2tcbiAqIEByZXR1cm5zIHtBcnJheX0gICAgICAgICAgICAgICBUaGUgYXJyYXlcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5hcnIuZm9yRWFjaCA9IGZ1bmN0aW9uKGFycmF5LCBjYWxsYmFjaywgdGhpc0FyZykge1xuICBpZiAodmpzLm9iai5pc0FycmF5KGFycmF5KSAmJiBjYWxsYmFjayBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcgfHwgdmpzLCBhcnJheVtpXSwgaSwgYXJyYXkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBhcnJheTtcbn07XG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb25zIG5hbWVzcGFjZVxuICogQG5hbWVzcGFjZVxuICogQHR5cGUge09iamVjdH1cbiAqL1xudmpzLnV0aWwgPSB7fTtcblxuLyoqXG4gKiBNZXJnZSB0d28gb3B0aW9ucyBvYmplY3RzLCByZWN1cnNpdmVseSBtZXJnaW5nIGFueSBwbGFpbiBvYmplY3QgcHJvcGVydGllcyBhc1xuICogd2VsbC4gIFByZXZpb3VzbHkgYGRlZXBNZXJnZWBcbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajEgT2JqZWN0IHRvIG92ZXJyaWRlIHZhbHVlcyBpblxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoyIE92ZXJyaWRpbmcgb2JqZWN0XG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgTmV3IG9iamVjdCAtLSBvYmoxIGFuZCBvYmoyIHdpbGwgYmUgdW50b3VjaGVkXG4gKi9cbnZqcy51dGlsLm1lcmdlT3B0aW9ucyA9IGZ1bmN0aW9uKG9iajEsIG9iajIpe1xuICB2YXIga2V5LCB2YWwxLCB2YWwyO1xuXG4gIC8vIG1ha2UgYSBjb3B5IG9mIG9iajEgc28gd2UncmUgbm90IG92ZXJ3cml0aW5nIG9yaWdpbmFsIHZhbHVlcy5cbiAgLy8gbGlrZSBwcm90b3R5cGUub3B0aW9uc18gYW5kIGFsbCBzdWIgb3B0aW9ucyBvYmplY3RzXG4gIG9iajEgPSB2anMub2JqLmNvcHkob2JqMSk7XG5cbiAgZm9yIChrZXkgaW4gb2JqMil7XG4gICAgaWYgKG9iajIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgdmFsMSA9IG9iajFba2V5XTtcbiAgICAgIHZhbDIgPSBvYmoyW2tleV07XG5cbiAgICAgIC8vIENoZWNrIGlmIGJvdGggcHJvcGVydGllcyBhcmUgcHVyZSBvYmplY3RzIGFuZCBkbyBhIGRlZXAgbWVyZ2UgaWYgc29cbiAgICAgIGlmICh2anMub2JqLmlzUGxhaW4odmFsMSkgJiYgdmpzLm9iai5pc1BsYWluKHZhbDIpKSB7XG4gICAgICAgIG9iajFba2V5XSA9IHZqcy51dGlsLm1lcmdlT3B0aW9ucyh2YWwxLCB2YWwyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iajFba2V5XSA9IG9iajJba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIG9iajE7XG59Oy8qKlxuICogQGZpbGVvdmVydmlldyBQbGF5ZXIgQ29tcG9uZW50IC0gQmFzZSBjbGFzcyBmb3IgYWxsIFVJIG9iamVjdHNcbiAqXG4gKi9cblxuLyoqXG4gKiBCYXNlIFVJIENvbXBvbmVudCBjbGFzc1xuICpcbiAqIENvbXBvbmVudHMgYXJlIGVtYmVkZGFibGUgVUkgb2JqZWN0cyB0aGF0IGFyZSByZXByZXNlbnRlZCBieSBib3RoIGFcbiAqIGphdmFzY3JpcHQgb2JqZWN0IGFuZCBhbiBlbGVtZW50IGluIHRoZSBET00uIFRoZXkgY2FuIGJlIGNoaWxkcmVuIG9mIG90aGVyXG4gKiBjb21wb25lbnRzLCBhbmQgY2FuIGhhdmUgbWFueSBjaGlsZHJlbiB0aGVtc2VsdmVzLlxuICpcbiAqICAgICAvLyBhZGRpbmcgYSBidXR0b24gdG8gdGhlIHBsYXllclxuICogICAgIHZhciBidXR0b24gPSBwbGF5ZXIuYWRkQ2hpbGQoJ2J1dHRvbicpO1xuICogICAgIGJ1dHRvbi5lbCgpOyAvLyAtPiBidXR0b24gZWxlbWVudFxuICpcbiAqICAgICA8ZGl2IGNsYXNzPVwidmlkZW8tanNcIj5cbiAqICAgICAgIDxkaXYgY2xhc3M9XCJ2anMtYnV0dG9uXCI+QnV0dG9uPC9kaXY+XG4gKiAgICAgPC9kaXY+XG4gKlxuICogQ29tcG9uZW50cyBhcmUgYWxzbyBldmVudCBlbWl0dGVycy5cbiAqXG4gKiAgICAgYnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XG4gKiAgICAgICBjb25zb2xlLmxvZygnQnV0dG9uIENsaWNrZWQhJyk7XG4gKiAgICAgfSk7XG4gKlxuICogICAgIGJ1dHRvbi50cmlnZ2VyKCdjdXN0b21ldmVudCcpO1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwbGF5ZXIgIE1haW4gUGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB2anMuQ29yZU9iamVjdFxuICovXG52anMuQ29tcG9uZW50ID0gdmpzLkNvcmVPYmplY3QuZXh0ZW5kKHtcbiAgLyoqXG4gICAqIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIGNsYXNzXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zLCByZWFkeSl7XG4gICAgdGhpcy5wbGF5ZXJfID0gcGxheWVyO1xuXG4gICAgLy8gTWFrZSBhIGNvcHkgb2YgcHJvdG90eXBlLm9wdGlvbnNfIHRvIHByb3RlY3QgYWdhaW5zdCBvdmVycmlkaW5nIGdsb2JhbCBkZWZhdWx0c1xuICAgIHRoaXMub3B0aW9uc18gPSB2anMub2JqLmNvcHkodGhpcy5vcHRpb25zXyk7XG5cbiAgICAvLyBVcGRhdGVkIG9wdGlvbnMgd2l0aCBzdXBwbGllZCBvcHRpb25zXG4gICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyhvcHRpb25zKTtcblxuICAgIC8vIEdldCBJRCBmcm9tIG9wdGlvbnMsIGVsZW1lbnQsIG9yIGNyZWF0ZSB1c2luZyBwbGF5ZXIgSUQgYW5kIHVuaXF1ZSBJRFxuICAgIHRoaXMuaWRfID0gb3B0aW9uc1snaWQnXSB8fCAoKG9wdGlvbnNbJ2VsJ10gJiYgb3B0aW9uc1snZWwnXVsnaWQnXSkgPyBvcHRpb25zWydlbCddWydpZCddIDogcGxheWVyLmlkKCkgKyAnX2NvbXBvbmVudF8nICsgdmpzLmd1aWQrKyApO1xuXG4gICAgdGhpcy5uYW1lXyA9IG9wdGlvbnNbJ25hbWUnXSB8fCBudWxsO1xuXG4gICAgLy8gQ3JlYXRlIGVsZW1lbnQgaWYgb25lIHdhc24ndCBwcm92aWRlZCBpbiBvcHRpb25zXG4gICAgdGhpcy5lbF8gPSBvcHRpb25zWydlbCddIHx8IHRoaXMuY3JlYXRlRWwoKTtcblxuICAgIHRoaXMuY2hpbGRyZW5fID0gW107XG4gICAgdGhpcy5jaGlsZEluZGV4XyA9IHt9O1xuICAgIHRoaXMuY2hpbGROYW1lSW5kZXhfID0ge307XG5cbiAgICAvLyBBZGQgYW55IGNoaWxkIGNvbXBvbmVudHMgaW4gb3B0aW9uc1xuICAgIHRoaXMuaW5pdENoaWxkcmVuKCk7XG5cbiAgICB0aGlzLnJlYWR5KHJlYWR5KTtcbiAgICAvLyBEb24ndCB3YW50IHRvIHRyaWdnZXIgcmVhZHkgaGVyZSBvciBpdCB3aWxsIGJlZm9yZSBpbml0IGlzIGFjdHVhbGx5XG4gICAgLy8gZmluaXNoZWQgZm9yIGFsbCBjaGlsZHJlbiB0aGF0IHJ1biB0aGlzIGNvbnN0cnVjdG9yXG5cbiAgICBpZiAob3B0aW9ucy5yZXBvcnRUb3VjaEFjdGl2aXR5ICE9PSBmYWxzZSkge1xuICAgICAgdGhpcy5lbmFibGVUb3VjaEFjdGl2aXR5KCk7XG4gICAgfVxuICB9XG59KTtcblxuLyoqXG4gKiBEaXNwb3NlIG9mIHRoZSBjb21wb25lbnQgYW5kIGFsbCBjaGlsZCBjb21wb25lbnRzXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpe1xuICB0aGlzLnRyaWdnZXIoeyB0eXBlOiAnZGlzcG9zZScsICdidWJibGVzJzogZmFsc2UgfSk7XG5cbiAgLy8gRGlzcG9zZSBhbGwgY2hpbGRyZW4uXG4gIGlmICh0aGlzLmNoaWxkcmVuXykge1xuICAgIGZvciAodmFyIGkgPSB0aGlzLmNoaWxkcmVuXy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgaWYgKHRoaXMuY2hpbGRyZW5fW2ldLmRpc3Bvc2UpIHtcbiAgICAgICAgdGhpcy5jaGlsZHJlbl9baV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIERlbGV0ZSBjaGlsZCByZWZlcmVuY2VzXG4gIHRoaXMuY2hpbGRyZW5fID0gbnVsbDtcbiAgdGhpcy5jaGlsZEluZGV4XyA9IG51bGw7XG4gIHRoaXMuY2hpbGROYW1lSW5kZXhfID0gbnVsbDtcblxuICAvLyBSZW1vdmUgYWxsIGV2ZW50IGxpc3RlbmVycy5cbiAgdGhpcy5vZmYoKTtcblxuICAvLyBSZW1vdmUgZWxlbWVudCBmcm9tIERPTVxuICBpZiAodGhpcy5lbF8ucGFyZW50Tm9kZSkge1xuICAgIHRoaXMuZWxfLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5lbF8pO1xuICB9XG5cbiAgdmpzLnJlbW92ZURhdGEodGhpcy5lbF8pO1xuICB0aGlzLmVsXyA9IG51bGw7XG59O1xuXG4vKipcbiAqIFJlZmVyZW5jZSB0byBtYWluIHBsYXllciBpbnN0YW5jZVxuICpcbiAqIEB0eXBlIHt2anMuUGxheWVyfVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUucGxheWVyXyA9IHRydWU7XG5cbi8qKlxuICogUmV0dXJuIHRoZSBjb21wb25lbnQncyBwbGF5ZXJcbiAqXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5wbGF5ZXIgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5wbGF5ZXJfO1xufTtcblxuLyoqXG4gKiBUaGUgY29tcG9uZW50J3Mgb3B0aW9ucyBvYmplY3RcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUub3B0aW9uc187XG5cbi8qKlxuICogRGVlcCBtZXJnZSBvZiBvcHRpb25zIG9iamVjdHNcbiAqXG4gKiBXaGVuZXZlciBhIHByb3BlcnR5IGlzIGFuIG9iamVjdCBvbiBib3RoIG9wdGlvbnMgb2JqZWN0c1xuICogdGhlIHR3byBwcm9wZXJ0aWVzIHdpbGwgYmUgbWVyZ2VkIHVzaW5nIHZqcy5vYmouZGVlcE1lcmdlLlxuICpcbiAqIFRoaXMgaXMgdXNlZCBmb3IgbWVyZ2luZyBvcHRpb25zIGZvciBjaGlsZCBjb21wb25lbnRzLiBXZVxuICogd2FudCBpdCB0byBiZSBlYXN5IHRvIG92ZXJyaWRlIGluZGl2aWR1YWwgb3B0aW9ucyBvbiBhIGNoaWxkXG4gKiBjb21wb25lbnQgd2l0aG91dCBoYXZpbmcgdG8gcmV3cml0ZSBhbGwgdGhlIG90aGVyIGRlZmF1bHQgb3B0aW9ucy5cbiAqXG4gKiAgICAgUGFyZW50LnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAqICAgICAgIGNoaWxkcmVuOiB7XG4gKiAgICAgICAgICdjaGlsZE9uZSc6IHsgJ2Zvbyc6ICdiYXInLCAnYXNkZic6ICdmZHNhJyB9LFxuICogICAgICAgICAnY2hpbGRUd28nOiB7fSxcbiAqICAgICAgICAgJ2NoaWxkVGhyZWUnOiB7fVxuICogICAgICAgfVxuICogICAgIH1cbiAqICAgICBuZXdPcHRpb25zID0ge1xuICogICAgICAgY2hpbGRyZW46IHtcbiAqICAgICAgICAgJ2NoaWxkT25lJzogeyAnZm9vJzogJ2JheicsICdhYmMnOiAnMTIzJyB9XG4gKiAgICAgICAgICdjaGlsZFR3byc6IG51bGwsXG4gKiAgICAgICAgICdjaGlsZEZvdXInOiB7fVxuICogICAgICAgfVxuICogICAgIH1cbiAqXG4gKiAgICAgdGhpcy5vcHRpb25zKG5ld09wdGlvbnMpO1xuICpcbiAqIFJFU1VMVFxuICpcbiAqICAgICB7XG4gKiAgICAgICBjaGlsZHJlbjoge1xuICogICAgICAgICAnY2hpbGRPbmUnOiB7ICdmb28nOiAnYmF6JywgJ2FzZGYnOiAnZmRzYScsICdhYmMnOiAnMTIzJyB9LFxuICogICAgICAgICAnY2hpbGRUd28nOiBudWxsLCAvLyBEaXNhYmxlZC4gV29uJ3QgYmUgaW5pdGlhbGl6ZWQuXG4gKiAgICAgICAgICdjaGlsZFRocmVlJzoge30sXG4gKiAgICAgICAgICdjaGlsZEZvdXInOiB7fVxuICogICAgICAgfVxuICogICAgIH1cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iaiBPYmplY3Qgb2YgbmV3IG9wdGlvbiB2YWx1ZXNcbiAqIEByZXR1cm4ge09iamVjdH0gICAgIEEgTkVXIG9iamVjdCBvZiB0aGlzLm9wdGlvbnNfIGFuZCBvYmogbWVyZ2VkXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLm9wdGlvbnMgPSBmdW5jdGlvbihvYmope1xuICBpZiAob2JqID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzLm9wdGlvbnNfO1xuXG4gIHJldHVybiB0aGlzLm9wdGlvbnNfID0gdmpzLnV0aWwubWVyZ2VPcHRpb25zKHRoaXMub3B0aW9uc18sIG9iaik7XG59O1xuXG4vKipcbiAqIFRoZSBET00gZWxlbWVudCBmb3IgdGhlIGNvbXBvbmVudFxuICpcbiAqIEB0eXBlIHtFbGVtZW50fVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuZWxfO1xuXG4vKipcbiAqIENyZWF0ZSB0aGUgY29tcG9uZW50J3MgRE9NIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmc9fSB0YWdOYW1lICBFbGVtZW50J3Mgbm9kZSB0eXBlLiBlLmcuICdkaXYnXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBhdHRyaWJ1dGVzIEFuIG9iamVjdCBvZiBlbGVtZW50IGF0dHJpYnV0ZXMgdGhhdCBzaG91bGQgYmUgc2V0IG9uIHRoZSBlbGVtZW50XG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKHRhZ05hbWUsIGF0dHJpYnV0ZXMpe1xuICByZXR1cm4gdmpzLmNyZWF0ZUVsKHRhZ05hbWUsIGF0dHJpYnV0ZXMpO1xufTtcblxudmpzLkNvbXBvbmVudC5wcm90b3R5cGUubG9jYWxpemUgPSBmdW5jdGlvbihzdHJpbmcpe1xuICB2YXIgbGFuZyA9IHRoaXMucGxheWVyXy5sYW5ndWFnZSgpLFxuICAgICAgbGFuZ3VhZ2VzID0gdGhpcy5wbGF5ZXJfLmxhbmd1YWdlcygpO1xuICBpZiAobGFuZ3VhZ2VzICYmIGxhbmd1YWdlc1tsYW5nXSAmJiBsYW5ndWFnZXNbbGFuZ11bc3RyaW5nXSkge1xuICAgIHJldHVybiBsYW5ndWFnZXNbbGFuZ11bc3RyaW5nXTtcbiAgfVxuICByZXR1cm4gc3RyaW5nO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGNvbXBvbmVudCdzIERPTSBlbGVtZW50XG4gKlxuICogICAgIHZhciBkb21FbCA9IG15Q29tcG9uZW50LmVsKCk7XG4gKlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuZWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5lbF87XG59O1xuXG4vKipcbiAqIEFuIG9wdGlvbmFsIGVsZW1lbnQgd2hlcmUsIGlmIGRlZmluZWQsIGNoaWxkcmVuIHdpbGwgYmUgaW5zZXJ0ZWQgaW5zdGVhZCBvZlxuICogZGlyZWN0bHkgaW4gYGVsX2BcbiAqXG4gKiBAdHlwZSB7RWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmNvbnRlbnRFbF87XG5cbi8qKlxuICogUmV0dXJuIHRoZSBjb21wb25lbnQncyBET00gZWxlbWVudCBmb3IgZW1iZWRkaW5nIGNvbnRlbnQuXG4gKiBXaWxsIGVpdGhlciBiZSBlbF8gb3IgYSBuZXcgZWxlbWVudCBkZWZpbmVkIGluIGNyZWF0ZUVsLlxuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmNvbnRlbnRFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmNvbnRlbnRFbF8gfHwgdGhpcy5lbF87XG59O1xuXG4vKipcbiAqIFRoZSBJRCBmb3IgdGhlIGNvbXBvbmVudFxuICpcbiAqIEB0eXBlIHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5pZF87XG5cbi8qKlxuICogR2V0IHRoZSBjb21wb25lbnQncyBJRFxuICpcbiAqICAgICB2YXIgaWQgPSBteUNvbXBvbmVudC5pZCgpO1xuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuaWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5pZF87XG59O1xuXG4vKipcbiAqIFRoZSBuYW1lIGZvciB0aGUgY29tcG9uZW50LiBPZnRlbiB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgY29tcG9uZW50LlxuICpcbiAqIEB0eXBlIHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5uYW1lXztcblxuLyoqXG4gKiBHZXQgdGhlIGNvbXBvbmVudCdzIG5hbWUuIFRoZSBuYW1lIGlzIG9mdGVuIHVzZWQgdG8gcmVmZXJlbmNlIHRoZSBjb21wb25lbnQuXG4gKlxuICogICAgIHZhciBuYW1lID0gbXlDb21wb25lbnQubmFtZSgpO1xuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUubmFtZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLm5hbWVfO1xufTtcblxuLyoqXG4gKiBBcnJheSBvZiBjaGlsZCBjb21wb25lbnRzXG4gKlxuICogQHR5cGUge0FycmF5fVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY2hpbGRyZW5fO1xuXG4vKipcbiAqIEdldCBhbiBhcnJheSBvZiBhbGwgY2hpbGQgY29tcG9uZW50c1xuICpcbiAqICAgICB2YXIga2lkcyA9IG15Q29tcG9uZW50LmNoaWxkcmVuKCk7XG4gKlxuICogQHJldHVybiB7QXJyYXl9IFRoZSBjaGlsZHJlblxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5jaGlsZHJlbiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmNoaWxkcmVuXztcbn07XG5cbi8qKlxuICogT2JqZWN0IG9mIGNoaWxkIGNvbXBvbmVudHMgYnkgSURcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY2hpbGRJbmRleF87XG5cbi8qKlxuICogUmV0dXJucyBhIGNoaWxkIGNvbXBvbmVudCB3aXRoIHRoZSBwcm92aWRlZCBJRFxuICpcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmdldENoaWxkQnlJZCA9IGZ1bmN0aW9uKGlkKXtcbiAgcmV0dXJuIHRoaXMuY2hpbGRJbmRleF9baWRdO1xufTtcblxuLyoqXG4gKiBPYmplY3Qgb2YgY2hpbGQgY29tcG9uZW50cyBieSBuYW1lXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmNoaWxkTmFtZUluZGV4XztcblxuLyoqXG4gKiBSZXR1cm5zIGEgY2hpbGQgY29tcG9uZW50IHdpdGggdGhlIHByb3ZpZGVkIG5hbWVcbiAqXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5nZXRDaGlsZCA9IGZ1bmN0aW9uKG5hbWUpe1xuICByZXR1cm4gdGhpcy5jaGlsZE5hbWVJbmRleF9bbmFtZV07XG59O1xuXG4vKipcbiAqIEFkZHMgYSBjaGlsZCBjb21wb25lbnQgaW5zaWRlIHRoaXMgY29tcG9uZW50XG4gKlxuICogICAgIG15Q29tcG9uZW50LmVsKCk7XG4gKiAgICAgLy8gLT4gPGRpdiBjbGFzcz0nbXktY29tcG9uZW50Jz48L2Rpdj5cbiAqICAgICBteUNvbW9uZW50LmNoaWxkcmVuKCk7XG4gKiAgICAgLy8gW2VtcHR5IGFycmF5XVxuICpcbiAqICAgICB2YXIgbXlCdXR0b24gPSBteUNvbXBvbmVudC5hZGRDaGlsZCgnTXlCdXR0b24nKTtcbiAqICAgICAvLyAtPiA8ZGl2IGNsYXNzPSdteS1jb21wb25lbnQnPjxkaXYgY2xhc3M9XCJteS1idXR0b25cIj5teUJ1dHRvbjxkaXY+PC9kaXY+XG4gKiAgICAgLy8gLT4gbXlCdXR0b24gPT09IG15Q29tb25lbnQuY2hpbGRyZW4oKVswXTtcbiAqXG4gKiBQYXNzIGluIG9wdGlvbnMgZm9yIGNoaWxkIGNvbnN0cnVjdG9ycyBhbmQgb3B0aW9ucyBmb3IgY2hpbGRyZW4gb2YgdGhlIGNoaWxkXG4gKlxuICogICAgIHZhciBteUJ1dHRvbiA9IG15Q29tcG9uZW50LmFkZENoaWxkKCdNeUJ1dHRvbicsIHtcbiAqICAgICAgIHRleHQ6ICdQcmVzcyBNZScsXG4gKiAgICAgICBjaGlsZHJlbjoge1xuICogICAgICAgICBidXR0b25DaGlsZEV4YW1wbGU6IHtcbiAqICAgICAgICAgICBidXR0b25DaGlsZE9wdGlvbjogdHJ1ZVxuICogICAgICAgICB9XG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICogQHBhcmFtIHtTdHJpbmd8dmpzLkNvbXBvbmVudH0gY2hpbGQgVGhlIGNsYXNzIG5hbWUgb3IgaW5zdGFuY2Ugb2YgYSBjaGlsZCB0byBhZGRcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBPcHRpb25zLCBpbmNsdWRpbmcgb3B0aW9ucyB0byBiZSBwYXNzZWQgdG8gY2hpbGRyZW4gb2YgdGhlIGNoaWxkLlxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH0gVGhlIGNoaWxkIGNvbXBvbmVudCAoY3JlYXRlZCBieSB0aGlzIHByb2Nlc3MgaWYgYSBzdHJpbmcgd2FzIHVzZWQpXG4gKiBAc3VwcHJlc3Mge2FjY2Vzc0NvbnRyb2xzfGNoZWNrUmVnRXhwfGNoZWNrVHlwZXN8Y2hlY2tWYXJzfGNvbnN0fGNvbnN0YW50UHJvcGVydHl8ZGVwcmVjYXRlZHxkdXBsaWNhdGV8ZXM1U3RyaWN0fGZpbGVvdmVydmlld1RhZ3N8Z2xvYmFsVGhpc3xpbnZhbGlkQ2FzdHN8bWlzc2luZ1Byb3BlcnRpZXN8bm9uU3RhbmRhcmRKc0RvY3N8c3RyaWN0TW9kdWxlRGVwQ2hlY2t8dW5kZWZpbmVkTmFtZXN8dW5kZWZpbmVkVmFyc3x1bmtub3duRGVmaW5lc3x1c2VsZXNzQ29kZXx2aXNpYmlsaXR5fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5hZGRDaGlsZCA9IGZ1bmN0aW9uKGNoaWxkLCBvcHRpb25zKXtcbiAgdmFyIGNvbXBvbmVudCwgY29tcG9uZW50Q2xhc3MsIGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudElkO1xuXG4gIC8vIElmIHN0cmluZywgY3JlYXRlIG5ldyBjb21wb25lbnQgd2l0aCBvcHRpb25zXG4gIGlmICh0eXBlb2YgY2hpbGQgPT09ICdzdHJpbmcnKSB7XG5cbiAgICBjb21wb25lbnROYW1lID0gY2hpbGQ7XG5cbiAgICAvLyBNYWtlIHN1cmUgb3B0aW9ucyBpcyBhdCBsZWFzdCBhbiBlbXB0eSBvYmplY3QgdG8gcHJvdGVjdCBhZ2FpbnN0IGVycm9yc1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgLy8gQXNzdW1lIG5hbWUgb2Ygc2V0IGlzIGEgbG93ZXJjYXNlZCBuYW1lIG9mIHRoZSBVSSBDbGFzcyAoUGxheUJ1dHRvbiwgZXRjLilcbiAgICBjb21wb25lbnRDbGFzcyA9IG9wdGlvbnNbJ2NvbXBvbmVudENsYXNzJ10gfHwgdmpzLmNhcGl0YWxpemUoY29tcG9uZW50TmFtZSk7XG5cbiAgICAvLyBTZXQgbmFtZSB0aHJvdWdoIG9wdGlvbnNcbiAgICBvcHRpb25zWyduYW1lJ10gPSBjb21wb25lbnROYW1lO1xuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IG9iamVjdCAmIGVsZW1lbnQgZm9yIHRoaXMgY29udHJvbHMgc2V0XG4gICAgLy8gSWYgdGhlcmUncyBubyAucGxheWVyXywgdGhpcyBpcyBhIHBsYXllclxuICAgIC8vIENsb3N1cmUgQ29tcGlsZXIgdGhyb3dzIGFuICdpbmNvbXBsZXRlIGFsaWFzJyB3YXJuaW5nIGlmIHdlIHVzZSB0aGUgdmpzIHZhcmlhYmxlIGRpcmVjdGx5LlxuICAgIC8vIEV2ZXJ5IGNsYXNzIHNob3VsZCBiZSBleHBvcnRlZCwgc28gdGhpcyBzaG91bGQgbmV2ZXIgYmUgYSBwcm9ibGVtIGhlcmUuXG4gICAgY29tcG9uZW50ID0gbmV3IHdpbmRvd1sndmlkZW9qcyddW2NvbXBvbmVudENsYXNzXSh0aGlzLnBsYXllcl8gfHwgdGhpcywgb3B0aW9ucyk7XG5cbiAgLy8gY2hpbGQgaXMgYSBjb21wb25lbnQgaW5zdGFuY2VcbiAgfSBlbHNlIHtcbiAgICBjb21wb25lbnQgPSBjaGlsZDtcbiAgfVxuXG4gIHRoaXMuY2hpbGRyZW5fLnB1c2goY29tcG9uZW50KTtcblxuICBpZiAodHlwZW9mIGNvbXBvbmVudC5pZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMuY2hpbGRJbmRleF9bY29tcG9uZW50LmlkKCldID0gY29tcG9uZW50O1xuICB9XG5cbiAgLy8gSWYgYSBuYW1lIHdhc24ndCB1c2VkIHRvIGNyZWF0ZSB0aGUgY29tcG9uZW50LCBjaGVjayBpZiB3ZSBjYW4gdXNlIHRoZVxuICAvLyBuYW1lIGZ1bmN0aW9uIG9mIHRoZSBjb21wb25lbnRcbiAgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudE5hbWUgfHwgKGNvbXBvbmVudC5uYW1lICYmIGNvbXBvbmVudC5uYW1lKCkpO1xuXG4gIGlmIChjb21wb25lbnROYW1lKSB7XG4gICAgdGhpcy5jaGlsZE5hbWVJbmRleF9bY29tcG9uZW50TmFtZV0gPSBjb21wb25lbnQ7XG4gIH1cblxuICAvLyBBZGQgdGhlIFVJIG9iamVjdCdzIGVsZW1lbnQgdG8gdGhlIGNvbnRhaW5lciBkaXYgKGJveClcbiAgLy8gSGF2aW5nIGFuIGVsZW1lbnQgaXMgbm90IHJlcXVpcmVkXG4gIGlmICh0eXBlb2YgY29tcG9uZW50WydlbCddID09PSAnZnVuY3Rpb24nICYmIGNvbXBvbmVudFsnZWwnXSgpKSB7XG4gICAgdGhpcy5jb250ZW50RWwoKS5hcHBlbmRDaGlsZChjb21wb25lbnRbJ2VsJ10oKSk7XG4gIH1cblxuICAvLyBSZXR1cm4gc28gaXQgY2FuIHN0b3JlZCBvbiBwYXJlbnQgb2JqZWN0IGlmIGRlc2lyZWQuXG4gIHJldHVybiBjb21wb25lbnQ7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGNoaWxkIGNvbXBvbmVudCBmcm9tIHRoaXMgY29tcG9uZW50J3MgbGlzdCBvZiBjaGlsZHJlbiwgYW5kIHRoZVxuICogY2hpbGQgY29tcG9uZW50J3MgZWxlbWVudCBmcm9tIHRoaXMgY29tcG9uZW50J3MgZWxlbWVudFxuICpcbiAqIEBwYXJhbSAge3Zqcy5Db21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gcmVtb3ZlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLnJlbW92ZUNoaWxkID0gZnVuY3Rpb24oY29tcG9uZW50KXtcbiAgaWYgKHR5cGVvZiBjb21wb25lbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgY29tcG9uZW50ID0gdGhpcy5nZXRDaGlsZChjb21wb25lbnQpO1xuICB9XG5cbiAgaWYgKCFjb21wb25lbnQgfHwgIXRoaXMuY2hpbGRyZW5fKSByZXR1cm47XG5cbiAgdmFyIGNoaWxkRm91bmQgPSBmYWxzZTtcbiAgZm9yICh2YXIgaSA9IHRoaXMuY2hpbGRyZW5fLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgaWYgKHRoaXMuY2hpbGRyZW5fW2ldID09PSBjb21wb25lbnQpIHtcbiAgICAgIGNoaWxkRm91bmQgPSB0cnVlO1xuICAgICAgdGhpcy5jaGlsZHJlbl8uc3BsaWNlKGksMSk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoIWNoaWxkRm91bmQpIHJldHVybjtcblxuICB0aGlzLmNoaWxkSW5kZXhfW2NvbXBvbmVudC5pZF0gPSBudWxsO1xuICB0aGlzLmNoaWxkTmFtZUluZGV4X1tjb21wb25lbnQubmFtZV0gPSBudWxsO1xuXG4gIHZhciBjb21wRWwgPSBjb21wb25lbnQuZWwoKTtcbiAgaWYgKGNvbXBFbCAmJiBjb21wRWwucGFyZW50Tm9kZSA9PT0gdGhpcy5jb250ZW50RWwoKSkge1xuICAgIHRoaXMuY29udGVudEVsKCkucmVtb3ZlQ2hpbGQoY29tcG9uZW50LmVsKCkpO1xuICB9XG59O1xuXG4vKipcbiAqIEFkZCBhbmQgaW5pdGlhbGl6ZSBkZWZhdWx0IGNoaWxkIGNvbXBvbmVudHMgZnJvbSBvcHRpb25zXG4gKlxuICogICAgIC8vIHdoZW4gYW4gaW5zdGFuY2Ugb2YgTXlDb21wb25lbnQgaXMgY3JlYXRlZCwgYWxsIGNoaWxkcmVuIGluIG9wdGlvbnNcbiAqICAgICAvLyB3aWxsIGJlIGFkZGVkIHRvIHRoZSBpbnN0YW5jZSBieSB0aGVpciBuYW1lIHN0cmluZ3MgYW5kIG9wdGlvbnNcbiAqICAgICBNeUNvbXBvbmVudC5wcm90b3R5cGUub3B0aW9uc18uY2hpbGRyZW4gPSB7XG4gKiAgICAgICBteUNoaWxkQ29tcG9uZW50OiB7XG4gKiAgICAgICAgIG15Q2hpbGRPcHRpb246IHRydWVcbiAqICAgICAgIH1cbiAqICAgICB9XG4gKlxuICogICAgIC8vIE9yIHdoZW4gY3JlYXRpbmcgdGhlIGNvbXBvbmVudFxuICogICAgIHZhciBteUNvbXAgPSBuZXcgTXlDb21wb25lbnQocGxheWVyLCB7XG4gKiAgICAgICBjaGlsZHJlbjoge1xuICogICAgICAgICBteUNoaWxkQ29tcG9uZW50OiB7XG4gKiAgICAgICAgICAgbXlDaGlsZE9wdGlvbjogdHJ1ZVxuICogICAgICAgICB9XG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICogVGhlIGNoaWxkcmVuIG9wdGlvbiBjYW4gYWxzbyBiZSBhbiBBcnJheSBvZiBjaGlsZCBuYW1lcyBvclxuICogY2hpbGQgb3B0aW9ucyBvYmplY3RzICh0aGF0IGFsc28gaW5jbHVkZSBhICduYW1lJyBrZXkpLlxuICpcbiAqICAgICB2YXIgbXlDb21wID0gbmV3IE15Q29tcG9uZW50KHBsYXllciwge1xuICogICAgICAgY2hpbGRyZW46IFtcbiAqICAgICAgICAgJ2J1dHRvbicsXG4gKiAgICAgICAgIHtcbiAqICAgICAgICAgICBuYW1lOiAnYnV0dG9uJyxcbiAqICAgICAgICAgICBzb21lT3RoZXJPcHRpb246IHRydWVcbiAqICAgICAgICAgfVxuICogICAgICAgXVxuICogICAgIH0pO1xuICpcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuaW5pdENoaWxkcmVuID0gZnVuY3Rpb24oKXtcbiAgdmFyIHBhcmVudCwgY2hpbGRyZW4sIGNoaWxkLCBuYW1lLCBvcHRzO1xuXG4gIHBhcmVudCA9IHRoaXM7XG4gIGNoaWxkcmVuID0gdGhpcy5vcHRpb25zKClbJ2NoaWxkcmVuJ107XG5cbiAgaWYgKGNoaWxkcmVuKSB7XG4gICAgLy8gQWxsb3cgZm9yIGFuIGFycmF5IG9mIGNoaWxkcmVuIGRldGFpbHMgdG8gcGFzc2VkIGluIHRoZSBvcHRpb25zXG4gICAgaWYgKHZqcy5vYmouaXNBcnJheShjaGlsZHJlbikpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcblxuICAgICAgICBpZiAodHlwZW9mIGNoaWxkID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgbmFtZSA9IGNoaWxkO1xuICAgICAgICAgIG9wdHMgPSB7fTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuYW1lID0gY2hpbGQubmFtZTtcbiAgICAgICAgICBvcHRzID0gY2hpbGQ7XG4gICAgICAgIH1cblxuICAgICAgICBwYXJlbnRbbmFtZV0gPSBwYXJlbnQuYWRkQ2hpbGQobmFtZSwgb3B0cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZqcy5vYmouZWFjaChjaGlsZHJlbiwgZnVuY3Rpb24obmFtZSwgb3B0cyl7XG4gICAgICAgIC8vIEFsbG93IGZvciBkaXNhYmxpbmcgZGVmYXVsdCBjb21wb25lbnRzXG4gICAgICAgIC8vIGUuZy4gdmpzLm9wdGlvbnNbJ2NoaWxkcmVuJ11bJ3Bvc3RlckltYWdlJ10gPSBmYWxzZVxuICAgICAgICBpZiAob3B0cyA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgICAvLyBTZXQgcHJvcGVydHkgbmFtZSBvbiBwbGF5ZXIuIENvdWxkIGNhdXNlIGNvbmZsaWN0cyB3aXRoIG90aGVyIHByb3AgbmFtZXMsIGJ1dCBpdCdzIHdvcnRoIG1ha2luZyByZWZzIGVhc3kuXG4gICAgICAgIHBhcmVudFtuYW1lXSA9IHBhcmVudC5hZGRDaGlsZChuYW1lLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBBbGxvd3Mgc3ViIGNvbXBvbmVudHMgdG8gc3RhY2sgQ1NTIGNsYXNzIG5hbWVzXG4gKlxuICogQHJldHVybiB7U3RyaW5nfSBUaGUgY29uc3RydWN0ZWQgY2xhc3MgbmFtZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24oKXtcbiAgICAvLyBDaGlsZCBjbGFzc2VzIGNhbiBpbmNsdWRlIGEgZnVuY3Rpb24gdGhhdCBkb2VzOlxuICAgIC8vIHJldHVybiAnQ0xBU1MgTkFNRScgKyB0aGlzLl9zdXBlcigpO1xuICAgIHJldHVybiAnJztcbn07XG5cbi8qIEV2ZW50c1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gdGhpcyBjb21wb25lbnQncyBlbGVtZW50XG4gKlxuICogICAgIHZhciBteUZ1bmMgPSBmdW5jdGlvbigpe1xuICogICAgICAgdmFyIG15UGxheWVyID0gdGhpcztcbiAqICAgICAgIC8vIERvIHNvbWV0aGluZyB3aGVuIHRoZSBldmVudCBpcyBmaXJlZFxuICogICAgIH07XG4gKlxuICogICAgIG15UGxheWVyLm9uKFwiZXZlbnROYW1lXCIsIG15RnVuYyk7XG4gKlxuICogVGhlIGNvbnRleHQgd2lsbCBiZSB0aGUgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gICB0eXBlIFRoZSBldmVudCB0eXBlIGUuZy4gJ2NsaWNrJ1xuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgVGhlIGV2ZW50IGxpc3RlbmVyXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fSBzZWxmXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgZm4pe1xuICB2anMub24odGhpcy5lbF8sIHR5cGUsIHZqcy5iaW5kKHRoaXMsIGZuKSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXIgZnJvbSB0aGUgY29tcG9uZW50J3MgZWxlbWVudFxuICpcbiAqICAgICBteUNvbXBvbmVudC5vZmYoXCJldmVudE5hbWVcIiwgbXlGdW5jKTtcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmc9fSAgIHR5cGUgRXZlbnQgdHlwZS4gV2l0aG91dCB0eXBlIGl0IHdpbGwgcmVtb3ZlIGFsbCBsaXN0ZW5lcnMuXG4gKiBAcGFyYW0gIHtGdW5jdGlvbj19IGZuICAgRXZlbnQgbGlzdGVuZXIuIFdpdGhvdXQgZm4gaXQgd2lsbCByZW1vdmUgYWxsIGxpc3RlbmVycyBmb3IgYSB0eXBlLlxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24odHlwZSwgZm4pe1xuICB2anMub2ZmKHRoaXMuZWxfLCB0eXBlLCBmbik7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGQgYW4gZXZlbnQgbGlzdGVuZXIgdG8gYmUgdHJpZ2dlcmVkIG9ubHkgb25jZSBhbmQgdGhlbiByZW1vdmVkXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSAgIHR5cGUgRXZlbnQgdHlwZVxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgRXZlbnQgbGlzdGVuZXJcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLm9uZSA9IGZ1bmN0aW9uKHR5cGUsIGZuKSB7XG4gIHZqcy5vbmUodGhpcy5lbF8sIHR5cGUsIHZqcy5iaW5kKHRoaXMsIGZuKSk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIGFuIGVsZW1lbnRcbiAqXG4gKiAgICAgbXlDb21wb25lbnQudHJpZ2dlcignZXZlbnROYW1lJyk7XG4gKiAgICAgbXlDb21wb25lbnQudHJpZ2dlcih7J3R5cGUnOidldmVudE5hbWUnfSk7XG4gKlxuICogQHBhcmFtICB7RXZlbnR8T2JqZWN0fFN0cmluZ30gZXZlbnQgIEEgc3RyaW5nICh0aGUgdHlwZSkgb3IgYW4gZXZlbnQgb2JqZWN0IHdpdGggYSB0eXBlIGF0dHJpYnV0ZVxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH0gICAgICAgc2VsZlxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24oZXZlbnQpe1xuICB2anMudHJpZ2dlcih0aGlzLmVsXywgZXZlbnQpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qIFJlYWR5XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyoqXG4gKiBJcyB0aGUgY29tcG9uZW50IGxvYWRlZFxuICogVGhpcyBjYW4gbWVhbiBkaWZmZXJlbnQgdGhpbmdzIGRlcGVuZGluZyBvbiB0aGUgY29tcG9uZW50LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFkeV87XG5cbi8qKlxuICogVHJpZ2dlciByZWFkeSBhcyBzb29uIGFzIGluaXRpYWxpemF0aW9uIGlzIGZpbmlzaGVkXG4gKlxuICogQWxsb3dzIGZvciBkZWxheWluZyByZWFkeS4gT3ZlcnJpZGUgb24gYSBzdWIgY2xhc3MgcHJvdG90eXBlLlxuICogSWYgeW91IHNldCB0aGlzLmlzUmVhZHlPbkluaXRGaW5pc2hfIGl0IHdpbGwgYWZmZWN0IGFsbCBjb21wb25lbnRzLlxuICogU3BlY2lhbGx5IHVzZWQgd2hlbiB3YWl0aW5nIGZvciB0aGUgRmxhc2ggcGxheWVyIHRvIGFzeW5jaHJub3VzbHkgbG9hZC5cbiAqXG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmlzUmVhZHlPbkluaXRGaW5pc2hfID0gdHJ1ZTtcblxuLyoqXG4gKiBMaXN0IG9mIHJlYWR5IGxpc3RlbmVyc1xuICpcbiAqIEB0eXBlIHtBcnJheX1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLnJlYWR5UXVldWVfO1xuXG4vKipcbiAqIEJpbmQgYSBsaXN0ZW5lciB0byB0aGUgY29tcG9uZW50J3MgcmVhZHkgc3RhdGVcbiAqXG4gKiBEaWZmZXJlbnQgZnJvbSBldmVudCBsaXN0ZW5lcnMgaW4gdGhhdCBpZiB0aGUgcmVhZHkgZXZlbnQgaGFzIGFscmVhZHkgaGFwcGVuZFxuICogaXQgd2lsbCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBpbW1lZGlhdGVseS5cbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gUmVhZHkgbGlzdGVuZXJcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24oZm4pe1xuICBpZiAoZm4pIHtcbiAgICBpZiAodGhpcy5pc1JlYWR5Xykge1xuICAgICAgZm4uY2FsbCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMucmVhZHlRdWV1ZV8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aGlzLnJlYWR5UXVldWVfID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnJlYWR5UXVldWVfLnB1c2goZm4pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVHJpZ2dlciB0aGUgcmVhZHkgbGlzdGVuZXJzXG4gKlxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUudHJpZ2dlclJlYWR5ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5pc1JlYWR5XyA9IHRydWU7XG5cbiAgdmFyIHJlYWR5UXVldWUgPSB0aGlzLnJlYWR5UXVldWVfO1xuXG4gIGlmIChyZWFkeVF1ZXVlICYmIHJlYWR5UXVldWUubGVuZ3RoID4gMCkge1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSByZWFkeVF1ZXVlLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgcmVhZHlRdWV1ZVtpXS5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIC8vIFJlc2V0IFJlYWR5IFF1ZXVlXG4gICAgdGhpcy5yZWFkeVF1ZXVlXyA9IFtdO1xuXG4gICAgLy8gQWxsb3cgZm9yIHVzaW5nIGV2ZW50IGxpc3RlbmVycyBhbHNvLCBpbiBjYXNlIHlvdSB3YW50IHRvIGRvIHNvbWV0aGluZyBldmVyeXRpbWUgYSBzb3VyY2UgaXMgcmVhZHkuXG4gICAgdGhpcy50cmlnZ2VyKCdyZWFkeScpO1xuICB9XG59O1xuXG4vKiBEaXNwbGF5XG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4vKipcbiAqIEFkZCBhIENTUyBjbGFzcyBuYW1lIHRvIHRoZSBjb21wb25lbnQncyBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzVG9BZGQgQ2xhc3NuYW1lIHRvIGFkZFxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuYWRkQ2xhc3MgPSBmdW5jdGlvbihjbGFzc1RvQWRkKXtcbiAgdmpzLmFkZENsYXNzKHRoaXMuZWxfLCBjbGFzc1RvQWRkKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIENTUyBjbGFzcyBuYW1lIGZyb20gdGhlIGNvbXBvbmVudCdzIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NUb1JlbW92ZSBDbGFzc25hbWUgdG8gcmVtb3ZlXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGNsYXNzVG9SZW1vdmUpe1xuICB2anMucmVtb3ZlQ2xhc3ModGhpcy5lbF8sIGNsYXNzVG9SZW1vdmUpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogU2hvdyB0aGUgY29tcG9uZW50IGVsZW1lbnQgaWYgaGlkZGVuXG4gKlxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuZWxfLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSGlkZSB0aGUgY29tcG9uZW50IGVsZW1lbnQgaWYgY3VycmVudGx5IHNob3dpbmdcbiAqXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5lbF8uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIExvY2sgYW4gaXRlbSBpbiBpdHMgdmlzaWJsZSBzdGF0ZVxuICogVG8gYmUgdXNlZCB3aXRoIGZhZGVJbi9mYWRlT3V0LlxuICpcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5sb2NrU2hvd2luZyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1sb2NrLXNob3dpbmcnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFVubG9jayBhbiBpdGVtIHRvIGJlIGhpZGRlblxuICogVG8gYmUgdXNlZCB3aXRoIGZhZGVJbi9mYWRlT3V0LlxuICpcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS51bmxvY2tTaG93aW5nID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWxvY2stc2hvd2luZycpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogRGlzYWJsZSBjb21wb25lbnQgYnkgbWFraW5nIGl0IHVuc2hvd2FibGVcbiAqXG4gKiBDdXJyZW50bHkgcHJpdmF0ZSBiZWNhdXNlIHdlJ3JlIG1vdmlnbiB0b3dhcmRzIG1vcmUgY3NzLWJhc2VkIHN0YXRlcy5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLmhpZGUoKTtcbiAgdGhpcy5zaG93ID0gZnVuY3Rpb24oKXt9O1xufTtcblxuLyoqXG4gKiBTZXQgb3IgZ2V0IHRoZSB3aWR0aCBvZiB0aGUgY29tcG9uZW50IChDU1MgdmFsdWVzKVxuICpcbiAqIFNldHRpbmcgdGhlIHZpZGVvIHRhZyBkaW1lbnNpb24gdmFsdWVzIG9ubHkgd29ya3Mgd2l0aCB2YWx1ZXMgaW4gcGl4ZWxzLlxuICogUGVyY2VudCB2YWx1ZXMgd2lsbCBub3Qgd29yay5cbiAqIFNvbWUgcGVyY2VudHMgY2FuIGJlIHVzZWQsIGJ1dCB3aWR0aCgpL2hlaWdodCgpIHdpbGwgcmV0dXJuIHRoZSBudW1iZXIgKyAlLFxuICogbm90IHRoZSBhY3R1YWwgY29tcHV0ZWQgd2lkdGgvaGVpZ2h0LlxuICpcbiAqIEBwYXJhbSAge051bWJlcnxTdHJpbmc9fSBudW0gICBPcHRpb25hbCB3aWR0aCBudW1iZXJcbiAqIEBwYXJhbSAge0Jvb2xlYW59IHNraXBMaXN0ZW5lcnMgU2tpcCB0aGUgJ3Jlc2l6ZScgZXZlbnQgdHJpZ2dlclxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH0gVGhpcyBjb21wb25lbnQsIHdoZW4gc2V0dGluZyB0aGUgd2lkdGhcbiAqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IFRoZSB3aWR0aCwgd2hlbiBnZXR0aW5nXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLndpZHRoID0gZnVuY3Rpb24obnVtLCBza2lwTGlzdGVuZXJzKXtcbiAgcmV0dXJuIHRoaXMuZGltZW5zaW9uKCd3aWR0aCcsIG51bSwgc2tpcExpc3RlbmVycyk7XG59O1xuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIGhlaWdodCBvZiB0aGUgY29tcG9uZW50IChDU1MgdmFsdWVzKVxuICpcbiAqIFNldHRpbmcgdGhlIHZpZGVvIHRhZyBkaW1lbnNpb24gdmFsdWVzIG9ubHkgd29ya3Mgd2l0aCB2YWx1ZXMgaW4gcGl4ZWxzLlxuICogUGVyY2VudCB2YWx1ZXMgd2lsbCBub3Qgd29yay5cbiAqIFNvbWUgcGVyY2VudHMgY2FuIGJlIHVzZWQsIGJ1dCB3aWR0aCgpL2hlaWdodCgpIHdpbGwgcmV0dXJuIHRoZSBudW1iZXIgKyAlLFxuICogbm90IHRoZSBhY3R1YWwgY29tcHV0ZWQgd2lkdGgvaGVpZ2h0LlxuICpcbiAqIEBwYXJhbSAge051bWJlcnxTdHJpbmc9fSBudW0gICAgIE5ldyBjb21wb25lbnQgaGVpZ2h0XG4gKiBAcGFyYW0gIHtCb29sZWFuPX0gc2tpcExpc3RlbmVycyBTa2lwIHRoZSByZXNpemUgZXZlbnQgdHJpZ2dlclxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH0gVGhpcyBjb21wb25lbnQsIHdoZW4gc2V0dGluZyB0aGUgaGVpZ2h0XG4gKiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBUaGUgaGVpZ2h0LCB3aGVuIGdldHRpbmdcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24obnVtLCBza2lwTGlzdGVuZXJzKXtcbiAgcmV0dXJuIHRoaXMuZGltZW5zaW9uKCdoZWlnaHQnLCBudW0sIHNraXBMaXN0ZW5lcnMpO1xufTtcblxuLyoqXG4gKiBTZXQgYm90aCB3aWR0aCBhbmQgaGVpZ2h0IGF0IHRoZSBzYW1lIHRpbWVcbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ8U3RyaW5nfSB3aWR0aFxuICogQHBhcmFtICB7TnVtYmVyfFN0cmluZ30gaGVpZ2h0XG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fSBUaGUgY29tcG9uZW50XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmRpbWVuc2lvbnMgPSBmdW5jdGlvbih3aWR0aCwgaGVpZ2h0KXtcbiAgLy8gU2tpcCByZXNpemUgbGlzdGVuZXJzIG9uIHdpZHRoIGZvciBvcHRpbWl6YXRpb25cbiAgcmV0dXJuIHRoaXMud2lkdGgod2lkdGgsIHRydWUpLmhlaWdodChoZWlnaHQpO1xufTtcblxuLyoqXG4gKiBHZXQgb3Igc2V0IHdpZHRoIG9yIGhlaWdodFxuICpcbiAqIFRoaXMgaXMgdGhlIHNoYXJlZCBjb2RlIGZvciB0aGUgd2lkdGgoKSBhbmQgaGVpZ2h0KCkgbWV0aG9kcy5cbiAqIEFsbCBmb3IgYW4gaW50ZWdlciwgaW50ZWdlciArICdweCcgb3IgaW50ZWdlciArICclJztcbiAqXG4gKiBLbm93biBpc3N1ZTogSGlkZGVuIGVsZW1lbnRzIG9mZmljaWFsbHkgaGF2ZSBhIHdpZHRoIG9mIDAuIFdlJ3JlIGRlZmF1bHRpbmdcbiAqIHRvIHRoZSBzdHlsZS53aWR0aCB2YWx1ZSBhbmQgZmFsbGluZyBiYWNrIHRvIGNvbXB1dGVkU3R5bGUgd2hpY2ggaGFzIHRoZVxuICogaGlkZGVuIGVsZW1lbnQgaXNzdWUuIEluZm8sIGJ1dCBwcm9iYWJseSBub3QgYW4gZWZmaWNpZW50IGZpeDpcbiAqIGh0dHA6Ly93d3cuZm9saW90ZWsuY29tL2RldmJsb2cvZ2V0dGluZy10aGUtd2lkdGgtb2YtYS1oaWRkZW4tZWxlbWVudC13aXRoLWpxdWVyeS11c2luZy13aWR0aC9cbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHdpZHRoT3JIZWlnaHQgICd3aWR0aCcgb3IgJ2hlaWdodCdcbiAqIEBwYXJhbSAge051bWJlcnxTdHJpbmc9fSBudW0gICAgIE5ldyBkaW1lbnNpb25cbiAqIEBwYXJhbSAge0Jvb2xlYW49fSBza2lwTGlzdGVuZXJzIFNraXAgcmVzaXplIGV2ZW50IHRyaWdnZXJcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9IFRoZSBjb21wb25lbnQgaWYgYSBkaW1lbnNpb24gd2FzIHNldFxuICogQHJldHVybiB7TnVtYmVyfFN0cmluZ30gVGhlIGRpbWVuc2lvbiBpZiBub3RoaW5nIHdhcyBzZXRcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmRpbWVuc2lvbiA9IGZ1bmN0aW9uKHdpZHRoT3JIZWlnaHQsIG51bSwgc2tpcExpc3RlbmVycyl7XG4gIGlmIChudW0gIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChudW0gPT09IG51bGwgfHwgdmpzLmlzTmFOKG51bSkpIHtcbiAgICAgIG51bSA9IDA7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNpbmcgY3NzIHdpZHRoL2hlaWdodCAoJSBvciBweCkgYW5kIGFkanVzdFxuICAgIGlmICgoJycrbnVtKS5pbmRleE9mKCclJykgIT09IC0xIHx8ICgnJytudW0pLmluZGV4T2YoJ3B4JykgIT09IC0xKSB7XG4gICAgICB0aGlzLmVsXy5zdHlsZVt3aWR0aE9ySGVpZ2h0XSA9IG51bTtcbiAgICB9IGVsc2UgaWYgKG51bSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLmVsXy5zdHlsZVt3aWR0aE9ySGVpZ2h0XSA9ICcnO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsXy5zdHlsZVt3aWR0aE9ySGVpZ2h0XSA9IG51bSsncHgnO1xuICAgIH1cblxuICAgIC8vIHNraXBMaXN0ZW5lcnMgYWxsb3dzIHVzIHRvIGF2b2lkIHRyaWdnZXJpbmcgdGhlIHJlc2l6ZSBldmVudCB3aGVuIHNldHRpbmcgYm90aCB3aWR0aCBhbmQgaGVpZ2h0XG4gICAgaWYgKCFza2lwTGlzdGVuZXJzKSB7IHRoaXMudHJpZ2dlcigncmVzaXplJyk7IH1cblxuICAgIC8vIFJldHVybiBjb21wb25lbnRcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIE5vdCBzZXR0aW5nIGEgdmFsdWUsIHNvIGdldHRpbmcgaXRcbiAgLy8gTWFrZSBzdXJlIGVsZW1lbnQgZXhpc3RzXG4gIGlmICghdGhpcy5lbF8pIHJldHVybiAwO1xuXG4gIC8vIEdldCBkaW1lbnNpb24gdmFsdWUgZnJvbSBzdHlsZVxuICB2YXIgdmFsID0gdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF07XG4gIHZhciBweEluZGV4ID0gdmFsLmluZGV4T2YoJ3B4Jyk7XG4gIGlmIChweEluZGV4ICE9PSAtMSkge1xuICAgIC8vIFJldHVybiB0aGUgcGl4ZWwgdmFsdWUgd2l0aCBubyAncHgnXG4gICAgcmV0dXJuIHBhcnNlSW50KHZhbC5zbGljZSgwLHB4SW5kZXgpLCAxMCk7XG5cbiAgLy8gTm8gcHggc28gdXNpbmcgJSBvciBubyBzdHlsZSB3YXMgc2V0LCBzbyBmYWxsaW5nIGJhY2sgdG8gb2Zmc2V0V2lkdGgvaGVpZ2h0XG4gIC8vIElmIGNvbXBvbmVudCBoYXMgZGlzcGxheTpub25lLCBvZmZzZXQgd2lsbCByZXR1cm4gMFxuICAvLyBUT0RPOiBoYW5kbGUgZGlzcGxheTpub25lIGFuZCBubyBkaW1lbnNpb24gc3R5bGUgdXNpbmcgcHhcbiAgfSBlbHNlIHtcblxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLmVsX1snb2Zmc2V0Jyt2anMuY2FwaXRhbGl6ZSh3aWR0aE9ySGVpZ2h0KV0sIDEwKTtcblxuICAgIC8vIENvbXB1dGVkU3R5bGUgdmVyc2lvbi5cbiAgICAvLyBPbmx5IGRpZmZlcmVuY2UgaXMgaWYgdGhlIGVsZW1lbnQgaXMgaGlkZGVuIGl0IHdpbGwgcmV0dXJuXG4gICAgLy8gdGhlIHBlcmNlbnQgdmFsdWUgKGUuZy4gJzEwMCUnJylcbiAgICAvLyBpbnN0ZWFkIG9mIHplcm8gbGlrZSBvZmZzZXRXaWR0aCByZXR1cm5zLlxuICAgIC8vIHZhciB2YWwgPSB2anMuZ2V0Q29tcHV0ZWRTdHlsZVZhbHVlKHRoaXMuZWxfLCB3aWR0aE9ySGVpZ2h0KTtcbiAgICAvLyB2YXIgcHhJbmRleCA9IHZhbC5pbmRleE9mKCdweCcpO1xuXG4gICAgLy8gaWYgKHB4SW5kZXggIT09IC0xKSB7XG4gICAgLy8gICByZXR1cm4gdmFsLnNsaWNlKDAsIHB4SW5kZXgpO1xuICAgIC8vIH0gZWxzZSB7XG4gICAgLy8gICByZXR1cm4gdmFsO1xuICAgIC8vIH1cbiAgfVxufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSB3aWR0aCBhbmQvb3IgaGVpZ2h0IG9mIHRoZSBjb21wb25lbnQgY2hhbmdlc1xuICogQGV2ZW50IHJlc2l6ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5vblJlc2l6ZTtcblxuLyoqXG4gKiBFbWl0ICd0YXAnIGV2ZW50cyB3aGVuIHRvdWNoIGV2ZW50cyBhcmUgc3VwcG9ydGVkXG4gKlxuICogVGhpcyBpcyB1c2VkIHRvIHN1cHBvcnQgdG9nZ2xpbmcgdGhlIGNvbnRyb2xzIHRocm91Z2ggYSB0YXAgb24gdGhlIHZpZGVvLlxuICpcbiAqIFdlJ3JlIHJlcXVpcmVpbmcgdGhlbSB0byBiZSBlbmFibGVkIGJlY2F1c2Ugb3RoZXJ3aXNlIGV2ZXJ5IGNvbXBvbmVudCB3b3VsZFxuICogaGF2ZSB0aGlzIGV4dHJhIG92ZXJoZWFkIHVubmVjZXNzYXJpbHksIG9uIG1vYmlsZSBkZXZpY2VzIHdoZXJlIGV4dHJhXG4gKiBvdmVyaGVhZCBpcyBlc3BlY2lhbGx5IGJhZC5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmVtaXRUYXBFdmVudHMgPSBmdW5jdGlvbigpe1xuICB2YXIgdG91Y2hTdGFydCwgZmlyc3RUb3VjaCwgdG91Y2hUaW1lLCBjb3VsZEJlVGFwLCBub1RhcCxcbiAgICAgIHhkaWZmLCB5ZGlmZiwgdG91Y2hEaXN0YW5jZSwgdGFwTW92ZW1lbnRUaHJlc2hvbGQ7XG5cbiAgLy8gVHJhY2sgdGhlIHN0YXJ0IHRpbWUgc28gd2UgY2FuIGRldGVybWluZSBob3cgbG9uZyB0aGUgdG91Y2ggbGFzdGVkXG4gIHRvdWNoU3RhcnQgPSAwO1xuICBmaXJzdFRvdWNoID0gbnVsbDtcblxuICAvLyBNYXhpbXVtIG1vdmVtZW50IGFsbG93ZWQgZHVyaW5nIGEgdG91Y2ggZXZlbnQgdG8gc3RpbGwgYmUgY29uc2lkZXJlZCBhIHRhcFxuICB0YXBNb3ZlbWVudFRocmVzaG9sZCA9IDIyO1xuXG4gIHRoaXMub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZmluZ2VyLCBkb24ndCBjb25zaWRlciB0cmVhdGluZyB0aGlzIGFzIGEgY2xpY2tcbiAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGZpcnN0VG91Y2ggPSBldmVudC50b3VjaGVzWzBdO1xuICAgICAgLy8gUmVjb3JkIHN0YXJ0IHRpbWUgc28gd2UgY2FuIGRldGVjdCBhIHRhcCB2cy4gXCJ0b3VjaCBhbmQgaG9sZFwiXG4gICAgICB0b3VjaFN0YXJ0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAvLyBSZXNldCBjb3VsZEJlVGFwIHRyYWNraW5nXG4gICAgICBjb3VsZEJlVGFwID0gdHJ1ZTtcbiAgICB9XG4gIH0pO1xuXG4gIHRoaXMub24oJ3RvdWNobW92ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gSWYgbW9yZSB0aGFuIG9uZSBmaW5nZXIsIGRvbid0IGNvbnNpZGVyIHRyZWF0aW5nIHRoaXMgYXMgYSBjbGlja1xuICAgIGlmIChldmVudC50b3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvdWxkQmVUYXAgPSBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGZpcnN0VG91Y2gpIHtcbiAgICAgIC8vIFNvbWUgZGV2aWNlcyB3aWxsIHRocm93IHRvdWNobW92ZXMgZm9yIGFsbCBidXQgdGhlIHNsaWdodGVzdCBvZiB0YXBzLlxuICAgICAgLy8gU28sIGlmIHdlIG1vdmVkIG9ubHkgYSBzbWFsbCBkaXN0YW5jZSwgdGhpcyBjb3VsZCBzdGlsbCBiZSBhIHRhcFxuICAgICAgeGRpZmYgPSBldmVudC50b3VjaGVzWzBdLnBhZ2VYIC0gZmlyc3RUb3VjaC5wYWdlWDtcbiAgICAgIHlkaWZmID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWSAtIGZpcnN0VG91Y2gucGFnZVk7XG4gICAgICB0b3VjaERpc3RhbmNlID0gTWF0aC5zcXJ0KHhkaWZmICogeGRpZmYgKyB5ZGlmZiAqIHlkaWZmKTtcbiAgICAgIGlmICh0b3VjaERpc3RhbmNlID4gdGFwTW92ZW1lbnRUaHJlc2hvbGQpIHtcbiAgICAgICAgY291bGRCZVRhcCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbiAgbm9UYXAgPSBmdW5jdGlvbigpe1xuICAgIGNvdWxkQmVUYXAgPSBmYWxzZTtcbiAgfTtcbiAgLy8gVE9ETzogTGlzdGVuIHRvIHRoZSBvcmlnaW5hbCB0YXJnZXQuIGh0dHA6Ly95b3V0dS5iZS9EdWpmcFhPS1VwOD90PTEzbThzXG4gIHRoaXMub24oJ3RvdWNobGVhdmUnLCBub1RhcCk7XG4gIHRoaXMub24oJ3RvdWNoY2FuY2VsJywgbm9UYXApO1xuXG4gIC8vIFdoZW4gdGhlIHRvdWNoIGVuZHMsIG1lYXN1cmUgaG93IGxvbmcgaXQgdG9vayBhbmQgdHJpZ2dlciB0aGUgYXBwcm9wcmlhdGVcbiAgLy8gZXZlbnRcbiAgdGhpcy5vbigndG91Y2hlbmQnLCBmdW5jdGlvbihldmVudCkge1xuICAgIGZpcnN0VG91Y2ggPSBudWxsO1xuICAgIC8vIFByb2NlZWQgb25seSBpZiB0aGUgdG91Y2htb3ZlL2xlYXZlL2NhbmNlbCBldmVudCBkaWRuJ3QgaGFwcGVuXG4gICAgaWYgKGNvdWxkQmVUYXAgPT09IHRydWUpIHtcbiAgICAgIC8vIE1lYXN1cmUgaG93IGxvbmcgdGhlIHRvdWNoIGxhc3RlZFxuICAgICAgdG91Y2hUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0b3VjaFN0YXJ0O1xuICAgICAgLy8gVGhlIHRvdWNoIG5lZWRzIHRvIGJlIHF1aWNrIGluIG9yZGVyIHRvIGNvbnNpZGVyIGl0IGEgdGFwXG4gICAgICBpZiAodG91Y2hUaW1lIDwgMjUwKSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIERvbid0IGxldCBicm93c2VyIHR1cm4gdGhpcyBpbnRvIGEgY2xpY2tcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd0YXAnKTtcbiAgICAgICAgLy8gSXQgbWF5IGJlIGdvb2QgdG8gY29weSB0aGUgdG91Y2hlbmQgZXZlbnQgb2JqZWN0IGFuZCBjaGFuZ2UgdGhlXG4gICAgICAgIC8vIHR5cGUgdG8gdGFwLCBpZiB0aGUgb3RoZXIgZXZlbnQgcHJvcGVydGllcyBhcmVuJ3QgZXhhY3QgYWZ0ZXJcbiAgICAgICAgLy8gdmpzLmZpeEV2ZW50IHJ1bnMgKGUuZy4gZXZlbnQudGFyZ2V0KVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIFJlcG9ydCB1c2VyIHRvdWNoIGFjdGl2aXR5IHdoZW4gdG91Y2ggZXZlbnRzIG9jY3VyXG4gKlxuICogVXNlciBhY3Rpdml0eSBpcyB1c2VkIHRvIGRldGVybWluZSB3aGVuIGNvbnRyb2xzIHNob3VsZCBzaG93L2hpZGUuIEl0J3NcbiAqIHJlbGF0aXZlbHkgc2ltcGxlIHdoZW4gaXQgY29tZXMgdG8gbW91c2UgZXZlbnRzLCBiZWNhdXNlIGFueSBtb3VzZSBldmVudFxuICogc2hvdWxkIHNob3cgdGhlIGNvbnRyb2xzLiBTbyB3ZSBjYXB0dXJlIG1vdXNlIGV2ZW50cyB0aGF0IGJ1YmJsZSB1cCB0byB0aGVcbiAqIHBsYXllciBhbmQgcmVwb3J0IGFjdGl2aXR5IHdoZW4gdGhhdCBoYXBwZW5zLlxuICpcbiAqIFdpdGggdG91Y2ggZXZlbnRzIGl0IGlzbid0IGFzIGVhc3kuIFdlIGNhbid0IHJlbHkgb24gdG91Y2ggZXZlbnRzIGF0IHRoZVxuICogcGxheWVyIGxldmVsLCBiZWNhdXNlIGEgdGFwICh0b3VjaHN0YXJ0ICsgdG91Y2hlbmQpIG9uIHRoZSB2aWRlbyBpdHNlbGYgb25cbiAqIG1vYmlsZSBkZXZpY2VzIGlzIG1lYW50IHRvIHR1cm4gY29udHJvbHMgb2ZmIChhbmQgb24pLiBVc2VyIGFjdGl2aXR5IGlzXG4gKiBjaGVja2VkIGFzeW5jaHJvbm91c2x5LCBzbyB3aGF0IGNvdWxkIGhhcHBlbiBpcyBhIHRhcCBldmVudCBvbiB0aGUgdmlkZW9cbiAqIHR1cm5zIHRoZSBjb250cm9scyBvZmYsIHRoZW4gdGhlIHRvdWNoZW5kIGV2ZW50IGJ1YmJsZXMgdXAgdG8gdGhlIHBsYXllcixcbiAqIHdoaWNoIGlmIGl0IHJlcG9ydGVkIHVzZXIgYWN0aXZpdHksIHdvdWxkIHR1cm4gdGhlIGNvbnRyb2xzIHJpZ2h0IGJhY2sgb24uXG4gKiAoV2UgYWxzbyBkb24ndCB3YW50IHRvIGNvbXBsZXRlbHkgYmxvY2sgdG91Y2ggZXZlbnRzIGZyb20gYnViYmxpbmcgdXApXG4gKlxuICogQWxzbyBhIHRvdWNobW92ZSwgdG91Y2graG9sZCwgYW5kIGFueXRoaW5nIG90aGVyIHRoYW4gYSB0YXAgaXMgbm90IHN1cHBvc2VkXG4gKiB0byB0dXJuIHRoZSBjb250cm9scyBiYWNrIG9uIG9uIGEgbW9iaWxlIGRldmljZS5cbiAqXG4gKiBIZXJlIHdlJ3JlIHNldHRpbmcgdGhlIGRlZmF1bHQgY29tcG9uZW50IGJlaGF2aW9yIHRvIHJlcG9ydCB1c2VyIGFjdGl2aXR5XG4gKiB3aGVuZXZlciB0b3VjaCBldmVudHMgaGFwcGVuLCBhbmQgdGhpcyBjYW4gYmUgdHVybmVkIG9mZiBieSBjb21wb25lbnRzIHRoYXRcbiAqIHdhbnQgdG91Y2ggZXZlbnRzIHRvIGFjdCBkaWZmZXJlbnRseS5cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuZW5hYmxlVG91Y2hBY3Rpdml0eSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVwb3J0LCB0b3VjaEhvbGRpbmcsIHRvdWNoRW5kO1xuXG4gIC8vIGxpc3RlbmVyIGZvciByZXBvcnRpbmcgdGhhdCB0aGUgdXNlciBpcyBhY3RpdmVcbiAgcmVwb3J0ID0gdmpzLmJpbmQodGhpcy5wbGF5ZXIoKSwgdGhpcy5wbGF5ZXIoKS5yZXBvcnRVc2VyQWN0aXZpdHkpO1xuXG4gIHRoaXMub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbigpIHtcbiAgICByZXBvcnQoKTtcbiAgICAvLyBGb3IgYXMgbG9uZyBhcyB0aGUgdGhleSBhcmUgdG91Y2hpbmcgdGhlIGRldmljZSBvciBoYXZlIHRoZWlyIG1vdXNlIGRvd24sXG4gICAgLy8gd2UgY29uc2lkZXIgdGhlbSBhY3RpdmUgZXZlbiBpZiB0aGV5J3JlIG5vdCBtb3ZpbmcgdGhlaXIgZmluZ2VyIG9yIG1vdXNlLlxuICAgIC8vIFNvIHdlIHdhbnQgdG8gY29udGludWUgdG8gdXBkYXRlIHRoYXQgdGhleSBhcmUgYWN0aXZlXG4gICAgY2xlYXJJbnRlcnZhbCh0b3VjaEhvbGRpbmcpO1xuICAgIC8vIHJlcG9ydCBhdCB0aGUgc2FtZSBpbnRlcnZhbCBhcyBhY3Rpdml0eUNoZWNrXG4gICAgdG91Y2hIb2xkaW5nID0gc2V0SW50ZXJ2YWwocmVwb3J0LCAyNTApO1xuICB9KTtcblxuICB0b3VjaEVuZCA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgcmVwb3J0KCk7XG4gICAgLy8gc3RvcCB0aGUgaW50ZXJ2YWwgdGhhdCBtYWludGFpbnMgYWN0aXZpdHkgaWYgdGhlIHRvdWNoIGlzIGhvbGRpbmdcbiAgICBjbGVhckludGVydmFsKHRvdWNoSG9sZGluZyk7XG4gIH07XG5cbiAgdGhpcy5vbigndG91Y2htb3ZlJywgcmVwb3J0KTtcbiAgdGhpcy5vbigndG91Y2hlbmQnLCB0b3VjaEVuZCk7XG4gIHRoaXMub24oJ3RvdWNoY2FuY2VsJywgdG91Y2hFbmQpO1xufTtcblxuLyogQnV0dG9uIC0gQmFzZSBjbGFzcyBmb3IgYWxsIGJ1dHRvbnNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBidXR0b25zXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNsYXNzXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkJ1dHRvbiA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAaW5oZXJpdERvY1xuICAgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHRoaXMuZW1pdFRhcEV2ZW50cygpO1xuXG4gICAgdGhpcy5vbigndGFwJywgdGhpcy5vbkNsaWNrKTtcbiAgICB0aGlzLm9uKCdjbGljaycsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5vbignZm9jdXMnLCB0aGlzLm9uRm9jdXMpO1xuICAgIHRoaXMub24oJ2JsdXInLCB0aGlzLm9uQmx1cik7XG4gIH1cbn0pO1xuXG52anMuQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKHR5cGUsIHByb3BzKXtcbiAgdmFyIGVsO1xuXG4gIC8vIEFkZCBzdGFuZGFyZCBBcmlhIGFuZCBUYWJpbmRleCBpbmZvXG4gIHByb3BzID0gdmpzLm9iai5tZXJnZSh7XG4gICAgY2xhc3NOYW1lOiB0aGlzLmJ1aWxkQ1NTQ2xhc3MoKSxcbiAgICAncm9sZSc6ICdidXR0b24nLFxuICAgICdhcmlhLWxpdmUnOiAncG9saXRlJywgLy8gbGV0IHRoZSBzY3JlZW4gcmVhZGVyIHVzZXIga25vdyB0aGF0IHRoZSB0ZXh0IG9mIHRoZSBidXR0b24gbWF5IGNoYW5nZVxuICAgIHRhYkluZGV4OiAwXG4gIH0sIHByb3BzKTtcblxuICBlbCA9IHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgdHlwZSwgcHJvcHMpO1xuXG4gIC8vIGlmIGlubmVySFRNTCBoYXNuJ3QgYmVlbiBvdmVycmlkZGVuIChiaWdQbGF5QnV0dG9uKSwgYWRkIGNvbnRlbnQgZWxlbWVudHNcbiAgaWYgKCFwcm9wcy5pbm5lckhUTUwpIHtcbiAgICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1jb250cm9sLWNvbnRlbnQnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRyb2xUZXh0XyA9IHZqcy5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1jb250cm9sLXRleHQnLFxuICAgICAgaW5uZXJIVE1MOiB0aGlzLmxvY2FsaXplKHRoaXMuYnV0dG9uVGV4dCkgfHwgJ05lZWQgVGV4dCdcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGVudEVsXy5hcHBlbmRDaGlsZCh0aGlzLmNvbnRyb2xUZXh0Xyk7XG4gICAgZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKTtcbiAgfVxuXG4gIHJldHVybiBlbDtcbn07XG5cbnZqcy5CdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbigpe1xuICAvLyBUT0RPOiBDaGFuZ2UgdmpzLWNvbnRyb2wgdG8gdmpzLWJ1dHRvbj9cbiAgcmV0dXJuICd2anMtY29udHJvbCAnICsgdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xufTtcblxuICAvLyBDbGljayAtIE92ZXJyaWRlIHdpdGggc3BlY2lmaWMgZnVuY3Rpb25hbGl0eSBmb3IgYnV0dG9uXG52anMuQnV0dG9uLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXt9O1xuXG4gIC8vIEZvY3VzIC0gQWRkIGtleWJvYXJkIGZ1bmN0aW9uYWxpdHkgdG8gZWxlbWVudFxudmpzLkJ1dHRvbi5wcm90b3R5cGUub25Gb2N1cyA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5vbihkb2N1bWVudCwgJ2tleWRvd24nLCB2anMuYmluZCh0aGlzLCB0aGlzLm9uS2V5UHJlc3MpKTtcbn07XG5cbiAgLy8gS2V5UHJlc3MgKGRvY3VtZW50IGxldmVsKSAtIFRyaWdnZXIgY2xpY2sgd2hlbiBrZXlzIGFyZSBwcmVzc2VkXG52anMuQnV0dG9uLnByb3RvdHlwZS5vbktleVByZXNzID0gZnVuY3Rpb24oZXZlbnQpe1xuICAvLyBDaGVjayBmb3Igc3BhY2UgYmFyICgzMikgb3IgZW50ZXIgKDEzKSBrZXlzXG4gIGlmIChldmVudC53aGljaCA9PSAzMiB8fCBldmVudC53aGljaCA9PSAxMykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5vbkNsaWNrKCk7XG4gIH1cbn07XG5cbi8vIEJsdXIgLSBSZW1vdmUga2V5Ym9hcmQgdHJpZ2dlcnNcbnZqcy5CdXR0b24ucHJvdG90eXBlLm9uQmx1ciA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5vZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdmpzLmJpbmQodGhpcywgdGhpcy5vbktleVByZXNzKSk7XG59O1xuLyogU2xpZGVyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyoqXG4gKiBUaGUgYmFzZSBmdW5jdGlvbmFsaXR5IGZvciBzbGlkZXJzIGxpa2UgdGhlIHZvbHVtZSBiYXIgYW5kIHNlZWsgYmFyXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuU2xpZGVyID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICAvLyBTZXQgcHJvcGVydHkgbmFtZXMgdG8gYmFyIGFuZCBoYW5kbGUgdG8gbWF0Y2ggd2l0aCB0aGUgY2hpbGQgU2xpZGVyIGNsYXNzIGlzIGxvb2tpbmcgZm9yXG4gICAgdGhpcy5iYXIgPSB0aGlzLmdldENoaWxkKHRoaXMub3B0aW9uc19bJ2Jhck5hbWUnXSk7XG4gICAgdGhpcy5oYW5kbGUgPSB0aGlzLmdldENoaWxkKHRoaXMub3B0aW9uc19bJ2hhbmRsZU5hbWUnXSk7XG5cbiAgICB0aGlzLm9uKCdtb3VzZWRvd24nLCB0aGlzLm9uTW91c2VEb3duKTtcbiAgICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgdGhpcy5vbignZm9jdXMnLCB0aGlzLm9uRm9jdXMpO1xuICAgIHRoaXMub24oJ2JsdXInLCB0aGlzLm9uQmx1cik7XG4gICAgdGhpcy5vbignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuXG4gICAgdGhpcy5wbGF5ZXJfLm9uKCdjb250cm9sc3Zpc2libGUnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuXG4gICAgcGxheWVyLm9uKHRoaXMucGxheWVyRXZlbnQsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlKSk7XG5cbiAgICB0aGlzLmJvdW5kRXZlbnRzID0ge307XG5cblxuICAgIHRoaXMuYm91bmRFdmVudHMubW92ZSA9IHZqcy5iaW5kKHRoaXMsIHRoaXMub25Nb3VzZU1vdmUpO1xuICAgIHRoaXMuYm91bmRFdmVudHMuZW5kID0gdmpzLmJpbmQodGhpcywgdGhpcy5vbk1vdXNlVXApO1xuICB9XG59KTtcblxudmpzLlNsaWRlci5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbih0eXBlLCBwcm9wcykge1xuICBwcm9wcyA9IHByb3BzIHx8IHt9O1xuICAvLyBBZGQgdGhlIHNsaWRlciBlbGVtZW50IGNsYXNzIHRvIGFsbCBzdWIgY2xhc3Nlc1xuICBwcm9wcy5jbGFzc05hbWUgPSBwcm9wcy5jbGFzc05hbWUgKyAnIHZqcy1zbGlkZXInO1xuICBwcm9wcyA9IHZqcy5vYmoubWVyZ2Uoe1xuICAgICdyb2xlJzogJ3NsaWRlcicsXG4gICAgJ2FyaWEtdmFsdWVub3cnOiAwLFxuICAgICdhcmlhLXZhbHVlbWluJzogMCxcbiAgICAnYXJpYS12YWx1ZW1heCc6IDEwMCxcbiAgICB0YWJJbmRleDogMFxuICB9LCBwcm9wcyk7XG5cbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgdHlwZSwgcHJvcHMpO1xufTtcblxudmpzLlNsaWRlci5wcm90b3R5cGUub25Nb3VzZURvd24gPSBmdW5jdGlvbihldmVudCl7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHZqcy5ibG9ja1RleHRTZWxlY3Rpb24oKTtcbiAgdGhpcy5hZGRDbGFzcygndmpzLXNsaWRpbmcnKTtcblxuICB2anMub24oZG9jdW1lbnQsICdtb3VzZW1vdmUnLCB0aGlzLmJvdW5kRXZlbnRzLm1vdmUpO1xuICB2anMub24oZG9jdW1lbnQsICdtb3VzZXVwJywgdGhpcy5ib3VuZEV2ZW50cy5lbmQpO1xuICB2anMub24oZG9jdW1lbnQsICd0b3VjaG1vdmUnLCB0aGlzLmJvdW5kRXZlbnRzLm1vdmUpO1xuICB2anMub24oZG9jdW1lbnQsICd0b3VjaGVuZCcsIHRoaXMuYm91bmRFdmVudHMuZW5kKTtcblxuICB0aGlzLm9uTW91c2VNb3ZlKGV2ZW50KTtcbn07XG5cbi8vIFRvIGJlIG92ZXJyaWRkZW4gYnkgYSBzdWJjbGFzc1xudmpzLlNsaWRlci5wcm90b3R5cGUub25Nb3VzZU1vdmUgPSBmdW5jdGlvbigpe307XG5cbnZqcy5TbGlkZXIucHJvdG90eXBlLm9uTW91c2VVcCA9IGZ1bmN0aW9uKCkge1xuICB2anMudW5ibG9ja1RleHRTZWxlY3Rpb24oKTtcbiAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXNsaWRpbmcnKTtcblxuICB2anMub2ZmKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgdGhpcy5ib3VuZEV2ZW50cy5tb3ZlLCBmYWxzZSk7XG4gIHZqcy5vZmYoZG9jdW1lbnQsICdtb3VzZXVwJywgdGhpcy5ib3VuZEV2ZW50cy5lbmQsIGZhbHNlKTtcbiAgdmpzLm9mZihkb2N1bWVudCwgJ3RvdWNobW92ZScsIHRoaXMuYm91bmRFdmVudHMubW92ZSwgZmFsc2UpO1xuICB2anMub2ZmKGRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLmJvdW5kRXZlbnRzLmVuZCwgZmFsc2UpO1xuXG4gIHRoaXMudXBkYXRlKCk7XG59O1xuXG52anMuU2xpZGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICAvLyBJbiBWb2x1bWVCYXIgaW5pdCB3ZSBoYXZlIGEgc2V0VGltZW91dCBmb3IgdXBkYXRlIHRoYXQgcG9wcyBhbmQgdXBkYXRlIHRvIHRoZSBlbmQgb2YgdGhlXG4gIC8vIGV4ZWN1dGlvbiBzdGFjay4gVGhlIHBsYXllciBpcyBkZXN0cm95ZWQgYmVmb3JlIHRoZW4gdXBkYXRlIHdpbGwgY2F1c2UgYW4gZXJyb3JcbiAgaWYgKCF0aGlzLmVsXykgcmV0dXJuO1xuXG4gIC8vIElmIHNjcnViYmluZywgd2UgY291bGQgdXNlIGEgY2FjaGVkIHZhbHVlIHRvIG1ha2UgdGhlIGhhbmRsZSBrZWVwIHVwIHdpdGggdGhlIHVzZXIncyBtb3VzZS5cbiAgLy8gT24gSFRNTDUgYnJvd3NlcnMgc2NydWJiaW5nIGlzIHJlYWxseSBzbW9vdGgsIGJ1dCBzb21lIGZsYXNoIHBsYXllcnMgYXJlIHNsb3csIHNvIHdlIG1pZ2h0IHdhbnQgdG8gdXRpbGl6ZSB0aGlzIGxhdGVyLlxuICAvLyB2YXIgcHJvZ3Jlc3MgPSAgKHRoaXMucGxheWVyXy5zY3J1YmJpbmcpID8gdGhpcy5wbGF5ZXJfLmdldENhY2hlKCkuY3VycmVudFRpbWUgLyB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpIC8gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG5cbiAgdmFyIGJhclByb2dyZXNzLFxuICAgICAgcHJvZ3Jlc3MgPSB0aGlzLmdldFBlcmNlbnQoKSxcbiAgICAgIGhhbmRsZSA9IHRoaXMuaGFuZGxlLFxuICAgICAgYmFyID0gdGhpcy5iYXI7XG5cbiAgLy8gUHJvdGVjdCBhZ2FpbnN0IG5vIGR1cmF0aW9uIGFuZCBvdGhlciBkaXZpc2lvbiBpc3N1ZXNcbiAgaWYgKGlzTmFOKHByb2dyZXNzKSkgeyBwcm9ncmVzcyA9IDA7IH1cblxuICBiYXJQcm9ncmVzcyA9IHByb2dyZXNzO1xuXG4gIC8vIElmIHRoZXJlIGlzIGEgaGFuZGxlLCB3ZSBuZWVkIHRvIGFjY291bnQgZm9yIHRoZSBoYW5kbGUgaW4gb3VyIGNhbGN1bGF0aW9uIGZvciBwcm9ncmVzcyBiYXJcbiAgLy8gc28gdGhhdCBpdCBkb2Vzbid0IGZhbGwgc2hvcnQgb2Ygb3IgZXh0ZW5kIHBhc3QgdGhlIGhhbmRsZS5cbiAgaWYgKGhhbmRsZSkge1xuXG4gICAgdmFyIGJveCA9IHRoaXMuZWxfLFxuICAgICAgICBib3hXaWR0aCA9IGJveC5vZmZzZXRXaWR0aCxcblxuICAgICAgICBoYW5kbGVXaWR0aCA9IGhhbmRsZS5lbCgpLm9mZnNldFdpZHRoLFxuXG4gICAgICAgIC8vIFRoZSB3aWR0aCBvZiB0aGUgaGFuZGxlIGluIHBlcmNlbnQgb2YgdGhlIGNvbnRhaW5pbmcgYm94XG4gICAgICAgIC8vIEluIElFLCB3aWR0aHMgbWF5IG5vdCBiZSByZWFkeSB5ZXQgY2F1c2luZyBOYU5cbiAgICAgICAgaGFuZGxlUGVyY2VudCA9IChoYW5kbGVXaWR0aCkgPyBoYW5kbGVXaWR0aCAvIGJveFdpZHRoIDogMCxcblxuICAgICAgICAvLyBHZXQgdGhlIGFkanVzdGVkIHNpemUgb2YgdGhlIGJveCwgY29uc2lkZXJpbmcgdGhhdCB0aGUgaGFuZGxlJ3MgY2VudGVyIG5ldmVyIHRvdWNoZXMgdGhlIGxlZnQgb3IgcmlnaHQgc2lkZS5cbiAgICAgICAgLy8gVGhlcmUgaXMgYSBtYXJnaW4gb2YgaGFsZiB0aGUgaGFuZGxlJ3Mgd2lkdGggb24gYm90aCBzaWRlcy5cbiAgICAgICAgYm94QWRqdXN0ZWRQZXJjZW50ID0gMSAtIGhhbmRsZVBlcmNlbnQsXG5cbiAgICAgICAgLy8gQWRqdXN0IHRoZSBwcm9ncmVzcyB0aGF0IHdlJ2xsIHVzZSB0byBzZXQgd2lkdGhzIHRvIHRoZSBuZXcgYWRqdXN0ZWQgYm94IHdpZHRoXG4gICAgICAgIGFkanVzdGVkUHJvZ3Jlc3MgPSBwcm9ncmVzcyAqIGJveEFkanVzdGVkUGVyY2VudDtcblxuICAgIC8vIFRoZSBiYXIgZG9lcyByZWFjaCB0aGUgbGVmdCBzaWRlLCBzbyB3ZSBuZWVkIHRvIGFjY291bnQgZm9yIHRoaXMgaW4gdGhlIGJhcidzIHdpZHRoXG4gICAgYmFyUHJvZ3Jlc3MgPSBhZGp1c3RlZFByb2dyZXNzICsgKGhhbmRsZVBlcmNlbnQgLyAyKTtcblxuICAgIC8vIE1vdmUgdGhlIGhhbmRsZSBmcm9tIHRoZSBsZWZ0IGJhc2VkIG9uIHRoZSBhZGplY3RlZCBwcm9ncmVzc1xuICAgIGhhbmRsZS5lbCgpLnN0eWxlLmxlZnQgPSB2anMucm91bmQoYWRqdXN0ZWRQcm9ncmVzcyAqIDEwMCwgMikgKyAnJSc7XG4gIH1cblxuICAvLyBTZXQgdGhlIG5ldyBiYXIgd2lkdGhcbiAgaWYgKGJhcikge1xuICAgIGJhci5lbCgpLnN0eWxlLndpZHRoID0gdmpzLnJvdW5kKGJhclByb2dyZXNzICogMTAwLCAyKSArICclJztcbiAgfVxufTtcblxudmpzLlNsaWRlci5wcm90b3R5cGUuY2FsY3VsYXRlRGlzdGFuY2UgPSBmdW5jdGlvbihldmVudCl7XG4gIHZhciBlbCwgYm94LCBib3hYLCBib3hZLCBib3hXLCBib3hILCBoYW5kbGUsIHBhZ2VYLCBwYWdlWTtcblxuICBlbCA9IHRoaXMuZWxfO1xuICBib3ggPSB2anMuZmluZFBvc2l0aW9uKGVsKTtcbiAgYm94VyA9IGJveEggPSBlbC5vZmZzZXRXaWR0aDtcbiAgaGFuZGxlID0gdGhpcy5oYW5kbGU7XG5cbiAgaWYgKHRoaXMub3B0aW9ucygpWyd2ZXJ0aWNhbCddKSB7XG4gICAgYm94WSA9IGJveC50b3A7XG5cbiAgICBpZiAoZXZlbnQuY2hhbmdlZFRvdWNoZXMpIHtcbiAgICAgIHBhZ2VZID0gZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhZ2VZID0gZXZlbnQucGFnZVk7XG4gICAgfVxuXG4gICAgaWYgKGhhbmRsZSkge1xuICAgICAgdmFyIGhhbmRsZUggPSBoYW5kbGUuZWwoKS5vZmZzZXRIZWlnaHQ7XG4gICAgICAvLyBBZGp1c3RlZCBYIGFuZCBXaWR0aCwgc28gaGFuZGxlIGRvZXNuJ3QgZ28gb3V0c2lkZSB0aGUgYmFyXG4gICAgICBib3hZID0gYm94WSArIChoYW5kbGVIIC8gMik7XG4gICAgICBib3hIID0gYm94SCAtIGhhbmRsZUg7XG4gICAgfVxuXG4gICAgLy8gUGVyY2VudCB0aGF0IHRoZSBjbGljayBpcyB0aHJvdWdoIHRoZSBhZGp1c3RlZCBhcmVhXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsICgoYm94WSAtIHBhZ2VZKSArIGJveEgpIC8gYm94SCkpO1xuXG4gIH0gZWxzZSB7XG4gICAgYm94WCA9IGJveC5sZWZ0O1xuXG4gICAgaWYgKGV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICBwYWdlWCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlWCA9IGV2ZW50LnBhZ2VYO1xuICAgIH1cblxuICAgIGlmIChoYW5kbGUpIHtcbiAgICAgIHZhciBoYW5kbGVXID0gaGFuZGxlLmVsKCkub2Zmc2V0V2lkdGg7XG5cbiAgICAgIC8vIEFkanVzdGVkIFggYW5kIFdpZHRoLCBzbyBoYW5kbGUgZG9lc24ndCBnbyBvdXRzaWRlIHRoZSBiYXJcbiAgICAgIGJveFggPSBib3hYICsgKGhhbmRsZVcgLyAyKTtcbiAgICAgIGJveFcgPSBib3hXIC0gaGFuZGxlVztcbiAgICB9XG5cbiAgICAvLyBQZXJjZW50IHRoYXQgdGhlIGNsaWNrIGlzIHRocm91Z2ggdGhlIGFkanVzdGVkIGFyZWFcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKHBhZ2VYIC0gYm94WCkgLyBib3hXKSk7XG4gIH1cbn07XG5cbnZqcy5TbGlkZXIucHJvdG90eXBlLm9uRm9jdXMgPSBmdW5jdGlvbigpe1xuICB2anMub24oZG9jdW1lbnQsICdrZXl1cCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMub25LZXlQcmVzcykpO1xufTtcblxudmpzLlNsaWRlci5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgaWYgKGV2ZW50LndoaWNoID09IDM3IHx8IGV2ZW50LndoaWNoID09IDQwKSB7IC8vIExlZnQgYW5kIERvd24gQXJyb3dzXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLnN0ZXBCYWNrKCk7XG4gIH0gZWxzZSBpZiAoZXZlbnQud2hpY2ggPT0gMzggfHwgZXZlbnQud2hpY2ggPT0gMzkpIHsgLy8gVXAgYW5kIFJpZ2h0IEFycm93c1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zdGVwRm9yd2FyZCgpO1xuICB9XG59O1xuXG52anMuU2xpZGVyLnByb3RvdHlwZS5vbkJsdXIgPSBmdW5jdGlvbigpe1xuICB2anMub2ZmKGRvY3VtZW50LCAna2V5dXAnLCB2anMuYmluZCh0aGlzLCB0aGlzLm9uS2V5UHJlc3MpKTtcbn07XG5cbi8qKlxuICogTGlzdGVuZXIgZm9yIGNsaWNrIGV2ZW50cyBvbiBzbGlkZXIsIHVzZWQgdG8gcHJldmVudCBjbGlja3NcbiAqICAgZnJvbSBidWJibGluZyB1cCB0byBwYXJlbnQgZWxlbWVudHMgbGlrZSBidXR0b24gbWVudXMuXG4gKiBAcGFyYW0gIHtPYmplY3R9IGV2ZW50IEV2ZW50IG9iamVjdFxuICovXG52anMuU2xpZGVyLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oZXZlbnQpe1xuICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn07XG5cbi8qKlxuICogU2Vla0JhciBCZWhhdmlvciBpbmNsdWRlcyBwbGF5IHByb2dyZXNzIGJhciwgYW5kIHNlZWsgaGFuZGxlXG4gKiBOZWVkZWQgc28gaXQgY2FuIGRldGVybWluZSBzZWVrIHBvc2l0aW9uIGJhc2VkIG9uIGhhbmRsZSBwb3NpdGlvbi9zaXplXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5TbGlkZXJIYW5kbGUgPSB2anMuQ29tcG9uZW50LmV4dGVuZCgpO1xuXG4vKipcbiAqIERlZmF1bHQgdmFsdWUgb2YgdGhlIHNsaWRlclxuICpcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuU2xpZGVySGFuZGxlLnByb3RvdHlwZS5kZWZhdWx0VmFsdWUgPSAwO1xuXG4vKiogQGluaGVyaXREb2MgKi9cbnZqcy5TbGlkZXJIYW5kbGUucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24odHlwZSwgcHJvcHMpIHtcbiAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcbiAgLy8gQWRkIHRoZSBzbGlkZXIgZWxlbWVudCBjbGFzcyB0byBhbGwgc3ViIGNsYXNzZXNcbiAgcHJvcHMuY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lICsgJyB2anMtc2xpZGVyLWhhbmRsZSc7XG4gIHByb3BzID0gdmpzLm9iai5tZXJnZSh7XG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+Jyt0aGlzLmRlZmF1bHRWYWx1ZSsnPC9zcGFuPidcbiAgfSwgcHJvcHMpO1xuXG4gIHJldHVybiB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCBwcm9wcyk7XG59O1xuLyogTWVudVxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qKlxuICogVGhlIE1lbnUgY29tcG9uZW50IGlzIHVzZWQgdG8gYnVpbGQgcG9wIHVwIG1lbnVzLCBpbmNsdWRpbmcgc3VidGl0bGUgYW5kXG4gKiBjYXB0aW9ucyBzZWxlY3Rpb24gbWVudXMuXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5NZW51ID0gdmpzLkNvbXBvbmVudC5leHRlbmQoKTtcblxuLyoqXG4gKiBBZGQgYSBtZW51IGl0ZW0gdG8gdGhlIG1lbnVcbiAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ30gY29tcG9uZW50IENvbXBvbmVudCBvciBjb21wb25lbnQgdHlwZSB0byBhZGRcbiAqL1xudmpzLk1lbnUucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbihjb21wb25lbnQpe1xuICB0aGlzLmFkZENoaWxkKGNvbXBvbmVudCk7XG4gIGNvbXBvbmVudC5vbignY2xpY2snLCB2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpe1xuICAgIHRoaXMudW5sb2NrU2hvd2luZygpO1xuICB9KSk7XG59O1xuXG4vKiogQGluaGVyaXREb2MgKi9cbnZqcy5NZW51LnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBjb250ZW50RWxUeXBlID0gdGhpcy5vcHRpb25zKCkuY29udGVudEVsVHlwZSB8fCAndWwnO1xuICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoY29udGVudEVsVHlwZSwge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51LWNvbnRlbnQnXG4gIH0pO1xuICB2YXIgZWwgPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgYXBwZW5kOiB0aGlzLmNvbnRlbnRFbF8sXG4gICAgY2xhc3NOYW1lOiAndmpzLW1lbnUnXG4gIH0pO1xuICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuXG4gIC8vIFByZXZlbnQgY2xpY2tzIGZyb20gYnViYmxpbmcgdXAuIE5lZWRlZCBmb3IgTWVudSBCdXR0b25zLFxuICAvLyB3aGVyZSBhIGNsaWNrIG9uIHRoZSBwYXJlbnQgaXMgc2lnbmlmaWNhbnRcbiAgdmpzLm9uKGVsLCAnY2xpY2snLCBmdW5jdGlvbihldmVudCl7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGVsO1xufTtcblxuLyoqXG4gKiBUaGUgY29tcG9uZW50IGZvciBhIG1lbnUgaXRlbS4gYDxsaT5gXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5NZW51SXRlbSA9IHZqcy5CdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuICAgIHRoaXMuc2VsZWN0ZWQob3B0aW9uc1snc2VsZWN0ZWQnXSk7XG4gIH1cbn0pO1xuXG4vKiogQGluaGVyaXREb2MgKi9cbnZqcy5NZW51SXRlbS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbih0eXBlLCBwcm9wcyl7XG4gIHJldHVybiB2anMuQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdsaScsIHZqcy5vYmoubWVyZ2Uoe1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51LWl0ZW0nLFxuICAgIGlubmVySFRNTDogdGhpcy5vcHRpb25zX1snbGFiZWwnXVxuICB9LCBwcm9wcykpO1xufTtcblxuLyoqXG4gKiBIYW5kbGUgYSBjbGljayBvbiB0aGUgbWVudSBpdGVtLCBhbmQgc2V0IGl0IHRvIHNlbGVjdGVkXG4gKi9cbnZqcy5NZW51SXRlbS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuc2VsZWN0ZWQodHJ1ZSk7XG59O1xuXG4vKipcbiAqIFNldCB0aGlzIG1lbnUgaXRlbSBhcyBzZWxlY3RlZCBvciBub3RcbiAqIEBwYXJhbSAge0Jvb2xlYW59IHNlbGVjdGVkXG4gKi9cbnZqcy5NZW51SXRlbS5wcm90b3R5cGUuc2VsZWN0ZWQgPSBmdW5jdGlvbihzZWxlY3RlZCl7XG4gIGlmIChzZWxlY3RlZCkge1xuICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1zZWxlY3RlZCcpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsdHJ1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXNlbGVjdGVkJyk7XG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLXNlbGVjdGVkJyxmYWxzZSk7XG4gIH1cbn07XG5cblxuLyoqXG4gKiBBIGJ1dHRvbiBjbGFzcyB3aXRoIGEgcG9wdXAgbWVudVxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTWVudUJ1dHRvbiA9IHZqcy5CdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5tZW51ID0gdGhpcy5jcmVhdGVNZW51KCk7XG5cbiAgICAvLyBBZGQgbGlzdCB0byBlbGVtZW50XG4gICAgdGhpcy5hZGRDaGlsZCh0aGlzLm1lbnUpO1xuXG4gICAgLy8gQXV0b21hdGljYWxseSBoaWRlIGVtcHR5IG1lbnUgYnV0dG9uc1xuICAgIGlmICh0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICB0aGlzLm9uKCdrZXl1cCcsIHRoaXMub25LZXlQcmVzcyk7XG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWhhc3BvcHVwJywgdHJ1ZSk7XG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdyb2xlJywgJ2J1dHRvbicpO1xuICB9XG59KTtcblxuLyoqXG4gKiBUcmFjayB0aGUgc3RhdGUgb2YgdGhlIG1lbnUgYnV0dG9uXG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5NZW51QnV0dG9uLnByb3RvdHlwZS5idXR0b25QcmVzc2VkXyA9IGZhbHNlO1xuXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlTWVudSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBtZW51ID0gbmV3IHZqcy5NZW51KHRoaXMucGxheWVyXyk7XG5cbiAgLy8gQWRkIGEgdGl0bGUgbGlzdCBpdGVtIHRvIHRoZSB0b3BcbiAgaWYgKHRoaXMub3B0aW9ucygpLnRpdGxlKSB7XG4gICAgbWVudS5jb250ZW50RWwoKS5hcHBlbmRDaGlsZCh2anMuY3JlYXRlRWwoJ2xpJywge1xuICAgICAgY2xhc3NOYW1lOiAndmpzLW1lbnUtdGl0bGUnLFxuICAgICAgaW5uZXJIVE1MOiB2anMuY2FwaXRhbGl6ZSh0aGlzLm9wdGlvbnMoKS50aXRsZSksXG4gICAgICB0YWJpbmRleDogLTFcbiAgICB9KSk7XG4gIH1cblxuICB0aGlzLml0ZW1zID0gdGhpc1snY3JlYXRlSXRlbXMnXSgpO1xuXG4gIGlmICh0aGlzLml0ZW1zKSB7XG4gICAgLy8gQWRkIG1lbnUgaXRlbXMgdG8gdGhlIG1lbnVcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG1lbnUuYWRkSXRlbSh0aGlzLml0ZW1zW2ldKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVudTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIHRoZSBsaXN0IG9mIG1lbnUgaXRlbXMuIFNwZWNpZmljIHRvIGVhY2ggc3ViY2xhc3MuXG4gKi9cbnZqcy5NZW51QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVJdGVtcyA9IGZ1bmN0aW9uKCl7fTtcblxuLyoqIEBpbmhlcml0RG9jICovXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmNsYXNzTmFtZSArICcgdmpzLW1lbnUtYnV0dG9uICcgKyB2anMuQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG59O1xuXG4vLyBGb2N1cyAtIEFkZCBrZXlib2FyZCBmdW5jdGlvbmFsaXR5IHRvIGVsZW1lbnRcbi8vIFRoaXMgZnVuY3Rpb24gaXMgbm90IG5lZWRlZCBhbnltb3JlLiBJbnN0ZWFkLCB0aGUga2V5Ym9hcmQgZnVuY3Rpb25hbGl0eSBpcyBoYW5kbGVkIGJ5XG4vLyB0cmVhdGluZyB0aGUgYnV0dG9uIGFzIHRyaWdnZXJpbmcgYSBzdWJtZW51LiBXaGVuIHRoZSBidXR0b24gaXMgcHJlc3NlZCwgdGhlIHN1Ym1lbnVcbi8vIGFwcGVhcnMuIFByZXNzaW5nIHRoZSBidXR0b24gYWdhaW4gbWFrZXMgdGhlIHN1Ym1lbnUgZGlzYXBwZWFyLlxudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLm9uRm9jdXMgPSBmdW5jdGlvbigpe307XG4vLyBDYW4ndCB0dXJuIG9mZiBsaXN0IGRpc3BsYXkgdGhhdCB3ZSB0dXJuZWQgb24gd2l0aCBmb2N1cywgYmVjYXVzZSBsaXN0IHdvdWxkIGdvIGF3YXkuXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUub25CbHVyID0gZnVuY3Rpb24oKXt9O1xuXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIC8vIFdoZW4geW91IGNsaWNrIHRoZSBidXR0b24gaXQgYWRkcyBmb2N1cywgd2hpY2ggd2lsbCBzaG93IHRoZSBtZW51IGluZGVmaW5pdGVseS5cbiAgLy8gU28gd2UnbGwgcmVtb3ZlIGZvY3VzIHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgYnV0dG9uLlxuICAvLyBGb2N1cyBpcyBuZWVkZWQgZm9yIHRhYiBuYXZpZ2F0aW9uLlxuICB0aGlzLm9uZSgnbW91c2VvdXQnLCB2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpe1xuICAgIHRoaXMubWVudS51bmxvY2tTaG93aW5nKCk7XG4gICAgdGhpcy5lbF8uYmx1cigpO1xuICB9KSk7XG4gIGlmICh0aGlzLmJ1dHRvblByZXNzZWRfKXtcbiAgICB0aGlzLnVucHJlc3NCdXR0b24oKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnByZXNzQnV0dG9uKCk7XG4gIH1cbn07XG5cbnZqcy5NZW51QnV0dG9uLnByb3RvdHlwZS5vbktleVByZXNzID0gZnVuY3Rpb24oZXZlbnQpe1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIC8vIENoZWNrIGZvciBzcGFjZSBiYXIgKDMyKSBvciBlbnRlciAoMTMpIGtleXNcbiAgaWYgKGV2ZW50LndoaWNoID09IDMyIHx8IGV2ZW50LndoaWNoID09IDEzKSB7XG4gICAgaWYgKHRoaXMuYnV0dG9uUHJlc3NlZF8pe1xuICAgICAgdGhpcy51bnByZXNzQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucHJlc3NCdXR0b24oKTtcbiAgICB9XG4gIC8vIENoZWNrIGZvciBlc2NhcGUgKDI3KSBrZXlcbiAgfSBlbHNlIGlmIChldmVudC53aGljaCA9PSAyNyl7XG4gICAgaWYgKHRoaXMuYnV0dG9uUHJlc3NlZF8pe1xuICAgICAgdGhpcy51bnByZXNzQnV0dG9uKCk7XG4gICAgfVxuICB9XG59O1xuXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUucHJlc3NCdXR0b24gPSBmdW5jdGlvbigpe1xuICB0aGlzLmJ1dHRvblByZXNzZWRfID0gdHJ1ZTtcbiAgdGhpcy5tZW51LmxvY2tTaG93aW5nKCk7XG4gIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgdHJ1ZSk7XG4gIGlmICh0aGlzLml0ZW1zICYmIHRoaXMuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgIHRoaXMuaXRlbXNbMF0uZWwoKS5mb2N1cygpOyAvLyBzZXQgdGhlIGZvY3VzIHRvIHRoZSB0aXRsZSBvZiB0aGUgc3VibWVudVxuICB9XG59O1xuXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUudW5wcmVzc0J1dHRvbiA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuYnV0dG9uUHJlc3NlZF8gPSBmYWxzZTtcbiAgdGhpcy5tZW51LnVubG9ja1Nob3dpbmcoKTtcbiAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLXByZXNzZWQnLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIEN1c3RvbSBNZWRpYUVycm9yIHRvIG1pbWljIHRoZSBIVE1MNSBNZWRpYUVycm9yXG4gKiBAcGFyYW0ge051bWJlcn0gY29kZSBUaGUgbWVkaWEgZXJyb3IgY29kZVxuICovXG52anMuTWVkaWFFcnJvciA9IGZ1bmN0aW9uKGNvZGUpe1xuICBpZiAodHlwZW9mIGNvZGUgPT09ICdudW1iZXInKSB7XG4gICAgdGhpcy5jb2RlID0gY29kZTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgY29kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBkZWZhdWx0IGNvZGUgaXMgemVybywgc28gdGhpcyBpcyBhIGN1c3RvbSBlcnJvclxuICAgIHRoaXMubWVzc2FnZSA9IGNvZGU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGNvZGUgPT09ICdvYmplY3QnKSB7IC8vIG9iamVjdFxuICAgIHZqcy5vYmoubWVyZ2UodGhpcywgY29kZSk7XG4gIH1cblxuICBpZiAoIXRoaXMubWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IHZqcy5NZWRpYUVycm9yLmRlZmF1bHRNZXNzYWdlc1t0aGlzLmNvZGVdIHx8ICcnO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBlcnJvciBjb2RlIHRoYXQgcmVmZXJzIHR3byBvbmUgb2YgdGhlIGRlZmluZWRcbiAqIE1lZGlhRXJyb3IgdHlwZXNcbiAqIEB0eXBlIHtOdW1iZXJ9XG4gKi9cbnZqcy5NZWRpYUVycm9yLnByb3RvdHlwZS5jb2RlID0gMDtcblxuLyoqXG4gKiBBbiBvcHRpb25hbCBtZXNzYWdlIHRvIGJlIHNob3duIHdpdGggdGhlIGVycm9yLlxuICogTWVzc2FnZSBpcyBub3QgcGFydCBvZiB0aGUgSFRNTDUgdmlkZW8gc3BlY1xuICogYnV0IGFsbG93cyBmb3IgbW9yZSBpbmZvcm1hdGl2ZSBjdXN0b20gZXJyb3JzLlxuICogQHR5cGUge1N0cmluZ31cbiAqL1xudmpzLk1lZGlhRXJyb3IucHJvdG90eXBlLm1lc3NhZ2UgPSAnJztcblxuLyoqXG4gKiBBbiBvcHRpb25hbCBzdGF0dXMgY29kZSB0aGF0IGNhbiBiZSBzZXQgYnkgcGx1Z2luc1xuICogdG8gYWxsb3cgZXZlbiBtb3JlIGRldGFpbCBhYm91dCB0aGUgZXJyb3IuXG4gKiBGb3IgZXhhbXBsZSB0aGUgSExTIHBsdWdpbiBtaWdodCBwcm92aWRlIHRoZSBzcGVjaWZpY1xuICogSFRUUCBzdGF0dXMgY29kZSB0aGF0IHdhcyByZXR1cm5lZCB3aGVuIHRoZSBlcnJvclxuICogb2NjdXJyZWQsIHRoZW4gYWxsb3dpbmcgYSBjdXN0b20gZXJyb3Igb3ZlcmxheVxuICogdG8gZGlzcGxheSBtb3JlIGluZm9ybWF0aW9uLlxuICogQHR5cGUge1t0eXBlXX1cbiAqL1xudmpzLk1lZGlhRXJyb3IucHJvdG90eXBlLnN0YXR1cyA9IG51bGw7XG5cbnZqcy5NZWRpYUVycm9yLmVycm9yVHlwZXMgPSBbXG4gICdNRURJQV9FUlJfQ1VTVE9NJywgICAgICAgICAgICAvLyA9IDBcbiAgJ01FRElBX0VSUl9BQk9SVEVEJywgICAgICAgICAgIC8vID0gMVxuICAnTUVESUFfRVJSX05FVFdPUksnLCAgICAgICAgICAgLy8gPSAyXG4gICdNRURJQV9FUlJfREVDT0RFJywgICAgICAgICAgICAvLyA9IDNcbiAgJ01FRElBX0VSUl9TUkNfTk9UX1NVUFBPUlRFRCcsIC8vID0gNFxuICAnTUVESUFfRVJSX0VOQ1JZUFRFRCcgICAgICAgICAgLy8gPSA1XG5dO1xuXG52anMuTWVkaWFFcnJvci5kZWZhdWx0TWVzc2FnZXMgPSB7XG4gIDE6ICdZb3UgYWJvcnRlZCB0aGUgdmlkZW8gcGxheWJhY2snLFxuICAyOiAnQSBuZXR3b3JrIGVycm9yIGNhdXNlZCB0aGUgdmlkZW8gZG93bmxvYWQgdG8gZmFpbCBwYXJ0LXdheS4nLFxuICAzOiAnVGhlIHZpZGVvIHBsYXliYWNrIHdhcyBhYm9ydGVkIGR1ZSB0byBhIGNvcnJ1cHRpb24gcHJvYmxlbSBvciBiZWNhdXNlIHRoZSB2aWRlbyB1c2VkIGZlYXR1cmVzIHlvdXIgYnJvd3NlciBkaWQgbm90IHN1cHBvcnQuJyxcbiAgNDogJ1RoZSB2aWRlbyBjb3VsZCBub3QgYmUgbG9hZGVkLCBlaXRoZXIgYmVjYXVzZSB0aGUgc2VydmVyIG9yIG5ldHdvcmsgZmFpbGVkIG9yIGJlY2F1c2UgdGhlIGZvcm1hdCBpcyBub3Qgc3VwcG9ydGVkLicsXG4gIDU6ICdUaGUgdmlkZW8gaXMgZW5jcnlwdGVkIGFuZCB3ZSBkbyBub3QgaGF2ZSB0aGUga2V5cyB0byBkZWNyeXB0IGl0Lidcbn07XG5cbi8vIEFkZCB0eXBlcyBhcyBwcm9wZXJ0aWVzIG9uIE1lZGlhRXJyb3Jcbi8vIGUuZy4gTWVkaWFFcnJvci5NRURJQV9FUlJfU1JDX05PVF9TVVBQT1JURUQgPSA0O1xuZm9yICh2YXIgZXJyTnVtID0gMDsgZXJyTnVtIDwgdmpzLk1lZGlhRXJyb3IuZXJyb3JUeXBlcy5sZW5ndGg7IGVyck51bSsrKSB7XG4gIHZqcy5NZWRpYUVycm9yW3Zqcy5NZWRpYUVycm9yLmVycm9yVHlwZXNbZXJyTnVtXV0gPSBlcnJOdW07XG4gIC8vIHZhbHVlcyBzaG91bGQgYmUgYWNjZXNzaWJsZSBvbiBib3RoIHRoZSBjbGFzcyBhbmQgaW5zdGFuY2VcbiAgdmpzLk1lZGlhRXJyb3IucHJvdG90eXBlW3Zqcy5NZWRpYUVycm9yLmVycm9yVHlwZXNbZXJyTnVtXV0gPSBlcnJOdW07XG59XG4oZnVuY3Rpb24oKXtcbiAgdmFyIGFwaU1hcCwgc3BlY0FwaSwgYnJvd3NlckFwaSwgaTtcblxuICAvKipcbiAgICogU3RvcmUgdGhlIGJyb3dzZXItc3BlY2lmYyBtZXRob2RzIGZvciB0aGUgZnVsbHNjcmVlbiBBUElcbiAgICogQHR5cGUge09iamVjdHx1bmRlZmluZWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICB2anMuYnJvd3Nlci5mdWxsc2NyZWVuQVBJO1xuXG4gIC8vIGJyb3dzZXIgQVBJIG1ldGhvZHNcbiAgLy8gbWFwIGFwcHJvYWNoIGZyb20gU2NyZWVuZnVsLmpzIC0gaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9zY3JlZW5mdWxsLmpzXG4gIGFwaU1hcCA9IFtcbiAgICAvLyBTcGVjOiBodHRwczovL2R2Y3MudzMub3JnL2hnL2Z1bGxzY3JlZW4vcmF3LWZpbGUvdGlwL092ZXJ2aWV3Lmh0bWxcbiAgICBbXG4gICAgICAncmVxdWVzdEZ1bGxzY3JlZW4nLFxuICAgICAgJ2V4aXRGdWxsc2NyZWVuJyxcbiAgICAgICdmdWxsc2NyZWVuRWxlbWVudCcsXG4gICAgICAnZnVsbHNjcmVlbkVuYWJsZWQnLFxuICAgICAgJ2Z1bGxzY3JlZW5jaGFuZ2UnLFxuICAgICAgJ2Z1bGxzY3JlZW5lcnJvcidcbiAgICBdLFxuICAgIC8vIFdlYktpdFxuICAgIFtcbiAgICAgICd3ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbicsXG4gICAgICAnd2Via2l0RXhpdEZ1bGxzY3JlZW4nLFxuICAgICAgJ3dlYmtpdEZ1bGxzY3JlZW5FbGVtZW50JyxcbiAgICAgICd3ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCcsXG4gICAgICAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG4gICAgICAnd2Via2l0ZnVsbHNjcmVlbmVycm9yJ1xuICAgIF0sXG4gICAgLy8gT2xkIFdlYktpdCAoU2FmYXJpIDUuMSlcbiAgICBbXG4gICAgICAnd2Via2l0UmVxdWVzdEZ1bGxTY3JlZW4nLFxuICAgICAgJ3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxuICAgICAgJ3dlYmtpdEN1cnJlbnRGdWxsU2NyZWVuRWxlbWVudCcsXG4gICAgICAnd2Via2l0Q2FuY2VsRnVsbFNjcmVlbicsXG4gICAgICAnd2Via2l0ZnVsbHNjcmVlbmNoYW5nZScsXG4gICAgICAnd2Via2l0ZnVsbHNjcmVlbmVycm9yJ1xuICAgIF0sXG4gICAgLy8gTW96aWxsYVxuICAgIFtcbiAgICAgICdtb3pSZXF1ZXN0RnVsbFNjcmVlbicsXG4gICAgICAnbW96Q2FuY2VsRnVsbFNjcmVlbicsXG4gICAgICAnbW96RnVsbFNjcmVlbkVsZW1lbnQnLFxuICAgICAgJ21vekZ1bGxTY3JlZW5FbmFibGVkJyxcbiAgICAgICdtb3pmdWxsc2NyZWVuY2hhbmdlJyxcbiAgICAgICdtb3pmdWxsc2NyZWVuZXJyb3InXG4gICAgXSxcbiAgICAvLyBNaWNyb3NvZnRcbiAgICBbXG4gICAgICAnbXNSZXF1ZXN0RnVsbHNjcmVlbicsXG4gICAgICAnbXNFeGl0RnVsbHNjcmVlbicsXG4gICAgICAnbXNGdWxsc2NyZWVuRWxlbWVudCcsXG4gICAgICAnbXNGdWxsc2NyZWVuRW5hYmxlZCcsXG4gICAgICAnTVNGdWxsc2NyZWVuQ2hhbmdlJyxcbiAgICAgICdNU0Z1bGxzY3JlZW5FcnJvcidcbiAgICBdXG4gIF07XG5cbiAgc3BlY0FwaSA9IGFwaU1hcFswXTtcblxuICAvLyBkZXRlcm1pbmUgdGhlIHN1cHBvcnRlZCBzZXQgb2YgZnVuY3Rpb25zXG4gIGZvciAoaT0wOyBpPGFwaU1hcC5sZW5ndGg7IGkrKykge1xuICAgIC8vIGNoZWNrIGZvciBleGl0RnVsbHNjcmVlbiBmdW5jdGlvblxuICAgIGlmIChhcGlNYXBbaV1bMV0gaW4gZG9jdW1lbnQpIHtcbiAgICAgIGJyb3dzZXJBcGkgPSBhcGlNYXBbaV07XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvLyBtYXAgdGhlIGJyb3dzZXIgQVBJIG5hbWVzIHRvIHRoZSBzcGVjIEFQSSBuYW1lc1xuICAvLyBvciBsZWF2ZSB2anMuYnJvd3Nlci5mdWxsc2NyZWVuQVBJIHVuZGVmaW5lZFxuICBpZiAoYnJvd3NlckFwaSkge1xuICAgIHZqcy5icm93c2VyLmZ1bGxzY3JlZW5BUEkgPSB7fTtcblxuICAgIGZvciAoaT0wOyBpPGJyb3dzZXJBcGkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZqcy5icm93c2VyLmZ1bGxzY3JlZW5BUElbc3BlY0FwaVtpXV0gPSBicm93c2VyQXBpW2ldO1xuICAgIH1cbiAgfVxuXG59KSgpO1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgYHZqcy5QbGF5ZXJgIGNsYXNzIGlzIGNyZWF0ZWQgd2hlbiBhbnkgb2YgdGhlIFZpZGVvLmpzIHNldHVwIG1ldGhvZHMgYXJlIHVzZWQgdG8gaW5pdGlhbGl6ZSBhIHZpZGVvLlxuICpcbiAqIGBgYGpzXG4gKiB2YXIgbXlQbGF5ZXIgPSB2aWRlb2pzKCdleGFtcGxlX3ZpZGVvXzEnKTtcbiAqIGBgYFxuICpcbiAqIEluIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSwgdGhlIGBkYXRhLXNldHVwYCBhdHRyaWJ1dGUgdGVsbHMgdGhlIFZpZGVvLmpzIGxpYnJhcnkgdG8gY3JlYXRlIGEgcGxheWVyIGluc3RhbmNlIHdoZW4gdGhlIGxpYnJhcnkgaXMgcmVhZHkuXG4gKlxuICogYGBgaHRtbFxuICogPHZpZGVvIGlkPVwiZXhhbXBsZV92aWRlb18xXCIgZGF0YS1zZXR1cD0ne30nIGNvbnRyb2xzPlxuICogICA8c291cmNlIHNyYz1cIm15LXNvdXJjZS5tcDRcIiB0eXBlPVwidmlkZW8vbXA0XCI+XG4gKiA8L3ZpZGVvPlxuICogYGBgXG4gKlxuICogQWZ0ZXIgYW4gaW5zdGFuY2UgaGFzIGJlZW4gY3JlYXRlZCBpdCBjYW4gYmUgYWNjZXNzZWQgZ2xvYmFsbHkgdXNpbmcgYFZpZGVvKCdleGFtcGxlX3ZpZGVvXzEnKWAuXG4gKlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyB2anMuQ29tcG9uZW50XG4gKi9cbnZqcy5QbGF5ZXIgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG5cbiAgLyoqXG4gICAqIHBsYXllcidzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RzXG4gICAqIEBtZXRob2QgaW5pdFxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhZyAgICAgICAgVGhlIG9yaWdpbmFsIHZpZGVvIHRhZyB1c2VkIGZvciBjb25maWd1cmluZyBvcHRpb25zXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyAgICBQbGF5ZXIgb3B0aW9uc1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gcmVhZHkgICAgUmVhZHkgY2FsbGJhY2sgZnVuY3Rpb25cbiAgICovXG4gIGluaXQ6IGZ1bmN0aW9uKHRhZywgb3B0aW9ucywgcmVhZHkpe1xuICAgIHRoaXMudGFnID0gdGFnOyAvLyBTdG9yZSB0aGUgb3JpZ2luYWwgdGFnIHVzZWQgdG8gc2V0IG9wdGlvbnNcblxuICAgIC8vIE1ha2Ugc3VyZSB0YWcgSUQgZXhpc3RzXG4gICAgdGFnLmlkID0gdGFnLmlkIHx8ICd2anNfdmlkZW9fJyArIHZqcy5ndWlkKys7XG5cbiAgICAvLyBTdG9yZSB0aGUgdGFnIGF0dHJpYnV0ZXMgdXNlZCB0byByZXN0b3JlIGh0bWw1IGVsZW1lbnRcbiAgICB0aGlzLnRhZ0F0dHJpYnV0ZXMgPSB0YWcgJiYgdmpzLmdldEVsZW1lbnRBdHRyaWJ1dGVzKHRhZyk7XG5cbiAgICAvLyBTZXQgT3B0aW9uc1xuICAgIC8vIFRoZSBvcHRpb25zIGFyZ3VtZW50IG92ZXJyaWRlcyBvcHRpb25zIHNldCBpbiB0aGUgdmlkZW8gdGFnXG4gICAgLy8gd2hpY2ggb3ZlcnJpZGVzIGdsb2JhbGx5IHNldCBvcHRpb25zLlxuICAgIC8vIFRoaXMgbGF0dGVyIHBhcnQgY29pbmNpZGVzIHdpdGggdGhlIGxvYWQgb3JkZXJcbiAgICAvLyAodGFnIG11c3QgZXhpc3QgYmVmb3JlIFBsYXllcilcbiAgICBvcHRpb25zID0gdmpzLm9iai5tZXJnZSh0aGlzLmdldFRhZ1NldHRpbmdzKHRhZyksIG9wdGlvbnMpO1xuXG4gICAgLy8gVXBkYXRlIEN1cnJlbnQgTGFuZ3VhZ2VcbiAgICB0aGlzLmxhbmd1YWdlXyA9IG9wdGlvbnNbJ2xhbmd1YWdlJ10gfHwgdmpzLm9wdGlvbnNbJ2xhbmd1YWdlJ107XG5cbiAgICAvLyBVcGRhdGUgU3VwcG9ydGVkIExhbmd1YWdlc1xuICAgIHRoaXMubGFuZ3VhZ2VzXyA9IG9wdGlvbnNbJ2xhbmd1YWdlcyddIHx8IHZqcy5vcHRpb25zWydsYW5ndWFnZXMnXTtcblxuICAgIC8vIENhY2hlIGZvciB2aWRlbyBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgdGhpcy5jYWNoZV8gPSB7fTtcblxuICAgIC8vIFNldCBwb3N0ZXJcbiAgICB0aGlzLnBvc3Rlcl8gPSBvcHRpb25zWydwb3N0ZXInXTtcbiAgICAvLyBTZXQgY29udHJvbHNcbiAgICB0aGlzLmNvbnRyb2xzXyA9IG9wdGlvbnNbJ2NvbnRyb2xzJ107XG4gICAgLy8gT3JpZ2luYWwgdGFnIHNldHRpbmdzIHN0b3JlZCBpbiBvcHRpb25zXG4gICAgLy8gbm93IHJlbW92ZSBpbW1lZGlhdGVseSBzbyBuYXRpdmUgY29udHJvbHMgZG9uJ3QgZmxhc2guXG4gICAgLy8gTWF5IGJlIHR1cm5lZCBiYWNrIG9uIGJ5IEhUTUw1IHRlY2ggaWYgbmF0aXZlQ29udHJvbHNGb3JUb3VjaCBpcyB0cnVlXG4gICAgdGFnLmNvbnRyb2xzID0gZmFsc2U7XG5cbiAgICAvLyB3ZSBkb24ndCB3YW50IHRoZSBwbGF5ZXIgdG8gcmVwb3J0IHRvdWNoIGFjdGl2aXR5IG9uIGl0c2VsZlxuICAgIC8vIHNlZSBlbmFibGVUb3VjaEFjdGl2aXR5IGluIENvbXBvbmVudFxuICAgIG9wdGlvbnMucmVwb3J0VG91Y2hBY3Rpdml0eSA9IGZhbHNlO1xuXG4gICAgLy8gUnVuIGJhc2UgY29tcG9uZW50IGluaXRpYWxpemluZyB3aXRoIG5ldyBvcHRpb25zLlxuICAgIC8vIEJ1aWxkcyB0aGUgZWxlbWVudCB0aHJvdWdoIGNyZWF0ZUVsKClcbiAgICAvLyBJbml0cyBhbmQgZW1iZWRzIGFueSBjaGlsZCBjb21wb25lbnRzIGluIG9wdHNcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgdGhpcywgb3B0aW9ucywgcmVhZHkpO1xuXG4gICAgLy8gVXBkYXRlIGNvbnRyb2xzIGNsYXNzTmFtZS4gQ2FuJ3QgZG8gdGhpcyB3aGVuIHRoZSBjb250cm9scyBhcmUgaW5pdGlhbGx5XG4gICAgLy8gc2V0IGJlY2F1c2UgdGhlIGVsZW1lbnQgZG9lc24ndCBleGlzdCB5ZXQuXG4gICAgaWYgKHRoaXMuY29udHJvbHMoKSkge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWNvbnRyb2xzLWVuYWJsZWQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWNvbnRyb2xzLWRpc2FibGVkJyk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogTWFrZSB0aGlzIHNtYXJ0ZXIuIFRvZ2dsZSB1c2VyIHN0YXRlIGJldHdlZW4gdG91Y2hpbmcvbW91c2luZ1xuICAgIC8vIHVzaW5nIGV2ZW50cywgc2luY2UgZGV2aWNlcyBjYW4gaGF2ZSBib3RoIHRvdWNoIGFuZCBtb3VzZSBldmVudHMuXG4gICAgLy8gaWYgKHZqcy5UT1VDSF9FTkFCTEVEKSB7XG4gICAgLy8gICB0aGlzLmFkZENsYXNzKCd2anMtdG91Y2gtZW5hYmxlZCcpO1xuICAgIC8vIH1cblxuICAgIC8vIE1ha2UgcGxheWVyIGVhc2lseSBmaW5kYWJsZSBieSBJRFxuICAgIHZqcy5wbGF5ZXJzW3RoaXMuaWRfXSA9IHRoaXM7XG5cbiAgICBpZiAob3B0aW9uc1sncGx1Z2lucyddKSB7XG4gICAgICB2anMub2JqLmVhY2gob3B0aW9uc1sncGx1Z2lucyddLCBmdW5jdGlvbihrZXksIHZhbCl7XG4gICAgICAgIHRoaXNba2V5XSh2YWwpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5Gb3JVc2VyQWN0aXZpdHkoKTtcbiAgfVxufSk7XG5cbi8qKlxuICogVGhlIHBsYXllcnMncyBzdG9yZWQgbGFuZ3VhZ2UgY29kZVxuICpcbiAqIEB0eXBlIHtTdHJpbmd9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5sYW5ndWFnZV87XG5cbi8qKlxuICogVGhlIHBsYXllcidzIGxhbmd1YWdlIGNvZGVcbiAqIEBwYXJhbSAge1N0cmluZ30gbGFuZ3VhZ2VDb2RlICBUaGUgbG9jYWxlIHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgICAgICBUaGUgbG9jYWxlIHN0cmluZyB3aGVuIGdldHRpbmdcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9ICAgICAgICAgc2VsZiwgd2hlbiBzZXR0aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmxhbmd1YWdlID0gZnVuY3Rpb24gKGxhbmd1YWdlQ29kZSkge1xuICBpZiAobGFuZ3VhZ2VDb2RlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhpcy5sYW5ndWFnZV87XG4gIH1cblxuICB0aGlzLmxhbmd1YWdlXyA9IGxhbmd1YWdlQ29kZTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFRoZSBwbGF5ZXJzJ3Mgc3RvcmVkIGxhbmd1YWdlIGRpY3Rpb25hcnlcbiAqXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUubGFuZ3VhZ2VzXztcblxudmpzLlBsYXllci5wcm90b3R5cGUubGFuZ3VhZ2VzID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMubGFuZ3VhZ2VzXztcbn07XG5cbi8qKlxuICogUGxheWVyIGluc3RhbmNlIG9wdGlvbnMsIHN1cmZhY2VkIHVzaW5nIHZqcy5vcHRpb25zXG4gKiB2anMub3B0aW9ucyA9IHZqcy5QbGF5ZXIucHJvdG90eXBlLm9wdGlvbnNfXG4gKiBNYWtlIGNoYW5nZXMgaW4gdmpzLm9wdGlvbnMsIG5vdCBoZXJlLlxuICogQWxsIG9wdGlvbnMgc2hvdWxkIHVzZSBzdHJpbmcga2V5cyBzbyB0aGV5IGF2b2lkXG4gKiByZW5hbWluZyBieSBjbG9zdXJlIGNvbXBpbGVyXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub3B0aW9uc18gPSB2anMub3B0aW9ucztcblxuLyoqXG4gKiBEZXN0cm95cyB0aGUgdmlkZW8gcGxheWVyIGFuZCBkb2VzIGFueSBuZWNlc3NhcnkgY2xlYW51cFxuICpcbiAqICAgICBteVBsYXllci5kaXNwb3NlKCk7XG4gKlxuICogVGhpcyBpcyBlc3BlY2lhbGx5IGhlbHBmdWwgaWYgeW91IGFyZSBkeW5hbWljYWxseSBhZGRpbmcgYW5kIHJlbW92aW5nIHZpZGVvc1xuICogdG8vZnJvbSB0aGUgRE9NLlxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy50cmlnZ2VyKCdkaXNwb3NlJyk7XG4gIC8vIHByZXZlbnQgZGlzcG9zZSBmcm9tIGJlaW5nIGNhbGxlZCB0d2ljZVxuICB0aGlzLm9mZignZGlzcG9zZScpO1xuXG4gIC8vIEtpbGwgcmVmZXJlbmNlIHRvIHRoaXMgcGxheWVyXG4gIHZqcy5wbGF5ZXJzW3RoaXMuaWRfXSA9IG51bGw7XG4gIGlmICh0aGlzLnRhZyAmJiB0aGlzLnRhZ1sncGxheWVyJ10pIHsgdGhpcy50YWdbJ3BsYXllciddID0gbnVsbDsgfVxuICBpZiAodGhpcy5lbF8gJiYgdGhpcy5lbF9bJ3BsYXllciddKSB7IHRoaXMuZWxfWydwbGF5ZXInXSA9IG51bGw7IH1cblxuICBpZiAodGhpcy50ZWNoKSB7IHRoaXMudGVjaC5kaXNwb3NlKCk7IH1cblxuICAvLyBDb21wb25lbnQgZGlzcG9zZVxuICB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG59O1xuXG52anMuUGxheWVyLnByb3RvdHlwZS5nZXRUYWdTZXR0aW5ncyA9IGZ1bmN0aW9uKHRhZyl7XG4gIHZhciBvcHRpb25zID0ge1xuICAgICdzb3VyY2VzJzogW10sXG4gICAgJ3RyYWNrcyc6IFtdXG4gIH07XG5cbiAgdmpzLm9iai5tZXJnZShvcHRpb25zLCB2anMuZ2V0RWxlbWVudEF0dHJpYnV0ZXModGFnKSk7XG5cbiAgLy8gR2V0IHRhZyBjaGlsZHJlbiBzZXR0aW5nc1xuICBpZiAodGFnLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHZhciBjaGlsZHJlbiwgY2hpbGQsIGNoaWxkTmFtZSwgaSwgajtcblxuICAgIGNoaWxkcmVuID0gdGFnLmNoaWxkTm9kZXM7XG5cbiAgICBmb3IgKGk9MCxqPWNoaWxkcmVuLmxlbmd0aDsgaTxqOyBpKyspIHtcbiAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG4gICAgICAvLyBDaGFuZ2UgY2FzZSBuZWVkZWQ6IGh0dHA6Ly9lam9obi5vcmcvYmxvZy9ub2RlbmFtZS1jYXNlLXNlbnNpdGl2aXR5L1xuICAgICAgY2hpbGROYW1lID0gY2hpbGQubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChjaGlsZE5hbWUgPT09ICdzb3VyY2UnKSB7XG4gICAgICAgIG9wdGlvbnNbJ3NvdXJjZXMnXS5wdXNoKHZqcy5nZXRFbGVtZW50QXR0cmlidXRlcyhjaGlsZCkpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZE5hbWUgPT09ICd0cmFjaycpIHtcbiAgICAgICAgb3B0aW9uc1sndHJhY2tzJ10ucHVzaCh2anMuZ2V0RWxlbWVudEF0dHJpYnV0ZXMoY2hpbGQpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3B0aW9ucztcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgdmFyXG4gICAgZWwgPSB0aGlzLmVsXyA9IHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicpLFxuICAgIHRhZyA9IHRoaXMudGFnLFxuICAgIGF0dHJzO1xuXG4gIC8vIFJlbW92ZSB3aWR0aC9oZWlnaHQgYXR0cnMgZnJvbSB0YWcgc28gQ1NTIGNhbiBtYWtlIGl0IDEwMCUgd2lkdGgvaGVpZ2h0XG4gIHRhZy5yZW1vdmVBdHRyaWJ1dGUoJ3dpZHRoJyk7XG4gIHRhZy5yZW1vdmVBdHRyaWJ1dGUoJ2hlaWdodCcpO1xuICAvLyBFbXB0eSB2aWRlbyB0YWcgdHJhY2tzIHNvIHRoZSBidWlsdC1pbiBwbGF5ZXIgZG9lc24ndCB1c2UgdGhlbSBhbHNvLlxuICAvLyBUaGlzIG1heSBub3QgYmUgZmFzdCBlbm91Z2ggdG8gc3RvcCBIVE1MNSBicm93c2VycyBmcm9tIHJlYWRpbmcgdGhlIHRhZ3NcbiAgLy8gc28gd2UnbGwgbmVlZCB0byB0dXJuIG9mZiBhbnkgZGVmYXVsdCB0cmFja3MgaWYgd2UncmUgbWFudWFsbHkgZG9pbmdcbiAgLy8gY2FwdGlvbnMgYW5kIHN1YnRpdGxlcy4gdmlkZW9FbGVtZW50LnRleHRUcmFja3NcbiAgaWYgKHRhZy5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB2YXIgbm9kZXMsIG5vZGVzTGVuZ3RoLCBpLCBub2RlLCBub2RlTmFtZSwgcmVtb3ZlTm9kZXM7XG5cbiAgICBub2RlcyA9IHRhZy5jaGlsZE5vZGVzO1xuICAgIG5vZGVzTGVuZ3RoID0gbm9kZXMubGVuZ3RoO1xuICAgIHJlbW92ZU5vZGVzID0gW107XG5cbiAgICB3aGlsZSAobm9kZXNMZW5ndGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGVzW25vZGVzTGVuZ3RoXTtcbiAgICAgIG5vZGVOYW1lID0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKG5vZGVOYW1lID09PSAndHJhY2snKSB7XG4gICAgICAgIHJlbW92ZU5vZGVzLnB1c2gobm9kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChpPTA7IGk8cmVtb3ZlTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRhZy5yZW1vdmVDaGlsZChyZW1vdmVOb2Rlc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ29weSBvdmVyIGFsbCB0aGUgYXR0cmlidXRlcyBmcm9tIHRoZSB0YWcsIGluY2x1ZGluZyBJRCBhbmQgY2xhc3NcbiAgLy8gSUQgd2lsbCBub3cgcmVmZXJlbmNlIHBsYXllciBib3gsIG5vdCB0aGUgdmlkZW8gdGFnXG4gIGF0dHJzID0gdmpzLmdldEVsZW1lbnRBdHRyaWJ1dGVzKHRhZyk7XG4gIHZqcy5vYmouZWFjaChhdHRycywgZnVuY3Rpb24oYXR0cikge1xuICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCBhdHRyc1thdHRyXSk7XG4gIH0pO1xuXG4gIC8vIFVwZGF0ZSB0YWcgaWQvY2xhc3MgZm9yIHVzZSBhcyBIVE1MNSBwbGF5YmFjayB0ZWNoXG4gIC8vIE1pZ2h0IHRoaW5rIHdlIHNob3VsZCBkbyB0aGlzIGFmdGVyIGVtYmVkZGluZyBpbiBjb250YWluZXIgc28gLnZqcy10ZWNoIGNsYXNzXG4gIC8vIGRvZXNuJ3QgZmxhc2ggMTAwJSB3aWR0aC9oZWlnaHQsIGJ1dCBjbGFzcyBvbmx5IGFwcGxpZXMgd2l0aCAudmlkZW8tanMgcGFyZW50XG4gIHRhZy5pZCArPSAnX2h0bWw1X2FwaSc7XG4gIHRhZy5jbGFzc05hbWUgPSAndmpzLXRlY2gnO1xuXG4gIC8vIE1ha2UgcGxheWVyIGZpbmRhYmxlIG9uIGVsZW1lbnRzXG4gIHRhZ1sncGxheWVyJ10gPSBlbFsncGxheWVyJ10gPSB0aGlzO1xuICAvLyBEZWZhdWx0IHN0YXRlIG9mIHZpZGVvIGlzIHBhdXNlZFxuICB0aGlzLmFkZENsYXNzKCd2anMtcGF1c2VkJyk7XG5cbiAgLy8gTWFrZSBib3ggdXNlIHdpZHRoL2hlaWdodCBvZiB0YWcsIG9yIHJlbHkgb24gZGVmYXVsdCBpbXBsZW1lbnRhdGlvblxuICAvLyBFbmZvcmNlIHdpdGggQ1NTIHNpbmNlIHdpZHRoL2hlaWdodCBhdHRycyBkb24ndCB3b3JrIG9uIGRpdnNcbiAgdGhpcy53aWR0aCh0aGlzLm9wdGlvbnNfWyd3aWR0aCddLCB0cnVlKTsgLy8gKHRydWUpIFNraXAgcmVzaXplIGxpc3RlbmVyIG9uIGxvYWRcbiAgdGhpcy5oZWlnaHQodGhpcy5vcHRpb25zX1snaGVpZ2h0J10sIHRydWUpO1xuXG4gIC8vIFdyYXAgdmlkZW8gdGFnIGluIGRpdiAoZWwvYm94KSBjb250YWluZXJcbiAgaWYgKHRhZy5wYXJlbnROb2RlKSB7XG4gICAgdGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YWcpO1xuICB9XG4gIHZqcy5pbnNlcnRGaXJzdCh0YWcsIGVsKTsgLy8gQnJlYWtzIGlQaG9uZSwgZml4ZWQgaW4gSFRNTDUgc2V0dXAuXG5cbiAgLy8gVGhlIGV2ZW50IGxpc3RlbmVycyBuZWVkIHRvIGJlIGFkZGVkIGJlZm9yZSB0aGUgY2hpbGRyZW4gYXJlIGFkZGVkXG4gIC8vIGluIHRoZSBjb21wb25lbnQgaW5pdCBiZWNhdXNlIHRoZSB0ZWNoIChsb2FkZWQgd2l0aCBtZWRpYUxvYWRlcikgbWF5XG4gIC8vIGZpcmUgZXZlbnRzLCBsaWtlIGxvYWRzdGFydCwgdGhhdCB0aGVzZSBldmVudHMgbmVlZCB0byBjYXB0dXJlLlxuICAvLyBMb25nIHRlcm0gaXQgbWlnaHQgYmUgYmV0dGVyIHRvIGV4cG9zZSBhIHdheSB0byBkbyB0aGlzIGluIGNvbXBvbmVudC5pbml0XG4gIC8vIGxpa2UgY29tcG9uZW50LmluaXRFdmVudExpc3RlbmVycygpIHRoYXQgcnVucyBiZXR3ZWVuIGVsIGNyZWF0aW9uIGFuZFxuICAvLyBhZGRpbmcgY2hpbGRyZW5cbiAgdGhpcy5lbF8gPSBlbDtcbiAgdGhpcy5vbignbG9hZHN0YXJ0JywgdGhpcy5vbkxvYWRTdGFydCk7XG4gIHRoaXMub24oJ3dhaXRpbmcnLCB0aGlzLm9uV2FpdGluZyk7XG4gIHRoaXMub24oWydjYW5wbGF5JywgJ2NhbnBsYXl0aHJvdWdoJywgJ3BsYXlpbmcnLCAnZW5kZWQnXSwgdGhpcy5vbldhaXRFbmQpO1xuICB0aGlzLm9uKCdzZWVraW5nJywgdGhpcy5vblNlZWtpbmcpO1xuICB0aGlzLm9uKCdzZWVrZWQnLCB0aGlzLm9uU2Vla2VkKTtcbiAgdGhpcy5vbignZW5kZWQnLCB0aGlzLm9uRW5kZWQpO1xuICB0aGlzLm9uKCdwbGF5JywgdGhpcy5vblBsYXkpO1xuICB0aGlzLm9uKCdmaXJzdHBsYXknLCB0aGlzLm9uRmlyc3RQbGF5KTtcbiAgdGhpcy5vbigncGF1c2UnLCB0aGlzLm9uUGF1c2UpO1xuICB0aGlzLm9uKCdwcm9ncmVzcycsIHRoaXMub25Qcm9ncmVzcyk7XG4gIHRoaXMub24oJ2R1cmF0aW9uY2hhbmdlJywgdGhpcy5vbkR1cmF0aW9uQ2hhbmdlKTtcbiAgdGhpcy5vbignZnVsbHNjcmVlbmNoYW5nZScsIHRoaXMub25GdWxsc2NyZWVuQ2hhbmdlKTtcblxuICByZXR1cm4gZWw7XG59O1xuXG4vLyAvKiBNZWRpYSBUZWNobm9sb2d5ICh0ZWNoKVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8vIExvYWQvQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHBsYXliYWNrIHRlY2hubG9neSBpbmNsdWRpbmcgZWxlbWVudCBhbmQgQVBJIG1ldGhvZHNcbi8vIEFuZCBhcHBlbmQgcGxheWJhY2sgZWxlbWVudCBpbiBwbGF5ZXIgZGl2LlxudmpzLlBsYXllci5wcm90b3R5cGUubG9hZFRlY2ggPSBmdW5jdGlvbih0ZWNoTmFtZSwgc291cmNlKXtcblxuICAvLyBQYXVzZSBhbmQgcmVtb3ZlIGN1cnJlbnQgcGxheWJhY2sgdGVjaG5vbG9neVxuICBpZiAodGhpcy50ZWNoKSB7XG4gICAgdGhpcy51bmxvYWRUZWNoKCk7XG4gIH1cblxuICAvLyBnZXQgcmlkIG9mIHRoZSBIVE1MNSB2aWRlbyB0YWcgYXMgc29vbiBhcyB3ZSBhcmUgdXNpbmcgYW5vdGhlciB0ZWNoXG4gIGlmICh0ZWNoTmFtZSAhPT0gJ0h0bWw1JyAmJiB0aGlzLnRhZykge1xuICAgIHZqcy5IdG1sNS5kaXNwb3NlTWVkaWFFbGVtZW50KHRoaXMudGFnKTtcbiAgICB0aGlzLnRhZyA9IG51bGw7XG4gIH1cblxuICB0aGlzLnRlY2hOYW1lID0gdGVjaE5hbWU7XG5cbiAgLy8gVHVybiBvZmYgQVBJIGFjY2VzcyBiZWNhdXNlIHdlJ3JlIGxvYWRpbmcgYSBuZXcgdGVjaCB0aGF0IG1pZ2h0IGxvYWQgYXN5bmNocm9ub3VzbHlcbiAgdGhpcy5pc1JlYWR5XyA9IGZhbHNlO1xuXG4gIHZhciB0ZWNoUmVhZHkgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMucGxheWVyXy50cmlnZ2VyUmVhZHkoKTtcbiAgfTtcblxuICAvLyBHcmFiIHRlY2gtc3BlY2lmaWMgb3B0aW9ucyBmcm9tIHBsYXllciBvcHRpb25zIGFuZCBhZGQgc291cmNlIGFuZCBwYXJlbnQgZWxlbWVudCB0byB1c2UuXG4gIHZhciB0ZWNoT3B0aW9ucyA9IHZqcy5vYmoubWVyZ2UoeyAnc291cmNlJzogc291cmNlLCAncGFyZW50RWwnOiB0aGlzLmVsXyB9LCB0aGlzLm9wdGlvbnNfW3RlY2hOYW1lLnRvTG93ZXJDYXNlKCldKTtcblxuICBpZiAoc291cmNlKSB7XG4gICAgdGhpcy5jdXJyZW50VHlwZV8gPSBzb3VyY2UudHlwZTtcbiAgICBpZiAoc291cmNlLnNyYyA9PSB0aGlzLmNhY2hlXy5zcmMgJiYgdGhpcy5jYWNoZV8uY3VycmVudFRpbWUgPiAwKSB7XG4gICAgICB0ZWNoT3B0aW9uc1snc3RhcnRUaW1lJ10gPSB0aGlzLmNhY2hlXy5jdXJyZW50VGltZTtcbiAgICB9XG5cbiAgICB0aGlzLmNhY2hlXy5zcmMgPSBzb3VyY2Uuc3JjO1xuICB9XG5cbiAgLy8gSW5pdGlhbGl6ZSB0ZWNoIGluc3RhbmNlXG4gIHRoaXMudGVjaCA9IG5ldyB3aW5kb3dbJ3ZpZGVvanMnXVt0ZWNoTmFtZV0odGhpcywgdGVjaE9wdGlvbnMpO1xuXG4gIHRoaXMudGVjaC5yZWFkeSh0ZWNoUmVhZHkpO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUudW5sb2FkVGVjaCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuaXNSZWFkeV8gPSBmYWxzZTtcblxuICB0aGlzLnRlY2guZGlzcG9zZSgpO1xuXG4gIHRoaXMudGVjaCA9IGZhbHNlO1xufTtcblxuLy8gVGhlcmUncyBtYW55IGlzc3VlcyBhcm91bmQgY2hhbmdpbmcgdGhlIHNpemUgb2YgYSBGbGFzaCAob3Igb3RoZXIgcGx1Z2luKSBvYmplY3QuXG4vLyBGaXJzdCBpcyBhIHBsdWdpbiByZWxvYWQgaXNzdWUgaW4gRmlyZWZveCB0aGF0IGhhcyBiZWVuIGFyb3VuZCBmb3IgMTEgeWVhcnM6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTkwMjY4XG4vLyBUaGVuIHdpdGggdGhlIG5ldyBmdWxsc2NyZWVuIEFQSSwgTW96aWxsYSBhbmQgd2Via2l0IGJyb3dzZXJzIHdpbGwgcmVsb2FkIHRoZSBmbGFzaCBvYmplY3QgYWZ0ZXIgZ29pbmcgdG8gZnVsbHNjcmVlbi5cbi8vIFRvIGdldCBhcm91bmQgdGhpcywgd2UncmUgdW5sb2FkaW5nIHRoZSB0ZWNoLCBjYWNoaW5nIHNvdXJjZSBhbmQgY3VycmVudFRpbWUgdmFsdWVzLCBhbmQgcmVsb2FkaW5nIHRoZSB0ZWNoIG9uY2UgdGhlIHBsdWdpbiBpcyByZXNpemVkLlxuLy8gcmVsb2FkVGVjaDogZnVuY3Rpb24oYmV0d2VlbkZuKXtcbi8vICAgdmpzLmxvZygndW5sb2FkaW5nVGVjaCcpXG4vLyAgIHRoaXMudW5sb2FkVGVjaCgpO1xuLy8gICB2anMubG9nKCd1bmxvYWRlZFRlY2gnKVxuLy8gICBpZiAoYmV0d2VlbkZuKSB7IGJldHdlZW5Gbi5jYWxsKCk7IH1cbi8vICAgdmpzLmxvZygnTG9hZGluZ1RlY2gnKVxuLy8gICB0aGlzLmxvYWRUZWNoKHRoaXMudGVjaE5hbWUsIHsgc3JjOiB0aGlzLmNhY2hlXy5zcmMgfSlcbi8vICAgdmpzLmxvZygnbG9hZGVkVGVjaCcpXG4vLyB9LFxuXG4vLyAvKiBQbGF5ZXIgZXZlbnQgaGFuZGxlcnMgKGhvdyB0aGUgcGxheWVyIHJlYWN0cyB0byBjZXJ0YWluIGV2ZW50cylcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgdXNlciBhZ2VudCBiZWdpbnMgbG9va2luZyBmb3IgbWVkaWEgZGF0YVxuICogQGV2ZW50IGxvYWRzdGFydFxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbkxvYWRTdGFydCA9IGZ1bmN0aW9uKCkge1xuICAvLyBUT0RPOiBVcGRhdGUgdG8gdXNlIGBlbXB0aWVkYCBldmVudCBpbnN0ZWFkLiBTZWUgIzEyNzcuXG5cbiAgLy8gcmVzZXQgdGhlIGVycm9yIHN0YXRlXG4gIHRoaXMuZXJyb3IobnVsbCk7XG5cbiAgLy8gSWYgaXQncyBhbHJlYWR5IHBsYXlpbmcgd2Ugd2FudCB0byB0cmlnZ2VyIGEgZmlyc3RwbGF5IGV2ZW50IG5vdy5cbiAgLy8gVGhlIGZpcnN0cGxheSBldmVudCByZWxpZXMgb24gYm90aCB0aGUgcGxheSBhbmQgbG9hZHN0YXJ0IGV2ZW50c1xuICAvLyB3aGljaCBjYW4gaGFwcGVuIGluIGFueSBvcmRlciBmb3IgYSBuZXcgc291cmNlXG4gIGlmICghdGhpcy5wYXVzZWQoKSkge1xuICAgIHRoaXMudHJpZ2dlcignZmlyc3RwbGF5Jyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gcmVzZXQgdGhlIGhhc1N0YXJ0ZWQgc3RhdGVcbiAgICB0aGlzLmhhc1N0YXJ0ZWQoZmFsc2UpO1xuICAgIHRoaXMub25lKCdwbGF5JywgZnVuY3Rpb24oKXtcbiAgICAgIHRoaXMuaGFzU3RhcnRlZCh0cnVlKTtcbiAgICB9KTtcbiAgfVxufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUuaGFzU3RhcnRlZF8gPSBmYWxzZTtcblxudmpzLlBsYXllci5wcm90b3R5cGUuaGFzU3RhcnRlZCA9IGZ1bmN0aW9uKGhhc1N0YXJ0ZWQpe1xuICBpZiAoaGFzU3RhcnRlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gb25seSB1cGRhdGUgaWYgdGhpcyBpcyBhIG5ldyB2YWx1ZVxuICAgIGlmICh0aGlzLmhhc1N0YXJ0ZWRfICE9PSBoYXNTdGFydGVkKSB7XG4gICAgICB0aGlzLmhhc1N0YXJ0ZWRfID0gaGFzU3RhcnRlZDtcbiAgICAgIGlmIChoYXNTdGFydGVkKSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oYXMtc3RhcnRlZCcpO1xuICAgICAgICAvLyB0cmlnZ2VyIHRoZSBmaXJzdHBsYXkgZXZlbnQgaWYgdGhpcyBuZXdseSBoYXMgcGxheWVkXG4gICAgICAgIHRoaXMudHJpZ2dlcignZmlyc3RwbGF5Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtaGFzLXN0YXJ0ZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMuaGFzU3RhcnRlZF87XG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIHBsYXllciBoYXMgaW5pdGlhbCBkdXJhdGlvbiBhbmQgZGltZW5zaW9uIGluZm9ybWF0aW9uXG4gKiBAZXZlbnQgbG9hZGVkbWV0YWRhdGFcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25Mb2FkZWRNZXRhRGF0YTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGRvd25sb2FkZWQgZGF0YSBhdCB0aGUgY3VycmVudCBwbGF5YmFjayBwb3NpdGlvblxuICogQGV2ZW50IGxvYWRlZGRhdGFcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25Mb2FkZWREYXRhO1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIHBsYXllciBoYXMgZmluaXNoZWQgZG93bmxvYWRpbmcgdGhlIHNvdXJjZSBkYXRhXG4gKiBAZXZlbnQgbG9hZGVkYWxsZGF0YVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbkxvYWRlZEFsbERhdGE7XG5cbi8qKlxuICogRmlyZWQgd2hlbmV2ZXIgdGhlIG1lZGlhIGJlZ2lucyBvciByZXN1bWVzIHBsYXliYWNrXG4gKiBAZXZlbnQgcGxheVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vblBsYXkgPSBmdW5jdGlvbigpe1xuICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtcGF1c2VkJyk7XG4gIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1wbGF5aW5nJyk7XG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW5ldmVyIHRoZSBtZWRpYSBiZWdpbnMgd2F0aW5nXG4gKiBAZXZlbnQgd2FpdGluZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbldhaXRpbmcgPSBmdW5jdGlvbigpe1xuICB0aGlzLmFkZENsYXNzKCd2anMtd2FpdGluZycpO1xufTtcblxuLyoqXG4gKiBBIGhhbmRsZXIgZm9yIGV2ZW50cyB0aGF0IHNpZ25hbCB0aGF0IHdhaXRpbmcgaGFzIGVuZWRlZFxuICogd2hpY2ggaXMgbm90IGNvbnNpc3RlbnQgYmV0d2VlbiBicm93c2Vycy4gU2VlICMxMzUxXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uV2FpdEVuZCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy13YWl0aW5nJyk7XG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW5ldmVyIHRoZSBwbGF5ZXIgaXMganVtcGluZyB0byBhIG5ldyB0aW1lXG4gKiBAZXZlbnQgc2Vla2luZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vblNlZWtpbmcgPSBmdW5jdGlvbigpe1xuICB0aGlzLmFkZENsYXNzKCd2anMtc2Vla2luZycpO1xufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGZpbmlzaGVkIGp1bXBpbmcgdG8gYSBuZXcgdGltZVxuICogQGV2ZW50IHNlZWtlZFxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vblNlZWtlZCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1zZWVraW5nJyk7XG59O1xuXG4vKipcbiAqIEZpcmVkIHRoZSBmaXJzdCB0aW1lIGEgdmlkZW8gaXMgcGxheWVkXG4gKlxuICogTm90IHBhcnQgb2YgdGhlIEhMUyBzcGVjLCBhbmQgd2UncmUgbm90IHN1cmUgaWYgdGhpcyBpcyB0aGUgYmVzdFxuICogaW1wbGVtZW50YXRpb24geWV0LCBzbyB1c2Ugc3BhcmluZ2x5LiBJZiB5b3UgZG9uJ3QgaGF2ZSBhIHJlYXNvbiB0b1xuICogcHJldmVudCBwbGF5YmFjaywgdXNlIGBteVBsYXllci5vbmUoJ3BsYXknKTtgIGluc3RlYWQuXG4gKlxuICogQGV2ZW50IGZpcnN0cGxheVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbkZpcnN0UGxheSA9IGZ1bmN0aW9uKCl7XG4gICAgLy9JZiB0aGUgZmlyc3Qgc3RhcnR0aW1lIGF0dHJpYnV0ZSBpcyBzcGVjaWZpZWRcbiAgICAvL3RoZW4gd2Ugd2lsbCBzdGFydCBhdCB0aGUgZ2l2ZW4gb2Zmc2V0IGluIHNlY29uZHNcbiAgICBpZih0aGlzLm9wdGlvbnNfWydzdGFydHRpbWUnXSl7XG4gICAgICB0aGlzLmN1cnJlbnRUaW1lKHRoaXMub3B0aW9uc19bJ3N0YXJ0dGltZSddKTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZENsYXNzKCd2anMtaGFzLXN0YXJ0ZWQnKTtcbn07XG5cbi8qKlxuICogRmlyZWQgd2hlbmV2ZXIgdGhlIG1lZGlhIGhhcyBiZWVuIHBhdXNlZFxuICogQGV2ZW50IHBhdXNlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uUGF1c2UgPSBmdW5jdGlvbigpe1xuICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtcGxheWluZycpO1xuICB0aGlzLmFkZENsYXNzKCd2anMtcGF1c2VkJyk7XG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb24gaGFzIGNoYW5nZWRcbiAqXG4gKiBEdXJpbmcgcGxheWJhY2sgdGhpcyBpcyBmaXJlZCBldmVyeSAxNS0yNTAgbWlsbGlzZWNvbmRzLCBkZXBuZGluZyBvbiB0aGVcbiAqIHBsYXliYWNrIHRlY2hub2xvZ3kgaW4gdXNlLlxuICogQGV2ZW50IHRpbWV1cGRhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25UaW1lVXBkYXRlO1xuXG4vKipcbiAqIEZpcmVkIHdoaWxlIHRoZSB1c2VyIGFnZW50IGlzIGRvd25sb2FkaW5nIG1lZGlhIGRhdGFcbiAqIEBldmVudCBwcm9ncmVzc1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vblByb2dyZXNzID0gZnVuY3Rpb24oKXtcbiAgLy8gQWRkIGN1c3RvbSBldmVudCBmb3Igd2hlbiBzb3VyY2UgaXMgZmluaXNoZWQgZG93bmxvYWRpbmcuXG4gIGlmICh0aGlzLmJ1ZmZlcmVkUGVyY2VudCgpID09IDEpIHtcbiAgICB0aGlzLnRyaWdnZXIoJ2xvYWRlZGFsbGRhdGEnKTtcbiAgfVxufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBlbmQgb2YgdGhlIG1lZGlhIHJlc291cmNlIGlzIHJlYWNoZWQgKGN1cnJlbnRUaW1lID09IGR1cmF0aW9uKVxuICogQGV2ZW50IGVuZGVkXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uRW5kZWQgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5vcHRpb25zX1snbG9vcCddKSB7XG4gICAgdGhpcy5jdXJyZW50VGltZSgwKTtcbiAgICB0aGlzLnBsYXkoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBkdXJhdGlvbiBvZiB0aGUgbWVkaWEgcmVzb3VyY2UgaXMgZmlyc3Qga25vd24gb3IgY2hhbmdlZFxuICogQGV2ZW50IGR1cmF0aW9uY2hhbmdlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uRHVyYXRpb25DaGFuZ2UgPSBmdW5jdGlvbigpe1xuICAvLyBBbGxvd3MgZm9yIGNhY2hlaW5nIHZhbHVlIGluc3RlYWQgb2YgYXNraW5nIHBsYXllciBlYWNoIHRpbWUuXG4gIC8vIFdlIG5lZWQgdG8gZ2V0IHRoZSB0ZWNoR2V0IHJlc3BvbnNlIGFuZCBjaGVjayBmb3IgYSB2YWx1ZSBzbyB3ZSBkb24ndFxuICAvLyBhY2NpZGVudGFsbHkgY2F1c2UgdGhlIHN0YWNrIHRvIGJsb3cgdXAuXG4gIHZhciBkdXJhdGlvbiA9IHRoaXMudGVjaEdldCgnZHVyYXRpb24nKTtcbiAgaWYgKGR1cmF0aW9uKSB7XG4gICAgaWYgKGR1cmF0aW9uIDwgMCkge1xuICAgICAgZHVyYXRpb24gPSBJbmZpbml0eTtcbiAgICB9XG4gICAgdGhpcy5kdXJhdGlvbihkdXJhdGlvbik7XG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgbGl2ZSBhbmQgcHJvcGFnYXRlIHN0eWxlcyBkb3duIHRvIFVJLlxuICAgIGlmIChkdXJhdGlvbiA9PT0gSW5maW5pdHkpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1saXZlJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1saXZlJyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIHZvbHVtZSBjaGFuZ2VzXG4gKiBAZXZlbnQgdm9sdW1lY2hhbmdlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uVm9sdW1lQ2hhbmdlO1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIHBsYXllciBzd2l0Y2hlcyBpbiBvciBvdXQgb2YgZnVsbHNjcmVlbiBtb2RlXG4gKiBAZXZlbnQgZnVsbHNjcmVlbmNoYW5nZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbkZ1bGxzY3JlZW5DaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHRoaXMuaXNGdWxsc2NyZWVuKCkpIHtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtZnVsbHNjcmVlbicpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1mdWxsc2NyZWVuJyk7XG4gIH1cbn07XG5cbi8vIC8qIFBsYXllciBBUElcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbi8qKlxuICogT2JqZWN0IGZvciBjYWNoZWQgdmFsdWVzLlxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuY2FjaGVfO1xuXG52anMuUGxheWVyLnByb3RvdHlwZS5nZXRDYWNoZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmNhY2hlXztcbn07XG5cbi8vIFBhc3MgdmFsdWVzIHRvIHRoZSBwbGF5YmFjayB0ZWNoXG52anMuUGxheWVyLnByb3RvdHlwZS50ZWNoQ2FsbCA9IGZ1bmN0aW9uKG1ldGhvZCwgYXJnKXtcbiAgLy8gSWYgaXQncyBub3QgcmVhZHkgeWV0LCBjYWxsIG1ldGhvZCB3aGVuIGl0IGlzXG4gIGlmICh0aGlzLnRlY2ggJiYgIXRoaXMudGVjaC5pc1JlYWR5Xykge1xuICAgIHRoaXMudGVjaC5yZWFkeShmdW5jdGlvbigpe1xuICAgICAgdGhpc1ttZXRob2RdKGFyZyk7XG4gICAgfSk7XG5cbiAgLy8gT3RoZXJ3aXNlIGNhbGwgbWV0aG9kIG5vd1xuICB9IGVsc2Uge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnRlY2hbbWV0aG9kXShhcmcpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgdmpzLmxvZyhlKTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG59O1xuXG4vLyBHZXQgY2FsbHMgY2FuJ3Qgd2FpdCBmb3IgdGhlIHRlY2gsIGFuZCBzb21ldGltZXMgZG9uJ3QgbmVlZCB0by5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnRlY2hHZXQgPSBmdW5jdGlvbihtZXRob2Qpe1xuICBpZiAodGhpcy50ZWNoICYmIHRoaXMudGVjaC5pc1JlYWR5Xykge1xuXG4gICAgLy8gRmxhc2ggbGlrZXMgdG8gZGllIGFuZCByZWxvYWQgd2hlbiB5b3UgaGlkZSBvciByZXBvc2l0aW9uIGl0LlxuICAgIC8vIEluIHRoZXNlIGNhc2VzIHRoZSBvYmplY3QgbWV0aG9kcyBnbyBhd2F5IGFuZCB3ZSBnZXQgZXJyb3JzLlxuICAgIC8vIFdoZW4gdGhhdCBoYXBwZW5zIHdlJ2xsIGNhdGNoIHRoZSBlcnJvcnMgYW5kIGluZm9ybSB0ZWNoIHRoYXQgaXQncyBub3QgcmVhZHkgYW55IG1vcmUuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiB0aGlzLnRlY2hbbWV0aG9kXSgpO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgLy8gV2hlbiBidWlsZGluZyBhZGRpdGlvbmFsIHRlY2ggbGlicywgYW4gZXhwZWN0ZWQgbWV0aG9kIG1heSBub3QgYmUgZGVmaW5lZCB5ZXRcbiAgICAgIGlmICh0aGlzLnRlY2hbbWV0aG9kXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZqcy5sb2coJ1ZpZGVvLmpzOiAnICsgbWV0aG9kICsgJyBtZXRob2Qgbm90IGRlZmluZWQgZm9yICcrdGhpcy50ZWNoTmFtZSsnIHBsYXliYWNrIHRlY2hub2xvZ3kuJywgZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXaGVuIGEgbWV0aG9kIGlzbid0IGF2YWlsYWJsZSBvbiB0aGUgb2JqZWN0IGl0IHRocm93cyBhIFR5cGVFcnJvclxuICAgICAgICBpZiAoZS5uYW1lID09ICdUeXBlRXJyb3InKSB7XG4gICAgICAgICAgdmpzLmxvZygnVmlkZW8uanM6ICcgKyBtZXRob2QgKyAnIHVuYXZhaWxhYmxlIG9uICcrdGhpcy50ZWNoTmFtZSsnIHBsYXliYWNrIHRlY2hub2xvZ3kgZWxlbWVudC4nLCBlKTtcbiAgICAgICAgICB0aGlzLnRlY2guaXNSZWFkeV8gPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2anMubG9nKGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybjtcbn07XG5cbi8qKlxuICogc3RhcnQgbWVkaWEgcGxheWJhY2tcbiAqXG4gKiAgICAgbXlQbGF5ZXIucGxheSgpO1xuICpcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGZcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMudGVjaENhbGwoJ3BsYXknKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFBhdXNlIHRoZSB2aWRlbyBwbGF5YmFja1xuICpcbiAqICAgICBteVBsYXllci5wYXVzZSgpO1xuICpcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGZcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpe1xuICB0aGlzLnRlY2hDYWxsKCdwYXVzZScpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHBsYXllciBpcyBwYXVzZWRcbiAqXG4gKiAgICAgdmFyIGlzUGF1c2VkID0gbXlQbGF5ZXIucGF1c2VkKCk7XG4gKiAgICAgdmFyIGlzUGxheWluZyA9ICFteVBsYXllci5wYXVzZWQoKTtcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufSBmYWxzZSBpZiB0aGUgbWVkaWEgaXMgY3VycmVudGx5IHBsYXlpbmcsIG9yIHRydWUgb3RoZXJ3aXNlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnBhdXNlZCA9IGZ1bmN0aW9uKCl7XG4gIC8vIFRoZSBpbml0aWFsIHN0YXRlIG9mIHBhdXNlZCBzaG91bGQgYmUgdHJ1ZSAoaW4gU2FmYXJpIGl0J3MgYWN0dWFsbHkgZmFsc2UpXG4gIHJldHVybiAodGhpcy50ZWNoR2V0KCdwYXVzZWQnKSA9PT0gZmFsc2UpID8gZmFsc2UgOiB0cnVlO1xufTtcblxuLyoqXG4gKiBHZXQgb3Igc2V0IHRoZSBjdXJyZW50IHRpbWUgKGluIHNlY29uZHMpXG4gKlxuICogICAgIC8vIGdldFxuICogICAgIHZhciB3aGVyZVlvdUF0ID0gbXlQbGF5ZXIuY3VycmVudFRpbWUoKTtcbiAqXG4gKiAgICAgLy8gc2V0XG4gKiAgICAgbXlQbGF5ZXIuY3VycmVudFRpbWUoMTIwKTsgLy8gMiBtaW51dGVzIGludG8gdGhlIHZpZGVvXG4gKlxuICogQHBhcmFtICB7TnVtYmVyfFN0cmluZz19IHNlY29uZHMgVGhlIHRpbWUgdG8gc2VlayB0b1xuICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgVGhlIHRpbWUgaW4gc2Vjb25kcywgd2hlbiBub3Qgc2V0dGluZ1xuICogQHJldHVybiB7dmpzLlBsYXllcn0gICAgc2VsZiwgd2hlbiB0aGUgY3VycmVudCB0aW1lIGlzIHNldFxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5jdXJyZW50VGltZSA9IGZ1bmN0aW9uKHNlY29uZHMpe1xuICBpZiAoc2Vjb25kcyAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICB0aGlzLnRlY2hDYWxsKCdzZXRDdXJyZW50VGltZScsIHNlY29uZHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBjYWNoZSBsYXN0IGN1cnJlbnRUaW1lIGFuZCByZXR1cm4uIGRlZmF1bHQgdG8gMCBzZWNvbmRzXG4gIC8vXG4gIC8vIENhY2hpbmcgdGhlIGN1cnJlbnRUaW1lIGlzIG1lYW50IHRvIHByZXZlbnQgYSBtYXNzaXZlIGFtb3VudCBvZiByZWFkcyBvbiB0aGUgdGVjaCdzXG4gIC8vIGN1cnJlbnRUaW1lIHdoZW4gc2NydWJiaW5nLCBidXQgbWF5IG5vdCBwcm92aWRlIG11Y2ggcGVyZm9ybWFjZSBiZW5lZml0IGFmdGVyYWxsLlxuICAvLyBTaG91bGQgYmUgdGVzdGVkLiBBbHNvIHNvbWV0aGluZyBoYXMgdG8gcmVhZCB0aGUgYWN0dWFsIGN1cnJlbnQgdGltZSBvciB0aGUgY2FjaGUgd2lsbFxuICAvLyBuZXZlciBnZXQgdXBkYXRlZC5cbiAgcmV0dXJuIHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lID0gKHRoaXMudGVjaEdldCgnY3VycmVudFRpbWUnKSB8fCAwKTtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBsZW5ndGggaW4gdGltZSBvZiB0aGUgdmlkZW8gaW4gc2Vjb25kc1xuICpcbiAqICAgICB2YXIgbGVuZ3RoT2ZWaWRlbyA9IG15UGxheWVyLmR1cmF0aW9uKCk7XG4gKlxuICogKipOT1RFKio6IFRoZSB2aWRlbyBtdXN0IGhhdmUgc3RhcnRlZCBsb2FkaW5nIGJlZm9yZSB0aGUgZHVyYXRpb24gY2FuIGJlXG4gKiBrbm93biwgYW5kIGluIHRoZSBjYXNlIG9mIEZsYXNoLCBtYXkgbm90IGJlIGtub3duIHVudGlsIHRoZSB2aWRlbyBzdGFydHNcbiAqIHBsYXlpbmcuXG4gKlxuICogQHJldHVybiB7TnVtYmVyfSBUaGUgZHVyYXRpb24gb2YgdGhlIHZpZGVvIGluIHNlY29uZHNcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuZHVyYXRpb24gPSBmdW5jdGlvbihzZWNvbmRzKXtcbiAgaWYgKHNlY29uZHMgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgLy8gY2FjaGUgdGhlIGxhc3Qgc2V0IHZhbHVlIGZvciBvcHRpbWlpemVkIHNjcnViYmluZyAoZXNwLiBGbGFzaClcbiAgICB0aGlzLmNhY2hlXy5kdXJhdGlvbiA9IHBhcnNlRmxvYXQoc2Vjb25kcyk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIGlmICh0aGlzLmNhY2hlXy5kdXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5vbkR1cmF0aW9uQ2hhbmdlKCk7XG4gIH1cblxuICByZXR1cm4gdGhpcy5jYWNoZV8uZHVyYXRpb24gfHwgMDtcbn07XG5cbi8vIENhbGN1bGF0ZXMgaG93IG11Y2ggdGltZSBpcyBsZWZ0LiBOb3QgaW4gc3BlYywgYnV0IHVzZWZ1bC5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnJlbWFpbmluZ1RpbWUgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5kdXJhdGlvbigpIC0gdGhpcy5jdXJyZW50VGltZSgpO1xufTtcblxuLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy92aWRlby5odG1sI2RvbS1tZWRpYS1idWZmZXJlZFxuLy8gQnVmZmVyZWQgcmV0dXJucyBhIHRpbWVyYW5nZSBvYmplY3QuXG4vLyBLaW5kIG9mIGxpa2UgYW4gYXJyYXkgb2YgcG9ydGlvbnMgb2YgdGhlIHZpZGVvIHRoYXQgaGF2ZSBiZWVuIGRvd25sb2FkZWQuXG5cbi8qKlxuICogR2V0IGEgVGltZVJhbmdlIG9iamVjdCB3aXRoIHRoZSB0aW1lcyBvZiB0aGUgdmlkZW8gdGhhdCBoYXZlIGJlZW4gZG93bmxvYWRlZFxuICpcbiAqIElmIHlvdSBqdXN0IHdhbnQgdGhlIHBlcmNlbnQgb2YgdGhlIHZpZGVvIHRoYXQncyBiZWVuIGRvd25sb2FkZWQsXG4gKiB1c2UgYnVmZmVyZWRQZXJjZW50LlxuICpcbiAqICAgICAvLyBOdW1iZXIgb2YgZGlmZmVyZW50IHJhbmdlcyBvZiB0aW1lIGhhdmUgYmVlbiBidWZmZXJlZC4gVXN1YWxseSAxLlxuICogICAgIG51bWJlck9mUmFuZ2VzID0gYnVmZmVyZWRUaW1lUmFuZ2UubGVuZ3RoLFxuICpcbiAqICAgICAvLyBUaW1lIGluIHNlY29uZHMgd2hlbiB0aGUgZmlyc3QgcmFuZ2Ugc3RhcnRzLiBVc3VhbGx5IDAuXG4gKiAgICAgZmlyc3RSYW5nZVN0YXJ0ID0gYnVmZmVyZWRUaW1lUmFuZ2Uuc3RhcnQoMCksXG4gKlxuICogICAgIC8vIFRpbWUgaW4gc2Vjb25kcyB3aGVuIHRoZSBmaXJzdCByYW5nZSBlbmRzXG4gKiAgICAgZmlyc3RSYW5nZUVuZCA9IGJ1ZmZlcmVkVGltZVJhbmdlLmVuZCgwKSxcbiAqXG4gKiAgICAgLy8gTGVuZ3RoIGluIHNlY29uZHMgb2YgdGhlIGZpcnN0IHRpbWUgcmFuZ2VcbiAqICAgICBmaXJzdFJhbmdlTGVuZ3RoID0gZmlyc3RSYW5nZUVuZCAtIGZpcnN0UmFuZ2VTdGFydDtcbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IEEgbW9jayBUaW1lUmFuZ2Ugb2JqZWN0IChmb2xsb3dpbmcgSFRNTCBzcGVjKVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5idWZmZXJlZCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBidWZmZXJlZCA9IHRoaXMudGVjaEdldCgnYnVmZmVyZWQnKTtcblxuICBpZiAoIWJ1ZmZlcmVkIHx8ICFidWZmZXJlZC5sZW5ndGgpIHtcbiAgICBidWZmZXJlZCA9IHZqcy5jcmVhdGVUaW1lUmFuZ2UoMCwwKTtcbiAgfVxuXG4gIHJldHVybiBidWZmZXJlZDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBwZXJjZW50IChhcyBhIGRlY2ltYWwpIG9mIHRoZSB2aWRlbyB0aGF0J3MgYmVlbiBkb3dubG9hZGVkXG4gKlxuICogICAgIHZhciBob3dNdWNoSXNEb3dubG9hZGVkID0gbXlQbGF5ZXIuYnVmZmVyZWRQZXJjZW50KCk7XG4gKlxuICogMCBtZWFucyBub25lLCAxIG1lYW5zIGFsbC5cbiAqIChUaGlzIG1ldGhvZCBpc24ndCBpbiB0aGUgSFRNTDUgc3BlYywgYnV0IGl0J3MgdmVyeSBjb252ZW5pZW50KVxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gQSBkZWNpbWFsIGJldHdlZW4gMCBhbmQgMSByZXByZXNlbnRpbmcgdGhlIHBlcmNlbnRcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuYnVmZmVyZWRQZXJjZW50ID0gZnVuY3Rpb24oKXtcbiAgdmFyIGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbigpLFxuICAgICAgYnVmZmVyZWQgPSB0aGlzLmJ1ZmZlcmVkKCksXG4gICAgICBidWZmZXJlZER1cmF0aW9uID0gMCxcbiAgICAgIHN0YXJ0LCBlbmQ7XG5cbiAgaWYgKCFkdXJhdGlvbikge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgZm9yICh2YXIgaT0wOyBpPGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKXtcbiAgICBzdGFydCA9IGJ1ZmZlcmVkLnN0YXJ0KGkpO1xuICAgIGVuZCAgID0gYnVmZmVyZWQuZW5kKGkpO1xuXG4gICAgLy8gYnVmZmVyZWQgZW5kIGNhbiBiZSBiaWdnZXIgdGhhbiBkdXJhdGlvbiBieSBhIHZlcnkgc21hbGwgZnJhY3Rpb25cbiAgICBpZiAoZW5kID4gZHVyYXRpb24pIHtcbiAgICAgIGVuZCA9IGR1cmF0aW9uO1xuICAgIH1cblxuICAgIGJ1ZmZlcmVkRHVyYXRpb24gKz0gZW5kIC0gc3RhcnQ7XG4gIH1cblxuICByZXR1cm4gYnVmZmVyZWREdXJhdGlvbiAvIGR1cmF0aW9uO1xufTtcblxuLyoqXG4gKiBHZXQgdGhlIGVuZGluZyB0aW1lIG9mIHRoZSBsYXN0IGJ1ZmZlcmVkIHRpbWUgcmFuZ2VcbiAqXG4gKiBUaGlzIGlzIHVzZWQgaW4gdGhlIHByb2dyZXNzIGJhciB0byBlbmNhcHN1bGF0ZSBhbGwgdGltZSByYW5nZXMuXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IFRoZSBlbmQgb2YgdGhlIGxhc3QgYnVmZmVyZWQgdGltZSByYW5nZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5idWZmZXJlZEVuZCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBidWZmZXJlZCA9IHRoaXMuYnVmZmVyZWQoKSxcbiAgICAgIGR1cmF0aW9uID0gdGhpcy5kdXJhdGlvbigpLFxuICAgICAgZW5kID0gYnVmZmVyZWQuZW5kKGJ1ZmZlcmVkLmxlbmd0aC0xKTtcblxuICBpZiAoZW5kID4gZHVyYXRpb24pIHtcbiAgICBlbmQgPSBkdXJhdGlvbjtcbiAgfVxuXG4gIHJldHVybiBlbmQ7XG59O1xuXG4vKipcbiAqIEdldCBvciBzZXQgdGhlIGN1cnJlbnQgdm9sdW1lIG9mIHRoZSBtZWRpYVxuICpcbiAqICAgICAvLyBnZXRcbiAqICAgICB2YXIgaG93TG91ZElzSXQgPSBteVBsYXllci52b2x1bWUoKTtcbiAqXG4gKiAgICAgLy8gc2V0XG4gKiAgICAgbXlQbGF5ZXIudm9sdW1lKDAuNSk7IC8vIFNldCB2b2x1bWUgdG8gaGFsZlxuICpcbiAqIDAgaXMgb2ZmIChtdXRlZCksIDEuMCBpcyBhbGwgdGhlIHdheSB1cCwgMC41IGlzIGhhbGYgd2F5LlxuICpcbiAqIEBwYXJhbSAge051bWJlcn0gcGVyY2VudEFzRGVjaW1hbCBUaGUgbmV3IHZvbHVtZSBhcyBhIGRlY2ltYWwgcGVyY2VudFxuICogQHJldHVybiB7TnVtYmVyfSAgICAgICAgICAgICAgICAgIFRoZSBjdXJyZW50IHZvbHVtZSwgd2hlbiBnZXR0aW5nXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSAgICAgICAgICAgICAgc2VsZiwgd2hlbiBzZXR0aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnZvbHVtZSA9IGZ1bmN0aW9uKHBlcmNlbnRBc0RlY2ltYWwpe1xuICB2YXIgdm9sO1xuXG4gIGlmIChwZXJjZW50QXNEZWNpbWFsICE9PSB1bmRlZmluZWQpIHtcbiAgICB2b2wgPSBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBwYXJzZUZsb2F0KHBlcmNlbnRBc0RlY2ltYWwpKSk7IC8vIEZvcmNlIHZhbHVlIHRvIGJldHdlZW4gMCBhbmQgMVxuICAgIHRoaXMuY2FjaGVfLnZvbHVtZSA9IHZvbDtcbiAgICB0aGlzLnRlY2hDYWxsKCdzZXRWb2x1bWUnLCB2b2wpO1xuICAgIHZqcy5zZXRMb2NhbFN0b3JhZ2UoJ3ZvbHVtZScsIHZvbCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBEZWZhdWx0IHRvIDEgd2hlbiByZXR1cm5pbmcgY3VycmVudCB2b2x1bWUuXG4gIHZvbCA9IHBhcnNlRmxvYXQodGhpcy50ZWNoR2V0KCd2b2x1bWUnKSk7XG4gIHJldHVybiAoaXNOYU4odm9sKSkgPyAxIDogdm9sO1xufTtcblxuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBtdXRlZCBzdGF0ZSwgb3IgdHVybiBtdXRlIG9uIG9yIG9mZlxuICpcbiAqICAgICAvLyBnZXRcbiAqICAgICB2YXIgaXNWb2x1bWVNdXRlZCA9IG15UGxheWVyLm11dGVkKCk7XG4gKlxuICogICAgIC8vIHNldFxuICogICAgIG15UGxheWVyLm11dGVkKHRydWUpOyAvLyBtdXRlIHRoZSB2b2x1bWVcbiAqXG4gKiBAcGFyYW0gIHtCb29sZWFuPX0gbXV0ZWQgVHJ1ZSB0byBtdXRlLCBmYWxzZSB0byB1bm11dGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59IFRydWUgaWYgbXV0ZSBpcyBvbiwgZmFsc2UgaWYgbm90LCB3aGVuIGdldHRpbmdcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGYsIHdoZW4gc2V0dGluZyBtdXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm11dGVkID0gZnVuY3Rpb24obXV0ZWQpe1xuICBpZiAobXV0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGVjaENhbGwoJ3NldE11dGVkJywgbXV0ZWQpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLnRlY2hHZXQoJ211dGVkJykgfHwgZmFsc2U7IC8vIERlZmF1bHQgdG8gZmFsc2Vcbn07XG5cbi8vIENoZWNrIGlmIGN1cnJlbnQgdGVjaCBjYW4gc3VwcG9ydCBuYXRpdmUgZnVsbHNjcmVlblxuLy8gKGUuZy4gd2l0aCBidWlsdCBpbiBjb250cm9scyBsaWsgaU9TLCBzbyBub3Qgb3VyIGZsYXNoIHN3ZilcbnZqcy5QbGF5ZXIucHJvdG90eXBlLnN1cHBvcnRzRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLnRlY2hHZXQoJ3N1cHBvcnRzRnVsbFNjcmVlbicpIHx8IGZhbHNlO1xufTtcblxuLyoqXG4gKiBpcyB0aGUgcGxheWVyIGluIGZ1bGxzY3JlZW5cbiAqIEB0eXBlIHtCb29sZWFufVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuaXNGdWxsc2NyZWVuXyA9IGZhbHNlO1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBwbGF5ZXIgaXMgaW4gZnVsbHNjcmVlbiBtb2RlXG4gKlxuICogICAgIC8vIGdldFxuICogICAgIHZhciBmdWxsc2NyZWVuT3JOb3QgPSBteVBsYXllci5pc0Z1bGxzY3JlZW4oKTtcbiAqXG4gKiAgICAgLy8gc2V0XG4gKiAgICAgbXlQbGF5ZXIuaXNGdWxsc2NyZWVuKHRydWUpOyAvLyB0ZWxsIHRoZSBwbGF5ZXIgaXQncyBpbiBmdWxsc2NyZWVuXG4gKlxuICogTk9URTogQXMgb2YgdGhlIGxhdGVzdCBIVE1MNSBzcGVjLCBpc0Z1bGxzY3JlZW4gaXMgbm8gbG9uZ2VyIGFuIG9mZmljaWFsXG4gKiBwcm9wZXJ0eSBhbmQgaW5zdGVhZCBkb2N1bWVudC5mdWxsc2NyZWVuRWxlbWVudCBpcyB1c2VkLiBCdXQgaXNGdWxsc2NyZWVuIGlzXG4gKiBzdGlsbCBhIHZhbHVhYmxlIHByb3BlcnR5IGZvciBpbnRlcm5hbCBwbGF5ZXIgd29ya2luZ3MuXG4gKlxuICogQHBhcmFtICB7Qm9vbGVhbj19IGlzRlMgVXBkYXRlIHRoZSBwbGF5ZXIncyBmdWxsc2NyZWVuIHN0YXRlXG4gKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlIGlmIGZ1bGxzY3JlZW4sIGZhbHNlIGlmIG5vdFxuICogQHJldHVybiB7dmpzLlBsYXllcn0gc2VsZiwgd2hlbiBzZXR0aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmlzRnVsbHNjcmVlbiA9IGZ1bmN0aW9uKGlzRlMpe1xuICBpZiAoaXNGUyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy5pc0Z1bGxzY3JlZW5fID0gISFpc0ZTO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLmlzRnVsbHNjcmVlbl87XG59O1xuXG4vKipcbiAqIE9sZCBuYW1pbmcgZm9yIGlzRnVsbHNjcmVlbigpXG4gKiBAZGVwcmVjYXRlZCBmb3IgbG93ZXJjYXNlICdzJyB2ZXJzaW9uXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmlzRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKGlzRlMpe1xuICB2anMubG9nLndhcm4oJ3BsYXllci5pc0Z1bGxTY3JlZW4oKSBoYXMgYmVlbiBkZXByZWNhdGVkLCB1c2UgcGxheWVyLmlzRnVsbHNjcmVlbigpIHdpdGggYSBsb3dlcmNhc2UgXCJzXCIpJyk7XG4gIHJldHVybiB0aGlzLmlzRnVsbHNjcmVlbihpc0ZTKTtcbn07XG5cbi8qKlxuICogSW5jcmVhc2UgdGhlIHNpemUgb2YgdGhlIHZpZGVvIHRvIGZ1bGwgc2NyZWVuXG4gKlxuICogICAgIG15UGxheWVyLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gKlxuICogSW4gc29tZSBicm93c2VycywgZnVsbCBzY3JlZW4gaXMgbm90IHN1cHBvcnRlZCBuYXRpdmVseSwgc28gaXQgZW50ZXJzXG4gKiBcImZ1bGwgd2luZG93IG1vZGVcIiwgd2hlcmUgdGhlIHZpZGVvIGZpbGxzIHRoZSBicm93c2VyIHdpbmRvdy5cbiAqIEluIGJyb3dzZXJzIGFuZCBkZXZpY2VzIHRoYXQgc3VwcG9ydCBuYXRpdmUgZnVsbCBzY3JlZW4sIHNvbWV0aW1lcyB0aGVcbiAqIGJyb3dzZXIncyBkZWZhdWx0IGNvbnRyb2xzIHdpbGwgYmUgc2hvd24sIGFuZCBub3QgdGhlIFZpZGVvLmpzIGN1c3RvbSBza2luLlxuICogVGhpcyBpbmNsdWRlcyBtb3N0IG1vYmlsZSBkZXZpY2VzIChpT1MsIEFuZHJvaWQpIGFuZCBvbGRlciB2ZXJzaW9ucyBvZlxuICogU2FmYXJpLlxuICpcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGZcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUucmVxdWVzdEZ1bGxzY3JlZW4gPSBmdW5jdGlvbigpe1xuICB2YXIgZnNBcGkgPSB2anMuYnJvd3Nlci5mdWxsc2NyZWVuQVBJO1xuXG4gIHRoaXMuaXNGdWxsc2NyZWVuKHRydWUpO1xuXG4gIGlmIChmc0FwaSkge1xuICAgIC8vIHRoZSBicm93c2VyIHN1cHBvcnRzIGdvaW5nIGZ1bGxzY3JlZW4gYXQgdGhlIGVsZW1lbnQgbGV2ZWwgc28gd2UgY2FuXG4gICAgLy8gdGFrZSB0aGUgY29udHJvbHMgZnVsbHNjcmVlbiBhcyB3ZWxsIGFzIHRoZSB2aWRlb1xuXG4gICAgLy8gVHJpZ2dlciBmdWxsc2NyZWVuY2hhbmdlIGV2ZW50IGFmdGVyIGNoYW5nZVxuICAgIC8vIFdlIGhhdmUgdG8gc3BlY2lmaWNhbGx5IGFkZCB0aGlzIGVhY2ggdGltZSwgYW5kIHJlbW92ZVxuICAgIC8vIHdoZW4gY2FuY2VsbGluZyBmdWxsc2NyZWVuLiBPdGhlcndpc2UgaWYgdGhlcmUncyBtdWx0aXBsZVxuICAgIC8vIHBsYXllcnMgb24gYSBwYWdlLCB0aGV5IHdvdWxkIGFsbCBiZSByZWFjdGluZyB0byB0aGUgc2FtZSBmdWxsc2NyZWVuXG4gICAgLy8gZXZlbnRzXG4gICAgdmpzLm9uKGRvY3VtZW50LCBmc0FwaVsnZnVsbHNjcmVlbmNoYW5nZSddLCB2anMuYmluZCh0aGlzLCBmdW5jdGlvbihlKXtcbiAgICAgIHRoaXMuaXNGdWxsc2NyZWVuKGRvY3VtZW50W2ZzQXBpLmZ1bGxzY3JlZW5FbGVtZW50XSk7XG5cbiAgICAgIC8vIElmIGNhbmNlbGxpbmcgZnVsbHNjcmVlbiwgcmVtb3ZlIGV2ZW50IGxpc3RlbmVyLlxuICAgICAgaWYgKHRoaXMuaXNGdWxsc2NyZWVuKCkgPT09IGZhbHNlKSB7XG4gICAgICAgIHZqcy5vZmYoZG9jdW1lbnQsIGZzQXBpWydmdWxsc2NyZWVuY2hhbmdlJ10sIGFyZ3VtZW50cy5jYWxsZWUpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyaWdnZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnKTtcbiAgICB9KSk7XG5cbiAgICB0aGlzLmVsX1tmc0FwaS5yZXF1ZXN0RnVsbHNjcmVlbl0oKTtcblxuICB9IGVsc2UgaWYgKHRoaXMudGVjaC5zdXBwb3J0c0Z1bGxTY3JlZW4oKSkge1xuICAgIC8vIHdlIGNhbid0IHRha2UgdGhlIHZpZGVvLmpzIGNvbnRyb2xzIGZ1bGxzY3JlZW4gYnV0IHdlIGNhbiBnbyBmdWxsc2NyZWVuXG4gICAgLy8gd2l0aCBuYXRpdmUgY29udHJvbHNcbiAgICB0aGlzLnRlY2hDYWxsKCdlbnRlckZ1bGxTY3JlZW4nKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBmdWxsc2NyZWVuIGlzbid0IHN1cHBvcnRlZCBzbyB3ZSdsbCBqdXN0IHN0cmV0Y2ggdGhlIHZpZGVvIGVsZW1lbnQgdG9cbiAgICAvLyBmaWxsIHRoZSB2aWV3cG9ydFxuICAgIHRoaXMuZW50ZXJGdWxsV2luZG93KCk7XG4gICAgdGhpcy50cmlnZ2VyKCdmdWxsc2NyZWVuY2hhbmdlJyk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogT2xkIG5hbWluZyBmb3IgcmVxdWVzdEZ1bGxzY3JlZW5cbiAqIEBkZXByZWNhdGVkIGZvciBsb3dlciBjYXNlICdzJyB2ZXJzaW9uXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnJlcXVlc3RGdWxsU2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgdmpzLmxvZy53YXJuKCdwbGF5ZXIucmVxdWVzdEZ1bGxTY3JlZW4oKSBoYXMgYmVlbiBkZXByZWNhdGVkLCB1c2UgcGxheWVyLnJlcXVlc3RGdWxsc2NyZWVuKCkgd2l0aCBhIGxvd2VyY2FzZSBcInNcIiknKTtcbiAgcmV0dXJuIHRoaXMucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbn07XG5cblxuLyoqXG4gKiBSZXR1cm4gdGhlIHZpZGVvIHRvIGl0cyBub3JtYWwgc2l6ZSBhZnRlciBoYXZpbmcgYmVlbiBpbiBmdWxsIHNjcmVlbiBtb2RlXG4gKlxuICogICAgIG15UGxheWVyLmV4aXRGdWxsc2NyZWVuKCk7XG4gKlxuICogQHJldHVybiB7dmpzLlBsYXllcn0gc2VsZlxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5leGl0RnVsbHNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHZhciBmc0FwaSA9IHZqcy5icm93c2VyLmZ1bGxzY3JlZW5BUEk7XG4gIHRoaXMuaXNGdWxsc2NyZWVuKGZhbHNlKTtcblxuICAvLyBDaGVjayBmb3IgYnJvd3NlciBlbGVtZW50IGZ1bGxzY3JlZW4gc3VwcG9ydFxuICBpZiAoZnNBcGkpIHtcbiAgICBkb2N1bWVudFtmc0FwaS5leGl0RnVsbHNjcmVlbl0oKTtcbiAgfSBlbHNlIGlmICh0aGlzLnRlY2guc3VwcG9ydHNGdWxsU2NyZWVuKCkpIHtcbiAgIHRoaXMudGVjaENhbGwoJ2V4aXRGdWxsU2NyZWVuJyk7XG4gIH0gZWxzZSB7XG4gICB0aGlzLmV4aXRGdWxsV2luZG93KCk7XG4gICB0aGlzLnRyaWdnZXIoJ2Z1bGxzY3JlZW5jaGFuZ2UnKTtcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBPbGQgbmFtaW5nIGZvciBleGl0RnVsbHNjcmVlblxuICogQGRlcHJlY2F0ZWQgZm9yIGV4aXRGdWxsc2NyZWVuXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmNhbmNlbEZ1bGxTY3JlZW4gPSBmdW5jdGlvbigpe1xuICB2anMubG9nLndhcm4oJ3BsYXllci5jYW5jZWxGdWxsU2NyZWVuKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgdXNlIHBsYXllci5leGl0RnVsbHNjcmVlbigpJyk7XG4gIHJldHVybiB0aGlzLmV4aXRGdWxsc2NyZWVuKCk7XG59O1xuXG4vLyBXaGVuIGZ1bGxzY3JlZW4gaXNuJ3Qgc3VwcG9ydGVkIHdlIGNhbiBzdHJldGNoIHRoZSB2aWRlbyBjb250YWluZXIgdG8gYXMgd2lkZSBhcyB0aGUgYnJvd3NlciB3aWxsIGxldCB1cy5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmVudGVyRnVsbFdpbmRvdyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuaXNGdWxsV2luZG93ID0gdHJ1ZTtcblxuICAvLyBTdG9yaW5nIG9yaWdpbmFsIGRvYyBvdmVyZmxvdyB2YWx1ZSB0byByZXR1cm4gdG8gd2hlbiBmdWxsc2NyZWVuIGlzIG9mZlxuICB0aGlzLmRvY09yaWdPdmVyZmxvdyA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdztcblxuICAvLyBBZGQgbGlzdGVuZXIgZm9yIGVzYyBrZXkgdG8gZXhpdCBmdWxsc2NyZWVuXG4gIHZqcy5vbihkb2N1bWVudCwgJ2tleWRvd24nLCB2anMuYmluZCh0aGlzLCB0aGlzLmZ1bGxXaW5kb3dPbkVzY0tleSkpO1xuXG4gIC8vIEhpZGUgYW55IHNjcm9sbCBiYXJzXG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuXG4gIC8vIEFwcGx5IGZ1bGxzY3JlZW4gc3R5bGVzXG4gIHZqcy5hZGRDbGFzcyhkb2N1bWVudC5ib2R5LCAndmpzLWZ1bGwtd2luZG93Jyk7XG5cbiAgdGhpcy50cmlnZ2VyKCdlbnRlckZ1bGxXaW5kb3cnKTtcbn07XG52anMuUGxheWVyLnByb3RvdHlwZS5mdWxsV2luZG93T25Fc2NLZXkgPSBmdW5jdGlvbihldmVudCl7XG4gIGlmIChldmVudC5rZXlDb2RlID09PSAyNykge1xuICAgIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXhpdEZ1bGxXaW5kb3coKTtcbiAgICB9XG4gIH1cbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmV4aXRGdWxsV2luZG93ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5pc0Z1bGxXaW5kb3cgPSBmYWxzZTtcbiAgdmpzLm9mZihkb2N1bWVudCwgJ2tleWRvd24nLCB0aGlzLmZ1bGxXaW5kb3dPbkVzY0tleSk7XG5cbiAgLy8gVW5oaWRlIHNjcm9sbCBiYXJzLlxuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSB0aGlzLmRvY09yaWdPdmVyZmxvdztcblxuICAvLyBSZW1vdmUgZnVsbHNjcmVlbiBzdHlsZXNcbiAgdmpzLnJlbW92ZUNsYXNzKGRvY3VtZW50LmJvZHksICd2anMtZnVsbC13aW5kb3cnKTtcblxuICAvLyBSZXNpemUgdGhlIGJveCwgY29udHJvbGxlciwgYW5kIHBvc3RlciB0byBvcmlnaW5hbCBzaXplc1xuICAvLyB0aGlzLnBvc2l0aW9uQWxsKCk7XG4gIHRoaXMudHJpZ2dlcignZXhpdEZ1bGxXaW5kb3cnKTtcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnNlbGVjdFNvdXJjZSA9IGZ1bmN0aW9uKHNvdXJjZXMpe1xuXG4gIC8vIExvb3AgdGhyb3VnaCBlYWNoIHBsYXliYWNrIHRlY2hub2xvZ3kgaW4gdGhlIG9wdGlvbnMgb3JkZXJcbiAgZm9yICh2YXIgaT0wLGo9dGhpcy5vcHRpb25zX1sndGVjaE9yZGVyJ107aTxqLmxlbmd0aDtpKyspIHtcbiAgICB2YXIgdGVjaE5hbWUgPSB2anMuY2FwaXRhbGl6ZShqW2ldKSxcbiAgICAgICAgdGVjaCA9IHdpbmRvd1sndmlkZW9qcyddW3RlY2hOYW1lXTtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBjdXJyZW50IHRlY2ggaXMgZGVmaW5lZCBiZWZvcmUgY29udGludWluZ1xuICAgIGlmICghdGVjaCkge1xuICAgICAgdmpzLmxvZy5lcnJvcignVGhlIFwiJyArIHRlY2hOYW1lICsgJ1wiIHRlY2ggaXMgdW5kZWZpbmVkLiBTa2lwcGVkIGJyb3dzZXIgc3VwcG9ydCBjaGVjayBmb3IgdGhhdCB0ZWNoLicpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhpcyB0ZWNobm9sb2d5XG4gICAgaWYgKHRlY2guaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgLy8gTG9vcCB0aHJvdWdoIGVhY2ggc291cmNlIG9iamVjdFxuICAgICAgZm9yICh2YXIgYT0wLGI9c291cmNlczthPGIubGVuZ3RoO2ErKykge1xuICAgICAgICB2YXIgc291cmNlID0gYlthXTtcblxuICAgICAgICAvLyBDaGVjayBpZiBzb3VyY2UgY2FuIGJlIHBsYXllZCB3aXRoIHRoaXMgdGVjaG5vbG9neVxuICAgICAgICBpZiAodGVjaFsnY2FuUGxheVNvdXJjZSddKHNvdXJjZSkpIHtcbiAgICAgICAgICByZXR1cm4geyBzb3VyY2U6IHNvdXJjZSwgdGVjaDogdGVjaE5hbWUgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn07XG5cbi8qKlxuICogVGhlIHNvdXJjZSBmdW5jdGlvbiB1cGRhdGVzIHRoZSB2aWRlbyBzb3VyY2VcbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgdHlwZXMgb2YgdmFyaWFibGVzIHlvdSBjYW4gcGFzcyBhcyB0aGUgYXJndW1lbnQuXG4gKlxuICogKipVUkwgU3RyaW5nKio6IEEgVVJMIHRvIHRoZSB0aGUgdmlkZW8gZmlsZS4gVXNlIHRoaXMgbWV0aG9kIGlmIHlvdSBhcmUgc3VyZVxuICogdGhlIGN1cnJlbnQgcGxheWJhY2sgdGVjaG5vbG9neSAoSFRNTDUvRmxhc2gpIGNhbiBzdXBwb3J0IHRoZSBzb3VyY2UgeW91XG4gKiBwcm92aWRlLiBDdXJyZW50bHkgb25seSBNUDQgZmlsZXMgY2FuIGJlIHVzZWQgaW4gYm90aCBIVE1MNSBhbmQgRmxhc2guXG4gKlxuICogICAgIG15UGxheWVyLnNyYyhcImh0dHA6Ly93d3cuZXhhbXBsZS5jb20vcGF0aC90by92aWRlby5tcDRcIik7XG4gKlxuICogKipTb3VyY2UgT2JqZWN0IChvciBlbGVtZW50KToqKiBBIGphdmFzY3JpcHQgb2JqZWN0IGNvbnRhaW5pbmcgaW5mb3JtYXRpb25cbiAqIGFib3V0IHRoZSBzb3VyY2UgZmlsZS4gVXNlIHRoaXMgbWV0aG9kIGlmIHlvdSB3YW50IHRoZSBwbGF5ZXIgdG8gZGV0ZXJtaW5lIGlmXG4gKiBpdCBjYW4gc3VwcG9ydCB0aGUgZmlsZSB1c2luZyB0aGUgdHlwZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiAgICAgbXlQbGF5ZXIuc3JjKHsgdHlwZTogXCJ2aWRlby9tcDRcIiwgc3JjOiBcImh0dHA6Ly93d3cuZXhhbXBsZS5jb20vcGF0aC90by92aWRlby5tcDRcIiB9KTtcbiAqXG4gKiAqKkFycmF5IG9mIFNvdXJjZSBPYmplY3RzOioqIFRvIHByb3ZpZGUgbXVsdGlwbGUgdmVyc2lvbnMgb2YgdGhlIHNvdXJjZSBzb1xuICogdGhhdCBpdCBjYW4gYmUgcGxheWVkIHVzaW5nIEhUTUw1IGFjcm9zcyBicm93c2VycyB5b3UgY2FuIHVzZSBhbiBhcnJheSBvZlxuICogc291cmNlIG9iamVjdHMuIFZpZGVvLmpzIHdpbGwgZGV0ZWN0IHdoaWNoIHZlcnNpb24gaXMgc3VwcG9ydGVkIGFuZCBsb2FkIHRoYXRcbiAqIGZpbGUuXG4gKlxuICogICAgIG15UGxheWVyLnNyYyhbXG4gKiAgICAgICB7IHR5cGU6IFwidmlkZW8vbXA0XCIsIHNyYzogXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL3BhdGgvdG8vdmlkZW8ubXA0XCIgfSxcbiAqICAgICAgIHsgdHlwZTogXCJ2aWRlby93ZWJtXCIsIHNyYzogXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL3BhdGgvdG8vdmlkZW8ud2VibVwiIH0sXG4gKiAgICAgICB7IHR5cGU6IFwidmlkZW8vb2dnXCIsIHNyYzogXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL3BhdGgvdG8vdmlkZW8ub2d2XCIgfVxuICogICAgIF0pO1xuICpcbiAqIEBwYXJhbSAge1N0cmluZ3xPYmplY3R8QXJyYXk9fSBzb3VyY2UgVGhlIHNvdXJjZSBVUkwsIG9iamVjdCwgb3IgYXJyYXkgb2Ygc291cmNlc1xuICogQHJldHVybiB7U3RyaW5nfSBUaGUgY3VycmVudCB2aWRlbyBzb3VyY2Ugd2hlbiBnZXR0aW5nXG4gKiBAcmV0dXJuIHtTdHJpbmd9IFRoZSBwbGF5ZXIgd2hlbiBzZXR0aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnNyYyA9IGZ1bmN0aW9uKHNvdXJjZSl7XG4gIGlmIChzb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLnRlY2hHZXQoJ3NyYycpO1xuICB9XG5cbiAgLy8gY2FzZTogQXJyYXkgb2Ygc291cmNlIG9iamVjdHMgdG8gY2hvb3NlIGZyb20gYW5kIHBpY2sgdGhlIGJlc3QgdG8gcGxheVxuICBpZiAodmpzLm9iai5pc0FycmF5KHNvdXJjZSkpIHtcbiAgICB0aGlzLnNvdXJjZUxpc3RfKHNvdXJjZSk7XG5cbiAgLy8gY2FzZTogVVJMIFN0cmluZyAoaHR0cDovL215dmlkZW8uLi4pXG4gIH0gZWxzZSBpZiAodHlwZW9mIHNvdXJjZSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBjcmVhdGUgYSBzb3VyY2Ugb2JqZWN0IGZyb20gdGhlIHN0cmluZ1xuICAgIHRoaXMuc3JjKHsgc3JjOiBzb3VyY2UgfSk7XG5cbiAgLy8gY2FzZTogU291cmNlIG9iamVjdCB7IHNyYzogJycsIHR5cGU6ICcnIC4uLiB9XG4gIH0gZWxzZSBpZiAoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIHNvdXJjZSBoYXMgYSB0eXBlIGFuZCB0aGUgbG9hZGVkIHRlY2ggY2Fubm90IHBsYXkgdGhlIHNvdXJjZVxuICAgIC8vIGlmIHRoZXJlJ3Mgbm8gdHlwZSB3ZSdsbCBqdXN0IHRyeSB0aGUgY3VycmVudCB0ZWNoXG4gICAgaWYgKHNvdXJjZS50eXBlICYmICF3aW5kb3dbJ3ZpZGVvanMnXVt0aGlzLnRlY2hOYW1lXVsnY2FuUGxheVNvdXJjZSddKHNvdXJjZSkpIHtcbiAgICAgIC8vIGNyZWF0ZSBhIHNvdXJjZSBsaXN0IHdpdGggdGhlIGN1cnJlbnQgc291cmNlIGFuZCBzZW5kIHRocm91Z2hcbiAgICAgIC8vIHRoZSB0ZWNoIGxvb3AgdG8gY2hlY2sgZm9yIGEgY29tcGF0aWJsZSB0ZWNobm9sb2d5XG4gICAgICB0aGlzLnNvdXJjZUxpc3RfKFtzb3VyY2VdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jYWNoZV8uc3JjID0gc291cmNlLnNyYztcbiAgICAgIHRoaXMuY3VycmVudFR5cGVfID0gc291cmNlLnR5cGUgfHwgJyc7XG5cbiAgICAgIC8vIHdhaXQgdW50aWwgdGhlIHRlY2ggaXMgcmVhZHkgdG8gc2V0IHRoZSBzb3VyY2VcbiAgICAgIHRoaXMucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy50ZWNoQ2FsbCgnc3JjJywgc291cmNlLnNyYyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9uc19bJ3ByZWxvYWQnXSA9PSAnYXV0bycpIHtcbiAgICAgICAgICB0aGlzLmxvYWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfWydhdXRvcGxheSddKSB7XG4gICAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBIYW5kbGUgYW4gYXJyYXkgb2Ygc291cmNlIG9iamVjdHNcbiAqIEBwYXJhbSAge1t0eXBlXX0gc291cmNlcyBBcnJheSBvZiBzb3VyY2Ugb2JqZWN0c1xuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuc291cmNlTGlzdF8gPSBmdW5jdGlvbihzb3VyY2VzKXtcbiAgdmFyIHNvdXJjZVRlY2ggPSB0aGlzLnNlbGVjdFNvdXJjZShzb3VyY2VzKSxcbiAgICAgIGVycm9yVGltZW91dDtcblxuICBpZiAoc291cmNlVGVjaCkge1xuICAgIGlmIChzb3VyY2VUZWNoLnRlY2ggPT09IHRoaXMudGVjaE5hbWUpIHtcbiAgICAgIC8vIGlmIHRoaXMgdGVjaG5vbG9neSBpcyBhbHJlYWR5IGxvYWRlZCwgc2V0IHRoZSBzb3VyY2VcbiAgICAgIHRoaXMuc3JjKHNvdXJjZVRlY2guc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbG9hZCB0aGlzIHRlY2hub2xvZ3kgd2l0aCB0aGUgY2hvc2VuIHNvdXJjZVxuICAgICAgdGhpcy5sb2FkVGVjaChzb3VyY2VUZWNoLnRlY2gsIHNvdXJjZVRlY2guc291cmNlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gV2UgbmVlZCB0byB3cmFwIHRoaXMgaW4gYSB0aW1lb3V0IHRvIGdpdmUgZm9sa3MgYSBjaGFuY2UgdG8gYWRkIGVycm9yIGV2ZW50IGhhbmRsZXJzXG4gICAgZXJyb3JUaW1lb3V0ID0gc2V0VGltZW91dCh2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuZXJyb3IoeyBjb2RlOiA0LCBtZXNzYWdlOiB0aGlzLmxvY2FsaXplKHRoaXMub3B0aW9ucygpWydub3RTdXBwb3J0ZWRNZXNzYWdlJ10pIH0pO1xuICAgIH0pLCAwKTtcblxuICAgIC8vIHdlIGNvdWxkIG5vdCBmaW5kIGFuIGFwcHJvcHJpYXRlIHRlY2gsIGJ1dCBsZXQncyBzdGlsbCBub3RpZnkgdGhlIGRlbGVnYXRlIHRoYXQgdGhpcyBpcyBpdFxuICAgIC8vIHRoaXMgbmVlZHMgYSBiZXR0ZXIgY29tbWVudCBhYm91dCB3aHkgdGhpcyBpcyBuZWVkZWRcbiAgICB0aGlzLnRyaWdnZXJSZWFkeSgpO1xuXG4gICAgdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KGVycm9yVGltZW91dCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIEJlZ2luIGxvYWRpbmcgdGhlIHNyYyBkYXRhXG4vLyBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL3ZpZGVvLmh0bWwjZG9tLW1lZGlhLWxvYWRcbnZqcy5QbGF5ZXIucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpe1xuICB0aGlzLnRlY2hDYWxsKCdsb2FkJyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy92aWRlby5odG1sI2RvbS1tZWRpYS1jdXJyZW50c3JjXG52anMuUGxheWVyLnByb3RvdHlwZS5jdXJyZW50U3JjID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMudGVjaEdldCgnY3VycmVudFNyYycpIHx8IHRoaXMuY2FjaGVfLnNyYyB8fCAnJztcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjdXJyZW50IHNvdXJjZSB0eXBlIGUuZy4gdmlkZW8vbXA0XG4gKiBUaGlzIGNhbiBhbGxvdyB5b3UgcmVidWlsZCB0aGUgY3VycmVudCBzb3VyY2Ugb2JqZWN0IHNvIHRoYXQgeW91IGNvdWxkIGxvYWQgdGhlIHNhbWVcbiAqIHNvdXJjZSBhbmQgdGVjaCBsYXRlclxuICogQHJldHVybiB7U3RyaW5nfSBUaGUgc291cmNlIE1JTUUgdHlwZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5jdXJyZW50VHlwZSA9IGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudFR5cGVfIHx8ICcnO1xufTtcblxuLy8gQXR0cmlidXRlcy9PcHRpb25zXG52anMuUGxheWVyLnByb3RvdHlwZS5wcmVsb2FkID0gZnVuY3Rpb24odmFsdWUpe1xuICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGVjaENhbGwoJ3NldFByZWxvYWQnLCB2YWx1ZSk7XG4gICAgdGhpcy5vcHRpb25zX1sncHJlbG9hZCddID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMudGVjaEdldCgncHJlbG9hZCcpO1xufTtcbnZqcy5QbGF5ZXIucHJvdG90eXBlLmF1dG9wbGF5ID0gZnVuY3Rpb24odmFsdWUpe1xuICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGVjaENhbGwoJ3NldEF1dG9wbGF5JywgdmFsdWUpO1xuICAgIHRoaXMub3B0aW9uc19bJ2F1dG9wbGF5J10gPSB2YWx1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZXR1cm4gdGhpcy50ZWNoR2V0KCdhdXRvcGxheScsIHZhbHVlKTtcbn07XG52anMuUGxheWVyLnByb3RvdHlwZS5sb29wID0gZnVuY3Rpb24odmFsdWUpe1xuICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGVjaENhbGwoJ3NldExvb3AnLCB2YWx1ZSk7XG4gICAgdGhpcy5vcHRpb25zX1snbG9vcCddID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMudGVjaEdldCgnbG9vcCcpO1xufTtcblxuLyoqXG4gKiB0aGUgdXJsIG9mIHRoZSBwb3N0ZXIgaW1hZ2Ugc291cmNlXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUucG9zdGVyXztcblxuLyoqXG4gKiBnZXQgb3Igc2V0IHRoZSBwb3N0ZXIgaW1hZ2Ugc291cmNlIHVybFxuICpcbiAqICMjIyMjIEVYQU1QTEU6XG4gKlxuICogICAgIC8vIGdldHRpbmdcbiAqICAgICB2YXIgY3VycmVudFBvc3RlciA9IG15UGxheWVyLnBvc3RlcigpO1xuICpcbiAqICAgICAvLyBzZXR0aW5nXG4gKiAgICAgbXlQbGF5ZXIucG9zdGVyKCdodHRwOi8vZXhhbXBsZS5jb20vbXlJbWFnZS5qcGcnKTtcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmc9fSBbc3JjXSBQb3N0ZXIgaW1hZ2Ugc291cmNlIFVSTFxuICogQHJldHVybiB7U3RyaW5nfSBwb3N0ZXIgVVJMIHdoZW4gZ2V0dGluZ1xuICogQHJldHVybiB7dmpzLlBsYXllcn0gc2VsZiB3aGVuIHNldHRpbmdcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUucG9zdGVyID0gZnVuY3Rpb24oc3JjKXtcbiAgaWYgKHNyYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXMucG9zdGVyXztcbiAgfVxuXG4gIC8vIHVwZGF0ZSB0aGUgaW50ZXJuYWwgcG9zdGVyIHZhcmlhYmxlXG4gIHRoaXMucG9zdGVyXyA9IHNyYztcblxuICAvLyB1cGRhdGUgdGhlIHRlY2gncyBwb3N0ZXJcbiAgdGhpcy50ZWNoQ2FsbCgnc2V0UG9zdGVyJywgc3JjKTtcblxuICAvLyBhbGVydCBjb21wb25lbnRzIHRoYXQgdGhlIHBvc3RlciBoYXMgYmVlbiBzZXRcbiAgdGhpcy50cmlnZ2VyKCdwb3N0ZXJjaGFuZ2UnKTtcbn07XG5cbi8qKlxuICogV2hldGhlciBvciBub3QgdGhlIGNvbnRyb2xzIGFyZSBzaG93aW5nXG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmNvbnRyb2xzXztcblxuLyoqXG4gKiBHZXQgb3Igc2V0IHdoZXRoZXIgb3Igbm90IHRoZSBjb250cm9scyBhcmUgc2hvd2luZy5cbiAqIEBwYXJhbSAge0Jvb2xlYW59IGNvbnRyb2xzIFNldCBjb250cm9scyB0byBzaG93aW5nIG9yIG5vdFxuICogQHJldHVybiB7Qm9vbGVhbn0gICAgQ29udHJvbHMgYXJlIHNob3dpbmdcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuY29udHJvbHMgPSBmdW5jdGlvbihib29sKXtcbiAgaWYgKGJvb2wgIT09IHVuZGVmaW5lZCkge1xuICAgIGJvb2wgPSAhIWJvb2w7IC8vIGZvcmNlIGJvb2xlYW5cbiAgICAvLyBEb24ndCB0cmlnZ2VyIGEgY2hhbmdlIGV2ZW50IHVubGVzcyBpdCBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKHRoaXMuY29udHJvbHNfICE9PSBib29sKSB7XG4gICAgICB0aGlzLmNvbnRyb2xzXyA9IGJvb2w7XG4gICAgICBpZiAoYm9vbCkge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtY29udHJvbHMtZGlzYWJsZWQnKTtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWNvbnRyb2xzLWVuYWJsZWQnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjb250cm9sc2VuYWJsZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1jb250cm9scy1lbmFibGVkJyk7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1kaXNhYmxlZCcpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2NvbnRyb2xzZGlzYWJsZWQnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMuY29udHJvbHNfO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUudXNpbmdOYXRpdmVDb250cm9sc187XG5cbi8qKlxuICogVG9nZ2xlIG5hdGl2ZSBjb250cm9scyBvbi9vZmYuIE5hdGl2ZSBjb250cm9scyBhcmUgdGhlIGNvbnRyb2xzIGJ1aWx0IGludG9cbiAqIGRldmljZXMgKGUuZy4gZGVmYXVsdCBpUGhvbmUgY29udHJvbHMpLCBGbGFzaCwgb3Igb3RoZXIgdGVjaHNcbiAqIChlLmcuIFZpbWVvIENvbnRyb2xzKVxuICpcbiAqICoqVGhpcyBzaG91bGQgb25seSBiZSBzZXQgYnkgdGhlIGN1cnJlbnQgdGVjaCwgYmVjYXVzZSBvbmx5IHRoZSB0ZWNoIGtub3dzXG4gKiBpZiBpdCBjYW4gc3VwcG9ydCBuYXRpdmUgY29udHJvbHMqKlxuICpcbiAqIEBwYXJhbSAge0Jvb2xlYW59IGJvb2wgICAgVHJ1ZSBzaWduYWxzIHRoYXQgbmF0aXZlIGNvbnRyb2xzIGFyZSBvblxuICogQHJldHVybiB7dmpzLlBsYXllcn0gICAgICBSZXR1cm5zIHRoZSBwbGF5ZXJcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnVzaW5nTmF0aXZlQ29udHJvbHMgPSBmdW5jdGlvbihib29sKXtcbiAgaWYgKGJvb2wgIT09IHVuZGVmaW5lZCkge1xuICAgIGJvb2wgPSAhIWJvb2w7IC8vIGZvcmNlIGJvb2xlYW5cbiAgICAvLyBEb24ndCB0cmlnZ2VyIGEgY2hhbmdlIGV2ZW50IHVubGVzcyBpdCBhY3R1YWxseSBjaGFuZ2VkXG4gICAgaWYgKHRoaXMudXNpbmdOYXRpdmVDb250cm9sc18gIT09IGJvb2wpIHtcbiAgICAgIHRoaXMudXNpbmdOYXRpdmVDb250cm9sc18gPSBib29sO1xuICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXVzaW5nLW5hdGl2ZS1jb250cm9scycpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBwbGF5ZXIgaXMgdXNpbmcgdGhlIG5hdGl2ZSBkZXZpY2UgY29udHJvbHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IHVzaW5nbmF0aXZlY29udHJvbHNcbiAgICAgICAgICogQG1lbWJlcm9mIHZqcy5QbGF5ZXJcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3VzaW5nbmF0aXZlY29udHJvbHMnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy11c2luZy1uYXRpdmUtY29udHJvbHMnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogcGxheWVyIGlzIHVzaW5nIHRoZSBjdXN0b20gSFRNTCBjb250cm9sc1xuICAgICAgICAgKlxuICAgICAgICAgKiBAZXZlbnQgdXNpbmdjdXN0b21jb250cm9sc1xuICAgICAgICAgKiBAbWVtYmVyb2YgdmpzLlBsYXllclxuICAgICAgICAgKiBAaW5zdGFuY2VcbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpZ2dlcigndXNpbmdjdXN0b21jb250cm9scycpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZXR1cm4gdGhpcy51c2luZ05hdGl2ZUNvbnRyb2xzXztcbn07XG5cbi8qKlxuICogU3RvcmUgdGhlIGN1cnJlbnQgbWVkaWEgZXJyb3JcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5lcnJvcl8gPSBudWxsO1xuXG4vKipcbiAqIFNldCBvciBnZXQgdGhlIGN1cnJlbnQgTWVkaWFFcnJvclxuICogQHBhcmFtICB7Kn0gZXJyIEEgTWVkaWFFcnJvciBvciBhIFN0cmluZy9OdW1iZXIgdG8gYmUgdHVybmVkIGludG8gYSBNZWRpYUVycm9yXG4gKiBAcmV0dXJuIHt2anMuTWVkaWFFcnJvcnxudWxsfSAgICAgd2hlbiBnZXR0aW5nXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSAgICAgICAgICAgICAgd2hlbiBzZXR0aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24oZXJyKXtcbiAgaWYgKGVyciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXMuZXJyb3JfO1xuICB9XG5cbiAgLy8gcmVzdG9yaW5nIHRvIGRlZmF1bHRcbiAgaWYgKGVyciA9PT0gbnVsbCkge1xuICAgIHRoaXMuZXJyb3JfID0gZXJyO1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1lcnJvcicpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gZXJyb3IgaW5zdGFuY2VcbiAgaWYgKGVyciBpbnN0YW5jZW9mIHZqcy5NZWRpYUVycm9yKSB7XG4gICAgdGhpcy5lcnJvcl8gPSBlcnI7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5lcnJvcl8gPSBuZXcgdmpzLk1lZGlhRXJyb3IoZXJyKTtcbiAgfVxuXG4gIC8vIGZpcmUgYW4gZXJyb3IgZXZlbnQgb24gdGhlIHBsYXllclxuICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG5cbiAgLy8gYWRkIHRoZSB2anMtZXJyb3IgY2xhc3NuYW1lIHRvIHRoZSBwbGF5ZXJcbiAgdGhpcy5hZGRDbGFzcygndmpzLWVycm9yJyk7XG5cbiAgLy8gbG9nIHRoZSBuYW1lIG9mIHRoZSBlcnJvciB0eXBlIGFuZCBhbnkgbWVzc2FnZVxuICAvLyBpZTgganVzdCBsb2dzIFwiW29iamVjdCBvYmplY3RdXCIgaWYgeW91IGp1c3QgbG9nIHRoZSBlcnJvciBvYmplY3RcbiAgdmpzLmxvZy5lcnJvcignKENPREU6Jyt0aGlzLmVycm9yXy5jb2RlKycgJyt2anMuTWVkaWFFcnJvci5lcnJvclR5cGVzW3RoaXMuZXJyb3JfLmNvZGVdKycpJywgdGhpcy5lcnJvcl8ubWVzc2FnZSwgdGhpcy5lcnJvcl8pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUuZW5kZWQgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoR2V0KCdlbmRlZCcpOyB9O1xudmpzLlBsYXllci5wcm90b3R5cGUuc2Vla2luZyA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hHZXQoJ3NlZWtpbmcnKTsgfTtcblxuLy8gV2hlbiB0aGUgcGxheWVyIGlzIGZpcnN0IGluaXRpYWxpemVkLCB0cmlnZ2VyIGFjdGl2aXR5IHNvIGNvbXBvbmVudHNcbi8vIGxpa2UgdGhlIGNvbnRyb2wgYmFyIHNob3cgdGhlbXNlbHZlcyBpZiBuZWVkZWRcbnZqcy5QbGF5ZXIucHJvdG90eXBlLnVzZXJBY3Rpdml0eV8gPSB0cnVlO1xudmpzLlBsYXllci5wcm90b3R5cGUucmVwb3J0VXNlckFjdGl2aXR5ID0gZnVuY3Rpb24oZXZlbnQpe1xuICB0aGlzLnVzZXJBY3Rpdml0eV8gPSB0cnVlO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUudXNlckFjdGl2ZV8gPSB0cnVlO1xudmpzLlBsYXllci5wcm90b3R5cGUudXNlckFjdGl2ZSA9IGZ1bmN0aW9uKGJvb2wpe1xuICBpZiAoYm9vbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgYm9vbCA9ICEhYm9vbDtcbiAgICBpZiAoYm9vbCAhPT0gdGhpcy51c2VyQWN0aXZlXykge1xuICAgICAgdGhpcy51c2VyQWN0aXZlXyA9IGJvb2w7XG4gICAgICBpZiAoYm9vbCkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciB3YXMgaW5hY3RpdmUgYW5kIGlzIG5vdyBhY3RpdmUgd2Ugd2FudCB0byByZXNldCB0aGVcbiAgICAgICAgLy8gaW5hY3Rpdml0eSB0aW1lclxuICAgICAgICB0aGlzLnVzZXJBY3Rpdml0eV8gPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtdXNlci1pbmFjdGl2ZScpO1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtdXNlci1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1c2VyYWN0aXZlJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZSdyZSBzd2l0Y2hpbmcgdGhlIHN0YXRlIHRvIGluYWN0aXZlIG1hbnVhbGx5LCBzbyBlcmFzZSBhbnkgb3RoZXJcbiAgICAgICAgLy8gYWN0aXZpdHlcbiAgICAgICAgdGhpcy51c2VyQWN0aXZpdHlfID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQ2hyb21lL1NhZmFyaS9JRSBoYXZlIGJ1Z3Mgd2hlcmUgd2hlbiB5b3UgY2hhbmdlIHRoZSBjdXJzb3IgaXQgY2FuXG4gICAgICAgIC8vIHRyaWdnZXIgYSBtb3VzZW1vdmUgZXZlbnQuIFRoaXMgY2F1c2VzIGFuIGlzc3VlIHdoZW4geW91J3JlIGhpZGluZ1xuICAgICAgICAvLyB0aGUgY3Vyc29yIHdoZW4gdGhlIHVzZXIgaXMgaW5hY3RpdmUsIGFuZCBhIG1vdXNlbW92ZSBzaWduYWxzIHVzZXJcbiAgICAgICAgLy8gYWN0aXZpdHkuIE1ha2luZyBpdCBpbXBvc3NpYmxlIHRvIGdvIGludG8gaW5hY3RpdmUgbW9kZS4gU3BlY2lmaWNhbGx5XG4gICAgICAgIC8vIHRoaXMgaGFwcGVucyBpbiBmdWxsc2NyZWVuIHdoZW4gd2UgcmVhbGx5IG5lZWQgdG8gaGlkZSB0aGUgY3Vyc29yLlxuICAgICAgICAvL1xuICAgICAgICAvLyBXaGVuIHRoaXMgZ2V0cyByZXNvbHZlZCBpbiBBTEwgYnJvd3NlcnMgaXQgY2FuIGJlIHJlbW92ZWRcbiAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTEwMzA0MVxuICAgICAgICBpZih0aGlzLnRlY2gpIHtcbiAgICAgICAgICB0aGlzLnRlY2gub25lKCdtb3VzZW1vdmUnLCBmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtdXNlci1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXVzZXItaW5hY3RpdmUnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1c2VyaW5hY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMudXNlckFjdGl2ZV87XG59O1xuXG52anMuUGxheWVyLnByb3RvdHlwZS5saXN0ZW5Gb3JVc2VyQWN0aXZpdHkgPSBmdW5jdGlvbigpe1xuICB2YXIgb25BY3Rpdml0eSwgb25Nb3VzZU1vdmUsIG9uTW91c2VEb3duLCBtb3VzZUluUHJvZ3Jlc3MsIG9uTW91c2VVcCxcbiAgICAgIGFjdGl2aXR5Q2hlY2ssIGluYWN0aXZpdHlUaW1lb3V0LCBsYXN0TW92ZVgsIGxhc3RNb3ZlWTtcblxuICBvbkFjdGl2aXR5ID0gdmpzLmJpbmQodGhpcywgdGhpcy5yZXBvcnRVc2VyQWN0aXZpdHkpO1xuXG4gIG9uTW91c2VNb3ZlID0gZnVuY3Rpb24oZSkge1xuICAgIC8vICMxMDY4IC0gUHJldmVudCBtb3VzZW1vdmUgc3BhbW1pbmdcbiAgICAvLyBDaHJvbWUgQnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzY2OTcwXG4gICAgaWYoZS5zY3JlZW5YICE9IGxhc3RNb3ZlWCB8fCBlLnNjcmVlblkgIT0gbGFzdE1vdmVZKSB7XG4gICAgICBsYXN0TW92ZVggPSBlLnNjcmVlblg7XG4gICAgICBsYXN0TW92ZVkgPSBlLnNjcmVlblk7XG4gICAgICBvbkFjdGl2aXR5KCk7XG4gICAgfVxuICB9O1xuXG4gIG9uTW91c2VEb3duID0gZnVuY3Rpb24oKSB7XG4gICAgb25BY3Rpdml0eSgpO1xuICAgIC8vIEZvciBhcyBsb25nIGFzIHRoZSB0aGV5IGFyZSB0b3VjaGluZyB0aGUgZGV2aWNlIG9yIGhhdmUgdGhlaXIgbW91c2UgZG93bixcbiAgICAvLyB3ZSBjb25zaWRlciB0aGVtIGFjdGl2ZSBldmVuIGlmIHRoZXkncmUgbm90IG1vdmluZyB0aGVpciBmaW5nZXIgb3IgbW91c2UuXG4gICAgLy8gU28gd2Ugd2FudCB0byBjb250aW51ZSB0byB1cGRhdGUgdGhhdCB0aGV5IGFyZSBhY3RpdmVcbiAgICBjbGVhckludGVydmFsKG1vdXNlSW5Qcm9ncmVzcyk7XG4gICAgLy8gU2V0dGluZyB1c2VyQWN0aXZpdHk9dHJ1ZSBub3cgYW5kIHNldHRpbmcgdGhlIGludGVydmFsIHRvIHRoZSBzYW1lIHRpbWVcbiAgICAvLyBhcyB0aGUgYWN0aXZpdHlDaGVjayBpbnRlcnZhbCAoMjUwKSBzaG91bGQgZW5zdXJlIHdlIG5ldmVyIG1pc3MgdGhlXG4gICAgLy8gbmV4dCBhY3Rpdml0eUNoZWNrXG4gICAgbW91c2VJblByb2dyZXNzID0gc2V0SW50ZXJ2YWwob25BY3Rpdml0eSwgMjUwKTtcbiAgfTtcblxuICBvbk1vdXNlVXAgPSBmdW5jdGlvbihldmVudCkge1xuICAgIG9uQWN0aXZpdHkoKTtcbiAgICAvLyBTdG9wIHRoZSBpbnRlcnZhbCB0aGF0IG1haW50YWlucyBhY3Rpdml0eSBpZiB0aGUgbW91c2UvdG91Y2ggaXMgZG93blxuICAgIGNsZWFySW50ZXJ2YWwobW91c2VJblByb2dyZXNzKTtcbiAgfTtcblxuICAvLyBBbnkgbW91c2UgbW92ZW1lbnQgd2lsbCBiZSBjb25zaWRlcmVkIHVzZXIgYWN0aXZpdHlcbiAgdGhpcy5vbignbW91c2Vkb3duJywgb25Nb3VzZURvd24pO1xuICB0aGlzLm9uKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gIHRoaXMub24oJ21vdXNldXAnLCBvbk1vdXNlVXApO1xuXG4gIC8vIExpc3RlbiBmb3Iga2V5Ym9hcmQgbmF2aWdhdGlvblxuICAvLyBTaG91bGRuJ3QgbmVlZCB0byB1c2UgaW5Qcm9ncmVzcyBpbnRlcnZhbCBiZWNhdXNlIG9mIGtleSByZXBlYXRcbiAgdGhpcy5vbigna2V5ZG93bicsIG9uQWN0aXZpdHkpO1xuICB0aGlzLm9uKCdrZXl1cCcsIG9uQWN0aXZpdHkpO1xuXG4gIC8vIFJ1biBhbiBpbnRlcnZhbCBldmVyeSAyNTAgbWlsbGlzZWNvbmRzIGluc3RlYWQgb2Ygc3R1ZmZpbmcgZXZlcnl0aGluZyBpbnRvXG4gIC8vIHRoZSBtb3VzZW1vdmUvdG91Y2htb3ZlIGZ1bmN0aW9uIGl0c2VsZiwgdG8gcHJldmVudCBwZXJmb3JtYW5jZSBkZWdyYWRhdGlvbi5cbiAgLy8gYHRoaXMucmVwb3J0VXNlckFjdGl2aXR5YCBzaW1wbHkgc2V0cyB0aGlzLnVzZXJBY3Rpdml0eV8gdG8gdHJ1ZSwgd2hpY2hcbiAgLy8gdGhlbiBnZXRzIHBpY2tlZCB1cCBieSB0aGlzIGxvb3BcbiAgLy8gaHR0cDovL2Vqb2huLm9yZy9ibG9nL2xlYXJuaW5nLWZyb20tdHdpdHRlci9cbiAgYWN0aXZpdHlDaGVjayA9IHNldEludGVydmFsKHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgIC8vIENoZWNrIHRvIHNlZSBpZiBtb3VzZS90b3VjaCBhY3Rpdml0eSBoYXMgaGFwcGVuZWRcbiAgICBpZiAodGhpcy51c2VyQWN0aXZpdHlfKSB7XG4gICAgICAvLyBSZXNldCB0aGUgYWN0aXZpdHkgdHJhY2tlclxuICAgICAgdGhpcy51c2VyQWN0aXZpdHlfID0gZmFsc2U7XG5cbiAgICAgIC8vIElmIHRoZSB1c2VyIHN0YXRlIHdhcyBpbmFjdGl2ZSwgc2V0IHRoZSBzdGF0ZSB0byBhY3RpdmVcbiAgICAgIHRoaXMudXNlckFjdGl2ZSh0cnVlKTtcblxuICAgICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIGluYWN0aXZpdHkgdGltZW91dCB0byBzdGFydCB0aGUgdGltZXIgb3ZlclxuICAgICAgY2xlYXJUaW1lb3V0KGluYWN0aXZpdHlUaW1lb3V0KTtcblxuICAgICAgdmFyIHRpbWVvdXQgPSB0aGlzLm9wdGlvbnMoKVsnaW5hY3Rpdml0eVRpbWVvdXQnXTtcbiAgICAgIGlmICh0aW1lb3V0ID4gMCkge1xuICAgICAgICAgIC8vIEluIDx0aW1lb3V0PiBtaWxsaXNlY29uZHMsIGlmIG5vIG1vcmUgYWN0aXZpdHkgaGFzIG9jY3VycmVkIHRoZVxuICAgICAgICAgIC8vIHVzZXIgd2lsbCBiZSBjb25zaWRlcmVkIGluYWN0aXZlXG4gICAgICAgICAgaW5hY3Rpdml0eVRpbWVvdXQgPSBzZXRUaW1lb3V0KHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgLy8gUHJvdGVjdCBhZ2FpbnN0IHRoZSBjYXNlIHdoZXJlIHRoZSBpbmFjdGl2aXR5VGltZW91dCBjYW4gdHJpZ2dlciBqdXN0XG4gICAgICAgICAgICAgIC8vIGJlZm9yZSB0aGUgbmV4dCB1c2VyIGFjdGl2aXR5IGlzIHBpY2tlZCB1cCBieSB0aGUgYWN0aXZpdHlDaGVjayBsb29wXG4gICAgICAgICAgICAgIC8vIGNhdXNpbmcgYSBmbGlja2VyXG4gICAgICAgICAgICAgIGlmICghdGhpcy51c2VyQWN0aXZpdHlfKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLnVzZXJBY3RpdmUoZmFsc2UpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSksIHRpbWVvdXQpO1xuICAgICAgfVxuICAgIH1cbiAgfSksIDI1MCk7XG5cbiAgLy8gQ2xlYW4gdXAgdGhlIGludGVydmFscyB3aGVuIHdlIGtpbGwgdGhlIHBsYXllclxuICB0aGlzLm9uKCdkaXNwb3NlJywgZnVuY3Rpb24oKXtcbiAgICBjbGVhckludGVydmFsKGFjdGl2aXR5Q2hlY2spO1xuICAgIGNsZWFyVGltZW91dChpbmFjdGl2aXR5VGltZW91dCk7XG4gIH0pO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUucGxheWJhY2tSYXRlID0gZnVuY3Rpb24ocmF0ZSkge1xuICBpZiAocmF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdGhpcy50ZWNoQ2FsbCgnc2V0UGxheWJhY2tSYXRlJywgcmF0ZSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBpZiAodGhpcy50ZWNoICYmIHRoaXMudGVjaFsnZmVhdHVyZXNQbGF5YmFja1JhdGUnXSkge1xuICAgIHJldHVybiB0aGlzLnRlY2hHZXQoJ3BsYXliYWNrUmF0ZScpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAxLjA7XG4gIH1cblxufTtcblxuLy8gTWV0aG9kcyB0byBhZGQgc3VwcG9ydCBmb3Jcbi8vIG5ldHdvcmtTdGF0ZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ25ldHdvcmtTdGF0ZScpOyB9LFxuLy8gcmVhZHlTdGF0ZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ3JlYWR5U3RhdGUnKTsgfSxcbi8vIGluaXRpYWxUaW1lOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgnaW5pdGlhbFRpbWUnKTsgfSxcbi8vIHN0YXJ0T2Zmc2V0VGltZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ3N0YXJ0T2Zmc2V0VGltZScpOyB9LFxuLy8gcGxheWVkOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgncGxheWVkJyk7IH0sXG4vLyBzZWVrYWJsZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ3NlZWthYmxlJyk7IH0sXG4vLyB2aWRlb1RyYWNrczogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ3ZpZGVvVHJhY2tzJyk7IH0sXG4vLyBhdWRpb1RyYWNrczogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ2F1ZGlvVHJhY2tzJyk7IH0sXG4vLyB2aWRlb1dpZHRoOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgndmlkZW9XaWR0aCcpOyB9LFxuLy8gdmlkZW9IZWlnaHQ6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCd2aWRlb0hlaWdodCcpOyB9LFxuLy8gZGVmYXVsdFBsYXliYWNrUmF0ZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ2RlZmF1bHRQbGF5YmFja1JhdGUnKTsgfSxcbi8vIG1lZGlhR3JvdXA6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCdtZWRpYUdyb3VwJyk7IH0sXG4vLyBjb250cm9sbGVyOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgnY29udHJvbGxlcicpOyB9LFxuLy8gZGVmYXVsdE11dGVkOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgnZGVmYXVsdE11dGVkJyk7IH1cblxuLy8gVE9ET1xuLy8gY3VycmVudFNyY0xpc3Q6IHRoZSBhcnJheSBvZiBzb3VyY2VzIGluY2x1ZGluZyBvdGhlciBmb3JtYXRzIGFuZCBiaXRyYXRlc1xuLy8gcGxheUxpc3Q6IGFycmF5IG9mIHNvdXJjZSBsaXN0cyBpbiBvcmRlciBvZiBwbGF5YmFja1xuLyoqXG4gKiBDb250YWluZXIgb2YgbWFpbiBjb250cm9sc1xuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB2anMuQ29tcG9uZW50XG4gKi9cbnZqcy5Db250cm9sQmFyID0gdmpzLkNvbXBvbmVudC5leHRlbmQoKTtcblxudmpzLkNvbnRyb2xCYXIucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICBsb2FkRXZlbnQ6ICdwbGF5JyxcbiAgY2hpbGRyZW46IHtcbiAgICAncGxheVRvZ2dsZSc6IHt9LFxuICAgICdjdXJyZW50VGltZURpc3BsYXknOiB7fSxcbiAgICAndGltZURpdmlkZXInOiB7fSxcbiAgICAnZHVyYXRpb25EaXNwbGF5Jzoge30sXG4gICAgJ3JlbWFpbmluZ1RpbWVEaXNwbGF5Jzoge30sXG4gICAgJ2xpdmVEaXNwbGF5Jzoge30sXG4gICAgJ3Byb2dyZXNzQ29udHJvbCc6IHt9LFxuICAgICdmdWxsc2NyZWVuVG9nZ2xlJzoge30sXG4gICAgJ3ZvbHVtZUNvbnRyb2wnOiB7fSxcbiAgICAnbXV0ZVRvZ2dsZSc6IHt9LFxuICAgIC8vICd2b2x1bWVNZW51QnV0dG9uJzoge30sXG4gICAgJ3BsYXliYWNrUmF0ZU1lbnVCdXR0b24nOiB7fVxuICB9XG59O1xuXG52anMuQ29udHJvbEJhci5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWNvbnRyb2wtYmFyJ1xuICB9KTtcbn07XG4vKipcbiAqIERpc3BsYXlzIHRoZSBsaXZlIGluZGljYXRvclxuICogVE9ETyAtIEZ1dHVyZSBtYWtlIGl0IGNsaWNrIHRvIHNuYXAgdG8gbGl2ZVxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTGl2ZURpc3BsYXkgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gIH1cbn0pO1xuXG52anMuTGl2ZURpc3BsYXkucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgdmFyIGVsID0gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1saXZlLWNvbnRyb2xzIHZqcy1jb250cm9sJ1xuICB9KTtcblxuICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtbGl2ZS1kaXNwbGF5JyxcbiAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj4nICsgdGhpcy5sb2NhbGl6ZSgnU3RyZWFtIFR5cGUnKSArICc8L3NwYW4+JyArIHRoaXMubG9jYWxpemUoJ0xJVkUnKSxcbiAgICAnYXJpYS1saXZlJzogJ29mZidcbiAgfSk7XG5cbiAgZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKTtcblxuICByZXR1cm4gZWw7XG59O1xuLyoqXG4gKiBCdXR0b24gdG8gdG9nZ2xlIGJldHdlZW4gcGxheSBhbmQgcGF1c2VcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuUGxheVRvZ2dsZSA9IHZqcy5CdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgcGxheWVyLm9uKCdwbGF5JywgdmpzLmJpbmQodGhpcywgdGhpcy5vblBsYXkpKTtcbiAgICBwbGF5ZXIub24oJ3BhdXNlJywgdmpzLmJpbmQodGhpcywgdGhpcy5vblBhdXNlKSk7XG4gIH1cbn0pO1xuXG52anMuUGxheVRvZ2dsZS5wcm90b3R5cGUuYnV0dG9uVGV4dCA9ICdQbGF5JztcblxudmpzLlBsYXlUb2dnbGUucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gJ3Zqcy1wbGF5LWNvbnRyb2wgJyArIHZqcy5CdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbn07XG5cbi8vIE9uQ2xpY2sgLSBUb2dnbGUgYmV0d2VlbiBwbGF5IGFuZCBwYXVzZVxudmpzLlBsYXlUb2dnbGUucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5wbGF5ZXJfLnBhdXNlZCgpKSB7XG4gICAgdGhpcy5wbGF5ZXJfLnBsYXkoKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnBsYXllcl8ucGF1c2UoKTtcbiAgfVxufTtcblxuICAvLyBPblBsYXkgLSBBZGQgdGhlIHZqcy1wbGF5aW5nIGNsYXNzIHRvIHRoZSBlbGVtZW50IHNvIGl0IGNhbiBjaGFuZ2UgYXBwZWFyYW5jZVxudmpzLlBsYXlUb2dnbGUucHJvdG90eXBlLm9uUGxheSA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5yZW1vdmVDbGFzcyh0aGlzLmVsXywgJ3Zqcy1wYXVzZWQnKTtcbiAgdmpzLmFkZENsYXNzKHRoaXMuZWxfLCAndmpzLXBsYXlpbmcnKTtcbiAgdGhpcy5lbF8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgnUGF1c2UnKTsgLy8gY2hhbmdlIHRoZSBidXR0b24gdGV4dCB0byBcIlBhdXNlXCJcbn07XG5cbiAgLy8gT25QYXVzZSAtIEFkZCB0aGUgdmpzLXBhdXNlZCBjbGFzcyB0byB0aGUgZWxlbWVudCBzbyBpdCBjYW4gY2hhbmdlIGFwcGVhcmFuY2VcbnZqcy5QbGF5VG9nZ2xlLnByb3RvdHlwZS5vblBhdXNlID0gZnVuY3Rpb24oKXtcbiAgdmpzLnJlbW92ZUNsYXNzKHRoaXMuZWxfLCAndmpzLXBsYXlpbmcnKTtcbiAgdmpzLmFkZENsYXNzKHRoaXMuZWxfLCAndmpzLXBhdXNlZCcpO1xuICB0aGlzLmVsXy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCdQbGF5Jyk7IC8vIGNoYW5nZSB0aGUgYnV0dG9uIHRleHQgdG8gXCJQbGF5XCJcbn07XG4vKipcbiAqIERpc3BsYXlzIHRoZSBjdXJyZW50IHRpbWVcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkN1cnJlbnRUaW1lRGlzcGxheSA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgcGxheWVyLm9uKCd0aW1ldXBkYXRlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGVDb250ZW50KSk7XG4gIH1cbn0pO1xuXG52anMuQ3VycmVudFRpbWVEaXNwbGF5LnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlbCA9IHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtY3VycmVudC10aW1lIHZqcy10aW1lLWNvbnRyb2xzIHZqcy1jb250cm9sJ1xuICB9KTtcblxuICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtY3VycmVudC10aW1lLWRpc3BsYXknLFxuICAgIGlubmVySFRNTDogJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPkN1cnJlbnQgVGltZSA8L3NwYW4+JyArICcwOjAwJywgLy8gbGFiZWwgdGhlIGN1cnJlbnQgdGltZSBmb3Igc2NyZWVuIHJlYWRlciB1c2Vyc1xuICAgICdhcmlhLWxpdmUnOiAnb2ZmJyAvLyB0ZWxsIHNjcmVlbiByZWFkZXJzIG5vdCB0byBhdXRvbWF0aWNhbGx5IHJlYWQgdGhlIHRpbWUgYXMgaXQgY2hhbmdlc1xuICB9KTtcblxuICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuICByZXR1cm4gZWw7XG59O1xuXG52anMuQ3VycmVudFRpbWVEaXNwbGF5LnByb3RvdHlwZS51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oKXtcbiAgLy8gQWxsb3dzIGZvciBzbW9vdGggc2NydWJiaW5nLCB3aGVuIHBsYXllciBjYW4ndCBrZWVwIHVwLlxuICB2YXIgdGltZSA9ICh0aGlzLnBsYXllcl8uc2NydWJiaW5nKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gIHRoaXMuY29udGVudEVsXy5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ0N1cnJlbnQgVGltZScpICsgJzwvc3Bhbj4gJyArIHZqcy5mb3JtYXRUaW1lKHRpbWUsIHRoaXMucGxheWVyXy5kdXJhdGlvbigpKTtcbn07XG5cbi8qKlxuICogRGlzcGxheXMgdGhlIGR1cmF0aW9uXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5EdXJhdGlvbkRpc3BsYXkgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIC8vIHRoaXMgbWlnaHQgbmVlZCB0byBiZSBjaGFuZ2VkIHRvICdkdXJhdGlvbmNoYW5nZScgaW5zdGVhZCBvZiAndGltZXVwZGF0ZScgZXZlbnR1YWxseSxcbiAgICAvLyBob3dldmVyIHRoZSBkdXJhdGlvbmNoYW5nZSBldmVudCBmaXJlcyBiZWZvcmUgdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkgaXMgc2V0LFxuICAgIC8vIHNvIHRoZSB2YWx1ZSBjYW5ub3QgYmUgd3JpdHRlbiBvdXQgdXNpbmcgdGhpcyBtZXRob2QuXG4gICAgLy8gT25jZSB0aGUgb3JkZXIgb2YgZHVyYXRpb25jaGFuZ2UgYW5kIHRoaXMucGxheWVyXy5kdXJhdGlvbigpIGJlaW5nIHNldCBpcyBmaWd1cmVkIG91dCxcbiAgICAvLyB0aGlzIGNhbiBiZSB1cGRhdGVkLlxuICAgIHBsYXllci5vbigndGltZXVwZGF0ZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlQ29udGVudCkpO1xuICB9XG59KTtcblxudmpzLkR1cmF0aW9uRGlzcGxheS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgZWwgPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWR1cmF0aW9uIHZqcy10aW1lLWNvbnRyb2xzIHZqcy1jb250cm9sJ1xuICB9KTtcblxuICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtZHVyYXRpb24tZGlzcGxheScsXG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ0R1cmF0aW9uIFRpbWUnKSArICc8L3NwYW4+ICcgKyAnMDowMCcsIC8vIGxhYmVsIHRoZSBkdXJhdGlvbiB0aW1lIGZvciBzY3JlZW4gcmVhZGVyIHVzZXJzXG4gICAgJ2FyaWEtbGl2ZSc6ICdvZmYnIC8vIHRlbGwgc2NyZWVuIHJlYWRlcnMgbm90IHRvIGF1dG9tYXRpY2FsbHkgcmVhZCB0aGUgdGltZSBhcyBpdCBjaGFuZ2VzXG4gIH0pO1xuXG4gIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyk7XG4gIHJldHVybiBlbDtcbn07XG5cbnZqcy5EdXJhdGlvbkRpc3BsYXkucHJvdG90eXBlLnVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbigpe1xuICB2YXIgZHVyYXRpb24gPSB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtcbiAgaWYgKGR1cmF0aW9uKSB7XG4gICAgICB0aGlzLmNvbnRlbnRFbF8uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPicgKyB0aGlzLmxvY2FsaXplKCdEdXJhdGlvbiBUaW1lJykgKyAnPC9zcGFuPiAnICsgdmpzLmZvcm1hdFRpbWUoZHVyYXRpb24pOyAvLyBsYWJlbCB0aGUgZHVyYXRpb24gdGltZSBmb3Igc2NyZWVuIHJlYWRlciB1c2Vyc1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBzZXBhcmF0b3IgYmV0d2VlbiB0aGUgY3VycmVudCB0aW1lIGFuZCBkdXJhdGlvblxuICpcbiAqIENhbiBiZSBoaWRkZW4gaWYgaXQncyBub3QgbmVlZGVkIGluIHRoZSBkZXNpZ24uXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVGltZURpdmlkZXIgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgfVxufSk7XG5cbnZqcy5UaW1lRGl2aWRlci5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy10aW1lLWRpdmlkZXInLFxuICAgIGlubmVySFRNTDogJzxkaXY+PHNwYW4+Lzwvc3Bhbj48L2Rpdj4nXG4gIH0pO1xufTtcblxuLyoqXG4gKiBEaXNwbGF5cyB0aGUgdGltZSBsZWZ0IGluIHRoZSB2aWRlb1xuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuUmVtYWluaW5nVGltZURpc3BsYXkgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHBsYXllci5vbigndGltZXVwZGF0ZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlQ29udGVudCkpO1xuICB9XG59KTtcblxudmpzLlJlbWFpbmluZ1RpbWVEaXNwbGF5LnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlbCA9IHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcmVtYWluaW5nLXRpbWUgdmpzLXRpbWUtY29udHJvbHMgdmpzLWNvbnRyb2wnXG4gIH0pO1xuXG4gIHRoaXMuY29udGVudEVsXyA9IHZqcy5jcmVhdGVFbCgnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1yZW1haW5pbmctdGltZS1kaXNwbGF5JyxcbiAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj4nICsgdGhpcy5sb2NhbGl6ZSgnUmVtYWluaW5nIFRpbWUnKSArICc8L3NwYW4+ICcgKyAnLTA6MDAnLCAvLyBsYWJlbCB0aGUgcmVtYWluaW5nIHRpbWUgZm9yIHNjcmVlbiByZWFkZXIgdXNlcnNcbiAgICAnYXJpYS1saXZlJzogJ29mZicgLy8gdGVsbCBzY3JlZW4gcmVhZGVycyBub3QgdG8gYXV0b21hdGljYWxseSByZWFkIHRoZSB0aW1lIGFzIGl0IGNoYW5nZXNcbiAgfSk7XG5cbiAgZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKTtcbiAgcmV0dXJuIGVsO1xufTtcblxudmpzLlJlbWFpbmluZ1RpbWVEaXNwbGF5LnByb3RvdHlwZS51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMucGxheWVyXy5kdXJhdGlvbigpKSB7XG4gICAgdGhpcy5jb250ZW50RWxfLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj4nICsgdGhpcy5sb2NhbGl6ZSgnUmVtYWluaW5nIFRpbWUnKSArICc8L3NwYW4+ICcgKyAnLScrIHZqcy5mb3JtYXRUaW1lKHRoaXMucGxheWVyXy5yZW1haW5pbmdUaW1lKCkpO1xuICB9XG5cbiAgLy8gQWxsb3dzIGZvciBzbW9vdGggc2NydWJiaW5nLCB3aGVuIHBsYXllciBjYW4ndCBrZWVwIHVwLlxuICAvLyB2YXIgdGltZSA9ICh0aGlzLnBsYXllcl8uc2NydWJiaW5nKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gIC8vIHRoaXMuY29udGVudEVsXy5pbm5lckhUTUwgPSB2anMuZm9ybWF0VGltZSh0aW1lLCB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSk7XG59O1xuLyoqXG4gKiBUb2dnbGUgZnVsbHNjcmVlbiB2aWRlb1xuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgdmpzLkJ1dHRvblxuICovXG52anMuRnVsbHNjcmVlblRvZ2dsZSA9IHZqcy5CdXR0b24uZXh0ZW5kKHtcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAbWVtYmVyb2YgdmpzLkZ1bGxzY3JlZW5Ub2dnbGVcbiAgICogQGluc3RhbmNlXG4gICAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuICB9XG59KTtcblxudmpzLkZ1bGxzY3JlZW5Ub2dnbGUucHJvdG90eXBlLmJ1dHRvblRleHQgPSAnRnVsbHNjcmVlbic7XG5cbnZqcy5GdWxsc2NyZWVuVG9nZ2xlLnByb3RvdHlwZS5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICd2anMtZnVsbHNjcmVlbi1jb250cm9sICcgKyB2anMuQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG59O1xuXG52anMuRnVsbHNjcmVlblRvZ2dsZS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIGlmICghdGhpcy5wbGF5ZXJfLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgdGhpcy5wbGF5ZXJfLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgdGhpcy5jb250cm9sVGV4dF8uaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgnTm9uLUZ1bGxzY3JlZW4nKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnBsYXllcl8uZXhpdEZ1bGxzY3JlZW4oKTtcbiAgICB0aGlzLmNvbnRyb2xUZXh0Xy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCdGdWxsc2NyZWVuJyk7XG4gIH1cbn07XG4vKipcbiAqIFRoZSBQcm9ncmVzcyBDb250cm9sIGNvbXBvbmVudCBjb250YWlucyB0aGUgc2VlayBiYXIsIGxvYWQgcHJvZ3Jlc3MsXG4gKiBhbmQgcGxheSBwcm9ncmVzc1xuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlByb2dyZXNzQ29udHJvbCA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuICB9XG59KTtcblxudmpzLlByb2dyZXNzQ29udHJvbC5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gIGNoaWxkcmVuOiB7XG4gICAgJ3NlZWtCYXInOiB7fVxuICB9XG59O1xuXG52anMuUHJvZ3Jlc3NDb250cm9sLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXByb2dyZXNzLWNvbnRyb2wgdmpzLWNvbnRyb2wnXG4gIH0pO1xufTtcblxuLyoqXG4gKiBTZWVrIEJhciBhbmQgaG9sZGVyIGZvciB0aGUgcHJvZ3Jlc3MgYmFyc1xuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlNlZWtCYXIgPSB2anMuU2xpZGVyLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuU2xpZGVyLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgICBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzKSk7XG4gICAgcGxheWVyLnJlYWR5KHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlQVJJQUF0dHJpYnV0ZXMpKTtcbiAgfVxufSk7XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IHtcbiAgICAnbG9hZFByb2dyZXNzQmFyJzoge30sXG4gICAgJ3BsYXlQcm9ncmVzc0Jhcic6IHt9LFxuICAgICdzZWVrSGFuZGxlJzoge31cbiAgfSxcbiAgJ2Jhck5hbWUnOiAncGxheVByb2dyZXNzQmFyJyxcbiAgJ2hhbmRsZU5hbWUnOiAnc2Vla0hhbmRsZSdcbn07XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS5wbGF5ZXJFdmVudCA9ICd0aW1ldXBkYXRlJztcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5TbGlkZXIucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcHJvZ3Jlc3MtaG9sZGVyJyxcbiAgICAnYXJpYS1sYWJlbCc6ICd2aWRlbyBwcm9ncmVzcyBiYXInXG4gIH0pO1xufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzID0gZnVuY3Rpb24oKXtcbiAgICAvLyBBbGxvd3MgZm9yIHNtb290aCBzY3J1YmJpbmcsIHdoZW4gcGxheWVyIGNhbid0IGtlZXAgdXAuXG4gICAgdmFyIHRpbWUgPSAodGhpcy5wbGF5ZXJfLnNjcnViYmluZykgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsdmpzLnJvdW5kKHRoaXMuZ2V0UGVyY2VudCgpKjEwMCwgMikpOyAvLyBtYWNoaW5lIHJlYWRhYmxlIHZhbHVlIG9mIHByb2dyZXNzIGJhciAocGVyY2VudGFnZSBjb21wbGV0ZSlcbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0Jyx2anMuZm9ybWF0VGltZSh0aW1lLCB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSkpOyAvLyBodW1hbiByZWFkYWJsZSB2YWx1ZSBvZiBwcm9ncmVzcyBiYXIgKHRpbWUgY29tcGxldGUpXG59O1xuXG52anMuU2Vla0Jhci5wcm90b3R5cGUuZ2V0UGVyY2VudCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSAvIHRoaXMucGxheWVyXy5kdXJhdGlvbigpO1xufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpe1xuICB2anMuU2xpZGVyLnByb3RvdHlwZS5vbk1vdXNlRG93bi5jYWxsKHRoaXMsIGV2ZW50KTtcblxuICB0aGlzLnBsYXllcl8uc2NydWJiaW5nID0gdHJ1ZTtcblxuICB0aGlzLnZpZGVvV2FzUGxheWluZyA9ICF0aGlzLnBsYXllcl8ucGF1c2VkKCk7XG4gIHRoaXMucGxheWVyXy5wYXVzZSgpO1xufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24oZXZlbnQpe1xuICB2YXIgbmV3VGltZSA9IHRoaXMuY2FsY3VsYXRlRGlzdGFuY2UoZXZlbnQpICogdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG5cbiAgLy8gRG9uJ3QgbGV0IHZpZGVvIGVuZCB3aGlsZSBzY3J1YmJpbmcuXG4gIGlmIChuZXdUaW1lID09IHRoaXMucGxheWVyXy5kdXJhdGlvbigpKSB7IG5ld1RpbWUgPSBuZXdUaW1lIC0gMC4xOyB9XG5cbiAgLy8gU2V0IG5ldyB0aW1lICh0ZWxsIHBsYXllciB0byBzZWVrIHRvIG5ldyB0aW1lKVxuICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUobmV3VGltZSk7XG59O1xuXG52anMuU2Vla0Jhci5wcm90b3R5cGUub25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpe1xuICB2anMuU2xpZGVyLnByb3RvdHlwZS5vbk1vdXNlVXAuY2FsbCh0aGlzLCBldmVudCk7XG5cbiAgdGhpcy5wbGF5ZXJfLnNjcnViYmluZyA9IGZhbHNlO1xuICBpZiAodGhpcy52aWRlb1dhc1BsYXlpbmcpIHtcbiAgICB0aGlzLnBsYXllcl8ucGxheSgpO1xuICB9XG59O1xuXG52anMuU2Vla0Jhci5wcm90b3R5cGUuc3RlcEZvcndhcmQgPSBmdW5jdGlvbigpe1xuICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgKyA1KTsgLy8gbW9yZSBxdWlja2x5IGZhc3QgZm9yd2FyZCBmb3Iga2V5Ym9hcmQtb25seSB1c2Vyc1xufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLnN0ZXBCYWNrID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpIC0gNSk7IC8vIG1vcmUgcXVpY2tseSByZXdpbmQgZm9yIGtleWJvYXJkLW9ubHkgdXNlcnNcbn07XG5cbi8qKlxuICogU2hvd3MgbG9hZCBwcm9ncmVzc1xuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkxvYWRQcm9ncmVzc0JhciA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuICAgIHBsYXllci5vbigncHJvZ3Jlc3MnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuICB9XG59KTtcblxudmpzLkxvYWRQcm9ncmVzc0Jhci5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1sb2FkLXByb2dyZXNzJyxcbiAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj48c3Bhbj4nICsgdGhpcy5sb2NhbGl6ZSgnTG9hZGVkJykgKyAnPC9zcGFuPjogMCU8L3NwYW4+J1xuICB9KTtcbn07XG5cbnZqcy5Mb2FkUHJvZ3Jlc3NCYXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBpLCBzdGFydCwgZW5kLCBwYXJ0LFxuICAgICAgYnVmZmVyZWQgPSB0aGlzLnBsYXllcl8uYnVmZmVyZWQoKSxcbiAgICAgIGR1cmF0aW9uID0gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCksXG4gICAgICBidWZmZXJlZEVuZCA9IHRoaXMucGxheWVyXy5idWZmZXJlZEVuZCgpLFxuICAgICAgY2hpbGRyZW4gPSB0aGlzLmVsXy5jaGlsZHJlbixcbiAgICAgIC8vIGdldCB0aGUgcGVyY2VudCB3aWR0aCBvZiBhIHRpbWUgY29tcGFyZWQgdG8gdGhlIHRvdGFsIGVuZFxuICAgICAgcGVyY2VudGlmeSA9IGZ1bmN0aW9uICh0aW1lLCBlbmQpe1xuICAgICAgICB2YXIgcGVyY2VudCA9ICh0aW1lIC8gZW5kKSB8fCAwOyAvLyBubyBOYU5cbiAgICAgICAgcmV0dXJuIChwZXJjZW50ICogMTAwKSArICclJztcbiAgICAgIH07XG5cbiAgLy8gdXBkYXRlIHRoZSB3aWR0aCBvZiB0aGUgcHJvZ3Jlc3MgYmFyXG4gIHRoaXMuZWxfLnN0eWxlLndpZHRoID0gcGVyY2VudGlmeShidWZmZXJlZEVuZCwgZHVyYXRpb24pO1xuXG4gIC8vIGFkZCBjaGlsZCBlbGVtZW50cyB0byByZXByZXNlbnQgdGhlIGluZGl2aWR1YWwgYnVmZmVyZWQgdGltZSByYW5nZXNcbiAgZm9yIChpID0gMDsgaSA8IGJ1ZmZlcmVkLmxlbmd0aDsgaSsrKSB7XG4gICAgc3RhcnQgPSBidWZmZXJlZC5zdGFydChpKSxcbiAgICBlbmQgPSBidWZmZXJlZC5lbmQoaSksXG4gICAgcGFydCA9IGNoaWxkcmVuW2ldO1xuXG4gICAgaWYgKCFwYXJ0KSB7XG4gICAgICBwYXJ0ID0gdGhpcy5lbF8uYXBwZW5kQ2hpbGQodmpzLmNyZWF0ZUVsKCkpXG4gICAgfTtcblxuICAgIC8vIHNldCB0aGUgcGVyY2VudCBiYXNlZCBvbiB0aGUgd2lkdGggb2YgdGhlIHByb2dyZXNzIGJhciAoYnVmZmVyZWRFbmQpXG4gICAgcGFydC5zdHlsZS5sZWZ0ID0gcGVyY2VudGlmeShzdGFydCwgYnVmZmVyZWRFbmQpO1xuICAgIHBhcnQuc3R5bGUud2lkdGggPSBwZXJjZW50aWZ5KGVuZCAtIHN0YXJ0LCBidWZmZXJlZEVuZCk7XG4gIH07XG5cbiAgLy8gcmVtb3ZlIHVudXNlZCBidWZmZXJlZCByYW5nZSBlbGVtZW50c1xuICBmb3IgKGkgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPiBidWZmZXJlZC5sZW5ndGg7IGktLSkge1xuICAgIHRoaXMuZWxfLnJlbW92ZUNoaWxkKGNoaWxkcmVuW2ktMV0pO1xuICB9XG59O1xuXG4vKipcbiAqIFNob3dzIHBsYXkgcHJvZ3Jlc3NcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5QbGF5UHJvZ3Jlc3NCYXIgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgfVxufSk7XG5cbnZqcy5QbGF5UHJvZ3Jlc3NCYXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcGxheS1wcm9ncmVzcycsXG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+PHNwYW4+JyArIHRoaXMubG9jYWxpemUoJ1Byb2dyZXNzJykgKyAnPC9zcGFuPjogMCU8L3NwYW4+J1xuICB9KTtcbn07XG5cbi8qKlxuICogVGhlIFNlZWsgSGFuZGxlIHNob3dzIHRoZSBjdXJyZW50IHBvc2l0aW9uIG9mIHRoZSBwbGF5aGVhZCBkdXJpbmcgcGxheWJhY2ssXG4gKiBhbmQgY2FuIGJlIGRyYWdnZWQgdG8gYWRqdXN0IHRoZSBwbGF5aGVhZC5cbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5TZWVrSGFuZGxlID0gdmpzLlNsaWRlckhhbmRsZS5leHRlbmQoe1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpIHtcbiAgICB2anMuU2xpZGVySGFuZGxlLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgICBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUNvbnRlbnQpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBoYW5kbGUgY29udGVudCwgd2hpY2ggbWF5IGJlIHJlYWQgYnkgc2NyZWVuIHJlYWRlcnNcbiAqXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmpzLlNlZWtIYW5kbGUucHJvdG90eXBlLmRlZmF1bHRWYWx1ZSA9ICcwMDowMCc7XG5cbi8qKiBAaW5oZXJpdERvYyAqL1xudmpzLlNlZWtIYW5kbGUucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiB2anMuU2xpZGVySGFuZGxlLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXNlZWstaGFuZGxlJyxcbiAgICAnYXJpYS1saXZlJzogJ29mZidcbiAgfSk7XG59O1xuXG52anMuU2Vla0hhbmRsZS5wcm90b3R5cGUudXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgdGltZSA9ICh0aGlzLnBsYXllcl8uc2NydWJiaW5nKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIDogdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG4gIHRoaXMuZWxfLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj4nICsgdmpzLmZvcm1hdFRpbWUodGltZSwgdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpICsgJzwvc3Bhbj4nO1xufTtcbi8qKlxuICogVGhlIGNvbXBvbmVudCBmb3IgY29udHJvbGxpbmcgdGhlIHZvbHVtZSBsZXZlbFxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlZvbHVtZUNvbnRyb2wgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIC8vIGhpZGUgdm9sdW1lIGNvbnRyb2xzIHdoZW4gdGhleSdyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IHRlY2hcbiAgICBpZiAocGxheWVyLnRlY2ggJiYgcGxheWVyLnRlY2hbJ2ZlYXR1cmVzVm9sdW1lQ29udHJvbCddID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICAgIH1cbiAgICBwbGF5ZXIub24oJ2xvYWRzdGFydCcsIHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uKCl7XG4gICAgICBpZiAocGxheWVyLnRlY2hbJ2ZlYXR1cmVzVm9sdW1lQ29udHJvbCddID09PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG59KTtcblxudmpzLlZvbHVtZUNvbnRyb2wucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICBjaGlsZHJlbjoge1xuICAgICd2b2x1bWVCYXInOiB7fVxuICB9XG59O1xuXG52anMuVm9sdW1lQ29udHJvbC5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy12b2x1bWUtY29udHJvbCB2anMtY29udHJvbCdcbiAgfSk7XG59O1xuXG4vKipcbiAqIFRoZSBiYXIgdGhhdCBjb250YWlucyB0aGUgdm9sdW1lIGxldmVsIGFuZCBjYW4gYmUgY2xpY2tlZCBvbiB0byBhZGp1c3QgdGhlIGxldmVsXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVm9sdW1lQmFyID0gdmpzLlNsaWRlci5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLlNsaWRlci5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gICAgcGxheWVyLm9uKCd2b2x1bWVjaGFuZ2UnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzKSk7XG4gICAgcGxheWVyLnJlYWR5KHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlQVJJQUF0dHJpYnV0ZXMpKTtcbiAgfVxufSk7XG5cbnZqcy5Wb2x1bWVCYXIucHJvdG90eXBlLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzID0gZnVuY3Rpb24oKXtcbiAgLy8gQ3VycmVudCB2YWx1ZSBvZiB2b2x1bWUgYmFyIGFzIGEgcGVyY2VudGFnZVxuICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLHZqcy5yb3VuZCh0aGlzLnBsYXllcl8udm9sdW1lKCkqMTAwLCAyKSk7XG4gIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZXRleHQnLHZqcy5yb3VuZCh0aGlzLnBsYXllcl8udm9sdW1lKCkqMTAwLCAyKSsnJScpO1xufTtcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gIGNoaWxkcmVuOiB7XG4gICAgJ3ZvbHVtZUxldmVsJzoge30sXG4gICAgJ3ZvbHVtZUhhbmRsZSc6IHt9XG4gIH0sXG4gICdiYXJOYW1lJzogJ3ZvbHVtZUxldmVsJyxcbiAgJ2hhbmRsZU5hbWUnOiAndm9sdW1lSGFuZGxlJ1xufTtcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUucGxheWVyRXZlbnQgPSAndm9sdW1lY2hhbmdlJztcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLlNsaWRlci5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy12b2x1bWUtYmFyJyxcbiAgICAnYXJpYS1sYWJlbCc6ICd2b2x1bWUgbGV2ZWwnXG4gIH0pO1xufTtcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUub25Nb3VzZU1vdmUgPSBmdW5jdGlvbihldmVudCkge1xuICBpZiAodGhpcy5wbGF5ZXJfLm11dGVkKCkpIHtcbiAgICB0aGlzLnBsYXllcl8ubXV0ZWQoZmFsc2UpO1xuICB9XG5cbiAgdGhpcy5wbGF5ZXJfLnZvbHVtZSh0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKGV2ZW50KSk7XG59O1xuXG52anMuVm9sdW1lQmFyLnByb3RvdHlwZS5nZXRQZXJjZW50ID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMucGxheWVyXy5tdXRlZCgpKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHRoaXMucGxheWVyXy52b2x1bWUoKTtcbiAgfVxufTtcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUuc3RlcEZvcndhcmQgPSBmdW5jdGlvbigpe1xuICB0aGlzLnBsYXllcl8udm9sdW1lKHRoaXMucGxheWVyXy52b2x1bWUoKSArIDAuMSk7XG59O1xuXG52anMuVm9sdW1lQmFyLnByb3RvdHlwZS5zdGVwQmFjayA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucGxheWVyXy52b2x1bWUodGhpcy5wbGF5ZXJfLnZvbHVtZSgpIC0gMC4xKTtcbn07XG5cbi8qKlxuICogU2hvd3Mgdm9sdW1lIGxldmVsXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVm9sdW1lTGV2ZWwgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgfVxufSk7XG5cbnZqcy5Wb2x1bWVMZXZlbC5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy12b2x1bWUtbGV2ZWwnLFxuICAgIGlubmVySFRNTDogJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPjwvc3Bhbj4nXG4gIH0pO1xufTtcblxuLyoqXG4gKiBUaGUgdm9sdW1lIGhhbmRsZSBjYW4gYmUgZHJhZ2dlZCB0byBhZGp1c3QgdGhlIHZvbHVtZSBsZXZlbFxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuIHZqcy5Wb2x1bWVIYW5kbGUgPSB2anMuU2xpZGVySGFuZGxlLmV4dGVuZCgpO1xuXG4gdmpzLlZvbHVtZUhhbmRsZS5wcm90b3R5cGUuZGVmYXVsdFZhbHVlID0gJzAwOjAwJztcblxuIC8qKiBAaW5oZXJpdERvYyAqL1xuIHZqcy5Wb2x1bWVIYW5kbGUucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgIHJldHVybiB2anMuU2xpZGVySGFuZGxlLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgIGNsYXNzTmFtZTogJ3Zqcy12b2x1bWUtaGFuZGxlJ1xuICAgfSk7XG4gfTtcbi8qKlxuICogQSBidXR0b24gY29tcG9uZW50IGZvciBtdXRpbmcgdGhlIGF1ZGlvXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTXV0ZVRvZ2dsZSA9IHZqcy5CdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgcGxheWVyLm9uKCd2b2x1bWVjaGFuZ2UnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuXG4gICAgLy8gaGlkZSBtdXRlIHRvZ2dsZSBpZiB0aGUgY3VycmVudCB0ZWNoIGRvZXNuJ3Qgc3VwcG9ydCB2b2x1bWUgY29udHJvbFxuICAgIGlmIChwbGF5ZXIudGVjaCAmJiBwbGF5ZXIudGVjaFsnZmVhdHVyZXNWb2x1bWVDb250cm9sJ10gPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfVxuICAgIHBsYXllci5vbignbG9hZHN0YXJ0JywgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICAgIGlmIChwbGF5ZXIudGVjaFsnZmVhdHVyZXNWb2x1bWVDb250cm9sJ10gPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gIH1cbn0pO1xuXG52anMuTXV0ZVRvZ2dsZS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1tdXRlLWNvbnRyb2wgdmpzLWNvbnRyb2wnLFxuICAgIGlubmVySFRNTDogJzxkaXY+PHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ011dGUnKSArICc8L3NwYW4+PC9kaXY+J1xuICB9KTtcbn07XG5cbnZqcy5NdXRlVG9nZ2xlLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5wbGF5ZXJfLm11dGVkKCB0aGlzLnBsYXllcl8ubXV0ZWQoKSA/IGZhbHNlIDogdHJ1ZSApO1xufTtcblxudmpzLk11dGVUb2dnbGUucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciB2b2wgPSB0aGlzLnBsYXllcl8udm9sdW1lKCksXG4gICAgICBsZXZlbCA9IDM7XG5cbiAgaWYgKHZvbCA9PT0gMCB8fCB0aGlzLnBsYXllcl8ubXV0ZWQoKSkge1xuICAgIGxldmVsID0gMDtcbiAgfSBlbHNlIGlmICh2b2wgPCAwLjMzKSB7XG4gICAgbGV2ZWwgPSAxO1xuICB9IGVsc2UgaWYgKHZvbCA8IDAuNjcpIHtcbiAgICBsZXZlbCA9IDI7XG4gIH1cblxuICAvLyBEb24ndCByZXdyaXRlIHRoZSBidXR0b24gdGV4dCBpZiB0aGUgYWN0dWFsIHRleHQgZG9lc24ndCBjaGFuZ2UuXG4gIC8vIFRoaXMgY2F1c2VzIHVubmVjZXNzYXJ5IGFuZCBjb25mdXNpbmcgaW5mb3JtYXRpb24gZm9yIHNjcmVlbiByZWFkZXIgdXNlcnMuXG4gIC8vIFRoaXMgY2hlY2sgaXMgbmVlZGVkIGJlY2F1c2UgdGhpcyBmdW5jdGlvbiBnZXRzIGNhbGxlZCBldmVyeSB0aW1lIHRoZSB2b2x1bWUgbGV2ZWwgaXMgY2hhbmdlZC5cbiAgaWYodGhpcy5wbGF5ZXJfLm11dGVkKCkpe1xuICAgICAgaWYodGhpcy5lbF8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJIVE1MIT10aGlzLmxvY2FsaXplKCdVbm11dGUnKSl7XG4gICAgICAgICAgdGhpcy5lbF8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgnVW5tdXRlJyk7IC8vIGNoYW5nZSB0aGUgYnV0dG9uIHRleHQgdG8gXCJVbm11dGVcIlxuICAgICAgfVxuICB9IGVsc2Uge1xuICAgICAgaWYodGhpcy5lbF8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJIVE1MIT10aGlzLmxvY2FsaXplKCdNdXRlJykpe1xuICAgICAgICAgIHRoaXMuZWxfLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoJ011dGUnKTsgLy8gY2hhbmdlIHRoZSBidXR0b24gdGV4dCB0byBcIk11dGVcIlxuICAgICAgfVxuICB9XG5cbiAgLyogVE9ETyBpbXByb3ZlIG11dGVkIGljb24gY2xhc3NlcyAqL1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgIHZqcy5yZW1vdmVDbGFzcyh0aGlzLmVsXywgJ3Zqcy12b2wtJytpKTtcbiAgfVxuICB2anMuYWRkQ2xhc3ModGhpcy5lbF8sICd2anMtdm9sLScrbGV2ZWwpO1xufTtcbi8qKlxuICogTWVudSBidXR0b24gd2l0aCBhIHBvcHVwIGZvciBzaG93aW5nIHRoZSB2b2x1bWUgc2xpZGVyLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Wb2x1bWVNZW51QnV0dG9uID0gdmpzLk1lbnVCdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5NZW51QnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIC8vIFNhbWUgbGlzdGVuZXJzIGFzIE11dGVUb2dnbGVcbiAgICBwbGF5ZXIub24oJ3ZvbHVtZWNoYW5nZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlKSk7XG5cbiAgICAvLyBoaWRlIG11dGUgdG9nZ2xlIGlmIHRoZSBjdXJyZW50IHRlY2ggZG9lc24ndCBzdXBwb3J0IHZvbHVtZSBjb250cm9sXG4gICAgaWYgKHBsYXllci50ZWNoICYmIHBsYXllci50ZWNoWydmZWF0dXJlc1ZvbHVtZUNvbnRyb2wnXSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9XG4gICAgcGxheWVyLm9uKCdsb2Fkc3RhcnQnLCB2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpe1xuICAgICAgaWYgKHBsYXllci50ZWNoWydmZWF0dXJlc1ZvbHVtZUNvbnRyb2wnXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtbWVudS1idXR0b24nKTtcbiAgfVxufSk7XG5cbnZqcy5Wb2x1bWVNZW51QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVNZW51ID0gZnVuY3Rpb24oKXtcbiAgdmFyIG1lbnUgPSBuZXcgdmpzLk1lbnUodGhpcy5wbGF5ZXJfLCB7XG4gICAgY29udGVudEVsVHlwZTogJ2RpdidcbiAgfSk7XG4gIHZhciB2YyA9IG5ldyB2anMuVm9sdW1lQmFyKHRoaXMucGxheWVyXywgdmpzLm9iai5tZXJnZSh7J3ZlcnRpY2FsJzogdHJ1ZX0sIHRoaXMub3B0aW9uc18udm9sdW1lQmFyKSk7XG4gIG1lbnUuYWRkQ2hpbGQodmMpO1xuICByZXR1cm4gbWVudTtcbn07XG5cbnZqcy5Wb2x1bWVNZW51QnV0dG9uLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgdmpzLk11dGVUb2dnbGUucHJvdG90eXBlLm9uQ2xpY2suY2FsbCh0aGlzKTtcbiAgdmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLm9uQ2xpY2suY2FsbCh0aGlzKTtcbn07XG5cbnZqcy5Wb2x1bWVNZW51QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXZvbHVtZS1tZW51LWJ1dHRvbiB2anMtbWVudS1idXR0b24gdmpzLWNvbnRyb2wnLFxuICAgIGlubmVySFRNTDogJzxkaXY+PHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ011dGUnKSArICc8L3NwYW4+PC9kaXY+J1xuICB9KTtcbn07XG52anMuVm9sdW1lTWVudUJ1dHRvbi5wcm90b3R5cGUudXBkYXRlID0gdmpzLk11dGVUb2dnbGUucHJvdG90eXBlLnVwZGF0ZTtcbi8qKlxuICogVGhlIGNvbXBvbmVudCBmb3IgY29udHJvbGxpbmcgdGhlIHBsYXliYWNrIHJhdGVcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5QbGF5YmFja1JhdGVNZW51QnV0dG9uID0gdmpzLk1lbnVCdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5NZW51QnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eSgpO1xuICAgIHRoaXMudXBkYXRlTGFiZWwoKTtcblxuICAgIHBsYXllci5vbignbG9hZHN0YXJ0JywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGVWaXNpYmlsaXR5KSk7XG4gICAgcGxheWVyLm9uKCdyYXRlY2hhbmdlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGVMYWJlbCkpO1xuICB9XG59KTtcblxudmpzLlBsYXliYWNrUmF0ZU1lbnVCdXR0b24ucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgdmFyIGVsID0gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1wbGF5YmFjay1yYXRlIHZqcy1tZW51LWJ1dHRvbiB2anMtY29udHJvbCcsXG4gICAgaW5uZXJIVE1MOiAnPGRpdiBjbGFzcz1cInZqcy1jb250cm9sLWNvbnRlbnRcIj48c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj4nICsgdGhpcy5sb2NhbGl6ZSgnUGxheWJhY2sgUmF0ZScpICsgJzwvc3Bhbj48L2Rpdj4nXG4gIH0pO1xuXG4gIHRoaXMubGFiZWxFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcGxheWJhY2stcmF0ZS12YWx1ZScsXG4gICAgaW5uZXJIVE1MOiAxLjBcbiAgfSk7XG5cbiAgZWwuYXBwZW5kQ2hpbGQodGhpcy5sYWJlbEVsXyk7XG5cbiAgcmV0dXJuIGVsO1xufTtcblxuLy8gTWVudSBjcmVhdGlvblxudmpzLlBsYXliYWNrUmF0ZU1lbnVCdXR0b24ucHJvdG90eXBlLmNyZWF0ZU1lbnUgPSBmdW5jdGlvbigpe1xuICB2YXIgbWVudSA9IG5ldyB2anMuTWVudSh0aGlzLnBsYXllcigpKTtcbiAgdmFyIHJhdGVzID0gdGhpcy5wbGF5ZXIoKS5vcHRpb25zKClbJ3BsYXliYWNrUmF0ZXMnXTtcblxuICBpZiAocmF0ZXMpIHtcbiAgICBmb3IgKHZhciBpID0gcmF0ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIG1lbnUuYWRkQ2hpbGQoXG4gICAgICAgIG5ldyB2anMuUGxheWJhY2tSYXRlTWVudUl0ZW0odGhpcy5wbGF5ZXIoKSwgeyAncmF0ZSc6IHJhdGVzW2ldICsgJ3gnfSlcbiAgICAgICAgKTtcbiAgICB9O1xuICB9XG5cbiAgcmV0dXJuIG1lbnU7XG59O1xuXG52anMuUGxheWJhY2tSYXRlTWVudUJ1dHRvbi5wcm90b3R5cGUudXBkYXRlQVJJQUF0dHJpYnV0ZXMgPSBmdW5jdGlvbigpe1xuICAvLyBDdXJyZW50IHBsYXliYWNrIHJhdGVcbiAgdGhpcy5lbCgpLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKCkpO1xufTtcblxudmpzLlBsYXliYWNrUmF0ZU1lbnVCdXR0b24ucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICAvLyBzZWxlY3QgbmV4dCByYXRlIG9wdGlvblxuICB2YXIgY3VycmVudFJhdGUgPSB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpO1xuICB2YXIgcmF0ZXMgPSB0aGlzLnBsYXllcigpLm9wdGlvbnMoKVsncGxheWJhY2tSYXRlcyddO1xuICAvLyB0aGlzIHdpbGwgc2VsZWN0IGZpcnN0IG9uZSBpZiB0aGUgbGFzdCBvbmUgY3VycmVudGx5IHNlbGVjdGVkXG4gIHZhciBuZXdSYXRlID0gcmF0ZXNbMF07XG4gIGZvciAodmFyIGkgPSAwOyBpIDxyYXRlcy5sZW5ndGggOyBpKyspIHtcbiAgICBpZiAocmF0ZXNbaV0gPiBjdXJyZW50UmF0ZSkge1xuICAgICAgbmV3UmF0ZSA9IHJhdGVzW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9O1xuICB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZShuZXdSYXRlKTtcbn07XG5cbnZqcy5QbGF5YmFja1JhdGVNZW51QnV0dG9uLnByb3RvdHlwZS5wbGF5YmFja1JhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5wbGF5ZXIoKS50ZWNoXG4gICAgJiYgdGhpcy5wbGF5ZXIoKS50ZWNoWydmZWF0dXJlc1BsYXliYWNrUmF0ZSddXG4gICAgJiYgdGhpcy5wbGF5ZXIoKS5vcHRpb25zKClbJ3BsYXliYWNrUmF0ZXMnXVxuICAgICYmIHRoaXMucGxheWVyKCkub3B0aW9ucygpWydwbGF5YmFja1JhdGVzJ10ubGVuZ3RoID4gMFxuICA7XG59O1xuXG4vKipcbiAqIEhpZGUgcGxheWJhY2sgcmF0ZSBjb250cm9scyB3aGVuIHRoZXkncmUgbm8gcGxheWJhY2sgcmF0ZSBvcHRpb25zIHRvIHNlbGVjdFxuICovXG52anMuUGxheWJhY2tSYXRlTWVudUJ1dHRvbi5wcm90b3R5cGUudXBkYXRlVmlzaWJpbGl0eSA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpKSB7XG4gICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWhpZGRlbicpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBVcGRhdGUgYnV0dG9uIGxhYmVsIHdoZW4gcmF0ZSBjaGFuZ2VkXG4gKi9cbnZqcy5QbGF5YmFja1JhdGVNZW51QnV0dG9uLnByb3RvdHlwZS51cGRhdGVMYWJlbCA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLnBsYXliYWNrUmF0ZVN1cHBvcnRlZCgpKSB7XG4gICAgdGhpcy5sYWJlbEVsXy5pbm5lckhUTUwgPSB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpICsgJ3gnO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBzcGVjaWZpYyBtZW51IGl0ZW0gdHlwZSBmb3Igc2VsZWN0aW5nIGEgcGxheWJhY2sgcmF0ZVxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuUGxheWJhY2tSYXRlTWVudUl0ZW0gPSB2anMuTWVudUl0ZW0uZXh0ZW5kKHtcbiAgY29udGVudEVsVHlwZTogJ2J1dHRvbicsXG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2YXIgbGFiZWwgPSB0aGlzLmxhYmVsID0gb3B0aW9uc1sncmF0ZSddO1xuICAgIHZhciByYXRlID0gdGhpcy5yYXRlID0gcGFyc2VGbG9hdChsYWJlbCwgMTApO1xuXG4gICAgLy8gTW9kaWZ5IG9wdGlvbnMgZm9yIHBhcmVudCBNZW51SXRlbSBjbGFzcydzIGluaXQuXG4gICAgb3B0aW9uc1snbGFiZWwnXSA9IGxhYmVsO1xuICAgIG9wdGlvbnNbJ3NlbGVjdGVkJ10gPSByYXRlID09PSAxO1xuICAgIHZqcy5NZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnBsYXllcigpLm9uKCdyYXRlY2hhbmdlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUpKTtcbiAgfVxufSk7XG5cbnZqcy5QbGF5YmFja1JhdGVNZW51SXRlbS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5NZW51SXRlbS5wcm90b3R5cGUub25DbGljay5jYWxsKHRoaXMpO1xuICB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSh0aGlzLnJhdGUpO1xufTtcblxudmpzLlBsYXliYWNrUmF0ZU1lbnVJdGVtLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLnNlbGVjdGVkKHRoaXMucGxheWVyKCkucGxheWJhY2tSYXRlKCkgPT0gdGhpcy5yYXRlKTtcbn07XG4vKiBQb3N0ZXIgSW1hZ2Vcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vKipcbiAqIFRoZSBjb21wb25lbnQgdGhhdCBoYW5kbGVzIHNob3dpbmcgdGhlIHBvc3RlciBpbWFnZS5cbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Qb3N0ZXJJbWFnZSA9IHZqcy5CdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5CdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHBsYXllci5wb3N0ZXIoKSkge1xuICAgICAgdGhpcy5zcmMocGxheWVyLnBvc3RlcigpKTtcbiAgICB9XG5cbiAgICBpZiAoIXBsYXllci5wb3N0ZXIoKSB8fCAhcGxheWVyLmNvbnRyb2xzKCkpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cblxuICAgIHBsYXllci5vbigncG9zdGVyY2hhbmdlJywgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICAgIHRoaXMuc3JjKHBsYXllci5wb3N0ZXIoKSk7XG4gICAgfSkpO1xuXG4gICAgcGxheWVyLm9uKCdwbGF5JywgdmpzLmJpbmQodGhpcywgdGhpcy5oaWRlKSk7XG4gIH1cbn0pO1xuXG4vLyB1c2UgdGhlIHRlc3QgZWwgdG8gY2hlY2sgZm9yIGJhY2tncm91bmRTaXplIHN0eWxlIHN1cHBvcnRcbnZhciBfYmFja2dyb3VuZFNpemVTdXBwb3J0ZWQgPSAnYmFja2dyb3VuZFNpemUnIGluIHZqcy5URVNUX1ZJRC5zdHlsZTtcblxudmpzLlBvc3RlckltYWdlLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlbCA9IHZqcy5jcmVhdGVFbCgnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1wb3N0ZXInLFxuXG4gICAgLy8gRG9uJ3Qgd2FudCBwb3N0ZXIgdG8gYmUgdGFiYmFibGUuXG4gICAgdGFiSW5kZXg6IC0xXG4gIH0pO1xuXG4gIGlmICghX2JhY2tncm91bmRTaXplU3VwcG9ydGVkKSB7XG4gICAgLy8gc2V0dXAgYW4gaW1nIGVsZW1lbnQgYXMgYSBmYWxsYmFjayBmb3IgSUU4XG4gICAgZWwuYXBwZW5kQ2hpbGQodmpzLmNyZWF0ZUVsKCdpbWcnKSk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52anMuUG9zdGVySW1hZ2UucHJvdG90eXBlLnNyYyA9IGZ1bmN0aW9uKHVybCl7XG4gIHZhciBlbCA9IHRoaXMuZWwoKTtcblxuICAvLyBnZXR0ZXJcbiAgLy8gY2FuJ3QgdGhpbmsgb2YgYSBuZWVkIGZvciBhIGdldHRlciBoZXJlXG4gIC8vIHNlZSAjODM4IGlmIG9uIGlzIG5lZWRlZCBpbiB0aGUgZnV0dXJlXG4gIC8vIHN0aWxsIGRvbid0IHdhbnQgYSBnZXR0ZXIgdG8gc2V0IHNyYyBhcyB1bmRlZmluZWRcbiAgaWYgKHVybCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gc2V0dGVyXG4gIC8vIFRvIGVuc3VyZSB0aGUgcG9zdGVyIGltYWdlIHJlc2l6ZXMgd2hpbGUgbWFpbnRhaW5pbmcgaXRzIG9yaWdpbmFsIGFzcGVjdFxuICAvLyByYXRpbywgdXNlIGEgZGl2IHdpdGggYGJhY2tncm91bmQtc2l6ZWAgd2hlbiBhdmFpbGFibGUuIEZvciBicm93c2VycyB0aGF0XG4gIC8vIGRvIG5vdCBzdXBwb3J0IGBiYWNrZ3JvdW5kLXNpemVgIChlLmcuIElFOCksIGZhbGwgYmFjayBvbiB1c2luZyBhIHJlZ3VsYXJcbiAgLy8gaW1nIGVsZW1lbnQuXG4gIGlmIChfYmFja2dyb3VuZFNpemVTdXBwb3J0ZWQpIHtcbiAgICBlbC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSAndXJsKFwiJyArIHVybCArICdcIiknO1xuICB9IGVsc2Uge1xuICAgIGVsLmZpcnN0Q2hpbGQuc3JjID0gdXJsO1xuICB9XG59O1xuXG52anMuUG9zdGVySW1hZ2UucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICAvLyBPbmx5IGFjY2VwdCBjbGlja3Mgd2hlbiBjb250cm9scyBhcmUgZW5hYmxlZFxuICBpZiAodGhpcy5wbGF5ZXIoKS5jb250cm9scygpKSB7XG4gICAgdGhpcy5wbGF5ZXJfLnBsYXkoKTtcbiAgfVxufTtcbi8qIExvYWRpbmcgU3Bpbm5lclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qKlxuICogTG9hZGluZyBzcGlubmVyIGZvciB3YWl0aW5nIGV2ZW50c1xuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Mb2FkaW5nU3Bpbm5lciA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgLy8gTU9WSU5HIERJU1BMQVkgSEFORExJTkcgVE8gQ1NTXG5cbiAgICAvLyBwbGF5ZXIub24oJ2NhbnBsYXknLCB2anMuYmluZCh0aGlzLCB0aGlzLmhpZGUpKTtcbiAgICAvLyBwbGF5ZXIub24oJ2NhbnBsYXl0aHJvdWdoJywgdmpzLmJpbmQodGhpcywgdGhpcy5oaWRlKSk7XG4gICAgLy8gcGxheWVyLm9uKCdwbGF5aW5nJywgdmpzLmJpbmQodGhpcywgdGhpcy5oaWRlKSk7XG4gICAgLy8gcGxheWVyLm9uKCdzZWVraW5nJywgdmpzLmJpbmQodGhpcywgdGhpcy5zaG93KSk7XG5cbiAgICAvLyBpbiBzb21lIGJyb3dzZXJzIHNlZWtpbmcgZG9lcyBub3QgdHJpZ2dlciB0aGUgJ3BsYXlpbmcnIGV2ZW50LFxuICAgIC8vIHNvIHdlIGFsc28gbmVlZCB0byB0cmFwICdzZWVrZWQnIGlmIHdlIGFyZSBnb2luZyB0byBzZXQgYVxuICAgIC8vICdzZWVraW5nJyBldmVudFxuICAgIC8vIHBsYXllci5vbignc2Vla2VkJywgdmpzLmJpbmQodGhpcywgdGhpcy5oaWRlKSk7XG5cbiAgICAvLyBwbGF5ZXIub24oJ2VuZGVkJywgdmpzLmJpbmQodGhpcywgdGhpcy5oaWRlKSk7XG5cbiAgICAvLyBOb3Qgc2hvd2luZyBzcGlubmVyIG9uIHN0YWxsZWQgYW55IG1vcmUuIEJyb3dzZXJzIG1heSBzdGFsbCBhbmQgdGhlbiBub3QgdHJpZ2dlciBhbnkgZXZlbnRzIHRoYXQgd291bGQgcmVtb3ZlIHRoZSBzcGlubmVyLlxuICAgIC8vIENoZWNrZWQgaW4gQ2hyb21lIDE2IGFuZCBTYWZhcmkgNS4xLjIuIGh0dHA6Ly9oZWxwLnZpZGVvanMuY29tL2Rpc2N1c3Npb25zL3Byb2JsZW1zLzg4My13aHktaXMtdGhlLWRvd25sb2FkLXByb2dyZXNzLXNob3dpbmdcbiAgICAvLyBwbGF5ZXIub24oJ3N0YWxsZWQnLCB2anMuYmluZCh0aGlzLCB0aGlzLnNob3cpKTtcblxuICAgIC8vIHBsYXllci5vbignd2FpdGluZycsIHZqcy5iaW5kKHRoaXMsIHRoaXMuc2hvdykpO1xuICB9XG59KTtcblxudmpzLkxvYWRpbmdTcGlubmVyLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWxvYWRpbmctc3Bpbm5lcidcbiAgfSk7XG59O1xuLyogQmlnIFBsYXkgQnV0dG9uXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyoqXG4gKiBJbml0aWFsIHBsYXkgYnV0dG9uLiBTaG93cyBiZWZvcmUgdGhlIHZpZGVvIGhhcyBwbGF5ZWQuIFRoZSBoaWRpbmcgb2YgdGhlXG4gKiBiaWcgcGxheSBidXR0b24gaXMgZG9uZSB2aWEgQ1NTIGFuZCBwbGF5ZXIgc3RhdGVzLlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5CaWdQbGF5QnV0dG9uID0gdmpzLkJ1dHRvbi5leHRlbmQoKTtcblxudmpzLkJpZ1BsYXlCdXR0b24ucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5CdXR0b24ucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtYmlnLXBsYXktYnV0dG9uJyxcbiAgICBpbm5lckhUTUw6ICc8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj48L3NwYW4+JyxcbiAgICAnYXJpYS1sYWJlbCc6ICdwbGF5IHZpZGVvJ1xuICB9KTtcbn07XG5cbnZqcy5CaWdQbGF5QnV0dG9uLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5wbGF5ZXJfLnBsYXkoKTtcbn07XG4vKipcbiAqIERpc3BsYXkgdGhhdCBhbiBlcnJvciBoYXMgb2NjdXJyZWQgbWFraW5nIHRoZSB2aWRlbyB1bnBsYXlhYmxlXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5FcnJvckRpc3BsYXkgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnVwZGF0ZSgpO1xuICAgIHBsYXllci5vbignZXJyb3InLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuICB9XG59KTtcblxudmpzLkVycm9yRGlzcGxheS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgZWwgPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWVycm9yLWRpc3BsYXknXG4gIH0pO1xuXG4gIHRoaXMuY29udGVudEVsXyA9IHZqcy5jcmVhdGVFbCgnZGl2Jyk7XG4gIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyk7XG5cbiAgcmV0dXJuIGVsO1xufTtcblxudmpzLkVycm9yRGlzcGxheS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMucGxheWVyKCkuZXJyb3IoKSkge1xuICAgIHRoaXMuY29udGVudEVsXy5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKHRoaXMucGxheWVyKCkuZXJyb3IoKS5tZXNzYWdlKTtcbiAgfVxufTtcbi8qKlxuICogQGZpbGVvdmVydmlldyBNZWRpYSBUZWNobm9sb2d5IENvbnRyb2xsZXIgLSBCYXNlIGNsYXNzIGZvciBtZWRpYSBwbGF5YmFja1xuICogdGVjaG5vbG9neSBjb250cm9sbGVycyBsaWtlIEZsYXNoIGFuZCBIVE1MNVxuICovXG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgbWVkaWEgKEhUTUw1IFZpZGVvLCBGbGFzaCkgY29udHJvbGxlcnNcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllciAgQ2VudHJhbCBwbGF5ZXIgaW5zdGFuY2VcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBPcHRpb25zIG9iamVjdFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpe1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIC8vIHdlIGRvbid0IHdhbnQgdGhlIHRlY2ggdG8gcmVwb3J0IHVzZXIgYWN0aXZpdHkgYXV0b21hdGljYWxseS5cbiAgICAvLyBUaGlzIGlzIGRvbmUgbWFudWFsbHkgaW4gYWRkQ29udHJvbHNMaXN0ZW5lcnNcbiAgICBvcHRpb25zLnJlcG9ydFRvdWNoQWN0aXZpdHkgPSBmYWxzZTtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSk7XG5cbiAgICAvLyBNYW51YWxseSB0cmFjayBwcm9ncmVzcyBpbiBjYXNlcyB3aGVyZSB0aGUgYnJvd3Nlci9mbGFzaCBwbGF5ZXIgZG9lc24ndCByZXBvcnQgaXQuXG4gICAgaWYgKCF0aGlzWydmZWF0dXJlc1Byb2dyZXNzRXZlbnRzJ10pIHtcbiAgICAgIHRoaXMubWFudWFsUHJvZ3Jlc3NPbigpO1xuICAgIH1cblxuICAgIC8vIE1hbnVhbGx5IHRyYWNrIHRpbWV1ZHBhdGVzIGluIGNhc2VzIHdoZXJlIHRoZSBicm93c2VyL2ZsYXNoIHBsYXllciBkb2Vzbid0IHJlcG9ydCBpdC5cbiAgICBpZiAoIXRoaXNbJ2ZlYXR1cmVzVGltZXVwZGF0ZUV2ZW50cyddKSB7XG4gICAgICB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzT24oKTtcbiAgICB9XG5cbiAgICB0aGlzLmluaXRDb250cm9sc0xpc3RlbmVycygpO1xuICB9XG59KTtcblxuLyoqXG4gKiBTZXQgdXAgY2xpY2sgYW5kIHRvdWNoIGxpc3RlbmVycyBmb3IgdGhlIHBsYXliYWNrIGVsZW1lbnRcbiAqIE9uIGRlc2t0b3BzLCBhIGNsaWNrIG9uIHRoZSB2aWRlbyBpdHNlbGYgd2lsbCB0b2dnbGUgcGxheWJhY2ssXG4gKiBvbiBhIG1vYmlsZSBkZXZpY2UgYSBjbGljayBvbiB0aGUgdmlkZW8gdG9nZ2xlcyBjb250cm9scy5cbiAqICh0b2dnbGluZyBjb250cm9scyBpcyBkb25lIGJ5IHRvZ2dsaW5nIHRoZSB1c2VyIHN0YXRlIGJldHdlZW4gYWN0aXZlIGFuZFxuICogaW5hY3RpdmUpXG4gKlxuICogQSB0YXAgY2FuIHNpZ25hbCB0aGF0IGEgdXNlciBoYXMgYmVjb21lIGFjdGl2ZSwgb3IgaGFzIGJlY29tZSBpbmFjdGl2ZVxuICogZS5nLiBhIHF1aWNrIHRhcCBvbiBhbiBpUGhvbmUgbW92aWUgc2hvdWxkIHJldmVhbCB0aGUgY29udHJvbHMuIEFub3RoZXJcbiAqIHF1aWNrIHRhcCBzaG91bGQgaGlkZSB0aGVtIGFnYWluIChzaWduYWxpbmcgdGhlIHVzZXIgaXMgaW4gYW4gaW5hY3RpdmVcbiAqIHZpZXdpbmcgc3RhdGUpXG4gKlxuICogSW4gYWRkaXRpb24gdG8gdGhpcywgd2Ugc3RpbGwgd2FudCB0aGUgdXNlciB0byBiZSBjb25zaWRlcmVkIGluYWN0aXZlIGFmdGVyXG4gKiBhIGZldyBzZWNvbmRzIG9mIGluYWN0aXZpdHkuXG4gKlxuICogTm90ZTogdGhlIG9ubHkgcGFydCBvZiBpT1MgaW50ZXJhY3Rpb24gd2UgY2FuJ3QgbWltaWMgd2l0aCB0aGlzIHNldHVwXG4gKiBpcyBhIHRvdWNoIGFuZCBob2xkIG9uIHRoZSB2aWRlbyBlbGVtZW50IGNvdW50aW5nIGFzIGFjdGl2aXR5IGluIG9yZGVyIHRvXG4gKiBrZWVwIHRoZSBjb250cm9scyBzaG93aW5nLCBidXQgdGhhdCBzaG91bGRuJ3QgYmUgYW4gaXNzdWUuIEEgdG91Y2ggYW5kIGhvbGQgb25cbiAqIGFueSBjb250cm9scyB3aWxsIHN0aWxsIGtlZXAgdGhlIHVzZXIgYWN0aXZlXG4gKi9cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5pbml0Q29udHJvbHNMaXN0ZW5lcnMgPSBmdW5jdGlvbigpe1xuICB2YXIgcGxheWVyLCB0ZWNoLCBhY3RpdmF0ZUNvbnRyb2xzLCBkZWFjdGl2YXRlQ29udHJvbHM7XG5cbiAgdGVjaCA9IHRoaXM7XG4gIHBsYXllciA9IHRoaXMucGxheWVyKCk7XG5cbiAgdmFyIGFjdGl2YXRlQ29udHJvbHMgPSBmdW5jdGlvbigpe1xuICAgIGlmIChwbGF5ZXIuY29udHJvbHMoKSAmJiAhcGxheWVyLnVzaW5nTmF0aXZlQ29udHJvbHMoKSkge1xuICAgICAgdGVjaC5hZGRDb250cm9sc0xpc3RlbmVycygpO1xuICAgIH1cbiAgfTtcblxuICBkZWFjdGl2YXRlQ29udHJvbHMgPSB2anMuYmluZCh0ZWNoLCB0ZWNoLnJlbW92ZUNvbnRyb2xzTGlzdGVuZXJzKTtcblxuICAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIG9uY2UgdGhlIHRlY2ggaXMgcmVhZHkgYW5kIGhhcyBhbiBlbGVtZW50IHRvIGFwcGx5XG4gIC8vIGxpc3RlbmVycyB0b1xuICB0aGlzLnJlYWR5KGFjdGl2YXRlQ29udHJvbHMpO1xuICBwbGF5ZXIub24oJ2NvbnRyb2xzZW5hYmxlZCcsIGFjdGl2YXRlQ29udHJvbHMpO1xuICBwbGF5ZXIub24oJ2NvbnRyb2xzZGlzYWJsZWQnLCBkZWFjdGl2YXRlQ29udHJvbHMpO1xuXG4gIC8vIGlmIHdlJ3JlIGxvYWRpbmcgdGhlIHBsYXliYWNrIG9iamVjdCBhZnRlciBpdCBoYXMgc3RhcnRlZCBsb2FkaW5nIG9yIHBsYXlpbmcgdGhlXG4gIC8vIHZpZGVvIChvZnRlbiB3aXRoIGF1dG9wbGF5IG9uKSB0aGVuIHRoZSBsb2Fkc3RhcnQgZXZlbnQgaGFzIGFscmVhZHkgZmlyZWQgYW5kIHdlXG4gIC8vIG5lZWQgdG8gZmlyZSBpdCBtYW51YWxseSBiZWNhdXNlIG1hbnkgdGhpbmdzIHJlbHkgb24gaXQuXG4gIC8vIExvbmcgdGVybSB3ZSBtaWdodCBjb25zaWRlciBob3cgd2Ugd291bGQgZG8gdGhpcyBmb3Igb3RoZXIgZXZlbnRzIGxpa2UgJ2NhbnBsYXknXG4gIC8vIHRoYXQgbWF5IGFsc28gaGF2ZSBmaXJlZC5cbiAgdGhpcy5yZWFkeShmdW5jdGlvbigpe1xuICAgIGlmICh0aGlzLm5ldHdvcmtTdGF0ZSAmJiB0aGlzLm5ldHdvcmtTdGF0ZSgpID4gMCkge1xuICAgICAgdGhpcy5wbGF5ZXIoKS50cmlnZ2VyKCdsb2Fkc3RhcnQnKTtcbiAgICB9XG4gIH0pO1xufTtcblxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLmFkZENvbnRyb2xzTGlzdGVuZXJzID0gZnVuY3Rpb24oKXtcbiAgdmFyIHVzZXJXYXNBY3RpdmU7XG5cbiAgLy8gU29tZSBicm93c2VycyAoQ2hyb21lICYgSUUpIGRvbid0IHRyaWdnZXIgYSBjbGljayBvbiBhIGZsYXNoIHN3ZiwgYnV0IGRvXG4gIC8vIHRyaWdnZXIgbW91c2Vkb3duL3VwLlxuICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0NDQ1NjIvamF2YXNjcmlwdC1vbmNsaWNrLWV2ZW50LW92ZXItZmxhc2gtb2JqZWN0XG4gIC8vIEFueSB0b3VjaCBldmVudHMgYXJlIHNldCB0byBibG9jayB0aGUgbW91c2Vkb3duIGV2ZW50IGZyb20gaGFwcGVuaW5nXG4gIHRoaXMub24oJ21vdXNlZG93bicsIHRoaXMub25DbGljayk7XG5cbiAgLy8gSWYgdGhlIGNvbnRyb2xzIHdlcmUgaGlkZGVuIHdlIGRvbid0IHdhbnQgdGhhdCB0byBjaGFuZ2Ugd2l0aG91dCBhIHRhcCBldmVudFxuICAvLyBzbyB3ZSdsbCBjaGVjayBpZiB0aGUgY29udHJvbHMgd2VyZSBhbHJlYWR5IHNob3dpbmcgYmVmb3JlIHJlcG9ydGluZyB1c2VyXG4gIC8vIGFjdGl2aXR5XG4gIHRoaXMub24oJ3RvdWNoc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgIHVzZXJXYXNBY3RpdmUgPSB0aGlzLnBsYXllcl8udXNlckFjdGl2ZSgpO1xuICB9KTtcblxuICB0aGlzLm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICh1c2VyV2FzQWN0aXZlKXtcbiAgICAgIHRoaXMucGxheWVyKCkucmVwb3J0VXNlckFjdGl2aXR5KCk7XG4gICAgfVxuICB9KTtcblxuICB0aGlzLm9uKCd0b3VjaGVuZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gU3RvcCB0aGUgbW91c2UgZXZlbnRzIGZyb20gYWxzbyBoYXBwZW5pbmdcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcblxuICAvLyBUdXJuIG9uIGNvbXBvbmVudCB0YXAgZXZlbnRzXG4gIHRoaXMuZW1pdFRhcEV2ZW50cygpO1xuXG4gIC8vIFRoZSB0YXAgbGlzdGVuZXIgbmVlZHMgdG8gY29tZSBhZnRlciB0aGUgdG91Y2hlbmQgbGlzdGVuZXIgYmVjYXVzZSB0aGUgdGFwXG4gIC8vIGxpc3RlbmVyIGNhbmNlbHMgb3V0IGFueSByZXBvcnRlZFVzZXJBY3Rpdml0eSB3aGVuIHNldHRpbmcgdXNlckFjdGl2ZShmYWxzZSlcbiAgdGhpcy5vbigndGFwJywgdGhpcy5vblRhcCk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSB0aGUgbGlzdGVuZXJzIHVzZWQgZm9yIGNsaWNrIGFuZCB0YXAgY29udHJvbHMuIFRoaXMgaXMgbmVlZGVkIGZvclxuICogdG9nZ2xpbmcgdG8gY29udHJvbHMgZGlzYWJsZWQsIHdoZXJlIGEgdGFwL3RvdWNoIHNob3VsZCBkbyBub3RoaW5nLlxuICovXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlQ29udHJvbHNMaXN0ZW5lcnMgPSBmdW5jdGlvbigpe1xuICAvLyBXZSBkb24ndCB3YW50IHRvIGp1c3QgdXNlIGB0aGlzLm9mZigpYCBiZWNhdXNlIHRoZXJlIG1pZ2h0IGJlIG90aGVyIG5lZWRlZFxuICAvLyBsaXN0ZW5lcnMgYWRkZWQgYnkgdGVjaHMgdGhhdCBleHRlbmQgdGhpcy5cbiAgdGhpcy5vZmYoJ3RhcCcpO1xuICB0aGlzLm9mZigndG91Y2hzdGFydCcpO1xuICB0aGlzLm9mZigndG91Y2htb3ZlJyk7XG4gIHRoaXMub2ZmKCd0b3VjaGxlYXZlJyk7XG4gIHRoaXMub2ZmKCd0b3VjaGNhbmNlbCcpO1xuICB0aGlzLm9mZigndG91Y2hlbmQnKTtcbiAgdGhpcy5vZmYoJ2NsaWNrJyk7XG4gIHRoaXMub2ZmKCdtb3VzZWRvd24nKTtcbn07XG5cbi8qKlxuICogSGFuZGxlIGEgY2xpY2sgb24gdGhlIG1lZGlhIGVsZW1lbnQuIEJ5IGRlZmF1bHQgd2lsbCBwbGF5L3BhdXNlIHRoZSBtZWRpYS5cbiAqL1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbihldmVudCl7XG4gIC8vIFdlJ3JlIHVzaW5nIG1vdXNlZG93biB0byBkZXRlY3QgY2xpY2tzIHRoYW5rcyB0byBGbGFzaCwgYnV0IG1vdXNlZG93blxuICAvLyB3aWxsIGFsc28gYmUgdHJpZ2dlcmVkIHdpdGggcmlnaHQtY2xpY2tzLCBzbyB3ZSBuZWVkIHRvIHByZXZlbnQgdGhhdFxuICBpZiAoZXZlbnQuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cbiAgLy8gV2hlbiBjb250cm9scyBhcmUgZGlzYWJsZWQgYSBjbGljayBzaG91bGQgbm90IHRvZ2dsZSBwbGF5YmFjayBiZWNhdXNlXG4gIC8vIHRoZSBjbGljayBpcyBjb25zaWRlcmVkIGEgY29udHJvbFxuICBpZiAodGhpcy5wbGF5ZXIoKS5jb250cm9scygpKSB7XG4gICAgaWYgKHRoaXMucGxheWVyKCkucGF1c2VkKCkpIHtcbiAgICAgIHRoaXMucGxheWVyKCkucGxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYXllcigpLnBhdXNlKCk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEhhbmRsZSBhIHRhcCBvbiB0aGUgbWVkaWEgZWxlbWVudC4gQnkgZGVmYXVsdCBpdCB3aWxsIHRvZ2dsZSB0aGUgdXNlclxuICogYWN0aXZpdHkgc3RhdGUsIHdoaWNoIGhpZGVzIGFuZCBzaG93cyB0aGUgY29udHJvbHMuXG4gKi9cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5vblRhcCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucGxheWVyKCkudXNlckFjdGl2ZSghdGhpcy5wbGF5ZXIoKS51c2VyQWN0aXZlKCkpO1xufTtcblxuLyogRmFsbGJhY2tzIGZvciB1bnN1cHBvcnRlZCBldmVudCB0eXBlc1xuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8vIE1hbnVhbGx5IHRyaWdnZXIgcHJvZ3Jlc3MgZXZlbnRzIGJhc2VkIG9uIGNoYW5nZXMgdG8gdGhlIGJ1ZmZlcmVkIGFtb3VudFxuLy8gTWFueSBmbGFzaCBwbGF5ZXJzIGFuZCBvbGRlciBIVE1MNSBicm93c2VycyBkb24ndCBzZW5kIHByb2dyZXNzIG9yIHByb2dyZXNzLWxpa2UgZXZlbnRzXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUubWFudWFsUHJvZ3Jlc3NPbiA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubWFudWFsUHJvZ3Jlc3MgPSB0cnVlO1xuXG4gIC8vIFRyaWdnZXIgcHJvZ3Jlc3Mgd2F0Y2hpbmcgd2hlbiBhIHNvdXJjZSBiZWdpbnMgbG9hZGluZ1xuICB0aGlzLnRyYWNrUHJvZ3Jlc3MoKTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5tYW51YWxQcm9ncmVzc09mZiA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubWFudWFsUHJvZ3Jlc3MgPSBmYWxzZTtcbiAgdGhpcy5zdG9wVHJhY2tpbmdQcm9ncmVzcygpO1xufTtcblxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLnRyYWNrUHJvZ3Jlc3MgPSBmdW5jdGlvbigpe1xuXG4gIHRoaXMucHJvZ3Jlc3NJbnRlcnZhbCA9IHNldEludGVydmFsKHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uKCl7XG4gICAgLy8gRG9uJ3QgdHJpZ2dlciB1bmxlc3MgYnVmZmVyZWQgYW1vdW50IGlzIGdyZWF0ZXIgdGhhbiBsYXN0IHRpbWVcblxuICAgIHZhciBidWZmZXJlZFBlcmNlbnQgPSB0aGlzLnBsYXllcigpLmJ1ZmZlcmVkUGVyY2VudCgpO1xuXG4gICAgaWYgKHRoaXMuYnVmZmVyZWRQZXJjZW50XyAhPSBidWZmZXJlZFBlcmNlbnQpIHtcbiAgICAgIHRoaXMucGxheWVyKCkudHJpZ2dlcigncHJvZ3Jlc3MnKTtcbiAgICB9XG5cbiAgICB0aGlzLmJ1ZmZlcmVkUGVyY2VudF8gPSBidWZmZXJlZFBlcmNlbnQ7XG5cbiAgICBpZiAoYnVmZmVyZWRQZXJjZW50ID09PSAxKSB7XG4gICAgICB0aGlzLnN0b3BUcmFja2luZ1Byb2dyZXNzKCk7XG4gICAgfVxuICB9KSwgNTAwKTtcbn07XG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuc3RvcFRyYWNraW5nUHJvZ3Jlc3MgPSBmdW5jdGlvbigpeyBjbGVhckludGVydmFsKHRoaXMucHJvZ3Jlc3NJbnRlcnZhbCk7IH07XG5cbi8qISBUaW1lIFRyYWNraW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUubWFudWFsVGltZVVwZGF0ZXNPbiA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubWFudWFsVGltZVVwZGF0ZXMgPSB0cnVlO1xuXG4gIHRoaXMucGxheWVyKCkub24oJ3BsYXknLCB2anMuYmluZCh0aGlzLCB0aGlzLnRyYWNrQ3VycmVudFRpbWUpKTtcbiAgdGhpcy5wbGF5ZXIoKS5vbigncGF1c2UnLCB2anMuYmluZCh0aGlzLCB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKSk7XG4gIC8vIHRpbWV1cGRhdGUgaXMgYWxzbyBjYWxsZWQgYnkgLmN1cnJlbnRUaW1lIHdoZW5ldmVyIGN1cnJlbnQgdGltZSBpcyBzZXRcblxuICAvLyBXYXRjaCBmb3IgbmF0aXZlIHRpbWV1cGRhdGUgZXZlbnRcbiAgdGhpcy5vbmUoJ3RpbWV1cGRhdGUnLCBmdW5jdGlvbigpe1xuICAgIC8vIFVwZGF0ZSBrbm93biBwcm9ncmVzcyBzdXBwb3J0IGZvciB0aGlzIHBsYXliYWNrIHRlY2hub2xvZ3lcbiAgICB0aGlzWydmZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMnXSA9IHRydWU7XG4gICAgLy8gVHVybiBvZmYgbWFudWFsIHByb2dyZXNzIHRyYWNraW5nXG4gICAgdGhpcy5tYW51YWxUaW1lVXBkYXRlc09mZigpO1xuICB9KTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5tYW51YWxUaW1lVXBkYXRlc09mZiA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubWFudWFsVGltZVVwZGF0ZXMgPSBmYWxzZTtcbiAgdGhpcy5zdG9wVHJhY2tpbmdDdXJyZW50VGltZSgpO1xuICB0aGlzLm9mZigncGxheScsIHRoaXMudHJhY2tDdXJyZW50VGltZSk7XG4gIHRoaXMub2ZmKCdwYXVzZScsIHRoaXMuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUpO1xufTtcblxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLnRyYWNrQ3VycmVudFRpbWUgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5jdXJyZW50VGltZUludGVydmFsKSB7IHRoaXMuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUoKTsgfVxuICB0aGlzLmN1cnJlbnRUaW1lSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpe1xuICAgIHRoaXMucGxheWVyKCkudHJpZ2dlcigndGltZXVwZGF0ZScpO1xuICB9KSwgMjUwKTsgLy8gNDIgPSAyNCBmcHMgLy8gMjUwIGlzIHdoYXQgV2Via2l0IHVzZXMgLy8gRkYgdXNlcyAxNVxufTtcblxuLy8gVHVybiBvZmYgcGxheSBwcm9ncmVzcyB0cmFja2luZyAod2hlbiBwYXVzZWQgb3IgZHJhZ2dpbmcpXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUgPSBmdW5jdGlvbigpe1xuICBjbGVhckludGVydmFsKHRoaXMuY3VycmVudFRpbWVJbnRlcnZhbCk7XG5cbiAgLy8gIzEwMDIgLSBpZiB0aGUgdmlkZW8gZW5kcyByaWdodCBiZWZvcmUgdGhlIG5leHQgdGltZXVwZGF0ZSB3b3VsZCBoYXBwZW4sXG4gIC8vIHRoZSBwcm9ncmVzcyBiYXIgd29uJ3QgbWFrZSBpdCBhbGwgdGhlIHdheSB0byB0aGUgZW5kXG4gIHRoaXMucGxheWVyKCkudHJpZ2dlcigndGltZXVwZGF0ZScpO1xufTtcblxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpIHtcbiAgLy8gVHVybiBvZmYgYW55IG1hbnVhbCBwcm9ncmVzcyBvciB0aW1ldXBkYXRlIHRyYWNraW5nXG4gIGlmICh0aGlzLm1hbnVhbFByb2dyZXNzKSB7IHRoaXMubWFudWFsUHJvZ3Jlc3NPZmYoKTsgfVxuXG4gIGlmICh0aGlzLm1hbnVhbFRpbWVVcGRhdGVzKSB7IHRoaXMubWFudWFsVGltZVVwZGF0ZXNPZmYoKTsgfVxuXG4gIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5zZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uKCkge1xuICAvLyBpbXByb3ZlIHRoZSBhY2N1cmFjeSBvZiBtYW51YWwgdGltZXVwZGF0ZXNcbiAgaWYgKHRoaXMubWFudWFsVGltZVVwZGF0ZXMpIHsgdGhpcy5wbGF5ZXIoKS50cmlnZ2VyKCd0aW1ldXBkYXRlJyk7IH1cbn07XG5cbi8qKlxuICogUHJvdmlkZSBhIGRlZmF1bHQgc2V0UG9zdGVyIG1ldGhvZCBmb3IgdGVjaHNcbiAqXG4gKiBQb3N0ZXIgc3VwcG9ydCBmb3IgdGVjaHMgc2hvdWxkIGJlIG9wdGlvbmFsLCBzbyB3ZSBkb24ndCB3YW50IHRlY2hzIHRvXG4gKiBicmVhayBpZiB0aGV5IGRvbid0IGhhdmUgYSB3YXkgdG8gc2V0IGEgcG9zdGVyLlxuICovXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuc2V0UG9zdGVyID0gZnVuY3Rpb24oKXt9O1xuXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGVbJ2ZlYXR1cmVzVm9sdW1lQ29udHJvbCddID0gdHJ1ZTtcblxuLy8gUmVzaXppbmcgcGx1Z2lucyB1c2luZyByZXF1ZXN0IGZ1bGxzY3JlZW4gcmVsb2FkcyB0aGUgcGx1Z2luXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGVbJ2ZlYXR1cmVzRnVsbHNjcmVlblJlc2l6ZSddID0gZmFsc2U7XG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGVbJ2ZlYXR1cmVzUGxheWJhY2tSYXRlJ10gPSBmYWxzZTtcblxuLy8gT3B0aW9uYWwgZXZlbnRzIHRoYXQgd2UgY2FuIG1hbnVhbGx5IG1pbWljIHdpdGggdGltZXJzXG4vLyBjdXJyZW50bHkgbm90IHRyaWdnZXJlZCBieSB2aWRlby1qcy1zd2ZcbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZVsnZmVhdHVyZXNQcm9ncmVzc0V2ZW50cyddID0gZmFsc2U7XG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGVbJ2ZlYXR1cmVzVGltZXVwZGF0ZUV2ZW50cyddID0gZmFsc2U7XG5cbnZqcy5tZWRpYSA9IHt9O1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEhUTUw1IE1lZGlhIENvbnRyb2xsZXIgLSBXcmFwcGVyIGZvciBIVE1MNSBNZWRpYSBBUElcbiAqL1xuXG4vKipcbiAqIEhUTUw1IE1lZGlhIENvbnRyb2xsZXIgLSBXcmFwcGVyIGZvciBIVE1MNSBNZWRpYSBBUElcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Z1bmN0aW9uPX0gcmVhZHlcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuSHRtbDUgPSB2anMuTWVkaWFUZWNoQ29udHJvbGxlci5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpe1xuICAgIC8vIHZvbHVtZSBjYW5ub3QgYmUgY2hhbmdlZCBmcm9tIDEgb24gaU9TXG4gICAgdGhpc1snZmVhdHVyZXNWb2x1bWVDb250cm9sJ10gPSB2anMuSHRtbDUuY2FuQ29udHJvbFZvbHVtZSgpO1xuXG4gICAgLy8ganVzdCBpbiBjYXNlOyBvciBpcyBpdCBleGNlc3NpdmVseS4uLlxuICAgIHRoaXNbJ2ZlYXR1cmVzUGxheWJhY2tSYXRlJ10gPSB2anMuSHRtbDUuY2FuQ29udHJvbFBsYXliYWNrUmF0ZSgpO1xuXG4gICAgLy8gSW4gaU9TLCBpZiB5b3UgbW92ZSBhIHZpZGVvIGVsZW1lbnQgaW4gdGhlIERPTSwgaXQgYnJlYWtzIHZpZGVvIHBsYXliYWNrLlxuICAgIHRoaXNbJ21vdmluZ01lZGlhRWxlbWVudEluRE9NJ10gPSAhdmpzLklTX0lPUztcblxuICAgIC8vIEhUTUwgdmlkZW8gaXMgYWJsZSB0byBhdXRvbWF0aWNhbGx5IHJlc2l6ZSB3aGVuIGdvaW5nIHRvIGZ1bGxzY3JlZW5cbiAgICB0aGlzWydmZWF0dXJlc0Z1bGxzY3JlZW5SZXNpemUnXSA9IHRydWU7XG5cbiAgICAvLyBIVE1MIHZpZGVvIHN1cHBvcnRzIHByb2dyZXNzIGV2ZW50c1xuICAgIHRoaXNbJ2ZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMnXSA9IHRydWU7XG5cbiAgICB2anMuTWVkaWFUZWNoQ29udHJvbGxlci5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuICAgIHRoaXMuc2V0dXBUcmlnZ2VycygpO1xuXG4gICAgdmFyIHNvdXJjZSA9IG9wdGlvbnNbJ3NvdXJjZSddO1xuXG4gICAgLy8gc2V0IHRoZSBzb3VyY2UgaWYgb25lIHdhcyBwcm92aWRlZFxuICAgIGlmIChzb3VyY2UgJiYgdGhpcy5lbF8uY3VycmVudFNyYyAhPT0gc291cmNlLnNyYykge1xuICAgICAgdGhpcy5lbF8uc3JjID0gc291cmNlLnNyYztcbiAgICB9XG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgbmF0aXZlIGNvbnRyb2xzIHNob3VsZCBiZSB1c2VkXG4gICAgLy8gT3VyIGdvYWwgc2hvdWxkIGJlIHRvIGdldCB0aGUgY3VzdG9tIGNvbnRyb2xzIG9uIG1vYmlsZSBzb2xpZCBldmVyeXdoZXJlXG4gICAgLy8gc28gd2UgY2FuIHJlbW92ZSB0aGlzIGFsbCB0b2dldGhlci4gUmlnaHQgbm93IHRoaXMgd2lsbCBibG9jayBjdXN0b21cbiAgICAvLyBjb250cm9scyBvbiB0b3VjaCBlbmFibGVkIGxhcHRvcHMgbGlrZSB0aGUgQ2hyb21lIFBpeGVsXG4gICAgaWYgKHZqcy5UT1VDSF9FTkFCTEVEICYmIHBsYXllci5vcHRpb25zKClbJ25hdGl2ZUNvbnRyb2xzRm9yVG91Y2gnXSAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMudXNlTmF0aXZlQ29udHJvbHMoKTtcbiAgICB9XG5cbiAgICAvLyBDaHJvbWUgYW5kIFNhZmFyaSBib3RoIGhhdmUgaXNzdWVzIHdpdGggYXV0b3BsYXkuXG4gICAgLy8gSW4gU2FmYXJpICg1LjEuMSksIHdoZW4gd2UgbW92ZSB0aGUgdmlkZW8gZWxlbWVudCBpbnRvIHRoZSBjb250YWluZXIgZGl2LCBhdXRvcGxheSBkb2Vzbid0IHdvcmsuXG4gICAgLy8gSW4gQ2hyb21lICgxNSksIGlmIHlvdSBoYXZlIGF1dG9wbGF5ICsgYSBwb3N0ZXIgKyBubyBjb250cm9scywgdGhlIHZpZGVvIGdldHMgaGlkZGVuIChidXQgYXVkaW8gcGxheXMpXG4gICAgLy8gVGhpcyBmaXhlcyBib3RoIGlzc3Vlcy4gTmVlZCB0byB3YWl0IGZvciBBUEksIHNvIGl0IHVwZGF0ZXMgZGlzcGxheXMgY29ycmVjdGx5XG4gICAgcGxheWVyLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgICBpZiAodGhpcy50YWcgJiYgdGhpcy5vcHRpb25zX1snYXV0b3BsYXknXSAmJiB0aGlzLnBhdXNlZCgpKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLnRhZ1sncG9zdGVyJ107IC8vIENocm9tZSBGaXguIEZpeGVkIGluIENocm9tZSB2MTYuXG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy50cmlnZ2VyUmVhZHkoKTtcbiAgfVxufSk7XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5IdG1sNS5kaXNwb3NlTWVkaWFFbGVtZW50KHRoaXMuZWxfKTtcbiAgdmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbn07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgcGxheWVyID0gdGhpcy5wbGF5ZXJfLFxuICAgICAgLy8gSWYgcG9zc2libGUsIHJldXNlIG9yaWdpbmFsIHRhZyBmb3IgSFRNTDUgcGxheWJhY2sgdGVjaG5vbG9neSBlbGVtZW50XG4gICAgICBlbCA9IHBsYXllci50YWcsXG4gICAgICBuZXdFbCxcbiAgICAgIGNsb25lO1xuXG4gIC8vIENoZWNrIGlmIHRoaXMgYnJvd3NlciBzdXBwb3J0cyBtb3ZpbmcgdGhlIGVsZW1lbnQgaW50byB0aGUgYm94LlxuICAvLyBPbiB0aGUgaVBob25lIHZpZGVvIHdpbGwgYnJlYWsgaWYgeW91IG1vdmUgdGhlIGVsZW1lbnQsXG4gIC8vIFNvIHdlIGhhdmUgdG8gY3JlYXRlIGEgYnJhbmQgbmV3IGVsZW1lbnQuXG4gIGlmICghZWwgfHwgdGhpc1snbW92aW5nTWVkaWFFbGVtZW50SW5ET00nXSA9PT0gZmFsc2UpIHtcblxuICAgIC8vIElmIHRoZSBvcmlnaW5hbCB0YWcgaXMgc3RpbGwgdGhlcmUsIGNsb25lIGFuZCByZW1vdmUgaXQuXG4gICAgaWYgKGVsKSB7XG4gICAgICBjbG9uZSA9IGVsLmNsb25lTm9kZShmYWxzZSk7XG4gICAgICB2anMuSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudChlbCk7XG4gICAgICBlbCA9IGNsb25lO1xuICAgICAgcGxheWVyLnRhZyA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsID0gdmpzLmNyZWF0ZUVsKCd2aWRlbycpO1xuICAgICAgdmpzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKGVsLFxuICAgICAgICB2anMub2JqLm1lcmdlKHBsYXllci50YWdBdHRyaWJ1dGVzIHx8IHt9LCB7XG4gICAgICAgICAgaWQ6cGxheWVyLmlkKCkgKyAnX2h0bWw1X2FwaScsXG4gICAgICAgICAgJ2NsYXNzJzondmpzLXRlY2gnXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBhc3NvY2lhdGUgdGhlIHBsYXllciB3aXRoIHRoZSBuZXcgdGFnXG4gICAgZWxbJ3BsYXllciddID0gcGxheWVyO1xuXG4gICAgdmpzLmluc2VydEZpcnN0KGVsLCBwbGF5ZXIuZWwoKSk7XG4gIH1cblxuICAvLyBVcGRhdGUgc3BlY2lmaWMgdGFnIHNldHRpbmdzLCBpbiBjYXNlIHRoZXkgd2VyZSBvdmVycmlkZGVuXG4gIHZhciBzZXR0aW5nc0F0dHJzID0gWydhdXRvcGxheScsJ3ByZWxvYWQnLCdsb29wJywnbXV0ZWQnXTtcbiAgZm9yICh2YXIgaSA9IHNldHRpbmdzQXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2YXIgYXR0ciA9IHNldHRpbmdzQXR0cnNbaV07XG4gICAgdmFyIG92ZXJ3cml0ZUF0dHJzID0ge307XG4gICAgaWYgKHR5cGVvZiBwbGF5ZXIub3B0aW9uc19bYXR0cl0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvdmVyd3JpdGVBdHRyc1thdHRyXSA9IHBsYXllci5vcHRpb25zX1thdHRyXTtcbiAgICB9XG4gICAgdmpzLnNldEVsZW1lbnRBdHRyaWJ1dGVzKGVsLCBvdmVyd3JpdGVBdHRycyk7XG4gIH1cblxuICByZXR1cm4gZWw7XG4gIC8vIGplbm5paXNhd2Vzb21lID0gdHJ1ZTtcbn07XG5cbi8vIE1ha2UgdmlkZW8gZXZlbnRzIHRyaWdnZXIgcGxheWVyIGV2ZW50c1xuLy8gTWF5IHNlZW0gdmVyYm9zZSBoZXJlLCBidXQgbWFrZXMgb3RoZXIgQVBJcyBwb3NzaWJsZS5cbi8vIFRyaWdnZXJzIHJlbW92ZWQgdXNpbmcgdGhpcy5vZmYgd2hlbiBkaXNwb3NlZFxudmpzLkh0bWw1LnByb3RvdHlwZS5zZXR1cFRyaWdnZXJzID0gZnVuY3Rpb24oKXtcbiAgZm9yICh2YXIgaSA9IHZqcy5IdG1sNS5FdmVudHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICB2anMub24odGhpcy5lbF8sIHZqcy5IdG1sNS5FdmVudHNbaV0sIHZqcy5iaW5kKHRoaXMsIHRoaXMuZXZlbnRIYW5kbGVyKSk7XG4gIH1cbn07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuZXZlbnRIYW5kbGVyID0gZnVuY3Rpb24oZXZ0KXtcbiAgLy8gSW4gdGhlIGNhc2Ugb2YgYW4gZXJyb3Igb24gdGhlIHZpZGVvIGVsZW1lbnQsIHNldCB0aGUgZXJyb3IgcHJvcFxuICAvLyBvbiB0aGUgcGxheWVyIGFuZCBsZXQgdGhlIHBsYXllciBoYW5kbGUgdHJpZ2dlcmluZyB0aGUgZXZlbnQuIE9uXG4gIC8vIHNvbWUgcGxhdGZvcm1zLCBlcnJvciBldmVudHMgZmlyZSB0aGF0IGRvIG5vdCBjYXVzZSB0aGUgZXJyb3JcbiAgLy8gcHJvcGVydHkgb24gdGhlIHZpZGVvIGVsZW1lbnQgdG8gYmUgc2V0LiBTZWUgIzE0NjUgZm9yIGFuIGV4YW1wbGUuXG4gIGlmIChldnQudHlwZSA9PSAnZXJyb3InICYmIHRoaXMuZXJyb3IoKSkge1xuICAgIHRoaXMucGxheWVyKCkuZXJyb3IodGhpcy5lcnJvcigpLmNvZGUpO1xuXG4gIC8vIGluIHNvbWUgY2FzZXMgd2UgcGFzcyB0aGUgZXZlbnQgZGlyZWN0bHkgdG8gdGhlIHBsYXllclxuICB9IGVsc2Uge1xuICAgIC8vIE5vIG5lZWQgZm9yIG1lZGlhIGV2ZW50cyB0byBidWJibGUgdXAuXG4gICAgZXZ0LmJ1YmJsZXMgPSBmYWxzZTtcblxuICAgIHRoaXMucGxheWVyKCkudHJpZ2dlcihldnQpO1xuICB9XG59O1xuXG52anMuSHRtbDUucHJvdG90eXBlLnVzZU5hdGl2ZUNvbnRyb2xzID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRlY2gsIHBsYXllciwgY29udHJvbHNPbiwgY29udHJvbHNPZmYsIGNsZWFuVXA7XG5cbiAgdGVjaCA9IHRoaXM7XG4gIHBsYXllciA9IHRoaXMucGxheWVyKCk7XG5cbiAgLy8gSWYgdGhlIHBsYXllciBjb250cm9scyBhcmUgZW5hYmxlZCB0dXJuIG9uIHRoZSBuYXRpdmUgY29udHJvbHNcbiAgdGVjaC5zZXRDb250cm9scyhwbGF5ZXIuY29udHJvbHMoKSk7XG5cbiAgLy8gVXBkYXRlIHRoZSBuYXRpdmUgY29udHJvbHMgd2hlbiBwbGF5ZXIgY29udHJvbHMgc3RhdGUgaXMgdXBkYXRlZFxuICBjb250cm9sc09uID0gZnVuY3Rpb24oKXtcbiAgICB0ZWNoLnNldENvbnRyb2xzKHRydWUpO1xuICB9O1xuICBjb250cm9sc09mZiA9IGZ1bmN0aW9uKCl7XG4gICAgdGVjaC5zZXRDb250cm9scyhmYWxzZSk7XG4gIH07XG4gIHBsYXllci5vbignY29udHJvbHNlbmFibGVkJywgY29udHJvbHNPbik7XG4gIHBsYXllci5vbignY29udHJvbHNkaXNhYmxlZCcsIGNvbnRyb2xzT2ZmKTtcblxuICAvLyBDbGVhbiB1cCB3aGVuIG5vdCB1c2luZyBuYXRpdmUgY29udHJvbHMgYW55bW9yZVxuICBjbGVhblVwID0gZnVuY3Rpb24oKXtcbiAgICBwbGF5ZXIub2ZmKCdjb250cm9sc2VuYWJsZWQnLCBjb250cm9sc09uKTtcbiAgICBwbGF5ZXIub2ZmKCdjb250cm9sc2Rpc2FibGVkJywgY29udHJvbHNPZmYpO1xuICB9O1xuICB0ZWNoLm9uKCdkaXNwb3NlJywgY2xlYW5VcCk7XG4gIHBsYXllci5vbigndXNpbmdjdXN0b21jb250cm9scycsIGNsZWFuVXApO1xuXG4gIC8vIFVwZGF0ZSB0aGUgc3RhdGUgb2YgdGhlIHBsYXllciB0byB1c2luZyBuYXRpdmUgY29udHJvbHNcbiAgcGxheWVyLnVzaW5nTmF0aXZlQ29udHJvbHModHJ1ZSk7XG59O1xuXG5cbnZqcy5IdG1sNS5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCl7IHRoaXMuZWxfLnBsYXkoKTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpeyB0aGlzLmVsXy5wYXVzZSgpOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5wYXVzZWQgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8ucGF1c2VkOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmN1cnJlbnRUaW1lID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLmN1cnJlbnRUaW1lOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRDdXJyZW50VGltZSA9IGZ1bmN0aW9uKHNlY29uZHMpe1xuICB0cnkge1xuICAgIHRoaXMuZWxfLmN1cnJlbnRUaW1lID0gc2Vjb25kcztcbiAgfSBjYXRjaChlKSB7XG4gICAgdmpzLmxvZyhlLCAnVmlkZW8gaXMgbm90IHJlYWR5LiAoVmlkZW8uanMpJyk7XG4gICAgLy8gdGhpcy53YXJuaW5nKFZpZGVvSlMud2FybmluZ3MudmlkZW9Ob3RSZWFkeSk7XG4gIH1cbn07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuZHVyYXRpb24gPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8uZHVyYXRpb24gfHwgMDsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuYnVmZmVyZWQgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8uYnVmZmVyZWQ7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUudm9sdW1lID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLnZvbHVtZTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0Vm9sdW1lID0gZnVuY3Rpb24ocGVyY2VudEFzRGVjaW1hbCl7IHRoaXMuZWxfLnZvbHVtZSA9IHBlcmNlbnRBc0RlY2ltYWw7IH07XG52anMuSHRtbDUucHJvdG90eXBlLm11dGVkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLm11dGVkOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRNdXRlZCA9IGZ1bmN0aW9uKG11dGVkKXsgdGhpcy5lbF8ubXV0ZWQgPSBtdXRlZDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5vZmZzZXRXaWR0aDsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuaGVpZ2h0ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLm9mZnNldEhlaWdodDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5zdXBwb3J0c0Z1bGxTY3JlZW4gPSBmdW5jdGlvbigpe1xuICBpZiAodHlwZW9mIHRoaXMuZWxfLndlYmtpdEVudGVyRnVsbFNjcmVlbiA9PSAnZnVuY3Rpb24nKSB7XG5cbiAgICAvLyBTZWVtcyB0byBiZSBicm9rZW4gaW4gQ2hyb21pdW0vQ2hyb21lICYmIFNhZmFyaSBpbiBMZW9wYXJkXG4gICAgaWYgKC9BbmRyb2lkLy50ZXN0KHZqcy5VU0VSX0FHRU5UKSB8fCAhL0Nocm9tZXxNYWMgT1MgWCAxMC41Ly50ZXN0KHZqcy5VU0VSX0FHRU5UKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuZW50ZXJGdWxsU2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgdmFyIHZpZGVvID0gdGhpcy5lbF87XG4gIGlmICh2aWRlby5wYXVzZWQgJiYgdmlkZW8ubmV0d29ya1N0YXRlIDw9IHZpZGVvLkhBVkVfTUVUQURBVEEpIHtcbiAgICAvLyBhdHRlbXB0IHRvIHByaW1lIHRoZSB2aWRlbyBlbGVtZW50IGZvciBwcm9ncmFtbWF0aWMgYWNjZXNzXG4gICAgLy8gdGhpcyBpc24ndCBuZWNlc3Nhcnkgb24gdGhlIGRlc2t0b3AgYnV0IHNob3VsZG4ndCBodXJ0XG4gICAgdGhpcy5lbF8ucGxheSgpO1xuXG4gICAgLy8gcGxheWluZyBhbmQgcGF1c2luZyBzeW5jaHJvbm91c2x5IGR1cmluZyB0aGUgdHJhbnNpdGlvbiB0byBmdWxsc2NyZWVuXG4gICAgLy8gY2FuIGdldCBpT1MgfjYuMSBkZXZpY2VzIGludG8gYSBwbGF5L3BhdXNlIGxvb3BcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICB2aWRlby5wYXVzZSgpO1xuICAgICAgdmlkZW8ud2Via2l0RW50ZXJGdWxsU2NyZWVuKCk7XG4gICAgfSwgMCk7XG4gIH0gZWxzZSB7XG4gICAgdmlkZW8ud2Via2l0RW50ZXJGdWxsU2NyZWVuKCk7XG4gIH1cbn07XG52anMuSHRtbDUucHJvdG90eXBlLmV4aXRGdWxsU2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5lbF8ud2Via2l0RXhpdEZ1bGxTY3JlZW4oKTtcbn07XG52anMuSHRtbDUucHJvdG90eXBlLnNyYyA9IGZ1bmN0aW9uKHNyYykge1xuICBpZiAoc3JjID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhpcy5lbF8uc3JjO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZWxfLnNyYyA9IHNyYztcbiAgfVxufTtcbnZqcy5IdG1sNS5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKCl7IHRoaXMuZWxfLmxvYWQoKTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuY3VycmVudFNyYyA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5jdXJyZW50U3JjOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLnBvc3RlciA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5wb3N0ZXI7IH07XG52anMuSHRtbDUucHJvdG90eXBlLnNldFBvc3RlciA9IGZ1bmN0aW9uKHZhbCl7IHRoaXMuZWxfLnBvc3RlciA9IHZhbDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5wcmVsb2FkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLnByZWxvYWQ7IH07XG52anMuSHRtbDUucHJvdG90eXBlLnNldFByZWxvYWQgPSBmdW5jdGlvbih2YWwpeyB0aGlzLmVsXy5wcmVsb2FkID0gdmFsOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmF1dG9wbGF5ID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLmF1dG9wbGF5OyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRBdXRvcGxheSA9IGZ1bmN0aW9uKHZhbCl7IHRoaXMuZWxfLmF1dG9wbGF5ID0gdmFsOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmNvbnRyb2xzID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLmNvbnRyb2xzOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRDb250cm9scyA9IGZ1bmN0aW9uKHZhbCl7IHRoaXMuZWxfLmNvbnRyb2xzID0gISF2YWw7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5sb29wOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRMb29wID0gZnVuY3Rpb24odmFsKXsgdGhpcy5lbF8ubG9vcCA9IHZhbDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5lcnJvcjsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2Vla2luZyA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5zZWVraW5nOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5lbmRlZCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5lbmRlZDsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuZGVmYXVsdE11dGVkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLmRlZmF1bHRNdXRlZDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5wbGF5YmFja1JhdGUgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8ucGxheWJhY2tSYXRlOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRQbGF5YmFja1JhdGUgPSBmdW5jdGlvbih2YWwpeyB0aGlzLmVsXy5wbGF5YmFja1JhdGUgPSB2YWw7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUubmV0d29ya1N0YXRlID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLm5ldHdvcmtTdGF0ZTsgfTtcblxuLyogSFRNTDUgU3VwcG9ydCBUZXN0aW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmpzLkh0bWw1LmlzU3VwcG9ydGVkID0gZnVuY3Rpb24oKXtcbiAgLy8gaWU5IHdpdGggbm8gTWVkaWEgUGxheWVyIGlzIGEgTElBUiEgKCM5ODQpXG4gIHRyeSB7XG4gICAgdmpzLlRFU1RfVklEWyd2b2x1bWUnXSA9IDAuNTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiAhIXZqcy5URVNUX1ZJRC5jYW5QbGF5VHlwZTtcbn07XG5cbnZqcy5IdG1sNS5jYW5QbGF5U291cmNlID0gZnVuY3Rpb24oc3JjT2JqKXtcbiAgLy8gSUU5IG9uIFdpbmRvd3MgNyB3aXRob3V0IE1lZGlhUGxheWVyIHRocm93cyBhbiBlcnJvciBoZXJlXG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS92aWRlb2pzL3ZpZGVvLmpzL2lzc3Vlcy81MTlcbiAgdHJ5IHtcbiAgICByZXR1cm4gISF2anMuVEVTVF9WSUQuY2FuUGxheVR5cGUoc3JjT2JqLnR5cGUpO1xuICB9IGNhdGNoKGUpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgLy8gVE9ETzogQ2hlY2sgVHlwZVxuICAvLyBJZiBubyBUeXBlLCBjaGVjayBleHRcbiAgLy8gQ2hlY2sgTWVkaWEgVHlwZVxufTtcblxudmpzLkh0bWw1LmNhbkNvbnRyb2xWb2x1bWUgPSBmdW5jdGlvbigpe1xuICB2YXIgdm9sdW1lID0gIHZqcy5URVNUX1ZJRC52b2x1bWU7XG4gIHZqcy5URVNUX1ZJRC52b2x1bWUgPSAodm9sdW1lIC8gMikgKyAwLjE7XG4gIHJldHVybiB2b2x1bWUgIT09IHZqcy5URVNUX1ZJRC52b2x1bWU7XG59O1xuXG52anMuSHRtbDUuY2FuQ29udHJvbFBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBwbGF5YmFja1JhdGUgPSAgdmpzLlRFU1RfVklELnBsYXliYWNrUmF0ZTtcbiAgdmpzLlRFU1RfVklELnBsYXliYWNrUmF0ZSA9IChwbGF5YmFja1JhdGUgLyAyKSArIDAuMTtcbiAgcmV0dXJuIHBsYXliYWNrUmF0ZSAhPT0gdmpzLlRFU1RfVklELnBsYXliYWNrUmF0ZTtcbn07XG5cbi8vIEhUTUw1IEZlYXR1cmUgZGV0ZWN0aW9uIGFuZCBEZXZpY2UgRml4ZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIC8vXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBjYW5QbGF5VHlwZSxcbiAgICAgIG1wZWd1cmxSRSA9IC9eYXBwbGljYXRpb25cXC8oPzp4LXx2bmRcXC5hcHBsZVxcLiltcGVndXJsL2ksXG4gICAgICBtcDRSRSA9IC9edmlkZW9cXC9tcDQvaTtcblxuICB2anMuSHRtbDUucGF0Y2hDYW5QbGF5VHlwZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8vIEFuZHJvaWQgNC4wIGFuZCBhYm92ZSBjYW4gcGxheSBITFMgdG8gc29tZSBleHRlbnQgYnV0IGl0IHJlcG9ydHMgYmVpbmcgdW5hYmxlIHRvIGRvIHNvXG4gICAgaWYgKHZqcy5BTkRST0lEX1ZFUlNJT04gPj0gNC4wKSB7XG4gICAgICBpZiAoIWNhblBsYXlUeXBlKSB7XG4gICAgICAgIGNhblBsYXlUeXBlID0gdmpzLlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZTtcbiAgICAgIH1cblxuICAgICAgdmpzLlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgaWYgKHR5cGUgJiYgbXBlZ3VybFJFLnRlc3QodHlwZSkpIHtcbiAgICAgICAgICByZXR1cm4gJ21heWJlJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FuUGxheVR5cGUuY2FsbCh0aGlzLCB0eXBlKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gT3ZlcnJpZGUgQW5kcm9pZCAyLjIgYW5kIGxlc3MgY2FuUGxheVR5cGUgbWV0aG9kIHdoaWNoIGlzIGJyb2tlblxuICAgIGlmICh2anMuSVNfT0xEX0FORFJPSUQpIHtcbiAgICAgIGlmICghY2FuUGxheVR5cGUpIHtcbiAgICAgICAgY2FuUGxheVR5cGUgPSB2anMuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlO1xuICAgICAgfVxuXG4gICAgICB2anMuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlID0gZnVuY3Rpb24odHlwZSl7XG4gICAgICAgIGlmICh0eXBlICYmIG1wNFJFLnRlc3QodHlwZSkpIHtcbiAgICAgICAgICByZXR1cm4gJ21heWJlJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FuUGxheVR5cGUuY2FsbCh0aGlzLCB0eXBlKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xuXG4gIHZqcy5IdG1sNS51bnBhdGNoQ2FuUGxheVR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgciA9IHZqcy5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGU7XG4gICAgdmpzLlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZSA9IGNhblBsYXlUeXBlO1xuICAgIGNhblBsYXlUeXBlID0gbnVsbDtcbiAgICByZXR1cm4gcjtcbiAgfTtcblxuICAvLyBieSBkZWZhdWx0LCBwYXRjaCB0aGUgdmlkZW8gZWxlbWVudFxuICB2anMuSHRtbDUucGF0Y2hDYW5QbGF5VHlwZSgpO1xufSkoKTtcblxuLy8gTGlzdCBvZiBhbGwgSFRNTDUgZXZlbnRzICh2YXJpb3VzIHVzZXMpLlxudmpzLkh0bWw1LkV2ZW50cyA9ICdsb2Fkc3RhcnQsc3VzcGVuZCxhYm9ydCxlcnJvcixlbXB0aWVkLHN0YWxsZWQsbG9hZGVkbWV0YWRhdGEsbG9hZGVkZGF0YSxjYW5wbGF5LGNhbnBsYXl0aHJvdWdoLHBsYXlpbmcsd2FpdGluZyxzZWVraW5nLHNlZWtlZCxlbmRlZCxkdXJhdGlvbmNoYW5nZSx0aW1ldXBkYXRlLHByb2dyZXNzLHBsYXkscGF1c2UscmF0ZWNoYW5nZSx2b2x1bWVjaGFuZ2UnLnNwbGl0KCcsJyk7XG5cbnZqcy5IdG1sNS5kaXNwb3NlTWVkaWFFbGVtZW50ID0gZnVuY3Rpb24oZWwpe1xuICBpZiAoIWVsKSB7IHJldHVybjsgfVxuXG4gIGVsWydwbGF5ZXInXSA9IG51bGw7XG5cbiAgaWYgKGVsLnBhcmVudE5vZGUpIHtcbiAgICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcbiAgfVxuXG4gIC8vIHJlbW92ZSBhbnkgY2hpbGQgdHJhY2sgb3Igc291cmNlIG5vZGVzIHRvIHByZXZlbnQgdGhlaXIgbG9hZGluZ1xuICB3aGlsZShlbC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICBlbC5yZW1vdmVDaGlsZChlbC5maXJzdENoaWxkKTtcbiAgfVxuXG4gIC8vIHJlbW92ZSBhbnkgc3JjIHJlZmVyZW5jZS4gbm90IHNldHRpbmcgYHNyYz0nJ2AgYmVjYXVzZSB0aGF0IGNhdXNlcyBhIHdhcm5pbmdcbiAgLy8gaW4gZmlyZWZveFxuICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3NyYycpO1xuXG4gIC8vIGZvcmNlIHRoZSBtZWRpYSBlbGVtZW50IHRvIHVwZGF0ZSBpdHMgbG9hZGluZyBzdGF0ZSBieSBjYWxsaW5nIGxvYWQoKVxuICAvLyBob3dldmVyIElFIG9uIFdpbmRvd3MgN04gaGFzIGEgYnVnIHRoYXQgdGhyb3dzIGFuIGVycm9yIHNvIG5lZWQgYSB0cnkvY2F0Y2ggKCM3OTMpXG4gIGlmICh0eXBlb2YgZWwubG9hZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIHdyYXBwaW5nIGluIGFuIGlpZmUgc28gaXQncyBub3QgZGVvcHRpbWl6ZWQgKCMxMDYwI2Rpc2N1c3Npb25fcjEwMzI0NDczKVxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGVsLmxvYWQoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gbm90IHN1cHBvcnRlZFxuICAgICAgfVxuICAgIH0pKCk7XG4gIH1cbn07XG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgVmlkZW9KUy1TV0YgLSBDdXN0b20gRmxhc2ggUGxheWVyIHdpdGggSFRNTDUtaXNoIEFQSVxuICogaHR0cHM6Ly9naXRodWIuY29tL3plbmNvZGVyL3ZpZGVvLWpzLXN3ZlxuICogTm90IHVzaW5nIHNldHVwVHJpZ2dlcnMuIFVzaW5nIGdsb2JhbCBvbkV2ZW50IGZ1bmMgdG8gZGlzdHJpYnV0ZSBldmVudHNcbiAqL1xuXG4vKipcbiAqIEZsYXNoIE1lZGlhIENvbnRyb2xsZXIgLSBXcmFwcGVyIGZvciBmYWxsYmFjayBTV0YgQVBJXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQHBhcmFtIHtGdW5jdGlvbj19IHJlYWR5XG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkZsYXNoID0gdmpzLk1lZGlhVGVjaENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICB2anMuTWVkaWFUZWNoQ29udHJvbGxlci5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuXG4gICAgdmFyIHNvdXJjZSA9IG9wdGlvbnNbJ3NvdXJjZSddLFxuXG4gICAgICAgIC8vIFdoaWNoIGVsZW1lbnQgdG8gZW1iZWQgaW5cbiAgICAgICAgcGFyZW50RWwgPSBvcHRpb25zWydwYXJlbnRFbCddLFxuXG4gICAgICAgIC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBlbGVtZW50IHRvIGJlIHJlcGxhY2VkIGJ5IHN3ZiBvYmplY3RcbiAgICAgICAgcGxhY2VIb2xkZXIgPSB0aGlzLmVsXyA9IHZqcy5jcmVhdGVFbCgnZGl2JywgeyBpZDogcGxheWVyLmlkKCkgKyAnX3RlbXBfZmxhc2gnIH0pLFxuXG4gICAgICAgIC8vIEdlbmVyYXRlIElEIGZvciBzd2Ygb2JqZWN0XG4gICAgICAgIG9iaklkID0gcGxheWVyLmlkKCkrJ19mbGFzaF9hcGknLFxuXG4gICAgICAgIC8vIFN0b3JlIHBsYXllciBvcHRpb25zIGluIGxvY2FsIHZhciBmb3Igb3B0aW1pemF0aW9uXG4gICAgICAgIC8vIFRPRE86IHN3aXRjaCB0byB1c2luZyBwbGF5ZXIgbWV0aG9kcyBpbnN0ZWFkIG9mIG9wdGlvbnNcbiAgICAgICAgLy8gZS5nLiBwbGF5ZXIuYXV0b3BsYXkoKTtcbiAgICAgICAgcGxheWVyT3B0aW9ucyA9IHBsYXllci5vcHRpb25zXyxcblxuICAgICAgICAvLyBNZXJnZSBkZWZhdWx0IGZsYXNodmFycyB3aXRoIG9uZXMgcGFzc2VkIGluIHRvIGluaXRcbiAgICAgICAgZmxhc2hWYXJzID0gdmpzLm9iai5tZXJnZSh7XG5cbiAgICAgICAgICAvLyBTV0YgQ2FsbGJhY2sgRnVuY3Rpb25zXG4gICAgICAgICAgJ3JlYWR5RnVuY3Rpb24nOiAndmlkZW9qcy5GbGFzaC5vblJlYWR5JyxcbiAgICAgICAgICAnZXZlbnRQcm94eUZ1bmN0aW9uJzogJ3ZpZGVvanMuRmxhc2gub25FdmVudCcsXG4gICAgICAgICAgJ2Vycm9yRXZlbnRQcm94eUZ1bmN0aW9uJzogJ3ZpZGVvanMuRmxhc2gub25FcnJvcicsXG5cbiAgICAgICAgICAvLyBQbGF5ZXIgU2V0dGluZ3NcbiAgICAgICAgICAnYXV0b3BsYXknOiBwbGF5ZXJPcHRpb25zLmF1dG9wbGF5LFxuICAgICAgICAgICdwcmVsb2FkJzogcGxheWVyT3B0aW9ucy5wcmVsb2FkLFxuICAgICAgICAgICdsb29wJzogcGxheWVyT3B0aW9ucy5sb29wLFxuICAgICAgICAgICdtdXRlZCc6IHBsYXllck9wdGlvbnMubXV0ZWRcblxuICAgICAgICB9LCBvcHRpb25zWydmbGFzaFZhcnMnXSksXG5cbiAgICAgICAgLy8gTWVyZ2UgZGVmYXVsdCBwYXJhbWVzIHdpdGggb25lcyBwYXNzZWQgaW5cbiAgICAgICAgcGFyYW1zID0gdmpzLm9iai5tZXJnZSh7XG4gICAgICAgICAgJ3dtb2RlJzogJ29wYXF1ZScsIC8vIE9wYXF1ZSBpcyBuZWVkZWQgdG8gb3ZlcmxheSBjb250cm9scywgYnV0IGNhbiBhZmZlY3QgcGxheWJhY2sgcGVyZm9ybWFuY2VcbiAgICAgICAgICAnYmdjb2xvcic6ICcjMDAwMDAwJyAvLyBVc2luZyBiZ2NvbG9yIHByZXZlbnRzIGEgd2hpdGUgZmxhc2ggd2hlbiB0aGUgb2JqZWN0IGlzIGxvYWRpbmdcbiAgICAgICAgfSwgb3B0aW9uc1sncGFyYW1zJ10pLFxuXG4gICAgICAgIC8vIE1lcmdlIGRlZmF1bHQgYXR0cmlidXRlcyB3aXRoIG9uZXMgcGFzc2VkIGluXG4gICAgICAgIGF0dHJpYnV0ZXMgPSB2anMub2JqLm1lcmdlKHtcbiAgICAgICAgICAnaWQnOiBvYmpJZCxcbiAgICAgICAgICAnbmFtZSc6IG9iaklkLCAvLyBCb3RoIElEIGFuZCBOYW1lIG5lZWRlZCBvciBzd2YgdG8gaWRlbnRpZnR5IGl0c2VsZlxuICAgICAgICAgICdjbGFzcyc6ICd2anMtdGVjaCdcbiAgICAgICAgfSwgb3B0aW9uc1snYXR0cmlidXRlcyddKVxuICAgIDtcblxuICAgIC8vIElmIHNvdXJjZSB3YXMgc3VwcGxpZWQgcGFzcyBhcyBhIGZsYXNoIHZhci5cbiAgICBpZiAoc291cmNlKSB7XG4gICAgICBpZiAoc291cmNlLnR5cGUgJiYgdmpzLkZsYXNoLmlzU3RyZWFtaW5nVHlwZShzb3VyY2UudHlwZSkpIHtcbiAgICAgICAgdmFyIHBhcnRzID0gdmpzLkZsYXNoLnN0cmVhbVRvUGFydHMoc291cmNlLnNyYyk7XG4gICAgICAgIGZsYXNoVmFyc1sncnRtcENvbm5lY3Rpb24nXSA9IGVuY29kZVVSSUNvbXBvbmVudChwYXJ0cy5jb25uZWN0aW9uKTtcbiAgICAgICAgZmxhc2hWYXJzWydydG1wU3RyZWFtJ10gPSBlbmNvZGVVUklDb21wb25lbnQocGFydHMuc3RyZWFtKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBmbGFzaFZhcnNbJ3NyYyddID0gZW5jb2RlVVJJQ29tcG9uZW50KHZqcy5nZXRBYnNvbHV0ZVVSTChzb3VyY2Uuc3JjKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIHBsYWNlaG9sZGVyIHRvIHBsYXllciBkaXZcbiAgICB2anMuaW5zZXJ0Rmlyc3QocGxhY2VIb2xkZXIsIHBhcmVudEVsKTtcblxuICAgIC8vIEhhdmluZyBpc3N1ZXMgd2l0aCBGbGFzaCByZWxvYWRpbmcgb24gY2VydGFpbiBwYWdlIGFjdGlvbnMgKGhpZGUvcmVzaXplL2Z1bGxzY3JlZW4pIGluIGNlcnRhaW4gYnJvd3NlcnNcbiAgICAvLyBUaGlzIGFsbG93cyByZXNldHRpbmcgdGhlIHBsYXloZWFkIHdoZW4gd2UgY2F0Y2ggdGhlIHJlbG9hZFxuICAgIGlmIChvcHRpb25zWydzdGFydFRpbWUnXSkge1xuICAgICAgdGhpcy5yZWFkeShmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLmxvYWQoKTtcbiAgICAgICAgdGhpcy5wbGF5KCk7XG4gICAgICAgIHRoaXNbJ2N1cnJlbnRUaW1lJ10ob3B0aW9uc1snc3RhcnRUaW1lJ10pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gZmlyZWZveCBkb2Vzbid0IGJ1YmJsZSBtb3VzZW1vdmUgZXZlbnRzIHRvIHBhcmVudC4gdmlkZW9qcy92aWRlby1qcy1zd2YjMzdcbiAgICAvLyBidWd6aWxsYSBidWc6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTgzNjc4NlxuICAgIGlmICh2anMuSVNfRklSRUZPWCkge1xuICAgICAgdGhpcy5yZWFkeShmdW5jdGlvbigpe1xuICAgICAgICB2anMub24odGhpcy5lbCgpLCAnbW91c2Vtb3ZlJywgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICAgICAgICAvLyBzaW5jZSBpdCdzIGEgY3VzdG9tIGV2ZW50LCBkb24ndCBidWJibGUgaGlnaGVyIHRoYW4gdGhlIHBsYXllclxuICAgICAgICAgIHRoaXMucGxheWVyKCkudHJpZ2dlcih7ICd0eXBlJzonbW91c2Vtb3ZlJywgJ2J1YmJsZXMnOiBmYWxzZSB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbmF0aXZlIGNsaWNrIGV2ZW50cyBvbiB0aGUgU1dGIGFyZW4ndCB0cmlnZ2VyZWQgb24gSUUxMSwgV2luOC4xUlRcbiAgICAvLyB1c2Ugc3RhZ2VjbGljayBldmVudHMgdHJpZ2dlcmVkIGZyb20gaW5zaWRlIHRoZSBTV0YgaW5zdGVhZFxuICAgIHBsYXllci5vbignc3RhZ2VjbGljaycsIHBsYXllci5yZXBvcnRVc2VyQWN0aXZpdHkpO1xuXG4gICAgdGhpcy5lbF8gPSB2anMuRmxhc2guZW1iZWQob3B0aW9uc1snc3dmJ10sIHBsYWNlSG9sZGVyLCBmbGFzaFZhcnMsIHBhcmFtcywgYXR0cmlidXRlcyk7XG4gIH1cbn0pO1xuXG52anMuRmxhc2gucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpe1xuICB2anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xufTtcblxudmpzLkZsYXNoLnByb3RvdHlwZS5wbGF5ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5lbF8udmpzX3BsYXkoKTtcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigpe1xuICB0aGlzLmVsXy52anNfcGF1c2UoKTtcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGUuc3JjID0gZnVuY3Rpb24oc3JjKXtcbiAgaWYgKHNyYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXNbJ2N1cnJlbnRTcmMnXSgpO1xuICB9XG5cbiAgaWYgKHZqcy5GbGFzaC5pc1N0cmVhbWluZ1NyYyhzcmMpKSB7XG4gICAgc3JjID0gdmpzLkZsYXNoLnN0cmVhbVRvUGFydHMoc3JjKTtcbiAgICB0aGlzLnNldFJ0bXBDb25uZWN0aW9uKHNyYy5jb25uZWN0aW9uKTtcbiAgICB0aGlzLnNldFJ0bXBTdHJlYW0oc3JjLnN0cmVhbSk7XG4gIH0gZWxzZSB7XG4gICAgLy8gTWFrZSBzdXJlIHNvdXJjZSBVUkwgaXMgYWJvc29sdXRlLlxuICAgIHNyYyA9IHZqcy5nZXRBYnNvbHV0ZVVSTChzcmMpO1xuICAgIHRoaXMuZWxfLnZqc19zcmMoc3JjKTtcbiAgfVxuXG4gIC8vIEN1cnJlbnRseSB0aGUgU1dGIGRvZXNuJ3QgYXV0b3BsYXkgaWYgeW91IGxvYWQgYSBzb3VyY2UgbGF0ZXIuXG4gIC8vIGUuZy4gTG9hZCBwbGF5ZXIgdy8gbm8gc291cmNlLCB3YWl0IDJzLCBzZXQgc3JjLlxuICBpZiAodGhpcy5wbGF5ZXJfLmF1dG9wbGF5KCkpIHtcbiAgICB2YXIgdGVjaCA9IHRoaXM7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpeyB0ZWNoLnBsYXkoKTsgfSwgMCk7XG4gIH1cbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGVbJ3NldEN1cnJlbnRUaW1lJ10gPSBmdW5jdGlvbih0aW1lKXtcbiAgdGhpcy5sYXN0U2Vla1RhcmdldF8gPSB0aW1lO1xuICB0aGlzLmVsXy52anNfc2V0UHJvcGVydHkoJ2N1cnJlbnRUaW1lJywgdGltZSk7XG4gIHZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5zZXRDdXJyZW50VGltZS5jYWxsKHRoaXMpO1xufTtcblxudmpzLkZsYXNoLnByb3RvdHlwZVsnY3VycmVudFRpbWUnXSA9IGZ1bmN0aW9uKHRpbWUpe1xuICAvLyB3aGVuIHNlZWtpbmcgbWFrZSB0aGUgcmVwb3J0ZWQgdGltZSBrZWVwIHVwIHdpdGggdGhlIHJlcXVlc3RlZCB0aW1lXG4gIC8vIGJ5IHJlYWRpbmcgdGhlIHRpbWUgd2UncmUgc2Vla2luZyB0b1xuICBpZiAodGhpcy5zZWVraW5nKCkpIHtcbiAgICByZXR1cm4gdGhpcy5sYXN0U2Vla1RhcmdldF8gfHwgMDtcbiAgfVxuICByZXR1cm4gdGhpcy5lbF8udmpzX2dldFByb3BlcnR5KCdjdXJyZW50VGltZScpO1xufTtcblxudmpzLkZsYXNoLnByb3RvdHlwZVsnY3VycmVudFNyYyddID0gZnVuY3Rpb24oKXtcbiAgdmFyIHNyYyA9IHRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgnY3VycmVudFNyYycpO1xuICAvLyBubyBzcmMsIGNoZWNrIGFuZCBzZWUgaWYgUlRNUFxuICBpZiAoc3JjID09IG51bGwpIHtcbiAgICB2YXIgY29ubmVjdGlvbiA9IHRoaXNbJ3J0bXBDb25uZWN0aW9uJ10oKSxcbiAgICAgICAgc3RyZWFtID0gdGhpc1sncnRtcFN0cmVhbSddKCk7XG5cbiAgICBpZiAoY29ubmVjdGlvbiAmJiBzdHJlYW0pIHtcbiAgICAgIHNyYyA9IHZqcy5GbGFzaC5zdHJlYW1Gcm9tUGFydHMoY29ubmVjdGlvbiwgc3RyZWFtKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNyYztcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuZWxfLnZqc19sb2FkKCk7XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlLnBvc3RlciA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgncG9zdGVyJyk7XG59O1xudmpzLkZsYXNoLnByb3RvdHlwZVsnc2V0UG9zdGVyJ10gPSBmdW5jdGlvbigpe1xuICAvLyBwb3N0ZXIgaW1hZ2VzIGFyZSBub3QgaGFuZGxlZCBieSB0aGUgRmxhc2ggdGVjaCBzbyBtYWtlIHRoaXMgYSBuby1vcFxufTtcblxudmpzLkZsYXNoLnByb3RvdHlwZS5idWZmZXJlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuY3JlYXRlVGltZVJhbmdlKDAsIHRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgnYnVmZmVyZWQnKSk7XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlLnN1cHBvcnRzRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBmYWxzZTsgLy8gRmxhc2ggZG9lcyBub3QgYWxsb3cgZnVsbHNjcmVlbiB0aHJvdWdoIGphdmFzY3JpcHRcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGUuZW50ZXJGdWxsU2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuKGZ1bmN0aW9uKCl7XG4gIC8vIENyZWF0ZSBzZXR0ZXJzIGFuZCBnZXR0ZXJzIGZvciBhdHRyaWJ1dGVzXG4gIHZhciBhcGkgPSB2anMuRmxhc2gucHJvdG90eXBlLFxuICAgIHJlYWRXcml0ZSA9ICdydG1wQ29ubmVjdGlvbixydG1wU3RyZWFtLHByZWxvYWQsZGVmYXVsdFBsYXliYWNrUmF0ZSxwbGF5YmFja1JhdGUsYXV0b3BsYXksbG9vcCxtZWRpYUdyb3VwLGNvbnRyb2xsZXIsY29udHJvbHMsdm9sdW1lLG11dGVkLGRlZmF1bHRNdXRlZCcuc3BsaXQoJywnKSxcbiAgICByZWFkT25seSA9ICdlcnJvcixuZXR3b3JrU3RhdGUscmVhZHlTdGF0ZSxzZWVraW5nLGluaXRpYWxUaW1lLGR1cmF0aW9uLHN0YXJ0T2Zmc2V0VGltZSxwYXVzZWQscGxheWVkLHNlZWthYmxlLGVuZGVkLHZpZGVvVHJhY2tzLGF1ZGlvVHJhY2tzLHZpZGVvV2lkdGgsdmlkZW9IZWlnaHQsdGV4dFRyYWNrcycuc3BsaXQoJywnKSxcbiAgICAvLyBPdmVycmlkZGVuOiBidWZmZXJlZCwgY3VycmVudFRpbWUsIGN1cnJlbnRTcmNcbiAgICBpO1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZVNldHRlcihhdHRyKXtcbiAgICB2YXIgYXR0clVwcGVyID0gYXR0ci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGF0dHIuc2xpY2UoMSk7XG4gICAgYXBpWydzZXQnK2F0dHJVcHBlcl0gPSBmdW5jdGlvbih2YWwpeyByZXR1cm4gdGhpcy5lbF8udmpzX3NldFByb3BlcnR5KGF0dHIsIHZhbCk7IH07XG4gIH07XG4gIGZ1bmN0aW9uIGNyZWF0ZUdldHRlcihhdHRyKSB7XG4gICAgYXBpW2F0dHJdID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eShhdHRyKTsgfTtcbiAgfTtcblxuICAvLyBDcmVhdGUgZ2V0dGVyIGFuZCBzZXR0ZXJzIGZvciBhbGwgcmVhZC93cml0ZSBhdHRyaWJ1dGVzXG4gIGZvciAoaSA9IDA7IGkgPCByZWFkV3JpdGUubGVuZ3RoOyBpKyspIHtcbiAgICBjcmVhdGVHZXR0ZXIocmVhZFdyaXRlW2ldKTtcbiAgICBjcmVhdGVTZXR0ZXIocmVhZFdyaXRlW2ldKTtcbiAgfVxuXG4gIC8vIENyZWF0ZSBnZXR0ZXJzIGZvciByZWFkLW9ubHkgYXR0cmlidXRlc1xuICBmb3IgKGkgPSAwOyBpIDwgcmVhZE9ubHkubGVuZ3RoOyBpKyspIHtcbiAgICBjcmVhdGVHZXR0ZXIocmVhZE9ubHlbaV0pO1xuICB9XG59KSgpO1xuXG4vKiBGbGFzaCBTdXBwb3J0IFRlc3RpbmcgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxudmpzLkZsYXNoLmlzU3VwcG9ydGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5GbGFzaC52ZXJzaW9uKClbMF0gPj0gMTA7XG4gIC8vIHJldHVybiBzd2ZvYmplY3QuaGFzRmxhc2hQbGF5ZXJWZXJzaW9uKCcxMCcpO1xufTtcblxudmpzLkZsYXNoLmNhblBsYXlTb3VyY2UgPSBmdW5jdGlvbihzcmNPYmope1xuICB2YXIgdHlwZTtcblxuICBpZiAoIXNyY09iai50eXBlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG5cbiAgdHlwZSA9IHNyY09iai50eXBlLnJlcGxhY2UoLzsuKi8sJycpLnRvTG93ZXJDYXNlKCk7XG4gIGlmICh0eXBlIGluIHZqcy5GbGFzaC5mb3JtYXRzIHx8IHR5cGUgaW4gdmpzLkZsYXNoLnN0cmVhbWluZ0Zvcm1hdHMpIHtcbiAgICByZXR1cm4gJ21heWJlJztcbiAgfVxufTtcblxudmpzLkZsYXNoLmZvcm1hdHMgPSB7XG4gICd2aWRlby9mbHYnOiAnRkxWJyxcbiAgJ3ZpZGVvL3gtZmx2JzogJ0ZMVicsXG4gICd2aWRlby9tcDQnOiAnTVA0JyxcbiAgJ3ZpZGVvL200dic6ICdNUDQnXG59O1xuXG52anMuRmxhc2guc3RyZWFtaW5nRm9ybWF0cyA9IHtcbiAgJ3J0bXAvbXA0JzogJ01QNCcsXG4gICdydG1wL2Zsdic6ICdGTFYnXG59O1xuXG52anMuRmxhc2hbJ29uUmVhZHknXSA9IGZ1bmN0aW9uKGN1cnJTd2Ype1xuICB2YXIgZWwsIHBsYXllcjtcblxuICBlbCA9IHZqcy5lbChjdXJyU3dmKTtcblxuICAvLyBnZXQgcGxheWVyIGZyb20gdGhlIHBsYXllciBkaXYgcHJvcGVydHlcbiAgcGxheWVyID0gZWwgJiYgZWwucGFyZW50Tm9kZSAmJiBlbC5wYXJlbnROb2RlWydwbGF5ZXInXTtcblxuICAvLyBpZiB0aGVyZSBpcyBubyBlbCBvciBwbGF5ZXIgdGhlbiB0aGUgdGVjaCBoYXMgYmVlbiBkaXNwb3NlZFxuICAvLyBhbmQgdGhlIHRlY2ggZWxlbWVudCB3YXMgcmVtb3ZlZCBmcm9tIHRoZSBwbGF5ZXIgZGl2XG4gIGlmIChwbGF5ZXIpIHtcbiAgICAvLyByZWZlcmVuY2UgcGxheWVyIG9uIHRlY2ggZWxlbWVudFxuICAgIGVsWydwbGF5ZXInXSA9IHBsYXllcjtcbiAgICAvLyBjaGVjayB0aGF0IHRoZSBmbGFzaCBvYmplY3QgaXMgcmVhbGx5IHJlYWR5XG4gICAgdmpzLkZsYXNoWydjaGVja1JlYWR5J10ocGxheWVyLnRlY2gpO1xuICB9XG59O1xuXG4vLyBUaGUgU1dGIGlzbid0IGFsd2F5cyByZWFkeSB3aGVuIGl0IHNheXMgaXQgaXMuIFNvbWV0aW1lcyB0aGUgQVBJIGZ1bmN0aW9ucyBzdGlsbCBuZWVkIHRvIGJlIGFkZGVkIHRvIHRoZSBvYmplY3QuXG4vLyBJZiBpdCdzIG5vdCByZWFkeSwgd2Ugc2V0IGEgdGltZW91dCB0byBjaGVjayBhZ2FpbiBzaG9ydGx5LlxudmpzLkZsYXNoWydjaGVja1JlYWR5J10gPSBmdW5jdGlvbih0ZWNoKXtcbiAgLy8gc3RvcCB3b3JyeWluZyBpZiB0aGUgdGVjaCBoYXMgYmVlbiBkaXNwb3NlZFxuICBpZiAoIXRlY2guZWwoKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGNoZWNrIGlmIEFQSSBwcm9wZXJ0eSBleGlzdHNcbiAgaWYgKHRlY2guZWwoKS52anNfZ2V0UHJvcGVydHkpIHtcbiAgICAvLyB0ZWxsIHRlY2ggaXQncyByZWFkeVxuICAgIHRlY2gudHJpZ2dlclJlYWR5KCk7XG4gIH0gZWxzZSB7XG4gICAgLy8gd2FpdCBsb25nZXJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICB2anMuRmxhc2hbJ2NoZWNrUmVhZHknXSh0ZWNoKTtcbiAgICB9LCA1MCk7XG4gIH1cbn07XG5cbi8vIFRyaWdnZXIgZXZlbnRzIGZyb20gdGhlIHN3ZiBvbiB0aGUgcGxheWVyXG52anMuRmxhc2hbJ29uRXZlbnQnXSA9IGZ1bmN0aW9uKHN3ZklELCBldmVudE5hbWUpe1xuICB2YXIgcGxheWVyID0gdmpzLmVsKHN3ZklEKVsncGxheWVyJ107XG4gIHBsYXllci50cmlnZ2VyKGV2ZW50TmFtZSk7XG59O1xuXG4vLyBMb2cgZXJyb3JzIGZyb20gdGhlIHN3ZlxudmpzLkZsYXNoWydvbkVycm9yJ10gPSBmdW5jdGlvbihzd2ZJRCwgZXJyKXtcbiAgdmFyIHBsYXllciA9IHZqcy5lbChzd2ZJRClbJ3BsYXllciddO1xuICB2YXIgbXNnID0gJ0ZMQVNIOiAnK2VycjtcblxuICBpZiAoZXJyID09ICdzcmNub3Rmb3VuZCcpIHtcbiAgICBwbGF5ZXIuZXJyb3IoeyBjb2RlOiA0LCBtZXNzYWdlOiBtc2cgfSk7XG5cbiAgLy8gZXJyb3JzIHdlIGhhdmVuJ3QgY2F0ZWdvcml6ZWQgaW50byB0aGUgbWVkaWEgZXJyb3JzXG4gIH0gZWxzZSB7XG4gICAgcGxheWVyLmVycm9yKG1zZyk7XG4gIH1cbn07XG5cbi8vIEZsYXNoIFZlcnNpb24gQ2hlY2tcbnZqcy5GbGFzaC52ZXJzaW9uID0gZnVuY3Rpb24oKXtcbiAgdmFyIHZlcnNpb24gPSAnMCwwLDAnO1xuXG4gIC8vIElFXG4gIHRyeSB7XG4gICAgdmVyc2lvbiA9IG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgnU2hvY2t3YXZlRmxhc2guU2hvY2t3YXZlRmxhc2gnKS5HZXRWYXJpYWJsZSgnJHZlcnNpb24nKS5yZXBsYWNlKC9cXEQrL2csICcsJykubWF0Y2goL14sPyguKyksPyQvKVsxXTtcblxuICAvLyBvdGhlciBicm93c2Vyc1xuICB9IGNhdGNoKGUpIHtcbiAgICB0cnkge1xuICAgICAgaWYgKG5hdmlnYXRvci5taW1lVHlwZXNbJ2FwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoJ10uZW5hYmxlZFBsdWdpbil7XG4gICAgICAgIHZlcnNpb24gPSAobmF2aWdhdG9yLnBsdWdpbnNbJ1Nob2Nrd2F2ZSBGbGFzaCAyLjAnXSB8fCBuYXZpZ2F0b3IucGx1Z2luc1snU2hvY2t3YXZlIEZsYXNoJ10pLmRlc2NyaXB0aW9uLnJlcGxhY2UoL1xcRCsvZywgJywnKS5tYXRjaCgvXiw/KC4rKSw/JC8pWzFdO1xuICAgICAgfVxuICAgIH0gY2F0Y2goZXJyKSB7fVxuICB9XG4gIHJldHVybiB2ZXJzaW9uLnNwbGl0KCcsJyk7XG59O1xuXG4vLyBGbGFzaCBlbWJlZGRpbmcgbWV0aG9kLiBPbmx5IHVzZWQgaW4gbm9uLWlmcmFtZSBtb2RlXG52anMuRmxhc2guZW1iZWQgPSBmdW5jdGlvbihzd2YsIHBsYWNlSG9sZGVyLCBmbGFzaFZhcnMsIHBhcmFtcywgYXR0cmlidXRlcyl7XG4gIHZhciBjb2RlID0gdmpzLkZsYXNoLmdldEVtYmVkQ29kZShzd2YsIGZsYXNoVmFycywgcGFyYW1zLCBhdHRyaWJ1dGVzKSxcblxuICAgICAgLy8gR2V0IGVsZW1lbnQgYnkgZW1iZWRkaW5nIGNvZGUgYW5kIHJldHJpZXZpbmcgY3JlYXRlZCBlbGVtZW50XG4gICAgICBvYmogPSB2anMuY3JlYXRlRWwoJ2RpdicsIHsgaW5uZXJIVE1MOiBjb2RlIH0pLmNoaWxkTm9kZXNbMF0sXG5cbiAgICAgIHBhciA9IHBsYWNlSG9sZGVyLnBhcmVudE5vZGVcbiAgO1xuXG4gIHBsYWNlSG9sZGVyLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG9iaiwgcGxhY2VIb2xkZXIpO1xuXG4gIC8vIElFNiBzZWVtcyB0byBoYXZlIGFuIGlzc3VlIHdoZXJlIGl0IHdvbid0IGluaXRpYWxpemUgdGhlIHN3ZiBvYmplY3QgYWZ0ZXIgaW5qZWN0aW5nIGl0LlxuICAvLyBUaGlzIGlzIGEgZHVtYiBmaXhcbiAgdmFyIG5ld09iaiA9IHBhci5jaGlsZE5vZGVzWzBdO1xuICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgbmV3T2JqLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICB9LCAxMDAwKTtcblxuICByZXR1cm4gb2JqO1xuXG59O1xuXG52anMuRmxhc2guZ2V0RW1iZWRDb2RlID0gZnVuY3Rpb24oc3dmLCBmbGFzaFZhcnMsIHBhcmFtcywgYXR0cmlidXRlcyl7XG5cbiAgdmFyIG9ialRhZyA9ICc8b2JqZWN0IHR5cGU9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiJyxcbiAgICAgIGZsYXNoVmFyc1N0cmluZyA9ICcnLFxuICAgICAgcGFyYW1zU3RyaW5nID0gJycsXG4gICAgICBhdHRyc1N0cmluZyA9ICcnO1xuXG4gIC8vIENvbnZlcnQgZmxhc2ggdmFycyB0byBzdHJpbmdcbiAgaWYgKGZsYXNoVmFycykge1xuICAgIHZqcy5vYmouZWFjaChmbGFzaFZhcnMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICAgIGZsYXNoVmFyc1N0cmluZyArPSAoa2V5ICsgJz0nICsgdmFsICsgJyZhbXA7Jyk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBBZGQgc3dmLCBmbGFzaFZhcnMsIGFuZCBvdGhlciBkZWZhdWx0IHBhcmFtc1xuICBwYXJhbXMgPSB2anMub2JqLm1lcmdlKHtcbiAgICAnbW92aWUnOiBzd2YsXG4gICAgJ2ZsYXNodmFycyc6IGZsYXNoVmFyc1N0cmluZyxcbiAgICAnYWxsb3dTY3JpcHRBY2Nlc3MnOiAnYWx3YXlzJywgLy8gUmVxdWlyZWQgdG8gdGFsayB0byBzd2ZcbiAgICAnYWxsb3dOZXR3b3JraW5nJzogJ2FsbCcgLy8gQWxsIHNob3VsZCBiZSBkZWZhdWx0LCBidXQgaGF2aW5nIHNlY3VyaXR5IGlzc3Vlcy5cbiAgfSwgcGFyYW1zKTtcblxuICAvLyBDcmVhdGUgcGFyYW0gdGFncyBzdHJpbmdcbiAgdmpzLm9iai5lYWNoKHBhcmFtcywgZnVuY3Rpb24oa2V5LCB2YWwpe1xuICAgIHBhcmFtc1N0cmluZyArPSAnPHBhcmFtIG5hbWU9XCInK2tleSsnXCIgdmFsdWU9XCInK3ZhbCsnXCIgLz4nO1xuICB9KTtcblxuICBhdHRyaWJ1dGVzID0gdmpzLm9iai5tZXJnZSh7XG4gICAgLy8gQWRkIHN3ZiB0byBhdHRyaWJ1dGVzIChuZWVkIGJvdGggZm9yIElFIGFuZCBPdGhlcnMgdG8gd29yaylcbiAgICAnZGF0YSc6IHN3ZixcblxuICAgIC8vIERlZmF1bHQgdG8gMTAwJSB3aWR0aC9oZWlnaHRcbiAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgJ2hlaWdodCc6ICcxMDAlJ1xuXG4gIH0sIGF0dHJpYnV0ZXMpO1xuXG4gIC8vIENyZWF0ZSBBdHRyaWJ1dGVzIHN0cmluZ1xuICB2anMub2JqLmVhY2goYXR0cmlidXRlcywgZnVuY3Rpb24oa2V5LCB2YWwpe1xuICAgIGF0dHJzU3RyaW5nICs9IChrZXkgKyAnPVwiJyArIHZhbCArICdcIiAnKTtcbiAgfSk7XG5cbiAgcmV0dXJuIG9ialRhZyArIGF0dHJzU3RyaW5nICsgJz4nICsgcGFyYW1zU3RyaW5nICsgJzwvb2JqZWN0Pic7XG59O1xuXG52anMuRmxhc2guc3RyZWFtRnJvbVBhcnRzID0gZnVuY3Rpb24oY29ubmVjdGlvbiwgc3RyZWFtKSB7XG4gIHJldHVybiBjb25uZWN0aW9uICsgJyYnICsgc3RyZWFtO1xufTtcblxudmpzLkZsYXNoLnN0cmVhbVRvUGFydHMgPSBmdW5jdGlvbihzcmMpIHtcbiAgdmFyIHBhcnRzID0ge1xuICAgIGNvbm5lY3Rpb246ICcnLFxuICAgIHN0cmVhbTogJydcbiAgfTtcblxuICBpZiAoISBzcmMpIHtcbiAgICByZXR1cm4gcGFydHM7XG4gIH1cblxuICAvLyBMb29rIGZvciB0aGUgbm9ybWFsIFVSTCBzZXBhcmF0b3Igd2UgZXhwZWN0LCAnJicuXG4gIC8vIElmIGZvdW5kLCB3ZSBzcGxpdCB0aGUgVVJMIGludG8gdHdvIHBpZWNlcyBhcm91bmQgdGhlXG4gIC8vIGZpcnN0ICcmJy5cbiAgdmFyIGNvbm5FbmQgPSBzcmMuaW5kZXhPZignJicpO1xuICB2YXIgc3RyZWFtQmVnaW47XG4gIGlmIChjb25uRW5kICE9PSAtMSkge1xuICAgIHN0cmVhbUJlZ2luID0gY29ubkVuZCArIDE7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy8gSWYgdGhlcmUncyBub3QgYSAnJicsIHdlIHVzZSB0aGUgbGFzdCAnLycgYXMgdGhlIGRlbGltaXRlci5cbiAgICBjb25uRW5kID0gc3RyZWFtQmVnaW4gPSBzcmMubGFzdEluZGV4T2YoJy8nKSArIDE7XG4gICAgaWYgKGNvbm5FbmQgPT09IDApIHtcbiAgICAgIC8vIHJlYWxseSwgdGhlcmUncyBub3QgYSAnLyc/XG4gICAgICBjb25uRW5kID0gc3RyZWFtQmVnaW4gPSBzcmMubGVuZ3RoO1xuICAgIH1cbiAgfVxuICBwYXJ0cy5jb25uZWN0aW9uID0gc3JjLnN1YnN0cmluZygwLCBjb25uRW5kKTtcbiAgcGFydHMuc3RyZWFtID0gc3JjLnN1YnN0cmluZyhzdHJlYW1CZWdpbiwgc3JjLmxlbmd0aCk7XG5cbiAgcmV0dXJuIHBhcnRzO1xufTtcblxudmpzLkZsYXNoLmlzU3RyZWFtaW5nVHlwZSA9IGZ1bmN0aW9uKHNyY1R5cGUpIHtcbiAgcmV0dXJuIHNyY1R5cGUgaW4gdmpzLkZsYXNoLnN0cmVhbWluZ0Zvcm1hdHM7XG59O1xuXG4vLyBSVE1QIGhhcyBmb3VyIHZhcmlhdGlvbnMsIGFueSBzdHJpbmcgc3RhcnRpbmdcbi8vIHdpdGggb25lIG9mIHRoZXNlIHByb3RvY29scyBzaG91bGQgYmUgdmFsaWRcbnZqcy5GbGFzaC5SVE1QX1JFID0gL15ydG1wW3NldF0/OlxcL1xcLy9pO1xuXG52anMuRmxhc2guaXNTdHJlYW1pbmdTcmMgPSBmdW5jdGlvbihzcmMpIHtcbiAgcmV0dXJuIHZqcy5GbGFzaC5SVE1QX1JFLnRlc3Qoc3JjKTtcbn07XG4vKipcbiAqIFRoZSBNZWRpYSBMb2FkZXIgaXMgdGhlIGNvbXBvbmVudCB0aGF0IGRlY2lkZXMgd2hpY2ggcGxheWJhY2sgdGVjaG5vbG9neSB0byBsb2FkXG4gKiB3aGVuIHRoZSBwbGF5ZXIgaXMgaW5pdGlhbGl6ZWQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5NZWRpYUxvYWRlciA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSk7XG5cbiAgICAvLyBJZiB0aGVyZSBhcmUgbm8gc291cmNlcyB3aGVuIHRoZSBwbGF5ZXIgaXMgaW5pdGlhbGl6ZWQsXG4gICAgLy8gbG9hZCB0aGUgZmlyc3Qgc3VwcG9ydGVkIHBsYXliYWNrIHRlY2hub2xvZ3kuXG4gICAgaWYgKCFwbGF5ZXIub3B0aW9uc19bJ3NvdXJjZXMnXSB8fCBwbGF5ZXIub3B0aW9uc19bJ3NvdXJjZXMnXS5sZW5ndGggPT09IDApIHtcbiAgICAgIGZvciAodmFyIGk9MCxqPXBsYXllci5vcHRpb25zX1sndGVjaE9yZGVyJ107IGk8ai5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdGVjaE5hbWUgPSB2anMuY2FwaXRhbGl6ZShqW2ldKSxcbiAgICAgICAgICAgIHRlY2ggPSB3aW5kb3dbJ3ZpZGVvanMnXVt0ZWNoTmFtZV07XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgdGhpcyB0ZWNobm9sb2d5XG4gICAgICAgIGlmICh0ZWNoICYmIHRlY2guaXNTdXBwb3J0ZWQoKSkge1xuICAgICAgICAgIHBsYXllci5sb2FkVGVjaCh0ZWNoTmFtZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gLy8gTG9vcCB0aHJvdWdoIHBsYXliYWNrIHRlY2hub2xvZ2llcyAoSFRNTDUsIEZsYXNoKSBhbmQgY2hlY2sgZm9yIHN1cHBvcnQuXG4gICAgICAvLyAvLyBUaGVuIGxvYWQgdGhlIGJlc3Qgc291cmNlLlxuICAgICAgLy8gLy8gQSBmZXcgYXNzdW1wdGlvbnMgaGVyZTpcbiAgICAgIC8vIC8vICAgQWxsIHBsYXliYWNrIHRlY2hub2xvZ2llcyByZXNwZWN0IHByZWxvYWQgZmFsc2UuXG4gICAgICBwbGF5ZXIuc3JjKHBsYXllci5vcHRpb25zX1snc291cmNlcyddKTtcbiAgICB9XG4gIH1cbn0pO1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFRleHQgVHJhY2tzXG4gKiBUZXh0IHRyYWNrcyBhcmUgdHJhY2tzIG9mIHRpbWVkIHRleHQgZXZlbnRzLlxuICogQ2FwdGlvbnMgLSB0ZXh0IGRpc3BsYXllZCBvdmVyIHRoZSB2aWRlbyBmb3IgdGhlIGhlYXJpbmcgaW1wYXJlZFxuICogU3VidGl0bGVzIC0gdGV4dCBkaXNwbGF5ZWQgb3ZlciB0aGUgdmlkZW8gZm9yIHRob3NlIHdobyBkb24ndCB1bmRlcnN0YW5kIGxhbmdhdWdlIGluIHRoZSB2aWRlb1xuICogQ2hhcHRlcnMgLSB0ZXh0IGRpc3BsYXllZCBpbiBhIG1lbnUgYWxsb3dpbmcgdGhlIHVzZXIgdG8ganVtcCB0byBwYXJ0aWN1bGFyIHBvaW50cyAoY2hhcHRlcnMpIGluIHRoZSB2aWRlb1xuICogRGVzY3JpcHRpb25zIChub3Qgc3VwcG9ydGVkIHlldCkgLSBhdWRpbyBkZXNjcmlwdGlvbnMgdGhhdCBhcmUgcmVhZCBiYWNrIHRvIHRoZSB1c2VyIGJ5IGEgc2NyZWVuIHJlYWRpbmcgZGV2aWNlXG4gKi9cblxuLy8gUGxheWVyIEFkZGl0aW9ucyAtIEZ1bmN0aW9ucyBhZGQgdG8gdGhlIHBsYXllciBvYmplY3QgZm9yIGVhc2llciBhY2Nlc3MgdG8gdHJhY2tzXG5cbi8qKlxuICogTGlzdCBvZiBhc3NvY2lhdGVkIHRleHQgdHJhY2tzXG4gKiBAdHlwZSB7QXJyYXl9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS50ZXh0VHJhY2tzXztcblxuLyoqXG4gKiBHZXQgYW4gYXJyYXkgb2YgYXNzb2NpYXRlZCB0ZXh0IHRyYWNrcy4gY2FwdGlvbnMsIHN1YnRpdGxlcywgY2hhcHRlcnMsIGRlc2NyaXB0aW9uc1xuICogaHR0cDovL3d3dy53My5vcmcvaHRtbC93Zy9kcmFmdHMvaHRtbC9tYXN0ZXIvZW1iZWRkZWQtY29udGVudC0wLmh0bWwjZG9tLW1lZGlhLXRleHR0cmFja3NcbiAqIEByZXR1cm4ge0FycmF5fSAgICAgICAgICAgQXJyYXkgb2YgdHJhY2sgb2JqZWN0c1xuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUudGV4dFRyYWNrcyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMudGV4dFRyYWNrc18gPSB0aGlzLnRleHRUcmFja3NfIHx8IFtdO1xuICByZXR1cm4gdGhpcy50ZXh0VHJhY2tzXztcbn07XG5cbi8qKlxuICogQWRkIGEgdGV4dCB0cmFja1xuICogSW4gYWRkaXRpb24gdG8gdGhlIFczQyBzZXR0aW5ncyB3ZSBhbGxvdyBhZGRpbmcgYWRkaXRpb25hbCBpbmZvIHRocm91Z2ggb3B0aW9ucy5cbiAqIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS1hZGR0ZXh0dHJhY2tcbiAqIEBwYXJhbSB7U3RyaW5nfSAga2luZCAgICAgICAgQ2FwdGlvbnMsIHN1YnRpdGxlcywgY2hhcHRlcnMsIGRlc2NyaXB0aW9ucywgb3IgbWV0YWRhdGFcbiAqIEBwYXJhbSB7U3RyaW5nPX0gbGFiZWwgICAgICAgT3B0aW9uYWwgbGFiZWxcbiAqIEBwYXJhbSB7U3RyaW5nPX0gbGFuZ3VhZ2UgICAgT3B0aW9uYWwgbGFuZ3VhZ2VcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyAgICAgQWRkaXRpb25hbCB0cmFjayBvcHRpb25zLCBsaWtlIHNyY1xuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuYWRkVGV4dFRyYWNrID0gZnVuY3Rpb24oa2luZCwgbGFiZWwsIGxhbmd1YWdlLCBvcHRpb25zKXtcbiAgdmFyIHRyYWNrcyA9IHRoaXMudGV4dFRyYWNrc18gPSB0aGlzLnRleHRUcmFja3NfIHx8IFtdO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBvcHRpb25zWydraW5kJ10gPSBraW5kO1xuICBvcHRpb25zWydsYWJlbCddID0gbGFiZWw7XG4gIG9wdGlvbnNbJ2xhbmd1YWdlJ10gPSBsYW5ndWFnZTtcblxuICAvLyBIVE1MNSBTcGVjIHNheXMgZGVmYXVsdCB0byBzdWJ0aXRsZXMuXG4gIC8vIFVwcGVyY2FzZSBmaXJzdCBsZXR0ZXIgdG8gbWF0Y2ggY2xhc3MgbmFtZXNcbiAgdmFyIEtpbmQgPSB2anMuY2FwaXRhbGl6ZShraW5kIHx8ICdzdWJ0aXRsZXMnKTtcblxuICAvLyBDcmVhdGUgY29ycmVjdCB0ZXh0dHJhY2sgY2xhc3MuIENhcHRpb25zVHJhY2ssIGV0Yy5cbiAgdmFyIHRyYWNrID0gbmV3IHdpbmRvd1sndmlkZW9qcyddW0tpbmQgKyAnVHJhY2snXSh0aGlzLCBvcHRpb25zKTtcblxuICB0cmFja3MucHVzaCh0cmFjayk7XG5cbiAgLy8gSWYgdHJhY2suZGZsdCgpIGlzIHNldCwgc3RhcnQgc2hvd2luZyBpbW1lZGlhdGVseVxuICAvLyBUT0RPOiBBZGQgYSBwcm9jZXNzIHRvIGRldGVyaW1lIHRoZSBiZXN0IHRyYWNrIHRvIHNob3cgZm9yIHRoZSBzcGVjaWZpYyBraW5kXG4gIC8vIEluY2FzZSB0aGVyZSBhcmUgbXVsaXRwbGUgZGVmYXVsdGVkIHRyYWNrcyBvZiB0aGUgc2FtZSBraW5kXG4gIC8vIE9yIHRoZSB1c2VyIGhhcyBhIHNldCBwcmVmZXJlbmNlIG9mIGEgc3BlY2lmaWMgbGFuZ3VhZ2UgdGhhdCBzaG91bGQgb3ZlcnJpZGUgdGhlIGRlZmF1bHRcbiAgLy8gTm90ZTogVGhlIHNldFRpbWVvdXQgaXMgYSB3b3JrYXJvdW5kIGJlY2F1c2Ugd2l0aCB0aGUgaHRtbDUgdGVjaCwgdGhlIHBsYXllciBpcyAncmVhZHknXG4gLy8gIGJlZm9yZSBpdCdzIGNoaWxkIGNvbXBvbmVudHMgKGluY2x1ZGluZyB0aGUgdGV4dFRyYWNrRGlzcGxheSkgaGF2ZSBmaW5pc2hlZCBsb2FkaW5nLlxuICBpZiAodHJhY2suZGZsdCgpKSB7XG4gICAgdGhpcy5yZWFkeShmdW5jdGlvbigpe1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICB0cmFjay5wbGF5ZXIoKS5zaG93VGV4dFRyYWNrKHRyYWNrLmlkKCkpO1xuICAgICAgfSwgMCk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gdHJhY2s7XG59O1xuXG4vKipcbiAqIEFkZCBhbiBhcnJheSBvZiB0ZXh0IHRyYWNrcy4gY2FwdGlvbnMsIHN1YnRpdGxlcywgY2hhcHRlcnMsIGRlc2NyaXB0aW9uc1xuICogVHJhY2sgb2JqZWN0cyB3aWxsIGJlIHN0b3JlZCBpbiB0aGUgcGxheWVyLnRleHRUcmFja3MoKSBhcnJheVxuICogQHBhcmFtIHtBcnJheX0gdHJhY2tMaXN0IEFycmF5IG9mIHRyYWNrIGVsZW1lbnRzIG9yIG9iamVjdHMgKGZha2UgdHJhY2sgZWxlbWVudHMpXG4gKiBAcHJpdmF0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5hZGRUZXh0VHJhY2tzID0gZnVuY3Rpb24odHJhY2tMaXN0KXtcbiAgdmFyIHRyYWNrT2JqO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhY2tMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdHJhY2tPYmogPSB0cmFja0xpc3RbaV07XG4gICAgdGhpcy5hZGRUZXh0VHJhY2sodHJhY2tPYmpbJ2tpbmQnXSwgdHJhY2tPYmpbJ2xhYmVsJ10sIHRyYWNrT2JqWydsYW5ndWFnZSddLCB0cmFja09iaik7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIFNob3cgYSB0ZXh0IHRyYWNrXG4vLyBkaXNhYmxlU2FtZUtpbmQ6IGRpc2FibGUgYWxsIG90aGVyIHRyYWNrcyBvZiB0aGUgc2FtZSBraW5kLiBWYWx1ZSBzaG91bGQgYmUgYSB0cmFjayBraW5kIChjYXB0aW9ucywgZXRjLilcbnZqcy5QbGF5ZXIucHJvdG90eXBlLnNob3dUZXh0VHJhY2sgPSBmdW5jdGlvbihpZCwgZGlzYWJsZVNhbWVLaW5kKXtcbiAgdmFyIHRyYWNrcyA9IHRoaXMudGV4dFRyYWNrc18sXG4gICAgICBpID0gMCxcbiAgICAgIGogPSB0cmFja3MubGVuZ3RoLFxuICAgICAgdHJhY2ssIHNob3dUcmFjaywga2luZDtcblxuICAvLyBGaW5kIFRyYWNrIHdpdGggc2FtZSBJRFxuICBmb3IgKDtpPGo7aSsrKSB7XG4gICAgdHJhY2sgPSB0cmFja3NbaV07XG4gICAgaWYgKHRyYWNrLmlkKCkgPT09IGlkKSB7XG4gICAgICB0cmFjay5zaG93KCk7XG4gICAgICBzaG93VHJhY2sgPSB0cmFjaztcblxuICAgIC8vIERpc2FibGUgdHJhY2tzIG9mIHRoZSBzYW1lIGtpbmRcbiAgICB9IGVsc2UgaWYgKGRpc2FibGVTYW1lS2luZCAmJiB0cmFjay5raW5kKCkgPT0gZGlzYWJsZVNhbWVLaW5kICYmIHRyYWNrLm1vZGUoKSA+IDApIHtcbiAgICAgIHRyYWNrLmRpc2FibGUoKTtcbiAgICB9XG4gIH1cblxuICAvLyBHZXQgdHJhY2sga2luZCBmcm9tIHNob3duIHRyYWNrIG9yIGRpc2FibGVTYW1lS2luZFxuICBraW5kID0gKHNob3dUcmFjaykgPyBzaG93VHJhY2sua2luZCgpIDogKChkaXNhYmxlU2FtZUtpbmQpID8gZGlzYWJsZVNhbWVLaW5kIDogZmFsc2UpO1xuXG4gIC8vIFRyaWdnZXIgdHJhY2tjaGFuZ2UgZXZlbnQsIGNhcHRpb25zdHJhY2tjaGFuZ2UsIHN1YnRpdGxlc3RyYWNrY2hhbmdlLCBldGMuXG4gIGlmIChraW5kKSB7XG4gICAgdGhpcy50cmlnZ2VyKGtpbmQrJ3RyYWNrY2hhbmdlJyk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCB0ZXh0IHRyYWNrc1xuICpcbiAqIEhhbmRsZXMgdGhlIHBhcnNpbmcsIGhpZGluZywgYW5kIHNob3dpbmcgb2YgdGV4dCB0cmFjayBjdWVzXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVGV4dFRyYWNrID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICAvLyBBcHBseSB0cmFjayBpbmZvIHRvIHRyYWNrIG9iamVjdFxuICAgIC8vIE9wdGlvbnMgd2lsbCBvZnRlbiBiZSBhIHRyYWNrIGVsZW1lbnRcblxuICAgIC8vIEJ1aWxkIElEIGlmIG9uZSBkb2Vzbid0IGV4aXN0XG4gICAgdGhpcy5pZF8gPSBvcHRpb25zWydpZCddIHx8ICgndmpzXycgKyBvcHRpb25zWydraW5kJ10gKyAnXycgKyBvcHRpb25zWydsYW5ndWFnZSddICsgJ18nICsgdmpzLmd1aWQrKyk7XG4gICAgdGhpcy5zcmNfID0gb3B0aW9uc1snc3JjJ107XG4gICAgLy8gJ2RlZmF1bHQnIGlzIGEgcmVzZXJ2ZWQga2V5d29yZCBpbiBqcyBzbyB3ZSB1c2UgYW4gYWJicmV2aWF0ZWQgdmVyc2lvblxuICAgIHRoaXMuZGZsdF8gPSBvcHRpb25zWydkZWZhdWx0J10gfHwgb3B0aW9uc1snZGZsdCddO1xuICAgIHRoaXMudGl0bGVfID0gb3B0aW9uc1sndGl0bGUnXTtcbiAgICB0aGlzLmxhbmd1YWdlXyA9IG9wdGlvbnNbJ3NyY2xhbmcnXTtcbiAgICB0aGlzLmxhYmVsXyA9IG9wdGlvbnNbJ2xhYmVsJ107XG4gICAgdGhpcy5jdWVzXyA9IFtdO1xuICAgIHRoaXMuYWN0aXZlQ3Vlc18gPSBbXTtcbiAgICB0aGlzLnJlYWR5U3RhdGVfID0gMDtcbiAgICB0aGlzLm1vZGVfID0gMDtcblxuICAgIHRoaXMucGxheWVyXy5vbignZnVsbHNjcmVlbmNoYW5nZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMuYWRqdXN0Rm9udFNpemUpKTtcbiAgfVxufSk7XG5cbi8qKlxuICogVHJhY2sga2luZCB2YWx1ZS4gQ2FwdGlvbnMsIHN1YnRpdGxlcywgZXRjLlxuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUua2luZF87XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayBraW5kIHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmtpbmQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5raW5kXztcbn07XG5cbi8qKlxuICogVHJhY2sgc3JjIHZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5zcmNfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgc3JjIHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLnNyYyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLnNyY187XG59O1xuXG4vKipcbiAqIFRyYWNrIGRlZmF1bHQgdmFsdWVcbiAqIElmIGRlZmF1bHQgaXMgdXNlZCwgc3VidGl0bGVzL2NhcHRpb25zIHRvIHN0YXJ0IHNob3dpbmdcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmRmbHRfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgZGVmYXVsdCB2YWx1ZS4gKCdkZWZhdWx0JyBpcyBhIHJlc2VydmVkIGtleXdvcmQpXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5kZmx0ID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuZGZsdF87XG59O1xuXG4vKipcbiAqIFRyYWNrIHRpdGxlIHZhbHVlXG4gKiBAcHJpdmF0ZVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS50aXRsZV87XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayB0aXRsZSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS50aXRsZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLnRpdGxlXztcbn07XG5cbi8qKlxuICogTGFuZ3VhZ2UgLSB0d28gbGV0dGVyIHN0cmluZyB0byByZXByZXNlbnQgdHJhY2sgbGFuZ3VhZ2UsIGUuZy4gJ2VuJyBmb3IgRW5nbGlzaFxuICogU3BlYyBkZWY6IHJlYWRvbmx5IGF0dHJpYnV0ZSBET01TdHJpbmcgbGFuZ3VhZ2U7XG4gKiBAcHJpdmF0ZVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5sYW5ndWFnZV87XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayBsYW5ndWFnZSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5sYW5ndWFnZSA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmxhbmd1YWdlXztcbn07XG5cbi8qKlxuICogVHJhY2sgbGFiZWwgZS5nLiAnRW5nbGlzaCdcbiAqIFNwZWMgZGVmOiByZWFkb25seSBhdHRyaWJ1dGUgRE9NU3RyaW5nIGxhYmVsO1xuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUubGFiZWxfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgbGFiZWwgdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUubGFiZWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5sYWJlbF87XG59O1xuXG4vKipcbiAqIEFsbCBjdWVzIG9mIHRoZSB0cmFjay4gQ3VlcyBoYXZlIGEgc3RhcnRUaW1lLCBlbmRUaW1lLCB0ZXh0LCBhbmQgb3RoZXIgcHJvcGVydGllcy5cbiAqIFNwZWMgZGVmOiByZWFkb25seSBhdHRyaWJ1dGUgVGV4dFRyYWNrQ3VlTGlzdCBjdWVzO1xuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuY3Vlc187XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayBjdWVzXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuY3VlcyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmN1ZXNfO1xufTtcblxuLyoqXG4gKiBBY3RpdmVDdWVzIGlzIGFsbCBjdWVzIHRoYXQgYXJlIGN1cnJlbnRseSBzaG93aW5nXG4gKiBTcGVjIGRlZjogcmVhZG9ubHkgYXR0cmlidXRlIFRleHRUcmFja0N1ZUxpc3QgYWN0aXZlQ3VlcztcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmFjdGl2ZUN1ZXNfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgYWN0aXZlIGN1ZXNcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5hY3RpdmVDdWVzID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuYWN0aXZlQ3Vlc187XG59O1xuXG4vKipcbiAqIFJlYWR5U3RhdGUgZGVzY3JpYmVzIGlmIHRoZSB0ZXh0IGZpbGUgaGFzIGJlZW4gbG9hZGVkXG4gKiBjb25zdCB1bnNpZ25lZCBzaG9ydCBOT05FID0gMDtcbiAqIGNvbnN0IHVuc2lnbmVkIHNob3J0IExPQURJTkcgPSAxO1xuICogY29uc3QgdW5zaWduZWQgc2hvcnQgTE9BREVEID0gMjtcbiAqIGNvbnN0IHVuc2lnbmVkIHNob3J0IEVSUk9SID0gMztcbiAqIHJlYWRvbmx5IGF0dHJpYnV0ZSB1bnNpZ25lZCBzaG9ydCByZWFkeVN0YXRlO1xuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUucmVhZHlTdGF0ZV87XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayByZWFkeVN0YXRlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLnJlYWR5U3RhdGUgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5yZWFkeVN0YXRlXztcbn07XG5cbi8qKlxuICogTW9kZSBkZXNjcmliZXMgaWYgdGhlIHRyYWNrIGlzIHNob3dpbmcsIGhpZGRlbiwgb3IgZGlzYWJsZWRcbiAqIGNvbnN0IHVuc2lnbmVkIHNob3J0IE9GRiA9IDA7XG4gKiBjb25zdCB1bnNpZ25lZCBzaG9ydCBISURERU4gPSAxOyAoc3RpbGwgdHJpZ2dlcmluZyBjdWVjaGFuZ2UgZXZlbnRzLCBidXQgbm90IHZpc2libGUpXG4gKiBjb25zdCB1bnNpZ25lZCBzaG9ydCBTSE9XSU5HID0gMjtcbiAqIGF0dHJpYnV0ZSB1bnNpZ25lZCBzaG9ydCBtb2RlO1xuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUubW9kZV87XG5cbi8qKlxuICogR2V0IHRoZSB0cmFjayBtb2RlXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLm1vZGUgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5tb2RlXztcbn07XG5cbi8qKlxuICogQ2hhbmdlIHRoZSBmb250IHNpemUgb2YgdGhlIHRleHQgdHJhY2sgdG8gbWFrZSBpdCBsYXJnZXIgd2hlbiBwbGF5aW5nIGluIGZ1bGxzY3JlZW4gbW9kZVxuICogYW5kIHJlc3RvcmUgaXQgdG8gaXRzIG5vcm1hbCBzaXplIHdoZW4gbm90IGluIGZ1bGxzY3JlZW4gbW9kZS5cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuYWRqdXN0Rm9udFNpemUgPSBmdW5jdGlvbigpe1xuICAgIGlmICh0aGlzLnBsYXllcl8uaXNGdWxsc2NyZWVuKCkpIHtcbiAgICAgICAgLy8gU2NhbGUgdGhlIGZvbnQgYnkgdGhlIHNhbWUgZmFjdG9yIGFzIGluY3JlYXNpbmcgdGhlIHZpZGVvIHdpZHRoIHRvIHRoZSBmdWxsIHNjcmVlbiB3aW5kb3cgd2lkdGguXG4gICAgICAgIC8vIEFkZGl0aW9uYWxseSwgbXVsdGlwbHkgdGhhdCBmYWN0b3IgYnkgMS40LCB3aGljaCBpcyB0aGUgZGVmYXVsdCBmb250IHNpemUgZm9yXG4gICAgICAgIC8vIHRoZSBjYXB0aW9uIHRyYWNrIChmcm9tIHRoZSBDU1MpXG4gICAgICAgIHRoaXMuZWxfLnN0eWxlLmZvbnRTaXplID0gc2NyZWVuLndpZHRoIC8gdGhpcy5wbGF5ZXJfLndpZHRoKCkgKiAxLjQgKiAxMDAgKyAnJSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQ2hhbmdlIHRoZSBmb250IHNpemUgb2YgdGhlIHRleHQgdHJhY2sgYmFjayB0byBpdHMgb3JpZ2luYWwgbm9uLWZ1bGxzY3JlZW4gc2l6ZVxuICAgICAgICB0aGlzLmVsXy5zdHlsZS5mb250U2l6ZSA9ICcnO1xuICAgIH1cbn07XG5cbi8qKlxuICogQ3JlYXRlIGJhc2ljIGRpdiB0byBob2xkIGN1ZSB0ZXh0XG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLScgKyB0aGlzLmtpbmRfICsgJyB2anMtdGV4dC10cmFjaydcbiAgfSk7XG59O1xuXG4vKipcbiAqIFNob3c6IE1vZGUgU2hvd2luZyAoMilcbiAqIEluZGljYXRlcyB0aGF0IHRoZSB0ZXh0IHRyYWNrIGlzIGFjdGl2ZS4gSWYgbm8gYXR0ZW1wdCBoYXMgeWV0IGJlZW4gbWFkZSB0byBvYnRhaW4gdGhlIHRyYWNrJ3MgY3VlcywgdGhlIHVzZXIgYWdlbnQgd2lsbCBwZXJmb3JtIHN1Y2ggYW4gYXR0ZW1wdCBtb21lbnRhcmlseS5cbiAqIFRoZSB1c2VyIGFnZW50IGlzIG1haW50YWluaW5nIGEgbGlzdCBvZiB3aGljaCBjdWVzIGFyZSBhY3RpdmUsIGFuZCBldmVudHMgYXJlIGJlaW5nIGZpcmVkIGFjY29yZGluZ2x5LlxuICogSW4gYWRkaXRpb24sIGZvciB0ZXh0IHRyYWNrcyB3aG9zZSBraW5kIGlzIHN1YnRpdGxlcyBvciBjYXB0aW9ucywgdGhlIGN1ZXMgYXJlIGJlaW5nIGRpc3BsYXllZCBvdmVyIHRoZSB2aWRlbyBhcyBhcHByb3ByaWF0ZTtcbiAqIGZvciB0ZXh0IHRyYWNrcyB3aG9zZSBraW5kIGlzIGRlc2NyaXB0aW9ucywgdGhlIHVzZXIgYWdlbnQgaXMgbWFraW5nIHRoZSBjdWVzIGF2YWlsYWJsZSB0byB0aGUgdXNlciBpbiBhIG5vbi12aXN1YWwgZmFzaGlvbjtcbiAqIGFuZCBmb3IgdGV4dCB0cmFja3Mgd2hvc2Uga2luZCBpcyBjaGFwdGVycywgdGhlIHVzZXIgYWdlbnQgaXMgbWFraW5nIGF2YWlsYWJsZSB0byB0aGUgdXNlciBhIG1lY2hhbmlzbSBieSB3aGljaCB0aGUgdXNlciBjYW4gbmF2aWdhdGUgdG8gYW55IHBvaW50IGluIHRoZSBtZWRpYSByZXNvdXJjZSBieSBzZWxlY3RpbmcgYSBjdWUuXG4gKiBUaGUgc2hvd2luZyBieSBkZWZhdWx0IHN0YXRlIGlzIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGVmYXVsdCBhdHRyaWJ1dGUgb24gdHJhY2sgZWxlbWVudHMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgdGV4dCB0cmFjayB3YXMgZW5hYmxlZCBkdWUgdG8gdGhhdCBhdHRyaWJ1dGUuXG4gKiBUaGlzIGFsbG93cyB0aGUgdXNlciBhZ2VudCB0byBvdmVycmlkZSB0aGUgc3RhdGUgaWYgYSBsYXRlciB0cmFjayBpcyBkaXNjb3ZlcmVkIHRoYXQgaXMgbW9yZSBhcHByb3ByaWF0ZSBwZXIgdGhlIHVzZXIncyBwcmVmZXJlbmNlcy5cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuYWN0aXZhdGUoKTtcblxuICB0aGlzLm1vZGVfID0gMjtcblxuICAvLyBTaG93IGVsZW1lbnQuXG4gIHZqcy5Db21wb25lbnQucHJvdG90eXBlLnNob3cuY2FsbCh0aGlzKTtcbn07XG5cbi8qKlxuICogSGlkZTogTW9kZSBIaWRkZW4gKDEpXG4gKiBJbmRpY2F0ZXMgdGhhdCB0aGUgdGV4dCB0cmFjayBpcyBhY3RpdmUsIGJ1dCB0aGF0IHRoZSB1c2VyIGFnZW50IGlzIG5vdCBhY3RpdmVseSBkaXNwbGF5aW5nIHRoZSBjdWVzLlxuICogSWYgbm8gYXR0ZW1wdCBoYXMgeWV0IGJlZW4gbWFkZSB0byBvYnRhaW4gdGhlIHRyYWNrJ3MgY3VlcywgdGhlIHVzZXIgYWdlbnQgd2lsbCBwZXJmb3JtIHN1Y2ggYW4gYXR0ZW1wdCBtb21lbnRhcmlseS5cbiAqIFRoZSB1c2VyIGFnZW50IGlzIG1haW50YWluaW5nIGEgbGlzdCBvZiB3aGljaCBjdWVzIGFyZSBhY3RpdmUsIGFuZCBldmVudHMgYXJlIGJlaW5nIGZpcmVkIGFjY29yZGluZ2x5LlxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24oKXtcbiAgLy8gV2hlbiBoaWRkZW4sIGN1ZXMgYXJlIHN0aWxsIHRyaWdnZXJlZC4gRGlzYWJsZSB0byBzdG9wIHRyaWdnZXJpbmcuXG4gIHRoaXMuYWN0aXZhdGUoKTtcblxuICB0aGlzLm1vZGVfID0gMTtcblxuICAvLyBIaWRlIGVsZW1lbnQuXG4gIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmhpZGUuY2FsbCh0aGlzKTtcbn07XG5cbi8qKlxuICogRGlzYWJsZTogTW9kZSBPZmYvRGlzYWJsZSAoMClcbiAqIEluZGljYXRlcyB0aGF0IHRoZSB0ZXh0IHRyYWNrIGlzIG5vdCBhY3RpdmUuIE90aGVyIHRoYW4gZm9yIHRoZSBwdXJwb3NlcyBvZiBleHBvc2luZyB0aGUgdHJhY2sgaW4gdGhlIERPTSwgdGhlIHVzZXIgYWdlbnQgaXMgaWdub3JpbmcgdGhlIHRleHQgdHJhY2suXG4gKiBObyBjdWVzIGFyZSBhY3RpdmUsIG5vIGV2ZW50cyBhcmUgZmlyZWQsIGFuZCB0aGUgdXNlciBhZ2VudCB3aWxsIG5vdCBhdHRlbXB0IHRvIG9idGFpbiB0aGUgdHJhY2sncyBjdWVzLlxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24oKXtcbiAgLy8gSWYgc2hvd2luZywgaGlkZS5cbiAgaWYgKHRoaXMubW9kZV8gPT0gMikgeyB0aGlzLmhpZGUoKTsgfVxuXG4gIC8vIFN0b3AgdHJpZ2dlcmluZyBjdWVzXG4gIHRoaXMuZGVhY3RpdmF0ZSgpO1xuXG4gIC8vIFN3aXRjaCBNb2RlIHRvIE9mZlxuICB0aGlzLm1vZGVfID0gMDtcbn07XG5cbi8qKlxuICogVHVybiBvbiBjdWUgdHJhY2tpbmcuIFRyYWNrcyB0aGF0IGFyZSBzaG93aW5nIE9SIGhpZGRlbiBhcmUgYWN0aXZlLlxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uKCl7XG4gIC8vIExvYWQgdGV4dCBmaWxlIGlmIGl0IGhhc24ndCBiZWVuIHlldC5cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZV8gPT09IDApIHsgdGhpcy5sb2FkKCk7IH1cblxuICAvLyBPbmx5IGFjdGl2YXRlIGlmIG5vdCBhbHJlYWR5IGFjdGl2ZS5cbiAgaWYgKHRoaXMubW9kZV8gPT09IDApIHtcbiAgICAvLyBVcGRhdGUgY3VycmVudCBjdWUgb24gdGltZXVwZGF0ZVxuICAgIC8vIFVzaW5nIHVuaXF1ZSBJRCBmb3IgYmluZCBmdW5jdGlvbiBzbyBvdGhlciB0cmFja3MgZG9uJ3QgcmVtb3ZlIGxpc3RlbmVyXG4gICAgdGhpcy5wbGF5ZXJfLm9uKCd0aW1ldXBkYXRlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUsIHRoaXMuaWRfKSk7XG5cbiAgICAvLyBSZXNldCBjdWUgdGltZSBvbiBtZWRpYSBlbmRcbiAgICB0aGlzLnBsYXllcl8ub24oJ2VuZGVkJywgdmpzLmJpbmQodGhpcywgdGhpcy5yZXNldCwgdGhpcy5pZF8pKTtcblxuICAgIC8vIEFkZCB0byBkaXNwbGF5XG4gICAgaWYgKHRoaXMua2luZF8gPT09ICdjYXB0aW9ucycgfHwgdGhpcy5raW5kXyA9PT0gJ3N1YnRpdGxlcycpIHtcbiAgICAgIHRoaXMucGxheWVyXy5nZXRDaGlsZCgndGV4dFRyYWNrRGlzcGxheScpLmFkZENoaWxkKHRoaXMpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBUdXJuIG9mZiBjdWUgdHJhY2tpbmcuXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmRlYWN0aXZhdGUgPSBmdW5jdGlvbigpe1xuICAvLyBVc2luZyB1bmlxdWUgSUQgZm9yIGJpbmQgZnVuY3Rpb24gc28gb3RoZXIgdHJhY2tzIGRvbid0IHJlbW92ZSBsaXN0ZW5lclxuICB0aGlzLnBsYXllcl8ub2ZmKCd0aW1ldXBkYXRlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUsIHRoaXMuaWRfKSk7XG4gIHRoaXMucGxheWVyXy5vZmYoJ2VuZGVkJywgdmpzLmJpbmQodGhpcywgdGhpcy5yZXNldCwgdGhpcy5pZF8pKTtcbiAgdGhpcy5yZXNldCgpOyAvLyBSZXNldFxuXG4gIC8vIFJlbW92ZSBmcm9tIGRpc3BsYXlcbiAgdGhpcy5wbGF5ZXJfLmdldENoaWxkKCd0ZXh0VHJhY2tEaXNwbGF5JykucmVtb3ZlQ2hpbGQodGhpcyk7XG59O1xuXG4vLyBBIHJlYWRpbmVzcyBzdGF0ZVxuLy8gT25lIG9mIHRoZSBmb2xsb3dpbmc6XG4vL1xuLy8gTm90IGxvYWRlZFxuLy8gSW5kaWNhdGVzIHRoYXQgdGhlIHRleHQgdHJhY2sgaXMga25vd24gdG8gZXhpc3QgKGUuZy4gaXQgaGFzIGJlZW4gZGVjbGFyZWQgd2l0aCBhIHRyYWNrIGVsZW1lbnQpLCBidXQgaXRzIGN1ZXMgaGF2ZSBub3QgYmVlbiBvYnRhaW5lZC5cbi8vXG4vLyBMb2FkaW5nXG4vLyBJbmRpY2F0ZXMgdGhhdCB0aGUgdGV4dCB0cmFjayBpcyBsb2FkaW5nIGFuZCB0aGVyZSBoYXZlIGJlZW4gbm8gZmF0YWwgZXJyb3JzIGVuY291bnRlcmVkIHNvIGZhci4gRnVydGhlciBjdWVzIG1pZ2h0IHN0aWxsIGJlIGFkZGVkIHRvIHRoZSB0cmFjay5cbi8vXG4vLyBMb2FkZWRcbi8vIEluZGljYXRlcyB0aGF0IHRoZSB0ZXh0IHRyYWNrIGhhcyBiZWVuIGxvYWRlZCB3aXRoIG5vIGZhdGFsIGVycm9ycy4gTm8gbmV3IGN1ZXMgd2lsbCBiZSBhZGRlZCB0byB0aGUgdHJhY2sgZXhjZXB0IGlmIHRoZSB0ZXh0IHRyYWNrIGNvcnJlc3BvbmRzIHRvIGEgTXV0YWJsZVRleHRUcmFjayBvYmplY3QuXG4vL1xuLy8gRmFpbGVkIHRvIGxvYWRcbi8vIEluZGljYXRlcyB0aGF0IHRoZSB0ZXh0IHRyYWNrIHdhcyBlbmFibGVkLCBidXQgd2hlbiB0aGUgdXNlciBhZ2VudCBhdHRlbXB0ZWQgdG8gb2J0YWluIGl0LCB0aGlzIGZhaWxlZCBpbiBzb21lIHdheSAoZS5nLiBVUkwgY291bGQgbm90IGJlIHJlc29sdmVkLCBuZXR3b3JrIGVycm9yLCB1bmtub3duIHRleHQgdHJhY2sgZm9ybWF0KS4gU29tZSBvciBhbGwgb2YgdGhlIGN1ZXMgYXJlIGxpa2VseSBtaXNzaW5nIGFuZCB3aWxsIG5vdCBiZSBvYnRhaW5lZC5cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpe1xuXG4gIC8vIE9ubHkgbG9hZCBpZiBub3QgbG9hZGVkIHlldC5cbiAgaWYgKHRoaXMucmVhZHlTdGF0ZV8gPT09IDApIHtcbiAgICB0aGlzLnJlYWR5U3RhdGVfID0gMTtcbiAgICB2anMuZ2V0KHRoaXMuc3JjXywgdmpzLmJpbmQodGhpcywgdGhpcy5wYXJzZUN1ZXMpLCB2anMuYmluZCh0aGlzLCB0aGlzLm9uRXJyb3IpKTtcbiAgfVxuXG59O1xuXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5vbkVycm9yID0gZnVuY3Rpb24oZXJyKXtcbiAgdGhpcy5lcnJvciA9IGVycjtcbiAgdGhpcy5yZWFkeVN0YXRlXyA9IDM7XG4gIHRoaXMudHJpZ2dlcignZXJyb3InKTtcbn07XG5cbi8vIFBhcnNlIHRoZSBXZWJWVFQgdGV4dCBmb3JtYXQgZm9yIGN1ZSB0aW1lcy5cbi8vIFRPRE86IFNlcGFyYXRlIHBhcnNlciBpbnRvIG93biBjbGFzcyBzbyBhbHRlcm5hdGl2ZSB0aW1lZCB0ZXh0IGZvcm1hdHMgY2FuIGJlIHVzZWQuIChUVE1MLCBERlhQKVxudmpzLlRleHRUcmFjay5wcm90b3R5cGUucGFyc2VDdWVzID0gZnVuY3Rpb24oc3JjQ29udGVudCkge1xuICB2YXIgY3VlLCB0aW1lLCB0ZXh0LFxuICAgICAgbGluZXMgPSBzcmNDb250ZW50LnNwbGl0KCdcXG4nKSxcbiAgICAgIGxpbmUgPSAnJywgaWQ7XG5cbiAgZm9yICh2YXIgaT0xLCBqPWxpbmVzLmxlbmd0aDsgaTxqOyBpKyspIHtcbiAgICAvLyBMaW5lIDAgc2hvdWxkIGJlICdXRUJWVFQnLCBzbyBza2lwcGluZyBpPTBcblxuICAgIGxpbmUgPSB2anMudHJpbShsaW5lc1tpXSk7IC8vIFRyaW0gd2hpdGVzcGFjZSBhbmQgbGluZWJyZWFrc1xuXG4gICAgaWYgKGxpbmUpIHsgLy8gTG9vcCB1bnRpbCBhIGxpbmUgd2l0aCBjb250ZW50XG5cbiAgICAgIC8vIEZpcnN0IGxpbmUgY291bGQgYmUgYW4gb3B0aW9uYWwgY3VlIElEXG4gICAgICAvLyBDaGVjayBpZiBsaW5lIGhhcyB0aGUgdGltZSBzZXBhcmF0b3JcbiAgICAgIGlmIChsaW5lLmluZGV4T2YoJy0tPicpID09IC0xKSB7XG4gICAgICAgIGlkID0gbGluZTtcbiAgICAgICAgLy8gQWR2YW5jZSB0byBuZXh0IGxpbmUgZm9yIHRpbWluZy5cbiAgICAgICAgbGluZSA9IHZqcy50cmltKGxpbmVzWysraV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPSB0aGlzLmN1ZXNfLmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgLy8gRmlyc3QgbGluZSAtIE51bWJlclxuICAgICAgY3VlID0ge1xuICAgICAgICBpZDogaWQsIC8vIEN1ZSBOdW1iZXJcbiAgICAgICAgaW5kZXg6IHRoaXMuY3Vlc18ubGVuZ3RoIC8vIFBvc2l0aW9uIGluIEFycmF5XG4gICAgICB9O1xuXG4gICAgICAvLyBUaW1pbmcgbGluZVxuICAgICAgdGltZSA9IGxpbmUuc3BsaXQoL1tcXHQgXSsvKTtcbiAgICAgIGN1ZS5zdGFydFRpbWUgPSB0aGlzLnBhcnNlQ3VlVGltZSh0aW1lWzBdKTtcbiAgICAgIGN1ZS5lbmRUaW1lID0gdGhpcy5wYXJzZUN1ZVRpbWUodGltZVsyXSk7XG5cbiAgICAgIC8vIEFkZGl0aW9uYWwgbGluZXMgLSBDdWUgVGV4dFxuICAgICAgdGV4dCA9IFtdO1xuXG4gICAgICAvLyBMb29wIHVudGlsIGEgYmxhbmsgbGluZSBvciBlbmQgb2YgbGluZXNcbiAgICAgIC8vIEFzc3VtZWluZyB0cmltKCcnKSByZXR1cm5zIGZhbHNlIGZvciBibGFuayBsaW5lc1xuICAgICAgd2hpbGUgKGxpbmVzWysraV0gJiYgKGxpbmUgPSB2anMudHJpbShsaW5lc1tpXSkpKSB7XG4gICAgICAgIHRleHQucHVzaChsaW5lKTtcbiAgICAgIH1cblxuICAgICAgY3VlLnRleHQgPSB0ZXh0LmpvaW4oJzxici8+Jyk7XG5cbiAgICAgIC8vIEFkZCB0aGlzIGN1ZVxuICAgICAgdGhpcy5jdWVzXy5wdXNoKGN1ZSk7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5yZWFkeVN0YXRlXyA9IDI7XG4gIHRoaXMudHJpZ2dlcignbG9hZGVkJyk7XG59O1xuXG5cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLnBhcnNlQ3VlVGltZSA9IGZ1bmN0aW9uKHRpbWVUZXh0KSB7XG4gIHZhciBwYXJ0cyA9IHRpbWVUZXh0LnNwbGl0KCc6JyksXG4gICAgICB0aW1lID0gMCxcbiAgICAgIGhvdXJzLCBtaW51dGVzLCBvdGhlciwgc2Vjb25kcywgbXM7XG5cbiAgLy8gQ2hlY2sgaWYgb3B0aW9uYWwgaG91cnMgcGxhY2UgaXMgaW5jbHVkZWRcbiAgLy8gMDA6MDA6MDAuMDAwIHZzLiAwMDowMC4wMDBcbiAgaWYgKHBhcnRzLmxlbmd0aCA9PSAzKSB7XG4gICAgaG91cnMgPSBwYXJ0c1swXTtcbiAgICBtaW51dGVzID0gcGFydHNbMV07XG4gICAgb3RoZXIgPSBwYXJ0c1syXTtcbiAgfSBlbHNlIHtcbiAgICBob3VycyA9IDA7XG4gICAgbWludXRlcyA9IHBhcnRzWzBdO1xuICAgIG90aGVyID0gcGFydHNbMV07XG4gIH1cblxuICAvLyBCcmVhayBvdGhlciAoc2Vjb25kcywgbWlsbGlzZWNvbmRzLCBhbmQgZmxhZ3MpIGJ5IHNwYWNlc1xuICAvLyBUT0RPOiBNYWtlIGFkZGl0aW9uYWwgY3VlIGxheW91dCBzZXR0aW5ncyB3b3JrIHdpdGggZmxhZ3NcbiAgb3RoZXIgPSBvdGhlci5zcGxpdCgvXFxzKy8pO1xuICAvLyBSZW1vdmUgc2Vjb25kcy4gU2Vjb25kcyBpcyB0aGUgZmlyc3QgcGFydCBiZWZvcmUgYW55IHNwYWNlcy5cbiAgc2Vjb25kcyA9IG90aGVyLnNwbGljZSgwLDEpWzBdO1xuICAvLyBDb3VsZCB1c2UgZWl0aGVyIC4gb3IgLCBmb3IgZGVjaW1hbFxuICBzZWNvbmRzID0gc2Vjb25kcy5zcGxpdCgvXFwufCwvKTtcbiAgLy8gR2V0IG1pbGxpc2Vjb25kc1xuICBtcyA9IHBhcnNlRmxvYXQoc2Vjb25kc1sxXSk7XG4gIHNlY29uZHMgPSBzZWNvbmRzWzBdO1xuXG4gIC8vIGhvdXJzID0+IHNlY29uZHNcbiAgdGltZSArPSBwYXJzZUZsb2F0KGhvdXJzKSAqIDM2MDA7XG4gIC8vIG1pbnV0ZXMgPT4gc2Vjb25kc1xuICB0aW1lICs9IHBhcnNlRmxvYXQobWludXRlcykgKiA2MDtcbiAgLy8gQWRkIHNlY29uZHNcbiAgdGltZSArPSBwYXJzZUZsb2F0KHNlY29uZHMpO1xuICAvLyBBZGQgbWlsbGlzZWNvbmRzXG4gIGlmIChtcykgeyB0aW1lICs9IG1zLzEwMDA7IH1cblxuICByZXR1cm4gdGltZTtcbn07XG5cbi8vIFVwZGF0ZSBhY3RpdmUgY3VlcyB3aGVuZXZlciB0aW1ldXBkYXRlIGV2ZW50cyBhcmUgdHJpZ2dlcmVkIG9uIHRoZSBwbGF5ZXIuXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5jdWVzXy5sZW5ndGggPiAwKSB7XG5cbiAgICAvLyBHZXQgY3VycmVudCBwbGF5ZXIgdGltZSwgYWRqdXN0IGZvciB0cmFjayBvZmZzZXRcbiAgICB2YXIgb2Zmc2V0ID0gdGhpcy5wbGF5ZXJfLm9wdGlvbnMoKVsndHJhY2tUaW1lT2Zmc2V0J10gfHwgMDtcbiAgICB2YXIgdGltZSA9IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpICsgb2Zmc2V0O1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIG5ldyB0aW1lIGlzIG91dHNpZGUgdGhlIHRpbWUgYm94IGNyZWF0ZWQgYnkgdGhlIHRoZSBsYXN0IHVwZGF0ZS5cbiAgICBpZiAodGhpcy5wcmV2Q2hhbmdlID09PSB1bmRlZmluZWQgfHwgdGltZSA8IHRoaXMucHJldkNoYW5nZSB8fCB0aGlzLm5leHRDaGFuZ2UgPD0gdGltZSkge1xuICAgICAgdmFyIGN1ZXMgPSB0aGlzLmN1ZXNfLFxuXG4gICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHRpbWUgYm94IGZvciB0aGlzIHN0YXRlLlxuICAgICAgICAgIG5ld05leHRDaGFuZ2UgPSB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSwgLy8gU3RhcnQgYXQgYmVnaW5uaW5nIG9mIHRoZSB0aW1lbGluZVxuICAgICAgICAgIG5ld1ByZXZDaGFuZ2UgPSAwLCAvLyBTdGFydCBhdCBlbmRcblxuICAgICAgICAgIHJldmVyc2UgPSBmYWxzZSwgLy8gU2V0IHRoZSBkaXJlY3Rpb24gb2YgdGhlIGxvb3AgdGhyb3VnaCB0aGUgY3Vlcy4gT3B0aW1pemVkIHRoZSBjdWUgY2hlY2suXG4gICAgICAgICAgbmV3Q3VlcyA9IFtdLCAvLyBTdG9yZSBuZXcgYWN0aXZlIGN1ZXMuXG5cbiAgICAgICAgICAvLyBTdG9yZSB3aGVyZSBpbiB0aGUgbG9vcCB0aGUgY3VycmVudCBhY3RpdmUgY3VlcyBhcmUsIHRvIHByb3ZpZGUgYSBzbWFydCBzdGFydGluZyBwb2ludCBmb3IgdGhlIG5leHQgbG9vcC5cbiAgICAgICAgICBmaXJzdEFjdGl2ZUluZGV4LCBsYXN0QWN0aXZlSW5kZXgsXG4gICAgICAgICAgY3VlLCBpOyAvLyBMb29wIHZhcnNcblxuICAgICAgLy8gQ2hlY2sgaWYgdGltZSBpcyBnb2luZyBmb3J3YXJkcyBvciBiYWNrd2FyZHMgKHNjcnViYmluZy9yZXdpbmRpbmcpXG4gICAgICAvLyBJZiB3ZSBrbm93IHRoZSBkaXJlY3Rpb24gd2UgY2FuIG9wdGltaXplIHRoZSBzdGFydGluZyBwb3NpdGlvbiBhbmQgZGlyZWN0aW9uIG9mIHRoZSBsb29wIHRocm91Z2ggdGhlIGN1ZXMgYXJyYXkuXG4gICAgICBpZiAodGltZSA+PSB0aGlzLm5leHRDaGFuZ2UgfHwgdGhpcy5uZXh0Q2hhbmdlID09PSB1bmRlZmluZWQpIHsgLy8gTmV4dENoYW5nZSBzaG91bGQgaGFwcGVuXG4gICAgICAgIC8vIEZvcndhcmRzLCBzbyBzdGFydCBhdCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGFjdGl2ZSBjdWUgYW5kIGxvb3AgZm9yd2FyZFxuICAgICAgICBpID0gKHRoaXMuZmlyc3RBY3RpdmVJbmRleCAhPT0gdW5kZWZpbmVkKSA/IHRoaXMuZmlyc3RBY3RpdmVJbmRleCA6IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCYWNrd2FyZHMsIHNvIHN0YXJ0IGF0IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBhY3RpdmUgY3VlIGFuZCBsb29wIGJhY2t3YXJkXG4gICAgICAgIHJldmVyc2UgPSB0cnVlO1xuICAgICAgICBpID0gKHRoaXMubGFzdEFjdGl2ZUluZGV4ICE9PSB1bmRlZmluZWQpID8gdGhpcy5sYXN0QWN0aXZlSW5kZXggOiBjdWVzLmxlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7IC8vIExvb3AgdW50aWwgYnJva2VuXG4gICAgICAgIGN1ZSA9IGN1ZXNbaV07XG5cbiAgICAgICAgLy8gQ3VlIGVuZGVkIGF0IHRoaXMgcG9pbnRcbiAgICAgICAgaWYgKGN1ZS5lbmRUaW1lIDw9IHRpbWUpIHtcbiAgICAgICAgICBuZXdQcmV2Q2hhbmdlID0gTWF0aC5tYXgobmV3UHJldkNoYW5nZSwgY3VlLmVuZFRpbWUpO1xuXG4gICAgICAgICAgaWYgKGN1ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIGN1ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBlYXJsaWVyIGN1ZXMgc2hvdWxkIGhhdmUgYW4gYWN0aXZlIHN0YXJ0IHRpbWUuXG4gICAgICAgICAgLy8gTmV2ZXJtaW5kLiBBc3N1bWUgZmlyc3QgY3VlIGNvdWxkIGhhdmUgYSBkdXJhdGlvbiB0aGUgc2FtZSBhcyB0aGUgdmlkZW8uXG4gICAgICAgICAgLy8gSW4gdGhhdCBjYXNlIHdlIG5lZWQgdG8gbG9vcCBhbGwgdGhlIHdheSBiYWNrIHRvIHRoZSBiZWdpbm5pbmcuXG4gICAgICAgICAgLy8gaWYgKHJldmVyc2UgJiYgY3VlLnN0YXJ0VGltZSkgeyBicmVhazsgfVxuXG4gICAgICAgIC8vIEN1ZSBoYXNuJ3Qgc3RhcnRlZFxuICAgICAgICB9IGVsc2UgaWYgKHRpbWUgPCBjdWUuc3RhcnRUaW1lKSB7XG4gICAgICAgICAgbmV3TmV4dENoYW5nZSA9IE1hdGgubWluKG5ld05leHRDaGFuZ2UsIGN1ZS5zdGFydFRpbWUpO1xuXG4gICAgICAgICAgaWYgKGN1ZS5hY3RpdmUpIHtcbiAgICAgICAgICAgIGN1ZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBObyBsYXRlciBjdWVzIHNob3VsZCBoYXZlIGFuIGFjdGl2ZSBzdGFydCB0aW1lLlxuICAgICAgICAgIGlmICghcmV2ZXJzZSkgeyBicmVhazsgfVxuXG4gICAgICAgIC8vIEN1ZSBpcyBjdXJyZW50XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgICAgLy8gQWRkIGN1ZSB0byBmcm9udCBvZiBhcnJheSB0byBrZWVwIGluIHRpbWUgb3JkZXJcbiAgICAgICAgICAgIG5ld0N1ZXMuc3BsaWNlKDAsMCxjdWUpO1xuXG4gICAgICAgICAgICAvLyBJZiBpbiByZXZlcnNlLCB0aGUgZmlyc3QgY3VycmVudCBjdWUgaXMgb3VyIGxhc3RBY3RpdmVDdWVcbiAgICAgICAgICAgIGlmIChsYXN0QWN0aXZlSW5kZXggPT09IHVuZGVmaW5lZCkgeyBsYXN0QWN0aXZlSW5kZXggPSBpOyB9XG4gICAgICAgICAgICBmaXJzdEFjdGl2ZUluZGV4ID0gaTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQWRkIGN1ZSB0byBlbmQgb2YgYXJyYXlcbiAgICAgICAgICAgIG5ld0N1ZXMucHVzaChjdWUpO1xuXG4gICAgICAgICAgICAvLyBJZiBmb3J3YXJkLCB0aGUgZmlyc3QgY3VycmVudCBjdWUgaXMgb3VyIGZpcnN0QWN0aXZlSW5kZXhcbiAgICAgICAgICAgIGlmIChmaXJzdEFjdGl2ZUluZGV4ID09PSB1bmRlZmluZWQpIHsgZmlyc3RBY3RpdmVJbmRleCA9IGk7IH1cbiAgICAgICAgICAgIGxhc3RBY3RpdmVJbmRleCA9IGk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbmV3TmV4dENoYW5nZSA9IE1hdGgubWluKG5ld05leHRDaGFuZ2UsIGN1ZS5lbmRUaW1lKTtcbiAgICAgICAgICBuZXdQcmV2Q2hhbmdlID0gTWF0aC5tYXgobmV3UHJldkNoYW5nZSwgY3VlLnN0YXJ0VGltZSk7XG5cbiAgICAgICAgICBjdWUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXZlcnNlKSB7XG4gICAgICAgICAgLy8gUmV2ZXJzZSBkb3duIHRoZSBhcnJheSBvZiBjdWVzLCBicmVhayBpZiBhdCBmaXJzdFxuICAgICAgICAgIGlmIChpID09PSAwKSB7IGJyZWFrOyB9IGVsc2UgeyBpLS07IH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBXYWxrIHVwIHRoZSBhcnJheSBmbyBjdWVzLCBicmVhayBpZiBhdCBsYXN0XG4gICAgICAgICAgaWYgKGkgPT09IGN1ZXMubGVuZ3RoIC0gMSkgeyBicmVhazsgfSBlbHNlIHsgaSsrOyB9XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICB0aGlzLmFjdGl2ZUN1ZXNfID0gbmV3Q3VlcztcbiAgICAgIHRoaXMubmV4dENoYW5nZSA9IG5ld05leHRDaGFuZ2U7XG4gICAgICB0aGlzLnByZXZDaGFuZ2UgPSBuZXdQcmV2Q2hhbmdlO1xuICAgICAgdGhpcy5maXJzdEFjdGl2ZUluZGV4ID0gZmlyc3RBY3RpdmVJbmRleDtcbiAgICAgIHRoaXMubGFzdEFjdGl2ZUluZGV4ID0gbGFzdEFjdGl2ZUluZGV4O1xuXG4gICAgICB0aGlzLnVwZGF0ZURpc3BsYXkoKTtcblxuICAgICAgdGhpcy50cmlnZ2VyKCdjdWVjaGFuZ2UnKTtcbiAgICB9XG4gIH1cbn07XG5cbi8vIEFkZCBjdWUgSFRNTCB0byBkaXNwbGF5XG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS51cGRhdGVEaXNwbGF5ID0gZnVuY3Rpb24oKXtcbiAgdmFyIGN1ZXMgPSB0aGlzLmFjdGl2ZUN1ZXNfLFxuICAgICAgaHRtbCA9ICcnLFxuICAgICAgaT0wLGo9Y3Vlcy5sZW5ndGg7XG5cbiAgZm9yICg7aTxqO2krKykge1xuICAgIGh0bWwgKz0gJzxzcGFuIGNsYXNzPVwidmpzLXR0LWN1ZVwiPicrY3Vlc1tpXS50ZXh0Kyc8L3NwYW4+JztcbiAgfVxuXG4gIHRoaXMuZWxfLmlubmVySFRNTCA9IGh0bWw7XG59O1xuXG4vLyBTZXQgYWxsIGxvb3AgaGVscGVyIHZhbHVlcyBiYWNrXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMubmV4dENoYW5nZSA9IDA7XG4gIHRoaXMucHJldkNoYW5nZSA9IHRoaXMucGxheWVyXy5kdXJhdGlvbigpO1xuICB0aGlzLmZpcnN0QWN0aXZlSW5kZXggPSAwO1xuICB0aGlzLmxhc3RBY3RpdmVJbmRleCA9IDA7XG59O1xuXG4vLyBDcmVhdGUgc3BlY2lmaWMgdHJhY2sgdHlwZXNcbi8qKlxuICogVGhlIHRyYWNrIGNvbXBvbmVudCBmb3IgbWFuYWdpbmcgdGhlIGhpZGluZyBhbmQgc2hvd2luZyBvZiBjYXB0aW9uc1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuQ2FwdGlvbnNUcmFjayA9IHZqcy5UZXh0VHJhY2suZXh0ZW5kKCk7XG52anMuQ2FwdGlvbnNUcmFjay5wcm90b3R5cGUua2luZF8gPSAnY2FwdGlvbnMnO1xuLy8gRXhwb3J0aW5nIGhlcmUgYmVjYXVzZSBUcmFjayBjcmVhdGlvbiByZXF1aXJlcyB0aGUgdHJhY2sga2luZFxuLy8gdG8gYmUgYXZhaWxhYmxlIG9uIGdsb2JhbCBvYmplY3QuIGUuZy4gbmV3IHdpbmRvd1sndmlkZW9qcyddW0tpbmQgKyAnVHJhY2snXVxuXG4vKipcbiAqIFRoZSB0cmFjayBjb21wb25lbnQgZm9yIG1hbmFnaW5nIHRoZSBoaWRpbmcgYW5kIHNob3dpbmcgb2Ygc3VidGl0bGVzXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5TdWJ0aXRsZXNUcmFjayA9IHZqcy5UZXh0VHJhY2suZXh0ZW5kKCk7XG52anMuU3VidGl0bGVzVHJhY2sucHJvdG90eXBlLmtpbmRfID0gJ3N1YnRpdGxlcyc7XG5cbi8qKlxuICogVGhlIHRyYWNrIGNvbXBvbmVudCBmb3IgbWFuYWdpbmcgdGhlIGhpZGluZyBhbmQgc2hvd2luZyBvZiBjaGFwdGVyc1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuQ2hhcHRlcnNUcmFjayA9IHZqcy5UZXh0VHJhY2suZXh0ZW5kKCk7XG52anMuQ2hhcHRlcnNUcmFjay5wcm90b3R5cGUua2luZF8gPSAnY2hhcHRlcnMnO1xuXG5cbi8qIFRleHQgVHJhY2sgRGlzcGxheVxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8vIEdsb2JhbCBjb250YWluZXIgZm9yIGJvdGggc3VidGl0bGUgYW5kIGNhcHRpb25zIHRleHQuIFNpbXBsZSBkaXYgY29udGFpbmVyLlxuXG4vKipcbiAqIFRoZSBjb21wb25lbnQgZm9yIGRpc3BsYXlpbmcgdGV4dCB0cmFjayBjdWVzXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5UZXh0VHJhY2tEaXNwbGF5ID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KTtcblxuICAgIC8vIFRoaXMgdXNlZCB0byBiZSBjYWxsZWQgZHVyaW5nIHBsYXllciBpbml0LCBidXQgd2FzIGNhdXNpbmcgYW4gZXJyb3JcbiAgICAvLyBpZiBhIHRyYWNrIHNob3VsZCBzaG93IGJ5IGRlZmF1bHQgYW5kIHRoZSBkaXNwbGF5IGhhZG4ndCBsb2FkZWQgeWV0LlxuICAgIC8vIFNob3VsZCBwcm9iYWJseSBiZSBtb3ZlZCB0byBhbiBleHRlcm5hbCB0cmFjayBsb2FkZXIgd2hlbiB3ZSBzdXBwb3J0XG4gICAgLy8gdHJhY2tzIHRoYXQgZG9uJ3QgbmVlZCBhIGRpc3BsYXkuXG4gICAgaWYgKHBsYXllci5vcHRpb25zX1sndHJhY2tzJ10gJiYgcGxheWVyLm9wdGlvbnNfWyd0cmFja3MnXS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLnBsYXllcl8uYWRkVGV4dFRyYWNrcyhwbGF5ZXIub3B0aW9uc19bJ3RyYWNrcyddKTtcbiAgICB9XG4gIH1cbn0pO1xuXG52anMuVGV4dFRyYWNrRGlzcGxheS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy10ZXh0LXRyYWNrLWRpc3BsYXknXG4gIH0pO1xufTtcblxuXG4vKipcbiAqIFRoZSBzcGVjaWZpYyBtZW51IGl0ZW0gdHlwZSBmb3Igc2VsZWN0aW5nIGEgbGFuZ3VhZ2Ugd2l0aGluIGEgdGV4dCB0cmFjayBraW5kXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5UZXh0VHJhY2tNZW51SXRlbSA9IHZqcy5NZW51SXRlbS5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmFyIHRyYWNrID0gdGhpcy50cmFjayA9IG9wdGlvbnNbJ3RyYWNrJ107XG5cbiAgICAvLyBNb2RpZnkgb3B0aW9ucyBmb3IgcGFyZW50IE1lbnVJdGVtIGNsYXNzJ3MgaW5pdC5cbiAgICBvcHRpb25zWydsYWJlbCddID0gdHJhY2subGFiZWwoKTtcbiAgICBvcHRpb25zWydzZWxlY3RlZCddID0gdHJhY2suZGZsdCgpO1xuICAgIHZqcy5NZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnBsYXllcl8ub24odHJhY2sua2luZCgpICsgJ3RyYWNrY2hhbmdlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUpKTtcbiAgfVxufSk7XG5cbnZqcy5UZXh0VHJhY2tNZW51SXRlbS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5NZW51SXRlbS5wcm90b3R5cGUub25DbGljay5jYWxsKHRoaXMpO1xuICB0aGlzLnBsYXllcl8uc2hvd1RleHRUcmFjayh0aGlzLnRyYWNrLmlkXywgdGhpcy50cmFjay5raW5kKCkpO1xufTtcblxudmpzLlRleHRUcmFja01lbnVJdGVtLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICB0aGlzLnNlbGVjdGVkKHRoaXMudHJhY2subW9kZSgpID09IDIpO1xufTtcblxuLyoqXG4gKiBBIHNwZWNpYWwgbWVudSBpdGVtIGZvciB0dXJuaW5nIG9mIGEgc3BlY2lmaWMgdHlwZSBvZiB0ZXh0IHRyYWNrXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5PZmZUZXh0VHJhY2tNZW51SXRlbSA9IHZqcy5UZXh0VHJhY2tNZW51SXRlbS5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgLy8gQ3JlYXRlIHBzZXVkbyB0cmFjayBpbmZvXG4gICAgLy8gUmVxdWlyZXMgb3B0aW9uc1sna2luZCddXG4gICAgb3B0aW9uc1sndHJhY2snXSA9IHtcbiAgICAgIGtpbmQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gb3B0aW9uc1sna2luZCddOyB9LFxuICAgICAgcGxheWVyOiBwbGF5ZXIsXG4gICAgICBsYWJlbDogZnVuY3Rpb24oKXsgcmV0dXJuIG9wdGlvbnNbJ2tpbmQnXSArICcgb2ZmJzsgfSxcbiAgICAgIGRmbHQ6IGZ1bmN0aW9uKCl7IHJldHVybiBmYWxzZTsgfSxcbiAgICAgIG1vZGU6IGZ1bmN0aW9uKCl7IHJldHVybiBmYWxzZTsgfVxuICAgIH07XG4gICAgdmpzLlRleHRUcmFja01lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgICB0aGlzLnNlbGVjdGVkKHRydWUpO1xuICB9XG59KTtcblxudmpzLk9mZlRleHRUcmFja01lbnVJdGVtLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgdmpzLlRleHRUcmFja01lbnVJdGVtLnByb3RvdHlwZS5vbkNsaWNrLmNhbGwodGhpcyk7XG4gIHRoaXMucGxheWVyXy5zaG93VGV4dFRyYWNrKHRoaXMudHJhY2suaWRfLCB0aGlzLnRyYWNrLmtpbmQoKSk7XG59O1xuXG52anMuT2ZmVGV4dFRyYWNrTWVudUl0ZW0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciB0cmFja3MgPSB0aGlzLnBsYXllcl8udGV4dFRyYWNrcygpLFxuICAgICAgaT0wLCBqPXRyYWNrcy5sZW5ndGgsIHRyYWNrLFxuICAgICAgb2ZmID0gdHJ1ZTtcblxuICBmb3IgKDtpPGo7aSsrKSB7XG4gICAgdHJhY2sgPSB0cmFja3NbaV07XG4gICAgaWYgKHRyYWNrLmtpbmQoKSA9PSB0aGlzLnRyYWNrLmtpbmQoKSAmJiB0cmFjay5tb2RlKCkgPT0gMikge1xuICAgICAgb2ZmID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5zZWxlY3RlZChvZmYpO1xufTtcblxuLyoqXG4gKiBUaGUgYmFzZSBjbGFzcyBmb3IgYnV0dG9ucyB0aGF0IHRvZ2dsZSBzcGVjaWZpYyB0ZXh0IHRyYWNrIHR5cGVzIChlLmcuIHN1YnRpdGxlcylcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlRleHRUcmFja0J1dHRvbiA9IHZqcy5NZW51QnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuTWVudUJ1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICBpZiAodGhpcy5pdGVtcy5sZW5ndGggPD0gMSkge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICB9XG59KTtcblxuLy8gdmpzLlRleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuYnV0dG9uUHJlc3NlZCA9IGZhbHNlO1xuXG4vLyB2anMuVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVNZW51ID0gZnVuY3Rpb24oKXtcbi8vICAgdmFyIG1lbnUgPSBuZXcgdmpzLk1lbnUodGhpcy5wbGF5ZXJfKTtcblxuLy8gICAvLyBBZGQgYSB0aXRsZSBsaXN0IGl0ZW0gdG8gdGhlIHRvcFxuLy8gICAvLyBtZW51LmVsKCkuYXBwZW5kQ2hpbGQodmpzLmNyZWF0ZUVsKCdsaScsIHtcbi8vICAgLy8gICBjbGFzc05hbWU6ICd2anMtbWVudS10aXRsZScsXG4vLyAgIC8vICAgaW5uZXJIVE1MOiB2anMuY2FwaXRhbGl6ZSh0aGlzLmtpbmRfKSxcbi8vICAgLy8gICB0YWJpbmRleDogLTFcbi8vICAgLy8gfSkpO1xuXG4vLyAgIHRoaXMuaXRlbXMgPSB0aGlzLmNyZWF0ZUl0ZW1zKCk7XG5cbi8vICAgLy8gQWRkIG1lbnUgaXRlbXMgdG8gdGhlIG1lbnVcbi8vICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgbWVudS5hZGRJdGVtKHRoaXMuaXRlbXNbaV0pO1xuLy8gICB9XG5cbi8vICAgLy8gQWRkIGxpc3QgdG8gZWxlbWVudFxuLy8gICB0aGlzLmFkZENoaWxkKG1lbnUpO1xuXG4vLyAgIHJldHVybiBtZW51O1xuLy8gfTtcblxuLy8gQ3JlYXRlIGEgbWVudSBpdGVtIGZvciBlYWNoIHRleHQgdHJhY2tcbnZqcy5UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24oKXtcbiAgdmFyIGl0ZW1zID0gW10sIHRyYWNrO1xuXG4gIC8vIEFkZCBhbiBPRkYgbWVudSBpdGVtIHRvIHR1cm4gYWxsIHRyYWNrcyBvZmZcbiAgaXRlbXMucHVzaChuZXcgdmpzLk9mZlRleHRUcmFja01lbnVJdGVtKHRoaXMucGxheWVyXywgeyAna2luZCc6IHRoaXMua2luZF8gfSkpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKS5sZW5ndGg7IGkrKykge1xuICAgIHRyYWNrID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKVtpXTtcbiAgICBpZiAodHJhY2sua2luZCgpID09PSB0aGlzLmtpbmRfKSB7XG4gICAgICBpdGVtcy5wdXNoKG5ldyB2anMuVGV4dFRyYWNrTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICAgICd0cmFjayc6IHRyYWNrXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGl0ZW1zO1xufTtcblxuLyoqXG4gKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBjYXB0aW9uc1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuQ2FwdGlvbnNCdXR0b24gPSB2anMuVGV4dFRyYWNrQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zLCByZWFkeSl7XG4gICAgdmpzLlRleHRUcmFja0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsJ0NhcHRpb25zIE1lbnUnKTtcbiAgfVxufSk7XG52anMuQ2FwdGlvbnNCdXR0b24ucHJvdG90eXBlLmtpbmRfID0gJ2NhcHRpb25zJztcbnZqcy5DYXB0aW9uc0J1dHRvbi5wcm90b3R5cGUuYnV0dG9uVGV4dCA9ICdDYXB0aW9ucyc7XG52anMuQ2FwdGlvbnNCdXR0b24ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICd2anMtY2FwdGlvbnMtYnV0dG9uJztcblxuLyoqXG4gKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBzdWJ0aXRsZXNcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlN1YnRpdGxlc0J1dHRvbiA9IHZqcy5UZXh0VHJhY2tCdXR0b24uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICB2anMuVGV4dFRyYWNrQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSk7XG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywnU3VidGl0bGVzIE1lbnUnKTtcbiAgfVxufSk7XG52anMuU3VidGl0bGVzQnV0dG9uLnByb3RvdHlwZS5raW5kXyA9ICdzdWJ0aXRsZXMnO1xudmpzLlN1YnRpdGxlc0J1dHRvbi5wcm90b3R5cGUuYnV0dG9uVGV4dCA9ICdTdWJ0aXRsZXMnO1xudmpzLlN1YnRpdGxlc0J1dHRvbi5wcm90b3R5cGUuY2xhc3NOYW1lID0gJ3Zqcy1zdWJ0aXRsZXMtYnV0dG9uJztcblxuLy8gQ2hhcHRlcnMgYWN0IG11Y2ggZGlmZmVyZW50bHkgdGhhbiBvdGhlciB0ZXh0IHRyYWNrc1xuLy8gQ3VlcyBhcmUgbmF2aWdhdGlvbiB2cy4gb3RoZXIgdHJhY2tzIG9mIGFsdGVybmF0aXZlIGxhbmd1YWdlc1xuLyoqXG4gKiBUaGUgYnV0dG9uIGNvbXBvbmVudCBmb3IgdG9nZ2xpbmcgYW5kIHNlbGVjdGluZyBjaGFwdGVyc1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuQ2hhcHRlcnNCdXR0b24gPSB2anMuVGV4dFRyYWNrQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zLCByZWFkeSl7XG4gICAgdmpzLlRleHRUcmFja0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsJ0NoYXB0ZXJzIE1lbnUnKTtcbiAgfVxufSk7XG52anMuQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmtpbmRfID0gJ2NoYXB0ZXJzJztcbnZqcy5DaGFwdGVyc0J1dHRvbi5wcm90b3R5cGUuYnV0dG9uVGV4dCA9ICdDaGFwdGVycyc7XG52anMuQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICd2anMtY2hhcHRlcnMtYnV0dG9uJztcblxuLy8gQ3JlYXRlIGEgbWVudSBpdGVtIGZvciBlYWNoIHRleHQgdHJhY2tcbnZqcy5DaGFwdGVyc0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlSXRlbXMgPSBmdW5jdGlvbigpe1xuICB2YXIgaXRlbXMgPSBbXSwgdHJhY2s7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnBsYXllcl8udGV4dFRyYWNrcygpLmxlbmd0aDsgaSsrKSB7XG4gICAgdHJhY2sgPSB0aGlzLnBsYXllcl8udGV4dFRyYWNrcygpW2ldO1xuICAgIGlmICh0cmFjay5raW5kKCkgPT09IHRoaXMua2luZF8pIHtcbiAgICAgIGl0ZW1zLnB1c2gobmV3IHZqcy5UZXh0VHJhY2tNZW51SXRlbSh0aGlzLnBsYXllcl8sIHtcbiAgICAgICAgJ3RyYWNrJzogdHJhY2tcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaXRlbXM7XG59O1xuXG52anMuQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmNyZWF0ZU1lbnUgPSBmdW5jdGlvbigpe1xuICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKSxcbiAgICAgIGkgPSAwLFxuICAgICAgaiA9IHRyYWNrcy5sZW5ndGgsXG4gICAgICB0cmFjaywgY2hhcHRlcnNUcmFjayxcbiAgICAgIGl0ZW1zID0gdGhpcy5pdGVtcyA9IFtdO1xuXG4gIGZvciAoO2k8ajtpKyspIHtcbiAgICB0cmFjayA9IHRyYWNrc1tpXTtcbiAgICBpZiAodHJhY2sua2luZCgpID09IHRoaXMua2luZF8pIHtcbiAgICAgIGlmICh0cmFjay5yZWFkeVN0YXRlKCkgPT09IDApIHtcbiAgICAgICAgdHJhY2subG9hZCgpO1xuICAgICAgICB0cmFjay5vbignbG9hZGVkJywgdmpzLmJpbmQodGhpcywgdGhpcy5jcmVhdGVNZW51KSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjaGFwdGVyc1RyYWNrID0gdHJhY2s7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBtZW51ID0gdGhpcy5tZW51O1xuICBpZiAobWVudSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbWVudSA9IG5ldyB2anMuTWVudSh0aGlzLnBsYXllcl8pO1xuICAgIG1lbnUuY29udGVudEVsKCkuYXBwZW5kQ2hpbGQodmpzLmNyZWF0ZUVsKCdsaScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51LXRpdGxlJyxcbiAgICAgIGlubmVySFRNTDogdmpzLmNhcGl0YWxpemUodGhpcy5raW5kXyksXG4gICAgICB0YWJpbmRleDogLTFcbiAgICB9KSk7XG4gIH1cblxuICBpZiAoY2hhcHRlcnNUcmFjaykge1xuICAgIHZhciBjdWVzID0gY2hhcHRlcnNUcmFjay5jdWVzXywgY3VlLCBtaTtcbiAgICBpID0gMDtcbiAgICBqID0gY3Vlcy5sZW5ndGg7XG5cbiAgICBmb3IgKDtpPGo7aSsrKSB7XG4gICAgICBjdWUgPSBjdWVzW2ldO1xuXG4gICAgICBtaSA9IG5ldyB2anMuQ2hhcHRlcnNUcmFja01lbnVJdGVtKHRoaXMucGxheWVyXywge1xuICAgICAgICAndHJhY2snOiBjaGFwdGVyc1RyYWNrLFxuICAgICAgICAnY3VlJzogY3VlXG4gICAgICB9KTtcblxuICAgICAgaXRlbXMucHVzaChtaSk7XG5cbiAgICAgIG1lbnUuYWRkQ2hpbGQobWkpO1xuICAgIH1cbiAgICB0aGlzLmFkZENoaWxkKG1lbnUpO1xuICB9XG5cbiAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoID4gMCkge1xuICAgIHRoaXMuc2hvdygpO1xuICB9XG5cbiAgcmV0dXJuIG1lbnU7XG59O1xuXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5DaGFwdGVyc1RyYWNrTWVudUl0ZW0gPSB2anMuTWVudUl0ZW0uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZhciB0cmFjayA9IHRoaXMudHJhY2sgPSBvcHRpb25zWyd0cmFjayddLFxuICAgICAgICBjdWUgPSB0aGlzLmN1ZSA9IG9wdGlvbnNbJ2N1ZSddLFxuICAgICAgICBjdXJyZW50VGltZSA9IHBsYXllci5jdXJyZW50VGltZSgpO1xuXG4gICAgLy8gTW9kaWZ5IG9wdGlvbnMgZm9yIHBhcmVudCBNZW51SXRlbSBjbGFzcydzIGluaXQuXG4gICAgb3B0aW9uc1snbGFiZWwnXSA9IGN1ZS50ZXh0O1xuICAgIG9wdGlvbnNbJ3NlbGVjdGVkJ10gPSAoY3VlLnN0YXJ0VGltZSA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGN1ZS5lbmRUaW1lKTtcbiAgICB2anMuTWVudUl0ZW0uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgdHJhY2sub24oJ2N1ZWNoYW5nZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlKSk7XG4gIH1cbn0pO1xuXG52anMuQ2hhcHRlcnNUcmFja01lbnVJdGVtLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgdmpzLk1lbnVJdGVtLnByb3RvdHlwZS5vbkNsaWNrLmNhbGwodGhpcyk7XG4gIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLmN1ZS5zdGFydFRpbWUpO1xuICB0aGlzLnVwZGF0ZSh0aGlzLmN1ZS5zdGFydFRpbWUpO1xufTtcblxudmpzLkNoYXB0ZXJzVHJhY2tNZW51SXRlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgdmFyIGN1ZSA9IHRoaXMuY3VlLFxuICAgICAgY3VycmVudFRpbWUgPSB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKTtcblxuICAvLyB2anMubG9nKGN1cnJlbnRUaW1lLCBjdWUuc3RhcnRUaW1lKTtcbiAgdGhpcy5zZWxlY3RlZChjdWUuc3RhcnRUaW1lIDw9IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lIDwgY3VlLmVuZFRpbWUpO1xufTtcblxuLy8gQWRkIEJ1dHRvbnMgdG8gY29udHJvbEJhclxudmpzLm9iai5tZXJnZSh2anMuQ29udHJvbEJhci5wcm90b3R5cGUub3B0aW9uc19bJ2NoaWxkcmVuJ10sIHtcbiAgJ3N1YnRpdGxlc0J1dHRvbic6IHt9LFxuICAnY2FwdGlvbnNCdXR0b24nOiB7fSxcbiAgJ2NoYXB0ZXJzQnV0dG9uJzoge31cbn0pO1xuXG4vLyB2anMuQ3VlID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuLy8gICAvKiogQGNvbnN0cnVjdG9yICovXG4vLyAgIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4vLyAgICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4vLyAgIH1cbi8vIH0pO1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEFkZCBKU09OIHN1cHBvcnRcbiAqIEBzdXBwcmVzcyB7dW5kZWZpbmVkVmFyc31cbiAqIChDb21waWxlciBkb2Vzbid0IGxpa2UgSlNPTiBub3QgYmVpbmcgZGVjbGFyZWQpXG4gKi9cblxuLyoqXG4gKiBKYXZhc2NyaXB0IEpTT04gaW1wbGVtZW50YXRpb25cbiAqIChQYXJzZSBNZXRob2QgT25seSlcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kb3VnbGFzY3JvY2tmb3JkL0pTT04tanMvYmxvYi9tYXN0ZXIvanNvbjIuanNcbiAqIE9ubHkgdXNpbmcgZm9yIHBhcnNlIG1ldGhvZCB3aGVuIHBhcnNpbmcgZGF0YS1zZXR1cCBhdHRyaWJ1dGUgSlNPTi5cbiAqIEBzdXBwcmVzcyB7dW5kZWZpbmVkVmFyc31cbiAqIEBuYW1lc3BhY2VcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5KU09OO1xuXG5pZiAodHlwZW9mIHdpbmRvdy5KU09OICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuSlNPTi5wYXJzZSA9PT0gJ2Z1bmN0aW9uJykge1xuICB2anMuSlNPTiA9IHdpbmRvdy5KU09OO1xuXG59IGVsc2Uge1xuICB2anMuSlNPTiA9IHt9O1xuXG4gIHZhciBjeCA9IC9bXFx1MDAwMFxcdTAwYWRcXHUwNjAwLVxcdTA2MDRcXHUwNzBmXFx1MTdiNFxcdTE3YjVcXHUyMDBjLVxcdTIwMGZcXHUyMDI4LVxcdTIwMmZcXHUyMDYwLVxcdTIwNmZcXHVmZWZmXFx1ZmZmMC1cXHVmZmZmXS9nO1xuXG4gIC8qKlxuICAgKiBwYXJzZSB0aGUganNvblxuICAgKlxuICAgKiBAbWVtYmVyb2YgdmpzLkpTT05cbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgVGhlIEpTT04gc3RyaW5nIHRvIHBhcnNlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb249fSBbcmV2aXZlcl0gT3B0aW9uYWwgZnVuY3Rpb24gdGhhdCBjYW4gdHJhbnNmb3JtIHRoZSByZXN1bHRzXG4gICAqIEByZXR1cm4ge09iamVjdHxBcnJheX0gVGhlIHBhcnNlZCBKU09OXG4gICAqL1xuICB2anMuSlNPTi5wYXJzZSA9IGZ1bmN0aW9uICh0ZXh0LCByZXZpdmVyKSB7XG4gICAgICB2YXIgajtcblxuICAgICAgZnVuY3Rpb24gd2Fsayhob2xkZXIsIGtleSkge1xuICAgICAgICAgIHZhciBrLCB2LCB2YWx1ZSA9IGhvbGRlcltrZXldO1xuICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgIGZvciAoayBpbiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgaykpIHtcbiAgICAgICAgICAgICAgICAgICAgICB2ID0gd2Fsayh2YWx1ZSwgayk7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKHYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVtrXSA9IHY7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW2tdO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmV2aXZlci5jYWxsKGhvbGRlciwga2V5LCB2YWx1ZSk7XG4gICAgICB9XG4gICAgICB0ZXh0ID0gU3RyaW5nKHRleHQpO1xuICAgICAgY3gubGFzdEluZGV4ID0gMDtcbiAgICAgIGlmIChjeC50ZXN0KHRleHQpKSB7XG4gICAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShjeCwgZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuICdcXFxcdScgK1xuICAgICAgICAgICAgICAgICAgKCcwMDAwJyArIGEuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgaWYgKC9eW1xcXSw6e31cXHNdKiQvXG4gICAgICAgICAgICAgIC50ZXN0KHRleHQucmVwbGFjZSgvXFxcXCg/OltcIlxcXFxcXC9iZm5ydF18dVswLTlhLWZBLUZdezR9KS9nLCAnQCcpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvXCJbXlwiXFxcXFxcblxccl0qXCJ8dHJ1ZXxmYWxzZXxudWxsfC0/XFxkKyg/OlxcLlxcZCopPyg/OltlRV1bK1xcLV0/XFxkKyk/L2csICddJylcbiAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oPzpefDp8LCkoPzpcXHMqXFxbKSsvZywgJycpKSkge1xuXG4gICAgICAgICAgaiA9IGV2YWwoJygnICsgdGV4dCArICcpJyk7XG5cbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHJldml2ZXIgPT09ICdmdW5jdGlvbicgP1xuICAgICAgICAgICAgICB3YWxrKHsnJzogan0sICcnKSA6IGo7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcignSlNPTi5wYXJzZSgpOiBpbnZhbGlkIG9yIG1hbGZvcm1lZCBKU09OIGRhdGEnKTtcbiAgfTtcbn1cbi8qKlxuICogQGZpbGVvdmVydmlldyBGdW5jdGlvbnMgZm9yIGF1dG9tYXRpY2FsbHkgc2V0dGluZyB1cCBhIHBsYXllclxuICogYmFzZWQgb24gdGhlIGRhdGEtc2V0dXAgYXR0cmlidXRlIG9mIHRoZSB2aWRlbyB0YWdcbiAqL1xuXG4vLyBBdXRvbWF0aWNhbGx5IHNldCB1cCBhbnkgdGFncyB0aGF0IGhhdmUgYSBkYXRhLXNldHVwIGF0dHJpYnV0ZVxudmpzLmF1dG9TZXR1cCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBvcHRpb25zLCB2aWQsIHBsYXllcixcbiAgICAgIHZpZHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgndmlkZW8nKTtcblxuICAvLyBDaGVjayBpZiBhbnkgbWVkaWEgZWxlbWVudHMgZXhpc3RcbiAgaWYgKHZpZHMgJiYgdmlkcy5sZW5ndGggPiAwKSB7XG5cbiAgICBmb3IgKHZhciBpPTAsaj12aWRzLmxlbmd0aDsgaTxqOyBpKyspIHtcbiAgICAgIHZpZCA9IHZpZHNbaV07XG5cbiAgICAgIC8vIENoZWNrIGlmIGVsZW1lbnQgZXhpc3RzLCBoYXMgZ2V0QXR0cmlidXRlIGZ1bmMuXG4gICAgICAvLyBJRSBzZWVtcyB0byBjb25zaWRlciB0eXBlb2YgZWwuZ2V0QXR0cmlidXRlID09ICdvYmplY3QnIGluc3RlYWQgb2YgJ2Z1bmN0aW9uJyBsaWtlIGV4cGVjdGVkLCBhdCBsZWFzdCB3aGVuIGxvYWRpbmcgdGhlIHBsYXllciBpbW1lZGlhdGVseS5cbiAgICAgIGlmICh2aWQgJiYgdmlkLmdldEF0dHJpYnV0ZSkge1xuXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHBsYXllciBoYXNuJ3QgYWxyZWFkeSBiZWVuIHNldCB1cC5cbiAgICAgICAgaWYgKHZpZFsncGxheWVyJ10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIG9wdGlvbnMgPSB2aWQuZ2V0QXR0cmlidXRlKCdkYXRhLXNldHVwJyk7XG5cbiAgICAgICAgICAvLyBDaGVjayBpZiBkYXRhLXNldHVwIGF0dHIgZXhpc3RzLlxuICAgICAgICAgIC8vIFdlIG9ubHkgYXV0by1zZXR1cCBpZiB0aGV5J3ZlIGFkZGVkIHRoZSBkYXRhLXNldHVwIGF0dHIuXG4gICAgICAgICAgaWYgKG9wdGlvbnMgIT09IG51bGwpIHtcblxuICAgICAgICAgICAgLy8gUGFyc2Ugb3B0aW9ucyBKU09OXG4gICAgICAgICAgICAvLyBJZiBlbXB0eSBzdHJpbmcsIG1ha2UgaXQgYSBwYXJzYWJsZSBqc29uIG9iamVjdC5cbiAgICAgICAgICAgIG9wdGlvbnMgPSB2anMuSlNPTi5wYXJzZShvcHRpb25zIHx8ICd7fScpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgbmV3IHZpZGVvLmpzIGluc3RhbmNlLlxuICAgICAgICAgICAgcGxheWVyID0gdmlkZW9qcyh2aWQsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAvLyBJZiBnZXRBdHRyaWJ1dGUgaXNuJ3QgZGVmaW5lZCwgd2UgbmVlZCB0byB3YWl0IGZvciB0aGUgRE9NLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmpzLmF1dG9TZXR1cFRpbWVvdXQoMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAvLyBObyB2aWRlb3Mgd2VyZSBmb3VuZCwgc28ga2VlcCBsb29waW5nIHVubGVzcyBwYWdlIGlzIGZpbmlzaGVkIGxvYWRpbmcuXG4gIH0gZWxzZSBpZiAoIXZqcy53aW5kb3dMb2FkZWQpIHtcbiAgICB2anMuYXV0b1NldHVwVGltZW91dCgxKTtcbiAgfVxufTtcblxuLy8gUGF1c2UgdG8gbGV0IHRoZSBET00ga2VlcCBwcm9jZXNzaW5nXG52anMuYXV0b1NldHVwVGltZW91dCA9IGZ1bmN0aW9uKHdhaXQpe1xuICBzZXRUaW1lb3V0KHZqcy5hdXRvU2V0dXAsIHdhaXQpO1xufTtcblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgdmpzLndpbmRvd0xvYWRlZCA9IHRydWU7XG59IGVsc2Uge1xuICB2anMub25lKHdpbmRvdywgJ2xvYWQnLCBmdW5jdGlvbigpe1xuICAgIHZqcy53aW5kb3dMb2FkZWQgPSB0cnVlO1xuICB9KTtcbn1cblxuLy8gUnVuIEF1dG8tbG9hZCBwbGF5ZXJzXG4vLyBZb3UgaGF2ZSB0byB3YWl0IGF0IGxlYXN0IG9uY2UgaW4gY2FzZSB0aGlzIHNjcmlwdCBpcyBsb2FkZWQgYWZ0ZXIgeW91ciB2aWRlbyBpbiB0aGUgRE9NICh3ZWlyZCBiZWhhdmlvciBvbmx5IHdpdGggbWluaWZpZWQgdmVyc2lvbilcbnZqcy5hdXRvU2V0dXBUaW1lb3V0KDEpO1xuLyoqXG4gKiB0aGUgbWV0aG9kIGZvciByZWdpc3RlcmluZyBhIHZpZGVvLmpzIHBsdWdpblxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgcGx1Z2luXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gaW5pdCBUaGUgZnVuY3Rpb24gdGhhdCBpcyBydW4gd2hlbiB0aGUgcGxheWVyIGluaXRzXG4gKi9cbnZqcy5wbHVnaW4gPSBmdW5jdGlvbihuYW1lLCBpbml0KXtcbiAgdmpzLlBsYXllci5wcm90b3R5cGVbbmFtZV0gPSBpbml0O1xufTtcbiIsImpRdWVyeShkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oJCkge1xuXG4gICAgdmFyIHRpbWVsYXBzZU1vbnRoUHJldmlvdXM7XG4gICAgdmFyIHRpbWVsYXBzZU1vbnRoTmV4dDtcbiAgICB2YXIgdGltZWxhcHNlWWVhclByZXZpb3VzO1xuICAgIHZhciB0aW1lbGFwc2VZZWFyTmV4dDtcbiAgICB2YXIgcmlnaHRub3cgPSBtb21lbnQoKTtcblxuICAgIC8vIFRpbWVsYXBzZSB2aWRlbyBDYWxlbmRhclxuICAgIGZ1bmN0aW9uIGdldENhbGVuZGFyKHllYXIsIG1vbnRoKSB7XG4gICAgICAgICQoJyN0aW1lbGFwc2UtY2FsZW5kYXInKS5oaWRlKCk7XG4gICAgICAgICQoJyN0aW1lbGFwc2UtbG9hZGVyJykuc2hvdygpO1xuXG4gICAgICAgICQucG9zdCgnL2FwaS9nZXQtdGltZWxhcHNlLWNhbGVuZGFyLWRhdGVzJywge3llYXI6IHllYXIsIG1vbnRoOiBtb250aH0sIGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtbG9hZGVyJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnI3RpbWVsYXBzZS1jYWxlbmRhcicpLmh0bWwoZGF0YS5kYXRhKS5mYWRlSW4oMjUwKTtcblxuICAgICAgICAgICAgLy8gVmlkZW8gcGxheWVyXG4gICAgICAgICAgICAkKCcudGltZWxhcHNlLXN0YXJ0LXZpZGVvJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuYXR0cigncmVsJyk7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSAnaHR0cDovL3ZpZGVvLnJldnl3ZWF0aGVyLmNvbS8nO1xuICAgICAgICAgICAgICAgIHZhciB2aWRlb1BsYXllciA9IHZpZGVvanMoJ3RpbWVsYXBzZS12aWRlbycpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRlcyA9IHRhcmdldC5zcGxpdCgnLycpO1xuXG4gICAgICAgICAgICAgICAgJCgnI3RpbWVsYXBzZS12aWRlby10aXRsZScpLmh0bWwoZGF0ZXNbMV0gKyAnICcgKyBkYXRlc1syXSArICcsICcgKyBkYXRlc1swXSk7XG5cbiAgICAgICAgICAgICAgICB2aWRlb1BsYXllci5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVsYXBzZVBsYXllciA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgdGltZWxhcHNlUGxheWVyLnBhdXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJ3ZpZGVvJykuYXR0cignc3JjJywgcGF0aCArIHRhcmdldCArICcubXA0Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ3ZpZGVvIHNvdXJjZTpudGgtY2hpbGQoMSknKS5hdHRyKCdzcmMnLCBwYXRoICsgdGFyZ2V0ICsgJy5tcDQnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgndmlkZW8gc291cmNlOm50aC1jaGlsZCgyKScpLmF0dHIoJ3NyYycsIHBhdGggKyB0YXJnZXQgKyAnLndlYm0nKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnZqcy1iaWctcGxheS1idXR0b24nKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtdmlkZW8nKS5yZW1vdmVDbGFzcygndmpzLXBsYXlpbmcnKS5hZGRDbGFzcygndmpzLXBhdXNlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVsYXBzZVBsYXllci5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtdmlkZW9faHRtbDVfYXBpJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lbGFwc2VQbGF5ZXIub24oJ3BsYXknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy52anMtYmlnLXBsYXktYnV0dG9uJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aW1lbGFwc2VZZWFyUHJldmlvdXMgPSBwYXJzZUludCh5ZWFyLCAxMCk7XG4gICAgICAgIHRpbWVsYXBzZVllYXJOZXh0ID0gcGFyc2VJbnQoeWVhciwgMTApO1xuXG4gICAgICAgIC8vIHNldCB2YWx1ZXMgb24gYnV0dG9uc1xuICAgICAgICBpZiAocGFyc2VJbnQobW9udGgsIDEwKSAtIDEgPT0gMCkge1xuICAgICAgICAgICAgdGltZWxhcHNlTW9udGhQcmV2aW91cyA9IDEyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZWxhcHNlTW9udGhQcmV2aW91cyA9IHBhcnNlSW50KG1vbnRoLCAxMCkgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KG1vbnRoLCAxMCkgKyAxID09IDEzKSB7XG4gICAgICAgICAgICB0aW1lbGFwc2VNb250aE5leHQgPSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGltZWxhcHNlTW9udGhOZXh0ID0gcGFyc2VJbnQobW9udGgsIDEwKSArIDE7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGFyc2VJbnQobW9udGgsIDEwKSA9PSAxKSB7XG4gICAgICAgICAgICB0aW1lbGFwc2VZZWFyUHJldmlvdXMgPSBwYXJzZUludCh5ZWFyLCAxMCkgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KG1vbnRoLCAxMCkgPT0gMTIpIHtcbiAgICAgICAgICAgIHRpbWVsYXBzZVllYXJOZXh0ID0gcGFyc2VJbnQoeWVhciwgMTApICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHNldCB0aGUgYnV0dG9uIHZhbHVlc1xuICAgICAgICAkKCcjdGltZWxhcHNlLXByZXZpb3VzJykudmFsKHRpbWVsYXBzZU1vbnRoUHJldmlvdXMpO1xuICAgICAgICAkKCcjdGltZWxhcHNlLW5leHQnKS52YWwodGltZWxhcHNlTW9udGhOZXh0KTtcbiAgICAgICAgJCgnI3RpbWVsYXBzZS15ZWFyLXByZXZpb3VzJykudmFsKHRpbWVsYXBzZVllYXJQcmV2aW91cyk7XG4gICAgICAgICQoJyN0aW1lbGFwc2UteWVhci1uZXh0JykudmFsKHRpbWVsYXBzZVllYXJOZXh0KTtcblxuICAgICAgICAvLyBzZXQgZGF0ZSByYW5nZVxuICAgICAgICBpZiAobW9udGggPT0gcmlnaHRub3cuZm9ybWF0KCdNJykgJiYgcGFyc2VJbnQoeWVhciwgMTApID09IDIwMTUpIHtcbiAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtbmV4dCcpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCgnI3RpbWVsYXBzZS1uZXh0JykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBubyB2aWRlb3MgYmVmb3JlIEF1Z3VzdCAyMDEzXG4gICAgICAgIGlmIChwYXJzZUludChtb250aCwgMTApID09IDggJiYgcGFyc2VJbnQoeWVhciwgMTApID09IDIwMTMpIHtcbiAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtcHJldmlvdXMnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtcHJldmlvdXMnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBnZXRDYWxlbmRhcihwYXJzZUludChyaWdodG5vdy5mb3JtYXQoJ1lZWVknKSwgMTApLCBwYXJzZUludChyaWdodG5vdy5mb3JtYXQoJ01NJyksIDEwKSk7XG5cbiAgICAvLyBsaXN0ZW4gdG8gbW9udGhzIGJ1dHRvbnNcbiAgICAkKCcjdGltZWxhcHNlLXByZXZpb3VzJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGdldENhbGVuZGFyKCQoJyN0aW1lbGFwc2UteWVhci1wcmV2aW91cycpLnZhbCgpLCAkKCcjdGltZWxhcHNlLXByZXZpb3VzJykudmFsKCkpO1xuICAgIH0pO1xuXG4gICAgJCgnI3RpbWVsYXBzZS1uZXh0JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgIGdldENhbGVuZGFyKCQoJyN0aW1lbGFwc2UteWVhci1uZXh0JykudmFsKCksICQoJyN0aW1lbGFwc2UtbmV4dCcpLnZhbCgpKTtcbiAgICB9KTtcbn0pOyIsIiQoZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgY2hhcnQ7XG5cbiAgICBIaWdoY2hhcnRzLnNldE9wdGlvbnMoe1xuICAgICAgICBnbG9iYWw6IHtcbiAgICAgICAgICAgIHVzZVVUQzogZmFsc2VcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKCQoJyNoaXN0b3J5LWNoYXJ0JykubGVuZ3RoKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgICAgY2hhcnQ6IHtcbiAgICAgICAgICAgICAgICByZW5kZXJUbzogICAgICAgICAgICdoaXN0b3J5LWNoYXJ0JyxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICAgICcjZWVlZWVlJyxcbiAgICAgICAgICAgICAgICB6b29tVHlwZTogICAgICAgICAgICd4J1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAgICAgICAgICAgICAgICdDb3VydGhvdXNlIFdlYXRoZXIgSGlzdG9yeSdcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHhBeGlzOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogICAgICAgICAgICAgICAnZGF0ZXRpbWUnLFxuICAgICAgICAgICAgICAgIGRhdGVUaW1lTGFiZWxGb3JtYXQ6IHsgaG91cjogJyVtICVkICVIOiVNJ30sXG4gICAgICAgICAgICAgICAgdGlja1BpeGVsSW50ZXJ2YWw6ICAxNTAsXG4gICAgICAgICAgICAgICAgbWluUmFuZ2U6ICAgICAgICAgICAxXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB5QXhpczogW3tcbiAgICAgICAgICAgICAgICBncmlkTGluZVdpZHRoOiAxLFxuICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjQjI2OTY5J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICd7dmFsdWV9IMKwQydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdBaXIgVGVtcCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyNCMjY5NjknXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZ3JpZExpbmVXaWR0aDogMCxcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzNCNTRGRidcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAne3ZhbHVlfSBrUGEnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQmFyb21ldGVyJyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzNCNTRGRidcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3Bwb3NpdGU6IGZhbHNlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZ3JpZExpbmVXaWR0aDogMCxcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzg4RThBOSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAne3ZhbHVlfSAlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1JlbGF0aXZlIEh1bWlkaXR5JyxcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzg4RThBOSdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3Bwb3NpdGU6IHRydWVcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBncmlkTGluZVdpZHRoOiAwLFxuICAgICAgICAgICAgICAgIGxhYmVsczoge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjOTk5OTk5J1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6ICd7dmFsdWV9IGttL2gnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnV2luZCBTcGVlZCcsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM5OTk5OTknXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wcG9zaXRlOiB0cnVlXG4gICAgICAgICAgICB9XSxcblxuICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgbGF5b3V0OiAgICAgICAgICAgICAndmVydGljYWwnLFxuICAgICAgICAgICAgICAgIGFsaWduOiAgICAgICAgICAgICAgJ2xlZnQnLFxuICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246ICAgICAgJ3RvcCcsXG4gICAgICAgICAgICAgICAgeDogICAgICAgICAgICAgICAgICAxODAsXG4gICAgICAgICAgICAgICAgeTogICAgICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAgICAgICAgMSxcbiAgICAgICAgICAgICAgICBmbG9hdGluZzogICAgICAgICAgIHRydWUsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAgICAnI0U2RTZFNicsXG4gICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICAgICAgICAnI0RERERERCcsXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAgICAgICAwXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjcmVkaXRzOiB7XG4gICAgICAgICAgICAgICAgaHJlZjogICAnJyxcbiAgICAgICAgICAgICAgICB0ZXh0OiAgICcnXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBwbG90T3B0aW9uczoge1xuICAgICAgICAgICAgICAgIGNvbHVtbjoge1xuICAgICAgICAgICAgICAgICAgICBwb2ludFBhZGRpbmc6IDAuMixcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBzZXJpZXM6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBsYXN0IHdlZWsgZGF0YVxuICAgICAgICB2YXIgbGFzdFdlZWsgPSBtb21lbnQoKS5zdWJ0cmFjdCg2LCAnZGF5cycpO1xuICAgICAgICB2YXIgcmlnaHROb3cgPSBtb21lbnQoKTtcblxuICAgICAgICAvLyBpbml0aWFsIGxvYWQgb2YgZGF0YSBmb3IgaGlnaCBjaGFydHNcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogJy9hcGkvaGlzdG9yeS8nICsgbGFzdFdlZWsuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykgKyAnLycgKyByaWdodE5vdy5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICB0eXBlOiAnR0VUJ1xuICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzID0gZGF0YTtcbiAgICAgICAgICAgIHZhciBjaGFydCA9IG5ldyBIaWdoY2hhcnRzLkNoYXJ0KG9wdGlvbnMpO1xuICAgICAgICB9KTtcblxuXG5cbiAgICAgICAgLy8gc2V0dXAgdGhlIGRhdGUgcGlja2VyXG4gICAgICAgICQoJyNoaXN0b3J5LWRhdGVzJykuZGF0ZXJhbmdlcGlja2VyKHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdZWVlZLU1NLUREJyxcbiAgICAgICAgICAgICAgICBtaW5EYXRlOiAnMjAxMy0wOC0yNSAwMjowMDowMCcsXG4gICAgICAgICAgICAgICAgbWF4RGF0ZTogbW9tZW50KCksXG4gICAgICAgICAgICAgICAgdGltZVBpY2tlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICByYW5nZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0xhc3QgMjQgaG91cnM6JzogW21vbWVudCgpLnN1YnRyYWN0KDEsICdkYXlzJyksIG1vbWVudCgpXSxcbiAgICAgICAgICAgICAgICAgICAgJ0xhc3QgNyBkYXlzOic6IFttb21lbnQoKS5zdWJ0cmFjdCg2LCAnZGF5cycpLCBtb21lbnQoKV0sXG4gICAgICAgICAgICAgICAgICAgICdMYXN0IDMwIGRheXM6JzogW21vbWVudCgpLnN1YnRyYWN0KDI5LCAnZGF5cycpLCBtb21lbnQoKV1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZTogJzIwMTMtMDgtMjUgMDE6MDA6MDAnLFxuICAgICAgICAgICAgICAgIGVuZERhdGU6IG1vbWVudCgpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oc3RhcnQsIGVuZCkge1xuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coc3RhcnQuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykgKyAnIHRvICcgKyBlbmQuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykpO1xuICAgICAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9hcGkvaGlzdG9yeS8nICsgc3RhcnQuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJykgKyAnLycgKyBlbmQuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnXG4gICAgICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc2VyaWVzID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoYXJ0ID0gbmV3IEhpZ2hjaGFydHMuQ2hhcnQob3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgKTtcbiAgICB9XG5cbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==