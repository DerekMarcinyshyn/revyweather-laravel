/*! jQuery v2.1.1 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.1",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+Math.random()}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)
},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec,fc,gc=/#.*$/,hc=/([?&])_=[^&]*/,ic=/^(.*?):[ \t]*([^\r\n]*)$/gm,jc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kc=/^(?:GET|HEAD)$/,lc=/^\/\//,mc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,nc={},oc={},pc="*/".concat("*");try{fc=location.href}catch(qc){fc=l.createElement("a"),fc.href="",fc=fc.href}ec=mc.exec(fc.toLowerCase())||[];function rc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function sc(a,b,c,d){var e={},f=a===oc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function tc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function uc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function vc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:jc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":pc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?tc(tc(a,n.ajaxSettings),b):tc(n.ajaxSettings,a)},ajaxPrefilter:rc(nc),ajaxTransport:rc(oc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=ic.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||fc)+"").replace(gc,"").replace(lc,ec[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=mc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===ec[1]&&h[2]===ec[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(ec[3]||("http:"===ec[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),sc(nc,k,b,v),2===t)return v;i=k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!kc.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=hc.test(d)?d.replace(hc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+pc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=sc(oc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=uc(k,v,f)),u=vc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var wc=/%20/g,xc=/\[\]$/,yc=/\r?\n/g,zc=/^(?:submit|button|image|reset|file)$/i,Ac=/^(?:input|select|textarea|keygen)/i;function Bc(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||xc.test(a)?d(a,e):Bc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Bc(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Bc(c,a[c],b,e);return d.join("&").replace(wc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Ac.test(this.nodeName)&&!zc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(yc,"\r\n")}}):{name:b.name,value:c.replace(yc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cc=0,Dc={},Ec={0:200,1223:204},Fc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Dc)Dc[a]()}),k.cors=!!Fc&&"withCredentials"in Fc,k.ajax=Fc=!!Fc,n.ajaxTransport(function(a){var b;return k.cors||Fc&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Dc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Ec[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Dc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gc=[],Hc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Ic=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Ic)return Ic.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Jc=a.document.documentElement;function Kc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Kc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Jc;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Jc})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Kc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Lc=a.jQuery,Mc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Mc),b&&a.jQuery===n&&(a.jQuery=Lc),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(d){function e(a){var b=a||window.event,c=[].slice.call(arguments,1),f=0,e=0,g=0,a=d.event.fix(b);a.type="mousewheel";b.wheelDelta&&(f=b.wheelDelta/120);b.detail&&(f=-b.detail/3);g=f;b.axis!==void 0&&b.axis===b.HORIZONTAL_AXIS&&(g=0,e=-1*f);b.wheelDeltaY!==void 0&&(g=b.wheelDeltaY/120);b.wheelDeltaX!==void 0&&(e=-1*b.wheelDeltaX/120);c.unshift(a,f,e,g);return(d.event.dispatch||d.event.handle).apply(this,c)}var c=["DOMMouseScroll","mousewheel"];if(d.event.fixHooks)for(var h=c.length;h;)d.event.fixHooks[c[--h]]=
d.event.mouseHooks;d.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=c.length;a;)this.addEventListener(c[--a],e,false);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],e,false);else this.onmousewheel=null}};d.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.2.0",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),d[e](null==f[b]?this.options[b]:f[b]),setTimeout(a.proxy(function(){"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b).on("keydown.bs.carousel",a.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.2.0",c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},c.prototype.keydown=function(a){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.to=function(b){var c=this,d=this.getItemIndex(this.$active=this.$element.find(".item.active"));return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}if(e.hasClass("active"))return this.sliding=!1;var j=e[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:g});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,f&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(e)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:g});return a.support.transition&&this.$element.hasClass("slide")?(e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one("bsTransitionEnd",function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(1e3*d.css("transition-duration").slice(0,-1))):(d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger(m)),f&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b);!e&&f.toggle&&"show"==b&&(b=!b),e||d.data("bs.collapse",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};c.VERSION="3.2.0",c.DEFAULTS={toggle:!0},c.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},c.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var c=a.Event("show.bs.collapse");if(this.$element.trigger(c),!c.isDefaultPrevented()){var d=this.$parent&&this.$parent.find("> .panel > .in");if(d&&d.length){var e=d.data("bs.collapse");if(e&&e.transitioning)return;b.call(d,"hide"),e||d.data("bs.collapse",null)}var f=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[f](0),this.transitioning=1;var g=function(){this.$element.removeClass("collapsing").addClass("collapse in")[f](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return g.call(this);var h=a.camelCase(["scroll",f].join("-"));this.$element.one("bsTransitionEnd",a.proxy(g,this)).emulateTransitionEnd(350)[f](this.$element[0][h])}}},c.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},c.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var d=a.fn.collapse;a.fn.collapse=b,a.fn.collapse.Constructor=c,a.fn.collapse.noConflict=function(){return a.fn.collapse=d,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(c){var d,e=a(this),f=e.attr("data-target")||c.preventDefault()||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),g=a(f),h=g.data("bs.collapse"),i=h?"toggle":e.data(),j=e.attr("data-parent"),k=j&&a(j);h&&h.transitioning||(k&&k.find('[data-toggle="collapse"][data-parent="'+j+'"]').not(e).addClass("collapsed"),e[g.hasClass("in")?"addClass":"removeClass"]("collapsed")),b.call(g,i)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.2.0",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").empty()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},c.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){var e=a.proxy(this.process,this);this.$body=a("body"),this.$scrollElement=a(a(c).is("body")?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.2.0",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b="offset",c=0;a.isWindow(this.$scrollElement[0])||(b="position",c=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var d=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[b]().top+c,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){d.offsets.push(this[0]),d.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<=e[0])return g!=(a=f[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.2.0",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=a(document).height(),d=this.$target.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top(this.$element)),"function"==typeof h&&(h=f.bottom(this.$element));var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=b-h?"bottom":null!=g&&g>=d?"top":!1;if(this.affixed!==i){null!=this.unpin&&this.$element.css("top","");var j="affix"+(i?"-"+i:""),k=a.Event(j+".bs.affix");this.$element.trigger(k),k.isDefaultPrevented()||(this.affixed=i,this.unpin="bottom"==i?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(j).trigger(a.Event(j.replace("affix","affixed"))),"bottom"==i&&this.$element.offset({top:b-this.$element.height()-h}))}}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},d.offsetBottom&&(d.offset.bottom=d.offsetBottom),d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);
/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,
width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},
keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,
openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,
isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,
c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&
k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||
b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=
setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;
d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=
a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),
b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),
y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;
if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&
(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,
{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,
mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=
!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");
"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=
this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);
f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,
e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,
outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case "inline":case "ajax":case "html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case "image":e=a.tpl.image.replace("{href}",
g);break;case "swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":
"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?
h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||
h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&
"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();
y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&
!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),
b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=
a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):
(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===
f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,
{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=
b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=
f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?
b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),
p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===
f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=
b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case "inside":c=b.skin;break;case "outside":c=b.wrap;break;case "over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,
e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+
":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===
d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);
/*
 AngularJS v1.3.0-beta.16
 (c) 2010-2014 Google, Inc. http://angularjs.org
 License: MIT
*/
(function(P,W,t){'use strict';function O(b){return function(){var a=arguments[0],c,a="["+(b?b+":":"")+a+"] http://errors.angularjs.org/1.3.0-beta.16/"+(b?b+"/":"")+a;for(c=1;c<arguments.length;c++)a=a+(1==c?"?":"&")+"p"+(c-1)+"="+encodeURIComponent("function"==typeof arguments[c]?arguments[c].toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof arguments[c]?"undefined":"string"!=typeof arguments[c]?JSON.stringify(arguments[c]):arguments[c]);return Error(a)}}function bb(b){if(null==b||La(b))return!1;
var a=b.length;return 1===b.nodeType&&a?!0:G(b)||M(b)||0===a||"number"===typeof a&&0<a&&a-1 in b}function q(b,a,c){var d,e;if(b)if(A(b))for(d in b)"prototype"==d||("length"==d||"name"==d||b.hasOwnProperty&&!b.hasOwnProperty(d))||a.call(c,b[d],d);else if(M(b)||bb(b))for(d=0,e=b.length;d<e;d++)a.call(c,b[d],d);else if(b.forEach&&b.forEach!==q)b.forEach(a,c);else for(d in b)b.hasOwnProperty(d)&&a.call(c,b[d],d);return b}function $b(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a.sort()}
function hd(b,a,c){for(var d=$b(b),e=0;e<d.length;e++)a.call(c,b[d[e]],d[e]);return d}function ac(b){return function(a,c){b(c,a)}}function id(){return++cb}function bc(b,a){a?b.$$hashKey=a:delete b.$$hashKey}function E(b){var a=b.$$hashKey;q(arguments,function(a){a!==b&&q(a,function(a,c){b[c]=a})});bc(b,a);return b}function U(b){return parseInt(b,10)}function cc(b,a){return E(new (E(function(){},{prototype:b})),a)}function B(){}function Ba(b){return b}function ba(b){return function(){return b}}function F(b){return"undefined"===
typeof b}function v(b){return"undefined"!==typeof b}function Q(b){return null!=b&&"object"===typeof b}function G(b){return"string"===typeof b}function Ca(b){return"number"===typeof b}function da(b){return"[object Date]"===ya.call(b)}function A(b){return"function"===typeof b}function db(b){return"[object RegExp]"===ya.call(b)}function La(b){return b&&b.window===b}function jd(b){return!(!b||!(b.nodeName||b.prop&&b.attr&&b.find))}function kd(b){var a={};b=b.split(",");var c;for(c=0;c<b.length;c++)a[b[c]]=
!0;return a}function ld(b,a,c){var d=[];q(b,function(b,f,h){d.push(a.call(c,b,f,h))});return d}function Ma(b,a){if(b.indexOf)return b.indexOf(a);for(var c=0;c<b.length;c++)if(a===b[c])return c;return-1}function Da(b,a){var c=Ma(b,a);0<=c&&b.splice(c,1);return a}function Ea(b,a,c,d){if(La(b)||b&&b.$evalAsync&&b.$watch)throw Na("cpws");if(a){if(b===a)throw Na("cpi");c=c||[];d=d||[];if(Q(b)){var e=Ma(c,b);if(-1!==e)return d[e];c.push(b);d.push(a)}if(M(b))for(var f=a.length=0;f<b.length;f++)e=Ea(b[f],
null,c,d),Q(b[f])&&(c.push(b[f]),d.push(e)),a.push(e);else{var h=a.$$hashKey;q(a,function(b,c){delete a[c]});for(f in b)b.hasOwnProperty(f)&&(e=Ea(b[f],null,c,d),Q(b[f])&&(c.push(b[f]),d.push(e)),a[f]=e);bc(a,h)}}else if(a=b)M(b)?a=Ea(b,[],c,d):da(b)?a=new Date(b.getTime()):db(b)?a=RegExp(b.source):Q(b)&&(e=Object.create(Object.getPrototypeOf(b)),a=Ea(b,e,c,d));return a}function ja(b,a){var c=0;if(M(b))for(a=a||[];c<b.length;c++)a[c]=b[c];else if(Q(b)){a=a||{};for(var d=Object.keys(b),e=d.length;c<
e;c++){var f=d[c];if("$"!==f.charAt(0)||"$"!==f.charAt(1))a[f]=b[f]}}return a||b}function ra(b,a){if(b===a)return!0;if(null===b||null===a)return!1;if(b!==b&&a!==a)return!0;var c=typeof b,d;if(c==typeof a&&"object"==c)if(M(b)){if(!M(a))return!1;if((c=b.length)==a.length){for(d=0;d<c;d++)if(!ra(b[d],a[d]))return!1;return!0}}else{if(da(b))return da(a)&&b.getTime()==a.getTime();if(db(b)&&db(a))return b.toString()==a.toString();if(b&&b.$evalAsync&&b.$watch||a&&a.$evalAsync&&a.$watch||La(b)||La(a)||M(a))return!1;
c={};for(d in b)if("$"!==d.charAt(0)&&!A(b[d])){if(!ra(b[d],a[d]))return!1;c[d]=!0}for(d in a)if(!c.hasOwnProperty(d)&&"$"!==d.charAt(0)&&a[d]!==t&&!A(a[d]))return!1;return!0}return!1}function Cb(b,a){var c=2<arguments.length?ka.call(arguments,2):[];return!A(a)||a instanceof RegExp?a:c.length?function(){return arguments.length?a.apply(b,c.concat(ka.call(arguments,0))):a.apply(b,c)}:function(){return arguments.length?a.apply(b,arguments):a.call(b)}}function md(b,a){var c=a;"string"===typeof b&&"$"===
b.charAt(0)&&"$"===b.charAt(1)?c=t:La(a)?c="$WINDOW":a&&W===a?c="$DOCUMENT":a&&(a.$evalAsync&&a.$watch)&&(c="$SCOPE");return c}function sa(b,a){return"undefined"===typeof b?t:JSON.stringify(b,md,a?"  ":null)}function dc(b){return G(b)?JSON.parse(b):b}function ga(b){b=z(b).clone();try{b.empty()}catch(a){}var c=z("<div>").append(b).html();try{return 3===b[0].nodeType?J(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+J(b)})}catch(d){return J(c)}}function ec(b){try{return decodeURIComponent(b)}catch(a){}}
function fc(b){var a={},c,d;q((b||"").split("&"),function(b){b&&(c=b.replace(/\+/g,"%20").split("="),d=ec(c[0]),v(d)&&(b=v(c[1])?ec(c[1]):!0,Db.call(a,d)?M(a[d])?a[d].push(b):a[d]=[a[d],b]:a[d]=b))});return a}function Eb(b){var a=[];q(b,function(b,d){M(b)?q(b,function(b){a.push(za(d,!0)+(!0===b?"":"="+za(b,!0)))}):a.push(za(d,!0)+(!0===b?"":"="+za(b,!0)))});return a.length?a.join("&"):""}function eb(b){return za(b,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function za(b,a){return encodeURIComponent(b).replace(/%40/gi,
"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,a?"%20":"+")}function nd(b,a){var c,d,e=fb.length;b=z(b);for(d=0;d<e;++d)if(c=fb[d]+a,G(c=b.attr(c)))return c;return null}function od(b,a){var c,d,e={};q(fb,function(a){a+="app";!c&&(b.hasAttribute&&b.hasAttribute(a))&&(c=b,d=b.getAttribute(a))});q(fb,function(a){a+="app";var e;!c&&(e=b.querySelector("["+a.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(a))});c&&(e.strictDi=null!==nd(c,"strict-di"),a(c,d?[d]:[],e))}
function gc(b,a,c){Q(c)||(c={});c=E({strictDi:!1},c);var d=function(){b=z(b);if(b.injector()){var d=b[0]===W?"document":ga(b);throw Na("btstrpd",d);}a=a||[];a.unshift(["$provide",function(a){a.value("$rootElement",b)}]);a.unshift("ng");d=Fb(a,c.strictDi);d.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d);c(b)(a)})}]);return d},e=/^NG_DEFER_BOOTSTRAP!/;if(P&&!e.test(P.name))return d();P.name=P.name.replace(e,"");Oa.resumeBootstrap=
function(b){q(b,function(b){a.push(b)});d()}}function gb(b,a){a=a||"_";return b.replace(pd,function(b,d){return(d?a:"")+b.toLowerCase()})}function qd(){var b;(ta=P.jQuery)&&ta.fn.on?(z=ta,E(ta.fn,{scope:Fa.scope,isolateScope:Fa.isolateScope,controller:Fa.controller,injector:Fa.injector,inheritedData:Fa.inheritedData}),b=ta.cleanData,b=b.$$original||b,ta.cleanData=function(a){for(var c=0,d;null!=(d=a[c]);c++)ta(d).triggerHandler("$destroy");b(a)},ta.cleanData.$$original=b):z=V;Oa.element=z}function Gb(b,
a,c){if(!b)throw Na("areq",a||"?",c||"required");return b}function Pa(b,a,c){c&&M(b)&&(b=b[b.length-1]);Gb(A(b),a,"not a function, got "+(b&&"object"===typeof b?b.constructor.name||"Object":typeof b));return b}function Aa(b,a){if("hasOwnProperty"===b)throw Na("badname",a);}function hc(b,a,c){if(!a)return b;a=a.split(".");for(var d,e=b,f=a.length,h=0;h<f;h++)d=a[h],b&&(b=(e=b)[d]);return!c&&A(b)?Cb(e,b):b}function hb(b){var a=b[0];b=b[b.length-1];if(a===b)return z(a);var c=[a];do{a=a.nextSibling;if(!a)break;
c.push(a)}while(a!==b);return z(c)}function rd(b){var a=O("$injector"),c=O("ng");b=b.angular||(b.angular={});b.$$minErr=b.$$minErr||O;return b.module||(b.module=function(){var b={};return function(e,f,h){if("hasOwnProperty"===e)throw c("badname","module");f&&b.hasOwnProperty(e)&&(b[e]=null);return b[e]||(b[e]=function(){function b(a,d,e,f){f||(f=c);return function(){f[e||"push"]([a,d,arguments]);return k}}if(!f)throw a("nomod",e);var c=[],d=[],m=[],p=b("$injector","invoke","push",d),k={_invokeQueue:c,
_configBlocks:d,_runBlocks:m,requires:f,name:e,provider:b("$provide","provider"),factory:b("$provide","factory"),service:b("$provide","service"),value:b("$provide","value"),constant:b("$provide","constant","unshift"),animation:b("$animateProvider","register"),filter:b("$filterProvider","register"),controller:b("$controllerProvider","register"),directive:b("$compileProvider","directive"),config:p,run:function(a){m.push(a);return this}};h&&p(h);return k}())}}())}function sd(b){E(b,{bootstrap:gc,copy:Ea,
extend:E,equals:ra,element:z,forEach:q,injector:Fb,noop:B,bind:Cb,toJson:sa,fromJson:dc,identity:Ba,isUndefined:F,isDefined:v,isString:G,isFunction:A,isObject:Q,isNumber:Ca,isElement:jd,isArray:M,version:td,isDate:da,lowercase:J,uppercase:ib,callbacks:{counter:0},$$minErr:O,$$csp:Qa});Ra=rd(P);try{Ra("ngLocale")}catch(a){Ra("ngLocale",[]).provider("$locale",ud)}Ra("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:vd});a.provider("$compile",ic).directive({a:wd,input:jc,textarea:jc,
form:xd,script:yd,select:zd,style:Ad,option:Bd,ngBind:Cd,ngBindHtml:Dd,ngBindTemplate:Ed,ngClass:Fd,ngClassEven:Gd,ngClassOdd:Hd,ngCloak:Id,ngController:Jd,ngForm:Kd,ngHide:Ld,ngIf:Md,ngInclude:Nd,ngInit:Od,ngNonBindable:Pd,ngPluralize:Qd,ngRepeat:Rd,ngShow:Sd,ngStyle:Td,ngSwitch:Ud,ngSwitchWhen:Vd,ngSwitchDefault:Wd,ngOptions:Xd,ngTransclude:Yd,ngModel:Zd,ngList:$d,ngChange:ae,pattern:kc,ngPattern:kc,required:lc,ngRequired:lc,minlength:mc,ngMinlength:mc,maxlength:nc,ngMaxlength:nc,ngValue:be,ngModelOptions:ce}).directive({ngInclude:de}).directive(jb).directive(oc);
a.provider({$anchorScroll:ee,$animate:fe,$browser:ge,$cacheFactory:he,$controller:ie,$document:je,$exceptionHandler:ke,$filter:pc,$interpolate:le,$interval:me,$http:ne,$httpBackend:oe,$location:pe,$log:qe,$parse:re,$rootScope:se,$q:te,$$q:ue,$sce:ve,$sceDelegate:we,$sniffer:xe,$templateCache:ye,$timeout:ze,$window:Ae,$$rAF:Be,$$asyncCallback:Ce})}])}function Sa(b){return b.replace(De,function(a,b,d,e){return e?d.toUpperCase():d}).replace(Ee,"Moz$1")}function Fe(b,a){var c,d,e=a.createDocumentFragment(),
f=[];if(Hb.test(b)){c=c||e.appendChild(a.createElement("div"));d=(Ge.exec(b)||["",""])[1].toLowerCase();d=ea[d]||ea._default;c.innerHTML=d[1]+b.replace(He,"<$1></$2>")+d[2];for(d=d[0];d--;)c=c.lastChild;f=f.concat(ka.call(c.childNodes,void 0));c=e.firstChild;c.textContent=""}else f.push(a.createTextNode(b));e.textContent="";e.innerHTML="";q(f,function(a){e.appendChild(a)});return e}function V(b){if(b instanceof V)return b;G(b)&&(b=Z(b));if(!(this instanceof V)){if(G(b)&&"<"!=b.charAt(0))throw Ib("nosel");
return new V(b)}if(G(b)){var a;a=W;var c;b=(c=Ie.exec(b))?[a.createElement(c[1])]:(c=Fe(b,a))?c.childNodes:[]}qc(this,b)}function Jb(b){return b.cloneNode(!0)}function kb(b,a){a||lb(b);if(b.childNodes&&b.childNodes.length)for(var c=b.getElementsByTagName?b.getElementsByTagName("*"):b.querySelectorAll?b.querySelectorAll("*"):[],d=0,e=c.length;d<e;d++)lb(c[d])}function rc(b,a,c,d){if(v(d))throw Ib("offargs");var e=la(b,"events");la(b,"handle")&&(F(a)?q(e,function(a,c){Ta(b,c,a);delete e[c]}):q(a.split(" "),
function(a){F(c)?(Ta(b,a,e[a]),delete e[a]):Da(e[a]||[],c)}))}function lb(b,a){var c=b.ng339,d=Ua[c];d&&(a?delete Ua[c].data[a]:(d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),rc(b)),delete Ua[c],b.ng339=t))}function la(b,a,c){var d=b.ng339,d=Ua[d||-1];if(v(c))d||(b.ng339=d=++Je,d=Ua[d]={}),d[a]=c;else return d&&d[a]}function Kb(b,a,c){if(!b.nodeType||1===b.nodeType||9===b.nodeType){var d=la(b,"data"),e=v(c),f=!e&&v(a),h=f&&!Q(a);d||h||la(b,"data",d={});if(e)d[a]=c;else if(f){if(h)return d&&
d[a];E(d,a)}else return d}}function Lb(b,a){return b.getAttribute?-1<(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+a+" "):!1}function mb(b,a){a&&b.setAttribute&&q(a.split(" "),function(a){b.setAttribute("class",Z((" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Z(a)+" "," ")))})}function nb(b,a){if(a&&b.setAttribute){var c=(" "+(b.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");q(a.split(" "),function(a){a=Z(a);-1===c.indexOf(" "+a+" ")&&
(c+=a+" ")});b.setAttribute("class",Z(c))}}function qc(b,a){if(a)if(a.nodeType)b[b.length++]=a;else{var c=a.length;"number"===typeof c&&a.window!==a?c&&(a.item&&(a=ka.call(a)),sc.apply(b,a)):b[b.length++]=a}}function tc(b,a){return ob(b,"$"+(a||"ngController")+"Controller")}function ob(b,a,c){9==b.nodeType&&(b=b.documentElement);for(a=M(a)?a:[a];b;){for(var d=0,e=a.length;d<e;d++)if((c=z.data(b,a[d]))!==t)return c;b=b.parentNode||11===b.nodeType&&b.host}}function uc(b){for(kb(b,!0);b.firstChild;)b.removeChild(b.firstChild)}
function vc(b,a){var c=pb[a.toLowerCase()];return c&&wc[ma(b)]&&c}function Ke(b,a){var c=b.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&xc[a]}function Le(b,a){var c=function(c,e){c.preventDefault||(c.preventDefault=function(){c.returnValue=!1});c.stopPropagation||(c.stopPropagation=function(){c.cancelBubble=!0});c.target||(c.target=c.srcElement||W);if(F(c.defaultPrevented)){var f=c.preventDefault;c.preventDefault=function(){c.defaultPrevented=!0;f.call(c)};c.defaultPrevented=!1}c.isDefaultPrevented=
function(){return c.defaultPrevented||!1===c.returnValue};var h=ja(a[e||c.type]||[]);q(h,function(a){a.call(b,c)});8>=T?(c.preventDefault=null,c.stopPropagation=null,c.isDefaultPrevented=null):(delete c.preventDefault,delete c.stopPropagation,delete c.isDefaultPrevented)};c.elem=b;return c}function Ga(b,a){var c=typeof b,d;"function"==c||"object"==c&&null!==b?"function"==typeof(d=b.$$hashKey)?d=b.$$hashKey():d===t&&(d=b.$$hashKey=(a||id)()):d=b;return c+":"+d}function Va(b,a){if(a){var c=0;this.nextUid=
function(){return++c}}q(b,this.put,this)}function Me(b){return(b=b.toString().replace(yc,"").match(zc))?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Mb(b,a,c){var d;if("function"===typeof b){if(!(d=b.$inject)){d=[];if(b.length){if(a)throw G(c)&&c||(c=b.name||Me(b)),Ha("strictdi",c);a=b.toString().replace(yc,"");a=a.match(zc);q(a[1].split(Ne),function(a){a.replace(Oe,function(a,b,c){d.push(c)})})}b.$inject=d}}else M(b)?(a=b.length-1,Pa(b[a],"fn"),d=b.slice(0,a)):Pa(b,"fn",!0);
return d}function Fb(b,a){function c(a){return function(b,c){if(Q(b))q(b,ac(a));else return a(b,c)}}function d(a,b){Aa(a,"service");if(A(b)||M(b))b=k.instantiate(b);if(!b.$get)throw Ha("pget",a);return p[a+n]=b}function e(a,b){return d(a,{$get:b})}function f(a){var b=[],c;q(a,function(a){function d(a){var b,c;b=0;for(c=a.length;b<c;b++){var e=a[b],f=k.get(e[0]);f[e[1]].apply(f,e[2])}}if(!m.get(a)){m.put(a,!0);try{G(a)?(c=Ra(a),b=b.concat(f(c.requires)).concat(c._runBlocks),d(c._invokeQueue),d(c._configBlocks)):
A(a)?b.push(k.invoke(a)):M(a)?b.push(k.invoke(a)):Pa(a,"module")}catch(e){throw M(a)&&(a=a[a.length-1]),e.message&&(e.stack&&-1==e.stack.indexOf(e.message))&&(e=e.message+"\n"+e.stack),Ha("modulerr",a,e.stack||e.message||e);}}});return b}function h(b,c){function d(a){if(b.hasOwnProperty(a)){if(b[a]===g)throw Ha("cdep",a+" <- "+l.join(" <- "));return b[a]}try{return l.unshift(a),b[a]=g,b[a]=c(a)}catch(e){throw b[a]===g&&delete b[a],e;}finally{l.shift()}}function e(b,c,f,g){"string"===typeof f&&(g=
f,f=null);var h=[];g=Mb(b,a,g);var n,l,k;l=0;for(n=g.length;l<n;l++){k=g[l];if("string"!==typeof k)throw Ha("itkn",k);h.push(f&&f.hasOwnProperty(k)?f[k]:d(k))}M(b)&&(b=b[n]);return b.apply(c,h)}return{invoke:e,instantiate:function(a,b,c){var d=function(){};d.prototype=(M(a)?a[a.length-1]:a).prototype;d=new d;a=e(a,d,b,c);return Q(a)||A(a)?a:d},get:d,annotate:Mb,has:function(a){return p.hasOwnProperty(a+n)||b.hasOwnProperty(a)}}}a=!0===a;var g={},n="Provider",l=[],m=new Va([],!0),p={$provide:{provider:c(d),
factory:c(e),service:c(function(a,b){return e(a,["$injector",function(a){return a.instantiate(b)}])}),value:c(function(a,b){return e(a,ba(b))}),constant:c(function(a,b){Aa(a,"constant");p[a]=b;s[a]=b}),decorator:function(a,b){var c=k.get(a+n),d=c.$get;c.$get=function(){var a=r.invoke(d,c);return r.invoke(b,null,{$delegate:a})}}}},k=p.$injector=h(p,function(){throw Ha("unpr",l.join(" <- "));},a),s={},r=s.$injector=h(s,function(a){var b=k.get(a+n);return r.invoke(b.$get,b,t,a)},a);q(f(b),function(a){r.invoke(a||
B)});return r}function ee(){var b=!0;this.disableAutoScrolling=function(){b=!1};this.$get=["$window","$location","$rootScope",function(a,c,d){function e(a){var b=null;q(a,function(a){b||"a"!==ma(a)||(b=a)});return b}function f(){var b=c.hash(),d;b?(d=h.getElementById(b))?d.scrollIntoView():(d=e(h.getElementsByName(b)))?d.scrollIntoView():"top"===b&&a.scrollTo(0,0):a.scrollTo(0,0)}var h=a.document;b&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(f)});return f}]}function Ce(){this.$get=
["$$rAF","$timeout",function(b,a){return b.supported?function(a){return b(a)}:function(b){return a(b,0,!1)}}]}function Pe(b,a,c,d){function e(a){try{a.apply(null,ka.call(arguments,1))}finally{if(r--,0===r)for(;L.length;)try{L.pop()()}catch(b){c.error(b)}}}function f(a,b){(function qb(){q(u,function(a){a()});K=b(qb,a)})()}function h(){y=null;w!=g.url()&&(w=g.url(),q(Y,function(a){a(g.url())}))}var g=this,n=a[0],l=b.location,m=b.history,p=b.setTimeout,k=b.clearTimeout,s={};g.isMock=!1;var r=0,L=[];
g.$$completeOutstandingRequest=e;g.$$incOutstandingRequestCount=function(){r++};g.notifyWhenNoOutstandingRequests=function(a){q(u,function(a){a()});0===r?a():L.push(a)};var u=[],K;g.addPollFn=function(a){F(K)&&f(100,p);u.push(a);return a};var w=l.href,x=a.find("base"),y=null;g.url=function(a,c){l!==b.location&&(l=b.location);m!==b.history&&(m=b.history);if(a){if(w!=a)return w=a,d.history?c?m.replaceState(null,"",a):(m.pushState(null,"",a),x.attr("href",x.attr("href"))):(y=a,c?l.replace(a):l.href=
a),g}else return y||l.href.replace(/%27/g,"'")};var Y=[],N=!1;g.onUrlChange=function(a){if(!N){if(d.history)z(b).on("popstate",h);if(d.hashchange)z(b).on("hashchange",h);else g.addPollFn(h);N=!0}Y.push(a);return a};g.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var R={},H="",C=g.baseHref();g.cookies=function(a,b){var d,e,f,g;if(a)b===t?n.cookie=encodeURIComponent(a)+"=;path="+C+";expires=Thu, 01 Jan 1970 00:00:00 GMT":G(b)&&(d=(n.cookie=encodeURIComponent(a)+
"="+encodeURIComponent(b)+";path="+C).length+1,4096<d&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+d+" > 4096 bytes)!"));else{if(n.cookie!==H)for(H=n.cookie,d=H.split("; "),R={},f=0;f<d.length;f++)e=d[f],g=e.indexOf("="),0<g&&(a=decodeURIComponent(e.substring(0,g)),R[a]===t&&(R[a]=decodeURIComponent(e.substring(g+1))));return R}};g.defer=function(a,b){var c;r++;c=p(function(){delete s[c];e(a)},b||0);s[c]=!0;return c};g.defer.cancel=function(a){return s[a]?(delete s[a],
k(a),e(B),!0):!1}}function ge(){this.$get=["$window","$log","$sniffer","$document",function(b,a,c,d){return new Pe(b,d,a,c)}]}function he(){this.$get=function(){function b(b,d){function e(a){a!=p&&(k?k==a&&(k=a.n):k=a,f(a.n,a.p),f(a,p),p=a,p.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(b in a)throw O("$cacheFactory")("iid",b);var h=0,g=E({},d,{id:b}),n={},l=d&&d.capacity||Number.MAX_VALUE,m={},p=null,k=null;return a[b]={put:function(a,b){if(l<Number.MAX_VALUE){var c=m[a]||(m[a]={key:a});
e(c)}if(!F(b))return a in n||h++,n[a]=b,h>l&&this.remove(k.key),b},get:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;e(b)}return n[a]},remove:function(a){if(l<Number.MAX_VALUE){var b=m[a];if(!b)return;b==p&&(p=b.p);b==k&&(k=b.n);f(b.n,b.p);delete m[a]}delete n[a];h--},removeAll:function(){n={};h=0;m={};p=k=null},destroy:function(){m=g=n=null;delete a[b]},info:function(){return E({},g,{size:h})}}}var a={};b.info=function(){var b={};q(a,function(a,e){b[e]=a.info()});return b};b.get=function(b){return a[b]};
return b}}function ye(){this.$get=["$cacheFactory",function(b){return b("templates")}]}function ic(b,a){var c={},d="Directive",e=/^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,f=/(([\d\w_\-]+)(?:\:([^;]+))?;?)/,h=kd("ngSrc,ngSrcset,src,srcset"),g=/^(on[a-z]+|formaction)$/;this.directive=function l(a,e){Aa(a,"directive");G(a)?(Gb(e,"directiveFactory"),c.hasOwnProperty(a)||(c[a]=[],b.factory(a+d,["$injector","$exceptionHandler",function(b,d){var e=[];q(c[a],function(c,f){try{var g=b.invoke(c);A(g)?g={compile:ba(g)}:
!g.compile&&g.link&&(g.compile=ba(g.link));g.priority=g.priority||0;g.index=f;g.name=g.name||a;g.require=g.require||g.controller&&g.name;g.restrict=g.restrict||"A";e.push(g)}catch(h){d(h)}});return e}])),c[a].push(e)):q(a,ac(l));return this};this.aHrefSanitizationWhitelist=function(b){return v(b)?(a.aHrefSanitizationWhitelist(b),this):a.aHrefSanitizationWhitelist()};this.imgSrcSanitizationWhitelist=function(b){return v(b)?(a.imgSrcSanitizationWhitelist(b),this):a.imgSrcSanitizationWhitelist()};this.$get=
["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,b,p,k,s,r,L,u,K,w,x,y){function Y(a,b,c,d,e){a instanceof z||(a=z(a));q(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=z(b).wrap("<span></span>").parent()[0])});var f=R(a,b,a,c,d,e);N(a,"ng-scope");return function(b,c,d,e){Gb(b,"scope");var g=c?Fa.clone.call(a):a;q(d,function(a,b){g.data("$"+b+"Controller",a)});g.data("$scope",
b);c&&c(g,b);f&&f(b,g,g,e);return g}}function N(a,b){try{a.addClass(b)}catch(c){}}function R(a,b,c,d,e,f){function g(a,c,d,e){var f,l,k,m,p,s,u;f=c.length;var r=Array(f);for(m=0;m<f;m++)r[m]=c[m];s=m=0;for(p=h.length;m<p;s++)l=r[s],c=h[m++],f=h[m++],c?(c.scope?(k=a.$new(),z.data(l,"$scope",k)):k=a,u=c.transcludeOnThisElement?H(a,c.transclude,e):!c.templateOnThisElement&&e?e:!e&&b?H(a,b):null,c(f,k,l,d,u)):f&&f(a,l.childNodes,t,e)}for(var h=[],l,k,m,p,s=0;s<a.length;s++)l=new Nb,k=C(a[s],[],l,0===
s?d:t,e),(f=k.length?ca(k,a[s],l,b,c,null,[],[],f):null)&&f.scope&&N(l.$$element,"ng-scope"),l=f&&f.terminal||!(m=a[s].childNodes)||!m.length?null:R(m,f?(f.transcludeOnThisElement||!f.templateOnThisElement)&&f.transclude:b),h.push(f,l),p=p||f||l,f=null;return p?g:null}function H(a,b,c){return function(d,e,f){var g=!1;d||(d=a.$new(),g=d.$$transcluded=!0);e=b(d,e,f,c);if(g)e.on("$destroy",function(){d.$destroy()});return e}}function C(b,g,h,k,m){var p=h.$attr,s;switch(b.nodeType){case 1:v(g,oa(ma(b)),
"E",k,m);for(var u,r,K,L=b.attributes,x=0,w=L&&L.length;x<w;x++){var y=!1,N=!1;u=L[x];if(!T||8<=T||u.specified){s=u.name;u=Z(u.value);r=oa(s);if(K=ua.test(r))s=gb(r.substr(6),"-");var q=r.replace(/(Start|End)$/,""),H;a:{var D=q;if(c.hasOwnProperty(D)){H=void 0;for(var D=a.get(D+d),X=0,C=D.length;X<C;X++)if(H=D[X],H.multiElement){H=!0;break a}}H=!1}H&&r===q+"Start"&&(y=s,N=s.substr(0,s.length-5)+"end",s=s.substr(0,s.length-6));r=oa(s.toLowerCase());p[r]=s;if(K||!h.hasOwnProperty(r))h[r]=u,vc(b,r)&&
(h[r]=!0);S(b,g,u,r);v(g,r,"A",k,m,y,N)}}b=b.className;if(G(b)&&""!==b)for(;s=f.exec(b);)r=oa(s[2]),v(g,r,"C",k,m)&&(h[r]=Z(s[3])),b=b.substr(s.index+s[0].length);break;case 3:O(g,b.nodeValue);break;case 8:try{if(s=e.exec(b.nodeValue))r=oa(s[1]),v(g,r,"M",k,m)&&(h[r]=Z(s[2]))}catch(R){}}g.sort(F);return g}function D(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw ha("uterdir",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--);d.push(a);a=a.nextSibling}while(0<
e)}else d.push(a);return z(d)}function X(a,b,c){return function(d,e,f,g,h){e=D(e[0],b,c);return a(d,e,f,g,h)}}function ca(a,c,d,e,f,g,h,l,k){function s(a,b,c,d){if(a){c&&(a=X(a,c,d));a.require=I.require;a.directiveName=na;if(H===I||I.$$isolateScope)a=Cc(a,{isolateScope:!0});h.push(a)}if(b){c&&(b=X(b,c,d));b.require=I.require;b.directiveName=na;if(H===I||I.$$isolateScope)b=Cc(b,{isolateScope:!0});l.push(b)}}function u(a,b,c,d){var e,f="data",g=!1;if(G(b)){for(;"^"==(e=b.charAt(0))||"?"==e;)b=b.substr(1),
"^"==e&&(f="inheritedData"),g=g||"?"==e;e=null;d&&"data"===f&&(e=d[b]);e=e||c[f]("$"+b+"Controller");if(!e&&!g)throw ha("ctreq",b,a);}else M(b)&&(e=[],q(b,function(b){e.push(u(a,b,c,d))}));return e}function K(a,e,f,g,k){function s(a,b){var c;2>arguments.length&&(b=a,a=t);F&&(c=ca);return k(a,b,c)}var x,w,Bc,D,X,C,ca={},Y;x=c===f?d:ja(d,new Nb(z(f),d.$attr));w=x.$$element;if(H){var v=/^\s*([@=&])(\??)\s*(\w*)\s*$/;C=e.$new(!0);!R||R!==H&&R!==H.$$originalDirective?w.data("$isolateScopeNoTemplate",C):
w.data("$isolateScope",C);N(w,"ng-isolate-scope");q(H.scope,function(a,c){var d=a.match(v)||[],f=d[3]||c,g="?"==d[2],d=d[1],h,k,l,s;C.$$isolateBindings[c]=d+f;switch(d){case "@":x.$observe(f,function(a){C[c]=a});x.$$observers[f].$$scope=e;x[f]&&(C[c]=b(x[f])(e));break;case "=":if(g&&!x[f])break;k=r(x[f]);s=k.literal?ra:function(a,b){return a===b};l=k.assign||function(){h=C[c]=k(e);throw ha("nonassign",x[f],H.name);};h=C[c]=k(e);g=e.$watch(r(x[f],function(a){s(a,C[c])||(s(a,h)?l(e,a=C[c]):C[c]=a);
return h=a}),null,k.literal);C.$on("$destroy",g);break;case "&":k=r(x[f]);C[c]=function(a){return k(e,a)};break;default:throw ha("iscp",H.name,c,a);}})}Y=k&&s;y&&q(y,function(a){var b={$scope:a===H||a.$$isolateScope?C:e,$element:w,$attrs:x,$transclude:Y},c;X=a.controller;"@"==X&&(X=x[a.name]);c=L(X,b);ca[a.name]=c;F||w.data("$"+a.name+"Controller",c);a.controllerAs&&(b.$scope[a.controllerAs]=c)});g=0;for(Bc=h.length;g<Bc;g++)try{D=h[g],D(D.isolateScope?C:e,w,x,D.require&&u(D.directiveName,D.require,
w,ca),Y)}catch(Qe){p(Qe,ga(w))}g=e;H&&(H.template||null===H.templateUrl)&&(g=C);a&&a(g,f.childNodes,t,k);for(g=l.length-1;0<=g;g--)try{D=l[g],D(D.isolateScope?C:e,w,x,D.require&&u(D.directiveName,D.require,w,ca),Y)}catch(S){p(S,ga(w))}}k=k||{};for(var x=-Number.MAX_VALUE,w,y=k.controllerDirectives,H=k.newIsolateScopeDirective,R=k.templateDirective,ca=k.nonTlbTranscludeDirective,v=!1,Wa=!1,F=k.hasElementTranscludeDirective,E=d.$$element=z(c),I,na,S,O=e,J,P=0,ua=a.length;P<ua;P++){I=a[P];var T=I.$$start,
U=I.$$end;T&&(E=D(c,T,U));S=t;if(x>I.priority)break;if(S=I.scope)I.templateUrl||(Q(S)?(Ia("new/isolated scope",H||w,I,E),H=I):Ia("new/isolated scope",H,I,E)),w=w||I;na=I.name;!I.templateUrl&&I.controller&&(S=I.controller,y=y||{},Ia("'"+na+"' controller",y[na],I,E),y[na]=I);if(S=I.transclude)v=!0,I.$$tlb||(Ia("transclusion",ca,I,E),ca=I),"element"==S?(F=!0,x=I.priority,S=E,E=d.$$element=z(W.createComment(" "+na+": "+d[na]+" ")),c=E[0],rb(f,ka.call(S,0),c),O=Y(S,e,x,g&&g.name,{nonTlbTranscludeDirective:ca})):
(S=z(Jb(c)).contents(),E.empty(),O=Y(S,e));if(I.template)if(Wa=!0,Ia("template",R,I,E),R=I,S=A(I.template)?I.template(E,d):I.template,S=Dc(S),I.replace){g=I;S=Hb.test(S)?z(V(I.type,Z(S))):[];c=S[0];if(1!=S.length||1!==c.nodeType)throw ha("tplrt",na,"");rb(f,E,c);ua={$attr:{}};S=C(c,[],ua);var Se=a.splice(P+1,a.length-(P+1));H&&qb(S);a=a.concat(S).concat(Se);Ac(d,ua);ua=a.length}else E.html(S);if(I.templateUrl)Wa=!0,Ia("template",R,I,E),R=I,I.replace&&(g=I),K=B(a.splice(P,a.length-P),E,d,f,v&&O,h,
l,{controllerDirectives:y,newIsolateScopeDirective:H,templateDirective:R,nonTlbTranscludeDirective:ca}),ua=a.length;else if(I.compile)try{J=I.compile(E,d,O),A(J)?s(null,J,T,U):J&&s(J.pre,J.post,T,U)}catch(Re){p(Re,ga(E))}I.terminal&&(K.terminal=!0,x=Math.max(x,I.priority))}K.scope=w&&!0===w.scope;K.transcludeOnThisElement=v;K.templateOnThisElement=Wa;K.transclude=O;k.hasElementTranscludeDirective=F;return K}function qb(a){for(var b=0,c=a.length;b<c;b++)a[b]=cc(a[b],{$$isolateScope:!0})}function v(b,
e,f,g,h,k,m){if(e===h)return null;h=null;if(c.hasOwnProperty(e)){var s;e=a.get(e+d);for(var u=0,r=e.length;u<r;u++)try{s=e[u],(g===t||g>s.priority)&&-1!=s.restrict.indexOf(f)&&(k&&(s=cc(s,{$$start:k,$$end:m})),b.push(s),h=s)}catch(K){p(K)}}return h}function Ac(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;q(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))});q(b,function(b,f){"class"==f?(N(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==
f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function B(a,b,c,d,e,f,g,h){var l=[],m,p,u=b[0],r=a.shift(),K=E({},r,{templateUrl:null,transclude:null,replace:null,$$originalDirective:r}),x=A(r.templateUrl)?r.templateUrl(b,c):r.templateUrl,L=r.type;b.empty();k.get(w.getTrustedResourceUrl(x),{cache:s}).success(function(k){var s,w;k=Dc(k);if(r.replace){k=Hb.test(k)?z(V(L,Z(k))):[];s=k[0];if(1!=k.length||1!==s.nodeType)throw ha("tplrt",
r.name,x);k={$attr:{}};rb(d,b,s);var y=C(s,[],k);Q(r.scope)&&qb(y);a=y.concat(a);Ac(c,k)}else s=u,b.html(k);a.unshift(K);m=ca(a,s,c,e,b,r,f,g,h);q(d,function(a,c){a==s&&(d[c]=b[0])});for(p=R(b[0].childNodes,e);l.length;){k=l.shift();w=l.shift();var D=l.shift(),X=l.shift(),y=b[0];if(w!==u){var Y=w.className;h.hasElementTranscludeDirective&&r.replace||(y=Jb(s));rb(D,z(w),y);N(z(y),Y)}w=m.transcludeOnThisElement?H(k,m.transclude,X):X;m(p,k,y,d,w)}l=null}).error(function(a,b,c,d){throw ha("tpload",d.url);
});return function(a,b,c,d,e){a=e;l?(l.push(b),l.push(c),l.push(d),l.push(a)):(m.transcludeOnThisElement&&(a=H(b,m.transclude,e)),m(p,b,c,d,a))}}function F(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Ia(a,b,c,d){if(b)throw ha("multidir",b.name,c.name,a,ga(d));}function O(a,c){var d=b(c,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent().length;b&&N(a.parent(),"ng-binding");return function(a,c){var e=c.parent(),f=e.data("$binding")||
[];f.push(d);e.data("$binding",f);b||N(e,"ng-binding");a.$watch(d,function(a){c[0].nodeValue=a})}}})}function V(a,b){a=J(a||"html");switch(a){case "svg":case "math":var c=W.createElement("div");c.innerHTML="<"+a+">"+b+"</"+a+">";return c.childNodes[0].childNodes;default:return b}}function Wa(a,b){if("srcdoc"==b)return w.HTML;var c=ma(a);if("xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b))return w.RESOURCE_URL}function S(a,c,d,e){var f=b(d,!0);if(f){if("multiple"===e&&"select"===
ma(a))throw ha("selmulti",ga(a));c.push({priority:100,compile:function(){return{pre:function(c,d,k){d=k.$$observers||(k.$$observers={});if(g.test(e))throw ha("nodomevents");if(f=b(k[e],!0,Wa(a,e),h[e]))k[e]=f(c),(d[e]||(d[e]=[])).$$inter=!0,(k.$$observers&&k.$$observers[e].$$scope||c).$watch(f,function(a,b){"class"===e&&a!=b?k.$updateClass(a,b):k.$set(e,a)})}}}})}}function rb(a,b,c){var d=b[0],e=b.length,f=d.parentNode,g,h;if(a)for(g=0,h=a.length;g<h;g++)if(a[g]==d){a[g++]=c;h=g+e-1;for(var k=a.length;g<
k;g++,h++)h<k?a[g]=a[h]:delete a[g];a.length-=e-1;break}f&&f.replaceChild(c,d);a=W.createDocumentFragment();a.appendChild(d);c[z.expando]=d[z.expando];d=1;for(e=b.length;d<e;d++)f=b[d],z(f).remove(),a.appendChild(f),delete b[d];b[0]=c;b.length=1}function Cc(a,b){return E(function(){return a.apply(null,arguments)},a,b)}var Nb=function(a,b){this.$$element=a;this.$attr=b||{}};Nb.prototype={$normalize:oa,$addClass:function(a){a&&0<a.length&&x.addClass(this.$$element,a)},$removeClass:function(a){a&&0<
a.length&&x.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=Ec(a,b),d=Ec(b,a);0===c.length?x.removeClass(this.$$element,d):0===d.length?x.addClass(this.$$element,c):x.setClass(this.$$element,c,d)},$set:function(a,b,c,d){var e=this.$$element[0],f=vc(e,a),g=Ke(e,a),e=a;f?(this.$$element.prop(a,b),d=f):g&&(this[g]=b,e=g);this[a]=b;d?this.$attr[a]=d:(d=this.$attr[a])||(this.$attr[a]=d=gb(a,"-"));f=ma(this.$$element);if("a"===f&&"href"===a||"img"===f&&"src"===a)this[a]=b=y(b,"src"===a);
!1!==c&&(null===b||b===t?this.$$element.removeAttr(d):this.$$element.attr(d,b));(a=this.$$observers)&&q(a[e],function(a){try{a(b)}catch(c){p(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);e.push(b);u.$evalAsync(function(){e.$$inter||b(c[a])});return function(){Da(e,b)}}};var P=b.startSymbol(),U=b.endSymbol(),Dc="{{"==P||"}}"==U?Ba:function(a){return a.replace(/\{\{/g,P).replace(/}}/g,U)},ua=/^ngAttr[A-Z]/;return Y}]}function oa(b){return Sa(b.replace(Te,
""))}function Ec(b,a){var c="",d=b.split(/\s+/),e=a.split(/\s+/),f=0;a:for(;f<d.length;f++){for(var h=d[f],g=0;g<e.length;g++)if(h==e[g])continue a;c+=(0<c.length?" ":"")+h}return c}function ie(){var b={},a=!1,c=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(a,c){Aa(a,"controller");Q(a)?E(b,a):b[a]=c};this.allowGlobals=function(){a=!0};this.$get=["$injector","$window",function(d,e){return function(f,h){var g,n,l;G(f)&&(g=f.match(c),n=g[1],l=g[3],f=b.hasOwnProperty(n)?b[n]:hc(h.$scope,n,!0)||(a?
hc(e,n,!0):t),Pa(f,n,!0));g=d.instantiate(f,h,n);if(l){if(!h||"object"!==typeof h.$scope)throw O("$controller")("noscp",n||f.name,l);h.$scope[l]=g}return g}}]}function je(){this.$get=["$window",function(b){return z(b.document)}]}function ke(){this.$get=["$log",function(b){return function(a,c){b.error.apply(b,arguments)}}]}function Fc(b){var a={},c,d,e;if(!b)return a;q(b.split("\n"),function(b){e=b.indexOf(":");c=J(Z(b.substr(0,e)));d=Z(b.substr(e+1));c&&(a[c]=a[c]?a[c]+", "+d:d)});return a}function Gc(b){var a=
Q(b)?b:t;return function(c){a||(a=Fc(b));return c?a[J(c)]||null:a}}function Hc(b,a,c){if(A(c))return c(b,a);q(c,function(c){b=c(b,a)});return b}function ne(){var b=/^\s*(\[|\{[^\{])/,a=/[\}\]]\s*$/,c=/^\)\]\}',?\n/,d={"Content-Type":"application/json;charset=utf-8"},e=this.defaults={transformResponse:[function(d){G(d)&&(d=d.replace(c,""),b.test(d)&&a.test(d)&&(d=dc(d)));return d}],transformRequest:[function(a){return Q(a)&&"[object File]"!==ya.call(a)&&"[object Blob]"!==ya.call(a)?sa(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},
post:ja(d),put:ja(d),patch:ja(d)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},f=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,c,d,m,p){function k(a){function b(a){var d=E({},a,{data:Hc(a.data,a.headers,c.transformResponse)});return 200<=a.status&&300>a.status?d:m.reject(d)}var c={method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse},d=function(a){var b=e.headers,c=E({},a.headers),
d,f,b=E({},b.common,b[J(a.method)]);a:for(d in b){a=J(d);for(f in c)if(J(f)===a)continue a;c[d]=b[d]}(function(a){var b;q(a,function(c,d){A(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})})(c);return c}(a);E(c,a);c.headers=d;c.method=ib(c.method);var f=[function(a){d=a.headers;var c=Hc(a.data,Gc(d),a.transformRequest);F(c)&&q(d,function(a,b){"content-type"===J(b)&&delete d[b]});F(a.withCredentials)&&!F(e.withCredentials)&&(a.withCredentials=e.withCredentials);return s(a,c,d).then(b,b)},t],g=m.when(c);for(q(u,
function(a){(a.request||a.requestError)&&f.unshift(a.request,a.requestError);(a.response||a.responseError)&&f.push(a.response,a.responseError)});f.length;){a=f.shift();var h=f.shift(),g=g.then(a,h)}g.success=function(a){g.then(function(b){a(b.data,b.status,b.headers,c)});return g};g.error=function(a){g.then(null,function(b){a(b.data,b.status,b.headers,c)});return g};return g}function s(c,f,n){function s(a,b,c,e){C&&(200<=a&&300>a?C.put(X,[a,b,Fc(c),e]):C.remove(X));p(b,a,c,e);d.$$phase||d.$apply()}
function p(a,b,d,e){b=Math.max(b,0);(200<=b&&300>b?q.resolve:q.reject)({data:a,status:b,headers:Gc(d),config:c,statusText:e})}function u(){var a=Ma(k.pendingRequests,c);-1!==a&&k.pendingRequests.splice(a,1)}var q=m.defer(),H=q.promise,C,D,X=r(c.url,c.params);k.pendingRequests.push(c);H.then(u,u);(c.cache||e.cache)&&(!1!==c.cache&&"GET"==c.method)&&(C=Q(c.cache)?c.cache:Q(e.cache)?e.cache:L);if(C)if(D=C.get(X),v(D)){if(D.then)return D.then(u,u),D;M(D)?p(D[1],D[0],ja(D[2]),D[3]):p(D,200,{},"OK")}else C.put(X,
H);F(D)&&((D=Ob(c.url)?b.cookies()[c.xsrfCookieName||e.xsrfCookieName]:t)&&(n[c.xsrfHeaderName||e.xsrfHeaderName]=D),a(c.method,X,f,s,n,c.timeout,c.withCredentials,c.responseType));return H}function r(a,b){if(!b)return a;var c=[];hd(b,function(a,b){null===a||F(a)||(M(a)||(a=[a]),q(a,function(a){Q(a)&&(da(a)?a=a.toISOString():Q(a)&&(a=sa(a)));c.push(za(b)+"="+za(a))}))});0<c.length&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&"));return a}var L=c("$http"),u=[];q(f,function(a){u.unshift(G(a)?p.get(a):
p.invoke(a))});k.pendingRequests=[];(function(a){q(arguments,function(a){k[a]=function(b,c){return k(E(c||{},{method:a,url:b}))}})})("get","delete","head","jsonp");(function(a){q(arguments,function(a){k[a]=function(b,c,d){return k(E(d||{},{method:a,url:b,data:c}))}})})("post","put","patch");k.defaults=e;return k}]}function Ue(b){if(8>=T&&(!b.match(/^(get|post|head|put|delete|options)$/i)||!P.XMLHttpRequest))return new P.ActiveXObject("Microsoft.XMLHTTP");if(P.XMLHttpRequest)return new P.XMLHttpRequest;
throw O("$httpBackend")("noxhr");}function oe(){this.$get=["$browser","$window","$document",function(b,a,c){return Ve(b,Ue,b.defer,a.angular.callbacks,c[0])}]}function Ve(b,a,c,d,e){function f(a,b,c){var f=e.createElement("script"),h=null;f.type="text/javascript";f.src=a;f.async=!0;h=function(a){Ta(f,"load",h);Ta(f,"error",h);e.body.removeChild(f);f=null;var g=-1,r="unknown";a&&("load"!==a.type||d[b].called||(a={type:"error"}),r=a.type,g="error"===a.type?404:200);c&&c(g,r)};sb(f,"load",h);sb(f,"error",
h);e.body.appendChild(f);return h}var h=-1;return function(e,n,l,m,p,k,s,r){function L(){K=h;x&&x();y&&y.abort()}function u(a,d,e,f,g){N&&c.cancel(N);x=y=null;0===d&&(d=e?200:"file"==va(n).protocol?404:0);a(1223===d?204:d,e,f,g||"");b.$$completeOutstandingRequest(B)}var K;b.$$incOutstandingRequestCount();n=n||b.url();if("jsonp"==J(e)){var w="_"+(d.counter++).toString(36);d[w]=function(a){d[w].data=a;d[w].called=!0};var x=f(n.replace("JSON_CALLBACK","angular.callbacks."+w),w,function(a,b){u(m,a,d[w].data,
"",b);d[w]=B})}else{var y=a(e);y.open(e,n,!0);q(p,function(a,b){v(a)&&y.setRequestHeader(b,a)});y.onreadystatechange=function(){if(y&&4==y.readyState){var a=null,b=null,c="";K!==h&&(a=y.getAllResponseHeaders(),b="response"in y?y.response:y.responseText);K===h&&10>T||(c=y.statusText);u(m,K||y.status,b,a,c)}};s&&(y.withCredentials=!0);if(r)try{y.responseType=r}catch(Y){if("json"!==r)throw Y;}y.send(l||null)}if(0<k)var N=c(L,k);else k&&k.then&&k.then(L)}}function le(){var b="{{",a="}}";this.startSymbol=
function(a){return a?(b=a,this):b};this.endSymbol=function(b){return b?(a=b,this):a};this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function h(f,h,s,r){function L(a){try{var b;var c=s?e.getTrusted(s,a):e.valueOf(a);if(null==c)b="";else{switch(typeof c){case "string":break;case "number":c=""+c;break;default:c=sa(c)}b=c}return b}catch(g){a=Pb("interr",f,g.toString()),d(a)}}r=!!r;for(var u,K,w=0,x=[],y=[],Y=[],N=f.length,R=!1,H=!1,C=[];w<N;)if(-1!=(u=f.indexOf(b,
w))&&-1!=(K=f.indexOf(a,u+g)))w!==u&&(H=!0),x.push(f.substring(w,u)),w=f.substring(u+g,K),y.push(w),Y.push(c(w,L)),w=K+n,R=!0;else{w!==N&&(H=!0,x.push(f.substring(w)));break}q(x,function(c,d){x[d]=x[d].replace(l,b).replace(m,a)});x.length===y.length&&x.push("");if(s&&R&&(H||1<y.length))throw Pb("noconcat",f);if(!h||R){C.length=x.length+y.length;var D=function(a){for(var b=0,c=y.length;b<c;b++){if(r&&F(a[b]))return;C[2*b]=x[b];C[2*b+1]=a[b]}C[2*c]=x[c];return C.join("")};return E(function(a){var b=
0,c=y.length,e=Array(c);try{for(;b<c;b++)e[b]=Y[b](a);return D(e)}catch(g){a=Pb("interr",f,g.toString()),d(a)}},{exp:f,separators:x,expressions:y,$$watchDelegate:function(a,b,c,d){var e;return a.$watchGroup(Y,function(c,d){var f=D(c);A(b)&&b.call(this,f,c!==d?e:f,a);e=f},c,d)}})}}var g=b.length,n=a.length,l=RegExp(b.replace(/./g,f),"g"),m=RegExp(a.replace(/./g,f),"g");h.startSymbol=function(){return b};h.endSymbol=function(){return a};return h}]}function me(){this.$get=["$rootScope","$window","$q",
"$$q",function(b,a,c,d){function e(e,g,n,l){var m=a.setInterval,p=a.clearInterval,k=0,s=v(l)&&!l,r=(s?d:c).defer(),L=r.promise;n=v(n)?n:0;L.then(null,null,e);L.$$intervalId=m(function(){r.notify(k++);0<n&&k>=n&&(r.resolve(k),p(L.$$intervalId),delete f[L.$$intervalId]);s||b.$apply()},g);f[L.$$intervalId]=r;return L}var f={};e.cancel=function(b){return b&&b.$$intervalId in f?(f[b.$$intervalId].reject("canceled"),a.clearInterval(b.$$intervalId),delete f[b.$$intervalId],!0):!1};return e}]}function ud(){this.$get=
function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"\u00a4",posSuf:"",negPre:"(\u00a4",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(b){return 1===b?"one":"other"}}}}function Qb(b){b=b.split("/");for(var a=b.length;a--;)b[a]=eb(b[a]);return b.join("/")}function Ic(b,a,c){b=va(b,c);a.$$protocol=b.protocol;a.$$host=b.hostname;a.$$port=U(b.port)||We[b.protocol]||null}
function Jc(b,a,c){var d="/"!==b.charAt(0);d&&(b="/"+b);b=va(b,c);a.$$path=decodeURIComponent(d&&"/"===b.pathname.charAt(0)?b.pathname.substring(1):b.pathname);a.$$search=fc(b.search);a.$$hash=decodeURIComponent(b.hash);a.$$path&&"/"!=a.$$path.charAt(0)&&(a.$$path="/"+a.$$path)}function pa(b,a){if(0===a.indexOf(b))return a.substr(b.length)}function Xa(b){var a=b.indexOf("#");return-1==a?b:b.substr(0,a)}function Rb(b){return b.substr(0,Xa(b).lastIndexOf("/")+1)}function Kc(b,a){this.$$html5=!0;a=a||
"";var c=Rb(b);Ic(b,this,b);this.$$parse=function(a){var e=pa(c,a);if(!G(e))throw Sb("ipthprfx",a,c);Jc(e,this,b);this.$$path||(this.$$path="/");this.$$compose()};this.$$compose=function(){var a=Eb(this.$$search),b=this.$$hash?"#"+eb(this.$$hash):"";this.$$url=Qb(this.$$path)+(a?"?"+a:"")+b;this.$$absUrl=c+this.$$url.substr(1)};this.$$rewrite=function(d){var e;if((e=pa(b,d))!==t)return d=e,(e=pa(a,e))!==t?c+(pa("/",e)||e):b+d;if((e=pa(c,d))!==t)return c+e;if(c==d+"/")return c}}function Tb(b,a){var c=
Rb(b);Ic(b,this,b);this.$$parse=function(d){var e=pa(b,d)||pa(c,d),e="#"==e.charAt(0)?pa(a,e):this.$$html5?e:"";if(!G(e))throw Sb("ihshprfx",d,a);Jc(e,this,b);d=this.$$path;var f=/^\/[A-Z]:(\/.*)/;0===e.indexOf(b)&&(e=e.replace(b,""));f.exec(e)||(d=(e=f.exec(d))?e[1]:d);this.$$path=d;this.$$compose()};this.$$compose=function(){var c=Eb(this.$$search),e=this.$$hash?"#"+eb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+(this.$$url?a+this.$$url:"")};this.$$rewrite=function(a){if(Xa(b)==
Xa(a))return a}}function Ub(b,a){this.$$html5=!0;Tb.apply(this,arguments);var c=Rb(b);this.$$rewrite=function(d){var e;if(b==Xa(d))return d;if(e=pa(c,d))return b+a+e;if(c===d+"/")return c};this.$$compose=function(){var c=Eb(this.$$search),e=this.$$hash?"#"+eb(this.$$hash):"";this.$$url=Qb(this.$$path)+(c?"?"+c:"")+e;this.$$absUrl=b+a+this.$$url}}function tb(b){return function(){return this[b]}}function Lc(b,a){return function(c){if(F(c))return this[b];this[b]=a(c);this.$$compose();return this}}function pe(){var b=
"",a=!1;this.hashPrefix=function(a){return v(a)?(b=a,this):b};this.html5Mode=function(b){return v(b)?(a=b,this):a};this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(c,d,e,f){function h(a){c.$broadcast("$locationChangeSuccess",g.absUrl(),a)}var g,n,l=d.baseHref(),m=d.url(),p;a?(p=m.substring(0,m.indexOf("/",m.indexOf("//")+2))+(l||"/"),n=e.history?Kc:Ub):(p=Xa(m),n=Tb);g=new n(p,"#"+b);g.$$parse(g.$$rewrite(m));f.on("click",function(a){if(!a.ctrlKey&&!a.metaKey&&2!=a.which){for(var e=
z(a.target);"a"!==ma(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href");Q(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=va(h.animVal).href);if(n===Ub){var k=e.attr("href")||e.attr("xlink:href");if(0>k.indexOf("://"))if(h="#"+b,"/"==k[0])h=p+h+k;else if("#"==k[0])h=p+h+(g.path()||"/")+k;else{for(var l=g.path().split("/"),k=k.split("/"),m=0;m<k.length;m++)"."!=k[m]&&(".."==k[m]?l.pop():k[m].length&&l.push(k[m]));h=p+h+l.join("/")}}l=g.$$rewrite(h);h&&(!e.attr("target")&&l&&
!a.isDefaultPrevented())&&(a.preventDefault(),l!=d.url()&&(g.$$parse(l),c.$apply(),P.angular["ff-684208-preventDefault"]=!0))}});g.absUrl()!=m&&d.url(g.absUrl(),!0);d.onUrlChange(function(a){g.absUrl()!=a&&(c.$evalAsync(function(){var b=g.absUrl();g.$$parse(a);c.$broadcast("$locationChangeStart",a,b).defaultPrevented?(g.$$parse(b),d.url(b)):h(b)}),c.$$phase||c.$digest())});var k=0;c.$watch(function(){var a=d.url(),b=g.$$replace;k&&a==g.absUrl()||(k++,c.$evalAsync(function(){c.$broadcast("$locationChangeStart",
g.absUrl(),a).defaultPrevented?g.$$parse(a):(d.url(g.absUrl(),b),h(a))}));g.$$replace=!1;return k});return g}]}function qe(){var b=!0,a=this;this.debugEnabled=function(a){return v(a)?(b=a,this):b};this.$get=["$window",function(c){function d(a){a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line));return a}function e(a){var b=c.console||{},e=b[a]||b.log||B;a=!1;try{a=!!e.apply}catch(n){}return a?
function(){var a=[];q(arguments,function(b){a.push(d(b))});return e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){b&&c.apply(a,arguments)}}()}}]}function qa(b,a){if("__defineGetter__"===b||"__defineSetter__"===b||"__lookupGetter__"===b||"__lookupSetter__"===b||"__proto__"===b)throw ia("isecfld",a);return b}function Ja(b,a){if(b){if(b.constructor===b)throw ia("isecfn",a);if(b.window===
b)throw ia("isecwindow",a);if(b.children&&(b.nodeName||b.prop&&b.attr&&b.find))throw ia("isecdom",a);if(b===Object)throw ia("isecobj",a);}return b}function ub(b,a,c,d){a=a.split(".");for(var e,f=0;1<a.length;f++){e=qa(a.shift(),d);var h=b[e];h||(h={},b[e]=h);b=h}e=qa(a.shift(),d);Ja(b,d);Ja(b[e],d);return b[e]=c}function Mc(b,a,c,d,e,f){qa(b,f);qa(a,f);qa(c,f);qa(d,f);qa(e,f);return function(f,g){var n=g&&g.hasOwnProperty(b)?g:f;if(null==n)return n;n=n[b];if(!a)return n;if(null==n)return t;n=n[a];
if(!c)return n;if(null==n)return t;n=n[c];if(!d)return n;if(null==n)return t;n=n[d];return e?null==n?t:n=n[e]:n}}function Nc(b,a,c){if(Vb.hasOwnProperty(b))return Vb[b];var d=b.split("."),e=d.length;if(a.csp)a=6>e?Mc(d[0],d[1],d[2],d[3],d[4],c):function(a,b){var f=0,l;do l=Mc(d[f++],d[f++],d[f++],d[f++],d[f++],c)(a,b),b=t,a=l;while(f<e);return l};else{var f="var p;\n";q(d,function(a,b){qa(a,c);f+="if(s == null) return undefined;\ns="+(b?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"];\n'});
f+="return s;";a=new Function("s","k",f);a.toString=ba(f)}"hasOwnProperty"!==b&&(Vb[b]=a);return a}function re(){var b={},a={csp:!1};this.$get=["$filter","$sniffer",function(c,d){function e(a,b,c,d,e){var f,h;return f=a.$watch(function(a){return e(a)},function(a,c,d){h=a;A(b)&&b.apply(this,arguments);v(a)&&d.$$postDigest(function(){v(h)&&f()})},c,d)}function f(a,b,c,d,e){var f;return f=a.$watch(function(a){return e(a)},function(a,c,d){A(b)&&b.apply(this,arguments);f()},c,d)}function h(a,b){if(A(b)){var c=
function(c,d){var e=a(c,d),f=b(e,c,d);return v(e)?f:e};c.$$watchDelegate=a.$$watchDelegate;return c}return a}a.csp=d.csp;return function(d,n){var l,m,p=d=Z(d);switch(typeof d){case "string":return b.hasOwnProperty(p)?l=b[p]:(":"===d.charAt(0)&&":"===d.charAt(1)&&(m=!0,d=d.substring(2)),l=new Wb(a),l=(new Ya(l,c,a)).parse(d),l.constant?l.$$watchDelegate=f:m&&(l.$$watchDelegate=e),"hasOwnProperty"!==p&&(b[p]=l)),h(l,n);case "function":return h(d,n);default:return h(B,n)}}}]}function te(){this.$get=
["$rootScope","$exceptionHandler",function(b,a){return Oc(function(a){b.$evalAsync(a)},a)}]}function ue(){this.$get=["$browser","$exceptionHandler",function(b,a){return Oc(function(a){b.defer(a)},a)}]}function Oc(b,a){function c(a){return a}function d(a){return h(a)}var e=function(){var h=[],l,m;return m={resolve:function(a){if(h){var c=h;h=t;l=f(a);c.length&&b(function(){for(var a,b=0,d=c.length;b<d;b++)a=c[b],l.then(a[0],a[1],a[2])})}},reject:function(a){m.resolve(g(a))},notify:function(a){if(h){var c=
h;h.length&&b(function(){for(var b,d=0,e=c.length;d<e;d++)b=c[d],b[2](a)})}},promise:{then:function(b,f,g){var m=e(),L=function(d){try{m.resolve((A(b)?b:c)(d))}catch(e){m.reject(e),a(e)}},u=function(b){try{m.resolve((A(f)?f:d)(b))}catch(c){m.reject(c),a(c)}},K=function(b){try{m.notify((A(g)?g:c)(b))}catch(d){a(d)}};h?h.push([L,u,K]):l.then(L,u,K);return m.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,c){var d=e();c?d.resolve(a):d.reject(a);return d.promise}
function d(e,f){var g=null;try{g=(a||c)()}catch(h){return b(h,!1)}return g&&A(g.then)?g.then(function(){return b(e,f)},function(a){return b(a,!1)}):b(e,f)}return this.then(function(a){return d(a,!0)},function(a){return d(a,!1)})}}}},f=function(a){return a&&A(a.then)?a:{then:function(c){var d=e();b(function(){d.resolve(c(a))});return d.promise}}},h=function(a){var b=e();b.reject(a);return b.promise},g=function(c){return{then:function(f,g){var h=e();b(function(){try{h.resolve((A(g)?g:d)(c))}catch(b){h.reject(b),
a(b)}});return h.promise}}};return{defer:e,reject:h,when:function(g,l,m,p){var k=e(),s,r=function(b){try{return(A(l)?l:c)(b)}catch(d){return a(d),h(d)}},L=function(b){try{return(A(m)?m:d)(b)}catch(c){return a(c),h(c)}},u=function(b){try{return(A(p)?p:c)(b)}catch(d){a(d)}};b(function(){f(g).then(function(a){s||(s=!0,k.resolve(f(a).then(r,L,u)))},function(a){s||(s=!0,k.resolve(L(a)))},function(a){s||k.notify(u(a))})});return k.promise},all:function(a){var b=e(),c=0,d=M(a)?[]:{};q(a,function(a,e){c++;
f(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})});0===c&&b.resolve(d);return b.promise}}}function Be(){this.$get=["$window","$timeout",function(b,a){var c=b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame,d=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(b){var c=
a(b,16.66,!1);return function(){a.cancel(c)}};f.supported=e;return f}]}function se(){var b=10,a=O("$rootScope"),c=null;this.digestTtl=function(a){arguments.length&&(b=a);return b};this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,e,f,h){function g(){this.$id=++cb;this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null;this["this"]=this.$root=this;this.$$destroyed=!1;this.$$asyncQueue=[];this.$$postDigestQueue=[];
this.$$listeners={};this.$$listenerCount={};this.$$isolateBindings={}}function n(b){if(k.$$phase)throw a("inprog",k.$$phase);k.$$phase=b}function l(a,b){var c=f(a);Pa(c,b);return c}function m(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function p(){}g.prototype={constructor:g,$new:function(a){a?(a=new g,a.$root=this.$root,a.$$asyncQueue=this.$$asyncQueue,a.$$postDigestQueue=this.$$postDigestQueue):(this.$$childScopeClass||(this.$$childScopeClass=
function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null;this.$$listeners={};this.$$listenerCount={};this.$id=++cb;this.$$childScopeClass=null},this.$$childScopeClass.prototype=this),a=new this.$$childScopeClass);a["this"]=a;a.$parent=this;a.$$prevSibling=this.$$childTail;this.$$childHead?this.$$childTail=this.$$childTail.$$nextSibling=a:this.$$childHead=this.$$childTail=a;return a},$watch:function(a,b,d,e){var f=l(a,"watch");if(f.$$watchDelegate)return f.$$watchDelegate(this,
b,d,e,f);var g=this.$$watchers,h={fn:b,last:p,get:f,exp:a,eq:!!d};c=null;A(b)||(h.fn=B);g||(g=this.$$watchers=[]);g.unshift(h);return function(){Da(g,h);c=null;A(e)&&e()}},$watchGroup:function(a,b){var c=Array(a.length),d=Array(a.length),e=[],f=0,g=this,h;if(1===a.length)return this.$watch(a[0],function(a,e,f){d[0]=a;c[0]=e;b.call(this,d,a===e?d:c,f)});q(a,function(a,b){var k=g.$watch(a,function(a,e){d[b]=a;c[b]=e;f++},!1,function(){Da(e,k);e.length||h()});e.push(k)},this);h=g.$watch(function(){return f},
function(a,e){b(d,a===e?d:c,g)});return function(){for(;e.length;)e[0]()}},$watchCollection:function(a,b){var c=this,d,e,g,h=1<b.length,k=0,n=f(a,function(a){d=a;var b,c;if(Q(d))if(bb(d))for(e!==l&&(e=l,q=e.length=0,k++),a=d.length,q!==a&&(k++,e.length=q=a),b=0;b<a;b++)c=e[b]!==e[b]&&d[b]!==d[b],c||e[b]===d[b]||(k++,e[b]=d[b]);else{e!==m&&(e=m={},q=0,k++);a=0;for(b in d)d.hasOwnProperty(b)&&(a++,e.hasOwnProperty(b)?(c=e[b]!==e[b]&&d[b]!==d[b],c||e[b]===d[b]||(k++,e[b]=d[b])):(q++,e[b]=d[b],k++));
if(q>a)for(b in k++,e)e.hasOwnProperty(b)&&!d.hasOwnProperty(b)&&(q--,delete e[b])}else e!==d&&(e=d,k++);return k}),l=[],m={},p=!0,q=0;return this.$watch(n,function(){p?(p=!1,b(d,d,c)):b(d,g,c);if(h)if(Q(d))if(bb(d)){g=Array(d.length);for(var a=0;a<d.length;a++)g[a]=d[a]}else for(a in g={},d)Db.call(d,a)&&(g[a]=d[a]);else g=d})},$digest:function(){var d,f,g,h,l=this.$$asyncQueue,m=this.$$postDigestQueue,x,q,v=b,N,R=[],H,C,D;n("$digest");c=null;do{q=!1;for(N=this;l.length;){try{D=l.shift(),D.scope.$eval(D.expression)}catch(t){k.$$phase=
null,e(t)}c=null}a:do{if(h=N.$$watchers)for(x=h.length;x--;)try{if(d=h[x])if((f=d.get(N))!==(g=d.last)&&!(d.eq?ra(f,g):"number"===typeof f&&"number"===typeof g&&isNaN(f)&&isNaN(g)))q=!0,c=d,d.last=d.eq?Ea(f,null):f,d.fn(f,g===p?f:g,N),5>v&&(H=4-v,R[H]||(R[H]=[]),C=A(d.exp)?"fn: "+(d.exp.name||d.exp.toString()):d.exp,C+="; newVal: "+sa(f)+"; oldVal: "+sa(g),R[H].push(C));else if(d===c){q=!1;break a}}catch(E){k.$$phase=null,e(E)}if(!(h=N.$$childHead||N!==this&&N.$$nextSibling))for(;N!==this&&!(h=N.$$nextSibling);)N=
N.$parent}while(N=h);if((q||l.length)&&!v--)throw k.$$phase=null,a("infdig",b,sa(R));}while(q||l.length);for(k.$$phase=null;m.length;)try{m.shift()()}catch(z){e(z)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy");this.$$destroyed=!0;this!==k&&(q(this.$$listenerCount,Cb(null,m,this)),a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),
this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=null,this.$$listeners={},this.$$watchers=this.$$asyncQueue=this.$$postDigestQueue=[],this.$destroy=this.$digest=this.$apply=B,this.$on=this.$watch=this.$watchGroup=function(){return B})}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){k.$$phase||k.$$asyncQueue.length||h.defer(function(){k.$$asyncQueue.length&&k.$digest()});
this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return n("$apply"),this.$eval(a)}catch(b){e(b)}finally{k.$$phase=null;try{k.$digest()}catch(c){throw e(c),c;}}},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]);c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){c[Ma(c,b)]=null;m(e,1,a)}},$emit:function(a,
b){var c=[],d,f=this,g=!1,h={name:a,targetScope:f,stopPropagation:function(){g=!0},preventDefault:function(){h.defaultPrevented=!0},defaultPrevented:!1},k=[h].concat(ka.call(arguments,1)),n,l;do{d=f.$$listeners[a]||c;h.currentScope=f;n=0;for(l=d.length;n<l;n++)if(d[n])try{d[n].apply(null,k)}catch(m){e(m)}else d.splice(n,1),n--,l--;if(g)return h.currentScope=null,h;f=f.$parent}while(f);h.currentScope=null;return h},$broadcast:function(a,b){for(var c=this,d=this,f={name:a,targetScope:this,preventDefault:function(){f.defaultPrevented=
!0},defaultPrevented:!1},g=[f].concat(ka.call(arguments,1)),h,k;c=d;){f.currentScope=c;d=c.$$listeners[a]||[];h=0;for(k=d.length;h<k;h++)if(d[h])try{d[h].apply(null,g)}catch(n){e(n)}else d.splice(h,1),h--,k--;if(!(d=c.$$listenerCount[a]&&c.$$childHead||c!==this&&c.$$nextSibling))for(;c!==this&&!(d=c.$$nextSibling);)c=c.$parent}f.currentScope=null;return f}};var k=new g;return k}]}function vd(){var b=/^\s*(https?|ftp|mailto|tel|file):/,a=/^\s*(https?|ftp|file|blob):|data:image\//;this.aHrefSanitizationWhitelist=
function(a){return v(a)?(b=a,this):b};this.imgSrcSanitizationWhitelist=function(b){return v(b)?(a=b,this):a};this.$get=function(){return function(c,d){var e=d?a:b,f;if(!T||8<=T)if(f=va(c).href,""!==f&&!f.match(e))return"unsafe:"+f;return c}}}function Xe(b){if("self"===b)return b;if(G(b)){if(-1<b.indexOf("***"))throw wa("iwcard",b);b=b.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08").replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*");return RegExp("^"+b+"$")}if(db(b))return RegExp("^"+
b.source+"$");throw wa("imatcher");}function Pc(b){var a=[];v(b)&&q(b,function(b){a.push(Xe(b))});return a}function we(){this.SCE_CONTEXTS=fa;var b=["self"],a=[];this.resourceUrlWhitelist=function(a){arguments.length&&(b=Pc(a));return b};this.resourceUrlBlacklist=function(b){arguments.length&&(a=Pc(b));return a};this.$get=["$injector",function(c){function d(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};a&&(b.prototype=new a);b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()};
b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()};return b}var e=function(a){throw wa("unsafe");};c.has("$sanitize")&&(e=c.get("$sanitize"));var f=d(),h={};h[fa.HTML]=d(f);h[fa.CSS]=d(f);h[fa.URL]=d(f);h[fa.JS]=d(f);h[fa.RESOURCE_URL]=d(h[fa.URL]);return{trustAs:function(a,b){var c=h.hasOwnProperty(a)?h[a]:null;if(!c)throw wa("icontext",a,b);if(null===b||b===t||""===b)return b;if("string"!==typeof b)throw wa("itype",a);return new c(b)},getTrusted:function(c,d){if(null===
d||d===t||""===d)return d;var f=h.hasOwnProperty(c)?h[c]:null;if(f&&d instanceof f)return d.$$unwrapTrustedValue();if(c===fa.RESOURCE_URL){var f=va(d.toString()),m,p,k=!1;m=0;for(p=b.length;m<p;m++)if("self"===b[m]?Ob(f):b[m].exec(f.href)){k=!0;break}if(k)for(m=0,p=a.length;m<p;m++)if("self"===a[m]?Ob(f):a[m].exec(f.href)){k=!1;break}if(k)return d;throw wa("insecurl",d.toString());}if(c===fa.HTML)return e(d);throw wa("unsafe");},valueOf:function(a){return a instanceof f?a.$$unwrapTrustedValue():a}}}]}
function ve(){var b=!0;this.enabled=function(a){arguments.length&&(b=!!a);return b};this.$get=["$parse","$sniffer","$sceDelegate",function(a,c,d){if(b&&c.msie&&8>c.msieDocumentMode)throw wa("iequirks");var e=ja(fa);e.isEnabled=function(){return b};e.trustAs=d.trustAs;e.getTrusted=d.getTrusted;e.valueOf=d.valueOf;b||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=Ba);e.parseAs=function(b,c){var d=a(c);return d.literal&&d.constant?d:a(c,function(a){return e.getTrusted(b,a)})};var f=e.parseAs,
h=e.getTrusted,g=e.trustAs;q(fa,function(a,b){var c=J(b);e[Sa("parse_as_"+c)]=function(b){return f(a,b)};e[Sa("get_trusted_"+c)]=function(b){return h(a,b)};e[Sa("trust_as_"+c)]=function(b){return g(a,b)}});return e}]}function xe(){this.$get=["$window","$document",function(b,a){var c={},d=U((/android (\d+)/.exec(J((b.navigator||{}).userAgent))||[])[1]),e=/Boxee/i.test((b.navigator||{}).userAgent),f=a[0]||{},h=f.documentMode,g,n=/^(Moz|webkit|O|ms)(?=[A-Z])/,l=f.body&&f.body.style,m=!1,p=!1;if(l){for(var k in l)if(m=
n.exec(k)){g=m[0];g=g.substr(0,1).toUpperCase()+g.substr(1);break}g||(g="WebkitOpacity"in l&&"webkit");m=!!("transition"in l||g+"Transition"in l);p=!!("animation"in l||g+"Animation"in l);!d||m&&p||(m=G(f.body.style.webkitTransition),p=G(f.body.style.webkitAnimation))}return{history:!(!b.history||!b.history.pushState||4>d||e),hashchange:"onhashchange"in b&&(!h||7<h),hasEvent:function(a){if("input"==a&&9==T)return!1;if(F(c[a])){var b=f.createElement("div");c[a]="on"+a in b}return c[a]},csp:Qa(),vendorPrefix:g,
transitions:m,animations:p,android:d,msie:T,msieDocumentMode:h}}]}function ze(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(b,a,c,d,e){function f(f,n,l){var m=v(l)&&!l,p=(m?d:c).defer(),k=p.promise;n=a.defer(function(){try{p.resolve(f())}catch(a){p.reject(a),e(a)}finally{delete h[k.$$timeoutId]}m||b.$apply()},n);k.$$timeoutId=n;h[n]=p;return k}var h={};f.cancel=function(b){return b&&b.$$timeoutId in h?(h[b.$$timeoutId].reject("canceled"),delete h[b.$$timeoutId],a.defer.cancel(b.$$timeoutId)):
!1};return f}]}function va(b,a){var c=b;T&&($.setAttribute("href",c),c=$.href);$.setAttribute("href",c);return{href:$.href,protocol:$.protocol?$.protocol.replace(/:$/,""):"",host:$.host,search:$.search?$.search.replace(/^\?/,""):"",hash:$.hash?$.hash.replace(/^#/,""):"",hostname:$.hostname,port:$.port,pathname:"/"===$.pathname.charAt(0)?$.pathname:"/"+$.pathname}}function Ob(b){b=G(b)?va(b):b;return b.protocol===Qc.protocol&&b.host===Qc.host}function Ae(){this.$get=ba(P)}function pc(b){function a(d,
e){if(Q(d)){var f={};q(d,function(b,c){f[c]=a(c,b)});return f}return b.factory(d+c,e)}var c="Filter";this.register=a;this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}];a("currency",Rc);a("date",Sc);a("filter",Ye);a("json",Ze);a("limitTo",$e);a("lowercase",af);a("number",Tc);a("orderBy",Uc);a("uppercase",bf)}function Ye(){return function(b,a,c){if(!M(b))return b;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0};"function"!==d&&
(c="boolean"===d&&c?function(a,b){return Oa.equals(a,b)}:function(a,b){if(a&&b&&"object"===typeof a&&"object"===typeof b){for(var d in a)if("$"!==d.charAt(0)&&Db.call(a,d)&&c(a[d],b[d]))return!0;return!1}b=(""+b).toLowerCase();return-1<(""+a).toLowerCase().indexOf(b)});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case "boolean":case "number":case "string":return c(a,b);case "object":switch(typeof b){case "object":return c(a,b);default:for(var d in a)if("$"!==
d.charAt(0)&&f(a[d],b))return!0}return!1;case "array":for(d=0;d<a.length;d++)if(f(a[d],b))return!0;return!1;default:return!1}};switch(typeof a){case "boolean":case "number":case "string":a={$:a};case "object":for(var h in a)(function(b){"undefined"!==typeof a[b]&&e.push(function(c){return f("$"==b?c:c&&c[b],a[b])})})(h);break;case "function":e.push(a);break;default:return b}d=[];for(h=0;h<b.length;h++){var g=b[h];e.check(g)&&d.push(g)}return d}}function Rc(b){var a=b.NUMBER_FORMATS;return function(b,
d){F(d)&&(d=a.CURRENCY_SYM);return Vc(b,a.PATTERNS[1],a.GROUP_SEP,a.DECIMAL_SEP,2).replace(/\u00A4/g,d)}}function Tc(b){var a=b.NUMBER_FORMATS;return function(b,d){return Vc(b,a.PATTERNS[0],a.GROUP_SEP,a.DECIMAL_SEP,d)}}function Vc(b,a,c,d,e){if(null==b||!isFinite(b)||Q(b))return"";var f=0>b;b=Math.abs(b);var h=b+"",g="",n=[],l=!1;if(-1!==h.indexOf("e")){var m=h.match(/([\d\.]+)e(-?)(\d+)/);m&&"-"==m[2]&&m[3]>e+1?(h="0",b=0):(g=h,l=!0)}if(l)0<e&&(-1<b&&1>b)&&(g=b.toFixed(e));else{h=(h.split(Wc)[1]||
"").length;F(e)&&(e=Math.min(Math.max(a.minFrac,h),a.maxFrac));b=+(Math.round(+(b.toString()+"e"+e)).toString()+"e"+-e);b=(""+b).split(Wc);h=b[0];b=b[1]||"";var m=0,p=a.lgSize,k=a.gSize;if(h.length>=p+k)for(m=h.length-p,l=0;l<m;l++)0===(m-l)%k&&0!==l&&(g+=c),g+=h.charAt(l);for(l=m;l<h.length;l++)0===(h.length-l)%p&&0!==l&&(g+=c),g+=h.charAt(l);for(;b.length<e;)b+="0";e&&"0"!==e&&(g+=d+b.substr(0,e))}n.push(f?a.negPre:a.posPre);n.push(g);n.push(f?a.negSuf:a.posSuf);return n.join("")}function vb(b,
a,c){var d="";0>b&&(d="-",b=-b);for(b=""+b;b.length<a;)b="0"+b;c&&(b=b.substr(b.length-a));return d+b}function aa(b,a,c,d){c=c||0;return function(e){e=e["get"+b]();if(0<c||e>-c)e+=c;0===e&&-12==c&&(e=12);return vb(e,a,d)}}function wb(b,a){return function(c,d){var e=c["get"+b](),f=ib(a?"SHORT"+b:b);return d[f][e]}}function Xc(b){var a=(new Date(b,0,1)).getDay();return new Date(b,0,(4>=a?5:12)-a)}function Yc(b){return function(a){var c=Xc(a.getFullYear());a=+new Date(a.getFullYear(),a.getMonth(),a.getDate()+
(4-a.getDay()))-+c;a=1+Math.round(a/6048E5);return vb(a,b)}}function Sc(b){function a(a){var b;if(b=a.match(c)){a=new Date(0);var f=0,h=0,g=b[8]?a.setUTCFullYear:a.setFullYear,n=b[8]?a.setUTCHours:a.setHours;b[9]&&(f=U(b[9]+b[10]),h=U(b[9]+b[11]));g.call(a,U(b[1]),U(b[2])-1,U(b[3]));f=U(b[4]||0)-f;h=U(b[5]||0)-h;g=U(b[6]||0);b=Math.round(1E3*parseFloat("0."+(b[7]||0)));n.call(a,f,h,g,b)}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
return function(c,e){var f="",h=[],g,n;e=e||"mediumDate";e=b.DATETIME_FORMATS[e]||e;G(c)&&(c=cf.test(c)?U(c):a(c));Ca(c)&&(c=new Date(c));if(!da(c))return c;for(;e;)(n=df.exec(e))?(h=h.concat(ka.call(n,1)),e=h.pop()):(h.push(e),e=null);q(h,function(a){g=ef[a];f+=g?g(c,b.DATETIME_FORMATS):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return f}}function Ze(){return function(b){return sa(b,!0)}}function $e(){return function(b,a){if(!M(b)&&!G(b))return b;a=Infinity===Math.abs(Number(a))?Number(a):U(a);
if(G(b))return a?0<=a?b.slice(0,a):b.slice(a,b.length):"";var c=[],d,e;a>b.length?a=b.length:a<-b.length&&(a=-b.length);0<a?(d=0,e=a):(d=b.length+a,e=b.length);for(;d<e;d++)c.push(b[d]);return c}}function Uc(b){return function(a,c,d){function e(a,b){return b?function(b,c){return a(c,b)}:a}function f(a,b){var c=typeof a,d=typeof b;return c==d?(da(a)&&da(b)&&(a=a.valueOf(),b=b.valueOf()),"string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:a<b?-1:1):c<d?-1:1}if(!M(a)||!c)return a;c=M(c)?c:[c];
c=ld(c,function(a){var c=!1,d=a||Ba;if(G(a)){if("+"==a.charAt(0)||"-"==a.charAt(0))c="-"==a.charAt(0),a=a.substring(1);d=b(a);if(d.constant){var g=d();return e(function(a,b){return f(a[g],b[g])},c)}}return e(function(a,b){return f(d(a),d(b))},c)});for(var h=[],g=0;g<a.length;g++)h.push(a[g]);return h.sort(e(function(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0},d))}}function xa(b){A(b)&&(b={link:b});b.restrict=b.restrict||"AC";return ba(b)}function Zc(b,a,c,d){function e(a,
c){c=c?"-"+gb(c,"-"):"";d.removeClass(b,(a?xb:yb)+c);d.addClass(b,(a?yb:xb)+c)}var f=this,h=b.parent().controller("form")||zb,g=0,n=f.$error={},l=[];f.$name=a.name||a.ngForm;f.$dirty=!1;f.$pristine=!0;f.$valid=!0;f.$invalid=!1;h.$addControl(f);b.addClass(Ka);e(!0);f.$rollbackViewValue=function(){q(l,function(a){a.$rollbackViewValue()})};f.$commitViewValue=function(){q(l,function(a){a.$commitViewValue()})};f.$addControl=function(a){Aa(a.$name,"input");l.push(a);a.$name&&(f[a.$name]=a)};f.$removeControl=
function(a){a.$name&&f[a.$name]===a&&delete f[a.$name];q(n,function(b,c){f.$setValidity(c,!0,a)});Da(l,a)};f.$setValidity=function(a,b,c){var d=n[a];if(b)d&&(Da(d,c),d.length||(g--,g||(e(b),f.$valid=!0,f.$invalid=!1),n[a]=!1,e(!0,a),h.$setValidity(a,!0,f)));else{g||e(b);if(d){if(-1!=Ma(d,c))return}else n[a]=d=[],g++,e(!1,a),h.$setValidity(a,!1,f);d.push(c);f.$valid=!1;f.$invalid=!0}};f.$setDirty=function(){d.removeClass(b,Ka);d.addClass(b,Ab);f.$dirty=!0;f.$pristine=!1;h.$setDirty()};f.$setPristine=
function(){d.removeClass(b,Ab);d.addClass(b,Ka);f.$dirty=!1;f.$pristine=!0;q(l,function(a){a.$setPristine()})}}function Xb(b,a,c,d){b.$setValidity(a,c);return c?d:t}function $c(b,a){var c,d;if(a)for(c=0;c<a.length;++c)if(d=a[c],b[d])return!0;return!1}function ff(b,a,c,d,e){Q(e)&&(b.$$hasNativeValidators=!0,b.$parsers.push(function(f){if(b.$error[a]||$c(e,d)||!$c(e,c))return f;b.$setValidity(a,!1)}))}function Za(b,a,c,d,e,f){var h=a.prop(gf),g=a[0].placeholder,n={};d.$$validityState=h;if(!e.android){var l=
!1;a.on("compositionstart",function(a){l=!0});a.on("compositionend",function(){l=!1;m()})}var m=function(e){if(!l){var f=a.val(),k=e&&e.type;if(T&&"input"===(e||n).type&&a[0].placeholder!==g)g=a[0].placeholder;else{c.ngTrim&&"false"===c.ngTrim||(f=Z(f));var m=h&&d.$$hasNativeValidators;if(d.$viewValue!==f||""===f&&m)b.$$phase?d.$setViewValue(f,k,m):b.$apply(function(){d.$setViewValue(f,k,m)})}}};if(e.hasEvent("input"))a.on("input",m);else{var p,k=function(a){p||(p=f.defer(function(){m(a);p=null}))};
a.on("keydown",function(a){var b=a.keyCode;91===b||(15<b&&19>b||37<=b&&40>=b)||k(a)});if(e.hasEvent("paste"))a.on("paste cut",k)}a.on("change",m);d.$render=function(){a.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Bb(b,a){return function(c){var d;return da(c)?c:G(c)&&(b.lastIndex=0,c=b.exec(c))?(c.shift(),d={yyyy:0,MM:1,dd:1,HH:0,mm:0},q(c,function(b,c){c<a.length&&(d[a[c]]=+b)}),new Date(d.yyyy,d.MM-1,d.dd,d.HH,d.mm)):NaN}}function $a(b,a,c,d){return function(e,f,h,g,n,l,m){Za(e,f,h,g,
n,l);g.$parsers.push(function(d){if(g.$isEmpty(d))return g.$setValidity(b,!0),null;if(a.test(d))return g.$setValidity(b,!0),c(d);g.$setValidity(b,!1);return t});g.$formatters.push(function(a){return da(a)?m("date")(a,d):""});h.min&&(e=function(a){var b=g.$isEmpty(a)||c(a)>=c(h.min);g.$setValidity("min",b);return b?a:t},g.$parsers.push(e),g.$formatters.push(e));h.max&&(e=function(a){var b=g.$isEmpty(a)||c(a)<=c(h.max);g.$setValidity("max",b);return b?a:t},g.$parsers.push(e),g.$formatters.push(e))}}
function ad(b,a,c,d,e){if(v(d)){b=b(d);if(!b.constant)throw(new O("ngModel"))("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return b(a)}return e}function Yb(b,a){b="ngClass"+b;return["$animate",function(c){function d(a,b){var c=[],d=0;a:for(;d<a.length;d++){for(var e=a[d],m=0;m<b.length;m++)if(e==b[m])continue a;c.push(e)}return c}function e(a){if(!M(a)){if(G(a))return a.split(" ");if(Q(a)){var b=[];q(a,function(a,c){a&&(b=b.concat(c.split(" ")))});return b}}return a}return{restrict:"AC",
link:function(f,h,g){function n(a,b){var c=h.data("$classCounts")||{},d=[];q(a,function(a){if(0<b||c[a])c[a]=(c[a]||0)+b,c[a]===+(0<b)&&d.push(a)});h.data("$classCounts",c);return d.join(" ")}function l(b){if(!0===a||f.$index%2===a){var k=e(b||[]);if(!m){var l=n(k,1);g.$addClass(l)}else if(!ra(b,m)){var q=e(m),l=d(k,q),k=d(q,k),k=n(k,-1),l=n(l,1);0===l.length?c.removeClass(h,k):0===k.length?c.addClass(h,l):c.setClass(h,l,k)}}m=ja(b)}var m;f.$watch(g[b],l,!0);g.$observe("class",function(a){l(f.$eval(g[b]))});
"ngClass"!==b&&f.$watch("$index",function(c,d){var h=c&1;if(h!==(d&1)){var l=e(f.$eval(g[b]));h===a?(h=n(l,1),g.$addClass(h)):(h=n(l,-1),g.$removeClass(h))}})}}}]}var hf=/^\/(.+)\/([a-z]*)$/,gf="validity",J=function(b){return G(b)?b.toLowerCase():b},Db=Object.prototype.hasOwnProperty,ib=function(b){return G(b)?b.toUpperCase():b},T,z,ta,ka=[].slice,sc=[].push,ya=Object.prototype.toString,Na=O("ng"),Oa=P.angular||(P.angular={}),Ra,ma,cb=0;T=U((/msie (\d+)/.exec(J(navigator.userAgent))||[])[1]);isNaN(T)&&
(T=U((/trident\/.*; rv:(\d+)/.exec(J(navigator.userAgent))||[])[1]));B.$inject=[];Ba.$inject=[];var M=function(){return A(Array.isArray)?Array.isArray:function(b){return"[object Array]"===ya.call(b)}}(),Z=function(){return String.prototype.trim?function(b){return G(b)?b.trim():b}:function(b){return G(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}();ma=9>T?function(b){b=b.nodeName?b:b[0];return J(b.scopeName&&"HTML"!=b.scopeName?b.scopeName+":"+b.nodeName:b.nodeName)}:function(b){return J(b.nodeName?
b.nodeName:b[0].nodeName)};var Qa=function(){if(v(Qa.isActive_))return Qa.isActive_;var b=!(!W.querySelector("[ng-csp]")&&!W.querySelector("[data-ng-csp]"));if(!b)try{new Function("")}catch(a){b=!0}return Qa.isActive_=b},fb=["ng-","data-ng-","ng:","x-ng-"],pd=/[A-Z]/g,td={full:"1.3.0-beta.16",major:1,minor:3,dot:0,codeName:"pizza-transubstantiation"};V.expando="ng339";var Ua=V.cache={},Je=1,sb=P.document.addEventListener?function(b,a,c){b.addEventListener(a,c,!1)}:function(b,a,c){b.attachEvent("on"+
a,c)},Ta=P.document.removeEventListener?function(b,a,c){b.removeEventListener(a,c,!1)}:function(b,a,c){b.detachEvent("on"+a,c)};V._data=function(b){return this.cache[b[this.expando]]||{}};var De=/([\:\-\_]+(.))/g,Ee=/^moz([A-Z])/,Ib=O("jqLite"),Ie=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Hb=/<|&#?\w+;/,Ge=/<([\w:]+)/,He=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ea={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=ea.td;var Fa=V.prototype={ready:function(b){function a(){c||(c=!0,b())}var c=!1;"complete"===W.readyState?setTimeout(a):(this.on("DOMContentLoaded",a),V(P).on("load",a))},toString:function(){var b=[];q(this,function(a){b.push(""+a)});return"["+b.join(", ")+"]"},eq:function(b){return 0<=b?z(this[b]):z(this[this.length+
b])},length:0,push:sc,sort:[].sort,splice:[].splice},pb={};q("multiple selected checked disabled readOnly required open".split(" "),function(b){pb[J(b)]=b});var wc={};q("input select option textarea button form details".split(" "),function(b){wc[b]=!0});var xc={ngMinlength:"minlength",ngMaxlength:"maxlength",ngPattern:"pattern"};q({data:Kb,removeData:lb},function(b,a){V[a]=b});q({data:Kb,inheritedData:ob,scope:function(b){return z.data(b,"$scope")||ob(b.parentNode||b,["$isolateScope","$scope"])},
isolateScope:function(b){return z.data(b,"$isolateScope")||z.data(b,"$isolateScopeNoTemplate")},controller:tc,injector:function(b){return ob(b,"$injector")},removeAttr:function(b,a){b.removeAttribute(a)},hasClass:Lb,css:function(b,a,c){a=Sa(a);if(v(c))b.style[a]=c;else{var d;8>=T&&(d=b.currentStyle&&b.currentStyle[a],""===d&&(d="auto"));d=d||b.style[a];8>=T&&(d=""===d?t:d);return d}},attr:function(b,a,c){var d=J(a);if(pb[d])if(v(c))c?(b[a]=!0,b.setAttribute(a,d)):(b[a]=!1,b.removeAttribute(d));else return b[a]||
(b.attributes.getNamedItem(a)||B).specified?d:t;else if(v(c))b.setAttribute(a,c);else if(b.getAttribute)return b=b.getAttribute(a,2),null===b?t:b},prop:function(b,a,c){if(v(c))b[a]=c;else return b[a]},text:function(){function b(a,b){if(F(b)){var d=a.nodeType;return 1===d||3===d?a.textContent:""}a.textContent=b}b.$dv="";return b}(),val:function(b,a){if(F(a)){if(b.multiple&&"select"===ma(b)){var c=[];q(b.options,function(a){a.selected&&c.push(a.value||a.text)});return 0===c.length?null:c}return b.value}b.value=
a},html:function(b,a){if(F(a))return b.innerHTML;kb(b,!0);b.innerHTML=a},empty:uc},function(b,a){V.prototype[a]=function(a,d){var e,f,h=this.length;if(b!==uc&&(2==b.length&&b!==Lb&&b!==tc?a:d)===t){if(Q(a)){for(e=0;e<h;e++)if(b===Kb)b(this[e],a);else for(f in a)b(this[e],f,a[f]);return this}e=b.$dv;h=e===t?Math.min(h,1):h;for(f=0;f<h;f++){var g=b(this[f],a,d);e=e?e+g:g}return e}for(e=0;e<h;e++)b(this[e],a,d);return this}});q({removeData:lb,on:function a(c,d,e,f){if(v(f))throw Ib("onargs");if(!c.nodeType||
1===c.nodeType||9===c.nodeType){var h=la(c,"events"),g=la(c,"handle");h||la(c,"events",h={});g||la(c,"handle",g=Le(c,h));q(d.split(" "),function(d){var f=h[d];if(!f){if("mouseenter"==d||"mouseleave"==d){var m=W.body.contains||W.body.compareDocumentPosition?function(a,c){var d=9===a.nodeType?a.documentElement:a,e=c&&c.parentNode;return a===e||!!(e&&1===e.nodeType&&(d.contains?d.contains(e):a.compareDocumentPosition&&a.compareDocumentPosition(e)&16))}:function(a,c){if(c)for(;c=c.parentNode;)if(c===
a)return!0;return!1};h[d]=[];a(c,{mouseleave:"mouseout",mouseenter:"mouseover"}[d],function(a){var c=a.relatedTarget;c&&(c===this||m(this,c))||g(a,d)})}else sb(c,d,g),h[d]=[];f=h[d]}f.push(e)})}},off:rc,one:function(a,c,d){a=z(a);a.on(c,function f(){a.off(c,d);a.off(c,f)});a.on(c,d)},replaceWith:function(a,c){var d,e=a.parentNode;kb(a);q(new V(c),function(c){d?e.insertBefore(c,d.nextSibling):e.replaceChild(c,a);d=c})},children:function(a){var c=[];q(a.childNodes,function(a){1===a.nodeType&&c.push(a)});
return c},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,c){q(new V(c),function(c){1!==a.nodeType&&11!==a.nodeType||a.appendChild(c)})},prepend:function(a,c){if(1===a.nodeType){var d=a.firstChild;q(new V(c),function(c){a.insertBefore(c,d)})}},wrap:function(a,c){c=z(c)[0];var d=a.parentNode;d&&d.replaceChild(c,a);c.appendChild(a)},remove:function(a){kb(a);var c=a.parentNode;c&&c.removeChild(a)},after:function(a,c){var d=a,e=a.parentNode;q(new V(c),function(a){e.insertBefore(a,
d.nextSibling);d=a})},addClass:nb,removeClass:mb,toggleClass:function(a,c,d){c&&q(c.split(" "),function(c){var f=d;F(f)&&(f=!Lb(a,c));(f?nb:mb)(a,c)})},parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(a=a.nextSibling;null!=a&&1!==a.nodeType;)a=a.nextSibling;return a},find:function(a,c){return a.getElementsByTagName?a.getElementsByTagName(c):[]},clone:Jb,triggerHandler:function(a,c,d){c=(la(a,"events")||{})[c];
d=d||[];var e=[{preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopPropagation:B}];q(c,function(c){c.apply(a,e.concat(d))})}},function(a,c){V.prototype[c]=function(c,e,f){for(var h,g=0;g<this.length;g++)F(h)?(h=a(this[g],c,e,f),v(h)&&(h=z(h))):qc(h,a(this[g],c,e,f));return v(h)?h:this};V.prototype.bind=V.prototype.on;V.prototype.unbind=V.prototype.off});Va.prototype={put:function(a,c){this[Ga(a,this.nextUid)]=c},get:function(a){return this[Ga(a,
this.nextUid)]},remove:function(a){var c=this[a=Ga(a,this.nextUid)];delete this[a];return c}};var zc=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Ne=/,/,Oe=/^\s*(_?)(\S+?)\1\s*$/,yc=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,Ha=O("$injector");Fb.$$annotate=Mb;var jf=O("$animate"),fe=["$provide",function(a){this.$$selectors={};this.register=function(c,d){var e=c+"-animation";if(c&&"."!=c.charAt(0))throw jf("notcsel",c);this.$$selectors[c.substr(1)]=e;a.factory(e,d)};this.classNameFilter=function(a){1===arguments.length&&
(this.$$classNameFilter=a instanceof RegExp?a:null);return this.$$classNameFilter};this.$get=["$timeout","$$asyncCallback",function(a,d){return{enter:function(a,c,h,g){h?h.after(a):c.prepend(a);g&&d(g);return B},leave:function(a,c){a.remove();c&&d(c);return B},move:function(a,c,d,g){return this.enter(a,c,d,g)},addClass:function(a,c,h){c=G(c)?c:M(c)?c.join(" "):"";q(a,function(a){nb(a,c)});h&&d(h);return B},removeClass:function(a,c,h){c=G(c)?c:M(c)?c.join(" "):"";q(a,function(a){mb(a,c)});h&&d(h);
return B},setClass:function(a,c,h,g){q(a,function(a){nb(a,c);mb(a,h)});g&&d(g);return B},enabled:B}}]}],ha=O("$compile");ic.$inject=["$provide","$$sanitizeUriProvider"];var Te=/^(x[\:\-_]|data[\:\-_])/i,Pb=O("$interpolate"),kf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,We={http:80,https:443,ftp:21},Sb=O("$location");Ub.prototype=Tb.prototype=Kc.prototype={$$html5:!1,$$replace:!1,absUrl:tb("$$absUrl"),url:function(a,c){if(F(a))return this.$$url;var d=kf.exec(a);d[1]&&this.path(decodeURIComponent(d[1]));(d[2]||
d[1])&&this.search(d[3]||"");this.hash(d[5]||"",c);return this},protocol:tb("$$protocol"),host:tb("$$host"),port:tb("$$port"),path:Lc("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,c){switch(arguments.length){case 0:return this.$$search;case 1:if(G(a))this.$$search=fc(a);else if(Q(a))q(a,function(c,e){null==c&&delete a[e]}),this.$$search=a;else throw Sb("isrcharg");break;default:F(c)||null===c?delete this.$$search[a]:this.$$search[a]=c}this.$$compose();return this},hash:Lc("$$hash",
Ba),replace:function(){this.$$replace=!0;return this}};var ia=O("$parse"),lf=Function.prototype.call,mf=Function.prototype.apply,nf=Function.prototype.bind,ab={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:B,"+":function(a,c,d,e){d=d(a,c);e=e(a,c);return v(d)?v(e)?d+e:d:v(e)?e:t},"-":function(a,c,d,e){d=d(a,c);e=e(a,c);return(v(d)?d:0)-(v(e)?e:0)},"*":function(a,c,d,e){return d(a,c)*e(a,c)},"/":function(a,c,d,e){return d(a,c)/e(a,c)},"%":function(a,
c,d,e){return d(a,c)%e(a,c)},"^":function(a,c,d,e){return d(a,c)^e(a,c)},"=":B,"===":function(a,c,d,e){return d(a,c)===e(a,c)},"!==":function(a,c,d,e){return d(a,c)!==e(a,c)},"==":function(a,c,d,e){return d(a,c)==e(a,c)},"!=":function(a,c,d,e){return d(a,c)!=e(a,c)},"<":function(a,c,d,e){return d(a,c)<e(a,c)},">":function(a,c,d,e){return d(a,c)>e(a,c)},"<=":function(a,c,d,e){return d(a,c)<=e(a,c)},">=":function(a,c,d,e){return d(a,c)>=e(a,c)},"&&":function(a,c,d,e){return d(a,c)&&e(a,c)},"||":function(a,
c,d,e){return d(a,c)||e(a,c)},"&":function(a,c,d,e){return d(a,c)&e(a,c)},"|":function(a,c,d,e){return e(a,c)(a,c,d(a,c))},"!":function(a,c,d){return!d(a,c)}},of={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Wb=function(a){this.options=a};Wb.prototype={constructor:Wb,lex:function(a){this.text=a;this.index=0;this.ch=t;for(this.tokens=[];this.index<this.text.length;)if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();
else if(this.isIdent(this.ch))this.readIdent();else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch}),this.index++;else if(this.isWhitespace(this.ch))this.index++;else{a=this.ch+this.peek();var c=a+this.peek(2),d=ab[this.ch],e=ab[a],f=ab[c];f?(this.tokens.push({index:this.index,text:c,fn:f}),this.index+=3):e?(this.tokens.push({index:this.index,text:a,fn:e}),this.index+=2):d?(this.tokens.push({index:this.index,text:this.ch,fn:d}),this.index+=1):this.throwError("Unexpected next character ",
this.index,this.index+1)}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},peek:function(a){a=a||1;return this.index+a<this.text.length?this.text.charAt(this.index+a):!1},isNumber:function(a){return"0"<=a&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||"\u00a0"===a},isIdent:function(a){return"a"<=a&&"z">=a||"A"<=a&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,c,d){d=d||this.index;
c=v(c)?"s "+c+"-"+this.index+" ["+this.text.substring(c,d)+"]":" "+d;throw ia("lexerr",a,c,this.text);},readNumber:function(){for(var a="",c=this.index;this.index<this.text.length;){var d=J(this.text.charAt(this.index));if("."==d||this.isNumber(d))a+=d;else{var e=this.peek();if("e"==d&&this.isExpOperator(e))a+=d;else if(this.isExpOperator(d)&&e&&this.isNumber(e)&&"e"==a.charAt(a.length-1))a+=d;else if(!this.isExpOperator(d)||e&&this.isNumber(e)||"e"!=a.charAt(a.length-1))break;else this.throwError("Invalid exponent")}this.index++}a*=
1;this.tokens.push({index:c,text:a,constant:!0,fn:function(){return a}})},readIdent:function(){for(var a=this,c="",d=this.index,e,f,h,g;this.index<this.text.length;){g=this.text.charAt(this.index);if("."===g||this.isIdent(g)||this.isNumber(g))"."===g&&(e=this.index),c+=g;else break;this.index++}if(e)for(f=this.index;f<this.text.length;){g=this.text.charAt(f);if("("===g){h=c.substr(e-d+1);c=c.substr(0,e-d);this.index=f;break}if(this.isWhitespace(g))f++;else break}d={index:d,text:c};if(ab.hasOwnProperty(c))d.fn=
ab[c],d.constant=!0;else{var n=Nc(c,this.options,this.text);d.fn=E(function(a,c){return n(a,c)},{assign:function(d,e){return ub(d,c,e,a.text)}})}this.tokens.push(d);h&&(this.tokens.push({index:e,text:"."}),this.tokens.push({index:e+1,text:h}))},readString:function(a){var c=this.index;this.index++;for(var d="",e=a,f=!1;this.index<this.text.length;){var h=this.text.charAt(this.index),e=e+h;if(f)"u"===h?(f=this.text.substring(this.index+1,this.index+5),f.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+
f+"]"),this.index+=4,d+=String.fromCharCode(parseInt(f,16))):d+=of[h]||h,f=!1;else if("\\"===h)f=!0;else{if(h===a){this.index++;this.tokens.push({index:c,text:e,string:d,constant:!0,fn:function(){return d}});return}d+=h}this.index++}this.throwError("Unterminated quote",c)}};var Ya=function(a,c,d){this.lexer=a;this.$filter=c;this.options=d};Ya.ZERO=E(function(){return 0},{constant:!0});Ya.prototype={constructor:Ya,parse:function(a){this.text=a;this.tokens=this.lexer.lex(a);a=this.statements();0!==
this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]);a.literal=!!a.literal;a.constant=!!a.constant;return a},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var c=this.expect();(a=c.fn)||this.throwError("not a primary expression",c);c.constant&&(a.constant=!0,a.literal=!0)}for(var d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,
d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,c){throw ia("syntax",c.text,a,c.index+1,this.text,this.text.substring(c.index));},peekToken:function(){if(0===this.tokens.length)throw ia("ueoe",this.text);return this.tokens[0]},peek:function(a,c,d,e){if(0<this.tokens.length){var f=this.tokens[0],h=f.text;if(h===a||h===c||h===d||h===e||!(a||c||d||e))return f}return!1},expect:function(a,c,d,e){return(a=
this.peek(a,c,d,e))?(this.tokens.shift(),a):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,c){return E(function(d,e){return a(d,e,c)},{constant:c.constant})},ternaryFn:function(a,c,d){return E(function(e,f){return a(e,f)?c(e,f):d(e,f)},{constant:a.constant&&c.constant&&d.constant})},binaryFn:function(a,c,d){return E(function(e,f){return c(e,f,a,d)},{constant:a.constant&&d.constant})},statements:function(){for(var a=[];;)if(0<
this.tokens.length&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(c,d){for(var e,f=0;f<a.length;f++){var h=a[f];h&&(e=h(c,d))}return e}},filterChain:function(){for(var a=this.expression(),c;;)if(c=this.expect("|"))a=this.binaryFn(a,c.fn,this.filter());else return a},filter:function(){for(var a=this.expect(),c=this.$filter(a.text),d=[];this.expect(":");)d.push(this.expression());return ba(function(a,f,h){h=[h];for(var g=0;g<d.length;g++)h.push(d[g](a,
f));return c.apply(a,h)})},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary(),c,d;return(d=this.expect("="))?(a.assign||this.throwError("implies assignment but ["+this.text.substring(0,d.index)+"] can not be assigned to",d),c=this.ternary(),function(d,f){return a.assign(d,c(d,f),f)}):a},ternary:function(){var a=this.logicalOR(),c,d;if(this.expect("?")){c=this.ternary();if(d=this.expect(":"))return this.ternaryFn(a,c,this.ternary());this.throwError("expected :",
d)}else return a},logicalOR:function(){for(var a=this.logicalAND(),c;;)if(c=this.expect("||"))a=this.binaryFn(a,c.fn,this.logicalAND());else return a},logicalAND:function(){var a=this.equality(),c;if(c=this.expect("&&"))a=this.binaryFn(a,c.fn,this.logicalAND());return a},equality:function(){var a=this.relational(),c;if(c=this.expect("==","!=","===","!=="))a=this.binaryFn(a,c.fn,this.equality());return a},relational:function(){var a=this.additive(),c;if(c=this.expect("<",">","<=",">="))a=this.binaryFn(a,
c.fn,this.relational());return a},additive:function(){for(var a=this.multiplicative(),c;c=this.expect("+","-");)a=this.binaryFn(a,c.fn,this.multiplicative());return a},multiplicative:function(){for(var a=this.unary(),c;c=this.expect("*","/","%");)a=this.binaryFn(a,c.fn,this.unary());return a},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(Ya.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var c=
this,d=this.expect().text,e=Nc(d,this.options,this.text);return E(function(c,d,g){return e(g||a(c,d))},{assign:function(e,h,g){return ub(a(e,g),d,h,c.text)}})},objectIndex:function(a){var c=this,d=this.expression();this.consume("]");return E(function(e,f){var h=a(e,f),g=d(e,f);qa(g,c.text);return h?Ja(h[g],c.text):t},{assign:function(e,f,h){var g=d(e,h);return Ja(a(e,h),c.text)[g]=f}})},functionCall:function(a,c){var d=[];if(")"!==this.peekToken().text){do d.push(this.expression());while(this.expect(","))
}this.consume(")");var e=this;return function(f,h){for(var g=[],n=c?c(f,h):f,l=0;l<d.length;l++)g.push(d[l](f,h));l=a(f,h,n)||B;Ja(n,e.text);var m=e.text;if(l){if(l.constructor===l)throw ia("isecfn",m);if(l===lf||l===mf||l===nf)throw ia("isecff",m);}g=l.apply?l.apply(n,g):l(g[0],g[1],g[2],g[3],g[4]);return Ja(g,e.text)}},arrayDeclaration:function(){var a=[],c=!0;if("]"!==this.peekToken().text){do{if(this.peek("]"))break;var d=this.expression();a.push(d);d.constant||(c=!1)}while(this.expect(","))}this.consume("]");
return E(function(c,d){for(var h=[],g=0;g<a.length;g++)h.push(a[g](c,d));return h},{literal:!0,constant:c})},object:function(){var a=[],c=!0;if("}"!==this.peekToken().text){do{if(this.peek("}"))break;var d=this.expect(),d=d.string||d.text;this.consume(":");var e=this.expression();a.push({key:d,value:e});e.constant||(c=!1)}while(this.expect(","))}this.consume("}");return E(function(c,d){for(var e={},n=0;n<a.length;n++){var l=a[n];e[l.key]=l.value(c,d)}return e},{literal:!0,constant:c})}};var Vb={},
wa=O("$sce"),fa={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$=W.createElement("a"),Qc=va(P.location.href,!0);pc.$inject=["$provide"];Rc.$inject=["$locale"];Tc.$inject=["$locale"];var Wc=".",ef={yyyy:aa("FullYear",4),yy:aa("FullYear",2,0,!0),y:aa("FullYear",1),MMMM:wb("Month"),MMM:wb("Month",!0),MM:aa("Month",2,1),M:aa("Month",1,1),dd:aa("Date",2),d:aa("Date",1),HH:aa("Hours",2),H:aa("Hours",1),hh:aa("Hours",2,-12),h:aa("Hours",1,-12),mm:aa("Minutes",2),m:aa("Minutes",1),ss:aa("Seconds",
2),s:aa("Seconds",1),sss:aa("Milliseconds",3),EEEE:wb("Day"),EEE:wb("Day",!0),a:function(a,c){return 12>a.getHours()?c.AMPMS[0]:c.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(vb(Math[0<a?"floor":"ceil"](a/60),2)+vb(Math.abs(a%60),2))},ww:Yc(2),w:Yc(1)},df=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,cf=/^\-?\d+$/;Sc.$inject=["$locale"];var af=ba(J),bf=ba(ib);Uc.$inject=["$parse"];var wd=ba({restrict:"E",compile:function(a,c){8>=T&&
(c.href||c.name||c.$set("href",""),a.append(W.createComment("IE fix")));if(!c.href&&!c.xlinkHref&&!c.name)return function(a,c){var f="[object SVGAnimatedString]"===ya.call(c.prop("href"))?"xlink:href":"href";c.on("click",function(a){c.attr(f)||a.preventDefault()})}}}),jb={};q(pb,function(a,c){if("multiple"!=a){var d=oa("ng-"+c);jb[d]=function(){return{priority:100,link:function(a,f,h){a.$watch(h[d],function(a){h.$set(c,!!a)})}}}}});q(xc,function(a,c){jb[c]=function(){return{priority:100,link:function(a,
e,f){if("ngPattern"===c&&"/"==f.ngPattern.charAt(0)&&(e=f.ngPattern.match(hf))){f.$set("ngPattern",RegExp(e[1],e[2]));return}a.$watch(f[c],function(a){f.$set(c,a)})}}}});q(["src","srcset","href"],function(a){var c=oa("ng-"+a);jb[c]=function(){return{priority:99,link:function(d,e,f){var h=a,g=a;"href"===a&&"[object SVGAnimatedString]"===ya.call(e.prop("href"))&&(g="xlinkHref",f.$attr[g]="xlink:href",h=null);f.$observe(c,function(a){a&&(f.$set(g,a),T&&h&&e.prop(h,f[g]))})}}}});var zb={$addControl:B,
$removeControl:B,$setValidity:B,$setDirty:B,$setPristine:B};Zc.$inject=["$element","$attrs","$scope","$animate"];var bd=function(a){return["$timeout",function(c){return{name:"form",restrict:a?"EAC":"E",controller:Zc,compile:function(){return{pre:function(a,e,f,h){if(!f.action){var g=function(c){a.$apply(function(){h.$commitViewValue()});c.preventDefault?c.preventDefault():c.returnValue=!1};sb(e[0],"submit",g);e.on("$destroy",function(){c(function(){Ta(e[0],"submit",g)},0,!1)})}var n=e.parent().controller("form"),
l=f.name||f.ngForm;l&&ub(a,l,h,l);if(n)e.on("$destroy",function(){n.$removeControl(h);l&&ub(a,l,t,l);E(h,zb)})}}}}}]},xd=bd(),Kd=bd(!0),pf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,qf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,rf=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,cd=/^(\d{4})-(\d{2})-(\d{2})$/,dd=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)$/,Zb=/^(\d{4})-W(\d\d)$/,ed=/^(\d{4})-(\d\d)$/,fd=/^(\d\d):(\d\d)$/,
sf=/(\s+|^)default(\s+|$)/,gd={text:Za,date:$a("date",cd,Bb(cd,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":$a("datetimelocal",dd,Bb(dd,["yyyy","MM","dd","HH","mm"]),"yyyy-MM-ddTHH:mm"),time:$a("time",fd,Bb(fd,["HH","mm"]),"HH:mm"),week:$a("week",Zb,function(a){if(da(a))return a;if(G(a)){Zb.lastIndex=0;var c=Zb.exec(a);if(c){a=+c[1];var d=+c[2],c=Xc(a),d=7*(d-1);return new Date(a,0,c.getDate()+d)}}return NaN},"yyyy-Www"),month:$a("month",ed,Bb(ed,["yyyy","MM"]),"yyyy-MM"),number:function(a,
c,d,e,f,h){Za(a,c,d,e,f,h);e.$parsers.push(function(a){var c=e.$isEmpty(a);if(c||rf.test(a))return e.$setValidity("number",!0),""===a?null:c?a:parseFloat(a);e.$setValidity("number",!1);return t});ff(e,"number",tf,null,e.$$validityState);e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a});d.min&&(a=function(a){var c=parseFloat(d.min);return Xb(e,"min",e.$isEmpty(a)||a>=c,a)},e.$parsers.push(a),e.$formatters.push(a));d.max&&(a=function(a){var c=parseFloat(d.max);return Xb(e,"max",e.$isEmpty(a)||
a<=c,a)},e.$parsers.push(a),e.$formatters.push(a));e.$formatters.push(function(a){return Xb(e,"number",e.$isEmpty(a)||Ca(a),a)})},url:function(a,c,d,e,f,h){Za(a,c,d,e,f,h);e.$validators.url=function(a,c){var d=a||c;return e.$isEmpty(d)||pf.test(d)}},email:function(a,c,d,e,f,h){Za(a,c,d,e,f,h);e.$validators.email=function(a,c){var d=a||c;return e.$isEmpty(d)||qf.test(d)}},radio:function(a,c,d,e){F(d.name)&&c.attr("name",++cb);c.on("click",function(f){c[0].checked&&a.$apply(function(){e.$setViewValue(d.value,
f&&f.type)})});e.$render=function(){c[0].checked=d.value==e.$viewValue};d.$observe("value",e.$render)},checkbox:function(a,c,d,e,f,h,g,n){var l=ad(n,a,"ngTrueValue",d.ngTrueValue,!0),m=ad(n,a,"ngFalseValue",d.ngFalseValue,!1);c.on("click",function(d){a.$apply(function(){e.$setViewValue(c[0].checked,d&&d.type)})});e.$render=function(){c[0].checked=e.$viewValue};e.$isEmpty=function(a){return a!==l};e.$formatters.push(function(a){return ra(a,l)});e.$parsers.push(function(a){return a?l:m})},hidden:B,
button:B,submit:B,reset:B,file:B},tf=["badInput"],jc=["$browser","$sniffer","$filter","$parse",function(a,c,d,e){return{restrict:"E",require:["?ngModel"],link:function(f,h,g,n){n[0]&&(gd[J(g.type)]||gd.text)(f,h,g,n[0],c,a,d,e)}}}],yb="ng-valid",xb="ng-invalid",Ka="ng-pristine",Ab="ng-dirty",uf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout",function(a,c,d,e,f,h,g){function n(a,c){c=c?"-"+gb(c,"-"):"";h.removeClass(e,(a?xb:yb)+c);h.addClass(e,(a?yb:xb)+c)}this.$modelValue=
this.$viewValue=Number.NaN;this.$validators={};this.$parsers=[];this.$formatters=[];this.$viewChangeListeners=[];this.$untouched=!0;this.$touched=!1;this.$pristine=!0;this.$dirty=!1;this.$valid=!0;this.$invalid=!1;this.$name=d.name;var l=f(d.ngModel),m=l.assign,p=null,k=this;if(!m)throw O("ngModel")("nonassign",d.ngModel,ga(e));this.$render=B;this.$isEmpty=function(a){return F(a)||""===a||null===a||a!==a};var s=e.inheritedData("$formController")||zb,r=0,L=this.$error={};e.addClass(Ka).addClass("ng-untouched");
n(!0);this.$setValidity=function(a,c){L[a]!==!c&&(c?(L[a]&&r--,r||(n(!0),k.$valid=!0,k.$invalid=!1)):(n(!1),k.$invalid=!0,k.$valid=!1,r++),L[a]=!c,n(c,a),s.$setValidity(a,c,k))};this.$setPristine=function(){k.$dirty=!1;k.$pristine=!0;h.removeClass(e,Ab);h.addClass(e,Ka)};this.$setUntouched=function(){k.$touched=!1;k.$untouched=!0;h.setClass(e,"ng-untouched","ng-touched")};this.$setTouched=function(){k.$touched=!0;k.$untouched=!1;h.setClass(e,"ng-touched","ng-untouched")};this.$rollbackViewValue=function(){g.cancel(p);
k.$viewValue=k.$$lastCommittedViewValue;k.$render()};this.$validate=function(){if(k.$modelValue===k.$modelValue){var a=k.$modelValue;k.$$runValidators(k.$$invalidModelValue||k.$modelValue,k.$viewValue);a!==k.$modelValue&&k.$$writeModelToScope()}};this.$$runValidators=function(a,c){q(k.$validators,function(d,e){k.$setValidity(e,d(a,c))});k.$modelValue=k.$valid?a:t;k.$$invalidModelValue=k.$valid?t:a};this.$commitViewValue=function(a){var c=k.$viewValue;g.cancel(p);if(a||k.$$lastCommittedViewValue!==
c){k.$$lastCommittedViewValue=c;k.$pristine&&(k.$dirty=!0,k.$pristine=!1,h.removeClass(e,Ka),h.addClass(e,Ab),s.$setDirty());var d=c;q(k.$parsers,function(a){d=a(d)});k.$modelValue===d||!F(k.$$invalidModelValue)&&k.$$invalidModelValue==d||(k.$$runValidators(d,c),k.$$writeModelToScope())}};this.$$writeModelToScope=function(){var d;k.$options&&k.$options.getterSetter&&A(d=l(a))?d(k.$modelValue):m(a,k.$modelValue);q(k.$viewChangeListeners,function(a){try{a()}catch(d){c(d)}})};this.$setViewValue=function(a,
c,d){k.$viewValue=a;k.$options&&!k.$options.updateOnDefault||k.$$debounceViewValueCommit(c,d)};this.$$debounceViewValueCommit=function(a,c){var d=0,e=k.$options;e&&v(e.debounce)&&(e=e.debounce,Ca(e)?d=e:Ca(e[a])?d=e[a]:Ca(e["default"])&&(d=e["default"]));g.cancel(p);d?p=g(function(){k.$commitViewValue(c)},d):k.$commitViewValue(c)};a.$watch(function(){var c=l(a);k.$options&&(k.$options.getterSetter&&A(c))&&(c=c());if(k.$modelValue!==c&&(F(k.$$invalidModelValue)||k.$$invalidModelValue!=c)){for(var d=
k.$formatters,e=d.length,f=c;e--;)f=d[e](f);k.$$runValidators(c,f);k.$viewValue!==f&&(k.$viewValue=k.$$lastCommittedViewValue=f,k.$render())}return c})}],Zd=function(){return{require:["ngModel","^?form","^?ngModelOptions"],controller:uf,link:{pre:function(a,c,d,e){e[2]&&(e[0].$options=e[2].$options);var f=e[0],h=e[1]||zb;h.$addControl(f);a.$on("$destroy",function(){h.$removeControl(f)})},post:function(a,c,d,e){var f=e[0];if(f.$options&&f.$options.updateOn)c.on(f.$options.updateOn,function(c){a.$apply(function(){f.$$debounceViewValueCommit(c&&
c.type)})});c.on("blur",function(c){a.$apply(function(){f.$setTouched()})})}}}},ae=ba({require:"ngModel",link:function(a,c,d,e){e.$viewChangeListeners.push(function(){a.$eval(d.ngChange)})}}),lc=function(){return{require:"?ngModel",link:function(a,c,d,e){e&&(d.required=!0,e.$validators.required=function(a,c){return!d.required||!e.$isEmpty(c)},d.$observe("required",function(){e.$validate()}))}}},kc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f,h=d.ngPattern||d.pattern;d.$observe("pattern",
function(a){G(a)&&0<a.length&&(a=RegExp(a));if(a&&!a.test)throw O("ngPattern")("noregexp",h,a,ga(c));f=a||t;e.$validate()});e.$validators.pattern=function(a){return e.$isEmpty(a)||F(f)||f.test(a)}}}}},nc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("maxlength",function(a){f=U(a)||0;e.$validate()});e.$validators.maxlength=function(a){return e.$isEmpty(a)||a.length<=f}}}}},mc=function(){return{require:"?ngModel",link:function(a,c,d,e){if(e){var f=0;d.$observe("minlength",
function(a){f=U(a)||0;e.$validate()});e.$validators.minlength=function(a){return e.$isEmpty(a)||a.length>=f}}}}},$d=function(){return{require:"ngModel",link:function(a,c,d,e){var f=c.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,g=h?Z(f):f;e.$parsers.push(function(a){if(!F(a)){var c=[];a&&q(a.split(g),function(a){a&&c.push(h?Z(a):a)});return c}});e.$formatters.push(function(a){return M(a)?a.join(f):t});e.$isEmpty=function(a){return!a||!a.length}}}},vf=/^(true|false|\d+)$/,be=function(){return{priority:100,
compile:function(a,c){return vf.test(c.ngValue)?function(a,c,f){f.$set("value",a.$eval(f.ngValue))}:function(a,c,f){a.$watch(f.ngValue,function(a){f.$set("value",a)})}}}},ce=function(){return{controller:["$scope","$attrs",function(a,c){var d=this;this.$options=a.$eval(c.ngModelOptions);this.$options.updateOn!==t?(this.$options.updateOnDefault=!1,this.$options.updateOn=Z(this.$options.updateOn.replace(sf,function(){d.$options.updateOnDefault=!0;return" "}))):this.$options.updateOnDefault=!0}]}},Cd=
xa({compile:function(a){a.addClass("ng-binding");return function(a,d,e){d.data("$binding",e.ngBind);a.$watch(e.ngBind,function(a){d.text(a==t?"":a)})}}}),Ed=["$interpolate",function(a){return function(c,d,e){c=a(d.attr(e.$attr.ngBindTemplate));d.addClass("ng-binding").data("$binding",c);e.$observe("ngBindTemplate",function(a){d.text(a)})}}],Dd=["$sce","$parse",function(a,c){return{compile:function(d,e){d.addClass("ng-binding");return function(d,e,g){e.data("$binding",g.ngBindHtml);var n=c(g.ngBindHtml);
g=c(g.ngBindHtml,function(a){return(a||"").toString()});d.$watch(g,function(){e.html(a.getTrustedHtml(n(d))||"")})}}}}],Fd=Yb("",!0),Hd=Yb("Odd",0),Gd=Yb("Even",1),Id=xa({compile:function(a,c){c.$set("ngCloak",t);a.removeClass("ng-cloak")}}),Jd=[function(){return{scope:!0,controller:"@",priority:500}}],oc={};q("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var c=oa("ng-"+a);oc[c]=
["$parse",function(d){return{compile:function(e,f){var h=d(f[c]);return function(c,d){d.on(J(a),function(a){c.$apply(function(){h(c,{$event:a})})})}}}}]});var Md=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,h){var g,n,l;c.$watch(e.ngIf,function(c){c?n||h(function(c,f){n=f;c[c.length++]=W.createComment(" end ngIf: "+e.ngIf+" ");g={clone:c};a.enter(c,d.parent(),d)}):(l&&(l.remove(),l=null),n&&(n.$destroy(),n=
null),g&&(l=hb(g.clone),a.leave(l,function(){l=null}),g=null))})}}}],Nd=["$http","$templateCache","$anchorScroll","$animate","$sce",function(a,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Oa.noop,compile:function(h,g){var n=g.ngInclude||g.src,l=g.onload||"",m=g.autoscroll;return function(g,h,q,r,L){var u=0,t,w,x,y=function(){w&&(w.remove(),w=null);t&&(t.$destroy(),t=null);x&&(e.leave(x,function(){w=null}),w=x,x=null)};g.$watch(f.parseAsResourceUrl(n),function(f){var n=
function(){!v(m)||m&&!g.$eval(m)||d()},q=++u;f?(a.get(f,{cache:c}).success(function(a){if(q===u){var c=g.$new();r.template=a;a=L(c,function(a){y();e.enter(a,null,h,n)});t=c;x=a;t.$emit("$includeContentLoaded");g.$eval(l)}}).error(function(){q===u&&(y(),g.$emit("$includeContentError"))}),g.$emit("$includeContentRequested")):(y(),r.template=null)})}}}}],de=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){d.html(f.template);a(d.contents())(c)}}}],
Od=xa({priority:450,compile:function(){return{pre:function(a,c,d){a.$eval(d.ngInit)}}}}),Pd=xa({terminal:!0,priority:1E3}),Qd=["$locale","$interpolate",function(a,c){var d=/{}/g;return{restrict:"EA",link:function(e,f,h){var g=h.count,n=h.$attr.when&&f.attr(h.$attr.when),l=h.offset||0,m=e.$eval(n)||{},p={},k=c.startSymbol(),s=c.endSymbol(),r=/^when(Minus)?(.+)$/;q(h,function(a,c){r.test(c)&&(m[J(c.replace("when","").replace("Minus","-"))]=f.attr(h.$attr[c]))});q(m,function(a,e){p[e]=c(a.replace(d,
k+g+"-"+l+s))});e.$watch(function(){var c=parseFloat(e.$eval(g));if(isNaN(c))return"";c in m||(c=a.pluralCat(c-l));return p[c](e)},function(a){f.text(a)})}}}],Rd=["$parse","$animate",function(a,c){var d=O("ngRepeat");return{multiElement:!0,transclude:"element",priority:1E3,terminal:!0,$$tlb:!0,link:function(e,f,h,g,n){var l=h.ngRepeat,m=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),p,k,s,r,t,u,v={$id:Ga};if(!m)throw d("iexp",l);h=m[1];g=m[2];(m=m[3])?(p=a(m),k=function(a,
c,d){u&&(v[u]=a);v[t]=c;v.$index=d;return p(e,v)}):(s=function(a,c){return Ga(c)},r=function(a){return a});m=h.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);if(!m)throw d("iidexp",h);t=m[3]||m[1];u=m[2];var w={};e.$watchCollection(g,function(a){var e,g,h=f[0],m,p={},v,D,E,B,F,G,A,K=[],M=function(a,c){a[t]=E;u&&(a[u]=D);a.$index=c;a.$first=0===c;a.$last=c===v-1;a.$middle=!(a.$first||a.$last);a.$odd=!(a.$even=0===(c&1))};if(bb(a))G=a,F=k||s;else{F=k||r;G=[];for(g in a)a.hasOwnProperty(g)&&
"$"!=g.charAt(0)&&G.push(g);G.sort()}v=G.length;g=K.length=G.length;for(e=0;e<g;e++)if(D=a===G?e:G[e],E=a[D],B=F(D,E,e),Aa(B,"`track by` id"),w.hasOwnProperty(B))A=w[B],delete w[B],p[B]=A,K[e]=A;else{if(p.hasOwnProperty(B))throw q(K,function(a){a&&a.scope&&(w[a.id]=a)}),d("dupes",l,B);K[e]={id:B};p[B]=!1}for(m in w)w.hasOwnProperty(m)&&(A=w[m],g=hb(A.clone),c.leave(g),q(g,function(a){a.$$NG_REMOVED=!0}),A.scope.$destroy());e=0;for(g=G.length;e<g;e++)if(D=a===G?e:G[e],E=a[D],A=K[e],K[e-1]&&(h=K[e-
1].clone[K[e-1].clone.length-1]),A.scope){m=h;do m=m.nextSibling;while(m&&m.$$NG_REMOVED);A.clone[0]!=m&&c.move(hb(A.clone),null,z(h));h=A.clone[A.clone.length-1];M(A.scope,e)}else n(function(a,d){A.scope=d;a[a.length++]=W.createComment(" end ngRepeat: "+l+" ");c.enter(a,null,z(h));h=a;A.clone=a;p[A.id]=A;M(A.scope,e)});w=p})}}}],Sd=["$animate",function(a){return{multiElement:!0,link:function(c,d,e){c.$watch(e.ngShow,function(c){a[c?"removeClass":"addClass"](d,"ng-hide")})}}}],Ld=["$animate",function(a){return{multiElement:!0,
link:function(c,d,e){c.$watch(e.ngHide,function(c){a[c?"addClass":"removeClass"](d,"ng-hide")})}}}],Td=xa(function(a,c,d){a.$watch(d.ngStyle,function(a,d){d&&a!==d&&q(d,function(a,d){c.css(d,"")});a&&c.css(a)},!0)}),Ud=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,f){var h=[],g=[],n=[],l=[];c.$watch(e.ngSwitch||e.on,function(d){var p,k;p=0;for(k=n.length;p<k;++p)n[p].remove();p=n.length=0;for(k=l.length;p<k;++p){var s=
hb(g[p].clone);l[p].$destroy();n[p]=s;a.leave(s,function(){n.splice(p,1)})}g.length=0;l.length=0;if(h=f.cases["!"+d]||f.cases["?"])c.$eval(e.change),q(h,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=W.createComment(" end ngSwitchWhen: ");g.push({clone:d});a.enter(d,f.parent(),f)})})})}}}],Vd=xa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["!"+d.ngSwitchWhen]=e.cases["!"+d.ngSwitchWhen]||[];e.cases["!"+d.ngSwitchWhen].push({transclude:f,
element:c})}}),Wd=xa({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,c,d,e,f){e.cases["?"]=e.cases["?"]||[];e.cases["?"].push({transclude:f,element:c})}}),Yd=xa({restrict:"EAC",link:function(a,c,d,e,f){if(!f)throw O("ngTransclude")("orphan",ga(c));f(function(a){c.empty();c.append(a)})}}),yd=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(c,d){"text/ng-template"==d.type&&a.put(d.id,c[0].text)}}}],wf=O("ngOptions"),Xd=ba({terminal:!0}),
zd=["$compile","$parse",function(a,c){var d=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,e={$setViewValue:B};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,c,d){var n=this,l={},m=e,p;n.databound=d.ngModel;n.init=function(a,c,d){m=a;p=d};n.addOption=function(c,d){Aa(c,'"option value"');l[c]=
!0;m.$viewValue==c&&(a.val(c),p.parent()&&p.remove());d[0].hasAttribute("selected")&&(d[0].selected=!0)};n.removeOption=function(a){this.hasOption(a)&&(delete l[a],m.$viewValue==a&&this.renderUnknownOption(a))};n.renderUnknownOption=function(c){c="? "+Ga(c)+" ?";p.val(c);a.prepend(p);a.val(c);p.prop("selected",!0)};n.hasOption=function(a){return l.hasOwnProperty(a)};c.$on("$destroy",function(){n.renderUnknownOption=B})}],link:function(e,h,g,n){function l(a,c,d,e){d.$render=function(){var a=d.$viewValue;
e.hasOption(a)?(x.parent()&&x.remove(),c.val(a),""===a&&u.prop("selected",!0)):F(a)&&u?c.val(""):e.renderUnknownOption(a)};c.on("change",function(){a.$apply(function(){x.parent()&&x.remove();d.$setViewValue(c.val())})})}function m(a,c,d){var e;d.$render=function(){var a=new Va(d.$viewValue);q(c.find("option"),function(c){c.selected=v(a.get(c.value))})};a.$watch(function(){ra(e,d.$viewValue)||(e=ja(d.$viewValue),d.$render())});c.on("change",function(){a.$apply(function(){var a=[];q(c.find("option"),
function(c){c.selected&&a.push(c.value)});d.$setViewValue(a)})})}function p(e,f,g){function h(){var a={"":[]},c=[""],d,k,r,t,B;t=g.$modelValue;B=x(e)||[];var D=n?$b(B):B,G,z,C;z={};r=!1;var F,J;if(s)if(u&&M(t))for(r=new Va([]),C=0;C<t.length;C++)z[m]=t[C],r.put(u(e,z),t[C]);else r=new Va(t);for(C=0;G=D.length,C<G;C++){k=C;if(n){k=D[C];if("$"===k.charAt(0))continue;z[n]=k}z[m]=B[k];d=p(e,z)||"";(k=a[d])||(k=a[d]=[],c.push(d));s?d=v(r.remove(u?u(e,z):q(e,z))):(u?(d={},d[m]=t,d=u(e,d)===u(e,z)):d=t===
q(e,z),r=r||d);F=l(e,z);F=v(F)?F:"";k.push({id:u?u(e,z):n?D[C]:C,label:F,selected:d})}s||(A||null===t?a[""].unshift({id:"",label:"",selected:!r}):r||a[""].unshift({id:"?",label:"",selected:!0}));z=0;for(D=c.length;z<D;z++){d=c[z];k=a[d];y.length<=z?(t={element:w.clone().attr("label",d),label:k.label},B=[t],y.push(B),f.append(t.element)):(B=y[z],t=B[0],t.label!=d&&t.element.attr("label",t.label=d));F=null;C=0;for(G=k.length;C<G;C++)r=k[C],(d=B[C+1])?(F=d.element,d.label!==r.label&&F.text(d.label=r.label),
d.id!==r.id&&F.val(d.id=r.id),d.selected!==r.selected&&(F.prop("selected",d.selected=r.selected),T&&F.prop("selected",d.selected))):(""===r.id&&A?J=A:(J=E.clone()).val(r.id).prop("selected",r.selected).text(r.label),B.push({element:J,label:r.label,id:r.id,selected:r.selected}),F?F.after(J):t.element.append(J),F=J);for(C++;B.length>C;)B.pop().element.remove()}for(;y.length>z;)y.pop()[0].element.remove()}var k;if(!(k=r.match(d)))throw wf("iexp",r,ga(f));var l=c(k[2]||k[1]),m=k[4]||k[6],n=k[5],p=c(k[3]||
""),q=c(k[2]?k[1]:m),x=c(k[7]),u=k[8]?c(k[8]):null,y=[[{element:f,label:""}]];A&&(a(A)(e),A.removeClass("ng-scope"),A.remove());f.empty();f.on("change",function(){e.$apply(function(){var a,c=x(e)||[],d={},h,k,l,p,r,w,v;if(s)for(k=[],p=0,w=y.length;p<w;p++)for(a=y[p],l=1,r=a.length;l<r;l++){if((h=a[l].element)[0].selected){h=h.val();n&&(d[n]=h);if(u)for(v=0;v<c.length&&(d[m]=c[v],u(e,d)!=h);v++);else d[m]=c[h];k.push(q(e,d))}}else{h=f.val();if("?"==h)k=t;else if(""===h)k=null;else if(u)for(v=0;v<c.length;v++){if(d[m]=
c[v],u(e,d)==h){k=q(e,d);break}}else d[m]=c[h],n&&(d[n]=h),k=q(e,d);1<y[0].length&&y[0][1].id!==h&&(y[0][1].selected=!1)}g.$setViewValue(k)})});g.$render=h;e.$watch(h)}if(n[1]){var k=n[0];n=n[1];var s=g.multiple,r=g.ngOptions,A=!1,u,E=z(W.createElement("option")),w=z(W.createElement("optgroup")),x=E.clone();g=0;for(var y=h.children(),B=y.length;g<B;g++)if(""===y[g].value){u=A=y.eq(g);break}k.init(n,A,x);s&&(n.$isEmpty=function(a){return!a||0===a.length});r?p(e,h,n):s?m(e,h,n):l(e,h,n,k)}}}}],Bd=["$interpolate",
function(a){var c={addOption:B,removeOption:B};return{restrict:"E",priority:100,compile:function(d,e){if(F(e.value)){var f=a(d.text(),!0);f||e.$set("value",d.text())}return function(a,d,e){var l=d.parent(),m=l.data("$selectController")||l.parent().data("$selectController");m&&m.databound?d.prop("selected",!1):m=c;f?a.$watch(f,function(a,c){e.$set("value",a);c!==a&&m.removeOption(c);m.addOption(a,d)}):m.addOption(e.value,d);d.on("$destroy",function(){m.removeOption(e.value)})}}}}],Ad=ba({restrict:"E",
terminal:!1});P.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(qd(),sd(Oa),z(W).ready(function(){od(W,gc)}))})(window,document);!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-animate){display:none !important;}ng\\:form{display:block;}</style>');
//# sourceMappingURL=angular.min.js.map

/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.11.0 - 2014-05-01
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});{c[0].offsetWidth}c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition",function(a,b,c){function d(){e();var c=+a.interval;!isNaN(c)&&c>=0&&(g=b(f,c))}function e(){g&&(b.cancel(g),g=null)}function f(){h?(a.next(),d()):a.pause()}var g,h,i=this,j=i.slides=a.slides=[],k=-1;i.currentSlide=null;var l=!1;i.select=a.select=function(e,f){function g(){if(!l){if(i.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element){e.$element.addClass(f);{e.$element[0].offsetWidth}angular.forEach(j,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(i.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(e,i.currentSlide)}else h(e,i.currentSlide);i.currentSlide=e,k=m,d()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var m=j.indexOf(e);void 0===f&&(f=m>k?"next":"prev"),e&&e!==i.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){l=!0}),i.indexOfSlide=function(a){return j.indexOf(a)},a.next=function(){var b=(k+1)%j.length;return a.$currentTransition?void 0:i.select(j[b],"next")},a.prev=function(){var b=0>k-1?j.length-1:k-1;return a.$currentTransition?void 0:i.select(j[b],"prev")},a.isActive=function(a){return i.currentSlide===a},a.$watch("interval",d),a.$on("$destroy",e),a.play=function(){h||(h=!0,d())},a.pause=function(){a.noPause||(h=!1,e())},i.addSlide=function(b,c){b.$element=c,j.push(b),1===j.length||b.active?(i.select(j[j.length-1]),1==j.length&&a.play()):b.active=!1},i.removeSlide=function(a){var b=j.indexOf(a);j.splice(b,1),j.length>0&&a.active?i.select(b>=j.length?j[b-1]:j[b]):k>b&&k--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var d={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.createParser=function(a){var c=[],e=a.split("");return angular.forEach(d,function(b,d){var f=a.indexOf(d);if(f>-1){a=a.split(""),e[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+d.length;h>g;g++)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+e.join("")+"$"),map:b(c,"index")}},this.parse=function(b,d){if(!angular.isString(b))return b;d=a.DATETIME_FORMATS[d]||d,this.parsers[d]||(this.parsers[d]=this.createParser(d));var e=this.parsers[d],f=e.regex,g=e.map,h=b.match(f);if(h&&h.length){for(var i,j={year:1900,month:0,date:1,hours:0},k=1,l=h.length;l>k;k++){var m=g[k-1];m.apply&&m.apply.call(j,h[k])}return c(j.year,j.month,j.date)&&(i=new Date(j.year,j.month,j.date,j.hours)),i}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),angular.forEach(["minDate","maxDate"],function(a){j[a]&&(h.$parent.$watch(b(j[a]),function(b){h[a]=b}),r.attr(l(a),a))}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){a&&a.isDefaultPrevented()||b.$apply(function(){b.isOpen=!1})},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{restrict:"CA",controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{restrict:"CA",require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b){b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g,0)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();h>=0&&!k&&(l=e.$new(!0),l.index=h,k=d("<div modal-backdrop></div>")(l),f.append(k));var i=angular.element("<div modal-window></div>");i.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var j=d(i)(b.scope);n.top().value.modalDomEl=j,f.append(j),f.addClass(m)},o.close=function(a,b){var c=n.get(a).value;c&&(c.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a).value;c&&(c.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";
return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<div "+p+'-popup title="'+q+"tt_title"+r+'" content="'+q+"tt_content"+r+'" placement="'+q+"tt_placement"+r+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var a=f(s);return function(b,c,d){function f(){b.tt_isOpen?m():k()}function k(){(!y||b.$eval(d[l+"Enable"]))&&(b.tt_popupDelay?v||(v=g(p,b.tt_popupDelay,!1),v.then(function(a){a()})):p()())}function m(){b.$apply(function(){q()})}function p(){return v=null,u&&(g.cancel(u),u=null),b.tt_content?(r(),t.css({top:0,left:0,display:"block"}),w?i.find("body").append(t):c.after(t),z(),b.tt_isOpen=!0,b.$digest(),z):angular.noop}function q(){b.tt_isOpen=!1,g.cancel(v),v=null,b.tt_animation?u||(u=g(s,500)):s()}function r(){t&&s(),t=a(b,function(){}),b.$digest()}function s(){u=null,t&&(t.remove(),t=null)}var t,u,v,w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=angular.isDefined(d[l+"Enable"]),z=function(){var a=j.positionElements(c,t,b.tt_placement,w);a.top+="px",a.left+="px",t.css(a)};b.tt_isOpen=!1,d.$observe(e,function(a){b.tt_content=a,!a&&b.tt_isOpen&&q()}),d.$observe(l+"Title",function(a){b.tt_title=a}),d.$observe(l+"Placement",function(a){b.tt_placement=angular.isDefined(a)?a:o.placement}),d.$observe(l+"PopupDelay",function(a){var c=parseInt(a,10);b.tt_popupDelay=isNaN(c)?o.popupDelay:c});var A=function(){c.unbind(x.show,k),c.unbind(x.hide,m)};d.$observe(l+"Trigger",function(a){A(),x=n(a),x.show===x.hide?c.bind(x.show,f):(c.bind(x.show,k),c.bind(x.hide,m))});var B=b.$eval(d[l+"Animation"]);b.tt_animation=angular.isDefined(B)?!!B:o.animation,d.$observe(l+"AppendToBody",function(a){w=angular.isDefined(a)?h(a)(b):w}),w&&b.$on("$locationChangeSuccess",function(){b.tt_isOpen&&q()}),b.$on("$destroy",function(){g.cancel(u),g.cancel(v),A(),s()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=b(k.ngModel).assign,v=g.parse(k.typeahead),w=i.$new();i.$on("$destroy",function(){w.$destroy()});var x="typeahead-"+w.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":x});var y=angular.element("<div typeahead-popup></div>");y.attr({id:x,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&y.attr("template-url",k.typeaheadTemplateUrl);var z=function(){w.matches=[],w.activeIdx=-1,j.attr("aria-expanded",!1)},A=function(a){return x+"-option-"+a};w.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",A(a))});var B=function(a){var b={$viewValue:a};q(i,!0),c.when(v.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){w.activeIdx=0,w.matches.length=0;for(var e=0;e<c.length;e++)b[v.itemName]=c[e],w.matches.push({id:A(e),label:v.viewMapper(w,b),model:c[e]});w.query=a,w.position=t?f.offset(j):f.position(j),w.position.top=w.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else z();d&&q(i,!1)},function(){z(),q(i,!1)})};z(),w.query=void 0;var C;l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(C&&d.cancel(C),C=d(function(){B(a)},o)):B(a):(q(i,!1),z()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[v.itemName]=a,b=v.viewMapper(i,d),d[v.itemName]=void 0,c=v.viewMapper(i,d),b!==c?b:a)}),w.select=function(a){var b,c,e={};e[v.itemName]=c=w.matches[a].model,b=v.modelMapper(i,e),u(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:v.viewMapper(i,e)}),z(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==w.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(w.activeIdx=(w.activeIdx+1)%w.matches.length,w.$digest()):38===a.which?(w.activeIdx=(w.activeIdx?w.activeIdx:w.matches.length)-1,w.$digest()):13===a.which||9===a.which?w.$apply(function(){w.select(w.activeIdx)}):27===a.which&&(a.stopPropagation(),z(),w.$digest()))}),j.bind("blur",function(){m=!1});var D=function(a){j[0]!==a.target&&(z(),w.$digest())};e.bind("click",D),i.$on("$destroy",function(){e.unbind("click",D)});var E=a(y)(w);t?e.find("body").append(E):j.after(E)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="{\'alert-{{type || \'warning\'}}\': true, \'alert-dismissable\': closeable}" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-if="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')
}]);
var angularSkycons = angular.module( 'angular-skycons', [] );


angularSkycons.directive( 'skycon', function () {
    return {
        restrict: 'E',
        replace: true,
        scope: {
            icon: "=",
            size: "="
        },
        link: function ( scope, element, attrs ) {

            // make a canvas for our icon
            var canvas = document.createElement( 'canvas' );

            // set the CSS class from attribute
            if ( !attrs.class ) {
                canvas.className = "";
            } else {
                canvas.className = attrs.class;
            }

            // set default color if "color" attribute not present
            var config = {};
            if ( !attrs.color ) {
                config.color = "black";
            } else {
                config.color = attrs.color;
            }

            var skycons = new Skycons( config );

            // watch the size property from the controller
            scope.$watch( "size", function ( newVal, oldVal ) {
                if ( newVal ) {
                    canvas.height = newVal;
                    canvas.width = newVal;
                } else {
                    canvas.height = scope.size || 64;
                    canvas.width = scope.size  || 64;
                }
            }, true );

            // watch the icon property from the controller
            scope.$watch( "icon", function () {
                skycons.add( canvas, scope.icon );
            }, true );

            skycons.play();

            if ( element[0].nodeType === 8 ) {
                element.replaceWith( canvas );
            } else {
                element[0].appendChild( canvas );
            }

            scope.$on('$destroy', function () {
                skycons.remove(canvas);
                if (skycons.list.length === 0) {
                    skycons.pause(canvas);
                }
            });
        }
    };
} );

(function(global) {
    "use strict";

    /* Set up a RequestAnimationFrame shim so we can animate efficiently FOR
     * GREAT JUSTICE. */
    var requestInterval, cancelInterval;

    (function() {
        var raf = global.requestAnimationFrame       ||
                global.webkitRequestAnimationFrame ||
                global.mozRequestAnimationFrame    ||
                global.oRequestAnimationFrame      ||
                global.msRequestAnimationFrame     ,
            caf = global.cancelAnimationFrame        ||
                global.webkitCancelAnimationFrame  ||
                global.mozCancelAnimationFrame     ||
                global.oCancelAnimationFrame       ||
                global.msCancelAnimationFrame      ;

        if(raf && caf) {
            requestInterval = function(fn, delay) {
                var handle = {value: null};

                function loop() {
                    handle.value = raf(loop);
                    fn();
                }

                loop();
                return handle;
            };

            cancelInterval = function(handle) {
                caf(handle.value);
            };
        }

        else {
            requestInterval = setInterval;
            cancelInterval = clearInterval;
        }
    }());

    /* Catmull-rom spline stuffs. */
    /*
     function upsample(n, spline) {
     var polyline = [],
     len = spline.length,
     bx  = spline[0],
     by  = spline[1],
     cx  = spline[2],
     cy  = spline[3],
     dx  = spline[4],
     dy  = spline[5],
     i, j, ax, ay, px, qx, rx, sx, py, qy, ry, sy, t;

     for(i = 6; i !== spline.length; i += 2) {
     ax = bx;
     bx = cx;
     cx = dx;
     dx = spline[i    ];
     px = -0.5 * ax + 1.5 * bx - 1.5 * cx + 0.5 * dx;
     qx =        ax - 2.5 * bx + 2.0 * cx - 0.5 * dx;
     rx = -0.5 * ax            + 0.5 * cx           ;
     sx =                   bx                      ;

     ay = by;
     by = cy;
     cy = dy;
     dy = spline[i + 1];
     py = -0.5 * ay + 1.5 * by - 1.5 * cy + 0.5 * dy;
     qy =        ay - 2.5 * by + 2.0 * cy - 0.5 * dy;
     ry = -0.5 * ay            + 0.5 * cy           ;
     sy =                   by                      ;

     for(j = 0; j !== n; ++j) {
     t = j / n;

     polyline.push(
     ((px * t + qx) * t + rx) * t + sx,
     ((py * t + qy) * t + ry) * t + sy
     );
     }
     }

     polyline.push(
     px + qx + rx + sx,
     py + qy + ry + sy
     );

     return polyline;
     }

     function downsample(n, polyline) {
     var len = 0,
     i, dx, dy;

     for(i = 2; i !== polyline.length; i += 2) {
     dx = polyline[i    ] - polyline[i - 2];
     dy = polyline[i + 1] - polyline[i - 1];
     len += Math.sqrt(dx * dx + dy * dy);
     }

     len /= n;

     var small = [],
     target = len,
     min = 0,
     max, t;

     small.push(polyline[0], polyline[1]);

     for(i = 2; i !== polyline.length; i += 2) {
     dx = polyline[i    ] - polyline[i - 2];
     dy = polyline[i + 1] - polyline[i - 1];
     max = min + Math.sqrt(dx * dx + dy * dy);

     if(max > target) {
     t = (target - min) / (max - min);

     small.push(
     polyline[i - 2] + dx * t,
     polyline[i - 1] + dy * t
     );

     target += len;
     }

     min = max;
     }

     small.push(polyline[polyline.length - 2], polyline[polyline.length - 1]);

     return small;
     }
     */

    /* Define skycon things. */
    /* FIXME: I'm *really really* sorry that this code is so gross. Really, I am.
     * I'll try to clean it up eventually! Promise! */
    var KEYFRAME = 500,
        STROKE = 0.08,
        TAU = 2.0 * Math.PI,
        TWO_OVER_SQRT_2 = 2.0 / Math.sqrt(2);

    function circle(ctx, x, y, r) {
        ctx.beginPath();
        ctx.arc(x, y, r, 0, TAU, false);
        ctx.fill();
    }

    function line(ctx, ax, ay, bx, by) {
        ctx.beginPath();
        ctx.moveTo(ax, ay);
        ctx.lineTo(bx, by);
        ctx.stroke();
    }

    function puff(ctx, t, cx, cy, rx, ry, rmin, rmax) {
        var c = Math.cos(t * TAU),
            s = Math.sin(t * TAU);

        rmax -= rmin;

        circle(
            ctx,
            cx - s * rx,
            cy + c * ry + rmax * 0.5,
            rmin + (1 - c * 0.5) * rmax
        );
    }

    function puffs(ctx, t, cx, cy, rx, ry, rmin, rmax) {
        var i;

        for(i = 5; i--; )
            puff(ctx, t + i / 5, cx, cy, rx, ry, rmin, rmax);
    }

    function cloud(ctx, t, cx, cy, cw, s, color) {
        t /= 30000;

        var a = cw * 0.21,
            b = cw * 0.12,
            c = cw * 0.24,
            d = cw * 0.28;

        ctx.fillStyle = color;
        puffs(ctx, t, cx, cy, a, b, c, d);

        ctx.globalCompositeOperation = 'destination-out';
        puffs(ctx, t, cx, cy, a, b, c - s, d - s);
        ctx.globalCompositeOperation = 'source-over';
    }

    function sun(ctx, t, cx, cy, cw, s, color) {
        t /= 120000;

        var a = cw * 0.25 - s * 0.5,
            b = cw * 0.32 + s * 0.5,
            c = cw * 0.50 - s * 0.5,
            i, p, cos, sin;

        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        ctx.beginPath();
        ctx.arc(cx, cy, a, 0, TAU, false);
        ctx.stroke();

        for(i = 8; i--; ) {
            p = (t + i / 8) * TAU;
            cos = Math.cos(p);
            sin = Math.sin(p);
            line(ctx, cx + cos * b, cy + sin * b, cx + cos * c, cy + sin * c);
        }
    }

    function moon(ctx, t, cx, cy, cw, s, color) {
        t /= 15000;

        var a = cw * 0.29 - s * 0.5,
            b = cw * 0.05,
            c = Math.cos(t * TAU),
            p = c * TAU / -16;

        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        cx += c * b;

        ctx.beginPath();
        ctx.arc(cx, cy, a, p + TAU / 8, p + TAU * 7 / 8, false);
        ctx.arc(cx + Math.cos(p) * a * TWO_OVER_SQRT_2, cy + Math.sin(p) * a * TWO_OVER_SQRT_2, a, p + TAU * 5 / 8, p + TAU * 3 / 8, true);
        ctx.closePath();
        ctx.stroke();
    }

    function rain(ctx, t, cx, cy, cw, s, color) {
        t /= 1350;

        var a = cw * 0.16,
            b = TAU * 11 / 12,
            c = TAU *  7 / 12,
            i, p, x, y;

        ctx.fillStyle = color;

        for(i = 4; i--; ) {
            p = (t + i / 4) % 1;
            x = cx + ((i - 1.5) / 1.5) * (i === 1 || i === 2 ? -1 : 1) * a;
            y = cy + p * p * cw;
            ctx.beginPath();
            ctx.moveTo(x, y - s * 1.5);
            ctx.arc(x, y, s * 0.75, b, c, false);
            ctx.fill();
        }
    }

    function sleet(ctx, t, cx, cy, cw, s, color) {
        t /= 750;

        var a = cw * 0.1875,
            b = TAU * 11 / 12,
            c = TAU *  7 / 12,
            i, p, x, y;

        ctx.strokeStyle = color;
        ctx.lineWidth = s * 0.5;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        for(i = 4; i--; ) {
            p = (t + i / 4) % 1;
            x = Math.floor(cx + ((i - 1.5) / 1.5) * (i === 1 || i === 2 ? -1 : 1) * a) + 0.5;
            y = cy + p * cw;
            line(ctx, x, y - s * 1.5, x, y + s * 1.5);
        }
    }

    function snow(ctx, t, cx, cy, cw, s, color) {
        t /= 3000;

        var a  = cw * 0.16,
            b  = s * 0.75,
            u  = t * TAU * 0.7,
            ux = Math.cos(u) * b,
            uy = Math.sin(u) * b,
            v  = u + TAU / 3,
            vx = Math.cos(v) * b,
            vy = Math.sin(v) * b,
            w  = u + TAU * 2 / 3,
            wx = Math.cos(w) * b,
            wy = Math.sin(w) * b,
            i, p, x, y;

        ctx.strokeStyle = color;
        ctx.lineWidth = s * 0.5;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        for(i = 4; i--; ) {
            p = (t + i / 4) % 1;
            x = cx + Math.sin((p + i / 4) * TAU) * a;
            y = cy + p * cw;

            line(ctx, x - ux, y - uy, x + ux, y + uy);
            line(ctx, x - vx, y - vy, x + vx, y + vy);
            line(ctx, x - wx, y - wy, x + wx, y + wy);
        }
    }

    function fogbank(ctx, t, cx, cy, cw, s, color) {
        t /= 30000;

        var a = cw * 0.21,
            b = cw * 0.06,
            c = cw * 0.21,
            d = cw * 0.28;

        ctx.fillStyle = color;
        puffs(ctx, t, cx, cy, a, b, c, d);

        ctx.globalCompositeOperation = 'destination-out';
        puffs(ctx, t, cx, cy, a, b, c - s, d - s);
        ctx.globalCompositeOperation = 'source-over';
    }

    /*
     var WIND_PATHS = [
     downsample(63, upsample(8, [
     -1.00, -0.28,
     -0.75, -0.18,
     -0.50,  0.12,
     -0.20,  0.12,
     -0.04, -0.04,
     -0.07, -0.18,
     -0.19, -0.18,
     -0.23, -0.05,
     -0.12,  0.11,
     0.02,  0.16,
     0.20,  0.15,
     0.50,  0.07,
     0.75,  0.18,
     1.00,  0.28
     ])),
     downsample(31, upsample(16, [
     -1.00, -0.10,
     -0.75,  0.00,
     -0.50,  0.10,
     -0.25,  0.14,
     0.00,  0.10,
     0.25,  0.00,
     0.50, -0.10,
     0.75, -0.14,
     1.00, -0.10
     ]))
     ];
     */

    var WIND_PATHS = [
            [
                -0.7500, -0.1800, -0.7219, -0.1527, -0.6971, -0.1225,
                -0.6739, -0.0910, -0.6516, -0.0588, -0.6298, -0.0262,
                -0.6083,  0.0065, -0.5868,  0.0396, -0.5643,  0.0731,
                -0.5372,  0.1041, -0.5033,  0.1259, -0.4662,  0.1406,
                -0.4275,  0.1493, -0.3881,  0.1530, -0.3487,  0.1526,
                -0.3095,  0.1488, -0.2708,  0.1421, -0.2319,  0.1342,
                -0.1943,  0.1217, -0.1600,  0.1025, -0.1290,  0.0785,
                -0.1012,  0.0509, -0.0764,  0.0206, -0.0547, -0.0120,
                -0.0378, -0.0472, -0.0324, -0.0857, -0.0389, -0.1241,
                -0.0546, -0.1599, -0.0814, -0.1876, -0.1193, -0.1964,
                -0.1582, -0.1935, -0.1931, -0.1769, -0.2157, -0.1453,
                -0.2290, -0.1085, -0.2327, -0.0697, -0.2240, -0.0317,
                -0.2064,  0.0033, -0.1853,  0.0362, -0.1613,  0.0672,
                -0.1350,  0.0961, -0.1051,  0.1213, -0.0706,  0.1397,
                -0.0332,  0.1512,  0.0053,  0.1580,  0.0442,  0.1624,
                0.0833,  0.1636,  0.1224,  0.1615,  0.1613,  0.1565,
                0.1999,  0.1500,  0.2378,  0.1402,  0.2749,  0.1279,
                0.3118,  0.1147,  0.3487,  0.1015,  0.3858,  0.0892,
                0.4236,  0.0787,  0.4621,  0.0715,  0.5012,  0.0702,
                0.5398,  0.0766,  0.5768,  0.0890,  0.6123,  0.1055,
                0.6466,  0.1244,  0.6805,  0.1440,  0.7147,  0.1630,
                0.7500,  0.1800
            ],
            [
                -0.7500,  0.0000, -0.7033,  0.0195, -0.6569,  0.0399,
                -0.6104,  0.0600, -0.5634,  0.0789, -0.5155,  0.0954,
                -0.4667,  0.1089, -0.4174,  0.1206, -0.3676,  0.1299,
                -0.3174,  0.1365, -0.2669,  0.1398, -0.2162,  0.1391,
                -0.1658,  0.1347, -0.1157,  0.1271, -0.0661,  0.1169,
                -0.0170,  0.1046,  0.0316,  0.0903,  0.0791,  0.0728,
                0.1259,  0.0534,  0.1723,  0.0331,  0.2188,  0.0129,
                0.2656, -0.0064,  0.3122, -0.0263,  0.3586, -0.0466,
                0.4052, -0.0665,  0.4525, -0.0847,  0.5007, -0.1002,
                0.5497, -0.1130,  0.5991, -0.1240,  0.6491, -0.1325,
                0.6994, -0.1380,  0.7500, -0.1400
            ]
        ],
        WIND_OFFSETS = [
            {start: 0.36, end: 0.11},
            {start: 0.56, end: 0.16}
        ];

    function leaf(ctx, t, x, y, cw, s, color) {
        var a = cw / 8,
            b = a / 3,
            c = 2 * b,
            d = (t % 1) * TAU,
            e = Math.cos(d),
            f = Math.sin(d);

        ctx.fillStyle = color;
        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        ctx.beginPath();
        ctx.arc(x        , y        , a, d          , d + Math.PI, false);
        ctx.arc(x - b * e, y - b * f, c, d + Math.PI, d          , false);
        ctx.arc(x + c * e, y + c * f, b, d + Math.PI, d          , true );
        ctx.globalCompositeOperation = 'destination-out';
        ctx.fill();
        ctx.globalCompositeOperation = 'source-over';
        ctx.stroke();
    }

    function swoosh(ctx, t, cx, cy, cw, s, index, total, color) {
        t /= 2500;

        var path = WIND_PATHS[index],
            a = (t + index - WIND_OFFSETS[index].start) % total,
            c = (t + index - WIND_OFFSETS[index].end  ) % total,
            e = (t + index                            ) % total,
            b, d, f, i;

        ctx.strokeStyle = color;
        ctx.lineWidth = s;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        if(a < 1) {
            ctx.beginPath();

            a *= path.length / 2 - 1;
            b  = Math.floor(a);
            a -= b;
            b *= 2;
            b += 2;

            ctx.moveTo(
                cx + (path[b - 2] * (1 - a) + path[b    ] * a) * cw,
                cy + (path[b - 1] * (1 - a) + path[b + 1] * a) * cw
            );

            if(c < 1) {
                c *= path.length / 2 - 1;
                d  = Math.floor(c);
                c -= d;
                d *= 2;
                d += 2;

                for(i = b; i !== d; i += 2)
                    ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);

                ctx.lineTo(
                    cx + (path[d - 2] * (1 - c) + path[d    ] * c) * cw,
                    cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw
                );
            }

            else
                for(i = b; i !== path.length; i += 2)
                    ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);

            ctx.stroke();
        }

        else if(c < 1) {
            ctx.beginPath();

            c *= path.length / 2 - 1;
            d  = Math.floor(c);
            c -= d;
            d *= 2;
            d += 2;

            ctx.moveTo(cx + path[0] * cw, cy + path[1] * cw);

            for(i = 2; i !== d; i += 2)
                ctx.lineTo(cx + path[i] * cw, cy + path[i + 1] * cw);

            ctx.lineTo(
                cx + (path[d - 2] * (1 - c) + path[d    ] * c) * cw,
                cy + (path[d - 1] * (1 - c) + path[d + 1] * c) * cw
            );

            ctx.stroke();
        }

        if(e < 1) {
            e *= path.length / 2 - 1;
            f  = Math.floor(e);
            e -= f;
            f *= 2;
            f += 2;

            leaf(
                ctx,
                t,
                cx + (path[f - 2] * (1 - e) + path[f    ] * e) * cw,
                cy + (path[f - 1] * (1 - e) + path[f + 1] * e) * cw,
                cw,
                s,
                color
            );
        }
    }

    var Skycons = function(opts) {
        this.list        = [];
        this.interval    = null;
        this.color       = opts && opts.color ? opts.color : "black";
        this.resizeClear = !!(opts && opts.resizeClear);
    };

    Skycons.CLEAR_DAY = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        sun(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);
    };

    Skycons.CLEAR_NIGHT = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        moon(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);
    };

    Skycons.PARTLY_CLOUDY_DAY = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        sun(ctx, t, w * 0.625, h * 0.375, s * 0.75, s * STROKE, color);
        cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);
    };

    Skycons.PARTLY_CLOUDY_NIGHT = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        moon(ctx, t, w * 0.667, h * 0.375, s * 0.75, s * STROKE, color);
        cloud(ctx, t, w * 0.375, h * 0.625, s * 0.75, s * STROKE, color);
    };

    Skycons.CLOUDY = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        cloud(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, color);
    };

    Skycons.RAIN = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        rain(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
        cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
    };

    Skycons.SLEET = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        sleet(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
        cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
    };

    Skycons.SNOW = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        snow(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
        cloud(ctx, t, w * 0.5, h * 0.37, s * 0.9, s * STROKE, color);
    };

    Skycons.WIND = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h);

        swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 0, 2, color);
        swoosh(ctx, t, w * 0.5, h * 0.5, s, s * STROKE, 1, 2, color);
    };

    Skycons.FOG = function(ctx, t, color) {
        var w = ctx.canvas.width,
            h = ctx.canvas.height,
            s = Math.min(w, h),
            k = s * STROKE;

        fogbank(ctx, t, w * 0.5, h * 0.32, s * 0.75, k, color);

        t /= 5000;

        var a = Math.cos((t       ) * TAU) * s * 0.02,
            b = Math.cos((t + 0.25) * TAU) * s * 0.02,
            c = Math.cos((t + 0.50) * TAU) * s * 0.02,
            d = Math.cos((t + 0.75) * TAU) * s * 0.02,
            n = h * 0.936,
            e = Math.floor(n - k * 0.5) + 0.5,
            f = Math.floor(n - k * 2.5) + 0.5;

        ctx.strokeStyle = color;
        ctx.lineWidth = k;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        line(ctx, a + w * 0.2 + k * 0.5, e, b + w * 0.8 - k * 0.5, e);
        line(ctx, c + w * 0.2 + k * 0.5, f, d + w * 0.8 - k * 0.5, f);
    };

    Skycons.prototype = {
        _determineDrawingFunction: function(draw) {
            if(typeof draw === "string")
                draw = Skycons[draw.toUpperCase().replace(/-/g, "_")] || null;

            return draw;
        },
        add: function(el, draw) {
            var obj;

            if(typeof el === "string")
                el = document.getElementById(el);

            // Does nothing if canvas name doesn't exists
            if(el === null)
                return;

            draw = this._determineDrawingFunction(draw);

            // Does nothing if the draw function isn't actually a function
            if(typeof draw !== "function")
                return;

            obj = {
                element: el,
                context: el.getContext("2d"),
                drawing: draw
            };

            this.list.push(obj);
            this.draw(obj, KEYFRAME);
        },
        set: function(el, draw) {
            var i;

            if(typeof el === "string")
                el = document.getElementById(el);

            for(i = this.list.length; i--; )
                if(this.list[i].element === el) {
                    this.list[i].drawing = this._determineDrawingFunction(draw);
                    this.draw(this.list[i], KEYFRAME);
                    return;
                }

            this.add(el, draw);
        },
        remove: function(el) {
            var i;

            if(typeof el === "string")
                el = document.getElementById(el);

            for(i = this.list.length; i--; )
                if(this.list[i].element === el) {
                    this.list.splice(i, 1);
                    return;
                }
        },
        draw: function(obj, time) {
            var canvas = obj.context.canvas;

            if(this.resizeClear)
                canvas.width = canvas.width;

            else
                obj.context.clearRect(0, 0, canvas.width, canvas.height);

            obj.drawing(obj.context, time, this.color);
        },
        play: function() {
            var self = this;

            this.pause();
            this.interval = requestInterval(function() {
                var now = Date.now(),
                    i;

                for(i = self.list.length; i--; )
                    self.draw(self.list[i], now);
            }, 1000 / 60);
        },
        pause: function() {
            var i;

            if(this.interval) {
                cancelInterval(this.interval);
                this.interval = null;
            }
        }
    };

    global.Skycons = Skycons;
}(this));

// +--------------------------------------------------------------------+ \\
// � Rapha�l 2.1.0 - JavaScript Vector Library                          � \\
// +--------------------------------------------------------------------� \\
// � Copyright � 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    � \\
// � Copyright � 2008-2012 Sencha Labs (http://sencha.com)              � \\
// +--------------------------------------------------------------------� \\
// � Licensed under the MIT (http://raphaeljs.com/license.html) license.� \\
// +--------------------------------------------------------------------+ \\

(function(a){var b="0.3.4",c="hasOwnProperty",d=/[\.\/]/,e="*",f=function(){},g=function(a,b){return a-b},h,i,j={n:{}},k=function(a,b){var c=j,d=i,e=Array.prototype.slice.call(arguments,2),f=k.listeners(a),l=0,m=!1,n,o=[],p={},q=[],r=h,s=[];h=a,i=0;for(var t=0,u=f.length;t<u;t++)"zIndex"in f[t]&&(o.push(f[t].zIndex),f[t].zIndex<0&&(p[f[t].zIndex]=f[t]));o.sort(g);while(o[l]<0){n=p[o[l++]],q.push(n.apply(b,e));if(i){i=d;return q}}for(t=0;t<u;t++){n=f[t];if("zIndex"in n)if(n.zIndex==o[l]){q.push(n.apply(b,e));if(i)break;do{l++,n=p[o[l]],n&&q.push(n.apply(b,e));if(i)break}while(n)}else p[n.zIndex]=n;else{q.push(n.apply(b,e));if(i)break}}i=d,h=r;return q.length?q:null};k.listeners=function(a){var b=a.split(d),c=j,f,g,h,i,k,l,m,n,o=[c],p=[];for(i=0,k=b.length;i<k;i++){n=[];for(l=0,m=o.length;l<m;l++){c=o[l].n,g=[c[b[i]],c[e]],h=2;while(h--)f=g[h],f&&(n.push(f),p=p.concat(f.f||[]))}o=n}return p},k.on=function(a,b){var c=a.split(d),e=j;for(var g=0,h=c.length;g<h;g++)e=e.n,!e[c[g]]&&(e[c[g]]={n:{}}),e=e[c[g]];e.f=e.f||[];for(g=0,h=e.f.length;g<h;g++)if(e.f[g]==b)return f;e.f.push(b);return function(a){+a==+a&&(b.zIndex=+a)}},k.stop=function(){i=1},k.nt=function(a){if(a)return(new RegExp("(?:\\.|\\/|^)"+a+"(?:\\.|\\/|$)")).test(h);return h},k.off=k.unbind=function(a,b){var f=a.split(d),g,h,i,k,l,m,n,o=[j];for(k=0,l=f.length;k<l;k++)for(m=0;m<o.length;m+=i.length-2){i=[m,1],g=o[m].n;if(f[k]!=e)g[f[k]]&&i.push(g[f[k]]);else for(h in g)g[c](h)&&i.push(g[h]);o.splice.apply(o,i)}for(k=0,l=o.length;k<l;k++){g=o[k];while(g.n){if(b){if(g.f){for(m=0,n=g.f.length;m<n;m++)if(g.f[m]==b){g.f.splice(m,1);break}!g.f.length&&delete g.f}for(h in g.n)if(g.n[c](h)&&g.n[h].f){var p=g.n[h].f;for(m=0,n=p.length;m<n;m++)if(p[m]==b){p.splice(m,1);break}!p.length&&delete g.n[h].f}}else{delete g.f;for(h in g.n)g.n[c](h)&&g.n[h].f&&delete g.n[h].f}g=g.n}}},k.once=function(a,b){var c=function(){var d=b.apply(this,arguments);k.unbind(a,c);return d};return k.on(a,c)},k.version=b,k.toString=function(){return"You are running Eve "+b},typeof module!="undefined"&&module.exports?module.exports=k:typeof define!="undefined"?define("eve",[],function(){return k}):a.eve=k})(this),function(){function cF(a){for(var b=0;b<cy.length;b++)cy[b].el.paper==a&&cy.splice(b--,1)}function cE(b,d,e,f,h,i){e=Q(e);var j,k,l,m=[],o,p,q,t=b.ms,u={},v={},w={};if(f)for(y=0,z=cy.length;y<z;y++){var x=cy[y];if(x.el.id==d.id&&x.anim==b){x.percent!=e?(cy.splice(y,1),l=1):k=x,d.attr(x.totalOrigin);break}}else f=+v;for(var y=0,z=b.percents.length;y<z;y++){if(b.percents[y]==e||b.percents[y]>f*b.top){e=b.percents[y],p=b.percents[y-1]||0,t=t/b.top*(e-p),o=b.percents[y+1],j=b.anim[e];break}f&&d.attr(b.anim[b.percents[y]])}if(!!j){if(!k){for(var A in j)if(j[g](A))if(U[g](A)||d.paper.customAttributes[g](A)){u[A]=d.attr(A),u[A]==null&&(u[A]=T[A]),v[A]=j[A];switch(U[A]){case C:w[A]=(v[A]-u[A])/t;break;case"colour":u[A]=a.getRGB(u[A]);var B=a.getRGB(v[A]);w[A]={r:(B.r-u[A].r)/t,g:(B.g-u[A].g)/t,b:(B.b-u[A].b)/t};break;case"path":var D=bR(u[A],v[A]),E=D[1];u[A]=D[0],w[A]=[];for(y=0,z=u[A].length;y<z;y++){w[A][y]=[0];for(var F=1,G=u[A][y].length;F<G;F++)w[A][y][F]=(E[y][F]-u[A][y][F])/t}break;case"transform":var H=d._,I=ca(H[A],v[A]);if(I){u[A]=I.from,v[A]=I.to,w[A]=[],w[A].real=!0;for(y=0,z=u[A].length;y<z;y++){w[A][y]=[u[A][y][0]];for(F=1,G=u[A][y].length;F<G;F++)w[A][y][F]=(v[A][y][F]-u[A][y][F])/t}}else{var J=d.matrix||new cb,K={_:{transform:H.transform},getBBox:function(){return d.getBBox(1)}};u[A]=[J.a,J.b,J.c,J.d,J.e,J.f],b$(K,v[A]),v[A]=K._.transform,w[A]=[(K.matrix.a-J.a)/t,(K.matrix.b-J.b)/t,(K.matrix.c-J.c)/t,(K.matrix.d-J.d)/t,(K.matrix.e-J.e)/t,(K.matrix.f-J.f)/t]}break;case"csv":var L=r(j[A])[s](c),M=r(u[A])[s](c);if(A=="clip-rect"){u[A]=M,w[A]=[],y=M.length;while(y--)w[A][y]=(L[y]-u[A][y])/t}v[A]=L;break;default:L=[][n](j[A]),M=[][n](u[A]),w[A]=[],y=d.paper.customAttributes[A].length;while(y--)w[A][y]=((L[y]||0)-(M[y]||0))/t}}var O=j.easing,P=a.easing_formulas[O];if(!P){P=r(O).match(N);if(P&&P.length==5){var R=P;P=function(a){return cC(a,+R[1],+R[2],+R[3],+R[4],t)}}else P=bf}q=j.start||b.start||+(new Date),x={anim:b,percent:e,timestamp:q,start:q+(b.del||0),status:0,initstatus:f||0,stop:!1,ms:t,easing:P,from:u,diff:w,to:v,el:d,callback:j.callback,prev:p,next:o,repeat:i||b.times,origin:d.attr(),totalOrigin:h},cy.push(x);if(f&&!k&&!l){x.stop=!0,x.start=new Date-t*f;if(cy.length==1)return cA()}l&&(x.start=new Date-x.ms*f),cy.length==1&&cz(cA)}else k.initstatus=f,k.start=new Date-k.ms*f;eve("raphael.anim.start."+d.id,d,b)}}function cD(a,b){var c=[],d={};this.ms=b,this.times=1;if(a){for(var e in a)a[g](e)&&(d[Q(e)]=a[e],c.push(Q(e)));c.sort(bd)}this.anim=d,this.top=c[c.length-1],this.percents=c}function cC(a,b,c,d,e,f){function o(a,b){var c,d,e,f,j,k;for(e=a,k=0;k<8;k++){f=m(e)-a;if(z(f)<b)return e;j=(3*i*e+2*h)*e+g;if(z(j)<1e-6)break;e=e-f/j}c=0,d=1,e=a;if(e<c)return c;if(e>d)return d;while(c<d){f=m(e);if(z(f-a)<b)return e;a>f?c=e:d=e,e=(d-c)/2+c}return e}function n(a,b){var c=o(a,b);return((l*c+k)*c+j)*c}function m(a){return((i*a+h)*a+g)*a}var g=3*b,h=3*(d-b)-g,i=1-g-h,j=3*c,k=3*(e-c)-j,l=1-j-k;return n(a,1/(200*f))}function cq(){return this.x+q+this.y+q+this.width+" � "+this.height}function cp(){return this.x+q+this.y}function cb(a,b,c,d,e,f){a!=null?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function bH(b,c,d){b=a._path2curve(b),c=a._path2curve(c);var e,f,g,h,i,j,k,l,m,n,o=d?0:[];for(var p=0,q=b.length;p<q;p++){var r=b[p];if(r[0]=="M")e=i=r[1],f=j=r[2];else{r[0]=="C"?(m=[e,f].concat(r.slice(1)),e=m[6],f=m[7]):(m=[e,f,e,f,i,j,i,j],e=i,f=j);for(var s=0,t=c.length;s<t;s++){var u=c[s];if(u[0]=="M")g=k=u[1],h=l=u[2];else{u[0]=="C"?(n=[g,h].concat(u.slice(1)),g=n[6],h=n[7]):(n=[g,h,g,h,k,l,k,l],g=k,h=l);var v=bG(m,n,d);if(d)o+=v;else{for(var w=0,x=v.length;w<x;w++)v[w].segment1=p,v[w].segment2=s,v[w].bez1=m,v[w].bez2=n;o=o.concat(v)}}}}}return o}function bG(b,c,d){var e=a.bezierBBox(b),f=a.bezierBBox(c);if(!a.isBBoxIntersect(e,f))return d?0:[];var g=bB.apply(0,b),h=bB.apply(0,c),i=~~(g/5),j=~~(h/5),k=[],l=[],m={},n=d?0:[];for(var o=0;o<i+1;o++){var p=a.findDotsAtSegment.apply(a,b.concat(o/i));k.push({x:p.x,y:p.y,t:o/i})}for(o=0;o<j+1;o++)p=a.findDotsAtSegment.apply(a,c.concat(o/j)),l.push({x:p.x,y:p.y,t:o/j});for(o=0;o<i;o++)for(var q=0;q<j;q++){var r=k[o],s=k[o+1],t=l[q],u=l[q+1],v=z(s.x-r.x)<.001?"y":"x",w=z(u.x-t.x)<.001?"y":"x",x=bD(r.x,r.y,s.x,s.y,t.x,t.y,u.x,u.y);if(x){if(m[x.x.toFixed(4)]==x.y.toFixed(4))continue;m[x.x.toFixed(4)]=x.y.toFixed(4);var y=r.t+z((x[v]-r[v])/(s[v]-r[v]))*(s.t-r.t),A=t.t+z((x[w]-t[w])/(u[w]-t[w]))*(u.t-t.t);y>=0&&y<=1&&A>=0&&A<=1&&(d?n++:n.push({x:x.x,y:x.y,t1:y,t2:A}))}}return n}function bF(a,b){return bG(a,b,1)}function bE(a,b){return bG(a,b)}function bD(a,b,c,d,e,f,g,h){if(!(x(a,c)<y(e,g)||y(a,c)>x(e,g)||x(b,d)<y(f,h)||y(b,d)>x(f,h))){var i=(a*d-b*c)*(e-g)-(a-c)*(e*h-f*g),j=(a*d-b*c)*(f-h)-(b-d)*(e*h-f*g),k=(a-c)*(f-h)-(b-d)*(e-g);if(!k)return;var l=i/k,m=j/k,n=+l.toFixed(2),o=+m.toFixed(2);if(n<+y(a,c).toFixed(2)||n>+x(a,c).toFixed(2)||n<+y(e,g).toFixed(2)||n>+x(e,g).toFixed(2)||o<+y(b,d).toFixed(2)||o>+x(b,d).toFixed(2)||o<+y(f,h).toFixed(2)||o>+x(f,h).toFixed(2))return;return{x:l,y:m}}}function bC(a,b,c,d,e,f,g,h,i){if(!(i<0||bB(a,b,c,d,e,f,g,h)<i)){var j=1,k=j/2,l=j-k,m,n=.01;m=bB(a,b,c,d,e,f,g,h,l);while(z(m-i)>n)k/=2,l+=(m<i?1:-1)*k,m=bB(a,b,c,d,e,f,g,h,l);return l}}function bB(a,b,c,d,e,f,g,h,i){i==null&&(i=1),i=i>1?1:i<0?0:i;var j=i/2,k=12,l=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],n=0;for(var o=0;o<k;o++){var p=j*l[o]+j,q=bA(p,a,c,e,g),r=bA(p,b,d,f,h),s=q*q+r*r;n+=m[o]*w.sqrt(s)}return j*n}function bA(a,b,c,d,e){var f=-3*b+9*c-9*d+3*e,g=a*f+6*b-12*c+6*d;return a*g-3*b+3*c}function by(a,b){var c=[];for(var d=0,e=a.length;e-2*!b>d;d+=2){var f=[{x:+a[d-2],y:+a[d-1]},{x:+a[d],y:+a[d+1]},{x:+a[d+2],y:+a[d+3]},{x:+a[d+4],y:+a[d+5]}];b?d?e-4==d?f[3]={x:+a[0],y:+a[1]}:e-2==d&&(f[2]={x:+a[0],y:+a[1]},f[3]={x:+a[2],y:+a[3]}):f[0]={x:+a[e-2],y:+a[e-1]}:e-4==d?f[3]=f[2]:d||(f[0]={x:+a[d],y:+a[d+1]}),c.push(["C",(-f[0].x+6*f[1].x+f[2].x)/6,(-f[0].y+6*f[1].y+f[2].y)/6,(f[1].x+6*f[2].x-f[3].x)/6,(f[1].y+6*f[2].y-f[3].y)/6,f[2].x,f[2].y])}return c}function bx(){return this.hex}function bv(a,b,c){function d(){var e=Array.prototype.slice.call(arguments,0),f=e.join("?"),h=d.cache=d.cache||{},i=d.count=d.count||[];if(h[g](f)){bu(i,f);return c?c(h[f]):h[f]}i.length>=1e3&&delete h[i.shift()],i.push(f),h[f]=a[m](b,e);return c?c(h[f]):h[f]}return d}function bu(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return a.push(a.splice(c,1)[0])}function bm(a){if(Object(a)!==a)return a;var b=new a.constructor;for(var c in a)a[g](c)&&(b[c]=bm(a[c]));return b}function a(c){if(a.is(c,"function"))return b?c():eve.on("raphael.DOMload",c);if(a.is(c,E))return a._engine.create[m](a,c.splice(0,3+a.is(c[0],C))).add(c);var d=Array.prototype.slice.call(arguments,0);if(a.is(d[d.length-1],"function")){var e=d.pop();return b?e.call(a._engine.create[m](a,d)):eve.on("raphael.DOMload",function(){e.call(a._engine.create[m](a,d))})}return a._engine.create[m](a,arguments)}a.version="2.1.0",a.eve=eve;var b,c=/[, ]+/,d={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},e=/\{(\d+)\}/g,f="prototype",g="hasOwnProperty",h={doc:document,win:window},i={was:Object.prototype[g].call(h.win,"Raphael"),is:h.win.Raphael},j=function(){this.ca=this.customAttributes={}},k,l="appendChild",m="apply",n="concat",o="createTouch"in h.doc,p="",q=" ",r=String,s="split",t="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[s](q),u={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},v=r.prototype.toLowerCase,w=Math,x=w.max,y=w.min,z=w.abs,A=w.pow,B=w.PI,C="number",D="string",E="array",F="toString",G="fill",H=Object.prototype.toString,I={},J="push",K=a._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,L=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,M={NaN:1,Infinity:1,"-Infinity":1},N=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,O=w.round,P="setAttribute",Q=parseFloat,R=parseInt,S=r.prototype.toUpperCase,T=a._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},U=a._availableAnimAttrs={blur:C,"clip-rect":"csv",cx:C,cy:C,fill:"colour","fill-opacity":C,"font-size":C,height:C,opacity:C,path:"path",r:C,rx:C,ry:C,stroke:"colour","stroke-opacity":C,"stroke-width":C,transform:"transform",width:C,x:C,y:C},V=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,W=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,X={hs:1,rg:1},Y=/,?([achlmqrstvxz]),?/gi,Z=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,$=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,_=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,ba=a._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,bb={},bc=function(a,b){return a.key-b.key},bd=function(a,b){return Q(a)-Q(b)},be=function(){},bf=function(a){return a},bg=a._rectPath=function(a,b,c,d,e){if(e)return[["M",a+e,b],["l",c-e*2,0],["a",e,e,0,0,1,e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-c,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]];return[["M",a,b],["l",c,0],["l",0,d],["l",-c,0],["z"]]},bh=function(a,b,c,d){d==null&&(d=c);return[["M",a,b],["m",0,-d],["a",c,d,0,1,1,0,2*d],["a",c,d,0,1,1,0,-2*d],["z"]]},bi=a._getPath={path:function(a){return a.attr("path")},circle:function(a){var b=a.attrs;return bh(b.cx,b.cy,b.r)},ellipse:function(a){var b=a.attrs;return bh(b.cx,b.cy,b.rx,b.ry)},rect:function(a){var b=a.attrs;return bg(b.x,b.y,b.width,b.height,b.r)},image:function(a){var b=a.attrs;return bg(b.x,b.y,b.width,b.height)},text:function(a){var b=a._getBBox();return bg(b.x,b.y,b.width,b.height)}},bj=a.mapPath=function(a,b){if(!b)return a;var c,d,e,f,g,h,i;a=bR(a);for(e=0,g=a.length;e<g;e++){i=a[e];for(f=1,h=i.length;f<h;f+=2)c=b.x(i[f],i[f+1]),d=b.y(i[f],i[f+1]),i[f]=c,i[f+1]=d}return a};a._g=h,a.type=h.win.SVGAngle||h.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(a.type=="VML"){var bk=h.doc.createElement("div"),bl;bk.innerHTML='<v:shape adj="1"/>',bl=bk.firstChild,bl.style.behavior="url(#default#VML)";if(!bl||typeof bl.adj!="object")return a.type=p;bk=null}a.svg=!(a.vml=a.type=="VML"),a._Paper=j,a.fn=k=j.prototype=a.prototype,a._id=0,a._oid=0,a.is=function(a,b){b=v.call(b);if(b=="finite")return!M[g](+a);if(b=="array")return a instanceof Array;return b=="null"&&a===null||b==typeof a&&a!==null||b=="object"&&a===Object(a)||b=="array"&&Array.isArray&&Array.isArray(a)||H.call(a).slice(8,-1).toLowerCase()==b},a.angle=function(b,c,d,e,f,g){if(f==null){var h=b-d,i=c-e;if(!h&&!i)return 0;return(180+w.atan2(-i,-h)*180/B+360)%360}return a.angle(b,c,f,g)-a.angle(d,e,f,g)},a.rad=function(a){return a%360*B/180},a.deg=function(a){return a*180/B%360},a.snapTo=function(b,c,d){d=a.is(d,"finite")?d:10;if(a.is(b,E)){var e=b.length;while(e--)if(z(b[e]-c)<=d)return b[e]}else{b=+b;var f=c%b;if(f<d)return c-f;if(f>b-d)return c-f+b}return c};var bn=a.createUUID=function(a,b){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,b).toUpperCase()}}(/[xy]/g,function(a){var b=w.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)});a.setWindow=function(b){eve("raphael.setWindow",a,h.win,b),h.win=b,h.doc=h.win.document,a._engine.initWin&&a._engine.initWin(h.win)};var bo=function(b){if(a.vml){var c=/^\s+|\s+$/g,d;try{var e=new ActiveXObject("htmlfile");e.write("<body>"),e.close(),d=e.body}catch(f){d=createPopup().document.body}var g=d.createTextRange();bo=bv(function(a){try{d.style.color=r(a).replace(c,p);var b=g.queryCommandValue("ForeColor");b=(b&255)<<16|b&65280|(b&16711680)>>>16;return"#"+("000000"+b.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=h.doc.createElement("i");i.title="Rapha�l Colour Picker",i.style.display="none",h.doc.body.appendChild(i),bo=bv(function(a){i.style.color=a;return h.doc.defaultView.getComputedStyle(i,p).getPropertyValue("color")})}return bo(b)},bp=function(){return"hsb("+[this.h,this.s,this.b]+")"},bq=function(){return"hsl("+[this.h,this.s,this.l]+")"},br=function(){return this.hex},bs=function(b,c,d){c==null&&a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b&&(d=b.b,c=b.g,b=b.r);if(c==null&&a.is(b,D)){var e=a.getRGB(b);b=e.r,c=e.g,d=e.b}if(b>1||c>1||d>1)b/=255,c/=255,d/=255;return[b,c,d]},bt=function(b,c,d,e){b*=255,c*=255,d*=255;var f={r:b,g:c,b:d,hex:a.rgb(b,c,d),toString:br};a.is(e,"finite")&&(f.opacity=e);return f};a.color=function(b){var c;a.is(b,"object")&&"h"in b&&"s"in b&&"b"in b?(c=a.hsb2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):a.is(b,"object")&&"h"in b&&"s"in b&&"l"in b?(c=a.hsl2rgb(b),b.r=c.r,b.g=c.g,b.b=c.b,b.hex=c.hex):(a.is(b,"string")&&(b=a.getRGB(b)),a.is(b,"object")&&"r"in b&&"g"in b&&"b"in b?(c=a.rgb2hsl(b),b.h=c.h,b.s=c.s,b.l=c.l,c=a.rgb2hsb(b),b.v=c.b):(b={hex:"none"},b.r=b.g=b.b=b.h=b.s=b.v=b.l=-1)),b.toString=br;return b},a.hsb2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(c=a.b,b=a.s,a=a.h,d=a.o),a*=360;var e,f,g,h,i;a=a%360/60,i=c*b,h=i*(1-z(a%2-1)),e=f=g=c-i,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a];return bt(e,f,g,d)},a.hsl2rgb=function(a,b,c,d){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(c=a.l,b=a.s,a=a.h);if(a>1||b>1||c>1)a/=360,b/=100,c/=100;a*=360;var e,f,g,h,i;a=a%360/60,i=2*b*(c<.5?c:1-c),h=i*(1-z(a%2-1)),e=f=g=c-i/2,a=~~a,e+=[i,h,0,0,h,i][a],f+=[h,i,i,h,0,0][a],g+=[0,0,h,i,i,h][a];return bt(e,f,g,d)},a.rgb2hsb=function(a,b,c){c=bs(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g;f=x(a,b,c),g=f-y(a,b,c),d=g==0?null:f==a?(b-c)/g:f==b?(c-a)/g+2:(a-b)/g+4,d=(d+360)%6*60/360,e=g==0?0:g/f;return{h:d,s:e,b:f,toString:bp}},a.rgb2hsl=function(a,b,c){c=bs(a,b,c),a=c[0],b=c[1],c=c[2];var d,e,f,g,h,i;g=x(a,b,c),h=y(a,b,c),i=g-h,d=i==0?null:g==a?(b-c)/i:g==b?(c-a)/i+2:(a-b)/i+4,d=(d+360)%6*60/360,f=(g+h)/2,e=i==0?0:f<.5?i/(2*f):i/(2-2*f);return{h:d,s:e,l:f,toString:bq}},a._path2string=function(){return this.join(",").replace(Y,"$1")};var bw=a._preload=function(a,b){var c=h.doc.createElement("img");c.style.cssText="position:absolute;left:-9999em;top:-9999em",c.onload=function(){b.call(this),this.onload=null,h.doc.body.removeChild(this)},c.onerror=function(){h.doc.body.removeChild(this)},h.doc.body.appendChild(c),c.src=a};a.getRGB=bv(function(b){if(!b||!!((b=r(b)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bx};if(b=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:bx};!X[g](b.toLowerCase().substring(0,2))&&b.charAt()!="#"&&(b=bo(b));var c,d,e,f,h,i,j,k=b.match(L);if(k){k[2]&&(f=R(k[2].substring(5),16),e=R(k[2].substring(3,5),16),d=R(k[2].substring(1,3),16)),k[3]&&(f=R((i=k[3].charAt(3))+i,16),e=R((i=k[3].charAt(2))+i,16),d=R((i=k[3].charAt(1))+i,16)),k[4]&&(j=k[4][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),k[1].toLowerCase().slice(0,4)=="rgba"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100));if(k[5]){j=k[5][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="�")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsba"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100);return a.hsb2rgb(d,e,f,h)}if(k[6]){j=k[6][s](W),d=Q(j[0]),j[0].slice(-1)=="%"&&(d*=2.55),e=Q(j[1]),j[1].slice(-1)=="%"&&(e*=2.55),f=Q(j[2]),j[2].slice(-1)=="%"&&(f*=2.55),(j[0].slice(-3)=="deg"||j[0].slice(-1)=="�")&&(d/=360),k[1].toLowerCase().slice(0,4)=="hsla"&&(h=Q(j[3])),j[3]&&j[3].slice(-1)=="%"&&(h/=100);return a.hsl2rgb(d,e,f,h)}k={r:d,g:e,b:f,toString:bx},k.hex="#"+(16777216|f|e<<8|d<<16).toString(16).slice(1),a.is(h,"finite")&&(k.opacity=h);return k}return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:bx}},a),a.hsb=bv(function(b,c,d){return a.hsb2rgb(b,c,d).hex}),a.hsl=bv(function(b,c,d){return a.hsl2rgb(b,c,d).hex}),a.rgb=bv(function(a,b,c){return"#"+(16777216|c|b<<8|a<<16).toString(16).slice(1)}),a.getColor=function(a){var b=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75},c=this.hsb2rgb(b.h,b.s,b.b);b.h+=.075,b.h>1&&(b.h=0,b.s-=.2,b.s<=0&&(this.getColor.start={h:0,s:1,b:b.b}));return c.hex},a.getColor.reset=function(){delete this.start},a.parsePathString=function(b){if(!b)return null;var c=bz(b);if(c.arr)return bJ(c.arr);var d={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e=[];a.is(b,E)&&a.is(b[0],E)&&(e=bJ(b)),e.length||r(b).replace(Z,function(a,b,c){var f=[],g=b.toLowerCase();c.replace(_,function(a,b){b&&f.push(+b)}),g=="m"&&f.length>2&&(e.push([b][n](f.splice(0,2))),g="l",b=b=="m"?"l":"L");if(g=="r")e.push([b][n](f));else while(f.length>=d[g]){e.push([b][n](f.splice(0,d[g])));if(!d[g])break}}),e.toString=a._path2string,c.arr=bJ(e);return e},a.parseTransformString=bv(function(b){if(!b)return null;var c={r:3,s:4,t:2,m:6},d=[];a.is(b,E)&&a.is(b[0],E)&&(d=bJ(b)),d.length||r(b).replace($,function(a,b,c){var e=[],f=v.call(b);c.replace(_,function(a,b){b&&e.push(+b)}),d.push([b][n](e))}),d.toString=a._path2string;return d});var bz=function(a){var b=bz.ps=bz.ps||{};b[a]?b[a].sleep=100:b[a]={sleep:100},setTimeout(function(){for(var c in b)b[g](c)&&c!=a&&(b[c].sleep--,!b[c].sleep&&delete b[c])});return b[a]};a.findDotsAtSegment=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=A(j,3),l=A(j,2),m=i*i,n=m*i,o=k*a+l*3*i*c+j*3*i*i*e+n*g,p=k*b+l*3*i*d+j*3*i*i*f+n*h,q=a+2*i*(c-a)+m*(e-2*c+a),r=b+2*i*(d-b)+m*(f-2*d+b),s=c+2*i*(e-c)+m*(g-2*e+c),t=d+2*i*(f-d)+m*(h-2*f+d),u=j*a+i*c,v=j*b+i*d,x=j*e+i*g,y=j*f+i*h,z=90-w.atan2(q-s,r-t)*180/B;(q>s||r<t)&&(z+=180);return{x:o,y:p,m:{x:q,y:r},n:{x:s,y:t},start:{x:u,y:v},end:{x:x,y:y},alpha:z}},a.bezierBBox=function(b,c,d,e,f,g,h,i){a.is(b,"array")||(b=[b,c,d,e,f,g,h,i]);var j=bQ.apply(null,b);return{x:j.min.x,y:j.min.y,x2:j.max.x,y2:j.max.y,width:j.max.x-j.min.x,height:j.max.y-j.min.y}},a.isPointInsideBBox=function(a,b,c){return b>=a.x&&b<=a.x2&&c>=a.y&&c<=a.y2},a.isBBoxIntersect=function(b,c){var d=a.isPointInsideBBox;return d(c,b.x,b.y)||d(c,b.x2,b.y)||d(c,b.x,b.y2)||d(c,b.x2,b.y2)||d(b,c.x,c.y)||d(b,c.x2,c.y)||d(b,c.x,c.y2)||d(b,c.x2,c.y2)||(b.x<c.x2&&b.x>c.x||c.x<b.x2&&c.x>b.x)&&(b.y<c.y2&&b.y>c.y||c.y<b.y2&&c.y>b.y)},a.pathIntersection=function(a,b){return bH(a,b)},a.pathIntersectionNumber=function(a,b){return bH(a,b,1)},a.isPointInsidePath=function(b,c,d){var e=a.pathBBox(b);return a.isPointInsideBBox(e,c,d)&&bH(b,[["M",c,d],["H",e.x2+10]],1)%2==1},a._removedFactory=function(a){return function(){eve("raphael.log",null,"Rapha�l: you are calling to method �"+a+"� of removed object",a)}};var bI=a.pathBBox=function(a){var b=bz(a);if(b.bbox)return b.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=bR(a);var c=0,d=0,e=[],f=[],g;for(var h=0,i=a.length;h<i;h++){g=a[h];if(g[0]=="M")c=g[1],d=g[2],e.push(c),f.push(d);else{var j=bQ(c,d,g[1],g[2],g[3],g[4],g[5],g[6]);e=e[n](j.min.x,j.max.x),f=f[n](j.min.y,j.max.y),c=g[5],d=g[6]}}var k=y[m](0,e),l=y[m](0,f),o=x[m](0,e),p=x[m](0,f),q={x:k,y:l,x2:o,y2:p,width:o-k,height:p-l};b.bbox=bm(q);return q},bJ=function(b){var c=bm(b);c.toString=a._path2string;return c},bK=a._pathToRelative=function(b){var c=bz(b);if(c.rel)return bJ(c.rel);if(!a.is(b,E)||!a.is(b&&b[0],E))b=a.parsePathString(b);var d=[],e=0,f=0,g=0,h=0,i=0;b[0][0]=="M"&&(e=b[0][1],f=b[0][2],g=e,h=f,i++,d.push(["M",e,f]));for(var j=i,k=b.length;j<k;j++){var l=d[j]=[],m=b[j];if(m[0]!=v.call(m[0])){l[0]=v.call(m[0]);switch(l[0]){case"a":l[1]=m[1],l[2]=m[2],l[3]=m[3],l[4]=m[4],l[5]=m[5],l[6]=+(m[6]-e).toFixed(3),l[7]=+(m[7]-f).toFixed(3);break;case"v":l[1]=+(m[1]-f).toFixed(3);break;case"m":g=m[1],h=m[2];default:for(var n=1,o=m.length;n<o;n++)l[n]=+(m[n]-(n%2?e:f)).toFixed(3)}}else{l=d[j]=[],m[0]=="m"&&(g=m[1]+e,h=m[2]+f);for(var p=0,q=m.length;p<q;p++)d[j][p]=m[p]}var r=d[j].length;switch(d[j][0]){case"z":e=g,f=h;break;case"h":e+=+d[j][r-1];break;case"v":f+=+d[j][r-1];break;default:e+=+d[j][r-2],f+=+d[j][r-1]}}d.toString=a._path2string,c.rel=bJ(d);return d},bL=a._pathToAbsolute=function(b){var c=bz(b);if(c.abs)return bJ(c.abs);if(!a.is(b,E)||!a.is(b&&b[0],E))b=a.parsePathString(b);if(!b||!b.length)return[["M",0,0]];var d=[],e=0,f=0,g=0,h=0,i=0;b[0][0]=="M"&&(e=+b[0][1],f=+b[0][2],g=e,h=f,i++,d[0]=["M",e,f]);var j=b.length==3&&b[0][0]=="M"&&b[1][0].toUpperCase()=="R"&&b[2][0].toUpperCase()=="Z";for(var k,l,m=i,o=b.length;m<o;m++){d.push(k=[]),l=b[m];if(l[0]!=S.call(l[0])){k[0]=S.call(l[0]);switch(k[0]){case"A":k[1]=l[1],k[2]=l[2],k[3]=l[3],k[4]=l[4],k[5]=l[5],k[6]=+(l[6]+e),k[7]=+(l[7]+f);break;case"V":k[1]=+l[1]+f;break;case"H":k[1]=+l[1]+e;break;case"R":var p=[e,f][n](l.slice(1));for(var q=2,r=p.length;q<r;q++)p[q]=+p[q]+e,p[++q]=+p[q]+f;d.pop(),d=d[n](by(p,j));break;case"M":g=+l[1]+e,h=+l[2]+f;default:for(q=1,r=l.length;q<r;q++)k[q]=+l[q]+(q%2?e:f)}}else if(l[0]=="R")p=[e,f][n](l.slice(1)),d.pop(),d=d[n](by(p,j)),k=["R"][n](l.slice(-2));else for(var s=0,t=l.length;s<t;s++)k[s]=l[s];switch(k[0]){case"Z":e=g,f=h;break;case"H":e=k[1];break;case"V":f=k[1];break;case"M":g=k[k.length-2],h=k[k.length-1];default:e=k[k.length-2],f=k[k.length-1]}}d.toString=a._path2string,c.abs=bJ(d);return d},bM=function(a,b,c,d){return[a,b,c,d,c,d]},bN=function(a,b,c,d,e,f){var g=1/3,h=2/3;return[g*a+h*c,g*b+h*d,g*e+h*c,g*f+h*d,e,f]},bO=function(a,b,c,d,e,f,g,h,i,j){var k=B*120/180,l=B/180*(+e||0),m=[],o,p=bv(function(a,b,c){var d=a*w.cos(c)-b*w.sin(c),e=a*w.sin(c)+b*w.cos(c);return{x:d,y:e}});if(!j){o=p(a,b,-l),a=o.x,b=o.y,o=p(h,i,-l),h=o.x,i=o.y;var q=w.cos(B/180*e),r=w.sin(B/180*e),t=(a-h)/2,u=(b-i)/2,v=t*t/(c*c)+u*u/(d*d);v>1&&(v=w.sqrt(v),c=v*c,d=v*d);var x=c*c,y=d*d,A=(f==g?-1:1)*w.sqrt(z((x*y-x*u*u-y*t*t)/(x*u*u+y*t*t))),C=A*c*u/d+(a+h)/2,D=A*-d*t/c+(b+i)/2,E=w.asin(((b-D)/d).toFixed(9)),F=w.asin(((i-D)/d).toFixed(9));E=a<C?B-E:E,F=h<C?B-F:F,E<0&&(E=B*2+E),F<0&&(F=B*2+F),g&&E>F&&(E=E-B*2),!g&&F>E&&(F=F-B*2)}else E=j[0],F=j[1],C=j[2],D=j[3];var G=F-E;if(z(G)>k){var H=F,I=h,J=i;F=E+k*(g&&F>E?1:-1),h=C+c*w.cos(F),i=D+d*w.sin(F),m=bO(h,i,c,d,e,0,g,I,J,[F,H,C,D])}G=F-E;var K=w.cos(E),L=w.sin(E),M=w.cos(F),N=w.sin(F),O=w.tan(G/4),P=4/3*c*O,Q=4/3*d*O,R=[a,b],S=[a+P*L,b-Q*K],T=[h+P*N,i-Q*M],U=[h,i];S[0]=2*R[0]-S[0],S[1]=2*R[1]-S[1];if(j)return[S,T,U][n](m);m=[S,T,U][n](m).join()[s](",");var V=[];for(var W=0,X=m.length;W<X;W++)V[W]=W%2?p(m[W-1],m[W],l).y:p(m[W],m[W+1],l).x;return V},bP=function(a,b,c,d,e,f,g,h,i){var j=1-i;return{x:A(j,3)*a+A(j,2)*3*i*c+j*3*i*i*e+A(i,3)*g,y:A(j,3)*b+A(j,2)*3*i*d+j*3*i*i*f+A(i,3)*h}},bQ=bv(function(a,b,c,d,e,f,g,h){var i=e-2*c+a-(g-2*e+c),j=2*(c-a)-2*(e-c),k=a-c,l=(-j+w.sqrt(j*j-4*i*k))/2/i,n=(-j-w.sqrt(j*j-4*i*k))/2/i,o=[b,h],p=[a,g],q;z(l)>"1e12"&&(l=.5),z(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=bP(a,b,c,d,e,f,g,h,l),p.push(q.x),o.push(q.y)),n>0&&n<1&&(q=bP(a,b,c,d,e,f,g,h,n),p.push(q.x),o.push(q.y)),i=f-2*d+b-(h-2*f+d),j=2*(d-b)-2*(f-d),k=b-d,l=(-j+w.sqrt(j*j-4*i*k))/2/i,n=(-j-w.sqrt(j*j-4*i*k))/2/i,z(l)>"1e12"&&(l=.5),z(n)>"1e12"&&(n=.5),l>0&&l<1&&(q=bP(a,b,c,d,e,f,g,h,l),p.push(q.x),o.push(q.y)),n>0&&n<1&&(q=bP(a,b,c,d,e,f,g,h,n),p.push(q.x),o.push(q.y));return{min:{x:y[m](0,p),y:y[m](0,o)},max:{x:x[m](0,p),y:x[m](0,o)}}}),bR=a._path2curve=bv(function(a,b){var c=!b&&bz(a);if(!b&&c.curve)return bJ(c.curve);var d=bL(a),e=b&&bL(b),f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},h=function(a,b){var c,d;if(!a)return["C",b.x,b.y,b.x,b.y,b.x,b.y];!(a[0]in{T:1,Q:1})&&(b.qx=b.qy=null);switch(a[0]){case"M":b.X=a[1],b.Y=a[2];break;case"A":a=["C"][n](bO[m](0,[b.x,b.y][n](a.slice(1))));break;case"S":c=b.x+(b.x-(b.bx||b.x)),d=b.y+(b.y-(b.by||b.y)),a=["C",c,d][n](a.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x)),b.qy=b.y+(b.y-(b.qy||b.y)),a=["C"][n](bN(b.x,b.y,b.qx,b.qy,a[1],a[2]));break;case"Q":b.qx=a[1],b.qy=a[2],a=["C"][n](bN(b.x,b.y,a[1],a[2],a[3],a[4]));break;case"L":a=["C"][n](bM(b.x,b.y,a[1],a[2]));break;case"H":a=["C"][n](bM(b.x,b.y,a[1],b.y));break;case"V":a=["C"][n](bM(b.x,b.y,b.x,a[1]));break;case"Z":a=["C"][n](bM(b.x,b.y,b.X,b.Y))}return a},i=function(a,b){if(a[b].length>7){a[b].shift();var c=a[b];while(c.length)a.splice(b++,0,["C"][n](c.splice(0,6)));a.splice(b,1),l=x(d.length,e&&e.length||0)}},j=function(a,b,c,f,g){a&&b&&a[g][0]=="M"&&b[g][0]!="M"&&(b.splice(g,0,["M",f.x,f.y]),c.bx=0,c.by=0,c.x=a[g][1],c.y=a[g][2],l=x(d.length,e&&e.length||0))};for(var k=0,l=x(d.length,e&&e.length||0);k<l;k++){d[k]=h(d[k],f),i(d,k),e&&(e[k]=h(e[k],g)),e&&i(e,k),j(d,e,f,g,k),j(e,d,g,f,k);var o=d[k],p=e&&e[k],q=o.length,r=e&&p.length;f.x=o[q-2],f.y=o[q-1],f.bx=Q(o[q-4])||f.x,f.by=Q(o[q-3])||f.y,g.bx=e&&(Q(p[r-4])||g.x),g.by=e&&(Q(p[r-3])||g.y),g.x=e&&p[r-2],g.y=e&&p[r-1]}e||(c.curve=bJ(d));return e?[d,e]:d},null,bJ),bS=a._parseDots=bv(function(b){var c=[];for(var d=0,e=b.length;d<e;d++){var f={},g=b[d].match(/^([^:]*):?([\d\.]*)/);f.color=a.getRGB(g[1]);if(f.color.error)return null;f.color=f.color.hex,g[2]&&(f.offset=g[2]+"%"),c.push(f)}for(d=1,e=c.length-1;d<e;d++)if(!c[d].offset){var h=Q(c[d-1].offset||0),i=0;for(var j=d+1;j<e;j++)if(c[j].offset){i=c[j].offset;break}i||(i=100,j=e),i=Q(i);var k=(i-h)/(j-d+1);for(;d<j;d++)h+=k,c[d].offset=h+"%"}return c}),bT=a._tear=function(a,b){a==b.top&&(b.top=a.prev),a==b.bottom&&(b.bottom=a.next),a.next&&(a.next.prev=a.prev),a.prev&&(a.prev.next=a.next)},bU=a._tofront=function(a,b){b.top!==a&&(bT(a,b),a.next=null,a.prev=b.top,b.top.next=a,b.top=a)},bV=a._toback=function(a,b){b.bottom!==a&&(bT(a,b),a.next=b.bottom,a.prev=null,b.bottom.prev=a,b.bottom=a)},bW=a._insertafter=function(a,b,c){bT(a,c),b==c.top&&(c.top=a),b.next&&(b.next.prev=a),a.next=b.next,a.prev=b,b.next=a},bX=a._insertbefore=function(a,b,c){bT(a,c),b==c.bottom&&(c.bottom=a),b.prev&&(b.prev.next=a),a.prev=b.prev,b.prev=a,a.next=b},bY=a.toMatrix=function(a,b){var c=bI(a),d={_:{transform:p},getBBox:function(){return c}};b$(d,b);return d.matrix},bZ=a.transformPath=function(a,b){return bj(a,bY(a,b))},b$=a._extractTransform=function(b,c){if(c==null)return b._.transform;c=r(c).replace(/\.{3}|\u2026/g,b._.transform||p);var d=a.parseTransformString(c),e=0,f=0,g=0,h=1,i=1,j=b._,k=new cb;j.transform=d||[];if(d)for(var l=0,m=d.length;l<m;l++){var n=d[l],o=n.length,q=r(n[0]).toLowerCase(),s=n[0]!=q,t=s?k.invert():0,u,v,w,x,y;q=="t"&&o==3?s?(u=t.x(0,0),v=t.y(0,0),w=t.x(n[1],n[2]),x=t.y(n[1],n[2]),k.translate(w-u,x-v)):k.translate(n[1],n[2]):q=="r"?o==2?(y=y||b.getBBox(1),k.rotate(n[1],y.x+y.width/2,y.y+y.height/2),e+=n[1]):o==4&&(s?(w=t.x(n[2],n[3]),x=t.y(n[2],n[3]),k.rotate(n[1],w,x)):k.rotate(n[1],n[2],n[3]),e+=n[1]):q=="s"?o==2||o==3?(y=y||b.getBBox(1),k.scale(n[1],n[o-1],y.x+y.width/2,y.y+y.height/2),h*=n[1],i*=n[o-1]):o==5&&(s?(w=t.x(n[3],n[4]),x=t.y(n[3],n[4]),k.scale(n[1],n[2],w,x)):k.scale(n[1],n[2],n[3],n[4]),h*=n[1],i*=n[2]):q=="m"&&o==7&&k.add(n[1],n[2],n[3],n[4],n[5],n[6]),j.dirtyT=1,b.matrix=k}b.matrix=k,j.sx=h,j.sy=i,j.deg=e,j.dx=f=k.e,j.dy=g=k.f,h==1&&i==1&&!e&&j.bbox?(j.bbox.x+=+f,j.bbox.y+=+g):j.dirtyT=1},b_=function(a){var b=a[0];switch(b.toLowerCase()){case"t":return[b,0,0];case"m":return[b,1,0,0,1,0,0];case"r":return a.length==4?[b,0,a[2],a[3]]:[b,0];case"s":return a.length==5?[b,1,1,a[3],a[4]]:a.length==3?[b,1,1]:[b,1]}},ca=a._equaliseTransform=function(b,c){c=r(c).replace(/\.{3}|\u2026/g,b),b=a.parseTransformString(b)||[],c=a.parseTransformString(c)||[];var d=x(b.length,c.length),e=[],f=[],g=0,h,i,j,k;for(;g<d;g++){j=b[g]||b_(c[g]),k=c[g]||b_(j);if(j[0]!=k[0]||j[0].toLowerCase()=="r"&&(j[2]!=k[2]||j[3]!=k[3])||j[0].toLowerCase()=="s"&&(j[3]!=k[3]||j[4]!=k[4]))return;e[g]=[],f[g]=[];for(h=0,i=x(j.length,k.length);h<i;h++)h in j&&(e[g][h]=j[h]),h in k&&(f[g][h]=k[h])}return{from:e,to:f}};a._getContainer=function(b,c,d,e){var f;f=e==null&&!a.is(b,"object")?h.doc.getElementById(b):b;if(f!=null){if(f.tagName)return c==null?{container:f,width:f.style.pixelWidth||f.offsetWidth,height:f.style.pixelHeight||f.offsetHeight}:{container:f,width:c,height:d};return{container:1,x:b,y:c,width:d,height:e}}},a.pathToRelative=bK,a._engine={},a.path2curve=bR,a.matrix=function(a,b,c,d,e,f){return new cb(a,b,c,d,e,f)},function(b){function d(a){var b=w.sqrt(c(a));a[0]&&(a[0]/=b),a[1]&&(a[1]/=b)}function c(a){return a[0]*a[0]+a[1]*a[1]}b.add=function(a,b,c,d,e,f){var g=[[],[],[]],h=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],i=[[a,c,e],[b,d,f],[0,0,1]],j,k,l,m;a&&a instanceof cb&&(i=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(j=0;j<3;j++)for(k=0;k<3;k++){m=0;for(l=0;l<3;l++)m+=h[j][l]*i[l][k];g[j][k]=m}this.a=g[0][0],this.b=g[1][0],this.c=g[0][1],this.d=g[1][1],this.e=g[0][2],this.f=g[1][2]},b.invert=function(){var a=this,b=a.a*a.d-a.b*a.c;return new cb(a.d/b,-a.b/b,-a.c/b,a.a/b,(a.c*a.f-a.d*a.e)/b,(a.b*a.e-a.a*a.f)/b)},b.clone=function(){return new cb(this.a,this.b,this.c,this.d,this.e,this.f)},b.translate=function(a,b){this.add(1,0,0,1,a,b)},b.scale=function(a,b,c,d){b==null&&(b=a),(c||d)&&this.add(1,0,0,1,c,d),this.add(a,0,0,b,0,0),(c||d)&&this.add(1,0,0,1,-c,-d)},b.rotate=function(b,c,d){b=a.rad(b),c=c||0,d=d||0;var e=+w.cos(b).toFixed(9),f=+w.sin(b).toFixed(9);this.add(e,f,-f,e,c,d),this.add(1,0,0,1,-c,-d)},b.x=function(a,b){return a*this.a+b*this.c+this.e},b.y=function(a,b){return a*this.b+b*this.d+this.f},b.get=function(a){return+this[r.fromCharCode(97+a)].toFixed(4)},b.toString=function(){return a.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},b.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},b.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},b.split=function(){var b={};b.dx=this.e,b.dy=this.f;var e=[[this.a,this.c],[this.b,this.d]];b.scalex=w.sqrt(c(e[0])),d(e[0]),b.shear=e[0][0]*e[1][0]+e[0][1]*e[1][1],e[1]=[e[1][0]-e[0][0]*b.shear,e[1][1]-e[0][1]*b.shear],b.scaley=w.sqrt(c(e[1])),d(e[1]),b.shear/=b.scaley;var f=-e[0][1],g=e[1][1];g<0?(b.rotate=a.deg(w.acos(g)),f<0&&(b.rotate=360-b.rotate)):b.rotate=a.deg(w.asin(f)),b.isSimple=!+b.shear.toFixed(9)&&(b.scalex.toFixed(9)==b.scaley.toFixed(9)||!b.rotate),b.isSuperSimple=!+b.shear.toFixed(9)&&b.scalex.toFixed(9)==b.scaley.toFixed(9)&&!b.rotate,b.noRotation=!+b.shear.toFixed(9)&&!b.rotate;return b},b.toTransformString=function(a){var b=a||this[s]();if(b.isSimple){b.scalex=+b.scalex.toFixed(4),b.scaley=+b.scaley.toFixed(4),b.rotate=+b.rotate.toFixed(4);return(b.dx||b.dy?"t"+[b.dx,b.dy]:p)+(b.scalex!=1||b.scaley!=1?"s"+[b.scalex,b.scaley,0,0]:p)+(b.rotate?"r"+[b.rotate,0,0]:p)}return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(cb.prototype);var cc=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(cc&&cc[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&cc&&cc[1]<8?k.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()})}:k.safari=be;var cd=function(){this.returnValue=!1},ce=function(){return this.originalEvent.preventDefault()},cf=function(){this.cancelBubble=!0},cg=function(){return this.originalEvent.stopPropagation()},ch=function(){if(h.doc.addEventListener)return function(a,b,c,d){var e=o&&u[b]?u[b]:b,f=function(e){var f=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,i=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,j=e.clientX+i,k=e.clientY+f;if(o&&u[g](b))for(var l=0,m=e.targetTouches&&e.targetTouches.length;l<m;l++)if(e.targetTouches[l].target==a){var n=e;e=e.targetTouches[l],e.originalEvent=n,e.preventDefault=ce,e.stopPropagation=cg;break}return c.call(d,e,j,k)};a.addEventListener(e,f,!1);return function(){a.removeEventListener(e,f,!1);return!0}};if(h.doc.attachEvent)return function(a,b,c,d){var e=function(a){a=a||h.win.event;var b=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,e=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,f=a.clientX+e,g=a.clientY+b;a.preventDefault=a.preventDefault||cd,a.stopPropagation=a.stopPropagation||cf;return c.call(d,a,f,g)};a.attachEvent("on"+b,e);var f=function(){a.detachEvent("on"+b,e);return!0};return f}}(),ci=[],cj=function(a){var b=a.clientX,c=a.clientY,d=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,e=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft,f,g=ci.length;while(g--){f=ci[g];if(o){var i=a.touches.length,j;while(i--){j=a.touches[i];if(j.identifier==f.el._drag.id){b=j.clientX,c=j.clientY,(a.originalEvent?a.originalEvent:a).preventDefault();break}}}else a.preventDefault();var k=f.el.node,l,m=k.nextSibling,n=k.parentNode,p=k.style.display;h.win.opera&&n.removeChild(k),k.style.display="none",l=f.el.paper.getElementByPoint(b,c),k.style.display=p,h.win.opera&&(m?n.insertBefore(k,m):n.appendChild(k)),l&&eve("raphael.drag.over."+f.el.id,f.el,l),b+=e,c+=d,eve("raphael.drag.move."+f.el.id,f.move_scope||f.el,b-f.el._drag.x,c-f.el._drag.y,b,c,a)}},ck=function(b){a.unmousemove(cj).unmouseup(ck);var c=ci.length,d;while(c--)d=ci[c],d.el._drag={},eve("raphael.drag.end."+d.el.id,d.end_scope||d.start_scope||d.move_scope||d.el,b);ci=[]},cl=a.el={};for(var cm=t.length;cm--;)(function(b){a[b]=cl[b]=function(c,d){a.is(c,"function")&&(this.events=this.events||[],this.events.push({name:b,f:c,unbind:ch(this.shape||this.node||h.doc,b,c,d||this)}));return this},a["un"+b]=cl["un"+b]=function(a){var c=this.events||[],d=c.length;while(d--)if(c[d].name==b&&c[d].f==a){c[d].unbind(),c.splice(d,1),!c.length&&delete this.events;return this}return this}})(t[cm]);cl.data=function(b,c){var d=bb[this.id]=bb[this.id]||{};if(arguments.length==1){if(a.is(b,"object")){for(var e in b)b[g](e)&&this.data(e,b[e]);return this}eve("raphael.data.get."+this.id,this,d[b],b);return d[b]}d[b]=c,eve("raphael.data.set."+this.id,this,c,b);return this},cl.removeData=function(a){a==null?bb[this.id]={}:bb[this.id]&&delete bb[this.id][a];return this},cl.hover=function(a,b,c,d){return this.mouseover(a,c).mouseout(b,d||c)},cl.unhover=function(a,b){return this.unmouseover(a).unmouseout(b)};var cn=[];cl.drag=function(b,c,d,e,f,g){function i(i){(i.originalEvent||i).preventDefault();var j=h.doc.documentElement.scrollTop||h.doc.body.scrollTop,k=h.doc.documentElement.scrollLeft||h.doc.body.scrollLeft;this._drag.x=i.clientX+k,this._drag.y=i.clientY+j,this._drag.id=i.identifier,!ci.length&&a.mousemove(cj).mouseup(ck),ci.push({el:this,move_scope:e,start_scope:f,end_scope:g}),c&&eve.on("raphael.drag.start."+this.id,c),b&&eve.on("raphael.drag.move."+this.id,b),d&&eve.on("raphael.drag.end."+this.id,d),eve("raphael.drag.start."+this.id,f||e||this,i.clientX+k,i.clientY+j,i)}this._drag={},cn.push({el:this,start:i}),this.mousedown(i);return this},cl.onDragOver=function(a){a?eve.on("raphael.drag.over."+this.id,a):eve.unbind("raphael.drag.over."+this.id)},cl.undrag=function(){var b=cn.length;while(b--)cn[b].el==this&&(this.unmousedown(cn[b].start),cn.splice(b,1),eve.unbind("raphael.drag.*."+this.id));!cn.length&&a.unmousemove(cj).unmouseup(ck)},k.circle=function(b,c,d){var e=a._engine.circle(this,b||0,c||0,d||0);this.__set__&&this.__set__.push(e);return e},k.rect=function(b,c,d,e,f){var g=a._engine.rect(this,b||0,c||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(g);return g},k.ellipse=function(b,c,d,e){var f=a._engine.ellipse(this,b||0,c||0,d||0,e||0);this.__set__&&this.__set__.push(f);return f},k.path=function(b){b&&!a.is(b,D)&&!a.is(b[0],E)&&(b+=p);var c=a._engine.path(a.format[m](a,arguments),this);this.__set__&&this.__set__.push(c);return c},k.image=function(b,c,d,e,f){var g=a._engine.image(this,b||"about:blank",c||0,d||0,e||0,f||0);this.__set__&&this.__set__.push(g);return g},k.text=function(b,c,d){var e=a._engine.text(this,b||0,c||0,r(d));this.__set__&&this.__set__.push(e);return e},k.set=function(b){!a.is(b,"array")&&(b=Array.prototype.splice.call(arguments,0,arguments.length));var c=new cG(b);this.__set__&&this.__set__.push(c);return c},k.setStart=function(a){this.__set__=a||this.set()},k.setFinish=function(a){var b=this.__set__;delete this.__set__;return b},k.setSize=function(b,c){return a._engine.setSize.call(this,b,c)},k.setViewBox=function(b,c,d,e,f){return a._engine.setViewBox.call(this,b,c,d,e,f)},k.top=k.bottom=null,k.raphael=a;var co=function(a){var b=a.getBoundingClientRect(),c=a.ownerDocument,d=c.body,e=c.documentElement,f=e.clientTop||d.clientTop||0,g=e.clientLeft||d.clientLeft||0,i=b.top+(h.win.pageYOffset||e.scrollTop||d.scrollTop)-f,j=b.left+(h.win.pageXOffset||e.scrollLeft||d.scrollLeft)-g;return{y:i,x:j}};k.getElementByPoint=function(a,b){var c=this,d=c.canvas,e=h.doc.elementFromPoint(a,b);if(h.win.opera&&e.tagName=="svg"){var f=co(d),g=d.createSVGRect();g.x=a-f.x,g.y=b-f.y,g.width=g.height=1;var i=d.getIntersectionList(g,null);i.length&&(e=i[i.length-1])}if(!e)return null;while(e.parentNode&&e!=d.parentNode&&!e.raphael)e=e.parentNode;e==c.canvas.parentNode&&(e=d),e=e&&e.raphael?c.getById(e.raphaelid):null;return e},k.getById=function(a){var b=this.bottom;while(b){if(b.id==a)return b;b=b.next}return null},k.forEach=function(a,b){var c=this.bottom;while(c){if(a.call(b,c)===!1)return this;c=c.next}return this},k.getElementsByPoint=function(a,b){var c=this.set();this.forEach(function(d){d.isPointInside(a,b)&&c.push(d)});return c},cl.isPointInside=function(b,c){var d=this.realPath=this.realPath||bi[this.type](this);return a.isPointInsidePath(d,b,c)},cl.getBBox=function(a){if(this.removed)return{};var b=this._;if(a){if(b.dirty||!b.bboxwt)this.realPath=bi[this.type](this),b.bboxwt=bI(this.realPath),b.bboxwt.toString=cq,b.dirty=0;return b.bboxwt}if(b.dirty||b.dirtyT||!b.bbox){if(b.dirty||!this.realPath)b.bboxwt=0,this.realPath=bi[this.type](this);b.bbox=bI(bj(this.realPath,this.matrix)),b.bbox.toString=cq,b.dirty=b.dirtyT=0}return b.bbox},cl.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a},cl.glow=function(a){if(this.type=="text")return null;a=a||{};var b={width:(a.width||10)+(+this.attr("stroke-width")||1),fill:a.fill||!1,opacity:a.opacity||.5,offsetx:a.offsetx||0,offsety:a.offsety||0,color:a.color||"#000"},c=b.width/2,d=this.paper,e=d.set(),f=this.realPath||bi[this.type](this);f=this.matrix?bj(f,this.matrix):f;for(var g=1;g<c+1;g++)e.push(d.path(f).attr({stroke:b.color,fill:b.fill?b.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(b.width/c*g).toFixed(3),opacity:+(b.opacity/c).toFixed(3)}));return e.insertBefore(this).translate(b.offsetx,b.offsety)};var cr={},cs=function(b,c,d,e,f,g,h,i,j){return j==null?bB(b,c,d,e,f,g,h,i):a.findDotsAtSegment(b,c,d,e,f,g,h,i,bC(b,c,d,e,f,g,h,i,j))},ct=function(b,c){return function(d,e,f){d=bR(d);var g,h,i,j,k="",l={},m,n=0;for(var o=0,p=d.length;o<p;o++){i=d[o];if(i[0]=="M")g=+i[1],h=+i[2];else{j=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6]);if(n+j>e){if(c&&!l.start){m=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n),k+=["C"+m.start.x,m.start.y,m.m.x,m.m.y,m.x,m.y];if(f)return k;l.start=k,k=["M"+m.x,m.y+"C"+m.n.x,m.n.y,m.end.x,m.end.y,i[5],i[6]].join(),n+=j,g=+i[5],h=+i[6];continue}if(!b&&!c){m=cs(g,h,i[1],i[2],i[3],i[4],i[5],i[6],e-n);return{x:m.x,y:m.y,alpha:m.alpha}}}n+=j,g=+i[5],h=+i[6]}k+=i.shift()+i}l.end=k,m=b?n:c?l:a.findDotsAtSegment(g,h,i[0],i[1],i[2],i[3],i[4],i[5],1),m.alpha&&(m={x:m.x,y:m.y,alpha:m.alpha});return m}},cu=ct(1),cv=ct(),cw=ct(0,1);a.getTotalLength=cu,a.getPointAtLength=cv,a.getSubpath=function(a,b,c){if(this.getTotalLength(a)-c<1e-6)return cw(a,b).end;var d=cw(a,c,1);return b?cw(d,b).end:d},cl.getTotalLength=function(){if(this.type=="path"){if(this.node.getTotalLength)return this.node.getTotalLength();return cu(this.attrs.path)}},cl.getPointAtLength=function(a){if(this.type=="path")return cv(this.attrs.path,a)},cl.getSubpath=function(b,c){if(this.type=="path")return a.getSubpath(this.attrs.path,b,c)};var cx=a.easing_formulas={linear:function(a){return a},"<":function(a){return A(a,1.7)},">":function(a){return A(a,.48)},"<>":function(a){var b=.48-a/1.04,c=w.sqrt(.1734+b*b),d=c-b,e=A(z(d),1/3)*(d<0?-1:1),f=-c-b,g=A(z(f),1/3)*(f<0?-1:1),h=e+g+.5;return(1-h)*3*h*h+h*h*h},backIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},backOut:function(a){a=a-1;var b=1.70158;return a*a*((b+1)*a+b)+1},elastic:function(a){if(a==!!a)return a;return A(2,-10*a)*w.sin((a-.075)*2*B/.3)+1},bounce:function(a){var b=7.5625,c=2.75,d;a<1/c?d=b*a*a:a<2/c?(a-=1.5/c,d=b*a*a+.75):a<2.5/c?(a-=2.25/c,d=b*a*a+.9375):(a-=2.625/c,d=b*a*a+.984375);return d}};cx.easeIn=cx["ease-in"]=cx["<"],cx.easeOut=cx["ease-out"]=cx[">"],cx.easeInOut=cx["ease-in-out"]=cx["<>"],cx["back-in"]=cx.backIn,cx["back-out"]=cx.backOut;var cy=[],cz=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,16)},cA=function(){var b=+(new Date),c=0;for(;c<cy.length;c++){var d=cy[c];if(d.el.removed||d.paused)continue;var e=b-d.start,f=d.ms,h=d.easing,i=d.from,j=d.diff,k=d.to,l=d.t,m=d.el,o={},p,r={},s;d.initstatus?(e=(d.initstatus*d.anim.top-d.prev)/(d.percent-d.prev)*f,d.status=d.initstatus,delete d.initstatus,d.stop&&cy.splice(c--,1)):d.status=(d.prev+(d.percent-d.prev)*(e/f))/d.anim.top;if(e<0)continue;if(e<f){var t=h(e/f);for(var u in i)if(i[g](u)){switch(U[u]){case C:p=+i[u]+t*f*j[u];break;case"colour":p="rgb("+[cB(O(i[u].r+t*f*j[u].r)),cB(O(i[u].g+t*f*j[u].g)),cB(O(i[u].b+t*f*j[u].b))].join(",")+")";break;case"path":p=[];for(var v=0,w=i[u].length;v<w;v++){p[v]=[i[u][v][0]];for(var x=1,y=i[u][v].length;x<y;x++)p[v][x]=+i[u][v][x]+t*f*j[u][v][x];p[v]=p[v].join(q)}p=p.join(q);break;case"transform":if(j[u].real){p=[];for(v=0,w=i[u].length;v<w;v++){p[v]=[i[u][v][0]];for(x=1,y=i[u][v].length;x<y;x++)p[v][x]=i[u][v][x]+t*f*j[u][v][x]}}else{var z=function(a){return+i[u][a]+t*f*j[u][a]};p=[["m",z(0),z(1),z(2),z(3),z(4),z(5)]]}break;case"csv":if(u=="clip-rect"){p=[],v=4;while(v--)p[v]=+i[u][v]+t*f*j[u][v]}break;default:var A=[][n](i[u]);p=[],v=m.paper.customAttributes[u].length;while(v--)p[v]=+A[v]+t*f*j[u][v]}o[u]=p}m.attr(o),function(a,b,c){setTimeout(function(){eve("raphael.anim.frame."+a,b,c)})}(m.id,m,d.anim)}else{(function(b,c,d){setTimeout(function(){eve("raphael.anim.frame."+c.id,c,d),eve("raphael.anim.finish."+c.id,c,d),a.is(b,"function")&&b.call(c)})})(d.callback,m,d.anim),m.attr(k),cy.splice(c--,1);if(d.repeat>1&&!d.next){for(s in k)k[g](s)&&(r[s]=d.totalOrigin[s]);d.el.attr(r),cE(d.anim,d.el,d.anim.percents[0],null,d.totalOrigin,d.repeat-1)}d.next&&!d.stop&&cE(d.anim,d.el,d.next,null,d.totalOrigin,d.repeat)}}a.svg&&m&&m.paper&&m.paper.safari(),cy.length&&cz(cA)},cB=function(a){return a>255?255:a<0?0:a};cl.animateWith=function(b,c,d,e,f,g){var h=this;if(h.removed){g&&g.call(h);return h}var i=d instanceof cD?d:a.animation(d,e,f,g),j,k;cE(i,h,i.percents[0],null,h.attr());for(var l=0,m=cy.length;l<m;l++)if(cy[l].anim==c&&cy[l].el==b){cy[m-1].start=cy[l].start;break}return h},cl.onAnimation=function(a){a?eve.on("raphael.anim.frame."+this.id,a):eve.unbind("raphael.anim.frame."+this.id);return this},cD.prototype.delay=function(a){var b=new cD(this.anim,this.ms);b.times=this.times,b.del=+a||0;return b},cD.prototype.repeat=function(a){var b=new cD(this.anim,this.ms);b.del=this.del,b.times=w.floor(x(a,0))||1;return b},a.animation=function(b,c,d,e){if(b instanceof cD)return b;if(a.is(d,"function")||!d)e=e||d||null,d=null;b=Object(b),c=+c||0;var f={},h,i;for(i in b)b[g](i)&&Q(i)!=i&&Q(i)+"%"!=i&&(h=!0,f[i]=b[i]);if(!h)return new cD(b,c);d&&(f.easing=d),e&&(f.callback=e);return new cD({100:f},c)},cl.animate=function(b,c,d,e){var f=this;if(f.removed){e&&e.call(f);return f}var g=b instanceof cD?b:a.animation(b,c,d,e);cE(g,f,g.percents[0],null,f.attr());return f},cl.setTime=function(a,b){a&&b!=null&&this.status(a,y(b,a.ms)/a.ms);return this},cl.status=function(a,b){var c=[],d=0,e,f;if(b!=null){cE(a,this,-1,y(b,1));return this}e=cy.length;for(;d<e;d++){f=cy[d];if(f.el.id==this.id&&(!a||f.anim==a)){if(a)return f.status;c.push({anim:f.anim,status:f.status})}}if(a)return 0;return c},cl.pause=function(a){for(var b=0;b<cy.length;b++)cy[b].el.id==this.id&&(!a||cy[b].anim==a)&&eve("raphael.anim.pause."+this.id,this,cy[b].anim)!==!1&&(cy[b].paused=!0);return this},cl.resume=function(a){for(var b=0;b<cy.length;b++)if(cy[b].el.id==this.id&&(!a||cy[b].anim==a)){var c=cy[b];eve("raphael.anim.resume."+this.id,this,c.anim)!==!1&&(delete c.paused,this.status(c.anim,c.status))}return this},cl.stop=function(a){for(var b=0;b<cy.length;b++)cy[b].el.id==this.id&&(!a||cy[b].anim==a)&&eve("raphael.anim.stop."+this.id,this,cy[b].anim)!==!1&&cy.splice(b--,1);return this},eve.on("raphael.remove",cF),eve.on("raphael.clear",cF),cl.toString=function(){return"Rapha�l�s object"};var cG=function(a){this.items=[],this.length=0,this.type="set";if(a)for(var b=0,c=a.length;b<c;b++)a[b]&&(a[b].constructor==cl.constructor||a[b].constructor==cG)&&(this[this.items.length]=this.items[this.items.length]=a[b],this.length++)},cH=cG.prototype;cH.push=function(){var a,b;for(var c=0,d=arguments.length;c<d;c++)a=arguments[c],a&&(a.constructor==cl.constructor||a.constructor==cG)&&(b=this.items.length,this[b]=this.items[b]=a,this.length++);return this},cH.pop=function(){this.length&&delete this[this.length--];return this.items.pop()},cH.forEach=function(a,b){for(var c=0,d=this.items.length;c<d;c++)if(a.call(b,this.items[c],c)===!1)return this;return this};for(var cI in cl)cl[g](cI)&&(cH[cI]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a][m](c,b)})}}(cI));cH.attr=function(b,c){if(b&&a.is(b,E)&&a.is(b[0],"object"))for(var d=0,e=b.length;d<e;d++)this.items[d].attr(b[d]);else for(var f=0,g=this.items.length;f<g;f++)this.items[f].attr(b,c);return this},cH.clear=function(){while(this.length)this.pop()},cH.splice=function(a,b,c){a=a<0?x(this.length+a,0):a,b=x(0,y(this.length-a,b));var d=[],e=[],f=[],g;for(g=2;g<arguments.length;g++)f.push(arguments[g]);for(g=0;g<b;g++)e.push(this[a+g]);for(;g<this.length-a;g++)d.push(this[a+g]);var h=f.length;for(g=0;g<h+d.length;g++)this.items[a+g]=this[a+g]=g<h?f[g]:d[g-h];g=this.items.length=this.length-=b-h;while(this[g])delete this[g++];return new cG(e)},cH.exclude=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]==a){this.splice(b,1);return!0}},cH.animate=function(b,c,d,e){(a.is(d,"function")||!d)&&(e=d||null);var f=this.items.length,g=f,h,i=this,j;if(!f)return this;e&&(j=function(){!--f&&e.call(i)}),d=a.is(d,D)?d:j;var k=a.animation(b,c,d,j);h=this.items[--g].animate(k);while(g--)this.items[g]&&!this.items[g].removed&&this.items[g].animateWith(h,k,k);return this},cH.insertAfter=function(a){var b=this.items.length;while(b--)this.items[b].insertAfter(a);return this},cH.getBBox=function(){var a=[],b=[],c=[],d=[];for(var e=this.items.length;e--;)if(!this.items[e].removed){var f=this.items[e].getBBox();a.push(f.x),b.push(f.y),c.push(f.x+f.width),d.push(f.y+f.height)}a=y[m](0,a),b=y[m](0,b),c=x[m](0,c),d=x[m](0,d);return{x:a,y:b,x2:c,y2:d,width:c-a,height:d-b}},cH.clone=function(a){a=new cG;for(var b=0,c=this.items.length;b<c;b++)a.push(this.items[b].clone());return a},cH.toString=function(){return"Rapha�l�s set"},a.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var b={w:a.w,face:{},glyphs:{}},c=a.face["font-family"];for(var d in a.face)a.face[g](d)&&(b.face[d]=a.face[d]);this.fonts[c]?this.fonts[c].push(b):this.fonts[c]=[b];if(!a.svg){b.face["units-per-em"]=R(a.face["units-per-em"],10);for(var e in a.glyphs)if(a.glyphs[g](e)){var f=a.glyphs[e];b.glyphs[e]={w:f.w,k:{},d:f.d&&"M"+f.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"};if(f.k)for(var h in f.k)f[g](h)&&(b.glyphs[e].k[h]=f.k[h])}}return a},k.getFont=function(b,c,d,e){e=e||"normal",d=d||"normal",c=+c||{normal:400,bold:700,lighter:300,bolder:800}[c]||400;if(!!a.fonts){var f=a.fonts[b];if(!f){var h=new RegExp("(^|\\s)"+b.replace(/[^\w\d\s+!~.:_-]/g,p)+"(\\s|$)","i");for(var i in a.fonts)if(a.fonts[g](i)&&h.test(i)){f=a.fonts[i];break}}var j;if(f)for(var k=0,l=f.length;k<l;k++){j=f[k];if(j.face["font-weight"]==c&&(j.face["font-style"]==d||!j.face["font-style"])&&j.face["font-stretch"]==e)break}return j}},k.print=function(b,d,e,f,g,h,i){h=h||"middle",i=x(y(i||0,1),-1);var j=r(e)[s](p),k=0,l=0,m=p,n;a.is(f,e)&&(f=this.getFont(f));if(f){n=(g||16)/f.face["units-per-em"];var o=f.face.bbox[s](c),q=+o[0],t=o[3]-o[1],u=0,v=+o[1]+(h=="baseline"?t+ +f.face.descent:t/2);for(var w=0,z=j.length;w<z;w++){if(j[w]=="\n")k=0,B=0,l=0,u+=t;else{var A=l&&f.glyphs[j[w-1]]||{},B=f.glyphs[j[w]];k+=l?(A.w||f.w)+(A.k&&A.k[j[w]]||0)+f.w*i:0,l=1}B&&B.d&&(m+=a.transformPath(B.d,["t",k*n,u*n,"s",n,n,q,v,"t",(b-q)/n,(d-v)/n]))}}return this.path(m).attr({fill:"#000",stroke:"none"})},k.add=function(b){if(a.is(b,"array")){var c=this.set(),e=0,f=b.length,h;for(;e<f;e++)h=b[e]||{},d[g](h.type)&&c.push(this[h.type]().attr(h))}return c},a.format=function(b,c){var d=a.is(c,E)?[0][n](c):arguments;b&&a.is(b,D)&&d.length-1&&(b=b.replace(e,function(a,b){return d[++b]==null?p:d[b]}));return b||p},a.fullfill=function(){var a=/\{([^\}]+)\}/g,b=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,c=function(a,c,d){var e=d;c.replace(b,function(a,b,c,d,f){b=b||d,e&&(b in e&&(e=e[b]),typeof e=="function"&&f&&(e=e()))}),e=(e==null||e==d?a:e)+"";return e};return function(b,d){return String(b).replace(a,function(a,b){return c(a,b,d)})}}(),a.ninja=function(){i.was?h.win.Raphael=i.is:delete Raphael;return a},a.st=cH,function(b,c,d){function e(){/in/.test(b.readyState)?setTimeout(e,9):a.eve("raphael.DOMload")}b.readyState==null&&b.addEventListener&&(b.addEventListener(c,d=function(){b.removeEventListener(c,d,!1),b.readyState="complete"},!1),b.readyState="loading"),e()}(document,"DOMContentLoaded"),i.was?h.win.Raphael=a:Raphael=a,eve.on("raphael.DOMload",function(){b=!0})}(),window.Raphael.svg&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=parseInt,f=Math,g=f.max,h=f.abs,i=f.pow,j=/[, ]+/,k=a.eve,l="",m=" ",n="http://www.w3.org/1999/xlink",o={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},p={};a.toString=function(){return"Your browser supports SVG.\nYou are running Rapha�l "+this.version};var q=function(d,e){if(e){typeof d=="string"&&(d=q(d));for(var f in e)e[b](f)&&(f.substring(0,6)=="xlink:"?d.setAttributeNS(n,f.substring(6),c(e[f])):d.setAttribute(f,c(e[f])))}else d=a._g.doc.createElementNS("http://www.w3.org/2000/svg",d),d.style&&(d.style.webkitTapHighlightColor="rgba(0,0,0,0)");return d},r=function(b,e){var j="linear",k=b.id+e,m=.5,n=.5,o=b.node,p=b.paper,r=o.style,s=a._g.doc.getElementById(k);if(!s){e=c(e).replace(a._radial_gradient,function(a,b,c){j="radial";if(b&&c){m=d(b),n=d(c);var e=(n>.5)*2-1;i(m-.5,2)+i(n-.5,2)>.25&&(n=f.sqrt(.25-i(m-.5,2))*e+.5)&&n!=.5&&(n=n.toFixed(5)-1e-5*e)}return l}),e=e.split(/\s*\-\s*/);if(j=="linear"){var t=e.shift();t=-d(t);if(isNaN(t))return null;var u=[0,0,f.cos(a.rad(t)),f.sin(a.rad(t))],v=1/(g(h(u[2]),h(u[3]))||1);u[2]*=v,u[3]*=v,u[2]<0&&(u[0]=-u[2],u[2]=0),u[3]<0&&(u[1]=-u[3],u[3]=0)}var w=a._parseDots(e);if(!w)return null;k=k.replace(/[\(\)\s,\xb0#]/g,"_"),b.gradient&&k!=b.gradient.id&&(p.defs.removeChild(b.gradient),delete b.gradient);if(!b.gradient){s=q(j+"Gradient",{id:k}),b.gradient=s,q(s,j=="radial"?{fx:m,fy:n}:{x1:u[0],y1:u[1],x2:u[2],y2:u[3],gradientTransform:b.matrix.invert()}),p.defs.appendChild(s);for(var x=0,y=w.length;x<y;x++)s.appendChild(q("stop",{offset:w[x].offset?w[x].offset:x?"100%":"0%","stop-color":w[x].color||"#fff"}))}}q(o,{fill:"url(#"+k+")",opacity:1,"fill-opacity":1}),r.fill=l,r.opacity=1,r.fillOpacity=1;return 1},s=function(a){var b=a.getBBox(1);q(a.pattern,{patternTransform:a.matrix.invert()+" translate("+b.x+","+b.y+")"})},t=function(d,e,f){if(d.type=="path"){var g=c(e).toLowerCase().split("-"),h=d.paper,i=f?"end":"start",j=d.node,k=d.attrs,m=k["stroke-width"],n=g.length,r="classic",s,t,u,v,w,x=3,y=3,z=5;while(n--)switch(g[n]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":r=g[n];break;case"wide":y=5;break;case"narrow":y=2;break;case"long":x=5;break;case"short":x=2}r=="open"?(x+=2,y+=2,z+=2,u=1,v=f?4:1,w={fill:"none",stroke:k.stroke}):(v=u=x/2,w={fill:k.stroke,stroke:"none"}),d._.arrows?f?(d._.arrows.endPath&&p[d._.arrows.endPath]--,d._.arrows.endMarker&&p[d._.arrows.endMarker]--):(d._.arrows.startPath&&p[d._.arrows.startPath]--,d._.arrows.startMarker&&p[d._.arrows.startMarker]--):d._.arrows={};if(r!="none"){var A="raphael-marker-"+r,B="raphael-marker-"+i+r+x+y;a._g.doc.getElementById(A)?p[A]++:(h.defs.appendChild(q(q("path"),{"stroke-linecap":"round",d:o[r],id:A})),p[A]=1);var C=a._g.doc.getElementById(B),D;C?(p[B]++,D=C.getElementsByTagName("use")[0]):(C=q(q("marker"),{id:B,markerHeight:y,markerWidth:x,orient:"auto",refX:v,refY:y/2}),D=q(q("use"),{"xlink:href":"#"+A,transform:(f?"rotate(180 "+x/2+" "+y/2+") ":l)+"scale("+x/z+","+y/z+")","stroke-width":(1/((x/z+y/z)/2)).toFixed(4)}),C.appendChild(D),h.defs.appendChild(C),p[B]=1),q(D,w);var F=u*(r!="diamond"&&r!="oval");f?(s=d._.arrows.startdx*m||0,t=a.getTotalLength(k.path)-F*m):(s=F*m,t=a.getTotalLength(k.path)-(d._.arrows.enddx*m||0)),w={},w["marker-"+i]="url(#"+B+")";if(t||s)w.d=Raphael.getSubpath(k.path,s,t);q(j,w),d._.arrows[i+"Path"]=A,d._.arrows[i+"Marker"]=B,d._.arrows[i+"dx"]=F,d._.arrows[i+"Type"]=r,d._.arrows[i+"String"]=e}else f?(s=d._.arrows.startdx*m||0,t=a.getTotalLength(k.path)-s):(s=0,t=a.getTotalLength(k.path)-(d._.arrows.enddx*m||0)),d._.arrows[i+"Path"]&&q(j,{d:Raphael.getSubpath(k.path,s,t)}),delete d._.arrows[i+"Path"],delete d._.arrows[i+"Marker"],delete d._.arrows[i+"dx"],delete d._.arrows[i+"Type"],delete d._.arrows[i+"String"];for(w in p)if(p[b](w)&&!p[w]){var G=a._g.doc.getElementById(w);G&&G.parentNode.removeChild(G)}}},u={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},v=function(a,b,d){b=u[c(b).toLowerCase()];if(b){var e=a.attrs["stroke-width"]||"1",f={round:e,square:e,butt:0}[a.attrs["stroke-linecap"]||d["stroke-linecap"]]||0,g=[],h=b.length;while(h--)g[h]=b[h]*e+(h%2?1:-1)*f;q(a.node,{"stroke-dasharray":g.join(",")})}},w=function(d,f){var i=d.node,k=d.attrs,m=i.style.visibility;i.style.visibility="hidden";for(var o in f)if(f[b](o)){if(!a._availableAttrs[b](o))continue;var p=f[o];k[o]=p;switch(o){case"blur":d.blur(p);break;case"href":case"title":case"target":var u=i.parentNode;if(u.tagName.toLowerCase()!="a"){var w=q("a");u.insertBefore(w,i),w.appendChild(i),u=w}o=="target"?u.setAttributeNS(n,"show",p=="blank"?"new":p):u.setAttributeNS(n,o,p);break;case"cursor":i.style.cursor=p;break;case"transform":d.transform(p);break;case"arrow-start":t(d,p);break;case"arrow-end":t(d,p,1);break;case"clip-rect":var x=c(p).split(j);if(x.length==4){d.clip&&d.clip.parentNode.parentNode.removeChild(d.clip.parentNode);var z=q("clipPath"),A=q("rect");z.id=a.createUUID(),q(A,{x:x[0],y:x[1],width:x[2],height:x[3]}),z.appendChild(A),d.paper.defs.appendChild(z),q(i,{"clip-path":"url(#"+z.id+")"}),d.clip=A}if(!p){var B=i.getAttribute("clip-path");if(B){var C=a._g.doc.getElementById(B.replace(/(^url\(#|\)$)/g,l));C&&C.parentNode.removeChild(C),q(i,{"clip-path":l}),delete d.clip}}break;case"path":d.type=="path"&&(q(i,{d:p?k.path=a._pathToAbsolute(p):"M0,0"}),d._.dirty=1,d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1)));break;case"width":i.setAttribute(o,p),d._.dirty=1;if(k.fx)o="x",p=k.x;else break;case"x":k.fx&&(p=-k.x-(k.width||0));case"rx":if(o=="rx"&&d.type=="rect")break;case"cx":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"height":i.setAttribute(o,p),d._.dirty=1;if(k.fy)o="y",p=k.y;else break;case"y":k.fy&&(p=-k.y-(k.height||0));case"ry":if(o=="ry"&&d.type=="rect")break;case"cy":i.setAttribute(o,p),d.pattern&&s(d),d._.dirty=1;break;case"r":d.type=="rect"?q(i,{rx:p,ry:p}):i.setAttribute(o,p),d._.dirty=1;break;case"src":d.type=="image"&&i.setAttributeNS(n,"href",p);break;case"stroke-width":if(d._.sx!=1||d._.sy!=1)p/=g(h(d._.sx),h(d._.sy))||1;d.paper._vbSize&&(p*=d.paper._vbSize),i.setAttribute(o,p),k["stroke-dasharray"]&&v(d,k["stroke-dasharray"],f),d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"stroke-dasharray":v(d,p,f);break;case"fill":var D=c(p).match(a._ISURL);if(D){z=q("pattern");var F=q("image");z.id=a.createUUID(),q(z,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),q(F,{x:0,y:0,"xlink:href":D[1]}),z.appendChild(F),function(b){a._preload(D[1],function(){var a=this.offsetWidth,c=this.offsetHeight;q(b,{width:a,height:c}),q(F,{width:a,height:c}),d.paper.safari()})}(z),d.paper.defs.appendChild(z),q(i,{fill:"url(#"+z.id+")"}),d.pattern=z,d.pattern&&s(d);break}var G=a.getRGB(p);if(!G.error)delete f.gradient,delete k.gradient,!a.is(k.opacity,"undefined")&&a.is(f.opacity,"undefined")&&q(i,{opacity:k.opacity}),!a.is(k["fill-opacity"],"undefined")&&a.is(f["fill-opacity"],"undefined")&&q(i,{"fill-opacity":k["fill-opacity"]});else if((d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p)){if("opacity"in k||"fill-opacity"in k){var H=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l));if(H){var I=H.getElementsByTagName("stop");q(I[I.length-1],{"stop-opacity":("opacity"in k?k.opacity:1)*("fill-opacity"in k?k["fill-opacity"]:1)})}}k.gradient=p,k.fill="none";break}G[b]("opacity")&&q(i,{"fill-opacity":G.opacity>1?G.opacity/100:G.opacity});case"stroke":G=a.getRGB(p),i.setAttribute(o,G.hex),o=="stroke"&&G[b]("opacity")&&q(i,{"stroke-opacity":G.opacity>1?G.opacity/100:G.opacity}),o=="stroke"&&d._.arrows&&("startString"in d._.arrows&&t(d,d._.arrows.startString),"endString"in d._.arrows&&t(d,d._.arrows.endString,1));break;case"gradient":(d.type=="circle"||d.type=="ellipse"||c(p).charAt()!="r")&&r(d,p);break;case"opacity":k.gradient&&!k[b]("stroke-opacity")&&q(i,{"stroke-opacity":p>1?p/100:p});case"fill-opacity":if(k.gradient){H=a._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g,l)),H&&(I=H.getElementsByTagName("stop"),q(I[I.length-1],{"stop-opacity":p}));break};default:o=="font-size"&&(p=e(p,10)+"px");var J=o.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()});i.style[J]=p,d._.dirty=1,i.setAttribute(o,p)}}y(d,f),i.style.visibility=m},x=1.2,y=function(d,f){if(d.type=="text"&&!!(f[b]("text")||f[b]("font")||f[b]("font-size")||f[b]("x")||f[b]("y"))){var g=d.attrs,h=d.node,i=h.firstChild?e(a._g.doc.defaultView.getComputedStyle(h.firstChild,l).getPropertyValue("font-size"),10):10;if(f[b]("text")){g.text=f.text;while(h.firstChild)h.removeChild(h.firstChild);var j=c(f.text).split("\n"),k=[],m;for(var n=0,o=j.length;n<o;n++)m=q("tspan"),n&&q(m,{dy:i*x,x:g.x}),m.appendChild(a._g.doc.createTextNode(j[n])),h.appendChild(m),k[n]=m}else{k=h.getElementsByTagName("tspan");for(n=0,o=k.length;n<o;n++)n?q(k[n],{dy:i*x,x:g.x}):q(k[0],{dy:0})}q(h,{x:g.x,y:g.y}),d._.dirty=1;var p=d._getBBox(),r=g.y-(p.y+p.height/2);r&&a.is(r,"finite")&&q(k[0],{dy:r})}},z=function(b,c){var d=0,e=0;this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.matrix=a.matrix(),this.realPath=null,this.paper=c,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},A=a.el;z.prototype=A,A.constructor=z,a._engine.path=function(a,b){var c=q("path");b.canvas&&b.canvas.appendChild(c);var d=new z(c,b);d.type="path",w(d,{fill:"none",stroke:"#000",path:a});return d},A.rotate=function(a,b,e){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}this.transform(this._.transform.concat([["r",a,b,e]]));return this},A.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3])),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]]));return this},A.translate=function(a,b){if(this.removed)return this;a=c(a).split(j),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this.transform(this._.transform.concat([["t",a,b]]));return this},A.transform=function(c){var d=this._;if(c==null)return d.transform;a._extractTransform(this,c),this.clip&&q(this.clip,{transform:this.matrix.invert()}),this.pattern&&s(this),this.node&&q(this.node,{transform:this.matrix});if(d.sx!=1||d.sy!=1){var e=this.attrs[b]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":e})}return this},A.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this},A.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this},A.remove=function(){if(!this.removed&&!!this.node.parentNode){var b=this.paper;b.__set__&&b.__set__.exclude(this),k.unbind("raphael.*.*."+this.id),this.gradient&&b.defs.removeChild(this.gradient),a._tear(this,b),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var c in this)this[c]=typeof this[c]=="function"?a._removedFactory(c):null;this.removed=!0}},A._getBBox=function(){if(this.node.style.display=="none"){this.show();var a=!0}var b={};try{b=this.node.getBBox()}catch(c){}finally{b=b||{}}a&&this.hide();return b},A.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform;return e}if(d==null&&a.is(c,"string")){if(c=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(c=="transform")return this._.transform;var g=c.split(j),h={};for(var i=0,l=g.length;i<l;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return l-1?h:h[g[0]]}if(d==null&&a.is(c,"array")){h={};for(i=0,l=c.length;i<l;i++)h[c[i]]=this.attr(c[i]);return h}if(d!=null){var m={};m[c]=d}else c!=null&&a.is(c,"object")&&(m=c);for(var n in m)k("raphael.attr."+n+"."+this.id,this,m[n]);for(n in this.paper.customAttributes)if(this.paper.customAttributes[b](n)&&m[b](n)&&a.is(this.paper.customAttributes[n],"function")){var o=this.paper.customAttributes[n].apply(this,[].concat(m[n]));this.attrs[n]=m[n];for(var p in o)o[b](p)&&(m[p]=o[p])}w(this,m);return this},A.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var b=this.paper;b.top!=this&&a._tofront(this,b);return this},A.toBack=function(){if(this.removed)return this;var b=this.node.parentNode;b.tagName.toLowerCase()=="a"?b.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):b.firstChild!=this.node&&b.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper);var c=this.paper;return this},A.insertAfter=function(b){if(this.removed)return this;var c=b.node||b[b.length-1].node;c.nextSibling?c.parentNode.insertBefore(this.node,c.nextSibling):c.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper);return this},A.insertBefore=function(b){if(this.removed)return this;var c=b.node||b[0].node;c.parentNode.insertBefore(this.node,c),a._insertbefore(this,b,this.paper);return this},A.blur=function(b){var c=this;if(+b!==0){var d=q("filter"),e=q("feGaussianBlur");c.attrs.blur=b,d.id=a.createUUID(),q(e,{stdDeviation:+b||1.5}),d.appendChild(e),c.paper.defs.appendChild(d),c._blur=d,q(c.node,{filter:"url(#"+d.id+")"})}else c._blur&&(c._blur.parentNode.removeChild(c._blur),delete c._blur,delete c.attrs.blur),c.node.removeAttribute("filter")},a._engine.circle=function(a,b,c,d){var e=q("circle");a.canvas&&a.canvas.appendChild(e);var f=new z(e,a);f.attrs={cx:b,cy:c,r:d,fill:"none",stroke:"#000"},f.type="circle",q(e,f.attrs);return f},a._engine.rect=function(a,b,c,d,e,f){var g=q("rect");a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);h.attrs={x:b,y:c,width:d,height:e,r:f||0,rx:f||0,ry:f||0,fill:"none",stroke:"#000"},h.type="rect",q(g,h.attrs);return h},a._engine.ellipse=function(a,b,c,d,e){var f=q("ellipse");a.canvas&&a.canvas.appendChild(f);var g=new z(f,a);g.attrs={cx:b,cy:c,rx:d,ry:e,fill:"none",stroke:"#000"},g.type="ellipse",q(f,g.attrs);return g},a._engine.image=function(a,b,c,d,e,f){var g=q("image");q(g,{x:c,y:d,width:e,height:f,preserveAspectRatio:"none"}),g.setAttributeNS(n,"href",b),a.canvas&&a.canvas.appendChild(g);var h=new z(g,a);h.attrs={x:c,y:d,width:e,height:f,src:b},h.type="image";return h},a._engine.text=function(b,c,d,e){var f=q("text");b.canvas&&b.canvas.appendChild(f);var g=new z(f,b);g.attrs={x:c,y:d,"text-anchor":"middle",text:e,font:a._availableAttrs.font,stroke:"none",fill:"#000"},g.type="text",w(g,g.attrs);return g},a._engine.setSize=function(a,b){this.width=a||this.width,this.height=b||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this},a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b&&b.container,d=b.x,e=b.y,f=b.width,g=b.height;if(!c)throw new Error("SVG container not found.");var h=q("svg"),i="overflow:hidden;",j;d=d||0,e=e||0,f=f||512,g=g||342,q(h,{height:g,version:1.1,width:f,xmlns:"http://www.w3.org/2000/svg"}),c==1?(h.style.cssText=i+"position:absolute;left:"+d+"px;top:"+e+"px",a._g.doc.body.appendChild(h),j=1):(h.style.cssText=i+"position:relative",c.firstChild?c.insertBefore(h,c.firstChild):c.appendChild(h)),c=new a._Paper,c.width=f,c.height=g,c.canvas=h,c.clear(),c._left=c._top=0,j&&(c.renderfix=function(){}),c.renderfix();return c},a._engine.setViewBox=function(a,b,c,d,e){k("raphael.setViewBox",this,this._viewBox,[a,b,c,d,e]);var f=g(c/this.width,d/this.height),h=this.top,i=e?"meet":"xMinYMin",j,l;a==null?(this._vbSize&&(f=1),delete this._vbSize,j="0 0 "+this.width+m+this.height):(this._vbSize=f,j=a+m+b+m+c+m+d),q(this.canvas,{viewBox:j,preserveAspectRatio:i});while(f&&h)l="stroke-width"in h.attrs?h.attrs["stroke-width"]:1,h.attr({"stroke-width":l}),h._.dirty=1,h._.dirtyT=1,h=h.prev;this._viewBox=[a,b,c,d,!!e];return this},a.prototype.renderfix=function(){var a=this.canvas,b=a.style,c;try{c=a.getScreenCTM()||a.createSVGMatrix()}catch(d){c=a.createSVGMatrix()}var e=-c.e%1,f=-c.f%1;if(e||f)e&&(this._left=(this._left+e)%1,b.left=this._left+"px"),f&&(this._top=(this._top+f)%1,b.top=this._top+"px")},a.prototype.clear=function(){a.eve("raphael.clear",this);var b=this.canvas;while(b.firstChild)b.removeChild(b.firstChild);this.bottom=this.top=null,(this.desc=q("desc")).appendChild(a._g.doc.createTextNode("Created with Rapha�l "+a.version)),b.appendChild(this.desc),b.appendChild(this.defs=q("defs"))},a.prototype.remove=function(){k("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null};var B=a.st;for(var C in A)A[b](C)&&!B[b](C)&&(B[C]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(C))}(window.Raphael),window.Raphael.vml&&function(a){var b="hasOwnProperty",c=String,d=parseFloat,e=Math,f=e.round,g=e.max,h=e.min,i=e.abs,j="fill",k=/[, ]+/,l=a.eve,m=" progid:DXImageTransform.Microsoft",n=" ",o="",p={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},q=/([clmz]),?([^clmz]*)/gi,r=/ progid:\S+Blur\([^\)]+\)/g,s=/-?[^,\s-]+/g,t="position:absolute;left:0;top:0;width:1px;height:1px",u=21600,v={path:1,rect:1,image:1},w={circle:1,ellipse:1},x=function(b){var d=/[ahqstv]/ig,e=a._pathToAbsolute;c(b).match(d)&&(e=a._path2curve),d=/[clmz]/g;if(e==a._pathToAbsolute&&!c(b).match(d)){var g=c(b).replace(q,function(a,b,c){var d=[],e=b.toLowerCase()=="m",g=p[b];c.replace(s,function(a){e&&d.length==2&&(g+=d+p[b=="m"?"l":"L"],d=[]),d.push(f(a*u))});return g+d});return g}var h=e(b),i,j;g=[];for(var k=0,l=h.length;k<l;k++){i=h[k],j=h[k][0].toLowerCase(),j=="z"&&(j="x");for(var m=1,r=i.length;m<r;m++)j+=f(i[m]*u)+(m!=r-1?",":o);g.push(j)}return g.join(n)},y=function(b,c,d){var e=a.matrix();e.rotate(-b,.5,.5);return{dx:e.x(c,d),dy:e.y(c,d)}},z=function(a,b,c,d,e,f){var g=a._,h=a.matrix,k=g.fillpos,l=a.node,m=l.style,o=1,p="",q,r=u/b,s=u/c;m.visibility="hidden";if(!!b&&!!c){l.coordsize=i(r)+n+i(s),m.rotation=f*(b*c<0?-1:1);if(f){var t=y(f,d,e);d=t.dx,e=t.dy}b<0&&(p+="x"),c<0&&(p+=" y")&&(o=-1),m.flip=p,l.coordorigin=d*-r+n+e*-s;if(k||g.fillsize){var v=l.getElementsByTagName(j);v=v&&v[0],l.removeChild(v),k&&(t=y(f,h.x(k[0],k[1]),h.y(k[0],k[1])),v.position=t.dx*o+n+t.dy*o),g.fillsize&&(v.size=g.fillsize[0]*i(b)+n+g.fillsize[1]*i(c)),l.appendChild(v)}m.visibility="visible"}};a.toString=function(){return"Your browser doesn�t support SVG. Falling down to VML.\nYou are running Rapha�l "+this.version};var A=function(a,b,d){var e=c(b).toLowerCase().split("-"),f=d?"end":"start",g=e.length,h="classic",i="medium",j="medium";while(g--)switch(e[g]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":h=e[g];break;case"wide":case"narrow":j=e[g];break;case"long":case"short":i=e[g]}var k=a.node.getElementsByTagName("stroke")[0];k[f+"arrow"]=h,k[f+"arrowlength"]=i,k[f+"arrowwidth"]=j},B=function(e,i){e.attrs=e.attrs||{};var l=e.node,m=e.attrs,p=l.style,q,r=v[e.type]&&(i.x!=m.x||i.y!=m.y||i.width!=m.width||i.height!=m.height||i.cx!=m.cx||i.cy!=m.cy||i.rx!=m.rx||i.ry!=m.ry||i.r!=m.r),s=w[e.type]&&(m.cx!=i.cx||m.cy!=i.cy||m.r!=i.r||m.rx!=i.rx||m.ry!=i.ry),t=e;for(var y in i)i[b](y)&&(m[y]=i[y]);r&&(m.path=a._getPath[e.type](e),e._.dirty=1),i.href&&(l.href=i.href),i.title&&(l.title=i.title),i.target&&(l.target=i.target),i.cursor&&(p.cursor=i.cursor),"blur"in i&&e.blur(i.blur);if(i.path&&e.type=="path"||r)l.path=x(~c(m.path).toLowerCase().indexOf("r")?a._pathToAbsolute(m.path):m.path),e.type=="image"&&(e._.fillpos=[m.x,m.y],e._.fillsize=[m.width,m.height],z(e,1,1,0,0,0));"transform"in i&&e.transform(i.transform);if(s){var B=+m.cx,D=+m.cy,E=+m.rx||+m.r||0,G=+m.ry||+m.r||0;l.path=a.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",f((B-E)*u),f((D-G)*u),f((B+E)*u),f((D+G)*u),f(B*u))}if("clip-rect"in i){var H=c(i["clip-rect"]).split(k);if(H.length==4){H[2]=+H[2]+ +H[0],H[3]=+H[3]+ +H[1];var I=l.clipRect||a._g.doc.createElement("div"),J=I.style;J.clip=a.format("rect({1}px {2}px {3}px {0}px)",H),l.clipRect||(J.position="absolute",J.top=0,J.left=0,J.width=e.paper.width+"px",J.height=e.paper.height+"px",l.parentNode.insertBefore(I,l),I.appendChild(l),l.clipRect=I)}i["clip-rect"]||l.clipRect&&(l.clipRect.style.clip="auto")}if(e.textpath){var K=e.textpath.style;i.font&&(K.font=i.font),i["font-family"]&&(K.fontFamily='"'+i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,o)+'"'),i["font-size"]&&(K.fontSize=i["font-size"]),i["font-weight"]&&(K.fontWeight=i["font-weight"]),i["font-style"]&&(K.fontStyle=i["font-style"])}"arrow-start"in i&&A(t,i["arrow-start"]),"arrow-end"in i&&A(t,i["arrow-end"],1);if(i.opacity!=null||i["stroke-width"]!=null||i.fill!=null||i.src!=null||i.stroke!=null||i["stroke-width"]!=null||i["stroke-opacity"]!=null||i["fill-opacity"]!=null||i["stroke-dasharray"]!=null||i["stroke-miterlimit"]!=null||i["stroke-linejoin"]!=null||i["stroke-linecap"]!=null){var L=l.getElementsByTagName(j),M=!1;L=L&&L[0],!L&&(M=L=F(j)),e.type=="image"&&i.src&&(L.src=i.src),i.fill&&(L.on=!0);if(L.on==null||i.fill=="none"||i.fill===null)L.on=!1;if(L.on&&i.fill){var N=c(i.fill).match(a._ISURL);if(N){L.parentNode==l&&l.removeChild(L),L.rotate=!0,L.src=N[1],L.type="tile";var O=e.getBBox(1);L.position=O.x+n+O.y,e._.fillpos=[O.x,O.y],a._preload(N[1],function(){e._.fillsize=[this.offsetWidth,this.offsetHeight]})}else L.color=a.getRGB(i.fill).hex,L.src=o,L.type="solid",a.getRGB(i.fill).error&&(t.type in{circle:1,ellipse:1}||c(i.fill).charAt()!="r")&&C(t,i.fill,L)&&(m.fill="none",m.gradient=i.fill,L.rotate=!1)}if("fill-opacity"in i||"opacity"in i){var P=((+m["fill-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+a.getRGB(i.fill).o+1||2)-1);P=h(g(P,0),1),L.opacity=P,L.src&&(L.color="none")}l.appendChild(L);var Q=l.getElementsByTagName("stroke")&&l.getElementsByTagName("stroke")[0],T=!1;!Q&&(T=Q=F("stroke"));if(i.stroke&&i.stroke!="none"||i["stroke-width"]||i["stroke-opacity"]!=null||i["stroke-dasharray"]||i["stroke-miterlimit"]||i["stroke-linejoin"]||i["stroke-linecap"])Q.on=!0;(i.stroke=="none"||i.stroke===null||Q.on==null||i.stroke==0||i["stroke-width"]==0)&&(Q.on=!1);var U=a.getRGB(i.stroke);Q.on&&i.stroke&&(Q.color=U.hex),P=((+m["stroke-opacity"]+1||2)-1)*((+m.opacity+1||2)-1)*((+U.o+1||2)-1);var V=(d(i["stroke-width"])||1)*.75;P=h(g(P,0),1),i["stroke-width"]==null&&(V=m["stroke-width"]),i["stroke-width"]&&(Q.weight=V),V&&V<1&&(P*=V)&&(Q.weight=1),Q.opacity=P,i["stroke-linejoin"]&&(Q.joinstyle=i["stroke-linejoin"]||"miter"),Q.miterlimit=i["stroke-miterlimit"]||8,i["stroke-linecap"]&&(Q.endcap=i["stroke-linecap"]=="butt"?"flat":i["stroke-linecap"]=="square"?"square":"round");if(i["stroke-dasharray"]){var W={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};Q.dashstyle=W[b](i["stroke-dasharray"])?W[i["stroke-dasharray"]]:o}T&&l.appendChild(Q)}if(t.type=="text"){t.paper.canvas.style.display=o;var X=t.paper.span,Y=100,Z=m.font&&m.font.match(/\d+(?:\.\d*)?(?=px)/);p=X.style,m.font&&(p.font=m.font),m["font-family"]&&(p.fontFamily=m["font-family"]),m["font-weight"]&&(p.fontWeight=m["font-weight"]),m["font-style"]&&(p.fontStyle=m["font-style"]),Z=d(m["font-size"]||Z&&Z[0])||10,p.fontSize=Z*Y+"px",t.textpath.string&&(X.innerHTML=c(t.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var $=X.getBoundingClientRect();t.W=m.w=($.right-$.left)/Y,t.H=m.h=($.bottom-$.top)/Y,t.X=m.x,t.Y=m.y+t.H/2,("x"in i||"y"in i)&&(t.path.v=a.format("m{0},{1}l{2},{1}",f(m.x*u),f(m.y*u),f(m.x*u)+1));var _=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var ba=0,bb=_.length;ba<bb;ba++)if(_[ba]in i){t._.dirty=1;break}switch(m["text-anchor"]){case"start":t.textpath.style["v-text-align"]="left",t.bbx=t.W/2;break;case"end":t.textpath.style["v-text-align"]="right",t.bbx=-t.W/2;break;default:t.textpath.style["v-text-align"]="center",t.bbx=0}t.textpath.style["v-text-kern"]=!0}},C=function(b,f,g){b.attrs=b.attrs||{};var h=b.attrs,i=Math.pow,j,k,l="linear",m=".5 .5";b.attrs.gradient=f,f=c(f).replace(a._radial_gradient,function(a,b,c){l="radial",b&&c&&(b=d(b),c=d(c),i(b-.5,2)+i(c-.5,2)>.25&&(c=e.sqrt(.25-i(b-.5,2))*((c>.5)*2-1)+.5),m=b+n+c);return o}),f=f.split(/\s*\-\s*/);if(l=="linear"){var p=f.shift();p=-d(p);if(isNaN(p))return null}var q=a._parseDots(f);if(!q)return null;b=b.shape||b.node;if(q.length){b.removeChild(g),g.on=!0,g.method="none",g.color=q[0].color,g.color2=q[q.length-1].color;var r=[];for(var s=0,t=q.length;s<t;s++)q[s].offset&&r.push(q[s].offset+n+q[s].color);g.colors=r.length?r.join():"0% "+g.color,l=="radial"?(g.type="gradientTitle",g.focus="100%",g.focussize="0 0",g.focusposition=m,g.angle=0):(g.type="gradient",g.angle=(270-p)%360),b.appendChild(g)}return 1},D=function(b,c){this[0]=this.node=b,b.raphael=!0,this.id=a._oid++,b.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=c,this.matrix=a.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!c.bottom&&(c.bottom=this),this.prev=c.top,c.top&&(c.top.next=this),c.top=this,this.next=null},E=a.el;D.prototype=E,E.constructor=D,E.transform=function(b){if(b==null)return this._.transform;var d=this.paper._viewBoxShift,e=d?"s"+[d.scale,d.scale]+"-1-1t"+[d.dx,d.dy]:o,f;d&&(f=b=c(b).replace(/\.{3}|\u2026/g,this._.transform||o)),a._extractTransform(this,e+b);var g=this.matrix.clone(),h=this.skew,i=this.node,j,k=~c(this.attrs.fill).indexOf("-"),l=!c(this.attrs.fill).indexOf("url(");g.translate(-0.5,-0.5);if(l||k||this.type=="image"){h.matrix="1 0 0 1",h.offset="0 0",j=g.split();if(k&&j.noRotation||!j.isSimple){i.style.filter=g.toFilter();var m=this.getBBox(),p=this.getBBox(1),q=m.x-p.x,r=m.y-p.y;i.coordorigin=q*-u+n+r*-u,z(this,1,1,q,r,0)}else i.style.filter=o,z(this,j.scalex,j.scaley,j.dx,j.dy,j.rotate)}else i.style.filter=o,h.matrix=c(g),h.offset=g.offset();f&&(this._.transform=f);return this},E.rotate=function(a,b,e){if(this.removed)return this;if(a!=null){a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2])),a=d(a[0]),e==null&&(b=e);if(b==null||e==null){var f=this.getBBox(1);b=f.x+f.width/2,e=f.y+f.height/2}this._.dirtyT=1,this.transform(this._.transform.concat([["r",a,b,e]]));return this}},E.translate=function(a,b){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1])),a=d(a[0])||0,b=+b||0,this._.bbox&&(this._.bbox.x+=a,this._.bbox.y+=b),this.transform(this._.transform.concat([["t",a,b]]));return this},E.scale=function(a,b,e,f){if(this.removed)return this;a=c(a).split(k),a.length-1&&(b=d(a[1]),e=d(a[2]),f=d(a[3]),isNaN(e)&&(e=null),isNaN(f)&&(f=null)),a=d(a[0]),b==null&&(b=a),f==null&&(e=f);if(e==null||f==null)var g=this.getBBox(1);e=e==null?g.x+g.width/2:e,f=f==null?g.y+g.height/2:f,this.transform(this._.transform.concat([["s",a,b,e,f]])),this._.dirtyT=1;return this},E.hide=function(){!this.removed&&(this.node.style.display="none");return this},E.show=function(){!this.removed&&(this.node.style.display=o);return this},E._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},E.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),a.eve.unbind("raphael.*.*."+this.id),a._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;this.removed=!0}},E.attr=function(c,d){if(this.removed)return this;if(c==null){var e={};for(var f in this.attrs)this.attrs[b](f)&&(e[f]=this.attrs[f]);e.gradient&&e.fill=="none"&&(e.fill=e.gradient)&&delete e.gradient,e.transform=this._.transform;return e}if(d==null&&a.is(c,"string")){if(c==j&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var g=c.split(k),h={};for(var i=0,m=g.length;i<m;i++)c=g[i],c in this.attrs?h[c]=this.attrs[c]:a.is(this.paper.customAttributes[c],"function")?h[c]=this.paper.customAttributes[c].def:h[c]=a._availableAttrs[c];return m-1?h:h[g[0]]}if(this.attrs&&d==null&&a.is(c,"array")){h={};for(i=0,m=c.length;i<m;i++)h[c[i]]=this.attr(c[i]);return h}var n;d!=null&&(n={},n[c]=d),d==null&&a.is(c,"object")&&(n=c);for(var o in n)l("raphael.attr."+o+"."+this.id,this,n[o]);if(n){for(o in this.paper.customAttributes)if(this.paper.customAttributes[b](o)&&n[b](o)&&a.is(this.paper.customAttributes[o],"function")){var p=this.paper.customAttributes[o].apply(this,[].concat(n[o]));this.attrs[o]=n[o];for(var q in p)p[b](q)&&(n[q]=p[q])}n.text&&this.type=="text"&&(this.textpath.string=n.text),B(this,n)}return this},E.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&a._tofront(this,this.paper);return this},E.toBack=function(){if(this.removed)return this;this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),a._toback(this,this.paper));return this},E.insertAfter=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[b.length-1]),b.node.nextSibling?b.node.parentNode.insertBefore(this.node,b.node.nextSibling):b.node.parentNode.appendChild(this.node),a._insertafter(this,b,this.paper);return this},E.insertBefore=function(b){if(this.removed)return this;b.constructor==a.st.constructor&&(b=b[0]),b.node.parentNode.insertBefore(this.node,b.node),a._insertbefore(this,b,this.paper);return this},E.blur=function(b){var c=this.node.runtimeStyle,d=c.filter;d=d.replace(r,o),+b!==0?(this.attrs.blur=b,c.filter=d+n+m+".Blur(pixelradius="+(+b||1.5)+")",c.margin=a.format("-{0}px 0 0 -{0}px",f(+b||1.5))):(c.filter=d,c.margin=0,delete this.attrs.blur)},a._engine.path=function(a,b){var c=F("shape");c.style.cssText=t,c.coordsize=u+n+u,c.coordorigin=b.coordorigin;var d=new D(c,b),e={fill:"none",stroke:"#000"};a&&(e.path=a),d.type="path",d.path=[],d.Path=o,B(d,e),b.canvas.appendChild(c);var f=F("skew");f.on=!0,c.appendChild(f),d.skew=f,d.transform(o);return d},a._engine.rect=function(b,c,d,e,f,g){var h=a._rectPath(c,d,e,f,g),i=b.path(h),j=i.attrs;i.X=j.x=c,i.Y=j.y=d,i.W=j.width=e,i.H=j.height=f,j.r=g,j.path=h,i.type="rect";return i},a._engine.ellipse=function(a,b,c,d,e){var f=a.path(),g=f.attrs;f.X=b-d,f.Y=c-e,f.W=d*2,f.H=e*2,f.type="ellipse",B(f,{cx:b,cy:c,rx:d,ry:e});return f},a._engine.circle=function(a,b,c,d){var e=a.path(),f=e.attrs;e.X=b-d,e.Y=c-d,e.W=e.H=d*2,e.type="circle",B(e,{cx:b,cy:c,r:d});return e},a._engine.image=function(b,c,d,e,f,g){var h=a._rectPath(d,e,f,g),i=b.path(h).attr({stroke:"none"}),k=i.attrs,l=i.node,m=l.getElementsByTagName(j)[0];k.src=c,i.X=k.x=d,i.Y=k.y=e,i.W=k.width=f,i.H=k.height=g,k.path=h,i.type="image",m.parentNode==l&&l.removeChild(m),m.rotate=!0,m.src=c,m.type="tile",i._.fillpos=[d,e],i._.fillsize=[f,g],l.appendChild(m),z(i,1,1,0,0,0);return i},a._engine.text=function(b,d,e,g){var h=F("shape"),i=F("path"),j=F("textpath");d=d||0,e=e||0,g=g||"",i.v=a.format("m{0},{1}l{2},{1}",f(d*u),f(e*u),f(d*u)+1),i.textpathok=!0,j.string=c(g),j.on=!0,h.style.cssText=t,h.coordsize=u+n+u,h.coordorigin="0 0";var k=new D(h,b),l={fill:"#000",stroke:"none",font:a._availableAttrs.font,text:g};k.shape=h,k.path=i,k.textpath=j,k.type="text",k.attrs.text=c(g),k.attrs.x=d,k.attrs.y=e,k.attrs.w=1,k.attrs.h=1,B(k,l),h.appendChild(j),h.appendChild(i),b.canvas.appendChild(h);var m=F("skew");m.on=!0,h.appendChild(m),k.skew=m,k.transform(o);return k},a._engine.setSize=function(b,c){var d=this.canvas.style;this.width=b,this.height=c,b==+b&&(b+="px"),c==+c&&(c+="px"),d.width=b,d.height=c,d.clip="rect(0 "+b+" "+c+" 0)",this._viewBox&&a._engine.setViewBox.apply(this,this._viewBox);return this},a._engine.setViewBox=function(b,c,d,e,f){a.eve("raphael.setViewBox",this,this._viewBox,[b,c,d,e,f]);var h=this.width,i=this.height,j=1/g(d/h,e/i),k,l;f&&(k=i/e,l=h/d,d*k<h&&(b-=(h-d*k)/2/k),e*l<i&&(c-=(i-e*l)/2/l)),this._viewBox=[b,c,d,e,!!f],this._viewBoxShift={dx:-b,dy:-c,scale:j},this.forEach(function(a){a.transform("...")});return this};var F;a._engine.initWin=function(a){var b=a.document;b.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!b.namespaces.rvml&&b.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),F=function(a){return b.createElement("<rvml:"+a+' class="rvml">')}}catch(c){F=function(a){return b.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},a._engine.initWin(a._g.win),a._engine.create=function(){var b=a._getContainer.apply(0,arguments),c=b.container,d=b.height,e,f=b.width,g=b.x,h=b.y;if(!c)throw new Error("VML container not found.");var i=new a._Paper,j=i.canvas=a._g.doc.createElement("div"),k=j.style;g=g||0,h=h||0,f=f||512,d=d||342,i.width=f,i.height=d,f==+f&&(f+="px"),d==+d&&(d+="px"),i.coordsize=u*1e3+n+u*1e3,i.coordorigin="0 0",i.span=a._g.doc.createElement("span"),i.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",j.appendChild(i.span),k.cssText=a.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",f,d),c==1?(a._g.doc.body.appendChild(j),k.left=g+"px",k.top=h+"px",k.position="absolute"):c.firstChild?c.insertBefore(j,c.firstChild):c.appendChild(j),i.renderfix=function(){};return i},a.prototype.clear=function(){a.eve("raphael.clear",this),this.canvas.innerHTML=o,this.span=a._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},a.prototype.remove=function(){a.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var b in this)this[b]=typeof this[b]=="function"?a._removedFactory(b):null;return!0};var G=a.st;for(var H in E)E[b](H)&&!G[b](H)&&(G[H]=function(a){return function(){var b=arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(H))}(window.Raphael)
/**
 * JustGage - a handy JavaScript plugin for generating and animating nice & clean dashboard gauges.
 * Copyright (c) 2012 Bojan Djuricic - pindjur(at)gmail(dot)com | http://www.madcog.com
 * Licensed under MIT.
 * Date: 31/07/2012
 * @author Bojan Djuricic  (@Toorshia)
 * @version 1.0
 *
 * http://www.justgage.com
 */

JustGage = function(config) { 
  
  if (!config.id) {alert("Missing id parameter for gauge!"); return false;} 
  if (!document.getElementById(config.id)) {alert("No element with id: \""+config.id+"\" found!"); return false;} 
  
  // configurable parameters
  this.config = 
  {
    // id : string 
    // this is container element id
    id : config.id,
    
    // title : string
    // gauge title 
    title : (config.title) ? config.title : "Title",
    
    // titleFontColor : string
    // color of gauge title 
    titleFontColor : (config.titleFontColor) ? config.titleFontColor : "#999999",
    
    // value : int
    // value gauge is showing 
    value : (config.value) ? config.value : 0,
    
    // valueFontColor : string
    // color of label showing current value
    valueFontColor : (config.valueFontColor) ? config.valueFontColor : "#010101",
    
    // min : int
    // min value
    min : (config.min) ? config.min : 0,
    
    // max : int
    // max value
    max : (config.max) ? config.max : 100,
    
    // showMinMax : bool
    // hide or display min and max values
    showMinMax : (config.showMinMax != null) ? config.showMinMax : true,
    
    // gaugeWidthScale : float
    // width of the gauge element
    gaugeWidthScale : (config.gaugeWidthScale) ? config.gaugeWidthScale : 1.0,
    
    // gaugeColor : string
    // background color of gauge element 
    gaugeColor : (config.gaugeColor) ? config.gaugeColor : "#edebeb",
    
    // label : string
    // text to show below value
    label : (config.label) ? config.label : "",
    
    // showInnerShadow : bool
    // give gauge element small amount of inner shadow 
    showInnerShadow : (config.showInnerShadow != null) ? config.showInnerShadow : true,
    
    // shadowOpacity : int
    // 0 ~ 1
    shadowOpacity : (config.shadowOpacity) ? config.shadowOpacity : 0.2,
    
    // shadowSize: int
    // inner shadow size
    shadowSize : (config.shadowSize) ? config.shadowSize : 5,
    
    // shadowVerticalOffset : int
    // how much shadow is offset from top 
    shadowVerticalOffset : (config.shadowVerticalOffset) ? config.shadowVerticalOffset : 3,
    
    // levelColors : string[]
    // colors of indicator, from lower to upper, in RGB format 
    levelColors : (config.levelColors) ? config.levelColors : percentColors,
    
    // levelColorsGradient : bool
    // whether to use gradual color change for value, or sector-based
    levelColorsGradient : (config.levelColorsGradient != null) ? config.levelColorsGradient : true,
    
    // labelFontColor : string
    // color of label showing label under value
    labelFontColor : (config.labelFontColor) ? config.labelFontColor : "#b3b3b3",
    
    // startAnimationTime : int
    // length of initial animation 
    startAnimationTime : (config.startAnimationTime) ? config.startAnimationTime : 700,
    
    // startAnimationType : string
    // type of initial animation (linear, >, <,  <>, bounce) 
    startAnimationType : (config.startAnimationType) ? config.startAnimationType : ">",
    
    // refreshAnimationTime : int
    // length of refresh animation 
    refreshAnimationTime : (config.refreshAnimationTime) ? config.refreshAnimationTime : 700,
    
    // refreshAnimationType : string
    // type of refresh animation (linear, >, <,  <>, bounce) 
    refreshAnimationType : (config.refreshAnimationType) ? config.refreshAnimationType : ">"
  };
  
  // overflow values
  if (config.value > this.config.max) this.config.value = this.config.max; 
  if (config.value < this.config.min) this.config.value = this.config.min;
  this.originalValue = config.value;
  
  // canvas
  this.canvas = Raphael(this.config.id, "100%", "100%");
  
  // canvas dimensions
  //var canvasW = document.getElementById(this.config.id).clientWidth;
  //var canvasH = document.getElementById(this.config.id).clientHeight;
  var canvasW = getStyle(document.getElementById(this.config.id), "width").slice(0, -2) * 1;
  var canvasH = getStyle(document.getElementById(this.config.id), "height").slice(0, -2) * 1;
  
  // widget dimensions
  var widgetW, widgetH;
  if ((canvasW / canvasH) > 1.25) {
    widgetW = 1.25 * canvasH;
    widgetH = canvasH;
  } else {
    widgetW = canvasW;
    widgetH = canvasW / 1.25;
  }
  
  // delta 
  var dx = (canvasW - widgetW)/2;
  var dy = (canvasH - widgetH)/2;
  
  // title 
  var titleFontSize = ((widgetH / 8) > 10) ? (widgetH / 10) : 10;
  var titleX = dx + widgetW / 2;
  var titleY = dy + widgetH / 9;
  
  // value 
  var valueFontSize = ((widgetH / 6.4) > 16) ? (widgetH / 6.4) : 16;
  var valueX = dx + widgetW / 2;
  var valueY = dy + widgetH / 1.4;
  
  // label 
  var labelFontSize = ((widgetH / 16) > 10) ? (widgetH / 16) : 10;
  var labelX = dx + widgetW / 2;
  //var labelY = dy + widgetH / 1.126760563380282;
  var labelY = valueY + valueFontSize / 2 + 6;
  
  // min 
  var minFontSize = ((widgetH / 16) > 10) ? (widgetH / 16) : 10;
  var minX = dx + (widgetW / 10) + (widgetW / 6.666666666666667 * this.config.gaugeWidthScale) / 2 ;
  var minY = dy + widgetH / 1.126760563380282;
  
  // max 
  var maxFontSize = ((widgetH / 16) > 10) ? (widgetH / 16) : 10;
  var maxX = dx + widgetW - (widgetW / 10) - (widgetW / 6.666666666666667 * this.config.gaugeWidthScale) / 2 ;
  var maxY = dy + widgetH / 1.126760563380282;
  
  // parameters
  this.params  = {
    canvasW : canvasW,
    canvasH : canvasH,
    widgetW : widgetW,
    widgetH : widgetH,
    dx : dx,
    dy : dy,
    titleFontSize : titleFontSize,
    titleX : titleX,
    titleY : titleY,
    valueFontSize : valueFontSize,
    valueX : valueX,
    valueY : valueY,
    labelFontSize : labelFontSize,
    labelX : labelX,
    labelY : labelY,
    minFontSize : minFontSize,
    minX : minX,
    minY : minY,
    maxFontSize : maxFontSize,
    maxX : maxX,
    maxY : maxY
  };
  
  // pki - custom attribute for generating gauge paths
  this.canvas.customAttributes.pki = function (value, min, max, w, h, dx, dy, gws) {
    
       var alpha = (1 - (value - min) / (max - min)) * Math.PI ,
          Ro = w / 2 - w / 10,
          Ri = Ro - w / 6.666666666666667 * gws,
          
          Cx = w / 2 + dx,
          Cy = h / 1.25 + dy,
          
          Xo = w / 2 + dx + Ro * Math.cos(alpha),
          Yo = h - (h - Cy) + dy - Ro * Math.sin(alpha),
          Xi = w / 2 + dx + Ri * Math.cos(alpha),
          Yi = h - (h - Cy) + dy - Ri * Math.sin(alpha),
          path;
    
      path += "M" + (Cx - Ri) + "," + Cy + " ";
      path += "L" + (Cx - Ro) + "," + Cy + " ";
      path += "A" + Ro + "," + Ro + " 0 0,1 " + Xo + "," + Yo + " ";
      path += "L" + Xi + "," + Yi + " ";
      path += "A" + Ri + "," + Ri + " 0 0,0 " + (Cx - Ri) + "," + Cy + " ";
      path += "z ";
      return { path: path };
  }  
  
  // gauge
  this.gauge = this.canvas.path().attr({
    "stroke": "none",
    "fill": this.config.gaugeColor,   
    pki: [this.config.max, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale]
  });
  this.gauge.id = this.config.id+"-gauge";
  
  // level
  this.level = this.canvas.path().attr({
    "stroke": "none",
    "fill": getColorForPercentage((this.config.value - this.config.min) / (this.config.max - this.config.min), this.config.levelColors, this.config.levelColorsGradient),  
    pki: [this.config.min, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale]
  });
  this.level.id = this.config.id+"-level";
  
  // title
  this.txtTitle = this.canvas.text(this.params.titleX, this.params.titleY, this.config.title);
  this.txtTitle. attr({
    "font-size":this.params.titleFontSize,
    "font-weight":"bold",
    "font-family":"Arial",
    "fill":this.config.titleFontColor,
    "fill-opacity":"1"         
  });
  this.txtTitle.id = this.config.id+"-txttitle";
  
  // value
  this.txtValue = this.canvas.text(this.params.valueX, this.params.valueY, this.originalValue);
  this.txtValue. attr({
    "font-size":this.params.valueFontSize,
    "font-weight":"bold",
    "font-family":"Arial",
    "fill":this.config.valueFontColor,
    "fill-opacity":"0"          
  });
  this.txtValue.id = this.config.id+"-txtvalue";
  
  // label
  this.txtLabel = this.canvas.text(this.params.labelX, this.params.labelY, this.config.label);
  this.txtLabel. attr({
    "font-size":this.params.labelFontSize,
    "font-weight":"normal",
    "font-family":"Arial",
    "fill":this.config.labelFontColor,   
    "fill-opacity":"0"
  });
  this.txtLabel.id = this.config.id+"-txtlabel";
  
  // min
  this.txtMin = this.canvas.text(this.params.minX, this.params.minY, this.config.min);
  this.txtMin. attr({
    "font-size":this.params.minFontSize,
    "font-weight":"normal",
    "font-family":"Arial",
    "fill":this.config.labelFontColor,   
    "fill-opacity": (this.config.showMinMax == true)? "1" : "0"
  });
  this.txtMin.id = this.config.id+"-txtmin";
  
  // max
  this.txtMax = this.canvas.text(this.params.maxX, this.params.maxY, this.config.max);
  this.txtMax. attr({
    "font-size":this.params.maxFontSize,
    "font-weight":"normal",
    "font-family":"Arial",
    "fill":this.config.labelFontColor,   
    "fill-opacity": (this.config.showMinMax == true)? "1" : "0"
  });
  this.txtMax.id = this.config.id+"-txtmax";
  
  var defs = this.canvas.canvas.childNodes[1];
  var svg = "http://www.w3.org/2000/svg";
  
  
  
  if (ie < 9) {
    onCreateElementNsReady(function() {
      this.generateShadow();
    });  
  } else {
    this.generateShadow(svg, defs);
  }
  
  // animate 
  this.level.animate({pki: [this.config.value, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale]},  this.config.startAnimationTime, this.config.startAnimationType);
  
  this.txtValue.animate({"fill-opacity":"1"}, this.config.startAnimationTime, this.config.startAnimationType); 
  this.txtLabel.animate({"fill-opacity":"1"}, this.config.startAnimationTime, this.config.startAnimationType);  
};

// refresh gauge level
JustGage.prototype.refresh = function(val) {
  // overflow values
  originalVal = val;
  if (val > this.config.max) {val = this.config.max;}
  if (val < this.config.min) {val = this.config.min;}
    
  var color = getColorForPercentage((val - this.config.min) / (this.config.max - this.config.min), this.config.levelColors, this.config.levelColorsGradient);
  this.canvas.getById(this.config.id+"-txtvalue").attr({"text":originalVal});
  this.canvas.getById(this.config.id+"-level").animate({pki: [val, this.config.min, this.config.max, this.params.widgetW, this.params.widgetH,  this.params.dx, this.params.dy, this.config.gaugeWidthScale], "fill":color},  this.config.refreshAnimationTime, this.config.refreshAnimationType);
};

var percentColors = [
  "#a9d70b",
  "#f9c802",
  "#ff0000"
]

JustGage.prototype.generateShadow = function(svg, defs) {
    // FILTER
    var gaussFilter=document.createElementNS(svg,"filter");
    gaussFilter.setAttribute("id", this.config.id + "-inner-shadow");
    defs.appendChild(gaussFilter);
    
    // offset
    var feOffset = document.createElementNS(svg,"feOffset");
    feOffset.setAttribute("dx", 0);
    feOffset.setAttribute("dy", this.config.shadowVerticalOffset);
    gaussFilter.appendChild(feOffset);
    
    // blur
    var feGaussianBlur = document.createElementNS(svg,"feGaussianBlur");
    feGaussianBlur.setAttribute("result","offset-blur");
    feGaussianBlur.setAttribute("stdDeviation", this.config.shadowSize);
    gaussFilter.appendChild(feGaussianBlur);
    
    // composite 1
    var feComposite1 = document.createElementNS(svg,"feComposite");
    feComposite1.setAttribute("operator","out");
    feComposite1.setAttribute("in", "SourceGraphic");
    feComposite1.setAttribute("in2","offset-blur");
    feComposite1.setAttribute("result","inverse");
    gaussFilter.appendChild(feComposite1);
    
    // flood
    var feFlood = document.createElementNS(svg,"feFlood");
    feFlood.setAttribute("flood-color","black");
    feFlood.setAttribute("flood-opacity", this.config.shadowOpacity);
    feFlood.setAttribute("result","color");
    gaussFilter.appendChild(feFlood);
    
    // composite 2
    var feComposite2 = document.createElementNS(svg,"feComposite");
    feComposite2.setAttribute("operator","in");
    feComposite2.setAttribute("in", "color");
    feComposite2.setAttribute("in2","inverse");
    feComposite2.setAttribute("result","shadow");
    gaussFilter.appendChild(feComposite2);
    
    // composite 3
    var feComposite3 = document.createElementNS(svg,"feComposite");
    feComposite3.setAttribute("operator","over");
    feComposite3.setAttribute("in", "shadow");
    feComposite3.setAttribute("in2","SourceGraphic");
    gaussFilter.appendChild(feComposite3);

    // set shadow
    if (this.config.showInnerShadow == true) {
      this.canvas.canvas.childNodes[2].setAttribute("filter", "url(#" + this.config.id + "-inner-shadow)");
      this.canvas.canvas.childNodes[3].setAttribute("filter", "url(#" + this.config.id + "-inner-shadow)");
    }
}

var getColorForPercentage = function(pct, col, grad) {
    
    var no = col.length;
    if (no === 1) return col[0];
    var inc = (grad) ? (1 / (no - 1)) : (1 / no);
    var colors = new Array();
    for (var i = 0; i < col.length; i++) {
      var percentage = (grad) ? (inc * i) : (inc * (i + 1));
      var rval = parseInt((cutHex(col[i])).substring(0,2),16);
      var gval = parseInt((cutHex(col[i])).substring(2,4),16);
      var bval = parseInt((cutHex(col[i])).substring(4,6),16);
      colors[i] = { pct: percentage, color: { r: rval, g: gval, b: bval  } };
    }
        
    if(pct == 0) return 'rgb(' + [colors[0].color.r, colors[0].color.g, colors[0].color.b].join(',') + ')';
      for (var i = 0; i < colors.length; i++) {
          if (pct <= colors[i].pct) {
            if (grad == true) {
              var lower = colors[i - 1];
              var upper = colors[i];
              var range = upper.pct - lower.pct;
              var rangePct = (pct - lower.pct) / range;
              var pctLower = 1 - rangePct;
              var pctUpper = rangePct;
              var color = {
                  r: Math.floor(lower.color.r * pctLower + upper.color.r * pctUpper),
                  g: Math.floor(lower.color.g * pctLower + upper.color.g * pctUpper),
                  b: Math.floor(lower.color.b * pctLower + upper.color.b * pctUpper)
              };
              return 'rgb(' + [color.r, color.g, color.b].join(',') + ')';
            } else {
              return 'rgb(' + [colors[i].color.r, colors[i].color.g, colors[i].color.b].join(',') + ')'; 
            }
          }
      }
} 

function getRandomInt (min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}    

function cutHex(str) {return (str.charAt(0)=="#") ? str.substring(1,7):str}

function getStyle(oElm, strCssRule){
	var strValue = "";
	if(document.defaultView && document.defaultView.getComputedStyle){
		strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
	}
	else if(oElm.currentStyle){
		strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){
			return p1.toUpperCase();
		});
		strValue = oElm.currentStyle[strCssRule];
	}
	return strValue;
}

 function onCreateElementNsReady(func) {
  if (document.createElementNS != undefined) {
    func();
  } else {
    setTimeout(function() { onCreateElementNsReady(func); }, 100);
  }
}

// ----------------------------------------------------------
// A short snippet for detecting versions of IE in JavaScript
// without resorting to user-agent sniffing
// ----------------------------------------------------------
// If you're not in IE (or IE version is less than 5) then:
// ie === undefined
// If you're in IE (>=5) then you can determine which version:
// ie === 7; // IE7
// Thus, to detect IE:
// if (ie) {}
// And to detect the version:
// ie === 6 // IE6
// ie > 7 // IE8, IE9 ...
// ie < 9 // Anything less than IE9
// ----------------------------------------------------------

// UPDATE: Now using Live NodeList idea from @jdalton

var ie = (function(){

    var undef,
        v = 3,
        div = document.createElement('div'),
        all = div.getElementsByTagName('i');

    while (
        div.innerHTML = '<!--[if gt IE ' + (++v) + ']><i></i><![endif]-->',
        all[0]
    );

    return v > 4 ? v : undef;

}());
//! moment.js
//! version : 2.8.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function d(a){rb.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function e(a,b){var c=!0;return l(function(){return c&&(d(a),c=!1),b.apply(this,arguments)},b)}function f(a,b){nc[a]||(d(b),nc[a]=!0)}function g(a,b){return function(c){return o(a.call(this,c),b)}}function h(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function i(){}function j(a,b){b!==!1&&E(a),m(this,a),this._d=new Date(+a._d)}function k(a){var b=x(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=rb.localeData(),this._bubble()}function l(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fb.length>0)for(c in Fb)d=Fb[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(a){return 0>a?Math.ceil(a):Math.floor(a)}function o(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function p(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function q(a,b){var c;return b=J(b,a),a.isBefore(b)?c=p(a,b):(c=p(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function r(a,b){return function(c,d){var e,g;return null===d||isNaN(+d)||(f(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),g=c,c=d,d=g),c="string"==typeof c?+c:c,e=rb.duration(c,d),s(this,e,a),this}}function s(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&lb(a,"Date",kb(a,"Date")+f*c),g&&jb(a,kb(a,"Month")+g*c),d&&rb.updateOffset(a,f||g)}function t(a){return"[object Array]"===Object.prototype.toString.call(a)}function u(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function v(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&z(a[d])!==z(b[d]))&&g++;return g+f}function w(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=gc[a]||hc[b]||b}return a}function x(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=w(c),b&&(d[b]=a[c]));return d}function y(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}rb[b]=function(e,f){var g,h,i=rb._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=rb().utc().set(d,a);return i.call(rb._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function z(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function A(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function B(a,b,c){return fb(rb([a,11,31+b-c]),b,c).week}function C(a){return D(a)?366:365}function D(a){return a%4===0&&a%100!==0||a%400===0}function E(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[yb]<0||a._a[yb]>11?yb:a._a[zb]<1||a._a[zb]>A(a._a[xb],a._a[yb])?zb:a._a[Ab]<0||a._a[Ab]>23?Ab:a._a[Bb]<0||a._a[Bb]>59?Bb:a._a[Cb]<0||a._a[Cb]>59?Cb:a._a[Db]<0||a._a[Db]>999?Db:-1,a._pf._overflowDayOfYear&&(xb>b||b>zb)&&(b=zb),a._pf.overflow=b)}function F(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function G(a){return a?a.toLowerCase().replace("_","-"):a}function H(a){for(var b,c,d,e,f=0;f<a.length;){for(e=G(a[f]).split("-"),b=e.length,c=G(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=I(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&v(e,c,!0)>=b-1)break;b--}f++}return null}function I(a){var b=null;if(!Eb[a]&&Gb)try{b=rb.locale(),require("./locale/"+a),rb.locale(b)}catch(c){}return Eb[a]}function J(a,b){return b._isUTC?rb(a).zone(b._offset||0):rb(a).local()}function K(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function L(a){var b,c,d=a.match(Kb);for(b=0,c=d.length;c>b;b++)d[b]=mc[d[b]]?mc[d[b]]:K(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function M(a,b){return a.isValid()?(b=N(b,a.localeData()),ic[b]||(ic[b]=L(b)),ic[b](a)):a.localeData().invalidDate()}function N(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Lb.lastIndex=0;d>=0&&Lb.test(a);)a=a.replace(Lb,c),Lb.lastIndex=0,d-=1;return a}function O(a,b){var c,d=b._strict;switch(a){case"Q":return Wb;case"DDDD":return Yb;case"YYYY":case"GGGG":case"gggg":return d?Zb:Ob;case"Y":case"G":case"g":return _b;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?$b:Pb;case"S":if(d)return Wb;case"SS":if(d)return Xb;case"SSS":if(d)return Yb;case"DDD":return Nb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Rb;case"a":case"A":return b._locale._meridiemParse;case"X":return Ub;case"Z":case"ZZ":return Sb;case"T":return Tb;case"SSSS":return Qb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Xb:Mb;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Mb;case"Do":return Vb;default:return c=new RegExp(X(W(a.replace("\\","")),"i"))}}function P(a){a=a||"";var b=a.match(Sb)||[],c=b[b.length-1]||[],d=(c+"").match(ec)||["-",0,0],e=+(60*d[1])+z(d[2]);return"+"===d[0]?-e:e}function Q(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[yb]=3*(z(b)-1));break;case"M":case"MM":null!=b&&(e[yb]=z(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[yb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[zb]=z(b));break;case"Do":null!=b&&(e[zb]=z(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=z(b));break;case"YY":e[xb]=rb.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[xb]=z(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Ab]=z(b);break;case"m":case"mm":e[Bb]=z(b);break;case"s":case"ss":e[Cb]=z(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Db]=z(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=P(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=z(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=rb.parseTwoDigitYear(b)}}function R(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[xb],fb(rb(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[xb],fb(rb(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=gb(d,e,f,h,g),a._a[xb]=i.year,a._dayOfYear=i.dayOfYear}function S(a){var c,d,e,f,g=[];if(!a._d){for(e=U(a),a._w&&null==a._a[zb]&&null==a._a[yb]&&R(a),a._dayOfYear&&(f=b(a._a[xb],e[xb]),a._dayOfYear>C(f)&&(a._pf._overflowDayOfYear=!0),d=bb(f,0,a._dayOfYear),a._a[yb]=d.getUTCMonth(),a._a[zb]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?bb:ab).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function T(a){var b;a._d||(b=x(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],S(a))}function U(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function V(a){if(a._f===rb.ISO_8601)return void Z(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=N(a._f,a._locale).match(Kb)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(O(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),mc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),Q(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Ab]<12&&(a._a[Ab]+=12),a._isPm===!1&&12===a._a[Ab]&&(a._a[Ab]=0),S(a),E(a)}function W(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function X(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Y(a){var b,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,b=m({},a),b._pf=c(),b._f=a._f[f],V(b),F(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,d=b));l(a,d||b)}function Z(a){var b,c,d=a._i,e=ac.exec(d);if(e){for(a._pf.iso=!0,b=0,c=cc.length;c>b;b++)if(cc[b][1].exec(d)){a._f=cc[b][0]+(e[6]||" ");break}for(b=0,c=dc.length;c>b;b++)if(dc[b][1].exec(d)){a._f+=dc[b][0];break}d.match(Sb)&&(a._f+="Z"),V(a)}else a._isValid=!1}function $(a){Z(a),a._isValid===!1&&(delete a._isValid,rb.createFromInputFallback(a))}function _(b){var c,d=b._i;d===a?b._d=new Date:u(d)?b._d=new Date(+d):null!==(c=Hb.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?$(b):t(d)?(b._a=d.slice(0),S(b)):"object"==typeof d?T(b):"number"==typeof d?b._d=new Date(d):rb.createFromInputFallback(b)}function ab(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function bb(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function cb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function db(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function eb(a,b,c){var d=rb.duration(a).abs(),e=wb(d.as("s")),f=wb(d.as("m")),g=wb(d.as("h")),h=wb(d.as("d")),i=wb(d.as("M")),j=wb(d.as("y")),k=e<jc.s&&["s",e]||1===f&&["m"]||f<jc.m&&["mm",f]||1===g&&["h"]||g<jc.h&&["hh",g]||1===h&&["d"]||h<jc.d&&["dd",h]||1===i&&["M"]||i<jc.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,db.apply({},k)}function fb(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=rb(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function gb(a,b,c,d,e){var f,g,h=bb(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:C(a-1)+g}}function hb(b){var c=b._i,d=b._f;return b._locale=b._locale||rb.localeData(b._l),null===c||d===a&&""===c?rb.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),rb.isMoment(c)?new j(c,!0):(d?t(d)?Y(b):V(b):_(b),new j(b)))}function ib(a,b){var c,d;if(1===b.length&&t(b[0])&&(b=b[0]),!b.length)return rb();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function jb(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),A(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function kb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function lb(a,b,c){return"Month"===b?jb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function mb(a,b){return function(c){return null!=c?(lb(this,a,c),rb.updateOffset(this,b),this):kb(this,a)}}function nb(a){return 400*a/146097}function ob(a){return 146097*a/400}function pb(a){rb.duration.fn[a]=function(){return this._data[a]}}function qb(a){"undefined"==typeof ender&&(sb=vb.moment,vb.moment=a?e("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",rb):rb)}for(var rb,sb,tb,ub="2.8.1",vb="undefined"!=typeof global?global:this,wb=Math.round,xb=0,yb=1,zb=2,Ab=3,Bb=4,Cb=5,Db=6,Eb={},Fb=[],Gb="undefined"!=typeof module&&module.exports,Hb=/^\/?Date\((\-?\d+)/i,Ib=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Jb=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Kb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Lb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Mb=/\d\d?/,Nb=/\d{1,3}/,Ob=/\d{1,4}/,Pb=/[+\-]?\d{1,6}/,Qb=/\d+/,Rb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Sb=/Z|[\+\-]\d\d:?\d\d/gi,Tb=/T/i,Ub=/[\+\-]?\d+(\.\d{1,3})?/,Vb=/\d{1,2}/,Wb=/\d/,Xb=/\d\d/,Yb=/\d{3}/,Zb=/\d{4}/,$b=/[+-]?\d{6}/,_b=/[+-]?\d+/,ac=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,bc="YYYY-MM-DDTHH:mm:ssZ",cc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],dc=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],ec=/([\+\-]|\d\d)/gi,fc=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),gc={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},hc={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ic={},jc={s:45,m:45,h:22,d:26,M:11},kc="DDD w W M D d".split(" "),lc="M D H h m s w W".split(" "),mc={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return o(this.year()%100,2)},YYYY:function(){return o(this.year(),4)},YYYYY:function(){return o(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+o(Math.abs(a),6)},gg:function(){return o(this.weekYear()%100,2)},gggg:function(){return o(this.weekYear(),4)},ggggg:function(){return o(this.weekYear(),5)},GG:function(){return o(this.isoWeekYear()%100,2)},GGGG:function(){return o(this.isoWeekYear(),4)},GGGGG:function(){return o(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return z(this.milliseconds()/100)},SS:function(){return o(z(this.milliseconds()/10),2)},SSS:function(){return o(this.milliseconds(),3)},SSSS:function(){return o(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+":"+o(z(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+o(z(a/60),2)+o(z(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},nc={},oc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];kc.length;)tb=kc.pop(),mc[tb+"o"]=h(mc[tb],tb);for(;lc.length;)tb=lc.pop(),mc[tb+tb]=g(mc[tb],2);mc.DDDD=g(mc.DDD,3),l(i.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=rb.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=rb([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return fb(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),rb=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=c(),hb(g)},rb.suppressDeprecationWarnings=!1,rb.createFromInputFallback=e("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),rb.min=function(){var a=[].slice.call(arguments,0);return ib("isBefore",a)},rb.max=function(){var a=[].slice.call(arguments,0);return ib("isAfter",a)},rb.utc=function(b,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=d,g._strict=f,g._pf=c(),hb(g).utc()},rb.unix=function(a){return rb(1e3*a)},rb.duration=function(a,b){var c,d,e,f,g=a,h=null;return rb.isDuration(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=Ib.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:z(h[zb])*c,h:z(h[Ab])*c,m:z(h[Bb])*c,s:z(h[Cb])*c,ms:z(h[Db])*c}):(h=Jb.exec(a))?(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},g={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}):"object"==typeof g&&("from"in g||"to"in g)&&(f=q(rb(g.from),rb(g.to)),g={},g.ms=f.milliseconds,g.M=f.months),d=new k(g),rb.isDuration(a)&&a.hasOwnProperty("_locale")&&(d._locale=a._locale),d},rb.version=ub,rb.defaultFormat=bc,rb.ISO_8601=function(){},rb.momentProperties=Fb,rb.updateOffset=function(){},rb.relativeTimeThreshold=function(b,c){return jc[b]===a?!1:c===a?jc[b]:(jc[b]=c,!0)},rb.lang=e("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return rb.locale(a,b)}),rb.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?rb.defineLocale(a,b):rb.localeData(a),c&&(rb.duration._locale=rb._locale=c)),rb._locale._abbr},rb.defineLocale=function(a,b){return null!==b?(b.abbr=a,Eb[a]||(Eb[a]=new i),Eb[a].set(b),rb.locale(a),Eb[a]):(delete Eb[a],null)},rb.langData=e("moment.langData is deprecated. Use moment.localeData instead.",function(a){return rb.localeData(a)}),rb.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return rb._locale;if(!t(a)){if(b=I(a))return b;a=[a]}return H(a)},rb.isMoment=function(a){return a instanceof j||null!=a&&a.hasOwnProperty("_isAMomentObject")},rb.isDuration=function(a){return a instanceof k};for(tb=oc.length-1;tb>=0;--tb)y(oc[tb]);rb.normalizeUnits=function(a){return w(a)},rb.invalid=function(a){var b=rb.utc(0/0);return null!=a?l(b._pf,a):b._pf.userInvalidated=!0,b},rb.parseZone=function(){return rb.apply(null,arguments).parseZone()},rb.parseTwoDigitYear=function(a){return z(a)+(z(a)>68?1900:2e3)},l(rb.fn=j.prototype,{clone:function(){return rb(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=rb(this).utc();return 0<a.year()&&a.year()<=9999?M(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):M(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return F(this)},isDSTShifted:function(){return this._a?this.isValid()&&v(this._a,(this._isUTC?rb.utc(this._a):rb(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(a){var b=M(this,a||rb.defaultFormat);return this.localeData().postformat(b)},add:r(1,"add"),subtract:r(-1,"subtract"),diff:function(a,b,c){var d,e,f=J(a,this),g=6e4*(this.zone()-f.zone());return b=w(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-rb(this).startOf("month")-(f-rb(f).startOf("month")))/d,e-=6e4*(this.zone()-rb(this).startOf("month").zone()-(f.zone()-rb(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:n(e)},from:function(a,b){return rb.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(rb(),a)},calendar:function(a){var b=a||rb(),c=J(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return D(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=cb(a,this.localeData()),this.add(a-b,"d")):b},month:mb("Month",!0),startOf:function(a){switch(a=w(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=w(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+rb(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+rb(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+J(a,this).startOf(b)},min:e("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),this>a?this:a}),max:e("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=rb.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._d.getTimezoneOffset():("string"==typeof a&&(a=P(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._d.getTimezoneOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?s(this,rb.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,rb.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?rb(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return A(this.year(),this.month())},dayOfYear:function(a){var b=wb((rb(this).startOf("day")-rb(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=fb(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=fb(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=fb(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return B(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return B(this.year(),a.dow,a.doy)},get:function(a){return a=w(a),this[a]()},set:function(a,b){return a=w(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){return b===a?this._locale._abbr:(this._locale=rb.localeData(b),this)},lang:e("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():(this._locale=rb.localeData(b),this)}),localeData:function(){return this._locale}}),rb.fn.millisecond=rb.fn.milliseconds=mb("Milliseconds",!1),rb.fn.second=rb.fn.seconds=mb("Seconds",!1),rb.fn.minute=rb.fn.minutes=mb("Minutes",!1),rb.fn.hour=rb.fn.hours=mb("Hours",!0),rb.fn.date=mb("Date",!0),rb.fn.dates=e("dates accessor is deprecated. Use date instead.",mb("Date",!0)),rb.fn.year=mb("FullYear",!0),rb.fn.years=e("years accessor is deprecated. Use year instead.",mb("FullYear",!0)),rb.fn.days=rb.fn.day,rb.fn.months=rb.fn.month,rb.fn.weeks=rb.fn.week,rb.fn.isoWeeks=rb.fn.isoWeek,rb.fn.quarters=rb.fn.quarter,rb.fn.toJSON=rb.fn.toISOString,l(rb.duration.fn=k.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=n(d/1e3),g.seconds=a%60,b=n(a/60),g.minutes=b%60,c=n(b/60),g.hours=c%24,e+=n(c/24),h=n(nb(e)),e-=n(ob(h)),f+=n(e/30),e%=30,h+=n(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*z(this._months/12)},humanize:function(a){var b=eb(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=rb.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=rb.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=w(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=w(a),b=this._days+this._milliseconds/864e5,"month"===a||"year"===a)return c=this._months+12*nb(b),"month"===a?c:c/12;switch(b+=ob(this._months/12),a){case"week":return b/7;case"day":return b;case"hour":return 24*b;case"minute":return 24*b*60;case"second":return 24*b*60*60;case"millisecond":return 24*b*60*60*1e3;default:throw new Error("Unknown unit "+a)}},lang:rb.fn.lang,locale:rb.fn.locale,toIsoString:e("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}});for(tb in fc)fc.hasOwnProperty(tb)&&pb(tb.toLowerCase());rb.duration.fn.asMilliseconds=function(){return this.as("ms")},rb.duration.fn.asSeconds=function(){return this.as("s")},rb.duration.fn.asMinutes=function(){return this.as("m")},rb.duration.fn.asHours=function(){return this.as("h")},rb.duration.fn.asDays=function(){return this.as("d")},rb.duration.fn.asWeeks=function(){return this.as("weeks")},rb.duration.fn.asMonths=function(){return this.as("M")},rb.duration.fn.asYears=function(){return this.as("y")},rb.locale("en",{ordinal:function(a){var b=a%10,c=1===z(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Gb?module.exports=rb:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(vb.moment=sb),rb}),qb(!0)):qb()}).call(this);
/**
* @version: 1.3.13
* @author: Dan Grossman http://www.dangrossman.info/
* @date: 2014-09-04
* @copyright: Copyright (c) 2012-2014 Dan Grossman. All rights reserved.
* @license: Licensed under Apache License v2.0. See http://www.apache.org/licenses/LICENSE-2.0
* @website: http://www.improvely.com/
*/

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define(['moment', 'jquery', 'exports'], function(momentjs, $, exports) {
      root.daterangepicker = factory(root, exports, momentjs, $);
    });

  } else if (typeof exports !== 'undefined') {
    var momentjs = require('moment');
    var jQuery;
    try {
      jQuery = require('jquery');
    } catch (err) {
      jQuery = window.jQuery;
      if (!jQuery) throw new Error('jQuery dependency not found');
    }

    factory(root, exports, momentjs, jQuery);

  // Finally, as a browser global.
  } else {
    root.daterangepicker = factory(root, {}, root.moment, (root.jQuery || root.Zepto || root.ender || root.$));
  }

}(this, function(root, daterangepicker, moment, $) {

    var DateRangePicker = function (element, options, cb) {

        // by default, the daterangepicker element is placed at the bottom of HTML body
        this.parentEl = 'body';

        //element that triggered the date range picker
        this.element = $(element);

        //tracks visible state
        this.isShowing = false;

        //create the picker HTML object
        var DRPTemplate = '<div class="daterangepicker dropdown-menu">' +
                '<div class="calendar left"></div>' +
                '<div class="calendar right"></div>' +
                '<div class="ranges">' +
                  '<div class="range_inputs">' +
                    '<div class="daterangepicker_start_input">' +
                      '<label for="daterangepicker_start"></label>' +
                      '<input class="input-mini" type="text" name="daterangepicker_start" value="" />' +
                    '</div>' +
                    '<div class="daterangepicker_end_input">' +
                      '<label for="daterangepicker_end"></label>' +
                      '<input class="input-mini" type="text" name="daterangepicker_end" value="" />' +
                    '</div>' +
                    '<button class="applyBtn" disabled="disabled"></button>&nbsp;' +
                    '<button class="cancelBtn"></button>' +
                  '</div>' +
                '</div>' +
              '</div>';

        //custom options
        if (typeof options !== 'object' || options === null)
            options = {};

        this.parentEl = (typeof options === 'object' && options.parentEl && $(options.parentEl).length) ? $(options.parentEl) : $(this.parentEl);
        this.container = $(DRPTemplate).appendTo(this.parentEl);

        this.setOptions(options, cb);

        //apply CSS classes and labels to buttons
        var c = this.container;
        $.each(this.buttonClasses, function (idx, val) {
            c.find('button').addClass(val);
        });
        this.container.find('.daterangepicker_start_input label').html(this.locale.fromLabel);
        this.container.find('.daterangepicker_end_input label').html(this.locale.toLabel);
        if (this.applyClass.length)
            this.container.find('.applyBtn').addClass(this.applyClass);
        if (this.cancelClass.length)
            this.container.find('.cancelBtn').addClass(this.cancelClass);
        this.container.find('.applyBtn').html(this.locale.applyLabel);
        this.container.find('.cancelBtn').html(this.locale.cancelLabel);

        //event listeners

        this.container.find('.calendar')
            .on('click.daterangepicker', '.prev', $.proxy(this.clickPrev, this))
            .on('click.daterangepicker', '.next', $.proxy(this.clickNext, this))
            .on('click.daterangepicker', 'td.available', $.proxy(this.clickDate, this))
            .on('mouseenter.daterangepicker', 'td.available', $.proxy(this.hoverDate, this))
            .on('mouseleave.daterangepicker', 'td.available', $.proxy(this.updateFormInputs, this))
            .on('change.daterangepicker', 'select.yearselect', $.proxy(this.updateMonthYear, this))
            .on('change.daterangepicker', 'select.monthselect', $.proxy(this.updateMonthYear, this))
            .on('change.daterangepicker', 'select.hourselect,select.minuteselect,select.ampmselect', $.proxy(this.updateTime, this));

        this.container.find('.ranges')
            .on('click.daterangepicker', 'button.applyBtn', $.proxy(this.clickApply, this))
            .on('click.daterangepicker', 'button.cancelBtn', $.proxy(this.clickCancel, this))
            .on('click.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.showCalendars, this))
            .on('change.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.inputsChanged, this))
            .on('keydown.daterangepicker', '.daterangepicker_start_input,.daterangepicker_end_input', $.proxy(this.inputsKeydown, this))
            .on('click.daterangepicker', 'li', $.proxy(this.clickRange, this))
            .on('mouseenter.daterangepicker', 'li', $.proxy(this.enterRange, this))
            .on('mouseleave.daterangepicker', 'li', $.proxy(this.updateFormInputs, this));

        if (this.element.is('input')) {
            this.element.on({
                'click.daterangepicker': $.proxy(this.show, this),
                'focus.daterangepicker': $.proxy(this.show, this),
                'keyup.daterangepicker': $.proxy(this.updateFromControl, this)
            });
        } else {
            this.element.on('click.daterangepicker', $.proxy(this.toggle, this));
        }

    };

    DateRangePicker.prototype = {

        constructor: DateRangePicker,

        setOptions: function(options, callback) {

            this.startDate = moment().startOf('day');
            this.endDate = moment().endOf('day');
            this.minDate = false;
            this.maxDate = false;
            this.dateLimit = false;

            this.showDropdowns = false;
            this.showWeekNumbers = false;
            this.timePicker = false;
            this.timePickerIncrement = 30;
            this.timePicker12Hour = true;
            this.singleDatePicker = false;
            this.ranges = {};

            this.opens = 'right';
            if (this.element.hasClass('pull-right'))
                this.opens = 'left';

            this.buttonClasses = ['btn', 'btn-small btn-sm'];
            this.applyClass = 'btn-success';
            this.cancelClass = 'btn-default';

            this.format = 'MM/DD/YYYY';
            this.separator = ' - ';

            this.locale = {
                applyLabel: 'Apply',
                cancelLabel: 'Cancel',
                fromLabel: 'From',
                toLabel: 'To',
                weekLabel: 'W',
                customRangeLabel: 'Custom Range',
                daysOfWeek: moment.weekdaysMin(),
                monthNames: moment.monthsShort(),
                firstDay: moment.localeData()._week.dow
            };

            this.cb = function () { };

            if (typeof options.format === 'string')
                this.format = options.format;

            if (typeof options.separator === 'string')
                this.separator = options.separator;

            if (typeof options.startDate === 'string')
                this.startDate = moment(options.startDate, this.format);

            if (typeof options.endDate === 'string')
                this.endDate = moment(options.endDate, this.format);

            if (typeof options.minDate === 'string')
                this.minDate = moment(options.minDate, this.format);

            if (typeof options.maxDate === 'string')
                this.maxDate = moment(options.maxDate, this.format);

            if (typeof options.startDate === 'object')
                this.startDate = moment(options.startDate);

            if (typeof options.endDate === 'object')
                this.endDate = moment(options.endDate);

            if (typeof options.minDate === 'object')
                this.minDate = moment(options.minDate);

            if (typeof options.maxDate === 'object')
                this.maxDate = moment(options.maxDate);

            if (typeof options.applyClass === 'string')
                this.applyClass = options.applyClass;

            if (typeof options.cancelClass === 'string')
                this.cancelClass = options.cancelClass;

            if (typeof options.dateLimit === 'object')
                this.dateLimit = options.dateLimit;

            if (typeof options.locale === 'object') {

                if (typeof options.locale.daysOfWeek === 'object') {
                    // Create a copy of daysOfWeek to avoid modification of original
                    // options object for reusability in multiple daterangepicker instances
                    this.locale.daysOfWeek = options.locale.daysOfWeek.slice();
                }

                if (typeof options.locale.monthNames === 'object') {
                  this.locale.monthNames = options.locale.monthNames.slice();
                }

                if (typeof options.locale.firstDay === 'number') {
                  this.locale.firstDay = options.locale.firstDay;
                }

                if (typeof options.locale.applyLabel === 'string') {
                  this.locale.applyLabel = options.locale.applyLabel;
                }

                if (typeof options.locale.cancelLabel === 'string') {
                  this.locale.cancelLabel = options.locale.cancelLabel;
                }

                if (typeof options.locale.fromLabel === 'string') {
                  this.locale.fromLabel = options.locale.fromLabel;
                }

                if (typeof options.locale.toLabel === 'string') {
                  this.locale.toLabel = options.locale.toLabel;
                }

                if (typeof options.locale.weekLabel === 'string') {
                  this.locale.weekLabel = options.locale.weekLabel;
                }

                if (typeof options.locale.customRangeLabel === 'string') {
                  this.locale.customRangeLabel = options.locale.customRangeLabel;
                }
            }

            if (typeof options.opens === 'string')
                this.opens = options.opens;

            if (typeof options.showWeekNumbers === 'boolean') {
                this.showWeekNumbers = options.showWeekNumbers;
            }

            if (typeof options.buttonClasses === 'string') {
                this.buttonClasses = [options.buttonClasses];
            }

            if (typeof options.buttonClasses === 'object') {
                this.buttonClasses = options.buttonClasses;
            }

            if (typeof options.showDropdowns === 'boolean') {
                this.showDropdowns = options.showDropdowns;
            }

            if (typeof options.singleDatePicker === 'boolean') {
                this.singleDatePicker = options.singleDatePicker;
                if (this.singleDatePicker) {
                    this.endDate = this.startDate.clone();
                }
            }

            if (typeof options.timePicker === 'boolean') {
                this.timePicker = options.timePicker;
            }

            if (typeof options.timePickerIncrement === 'number') {
                this.timePickerIncrement = options.timePickerIncrement;
            }

            if (typeof options.timePicker12Hour === 'boolean') {
                this.timePicker12Hour = options.timePicker12Hour;
            }

            // update day names order to firstDay
            if (this.locale.firstDay != 0) {
                var iterator = this.locale.firstDay;
                while (iterator > 0) {
                    this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());
                    iterator--;
                }
            }

            var start, end, range;

            //if no start/end dates set, check if an input element contains initial values
            if (typeof options.startDate === 'undefined' && typeof options.endDate === 'undefined') {
                if ($(this.element).is('input[type=text]')) {
                    var val = $(this.element).val();
                    var split = val.split(this.separator);
                    start = end = null;
                    if (split.length == 2) {
                        start = moment(split[0], this.format);
                        end = moment(split[1], this.format);
                    } else if (this.singleDatePicker) {
                        start = moment(val, this.format);
                        end = moment(val, this.format);
                    }
                    if (start !== null && end !== null) {
                        this.startDate = start;
                        this.endDate = end;
                    }
                }
            }

            if (typeof options.ranges === 'object') {
                for (range in options.ranges) {

                    start = moment(options.ranges[range][0]);
                    end = moment(options.ranges[range][1]);

                    // If we have a min/max date set, bound this range
                    // to it, but only if it would otherwise fall
                    // outside of the min/max.
                    if (this.minDate && start.isBefore(this.minDate))
                        start = moment(this.minDate);

                    if (this.maxDate && end.isAfter(this.maxDate))
                        end = moment(this.maxDate);

                    // If the end of the range is before the minimum (if min is set) OR
                    // the start of the range is after the max (also if set) don't display this
                    // range option.
                    if ((this.minDate && end.isBefore(this.minDate)) || (this.maxDate && start.isAfter(this.maxDate))) {
                        continue;
                    }

                    this.ranges[range] = [start, end];
                }

                var list = '<ul>';
                for (range in this.ranges) {
                    list += '<li>' + range + '</li>';
                }
                list += '<li>' + this.locale.customRangeLabel + '</li>';
                list += '</ul>';
                this.container.find('.ranges ul').remove();
                this.container.find('.ranges').prepend(list);
            }

            if (typeof callback === 'function') {
                this.cb = callback;
            }

            if (!this.timePicker) {
                this.startDate = this.startDate.startOf('day');
                this.endDate = this.endDate.endOf('day');
            }

            if (this.singleDatePicker) {
            	this.opens = 'right';
            	this.container.addClass('single');
                this.container.find('.calendar.right').show();
                this.container.find('.calendar.left').hide();
                if (!this.timePicker) {
	                this.container.find('.ranges').hide();
                } else {
                	this.container.find('.ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input').hide();
                }
                if (!this.container.find('.calendar.right').hasClass('single'))
                    this.container.find('.calendar.right').addClass('single');
            } else {
            	this.container.removeClass('single');
            	this.container.find('.calendar.right').removeClass('single');
                this.container.find('.ranges').show();
            }

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();
            this.oldChosenLabel = this.chosenLabel;

            this.leftCalendar = {
                month: moment([this.startDate.year(), this.startDate.month(), 1, this.startDate.hour(), this.startDate.minute()]),
                calendar: []
            };

            this.rightCalendar = {
                month: moment([this.endDate.year(), this.endDate.month(), 1, this.endDate.hour(), this.endDate.minute()]),
                calendar: []
            };

            if (this.opens == 'right') {
                //swap calendar positions
                var left = this.container.find('.calendar.left');
                var right = this.container.find('.calendar.right');

                if (right.hasClass('single')) {
                    right.removeClass('single');
                    left.addClass('single');
                }

                left.removeClass('left').addClass('right');
                right.removeClass('right').addClass('left');

                if (this.singleDatePicker) {
                    left.show();
                    right.hide();
                }
            }

            if (typeof options.ranges === 'undefined' && !this.singleDatePicker) {
                this.container.addClass('show-calendar');
            }

            this.container.addClass('opens' + this.opens);

            this.updateView();
            this.updateCalendars();

        },

        setStartDate: function(startDate) {
            if (typeof startDate === 'string')
                this.startDate = moment(startDate, this.format);

            if (typeof startDate === 'object')
                this.startDate = moment(startDate);

            if (!this.timePicker)
                this.startDate = this.startDate.startOf('day');

            this.oldStartDate = this.startDate.clone();

            this.updateView();
            this.updateCalendars();
            this.updateInputText();
        },

        setEndDate: function(endDate) {
            if (typeof endDate === 'string')
                this.endDate = moment(endDate, this.format);

            if (typeof endDate === 'object')
                this.endDate = moment(endDate);

            if (!this.timePicker)
                this.endDate = this.endDate.endOf('day');

            this.oldEndDate = this.endDate.clone();

            this.updateView();
            this.updateCalendars();
            this.updateInputText();
        },

        updateView: function () {
            this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());
            this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());
            this.updateFormInputs();
        },

        updateFormInputs: function () {
            this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.format));
            this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.format));

            if (this.startDate.isSame(this.endDate) || this.startDate.isBefore(this.endDate)) {
                this.container.find('button.applyBtn').removeAttr('disabled');
            } else {
                this.container.find('button.applyBtn').attr('disabled', 'disabled');
            }
        },

        updateFromControl: function () {
            if (!this.element.is('input')) return;
            if (!this.element.val().length) return;

            var dateString = this.element.val().split(this.separator),
                start = null,
                end = null;

            if(dateString.length === 2) {
                start = moment(dateString[0], this.format);
                end = moment(dateString[1], this.format);
            }

            if (this.singleDatePicker || start === null || end === null) {
                start = moment(this.element.val(), this.format);
                end = start;
            }

            if (end.isBefore(start)) return;

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();

            this.startDate = start;
            this.endDate = end;

            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.notify();

            this.updateCalendars();
        },

        notify: function () {
            this.updateView();
            this.cb(this.startDate, this.endDate, this.chosenLabel);
        },

        move: function () {
            var parentOffset = { top: 0, left: 0 };
            var parentRightEdge = $(window).width();
            if (!this.parentEl.is('body')) {
                parentOffset = {
                    top: this.parentEl.offset().top - this.parentEl.scrollTop(),
                    left: this.parentEl.offset().left - this.parentEl.scrollLeft()
                };
                parentRightEdge = this.parentEl[0].clientWidth + this.parentEl.offset().left;
            }

            if (this.opens == 'left') {
                this.container.css({
                    top: this.element.offset().top + this.element.outerHeight() - parentOffset.top,
                    right: parentRightEdge - this.element.offset().left - this.element.outerWidth(),
                    left: 'auto'
                });
                if (this.container.offset().left < 0) {
                    this.container.css({
                        right: 'auto',
                        left: 9
                    });
                }
            } else {
                this.container.css({
                    top: this.element.offset().top + this.element.outerHeight() - parentOffset.top,
                    left: this.element.offset().left - parentOffset.left,
                    right: 'auto'
                });
                if (this.container.offset().left + this.container.outerWidth() > $(window).width()) {
                    this.container.css({
                        left: 'auto',
                        right: 0
                    });
                }
            }
        },

        toggle: function (e) {
            if (this.element.hasClass('active')) {
                this.hide();
            } else {
                this.show();
            }
        },

        show: function (e) {
            if (this.isShowing) return;

            this.element.addClass('active');
            this.container.show();
            this.move();

            // Create a click proxy that is private to this instance of datepicker, for unbinding
            this._outsideClickProxy = $.proxy(function (e) { this.outsideClick(e); }, this);
            // Bind global datepicker mousedown for hiding and
            $(document)
              .on('mousedown.daterangepicker', this._outsideClickProxy)
              // also explicitly play nice with Bootstrap dropdowns, which stopPropagation when clicking them
              .on('click.daterangepicker', '[data-toggle=dropdown]', this._outsideClickProxy)
              // and also close when focus changes to outside the picker (eg. tabbing between controls)
              .on('focusin.daterangepicker', this._outsideClickProxy);

            this.isShowing = true;
            this.element.trigger('show.daterangepicker', this);
        },

        outsideClick: function (e) {
            var target = $(e.target);
            // if the page is clicked anywhere except within the daterangerpicker/button
            // itself then call this.hide()
            if (
                target.closest(this.element).length ||
                target.closest(this.container).length ||
                target.closest('.calendar-date').length
                ) return;
            this.hide();
        },

        hide: function (e) {
            if (!this.isShowing) return;

            $(document)
              .off('mousedown.daterangepicker')
              .off('click.daterangepicker', '[data-toggle=dropdown]')
              .off('focusin.daterangepicker');

            this.element.removeClass('active');
            this.container.hide();

            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.notify();

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();

            this.isShowing = false;
            this.element.trigger('hide.daterangepicker', this);
        },

        enterRange: function (e) {
            // mouse pointer has entered a range label
            var label = e.target.innerHTML;
            if (label == this.locale.customRangeLabel) {
                this.updateView();
            } else {
                var dates = this.ranges[label];
                this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.format));
                this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.format));
            }
        },

        showCalendars: function() {
            this.container.addClass('show-calendar');
            this.move();
            this.element.trigger('showCalendar.daterangepicker', this);
        },

        hideCalendars: function() {
            this.container.removeClass('show-calendar');
            this.element.trigger('hideCalendar.daterangepicker', this);
        },

        // when a date is typed into the start to end date textboxes
        inputsChanged: function (e) {
            var el = $(e.target);
            var date = moment(el.val(), this.format);
            if (!date.isValid()) return;

            var startDate, endDate;
            if (el.attr('name') === 'daterangepicker_start') {
                startDate = date;
                endDate = this.endDate;
            } else {
                startDate = this.startDate;
                endDate = date;
            }
            this.setCustomDates(startDate, endDate);
        },

        inputsKeydown: function(e) {
            if (e.keyCode === 13) {
                this.inputsChanged(e);
                this.notify();
            }
        },

        updateInputText: function() {
            if (this.element.is('input') && !this.singleDatePicker) {
                this.element.val(this.startDate.format(this.format) + this.separator + this.endDate.format(this.format));
            } else if (this.element.is('input')) {
            	this.element.val(this.endDate.format(this.format));
            }
        },

        clickRange: function (e) {
            var label = e.target.innerHTML;
            this.chosenLabel = label;
            if (label == this.locale.customRangeLabel) {
                this.showCalendars();
            } else {
                var dates = this.ranges[label];

                this.startDate = dates[0];
                this.endDate = dates[1];

                if (!this.timePicker) {
                    this.startDate.startOf('day');
                    this.endDate.endOf('day');
                }

                this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute());
                this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute());
                this.updateCalendars();

                this.updateInputText();

                this.hideCalendars();
                this.hide();
                this.element.trigger('apply.daterangepicker', this);
            }
        },

        clickPrev: function (e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.subtract(1, 'month');
            } else {
                this.rightCalendar.month.subtract(1, 'month');
            }
            this.updateCalendars();
        },

        clickNext: function (e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.add(1, 'month');
            } else {
                this.rightCalendar.month.add(1, 'month');
            }
            this.updateCalendars();
        },

        hoverDate: function (e) {
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');

            if (cal.hasClass('left')) {
                this.container.find('input[name=daterangepicker_start]').val(this.leftCalendar.calendar[row][col].format(this.format));
            } else {
                this.container.find('input[name=daterangepicker_end]').val(this.rightCalendar.calendar[row][col].format(this.format));
            }
        },

        setCustomDates: function(startDate, endDate) {
            this.chosenLabel = this.locale.customRangeLabel;
            if (startDate.isAfter(endDate)) {
                var difference = this.endDate.diff(this.startDate);
                endDate = moment(startDate).add(difference, 'ms');
            }
            this.startDate = startDate;
            this.endDate = endDate;

            this.updateView();
            this.updateCalendars();
        },

        clickDate: function (e) {
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');

            var startDate, endDate;
            if (cal.hasClass('left')) {
                startDate = this.leftCalendar.calendar[row][col];
                endDate = this.endDate;
                if (typeof this.dateLimit === 'object') {
                    var maxDate = moment(startDate).add(this.dateLimit).startOf('day');
                    if (endDate.isAfter(maxDate)) {
                        endDate = maxDate;
                    }
                }
            } else {
                startDate = this.startDate;
                endDate = this.rightCalendar.calendar[row][col];
                if (typeof this.dateLimit === 'object') {
                    var minDate = moment(endDate).subtract(this.dateLimit).startOf('day');
                    if (startDate.isBefore(minDate)) {
                        startDate = minDate;
                    }
                }
            }

            if (this.singleDatePicker && cal.hasClass('left')) {
                endDate = startDate.clone();
            } else if (this.singleDatePicker && cal.hasClass('right')) {
                startDate = endDate.clone();
            }

            cal.find('td').removeClass('active');

            $(e.target).addClass('active');

            this.setCustomDates(startDate, endDate);

            if (!this.timePicker)
                endDate.endOf('day');

            if (this.singleDatePicker && !this.timePicker)
                this.clickApply();
        },

        clickApply: function (e) {
            this.updateInputText();
            this.hide();
            this.element.trigger('apply.daterangepicker', this);
        },

        clickCancel: function (e) {
            this.startDate = this.oldStartDate;
            this.endDate = this.oldEndDate;
            this.chosenLabel = this.oldChosenLabel;
            this.updateView();
            this.updateCalendars();
            this.hide();
            this.element.trigger('cancel.daterangepicker', this);
        },

        updateMonthYear: function (e) {
            var isLeft = $(e.target).closest('.calendar').hasClass('left'),
                leftOrRight = isLeft ? 'left' : 'right',
                cal = this.container.find('.calendar.'+leftOrRight);

            // Month must be Number for new moment versions
            var month = parseInt(cal.find('.monthselect').val(), 10);
            var year = cal.find('.yearselect').val();

            this[leftOrRight+'Calendar'].month.month(month).year(year);
            this.updateCalendars();
        },

        updateTime: function(e) {

            var cal = $(e.target).closest('.calendar'),
                isLeft = cal.hasClass('left');

            var hour = parseInt(cal.find('.hourselect').val(), 10);
            var minute = parseInt(cal.find('.minuteselect').val(), 10);

            if (this.timePicker12Hour) {
                var ampm = cal.find('.ampmselect').val();
                if (ampm === 'PM' && hour < 12)
                    hour += 12;
                if (ampm === 'AM' && hour === 12)
                    hour = 0;
            }

            if (isLeft) {
                var start = this.startDate.clone();
                start.hour(hour);
                start.minute(minute);
                this.startDate = start;
                this.leftCalendar.month.hour(hour).minute(minute);
            } else {
                var end = this.endDate.clone();
                end.hour(hour);
                end.minute(minute);
                this.endDate = end;
                this.rightCalendar.month.hour(hour).minute(minute);
            }

            this.updateCalendars();
        },

        updateCalendars: function () {
            this.leftCalendar.calendar = this.buildCalendar(this.leftCalendar.month.month(), this.leftCalendar.month.year(), this.leftCalendar.month.hour(), this.leftCalendar.month.minute(), 'left');
            this.rightCalendar.calendar = this.buildCalendar(this.rightCalendar.month.month(), this.rightCalendar.month.year(), this.rightCalendar.month.hour(), this.rightCalendar.month.minute(), 'right');
            this.container.find('.calendar.left').empty().html(this.renderCalendar(this.leftCalendar.calendar, this.startDate, this.minDate, this.maxDate));
            this.container.find('.calendar.right').empty().html(this.renderCalendar(this.rightCalendar.calendar, this.endDate, this.singleDatePicker ? this.minDate : this.startDate, this.maxDate));
            
            this.container.find('.ranges li').removeClass('active');
            var customRange = true;
            var i = 0;
            for (var range in this.ranges) {
                if (this.timePicker) {
                    if (this.startDate.isSame(this.ranges[range][0]) && this.endDate.isSame(this.ranges[range][1])) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')')
                            .addClass('active').html();
                    }
                } else {
                    //ignore times when comparing dates if time picker is not enabled
                    if (this.startDate.format('YYYY-MM-DD') == this.ranges[range][0].format('YYYY-MM-DD') && this.endDate.format('YYYY-MM-DD') == this.ranges[range][1].format('YYYY-MM-DD')) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')')
                            .addClass('active').html();
                    }
                }
                i++;
            }
            if (customRange) {
                this.chosenLabel = this.container.find('.ranges li:last').addClass('active').html();
                this.showCalendars();
            }
        },

        buildCalendar: function (month, year, hour, minute, side) {
            var daysInMonth = moment([year, month]).daysInMonth();
            var firstDay = moment([year, month, 1]);
            var lastDay = moment([year, month, daysInMonth]);
            var lastMonth = moment(firstDay).subtract(1, 'month').month();
            var lastYear = moment(firstDay).subtract(1, 'month').year();

            var daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();

            var dayOfWeek = firstDay.day();

            var i;

            //initialize a 6 rows x 7 columns array for the calendar
            var calendar = [];
            calendar.firstDay = firstDay;
            calendar.lastDay = lastDay;

            for (i = 0; i < 6; i++) {
                calendar[i] = [];
            }

            //populate the calendar with date objects
            var startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;
            if (startDay > daysInLastMonth)
                startDay -= 7;

            if (dayOfWeek == this.locale.firstDay)
                startDay = daysInLastMonth - 6;

            var curDate = moment([lastYear, lastMonth, startDay, 12, minute]);
            var col, row;
            for (i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {
                if (i > 0 && col % 7 === 0) {
                    col = 0;
                    row++;
                }
                calendar[row][col] = curDate.clone().hour(hour);
                curDate.hour(12);
            }

            return calendar;
        },

        renderDropdowns: function (selected, minDate, maxDate) {
            var currentMonth = selected.month();
            var monthHtml = '<select class="monthselect">';
            var inMinYear = false;
            var inMaxYear = false;

            for (var m = 0; m < 12; m++) {
                if ((!inMinYear || m >= minDate.month()) && (!inMaxYear || m <= maxDate.month())) {
                    monthHtml += "<option value='" + m + "'" +
                        (m === currentMonth ? " selected='selected'" : "") +
                        ">" + this.locale.monthNames[m] + "</option>";
                }
            }
            monthHtml += "</select>";

            var currentYear = selected.year();
            var maxYear = (maxDate && maxDate.year()) || (currentYear + 5);
            var minYear = (minDate && minDate.year()) || (currentYear - 50);
            var yearHtml = '<select class="yearselect">';

            for (var y = minYear; y <= maxYear; y++) {
                yearHtml += '<option value="' + y + '"' +
                    (y === currentYear ? ' selected="selected"' : '') +
                    '>' + y + '</option>';
            }

            yearHtml += '</select>';

            return monthHtml + yearHtml;
        },

        renderCalendar: function (calendar, selected, minDate, maxDate) {

            var html = '<div class="calendar-date">';
            html += '<table class="table-condensed">';
            html += '<thead>';
            html += '<tr>';

            // add empty cell for week number
            if (this.showWeekNumbers)
                html += '<th></th>';

            if (!minDate || minDate.isBefore(calendar.firstDay)) {
                html += '<th class="prev available"><i class="fa fa-arrow-left icon-arrow-left glyphicon glyphicon-arrow-left"></i></th>';
            } else {
                html += '<th></th>';
            }

            var dateHtml = this.locale.monthNames[calendar[1][1].month()] + calendar[1][1].format(" YYYY");

            if (this.showDropdowns) {
                dateHtml = this.renderDropdowns(calendar[1][1], minDate, maxDate);
            }

            html += '<th colspan="5" class="month">' + dateHtml + '</th>';
            if (!maxDate || maxDate.isAfter(calendar.lastDay)) {
                html += '<th class="next available"><i class="fa fa-arrow-right icon-arrow-right glyphicon glyphicon-arrow-right"></i></th>';
            } else {
                html += '<th></th>';
            }

            html += '</tr>';
            html += '<tr>';

            // add week number label
            if (this.showWeekNumbers)
                html += '<th class="week">' + this.locale.weekLabel + '</th>';

            $.each(this.locale.daysOfWeek, function (index, dayOfWeek) {
                html += '<th>' + dayOfWeek + '</th>';
            });

            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';

            for (var row = 0; row < 6; row++) {
                html += '<tr>';

                // add week number
                if (this.showWeekNumbers)
                    html += '<td class="week">' + calendar[row][0].week() + '</td>';

                for (var col = 0; col < 7; col++) {
                    var cname = 'available ';
                    cname += (calendar[row][col].month() == calendar[1][1].month()) ? '' : 'off';

                    if ((minDate && calendar[row][col].isBefore(minDate, 'day')) || (maxDate && calendar[row][col].isAfter(maxDate, 'day'))) {
                        cname = ' off disabled ';
                    } else if (calendar[row][col].format('YYYY-MM-DD') == selected.format('YYYY-MM-DD')) {
                        cname += ' active ';
                        if (calendar[row][col].format('YYYY-MM-DD') == this.startDate.format('YYYY-MM-DD')) {
                            cname += ' start-date ';
                        }
                        if (calendar[row][col].format('YYYY-MM-DD') == this.endDate.format('YYYY-MM-DD')) {
                            cname += ' end-date ';
                        }
                    } else if (calendar[row][col] >= this.startDate && calendar[row][col] <= this.endDate) {
                        cname += ' in-range ';
                        if (calendar[row][col].isSame(this.startDate)) { cname += ' start-date '; }
                        if (calendar[row][col].isSame(this.endDate)) { cname += ' end-date '; }
                    }

                    var title = 'r' + row + 'c' + col;
                    html += '<td class="' + cname.replace(/\s+/g, ' ').replace(/^\s?(.*?)\s?$/, '$1') + '" data-title="' + title + '">' + calendar[row][col].date() + '</td>';
                }
                html += '</tr>';
            }

            html += '</tbody>';
            html += '</table>';
            html += '</div>';

            var i;
            if (this.timePicker) {

                html += '<div class="calendar-time">';
                html += '<select class="hourselect">';
                var start = 0;
                var end = 23;
                var selected_hour = selected.hour();
                if (this.timePicker12Hour) {
                    start = 1;
                    end = 12;
                    if (selected_hour >= 12)
                        selected_hour -= 12;
                    if (selected_hour === 0)
                        selected_hour = 12;
                }

                for (i = start; i <= end; i++) {
                    if (i == selected_hour) {
                        html += '<option value="' + i + '" selected="selected">' + i + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + i + '</option>';
                    }
                }

                html += '</select> : ';

                html += '<select class="minuteselect">';

                for (i = 0; i < 60; i += this.timePickerIncrement) {
                    var num = i;
                    if (num < 10)
                        num = '0' + num;
                    if (i == selected.minute()) {
                        html += '<option value="' + i + '" selected="selected">' + num + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + num + '</option>';
                    }
                }

                html += '</select> ';

                if (this.timePicker12Hour) {
                    html += '<select class="ampmselect">';
                    if (selected.hour() >= 12) {
                        html += '<option value="AM">AM</option><option value="PM" selected="selected">PM</option>';
                    } else {
                        html += '<option value="AM" selected="selected">AM</option><option value="PM">PM</option>';
                    }
                    html += '</select>';
                }

                html += '</div>';

            }

            return html;

        },

        remove: function() {

            this.container.remove();
            this.element.off('.daterangepicker');
            this.element.removeData('daterangepicker');

        }

    };

    $.fn.daterangepicker = function (options, cb) {
        this.each(function () {
            var el = $(this);
            if (el.data('daterangepicker'))
                el.data('daterangepicker').remove();
            el.data('daterangepicker', new DateRangePicker(el, options, cb));
        });
        return this;
    };

}));

/*
 Highcharts JS v4.0.4 (2014-09-02)

 (c) 2009-2014 Torstein Honsi

 License: www.highcharts.com/license
*/
(function(){function r(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function w(){var a,b=arguments,c,d={},e=function(a,b){var c,d;typeof a!=="object"&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],a[d]=c&&typeof c==="object"&&Object.prototype.toString.call(c)!=="[object Array]"&&d!=="renderTo"&&typeof c.nodeType!=="number"?e(a[d]||{},c):b[d]);return a};b[0]===!0&&(d=b[1],b=Array.prototype.slice.call(b,2));c=b.length;for(a=0;a<c;a++)d=e(d,b[a]);return d}function y(a,b){return parseInt(a,b||
10)}function Ga(a){return typeof a==="string"}function da(a){return a&&typeof a==="object"}function Ha(a){return Object.prototype.toString.call(a)==="[object Array]"}function ja(a){return typeof a==="number"}function za(a){return V.log(a)/V.LN10}function ka(a){return V.pow(10,a)}function la(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function s(a){return a!==u&&a!==null}function F(a,b,c){var d,e;if(Ga(b))s(c)?a.setAttribute(b,c):a&&a.getAttribute&&(e=a.getAttribute(b));else if(s(b)&&
da(b))for(d in b)a.setAttribute(d,b[d]);return e}function ra(a){return Ha(a)?a:[a]}function p(){var a=arguments,b,c,d=a.length;for(b=0;b<d;b++)if(c=a[b],c!==u&&c!==null)return c}function B(a,b){if(Aa&&!ba&&b&&b.opacity!==u)b.filter="alpha(opacity="+b.opacity*100+")";r(a.style,b)}function $(a,b,c,d,e){a=x.createElement(a);b&&r(a,b);e&&B(a,{padding:0,border:P,margin:0});c&&B(a,c);d&&d.appendChild(a);return a}function ma(a,b){var c=function(){return u};c.prototype=new a;r(c.prototype,b);return c}function Ba(a,
b,c,d){var e=K.numberFormat,f=E.lang,g=+a||0,h=b===-1?(g.toString().split(".")[1]||"").length:isNaN(b=Q(b))?2:b,i=c===void 0?f.decimalPoint:c,f=d===void 0?f.thousandsSep:d,j=g<0?"-":"",k=String(y(g=Q(g).toFixed(h))),l=k.length>3?k.length%3:0;return e!==Ba?e(a,b,c,d):j+(l?k.substr(0,l)+f:"")+k.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+f)+(h?i+Q(g-k).toFixed(h).slice(2):"")}function Ia(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function Na(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);
a.unshift(d);return c.apply(this,a)}}function Ja(a,b){for(var c="{",d=!1,e,f,g,h,i,j=[];(c=a.indexOf(c))!==-1;){e=a.slice(0,c);if(d){f=e.split(":");g=f.shift().split(".");i=g.length;e=b;for(h=0;h<i;h++)e=e[g[h]];if(f.length)f=f.join(":"),g=/\.([0-9])/,h=E.lang,i=void 0,/f$/.test(f)?(i=(i=f.match(g))?i[1]:-1,e!==null&&(e=Ba(e,i,h.decimalPoint,f.indexOf(",")>-1?h.thousandsSep:""))):e=cb(f,e)}j.push(e);a=a.slice(c+1);c=(d=!d)?"}":"{"}j.push(a);return j.join("")}function mb(a){return V.pow(10,U(V.log(a)/
V.LN10))}function nb(a,b,c,d){var e,c=p(c,1);e=a/c;b||(b=[1,2,2.5,5,10],d===!1&&(c===1?b=[1,2,5,10]:c<=0.1&&(b=[1/c])));for(d=0;d<b.length;d++)if(a=b[d],e<=(b[d]+(b[d+1]||b[d]))/2)break;a*=c;return a}function ob(a,b){var c=a.length,d,e;for(e=0;e<c;e++)a[e].ss_i=e;a.sort(function(a,c){d=b(a,c);return d===0?a.ss_i-c.ss_i:d});for(e=0;e<c;e++)delete a[e].ss_i}function Oa(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function Ca(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}
function Pa(a,b){for(var c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function Qa(a){db||(db=$(Ka));a&&db.appendChild(a);db.innerHTML=""}function ea(a){return parseFloat(a.toPrecision(14))}function Ra(a,b){va=p(a,b.animation)}function Bb(){var a=E.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";Da=E.global.Date||window.Date;Sa=(a&&E.global.timezoneOffset||0)*6E4;eb=a?Da.UTC:function(a,b,c,g,h,i){return(new Da(a,b,p(c,1),p(g,0),p(h,0),p(i,0))).getTime()};pb=b+"Minutes";qb=b+
"Hours";rb=b+"Day";Xa=b+"Date";fb=b+"Month";gb=b+"FullYear";Cb=c+"Minutes";Db=c+"Hours";sb=c+"Date";Eb=c+"Month";Fb=c+"FullYear"}function S(){}function Ta(a,b,c,d){this.axis=a;this.pos=b;this.type=c||"";this.isNew=!0;!c&&!d&&this.addLabel()}function na(){this.init.apply(this,arguments)}function Ya(){this.init.apply(this,arguments)}function Gb(a,b,c,d,e){var f=a.chart.inverted;this.axis=a;this.isNegative=c;this.options=b;this.x=d;this.total=null;this.points={};this.stack=e;this.alignOptions={align:b.align||
(f?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(f?"middle":c?"bottom":"top"),y:p(b.y,f?4:c?14:-6),x:p(b.x,f?c?-6:6:0)};this.textAlign=b.textAlign||(f?c?"right":"left":"center")}var u,x=document,G=window,V=Math,v=V.round,U=V.floor,La=V.ceil,t=V.max,L=V.min,Q=V.abs,aa=V.cos,fa=V.sin,oa=V.PI,Ea=oa*2/360,wa=navigator.userAgent,Hb=G.opera,Aa=/msie/i.test(wa)&&!Hb,hb=x.documentMode===8,tb=/AppleWebKit/.test(wa),Ua=/Firefox/.test(wa),Ib=/(Mobile|Android|Windows Phone)/.test(wa),xa="http://www.w3.org/2000/svg",
ba=!!x.createElementNS&&!!x.createElementNS(xa,"svg").createSVGRect,Ob=Ua&&parseInt(wa.split("Firefox/")[1],10)<4,ga=!ba&&!Aa&&!!x.createElement("canvas").getContext,Za,$a,Jb={},ub=0,db,E,cb,va,vb,A,ha,sa=function(){return u},W=[],ab=0,Ka="div",P="none",Pb=/^[0-9]+$/,Qb="stroke-width",Da,eb,Sa,pb,qb,rb,Xa,fb,gb,Cb,Db,sb,Eb,Fb,H={},K;G.Highcharts?ha(16,!0):K=G.Highcharts={};cb=function(a,b,c){if(!s(b)||isNaN(b))return"Invalid date";var a=p(a,"%Y-%m-%d %H:%M:%S"),d=new Da(b-Sa),e,f=d[qb](),g=d[rb](),
h=d[Xa](),i=d[fb](),j=d[gb](),k=E.lang,l=k.weekdays,d=r({a:l[g].substr(0,3),A:l[g],d:Ia(h),e:h,b:k.shortMonths[i],B:k.months[i],m:Ia(i+1),y:j.toString().substr(2,2),Y:j,H:Ia(f),I:Ia(f%12||12),l:f%12||12,M:Ia(d[pb]()),p:f<12?"AM":"PM",P:f<12?"am":"pm",S:Ia(d.getSeconds()),L:Ia(v(b%1E3),3)},K.dateFormats);for(e in d)for(;a.indexOf("%"+e)!==-1;)a=a.replace("%"+e,typeof d[e]==="function"?d[e](b):d[e]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a};ha=function(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+
a;if(b)throw c;G.console&&console.log(c)};A={millisecond:1,second:1E3,minute:6E4,hour:36E5,day:864E5,week:6048E5,month:26784E5,year:31556952E3};vb={init:function(a,b,c){var b=b||"",d=a.shift,e=b.indexOf("C")>-1,f=e?7:3,g,b=b.split(" "),c=[].concat(c),h,i,j=function(a){for(g=a.length;g--;)a[g]==="M"&&a.splice(g+1,0,a[g+1],a[g+2],a[g+1],a[g+2])};e&&(j(b),j(c));a.isArea&&(h=b.splice(b.length-6,6),i=c.splice(c.length-6,6));if(d<=c.length/f&&b.length===c.length)for(;d--;)c=[].concat(c).splice(0,f).concat(c);
a.shift=0;if(b.length)for(a=c.length;b.length<a;)d=[].concat(b).splice(b.length-f,f),e&&(d[f-6]=d[f-2],d[f-5]=d[f-1]),b=b.concat(d);h&&(b=b.concat(h),c=c.concat(i));return[b,c]},step:function(a,b,c,d){var e=[],f=a.length;if(c===1)e=d;else if(f===b.length&&c<1)for(;f--;)d=parseFloat(a[f]),e[f]=isNaN(d)?a[f]:c*parseFloat(b[f]-d)+d;else e=b;return e}};(function(a){G.HighchartsAdapter=G.HighchartsAdapter||a&&{init:function(b){var c=a.fx;a.extend(a.easing,{easeOutQuad:function(a,b,c,g,h){return-g*(b/=
h)*(b-2)+c}});a.each(["cur","_default","width","height","opacity"],function(b,e){var f=c.step,g;e==="cur"?f=c.prototype:e==="_default"&&a.Tween&&(f=a.Tween.propHooks[e],e="set");(g=f[e])&&(f[e]=function(a){var c,a=b?a:this;if(a.prop!=="align")return c=a.elem,c.attr?c.attr(a.prop,e==="cur"?u:a.now):g.apply(this,arguments)})});Na(a.cssHooks.opacity,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)});this.addAnimSetter("d",function(a){var c=a.elem,f;if(!a.started)f=b.init(c,c.d,c.toD),
a.start=f[0],a.end=f[1],a.started=!0;c.attr("d",b.step(a.start,a.end,a.pos,c.toD))});this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){var c,g=a.length;for(c=0;c<g;c++)if(b.call(a[c],a[c],c,a)===!1)return c};a.fn.highcharts=function(){var a="Chart",b=arguments,c,g;if(this[0]){Ga(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,1));c=b[0];if(c!==u)c.chart=c.chart||{},c.chart.renderTo=this[0],new K[a](c,b[1]),g=this;c===u&&(g=W[F(this[0],"data-highcharts-chart")])}return g}},
addAnimSetter:function(b,c){a.Tween?a.Tween.propHooks[b]={set:c}:a.fx.step[b]=c},getScript:a.getScript,inArray:a.inArray,adapterRun:function(b,c){return a(b)[c]()},grep:a.grep,map:function(a,c){for(var d=[],e=0,f=a.length;e<f;e++)d[e]=c.call(a[e],a[e],e,a);return d},offset:function(b){return a(b).offset()},addEvent:function(b,c,d){a(b).bind(c,d)},removeEvent:function(b,c,d){var e=x.removeEventListener?"removeEventListener":"detachEvent";x[e]&&b&&!b[e]&&(b[e]=function(){});a(b).unbind(c,d)},fireEvent:function(b,
c,d,e){var f=a.Event(c),g="detached"+c,h;!Aa&&d&&(delete d.layerX,delete d.layerY,delete d.returnValue);r(f,d);b[c]&&(b[g]=b[c],b[c]=null);a.each(["preventDefault","stopPropagation"],function(a,b){var c=f[b];f[b]=function(){try{c.call(f)}catch(a){b==="preventDefault"&&(h=!0)}}});a(b).trigger(f);b[g]&&(b[c]=b[g],b[g]=null);e&&!f.isDefaultPrevented()&&!h&&e(f)},washMouseEvent:function(a){var c=a.originalEvent||a;if(c.pageX===u)c.pageX=a.pageX,c.pageY=a.pageY;return c},animate:function(b,c,d){var e=
a(b);if(!b.style)b.style={};if(c.d)b.toD=c.d,c.d=1;e.stop();c.opacity!==u&&b.attr&&(c.opacity+="px");b.hasAnim=1;e.animate(c,d)},stop:function(b){b.hasAnim&&a(b).stop()}}})(G.jQuery);var T=G.HighchartsAdapter,M=T||{};T&&T.init.call(T,vb);var ib=M.adapterRun,Rb=M.getScript,Ma=M.inArray,q=M.each,wb=M.grep,Sb=M.offset,Va=M.map,N=M.addEvent,X=M.removeEvent,I=M.fireEvent,Tb=M.washMouseEvent,jb=M.animate,bb=M.stop,M={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};E={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),
symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,
canvasToolsURL:"http://code.highcharts.com/4.0.4/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/4.0.4/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",
align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1E3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:w(M,{align:"center",enabled:!1,formatter:function(){return this.y===null?"":Ba(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,
marker:{},halo:{size:10,opacity:0.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1E3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",
width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:!0,animation:ba,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",
day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ib?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",
color:"#909090",fontSize:"9px"}}};var ca=E.plotOptions,T=ca.line;Bb();var Ub=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Vb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Wb=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,ya=function(a){var b=[],c,d;(function(a){a&&a.stops?d=Va(a.stops,function(a){return ya(a[1])}):(c=Ub.exec(a))?b=[y(c[1]),y(c[2]),y(c[3]),parseFloat(c[4],10)]:(c=Vb.exec(a))?b=[y(c[1],16),y(c[2],16),y(c[3],
16),1]:(c=Wb.exec(a))&&(b=[y(c[1]),y(c[2]),y(c[3]),1])})(a);return{get:function(c){var f;d?(f=w(a),f.stops=[].concat(f.stops),q(d,function(a,b){f.stops[b]=[f.stops[b][0],a.get(c)]})):f=b&&!isNaN(b[0])?c==="rgb"?"rgb("+b[0]+","+b[1]+","+b[2]+")":c==="a"?b[3]:"rgba("+b.join(",")+")":a;return f},brighten:function(a){if(d)q(d,function(b){b.brighten(a)});else if(ja(a)&&a!==0){var c;for(c=0;c<3;c++)b[c]+=y(a*255),b[c]<0&&(b[c]=0),b[c]>255&&(b[c]=255)}return this},rgba:b,setOpacity:function(a){b[3]=a;return this}}};
S.prototype={opacity:1,textProps:"fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow,HcTextStroke".split(","),init:function(a,b){this.element=b==="span"?$(b):x.createElementNS(xa,b);this.renderer=a},animate:function(a,b,c){b=p(b,va,!0);bb(this);if(b){b=w(b,{});if(c)b.complete=c;jb(this,a,b)}else this.attr(a),c&&c();return this},colorGradient:function(a,b,c){var d=this.renderer,e,f,g,h,i,j,k,l,n,m,o=[];a.linearGradient?f="linearGradient":a.radialGradient&&(f="radialGradient");
if(f){g=a[f];h=d.gradients;j=a.stops;n=c.radialReference;Ha(g)&&(a[f]=g={x1:g[0],y1:g[1],x2:g[2],y2:g[3],gradientUnits:"userSpaceOnUse"});f==="radialGradient"&&n&&!s(g.gradientUnits)&&(g=w(g,{cx:n[0]-n[2]/2+g.cx*n[2],cy:n[1]-n[2]/2+g.cy*n[2],r:g.r*n[2],gradientUnits:"userSpaceOnUse"}));for(m in g)m!=="id"&&o.push(m,g[m]);for(m in j)o.push(j[m]);o=o.join(",");h[o]?a=h[o].attr("id"):(g.id=a="highcharts-"+ub++,h[o]=i=d.createElement(f).attr(g).add(d.defs),i.stops=[],q(j,function(a){a[1].indexOf("rgba")===
0?(e=ya(a[1]),k=e.get("rgb"),l=e.get("a")):(k=a[1],l=1);a=d.createElement("stop").attr({offset:a[0],"stop-color":k,"stop-opacity":l}).add(i);i.stops.push(a)}));c.setAttribute(b,"url("+d.url+"#"+a+")")}},attr:function(a,b){var c,d,e=this.element,f,g=this,h;typeof a==="string"&&b!==u&&(c=a,a={},a[c]=b);if(typeof a==="string")g=(this[a+"Getter"]||this._defaultGetter).call(this,a,e);else{for(c in a){d=a[c];h=!1;this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(f||(this.symbolAttr(a),
f=!0),h=!0);if(this.rotation&&(c==="x"||c==="y"))this.doTransform=!0;h||(this[c+"Setter"]||this._defaultSetter).call(this,d,c,e);this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c)&&this.updateShadows(c,d)}if(this.doTransform)this.updateTransform(),this.doTransform=!1}return g},updateShadows:function(a,b){for(var c=this.shadows,d=c.length;d--;)c[d].setAttribute(a,a==="height"?t(b-(c[d].cutHeight||0),0):a==="d"?this.d:b)},addClass:function(a){var b=this.element,c=F(b,"class")||
"";c.indexOf(a)===-1&&F(b,"class",c+" "+a);return this},symbolAttr:function(a){var b=this;q("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(c){b[c]=p(a[c],b[c])});b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":P)},crisp:function(a){var b,c={},d,e=a.strokeWidth||this.strokeWidth||0;d=v(e)%2/2;a.x=U(a.x||this.x||0)+d;a.y=U(a.y||this.y||0)+d;a.width=U((a.width||this.width||
0)-2*d);a.height=U((a.height||this.height||0)-2*d);a.strokeWidth=e;for(b in a)this[b]!==a[b]&&(this[b]=c[b]=a[b]);return c},css:function(a){var b=this.styles,c={},d=this.element,e,f,g="";e=!b;if(a&&a.color)a.fill=a.color;if(b)for(f in a)a[f]!==b[f]&&(c[f]=a[f],e=!0);if(e){e=this.textWidth=a&&a.width&&d.nodeName.toLowerCase()==="text"&&y(a.width);b&&(a=r(b,c));this.styles=a;e&&(ga||!ba&&this.renderer.forExport)&&delete a.width;if(Aa&&!ba)B(this.element,a);else{b=function(a,b){return"-"+b.toLowerCase()};
for(f in a)g+=f.replace(/([A-Z])/g,b)+":"+a[f]+";";F(d,"style",g)}e&&this.added&&this.renderer.buildText(this)}return this},on:function(a,b){var c=this,d=c.element;$a&&a==="click"?(d.ontouchstart=function(a){c.touchEventFired=Da.now();a.preventDefault();b.call(d,a)},d.onclick=function(a){(wa.indexOf("Android")===-1||Da.now()-(c.touchEventFired||0)>1100)&&b.call(d,a)}):d["on"+a]=b;return this},setRadialReference:function(a){this.element.radialReference=a;return this},translate:function(a,b){return this.attr({translateX:a,
translateY:b})},invert:function(){this.inverted=!0;this.updateTransform();return this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0,c=this.scaleX,d=this.scaleY,e=this.inverted,f=this.rotation,g=this.element;e&&(a+=this.attr("width"),b+=this.attr("height"));a=["translate("+a+","+b+")"];e?a.push("rotate(90) scale(-1,1)"):f&&a.push("rotate("+f+" "+(g.getAttribute("x")||0)+" "+(g.getAttribute("y")||0)+")");(s(c)||s(d))&&a.push("scale("+p(c,1)+" "+p(d,1)+")");a.length&&g.setAttribute("transform",
a.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},align:function(a,b,c){var d,e,f,g,h={};e=this.renderer;f=e.alignedObjects;if(a){if(this.alignOptions=a,this.alignByTranslate=b,!c||Ga(c))this.alignTo=d=c||"renderer",la(f,this),f.push(this),c=null}else a=this.alignOptions,b=this.alignByTranslate,d=this.alignTo;c=p(c,e[d],e);d=a.align;e=a.verticalAlign;f=(c.x||0)+(a.x||0);g=(c.y||0)+(a.y||0);if(d==="right"||d==="center")f+=(c.width-(a.width||0))/{right:1,center:2}[d];
h[b?"translateX":"x"]=v(f);if(e==="bottom"||e==="middle")g+=(c.height-(a.height||0))/({bottom:1,middle:2}[e]||1);h[b?"translateY":"y"]=v(g);this[this.placed?"animate":"attr"](h);this.placed=!0;this.alignAttr=h;return this},getBBox:function(){var a=this.bBox,b=this.renderer,c,d,e=this.rotation;c=this.element;var f=this.styles,g=e*Ea;d=this.textStr;var h;if(d===""||Pb.test(d))h="num."+d.toString().length+(f?"|"+f.fontSize+"|"+f.fontFamily:"");h&&(a=b.cache[h]);if(!a){if(c.namespaceURI===xa||b.forExport){try{a=
c.getBBox?r({},c.getBBox()):{width:c.offsetWidth,height:c.offsetHeight}}catch(i){}if(!a||a.width<0)a={width:0,height:0}}else a=this.htmlGetBBox();if(b.isSVG){c=a.width;d=a.height;if(Aa&&f&&f.fontSize==="11px"&&d.toPrecision(3)==="16.9")a.height=d=14;if(e)a.width=Q(d*fa(g))+Q(c*aa(g)),a.height=Q(d*aa(g))+Q(c*fa(g))}this.bBox=a;h&&(b.cache[h]=a)}return a},show:function(a){a&&this.element.namespaceURI===xa?this.element.removeAttribute("visibility"):this.attr({visibility:a?"inherit":"visible"});return this},
hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.attr({y:-9999})}})},add:function(a){var b=this.renderer,c=a||b,d=c.element||b.box,e=this.element,f=this.zIndex,g,h;if(a)this.parentGroup=a;this.parentInverted=a&&a.inverted;this.textStr!==void 0&&b.buildText(this);if(f)c.handleZ=!0,f=y(f);if(c.handleZ){a=d.childNodes;for(g=0;g<a.length;g++)if(b=a[g],c=F(b,"zIndex"),b!==e&&(y(c)>f||!s(f)&&s(c))){d.insertBefore(e,
b);h=!0;break}}h||d.appendChild(e);this.added=!0;if(this.onAdd)this.onAdd();return this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var a=this,b=a.element||{},c=a.shadows,d=a.renderer.isSVG&&b.nodeName==="SPAN"&&a.parentGroup,e,f;b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=b.point=null;bb(a);if(a.clipPath)a.clipPath=a.clipPath.destroy();if(a.stops){for(f=0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}a.safeRemoveChild(b);for(c&&
q(c,function(b){a.safeRemoveChild(b)});d&&d.div&&d.div.childNodes.length===0;)b=d.parentGroup,a.safeRemoveChild(d.div),delete d.div,d=b;a.alignTo&&la(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},shadow:function(a,b,c){var d=[],e,f,g=this.element,h,i,j,k;if(a){i=p(a.width,3);j=(a.opacity||0.15)/i;k=this.parentInverted?"(-1,-1)":"("+p(a.offsetX,1)+", "+p(a.offsetY,1)+")";for(e=1;e<=i;e++){f=g.cloneNode(0);h=i*2+1-2*e;F(f,{isShadow:"true",stroke:a.color||"black","stroke-opacity":j*
e,"stroke-width":h,transform:"translate"+k,fill:P});if(c)F(f,"height",t(F(f,"height")-h,0)),f.cutHeight=h;b?b.element.appendChild(f):g.parentNode.insertBefore(f,g);d.push(f)}this.shadows=d}return this},xGetter:function(a){this.element.nodeName==="circle"&&(a={x:"cx",y:"cy"}[a]||a);return this._defaultGetter(a)},_defaultGetter:function(a){a=p(this[a],this.element?this.element.getAttribute(a):null,0);/^[\-0-9\.]+$/.test(a)&&(a=parseFloat(a));return a},dSetter:function(a,b,c){a&&a.join&&(a=a.join(" "));
/(NaN| {2}|^$)/.test(a)&&(a="M 0 0");c.setAttribute(b,a);this[b]=a},dashstyleSetter:function(a){var b;if(a=a&&a.toLowerCase()){a=a.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",");for(b=a.length;b--;)a[b]=y(a[b])*this["stroke-width"];a=a.join(",").replace("NaN","none");this.element.setAttribute("stroke-dasharray",a)}},
alignSetter:function(a){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[a])},opacitySetter:function(a,b,c){this[b]=a;c.setAttribute(b,a)},titleSetter:function(a){var b=this.element.getElementsByTagName("title")[0];b||(b=x.createElementNS(xa,"title"),this.element.appendChild(b));b.textContent=p(a,"").replace(/<[^>]*>/g,"")},textSetter:function(a){if(a!==this.textStr)delete this.bBox,this.textStr=a,this.added&&this.renderer.buildText(this)},fillSetter:function(a,b,
c){typeof a==="string"?c.setAttribute(b,a):a&&this.colorGradient(a,b,c)},zIndexSetter:function(a,b,c){c.setAttribute(b,a);this[b]=a},_defaultSetter:function(a,b,c){c.setAttribute(b,a)}};S.prototype.yGetter=S.prototype.xGetter;S.prototype.translateXSetter=S.prototype.translateYSetter=S.prototype.rotationSetter=S.prototype.verticalAlignSetter=S.prototype.scaleXSetter=S.prototype.scaleYSetter=function(a,b){this[b]=a;this.doTransform=!0};S.prototype["stroke-widthSetter"]=S.prototype.strokeSetter=function(a,
b,c){this[b]=a;if(this.stroke&&this["stroke-width"])this.strokeWidth=this["stroke-width"],S.prototype.fillSetter.call(this,this.stroke,"stroke",c),c.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0;else if(b==="stroke-width"&&a===0&&this.hasStroke)c.removeAttribute("stroke"),this.hasStroke=!1};var ta=function(){this.init.apply(this,arguments)};ta.prototype={Element:S,init:function(a,b,c,d,e){var f=location,g,d=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(d));
g=d.element;a.appendChild(g);a.innerHTML.indexOf("xmlns")===-1&&F(g,"xmlns",xa);this.isSVG=!0;this.box=g;this.boxWrapper=d;this.alignedObjects=[];this.url=(Ua||tb)&&x.getElementsByTagName("base").length?f.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"";this.createElement("desc").add().element.appendChild(x.createTextNode("Created with Highcharts 4.0.4"));this.defs=this.createElement("defs").add();this.forExport=e;this.gradients={};this.cache={};this.setSize(b,c,!1);var h;
if(Ua&&a.getBoundingClientRect)this.subPixelFix=b=function(){B(a,{left:0,top:0});h=a.getBoundingClientRect();B(a,{left:La(h.left)-h.left+"px",top:La(h.top)-h.top+"px"})},b(),N(G,"resize",b)},getStyle:function(a){return this.style=r({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},a)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;this.box=null;this.boxWrapper=this.boxWrapper.destroy();Pa(this.gradients||
{});this.gradients=null;if(a)this.defs=a.destroy();this.subPixelFix&&X(G,"resize",this.subPixelFix);return this.alignedObjects=null},createElement:function(a){var b=new this.Element;b.init(this,a);return b},draw:function(){},buildText:function(a){for(var b=a.element,c=this,d=c.forExport,e=p(a.textStr,"").toString(),f=e.indexOf("<")!==-1,g=b.childNodes,h,i,j=F(b,"x"),k=a.styles,l=a.textWidth,n=k&&k.lineHeight,m=k&&k.HcTextStroke,o=g.length,Y=function(a){return n?y(n):c.fontMetrics(/(px|em)$/.test(a&&
a.style.fontSize)?a.style.fontSize:k&&k.fontSize||c.style.fontSize||12,a).h};o--;)b.removeChild(g[o]);!f&&!m&&e.indexOf(" ")===-1?b.appendChild(x.createTextNode(e)):(h=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,l&&!a.added&&this.box.appendChild(b),e=f?e.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[e],e[e.length-1]===""&&e.pop(),q(e,function(e,
f){var g,n=0,e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");g=e.split("|||");q(g,function(e){if(e!==""||g.length===1){var m={},o=x.createElementNS(xa,"tspan"),p;h.test(e)&&(p=e.match(h)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),F(o,"style",p));i.test(e)&&!d&&(F(o,"onclick",'location.href="'+e.match(i)[1]+'"'),B(o,{cursor:"pointer"}));e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(e!==" "){o.appendChild(x.createTextNode(e));if(n)m.dx=0;else if(f&&
j!==null)m.x=j;F(o,m);b.appendChild(o);!n&&f&&(!ba&&d&&B(o,{display:"block"}),F(o,"dy",Y(o)));if(l)for(var e=e.replace(/([^\^])-/g,"$1- ").split(" "),m=g.length>1||e.length>1&&k.whiteSpace!=="nowrap",q,D,s=k.HcHeight,t=[],u=Y(o),Lb=1;m&&(e.length||t.length);)delete a.bBox,q=a.getBBox(),D=q.width,!ba&&c.forExport&&(D=c.measureSpanWidth(o.firstChild.data,a.styles)),q=D>l,!q||e.length===1?(e=t,t=[],e.length&&(Lb++,s&&Lb*u>s?(e=["..."],a.attr("title",a.textStr)):(o=x.createElementNS(xa,"tspan"),F(o,{dy:u,
x:j}),p&&F(o,"style",p),b.appendChild(o))),D>l&&(l=D)):(o.removeChild(o.firstChild),t.unshift(e.pop())),e.length&&o.appendChild(x.createTextNode(e.join(" ").replace(/- /g,"-")));n++}}})}))},button:function(a,b,c,d,e,f,g,h,i){var j=this.label(a,b,c,i,null,null,null,null,"button"),k=0,l,n,m,o,p,q,a={x1:0,y1:0,x2:0,y2:1},e=w({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:a,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},e);m=e.style;delete e.style;f=w(e,{stroke:"#68A",
fill:{linearGradient:a,stops:[[0,"#FFF"],[1,"#ACF"]]}},f);o=f.style;delete f.style;g=w(e,{stroke:"#68A",fill:{linearGradient:a,stops:[[0,"#9BD"],[1,"#CDF"]]}},g);p=g.style;delete g.style;h=w(e,{style:{color:"#CCC"}},h);q=h.style;delete h.style;N(j.element,Aa?"mouseover":"mouseenter",function(){k!==3&&j.attr(f).css(o)});N(j.element,Aa?"mouseout":"mouseleave",function(){k!==3&&(l=[e,f,g][k],n=[m,o,p][k],j.attr(l).css(n))});j.setState=function(a){(j.state=k=a)?a===2?j.attr(g).css(p):a===3&&j.attr(h).css(q):
j.attr(e).css(m)};return j.on("click",function(){k!==3&&d.call(j)}).attr(e).css(r({cursor:"default"},m))},crispLine:function(a,b){a[1]===a[4]&&(a[1]=a[4]=v(a[1])-b%2/2);a[2]===a[5]&&(a[2]=a[5]=v(a[2])+b%2/2);return a},path:function(a){var b={fill:P};Ha(a)?b.d=a:da(a)&&r(b,a);return this.createElement("path").attr(b)},circle:function(a,b,c){a=da(a)?a:{x:a,y:b,r:c};b=this.createElement("circle");b.xSetter=function(a){this.element.setAttribute("cx",a)};b.ySetter=function(a){this.element.setAttribute("cy",
a)};return b.attr(a)},arc:function(a,b,c,d,e,f){if(da(a))b=a.y,c=a.r,d=a.innerR,e=a.start,f=a.end,a=a.x;a=this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:e||0,end:f||0});a.r=c;return a},rect:function(a,b,c,d,e,f){var e=da(a)?a.r:e,g=this.createElement("rect"),a=da(a)?a:a===u?{}:{x:a,y:b,width:t(c,0),height:t(d,0)};if(f!==u)a.strokeWidth=f,a=g.crisp(a);if(e)a.r=e;g.rSetter=function(a){F(this.element,{rx:a,ry:a})};return g.attr(a)},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;
this.width=a;this.height=b;for(this.boxWrapper[p(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=this.createElement("g");return s(a)?b.attr({"class":"highcharts-"+a}):b},image:function(a,b,c,d,e){var f={preserveAspectRatio:P};arguments.length>1&&r(f,{x:b,y:c,width:d,height:e});f=this.createElement("image").attr(f);f.element.setAttributeNS?f.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):f.element.setAttribute("hc-svg-href",a);return f},symbol:function(a,
b,c,d,e,f){var g,h=this.symbols[a],h=h&&h(v(b),v(c),d,e,f),i=/^url\((.*?)\)$/,j,k;if(h)g=this.path(h),r(g,{symbolName:a,x:b,y:c,width:d,height:e}),f&&r(g,f);else if(i.test(a))k=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(v((d-b[0])/2),v((e-b[1])/2)))},j=a.match(i)[1],a=Jb[j]||f&&f.width&&f.height&&[f.width,f.height],g=this.image(j).attr({x:b,y:c}),g.isImg=!0,a?k(g,a):(g.attr({width:0,height:0}),$("img",{onload:function(){k(g,Jb[j]=[this.width,this.height])},
src:j}));return g},symbols:{circle:function(a,b,c,d){var e=0.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,c=e.r||c||d,g=e.end-
0.001,d=e.innerR,h=e.open,i=aa(f),j=fa(f),k=aa(g),g=fa(g),e=e.end-f<oa?0:1;return["M",a+c*i,b+c*j,"A",c,c,0,e,1,a+c*k,b+c*g,h?"M":"L",a+d*k,b+d*g,"A",d,d,0,e,0,a+d*i,b+d*j,h?"":"Z"]},callout:function(a,b,c,d,e){var f=L(e&&e.r||0,c,d),g=f+6,h=e&&e.anchorX,i=e&&e.anchorY,e=v(e.strokeWidth||0)%2/2;a+=e;b+=e;e=["M",a+f,b,"L",a+c-f,b,"C",a+c,b,a+c,b,a+c,b+f,"L",a+c,b+d-f,"C",a+c,b+d,a+c,b+d,a+c-f,b+d,"L",a+f,b+d,"C",a,b+d,a,b+d,a,b+d-f,"L",a,b+f,"C",a,b,a,b,a+f,b];h&&h>c&&i>b+g&&i<b+d-g?e.splice(13,3,
"L",a+c,i-6,a+c+6,i,a+c,i+6,a+c,b+d-f):h&&h<0&&i>b+g&&i<b+d-g?e.splice(33,3,"L",a,i+6,a-6,i,a,i-6,a,b+f):i&&i>d&&h>a+g&&h<a+c-g?e.splice(23,3,"L",h+6,b+d,h,b+d+6,h-6,b+d,a+f,b+d):i&&i<0&&h>a+g&&h<a+c-g&&e.splice(3,3,"L",h-6,b,h,b-6,h+6,b,c-f,b);return e}},clipRect:function(a,b,c,d){var e="highcharts-"+ub++,f=this.createElement("clipPath").attr({id:e}).add(this.defs),a=this.rect(a,b,c,d,0).add(f);a.id=e;a.clipPath=f;return a},text:function(a,b,c,d){var e=ga||!ba&&this.forExport,f={};if(d&&!this.forExport)return this.html(a,
b,c);f.x=Math.round(b||0);if(c)f.y=Math.round(c);if(a||a===0)f.text=a;a=this.createElement("text").attr(f);e&&a.css({position:"absolute"});if(!d)a.xSetter=function(a,b,c){var d=c.getElementsByTagName("tspan"),e,f=c.getAttribute(b),n;for(n=0;n<d.length;n++)e=d[n],e.getAttribute(b)===f&&e.setAttribute(b,a);c.setAttribute(b,a)};return a},fontMetrics:function(a,b){a=a||this.style.fontSize;if(b&&G.getComputedStyle)b=b.element||b,a=G.getComputedStyle(b,"").fontSize;var a=/px/.test(a)?y(a):/em/.test(a)?
parseFloat(a)*12:12,c=a<24?a+4:v(a*1.2),d=v(c*0.8);return{h:c,b:d,f:a}},label:function(a,b,c,d,e,f,g,h,i){function j(){var a,b;a=o.element.style;D=(t===void 0||xb===void 0||m.styles.textAlign)&&o.textStr&&o.getBBox();m.width=(t||D.width||0)+2*C+kb;m.height=(xb||D.height||0)+2*C;R=C+n.fontMetrics(a&&a.fontSize,o).b;if(y){if(!p)a=v(-J*C),b=h?-R:0,m.box=p=d?n.symbol(d,a,b,m.width,m.height,z):n.rect(a,b,m.width,m.height,0,z[Qb]),p.attr("fill",P).add(m);p.isImg||p.attr(r({width:v(m.width),height:v(m.height)},
z));z=null}}function k(){var a=m.styles,a=a&&a.textAlign,b=kb+C*(1-J),c;c=h?0:R;if(s(t)&&D&&(a==="center"||a==="right"))b+={center:0.5,right:1}[a]*(t-D.width);if(b!==o.x||c!==o.y)o.attr("x",b),c!==u&&o.attr("y",c);o.x=b;o.y=c}function l(a,b){p?p.attr(a,b):z[a]=b}var n=this,m=n.g(i),o=n.text("",0,0,g).attr({zIndex:1}),p,D,J=0,C=3,kb=0,t,xb,yb,x,Kb=0,z={},R,y;m.onAdd=function(){o.add(m);m.attr({text:a||a===0?a:"",x:b,y:c});p&&s(e)&&m.attr({anchorX:e,anchorY:f})};m.widthSetter=function(a){t=a};m.heightSetter=
function(a){xb=a};m.paddingSetter=function(a){s(a)&&a!==C&&(C=a,k())};m.paddingLeftSetter=function(a){s(a)&&a!==kb&&(kb=a,k())};m.alignSetter=function(a){J={left:0,center:0.5,right:1}[a]};m.textSetter=function(a){a!==u&&o.textSetter(a);j();k()};m["stroke-widthSetter"]=function(a,b){a&&(y=!0);Kb=a%2/2;l(b,a)};m.strokeSetter=m.fillSetter=m.rSetter=function(a,b){b==="fill"&&a&&(y=!0);l(b,a)};m.anchorXSetter=function(a,b){e=a;l(b,a+Kb-yb)};m.anchorYSetter=function(a,b){f=a;l(b,a-x)};m.xSetter=function(a){m.x=
a;J&&(a-=J*((t||D.width)+C));yb=v(a);m.attr("translateX",yb)};m.ySetter=function(a){x=m.y=v(a);m.attr("translateY",x)};var A=m.css;return r(m,{css:function(a){if(a){var b={},a=w(a);q(m.textProps,function(c){a[c]!==u&&(b[c]=a[c],delete a[c])});o.css(b)}return A.call(m,a)},getBBox:function(){return{width:D.width+2*C,height:D.height+2*C,x:D.x-C,y:D.y-C}},shadow:function(a){p&&p.shadow(a);return m},destroy:function(){X(m.element,"mouseenter");X(m.element,"mouseleave");o&&(o=o.destroy());p&&(p=p.destroy());
S.prototype.destroy.call(m);m=n=j=k=l=null}})}};Za=ta;r(S.prototype,{htmlCss:function(a){var b=this.element;if(b=a&&b.tagName==="SPAN"&&a.width)delete a.width,this.textWidth=b,this.updateTransform();this.styles=r(this.styles,a);B(this.element,a);return this},htmlGetBBox:function(){var a=this.element,b=this.bBox;if(!b){if(a.nodeName==="text")a.style.position="absolute";b=this.bBox={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}}return b},htmlUpdateTransform:function(){if(this.added){var a=
this.renderer,b=this.element,c=this.translateX||0,d=this.translateY||0,e=this.x||0,f=this.y||0,g=this.textAlign||"left",h={left:0,center:0.5,right:1}[g],i=this.shadows;B(b,{marginLeft:c,marginTop:d});i&&q(i,function(a){B(a,{marginLeft:c+1,marginTop:d+1})});this.inverted&&q(b.childNodes,function(c){a.invertChild(c,b)});if(b.tagName==="SPAN"){var j=this.rotation,k,l=y(this.textWidth),n=[j,g,b.innerHTML,this.textWidth].join(",");if(n!==this.cTT){k=a.fontMetrics(b.style.fontSize).b;s(j)&&this.setSpanRotation(j,
h,k);i=p(this.elemWidth,b.offsetWidth);if(i>l&&/[ \-]/.test(b.textContent||b.innerText))B(b,{width:l+"px",display:"block",whiteSpace:"normal"}),i=l;this.getSpanCorrection(i,k,h,j,g)}B(b,{left:e+(this.xCorr||0)+"px",top:f+(this.yCorr||0)+"px"});if(tb)k=b.offsetHeight;this.cTT=n}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,c){var d={},e=Aa?"-ms-transform":tb?"-webkit-transform":Ua?"MozTransform":Hb?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)";d[e+(Ua?"Origin":"-origin")]=d.transformOrigin=
b*100+"% "+c+"px";B(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c;this.yCorr=-b}});r(ta.prototype,{html:function(a,b,c){var d=this.createElement("span"),e=d.element,f=d.renderer;d.textSetter=function(a){a!==e.innerHTML&&delete this.bBox;e.innerHTML=this.textStr=a};d.xSetter=d.ySetter=d.alignSetter=d.rotationSetter=function(a,b){b==="align"&&(b="textAlign");d[b]=a;d.htmlUpdateTransform()};d.attr({text:a,x:v(b),y:v(c)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,
fontSize:this.style.fontSize});d.css=d.htmlCss;if(f.isSVG)d.add=function(a){var b,c=f.box.parentNode,j=[];if(this.parentGroup=a){if(b=a.div,!b){for(;a;)j.push(a),a=a.parentGroup;q(j.reverse(),function(a){var d;b=a.div=a.div||$(Ka,{className:F(a.element,"class")},{position:"absolute",left:(a.translateX||0)+"px",top:(a.translateY||0)+"px"},b||c);d=b.style;r(a,{translateXSetter:function(b,c){d.left=b+"px";a[c]=b;a.doTransform=!0},translateYSetter:function(b,c){d.top=b+"px";a[c]=b;a.doTransform=!0},visibilitySetter:function(a,
b){d[b]=a}})})}}else b=c;b.appendChild(e);d.added=!0;d.alignOnAdd&&d.htmlUpdateTransform();return d};return d}});var Z;if(!ba&&!ga){Z={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===Ka;(b==="shape"||e)&&d.push("left:0;top:0;width:1px;height:1px;");d.push("visibility: ",e?"hidden":"visible");c.push(' style="',d.join(""),'"/>');if(b)c=e||b==="span"||b==="img"?c.join(""):a.prepVML(c),this.element=$(c);this.renderer=a},add:function(a){var b=this.renderer,
c=this.element,d=b.box,d=a?a.element||a:d;a&&a.inverted&&b.invertChild(c,d);d.appendChild(c);this.added=!0;this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform();if(this.onAdd)this.onAdd();return this},updateTransform:S.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=aa(a*Ea),c=fa(a*Ea);B(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):P})},getSpanCorrection:function(a,
b,c,d,e){var f=d?aa(d*Ea):1,g=d?fa(d*Ea):0,h=p(this.elemHeight,this.element.offsetHeight),i;this.xCorr=f<0&&-a;this.yCorr=g<0&&-h;i=f*g<0;this.xCorr+=g*b*(i?1-c:c);this.yCorr-=f*b*(d?i?c:1-c:1);e&&e!=="left"&&(this.xCorr-=a*c*(f<0?-1:1),d&&(this.yCorr-=h*c*(g<0?-1:1)),B(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=a.length,c=[];b--;)if(ja(a[b]))c[b]=v(a[b]*10)-5;else if(a[b]==="Z")c[b]="x";else if(c[b]=a[b],a.isArc&&(a[b]==="wa"||a[b]==="at"))c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+
5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1);return c.join(" ")||"x"},clip:function(a){var b=this,c;a?(c=a.members,la(c,b),c.push(b),b.destroyClip=function(){la(c,b)},a=a.getCSS(b)):(b.destroyClip&&b.destroyClip(),a={clip:hb?"inherit":"rect(auto)"});return b.css(a)},css:S.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&Qa(a)},destroy:function(){this.destroyClip&&this.destroyClip();return S.prototype.destroy.apply(this)},on:function(a,b){this.element["on"+a]=function(){var a=
G.event;a.target=a.srcElement;b(a)};return this},cutOffPath:function(a,b){var c,a=a.split(/[ ,]/);c=a.length;if(c===9||c===11)a[c-4]=a[c-2]=y(a[c-2])-10*b;return a.join(" ")},shadow:function(a,b,c){var d=[],e,f=this.element,g=this.renderer,h,i=f.style,j,k=f.path,l,n,m,o;k&&typeof k.value!=="string"&&(k="x");n=k;if(a){m=p(a.width,3);o=(a.opacity||0.15)/m;for(e=1;e<=3;e++){l=m*2+1-2*e;c&&(n=this.cutOffPath(k.value,l+0.5));j=['<shape isShadow="true" strokeweight="',l,'" filled="false" path="',n,'" coordsize="10 10" style="',
f.style.cssText,'" />'];h=$(g.prepVML(j),null,{left:y(i.left)+p(a.offsetX,1),top:y(i.top)+p(a.offsetY,1)});if(c)h.cutOff=l+1;j=['<stroke color="',a.color||"black",'" opacity="',o*e,'"/>'];$(g.prepVML(j),null,null,h);b?b.element.appendChild(h):f.parentNode.insertBefore(h,f);d.push(h)}this.shadows=d}return this},updateShadows:sa,setAttr:function(a,b){hb?this.element[a]=b:this.element.setAttribute(a,b)},classSetter:function(a){this.element.className=a},dashstyleSetter:function(a,b,c){(c.getElementsByTagName("stroke")[0]||
$(this.renderer.prepVML(["<stroke/>"]),null,null,c))[b]=a||"solid";this[b]=a},dSetter:function(a,b,c){var d=this.shadows,a=a||[];this.d=a.join&&a.join(" ");c.path=a=this.pathToVML(a);if(d)for(c=d.length;c--;)d[c].path=d[c].cutOff?this.cutOffPath(a,d[c].cutOff):a;this.setAttr(b,a)},fillSetter:function(a,b,c){var d=c.nodeName;if(d==="SPAN")c.style.color=a;else if(d!=="IMG")c.filled=a!==P,this.setAttr("fillcolor",this.renderer.color(a,c,b,this))},opacitySetter:sa,rotationSetter:function(a,b,c){c=c.style;
this[b]=c[b]=a;c.left=-v(fa(a*Ea)+1)+"px";c.top=v(aa(a*Ea))+"px"},strokeSetter:function(a,b,c){this.setAttr("strokecolor",this.renderer.color(a,c,b))},"stroke-widthSetter":function(a,b,c){c.stroked=!!a;this[b]=a;ja(a)&&(a+="px");this.setAttr("strokeweight",a)},titleSetter:function(a,b){this.setAttr(b,a)},visibilitySetter:function(a,b,c){a==="inherit"&&(a="visible");this.shadows&&q(this.shadows,function(c){c.style[b]=a});c.nodeName==="DIV"&&(a=a==="hidden"?"-999em":0,hb||(c.style[b]=a?"visible":"hidden"),
b="top");c.style[b]=a},xSetter:function(a,b,c){this[b]=a;b==="x"?b="left":b==="y"&&(b="top");this.updateClipping?(this[b]=a,this.updateClipping()):c.style[b]=a},zIndexSetter:function(a,b,c){c.style[b]=a}};K.VMLElement=Z=ma(S,Z);Z.prototype.ySetter=Z.prototype.widthSetter=Z.prototype.heightSetter=Z.prototype.xSetter;var ia={Element:Z,isIE8:wa.indexOf("MSIE 8.0")>-1,init:function(a,b,c,d){var e;this.alignedObjects=[];d=this.createElement(Ka).css(r(this.getStyle(d),{position:"relative"}));e=d.element;
a.appendChild(d.element);this.isVML=!0;this.box=e;this.boxWrapper=d;this.cache={};this.setSize(b,c,!1);if(!x.namespaces.hcv){x.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{x.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(f){x.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},
clipRect:function(a,b,c,d){var e=this.createElement(),f=da(a);return r(e,{members:[],left:(f?a.x:a)+1,top:(f?a.y:b)+1,width:(f?a.width:c)-1,height:(f?a.height:d)-1,getCSS:function(a){var b=a.element,c=b.nodeName,a=a.inverted,d=this.top-(c==="shape"?b.offsetTop:0),e=this.left,b=e+this.width,f=d+this.height,d={clip:"rect("+v(a?e:d)+"px,"+v(a?f:b)+"px,"+v(a?b:f)+"px,"+v(a?d:e)+"px)"};!a&&hb&&c==="DIV"&&r(d,{width:b+"px",height:f+"px"});return d},updateClipping:function(){q(e.members,function(a){a.element&&
a.css(e.getCSS(a))})}})},color:function(a,b,c,d){var e=this,f,g=/^rgba/,h,i,j=P;a&&a.linearGradient?i="gradient":a&&a.radialGradient&&(i="pattern");if(i){var k,l,n=a.linearGradient||a.radialGradient,m,o,p,D,J,C="",a=a.stops,t,s=[],u=function(){h=['<fill colors="'+s.join(",")+'" opacity="',p,'" o:opacity2="',o,'" type="',i,'" ',C,'focus="100%" method="any" />'];$(e.prepVML(h),null,null,b)};m=a[0];t=a[a.length-1];m[0]>0&&a.unshift([0,m[1]]);t[0]<1&&a.push([1,t[1]]);q(a,function(a,b){g.test(a[1])?(f=
ya(a[1]),k=f.get("rgb"),l=f.get("a")):(k=a[1],l=1);s.push(a[0]*100+"% "+k);b?(p=l,D=k):(o=l,J=k)});if(c==="fill")if(i==="gradient")c=n.x1||n[0]||0,a=n.y1||n[1]||0,m=n.x2||n[2]||0,n=n.y2||n[3]||0,C='angle="'+(90-V.atan((n-a)/(m-c))*180/oa)+'"',u();else{var j=n.r,r=j*2,v=j*2,x=n.cx,z=n.cy,R=b.radialReference,w,j=function(){R&&(w=d.getBBox(),x+=(R[0]-w.x)/w.width-0.5,z+=(R[1]-w.y)/w.height-0.5,r*=R[2]/w.width,v*=R[2]/w.height);C='src="'+E.global.VMLRadialGradientURL+'" size="'+r+","+v+'" origin="0.5,0.5" position="'+
x+","+z+'" color2="'+J+'" ';u()};d.added?j():d.onAdd=j;j=D}else j=k}else if(g.test(a)&&b.tagName!=="IMG")f=ya(a),h=["<",c,' opacity="',f.get("a"),'"/>'],$(this.prepVML(h),null,null,b),j=f.get("rgb");else{j=b.getElementsByTagName(c);if(j.length)j[0].opacity=1,j[0].type="solid";j=a}return j},prepVML:function(a){var b=this.isIE8,a=a.join("");b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=a.indexOf('style="')===-1?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):
a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:");return a},text:ta.prototype.html,path:function(a){var b={coordsize:"10 10"};Ha(a)?b.d=a:da(a)&&r(b,a);return this.createElement("shape").attr(b)},circle:function(a,b,c){var d=this.symbol("circle");if(da(a))c=a.r,b=a.y,a=a.x;d.isCircle=!0;d.r=c;return d.attr({x:a,y:b})},g:function(a){var b;a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a});return this.createElement(Ka).attr(b)},image:function(a,
b,c,d,e){var f=this.createElement("img").attr({src:a});arguments.length>1&&f.attr({x:b,y:c,width:d,height:e});return f},createElement:function(a){return a==="rect"?this.symbol(a):ta.prototype.createElement.call(this,a)},invertChild:function(a,b){var c=this,d=b.style,e=a.tagName==="IMG"&&a.style;B(a,{flip:"x",left:y(d.width)-(e?y(e.top):1),top:y(d.height)-(e?y(e.left):1),rotation:-90});q(a.childNodes,function(b){c.invertChild(b,a)})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||
d,c=e.innerR,d=aa(f),i=fa(f),j=aa(g),k=fa(g);if(g-f===0)return["x"];f=["wa",a-h,b-h,a+h,b+h,a+h*d,b+h*i,a+h*j,b+h*k];e.open&&!c&&f.push("e","M",a,b);f.push("at",a-c,b-c,a+c,b+c,a+c*j,b+c*k,a+c*d,b+c*i,"x","e");f.isArc=!0;return f},circle:function(a,b,c,d,e){e&&(c=d=2*e.r);e&&e.isCircle&&(a-=c/2,b-=d/2);return["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){return ta.prototype.symbols[!s(e)||!e.r?"square":"callout"].call(0,a,b,c,d,e)}}};K.VMLRenderer=Z=function(){this.init.apply(this,
arguments)};Z.prototype=w(ta.prototype,ia);Za=Z}ta.prototype.measureSpanWidth=function(a,b){var c=x.createElement("span"),d;d=x.createTextNode(a);c.appendChild(d);B(c,b);this.box.appendChild(c);d=c.offsetWidth;Qa(c);return d};var Mb;if(ga)K.CanVGRenderer=Z=function(){xa="http://www.w3.org/1999/xhtml"},Z.prototype.symbols={},Mb=function(){function a(){var a=b.length,d;for(d=0;d<a;d++)b[d]();b=[]}var b=[];return{push:function(c,d){b.length===0&&Rb(d,a);b.push(c)}}}(),Za=Z;Ta.prototype={addLabel:function(){var a=
this.axis,b=a.options,c=a.chart,d=a.horiz,e=a.categories,f=a.names,g=this.pos,h=b.labels,i=h.rotation,j=a.tickPositions,d=d&&e&&!h.step&&!h.staggerLines&&!h.rotation&&c.plotWidth/j.length||!d&&(c.margin[3]||c.chartWidth*0.33),k=g===j[0],l=g===j[j.length-1],n,f=e?p(e[g],f[g],g):g,e=this.label,m=j.info;a.isDatetimeAxis&&m&&(n=b.dateTimeLabelFormats[m.higherRanks[g]||m.unitName]);this.isFirst=k;this.isLast=l;b=a.labelFormatter.call({axis:a,chart:c,isFirst:k,isLast:l,dateTimeLabelFormat:n,value:a.isLog?
ea(ka(f)):f});g=d&&{width:t(1,v(d-2*(h.padding||10)))+"px"};if(s(e))e&&e.attr({text:b}).css(g);else{n={align:a.labelAlign};if(ja(i))n.rotation=i;if(d&&h.ellipsis)g.HcHeight=a.len/j.length;this.label=e=s(b)&&h.enabled?c.renderer.text(b,0,0,h.useHTML).attr(n).css(r(g,h.style)).add(a.labelGroup):null;a.tickBaseline=c.renderer.fontMetrics(h.style.fontSize,e).b;i&&a.side===2&&(a.tickBaseline*=aa(i*Ea))}this.yOffset=e?p(h.y,a.tickBaseline+(a.side===2?8:-(e.getBBox().height/2))):0},getLabelSize:function(){var a=
this.label,b=this.axis;return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,c=b.horiz,d=b.options.labels,a=c?a.width:a.height,b=c?d.x-a*{left:0,center:0.5,right:1}[b.labelAlign]:0;return[b,c?a+b:a]},handleOverflow:function(a,b){var c=!0,d=this.axis,e=this.isFirst,f=this.isLast,g=d.horiz?b.x:b.y,h=d.reversed,i=d.tickPositions,j=this.getLabelSides(),k=j[0],j=j[1],l,n,m,o=this.label.line;l=o||0;n=d.labelEdge;m=d.justifyLabels&&(e||f);n[l]===
u||g+k>n[l]?n[l]=g+j:m||(c=!1);if(m){l=(n=d.justifyToPlot)?d.pos:0;n=n?l+d.len:d.chart.chartWidth;do a+=e?1:-1,m=d.ticks[i[a]];while(i[a]&&(!m||!m.label||m.label.line!==o));d=m&&m.label.xy&&m.label.xy.x+m.getLabelSides()[e?0:1];e&&!h||f&&h?g+k<l&&(g=l-k,m&&g+j>d&&(c=!1)):g+j>n&&(g=n-j,m&&g+k<d&&(c=!1));b.x=g}return c},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||
f.chartWidth)-e.right-e.left:0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i=this.axis,j=i.transA,k=i.reversed,l=i.staggerLines,a=a+e.x-(f&&d?f*j*(k?-1:1):0),b=b+this.yOffset-(f&&!d?f*j*(k?1:-1):0);if(l)c.line=g/(h||1)%l,b+=c.line*(i.labelOffset/l);return{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine(["M",a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d=this.axis,e=d.options,
f=d.chart.renderer,g=d.horiz,h=this.type,i=this.label,j=this.pos,k=e.labels,l=this.gridLine,n=h?h+"Grid":"grid",m=h?h+"Tick":"tick",o=e[n+"LineWidth"],q=e[n+"LineColor"],D=e[n+"LineDashStyle"],J=e[m+"Length"],n=e[m+"Width"]||0,C=e[m+"Color"],t=e[m+"Position"],m=this.mark,s=k.step,r=!0,v=d.tickmarkOffset,w=this.getPosition(g,j,v,b),x=w.x,w=w.y,z=g&&x===d.pos+d.len||!g&&w===d.pos?-1:1,c=p(c,1);this.isActive=!0;if(o){j=d.getPlotLinePath(j+v,o*z,b,!0);if(l===u){l={stroke:q,"stroke-width":o};if(D)l.dashstyle=
D;if(!h)l.zIndex=1;if(b)l.opacity=0;this.gridLine=l=o?f.path(j).attr(l).add(d.gridGroup):null}if(!b&&l&&j)l[this.isNew?"attr":"animate"]({d:j,opacity:c})}if(n&&J)t==="inside"&&(J=-J),d.opposite&&(J=-J),h=this.getMarkPath(x,w,J,n*z,g,f),m?m.animate({d:h,opacity:c}):this.mark=f.path(h).attr({stroke:C,"stroke-width":n,opacity:c}).add(d.axisGroup);if(i&&!isNaN(x))i.xy=w=this.getLabelPosition(x,w,i,g,k,v,a,s),this.isFirst&&!this.isLast&&!p(e.showFirstLabel,1)||this.isLast&&!this.isFirst&&!p(e.showLastLabel,
1)?r=!1:!d.isRadial&&!k.step&&!k.rotation&&!b&&c!==0&&(r=this.handleOverflow(a,w)),s&&a%s&&(r=!1),r&&!isNaN(w.y)?(w.opacity=c,i[this.isNew?"attr":"animate"](w),this.isNew=!1):i.attr("y",-9999)},destroy:function(){Pa(this,this.axis)}};K.PlotLineOrBand=function(a,b){this.axis=a;if(b)this.options=b,this.id=b.id};K.PlotLineOrBand.prototype={render:function(){var a=this,b=a.axis,c=b.horiz,d=(b.pointRange||0)/2,e=a.options,f=e.label,g=a.label,h=e.width,i=e.to,j=e.from,k=s(j)&&s(i),l=e.value,n=e.dashStyle,
m=a.svgElem,o=[],p,q=e.color,J=e.zIndex,C=e.events,r={},u=b.chart.renderer;b.isLog&&(j=za(j),i=za(i),l=za(l));if(h){if(o=b.getPlotLinePath(l,h),r={stroke:q,"stroke-width":h},n)r.dashstyle=n}else if(k){j=t(j,b.min-d);i=L(i,b.max+d);o=b.getPlotBandPath(j,i,e);if(q)r.fill=q;if(e.borderWidth)r.stroke=e.borderColor,r["stroke-width"]=e.borderWidth}else return;if(s(J))r.zIndex=J;if(m)if(o)m.animate({d:o},null,m.onGetPath);else{if(m.hide(),m.onGetPath=function(){m.show()},g)a.label=g=g.destroy()}else if(o&&
o.length&&(a.svgElem=m=u.path(o).attr(r).add(),C))for(p in d=function(b){m.on(b,function(c){C[b].apply(a,[c])})},C)d(p);if(f&&s(f.text)&&o&&o.length&&b.width>0&&b.height>0){f=w({align:c&&k&&"center",x:c?!k&&4:10,verticalAlign:!c&&k&&"middle",y:c?k?16:10:k?6:-4,rotation:c&&!k&&90},f);if(!g){r={align:f.textAlign||f.align,rotation:f.rotation};if(s(J))r.zIndex=J;a.label=g=u.text(f.text,0,0,f.useHTML).attr(r).css(f.style).add()}b=[o[1],o[4],k?o[6]:o[1]];k=[o[2],o[5],k?o[7]:o[2]];o=Oa(b);c=Oa(k);g.align(f,
!1,{x:o,y:c,width:Ca(b)-o,height:Ca(k)-c});g.show()}else g&&g.hide();return a},destroy:function(){la(this.axis.plotLinesAndBands,this);delete this.axis;Pa(this)}};na.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:M,lineColor:"#C0D0E0",lineWidth:1,minPadding:0.01,maxPadding:0.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",
minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return Ba(this.total,
-1)},style:M.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(a,b){var c=b.isX;this.horiz=a.inverted?!c:c;this.coll=(this.isXAxis=c)?"xAxis":"yAxis";this.opposite=b.opposite;this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3);this.setOptions(b);var d=
this.options,e=d.type;this.labelFormatter=d.labels.formatter||this.defaultLabelFormatter;this.userOptions=b;this.minPixelPadding=0;this.chart=a;this.reversed=d.reversed;this.zoomEnabled=d.zoomEnabled!==!1;this.categories=d.categories||e==="category";this.names=[];this.isLog=e==="logarithmic";this.isDatetimeAxis=e==="datetime";this.isLinked=s(d.linkedTo);this.tickmarkOffset=this.categories&&d.tickmarkPlacement==="between"&&p(d.tickInterval,1)===1?0.5:0;this.ticks={};this.labelEdge=[];this.minorTicks=
{};this.plotLinesAndBands=[];this.alternateBands={};this.len=0;this.minRange=this.userMinRange=d.minRange||d.maxZoom;this.range=d.range;this.offset=d.offset||0;this.stacks={};this.oldStacks={};this.min=this.max=null;this.crosshair=p(d.crosshair,ra(a.options.tooltip.crosshairs)[c?0:1],!1);var f,d=this.options.events;Ma(this,a.axes)===-1&&(c&&!this.isColorAxis?a.axes.splice(a.xAxis.length,0,this):a.axes.push(this),a[this.coll].push(this));this.series=this.series||[];if(a.inverted&&c&&this.reversed===
u)this.reversed=!0;this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(f in d)N(this,f,d[f]);if(this.isLog)this.val2lin=za,this.lin2val=ka},setOptions:function(a){this.options=w(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],w(E[this.coll],a))},defaultLabelFormatter:function(){var a=this.axis,b=this.value,c=a.categories,d=this.dateTimeLabelFormat,
e=E.lang.numericSymbols,f=e&&e.length,g,h=a.options.labels.format,a=a.isLog?b:a.tickInterval;if(h)g=Ja(h,this);else if(c)g=b;else if(d)g=cb(d,b);else if(f&&a>=1E3)for(;f--&&g===u;)c=Math.pow(1E3,f+1),a>=c&&e[f]!==null&&(g=Ba(b/c,-1)+e[f]);g===u&&(g=Q(b)>=1E4?Ba(b,0):Ba(b,-1,u,""));return g},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1;a.dataMin=a.dataMax=a.ignoreMinPadding=a.ignoreMaxPadding=null;a.buildStacks&&a.buildStacks();q(a.series,function(c){if(c.visible||!b.options.chart.ignoreHiddenSeries){var d;
d=c.options.threshold;var e;a.hasVisibleSeries=!0;a.isLog&&d<=0&&(d=null);if(a.isXAxis){if(d=c.xData,d.length)a.dataMin=L(p(a.dataMin,d[0]),Oa(d)),a.dataMax=t(p(a.dataMax,d[0]),Ca(d))}else{c.getExtremes();e=c.dataMax;c=c.dataMin;if(s(c)&&s(e))a.dataMin=L(p(a.dataMin,c),c),a.dataMax=t(p(a.dataMax,e),e);if(s(d))if(a.dataMin>=d)a.dataMin=d,a.ignoreMinPadding=!0;else if(a.dataMax<d)a.dataMax=d,a.ignoreMaxPadding=!0}}})},translate:function(a,b,c,d,e,f){var g=1,h=0,i=d?this.oldTransA:this.transA,d=d?this.oldMin:
this.min,j=this.minPixelPadding,e=(this.options.ordinal||this.isLog&&e)&&this.lin2val;if(!i)i=this.transA;if(c)g*=-1,h=this.len;this.reversed&&(g*=-1,h-=g*(this.sector||this.len));b?(a=a*g+h,a-=j,a=a/i+d,e&&(a=this.lin2val(a))):(e&&(a=this.val2lin(a)),f==="between"&&(f=0.5),a=g*(a-d)*i+h+g*j+(ja(f)?i*f*this.pointRange:0));return a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,
!0)},getPlotLinePath:function(a,b,c,d,e){var f=this.chart,g=this.left,h=this.top,i,j,k=c&&f.oldChartHeight||f.chartHeight,l=c&&f.oldChartWidth||f.chartWidth,n;i=this.transB;e=p(e,this.translate(a,null,null,c));a=c=v(e+i);i=j=v(k-e-i);if(isNaN(e))n=!0;else if(this.horiz){if(i=h,j=k-this.bottom,a<g||a>g+this.width)n=!0}else if(a=g,c=l-this.right,i<h||i>h+this.height)n=!0;return n&&!d?null:f.renderer.crispLine(["M",a,i,"L",c,j],b||1)},getLinearTickPositions:function(a,b,c){var d,e=ea(U(b/a)*a),f=ea(La(c/
a)*a),g=[];if(b===c&&ja(b))return[b];for(b=e;b<=f;){g.push(b);b=ea(b+a);if(b===d)break;d=b}return g},getMinorTickPositions:function(){var a=this.options,b=this.tickPositions,c=this.minorTickInterval,d=[],e;if(this.isLog){e=b.length;for(a=1;a<e;a++)d=d.concat(this.getLogTickPositions(c,b[a-1],b[a],!0))}else if(this.isDatetimeAxis&&a.minorTickInterval==="auto")d=d.concat(this.getTimeTicks(this.normalizeTimeTickInterval(c),this.min,this.max,a.startOfWeek)),d[0]<this.min&&d.shift();else for(b=this.min+
(b[0]-this.min)%c;b<=this.max;b+=c)d.push(b);return d},adjustForMinRange:function(){var a=this.options,b=this.min,c=this.max,d,e=this.dataMax-this.dataMin>=this.minRange,f,g,h,i,j;if(this.isXAxis&&this.minRange===u&&!this.isLog)s(a.min)||s(a.max)?this.minRange=null:(q(this.series,function(a){i=a.xData;for(g=j=a.xIncrement?1:i.length-1;g>0;g--)if(h=i[g]-i[g-1],f===u||h<f)f=h}),this.minRange=L(f*5,this.dataMax-this.dataMin));if(c-b<this.minRange){var k=this.minRange;d=(k-c+b)/2;d=[b-d,p(a.min,b-d)];
if(e)d[2]=this.dataMin;b=Ca(d);c=[b+k,p(a.max,b+k)];if(e)c[2]=this.dataMax;c=Oa(c);c-b<k&&(d[0]=c-k,d[1]=p(a.min,c-k),b=Ca(d))}this.min=b;this.max=c},setAxisTranslation:function(a){var b=this,c=b.max-b.min,d=b.axisPointRange||0,e,f=0,g=0,h=b.linkedParent,i=!!b.categories,j=b.transA;if(b.isXAxis||i||d)h?(f=h.minPointOffset,g=h.pointRangePadding):q(b.series,function(a){var h=i?1:b.isXAxis?a.pointRange:b.axisPointRange||0,j=a.options.pointPlacement,m=a.closestPointRange;h>c&&(h=0);d=t(d,h);f=t(f,Ga(j)?
0:h/2);g=t(g,j==="on"?0:h);!a.noSharedTooltip&&s(m)&&(e=s(e)?L(e,m):m)}),h=b.ordinalSlope&&e?b.ordinalSlope/e:1,b.minPointOffset=f*=h,b.pointRangePadding=g*=h,b.pointRange=L(d,c),b.closestPointRange=e;if(a)b.oldTransA=j;b.translationSlope=b.transA=j=b.len/(c+g||1);b.transB=b.horiz?b.left:b.bottom;b.minPixelPadding=j*f},setTickPositions:function(a){var b=this,c=b.chart,d=b.options,e=d.startOnTick,f=d.endOnTick,g=b.isLog,h=b.isDatetimeAxis,i=b.isXAxis,j=b.isLinked,k=b.options.tickPositioner,l=d.maxPadding,
n=d.minPadding,m=d.tickInterval,o=d.minTickInterval,Y=d.tickPixelInterval,D,J=b.categories;j?(b.linkedParent=c[b.coll][d.linkedTo],c=b.linkedParent.getExtremes(),b.min=p(c.min,c.dataMin),b.max=p(c.max,c.dataMax),d.type!==b.linkedParent.options.type&&ha(11,1)):(b.min=p(b.userMin,d.min,b.dataMin),b.max=p(b.userMax,d.max,b.dataMax));if(g)!a&&L(b.min,p(b.dataMin,b.min))<=0&&ha(10,1),b.min=ea(za(b.min)),b.max=ea(za(b.max));if(b.range&&s(b.max))b.userMin=b.min=t(b.min,b.max-b.range),b.userMax=b.max,b.range=
null;b.beforePadding&&b.beforePadding();b.adjustForMinRange();if(!J&&!b.axisPointRange&&!b.usePercentage&&!j&&s(b.min)&&s(b.max)&&(c=b.max-b.min)){if(!s(d.min)&&!s(b.userMin)&&n&&(b.dataMin<0||!b.ignoreMinPadding))b.min-=c*n;if(!s(d.max)&&!s(b.userMax)&&l&&(b.dataMax>0||!b.ignoreMaxPadding))b.max+=c*l}if(ja(d.floor))b.min=t(b.min,d.floor);if(ja(d.ceiling))b.max=L(b.max,d.ceiling);b.min===b.max||b.min===void 0||b.max===void 0?b.tickInterval=1:j&&!m&&Y===b.linkedParent.options.tickPixelInterval?b.tickInterval=
b.linkedParent.tickInterval:(b.tickInterval=p(m,J?1:(b.max-b.min)*Y/t(b.len,Y)),!s(m)&&b.len<Y&&!this.isRadial&&!this.isLog&&!J&&e&&f&&(D=!0,b.tickInterval/=4));i&&!a&&q(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)});b.setAxisTranslation(!0);b.beforeSetTickPositions&&b.beforeSetTickPositions();if(b.postProcessTickInterval)b.tickInterval=b.postProcessTickInterval(b.tickInterval);if(b.pointRange)b.tickInterval=t(b.pointRange,b.tickInterval);if(!m&&b.tickInterval<o)b.tickInterval=
o;if(!h&&!g&&!m)b.tickInterval=nb(b.tickInterval,null,mb(b.tickInterval),p(d.allowDecimals,!(b.tickInterval>1&&b.tickInterval<5&&b.max>1E3&&b.max<9999)));b.minorTickInterval=d.minorTickInterval==="auto"&&b.tickInterval?b.tickInterval/5:d.minorTickInterval;b.tickPositions=a=d.tickPositions?[].concat(d.tickPositions):k&&k.apply(b,[b.min,b.max]);if(!a)!b.ordinalPositions&&(b.max-b.min)/b.tickInterval>t(2*b.len,200)&&ha(19,!0),a=h?b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval,d.units),b.min,
b.max,d.startOfWeek,b.ordinalPositions,b.closestPointRange,!0):g?b.getLogTickPositions(b.tickInterval,b.min,b.max):b.getLinearTickPositions(b.tickInterval,b.min,b.max),D&&a.splice(1,a.length-2),b.tickPositions=a;if(!j)d=a[0],g=a[a.length-1],h=b.minPointOffset||0,e?b.min=d:b.min-h>d&&a.shift(),f?b.max=g:b.max+h<g&&a.pop(),a.length===0&&s(d)&&a.push((g+d)/2),a.length===1&&(e=Q(b.max)>1E13?1:0.001,b.min-=e,b.max+=e)},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},c=this.tickPositions,d=this._maxTicksKey=
[this.coll,this.pos,this.len].join("-");if(!this.isLinked&&!this.isDatetimeAxis&&c&&c.length>(b[d]||0)&&this.options.alignTicks!==!1)b[d]=c.length;a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,c=this.chart.maxTicks;if(c&&c[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==u){var d=this.tickAmount,e=b.length;this.tickAmount=a=c[a];if(e<a){for(;b.length<a;)b.push(ea(b[b.length-1]+this.tickInterval));this.transA*=
(e-1)/(a-1);this.max=b[b.length-1]}if(s(d)&&a!==d)this.isDirty=!0}},setScale:function(){var a=this.stacks,b,c,d,e;this.oldMin=this.min;this.oldMax=this.max;this.oldAxisLength=this.len;this.setAxisSize();e=this.len!==this.oldAxisLength;q(this.series,function(a){if(a.isDirtyData||a.isDirty||a.xAxis.isDirty)d=!0});if(e||d||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(b in a)for(c in a[b])a[b][c].total=null,a[b][c].cum=0;this.forceRedraw=
!1;this.getSeriesExtremes();this.setTickPositions();this.oldUserMin=this.userMin;this.oldUserMax=this.userMax;if(!this.isDirty)this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax}else if(!this.isXAxis){if(this.oldStacks)a=this.stacks=this.oldStacks;for(b in a)for(c in a[b])a[b][c].cum=a[b][c].total}this.setMaxTicks()},setExtremes:function(a,b,c,d,e){var f=this,g=f.chart,c=p(c,!0),e=r(e,{min:a,max:b});I(f,"setExtremes",e,function(){f.userMin=a;f.userMax=b;f.eventArgs=e;f.isDirtyExtremes=
!0;c&&g.redraw(d)})},zoom:function(a,b){var c=this.dataMin,d=this.dataMax,e=this.options;this.allowZoomOutside||(s(c)&&a<=L(c,p(e.min,c))&&(a=u),s(d)&&b>=t(d,p(e.max,d))&&(b=u));this.displayBtn=a!==u||b!==u;this.setExtremes(a,b,!1,u,{trigger:"zoom"});return!0},setAxisSize:function(){var a=this.chart,b=this.options,c=b.offsetLeft||0,d=this.horiz,e=p(b.width,a.plotWidth-c+(b.offsetRight||0)),f=p(b.height,a.plotHeight),g=p(b.top,a.plotTop),b=p(b.left,a.plotLeft+c),c=/%$/;c.test(f)&&(f=parseInt(f,10)/
100*a.plotHeight);c.test(g)&&(g=parseInt(g,10)/100*a.plotHeight+a.plotTop);this.left=b;this.top=g;this.width=e;this.height=f;this.bottom=a.chartHeight-f-g;this.right=a.chartWidth-e-b;this.len=t(d?e:f,0);this.pos=d?b:g},getExtremes:function(){var a=this.isLog;return{min:a?ea(ka(this.min)):this.min,max:a?ea(ka(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,c=b?ka(this.min):this.min,b=b?ka(this.max):
this.max;c>a||a===null?a=c:b<a&&(a=b);return this.translate(a,0,1,0,1)},autoLabelAlign:function(a){a=(p(a,0)-this.side*90+720)%360;return a>15&&a<165?"right":a>195&&a<345?"left":"center"},getOffset:function(){var a=this,b=a.chart,c=b.renderer,d=a.options,e=a.tickPositions,f=a.ticks,g=a.horiz,h=a.side,i=b.inverted?[1,0,3,2][h]:h,j,k,l=0,n,m=0,o=d.title,Y=d.labels,D=0,J=b.axisOffset,b=b.clipOffset,C=[-1,1,1,-1][h],r,v=1,w=p(Y.maxStaggerLines,5),x,y,A,z,R;a.hasData=j=a.hasVisibleSeries||s(a.min)&&s(a.max)&&
!!e;a.showAxis=k=j||p(d.showEmpty,!0);a.staggerLines=a.horiz&&Y.staggerLines;if(!a.axisGroup)a.gridGroup=c.g("grid").attr({zIndex:d.gridZIndex||1}).add(),a.axisGroup=c.g("axis").attr({zIndex:d.zIndex||2}).add(),a.labelGroup=c.g("axis-labels").attr({zIndex:Y.zIndex||7}).addClass("highcharts-"+a.coll.toLowerCase()+"-labels").add();if(j||a.isLinked){a.labelAlign=p(Y.align||a.autoLabelAlign(Y.rotation));q(e,function(b){f[b]?f[b].addLabel():f[b]=new Ta(a,b)});if(a.horiz&&!a.staggerLines&&w&&!Y.rotation){for(j=
a.reversed?[].concat(e).reverse():e;v<w;){x=[];y=!1;for(r=0;r<j.length;r++)A=j[r],z=(z=f[A].label&&f[A].label.getBBox())?z.width:0,R=r%v,z&&(A=a.translate(A),x[R]!==u&&A<x[R]&&(y=!0),x[R]=A+z);if(y)v++;else break}if(v>1)a.staggerLines=v}q(e,function(b){if(h===0||h===2||{1:"left",3:"right"}[h]===a.labelAlign)D=t(f[b].getLabelSize(),D)});if(a.staggerLines)D*=a.staggerLines,a.labelOffset=D}else for(r in f)f[r].destroy(),delete f[r];if(o&&o.text&&o.enabled!==!1){if(!a.axisTitle)a.axisTitle=c.text(o.text,
0,0,o.useHTML).attr({zIndex:7,rotation:o.rotation||0,align:o.textAlign||{low:"left",middle:"center",high:"right"}[o.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(o.style).add(a.axisGroup),a.axisTitle.isNew=!0;if(k)l=a.axisTitle.getBBox()[g?"height":"width"],n=o.offset,m=s(n)?0:p(o.margin,g?5:10);a.axisTitle[k?"show":"hide"]()}a.offset=C*p(d.offset,J[h]);c=h===2?a.tickBaseline:0;g=D+m+(D&&C*(g?p(Y.y,a.tickBaseline+8):Y.x)-c);a.axisTitleMargin=p(n,g);J[h]=t(J[h],a.axisTitleMargin+
l+C*a.offset,g);b[i]=t(b[i],U(d.lineWidth/2)*2)},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,d=b.chartHeight-this.bottom-(c?this.height:0)+d;c&&(a*=-1);return b.renderer.crispLine(["M",e?this.left:f,e?d:this.top,"L",e?b.chartWidth-this.right:f,e?d:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,c=this.top,d=this.len,e=this.options.title,f=a?b:c,g=this.opposite,h=this.offset,i=y(e.style.fontSize||
12),d={low:f+(a?0:d),middle:f+d/2,high:f+(a?d:0)}[e.align],b=(a?c+this.height:b)+(a?1:-1)*(g?-1:1)*this.axisTitleMargin+(this.side===2?i:0);return{x:a?d:b+(g?this.width:0)+h+(e.x||0),y:a?b-(g?this.height:0)+h:d+(e.y||0)}},render:function(){var a=this,b=a.horiz,c=a.reversed,d=a.chart,e=d.renderer,f=a.options,g=a.isLog,h=a.isLinked,i=a.tickPositions,j,k=a.axisTitle,l=a.ticks,n=a.minorTicks,m=a.alternateBands,o=f.stackLabels,p=f.alternateGridColor,D=a.tickmarkOffset,J=f.lineWidth,C=d.hasRendered&&s(a.oldMin)&&
!isNaN(a.oldMin),r=a.hasData,t=a.showAxis,v,w=f.labels.overflow,x=a.justifyLabels=b&&w!==!1,A;a.labelEdge.length=0;a.justifyToPlot=w==="justify";q([l,n,m],function(a){for(var b in a)a[b].isActive=!1});if(r||h)if(a.minorTickInterval&&!a.categories&&q(a.getMinorTickPositions(),function(b){n[b]||(n[b]=new Ta(a,b,"minor"));C&&n[b].isNew&&n[b].render(null,!0);n[b].render(null,!1,1)}),i.length&&(j=i.slice(),(b&&c||!b&&!c)&&j.reverse(),x&&(j=j.slice(1).concat([j[0]])),q(j,function(b,c){x&&(c=c===j.length-
1?0:c+1);if(!h||b>=a.min&&b<=a.max)l[b]||(l[b]=new Ta(a,b)),C&&l[b].isNew&&l[b].render(c,!0,0.1),l[b].render(c)}),D&&a.min===0&&(l[-1]||(l[-1]=new Ta(a,-1,null,!0)),l[-1].render(-1))),p&&q(i,function(b,c){if(c%2===0&&b<a.max)m[b]||(m[b]=new K.PlotLineOrBand(a)),v=b+D,A=i[c+1]!==u?i[c+1]+D:a.max,m[b].options={from:g?ka(v):v,to:g?ka(A):A,color:p},m[b].render(),m[b].isActive=!0}),!a._addedPlotLB)q((f.plotLines||[]).concat(f.plotBands||[]),function(b){a.addPlotBandOrLine(b)}),a._addedPlotLB=!0;q([l,n,
m],function(a){var b,c,e=[],f=va?va.duration||500:0,g=function(){for(c=e.length;c--;)a[e[c]]&&!a[e[c]].isActive&&(a[e[c]].destroy(),delete a[e[c]])};for(b in a)if(!a[b].isActive)a[b].render(b,!1,0),a[b].isActive=!1,e.push(b);a===m||!d.hasRendered||!f?g():f&&setTimeout(g,f)});if(J)b=a.getLinePath(J),a.axisLine?a.axisLine.animate({d:b}):a.axisLine=e.path(b).attr({stroke:f.lineColor,"stroke-width":J,zIndex:7}).add(a.axisGroup),a.axisLine[t?"show":"hide"]();if(k&&t)k[k.isNew?"attr":"animate"](a.getTitlePosition()),
k.isNew=!1;o&&o.enabled&&a.renderStackTotals();a.isDirty=!1},redraw:function(){this.render();q(this.plotLinesAndBands,function(a){a.render()});q(this.series,function(a){a.isDirty=!0})},destroy:function(a){var b=this,c=b.stacks,d,e=b.plotLinesAndBands;a||X(b);for(d in c)Pa(c[d]),c[d]=null;q([b.ticks,b.minorTicks,b.alternateBands],function(a){Pa(a)});for(a=e.length;a--;)e[a].destroy();q("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(a){b[a]&&(b[a]=b[a].destroy())});
this.cross&&this.cross.destroy()},drawCrosshair:function(a,b){if(this.crosshair)if((s(b)||!p(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var c,d=this.crosshair,e=d.animation;p(d.snap,!0)?s(b)&&(c=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):c=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos;c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:p(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,c);if(c===null)this.hideCrosshair();else if(this.cross)this.cross.attr({visibility:"visible"})[e?
"animate":"attr"]({d:c},e);else{e={"stroke-width":d.width||1,stroke:d.color||"#C0C0C0",zIndex:d.zIndex||2};if(d.dashStyle)e.dashstyle=d.dashStyle;this.cross=this.chart.renderer.path(c).attr(e).add()}}},hideCrosshair:function(){this.cross&&this.cross.hide()}};r(na.prototype,{getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);d&&c?d.push(c[4],c[5],c[1],c[2]):d=null;return d},addPlotBand:function(a){return this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){return this.addPlotBandOrLine(a,
"plotLines")},addPlotBandOrLine:function(a,b){var c=(new K.PlotLineOrBand(this,a)).render(),d=this.userOptions;c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c));return c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();q([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&la(b,b[e])})}});na.prototype.getTimeTicks=function(a,b,
c,d){var e=[],f={},g=E.global.useUTC,h,i=new Da(b-Sa),j=a.unitRange,k=a.count;if(s(b)){j>=A.second&&(i.setMilliseconds(0),i.setSeconds(j>=A.minute?0:k*U(i.getSeconds()/k)));if(j>=A.minute)i[Cb](j>=A.hour?0:k*U(i[pb]()/k));if(j>=A.hour)i[Db](j>=A.day?0:k*U(i[qb]()/k));if(j>=A.day)i[sb](j>=A.month?1:k*U(i[Xa]()/k));j>=A.month&&(i[Eb](j>=A.year?0:k*U(i[fb]()/k)),h=i[gb]());j>=A.year&&(h-=h%k,i[Fb](h));if(j===A.week)i[sb](i[Xa]()-i[rb]()+p(d,1));b=1;Sa&&(i=new Da(i.getTime()+Sa));h=i[gb]();for(var d=
i.getTime(),l=i[fb](),n=i[Xa](),m=(A.day+(g?Sa:i.getTimezoneOffset()*6E4))%A.day;d<c;)e.push(d),j===A.year?d=eb(h+b*k,0):j===A.month?d=eb(h,l+b*k):!g&&(j===A.day||j===A.week)?d=eb(h,l,n+b*k*(j===A.day?1:7)):d+=j*k,b++;e.push(d);q(wb(e,function(a){return j<=A.hour&&a%A.day===m}),function(a){f[a]="day"})}e.info=r(a,{higherRanks:f,totalRange:j*k});return e};na.prototype.normalizeTimeTickInterval=function(a,b){var c=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",
[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],d=c[c.length-1],e=A[d[0]],f=d[1],g;for(g=0;g<c.length;g++)if(d=c[g],e=A[d[0]],f=d[1],c[g+1]&&a<=(e*f[f.length-1]+A[c[g+1][0]])/2)break;e===A.year&&a<5*e&&(f=[1,2,5]);c=nb(a/e,f,d[0]==="year"?t(mb(a/e),1):1);return{unitRange:e,count:c,unitName:d[0]}};na.prototype.getLogTickPositions=function(a,b,c,d){var e=this.options,f=this.len,g=[];if(!d)this._minorAutoInterval=null;if(a>=0.5)a=v(a),g=this.getLinearTickPositions(a,
b,c);else if(a>=0.08)for(var f=U(b),h,i,j,k,l,e=a>0.3?[1,2,4]:a>0.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];f<c+1&&!l;f++){i=e.length;for(h=0;h<i&&!l;h++)j=za(ka(f)*e[h]),j>b&&(!d||k<=c)&&k!==u&&g.push(k),k>c&&(l=!0),k=j}else if(b=ka(b),c=ka(c),a=e[d?"minorTickInterval":"tickInterval"],a=p(a==="auto"?null:a,this._minorAutoInterval,(c-b)*(e.tickPixelInterval/(d?5:1))/((d?f/this.tickPositions.length:f)||1)),a=nb(a,null,mb(a)),g=Va(this.getLinearTickPositions(a,b,c),za),!d)this._minorAutoInterval=a/5;if(!d)this.tickInterval=
a;return g};var Nb=K.Tooltip=function(){this.init.apply(this,arguments)};Nb.prototype={init:function(a,b){var c=b.borderWidth,d=b.style,e=y(d.padding);this.chart=a;this.options=b;this.crosshairs=[];this.now={x:0,y:0};this.isHidden=!0;this.label=a.renderer.label("",0,0,b.shape||"callout",null,null,b.useHTML,null,"tooltip").attr({padding:e,fill:b.backgroundColor,"stroke-width":c,r:b.borderRadius,zIndex:8}).css(d).css({padding:0}).add().attr({y:-9999});ga||this.label.shadow(b.shadow);this.shared=b.shared},
destroy:function(){if(this.label)this.label=this.label.destroy();clearTimeout(this.hideTimer);clearTimeout(this.tooltipTimeout)},move:function(a,b,c,d){var e=this,f=e.now,g=e.options.animation!==!1&&!e.isHidden&&(Q(a-f.x)>1||Q(b-f.y)>1),h=e.followPointer||e.len>1;r(f,{x:g?(2*f.x+a)/3:a,y:g?(f.y+b)/2:b,anchorX:h?u:g?(2*f.anchorX+c)/3:c,anchorY:h?u:g?(f.anchorY+d)/2:d});e.label.attr(f);if(g)clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){e&&e.move(a,b,c,d)},32)},hide:function(a){var b=
this,c;clearTimeout(this.hideTimer);if(!this.isHidden)c=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){b.label.fadeOut();b.isHidden=!0},p(a,this.options.hideDelay,500)),c&&q(c,function(a){a.setState()}),this.chart.hoverPoints=null},getAnchor:function(a,b){var c,d=this.chart,e=d.inverted,f=d.plotTop,g=0,h=0,i,a=ra(a);c=a[0].tooltipPos;this.followPointer&&b&&(b.chartX===u&&(b=d.pointer.normalize(b)),c=[b.chartX-d.plotLeft,b.chartY-f]);c||(q(a,function(a){i=a.series.yAxis;g+=a.plotX;h+=
(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!e&&i?i.top-f:0)}),g/=a.length,h/=a.length,c=[e?d.plotWidth-h:g,this.shared&&!e&&a.length>1&&b?b.chartY-f:e?d.plotHeight-g:h]);return Va(c,v)},getPosition:function(a,b,c){var d=this.chart,e=this.distance,f={},g,h=["y",d.chartHeight,b,c.plotY+d.plotTop],i=["x",d.chartWidth,a,c.plotX+d.plotLeft],j=c.ttBelow||d.inverted&&!c.negative||!d.inverted&&c.negative,k=function(a,b,c,d){var g=c<d-e,b=d+e+c<b,c=d-e-c;d+=e;if(j&&b)f[a]=d;else if(!j&&g)f[a]=c;else if(g)f[a]=
c;else if(b)f[a]=d;else return!1},l=function(a,b,c,d){if(d<e||d>b-e)return!1;else f[a]=d<c/2?1:d>b-c/2?b-c-2:d-c/2},n=function(a){var b=h;h=i;i=b;g=a},m=function(){k.apply(0,h)!==!1?l.apply(0,i)===!1&&!g&&(n(!0),m()):g?f.x=f.y=0:(n(!0),m())};(d.inverted||this.len>1)&&n();m();return f},defaultFormatter:function(a){var b=this.points||ra(this),c=b[0].series,d;d=[a.tooltipHeaderFormatter(b[0])];q(b,function(a){c=a.series;d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||a.point.tooltipFormatter(c.tooltipOptions.pointFormat))});
d.push(a.options.footerFormat||"");return d.join("")},refresh:function(a,b){var c=this.chart,d=this.label,e=this.options,f,g,h={},i,j=[];i=e.formatter||this.defaultFormatter;var h=c.hoverPoints,k,l=this.shared;clearTimeout(this.hideTimer);this.followPointer=ra(a)[0].series.tooltipOptions.followPointer;g=this.getAnchor(a,b);f=g[0];g=g[1];l&&(!a.series||!a.series.noSharedTooltip)?(c.hoverPoints=a,h&&q(h,function(a){a.setState()}),q(a,function(a){a.setState("hover");j.push(a.getLabelConfig())}),h={x:a[0].category,
y:a[0].y},h.points=j,this.len=j.length,a=a[0]):h=a.getLabelConfig();i=i.call(h,this);h=a.series;this.distance=p(h.tooltipOptions.distance,16);i===!1?this.hide():(this.isHidden&&(bb(d),d.attr("opacity",1).show()),d.attr({text:i}),k=e.borderColor||a.color||h.color||"#606060",d.attr({stroke:k}),this.updatePosition({plotX:f,plotY:g,negative:a.negative,ttBelow:a.ttBelow}),this.isHidden=!1);I(c,"tooltipRefresh",{text:i,x:f+c.plotLeft,y:g+c.plotTop,borderColor:k})},updatePosition:function(a){var b=this.chart,
c=this.label,c=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(v(c.x),v(c.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)},tooltipHeaderFormatter:function(a){var b=a.series,c=b.tooltipOptions,d=c.dateTimeLabelFormats,e=c.xDateFormat,f=b.xAxis,g=f&&f.options.type==="datetime"&&ja(a.key),c=c.headerFormat,f=f&&f.closestPointRange,h;if(g&&!e){if(f)for(h in A){if(A[h]>=f||A[h]<=A.day&&a.key%A[h]>0){e=d[h];break}}else e=d.day;e=e||d.year}g&&e&&(c=c.replace("{point.key}","{point.key:"+
e+"}"));return Ja(c,{point:a,series:b})}};var pa;$a=x.documentElement.ontouchstart!==u;var Wa=K.Pointer=function(a,b){this.init(a,b)};Wa.prototype={init:function(a,b){var c=b.chart,d=c.events,e=ga?"":c.zoomType,c=a.inverted,f;this.options=b;this.chart=a;this.zoomX=f=/x/.test(e);this.zoomY=e=/y/.test(e);this.zoomHor=f&&!c||e&&c;this.zoomVert=e&&!c||f&&c;this.hasZoom=f||e;this.runChartClick=d&&!!d.click;this.pinchDown=[];this.lastValidTouch={};if(K.Tooltip&&b.tooltip.enabled)a.tooltip=new Nb(a,b.tooltip),
this.followTouchMove=b.tooltip.followTouchMove;this.setDOMEvents()},normalize:function(a,b){var c,d,a=a||window.event,a=Tb(a);if(!a.target)a.target=a.srcElement;d=a.touches?a.touches.length?a.touches.item(0):a.changedTouches[0]:a;if(!b)this.chartPosition=b=Sb(this.chart.container);d.pageX===u?(c=t(a.x,a.clientX-b.left),d=a.y):(c=d.pageX-b.left,d=d.pageY-b.top);return r(a,{chartX:v(c),chartY:v(d)})},getCoordinates:function(a){var b={xAxis:[],yAxis:[]};q(this.chart.axes,function(c){b[c.isXAxis?"xAxis":
"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})});return b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var b=this.chart,c=b.series,d=b.tooltip,e,f,g=b.hoverPoint,h=b.hoverSeries,i,j,k=b.chartWidth,l=this.getIndex(a);if(d&&this.options.tooltip.shared&&(!h||!h.noSharedTooltip)){f=[];i=c.length;for(j=0;j<i;j++)if(c[j].visible&&c[j].options.enableMouseTracking!==!1&&!c[j].noSharedTooltip&&
c[j].singularTooltips!==!0&&c[j].tooltipPoints.length&&(e=c[j].tooltipPoints[l])&&e.series)e._dist=Q(l-e.clientX),k=L(k,e._dist),f.push(e);for(i=f.length;i--;)f[i]._dist>k&&f.splice(i,1);if(f.length&&f[0].clientX!==this.hoverX)d.refresh(f,a),this.hoverX=f[0].clientX}c=h&&h.tooltipOptions.followPointer;if(h&&h.tracker&&!c){if((e=h.tooltipPoints[l])&&e!==g)e.onMouseOver(a)}else d&&c&&!d.isHidden&&(h=d.getAnchor([{}],a),d.updatePosition({plotX:h[0],plotY:h[1]}));if(d&&!this._onDocumentMouseMove)this._onDocumentMouseMove=
function(a){if(W[pa])W[pa].pointer.onDocumentMouseMove(a)},N(x,"mousemove",this._onDocumentMouseMove);q(b.axes,function(b){b.drawCrosshair(a,p(e,g))})},reset:function(a,b){var c=this.chart,d=c.hoverSeries,e=c.hoverPoint,f=c.tooltip,g=f&&f.shared?c.hoverPoints:e;(a=a&&f&&g)&&ra(g)[0].plotX===u&&(a=!1);if(a)f.refresh(g),e&&e.setState(e.state,!0);else{if(e)e.onMouseOut();if(d)d.onMouseOut();f&&f.hide(b);if(this._onDocumentMouseMove)X(x,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=
null;q(c.axes,function(a){a.hideCrosshair()});this.hoverX=null}},scaleGroups:function(a,b){var c=this.chart,d;q(c.series,function(e){d=a||e.getPlotBox();e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(d),e.markerGroup&&(e.markerGroup.attr(d),e.markerGroup.clip(b?c.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(d))});c.clipRect.attr(b||c.clipBox)},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type;b.cancelClick=!1;b.mouseDownX=this.mouseDownX=a.chartX;b.mouseDownY=this.mouseDownY=a.chartY},
drag:function(a){var b=this.chart,c=b.options.chart,d=a.chartX,e=a.chartY,f=this.zoomHor,g=this.zoomVert,h=b.plotLeft,i=b.plotTop,j=b.plotWidth,k=b.plotHeight,l,n=this.mouseDownX,m=this.mouseDownY,o=c.panKey&&a[c.panKey+"Key"];d<h?d=h:d>h+j&&(d=h+j);e<i?e=i:e>i+k&&(e=i+k);this.hasDragged=Math.sqrt(Math.pow(n-d,2)+Math.pow(m-e,2));if(this.hasDragged>10){l=b.isInsidePlot(n-h,m-i);if(b.hasCartesianSeries&&(this.zoomX||this.zoomY)&&l&&!o&&!this.selectionMarker)this.selectionMarker=b.renderer.rect(h,i,
f?1:j,g?1:k,0).attr({fill:c.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add();this.selectionMarker&&f&&(d-=n,this.selectionMarker.attr({width:Q(d),x:(d>0?0:d)+n}));this.selectionMarker&&g&&(d=e-m,this.selectionMarker.attr({height:Q(d),y:(d>0?0:d)+m}));l&&!this.selectionMarker&&c.panning&&b.pan(a,c.panning)}},drop:function(a){var b=this.chart,c=this.hasPinched;if(this.selectionMarker){var d={xAxis:[],yAxis:[],originalEvent:a.originalEvent||a},e=this.selectionMarker,f=e.attr?e.attr("x"):
e.x,g=e.attr?e.attr("y"):e.y,h=e.attr?e.attr("width"):e.width,i=e.attr?e.attr("height"):e.height,j;if(this.hasDragged||c)q(b.axes,function(b){if(b.zoomEnabled){var c=b.horiz,e=a.type==="touchend"?b.minPixelPadding:0,m=b.toValue((c?f:g)+e),c=b.toValue((c?f+h:g+i)-e);!isNaN(m)&&!isNaN(c)&&(d[b.coll].push({axis:b,min:L(m,c),max:t(m,c)}),j=!0)}}),j&&I(b,"selection",d,function(a){b.zoom(r(a,c?{animation:!1}:null))});this.selectionMarker=this.selectionMarker.destroy();c&&this.scaleGroups()}if(b)B(b.container,
{cursor:b._cursor}),b.cancelClick=this.hasDragged>10,b.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[]},onContainerMouseDown:function(a){a=this.normalize(a);a.preventDefault&&a.preventDefault();this.dragStart(a)},onDocumentMouseUp:function(a){W[pa]&&W[pa].pointer.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition,d=b.hoverSeries,a=this.normalize(a,c);c&&d&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&
this.reset()},onContainerMouseLeave:function(){var a=W[pa];if(a)a.pointer.reset(),a.pointer.chartPosition=null},onContainerMouseMove:function(a){var b=this.chart;pa=b.index;a=this.normalize(a);a.returnValue=!1;b.mouseIsDown==="mousedown"&&this.drag(a);(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)},inClass:function(a,b){for(var c;a;){if(c=F(a,"class"))if(c.indexOf(b)!==-1)return!0;else if(c.indexOf("highcharts-container")!==
-1)return!1;a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,c=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;if(b&&!b.options.stickyTracking&&!this.inClass(a,"highcharts-tooltip")&&c!==b)b.onMouseOut()},onContainerClick:function(a){var b=this.chart,c=b.hoverPoint,d=b.plotLeft,e=b.plotTop,a=this.normalize(a);a.cancelBubble=!0;b.cancelClick||(c&&this.inClass(a.target,"highcharts-tracker")?(I(c.series,"click",r(a,{point:c})),b.hoverPoint&&c.firePointEvent("click",
a)):(r(a,this.getCoordinates(a)),b.isInsidePlot(a.chartX-d,a.chartY-e)&&I(b,"click",a)))},setDOMEvents:function(){var a=this,b=a.chart.container;b.onmousedown=function(b){a.onContainerMouseDown(b)};b.onmousemove=function(b){a.onContainerMouseMove(b)};b.onclick=function(b){a.onContainerClick(b)};N(b,"mouseleave",a.onContainerMouseLeave);ab===1&&N(x,"mouseup",a.onDocumentMouseUp);if($a)b.ontouchstart=function(b){a.onContainerTouchStart(b)},b.ontouchmove=function(b){a.onContainerTouchMove(b)},ab===1&&
N(x,"touchend",a.onDocumentTouchEnd)},destroy:function(){var a;X(this.chart.container,"mouseleave",this.onContainerMouseLeave);ab||(X(x,"mouseup",this.onDocumentMouseUp),X(x,"touchend",this.onDocumentTouchEnd));clearInterval(this.tooltipTimeout);for(a in this)this[a]=null}};r(K.Pointer.prototype,{pinchTranslate:function(a,b,c,d,e,f){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,a,b,c,d,e,f);(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,a,b,c,d,e,f)},pinchTranslateDirection:function(a,
b,c,d,e,f,g,h){var i=this.chart,j=a?"x":"y",k=a?"X":"Y",l="chart"+k,n=a?"width":"height",m=i["plot"+(a?"Left":"Top")],o,p,q=h||1,r=i.inverted,C=i.bounds[a?"h":"v"],t=b.length===1,s=b[0][l],v=c[0][l],u=!t&&b[1][l],w=!t&&c[1][l],x,c=function(){!t&&Q(s-u)>20&&(q=h||Q(v-w)/Q(s-u));p=(m-v)/q+s;o=i["plot"+(a?"Width":"Height")]/q};c();b=p;b<C.min?(b=C.min,x=!0):b+o>C.max&&(b=C.max-o,x=!0);x?(v-=0.8*(v-g[j][0]),t||(w-=0.8*(w-g[j][1])),c()):g[j]=[v,w];r||(f[j]=p-m,f[n]=o);f=r?1/q:q;e[n]=o;e[j]=b;d[r?a?"scaleY":
"scaleX":"scale"+k]=q;d["translate"+k]=f*m+(v-f*s)},pinch:function(a){var b=this,c=b.chart,d=b.pinchDown,e=b.followTouchMove,f=a.touches,g=f.length,h=b.lastValidTouch,i=b.hasZoom,j=b.selectionMarker,k={},l=g===1&&(b.inClass(a.target,"highcharts-tracker")&&c.runTrackerClick||b.runChartClick),n={};(i||e)&&!l&&a.preventDefault();Va(f,function(a){return b.normalize(a)});if(a.type==="touchstart")q(f,function(a,b){d[b]={chartX:a.chartX,chartY:a.chartY}}),h.x=[d[0].chartX,d[1]&&d[1].chartX],h.y=[d[0].chartY,
d[1]&&d[1].chartY],q(c.axes,function(a){if(a.zoomEnabled){var b=c.bounds[a.horiz?"h":"v"],d=a.minPixelPadding,e=a.toPixels(p(a.options.min,a.dataMin)),f=a.toPixels(p(a.options.max,a.dataMax)),g=L(e,f),e=t(e,f);b.min=L(a.pos,g-d);b.max=t(a.pos+a.len,e+d)}}),b.res=!0;else if(d.length){if(!j)b.selectionMarker=j=r({destroy:sa},c.plotBox);b.pinchTranslate(d,f,k,j,n,h);b.hasPinched=i;b.scaleGroups(k,n);if(!i&&e&&g===1)this.runPointActions(b.normalize(a));else if(b.res)b.res=!1,this.reset(!1,0)}},onContainerTouchStart:function(a){var b=
this.chart;pa=b.index;a.touches.length===1?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),this.pinch(a)):this.reset()):a.touches.length===2&&this.pinch(a)},onContainerTouchMove:function(a){(a.touches.length===1||a.touches.length===2)&&this.pinch(a)},onDocumentTouchEnd:function(a){W[pa]&&W[pa].pointer.drop(a)}});if(G.PointerEvent||G.MSPointerEvent){var ua={},zb=!!G.PointerEvent,Xb=function(){var a,b=[];b.item=function(a){return this[a]};for(a in ua)ua.hasOwnProperty(a)&&
b.push({pageX:ua[a].pageX,pageY:ua[a].pageY,target:ua[a].target});return b},Ab=function(a,b,c,d){a=a.originalEvent||a;if((a.pointerType==="touch"||a.pointerType===a.MSPOINTER_TYPE_TOUCH)&&W[pa])d(a),d=W[pa].pointer,d[b]({type:c,target:a.currentTarget,preventDefault:sa,touches:Xb()})};r(Wa.prototype,{onContainerPointerDown:function(a){Ab(a,"onContainerTouchStart","touchstart",function(a){ua[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}})},onContainerPointerMove:function(a){Ab(a,
"onContainerTouchMove","touchmove",function(a){ua[a.pointerId]={pageX:a.pageX,pageY:a.pageY};if(!ua[a.pointerId].target)ua[a.pointerId].target=a.currentTarget})},onDocumentPointerUp:function(a){Ab(a,"onContainerTouchEnd","touchend",function(a){delete ua[a.pointerId]})},batchMSEvents:function(a){a(this.chart.container,zb?"pointerdown":"MSPointerDown",this.onContainerPointerDown);a(this.chart.container,zb?"pointermove":"MSPointerMove",this.onContainerPointerMove);a(x,zb?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}});
Na(Wa.prototype,"init",function(a,b,c){a.call(this,b,c);(this.hasZoom||this.followTouchMove)&&B(b.container,{"-ms-touch-action":P,"touch-action":P})});Na(Wa.prototype,"setDOMEvents",function(a){a.apply(this);(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(N)});Na(Wa.prototype,"destroy",function(a){this.batchMSEvents(X);a.call(this)})}var lb=K.Legend=function(a,b){this.init(a,b)};lb.prototype={init:function(a,b){var c=this,d=b.itemStyle,e=p(b.padding,8),f=b.itemMarginTop||0;this.options=b;
if(b.enabled)c.itemStyle=d,c.itemHiddenStyle=w(d,b.itemHiddenStyle),c.itemMarginTop=f,c.padding=e,c.initialItemX=e,c.initialItemY=e-5,c.maxItemWidth=0,c.chart=a,c.itemHeight=0,c.lastLineHeight=0,c.symbolWidth=p(b.symbolWidth,16),c.pages=[],c.render(),N(c.chart,"endResize",function(){c.positionCheckboxes()})},colorizeItem:function(a,b){var c=this.options,d=a.legendItem,e=a.legendLine,f=a.legendSymbol,g=this.itemHiddenStyle.color,c=b?c.itemStyle.color:g,h=b?a.legendColor||a.color||"#CCC":g,g=a.options&&
a.options.marker,i={fill:h},j;d&&d.css({fill:c,color:c});e&&e.attr({stroke:h});if(f){if(g&&f.isMarker)for(j in i.stroke=h,g=a.convertAttribs(g),g)d=g[j],d!==u&&(i[j]=d);f.attr(i)}},positionItem:function(a){var b=this.options,c=b.symbolPadding,b=!b.rtl,d=a._legendItemPos,e=d[0],d=d[1],f=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?e:this.legendWidth-e-2*c-4,d);if(f)f.x=e,f.y=d},destroyItem:function(a){var b=a.checkbox;q(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&
(a[b]=a[b].destroy())});b&&Qa(a.checkbox)},destroy:function(){var a=this.group,b=this.box;if(b)this.box=b.destroy();if(a)this.group=a.destroy()},positionCheckboxes:function(a){var b=this.group.alignAttr,c,d=this.clipHeight||this.legendHeight;if(b)c=b.translateY,q(this.allItems,function(e){var f=e.checkbox,g;f&&(g=c+f.y+(a||0)+3,B(f,{left:b.translateX+e.checkboxOffset+f.x-20+"px",top:g+"px",display:g>c-6&&g<c+d-6?"":P}))})},renderTitle:function(){var a=this.padding,b=this.options.title,c=0;if(b.text){if(!this.title)this.title=
this.chart.renderer.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group);a=this.title.getBBox();c=a.height;this.offsetWidth=a.width;this.contentGroup.attr({translateY:c})}this.titleHeight=c},renderItem:function(a){var b=this.chart,c=b.renderer,d=this.options,e=d.layout==="horizontal",f=this.symbolWidth,g=d.symbolPadding,h=this.itemStyle,i=this.itemHiddenStyle,j=this.padding,k=e?p(d.itemDistance,20):0,l=!d.rtl,n=d.width,m=d.itemMarginBottom||0,
o=this.itemMarginTop,q=this.initialItemX,r=a.legendItem,s=a.series&&a.series.drawLegendSymbol?a.series:a,C=s.options,C=this.createCheckboxForItem&&C&&C.showCheckbox,u=d.useHTML;if(!r){a.legendGroup=c.g("legend-item").attr({zIndex:1}).add(this.scrollGroup);a.legendItem=r=c.text(d.labelFormat?Ja(d.labelFormat,a):d.labelFormatter.call(a),l?f+g:-g,this.baseline||0,u).css(w(a.visible?h:i)).attr({align:l?"left":"right",zIndex:2}).add(a.legendGroup);if(!this.baseline)this.baseline=c.fontMetrics(h.fontSize,
r).f+3+o,r.attr("y",this.baseline);s.drawLegendSymbol(this,a);this.setItemEvents&&this.setItemEvents(a,r,u,h,i);this.colorizeItem(a,a.visible);C&&this.createCheckboxForItem(a)}c=r.getBBox();f=a.checkboxOffset=d.itemWidth||a.legendItemWidth||f+g+c.width+k+(C?20:0);this.itemHeight=g=v(a.legendItemHeight||c.height);if(e&&this.itemX-q+f>(n||b.chartWidth-2*j-q-d.x))this.itemX=q,this.itemY+=o+this.lastLineHeight+m,this.lastLineHeight=0;this.maxItemWidth=t(this.maxItemWidth,f);this.lastItemY=o+this.itemY+
m;this.lastLineHeight=t(g,this.lastLineHeight);a._legendItemPos=[this.itemX,this.itemY];e?this.itemX+=f:(this.itemY+=o+g+m,this.lastLineHeight=g);this.offsetWidth=n||t((e?this.itemX-q-k:f)+j,this.offsetWidth)},getAllItems:function(){var a=[];q(this.chart.series,function(b){var c=b.options;if(p(c.showInLegend,!s(c.linkedTo)?u:!1,!0))a=a.concat(b.legendItems||(c.legendType==="point"?b.data:b))});return a},render:function(){var a=this,b=a.chart,c=b.renderer,d=a.group,e,f,g,h,i=a.box,j=a.options,k=a.padding,
l=j.borderWidth,n=j.backgroundColor;a.itemX=a.initialItemX;a.itemY=a.initialItemY;a.offsetWidth=0;a.lastItemY=0;if(!d)a.group=d=c.g("legend").attr({zIndex:7}).add(),a.contentGroup=c.g().attr({zIndex:1}).add(d),a.scrollGroup=c.g().add(a.contentGroup);a.renderTitle();e=a.getAllItems();ob(e,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)});j.reversed&&e.reverse();a.allItems=e;a.display=f=!!e.length;q(e,function(b){a.renderItem(b)});g=j.width||a.offsetWidth;
h=a.lastItemY+a.lastLineHeight+a.titleHeight;h=a.handleOverflow(h);if(l||n){g+=k;h+=k;if(i){if(g>0&&h>0)i[i.isNew?"attr":"animate"](i.crisp({width:g,height:h})),i.isNew=!1}else a.box=i=c.rect(0,0,g,h,j.borderRadius,l||0).attr({stroke:j.borderColor,"stroke-width":l||0,fill:n||P}).add(d).shadow(j.shadow),i.isNew=!0;i[f?"show":"hide"]()}a.legendWidth=g;a.legendHeight=h;q(e,function(b){a.positionItem(b)});f&&d.align(r({width:g,height:h},j),!0,"spacingBox");b.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var b=
this,c=this.chart,d=c.renderer,e=this.options,f=e.y,f=c.spacingBox.height+(e.verticalAlign==="top"?-f:f)-this.padding,g=e.maxHeight,h,i=this.clipRect,j=e.navigation,k=p(j.animation,!0),l=j.arrowSize||12,n=this.nav,m=this.pages,o,r=this.allItems;e.layout==="horizontal"&&(f/=2);g&&(f=L(f,g));m.length=0;if(a>f&&!e.useHTML){this.clipHeight=h=t(f-20-this.titleHeight-this.padding,0);this.currentPage=p(this.currentPage,1);this.fullHeight=a;q(r,function(a,b){var c=a._legendItemPos[1],d=v(a.legendItem.getBBox().height),
e=m.length;if(!e||c-m[e-1]>h&&(o||c)!==m[e-1])m.push(o||c),e++;b===r.length-1&&c+d-m[e-1]>h&&m.push(c);c!==o&&(o=c)});if(!i)i=b.clipRect=d.clipRect(0,this.padding,9999,0),b.contentGroup.clip(i);i.attr({height:h});if(!n)this.nav=n=d.g().attr({zIndex:1}).add(this.group),this.up=d.symbol("triangle",0,0,l,l).on("click",function(){b.scroll(-1,k)}).add(n),this.pager=d.text("",15,10).css(j.style).add(n),this.down=d.symbol("triangle-down",0,0,l,l).on("click",function(){b.scroll(1,k)}).add(n);b.scroll(0);
a=f}else if(n)i.attr({height:c.chartHeight}),n.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0;return a},scroll:function(a,b){var c=this.pages,d=c.length,e=this.currentPage+a,f=this.clipHeight,g=this.options.navigation,h=g.activeColor,g=g.inactiveColor,i=this.pager,j=this.padding;e>d&&(e=d);if(e>0)b!==u&&Ra(b,this.chart),this.nav.attr({translateX:j,translateY:f+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:e===1?g:h}).css({cursor:e===1?"default":"pointer"}),
i.attr({text:e+"/"+d}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?g:h}).css({cursor:e===d?"default":"pointer"}),c=-c[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),this.currentPage=e,this.positionCheckboxes(c)}};M=K.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-c/2,a.symbolWidth,c,a.options.symbolRadius||0).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var b=
this.options,c=b.marker,d;d=a.symbolWidth;var e=this.chart.renderer,f=this.legendGroup,a=a.baseline-v(e.fontMetrics(a.options.itemStyle.fontSize,this.legendItem).b*0.3),g;if(b.lineWidth){g={"stroke-width":b.lineWidth};if(b.dashStyle)g.dashstyle=b.dashStyle;this.legendLine=e.path(["M",0,a,"L",d,a]).attr(g).add(f)}if(c&&c.enabled!==!1)b=c.radius,this.legendSymbol=d=e.symbol(this.symbol,d/2-b,a-b,2*b,2*b).add(f),d.isMarker=!0}};(/Trident\/7\.0/.test(wa)||Ua)&&Na(lb.prototype,"positionItem",function(a,
b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};d();setTimeout(d)});Ya.prototype={init:function(a,b){var c,d=a.series;a.series=null;c=w(E,a);c.series=a.series=d;this.userOptions=a;d=c.chart;this.margin=this.splashArray("margin",d);this.spacing=this.splashArray("spacing",d);var e=d.events;this.bounds={h:{},v:{}};this.callback=b;this.isResizing=0;this.options=c;this.axes=[];this.series=[];this.hasCartesianSeries=d.showAxes;var f=this,g;f.index=W.length;W.push(f);ab++;d.reflow!==!1&&N(f,"load",
function(){f.initReflow()});if(e)for(g in e)N(f,g,e[g]);f.xAxis=[];f.yAxis=[];f.animation=ga?!1:p(d.animation,!0);f.pointCount=f.colorCounter=f.symbolCounter=0;f.firstRender()},initSeries:function(a){var b=this.options.chart;(b=H[a.type||b.type||b.defaultSeriesType])||ha(17,!0);b=new b;b.init(this,a);return b},isInsidePlot:function(a,b,c){var d=c?b:a,a=c?a:b;return d>=0&&d<=this.plotWidth&&a>=0&&a<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&q(this.axes,function(a){a.adjustTickAmount()});
this.maxTicks=null},redraw:function(a){var b=this.axes,c=this.series,d=this.pointer,e=this.legend,f=this.isDirtyLegend,g,h,i=this.hasCartesianSeries,j=this.isDirtyBox,k=c.length,l=k,n=this.renderer,m=n.isHidden(),o=[];Ra(a,this);m&&this.cloneRenderTo();for(this.layOutTitles();l--;)if(a=c[l],a.options.stacking&&(g=!0,a.isDirty)){h=!0;break}if(h)for(l=k;l--;)if(a=c[l],a.options.stacking)a.isDirty=!0;q(c,function(a){a.isDirty&&a.options.legendType==="point"&&(f=!0)});if(f&&e.options.enabled)e.render(),
this.isDirtyLegend=!1;g&&this.getStacks();if(i){if(!this.isResizing)this.maxTicks=null,q(b,function(a){a.setScale()});this.adjustTickAmounts()}this.getMargins();i&&(q(b,function(a){a.isDirty&&(j=!0)}),q(b,function(a){if(a.isDirtyExtremes)a.isDirtyExtremes=!1,o.push(function(){I(a,"afterSetExtremes",r(a.eventArgs,a.getExtremes()));delete a.eventArgs});(j||g)&&a.redraw()}));j&&this.drawChartBox();q(c,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()});d&&d.reset(!0);n.draw();I(this,
"redraw");m&&this.cloneRenderTo(!0);q(o,function(a){a.call()})},get:function(a){var b=this.axes,c=this.series,d,e;for(d=0;d<b.length;d++)if(b[d].options.id===a)return b[d];for(d=0;d<c.length;d++)if(c[d].options.id===a)return c[d];for(d=0;d<c.length;d++){e=c[d].points||[];for(b=0;b<e.length;b++)if(e[b].id===a)return e[b]}return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis=ra(b.xAxis||{}),b=b.yAxis=ra(b.yAxis||{});q(c,function(a,b){a.index=b;a.isX=!0});q(b,function(a,b){a.index=b});
c=c.concat(b);q(c,function(b){new na(a,b)});a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];q(this.series,function(b){a=a.concat(wb(b.points||[],function(a){return a.selected}))});return a},getSelectedSeries:function(){return wb(this.series,function(a){return a.selected})},getStacks:function(){var a=this;q(a.yAxis,function(a){if(a.stacks&&a.hasVisibleSeries)a.oldStacks=a.stacks});q(a.series,function(b){if(b.options.stacking&&(b.visible===!0||a.options.chart.ignoreHiddenSeries===!1))b.stackKey=
b.type+p(b.options.stack,"")})},setTitle:function(a,b,c){var g;var d=this,e=d.options,f;f=e.title=w(e.title,a);g=e.subtitle=w(e.subtitle,b),e=g;q([["title",a,f],["subtitle",b,e]],function(a){var b=a[0],c=d[b],e=a[1],a=a[2];c&&e&&(d[b]=c=c.destroy());a&&a.text&&!c&&(d[b]=d.renderer.text(a.text,0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())});d.layOutTitles(c)},layOutTitles:function(a){var b=0,c=this.title,d=this.subtitle,e=this.options,f=e.title,
e=e.subtitle,g=this.renderer,h=this.spacingBox.width-44;if(c&&(c.css({width:(f.width||h)+"px"}).align(r({y:g.fontMetrics(f.style.fontSize,c).b-3},f),!1,"spacingBox"),!f.floating&&!f.verticalAlign))b=c.getBBox().height;d&&(d.css({width:(e.width||h)+"px"}).align(r({y:b+(f.margin-13)+g.fontMetrics(f.style.fontSize,d).b},e),!1,"spacingBox"),!e.floating&&!e.verticalAlign&&(b=La(b+d.getBBox().height)));c=this.titleOffset!==b;this.titleOffset=b;if(!this.isDirtyBox&&c)this.isDirtyBox=c,this.hasRendered&&
p(a,!0)&&this.isDirtyBox&&this.redraw()},getChartSize:function(){var a=this.options.chart,b=a.width,a=a.height,c=this.renderToClone||this.renderTo;if(!s(b))this.containerWidth=ib(c,"width");if(!s(a))this.containerHeight=ib(c,"height");this.chartWidth=t(0,b||this.containerWidth||600);this.chartHeight=t(0,p(a,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,c=this.container;a?b&&(this.renderTo.appendChild(c),Qa(b),delete this.renderToClone):(c&&
c.parentNode===this.renderTo&&this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),B(b,{position:"absolute",top:"-9999px",display:"block"}),b.style.setProperty&&b.style.setProperty("display","block","important"),x.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var a,b=this.options.chart,c,d,e;this.renderTo=a=b.renderTo;e="highcharts-"+ub++;if(Ga(a))this.renderTo=a=x.getElementById(a);a||ha(13,!0);c=y(F(a,"data-highcharts-chart"));!isNaN(c)&&W[c]&&W[c].hasRendered&&
W[c].destroy();F(a,"data-highcharts-chart",this.index);a.innerHTML="";!b.skipClone&&!a.offsetWidth&&this.cloneRenderTo();this.getChartSize();c=this.chartWidth;d=this.chartHeight;this.container=a=$(Ka,{className:"highcharts-container"+(b.className?" "+b.className:""),id:e},r({position:"relative",overflow:"hidden",width:c+"px",height:d+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},b.style),this.renderToClone||a);this._cursor=a.style.cursor;this.renderer=
b.forExport?new ta(a,c,d,b.style,!0):new Za(a,c,d,b.style);ga&&this.renderer.create(this,a,c,d)},getMargins:function(){var a=this.spacing,b,c=this.legend,d=this.margin,e=this.options.legend,f=p(e.margin,20),g=e.x,h=e.y,i=e.align,j=e.verticalAlign,k=this.titleOffset;this.resetMargins();b=this.axisOffset;if(k&&!s(d[0]))this.plotTop=t(this.plotTop,k+this.options.title.margin+a[0]);if(c.display&&!e.floating)if(i==="right"){if(!s(d[1]))this.marginRight=t(this.marginRight,c.legendWidth-g+f+a[1])}else if(i===
"left"){if(!s(d[3]))this.plotLeft=t(this.plotLeft,c.legendWidth+g+f+a[3])}else if(j==="top"){if(!s(d[0]))this.plotTop=t(this.plotTop,c.legendHeight+h+f+a[0])}else if(j==="bottom"&&!s(d[2]))this.marginBottom=t(this.marginBottom,c.legendHeight-h+f+a[2]);this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin);this.extraTopMargin&&(this.plotTop+=this.extraTopMargin);this.hasCartesianSeries&&q(this.axes,function(a){a.getOffset()});s(d[3])||(this.plotLeft+=b[3]);s(d[0])||(this.plotTop+=b[0]);
s(d[2])||(this.marginBottom+=b[2]);s(d[1])||(this.marginRight+=b[1]);this.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||ib(d,"width"),f=c.height||ib(d,"height"),c=a?a.target:G,d=function(){if(b.container)b.setSize(e,f,!1),b.hasUserSize=null};if(!b.hasUserSize&&e&&f&&(c===G||c===x)){if(e!==b.containerWidth||f!==b.containerHeight)clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(d,100):d();b.containerWidth=e;b.containerHeight=f}},initReflow:function(){var a=
this,b=function(b){a.reflow(b)};N(G,"resize",b);N(a,"destroy",function(){X(G,"resize",b)})},setSize:function(a,b,c){var d=this,e,f,g;d.isResizing+=1;g=function(){d&&I(d,"endResize",null,function(){d.isResizing-=1})};Ra(c,d);d.oldChartHeight=d.chartHeight;d.oldChartWidth=d.chartWidth;if(s(a))d.chartWidth=e=t(0,v(a)),d.hasUserSize=!!e;if(s(b))d.chartHeight=f=t(0,v(b));(va?jb:B)(d.container,{width:e+"px",height:f+"px"},va);d.setChartSize(!0);d.renderer.setSize(e,f,c);d.maxTicks=null;q(d.axes,function(a){a.isDirty=
!0;a.setScale()});q(d.series,function(a){a.isDirty=!0});d.isDirtyLegend=!0;d.isDirtyBox=!0;d.layOutTitles();d.getMargins();d.redraw(c);d.oldChartHeight=null;I(d,"resize");va===!1?g():setTimeout(g,va&&va.duration||500)},setChartSize:function(a){var b=this.inverted,c=this.renderer,d=this.chartWidth,e=this.chartHeight,f=this.options.chart,g=this.spacing,h=this.clipOffset,i,j,k,l;this.plotLeft=i=v(this.plotLeft);this.plotTop=j=v(this.plotTop);this.plotWidth=k=t(0,v(d-i-this.marginRight));this.plotHeight=
l=t(0,v(e-j-this.marginBottom));this.plotSizeX=b?l:k;this.plotSizeY=b?k:l;this.plotBorderWidth=f.plotBorderWidth||0;this.spacingBox=c.spacingBox={x:g[3],y:g[0],width:d-g[3]-g[1],height:e-g[0]-g[2]};this.plotBox=c.plotBox={x:i,y:j,width:k,height:l};d=2*U(this.plotBorderWidth/2);b=La(t(d,h[3])/2);c=La(t(d,h[0])/2);this.clipBox={x:b,y:c,width:U(this.plotSizeX-t(d,h[1])/2-b),height:t(0,U(this.plotSizeY-t(d,h[2])/2-c))};a||q(this.axes,function(a){a.setAxisSize();a.setAxisTranslation()})},resetMargins:function(){var a=
this.spacing,b=this.margin;this.plotTop=p(b[0],a[0]);this.marginRight=p(b[1],a[1]);this.marginBottom=p(b[2],a[2]);this.plotLeft=p(b[3],a[3]);this.axisOffset=[0,0,0,0];this.clipOffset=[0,0,0,0]},drawChartBox:function(){var a=this.options.chart,b=this.renderer,c=this.chartWidth,d=this.chartHeight,e=this.chartBackground,f=this.plotBackground,g=this.plotBorder,h=this.plotBGImage,i=a.borderWidth||0,j=a.backgroundColor,k=a.plotBackgroundColor,l=a.plotBackgroundImage,n=a.plotBorderWidth||0,m,o=this.plotLeft,
p=this.plotTop,q=this.plotWidth,r=this.plotHeight,t=this.plotBox,s=this.clipRect,v=this.clipBox;m=i+(a.shadow?8:0);if(i||j)if(e)e.animate(e.crisp({width:c-m,height:d-m}));else{e={fill:j||P};if(i)e.stroke=a.borderColor,e["stroke-width"]=i;this.chartBackground=b.rect(m/2,m/2,c-m,d-m,a.borderRadius,i).attr(e).addClass("highcharts-background").add().shadow(a.shadow)}if(k)f?f.animate(t):this.plotBackground=b.rect(o,p,q,r,0).attr({fill:k}).add().shadow(a.plotShadow);if(l)h?h.animate(t):this.plotBGImage=
b.image(l,o,p,q,r).add();s?s.animate({width:v.width,height:v.height}):this.clipRect=b.clipRect(v);if(n)g?g.animate(g.crisp({x:o,y:p,width:q,height:r,strokeWidth:-n})):this.plotBorder=b.rect(o,p,q,r,0,-n).attr({stroke:a.plotBorderColor,"stroke-width":n,fill:P,zIndex:1}).add();this.isDirtyBox=!1},propFromSeries:function(){var a=this,b=a.options.chart,c,d=a.options.series,e,f;q(["inverted","angular","polar"],function(g){c=H[b.type||b.defaultSeriesType];f=a[g]||b[g]||c&&c.prototype[g];for(e=d&&d.length;!f&&
e--;)(c=H[d[e].type])&&c.prototype[g]&&(f=!0);a[g]=f})},linkSeries:function(){var a=this,b=a.series;q(b,function(a){a.linkedSeries.length=0});q(b,function(b){var d=b.options.linkedTo;if(Ga(d)&&(d=d===":previous"?a.series[b.index-1]:a.get(d)))d.linkedSeries.push(b),b.linkedParent=d})},renderSeries:function(){q(this.series,function(a){a.translate();a.setTooltipPoints&&a.setTooltipPoints();a.render()})},renderLabels:function(){var a=this,b=a.options.labels;b.items&&q(b.items,function(c){var d=r(b.style,
c.style),e=y(d.left)+a.plotLeft,f=y(d.top)+a.plotTop+12;delete d.left;delete d.top;a.renderer.text(c.html,e,f).attr({zIndex:2}).css(d).add()})},render:function(){var a=this.axes,b=this.renderer,c=this.options;this.setTitle();this.legend=new lb(this,c.legend);this.getStacks();q(a,function(a){a.setScale()});this.getMargins();this.maxTicks=null;q(a,function(a){a.setTickPositions(!0);a.setMaxTicks()});this.adjustTickAmounts();this.getMargins();this.drawChartBox();this.hasCartesianSeries&&q(a,function(a){a.render()});
if(!this.seriesGroup)this.seriesGroup=b.g("series-group").attr({zIndex:3}).add();this.renderSeries();this.renderLabels();this.showCredits(c.credits);this.hasRendered=!0},showCredits:function(a){if(a.enabled&&!this.credits)this.credits=this.renderer.text(a.text,0,0).on("click",function(){if(a.href)location.href=a.href}).attr({align:a.position.align,zIndex:8}).css(a.style).add().align(a.position)},destroy:function(){var a=this,b=a.axes,c=a.series,d=a.container,e,f=d&&d.parentNode;I(a,"destroy");W[a.index]=
u;ab--;a.renderTo.removeAttribute("data-highcharts-chart");X(a);for(e=b.length;e--;)b[e]=b[e].destroy();for(e=c.length;e--;)c[e]=c[e].destroy();q("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(b){var c=a[b];c&&c.destroy&&(a[b]=c.destroy())});if(d)d.innerHTML="",X(d),f&&Qa(d);for(e in a)delete a[e]},isReadyToRender:function(){var a=this;return!ba&&G==G.top&&
x.readyState!=="complete"||ga&&!G.canvg?(ga?Mb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):x.attachEvent("onreadystatechange",function(){x.detachEvent("onreadystatechange",a.firstRender);x.readyState==="complete"&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;if(a.isReadyToRender()){a.getContainer();I(a,"init");a.resetMargins();a.setChartSize();a.propFromSeries();a.getAxes();q(b.series||[],function(b){a.initSeries(b)});a.linkSeries();I(a,
"beforeRender");if(K.Pointer)a.pointer=new Wa(a,b);a.render();a.renderer.draw();c&&c.apply(a,[a]);q(a.callbacks,function(b){b.apply(a,[a])});a.cloneRenderTo(!0);I(a,"load")}},splashArray:function(a,b){var c=b[a],c=da(c)?c:[c,c,c,c];return[p(b[a+"Top"],c[0]),p(b[a+"Right"],c[1]),p(b[a+"Bottom"],c[2]),p(b[a+"Left"],c[3])]}};Ya.prototype.callbacks=[];Z=K.CenteredSeriesMixin={getCenter:function(){var a=this.options,b=this.chart,c=2*(a.slicedOffset||0),d,e=b.plotWidth-2*c,f=b.plotHeight-2*c,b=a.center,
a=[p(b[0],"50%"),p(b[1],"50%"),a.size||"100%",a.innerSize||0],g=L(e,f),h;return Va(a,function(a,b){h=/%$/.test(a);d=b<2||b===2&&h;return(h?[e,f,g,g][b]*y(a)/100:a)+(d?c:0)})}};var Fa=function(){};Fa.prototype={init:function(a,b,c){this.series=a;this.applyOptions(b,c);this.pointAttr={};if(a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length))a.colorCounter=0;a.chart.pointCount++;return this},applyOptions:function(a,
b){var c=this.series,d=c.options.pointValKey||c.pointValKey,a=Fa.prototype.optionsToObject.call(this,a);r(this,a);this.options=this.options?r(this.options,a):a;if(d)this.y=this[d];if(this.x===u&&c)this.x=b===u?c.autoIncrement():b;return this},optionsToObject:function(a){var b={},c=this.series,d=c.pointArrayMap||["y"],e=d.length,f=0,g=0;if(typeof a==="number"||a===null)b[d[0]]=a;else if(Ha(a)){if(a.length>e){c=typeof a[0];if(c==="string")b.name=a[0];else if(c==="number")b.x=a[0];f++}for(;g<e;)b[d[g++]]=
a[f++]}else if(typeof a==="object"){b=a;if(a.dataLabels)c._hasPointLabels=!0;if(a.marker)c._hasPointMarkers=!0}return b},destroy:function(){var a=this.series.chart,b=a.hoverPoints,c;a.pointCount--;if(b&&(this.setState(),la(b,this),!b.length))a.hoverPoints=null;if(this===a.hoverPoint)this.onMouseOut();if(this.graphic||this.dataLabel)X(this),this.destroyElements();this.legendItem&&a.legend.destroyItem(this);for(c in this)this[c]=null},destroyElements:function(){for(var a="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),
b,c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=p(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";q(b.pointArrayMap||["y"],function(b){b="{point."+b;if(e||f)a=a.replace(b+"}",e+b+"}"+f);a=a.replace(b+"}",b+":,."+d+"f}")});return Ja(a,
{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents();a==="click"&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)});I(this,a,b,c)}};var O=function(){};O.prototype={isCartesian:!0,type:"line",pointClass:Fa,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis",
"yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(a,b){var c=this,d,e,f=a.series,g=function(a,b){return p(a.options.index,a._i)-p(b.options.index,b._i)};c.chart=a;c.options=b=c.setOptions(b);c.linkedSeries=[];c.bindAxes();r(c,{name:b.name,state:"",pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0});if(ga)b.animation=!1;e=b.events;for(d in e)N(c,d,e[d]);if(e&&e.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)a.runTrackerClick=!0;c.getColor();c.getSymbol();
q(c.parallelArrays,function(a){c[a+"Data"]=[]});c.setData(b.data,!1);if(c.isCartesian)a.hasCartesianSeries=!0;f.push(c);c._i=f.length-1;ob(f,g);this.yAxis&&ob(this.yAxis.series,g);q(f,function(a,b){a.index=b;a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var a=this,b=a.options,c=a.chart,d;q(a.axisTypes||[],function(e){q(c[e],function(c){d=c.options;if(b[e]===d.index||b[e]!==u&&b[e]===d.id||b[e]===u&&d.index===0)c.series.push(a),a[e]=c,c.isDirty=!0});!a[e]&&a.optionalAxis!==e&&ha(18,!0)})},
updateParallelArrays:function(a,b){var c=a.series,d=arguments;q(c.parallelArrays,typeof b==="number"?function(d){var f=d==="y"&&c.toYData?c.toYData(a):a[d];c[d+"Data"][b]=f}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=p(b,a.pointStart,0);this.pointInterval=p(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;return b},getSegments:function(){var a=-1,b=[],c,d=this.points,
e=d.length;if(e)if(this.options.connectNulls){for(c=e;c--;)d[c].y===null&&d.splice(c,1);d.length&&(b=[d])}else q(d,function(c,g){c.y===null?(g>a+1&&b.push(d.slice(a+1,g)),a=g):g===e-1&&b.push(d.slice(a+1,g+1))});this.segments=b},setOptions:function(a){var b=this.chart,c=b.options.plotOptions,b=b.userOptions||{},d=b.plotOptions||{},e=c[this.type];this.userOptions=a;c=w(e,c.series,a);this.tooltipOptions=w(E.tooltip,E.plotOptions[this.type].tooltip,b.tooltip,d.series&&d.series.tooltip,d[this.type]&&
d[this.type].tooltip,a.tooltip);e.marker===null&&delete c.marker;return c},getCyclic:function(a,b,c){var d=this.userOptions,e="_"+a+"Index",f=a+"Counter";b||(s(d[e])?b=d[e]:(d[e]=b=this.chart[f]%c.length,this.chart[f]+=1),b=c[b]);this[a]=b},getColor:function(){this.options.colorByPoint||this.getCyclic("color",this.options.color||ca[this.type].color,this.chart.options.colors)},getSymbol:function(){var a=this.options.marker;this.getCyclic("symbol",a.symbol,this.chart.options.symbols);if(/^url/.test(this.symbol))a.radius=
0},drawLegendSymbol:M.drawLineMarker,setData:function(a,b,c,d){var e=this,f=e.points,g=f&&f.length||0,h,i=e.options,j=e.chart,k=null,l=e.xAxis,n=l&&!!l.categories,m=e.tooltipPoints,o=i.turboThreshold,r=this.xData,t=this.yData,s=(h=e.pointArrayMap)&&h.length,a=a||[];h=a.length;b=p(b,!0);if(d!==!1&&h&&g===h&&!e.cropped&&!e.hasGroupedData)q(a,function(a,b){f[b].update(a,!1,null,!1)});else{e.xIncrement=null;e.pointRange=n?1:i.pointRange;e.colorCounter=0;q(this.parallelArrays,function(a){e[a+"Data"].length=
0});if(o&&h>o){for(c=0;k===null&&c<h;)k=a[c],c++;if(ja(k)){n=p(i.pointStart,0);i=p(i.pointInterval,1);for(c=0;c<h;c++)r[c]=n,t[c]=a[c],n+=i;e.xIncrement=n}else if(Ha(k))if(s)for(c=0;c<h;c++)i=a[c],r[c]=i[0],t[c]=i.slice(1,s+1);else for(c=0;c<h;c++)i=a[c],r[c]=i[0],t[c]=i[1];else ha(12)}else for(c=0;c<h;c++)if(a[c]!==u&&(i={series:e},e.pointClass.prototype.applyOptions.apply(i,[a[c]]),e.updateParallelArrays(i,c),n&&i.name))l.names[i.x]=i.name;Ga(t[0])&&ha(14,!0);e.data=[];e.options.data=a;for(c=g;c--;)f[c]&&
f[c].destroy&&f[c].destroy();if(m)m.length=0;if(l)l.minRange=l.userMinRange;e.isDirty=e.isDirtyData=j.isDirtyBox=!0;c=!1}b&&j.redraw(c)},processData:function(a){var b=this.xData,c=this.yData,d=b.length,e;e=0;var f,g,h=this.xAxis,i,j=this.options;i=j.cropThreshold;var k=0,l=this.isCartesian,n,m;if(l&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!a)return!1;if(h)n=h.getExtremes(),m=n.min,n=n.max;if(l&&this.sorted&&(!i||d>i||this.forceCrop))if(b[d-1]<m||b[0]>n)b=[],c=[];else if(b[0]<m||b[d-1]>n)e=
this.cropData(this.xData,this.yData,m,n),b=e.xData,c=e.yData,e=e.start,f=!0,k=b.length;for(i=b.length-1;i>=0;i--)d=b[i]-b[i-1],!f&&b[i]>m&&b[i]<n&&k++,d>0&&(g===u||d<g)?g=d:d<0&&this.requireSorting&&ha(15);this.cropped=f;this.cropStart=e;this.processedXData=b;this.processedYData=c;this.activePointCount=k;if(j.pointRange===null)this.pointRange=g||1;this.closestPointRange=g},cropData:function(a,b,c,d){var e=a.length,f=0,g=e,h=p(this.cropShoulder,1),i;for(i=0;i<e;i++)if(a[i]>=c){f=t(0,i-h);break}for(;i<
e;i++)if(a[i]>d){g=i+h;break}return{xData:a.slice(f,g),yData:b.slice(f,g),start:f,end:g}},generatePoints:function(){var a=this.options.data,b=this.data,c,d=this.processedXData,e=this.processedYData,f=this.pointClass,g=d.length,h=this.cropStart||0,i,j=this.hasGroupedData,k,l=[],n;if(!b&&!j)b=[],b.length=a.length,b=this.data=b;for(n=0;n<g;n++)i=h+n,j?l[n]=(new f).init(this,[d[n]].concat(ra(e[n]))):(b[i]?k=b[i]:a[i]!==u&&(b[i]=k=(new f).init(this,a[i],d[n])),l[n]=k),l[n].index=i;if(b&&(g!==(c=b.length)||
j))for(n=0;n<c;n++)if(n===h&&!j&&(n+=g),b[n])b[n].destroyElements(),b[n].plotX=u;this.data=b;this.points=l},getExtremes:function(a){var b=this.yAxis,c=this.processedXData,d,e=[],f=0;d=this.xAxis.getExtremes();var g=d.min,h=d.max,i,j,k,l,a=a||this.stackedYData||this.processedYData;d=a.length;for(l=0;l<d;l++)if(j=c[l],k=a[l],i=k!==null&&k!==u&&(!b.isLog||k.length||k>0),j=this.getExtremesFromAll||this.cropped||(c[l+1]||j)>=g&&(c[l-1]||j)<=h,i&&j)if(i=k.length)for(;i--;)k[i]!==null&&(e[f++]=k[i]);else e[f++]=
k;this.dataMin=p(void 0,Oa(e));this.dataMax=p(void 0,Ca(e))},translate:function(){this.processedXData||this.processData();this.generatePoints();for(var a=this.options,b=a.stacking,c=this.xAxis,d=c.categories,e=this.yAxis,f=this.points,g=f.length,h=!!this.modifyValue,i=a.pointPlacement,j=i==="between"||ja(i),k=a.threshold,a=0;a<g;a++){var l=f[a],n=l.x,m=l.y,o=l.low,q=b&&e.stacks[(this.negStacks&&m<k?"-":"")+this.stackKey];if(e.isLog&&m<=0)l.y=m=null,ha(10);l.plotX=c.translate(n,0,0,0,1,i,this.type===
"flags");if(b&&this.visible&&q&&q[n])q=q[n],m=q.points[this.index+","+a],o=m[0],m=m[1],o===0&&(o=p(k,e.min)),e.isLog&&o<=0&&(o=null),l.total=l.stackTotal=q.total,l.percentage=q.total&&l.y/q.total*100,l.stackY=m,q.setOffset(this.pointXOffset||0,this.barW||0);l.yBottom=s(o)?e.translate(o,0,1,0,1):null;h&&(m=this.modifyValue(m,l));l.plotY=typeof m==="number"&&m!==Infinity?e.translate(m,0,1,0,1):u;l.clientX=j?c.translate(n,0,0,0,1):l.plotX;l.negative=l.y<(k||0);l.category=d&&d[l.x]!==u?d[l.x]:l.x}this.getSegments()},
animate:function(a){var b=this.chart,c=b.renderer,d;d=this.options.animation;var e=this.clipBox||b.clipBox,f=b.inverted,g;if(d&&!da(d))d=ca[this.type].animation;g=["_sharedClip",d.duration,d.easing,e.height].join(",");a?(a=b[g],d=b[g+"m"],a||(b[g]=a=c.clipRect(r(e,{width:0})),b[g+"m"]=d=c.clipRect(-99,f?-b.plotLeft:-b.plotTop,99,f?b.chartWidth:b.chartHeight)),this.group.clip(a),this.markerGroup.clip(d),this.sharedClipKey=g):((a=b[g])&&a.animate({width:b.plotSizeX},d),b[g+"m"]&&b[g+"m"].animate({width:b.plotSizeX+
99},d),this.animate=null)},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,c=this.group,d=this.clipBox;if(c&&this.options.clip!==!1){if(!b||!d)c.clip(d?a.renderer.clipRect(d):a.clipRect);this.markerGroup.clip()}I(this,"afterAnimate");setTimeout(function(){b&&a[b]&&(d||(a[b]=a[b].destroy()),a[b+"m"]&&(a[b+"m"]=a[b+"m"].destroy()))},100)},drawPoints:function(){var a,b=this.points,c=this.chart,d,e,f,g,h,i,j,k,l=this.options.marker,n=this.pointAttr[""],m,o,q,t=this.markerGroup,s=p(l.enabled,
!this.requireSorting||this.activePointCount<0.5*this.xAxis.len/l.radius);if(l.enabled!==!1||this._hasPointMarkers)for(f=b.length;f--;)if(g=b[f],d=U(g.plotX),e=g.plotY,k=g.graphic,m=g.marker||{},o=!!g.marker,a=s&&m.enabled===u||m.enabled,q=c.isInsidePlot(v(d),e,c.inverted),a&&e!==u&&!isNaN(e)&&g.y!==null)if(a=g.pointAttr[g.selected?"select":""]||n,h=a.r,i=p(m.symbol,this.symbol),j=i.indexOf("url")===0,k)k[q?"show":"hide"](!0).animate(r({x:d-h,y:e-h},k.symbolName?{width:2*h,height:2*h}:{}));else{if(q&&
(h>0||j))g.graphic=c.renderer.symbol(i,d-h,e-h,2*h,2*h,o?m:l).attr(a).add(t)}else if(k)g.graphic=k.destroy()},convertAttribs:function(a,b,c,d){var e=this.pointAttrToOptions,f,g,h={},a=a||{},b=b||{},c=c||{},d=d||{};for(f in e)g=e[f],h[f]=p(a[g],b[f],c[f],d[f]);return h},getAttribs:function(){var a=this,b=a.options,c=ca[a.type].marker?b.marker:b,d=c.states,e=d.hover,f,g=a.color;f={stroke:g,fill:g};var h=a.points||[],i,j=[],k,l=a.pointAttrToOptions;k=a.hasPointSpecificOptions;var n=b.negativeColor,m=
c.lineColor,o=c.fillColor;i=b.turboThreshold;var p;b.marker?(e.radius=e.radius||c.radius+e.radiusPlus,e.lineWidth=e.lineWidth||c.lineWidth+e.lineWidthPlus):e.color=e.color||ya(e.color||g).brighten(e.brightness).get();j[""]=a.convertAttribs(c,f);q(["hover","select"],function(b){j[b]=a.convertAttribs(d[b],j[""])});a.pointAttr=j;g=h.length;if(!i||g<i||k)for(;g--;){i=h[g];if((c=i.options&&i.options.marker||i.options)&&c.enabled===!1)c.radius=0;if(i.negative&&n)i.color=i.fillColor=n;k=b.colorByPoint||
i.color;if(i.options)for(p in l)s(c[l[p]])&&(k=!0);if(k){c=c||{};k=[];d=c.states||{};f=d.hover=d.hover||{};if(!b.marker)f.color=f.color||!i.options.color&&e.color||ya(i.color).brighten(f.brightness||e.brightness).get();f={color:i.color};if(!o)f.fillColor=i.color;if(!m)f.lineColor=i.color;k[""]=a.convertAttribs(r(f,c),j[""]);k.hover=a.convertAttribs(d.hover,j.hover,k[""]);k.select=a.convertAttribs(d.select,j.select,k[""])}else k=j;i.pointAttr=k}},destroy:function(){var a=this,b=a.chart,c=/AppleWebKit\/533/.test(wa),
d,e,f=a.data||[],g,h,i;I(a,"destroy");X(a);q(a.axisTypes||[],function(b){if(i=a[b])la(i.series,a),i.isDirty=i.forceRedraw=!0});a.legendItem&&a.chart.legend.destroyItem(a);for(e=f.length;e--;)(g=f[e])&&g.destroy&&g.destroy();a.points=null;clearTimeout(a.animationTimeout);q("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(b){a[b]&&(d=c&&b==="group"?"hide":"destroy",a[b][d]())});if(b.hoverSeries===a)b.hoverSeries=null;la(b.series,a);for(h in a)delete a[h]},
getSegmentPath:function(a){var b=this,c=[],d=b.options.step;q(a,function(e,f){var g=e.plotX,h=e.plotY,i;b.getPointSpline?c.push.apply(c,b.getPointSpline(a,e,f)):(c.push(f?"L":"M"),d&&f&&(i=a[f-1],d==="right"?c.push(i.plotX,h):d==="center"?c.push((i.plotX+g)/2,i.plotY,(i.plotX+g)/2,h):c.push(g,i.plotY)),c.push(e.plotX,e.plotY))});return c},getGraphPath:function(){var a=this,b=[],c,d=[];q(a.segments,function(e){c=a.getSegmentPath(e);e.length>1?b=b.concat(c):d.push(e[0])});a.singlePoints=d;return a.graphPath=
b},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color]],d=b.lineWidth,e=b.dashStyle,f=b.linecap!=="square",g=this.getGraphPath(),h=b.negativeColor;h&&c.push(["graphNeg",h]);q(c,function(c,h){var k=c[0],l=a[k];if(l)bb(l),l.animate({d:g});else if(d&&g.length)l={stroke:c[1],"stroke-width":d,fill:P,zIndex:1},e?l.dashstyle=e:f&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),a[k]=a.chart.renderer.path(g).attr(l).add(a.group).shadow(!h&&b.shadow)})},clipNeg:function(){var a=
this.options,b=this.chart,c=b.renderer,d=a.negativeColor||a.negativeFillColor,e,f=this.graph,g=this.area,h=this.posClip,i=this.negClip;e=b.chartWidth;var j=b.chartHeight,k=t(e,j),l=this.yAxis;if(d&&(f||g)){d=v(l.toPixels(a.threshold||0,!0));d<0&&(k-=d);a={x:0,y:0,width:k,height:d};k={x:0,y:d,width:k,height:k};if(b.inverted)a.height=k.y=b.plotWidth-d,c.isVML&&(a={x:b.plotWidth-d-b.plotLeft,y:0,width:e,height:j},k={x:d+b.plotLeft-e,y:0,width:b.plotLeft+d,height:e});l.reversed?(b=k,e=a):(b=a,e=k);h?
(h.animate(b),i.animate(e)):(this.posClip=h=c.clipRect(b),this.negClip=i=c.clipRect(e),f&&this.graphNeg&&(f.clip(h),this.graphNeg.clip(i)),g&&(g.clip(h),this.areaNeg.clip(i)))}},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};q(["group","markerGroup"],function(c){b[c]&&b[c].attr(a).invert()})}var b=this,c=b.chart;if(b.xAxis)N(c,"resize",a),N(b,"destroy",function(){X(c,"resize",a)}),a(),b.invertGroups=a},plotGroup:function(a,b,c,d,e){var f=this[a],g=!f;g&&(this[a]=
f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||0.1}).add(e));f[g?"attr":"animate"](this.getPlotBox());return f},getPlotBox:function(){var a=this.chart,b=this.xAxis,c=this.yAxis;if(a.inverted)b=c,c=this.xAxis;return{translateX:b?b.left:a.plotLeft,translateY:c?c.top:a.plotTop,scaleX:1,scaleY:1}},render:function(){var a=this,b=a.chart,c,d=a.options,e=(c=d.animation)&&!!a.animate&&b.renderer.isSVG&&p(c.duration,500)||0,f=a.visible?"visible":"hidden",g=d.zIndex,h=a.hasRendered,i=b.seriesGroup;
c=a.plotGroup("group","series",f,g,i);a.markerGroup=a.plotGroup("markerGroup","markers",f,g,i);e&&a.animate(!0);a.getAttribs();c.inverted=a.isCartesian?b.inverted:!1;a.drawGraph&&(a.drawGraph(),a.clipNeg());q(a.points,function(a){a.redraw&&a.redraw()});a.drawDataLabels&&a.drawDataLabels();a.visible&&a.drawPoints();a.drawTracker&&a.options.enableMouseTracking!==!1&&a.drawTracker();b.inverted&&a.invertGroups();d.clip!==!1&&!a.sharedClipKey&&!h&&c.clip(b.clipRect);e&&a.animate();if(!h)e?a.animationTimeout=
setTimeout(function(){a.afterAnimate()},e):a.afterAnimate();a.isDirty=a.isDirtyData=!1;a.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,c=this.group,d=this.xAxis,e=this.yAxis;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:p(d&&d.left,a.plotLeft),translateY:p(e&&e.top,a.plotTop)}));this.translate();this.setTooltipPoints&&this.setTooltipPoints(!0);this.render();b&&I(this,"updatedData")}};Gb.prototype={destroy:function(){Pa(this,this.axis)},
render:function(a){var b=this.options,c=b.format,c=c?Ja(c,this):b.formatter.call(this);this.label?this.label.attr({text:c,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(c,null,null,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},setOffset:function(a,b){var c=this.axis,d=c.chart,e=d.inverted,f=this.isNegative,g=c.translate(c.usePercentage?100:this.total,0,0,0,1),c=c.translate(0),c=Q(g-c),h=d.xAxis[0].translate(this.x)+a,i=d.plotHeight,
f={x:e?f?g:g-c:h,y:e?i-h-b:f?i-g-c:i-g,width:e?c:b,height:e?b:c};if(e=this.label)e.align(this.alignOptions,null,f),f=e.alignAttr,e[this.options.crop===!1||d.isInsidePlot(f.x,f.y)?"show":"hide"](!0)}};na.prototype.buildStacks=function(){var a=this.series,b=p(this.options.reversedStacks,!0),c=a.length;if(!this.isXAxis){for(this.usePercentage=!1;c--;)a[b?c:a.length-c-1].setStackedPoints();if(this.usePercentage)for(c=0;c<a.length;c++)a[c].setPercentStacks()}};na.prototype.renderStackTotals=function(){var a=
this.chart,b=a.renderer,c=this.stacks,d,e,f=this.stackTotalGroup;if(!f)this.stackTotalGroup=f=b.g("stack-labels").attr({visibility:"visible",zIndex:6}).add();f.translate(a.plotLeft,a.plotTop);for(d in c)for(e in a=c[d],a)a[e].render(f)};O.prototype.setStackedPoints=function(){if(this.options.stacking&&!(this.visible!==!0&&this.chart.options.chart.ignoreHiddenSeries!==!1)){var a=this.processedXData,b=this.processedYData,c=[],d=b.length,e=this.options,f=e.threshold,g=e.stack,e=e.stacking,h=this.stackKey,
i="-"+h,j=this.negStacks,k=this.yAxis,l=k.stacks,n=k.oldStacks,m,o,p,q,r,s;for(q=0;q<d;q++){r=a[q];s=b[q];p=this.index+","+q;o=(m=j&&s<f)?i:h;l[o]||(l[o]={});if(!l[o][r])n[o]&&n[o][r]?(l[o][r]=n[o][r],l[o][r].total=null):l[o][r]=new Gb(k,k.options.stackLabels,m,r,g);o=l[o][r];o.points[p]=[o.cum||0];e==="percent"?(m=m?h:i,j&&l[m]&&l[m][r]?(m=l[m][r],o.total=m.total=t(m.total,o.total)+Q(s)||0):o.total=ea(o.total+(Q(s)||0))):o.total=ea(o.total+(s||0));o.cum=(o.cum||0)+(s||0);o.points[p].push(o.cum);
c[q]=o.cum}if(e==="percent")k.usePercentage=!0;this.stackedYData=c;k.oldStacks={}}};O.prototype.setPercentStacks=function(){var a=this,b=a.stackKey,c=a.yAxis.stacks,d=a.processedXData;q([b,"-"+b],function(b){var e;for(var f=d.length,g,h;f--;)if(g=d[f],e=(h=c[b]&&c[b][g])&&h.points[a.index+","+f],g=e)h=h.total?100/h.total:0,g[0]=ea(g[0]*h),g[1]=ea(g[1]*h),a.stackedYData[f]=g[1]})};r(Ya.prototype,{addSeries:function(a,b,c){var d,e=this;a&&(b=p(b,!0),I(e,"addSeries",{options:a},function(){d=e.initSeries(a);
e.isDirtyLegend=!0;e.linkSeries();b&&e.redraw(c)}));return d},addAxis:function(a,b,c,d){var e=b?"xAxis":"yAxis",f=this.options;new na(this,w(a,{index:this[e].length,isX:b}));f[e]=ra(f[e]||{});f[e].push(a);p(c,!0)&&this.redraw(d)},showLoading:function(a){var b=this,c=b.options,d=b.loadingDiv,e=c.loading,f=function(){d&&B(d,{left:b.plotLeft+"px",top:b.plotTop+"px",width:b.plotWidth+"px",height:b.plotHeight+"px"})};if(!d)b.loadingDiv=d=$(Ka,{className:"highcharts-loading"},r(e.style,{zIndex:10,display:P}),
b.container),b.loadingSpan=$("span",null,e.labelStyle,d),N(b,"redraw",f);b.loadingSpan.innerHTML=a||c.lang.loading;if(!b.loadingShown)B(d,{opacity:0,display:""}),jb(d,{opacity:e.style.opacity},{duration:e.showDuration||0}),b.loadingShown=!0;f()},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&jb(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){B(b,{display:P})}});this.loadingShown=!1}});r(Fa.prototype,{update:function(a,b,c,d){function e(){f.applyOptions(a);if(da(a)&&
!Ha(a))f.redraw=function(){if(h)a&&a.marker&&a.marker.symbol?f.graphic=h.destroy():h.attr(f.pointAttr[f.state||""]);if(a&&a.dataLabels&&f.dataLabel)f.dataLabel=f.dataLabel.destroy();f.redraw=null};i=f.index;g.updateParallelArrays(f,i);k.data[i]=f.options;g.isDirty=g.isDirtyData=!0;if(!g.fixedBox&&g.hasCartesianSeries)j.isDirtyBox=!0;k.legendType==="point"&&j.legend.destroyItem(f);b&&j.redraw(c)}var f=this,g=f.series,h=f.graphic,i,j=g.chart,k=g.options,b=p(b,!0);d===!1?e():f.firePointEvent("update",
{options:a},e)},remove:function(a,b){var c=this,d=c.series,e=d.points,f=d.chart,g,h=d.data;Ra(b,f);a=p(a,!0);c.firePointEvent("remove",null,function(){g=Ma(c,h);h.length===e.length&&e.splice(g,1);h.splice(g,1);d.options.data.splice(g,1);d.updateParallelArrays(c,"splice",g,1);c.destroy();d.isDirty=!0;d.isDirtyData=!0;a&&f.redraw()})}});r(O.prototype,{addPoint:function(a,b,c,d){var e=this.options,f=this.data,g=this.graph,h=this.area,i=this.chart,j=this.xAxis&&this.xAxis.names,k=g&&g.shift||0,l=e.data,
n,m=this.xData;Ra(d,i);c&&q([g,h,this.graphNeg,this.areaNeg],function(a){if(a)a.shift=k+1});if(h)h.isArea=!0;b=p(b,!0);d={series:this};this.pointClass.prototype.applyOptions.apply(d,[a]);g=d.x;h=m.length;if(this.requireSorting&&g<m[h-1])for(n=!0;h&&m[h-1]>g;)h--;this.updateParallelArrays(d,"splice",h,0,0);this.updateParallelArrays(d,h);if(j&&d.name)j[g]=d.name;l.splice(h,0,a);n&&(this.data.splice(h,0,null),this.processData());e.legendType==="point"&&this.generatePoints();c&&(f[0]&&f[0].remove?f[0].remove(!1):
(f.shift(),this.updateParallelArrays(d,"shift"),l.shift()));this.isDirtyData=this.isDirty=!0;b&&(this.getAttribs(),i.redraw())},remove:function(a,b){var c=this,d=c.chart,a=p(a,!0);if(!c.isRemoving)c.isRemoving=!0,I(c,"remove",null,function(){c.destroy();d.isDirtyLegend=d.isDirtyBox=!0;d.linkSeries();a&&d.redraw(b)});c.isRemoving=!1},update:function(a,b){var c=this,d=this.chart,e=this.userOptions,f=this.type,g=H[f].prototype,h=["group","markerGroup","dataLabelsGroup"],i;q(h,function(a){h[a]=c[a];delete c[a]});
a=w(e,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},a);this.remove(!1);for(i in g)g.hasOwnProperty(i)&&(this[i]=u);r(this,H[a.type||f].prototype);q(h,function(a){c[a]=h[a]});this.init(d,a);d.linkSeries();p(b,!0)&&d.redraw(!1)}});r(na.prototype,{update:function(a,b){var c=this.chart,a=c.options[this.coll][this.options.index]=w(this.userOptions,a);this.destroy(!0);this._addedPlotLB=u;this.init(c,r(a,{events:u}));c.isDirtyBox=!0;p(b,!0)&&c.redraw()},remove:function(a){for(var b=
this.chart,c=this.coll,d=this.series,e=d.length;e--;)d[e]&&d[e].remove(!1);la(b.axes,this);la(b[c],this);b.options[c].splice(this.options.index,1);q(b[c],function(a,b){a.options.index=b});this.destroy();b.isDirtyBox=!0;p(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});ia=ma(O);H.line=ia;ca.area=w(T,{threshold:0});var qa=ma(O,{type:"area",getSegments:function(){var a=this,b=[],c=[],d=[],e=this.xAxis,f=this.yAxis,g=f.stacks[this.stackKey],
h={},i,j,k=this.points,l=this.options.connectNulls,n,m;if(this.options.stacking&&!this.cropped){for(n=0;n<k.length;n++)h[k[n].x]=k[n];for(m in g)g[m].total!==null&&d.push(+m);d.sort(function(a,b){return a-b});q(d,function(b){var d=0,k;if(!l||h[b]&&h[b].y!==null)if(h[b])c.push(h[b]);else{for(n=a.index;n<=f.series.length;n++)if(k=g[b].points[n+","+b]){d=k[1];break}i=e.translate(b);j=f.toPixels(d,!0);c.push({y:null,plotX:i,clientX:i,plotY:j,yBottom:j,onMouseOver:sa})}});c.length&&b.push(c)}else O.prototype.getSegments.call(this),
b=this.segments;this.segments=b},getSegmentPath:function(a){var b=O.prototype.getSegmentPath.call(this,a),c=[].concat(b),d,e=this.options;d=b.length;var f=this.yAxis.getThreshold(e.threshold),g;d===3&&c.push("L",b[1],b[2]);if(e.stacking&&!this.closedStacks)for(d=a.length-1;d>=0;d--)g=p(a[d].yBottom,f),d<a.length-1&&e.step&&c.push(a[d+1].plotX,g),c.push(a[d].plotX,g);else this.closeSegment(c,a,f);this.areaPath=this.areaPath.concat(c);return b},closeSegment:function(a,b,c){a.push("L",b[b.length-1].plotX,
c,"L",b[0].plotX,c)},drawGraph:function(){this.areaPath=[];O.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=c.negativeColor,e=c.negativeFillColor,f=[["area",this.color,c.fillColor]];(d||e)&&f.push(["areaNeg",d,e]);q(f,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:p(d[2],ya(d[1]).setOpacity(p(c.fillOpacity,0.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:M.drawRectangle});H.area=qa;ca.spline=w(T);ia=ma(O,{type:"spline",
getPointSpline:function(a,b,c){var d=b.plotX,e=b.plotY,f=a[c-1],g=a[c+1],h,i,j,k;if(f&&g){a=f.plotY;j=g.plotX;var g=g.plotY,l;h=(1.5*d+f.plotX)/2.5;i=(1.5*e+a)/2.5;j=(1.5*d+j)/2.5;k=(1.5*e+g)/2.5;l=(k-i)*(j-d)/(j-h)+e-k;i+=l;k+=l;i>a&&i>e?(i=t(a,e),k=2*e-i):i<a&&i<e&&(i=L(a,e),k=2*e-i);k>g&&k>e?(k=t(g,e),i=2*e-k):k<g&&k<e&&(k=L(g,e),i=2*e-k);b.rightContX=j;b.rightContY=k}c?(b=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,h||d,i||e,d,e],f.rightContX=f.rightContY=null):b=["M",d,e];return b}});H.spline=
ia;ca.areaspline=w(ca.area);qa=qa.prototype;ia=ma(ia,{type:"areaspline",closedStacks:!0,getSegmentPath:qa.getSegmentPath,closeSegment:qa.closeSegment,drawGraph:qa.drawGraph,drawLegendSymbol:M.drawRectangle});H.areaspline=ia;ca.column=w(T,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:0.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,
verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0});ia=ma(O,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){O.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&q(b.series,function(b){if(b.type===a.type)b.isDirty=!0})},getColumnMetrics:function(){var a=this,b=a.options,c=a.xAxis,d=a.yAxis,e=c.reversed,f,g={},h,i=0;b.grouping===
!1?i=1:q(a.chart.series,function(b){var c=b.options,e=b.yAxis;if(b.type===a.type&&b.visible&&d.len===e.len&&d.pos===e.pos)c.stacking?(f=b.stackKey,g[f]===u&&(g[f]=i++),h=g[f]):c.grouping!==!1&&(h=i++),b.columnIndex=h});var c=L(Q(c.transA)*(c.ordinalSlope||b.pointRange||c.closestPointRange||c.tickInterval||1),c.len),j=c*b.groupPadding,k=(c-2*j)/i,l=b.pointWidth,b=s(l)?(k-l)/2:k*b.pointPadding,l=p(l,k-2*b);return a.columnMetrics={width:l,offset:b+(j+((e?i-(a.columnIndex||0):a.columnIndex)||0)*k-c/2)*
(e?-1:1)}},translate:function(){var a=this,b=a.chart,c=a.options,d=a.borderWidth=p(c.borderWidth,a.activePointCount>0.5*a.xAxis.len?0:1),e=a.yAxis,f=a.translatedThreshold=e.getThreshold(c.threshold),g=p(c.minPointLength,5),h=a.getColumnMetrics(),i=h.width,j=a.barW=t(i,1+2*d),k=a.pointXOffset=h.offset,l=-(d%2?0.5:0),n=d%2?0.5:1;b.renderer.isVML&&b.inverted&&(n+=1);c.pointPadding&&(j=La(j));O.prototype.translate.apply(a);q(a.points,function(c){var d=p(c.yBottom,f),h=L(t(-999-d,c.plotY),e.len+999+d),
q=c.plotX+k,r=j,s=L(h,d),u;u=t(h,d)-s;Q(u)<g&&g&&(u=g,s=v(Q(s-f)>g?d-g:f-(e.translate(c.y,0,1,0,1)<=f?g:0)));c.barX=q;c.pointWidth=i;c.tooltipPos=b.inverted?[e.len-h,a.xAxis.len-q-r/2]:[q+r/2,h+e.pos-b.plotTop];r=v(q+r)+l;q=v(q)+l;r-=q;d=Q(s)<0.5;u=v(s+u)+n;s=v(s)+n;u-=s;d&&(s-=1,u+=1);c.shapeType="rect";c.shapeArgs={x:q,y:s,width:r,height:u}})},getSymbol:sa,drawLegendSymbol:M.drawRectangle,drawGraph:sa,drawPoints:function(){var a=this,b=this.chart,c=a.options,d=b.renderer,e=c.animationLimit||250,
f,g;q(a.points,function(h){var i=h.plotY,j=h.graphic;if(i!==u&&!isNaN(i)&&h.y!==null)f=h.shapeArgs,i=s(a.borderWidth)?{"stroke-width":a.borderWidth}:{},g=h.pointAttr[h.selected?"select":""]||a.pointAttr[""],j?(bb(j),j.attr(i)[b.pointCount<e?"animate":"attr"](w(f))):h.graphic=d[h.shapeType](f).attr(g).attr(i).add(a.group).shadow(c.shadow,null,c.stacking&&!c.borderRadius);else if(j)h.graphic=j.destroy()})},animate:function(a){var b=this.yAxis,c=this.options,d=this.chart.inverted,e={};if(ba)a?(e.scaleY=
0.001,a=L(b.pos+b.len,t(b.pos,b.toPixels(c.threshold))),d?e.translateX=a-b.len:e.translateY=a,this.group.attr(e)):(e.scaleY=1,e[d?"translateX":"translateY"]=b.pos,this.group.animate(e,this.options.animation),this.animate=null)},remove:function(){var a=this,b=a.chart;b.hasRendered&&q(b.series,function(b){if(b.type===a.type)b.isDirty=!0});O.prototype.remove.apply(a,arguments)}});H.column=ia;ca.bar=w(ca.column);qa=ma(ia,{type:"bar",inverted:!0});H.bar=qa;ca.scatter=w(T,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',
pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1});qa=ma(O,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&O.prototype.drawGraph.call(this)}});H.scatter=qa;ca.pie=w(T,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},
ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:0.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});T={type:"pie",isCartesian:!1,pointClass:ma(Fa,{init:function(){Fa.prototype.init.apply(this,arguments);var a=this,b;if(a.y<0)a.y=null;r(a,{visible:a.visible!==!1,name:p(a.name,"Slice")});b=function(b){a.slice(b.type==="select")};N(a,"select",b);N(a,"unselect",b);return a},setVisible:function(a){var b=this,c=b.series,
d=c.chart;b.visible=b.options.visible=a=a===u?!b.visible:a;c.options.data[Ma(b,c.data)]=b.options;q(["graphic","dataLabel","connector","shadowGroup"],function(c){if(b[c])b[c][a?"show":"hide"](!0)});b.legendItem&&d.legend.colorizeItem(b,a);if(!c.isDirty&&c.options.ignoreHiddenPoint)c.isDirty=!0,d.redraw()},slice:function(a,b,c){var d=this.series;Ra(c,d.chart);p(b,!0);this.sliced=this.options.sliced=a=s(a)?a:!this.sliced;d.options.data[Ma(this,d.data)]=this.options;a=a?this.slicedTranslation:{translateX:0,
translateY:0};this.graphic.animate(a);this.shadowGroup&&this.shadowGroup.animate(a)},haloPath:function(a){var b=this.shapeArgs,c=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(c.plotLeft+b.x,c.plotTop+b.y,b.r+a,b.r+a,{innerR:this.shapeArgs.r,start:b.start,end:b.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,
getColor:sa,animate:function(a){var b=this,c=b.points,d=b.startAngleRad;if(!a)q(c,function(a){var c=a.graphic,a=a.shapeArgs;c&&(c.attr({r:b.center[3]/2,start:d,end:d}),c.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null},setData:function(a,b,c,d){O.prototype.setData.call(this,a,!1,c,d);this.processData();this.generatePoints();p(b,!0)&&this.chart.redraw(c)},generatePoints:function(){var a,b=0,c,d,e,f=this.options.ignoreHiddenPoint;O.prototype.generatePoints.call(this);
c=this.points;d=c.length;for(a=0;a<d;a++)e=c[a],b+=f&&!e.visible?0:e.y;this.total=b;for(a=0;a<d;a++)e=c[a],e.percentage=b>0?e.y/b*100:0,e.total=b},translate:function(a){this.generatePoints();var b=0,c=this.options,d=c.slicedOffset,e=d+c.borderWidth,f,g,h,i=c.startAngle||0,j=this.startAngleRad=oa/180*(i-90),i=(this.endAngleRad=oa/180*(p(c.endAngle,i+360)-90))-j,k=this.points,l=c.dataLabels.distance,c=c.ignoreHiddenPoint,n,m=k.length,o;if(!a)this.center=a=this.getCenter();this.getX=function(b,c){h=
V.asin(L((b-a[1])/(a[2]/2+l),1));return a[0]+(c?-1:1)*aa(h)*(a[2]/2+l)};for(n=0;n<m;n++){o=k[n];f=j+b*i;if(!c||o.visible)b+=o.percentage/100;g=j+b*i;o.shapeType="arc";o.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:v(f*1E3)/1E3,end:v(g*1E3)/1E3};h=(g+f)/2;h>1.5*oa?h-=2*oa:h<-oa/2&&(h+=2*oa);o.slicedTranslation={translateX:v(aa(h)*d),translateY:v(fa(h)*d)};f=aa(h)*a[2]/2;g=fa(h)*a[2]/2;o.tooltipPos=[a[0]+f*0.7,a[1]+g*0.7];o.half=h<-oa/2||h>oa/2?1:0;o.angle=h;e=L(e,l/2);o.labelPos=[a[0]+f+aa(h)*
l,a[1]+g+fa(h)*l,a[0]+f+aa(h)*e,a[1]+g+fa(h)*e,a[0]+f,a[1]+g,l<0?"center":o.half?"right":"left",h]}},drawGraph:null,drawPoints:function(){var a=this,b=a.chart.renderer,c,d,e=a.options.shadow,f,g;if(e&&!a.shadowGroup)a.shadowGroup=b.g("shadow").add(a.group);q(a.points,function(h){d=h.graphic;g=h.shapeArgs;f=h.shadowGroup;if(e&&!f)f=h.shadowGroup=b.g("shadow").add(a.shadowGroup);c=h.sliced?h.slicedTranslation:{translateX:0,translateY:0};f&&f.attr(c);d?d.animate(r(g,c)):h.graphic=d=b[h.shapeType](g).setRadialReference(a.center).attr(h.pointAttr[h.selected?
"select":""]).attr({"stroke-linejoin":"round"}).attr(c).add(a.group).shadow(e,f);h.visible!==void 0&&h.setVisible(h.visible)})},sortByAngle:function(a,b){a.sort(function(a,d){return a.angle!==void 0&&(d.angle-a.angle)*b})},drawLegendSymbol:M.drawRectangle,getCenter:Z.getCenter,getSymbol:sa};T=ma(O,T);H.pie=T;O.prototype.drawDataLabels=function(){var a=this,b=a.options,c=b.cursor,d=b.dataLabels,e=a.points,f,g,h=a.hasRendered||0,i,j;if(d.enabled||a._hasPointLabels)a.dlProcessOptions&&a.dlProcessOptions(d),
j=a.plotGroup("dataLabelsGroup","data-labels",d.defer?"hidden":"visible",d.zIndex||6),p(d.defer,!0)&&(j.attr({opacity:+h}),h||N(a,"afterAnimate",function(){a.visible&&j.show();j[b.animation?"animate":"attr"]({opacity:1},{duration:200})})),g=d,q(e,function(b){var e,h=b.dataLabel,m,o,q=b.connector,t=!0;f=b.options&&b.options.dataLabels;e=p(f&&f.enabled,g.enabled);if(h&&!e)b.dataLabel=h.destroy();else if(e){d=w(g,f);e=d.rotation;m=b.getLabelConfig();i=d.format?Ja(d.format,m):d.formatter.call(m,d);d.style.color=
p(d.color,d.style.color,a.color,"black");if(h)if(s(i))h.attr({text:i}),t=!1;else{if(b.dataLabel=h=h.destroy(),q)b.connector=q.destroy()}else if(s(i)){h={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:e,padding:d.padding,zIndex:1};for(o in h)h[o]===u&&delete h[o];h=b.dataLabel=a.chart.renderer[e?"text":"label"](i,0,-999,null,null,null,d.useHTML).attr(h).css(r(d.style,c&&{cursor:c})).add(j).shadow(d.shadow)}h&&a.alignDataLabel(b,h,d,null,t)}})};
O.prototype.alignDataLabel=function(a,b,c,d,e){var f=this.chart,g=f.inverted,h=p(a.plotX,-999),i=p(a.plotY,-999),j=b.getBBox();if(a=this.visible&&(a.series.forceDL||f.isInsidePlot(h,v(i),g)||d&&f.isInsidePlot(h,g?d.x+1:d.y+d.height-1,g)))d=r({x:g?f.plotWidth-i:h,y:v(g?f.plotHeight-h:i),width:0,height:0},d),r(c,{width:j.width,height:j.height}),c.rotation?b[e?"attr":"animate"]({x:d.x+c.x+d.width/2,y:d.y+c.y+d.height/2}).attr({align:c.align}):(b.align(c,null,d),g=b.alignAttr,p(c.overflow,"justify")===
"justify"?this.justifyDataLabel(b,c,g,j,d,e):p(c.crop,!0)&&(a=f.isInsidePlot(g.x,g.y)&&f.isInsidePlot(g.x+j.width,g.y+j.height)));if(!a)b.attr({y:-999}),b.placed=!1};O.prototype.justifyDataLabel=function(a,b,c,d,e,f){var g=this.chart,h=b.align,i=b.verticalAlign,j,k;j=c.x;if(j<0)h==="right"?b.align="left":b.x=-j,k=!0;j=c.x+d.width;if(j>g.plotWidth)h==="left"?b.align="right":b.x=g.plotWidth-j,k=!0;j=c.y;if(j<0)i==="bottom"?b.verticalAlign="top":b.y=-j,k=!0;j=c.y+d.height;if(j>g.plotHeight)i==="top"?
b.verticalAlign="bottom":b.y=g.plotHeight-j,k=!0;if(k)a.placed=!f,a.align(b,null,e)};if(H.pie)H.pie.prototype.drawDataLabels=function(){var a=this,b=a.data,c,d=a.chart,e=a.options.dataLabels,f=p(e.connectorPadding,10),g=p(e.connectorWidth,1),h=d.plotWidth,i=d.plotHeight,j,k,l=p(e.softConnector,!0),n=e.distance,m=a.center,o=m[2]/2,r=m[1],s=n>0,u,w,x,A=[[],[]],y,B,I,H,z,R=[0,0,0,0],N=function(a,b){return b.y-a.y};if(a.visible&&(e.enabled||a._hasPointLabels)){O.prototype.drawDataLabels.apply(a);q(b,
function(a){a.dataLabel&&a.visible&&A[a.half].push(a)});for(H=2;H--;){var G=[],M=[],F=A[H],K=F.length,E;if(K){a.sortByAngle(F,H-0.5);for(z=b=0;!b&&F[z];)b=F[z]&&F[z].dataLabel&&(F[z].dataLabel.getBBox().height||21),z++;if(n>0){w=L(r+o+n,d.plotHeight);for(z=t(0,r-o-n);z<=w;z+=b)G.push(z);w=G.length;if(K>w){c=[].concat(F);c.sort(N);for(z=K;z--;)c[z].rank=z;for(z=K;z--;)F[z].rank>=w&&F.splice(z,1);K=F.length}for(z=0;z<K;z++){c=F[z];x=c.labelPos;c=9999;var S,P;for(P=0;P<w;P++)S=Q(G[P]-x[1]),S<c&&(c=S,
E=P);if(E<z&&G[z]!==null)E=z;else for(w<K-z+E&&G[z]!==null&&(E=w-K+z);G[E]===null;)E++;M.push({i:E,y:G[E]});G[E]=null}M.sort(N)}for(z=0;z<K;z++){c=F[z];x=c.labelPos;u=c.dataLabel;I=c.visible===!1?"hidden":"visible";c=x[1];if(n>0){if(w=M.pop(),E=w.i,B=w.y,c>B&&G[E+1]!==null||c<B&&G[E-1]!==null)B=L(t(0,c),d.plotHeight)}else B=c;y=e.justify?m[0]+(H?-1:1)*(o+n):a.getX(B===r-o-n||B===r+o+n?c:B,H);u._attr={visibility:I,align:x[6]};u._pos={x:y+e.x+({left:f,right:-f}[x[6]]||0),y:B+e.y-10};u.connX=y;u.connY=
B;if(this.options.size===null)w=u.width,y-w<f?R[3]=t(v(w-y+f),R[3]):y+w>h-f&&(R[1]=t(v(y+w-h+f),R[1])),B-b/2<0?R[0]=t(v(-B+b/2),R[0]):B+b/2>i&&(R[2]=t(v(B+b/2-i),R[2]))}}}if(Ca(R)===0||this.verifyDataLabelOverflow(R))this.placeDataLabels(),s&&g&&q(this.points,function(b){j=b.connector;x=b.labelPos;if((u=b.dataLabel)&&u._pos)I=u._attr.visibility,y=u.connX,B=u.connY,k=l?["M",y+(x[6]==="left"?5:-5),B,"C",y,B,2*x[2]-x[4],2*x[3]-x[5],x[2],x[3],"L",x[4],x[5]]:["M",y+(x[6]==="left"?5:-5),B,"L",x[2],x[3],
"L",x[4],x[5]],j?(j.animate({d:k}),j.attr("visibility",I)):b.connector=j=a.chart.renderer.path(k).attr({"stroke-width":g,stroke:e.connectorColor||b.color||"#606060",visibility:I}).add(a.dataLabelsGroup);else if(j)b.connector=j.destroy()})}},H.pie.prototype.placeDataLabels=function(){q(this.points,function(a){var a=a.dataLabel,b;if(a)(b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999})})},H.pie.prototype.alignDataLabel=sa,H.pie.prototype.verifyDataLabelOverflow=
function(a){var b=this.center,c=this.options,d=c.center,e=c=c.minSize||80,f;d[0]!==null?e=t(b[2]-t(a[1],a[3]),c):(e=t(b[2]-a[1]-a[3],c),b[0]+=(a[3]-a[1])/2);d[1]!==null?e=t(L(e,b[2]-t(a[0],a[2])),c):(e=t(L(e,b[2]-a[0]-a[2]),c),b[1]+=(a[0]-a[2])/2);e<b[2]?(b[2]=e,this.translate(b),q(this.points,function(a){if(a.dataLabel)a.dataLabel._pos=null}),this.drawDataLabels&&this.drawDataLabels()):f=!0;return f};if(H.column)H.column.prototype.alignDataLabel=function(a,b,c,d,e){var f=this.chart,g=f.inverted,
h=a.dlBox||a.shapeArgs,i=a.below||a.plotY>p(this.translatedThreshold,f.plotSizeY),j=p(c.inside,!!this.options.stacking);if(h&&(d=w(h),g&&(d={x:f.plotWidth-d.y-d.height,y:f.plotHeight-d.x-d.width,width:d.height,height:d.width}),!j))g?(d.x+=i?0:d.width,d.width=0):(d.y+=i?d.height:0,d.height=0);c.align=p(c.align,!g||j?"center":i?"right":"left");c.verticalAlign=p(c.verticalAlign,g||j?"middle":i?"top":"bottom");O.prototype.alignDataLabel.call(this,a,b,c,d,e)};T=K.TrackerMixin={drawTrackerPoint:function(){var a=
this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(c){var d=c.target,e;if(b.hoverSeries!==a)a.onMouseOver();for(;d&&!e;)e=d.point,d=d.parentNode;if(e!==u&&e!==b.hoverPoint)e.onMouseOver(c)};q(a.points,function(a){if(a.graphic)a.graphic.element.point=a;if(a.dataLabel)a.dataLabel.element.point=a});if(!a._hasTracking)q(a.trackerGroups,function(b){if(a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),$a))a[b].on("touchstart",
f)}),a._hasTracking=!0},drawTrackerGraph:function(){var a=this,b=a.options,c=b.trackByArea,d=[].concat(c?a.areaPath:a.graphPath),e=d.length,f=a.chart,g=f.pointer,h=f.renderer,i=f.options.tooltip.snap,j=a.tracker,k=b.cursor,l=k&&{cursor:k},k=a.singlePoints,n,m=function(){if(f.hoverSeries!==a)a.onMouseOver()},o="rgba(192,192,192,"+(ba?1.0E-4:0.002)+")";if(e&&!c)for(n=e+1;n--;)d[n]==="M"&&d.splice(n+1,0,d[n+1]-i,d[n+2],"L"),(n&&d[n]==="M"||n===e)&&d.splice(n,0,"L",d[n-2]+i,d[n-1]);for(n=0;n<k.length;n++)e=
k[n],d.push("M",e.plotX-i,e.plotY,"L",e.plotX+i,e.plotY);j?j.attr({d:d}):(a.tracker=h.path(d).attr({"stroke-linejoin":"round",visibility:a.visible?"visible":"hidden",stroke:o,fill:c?o:P,"stroke-width":b.lineWidth+(c?0:2*i),zIndex:2}).add(a.group),q([a.tracker,a.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",m).on("mouseout",function(a){g.onTrackerMouseOut(a)}).css(l);if($a)a.on("touchstart",m)}))}};if(H.column)ia.prototype.drawTracker=T.drawTrackerPoint;if(H.pie)H.pie.prototype.drawTracker=
T.drawTrackerPoint;if(H.scatter)qa.prototype.drawTracker=T.drawTrackerPoint;r(lb.prototype,{setItemEvents:function(a,b,c,d,e){var f=this;(c?b:a.legendGroup).on("mouseover",function(){a.setState("hover");b.css(f.options.itemHoverStyle)}).on("mouseout",function(){b.css(a.visible?d:e);a.setState()}).on("click",function(b){var c=function(){a.setVisible()},b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,c):I(a,"legendItemClick",b,c)})},createCheckboxForItem:function(a){a.checkbox=
$("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},this.options.itemCheckboxStyle,this.chart.container);N(a.checkbox,"click",function(b){I(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})})}});E.legend.itemStyle.cursor="pointer";r(Ya.prototype,{showResetZoom:function(){var a=this,b=E.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f=c.relativeTo==="chart"?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},
d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this;I(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,c=this.pointer,d=!1,e;!a||a.resetSelection?q(this.axes,function(a){b=a.zoom()}):q(a.xAxis.concat(a.yAxis),function(a){var e=a.axis,h=e.isXAxis;if(c[h?"zoomX":"zoomY"]||c[h?"pinchX":"pinchY"])b=e.zoom(a.min,a.max),e.displayBtn&&(d=!0)});e=this.resetZoomButton;if(d&&!e)this.showResetZoom();else if(!d&&
da(e))this.resetZoomButton=e.destroy();b&&this.redraw(p(this.options.chart.animation,a&&a.animation,this.pointCount<100))},pan:function(a,b){var c=this,d=c.hoverPoints,e;d&&q(d,function(a){a.setState()});q(b==="xy"?[1,0]:[1],function(b){var d=a[b?"chartX":"chartY"],h=c[b?"xAxis":"yAxis"][0],i=c[b?"mouseDownX":"mouseDownY"],j=(h.pointRange||0)/2,k=h.getExtremes(),l=h.toValue(i-d,!0)+j,i=h.toValue(i+c[b?"plotWidth":"plotHeight"]-d,!0)-j;h.series.length&&l>L(k.dataMin,k.min)&&i<t(k.dataMax,k.max)&&(h.setExtremes(l,
i,!1,!1,{trigger:"pan"}),e=!0);c[b?"mouseDownX":"mouseDownY"]=d});e&&c.redraw(!1);B(c.container,{cursor:"move"})}});r(Fa.prototype,{select:function(a,b){var c=this,d=c.series,e=d.chart,a=p(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a;d.options.data[Ma(c,d.data)]=c.options;c.setState(a&&"select");b||q(e.getSelectedPoints(),function(a){if(a.selected&&a!==c)a.selected=a.options.selected=!1,d.options.data[Ma(a,d.data)]=a.options,a.setState(""),
a.firePointEvent("unselect")})})},onMouseOver:function(a){var b=this.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;if(e&&e!==this)e.onMouseOut();this.firePointEvent("mouseOver");d&&(!d.shared||b.noSharedTooltip)&&d.refresh(this,a);this.setState("hover");c.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;this.firePointEvent("mouseOut");if(!b||Ma(this,b)===-1)this.setState(),a.hoverPoint=null},importEvents:function(){if(!this.hasImportedEvents){var a=w(this.series.options.point,
this.options).events,b;this.events=a;for(b in a)N(this,b,a[b]);this.hasImportedEvents=!0}},setState:function(a,b){var c=this.plotX,d=this.plotY,e=this.series,f=e.options.states,g=ca[e.type].marker&&e.options.marker,h=g&&!g.enabled,i=g&&g.states[a],j=i&&i.enabled===!1,k=e.stateMarkerGraphic,l=this.marker||{},n=e.chart,m=e.halo,o,a=a||"";o=this.pointAttr[a]||e.pointAttr[a];if(!(a===this.state&&!b||this.selected&&a!=="select"||f[a]&&f[a].enabled===!1||a&&(j||h&&i.enabled===!1)||a&&l.states&&l.states[a]&&
l.states[a].enabled===!1)){if(this.graphic)g=g&&this.graphic.symbolName&&o.r,this.graphic.attr(w(o,g?{x:c-g,y:d-g,width:2*g,height:2*g}:{})),k&&k.hide();else{if(a&&i)if(g=i.radius,l=l.symbol||e.symbol,k&&k.currentSymbol!==l&&(k=k.destroy()),k)k[b?"animate":"attr"]({x:c-g,y:d-g});else if(l)e.stateMarkerGraphic=k=n.renderer.symbol(l,c-g,d-g,2*g,2*g).attr(o).add(e.markerGroup),k.currentSymbol=l;if(k)k[a&&n.isInsidePlot(c,d,n.inverted)?"show":"hide"]()}if((c=f[a]&&f[a].halo)&&c.size){if(!m)e.halo=m=n.renderer.path().add(e.seriesGroup);
m.attr(r({fill:ya(this.color||e.color).setOpacity(c.opacity).get()},c.attributes))[b?"animate":"attr"]({d:this.haloPath(c.size)})}else m&&m.attr({d:[]});this.state=a}},haloPath:function(a){var b=this.series,c=b.chart,d=b.getPlotBox(),e=c.inverted;return c.renderer.symbols.circle(d.translateX+(e?b.yAxis.len-this.plotY:this.plotX)-a,d.translateY+(e?b.xAxis.len-this.plotX:this.plotY)-a,a*2,a*2)}});r(O.prototype,{onMouseOver:function(){var a=this.chart,b=a.hoverSeries;if(b&&b!==this)b.onMouseOut();this.options.events.mouseOver&&
I(this,"mouseOver");this.setState("hover");a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;if(d)d.onMouseOut();this&&a.events.mouseOut&&I(this,"mouseOut");c&&!a.stickyTracking&&(!c.shared||this.noSharedTooltip)&&c.hide();this.setState();b.hoverSeries=null},setState:function(a){var b=this.options,c=this.graph,d=this.graphNeg,e=b.states,b=b.lineWidth,a=a||"";if(this.state!==a)this.state=a,e[a]&&e[a].enabled===!1||(a&&(b=e[a].lineWidth||b+(e[a].lineWidthPlus||
0)),c&&!c.dashstyle&&(a={"stroke-width":b},c.attr(a),d&&d.attr(a)))},setVisible:function(a,b){var c=this,d=c.chart,e=c.legendItem,f,g=d.options.chart.ignoreHiddenSeries,h=c.visible;f=(c.visible=a=c.userOptions.visible=a===u?!h:a)?"show":"hide";q(["group","dataLabelsGroup","markerGroup","tracker"],function(a){if(c[a])c[a][f]()});if(d.hoverSeries===c)c.onMouseOut();e&&d.legend.colorizeItem(c,a);c.isDirty=!0;c.options.stacking&&q(d.series,function(a){if(a.options.stacking&&a.visible)a.isDirty=!0});q(c.linkedSeries,
function(b){b.setVisible(a,!1)});if(g)d.isDirtyBox=!0;b!==!1&&d.redraw();I(c,f)},setTooltipPoints:function(a){var b=[],c,d,e=this.xAxis,f=e&&e.getExtremes(),g=e?e.tooltipLen||e.len:this.chart.plotSizeX,h,i,j=[];if(!(this.options.enableMouseTracking===!1||this.singularTooltips)){if(a)this.tooltipPoints=null;q(this.segments||this.points,function(a){b=b.concat(a)});e&&e.reversed&&(b=b.reverse());this.orderTooltipPoints&&this.orderTooltipPoints(b);a=b.length;for(i=0;i<a;i++)if(e=b[i],c=e.x,c>=f.min&&
c<=f.max){h=b[i+1];c=d===u?0:d+1;for(d=b[i+1]?L(t(0,U((e.clientX+(h?h.wrappedClientX||h.clientX:g))/2)),g):g;c>=0&&c<=d;)j[c++]=e}this.tooltipPoints=j}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===u?!this.selected:a;if(this.checkbox)this.checkbox.checked=a;I(this,a?"select":"unselect")},drawTracker:T.drawTrackerGraph});r(K,{Axis:na,Chart:Ya,Color:ya,Point:Fa,Tick:Ta,Renderer:Za,Series:O,SVGElement:S,SVGRenderer:ta,arrayMin:Oa,arrayMax:Ca,
charts:W,dateFormat:cb,format:Ja,pathAnim:vb,getOptions:function(){return E},hasBidiBug:Ob,isTouchDevice:Ib,numberFormat:Ba,seriesTypes:H,setOptions:function(a){E=w(!0,E,a);Bb();return E},addEvent:N,removeEvent:X,createElement:$,discardElement:Qa,css:B,each:q,extend:r,map:Va,merge:w,pick:p,splat:ra,extendClass:ma,pInt:y,wrap:Na,svg:ba,canvas:ga,vml:!ba&&!ga,product:"Highcharts",version:"4.0.4"})})();

'use strict';

var rightNowApp = angular.module('rightNowApp', [
    'angular-skycons',
    'ui.bootstrap'
]);

rightNowApp.controller('RightNowController', function($scope, $http, $interval) {

    // Local current weather

    var gc = new JustGage({
        id: "gauge-courthouse",
        value: 0,
        min: 0,
        max: 20,
        title: "Wind km/h"
    });


    function getCurrent() {
        $http.get('api/local.json').success(function(data) {
            $scope.courthouse = data;

            var windSpeed = data.speed * 1.60934;
            $scope.windSpeed = Math.ceil(windSpeed * 10) / 10;
            gc.refresh($scope.windSpeed);

            var degrees = 0;
            switch (data.direction) {
                case "N":
                    degrees = 0;
                    break;
                case "NE":
                    degrees = 45;
                    break;
                case "E":
                    degrees = 90;
                    break;
                case "SE":
                    degrees = 135;
                    break;
                case "S":
                    degrees = 180;
                    break;
                case "SW":
                    degrees = 225;
                    break;
                case "W":
                    degrees = 270;
                    break;
                case "NW":
                    degrees = 315;
                    break;

                default:
                    degrees = 'N';
                    break;
            }

            $scope.arrowCourthouse = {
                '-webkit-transform': 'rotate(' + degrees + 'deg)',
                '-moz-transform': 'rotate(' + degrees + 'deg)',
                '-o-transform': 'rotate(' + degrees + 'deg)',
                '-ms-transform': 'rotate(' + degrees + 'deg)',
                'transform': 'rotate(' + degrees + 'deg)'
            };
//
//            console.log(data);
        });
    }

    setInterval(function() {
        $scope.$apply(function() {
           getCurrent();
        });
    }, 5000);
    getCurrent();


    /**
     * Forecast.io
     */

    var gd = new JustGage({
        id: "gauge-downtown",
        value: 0,
        min: 0,
        max: 20,
        title: "Wind km/h"
    });

    $scope.isForecastCollapsed = false;

    $http.get('api/revelstoke.json').success(function(data){
        $scope.forecastio = data;

        $scope.currentWeather = {
            forecast: {
                icon: data.currently.icon,
                iconSize: 80
            }
        };

        var windSpeed = data.currently.windSpeed;
        windSpeed = Math.ceil(windSpeed * 10) / 10;
        gd.refresh(windSpeed);

        var degrees = data.currently.windBearing;

        $scope.arrowDowntown = {
            '-webkit-transform': 'rotate(' + degrees + 'deg)',
            '-moz-transform': 'rotate(' + degrees + 'deg)',
            '-o-transform': 'rotate(' + degrees + 'deg)',
            '-ms-transform': 'rotate(' + degrees + 'deg)',
            'transform': 'rotate(' + degrees + 'deg)'
        };
    });

    /**
     * Environment Canada
     */
    $scope.isEcForecastCollapsed = false;

    var ga = new JustGage({
        id: "gauge-airport",
        value: 0,
        min: 0,
        max: 20,
        title: "Wind km/h"
    });

    $http.get('api/revelstoke-ec.json').success(function(data) {
        $scope.airport = data;

        if (data.currentConditions.station['@attributes'].code == "") {
            $scope.showAirportConditions = false;
        }

        if (data.warnings.event) {
            switch (data.warnings.event['@attributes'].type) {
                case 'watch':
                    $scope.alertClass = 'alert-danger';
                    break;

                case 'advisory':
                    $scope.alertClass = 'alert-warning';
                    break;

                case 'warning':
                    $scope.alertClass = 'alert-warning';
                    break;

                case 'ended':
                    $scope.alertClass = 'alert-success';
                    break;

                case 'statement':
                    $scope.alertClass = 'alert-info';
                    break;

                default:
                    $scope.alertClass = 'alert-info';
                    break;
            }
        }

        var windSpeed = data.currentConditions.wind.speed;
        ga.refresh(windSpeed);

        var degrees = data.currentConditions.wind.bearing;

        $scope.arrowAirport = {
            '-webkit-transform': 'rotate(' + degrees + 'deg)',
            '-moz-transform': 'rotate(' + degrees + 'deg)',
            '-o-transform': 'rotate(' + degrees + 'deg)',
            '-ms-transform': 'rotate(' + degrees + 'deg)',
            'transform': 'rotate(' + degrees + 'deg)'
        };

        //console.log(data);
    });
});

rightNowApp.filter('climacons', function() {
    return function(input) {
        return input.replace(/-/g, " ");
    }
});

rightNowApp.filter('windDirection', function() {
    return function(input) {
        var directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW', 'N'];
        return directions[Math.round(input/45)];
    }
});

rightNowApp.filter('ecDirection', function() {
    return function(input) {
        if (input == "" || input == undefined)
            return '';
        else
            return input;
    }
});

/**
 * @fileoverview Main function src.
 */

// HTML5 Shiv. Must be in <head> to support older browsers.
document.createElement('video');
document.createElement('audio');
document.createElement('track');

/**
 * Doubles as the main function for users to create a player instance and also
 * the main library object.
 *
 * **ALIASES** videojs, _V_ (deprecated)
 *
 * The `vjs` function can be used to initialize or retrieve a player.
 *
 *     var myPlayer = vjs('my_video_id');
 *
 * @param  {String|Element} id      Video element or video element ID
 * @param  {Object=} options        Optional options object for config/settings
 * @param  {Function=} ready        Optional ready callback
 * @return {vjs.Player}             A player instance
 * @namespace
 */
var vjs = function(id, options, ready){
  var tag; // Element of ID

  // Allow for element or ID to be passed in
  // String ID
  if (typeof id === 'string') {

    // Adjust for jQuery ID syntax
    if (id.indexOf('#') === 0) {
      id = id.slice(1);
    }

    // If a player instance has already been created for this ID return it.
    if (vjs.players[id]) {
      return vjs.players[id];

    // Otherwise get element for ID
    } else {
      tag = vjs.el(id);
    }

  // ID is a media element
  } else {
    tag = id;
  }

  // Check for a useable element
  if (!tag || !tag.nodeName) { // re: nodeName, could be a box div also
    throw new TypeError('The element or ID supplied is not valid. (videojs)'); // Returns
  }

  // Element may have a player attr referring to an already created player instance.
  // If not, set up a new player and return the instance.
  return tag['player'] || new vjs.Player(tag, options, ready);
};

// Extended name, also available externally, window.videojs
var videojs = window['videojs'] = vjs;

// CDN Version. Used to target right flash swf.
vjs.CDN_VERSION = '4.8';
vjs.ACCESS_PROTOCOL = ('https:' == document.location.protocol ? 'https://' : 'http://');

/**
 * Global Player instance options, surfaced from vjs.Player.prototype.options_
 * vjs.options = vjs.Player.prototype.options_
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 */
vjs.options = {
  // Default order of fallback technology
  'techOrder': ['html5','flash'],
  // techOrder: ['flash','html5'],

  'html5': {},
  'flash': {},

  // Default of web browser is 300x150. Should rely on source width/height.
  'width': 300,
  'height': 150,
  // defaultVolume: 0.85,
  'defaultVolume': 0.00, // The freakin seaguls are driving me crazy!

  // default playback rates
  'playbackRates': [],
  // Add playback rate selection by adding rates
  // 'playbackRates': [0.5, 1, 1.5, 2],

  // default inactivity timeout
  'inactivityTimeout': 2000,

  // Included control sets
  'children': {
    'mediaLoader': {},
    'posterImage': {},
    'textTrackDisplay': {},
    'loadingSpinner': {},
    'bigPlayButton': {},
    'controlBar': {},
    'errorDisplay': {}
  },

  'language': document.getElementsByTagName('html')[0].getAttribute('lang') || navigator.languages && navigator.languages[0] || navigator.userLanguage || navigator.language || 'en',

  // locales and their language translations
  'languages': {},

  // Default message to show when a video cannot be played.
  'notSupportedMessage': 'No compatible source was found for this video.'
};

// Set CDN Version of swf
// The added (+) blocks the replace from changing this 4.8 string
if (vjs.CDN_VERSION !== 'GENERATED'+'_CDN_VSN') {
  videojs.options['flash']['swf'] = vjs.ACCESS_PROTOCOL + 'vjs.zencdn.net/'+vjs.CDN_VERSION+'/video-js.swf';
}

/**
 * Utility function for adding languages to the default options. Useful for
 * amending multiple language support at runtime.
 *
 * Example: vjs.addLanguage('es', {'Hello':'Hola'});
 *
 * @param  {String} code The language code or dictionary property
 * @param  {Object} data The data values to be translated
 * @return {Object} The resulting global languages dictionary object
 */
vjs.addLanguage = function(code, data){
  if(vjs.options['languages'][code] !== undefined) {
    vjs.options['languages'][code] = vjs.util.mergeOptions(vjs.options['languages'][code], data);
  } else {
    vjs.options['languages'][code] = data;
  }
  return vjs.options['languages'];
};

/**
 * Global player list
 * @type {Object}
 */
vjs.players = {};

/*!
 * Custom Universal Module Definition (UMD)
 *
 * Video.js will never be a non-browser lib so we can simplify UMD a bunch and
 * still support requirejs and browserify. This also needs to be closure
 * compiler compatible, so string keys are used.
 */
if (typeof define === 'function' && define['amd']) {
  define([], function(){ return videojs; });

// checking that module is an object too because of umdjs/umd#35
} else if (typeof exports === 'object' && typeof module === 'object') {
  module['exports'] = videojs;
}
/**
 * Core Object/Class for objects that use inheritance + contstructors
 *
 * To create a class that can be subclassed itself, extend the CoreObject class.
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * The constructor can be defined through the init property of an object argument.
 *
 *     var Animal = CoreObject.extend({
 *       init: function(name, sound){
 *         this.name = name;
 *       }
 *     });
 *
 * Other methods and properties can be added the same way, or directly to the
 * prototype.
 *
 *    var Animal = CoreObject.extend({
 *       init: function(name){
 *         this.name = name;
 *       },
 *       getName: function(){
 *         return this.name;
 *       },
 *       sound: '...'
 *    });
 *
 *    Animal.prototype.makeSound = function(){
 *      alert(this.sound);
 *    };
 *
 * To create an instance of a class, use the create method.
 *
 *    var fluffy = Animal.create('Fluffy');
 *    fluffy.getName(); // -> Fluffy
 *
 * Methods and properties can be overridden in subclasses.
 *
 *     var Horse = Animal.extend({
 *       sound: 'Neighhhhh!'
 *     });
 *
 *     var horsey = Horse.create('Horsey');
 *     horsey.getName(); // -> Horsey
 *     horsey.makeSound(); // -> Alert: Neighhhhh!
 *
 * @class
 * @constructor
 */
vjs.CoreObject = vjs['CoreObject'] = function(){};
// Manually exporting vjs['CoreObject'] here for Closure Compiler
// because of the use of the extend/create class methods
// If we didn't do this, those functions would get flattend to something like
// `a = ...` and `this.prototype` would refer to the global object instead of
// CoreObject

/**
 * Create a new object that inherits from this Object
 *
 *     var Animal = CoreObject.extend();
 *     var Horse = Animal.extend();
 *
 * @param {Object} props Functions and properties to be applied to the
 *                       new object's prototype
 * @return {vjs.CoreObject} An object that inherits from CoreObject
 * @this {*}
 */
vjs.CoreObject.extend = function(props){
  var init, subObj;

  props = props || {};
  // Set up the constructor using the supplied init method
  // or using the init of the parent object
  // Make sure to check the unobfuscated version for external libs
  init = props['init'] || props.init || this.prototype['init'] || this.prototype.init || function(){};
  // In Resig's simple class inheritance (previously used) the constructor
  //  is a function that calls `this.init.apply(arguments)`
  // However that would prevent us from using `ParentObject.call(this);`
  //  in a Child constuctor because the `this` in `this.init`
  //  would still refer to the Child and cause an inifinite loop.
  // We would instead have to do
  //    `ParentObject.prototype.init.apply(this, argumnents);`
  //  Bleh. We're not creating a _super() function, so it's good to keep
  //  the parent constructor reference simple.
  subObj = function(){
    init.apply(this, arguments);
  };

  // Inherit from this object's prototype
  subObj.prototype = vjs.obj.create(this.prototype);
  // Reset the constructor property for subObj otherwise
  // instances of subObj would have the constructor of the parent Object
  subObj.prototype.constructor = subObj;

  // Make the class extendable
  subObj.extend = vjs.CoreObject.extend;
  // Make a function for creating instances
  subObj.create = vjs.CoreObject.create;

  // Extend subObj's prototype with functions and other properties from props
  for (var name in props) {
    if (props.hasOwnProperty(name)) {
      subObj.prototype[name] = props[name];
    }
  }

  return subObj;
};

/**
 * Create a new instace of this Object class
 *
 *     var myAnimal = Animal.create();
 *
 * @return {vjs.CoreObject} An instance of a CoreObject subclass
 * @this {*}
 */
vjs.CoreObject.create = function(){
  // Create a new object that inherits from this object's prototype
  var inst = vjs.obj.create(this.prototype);

  // Apply this constructor function to the new object
  this.apply(inst, arguments);

  // Return the new object
  return inst;
};
/**
 * @fileoverview Event System (John Resig - Secrets of a JS Ninja http://jsninja.com/)
 * (Original book version wasn't completely usable, so fixed some things and made Closure Compiler compatible)
 * This should work very similarly to jQuery's events, however it's based off the book version which isn't as
 * robust as jquery's, so there's probably some differences.
 */

/**
 * Add an event listener to element
 * It stores the handler function in a separate cache object
 * and adds a generic handler to the element's event,
 * along with a unique id (guid) to the element.
 * @param  {Element|Object}   elem Element or object to bind listeners to
 * @param  {String|Array}   type Type of event to bind to.
 * @param  {Function} fn   Event listener.
 * @private
 */
vjs.on = function(elem, type, fn){
  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.on, elem, type, fn);
  }

  var data = vjs.getData(elem);

  // We need a place to store all our handler data
  if (!data.handlers) data.handlers = {};

  if (!data.handlers[type]) data.handlers[type] = [];

  if (!fn.guid) fn.guid = vjs.guid++;

  data.handlers[type].push(fn);

  if (!data.dispatcher) {
    data.disabled = false;

    data.dispatcher = function (event){

      if (data.disabled) return;
      event = vjs.fixEvent(event);

      var handlers = data.handlers[event.type];

      if (handlers) {
        // Copy handlers so if handlers are added/removed during the process it doesn't throw everything off.
        var handlersCopy = handlers.slice(0);

        for (var m = 0, n = handlersCopy.length; m < n; m++) {
          if (event.isImmediatePropagationStopped()) {
            break;
          } else {
            handlersCopy[m].call(elem, event);
          }
        }
      }
    };
  }

  if (data.handlers[type].length == 1) {
    if (elem.addEventListener) {
      elem.addEventListener(type, data.dispatcher, false);
    } else if (elem.attachEvent) {
      elem.attachEvent('on' + type, data.dispatcher);
    }
  }
};

/**
 * Removes event listeners from an element
 * @param  {Element|Object}   elem Object to remove listeners from
 * @param  {String|Array=}   type Type of listener to remove. Don't include to remove all events from element.
 * @param  {Function} fn   Specific listener to remove. Don't incldue to remove listeners for an event type.
 * @private
 */
vjs.off = function(elem, type, fn) {
  // Don't want to add a cache object through getData if not needed
  if (!vjs.hasData(elem)) return;

  var data = vjs.getData(elem);

  // If no events exist, nothing to unbind
  if (!data.handlers) { return; }

  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.off, elem, type, fn);
  }

  // Utility function
  var removeType = function(t){
     data.handlers[t] = [];
     vjs.cleanUpEvents(elem,t);
  };

  // Are we removing all bound events?
  if (!type) {
    for (var t in data.handlers) removeType(t);
    return;
  }

  var handlers = data.handlers[type];

  // If no handlers exist, nothing to unbind
  if (!handlers) return;

  // If no listener was provided, remove all listeners for type
  if (!fn) {
    removeType(type);
    return;
  }

  // We're only removing a single handler
  if (fn.guid) {
    for (var n = 0; n < handlers.length; n++) {
      if (handlers[n].guid === fn.guid) {
        handlers.splice(n--, 1);
      }
    }
  }

  vjs.cleanUpEvents(elem, type);
};

/**
 * Clean up the listener cache and dispatchers
 * @param  {Element|Object} elem Element to clean up
 * @param  {String} type Type of event to clean up
 * @private
 */
vjs.cleanUpEvents = function(elem, type) {
  var data = vjs.getData(elem);

  // Remove the events of a particular type if there are none left
  if (data.handlers[type].length === 0) {
    delete data.handlers[type];
    // data.handlers[type] = null;
    // Setting to null was causing an error with data.handlers

    // Remove the meta-handler from the element
    if (elem.removeEventListener) {
      elem.removeEventListener(type, data.dispatcher, false);
    } else if (elem.detachEvent) {
      elem.detachEvent('on' + type, data.dispatcher);
    }
  }

  // Remove the events object if there are no types left
  if (vjs.isEmpty(data.handlers)) {
    delete data.handlers;
    delete data.dispatcher;
    delete data.disabled;

    // data.handlers = null;
    // data.dispatcher = null;
    // data.disabled = null;
  }

  // Finally remove the expando if there is no data left
  if (vjs.isEmpty(data)) {
    vjs.removeData(elem);
  }
};

/**
 * Fix a native event to have standard property values
 * @param  {Object} event Event object to fix
 * @return {Object}
 * @private
 */
vjs.fixEvent = function(event) {

  function returnTrue() { return true; }
  function returnFalse() { return false; }

  // Test if fixing up is needed
  // Used to check if !event.stopPropagation instead of isPropagationStopped
  // But native events return true for stopPropagation, but don't have
  // other expected methods like isPropagationStopped. Seems to be a problem
  // with the Javascript Ninja code. So we're just overriding all events now.
  if (!event || !event.isPropagationStopped) {
    var old = event || window.event;

    event = {};
    // Clone the old object so that we can modify the values event = {};
    // IE8 Doesn't like when you mess with native event properties
    // Firefox returns false for event.hasOwnProperty('type') and other props
    //  which makes copying more difficult.
    // TODO: Probably best to create a whitelist of event props
    for (var key in old) {
      // Safari 6.0.3 warns you if you try to copy deprecated layerX/Y
      // Chrome warns you if you try to copy deprecated keyboardEvent.keyLocation
      if (key !== 'layerX' && key !== 'layerY' && key !== 'keyboardEvent.keyLocation') {
        // Chrome 32+ warns if you try to copy deprecated returnValue, but
        // we still want to if preventDefault isn't supported (IE8).
        if (!(key == 'returnValue' && old.preventDefault)) {
          event[key] = old[key];
        }
      }
    }

    // The event occurred on this element
    if (!event.target) {
      event.target = event.srcElement || document;
    }

    // Handle which other element the event is related to
    event.relatedTarget = event.fromElement === event.target ?
      event.toElement :
      event.fromElement;

    // Stop the default browser action
    event.preventDefault = function () {
      if (old.preventDefault) {
        old.preventDefault();
      }
      event.returnValue = false;
      event.isDefaultPrevented = returnTrue;
      event.defaultPrevented = true;
    };

    event.isDefaultPrevented = returnFalse;
    event.defaultPrevented = false;

    // Stop the event from bubbling
    event.stopPropagation = function () {
      if (old.stopPropagation) {
        old.stopPropagation();
      }
      event.cancelBubble = true;
      event.isPropagationStopped = returnTrue;
    };

    event.isPropagationStopped = returnFalse;

    // Stop the event from bubbling and executing other handlers
    event.stopImmediatePropagation = function () {
      if (old.stopImmediatePropagation) {
        old.stopImmediatePropagation();
      }
      event.isImmediatePropagationStopped = returnTrue;
      event.stopPropagation();
    };

    event.isImmediatePropagationStopped = returnFalse;

    // Handle mouse position
    if (event.clientX != null) {
      var doc = document.documentElement, body = document.body;

      event.pageX = event.clientX +
        (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
        (doc && doc.clientLeft || body && body.clientLeft || 0);
      event.pageY = event.clientY +
        (doc && doc.scrollTop || body && body.scrollTop || 0) -
        (doc && doc.clientTop || body && body.clientTop || 0);
    }

    // Handle key presses
    event.which = event.charCode || event.keyCode;

    // Fix button for mouse clicks:
    // 0 == left; 1 == middle; 2 == right
    if (event.button != null) {
      event.button = (event.button & 1 ? 0 :
        (event.button & 4 ? 1 :
          (event.button & 2 ? 2 : 0)));
    }
  }

  // Returns fixed-up instance
  return event;
};

/**
 * Trigger an event for an element
 * @param  {Element|Object}      elem  Element to trigger an event on
 * @param  {Event|Object|String} event A string (the type) or an event object with a type attribute
 * @private
 */
vjs.trigger = function(elem, event) {
  // Fetches element data and a reference to the parent (for bubbling).
  // Don't want to add a data object to cache for every parent,
  // so checking hasData first.
  var elemData = (vjs.hasData(elem)) ? vjs.getData(elem) : {};
  var parent = elem.parentNode || elem.ownerDocument;
      // type = event.type || event,
      // handler;

  // If an event name was passed as a string, creates an event out of it
  if (typeof event === 'string') {
    event = { type:event, target:elem };
  }
  // Normalizes the event properties.
  event = vjs.fixEvent(event);

  // If the passed element has a dispatcher, executes the established handlers.
  if (elemData.dispatcher) {
    elemData.dispatcher.call(elem, event);
  }

  // Unless explicitly stopped or the event does not bubble (e.g. media events)
    // recursively calls this function to bubble the event up the DOM.
    if (parent && !event.isPropagationStopped() && event.bubbles !== false) {
    vjs.trigger(parent, event);

  // If at the top of the DOM, triggers the default action unless disabled.
  } else if (!parent && !event.defaultPrevented) {
    var targetData = vjs.getData(event.target);

    // Checks if the target has a default action for this event.
    if (event.target[event.type]) {
      // Temporarily disables event dispatching on the target as we have already executed the handler.
      targetData.disabled = true;
      // Executes the default action.
      if (typeof event.target[event.type] === 'function') {
        event.target[event.type]();
      }
      // Re-enables event dispatching.
      targetData.disabled = false;
    }
  }

  // Inform the triggerer if the default was prevented by returning false
  return !event.defaultPrevented;
  /* Original version of js ninja events wasn't complete.
   * We've since updated to the latest version, but keeping this around
   * for now just in case.
   */
  // // Added in attion to book. Book code was broke.
  // event = typeof event === 'object' ?
  //   event[vjs.expando] ?
  //     event :
  //     new vjs.Event(type, event) :
  //   new vjs.Event(type);

  // event.type = type;
  // if (handler) {
  //   handler.call(elem, event);
  // }

  // // Clean up the event in case it is being reused
  // event.result = undefined;
  // event.target = elem;
};

/**
 * Trigger a listener only once for an event
 * @param  {Element|Object}   elem Element or object to
 * @param  {String|Array}   type
 * @param  {Function} fn
 * @private
 */
vjs.one = function(elem, type, fn) {
  if (vjs.obj.isArray(type)) {
    return _handleMultipleEvents(vjs.one, elem, type, fn);
  }
  var func = function(){
    vjs.off(elem, type, func);
    fn.apply(this, arguments);
  };
  // copy the guid to the new function so it can removed using the original function's ID
  func.guid = fn.guid = fn.guid || vjs.guid++;
  vjs.on(elem, type, func);
};

/**
 * Loops through an array of event types and calls the requested method for each type.
 * @param  {Function} fn   The event method we want to use.
 * @param  {Element|Object} elem Element or object to bind listeners to
 * @param  {String}   type Type of event to bind to.
 * @param  {Function} callback   Event listener.
 * @private
 */
function _handleMultipleEvents(fn, elem, type, callback) {
  vjs.arr.forEach(type, function(type) {
    fn(elem, type, callback); //Call the event method for each one of the types
  });
}
var hasOwnProp = Object.prototype.hasOwnProperty;

/**
 * Creates an element and applies properties.
 * @param  {String=} tagName    Name of tag to be created.
 * @param  {Object=} properties Element properties to be applied.
 * @return {Element}
 * @private
 */
vjs.createEl = function(tagName, properties){
  var el;

  tagName = tagName || 'div';
  properties = properties || {};

  el = document.createElement(tagName);

  vjs.obj.each(properties, function(propName, val){
    // Not remembering why we were checking for dash
    // but using setAttribute means you have to use getAttribute

    // The check for dash checks for the aria-* attributes, like aria-label, aria-valuemin.
    // The additional check for "role" is because the default method for adding attributes does not
    // add the attribute "role". My guess is because it's not a valid attribute in some namespaces, although
    // browsers handle the attribute just fine. The W3C allows for aria-* attributes to be used in pre-HTML5 docs.
    // http://www.w3.org/TR/wai-aria-primer/#ariahtml. Using setAttribute gets around this problem.
    if (propName.indexOf('aria-') !== -1 || propName == 'role') {
     el.setAttribute(propName, val);
    } else {
     el[propName] = val;
    }
  });

  return el;
};

/**
 * Uppercase the first letter of a string
 * @param  {String} string String to be uppercased
 * @return {String}
 * @private
 */
vjs.capitalize = function(string){
  return string.charAt(0).toUpperCase() + string.slice(1);
};

/**
 * Object functions container
 * @type {Object}
 * @private
 */
vjs.obj = {};

/**
 * Object.create shim for prototypal inheritance
 *
 * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create
 *
 * @function
 * @param  {Object}   obj Object to use as prototype
 * @private
 */
vjs.obj.create = Object.create || function(obj){
  //Create a new function called 'F' which is just an empty object.
  function F() {}

  //the prototype of the 'F' function should point to the
  //parameter of the anonymous function.
  F.prototype = obj;

  //create a new constructor function based off of the 'F' function.
  return new F();
};

/**
 * Loop through each property in an object and call a function
 * whose arguments are (key,value)
 * @param  {Object}   obj Object of properties
 * @param  {Function} fn  Function to be called on each property.
 * @this {*}
 * @private
 */
vjs.obj.each = function(obj, fn, context){
  for (var key in obj) {
    if (hasOwnProp.call(obj, key)) {
      fn.call(context || this, key, obj[key]);
    }
  }
};

/**
 * Merge two objects together and return the original.
 * @param  {Object} obj1
 * @param  {Object} obj2
 * @return {Object}
 * @private
 */
vjs.obj.merge = function(obj1, obj2){
  if (!obj2) { return obj1; }
  for (var key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      obj1[key] = obj2[key];
    }
  }
  return obj1;
};

/**
 * Merge two objects, and merge any properties that are objects
 * instead of just overwriting one. Uses to merge options hashes
 * where deeper default settings are important.
 * @param  {Object} obj1 Object to override
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object. Obj1 and Obj2 will be untouched.
 * @private
 */
vjs.obj.deepMerge = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not ovewriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (hasOwnProp.call(obj2, key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.obj.deepMerge(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};

/**
 * Make a copy of the supplied object
 * @param  {Object} obj Object to copy
 * @return {Object}     Copy of object
 * @private
 */
vjs.obj.copy = function(obj){
  return vjs.obj.merge({}, obj);
};

/**
 * Check if an object is plain, and not a dom node or any object sub-instance
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isPlain = function(obj){
  return !!obj
    && typeof obj === 'object'
    && obj.toString() === '[object Object]'
    && obj.constructor === Object;
};

/**
 * Check if an object is Array
*  Since instanceof Array will not work on arrays created in another frame we need to use Array.isArray, but since IE8 does not support Array.isArray we need this shim
 * @param  {Object} obj Object to check
 * @return {Boolean}     True if plain, false otherwise
 * @private
 */
vjs.obj.isArray = Array.isArray || function(arr) {
  return Object.prototype.toString.call(arr) === '[object Array]';
};

/**
 * Check to see whether the input is NaN or not.
 * NaN is the only JavaScript construct that isn't equal to itself
 * @param {Number} num Number to check
 * @return {Boolean} True if NaN, false otherwise
 * @private
 */
vjs.isNaN = function(num) {
  return num !== num;
};

/**
 * Bind (a.k.a proxy or Context). A simple method for changing the context of a function
   It also stores a unique id on the function so it can be easily removed from events
 * @param  {*}   context The object to bind as scope
 * @param  {Function} fn      The function to be bound to a scope
 * @param  {Number=}   uid     An optional unique ID for the function to be set
 * @return {Function}
 * @private
 */
vjs.bind = function(context, fn, uid) {
  // Make sure the function has a unique ID
  if (!fn.guid) { fn.guid = vjs.guid++; }

  // Create the new function that changes the context
  var ret = function() {
    return fn.apply(context, arguments);
  };

  // Allow for the ability to individualize this function
  // Needed in the case where multiple objects might share the same prototype
  // IF both items add an event listener with the same function, then you try to remove just one
  // it will remove both because they both have the same guid.
  // when using this, you need to use the bind method when you remove the listener as well.
  // currently used in text tracks
  ret.guid = (uid) ? uid + '_' + fn.guid : fn.guid;

  return ret;
};

/**
 * Element Data Store. Allows for binding data to an element without putting it directly on the element.
 * Ex. Event listneres are stored here.
 * (also from jsninja.com, slightly modified and updated for closure compiler)
 * @type {Object}
 * @private
 */
vjs.cache = {};

/**
 * Unique ID for an element or function
 * @type {Number}
 * @private
 */
vjs.guid = 1;

/**
 * Unique attribute name to store an element's guid in
 * @type {String}
 * @constant
 * @private
 */
vjs.expando = 'vdata' + (new Date()).getTime();

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.getData = function(el){
  var id = el[vjs.expando];
  if (!id) {
    id = el[vjs.expando] = vjs.guid++;
    vjs.cache[id] = {};
  }
  return vjs.cache[id];
};

/**
 * Returns the cache object where data for an element is stored
 * @param  {Element} el Element to store data for.
 * @return {Object}
 * @private
 */
vjs.hasData = function(el){
  var id = el[vjs.expando];
  return !(!id || vjs.isEmpty(vjs.cache[id]));
};

/**
 * Delete data for the element from the cache and the guid attr from getElementById
 * @param  {Element} el Remove data for an element
 * @private
 */
vjs.removeData = function(el){
  var id = el[vjs.expando];
  if (!id) { return; }
  // Remove all stored data
  // Changed to = null
  // http://coding.smashingmagazine.com/2012/11/05/writing-fast-memory-efficient-javascript/
  // vjs.cache[id] = null;
  delete vjs.cache[id];

  // Remove the expando property from the DOM node
  try {
    delete el[vjs.expando];
  } catch(e) {
    if (el.removeAttribute) {
      el.removeAttribute(vjs.expando);
    } else {
      // IE doesn't appear to support removeAttribute on the document element
      el[vjs.expando] = null;
    }
  }
};

/**
 * Check if an object is empty
 * @param  {Object}  obj The object to check for emptiness
 * @return {Boolean}
 * @private
 */
vjs.isEmpty = function(obj) {
  for (var prop in obj) {
    // Inlude null properties as empty.
    if (obj[prop] !== null) {
      return false;
    }
  }
  return true;
};

/**
 * Add a CSS class name to an element
 * @param {Element} element    Element to add class name to
 * @param {String} classToAdd Classname to add
 * @private
 */
vjs.addClass = function(element, classToAdd){
  if ((' '+element.className+' ').indexOf(' '+classToAdd+' ') == -1) {
    element.className = element.className === '' ? classToAdd : element.className + ' ' + classToAdd;
  }
};

/**
 * Remove a CSS class name from an element
 * @param {Element} element    Element to remove from class name
 * @param {String} classToAdd Classname to remove
 * @private
 */
vjs.removeClass = function(element, classToRemove){
  var classNames, i;

  if (element.className.indexOf(classToRemove) == -1) { return; }

  classNames = element.className.split(' ');

  // no arr.indexOf in ie8, and we don't want to add a big shim
  for (i = classNames.length - 1; i >= 0; i--) {
    if (classNames[i] === classToRemove) {
      classNames.splice(i,1);
    }
  }

  element.className = classNames.join(' ');
};

/**
 * Element for testing browser HTML5 video capabilities
 * @type {Element}
 * @constant
 * @private
 */
vjs.TEST_VID = vjs.createEl('video');

/**
 * Useragent for browser testing.
 * @type {String}
 * @constant
 * @private
 */
vjs.USER_AGENT = navigator.userAgent;

/**
 * Device is an iPhone
 * @type {Boolean}
 * @constant
 * @private
 */
vjs.IS_IPHONE = (/iPhone/i).test(vjs.USER_AGENT);
vjs.IS_IPAD = (/iPad/i).test(vjs.USER_AGENT);
vjs.IS_IPOD = (/iPod/i).test(vjs.USER_AGENT);
vjs.IS_IOS = vjs.IS_IPHONE || vjs.IS_IPAD || vjs.IS_IPOD;

vjs.IOS_VERSION = (function(){
  var match = vjs.USER_AGENT.match(/OS (\d+)_/i);
  if (match && match[1]) { return match[1]; }
})();

vjs.IS_ANDROID = (/Android/i).test(vjs.USER_AGENT);
vjs.ANDROID_VERSION = (function() {
  // This matches Android Major.Minor.Patch versions
  // ANDROID_VERSION is Major.Minor as a Number, if Minor isn't available, then only Major is returned
  var match = vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),
    major,
    minor;

  if (!match) {
    return null;
  }

  major = match[1] && parseFloat(match[1]);
  minor = match[2] && parseFloat(match[2]);

  if (major && minor) {
    return parseFloat(match[1] + '.' + match[2]);
  } else if (major) {
    return major;
  } else {
    return null;
  }
})();
// Old Android is defined as Version older than 2.3, and requiring a webkit version of the android browser
vjs.IS_OLD_ANDROID = vjs.IS_ANDROID && (/webkit/i).test(vjs.USER_AGENT) && vjs.ANDROID_VERSION < 2.3;

vjs.IS_FIREFOX = (/Firefox/i).test(vjs.USER_AGENT);
vjs.IS_CHROME = (/Chrome/i).test(vjs.USER_AGENT);

vjs.TOUCH_ENABLED = !!(('ontouchstart' in window) || window.DocumentTouch && document instanceof window.DocumentTouch);

/**
 * Apply attributes to an HTML element.
 * @param  {Element} el         Target element.
 * @param  {Object=} attributes Element attributes to be applied.
 * @private
 */
vjs.setElementAttributes = function(el, attributes){
  vjs.obj.each(attributes, function(attrName, attrValue) {
    if (attrValue === null || typeof attrValue === 'undefined' || attrValue === false) {
      el.removeAttribute(attrName);
    } else {
      el.setAttribute(attrName, (attrValue === true ? '' : attrValue));
    }
  });
};

/**
 * Get an element's attribute values, as defined on the HTML tag
 * Attributs are not the same as properties. They're defined on the tag
 * or with setAttribute (which shouldn't be used with HTML)
 * This will return true or false for boolean attributes.
 * @param  {Element} tag Element from which to get tag attributes
 * @return {Object}
 * @private
 */
vjs.getElementAttributes = function(tag){
  var obj, knownBooleans, attrs, attrName, attrVal;

  obj = {};

  // known boolean attributes
  // we can check for matching boolean properties, but older browsers
  // won't know about HTML5 boolean attributes that we still read from
  knownBooleans = ','+'autoplay,controls,loop,muted,default'+',';

  if (tag && tag.attributes && tag.attributes.length > 0) {
    attrs = tag.attributes;

    for (var i = attrs.length - 1; i >= 0; i--) {
      attrName = attrs[i].name;
      attrVal = attrs[i].value;

      // check for known booleans
      // the matching element property will return a value for typeof
      if (typeof tag[attrName] === 'boolean' || knownBooleans.indexOf(','+attrName+',') !== -1) {
        // the value of an included boolean attribute is typically an empty
        // string ('') which would equal false if we just check for a false value.
        // we also don't want support bad code like autoplay='false'
        attrVal = (attrVal !== null) ? true : false;
      }

      obj[attrName] = attrVal;
    }
  }

  return obj;
};

/**
 * Get the computed style value for an element
 * From http://robertnyman.com/2006/04/24/get-the-rendered-style-of-an-element/
 * @param  {Element} el        Element to get style value for
 * @param  {String} strCssRule Style name
 * @return {String}            Style value
 * @private
 */
vjs.getComputedDimension = function(el, strCssRule){
  var strValue = '';
  if(document.defaultView && document.defaultView.getComputedStyle){
    strValue = document.defaultView.getComputedStyle(el, '').getPropertyValue(strCssRule);

  } else if(el.currentStyle){
    // IE8 Width/Height support
    strValue = el['client'+strCssRule.substr(0,1).toUpperCase() + strCssRule.substr(1)] + 'px';
  }
  return strValue;
};

/**
 * Insert an element as the first child node of another
 * @param  {Element} child   Element to insert
 * @param  {[type]} parent Element to insert child into
 * @private
 */
vjs.insertFirst = function(child, parent){
  if (parent.firstChild) {
    parent.insertBefore(child, parent.firstChild);
  } else {
    parent.appendChild(child);
  }
};

/**
 * Object to hold browser support information
 * @type {Object}
 * @private
 */
vjs.browser = {};

/**
 * Shorthand for document.getElementById()
 * Also allows for CSS (jQuery) ID syntax. But nothing other than IDs.
 * @param  {String} id  Element ID
 * @return {Element}    Element with supplied ID
 * @private
 */
vjs.el = function(id){
  if (id.indexOf('#') === 0) {
    id = id.slice(1);
  }

  return document.getElementById(id);
};

/**
 * Format seconds as a time string, H:MM:SS or M:SS
 * Supplying a guide (in seconds) will force a number of leading zeros
 * to cover the length of the guide
 * @param  {Number} seconds Number of seconds to be turned into a string
 * @param  {Number} guide   Number (in seconds) to model the string after
 * @return {String}         Time formatted as H:MM:SS or M:SS
 * @private
 */
vjs.formatTime = function(seconds, guide) {
  // Default to using seconds as guide
  guide = guide || seconds;
  var s = Math.floor(seconds % 60),
      m = Math.floor(seconds / 60 % 60),
      h = Math.floor(seconds / 3600),
      gm = Math.floor(guide / 60 % 60),
      gh = Math.floor(guide / 3600);

  // handle invalid times
  if (isNaN(seconds) || seconds === Infinity) {
    // '-' is false for all relational operators (e.g. <, >=) so this setting
    // will add the minimum number of fields specified by the guide
    h = m = s = '-';
  }

  // Check if we need to show hours
  h = (h > 0 || gh > 0) ? h + ':' : '';

  // If hours are showing, we may need to add a leading zero.
  // Always show at least one digit of minutes.
  m = (((h || gm >= 10) && m < 10) ? '0' + m : m) + ':';

  // Check if leading zero is need for seconds
  s = (s < 10) ? '0' + s : s;

  return h + m + s;
};

// Attempt to block the ability to select text while dragging controls
vjs.blockTextSelection = function(){
  document.body.focus();
  document.onselectstart = function () { return false; };
};
// Turn off text selection blocking
vjs.unblockTextSelection = function(){ document.onselectstart = function () { return true; }; };

/**
 * Trim whitespace from the ends of a string.
 * @param  {String} string String to trim
 * @return {String}        Trimmed string
 * @private
 */
vjs.trim = function(str){
  return (str+'').replace(/^\s+|\s+$/g, '');
};

/**
 * Should round off a number to a decimal place
 * @param  {Number} num Number to round
 * @param  {Number} dec Number of decimal places to round to
 * @return {Number}     Rounded number
 * @private
 */
vjs.round = function(num, dec) {
  if (!dec) { dec = 0; }
  return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec);
};

/**
 * Should create a fake TimeRange object
 * Mimics an HTML5 time range instance, which has functions that
 * return the start and end times for a range
 * TimeRanges are returned by the buffered() method
 * @param  {Number} start Start time in seconds
 * @param  {Number} end   End time in seconds
 * @return {Object}       Fake TimeRange object
 * @private
 */
vjs.createTimeRange = function(start, end){
  return {
    length: 1,
    start: function() { return start; },
    end: function() { return end; }
  };
};

/**
 * Simple http request for retrieving external files (e.g. text tracks)
 * @param  {String}    url             URL of resource
 * @param  {Function} onSuccess       Success callback
 * @param  {Function=} onError         Error callback
 * @param  {Boolean=}   withCredentials Flag which allow credentials
 * @private
 */
vjs.get = function(url, onSuccess, onError, withCredentials){
  var fileUrl, request, urlInfo, winLoc, crossOrigin;

  onError = onError || function(){};

  if (typeof XMLHttpRequest === 'undefined') {
    // Shim XMLHttpRequest for older IEs
    window.XMLHttpRequest = function () {
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch (e) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch (f) {}
      try { return new window.ActiveXObject('Msxml2.XMLHTTP'); } catch (g) {}
      throw new Error('This browser does not support XMLHttpRequest.');
    };
  }

  request = new XMLHttpRequest();

  urlInfo = vjs.parseUrl(url);
  winLoc = window.location;
  // check if url is for another domain/origin
  // ie8 doesn't know location.origin, so we won't rely on it here
  crossOrigin = (urlInfo.protocol + urlInfo.host) !== (winLoc.protocol + winLoc.host);

  // Use XDomainRequest for IE if XMLHTTPRequest2 isn't available
  // 'withCredentials' is only available in XMLHTTPRequest2
  // Also XDomainRequest has a lot of gotchas, so only use if cross domain
  if(crossOrigin && window.XDomainRequest && !('withCredentials' in request)) {
    request = new window.XDomainRequest();
    request.onload = function() {
      onSuccess(request.responseText);
    };
    request.onerror = onError;
    // these blank handlers need to be set to fix ie9 http://cypressnorth.com/programming/internet-explorer-aborting-ajax-requests-fixed/
    request.onprogress = function() {};
    request.ontimeout = onError;

  // XMLHTTPRequest
  } else {
    fileUrl = (urlInfo.protocol == 'file:' || winLoc.protocol == 'file:');

    request.onreadystatechange = function() {
      if (request.readyState === 4) {
        if (request.status === 200 || fileUrl && request.status === 0) {
          onSuccess(request.responseText);
        } else {
          onError(request.responseText);
        }
      }
    };
  }

  // open the connection
  try {
    // Third arg is async, or ignored by XDomainRequest
    request.open('GET', url, true);
    // withCredentials only supported by XMLHttpRequest2
    if(withCredentials) {
      request.withCredentials = true;
    }
  } catch(e) {
    onError(e);
    return;
  }

  // send the request
  try {
    request.send();
  } catch(e) {
    onError(e);
  }
};

/**
 * Add to local storage (may removeable)
 * @private
 */
vjs.setLocalStorage = function(key, value){
  try {
    // IE was throwing errors referencing the var anywhere without this
    var localStorage = window.localStorage || false;
    if (!localStorage) { return; }
    localStorage[key] = value;
  } catch(e) {
    if (e.code == 22 || e.code == 1014) { // Webkit == 22 / Firefox == 1014
      vjs.log('LocalStorage Full (VideoJS)', e);
    } else {
      if (e.code == 18) {
        vjs.log('LocalStorage not allowed (VideoJS)', e);
      } else {
        vjs.log('LocalStorage Error (VideoJS)', e);
      }
    }
  }
};

/**
 * Get abosolute version of relative URL. Used to tell flash correct URL.
 * http://stackoverflow.com/questions/470832/getting-an-absolute-url-from-a-relative-one-ie6-issue
 * @param  {String} url URL to make absolute
 * @return {String}     Absolute URL
 * @private
 */
vjs.getAbsoluteURL = function(url){

  // Check if absolute URL
  if (!url.match(/^https?:\/\//)) {
    // Convert to absolute URL. Flash hosted off-site needs an absolute URL.
    url = vjs.createEl('div', {
      innerHTML: '<a href="'+url+'">x</a>'
    }).firstChild.href;
  }

  return url;
};


/**
 * Resolve and parse the elements of a URL
 * @param  {String} url The url to parse
 * @return {Object}     An object of url details
 */
vjs.parseUrl = function(url) {
  var div, a, addToBody, props, details;

  props = ['protocol', 'hostname', 'port', 'pathname', 'search', 'hash', 'host'];

  // add the url to an anchor and let the browser parse the URL
  a = vjs.createEl('a', { href: url });

  // IE8 (and 9?) Fix
  // ie8 doesn't parse the URL correctly until the anchor is actually
  // added to the body, and an innerHTML is needed to trigger the parsing
  addToBody = (a.host === '' && a.protocol !== 'file:');
  if (addToBody) {
    div = vjs.createEl('div');
    div.innerHTML = '<a href="'+url+'"></a>';
    a = div.firstChild;
    // prevent the div from affecting layout
    div.setAttribute('style', 'display:none; position:absolute;');
    document.body.appendChild(div);
  }

  // Copy the specific URL properties to a new object
  // This is also needed for IE8 because the anchor loses its
  // properties when it's removed from the dom
  details = {};
  for (var i = 0; i < props.length; i++) {
    details[props[i]] = a[props[i]];
  }

  if (addToBody) {
    document.body.removeChild(div);
  }

  return details;
};

/**
 * Log messags to the console and history based on the type of message
 *
 * @param  {String} type The type of message, or `null` for `log`
 * @param  {[type]} args The args to be passed to the log
 * @private
 */
function _logType(type, args){
  var argsArray, noop, console;

  // convert args to an array to get array functions
  argsArray = Array.prototype.slice.call(args);
  // if there's no console then don't try to output messages
  // they will still be stored in vjs.log.history
  // Was setting these once outside of this function, but containing them
  // in the function makes it easier to test cases where console doesn't exist
  noop = function(){};
  console = window['console'] || {
    'log': noop,
    'warn': noop,
    'error': noop
  };

  if (type) {
    // add the type to the front of the message
    argsArray.unshift(type.toUpperCase()+':');
  } else {
    // default to log with no prefix
    type = 'log';
  }

  // add to history
  vjs.log.history.push(argsArray);

  // add console prefix after adding to history
  argsArray.unshift('VIDEOJS:');

  // call appropriate log function
  if (console[type].apply) {
    console[type].apply(console, argsArray);
  } else {
    // ie8 doesn't allow error.apply, but it will just join() the array anyway
    console[type](argsArray.join(' '));
  }
}

/**
 * Log plain debug messages
 */
vjs.log = function(){
  _logType(null, arguments);
};

/**
 * Keep a history of log messages
 * @type {Array}
 */
vjs.log.history = [];

/**
 * Log error messages
 */
vjs.log.error = function(){
  _logType('error', arguments);
};

/**
 * Log warning messages
 */
vjs.log.warn = function(){
  _logType('warn', arguments);
};

// Offset Left
// getBoundingClientRect technique from John Resig http://ejohn.org/blog/getboundingclientrect-is-awesome/
vjs.findPosition = function(el) {
  var box, docEl, body, clientLeft, scrollLeft, left, clientTop, scrollTop, top;

  if (el.getBoundingClientRect && el.parentNode) {
    box = el.getBoundingClientRect();
  }

  if (!box) {
    return {
      left: 0,
      top: 0
    };
  }

  docEl = document.documentElement;
  body = document.body;

  clientLeft = docEl.clientLeft || body.clientLeft || 0;
  scrollLeft = window.pageXOffset || body.scrollLeft;
  left = box.left + scrollLeft - clientLeft;

  clientTop = docEl.clientTop || body.clientTop || 0;
  scrollTop = window.pageYOffset || body.scrollTop;
  top = box.top + scrollTop - clientTop;

  // Android sometimes returns slightly off decimal values, so need to round
  return {
    left: vjs.round(left),
    top: vjs.round(top)
  };
};

/**
 * Array functions container
 * @type {Object}
 * @private
 */
vjs.arr = {};

/*
 * Loops through an array and runs a function for each item inside it.
 * @param  {Array}    array       The array
 * @param  {Function} callback    The function to be run for each item
 * @param  {*}        thisArg     The `this` binding of callback
 * @returns {Array}               The array
 * @private
 */
vjs.arr.forEach = function(array, callback, thisArg) {
  if (vjs.obj.isArray(array) && callback instanceof Function) {
    for (var i = 0, len = array.length; i < len; ++i) {
      callback.call(thisArg || vjs, array[i], i, array);
    }
  }

  return array;
};
/**
 * Utility functions namespace
 * @namespace
 * @type {Object}
 */
vjs.util = {};

/**
 * Merge two options objects, recursively merging any plain object properties as
 * well.  Previously `deepMerge`
 *
 * @param  {Object} obj1 Object to override values in
 * @param  {Object} obj2 Overriding object
 * @return {Object}      New object -- obj1 and obj2 will be untouched
 */
vjs.util.mergeOptions = function(obj1, obj2){
  var key, val1, val2;

  // make a copy of obj1 so we're not overwriting original values.
  // like prototype.options_ and all sub options objects
  obj1 = vjs.obj.copy(obj1);

  for (key in obj2){
    if (obj2.hasOwnProperty(key)) {
      val1 = obj1[key];
      val2 = obj2[key];

      // Check if both properties are pure objects and do a deep merge if so
      if (vjs.obj.isPlain(val1) && vjs.obj.isPlain(val2)) {
        obj1[key] = vjs.util.mergeOptions(val1, val2);
      } else {
        obj1[key] = obj2[key];
      }
    }
  }
  return obj1;
};/**
 * @fileoverview Player Component - Base class for all UI objects
 *
 */

/**
 * Base UI Component class
 *
 * Components are embeddable UI objects that are represented by both a
 * javascript object and an element in the DOM. They can be children of other
 * components, and can have many children themselves.
 *
 *     // adding a button to the player
 *     var button = player.addChild('button');
 *     button.el(); // -> button element
 *
 *     <div class="video-js">
 *       <div class="vjs-button">Button</div>
 *     </div>
 *
 * Components are also event emitters.
 *
 *     button.on('click', function(){
 *       console.log('Button Clicked!');
 *     });
 *
 *     button.trigger('customevent');
 *
 * @param {Object} player  Main Player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.CoreObject
 */
vjs.Component = vjs.CoreObject.extend({
  /**
   * the constructor function for the class
   *
   * @constructor
   */
  init: function(player, options, ready){
    this.player_ = player;

    // Make a copy of prototype.options_ to protect against overriding global defaults
    this.options_ = vjs.obj.copy(this.options_);

    // Updated options with supplied options
    options = this.options(options);

    // Get ID from options, element, or create using player ID and unique ID
    this.id_ = options['id'] || ((options['el'] && options['el']['id']) ? options['el']['id'] : player.id() + '_component_' + vjs.guid++ );

    this.name_ = options['name'] || null;

    // Create element if one wasn't provided in options
    this.el_ = options['el'] || this.createEl();

    this.children_ = [];
    this.childIndex_ = {};
    this.childNameIndex_ = {};

    // Add any child components in options
    this.initChildren();

    this.ready(ready);
    // Don't want to trigger ready here or it will before init is actually
    // finished for all children that run this constructor

    if (options.reportTouchActivity !== false) {
      this.enableTouchActivity();
    }
  }
});

/**
 * Dispose of the component and all child components
 */
vjs.Component.prototype.dispose = function(){
  this.trigger({ type: 'dispose', 'bubbles': false });

  // Dispose all children.
  if (this.children_) {
    for (var i = this.children_.length - 1; i >= 0; i--) {
      if (this.children_[i].dispose) {
        this.children_[i].dispose();
      }
    }
  }

  // Delete child references
  this.children_ = null;
  this.childIndex_ = null;
  this.childNameIndex_ = null;

  // Remove all event listeners.
  this.off();

  // Remove element from DOM
  if (this.el_.parentNode) {
    this.el_.parentNode.removeChild(this.el_);
  }

  vjs.removeData(this.el_);
  this.el_ = null;
};

/**
 * Reference to main player instance
 *
 * @type {vjs.Player}
 * @private
 */
vjs.Component.prototype.player_ = true;

/**
 * Return the component's player
 *
 * @return {vjs.Player}
 */
vjs.Component.prototype.player = function(){
  return this.player_;
};

/**
 * The component's options object
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.options_;

/**
 * Deep merge of options objects
 *
 * Whenever a property is an object on both options objects
 * the two properties will be merged using vjs.obj.deepMerge.
 *
 * This is used for merging options for child components. We
 * want it to be easy to override individual options on a child
 * component without having to rewrite all the other default options.
 *
 *     Parent.prototype.options_ = {
 *       children: {
 *         'childOne': { 'foo': 'bar', 'asdf': 'fdsa' },
 *         'childTwo': {},
 *         'childThree': {}
 *       }
 *     }
 *     newOptions = {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'abc': '123' }
 *         'childTwo': null,
 *         'childFour': {}
 *       }
 *     }
 *
 *     this.options(newOptions);
 *
 * RESULT
 *
 *     {
 *       children: {
 *         'childOne': { 'foo': 'baz', 'asdf': 'fdsa', 'abc': '123' },
 *         'childTwo': null, // Disabled. Won't be initialized.
 *         'childThree': {},
 *         'childFour': {}
 *       }
 *     }
 *
 * @param  {Object} obj Object of new option values
 * @return {Object}     A NEW object of this.options_ and obj merged
 */
vjs.Component.prototype.options = function(obj){
  if (obj === undefined) return this.options_;

  return this.options_ = vjs.util.mergeOptions(this.options_, obj);
};

/**
 * The DOM element for the component
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.el_;

/**
 * Create the component's DOM element
 *
 * @param  {String=} tagName  Element's node type. e.g. 'div'
 * @param  {Object=} attributes An object of element attributes that should be set on the element
 * @return {Element}
 */
vjs.Component.prototype.createEl = function(tagName, attributes){
  return vjs.createEl(tagName, attributes);
};

vjs.Component.prototype.localize = function(string){
  var lang = this.player_.language(),
      languages = this.player_.languages();
  if (languages && languages[lang] && languages[lang][string]) {
    return languages[lang][string];
  }
  return string;
};

/**
 * Get the component's DOM element
 *
 *     var domEl = myComponent.el();
 *
 * @return {Element}
 */
vjs.Component.prototype.el = function(){
  return this.el_;
};

/**
 * An optional element where, if defined, children will be inserted instead of
 * directly in `el_`
 *
 * @type {Element}
 * @private
 */
vjs.Component.prototype.contentEl_;

/**
 * Return the component's DOM element for embedding content.
 * Will either be el_ or a new element defined in createEl.
 *
 * @return {Element}
 */
vjs.Component.prototype.contentEl = function(){
  return this.contentEl_ || this.el_;
};

/**
 * The ID for the component
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.id_;

/**
 * Get the component's ID
 *
 *     var id = myComponent.id();
 *
 * @return {String}
 */
vjs.Component.prototype.id = function(){
  return this.id_;
};

/**
 * The name for the component. Often used to reference the component.
 *
 * @type {String}
 * @private
 */
vjs.Component.prototype.name_;

/**
 * Get the component's name. The name is often used to reference the component.
 *
 *     var name = myComponent.name();
 *
 * @return {String}
 */
vjs.Component.prototype.name = function(){
  return this.name_;
};

/**
 * Array of child components
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.children_;

/**
 * Get an array of all child components
 *
 *     var kids = myComponent.children();
 *
 * @return {Array} The children
 */
vjs.Component.prototype.children = function(){
  return this.children_;
};

/**
 * Object of child components by ID
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childIndex_;

/**
 * Returns a child component with the provided ID
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChildById = function(id){
  return this.childIndex_[id];
};

/**
 * Object of child components by name
 *
 * @type {Object}
 * @private
 */
vjs.Component.prototype.childNameIndex_;

/**
 * Returns a child component with the provided name
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.getChild = function(name){
  return this.childNameIndex_[name];
};

/**
 * Adds a child component inside this component
 *
 *     myComponent.el();
 *     // -> <div class='my-component'></div>
 *     myComonent.children();
 *     // [empty array]
 *
 *     var myButton = myComponent.addChild('MyButton');
 *     // -> <div class='my-component'><div class="my-button">myButton<div></div>
 *     // -> myButton === myComonent.children()[0];
 *
 * Pass in options for child constructors and options for children of the child
 *
 *     var myButton = myComponent.addChild('MyButton', {
 *       text: 'Press Me',
 *       children: {
 *         buttonChildExample: {
 *           buttonChildOption: true
 *         }
 *       }
 *     });
 *
 * @param {String|vjs.Component} child The class name or instance of a child to add
 * @param {Object=} options Options, including options to be passed to children of the child.
 * @return {vjs.Component} The child component (created by this process if a string was used)
 * @suppress {accessControls|checkRegExp|checkTypes|checkVars|const|constantProperty|deprecated|duplicate|es5Strict|fileoverviewTags|globalThis|invalidCasts|missingProperties|nonStandardJsDocs|strictModuleDepCheck|undefinedNames|undefinedVars|unknownDefines|uselessCode|visibility}
 */
vjs.Component.prototype.addChild = function(child, options){
  var component, componentClass, componentName, componentId;

  // If string, create new component with options
  if (typeof child === 'string') {

    componentName = child;

    // Make sure options is at least an empty object to protect against errors
    options = options || {};

    // Assume name of set is a lowercased name of the UI Class (PlayButton, etc.)
    componentClass = options['componentClass'] || vjs.capitalize(componentName);

    // Set name through options
    options['name'] = componentName;

    // Create a new object & element for this controls set
    // If there's no .player_, this is a player
    // Closure Compiler throws an 'incomplete alias' warning if we use the vjs variable directly.
    // Every class should be exported, so this should never be a problem here.
    component = new window['videojs'][componentClass](this.player_ || this, options);

  // child is a component instance
  } else {
    component = child;
  }

  this.children_.push(component);

  if (typeof component.id === 'function') {
    this.childIndex_[component.id()] = component;
  }

  // If a name wasn't used to create the component, check if we can use the
  // name function of the component
  componentName = componentName || (component.name && component.name());

  if (componentName) {
    this.childNameIndex_[componentName] = component;
  }

  // Add the UI object's element to the container div (box)
  // Having an element is not required
  if (typeof component['el'] === 'function' && component['el']()) {
    this.contentEl().appendChild(component['el']());
  }

  // Return so it can stored on parent object if desired.
  return component;
};

/**
 * Remove a child component from this component's list of children, and the
 * child component's element from this component's element
 *
 * @param  {vjs.Component} component Component to remove
 */
vjs.Component.prototype.removeChild = function(component){
  if (typeof component === 'string') {
    component = this.getChild(component);
  }

  if (!component || !this.children_) return;

  var childFound = false;
  for (var i = this.children_.length - 1; i >= 0; i--) {
    if (this.children_[i] === component) {
      childFound = true;
      this.children_.splice(i,1);
      break;
    }
  }

  if (!childFound) return;

  this.childIndex_[component.id] = null;
  this.childNameIndex_[component.name] = null;

  var compEl = component.el();
  if (compEl && compEl.parentNode === this.contentEl()) {
    this.contentEl().removeChild(component.el());
  }
};

/**
 * Add and initialize default child components from options
 *
 *     // when an instance of MyComponent is created, all children in options
 *     // will be added to the instance by their name strings and options
 *     MyComponent.prototype.options_.children = {
 *       myChildComponent: {
 *         myChildOption: true
 *       }
 *     }
 *
 *     // Or when creating the component
 *     var myComp = new MyComponent(player, {
 *       children: {
 *         myChildComponent: {
 *           myChildOption: true
 *         }
 *       }
 *     });
 *
 * The children option can also be an Array of child names or
 * child options objects (that also include a 'name' key).
 *
 *     var myComp = new MyComponent(player, {
 *       children: [
 *         'button',
 *         {
 *           name: 'button',
 *           someOtherOption: true
 *         }
 *       ]
 *     });
 *
 */
vjs.Component.prototype.initChildren = function(){
  var parent, children, child, name, opts;

  parent = this;
  children = this.options()['children'];

  if (children) {
    // Allow for an array of children details to passed in the options
    if (vjs.obj.isArray(children)) {
      for (var i = 0; i < children.length; i++) {
        child = children[i];

        if (typeof child == 'string') {
          name = child;
          opts = {};
        } else {
          name = child.name;
          opts = child;
        }

        parent[name] = parent.addChild(name, opts);
      }
    } else {
      vjs.obj.each(children, function(name, opts){
        // Allow for disabling default components
        // e.g. vjs.options['children']['posterImage'] = false
        if (opts === false) return;

        // Set property name on player. Could cause conflicts with other prop names, but it's worth making refs easy.
        parent[name] = parent.addChild(name, opts);
      });
    }
  }
};

/**
 * Allows sub components to stack CSS class names
 *
 * @return {String} The constructed class name
 */
vjs.Component.prototype.buildCSSClass = function(){
    // Child classes can include a function that does:
    // return 'CLASS NAME' + this._super();
    return '';
};

/* Events
============================================================================= */

/**
 * Add an event listener to this component's element
 *
 *     var myFunc = function(){
 *       var myPlayer = this;
 *       // Do something when the event is fired
 *     };
 *
 *     myPlayer.on("eventName", myFunc);
 *
 * The context will be the component.
 *
 * @param  {String}   type The event type e.g. 'click'
 * @param  {Function} fn   The event listener
 * @return {vjs.Component} self
 */
vjs.Component.prototype.on = function(type, fn){
  vjs.on(this.el_, type, vjs.bind(this, fn));
  return this;
};

/**
 * Remove an event listener from the component's element
 *
 *     myComponent.off("eventName", myFunc);
 *
 * @param  {String=}   type Event type. Without type it will remove all listeners.
 * @param  {Function=} fn   Event listener. Without fn it will remove all listeners for a type.
 * @return {vjs.Component}
 */
vjs.Component.prototype.off = function(type, fn){
  vjs.off(this.el_, type, fn);
  return this;
};

/**
 * Add an event listener to be triggered only once and then removed
 *
 * @param  {String}   type Event type
 * @param  {Function} fn   Event listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.one = function(type, fn) {
  vjs.one(this.el_, type, vjs.bind(this, fn));
  return this;
};

/**
 * Trigger an event on an element
 *
 *     myComponent.trigger('eventName');
 *     myComponent.trigger({'type':'eventName'});
 *
 * @param  {Event|Object|String} event  A string (the type) or an event object with a type attribute
 * @return {vjs.Component}       self
 */
vjs.Component.prototype.trigger = function(event){
  vjs.trigger(this.el_, event);
  return this;
};

/* Ready
================================================================================ */
/**
 * Is the component loaded
 * This can mean different things depending on the component.
 *
 * @private
 * @type {Boolean}
 */
vjs.Component.prototype.isReady_;

/**
 * Trigger ready as soon as initialization is finished
 *
 * Allows for delaying ready. Override on a sub class prototype.
 * If you set this.isReadyOnInitFinish_ it will affect all components.
 * Specially used when waiting for the Flash player to asynchrnously load.
 *
 * @type {Boolean}
 * @private
 */
vjs.Component.prototype.isReadyOnInitFinish_ = true;

/**
 * List of ready listeners
 *
 * @type {Array}
 * @private
 */
vjs.Component.prototype.readyQueue_;

/**
 * Bind a listener to the component's ready state
 *
 * Different from event listeners in that if the ready event has already happend
 * it will trigger the function immediately.
 *
 * @param  {Function} fn Ready listener
 * @return {vjs.Component}
 */
vjs.Component.prototype.ready = function(fn){
  if (fn) {
    if (this.isReady_) {
      fn.call(this);
    } else {
      if (this.readyQueue_ === undefined) {
        this.readyQueue_ = [];
      }
      this.readyQueue_.push(fn);
    }
  }
  return this;
};

/**
 * Trigger the ready listeners
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.triggerReady = function(){
  this.isReady_ = true;

  var readyQueue = this.readyQueue_;

  if (readyQueue && readyQueue.length > 0) {

    for (var i = 0, j = readyQueue.length; i < j; i++) {
      readyQueue[i].call(this);
    }

    // Reset Ready Queue
    this.readyQueue_ = [];

    // Allow for using event listeners also, in case you want to do something everytime a source is ready.
    this.trigger('ready');
  }
};

/* Display
============================================================================= */

/**
 * Add a CSS class name to the component's element
 *
 * @param {String} classToAdd Classname to add
 * @return {vjs.Component}
 */
vjs.Component.prototype.addClass = function(classToAdd){
  vjs.addClass(this.el_, classToAdd);
  return this;
};

/**
 * Remove a CSS class name from the component's element
 *
 * @param {String} classToRemove Classname to remove
 * @return {vjs.Component}
 */
vjs.Component.prototype.removeClass = function(classToRemove){
  vjs.removeClass(this.el_, classToRemove);
  return this;
};

/**
 * Show the component element if hidden
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.show = function(){
  this.el_.style.display = 'block';
  return this;
};

/**
 * Hide the component element if currently showing
 *
 * @return {vjs.Component}
 */
vjs.Component.prototype.hide = function(){
  this.el_.style.display = 'none';
  return this;
};

/**
 * Lock an item in its visible state
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.lockShowing = function(){
  this.addClass('vjs-lock-showing');
  return this;
};

/**
 * Unlock an item to be hidden
 * To be used with fadeIn/fadeOut.
 *
 * @return {vjs.Component}
 * @private
 */
vjs.Component.prototype.unlockShowing = function(){
  this.removeClass('vjs-lock-showing');
  return this;
};

/**
 * Disable component by making it unshowable
 *
 * Currently private because we're movign towards more css-based states.
 * @private
 */
vjs.Component.prototype.disable = function(){
  this.hide();
  this.show = function(){};
};

/**
 * Set or get the width of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num   Optional width number
 * @param  {Boolean} skipListeners Skip the 'resize' event trigger
 * @return {vjs.Component} This component, when setting the width
 * @return {Number|String} The width, when getting
 */
vjs.Component.prototype.width = function(num, skipListeners){
  return this.dimension('width', num, skipListeners);
};

/**
 * Get or set the height of the component (CSS values)
 *
 * Setting the video tag dimension values only works with values in pixels.
 * Percent values will not work.
 * Some percents can be used, but width()/height() will return the number + %,
 * not the actual computed width/height.
 *
 * @param  {Number|String=} num     New component height
 * @param  {Boolean=} skipListeners Skip the resize event trigger
 * @return {vjs.Component} This component, when setting the height
 * @return {Number|String} The height, when getting
 */
vjs.Component.prototype.height = function(num, skipListeners){
  return this.dimension('height', num, skipListeners);
};

/**
 * Set both width and height at the same time
 *
 * @param  {Number|String} width
 * @param  {Number|String} height
 * @return {vjs.Component} The component
 */
vjs.Component.prototype.dimensions = function(width, height){
  // Skip resize listeners on width for optimization
  return this.width(width, true).height(height);
};

/**
 * Get or set width or height
 *
 * This is the shared code for the width() and height() methods.
 * All for an integer, integer + 'px' or integer + '%';
 *
 * Known issue: Hidden elements officially have a width of 0. We're defaulting
 * to the style.width value and falling back to computedStyle which has the
 * hidden element issue. Info, but probably not an efficient fix:
 * http://www.foliotek.com/devblog/getting-the-width-of-a-hidden-element-with-jquery-using-width/
 *
 * @param  {String} widthOrHeight  'width' or 'height'
 * @param  {Number|String=} num     New dimension
 * @param  {Boolean=} skipListeners Skip resize event trigger
 * @return {vjs.Component} The component if a dimension was set
 * @return {Number|String} The dimension if nothing was set
 * @private
 */
vjs.Component.prototype.dimension = function(widthOrHeight, num, skipListeners){
  if (num !== undefined) {
    if (num === null || vjs.isNaN(num)) {
      num = 0;
    }

    // Check if using css width/height (% or px) and adjust
    if ((''+num).indexOf('%') !== -1 || (''+num).indexOf('px') !== -1) {
      this.el_.style[widthOrHeight] = num;
    } else if (num === 'auto') {
      this.el_.style[widthOrHeight] = '';
    } else {
      this.el_.style[widthOrHeight] = num+'px';
    }

    // skipListeners allows us to avoid triggering the resize event when setting both width and height
    if (!skipListeners) { this.trigger('resize'); }

    // Return component
    return this;
  }

  // Not setting a value, so getting it
  // Make sure element exists
  if (!this.el_) return 0;

  // Get dimension value from style
  var val = this.el_.style[widthOrHeight];
  var pxIndex = val.indexOf('px');
  if (pxIndex !== -1) {
    // Return the pixel value with no 'px'
    return parseInt(val.slice(0,pxIndex), 10);

  // No px so using % or no style was set, so falling back to offsetWidth/height
  // If component has display:none, offset will return 0
  // TODO: handle display:none and no dimension style using px
  } else {

    return parseInt(this.el_['offset'+vjs.capitalize(widthOrHeight)], 10);

    // ComputedStyle version.
    // Only difference is if the element is hidden it will return
    // the percent value (e.g. '100%'')
    // instead of zero like offsetWidth returns.
    // var val = vjs.getComputedStyleValue(this.el_, widthOrHeight);
    // var pxIndex = val.indexOf('px');

    // if (pxIndex !== -1) {
    //   return val.slice(0, pxIndex);
    // } else {
    //   return val;
    // }
  }
};

/**
 * Fired when the width and/or height of the component changes
 * @event resize
 */
vjs.Component.prototype.onResize;

/**
 * Emit 'tap' events when touch events are supported
 *
 * This is used to support toggling the controls through a tap on the video.
 *
 * We're requireing them to be enabled because otherwise every component would
 * have this extra overhead unnecessarily, on mobile devices where extra
 * overhead is especially bad.
 * @private
 */
vjs.Component.prototype.emitTapEvents = function(){
  var touchStart, firstTouch, touchTime, couldBeTap, noTap,
      xdiff, ydiff, touchDistance, tapMovementThreshold;

  // Track the start time so we can determine how long the touch lasted
  touchStart = 0;
  firstTouch = null;

  // Maximum movement allowed during a touch event to still be considered a tap
  tapMovementThreshold = 22;

  this.on('touchstart', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length === 1) {
      firstTouch = event.touches[0];
      // Record start time so we can detect a tap vs. "touch and hold"
      touchStart = new Date().getTime();
      // Reset couldBeTap tracking
      couldBeTap = true;
    }
  });

  this.on('touchmove', function(event) {
    // If more than one finger, don't consider treating this as a click
    if (event.touches.length > 1) {
      couldBeTap = false;
    } else if (firstTouch) {
      // Some devices will throw touchmoves for all but the slightest of taps.
      // So, if we moved only a small distance, this could still be a tap
      xdiff = event.touches[0].pageX - firstTouch.pageX;
      ydiff = event.touches[0].pageY - firstTouch.pageY;
      touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);
      if (touchDistance > tapMovementThreshold) {
        couldBeTap = false;
      }
    }
  });

  noTap = function(){
    couldBeTap = false;
  };
  // TODO: Listen to the original target. http://youtu.be/DujfpXOKUp8?t=13m8s
  this.on('touchleave', noTap);
  this.on('touchcancel', noTap);

  // When the touch ends, measure how long it took and trigger the appropriate
  // event
  this.on('touchend', function(event) {
    firstTouch = null;
    // Proceed only if the touchmove/leave/cancel event didn't happen
    if (couldBeTap === true) {
      // Measure how long the touch lasted
      touchTime = new Date().getTime() - touchStart;
      // The touch needs to be quick in order to consider it a tap
      if (touchTime < 250) {
        event.preventDefault(); // Don't let browser turn this into a click
        this.trigger('tap');
        // It may be good to copy the touchend event object and change the
        // type to tap, if the other event properties aren't exact after
        // vjs.fixEvent runs (e.g. event.target)
      }
    }
  });
};

/**
 * Report user touch activity when touch events occur
 *
 * User activity is used to determine when controls should show/hide. It's
 * relatively simple when it comes to mouse events, because any mouse event
 * should show the controls. So we capture mouse events that bubble up to the
 * player and report activity when that happens.
 *
 * With touch events it isn't as easy. We can't rely on touch events at the
 * player level, because a tap (touchstart + touchend) on the video itself on
 * mobile devices is meant to turn controls off (and on). User activity is
 * checked asynchronously, so what could happen is a tap event on the video
 * turns the controls off, then the touchend event bubbles up to the player,
 * which if it reported user activity, would turn the controls right back on.
 * (We also don't want to completely block touch events from bubbling up)
 *
 * Also a touchmove, touch+hold, and anything other than a tap is not supposed
 * to turn the controls back on on a mobile device.
 *
 * Here we're setting the default component behavior to report user activity
 * whenever touch events happen, and this can be turned off by components that
 * want touch events to act differently.
 */
vjs.Component.prototype.enableTouchActivity = function() {
  var report, touchHolding, touchEnd;

  // listener for reporting that the user is active
  report = vjs.bind(this.player(), this.player().reportUserActivity);

  this.on('touchstart', function() {
    report();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    clearInterval(touchHolding);
    // report at the same interval as activityCheck
    touchHolding = setInterval(report, 250);
  });

  touchEnd = function(event) {
    report();
    // stop the interval that maintains activity if the touch is holding
    clearInterval(touchHolding);
  };

  this.on('touchmove', report);
  this.on('touchend', touchEnd);
  this.on('touchcancel', touchEnd);
};

/* Button - Base class for all buttons
================================================================================ */
/**
 * Base class for all buttons
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Button = vjs.Component.extend({
  /**
   * @constructor
   * @inheritDoc
   */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.emitTapEvents();

    this.on('tap', this.onClick);
    this.on('click', this.onClick);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
  }
});

vjs.Button.prototype.createEl = function(type, props){
  var el;

  // Add standard Aria and Tabindex info
  props = vjs.obj.merge({
    className: this.buildCSSClass(),
    'role': 'button',
    'aria-live': 'polite', // let the screen reader user know that the text of the button may change
    tabIndex: 0
  }, props);

  el = vjs.Component.prototype.createEl.call(this, type, props);

  // if innerHTML hasn't been overridden (bigPlayButton), add content elements
  if (!props.innerHTML) {
    this.contentEl_ = vjs.createEl('div', {
      className: 'vjs-control-content'
    });

    this.controlText_ = vjs.createEl('span', {
      className: 'vjs-control-text',
      innerHTML: this.localize(this.buttonText) || 'Need Text'
    });

    this.contentEl_.appendChild(this.controlText_);
    el.appendChild(this.contentEl_);
  }

  return el;
};

vjs.Button.prototype.buildCSSClass = function(){
  // TODO: Change vjs-control to vjs-button?
  return 'vjs-control ' + vjs.Component.prototype.buildCSSClass.call(this);
};

  // Click - Override with specific functionality for button
vjs.Button.prototype.onClick = function(){};

  // Focus - Add keyboard functionality to element
vjs.Button.prototype.onFocus = function(){
  vjs.on(document, 'keydown', vjs.bind(this, this.onKeyPress));
};

  // KeyPress (document level) - Trigger click when keys are pressed
vjs.Button.prototype.onKeyPress = function(event){
  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    event.preventDefault();
    this.onClick();
  }
};

// Blur - Remove keyboard triggers
vjs.Button.prototype.onBlur = function(){
  vjs.off(document, 'keydown', vjs.bind(this, this.onKeyPress));
};
/* Slider
================================================================================ */
/**
 * The base functionality for sliders like the volume bar and seek bar
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.Slider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Set property names to bar and handle to match with the child Slider class is looking for
    this.bar = this.getChild(this.options_['barName']);
    this.handle = this.getChild(this.options_['handleName']);

    this.on('mousedown', this.onMouseDown);
    this.on('touchstart', this.onMouseDown);
    this.on('focus', this.onFocus);
    this.on('blur', this.onBlur);
    this.on('click', this.onClick);

    this.player_.on('controlsvisible', vjs.bind(this, this.update));

    player.on(this.playerEvent, vjs.bind(this, this.update));

    this.boundEvents = {};


    this.boundEvents.move = vjs.bind(this, this.onMouseMove);
    this.boundEvents.end = vjs.bind(this, this.onMouseUp);
  }
});

vjs.Slider.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider';
  props = vjs.obj.merge({
    'role': 'slider',
    'aria-valuenow': 0,
    'aria-valuemin': 0,
    'aria-valuemax': 100,
    tabIndex: 0
  }, props);

  return vjs.Component.prototype.createEl.call(this, type, props);
};

vjs.Slider.prototype.onMouseDown = function(event){
  event.preventDefault();
  vjs.blockTextSelection();
  this.addClass('vjs-sliding');

  vjs.on(document, 'mousemove', this.boundEvents.move);
  vjs.on(document, 'mouseup', this.boundEvents.end);
  vjs.on(document, 'touchmove', this.boundEvents.move);
  vjs.on(document, 'touchend', this.boundEvents.end);

  this.onMouseMove(event);
};

// To be overridden by a subclass
vjs.Slider.prototype.onMouseMove = function(){};

vjs.Slider.prototype.onMouseUp = function() {
  vjs.unblockTextSelection();
  this.removeClass('vjs-sliding');

  vjs.off(document, 'mousemove', this.boundEvents.move, false);
  vjs.off(document, 'mouseup', this.boundEvents.end, false);
  vjs.off(document, 'touchmove', this.boundEvents.move, false);
  vjs.off(document, 'touchend', this.boundEvents.end, false);

  this.update();
};

vjs.Slider.prototype.update = function(){
  // In VolumeBar init we have a setTimeout for update that pops and update to the end of the
  // execution stack. The player is destroyed before then update will cause an error
  if (!this.el_) return;

  // If scrubbing, we could use a cached value to make the handle keep up with the user's mouse.
  // On HTML5 browsers scrubbing is really smooth, but some flash players are slow, so we might want to utilize this later.
  // var progress =  (this.player_.scrubbing) ? this.player_.getCache().currentTime / this.player_.duration() : this.player_.currentTime() / this.player_.duration();

  var barProgress,
      progress = this.getPercent(),
      handle = this.handle,
      bar = this.bar;

  // Protect against no duration and other division issues
  if (isNaN(progress)) { progress = 0; }

  barProgress = progress;

  // If there is a handle, we need to account for the handle in our calculation for progress bar
  // so that it doesn't fall short of or extend past the handle.
  if (handle) {

    var box = this.el_,
        boxWidth = box.offsetWidth,

        handleWidth = handle.el().offsetWidth,

        // The width of the handle in percent of the containing box
        // In IE, widths may not be ready yet causing NaN
        handlePercent = (handleWidth) ? handleWidth / boxWidth : 0,

        // Get the adjusted size of the box, considering that the handle's center never touches the left or right side.
        // There is a margin of half the handle's width on both sides.
        boxAdjustedPercent = 1 - handlePercent,

        // Adjust the progress that we'll use to set widths to the new adjusted box width
        adjustedProgress = progress * boxAdjustedPercent;

    // The bar does reach the left side, so we need to account for this in the bar's width
    barProgress = adjustedProgress + (handlePercent / 2);

    // Move the handle from the left based on the adjected progress
    handle.el().style.left = vjs.round(adjustedProgress * 100, 2) + '%';
  }

  // Set the new bar width
  if (bar) {
    bar.el().style.width = vjs.round(barProgress * 100, 2) + '%';
  }
};

vjs.Slider.prototype.calculateDistance = function(event){
  var el, box, boxX, boxY, boxW, boxH, handle, pageX, pageY;

  el = this.el_;
  box = vjs.findPosition(el);
  boxW = boxH = el.offsetWidth;
  handle = this.handle;

  if (this.options()['vertical']) {
    boxY = box.top;

    if (event.changedTouches) {
      pageY = event.changedTouches[0].pageY;
    } else {
      pageY = event.pageY;
    }

    if (handle) {
      var handleH = handle.el().offsetHeight;
      // Adjusted X and Width, so handle doesn't go outside the bar
      boxY = boxY + (handleH / 2);
      boxH = boxH - handleH;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, ((boxY - pageY) + boxH) / boxH));

  } else {
    boxX = box.left;

    if (event.changedTouches) {
      pageX = event.changedTouches[0].pageX;
    } else {
      pageX = event.pageX;
    }

    if (handle) {
      var handleW = handle.el().offsetWidth;

      // Adjusted X and Width, so handle doesn't go outside the bar
      boxX = boxX + (handleW / 2);
      boxW = boxW - handleW;
    }

    // Percent that the click is through the adjusted area
    return Math.max(0, Math.min(1, (pageX - boxX) / boxW));
  }
};

vjs.Slider.prototype.onFocus = function(){
  vjs.on(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

vjs.Slider.prototype.onKeyPress = function(event){
  if (event.which == 37 || event.which == 40) { // Left and Down Arrows
    event.preventDefault();
    this.stepBack();
  } else if (event.which == 38 || event.which == 39) { // Up and Right Arrows
    event.preventDefault();
    this.stepForward();
  }
};

vjs.Slider.prototype.onBlur = function(){
  vjs.off(document, 'keyup', vjs.bind(this, this.onKeyPress));
};

/**
 * Listener for click events on slider, used to prevent clicks
 *   from bubbling up to parent elements like button menus.
 * @param  {Object} event Event object
 */
vjs.Slider.prototype.onClick = function(event){
  event.stopImmediatePropagation();
  event.preventDefault();
};

/**
 * SeekBar Behavior includes play progress bar, and seek handle
 * Needed so it can determine seek position based on handle position/size
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SliderHandle = vjs.Component.extend();

/**
 * Default value of the slider
 *
 * @type {Number}
 * @private
 */
vjs.SliderHandle.prototype.defaultValue = 0;

/** @inheritDoc */
vjs.SliderHandle.prototype.createEl = function(type, props) {
  props = props || {};
  // Add the slider element class to all sub classes
  props.className = props.className + ' vjs-slider-handle';
  props = vjs.obj.merge({
    innerHTML: '<span class="vjs-control-text">'+this.defaultValue+'</span>'
  }, props);

  return vjs.Component.prototype.createEl.call(this, 'div', props);
};
/* Menu
================================================================================ */
/**
 * The Menu component is used to build pop up menus, including subtitle and
 * captions selection menus.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.Menu = vjs.Component.extend();

/**
 * Add a menu item to the menu
 * @param {Object|String} component Component or component type to add
 */
vjs.Menu.prototype.addItem = function(component){
  this.addChild(component);
  component.on('click', vjs.bind(this, function(){
    this.unlockShowing();
  }));
};

/** @inheritDoc */
vjs.Menu.prototype.createEl = function(){
  var contentElType = this.options().contentElType || 'ul';
  this.contentEl_ = vjs.createEl(contentElType, {
    className: 'vjs-menu-content'
  });
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    append: this.contentEl_,
    className: 'vjs-menu'
  });
  el.appendChild(this.contentEl_);

  // Prevent clicks from bubbling up. Needed for Menu Buttons,
  // where a click on the parent is significant
  vjs.on(el, 'click', function(event){
    event.preventDefault();
    event.stopImmediatePropagation();
  });

  return el;
};

/**
 * The component for a menu item. `<li>`
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.MenuItem = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);
    this.selected(options['selected']);
  }
});

/** @inheritDoc */
vjs.MenuItem.prototype.createEl = function(type, props){
  return vjs.Button.prototype.createEl.call(this, 'li', vjs.obj.merge({
    className: 'vjs-menu-item',
    innerHTML: this.options_['label']
  }, props));
};

/**
 * Handle a click on the menu item, and set it to selected
 */
vjs.MenuItem.prototype.onClick = function(){
  this.selected(true);
};

/**
 * Set this menu item as selected or not
 * @param  {Boolean} selected
 */
vjs.MenuItem.prototype.selected = function(selected){
  if (selected) {
    this.addClass('vjs-selected');
    this.el_.setAttribute('aria-selected',true);
  } else {
    this.removeClass('vjs-selected');
    this.el_.setAttribute('aria-selected',false);
  }
};


/**
 * A button class with a popup menu
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MenuButton = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    this.menu = this.createMenu();

    // Add list to element
    this.addChild(this.menu);

    // Automatically hide empty menu buttons
    if (this.items && this.items.length === 0) {
      this.hide();
    }

    this.on('keyup', this.onKeyPress);
    this.el_.setAttribute('aria-haspopup', true);
    this.el_.setAttribute('role', 'button');
  }
});

/**
 * Track the state of the menu button
 * @type {Boolean}
 * @private
 */
vjs.MenuButton.prototype.buttonPressed_ = false;

vjs.MenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_);

  // Add a title list item to the top
  if (this.options().title) {
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.options().title),
      tabindex: -1
    }));
  }

  this.items = this['createItems']();

  if (this.items) {
    // Add menu items to the menu
    for (var i = 0; i < this.items.length; i++) {
      menu.addItem(this.items[i]);
    }
  }

  return menu;
};

/**
 * Create the list of menu items. Specific to each subclass.
 */
vjs.MenuButton.prototype.createItems = function(){};

/** @inheritDoc */
vjs.MenuButton.prototype.buildCSSClass = function(){
  return this.className + ' vjs-menu-button ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// Focus - Add keyboard functionality to element
// This function is not needed anymore. Instead, the keyboard functionality is handled by
// treating the button as triggering a submenu. When the button is pressed, the submenu
// appears. Pressing the button again makes the submenu disappear.
vjs.MenuButton.prototype.onFocus = function(){};
// Can't turn off list display that we turned on with focus, because list would go away.
vjs.MenuButton.prototype.onBlur = function(){};

vjs.MenuButton.prototype.onClick = function(){
  // When you click the button it adds focus, which will show the menu indefinitely.
  // So we'll remove focus when the mouse leaves the button.
  // Focus is needed for tab navigation.
  this.one('mouseout', vjs.bind(this, function(){
    this.menu.unlockShowing();
    this.el_.blur();
  }));
  if (this.buttonPressed_){
    this.unpressButton();
  } else {
    this.pressButton();
  }
};

vjs.MenuButton.prototype.onKeyPress = function(event){
  event.preventDefault();

  // Check for space bar (32) or enter (13) keys
  if (event.which == 32 || event.which == 13) {
    if (this.buttonPressed_){
      this.unpressButton();
    } else {
      this.pressButton();
    }
  // Check for escape (27) key
  } else if (event.which == 27){
    if (this.buttonPressed_){
      this.unpressButton();
    }
  }
};

vjs.MenuButton.prototype.pressButton = function(){
  this.buttonPressed_ = true;
  this.menu.lockShowing();
  this.el_.setAttribute('aria-pressed', true);
  if (this.items && this.items.length > 0) {
    this.items[0].el().focus(); // set the focus to the title of the submenu
  }
};

vjs.MenuButton.prototype.unpressButton = function(){
  this.buttonPressed_ = false;
  this.menu.unlockShowing();
  this.el_.setAttribute('aria-pressed', false);
};

/**
 * Custom MediaError to mimic the HTML5 MediaError
 * @param {Number} code The media error code
 */
vjs.MediaError = function(code){
  if (typeof code === 'number') {
    this.code = code;
  } else if (typeof code === 'string') {
    // default code is zero, so this is a custom error
    this.message = code;
  } else if (typeof code === 'object') { // object
    vjs.obj.merge(this, code);
  }

  if (!this.message) {
    this.message = vjs.MediaError.defaultMessages[this.code] || '';
  }
};

/**
 * The error code that refers two one of the defined
 * MediaError types
 * @type {Number}
 */
vjs.MediaError.prototype.code = 0;

/**
 * An optional message to be shown with the error.
 * Message is not part of the HTML5 video spec
 * but allows for more informative custom errors.
 * @type {String}
 */
vjs.MediaError.prototype.message = '';

/**
 * An optional status code that can be set by plugins
 * to allow even more detail about the error.
 * For example the HLS plugin might provide the specific
 * HTTP status code that was returned when the error
 * occurred, then allowing a custom error overlay
 * to display more information.
 * @type {[type]}
 */
vjs.MediaError.prototype.status = null;

vjs.MediaError.errorTypes = [
  'MEDIA_ERR_CUSTOM',            // = 0
  'MEDIA_ERR_ABORTED',           // = 1
  'MEDIA_ERR_NETWORK',           // = 2
  'MEDIA_ERR_DECODE',            // = 3
  'MEDIA_ERR_SRC_NOT_SUPPORTED', // = 4
  'MEDIA_ERR_ENCRYPTED'          // = 5
];

vjs.MediaError.defaultMessages = {
  1: 'You aborted the video playback',
  2: 'A network error caused the video download to fail part-way.',
  3: 'The video playback was aborted due to a corruption problem or because the video used features your browser did not support.',
  4: 'The video could not be loaded, either because the server or network failed or because the format is not supported.',
  5: 'The video is encrypted and we do not have the keys to decrypt it.'
};

// Add types as properties on MediaError
// e.g. MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED = 4;
for (var errNum = 0; errNum < vjs.MediaError.errorTypes.length; errNum++) {
  vjs.MediaError[vjs.MediaError.errorTypes[errNum]] = errNum;
  // values should be accessible on both the class and instance
  vjs.MediaError.prototype[vjs.MediaError.errorTypes[errNum]] = errNum;
}
(function(){
  var apiMap, specApi, browserApi, i;

  /**
   * Store the browser-specifc methods for the fullscreen API
   * @type {Object|undefined}
   * @private
   */
  vjs.browser.fullscreenAPI;

  // browser API methods
  // map approach from Screenful.js - https://github.com/sindresorhus/screenfull.js
  apiMap = [
    // Spec: https://dvcs.w3.org/hg/fullscreen/raw-file/tip/Overview.html
    [
      'requestFullscreen',
      'exitFullscreen',
      'fullscreenElement',
      'fullscreenEnabled',
      'fullscreenchange',
      'fullscreenerror'
    ],
    // WebKit
    [
      'webkitRequestFullscreen',
      'webkitExitFullscreen',
      'webkitFullscreenElement',
      'webkitFullscreenEnabled',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Old WebKit (Safari 5.1)
    [
      'webkitRequestFullScreen',
      'webkitCancelFullScreen',
      'webkitCurrentFullScreenElement',
      'webkitCancelFullScreen',
      'webkitfullscreenchange',
      'webkitfullscreenerror'
    ],
    // Mozilla
    [
      'mozRequestFullScreen',
      'mozCancelFullScreen',
      'mozFullScreenElement',
      'mozFullScreenEnabled',
      'mozfullscreenchange',
      'mozfullscreenerror'
    ],
    // Microsoft
    [
      'msRequestFullscreen',
      'msExitFullscreen',
      'msFullscreenElement',
      'msFullscreenEnabled',
      'MSFullscreenChange',
      'MSFullscreenError'
    ]
  ];

  specApi = apiMap[0];

  // determine the supported set of functions
  for (i=0; i<apiMap.length; i++) {
    // check for exitFullscreen function
    if (apiMap[i][1] in document) {
      browserApi = apiMap[i];
      break;
    }
  }

  // map the browser API names to the spec API names
  // or leave vjs.browser.fullscreenAPI undefined
  if (browserApi) {
    vjs.browser.fullscreenAPI = {};

    for (i=0; i<browserApi.length; i++) {
      vjs.browser.fullscreenAPI[specApi[i]] = browserApi[i];
    }
  }

})();
/**
 * An instance of the `vjs.Player` class is created when any of the Video.js setup methods are used to initialize a video.
 *
 * ```js
 * var myPlayer = videojs('example_video_1');
 * ```
 *
 * In the following example, the `data-setup` attribute tells the Video.js library to create a player instance when the library is ready.
 *
 * ```html
 * <video id="example_video_1" data-setup='{}' controls>
 *   <source src="my-source.mp4" type="video/mp4">
 * </video>
 * ```
 *
 * After an instance has been created it can be accessed globally using `Video('example_video_1')`.
 *
 * @class
 * @extends vjs.Component
 */
vjs.Player = vjs.Component.extend({

  /**
   * player's constructor function
   *
   * @constructs
   * @method init
   * @param {Element} tag        The original video tag used for configuring options
   * @param {Object=} options    Player options
   * @param {Function=} ready    Ready callback function
   */
  init: function(tag, options, ready){
    this.tag = tag; // Store the original tag used to set options

    // Make sure tag ID exists
    tag.id = tag.id || 'vjs_video_' + vjs.guid++;

    // Store the tag attributes used to restore html5 element
    this.tagAttributes = tag && vjs.getElementAttributes(tag);

    // Set Options
    // The options argument overrides options set in the video tag
    // which overrides globally set options.
    // This latter part coincides with the load order
    // (tag must exist before Player)
    options = vjs.obj.merge(this.getTagSettings(tag), options);

    // Update Current Language
    this.language_ = options['language'] || vjs.options['language'];

    // Update Supported Languages
    this.languages_ = options['languages'] || vjs.options['languages'];

    // Cache for video property values.
    this.cache_ = {};

    // Set poster
    this.poster_ = options['poster'];
    // Set controls
    this.controls_ = options['controls'];
    // Original tag settings stored in options
    // now remove immediately so native controls don't flash.
    // May be turned back on by HTML5 tech if nativeControlsForTouch is true
    tag.controls = false;

    // we don't want the player to report touch activity on itself
    // see enableTouchActivity in Component
    options.reportTouchActivity = false;

    // Run base component initializing with new options.
    // Builds the element through createEl()
    // Inits and embeds any child components in opts
    vjs.Component.call(this, this, options, ready);

    // Update controls className. Can't do this when the controls are initially
    // set because the element doesn't exist yet.
    if (this.controls()) {
      this.addClass('vjs-controls-enabled');
    } else {
      this.addClass('vjs-controls-disabled');
    }

    // TODO: Make this smarter. Toggle user state between touching/mousing
    // using events, since devices can have both touch and mouse events.
    // if (vjs.TOUCH_ENABLED) {
    //   this.addClass('vjs-touch-enabled');
    // }

    // Make player easily findable by ID
    vjs.players[this.id_] = this;

    if (options['plugins']) {
      vjs.obj.each(options['plugins'], function(key, val){
        this[key](val);
      }, this);
    }

    this.listenForUserActivity();
  }
});

/**
 * The players's stored language code
 *
 * @type {String}
 * @private
 */
vjs.Player.prototype.language_;

/**
 * The player's language code
 * @param  {String} languageCode  The locale string
 * @return {String}             The locale string when getting
 * @return {vjs.Player}         self, when setting
 */
vjs.Player.prototype.language = function (languageCode) {
  if (languageCode === undefined) {
    return this.language_;
  }

  this.language_ = languageCode;
  return this;
};

/**
 * The players's stored language dictionary
 *
 * @type {Object}
 * @private
 */
vjs.Player.prototype.languages_;

vjs.Player.prototype.languages = function(){
  return this.languages_;
};

/**
 * Player instance options, surfaced using vjs.options
 * vjs.options = vjs.Player.prototype.options_
 * Make changes in vjs.options, not here.
 * All options should use string keys so they avoid
 * renaming by closure compiler
 * @type {Object}
 * @private
 */
vjs.Player.prototype.options_ = vjs.options;

/**
 * Destroys the video player and does any necessary cleanup
 *
 *     myPlayer.dispose();
 *
 * This is especially helpful if you are dynamically adding and removing videos
 * to/from the DOM.
 */
vjs.Player.prototype.dispose = function(){
  this.trigger('dispose');
  // prevent dispose from being called twice
  this.off('dispose');

  // Kill reference to this player
  vjs.players[this.id_] = null;
  if (this.tag && this.tag['player']) { this.tag['player'] = null; }
  if (this.el_ && this.el_['player']) { this.el_['player'] = null; }

  if (this.tech) { this.tech.dispose(); }

  // Component dispose
  vjs.Component.prototype.dispose.call(this);
};

vjs.Player.prototype.getTagSettings = function(tag){
  var options = {
    'sources': [],
    'tracks': []
  };

  vjs.obj.merge(options, vjs.getElementAttributes(tag));

  // Get tag children settings
  if (tag.hasChildNodes()) {
    var children, child, childName, i, j;

    children = tag.childNodes;

    for (i=0,j=children.length; i<j; i++) {
      child = children[i];
      // Change case needed: http://ejohn.org/blog/nodename-case-sensitivity/
      childName = child.nodeName.toLowerCase();
      if (childName === 'source') {
        options['sources'].push(vjs.getElementAttributes(child));
      } else if (childName === 'track') {
        options['tracks'].push(vjs.getElementAttributes(child));
      }
    }
  }

  return options;
};

vjs.Player.prototype.createEl = function(){
  var
    el = this.el_ = vjs.Component.prototype.createEl.call(this, 'div'),
    tag = this.tag,
    attrs;

  // Remove width/height attrs from tag so CSS can make it 100% width/height
  tag.removeAttribute('width');
  tag.removeAttribute('height');
  // Empty video tag tracks so the built-in player doesn't use them also.
  // This may not be fast enough to stop HTML5 browsers from reading the tags
  // so we'll need to turn off any default tracks if we're manually doing
  // captions and subtitles. videoElement.textTracks
  if (tag.hasChildNodes()) {
    var nodes, nodesLength, i, node, nodeName, removeNodes;

    nodes = tag.childNodes;
    nodesLength = nodes.length;
    removeNodes = [];

    while (nodesLength--) {
      node = nodes[nodesLength];
      nodeName = node.nodeName.toLowerCase();
      if (nodeName === 'track') {
        removeNodes.push(node);
      }
    }

    for (i=0; i<removeNodes.length; i++) {
      tag.removeChild(removeNodes[i]);
    }
  }

  // Copy over all the attributes from the tag, including ID and class
  // ID will now reference player box, not the video tag
  attrs = vjs.getElementAttributes(tag);
  vjs.obj.each(attrs, function(attr) {
    el.setAttribute(attr, attrs[attr]);
  });

  // Update tag id/class for use as HTML5 playback tech
  // Might think we should do this after embedding in container so .vjs-tech class
  // doesn't flash 100% width/height, but class only applies with .video-js parent
  tag.id += '_html5_api';
  tag.className = 'vjs-tech';

  // Make player findable on elements
  tag['player'] = el['player'] = this;
  // Default state of video is paused
  this.addClass('vjs-paused');

  // Make box use width/height of tag, or rely on default implementation
  // Enforce with CSS since width/height attrs don't work on divs
  this.width(this.options_['width'], true); // (true) Skip resize listener on load
  this.height(this.options_['height'], true);

  // Wrap video tag in div (el/box) container
  if (tag.parentNode) {
    tag.parentNode.insertBefore(el, tag);
  }
  vjs.insertFirst(tag, el); // Breaks iPhone, fixed in HTML5 setup.

  // The event listeners need to be added before the children are added
  // in the component init because the tech (loaded with mediaLoader) may
  // fire events, like loadstart, that these events need to capture.
  // Long term it might be better to expose a way to do this in component.init
  // like component.initEventListeners() that runs between el creation and
  // adding children
  this.el_ = el;
  this.on('loadstart', this.onLoadStart);
  this.on('waiting', this.onWaiting);
  this.on(['canplay', 'canplaythrough', 'playing', 'ended'], this.onWaitEnd);
  this.on('seeking', this.onSeeking);
  this.on('seeked', this.onSeeked);
  this.on('ended', this.onEnded);
  this.on('play', this.onPlay);
  this.on('firstplay', this.onFirstPlay);
  this.on('pause', this.onPause);
  this.on('progress', this.onProgress);
  this.on('durationchange', this.onDurationChange);
  this.on('fullscreenchange', this.onFullscreenChange);

  return el;
};

// /* Media Technology (tech)
// ================================================================================ */
// Load/Create an instance of playback technlogy including element and API methods
// And append playback element in player div.
vjs.Player.prototype.loadTech = function(techName, source){

  // Pause and remove current playback technology
  if (this.tech) {
    this.unloadTech();
  }

  // get rid of the HTML5 video tag as soon as we are using another tech
  if (techName !== 'Html5' && this.tag) {
    vjs.Html5.disposeMediaElement(this.tag);
    this.tag = null;
  }

  this.techName = techName;

  // Turn off API access because we're loading a new tech that might load asynchronously
  this.isReady_ = false;

  var techReady = function(){
    this.player_.triggerReady();
  };

  // Grab tech-specific options from player options and add source and parent element to use.
  var techOptions = vjs.obj.merge({ 'source': source, 'parentEl': this.el_ }, this.options_[techName.toLowerCase()]);

  if (source) {
    this.currentType_ = source.type;
    if (source.src == this.cache_.src && this.cache_.currentTime > 0) {
      techOptions['startTime'] = this.cache_.currentTime;
    }

    this.cache_.src = source.src;
  }

  // Initialize tech instance
  this.tech = new window['videojs'][techName](this, techOptions);

  this.tech.ready(techReady);
};

vjs.Player.prototype.unloadTech = function(){
  this.isReady_ = false;

  this.tech.dispose();

  this.tech = false;
};

// There's many issues around changing the size of a Flash (or other plugin) object.
// First is a plugin reload issue in Firefox that has been around for 11 years: https://bugzilla.mozilla.org/show_bug.cgi?id=90268
// Then with the new fullscreen API, Mozilla and webkit browsers will reload the flash object after going to fullscreen.
// To get around this, we're unloading the tech, caching source and currentTime values, and reloading the tech once the plugin is resized.
// reloadTech: function(betweenFn){
//   vjs.log('unloadingTech')
//   this.unloadTech();
//   vjs.log('unloadedTech')
//   if (betweenFn) { betweenFn.call(); }
//   vjs.log('LoadingTech')
//   this.loadTech(this.techName, { src: this.cache_.src })
//   vjs.log('loadedTech')
// },

// /* Player event handlers (how the player reacts to certain events)
// ================================================================================ */

/**
 * Fired when the user agent begins looking for media data
 * @event loadstart
 */
vjs.Player.prototype.onLoadStart = function() {
  // TODO: Update to use `emptied` event instead. See #1277.

  // reset the error state
  this.error(null);

  // If it's already playing we want to trigger a firstplay event now.
  // The firstplay event relies on both the play and loadstart events
  // which can happen in any order for a new source
  if (!this.paused()) {
    this.trigger('firstplay');
  } else {
    // reset the hasStarted state
    this.hasStarted(false);
    this.one('play', function(){
      this.hasStarted(true);
    });
  }
};

vjs.Player.prototype.hasStarted_ = false;

vjs.Player.prototype.hasStarted = function(hasStarted){
  if (hasStarted !== undefined) {
    // only update if this is a new value
    if (this.hasStarted_ !== hasStarted) {
      this.hasStarted_ = hasStarted;
      if (hasStarted) {
        this.addClass('vjs-has-started');
        // trigger the firstplay event if this newly has played
        this.trigger('firstplay');
      } else {
        this.removeClass('vjs-has-started');
      }
    }
    return this;
  }
  return this.hasStarted_;
};

/**
 * Fired when the player has initial duration and dimension information
 * @event loadedmetadata
 */
vjs.Player.prototype.onLoadedMetaData;

/**
 * Fired when the player has downloaded data at the current playback position
 * @event loadeddata
 */
vjs.Player.prototype.onLoadedData;

/**
 * Fired when the player has finished downloading the source data
 * @event loadedalldata
 */
vjs.Player.prototype.onLoadedAllData;

/**
 * Fired whenever the media begins or resumes playback
 * @event play
 */
vjs.Player.prototype.onPlay = function(){
  this.removeClass('vjs-paused');
  this.addClass('vjs-playing');
};

/**
 * Fired whenever the media begins wating
 * @event waiting
 */
vjs.Player.prototype.onWaiting = function(){
  this.addClass('vjs-waiting');
};

/**
 * A handler for events that signal that waiting has eneded
 * which is not consistent between browsers. See #1351
 */
vjs.Player.prototype.onWaitEnd = function(){
  this.removeClass('vjs-waiting');
};

/**
 * Fired whenever the player is jumping to a new time
 * @event seeking
 */
vjs.Player.prototype.onSeeking = function(){
  this.addClass('vjs-seeking');
};

/**
 * Fired when the player has finished jumping to a new time
 * @event seeked
 */
vjs.Player.prototype.onSeeked = function(){
  this.removeClass('vjs-seeking');
};

/**
 * Fired the first time a video is played
 *
 * Not part of the HLS spec, and we're not sure if this is the best
 * implementation yet, so use sparingly. If you don't have a reason to
 * prevent playback, use `myPlayer.one('play');` instead.
 *
 * @event firstplay
 */
vjs.Player.prototype.onFirstPlay = function(){
    //If the first starttime attribute is specified
    //then we will start at the given offset in seconds
    if(this.options_['starttime']){
      this.currentTime(this.options_['starttime']);
    }

    this.addClass('vjs-has-started');
};

/**
 * Fired whenever the media has been paused
 * @event pause
 */
vjs.Player.prototype.onPause = function(){
  this.removeClass('vjs-playing');
  this.addClass('vjs-paused');
};

/**
 * Fired when the current playback position has changed
 *
 * During playback this is fired every 15-250 milliseconds, depnding on the
 * playback technology in use.
 * @event timeupdate
 */
vjs.Player.prototype.onTimeUpdate;

/**
 * Fired while the user agent is downloading media data
 * @event progress
 */
vjs.Player.prototype.onProgress = function(){
  // Add custom event for when source is finished downloading.
  if (this.bufferedPercent() == 1) {
    this.trigger('loadedalldata');
  }
};

/**
 * Fired when the end of the media resource is reached (currentTime == duration)
 * @event ended
 */
vjs.Player.prototype.onEnded = function(){
  if (this.options_['loop']) {
    this.currentTime(0);
    this.play();
  }
};

/**
 * Fired when the duration of the media resource is first known or changed
 * @event durationchange
 */
vjs.Player.prototype.onDurationChange = function(){
  // Allows for cacheing value instead of asking player each time.
  // We need to get the techGet response and check for a value so we don't
  // accidentally cause the stack to blow up.
  var duration = this.techGet('duration');
  if (duration) {
    if (duration < 0) {
      duration = Infinity;
    }
    this.duration(duration);
    // Determine if the stream is live and propagate styles down to UI.
    if (duration === Infinity) {
      this.addClass('vjs-live');
    } else {
      this.removeClass('vjs-live');
    }
  }
};

/**
 * Fired when the volume changes
 * @event volumechange
 */
vjs.Player.prototype.onVolumeChange;

/**
 * Fired when the player switches in or out of fullscreen mode
 * @event fullscreenchange
 */
vjs.Player.prototype.onFullscreenChange = function() {
  if (this.isFullscreen()) {
    this.addClass('vjs-fullscreen');
  } else {
    this.removeClass('vjs-fullscreen');
  }
};

// /* Player API
// ================================================================================ */

/**
 * Object for cached values.
 * @private
 */
vjs.Player.prototype.cache_;

vjs.Player.prototype.getCache = function(){
  return this.cache_;
};

// Pass values to the playback tech
vjs.Player.prototype.techCall = function(method, arg){
  // If it's not ready yet, call method when it is
  if (this.tech && !this.tech.isReady_) {
    this.tech.ready(function(){
      this[method](arg);
    });

  // Otherwise call method now
  } else {
    try {
      this.tech[method](arg);
    } catch(e) {
      vjs.log(e);
      throw e;
    }
  }
};

// Get calls can't wait for the tech, and sometimes don't need to.
vjs.Player.prototype.techGet = function(method){
  if (this.tech && this.tech.isReady_) {

    // Flash likes to die and reload when you hide or reposition it.
    // In these cases the object methods go away and we get errors.
    // When that happens we'll catch the errors and inform tech that it's not ready any more.
    try {
      return this.tech[method]();
    } catch(e) {
      // When building additional tech libs, an expected method may not be defined yet
      if (this.tech[method] === undefined) {
        vjs.log('Video.js: ' + method + ' method not defined for '+this.techName+' playback technology.', e);
      } else {
        // When a method isn't available on the object it throws a TypeError
        if (e.name == 'TypeError') {
          vjs.log('Video.js: ' + method + ' unavailable on '+this.techName+' playback technology element.', e);
          this.tech.isReady_ = false;
        } else {
          vjs.log(e);
        }
      }
      throw e;
    }
  }

  return;
};

/**
 * start media playback
 *
 *     myPlayer.play();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.play = function(){
  this.techCall('play');
  return this;
};

/**
 * Pause the video playback
 *
 *     myPlayer.pause();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.pause = function(){
  this.techCall('pause');
  return this;
};

/**
 * Check if the player is paused
 *
 *     var isPaused = myPlayer.paused();
 *     var isPlaying = !myPlayer.paused();
 *
 * @return {Boolean} false if the media is currently playing, or true otherwise
 */
vjs.Player.prototype.paused = function(){
  // The initial state of paused should be true (in Safari it's actually false)
  return (this.techGet('paused') === false) ? false : true;
};

/**
 * Get or set the current time (in seconds)
 *
 *     // get
 *     var whereYouAt = myPlayer.currentTime();
 *
 *     // set
 *     myPlayer.currentTime(120); // 2 minutes into the video
 *
 * @param  {Number|String=} seconds The time to seek to
 * @return {Number}        The time in seconds, when not setting
 * @return {vjs.Player}    self, when the current time is set
 */
vjs.Player.prototype.currentTime = function(seconds){
  if (seconds !== undefined) {

    this.techCall('setCurrentTime', seconds);

    return this;
  }

  // cache last currentTime and return. default to 0 seconds
  //
  // Caching the currentTime is meant to prevent a massive amount of reads on the tech's
  // currentTime when scrubbing, but may not provide much performace benefit afterall.
  // Should be tested. Also something has to read the actual current time or the cache will
  // never get updated.
  return this.cache_.currentTime = (this.techGet('currentTime') || 0);
};

/**
 * Get the length in time of the video in seconds
 *
 *     var lengthOfVideo = myPlayer.duration();
 *
 * **NOTE**: The video must have started loading before the duration can be
 * known, and in the case of Flash, may not be known until the video starts
 * playing.
 *
 * @return {Number} The duration of the video in seconds
 */
vjs.Player.prototype.duration = function(seconds){
  if (seconds !== undefined) {

    // cache the last set value for optimiized scrubbing (esp. Flash)
    this.cache_.duration = parseFloat(seconds);

    return this;
  }

  if (this.cache_.duration === undefined) {
    this.onDurationChange();
  }

  return this.cache_.duration || 0;
};

// Calculates how much time is left. Not in spec, but useful.
vjs.Player.prototype.remainingTime = function(){
  return this.duration() - this.currentTime();
};

// http://dev.w3.org/html5/spec/video.html#dom-media-buffered
// Buffered returns a timerange object.
// Kind of like an array of portions of the video that have been downloaded.

/**
 * Get a TimeRange object with the times of the video that have been downloaded
 *
 * If you just want the percent of the video that's been downloaded,
 * use bufferedPercent.
 *
 *     // Number of different ranges of time have been buffered. Usually 1.
 *     numberOfRanges = bufferedTimeRange.length,
 *
 *     // Time in seconds when the first range starts. Usually 0.
 *     firstRangeStart = bufferedTimeRange.start(0),
 *
 *     // Time in seconds when the first range ends
 *     firstRangeEnd = bufferedTimeRange.end(0),
 *
 *     // Length in seconds of the first time range
 *     firstRangeLength = firstRangeEnd - firstRangeStart;
 *
 * @return {Object} A mock TimeRange object (following HTML spec)
 */
vjs.Player.prototype.buffered = function(){
  var buffered = this.techGet('buffered');

  if (!buffered || !buffered.length) {
    buffered = vjs.createTimeRange(0,0);
  }

  return buffered;
};

/**
 * Get the percent (as a decimal) of the video that's been downloaded
 *
 *     var howMuchIsDownloaded = myPlayer.bufferedPercent();
 *
 * 0 means none, 1 means all.
 * (This method isn't in the HTML5 spec, but it's very convenient)
 *
 * @return {Number} A decimal between 0 and 1 representing the percent
 */
vjs.Player.prototype.bufferedPercent = function(){
  var duration = this.duration(),
      buffered = this.buffered(),
      bufferedDuration = 0,
      start, end;

  if (!duration) {
    return 0;
  }

  for (var i=0; i<buffered.length; i++){
    start = buffered.start(i);
    end   = buffered.end(i);

    // buffered end can be bigger than duration by a very small fraction
    if (end > duration) {
      end = duration;
    }

    bufferedDuration += end - start;
  }

  return bufferedDuration / duration;
};

/**
 * Get the ending time of the last buffered time range
 *
 * This is used in the progress bar to encapsulate all time ranges.
 * @return {Number} The end of the last buffered time range
 */
vjs.Player.prototype.bufferedEnd = function(){
  var buffered = this.buffered(),
      duration = this.duration(),
      end = buffered.end(buffered.length-1);

  if (end > duration) {
    end = duration;
  }

  return end;
};

/**
 * Get or set the current volume of the media
 *
 *     // get
 *     var howLoudIsIt = myPlayer.volume();
 *
 *     // set
 *     myPlayer.volume(0.5); // Set volume to half
 *
 * 0 is off (muted), 1.0 is all the way up, 0.5 is half way.
 *
 * @param  {Number} percentAsDecimal The new volume as a decimal percent
 * @return {Number}                  The current volume, when getting
 * @return {vjs.Player}              self, when setting
 */
vjs.Player.prototype.volume = function(percentAsDecimal){
  var vol;

  if (percentAsDecimal !== undefined) {
    vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal))); // Force value to between 0 and 1
    this.cache_.volume = vol;
    this.techCall('setVolume', vol);
    vjs.setLocalStorage('volume', vol);
    return this;
  }

  // Default to 1 when returning current volume.
  vol = parseFloat(this.techGet('volume'));
  return (isNaN(vol)) ? 1 : vol;
};


/**
 * Get the current muted state, or turn mute on or off
 *
 *     // get
 *     var isVolumeMuted = myPlayer.muted();
 *
 *     // set
 *     myPlayer.muted(true); // mute the volume
 *
 * @param  {Boolean=} muted True to mute, false to unmute
 * @return {Boolean} True if mute is on, false if not, when getting
 * @return {vjs.Player} self, when setting mute
 */
vjs.Player.prototype.muted = function(muted){
  if (muted !== undefined) {
    this.techCall('setMuted', muted);
    return this;
  }
  return this.techGet('muted') || false; // Default to false
};

// Check if current tech can support native fullscreen
// (e.g. with built in controls lik iOS, so not our flash swf)
vjs.Player.prototype.supportsFullScreen = function(){
  return this.techGet('supportsFullScreen') || false;
};

/**
 * is the player in fullscreen
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.isFullscreen_ = false;

/**
 * Check if the player is in fullscreen mode
 *
 *     // get
 *     var fullscreenOrNot = myPlayer.isFullscreen();
 *
 *     // set
 *     myPlayer.isFullscreen(true); // tell the player it's in fullscreen
 *
 * NOTE: As of the latest HTML5 spec, isFullscreen is no longer an official
 * property and instead document.fullscreenElement is used. But isFullscreen is
 * still a valuable property for internal player workings.
 *
 * @param  {Boolean=} isFS Update the player's fullscreen state
 * @return {Boolean} true if fullscreen, false if not
 * @return {vjs.Player} self, when setting
 */
vjs.Player.prototype.isFullscreen = function(isFS){
  if (isFS !== undefined) {
    this.isFullscreen_ = !!isFS;
    return this;
  }
  return this.isFullscreen_;
};

/**
 * Old naming for isFullscreen()
 * @deprecated for lowercase 's' version
 */
vjs.Player.prototype.isFullScreen = function(isFS){
  vjs.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');
  return this.isFullscreen(isFS);
};

/**
 * Increase the size of the video to full screen
 *
 *     myPlayer.requestFullscreen();
 *
 * In some browsers, full screen is not supported natively, so it enters
 * "full window mode", where the video fills the browser window.
 * In browsers and devices that support native full screen, sometimes the
 * browser's default controls will be shown, and not the Video.js custom skin.
 * This includes most mobile devices (iOS, Android) and older versions of
 * Safari.
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.requestFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;

  this.isFullscreen(true);

  if (fsApi) {
    // the browser supports going fullscreen at the element level so we can
    // take the controls fullscreen as well as the video

    // Trigger fullscreenchange event after change
    // We have to specifically add this each time, and remove
    // when cancelling fullscreen. Otherwise if there's multiple
    // players on a page, they would all be reacting to the same fullscreen
    // events
    vjs.on(document, fsApi['fullscreenchange'], vjs.bind(this, function(e){
      this.isFullscreen(document[fsApi.fullscreenElement]);

      // If cancelling fullscreen, remove event listener.
      if (this.isFullscreen() === false) {
        vjs.off(document, fsApi['fullscreenchange'], arguments.callee);
      }

      this.trigger('fullscreenchange');
    }));

    this.el_[fsApi.requestFullscreen]();

  } else if (this.tech.supportsFullScreen()) {
    // we can't take the video.js controls fullscreen but we can go fullscreen
    // with native controls
    this.techCall('enterFullScreen');
  } else {
    // fullscreen isn't supported so we'll just stretch the video element to
    // fill the viewport
    this.enterFullWindow();
    this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for requestFullscreen
 * @deprecated for lower case 's' version
 */
vjs.Player.prototype.requestFullScreen = function(){
  vjs.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');
  return this.requestFullscreen();
};


/**
 * Return the video to its normal size after having been in full screen mode
 *
 *     myPlayer.exitFullscreen();
 *
 * @return {vjs.Player} self
 */
vjs.Player.prototype.exitFullscreen = function(){
  var fsApi = vjs.browser.fullscreenAPI;
  this.isFullscreen(false);

  // Check for browser element fullscreen support
  if (fsApi) {
    document[fsApi.exitFullscreen]();
  } else if (this.tech.supportsFullScreen()) {
   this.techCall('exitFullScreen');
  } else {
   this.exitFullWindow();
   this.trigger('fullscreenchange');
  }

  return this;
};

/**
 * Old naming for exitFullscreen
 * @deprecated for exitFullscreen
 */
vjs.Player.prototype.cancelFullScreen = function(){
  vjs.log.warn('player.cancelFullScreen() has been deprecated, use player.exitFullscreen()');
  return this.exitFullscreen();
};

// When fullscreen isn't supported we can stretch the video container to as wide as the browser will let us.
vjs.Player.prototype.enterFullWindow = function(){
  this.isFullWindow = true;

  // Storing original doc overflow value to return to when fullscreen is off
  this.docOrigOverflow = document.documentElement.style.overflow;

  // Add listener for esc key to exit fullscreen
  vjs.on(document, 'keydown', vjs.bind(this, this.fullWindowOnEscKey));

  // Hide any scroll bars
  document.documentElement.style.overflow = 'hidden';

  // Apply fullscreen styles
  vjs.addClass(document.body, 'vjs-full-window');

  this.trigger('enterFullWindow');
};
vjs.Player.prototype.fullWindowOnEscKey = function(event){
  if (event.keyCode === 27) {
    if (this.isFullscreen() === true) {
      this.exitFullscreen();
    } else {
      this.exitFullWindow();
    }
  }
};

vjs.Player.prototype.exitFullWindow = function(){
  this.isFullWindow = false;
  vjs.off(document, 'keydown', this.fullWindowOnEscKey);

  // Unhide scroll bars.
  document.documentElement.style.overflow = this.docOrigOverflow;

  // Remove fullscreen styles
  vjs.removeClass(document.body, 'vjs-full-window');

  // Resize the box, controller, and poster to original sizes
  // this.positionAll();
  this.trigger('exitFullWindow');
};

vjs.Player.prototype.selectSource = function(sources){

  // Loop through each playback technology in the options order
  for (var i=0,j=this.options_['techOrder'];i<j.length;i++) {
    var techName = vjs.capitalize(j[i]),
        tech = window['videojs'][techName];

    // Check if the current tech is defined before continuing
    if (!tech) {
      vjs.log.error('The "' + techName + '" tech is undefined. Skipped browser support check for that tech.');
      continue;
    }

    // Check if the browser supports this technology
    if (tech.isSupported()) {
      // Loop through each source object
      for (var a=0,b=sources;a<b.length;a++) {
        var source = b[a];

        // Check if source can be played with this technology
        if (tech['canPlaySource'](source)) {
          return { source: source, tech: techName };
        }
      }
    }
  }

  return false;
};

/**
 * The source function updates the video source
 *
 * There are three types of variables you can pass as the argument.
 *
 * **URL String**: A URL to the the video file. Use this method if you are sure
 * the current playback technology (HTML5/Flash) can support the source you
 * provide. Currently only MP4 files can be used in both HTML5 and Flash.
 *
 *     myPlayer.src("http://www.example.com/path/to/video.mp4");
 *
 * **Source Object (or element):** A javascript object containing information
 * about the source file. Use this method if you want the player to determine if
 * it can support the file using the type information.
 *
 *     myPlayer.src({ type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" });
 *
 * **Array of Source Objects:** To provide multiple versions of the source so
 * that it can be played using HTML5 across browsers you can use an array of
 * source objects. Video.js will detect which version is supported and load that
 * file.
 *
 *     myPlayer.src([
 *       { type: "video/mp4", src: "http://www.example.com/path/to/video.mp4" },
 *       { type: "video/webm", src: "http://www.example.com/path/to/video.webm" },
 *       { type: "video/ogg", src: "http://www.example.com/path/to/video.ogv" }
 *     ]);
 *
 * @param  {String|Object|Array=} source The source URL, object, or array of sources
 * @return {String} The current video source when getting
 * @return {String} The player when setting
 */
vjs.Player.prototype.src = function(source){
  if (source === undefined) {
    return this.techGet('src');
  }

  // case: Array of source objects to choose from and pick the best to play
  if (vjs.obj.isArray(source)) {
    this.sourceList_(source);

  // case: URL String (http://myvideo...)
  } else if (typeof source === 'string') {
    // create a source object from the string
    this.src({ src: source });

  // case: Source object { src: '', type: '' ... }
  } else if (source instanceof Object) {
    // check if the source has a type and the loaded tech cannot play the source
    // if there's no type we'll just try the current tech
    if (source.type && !window['videojs'][this.techName]['canPlaySource'](source)) {
      // create a source list with the current source and send through
      // the tech loop to check for a compatible technology
      this.sourceList_([source]);
    } else {
      this.cache_.src = source.src;
      this.currentType_ = source.type || '';

      // wait until the tech is ready to set the source
      this.ready(function(){
        this.techCall('src', source.src);

        if (this.options_['preload'] == 'auto') {
          this.load();
        }

        if (this.options_['autoplay']) {
          this.play();
        }
      });
    }
  }

  return this;
};

/**
 * Handle an array of source objects
 * @param  {[type]} sources Array of source objects
 * @private
 */
vjs.Player.prototype.sourceList_ = function(sources){
  var sourceTech = this.selectSource(sources),
      errorTimeout;

  if (sourceTech) {
    if (sourceTech.tech === this.techName) {
      // if this technology is already loaded, set the source
      this.src(sourceTech.source);
    } else {
      // load this technology with the chosen source
      this.loadTech(sourceTech.tech, sourceTech.source);
    }
  } else {
    // We need to wrap this in a timeout to give folks a chance to add error event handlers
    errorTimeout = setTimeout(vjs.bind(this, function() {
      this.error({ code: 4, message: this.localize(this.options()['notSupportedMessage']) });
    }), 0);

    // we could not find an appropriate tech, but let's still notify the delegate that this is it
    // this needs a better comment about why this is needed
    this.triggerReady();

    this.on('dispose', function() {
      clearTimeout(errorTimeout);
    });
  }
};

// Begin loading the src data
// http://dev.w3.org/html5/spec/video.html#dom-media-load
vjs.Player.prototype.load = function(){
  this.techCall('load');
  return this;
};

// http://dev.w3.org/html5/spec/video.html#dom-media-currentsrc
vjs.Player.prototype.currentSrc = function(){
  return this.techGet('currentSrc') || this.cache_.src || '';
};

/**
 * Get the current source type e.g. video/mp4
 * This can allow you rebuild the current source object so that you could load the same
 * source and tech later
 * @return {String} The source MIME type
 */
vjs.Player.prototype.currentType = function(){
    return this.currentType_ || '';
};

// Attributes/Options
vjs.Player.prototype.preload = function(value){
  if (value !== undefined) {
    this.techCall('setPreload', value);
    this.options_['preload'] = value;
    return this;
  }
  return this.techGet('preload');
};
vjs.Player.prototype.autoplay = function(value){
  if (value !== undefined) {
    this.techCall('setAutoplay', value);
    this.options_['autoplay'] = value;
    return this;
  }
  return this.techGet('autoplay', value);
};
vjs.Player.prototype.loop = function(value){
  if (value !== undefined) {
    this.techCall('setLoop', value);
    this.options_['loop'] = value;
    return this;
  }
  return this.techGet('loop');
};

/**
 * the url of the poster image source
 * @type {String}
 * @private
 */
vjs.Player.prototype.poster_;

/**
 * get or set the poster image source url
 *
 * ##### EXAMPLE:
 *
 *     // getting
 *     var currentPoster = myPlayer.poster();
 *
 *     // setting
 *     myPlayer.poster('http://example.com/myImage.jpg');
 *
 * @param  {String=} [src] Poster image source URL
 * @return {String} poster URL when getting
 * @return {vjs.Player} self when setting
 */
vjs.Player.prototype.poster = function(src){
  if (src === undefined) {
    return this.poster_;
  }

  // update the internal poster variable
  this.poster_ = src;

  // update the tech's poster
  this.techCall('setPoster', src);

  // alert components that the poster has been set
  this.trigger('posterchange');
};

/**
 * Whether or not the controls are showing
 * @type {Boolean}
 * @private
 */
vjs.Player.prototype.controls_;

/**
 * Get or set whether or not the controls are showing.
 * @param  {Boolean} controls Set controls to showing or not
 * @return {Boolean}    Controls are showing
 */
vjs.Player.prototype.controls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.controls_ !== bool) {
      this.controls_ = bool;
      if (bool) {
        this.removeClass('vjs-controls-disabled');
        this.addClass('vjs-controls-enabled');
        this.trigger('controlsenabled');
      } else {
        this.removeClass('vjs-controls-enabled');
        this.addClass('vjs-controls-disabled');
        this.trigger('controlsdisabled');
      }
    }
    return this;
  }
  return this.controls_;
};

vjs.Player.prototype.usingNativeControls_;

/**
 * Toggle native controls on/off. Native controls are the controls built into
 * devices (e.g. default iPhone controls), Flash, or other techs
 * (e.g. Vimeo Controls)
 *
 * **This should only be set by the current tech, because only the tech knows
 * if it can support native controls**
 *
 * @param  {Boolean} bool    True signals that native controls are on
 * @return {vjs.Player}      Returns the player
 * @private
 */
vjs.Player.prototype.usingNativeControls = function(bool){
  if (bool !== undefined) {
    bool = !!bool; // force boolean
    // Don't trigger a change event unless it actually changed
    if (this.usingNativeControls_ !== bool) {
      this.usingNativeControls_ = bool;
      if (bool) {
        this.addClass('vjs-using-native-controls');

        /**
         * player is using the native device controls
         *
         * @event usingnativecontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingnativecontrols');
      } else {
        this.removeClass('vjs-using-native-controls');

        /**
         * player is using the custom HTML controls
         *
         * @event usingcustomcontrols
         * @memberof vjs.Player
         * @instance
         * @private
         */
        this.trigger('usingcustomcontrols');
      }
    }
    return this;
  }
  return this.usingNativeControls_;
};

/**
 * Store the current media error
 * @type {Object}
 * @private
 */
vjs.Player.prototype.error_ = null;

/**
 * Set or get the current MediaError
 * @param  {*} err A MediaError or a String/Number to be turned into a MediaError
 * @return {vjs.MediaError|null}     when getting
 * @return {vjs.Player}              when setting
 */
vjs.Player.prototype.error = function(err){
  if (err === undefined) {
    return this.error_;
  }

  // restoring to default
  if (err === null) {
    this.error_ = err;
    this.removeClass('vjs-error');
    return this;
  }

  // error instance
  if (err instanceof vjs.MediaError) {
    this.error_ = err;
  } else {
    this.error_ = new vjs.MediaError(err);
  }

  // fire an error event on the player
  this.trigger('error');

  // add the vjs-error classname to the player
  this.addClass('vjs-error');

  // log the name of the error type and any message
  // ie8 just logs "[object object]" if you just log the error object
  vjs.log.error('(CODE:'+this.error_.code+' '+vjs.MediaError.errorTypes[this.error_.code]+')', this.error_.message, this.error_);

  return this;
};

vjs.Player.prototype.ended = function(){ return this.techGet('ended'); };
vjs.Player.prototype.seeking = function(){ return this.techGet('seeking'); };

// When the player is first initialized, trigger activity so components
// like the control bar show themselves if needed
vjs.Player.prototype.userActivity_ = true;
vjs.Player.prototype.reportUserActivity = function(event){
  this.userActivity_ = true;
};

vjs.Player.prototype.userActive_ = true;
vjs.Player.prototype.userActive = function(bool){
  if (bool !== undefined) {
    bool = !!bool;
    if (bool !== this.userActive_) {
      this.userActive_ = bool;
      if (bool) {
        // If the user was inactive and is now active we want to reset the
        // inactivity timer
        this.userActivity_ = true;
        this.removeClass('vjs-user-inactive');
        this.addClass('vjs-user-active');
        this.trigger('useractive');
      } else {
        // We're switching the state to inactive manually, so erase any other
        // activity
        this.userActivity_ = false;

        // Chrome/Safari/IE have bugs where when you change the cursor it can
        // trigger a mousemove event. This causes an issue when you're hiding
        // the cursor when the user is inactive, and a mousemove signals user
        // activity. Making it impossible to go into inactive mode. Specifically
        // this happens in fullscreen when we really need to hide the cursor.
        //
        // When this gets resolved in ALL browsers it can be removed
        // https://code.google.com/p/chromium/issues/detail?id=103041
        if(this.tech) {
          this.tech.one('mousemove', function(e){
            e.stopPropagation();
            e.preventDefault();
          });
        }

        this.removeClass('vjs-user-active');
        this.addClass('vjs-user-inactive');
        this.trigger('userinactive');
      }
    }
    return this;
  }
  return this.userActive_;
};

vjs.Player.prototype.listenForUserActivity = function(){
  var onActivity, onMouseMove, onMouseDown, mouseInProgress, onMouseUp,
      activityCheck, inactivityTimeout, lastMoveX, lastMoveY;

  onActivity = vjs.bind(this, this.reportUserActivity);

  onMouseMove = function(e) {
    // #1068 - Prevent mousemove spamming
    // Chrome Bug: https://code.google.com/p/chromium/issues/detail?id=366970
    if(e.screenX != lastMoveX || e.screenY != lastMoveY) {
      lastMoveX = e.screenX;
      lastMoveY = e.screenY;
      onActivity();
    }
  };

  onMouseDown = function() {
    onActivity();
    // For as long as the they are touching the device or have their mouse down,
    // we consider them active even if they're not moving their finger or mouse.
    // So we want to continue to update that they are active
    clearInterval(mouseInProgress);
    // Setting userActivity=true now and setting the interval to the same time
    // as the activityCheck interval (250) should ensure we never miss the
    // next activityCheck
    mouseInProgress = setInterval(onActivity, 250);
  };

  onMouseUp = function(event) {
    onActivity();
    // Stop the interval that maintains activity if the mouse/touch is down
    clearInterval(mouseInProgress);
  };

  // Any mouse movement will be considered user activity
  this.on('mousedown', onMouseDown);
  this.on('mousemove', onMouseMove);
  this.on('mouseup', onMouseUp);

  // Listen for keyboard navigation
  // Shouldn't need to use inProgress interval because of key repeat
  this.on('keydown', onActivity);
  this.on('keyup', onActivity);

  // Run an interval every 250 milliseconds instead of stuffing everything into
  // the mousemove/touchmove function itself, to prevent performance degradation.
  // `this.reportUserActivity` simply sets this.userActivity_ to true, which
  // then gets picked up by this loop
  // http://ejohn.org/blog/learning-from-twitter/
  activityCheck = setInterval(vjs.bind(this, function() {
    // Check to see if mouse/touch activity has happened
    if (this.userActivity_) {
      // Reset the activity tracker
      this.userActivity_ = false;

      // If the user state was inactive, set the state to active
      this.userActive(true);

      // Clear any existing inactivity timeout to start the timer over
      clearTimeout(inactivityTimeout);

      var timeout = this.options()['inactivityTimeout'];
      if (timeout > 0) {
          // In <timeout> milliseconds, if no more activity has occurred the
          // user will be considered inactive
          inactivityTimeout = setTimeout(vjs.bind(this, function () {
              // Protect against the case where the inactivityTimeout can trigger just
              // before the next user activity is picked up by the activityCheck loop
              // causing a flicker
              if (!this.userActivity_) {
                  this.userActive(false);
              }
          }), timeout);
      }
    }
  }), 250);

  // Clean up the intervals when we kill the player
  this.on('dispose', function(){
    clearInterval(activityCheck);
    clearTimeout(inactivityTimeout);
  });
};

vjs.Player.prototype.playbackRate = function(rate) {
  if (rate !== undefined) {
    this.techCall('setPlaybackRate', rate);
    return this;
  }

  if (this.tech && this.tech['featuresPlaybackRate']) {
    return this.techGet('playbackRate');
  } else {
    return 1.0;
  }

};

// Methods to add support for
// networkState: function(){ return this.techCall('networkState'); },
// readyState: function(){ return this.techCall('readyState'); },
// initialTime: function(){ return this.techCall('initialTime'); },
// startOffsetTime: function(){ return this.techCall('startOffsetTime'); },
// played: function(){ return this.techCall('played'); },
// seekable: function(){ return this.techCall('seekable'); },
// videoTracks: function(){ return this.techCall('videoTracks'); },
// audioTracks: function(){ return this.techCall('audioTracks'); },
// videoWidth: function(){ return this.techCall('videoWidth'); },
// videoHeight: function(){ return this.techCall('videoHeight'); },
// defaultPlaybackRate: function(){ return this.techCall('defaultPlaybackRate'); },
// mediaGroup: function(){ return this.techCall('mediaGroup'); },
// controller: function(){ return this.techCall('controller'); },
// defaultMuted: function(){ return this.techCall('defaultMuted'); }

// TODO
// currentSrcList: the array of sources including other formats and bitrates
// playList: array of source lists in order of playback
/**
 * Container of main controls
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 * @extends vjs.Component
 */
vjs.ControlBar = vjs.Component.extend();

vjs.ControlBar.prototype.options_ = {
  loadEvent: 'play',
  children: {
    'playToggle': {},
    'currentTimeDisplay': {},
    'timeDivider': {},
    'durationDisplay': {},
    'remainingTimeDisplay': {},
    'liveDisplay': {},
    'progressControl': {},
    'fullscreenToggle': {},
    'volumeControl': {},
    'muteToggle': {},
    // 'volumeMenuButton': {},
    'playbackRateMenuButton': {}
  }
};

vjs.ControlBar.prototype.createEl = function(){
  return vjs.createEl('div', {
    className: 'vjs-control-bar'
  });
};
/**
 * Displays the live indicator
 * TODO - Future make it click to snap to live
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LiveDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.LiveDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-live-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-live-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Stream Type') + '</span>' + this.localize('LIVE'),
    'aria-live': 'off'
  });

  el.appendChild(this.contentEl_);

  return el;
};
/**
 * Button to toggle between play and pause
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.PlayToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    player.on('play', vjs.bind(this, this.onPlay));
    player.on('pause', vjs.bind(this, this.onPause));
  }
});

vjs.PlayToggle.prototype.buttonText = 'Play';

vjs.PlayToggle.prototype.buildCSSClass = function(){
  return 'vjs-play-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

// OnClick - Toggle between play and pause
vjs.PlayToggle.prototype.onClick = function(){
  if (this.player_.paused()) {
    this.player_.play();
  } else {
    this.player_.pause();
  }
};

  // OnPlay - Add the vjs-playing class to the element so it can change appearance
vjs.PlayToggle.prototype.onPlay = function(){
  vjs.removeClass(this.el_, 'vjs-paused');
  vjs.addClass(this.el_, 'vjs-playing');
  this.el_.children[0].children[0].innerHTML = this.localize('Pause'); // change the button text to "Pause"
};

  // OnPause - Add the vjs-paused class to the element so it can change appearance
vjs.PlayToggle.prototype.onPause = function(){
  vjs.removeClass(this.el_, 'vjs-playing');
  vjs.addClass(this.el_, 'vjs-paused');
  this.el_.children[0].children[0].innerHTML = this.localize('Play'); // change the button text to "Play"
};
/**
 * Displays the current time
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.CurrentTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.CurrentTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-current-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-current-time-display',
    innerHTML: '<span class="vjs-control-text">Current Time </span>' + '0:00', // label the current time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.CurrentTimeDisplay.prototype.updateContent = function(){
  // Allows for smooth scrubbing, when player can't keep up.
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Current Time') + '</span> ' + vjs.formatTime(time, this.player_.duration());
};

/**
 * Displays the duration
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.DurationDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // this might need to be changed to 'durationchange' instead of 'timeupdate' eventually,
    // however the durationchange event fires before this.player_.duration() is set,
    // so the value cannot be written out using this method.
    // Once the order of durationchange and this.player_.duration() being set is figured out,
    // this can be updated.
    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.DurationDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-duration vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-duration-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Duration Time') + '</span> ' + '0:00', // label the duration time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.DurationDisplay.prototype.updateContent = function(){
  var duration = this.player_.duration();
  if (duration) {
      this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Duration Time') + '</span> ' + vjs.formatTime(duration); // label the duration time for screen reader users
  }
};

/**
 * The separator between the current time and duration
 *
 * Can be hidden if it's not needed in the design.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TimeDivider = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.TimeDivider.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-time-divider',
    innerHTML: '<div><span>/</span></div>'
  });
};

/**
 * Displays the time left in the video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.RemainingTimeDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

vjs.RemainingTimeDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-remaining-time vjs-time-controls vjs-control'
  });

  this.contentEl_ = vjs.createEl('div', {
    className: 'vjs-remaining-time-display',
    innerHTML: '<span class="vjs-control-text">' + this.localize('Remaining Time') + '</span> ' + '-0:00', // label the remaining time for screen reader users
    'aria-live': 'off' // tell screen readers not to automatically read the time as it changes
  });

  el.appendChild(this.contentEl_);
  return el;
};

vjs.RemainingTimeDisplay.prototype.updateContent = function(){
  if (this.player_.duration()) {
    this.contentEl_.innerHTML = '<span class="vjs-control-text">' + this.localize('Remaining Time') + '</span> ' + '-'+ vjs.formatTime(this.player_.remainingTime());
  }

  // Allows for smooth scrubbing, when player can't keep up.
  // var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  // this.contentEl_.innerHTML = vjs.formatTime(time, this.player_.duration());
};
/**
 * Toggle fullscreen video
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @extends vjs.Button
 */
vjs.FullscreenToggle = vjs.Button.extend({
  /**
   * @constructor
   * @memberof vjs.FullscreenToggle
   * @instance
   */
  init: function(player, options){
    vjs.Button.call(this, player, options);
  }
});

vjs.FullscreenToggle.prototype.buttonText = 'Fullscreen';

vjs.FullscreenToggle.prototype.buildCSSClass = function(){
  return 'vjs-fullscreen-control ' + vjs.Button.prototype.buildCSSClass.call(this);
};

vjs.FullscreenToggle.prototype.onClick = function(){
  if (!this.player_.isFullscreen()) {
    this.player_.requestFullscreen();
    this.controlText_.innerHTML = this.localize('Non-Fullscreen');
  } else {
    this.player_.exitFullscreen();
    this.controlText_.innerHTML = this.localize('Fullscreen');
  }
};
/**
 * The Progress Control component contains the seek bar, load progress,
 * and play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ProgressControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.ProgressControl.prototype.options_ = {
  children: {
    'seekBar': {}
  }
};

vjs.ProgressControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-control vjs-control'
  });
};

/**
 * Seek Bar and holder for the progress bars
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    player.on('timeupdate', vjs.bind(this, this.updateARIAAttributes));
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.SeekBar.prototype.options_ = {
  children: {
    'loadProgressBar': {},
    'playProgressBar': {},
    'seekHandle': {}
  },
  'barName': 'playProgressBar',
  'handleName': 'seekHandle'
};

vjs.SeekBar.prototype.playerEvent = 'timeupdate';

vjs.SeekBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-progress-holder',
    'aria-label': 'video progress bar'
  });
};

vjs.SeekBar.prototype.updateARIAAttributes = function(){
    // Allows for smooth scrubbing, when player can't keep up.
    var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
    this.el_.setAttribute('aria-valuenow',vjs.round(this.getPercent()*100, 2)); // machine readable value of progress bar (percentage complete)
    this.el_.setAttribute('aria-valuetext',vjs.formatTime(time, this.player_.duration())); // human readable value of progress bar (time complete)
};

vjs.SeekBar.prototype.getPercent = function(){
  return this.player_.currentTime() / this.player_.duration();
};

vjs.SeekBar.prototype.onMouseDown = function(event){
  vjs.Slider.prototype.onMouseDown.call(this, event);

  this.player_.scrubbing = true;

  this.videoWasPlaying = !this.player_.paused();
  this.player_.pause();
};

vjs.SeekBar.prototype.onMouseMove = function(event){
  var newTime = this.calculateDistance(event) * this.player_.duration();

  // Don't let video end while scrubbing.
  if (newTime == this.player_.duration()) { newTime = newTime - 0.1; }

  // Set new time (tell player to seek to new time)
  this.player_.currentTime(newTime);
};

vjs.SeekBar.prototype.onMouseUp = function(event){
  vjs.Slider.prototype.onMouseUp.call(this, event);

  this.player_.scrubbing = false;
  if (this.videoWasPlaying) {
    this.player_.play();
  }
};

vjs.SeekBar.prototype.stepForward = function(){
  this.player_.currentTime(this.player_.currentTime() + 5); // more quickly fast forward for keyboard-only users
};

vjs.SeekBar.prototype.stepBack = function(){
  this.player_.currentTime(this.player_.currentTime() - 5); // more quickly rewind for keyboard-only users
};

/**
 * Shows load progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.LoadProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
    player.on('progress', vjs.bind(this, this.update));
  }
});

vjs.LoadProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-load-progress',
    innerHTML: '<span class="vjs-control-text"><span>' + this.localize('Loaded') + '</span>: 0%</span>'
  });
};

vjs.LoadProgressBar.prototype.update = function(){
  var i, start, end, part,
      buffered = this.player_.buffered(),
      duration = this.player_.duration(),
      bufferedEnd = this.player_.bufferedEnd(),
      children = this.el_.children,
      // get the percent width of a time compared to the total end
      percentify = function (time, end){
        var percent = (time / end) || 0; // no NaN
        return (percent * 100) + '%';
      };

  // update the width of the progress bar
  this.el_.style.width = percentify(bufferedEnd, duration);

  // add child elements to represent the individual buffered time ranges
  for (i = 0; i < buffered.length; i++) {
    start = buffered.start(i),
    end = buffered.end(i),
    part = children[i];

    if (!part) {
      part = this.el_.appendChild(vjs.createEl())
    };

    // set the percent based on the width of the progress bar (bufferedEnd)
    part.style.left = percentify(start, bufferedEnd);
    part.style.width = percentify(end - start, bufferedEnd);
  };

  // remove unused buffered range elements
  for (i = children.length; i > buffered.length; i--) {
    this.el_.removeChild(children[i-1]);
  }
};

/**
 * Shows play progress
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlayProgressBar = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.PlayProgressBar.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-play-progress',
    innerHTML: '<span class="vjs-control-text"><span>' + this.localize('Progress') + '</span>: 0%</span>'
  });
};

/**
 * The Seek Handle shows the current position of the playhead during playback,
 * and can be dragged to adjust the playhead.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.SeekHandle = vjs.SliderHandle.extend({
  init: function(player, options) {
    vjs.SliderHandle.call(this, player, options);
    player.on('timeupdate', vjs.bind(this, this.updateContent));
  }
});

/**
 * The default value for the handle content, which may be read by screen readers
 *
 * @type {String}
 * @private
 */
vjs.SeekHandle.prototype.defaultValue = '00:00';

/** @inheritDoc */
vjs.SeekHandle.prototype.createEl = function() {
  return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
    className: 'vjs-seek-handle',
    'aria-live': 'off'
  });
};

vjs.SeekHandle.prototype.updateContent = function() {
  var time = (this.player_.scrubbing) ? this.player_.getCache().currentTime : this.player_.currentTime();
  this.el_.innerHTML = '<span class="vjs-control-text">' + vjs.formatTime(time, this.player_.duration()) + '</span>';
};
/**
 * The component for controlling the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeControl = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // hide volume controls when they're not supported by the current tech
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
  }
});

vjs.VolumeControl.prototype.options_ = {
  children: {
    'volumeBar': {}
  }
};

vjs.VolumeControl.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-control vjs-control'
  });
};

/**
 * The bar that contains the volume level and can be clicked on to adjust the level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeBar = vjs.Slider.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Slider.call(this, player, options);
    player.on('volumechange', vjs.bind(this, this.updateARIAAttributes));
    player.ready(vjs.bind(this, this.updateARIAAttributes));
  }
});

vjs.VolumeBar.prototype.updateARIAAttributes = function(){
  // Current value of volume bar as a percentage
  this.el_.setAttribute('aria-valuenow',vjs.round(this.player_.volume()*100, 2));
  this.el_.setAttribute('aria-valuetext',vjs.round(this.player_.volume()*100, 2)+'%');
};

vjs.VolumeBar.prototype.options_ = {
  children: {
    'volumeLevel': {},
    'volumeHandle': {}
  },
  'barName': 'volumeLevel',
  'handleName': 'volumeHandle'
};

vjs.VolumeBar.prototype.playerEvent = 'volumechange';

vjs.VolumeBar.prototype.createEl = function(){
  return vjs.Slider.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-bar',
    'aria-label': 'volume level'
  });
};

vjs.VolumeBar.prototype.onMouseMove = function(event) {
  if (this.player_.muted()) {
    this.player_.muted(false);
  }

  this.player_.volume(this.calculateDistance(event));
};

vjs.VolumeBar.prototype.getPercent = function(){
  if (this.player_.muted()) {
    return 0;
  } else {
    return this.player_.volume();
  }
};

vjs.VolumeBar.prototype.stepForward = function(){
  this.player_.volume(this.player_.volume() + 0.1);
};

vjs.VolumeBar.prototype.stepBack = function(){
  this.player_.volume(this.player_.volume() - 0.1);
};

/**
 * Shows volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.VolumeLevel = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);
  }
});

vjs.VolumeLevel.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-level',
    innerHTML: '<span class="vjs-control-text"></span>'
  });
};

/**
 * The volume handle can be dragged to adjust the volume level
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
 vjs.VolumeHandle = vjs.SliderHandle.extend();

 vjs.VolumeHandle.prototype.defaultValue = '00:00';

 /** @inheritDoc */
 vjs.VolumeHandle.prototype.createEl = function(){
   return vjs.SliderHandle.prototype.createEl.call(this, 'div', {
     className: 'vjs-volume-handle'
   });
 };
/**
 * A button component for muting the audio
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.MuteToggle = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    player.on('volumechange', vjs.bind(this, this.update));

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
  }
});

vjs.MuteToggle.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-mute-control vjs-control',
    innerHTML: '<div><span class="vjs-control-text">' + this.localize('Mute') + '</span></div>'
  });
};

vjs.MuteToggle.prototype.onClick = function(){
  this.player_.muted( this.player_.muted() ? false : true );
};

vjs.MuteToggle.prototype.update = function(){
  var vol = this.player_.volume(),
      level = 3;

  if (vol === 0 || this.player_.muted()) {
    level = 0;
  } else if (vol < 0.33) {
    level = 1;
  } else if (vol < 0.67) {
    level = 2;
  }

  // Don't rewrite the button text if the actual text doesn't change.
  // This causes unnecessary and confusing information for screen reader users.
  // This check is needed because this function gets called every time the volume level is changed.
  if(this.player_.muted()){
      if(this.el_.children[0].children[0].innerHTML!=this.localize('Unmute')){
          this.el_.children[0].children[0].innerHTML = this.localize('Unmute'); // change the button text to "Unmute"
      }
  } else {
      if(this.el_.children[0].children[0].innerHTML!=this.localize('Mute')){
          this.el_.children[0].children[0].innerHTML = this.localize('Mute'); // change the button text to "Mute"
      }
  }

  /* TODO improve muted icon classes */
  for (var i = 0; i < 4; i++) {
    vjs.removeClass(this.el_, 'vjs-vol-'+i);
  }
  vjs.addClass(this.el_, 'vjs-vol-'+level);
};
/**
 * Menu button with a popup for showing the volume slider.
 * @constructor
 */
vjs.VolumeMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    // Same listeners as MuteToggle
    player.on('volumechange', vjs.bind(this, this.update));

    // hide mute toggle if the current tech doesn't support volume control
    if (player.tech && player.tech['featuresVolumeControl'] === false) {
      this.addClass('vjs-hidden');
    }
    player.on('loadstart', vjs.bind(this, function(){
      if (player.tech['featuresVolumeControl'] === false) {
        this.addClass('vjs-hidden');
      } else {
        this.removeClass('vjs-hidden');
      }
    }));
    this.addClass('vjs-menu-button');
  }
});

vjs.VolumeMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player_, {
    contentElType: 'div'
  });
  var vc = new vjs.VolumeBar(this.player_, vjs.obj.merge({'vertical': true}, this.options_.volumeBar));
  menu.addChild(vc);
  return menu;
};

vjs.VolumeMenuButton.prototype.onClick = function(){
  vjs.MuteToggle.prototype.onClick.call(this);
  vjs.MenuButton.prototype.onClick.call(this);
};

vjs.VolumeMenuButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-volume-menu-button vjs-menu-button vjs-control',
    innerHTML: '<div><span class="vjs-control-text">' + this.localize('Mute') + '</span></div>'
  });
};
vjs.VolumeMenuButton.prototype.update = vjs.MuteToggle.prototype.update;
/**
 * The component for controlling the playback rate
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PlaybackRateMenuButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    this.updateVisibility();
    this.updateLabel();

    player.on('loadstart', vjs.bind(this, this.updateVisibility));
    player.on('ratechange', vjs.bind(this, this.updateLabel));
  }
});

vjs.PlaybackRateMenuButton.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-playback-rate vjs-menu-button vjs-control',
    innerHTML: '<div class="vjs-control-content"><span class="vjs-control-text">' + this.localize('Playback Rate') + '</span></div>'
  });

  this.labelEl_ = vjs.createEl('div', {
    className: 'vjs-playback-rate-value',
    innerHTML: 1.0
  });

  el.appendChild(this.labelEl_);

  return el;
};

// Menu creation
vjs.PlaybackRateMenuButton.prototype.createMenu = function(){
  var menu = new vjs.Menu(this.player());
  var rates = this.player().options()['playbackRates'];

  if (rates) {
    for (var i = rates.length - 1; i >= 0; i--) {
      menu.addChild(
        new vjs.PlaybackRateMenuItem(this.player(), { 'rate': rates[i] + 'x'})
        );
    };
  }

  return menu;
};

vjs.PlaybackRateMenuButton.prototype.updateARIAAttributes = function(){
  // Current playback rate
  this.el().setAttribute('aria-valuenow', this.player().playbackRate());
};

vjs.PlaybackRateMenuButton.prototype.onClick = function(){
  // select next rate option
  var currentRate = this.player().playbackRate();
  var rates = this.player().options()['playbackRates'];
  // this will select first one if the last one currently selected
  var newRate = rates[0];
  for (var i = 0; i <rates.length ; i++) {
    if (rates[i] > currentRate) {
      newRate = rates[i];
      break;
    }
  };
  this.player().playbackRate(newRate);
};

vjs.PlaybackRateMenuButton.prototype.playbackRateSupported = function(){
  return this.player().tech
    && this.player().tech['featuresPlaybackRate']
    && this.player().options()['playbackRates']
    && this.player().options()['playbackRates'].length > 0
  ;
};

/**
 * Hide playback rate controls when they're no playback rate options to select
 */
vjs.PlaybackRateMenuButton.prototype.updateVisibility = function(){
  if (this.playbackRateSupported()) {
    this.removeClass('vjs-hidden');
  } else {
    this.addClass('vjs-hidden');
  }
};

/**
 * Update button label when rate changed
 */
vjs.PlaybackRateMenuButton.prototype.updateLabel = function(){
  if (this.playbackRateSupported()) {
    this.labelEl_.innerHTML = this.player().playbackRate() + 'x';
  }
};

/**
 * The specific menu item type for selecting a playback rate
 *
 * @constructor
 */
vjs.PlaybackRateMenuItem = vjs.MenuItem.extend({
  contentElType: 'button',
  /** @constructor */
  init: function(player, options){
    var label = this.label = options['rate'];
    var rate = this.rate = parseFloat(label, 10);

    // Modify options for parent MenuItem class's init.
    options['label'] = label;
    options['selected'] = rate === 1;
    vjs.MenuItem.call(this, player, options);

    this.player().on('ratechange', vjs.bind(this, this.update));
  }
});

vjs.PlaybackRateMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player().playbackRate(this.rate);
};

vjs.PlaybackRateMenuItem.prototype.update = function(){
  this.selected(this.player().playbackRate() == this.rate);
};
/* Poster Image
================================================================================ */
/**
 * The component that handles showing the poster image.
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.PosterImage = vjs.Button.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Button.call(this, player, options);

    if (player.poster()) {
      this.src(player.poster());
    }

    if (!player.poster() || !player.controls()) {
      this.hide();
    }

    player.on('posterchange', vjs.bind(this, function(){
      this.src(player.poster());
    }));

    player.on('play', vjs.bind(this, this.hide));
  }
});

// use the test el to check for backgroundSize style support
var _backgroundSizeSupported = 'backgroundSize' in vjs.TEST_VID.style;

vjs.PosterImage.prototype.createEl = function(){
  var el = vjs.createEl('div', {
    className: 'vjs-poster',

    // Don't want poster to be tabbable.
    tabIndex: -1
  });

  if (!_backgroundSizeSupported) {
    // setup an img element as a fallback for IE8
    el.appendChild(vjs.createEl('img'));
  }

  return el;
};

vjs.PosterImage.prototype.src = function(url){
  var el = this.el();

  // getter
  // can't think of a need for a getter here
  // see #838 if on is needed in the future
  // still don't want a getter to set src as undefined
  if (url === undefined) {
    return;
  }

  // setter
  // To ensure the poster image resizes while maintaining its original aspect
  // ratio, use a div with `background-size` when available. For browsers that
  // do not support `background-size` (e.g. IE8), fall back on using a regular
  // img element.
  if (_backgroundSizeSupported) {
    el.style.backgroundImage = 'url("' + url + '")';
  } else {
    el.firstChild.src = url;
  }
};

vjs.PosterImage.prototype.onClick = function(){
  // Only accept clicks when controls are enabled
  if (this.player().controls()) {
    this.player_.play();
  }
};
/* Loading Spinner
================================================================================ */
/**
 * Loading spinner for waiting events
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.LoadingSpinner = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // MOVING DISPLAY HANDLING TO CSS

    // player.on('canplay', vjs.bind(this, this.hide));
    // player.on('canplaythrough', vjs.bind(this, this.hide));
    // player.on('playing', vjs.bind(this, this.hide));
    // player.on('seeking', vjs.bind(this, this.show));

    // in some browsers seeking does not trigger the 'playing' event,
    // so we also need to trap 'seeked' if we are going to set a
    // 'seeking' event
    // player.on('seeked', vjs.bind(this, this.hide));

    // player.on('ended', vjs.bind(this, this.hide));

    // Not showing spinner on stalled any more. Browsers may stall and then not trigger any events that would remove the spinner.
    // Checked in Chrome 16 and Safari 5.1.2. http://help.videojs.com/discussions/problems/883-why-is-the-download-progress-showing
    // player.on('stalled', vjs.bind(this, this.show));

    // player.on('waiting', vjs.bind(this, this.show));
  }
});

vjs.LoadingSpinner.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-loading-spinner'
  });
};
/* Big Play Button
================================================================================ */
/**
 * Initial play button. Shows before the video has played. The hiding of the
 * big play button is done via CSS and player states.
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @class
 * @constructor
 */
vjs.BigPlayButton = vjs.Button.extend();

vjs.BigPlayButton.prototype.createEl = function(){
  return vjs.Button.prototype.createEl.call(this, 'div', {
    className: 'vjs-big-play-button',
    innerHTML: '<span aria-hidden="true"></span>',
    'aria-label': 'play video'
  });
};

vjs.BigPlayButton.prototype.onClick = function(){
  this.player_.play();
};
/**
 * Display that an error has occurred making the video unplayable
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.ErrorDisplay = vjs.Component.extend({
  init: function(player, options){
    vjs.Component.call(this, player, options);

    this.update();
    player.on('error', vjs.bind(this, this.update));
  }
});

vjs.ErrorDisplay.prototype.createEl = function(){
  var el = vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-error-display'
  });

  this.contentEl_ = vjs.createEl('div');
  el.appendChild(this.contentEl_);

  return el;
};

vjs.ErrorDisplay.prototype.update = function(){
  if (this.player().error()) {
    this.contentEl_.innerHTML = this.localize(this.player().error().message);
  }
};
/**
 * @fileoverview Media Technology Controller - Base class for media playback
 * technology controllers like Flash and HTML5
 */

/**
 * Base class for media (HTML5 Video, Flash) controllers
 * @param {vjs.Player|Object} player  Central player instance
 * @param {Object=} options Options object
 * @constructor
 */
vjs.MediaTechController = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    options = options || {};
    // we don't want the tech to report user activity automatically.
    // This is done manually in addControlsListeners
    options.reportTouchActivity = false;
    vjs.Component.call(this, player, options, ready);

    // Manually track progress in cases where the browser/flash player doesn't report it.
    if (!this['featuresProgressEvents']) {
      this.manualProgressOn();
    }

    // Manually track timeudpates in cases where the browser/flash player doesn't report it.
    if (!this['featuresTimeupdateEvents']) {
      this.manualTimeUpdatesOn();
    }

    this.initControlsListeners();
  }
});

/**
 * Set up click and touch listeners for the playback element
 * On desktops, a click on the video itself will toggle playback,
 * on a mobile device a click on the video toggles controls.
 * (toggling controls is done by toggling the user state between active and
 * inactive)
 *
 * A tap can signal that a user has become active, or has become inactive
 * e.g. a quick tap on an iPhone movie should reveal the controls. Another
 * quick tap should hide them again (signaling the user is in an inactive
 * viewing state)
 *
 * In addition to this, we still want the user to be considered inactive after
 * a few seconds of inactivity.
 *
 * Note: the only part of iOS interaction we can't mimic with this setup
 * is a touch and hold on the video element counting as activity in order to
 * keep the controls showing, but that shouldn't be an issue. A touch and hold on
 * any controls will still keep the user active
 */
vjs.MediaTechController.prototype.initControlsListeners = function(){
  var player, tech, activateControls, deactivateControls;

  tech = this;
  player = this.player();

  var activateControls = function(){
    if (player.controls() && !player.usingNativeControls()) {
      tech.addControlsListeners();
    }
  };

  deactivateControls = vjs.bind(tech, tech.removeControlsListeners);

  // Set up event listeners once the tech is ready and has an element to apply
  // listeners to
  this.ready(activateControls);
  player.on('controlsenabled', activateControls);
  player.on('controlsdisabled', deactivateControls);

  // if we're loading the playback object after it has started loading or playing the
  // video (often with autoplay on) then the loadstart event has already fired and we
  // need to fire it manually because many things rely on it.
  // Long term we might consider how we would do this for other events like 'canplay'
  // that may also have fired.
  this.ready(function(){
    if (this.networkState && this.networkState() > 0) {
      this.player().trigger('loadstart');
    }
  });
};

vjs.MediaTechController.prototype.addControlsListeners = function(){
  var userWasActive;

  // Some browsers (Chrome & IE) don't trigger a click on a flash swf, but do
  // trigger mousedown/up.
  // http://stackoverflow.com/questions/1444562/javascript-onclick-event-over-flash-object
  // Any touch events are set to block the mousedown event from happening
  this.on('mousedown', this.onClick);

  // If the controls were hidden we don't want that to change without a tap event
  // so we'll check if the controls were already showing before reporting user
  // activity
  this.on('touchstart', function(event) {
    userWasActive = this.player_.userActive();
  });

  this.on('touchmove', function(event) {
    if (userWasActive){
      this.player().reportUserActivity();
    }
  });

  this.on('touchend', function(event) {
    // Stop the mouse events from also happening
    event.preventDefault();
  });

  // Turn on component tap events
  this.emitTapEvents();

  // The tap listener needs to come after the touchend listener because the tap
  // listener cancels out any reportedUserActivity when setting userActive(false)
  this.on('tap', this.onTap);
};

/**
 * Remove the listeners used for click and tap controls. This is needed for
 * toggling to controls disabled, where a tap/touch should do nothing.
 */
vjs.MediaTechController.prototype.removeControlsListeners = function(){
  // We don't want to just use `this.off()` because there might be other needed
  // listeners added by techs that extend this.
  this.off('tap');
  this.off('touchstart');
  this.off('touchmove');
  this.off('touchleave');
  this.off('touchcancel');
  this.off('touchend');
  this.off('click');
  this.off('mousedown');
};

/**
 * Handle a click on the media element. By default will play/pause the media.
 */
vjs.MediaTechController.prototype.onClick = function(event){
  // We're using mousedown to detect clicks thanks to Flash, but mousedown
  // will also be triggered with right-clicks, so we need to prevent that
  if (event.button !== 0) return;

  // When controls are disabled a click should not toggle playback because
  // the click is considered a control
  if (this.player().controls()) {
    if (this.player().paused()) {
      this.player().play();
    } else {
      this.player().pause();
    }
  }
};

/**
 * Handle a tap on the media element. By default it will toggle the user
 * activity state, which hides and shows the controls.
 */
vjs.MediaTechController.prototype.onTap = function(){
  this.player().userActive(!this.player().userActive());
};

/* Fallbacks for unsupported event types
================================================================================ */
// Manually trigger progress events based on changes to the buffered amount
// Many flash players and older HTML5 browsers don't send progress or progress-like events
vjs.MediaTechController.prototype.manualProgressOn = function(){
  this.manualProgress = true;

  // Trigger progress watching when a source begins loading
  this.trackProgress();
};

vjs.MediaTechController.prototype.manualProgressOff = function(){
  this.manualProgress = false;
  this.stopTrackingProgress();
};

vjs.MediaTechController.prototype.trackProgress = function(){

  this.progressInterval = setInterval(vjs.bind(this, function(){
    // Don't trigger unless buffered amount is greater than last time

    var bufferedPercent = this.player().bufferedPercent();

    if (this.bufferedPercent_ != bufferedPercent) {
      this.player().trigger('progress');
    }

    this.bufferedPercent_ = bufferedPercent;

    if (bufferedPercent === 1) {
      this.stopTrackingProgress();
    }
  }), 500);
};
vjs.MediaTechController.prototype.stopTrackingProgress = function(){ clearInterval(this.progressInterval); };

/*! Time Tracking -------------------------------------------------------------- */
vjs.MediaTechController.prototype.manualTimeUpdatesOn = function(){
  this.manualTimeUpdates = true;

  this.player().on('play', vjs.bind(this, this.trackCurrentTime));
  this.player().on('pause', vjs.bind(this, this.stopTrackingCurrentTime));
  // timeupdate is also called by .currentTime whenever current time is set

  // Watch for native timeupdate event
  this.one('timeupdate', function(){
    // Update known progress support for this playback technology
    this['featuresTimeupdateEvents'] = true;
    // Turn off manual progress tracking
    this.manualTimeUpdatesOff();
  });
};

vjs.MediaTechController.prototype.manualTimeUpdatesOff = function(){
  this.manualTimeUpdates = false;
  this.stopTrackingCurrentTime();
  this.off('play', this.trackCurrentTime);
  this.off('pause', this.stopTrackingCurrentTime);
};

vjs.MediaTechController.prototype.trackCurrentTime = function(){
  if (this.currentTimeInterval) { this.stopTrackingCurrentTime(); }
  this.currentTimeInterval = setInterval(vjs.bind(this, function(){
    this.player().trigger('timeupdate');
  }), 250); // 42 = 24 fps // 250 is what Webkit uses // FF uses 15
};

// Turn off play progress tracking (when paused or dragging)
vjs.MediaTechController.prototype.stopTrackingCurrentTime = function(){
  clearInterval(this.currentTimeInterval);

  // #1002 - if the video ends right before the next timeupdate would happen,
  // the progress bar won't make it all the way to the end
  this.player().trigger('timeupdate');
};

vjs.MediaTechController.prototype.dispose = function() {
  // Turn off any manual progress or timeupdate tracking
  if (this.manualProgress) { this.manualProgressOff(); }

  if (this.manualTimeUpdates) { this.manualTimeUpdatesOff(); }

  vjs.Component.prototype.dispose.call(this);
};

vjs.MediaTechController.prototype.setCurrentTime = function() {
  // improve the accuracy of manual timeupdates
  if (this.manualTimeUpdates) { this.player().trigger('timeupdate'); }
};

/**
 * Provide a default setPoster method for techs
 *
 * Poster support for techs should be optional, so we don't want techs to
 * break if they don't have a way to set a poster.
 */
vjs.MediaTechController.prototype.setPoster = function(){};

vjs.MediaTechController.prototype['featuresVolumeControl'] = true;

// Resizing plugins using request fullscreen reloads the plugin
vjs.MediaTechController.prototype['featuresFullscreenResize'] = false;
vjs.MediaTechController.prototype['featuresPlaybackRate'] = false;

// Optional events that we can manually mimic with timers
// currently not triggered by video-js-swf
vjs.MediaTechController.prototype['featuresProgressEvents'] = false;
vjs.MediaTechController.prototype['featuresTimeupdateEvents'] = false;

vjs.media = {};
/**
 * @fileoverview HTML5 Media Controller - Wrapper for HTML5 Media API
 */

/**
 * HTML5 Media Controller - Wrapper for HTML5 Media API
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Html5 = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    // volume cannot be changed from 1 on iOS
    this['featuresVolumeControl'] = vjs.Html5.canControlVolume();

    // just in case; or is it excessively...
    this['featuresPlaybackRate'] = vjs.Html5.canControlPlaybackRate();

    // In iOS, if you move a video element in the DOM, it breaks video playback.
    this['movingMediaElementInDOM'] = !vjs.IS_IOS;

    // HTML video is able to automatically resize when going to fullscreen
    this['featuresFullscreenResize'] = true;

    // HTML video supports progress events
    this['featuresProgressEvents'] = true;

    vjs.MediaTechController.call(this, player, options, ready);
    this.setupTriggers();

    var source = options['source'];

    // set the source if one was provided
    if (source && this.el_.currentSrc !== source.src) {
      this.el_.src = source.src;
    }

    // Determine if native controls should be used
    // Our goal should be to get the custom controls on mobile solid everywhere
    // so we can remove this all together. Right now this will block custom
    // controls on touch enabled laptops like the Chrome Pixel
    if (vjs.TOUCH_ENABLED && player.options()['nativeControlsForTouch'] !== false) {
      this.useNativeControls();
    }

    // Chrome and Safari both have issues with autoplay.
    // In Safari (5.1.1), when we move the video element into the container div, autoplay doesn't work.
    // In Chrome (15), if you have autoplay + a poster + no controls, the video gets hidden (but audio plays)
    // This fixes both issues. Need to wait for API, so it updates displays correctly
    player.ready(function(){
      if (this.tag && this.options_['autoplay'] && this.paused()) {
        delete this.tag['poster']; // Chrome Fix. Fixed in Chrome v16.
        this.play();
      }
    });

    this.triggerReady();
  }
});

vjs.Html5.prototype.dispose = function(){
  vjs.Html5.disposeMediaElement(this.el_);
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Html5.prototype.createEl = function(){
  var player = this.player_,
      // If possible, reuse original tag for HTML5 playback technology element
      el = player.tag,
      newEl,
      clone;

  // Check if this browser supports moving the element into the box.
  // On the iPhone video will break if you move the element,
  // So we have to create a brand new element.
  if (!el || this['movingMediaElementInDOM'] === false) {

    // If the original tag is still there, clone and remove it.
    if (el) {
      clone = el.cloneNode(false);
      vjs.Html5.disposeMediaElement(el);
      el = clone;
      player.tag = null;
    } else {
      el = vjs.createEl('video');
      vjs.setElementAttributes(el,
        vjs.obj.merge(player.tagAttributes || {}, {
          id:player.id() + '_html5_api',
          'class':'vjs-tech'
        })
      );
    }
    // associate the player with the new tag
    el['player'] = player;

    vjs.insertFirst(el, player.el());
  }

  // Update specific tag settings, in case they were overridden
  var settingsAttrs = ['autoplay','preload','loop','muted'];
  for (var i = settingsAttrs.length - 1; i >= 0; i--) {
    var attr = settingsAttrs[i];
    var overwriteAttrs = {};
    if (typeof player.options_[attr] !== 'undefined') {
      overwriteAttrs[attr] = player.options_[attr];
    }
    vjs.setElementAttributes(el, overwriteAttrs);
  }

  return el;
  // jenniisawesome = true;
};

// Make video events trigger player events
// May seem verbose here, but makes other APIs possible.
// Triggers removed using this.off when disposed
vjs.Html5.prototype.setupTriggers = function(){
  for (var i = vjs.Html5.Events.length - 1; i >= 0; i--) {
    vjs.on(this.el_, vjs.Html5.Events[i], vjs.bind(this, this.eventHandler));
  }
};

vjs.Html5.prototype.eventHandler = function(evt){
  // In the case of an error on the video element, set the error prop
  // on the player and let the player handle triggering the event. On
  // some platforms, error events fire that do not cause the error
  // property on the video element to be set. See #1465 for an example.
  if (evt.type == 'error' && this.error()) {
    this.player().error(this.error().code);

  // in some cases we pass the event directly to the player
  } else {
    // No need for media events to bubble up.
    evt.bubbles = false;

    this.player().trigger(evt);
  }
};

vjs.Html5.prototype.useNativeControls = function(){
  var tech, player, controlsOn, controlsOff, cleanUp;

  tech = this;
  player = this.player();

  // If the player controls are enabled turn on the native controls
  tech.setControls(player.controls());

  // Update the native controls when player controls state is updated
  controlsOn = function(){
    tech.setControls(true);
  };
  controlsOff = function(){
    tech.setControls(false);
  };
  player.on('controlsenabled', controlsOn);
  player.on('controlsdisabled', controlsOff);

  // Clean up when not using native controls anymore
  cleanUp = function(){
    player.off('controlsenabled', controlsOn);
    player.off('controlsdisabled', controlsOff);
  };
  tech.on('dispose', cleanUp);
  player.on('usingcustomcontrols', cleanUp);

  // Update the state of the player to using native controls
  player.usingNativeControls(true);
};


vjs.Html5.prototype.play = function(){ this.el_.play(); };
vjs.Html5.prototype.pause = function(){ this.el_.pause(); };
vjs.Html5.prototype.paused = function(){ return this.el_.paused; };

vjs.Html5.prototype.currentTime = function(){ return this.el_.currentTime; };
vjs.Html5.prototype.setCurrentTime = function(seconds){
  try {
    this.el_.currentTime = seconds;
  } catch(e) {
    vjs.log(e, 'Video is not ready. (Video.js)');
    // this.warning(VideoJS.warnings.videoNotReady);
  }
};

vjs.Html5.prototype.duration = function(){ return this.el_.duration || 0; };
vjs.Html5.prototype.buffered = function(){ return this.el_.buffered; };

vjs.Html5.prototype.volume = function(){ return this.el_.volume; };
vjs.Html5.prototype.setVolume = function(percentAsDecimal){ this.el_.volume = percentAsDecimal; };
vjs.Html5.prototype.muted = function(){ return this.el_.muted; };
vjs.Html5.prototype.setMuted = function(muted){ this.el_.muted = muted; };

vjs.Html5.prototype.width = function(){ return this.el_.offsetWidth; };
vjs.Html5.prototype.height = function(){ return this.el_.offsetHeight; };

vjs.Html5.prototype.supportsFullScreen = function(){
  if (typeof this.el_.webkitEnterFullScreen == 'function') {

    // Seems to be broken in Chromium/Chrome && Safari in Leopard
    if (/Android/.test(vjs.USER_AGENT) || !/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT)) {
      return true;
    }
  }
  return false;
};

vjs.Html5.prototype.enterFullScreen = function(){
  var video = this.el_;
  if (video.paused && video.networkState <= video.HAVE_METADATA) {
    // attempt to prime the video element for programmatic access
    // this isn't necessary on the desktop but shouldn't hurt
    this.el_.play();

    // playing and pausing synchronously during the transition to fullscreen
    // can get iOS ~6.1 devices into a play/pause loop
    setTimeout(function(){
      video.pause();
      video.webkitEnterFullScreen();
    }, 0);
  } else {
    video.webkitEnterFullScreen();
  }
};
vjs.Html5.prototype.exitFullScreen = function(){
  this.el_.webkitExitFullScreen();
};
vjs.Html5.prototype.src = function(src) {
  if (src === undefined) {
    return this.el_.src;
  } else {
    this.el_.src = src;
  }
};
vjs.Html5.prototype.load = function(){ this.el_.load(); };
vjs.Html5.prototype.currentSrc = function(){ return this.el_.currentSrc; };

vjs.Html5.prototype.poster = function(){ return this.el_.poster; };
vjs.Html5.prototype.setPoster = function(val){ this.el_.poster = val; };

vjs.Html5.prototype.preload = function(){ return this.el_.preload; };
vjs.Html5.prototype.setPreload = function(val){ this.el_.preload = val; };

vjs.Html5.prototype.autoplay = function(){ return this.el_.autoplay; };
vjs.Html5.prototype.setAutoplay = function(val){ this.el_.autoplay = val; };

vjs.Html5.prototype.controls = function(){ return this.el_.controls; };
vjs.Html5.prototype.setControls = function(val){ this.el_.controls = !!val; };

vjs.Html5.prototype.loop = function(){ return this.el_.loop; };
vjs.Html5.prototype.setLoop = function(val){ this.el_.loop = val; };

vjs.Html5.prototype.error = function(){ return this.el_.error; };
vjs.Html5.prototype.seeking = function(){ return this.el_.seeking; };
vjs.Html5.prototype.ended = function(){ return this.el_.ended; };
vjs.Html5.prototype.defaultMuted = function(){ return this.el_.defaultMuted; };

vjs.Html5.prototype.playbackRate = function(){ return this.el_.playbackRate; };
vjs.Html5.prototype.setPlaybackRate = function(val){ this.el_.playbackRate = val; };

vjs.Html5.prototype.networkState = function(){ return this.el_.networkState; };

/* HTML5 Support Testing ---------------------------------------------------- */

vjs.Html5.isSupported = function(){
  // ie9 with no Media Player is a LIAR! (#984)
  try {
    vjs.TEST_VID['volume'] = 0.5;
  } catch (e) {
    return false;
  }

  return !!vjs.TEST_VID.canPlayType;
};

vjs.Html5.canPlaySource = function(srcObj){
  // IE9 on Windows 7 without MediaPlayer throws an error here
  // https://github.com/videojs/video.js/issues/519
  try {
    return !!vjs.TEST_VID.canPlayType(srcObj.type);
  } catch(e) {
    return '';
  }
  // TODO: Check Type
  // If no Type, check ext
  // Check Media Type
};

vjs.Html5.canControlVolume = function(){
  var volume =  vjs.TEST_VID.volume;
  vjs.TEST_VID.volume = (volume / 2) + 0.1;
  return volume !== vjs.TEST_VID.volume;
};

vjs.Html5.canControlPlaybackRate = function(){
  var playbackRate =  vjs.TEST_VID.playbackRate;
  vjs.TEST_VID.playbackRate = (playbackRate / 2) + 0.1;
  return playbackRate !== vjs.TEST_VID.playbackRate;
};

// HTML5 Feature detection and Device Fixes --------------------------------- //
(function() {
  var canPlayType,
      mpegurlRE = /^application\/(?:x-|vnd\.apple\.)mpegurl/i,
      mp4RE = /^video\/mp4/i;

  vjs.Html5.patchCanPlayType = function() {
    // Android 4.0 and above can play HLS to some extent but it reports being unable to do so
    if (vjs.ANDROID_VERSION >= 4.0) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type) {
        if (type && mpegurlRE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }

    // Override Android 2.2 and less canPlayType method which is broken
    if (vjs.IS_OLD_ANDROID) {
      if (!canPlayType) {
        canPlayType = vjs.TEST_VID.constructor.prototype.canPlayType;
      }

      vjs.TEST_VID.constructor.prototype.canPlayType = function(type){
        if (type && mp4RE.test(type)) {
          return 'maybe';
        }
        return canPlayType.call(this, type);
      };
    }
  };

  vjs.Html5.unpatchCanPlayType = function() {
    var r = vjs.TEST_VID.constructor.prototype.canPlayType;
    vjs.TEST_VID.constructor.prototype.canPlayType = canPlayType;
    canPlayType = null;
    return r;
  };

  // by default, patch the video element
  vjs.Html5.patchCanPlayType();
})();

// List of all HTML5 events (various uses).
vjs.Html5.Events = 'loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange'.split(',');

vjs.Html5.disposeMediaElement = function(el){
  if (!el) { return; }

  el['player'] = null;

  if (el.parentNode) {
    el.parentNode.removeChild(el);
  }

  // remove any child track or source nodes to prevent their loading
  while(el.hasChildNodes()) {
    el.removeChild(el.firstChild);
  }

  // remove any src reference. not setting `src=''` because that causes a warning
  // in firefox
  el.removeAttribute('src');

  // force the media element to update its loading state by calling load()
  // however IE on Windows 7N has a bug that throws an error so need a try/catch (#793)
  if (typeof el.load === 'function') {
    // wrapping in an iife so it's not deoptimized (#1060#discussion_r10324473)
    (function() {
      try {
        el.load();
      } catch (e) {
        // not supported
      }
    })();
  }
};
/**
 * @fileoverview VideoJS-SWF - Custom Flash Player with HTML5-ish API
 * https://github.com/zencoder/video-js-swf
 * Not using setupTriggers. Using global onEvent func to distribute events
 */

/**
 * Flash Media Controller - Wrapper for fallback SWF API
 *
 * @param {vjs.Player} player
 * @param {Object=} options
 * @param {Function=} ready
 * @constructor
 */
vjs.Flash = vjs.MediaTechController.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.MediaTechController.call(this, player, options, ready);

    var source = options['source'],

        // Which element to embed in
        parentEl = options['parentEl'],

        // Create a temporary element to be replaced by swf object
        placeHolder = this.el_ = vjs.createEl('div', { id: player.id() + '_temp_flash' }),

        // Generate ID for swf object
        objId = player.id()+'_flash_api',

        // Store player options in local var for optimization
        // TODO: switch to using player methods instead of options
        // e.g. player.autoplay();
        playerOptions = player.options_,

        // Merge default flashvars with ones passed in to init
        flashVars = vjs.obj.merge({

          // SWF Callback Functions
          'readyFunction': 'videojs.Flash.onReady',
          'eventProxyFunction': 'videojs.Flash.onEvent',
          'errorEventProxyFunction': 'videojs.Flash.onError',

          // Player Settings
          'autoplay': playerOptions.autoplay,
          'preload': playerOptions.preload,
          'loop': playerOptions.loop,
          'muted': playerOptions.muted

        }, options['flashVars']),

        // Merge default parames with ones passed in
        params = vjs.obj.merge({
          'wmode': 'opaque', // Opaque is needed to overlay controls, but can affect playback performance
          'bgcolor': '#000000' // Using bgcolor prevents a white flash when the object is loading
        }, options['params']),

        // Merge default attributes with ones passed in
        attributes = vjs.obj.merge({
          'id': objId,
          'name': objId, // Both ID and Name needed or swf to identifty itself
          'class': 'vjs-tech'
        }, options['attributes'])
    ;

    // If source was supplied pass as a flash var.
    if (source) {
      if (source.type && vjs.Flash.isStreamingType(source.type)) {
        var parts = vjs.Flash.streamToParts(source.src);
        flashVars['rtmpConnection'] = encodeURIComponent(parts.connection);
        flashVars['rtmpStream'] = encodeURIComponent(parts.stream);
      }
      else {
        flashVars['src'] = encodeURIComponent(vjs.getAbsoluteURL(source.src));
      }
    }

    // Add placeholder to player div
    vjs.insertFirst(placeHolder, parentEl);

    // Having issues with Flash reloading on certain page actions (hide/resize/fullscreen) in certain browsers
    // This allows resetting the playhead when we catch the reload
    if (options['startTime']) {
      this.ready(function(){
        this.load();
        this.play();
        this['currentTime'](options['startTime']);
      });
    }

    // firefox doesn't bubble mousemove events to parent. videojs/video-js-swf#37
    // bugzilla bug: https://bugzilla.mozilla.org/show_bug.cgi?id=836786
    if (vjs.IS_FIREFOX) {
      this.ready(function(){
        vjs.on(this.el(), 'mousemove', vjs.bind(this, function(){
          // since it's a custom event, don't bubble higher than the player
          this.player().trigger({ 'type':'mousemove', 'bubbles': false });
        }));
      });
    }

    // native click events on the SWF aren't triggered on IE11, Win8.1RT
    // use stageclick events triggered from inside the SWF instead
    player.on('stageclick', player.reportUserActivity);

    this.el_ = vjs.Flash.embed(options['swf'], placeHolder, flashVars, params, attributes);
  }
});

vjs.Flash.prototype.dispose = function(){
  vjs.MediaTechController.prototype.dispose.call(this);
};

vjs.Flash.prototype.play = function(){
  this.el_.vjs_play();
};

vjs.Flash.prototype.pause = function(){
  this.el_.vjs_pause();
};

vjs.Flash.prototype.src = function(src){
  if (src === undefined) {
    return this['currentSrc']();
  }

  if (vjs.Flash.isStreamingSrc(src)) {
    src = vjs.Flash.streamToParts(src);
    this.setRtmpConnection(src.connection);
    this.setRtmpStream(src.stream);
  } else {
    // Make sure source URL is abosolute.
    src = vjs.getAbsoluteURL(src);
    this.el_.vjs_src(src);
  }

  // Currently the SWF doesn't autoplay if you load a source later.
  // e.g. Load player w/ no source, wait 2s, set src.
  if (this.player_.autoplay()) {
    var tech = this;
    setTimeout(function(){ tech.play(); }, 0);
  }
};

vjs.Flash.prototype['setCurrentTime'] = function(time){
  this.lastSeekTarget_ = time;
  this.el_.vjs_setProperty('currentTime', time);
  vjs.MediaTechController.prototype.setCurrentTime.call(this);
};

vjs.Flash.prototype['currentTime'] = function(time){
  // when seeking make the reported time keep up with the requested time
  // by reading the time we're seeking to
  if (this.seeking()) {
    return this.lastSeekTarget_ || 0;
  }
  return this.el_.vjs_getProperty('currentTime');
};

vjs.Flash.prototype['currentSrc'] = function(){
  var src = this.el_.vjs_getProperty('currentSrc');
  // no src, check and see if RTMP
  if (src == null) {
    var connection = this['rtmpConnection'](),
        stream = this['rtmpStream']();

    if (connection && stream) {
      src = vjs.Flash.streamFromParts(connection, stream);
    }
  }
  return src;
};

vjs.Flash.prototype.load = function(){
  this.el_.vjs_load();
};

vjs.Flash.prototype.poster = function(){
  this.el_.vjs_getProperty('poster');
};
vjs.Flash.prototype['setPoster'] = function(){
  // poster images are not handled by the Flash tech so make this a no-op
};

vjs.Flash.prototype.buffered = function(){
  return vjs.createTimeRange(0, this.el_.vjs_getProperty('buffered'));
};

vjs.Flash.prototype.supportsFullScreen = function(){
  return false; // Flash does not allow fullscreen through javascript
};

vjs.Flash.prototype.enterFullScreen = function(){
  return false;
};

(function(){
  // Create setters and getters for attributes
  var api = vjs.Flash.prototype,
    readWrite = 'rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted'.split(','),
    readOnly = 'error,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks'.split(','),
    // Overridden: buffered, currentTime, currentSrc
    i;

  function createSetter(attr){
    var attrUpper = attr.charAt(0).toUpperCase() + attr.slice(1);
    api['set'+attrUpper] = function(val){ return this.el_.vjs_setProperty(attr, val); };
  };
  function createGetter(attr) {
    api[attr] = function(){ return this.el_.vjs_getProperty(attr); };
  };

  // Create getter and setters for all read/write attributes
  for (i = 0; i < readWrite.length; i++) {
    createGetter(readWrite[i]);
    createSetter(readWrite[i]);
  }

  // Create getters for read-only attributes
  for (i = 0; i < readOnly.length; i++) {
    createGetter(readOnly[i]);
  }
})();

/* Flash Support Testing -------------------------------------------------------- */

vjs.Flash.isSupported = function(){
  return vjs.Flash.version()[0] >= 10;
  // return swfobject.hasFlashPlayerVersion('10');
};

vjs.Flash.canPlaySource = function(srcObj){
  var type;

  if (!srcObj.type) {
    return '';
  }

  type = srcObj.type.replace(/;.*/,'').toLowerCase();
  if (type in vjs.Flash.formats || type in vjs.Flash.streamingFormats) {
    return 'maybe';
  }
};

vjs.Flash.formats = {
  'video/flv': 'FLV',
  'video/x-flv': 'FLV',
  'video/mp4': 'MP4',
  'video/m4v': 'MP4'
};

vjs.Flash.streamingFormats = {
  'rtmp/mp4': 'MP4',
  'rtmp/flv': 'FLV'
};

vjs.Flash['onReady'] = function(currSwf){
  var el, player;

  el = vjs.el(currSwf);

  // get player from the player div property
  player = el && el.parentNode && el.parentNode['player'];

  // if there is no el or player then the tech has been disposed
  // and the tech element was removed from the player div
  if (player) {
    // reference player on tech element
    el['player'] = player;
    // check that the flash object is really ready
    vjs.Flash['checkReady'](player.tech);
  }
};

// The SWF isn't always ready when it says it is. Sometimes the API functions still need to be added to the object.
// If it's not ready, we set a timeout to check again shortly.
vjs.Flash['checkReady'] = function(tech){
  // stop worrying if the tech has been disposed
  if (!tech.el()) {
    return;
  }

  // check if API property exists
  if (tech.el().vjs_getProperty) {
    // tell tech it's ready
    tech.triggerReady();
  } else {
    // wait longer
    setTimeout(function(){
      vjs.Flash['checkReady'](tech);
    }, 50);
  }
};

// Trigger events from the swf on the player
vjs.Flash['onEvent'] = function(swfID, eventName){
  var player = vjs.el(swfID)['player'];
  player.trigger(eventName);
};

// Log errors from the swf
vjs.Flash['onError'] = function(swfID, err){
  var player = vjs.el(swfID)['player'];
  var msg = 'FLASH: '+err;

  if (err == 'srcnotfound') {
    player.error({ code: 4, message: msg });

  // errors we haven't categorized into the media errors
  } else {
    player.error(msg);
  }
};

// Flash Version Check
vjs.Flash.version = function(){
  var version = '0,0,0';

  // IE
  try {
    version = new window.ActiveXObject('ShockwaveFlash.ShockwaveFlash').GetVariable('$version').replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];

  // other browsers
  } catch(e) {
    try {
      if (navigator.mimeTypes['application/x-shockwave-flash'].enabledPlugin){
        version = (navigator.plugins['Shockwave Flash 2.0'] || navigator.plugins['Shockwave Flash']).description.replace(/\D+/g, ',').match(/^,?(.+),?$/)[1];
      }
    } catch(err) {}
  }
  return version.split(',');
};

// Flash embedding method. Only used in non-iframe mode
vjs.Flash.embed = function(swf, placeHolder, flashVars, params, attributes){
  var code = vjs.Flash.getEmbedCode(swf, flashVars, params, attributes),

      // Get element by embedding code and retrieving created element
      obj = vjs.createEl('div', { innerHTML: code }).childNodes[0],

      par = placeHolder.parentNode
  ;

  placeHolder.parentNode.replaceChild(obj, placeHolder);

  // IE6 seems to have an issue where it won't initialize the swf object after injecting it.
  // This is a dumb fix
  var newObj = par.childNodes[0];
  setTimeout(function(){
    newObj.style.display = 'block';
  }, 1000);

  return obj;

};

vjs.Flash.getEmbedCode = function(swf, flashVars, params, attributes){

  var objTag = '<object type="application/x-shockwave-flash"',
      flashVarsString = '',
      paramsString = '',
      attrsString = '';

  // Convert flash vars to string
  if (flashVars) {
    vjs.obj.each(flashVars, function(key, val){
      flashVarsString += (key + '=' + val + '&amp;');
    });
  }

  // Add swf, flashVars, and other default params
  params = vjs.obj.merge({
    'movie': swf,
    'flashvars': flashVarsString,
    'allowScriptAccess': 'always', // Required to talk to swf
    'allowNetworking': 'all' // All should be default, but having security issues.
  }, params);

  // Create param tags string
  vjs.obj.each(params, function(key, val){
    paramsString += '<param name="'+key+'" value="'+val+'" />';
  });

  attributes = vjs.obj.merge({
    // Add swf to attributes (need both for IE and Others to work)
    'data': swf,

    // Default to 100% width/height
    'width': '100%',
    'height': '100%'

  }, attributes);

  // Create Attributes string
  vjs.obj.each(attributes, function(key, val){
    attrsString += (key + '="' + val + '" ');
  });

  return objTag + attrsString + '>' + paramsString + '</object>';
};

vjs.Flash.streamFromParts = function(connection, stream) {
  return connection + '&' + stream;
};

vjs.Flash.streamToParts = function(src) {
  var parts = {
    connection: '',
    stream: ''
  };

  if (! src) {
    return parts;
  }

  // Look for the normal URL separator we expect, '&'.
  // If found, we split the URL into two pieces around the
  // first '&'.
  var connEnd = src.indexOf('&');
  var streamBegin;
  if (connEnd !== -1) {
    streamBegin = connEnd + 1;
  }
  else {
    // If there's not a '&', we use the last '/' as the delimiter.
    connEnd = streamBegin = src.lastIndexOf('/') + 1;
    if (connEnd === 0) {
      // really, there's not a '/'?
      connEnd = streamBegin = src.length;
    }
  }
  parts.connection = src.substring(0, connEnd);
  parts.stream = src.substring(streamBegin, src.length);

  return parts;
};

vjs.Flash.isStreamingType = function(srcType) {
  return srcType in vjs.Flash.streamingFormats;
};

// RTMP has four variations, any string starting
// with one of these protocols should be valid
vjs.Flash.RTMP_RE = /^rtmp[set]?:\/\//i;

vjs.Flash.isStreamingSrc = function(src) {
  return vjs.Flash.RTMP_RE.test(src);
};
/**
 * The Media Loader is the component that decides which playback technology to load
 * when the player is initialized.
 *
 * @constructor
 */
vjs.MediaLoader = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // If there are no sources when the player is initialized,
    // load the first supported playback technology.
    if (!player.options_['sources'] || player.options_['sources'].length === 0) {
      for (var i=0,j=player.options_['techOrder']; i<j.length; i++) {
        var techName = vjs.capitalize(j[i]),
            tech = window['videojs'][techName];

        // Check if the browser supports this technology
        if (tech && tech.isSupported()) {
          player.loadTech(techName);
          break;
        }
      }
    } else {
      // // Loop through playback technologies (HTML5, Flash) and check for support.
      // // Then load the best source.
      // // A few assumptions here:
      // //   All playback technologies respect preload false.
      player.src(player.options_['sources']);
    }
  }
});
/**
 * @fileoverview Text Tracks
 * Text tracks are tracks of timed text events.
 * Captions - text displayed over the video for the hearing impared
 * Subtitles - text displayed over the video for those who don't understand langauge in the video
 * Chapters - text displayed in a menu allowing the user to jump to particular points (chapters) in the video
 * Descriptions (not supported yet) - audio descriptions that are read back to the user by a screen reading device
 */

// Player Additions - Functions add to the player object for easier access to tracks

/**
 * List of associated text tracks
 * @type {Array}
 * @private
 */
vjs.Player.prototype.textTracks_;

/**
 * Get an array of associated text tracks. captions, subtitles, chapters, descriptions
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-texttracks
 * @return {Array}           Array of track objects
 * @private
 */
vjs.Player.prototype.textTracks = function(){
  this.textTracks_ = this.textTracks_ || [];
  return this.textTracks_;
};

/**
 * Add a text track
 * In addition to the W3C settings we allow adding additional info through options.
 * http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-media-addtexttrack
 * @param {String}  kind        Captions, subtitles, chapters, descriptions, or metadata
 * @param {String=} label       Optional label
 * @param {String=} language    Optional language
 * @param {Object=} options     Additional track options, like src
 * @private
 */
vjs.Player.prototype.addTextTrack = function(kind, label, language, options){
  var tracks = this.textTracks_ = this.textTracks_ || [];
  options = options || {};

  options['kind'] = kind;
  options['label'] = label;
  options['language'] = language;

  // HTML5 Spec says default to subtitles.
  // Uppercase first letter to match class names
  var Kind = vjs.capitalize(kind || 'subtitles');

  // Create correct texttrack class. CaptionsTrack, etc.
  var track = new window['videojs'][Kind + 'Track'](this, options);

  tracks.push(track);

  // If track.dflt() is set, start showing immediately
  // TODO: Add a process to deterime the best track to show for the specific kind
  // Incase there are mulitple defaulted tracks of the same kind
  // Or the user has a set preference of a specific language that should override the default
  // Note: The setTimeout is a workaround because with the html5 tech, the player is 'ready'
 //  before it's child components (including the textTrackDisplay) have finished loading.
  if (track.dflt()) {
    this.ready(function(){
      setTimeout(function(){
        track.player().showTextTrack(track.id());
      }, 0);
    });
  }

  return track;
};

/**
 * Add an array of text tracks. captions, subtitles, chapters, descriptions
 * Track objects will be stored in the player.textTracks() array
 * @param {Array} trackList Array of track elements or objects (fake track elements)
 * @private
 */
vjs.Player.prototype.addTextTracks = function(trackList){
  var trackObj;

  for (var i = 0; i < trackList.length; i++) {
    trackObj = trackList[i];
    this.addTextTrack(trackObj['kind'], trackObj['label'], trackObj['language'], trackObj);
  }

  return this;
};

// Show a text track
// disableSameKind: disable all other tracks of the same kind. Value should be a track kind (captions, etc.)
vjs.Player.prototype.showTextTrack = function(id, disableSameKind){
  var tracks = this.textTracks_,
      i = 0,
      j = tracks.length,
      track, showTrack, kind;

  // Find Track with same ID
  for (;i<j;i++) {
    track = tracks[i];
    if (track.id() === id) {
      track.show();
      showTrack = track;

    // Disable tracks of the same kind
    } else if (disableSameKind && track.kind() == disableSameKind && track.mode() > 0) {
      track.disable();
    }
  }

  // Get track kind from shown track or disableSameKind
  kind = (showTrack) ? showTrack.kind() : ((disableSameKind) ? disableSameKind : false);

  // Trigger trackchange event, captionstrackchange, subtitlestrackchange, etc.
  if (kind) {
    this.trigger(kind+'trackchange');
  }

  return this;
};

/**
 * The base class for all text tracks
 *
 * Handles the parsing, hiding, and showing of text track cues
 *
 * @param {vjs.Player|Object} player
 * @param {Object=} options
 * @constructor
 */
vjs.TextTrack = vjs.Component.extend({
  /** @constructor */
  init: function(player, options){
    vjs.Component.call(this, player, options);

    // Apply track info to track object
    // Options will often be a track element

    // Build ID if one doesn't exist
    this.id_ = options['id'] || ('vjs_' + options['kind'] + '_' + options['language'] + '_' + vjs.guid++);
    this.src_ = options['src'];
    // 'default' is a reserved keyword in js so we use an abbreviated version
    this.dflt_ = options['default'] || options['dflt'];
    this.title_ = options['title'];
    this.language_ = options['srclang'];
    this.label_ = options['label'];
    this.cues_ = [];
    this.activeCues_ = [];
    this.readyState_ = 0;
    this.mode_ = 0;

    this.player_.on('fullscreenchange', vjs.bind(this, this.adjustFontSize));
  }
});

/**
 * Track kind value. Captions, subtitles, etc.
 * @private
 */
vjs.TextTrack.prototype.kind_;

/**
 * Get the track kind value
 * @return {String}
 */
vjs.TextTrack.prototype.kind = function(){
  return this.kind_;
};

/**
 * Track src value
 * @private
 */
vjs.TextTrack.prototype.src_;

/**
 * Get the track src value
 * @return {String}
 */
vjs.TextTrack.prototype.src = function(){
  return this.src_;
};

/**
 * Track default value
 * If default is used, subtitles/captions to start showing
 * @private
 */
vjs.TextTrack.prototype.dflt_;

/**
 * Get the track default value. ('default' is a reserved keyword)
 * @return {Boolean}
 */
vjs.TextTrack.prototype.dflt = function(){
  return this.dflt_;
};

/**
 * Track title value
 * @private
 */
vjs.TextTrack.prototype.title_;

/**
 * Get the track title value
 * @return {String}
 */
vjs.TextTrack.prototype.title = function(){
  return this.title_;
};

/**
 * Language - two letter string to represent track language, e.g. 'en' for English
 * Spec def: readonly attribute DOMString language;
 * @private
 */
vjs.TextTrack.prototype.language_;

/**
 * Get the track language value
 * @return {String}
 */
vjs.TextTrack.prototype.language = function(){
  return this.language_;
};

/**
 * Track label e.g. 'English'
 * Spec def: readonly attribute DOMString label;
 * @private
 */
vjs.TextTrack.prototype.label_;

/**
 * Get the track label value
 * @return {String}
 */
vjs.TextTrack.prototype.label = function(){
  return this.label_;
};

/**
 * All cues of the track. Cues have a startTime, endTime, text, and other properties.
 * Spec def: readonly attribute TextTrackCueList cues;
 * @private
 */
vjs.TextTrack.prototype.cues_;

/**
 * Get the track cues
 * @return {Array}
 */
vjs.TextTrack.prototype.cues = function(){
  return this.cues_;
};

/**
 * ActiveCues is all cues that are currently showing
 * Spec def: readonly attribute TextTrackCueList activeCues;
 * @private
 */
vjs.TextTrack.prototype.activeCues_;

/**
 * Get the track active cues
 * @return {Array}
 */
vjs.TextTrack.prototype.activeCues = function(){
  return this.activeCues_;
};

/**
 * ReadyState describes if the text file has been loaded
 * const unsigned short NONE = 0;
 * const unsigned short LOADING = 1;
 * const unsigned short LOADED = 2;
 * const unsigned short ERROR = 3;
 * readonly attribute unsigned short readyState;
 * @private
 */
vjs.TextTrack.prototype.readyState_;

/**
 * Get the track readyState
 * @return {Number}
 */
vjs.TextTrack.prototype.readyState = function(){
  return this.readyState_;
};

/**
 * Mode describes if the track is showing, hidden, or disabled
 * const unsigned short OFF = 0;
 * const unsigned short HIDDEN = 1; (still triggering cuechange events, but not visible)
 * const unsigned short SHOWING = 2;
 * attribute unsigned short mode;
 * @private
 */
vjs.TextTrack.prototype.mode_;

/**
 * Get the track mode
 * @return {Number}
 */
vjs.TextTrack.prototype.mode = function(){
  return this.mode_;
};

/**
 * Change the font size of the text track to make it larger when playing in fullscreen mode
 * and restore it to its normal size when not in fullscreen mode.
 */
vjs.TextTrack.prototype.adjustFontSize = function(){
    if (this.player_.isFullscreen()) {
        // Scale the font by the same factor as increasing the video width to the full screen window width.
        // Additionally, multiply that factor by 1.4, which is the default font size for
        // the caption track (from the CSS)
        this.el_.style.fontSize = screen.width / this.player_.width() * 1.4 * 100 + '%';
    } else {
        // Change the font size of the text track back to its original non-fullscreen size
        this.el_.style.fontSize = '';
    }
};

/**
 * Create basic div to hold cue text
 * @return {Element}
 */
vjs.TextTrack.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-' + this.kind_ + ' vjs-text-track'
  });
};

/**
 * Show: Mode Showing (2)
 * Indicates that the text track is active. If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.
 * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.
 * In addition, for text tracks whose kind is subtitles or captions, the cues are being displayed over the video as appropriate;
 * for text tracks whose kind is descriptions, the user agent is making the cues available to the user in a non-visual fashion;
 * and for text tracks whose kind is chapters, the user agent is making available to the user a mechanism by which the user can navigate to any point in the media resource by selecting a cue.
 * The showing by default state is used in conjunction with the default attribute on track elements to indicate that the text track was enabled due to that attribute.
 * This allows the user agent to override the state if a later track is discovered that is more appropriate per the user's preferences.
 */
vjs.TextTrack.prototype.show = function(){
  this.activate();

  this.mode_ = 2;

  // Show element.
  vjs.Component.prototype.show.call(this);
};

/**
 * Hide: Mode Hidden (1)
 * Indicates that the text track is active, but that the user agent is not actively displaying the cues.
 * If no attempt has yet been made to obtain the track's cues, the user agent will perform such an attempt momentarily.
 * The user agent is maintaining a list of which cues are active, and events are being fired accordingly.
 */
vjs.TextTrack.prototype.hide = function(){
  // When hidden, cues are still triggered. Disable to stop triggering.
  this.activate();

  this.mode_ = 1;

  // Hide element.
  vjs.Component.prototype.hide.call(this);
};

/**
 * Disable: Mode Off/Disable (0)
 * Indicates that the text track is not active. Other than for the purposes of exposing the track in the DOM, the user agent is ignoring the text track.
 * No cues are active, no events are fired, and the user agent will not attempt to obtain the track's cues.
 */
vjs.TextTrack.prototype.disable = function(){
  // If showing, hide.
  if (this.mode_ == 2) { this.hide(); }

  // Stop triggering cues
  this.deactivate();

  // Switch Mode to Off
  this.mode_ = 0;
};

/**
 * Turn on cue tracking. Tracks that are showing OR hidden are active.
 */
vjs.TextTrack.prototype.activate = function(){
  // Load text file if it hasn't been yet.
  if (this.readyState_ === 0) { this.load(); }

  // Only activate if not already active.
  if (this.mode_ === 0) {
    // Update current cue on timeupdate
    // Using unique ID for bind function so other tracks don't remove listener
    this.player_.on('timeupdate', vjs.bind(this, this.update, this.id_));

    // Reset cue time on media end
    this.player_.on('ended', vjs.bind(this, this.reset, this.id_));

    // Add to display
    if (this.kind_ === 'captions' || this.kind_ === 'subtitles') {
      this.player_.getChild('textTrackDisplay').addChild(this);
    }
  }
};

/**
 * Turn off cue tracking.
 */
vjs.TextTrack.prototype.deactivate = function(){
  // Using unique ID for bind function so other tracks don't remove listener
  this.player_.off('timeupdate', vjs.bind(this, this.update, this.id_));
  this.player_.off('ended', vjs.bind(this, this.reset, this.id_));
  this.reset(); // Reset

  // Remove from display
  this.player_.getChild('textTrackDisplay').removeChild(this);
};

// A readiness state
// One of the following:
//
// Not loaded
// Indicates that the text track is known to exist (e.g. it has been declared with a track element), but its cues have not been obtained.
//
// Loading
// Indicates that the text track is loading and there have been no fatal errors encountered so far. Further cues might still be added to the track.
//
// Loaded
// Indicates that the text track has been loaded with no fatal errors. No new cues will be added to the track except if the text track corresponds to a MutableTextTrack object.
//
// Failed to load
// Indicates that the text track was enabled, but when the user agent attempted to obtain it, this failed in some way (e.g. URL could not be resolved, network error, unknown text track format). Some or all of the cues are likely missing and will not be obtained.
vjs.TextTrack.prototype.load = function(){

  // Only load if not loaded yet.
  if (this.readyState_ === 0) {
    this.readyState_ = 1;
    vjs.get(this.src_, vjs.bind(this, this.parseCues), vjs.bind(this, this.onError));
  }

};

vjs.TextTrack.prototype.onError = function(err){
  this.error = err;
  this.readyState_ = 3;
  this.trigger('error');
};

// Parse the WebVTT text format for cue times.
// TODO: Separate parser into own class so alternative timed text formats can be used. (TTML, DFXP)
vjs.TextTrack.prototype.parseCues = function(srcContent) {
  var cue, time, text,
      lines = srcContent.split('\n'),
      line = '', id;

  for (var i=1, j=lines.length; i<j; i++) {
    // Line 0 should be 'WEBVTT', so skipping i=0

    line = vjs.trim(lines[i]); // Trim whitespace and linebreaks

    if (line) { // Loop until a line with content

      // First line could be an optional cue ID
      // Check if line has the time separator
      if (line.indexOf('-->') == -1) {
        id = line;
        // Advance to next line for timing.
        line = vjs.trim(lines[++i]);
      } else {
        id = this.cues_.length;
      }

      // First line - Number
      cue = {
        id: id, // Cue Number
        index: this.cues_.length // Position in Array
      };

      // Timing line
      time = line.split(/[\t ]+/);
      cue.startTime = this.parseCueTime(time[0]);
      cue.endTime = this.parseCueTime(time[2]);

      // Additional lines - Cue Text
      text = [];

      // Loop until a blank line or end of lines
      // Assumeing trim('') returns false for blank lines
      while (lines[++i] && (line = vjs.trim(lines[i]))) {
        text.push(line);
      }

      cue.text = text.join('<br/>');

      // Add this cue
      this.cues_.push(cue);
    }
  }

  this.readyState_ = 2;
  this.trigger('loaded');
};


vjs.TextTrack.prototype.parseCueTime = function(timeText) {
  var parts = timeText.split(':'),
      time = 0,
      hours, minutes, other, seconds, ms;

  // Check if optional hours place is included
  // 00:00:00.000 vs. 00:00.000
  if (parts.length == 3) {
    hours = parts[0];
    minutes = parts[1];
    other = parts[2];
  } else {
    hours = 0;
    minutes = parts[0];
    other = parts[1];
  }

  // Break other (seconds, milliseconds, and flags) by spaces
  // TODO: Make additional cue layout settings work with flags
  other = other.split(/\s+/);
  // Remove seconds. Seconds is the first part before any spaces.
  seconds = other.splice(0,1)[0];
  // Could use either . or , for decimal
  seconds = seconds.split(/\.|,/);
  // Get milliseconds
  ms = parseFloat(seconds[1]);
  seconds = seconds[0];

  // hours => seconds
  time += parseFloat(hours) * 3600;
  // minutes => seconds
  time += parseFloat(minutes) * 60;
  // Add seconds
  time += parseFloat(seconds);
  // Add milliseconds
  if (ms) { time += ms/1000; }

  return time;
};

// Update active cues whenever timeupdate events are triggered on the player.
vjs.TextTrack.prototype.update = function(){
  if (this.cues_.length > 0) {

    // Get current player time, adjust for track offset
    var offset = this.player_.options()['trackTimeOffset'] || 0;
    var time = this.player_.currentTime() + offset;

    // Check if the new time is outside the time box created by the the last update.
    if (this.prevChange === undefined || time < this.prevChange || this.nextChange <= time) {
      var cues = this.cues_,

          // Create a new time box for this state.
          newNextChange = this.player_.duration(), // Start at beginning of the timeline
          newPrevChange = 0, // Start at end

          reverse = false, // Set the direction of the loop through the cues. Optimized the cue check.
          newCues = [], // Store new active cues.

          // Store where in the loop the current active cues are, to provide a smart starting point for the next loop.
          firstActiveIndex, lastActiveIndex,
          cue, i; // Loop vars

      // Check if time is going forwards or backwards (scrubbing/rewinding)
      // If we know the direction we can optimize the starting position and direction of the loop through the cues array.
      if (time >= this.nextChange || this.nextChange === undefined) { // NextChange should happen
        // Forwards, so start at the index of the first active cue and loop forward
        i = (this.firstActiveIndex !== undefined) ? this.firstActiveIndex : 0;
      } else {
        // Backwards, so start at the index of the last active cue and loop backward
        reverse = true;
        i = (this.lastActiveIndex !== undefined) ? this.lastActiveIndex : cues.length - 1;
      }

      while (true) { // Loop until broken
        cue = cues[i];

        // Cue ended at this point
        if (cue.endTime <= time) {
          newPrevChange = Math.max(newPrevChange, cue.endTime);

          if (cue.active) {
            cue.active = false;
          }

          // No earlier cues should have an active start time.
          // Nevermind. Assume first cue could have a duration the same as the video.
          // In that case we need to loop all the way back to the beginning.
          // if (reverse && cue.startTime) { break; }

        // Cue hasn't started
        } else if (time < cue.startTime) {
          newNextChange = Math.min(newNextChange, cue.startTime);

          if (cue.active) {
            cue.active = false;
          }

          // No later cues should have an active start time.
          if (!reverse) { break; }

        // Cue is current
        } else {

          if (reverse) {
            // Add cue to front of array to keep in time order
            newCues.splice(0,0,cue);

            // If in reverse, the first current cue is our lastActiveCue
            if (lastActiveIndex === undefined) { lastActiveIndex = i; }
            firstActiveIndex = i;
          } else {
            // Add cue to end of array
            newCues.push(cue);

            // If forward, the first current cue is our firstActiveIndex
            if (firstActiveIndex === undefined) { firstActiveIndex = i; }
            lastActiveIndex = i;
          }

          newNextChange = Math.min(newNextChange, cue.endTime);
          newPrevChange = Math.max(newPrevChange, cue.startTime);

          cue.active = true;
        }

        if (reverse) {
          // Reverse down the array of cues, break if at first
          if (i === 0) { break; } else { i--; }
        } else {
          // Walk up the array fo cues, break if at last
          if (i === cues.length - 1) { break; } else { i++; }
        }

      }

      this.activeCues_ = newCues;
      this.nextChange = newNextChange;
      this.prevChange = newPrevChange;
      this.firstActiveIndex = firstActiveIndex;
      this.lastActiveIndex = lastActiveIndex;

      this.updateDisplay();

      this.trigger('cuechange');
    }
  }
};

// Add cue HTML to display
vjs.TextTrack.prototype.updateDisplay = function(){
  var cues = this.activeCues_,
      html = '',
      i=0,j=cues.length;

  for (;i<j;i++) {
    html += '<span class="vjs-tt-cue">'+cues[i].text+'</span>';
  }

  this.el_.innerHTML = html;
};

// Set all loop helper values back
vjs.TextTrack.prototype.reset = function(){
  this.nextChange = 0;
  this.prevChange = this.player_.duration();
  this.firstActiveIndex = 0;
  this.lastActiveIndex = 0;
};

// Create specific track types
/**
 * The track component for managing the hiding and showing of captions
 *
 * @constructor
 */
vjs.CaptionsTrack = vjs.TextTrack.extend();
vjs.CaptionsTrack.prototype.kind_ = 'captions';
// Exporting here because Track creation requires the track kind
// to be available on global object. e.g. new window['videojs'][Kind + 'Track']

/**
 * The track component for managing the hiding and showing of subtitles
 *
 * @constructor
 */
vjs.SubtitlesTrack = vjs.TextTrack.extend();
vjs.SubtitlesTrack.prototype.kind_ = 'subtitles';

/**
 * The track component for managing the hiding and showing of chapters
 *
 * @constructor
 */
vjs.ChaptersTrack = vjs.TextTrack.extend();
vjs.ChaptersTrack.prototype.kind_ = 'chapters';


/* Text Track Display
============================================================================= */
// Global container for both subtitle and captions text. Simple div container.

/**
 * The component for displaying text track cues
 *
 * @constructor
 */
vjs.TextTrackDisplay = vjs.Component.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.Component.call(this, player, options, ready);

    // This used to be called during player init, but was causing an error
    // if a track should show by default and the display hadn't loaded yet.
    // Should probably be moved to an external track loader when we support
    // tracks that don't need a display.
    if (player.options_['tracks'] && player.options_['tracks'].length > 0) {
      this.player_.addTextTracks(player.options_['tracks']);
    }
  }
});

vjs.TextTrackDisplay.prototype.createEl = function(){
  return vjs.Component.prototype.createEl.call(this, 'div', {
    className: 'vjs-text-track-display'
  });
};


/**
 * The specific menu item type for selecting a language within a text track kind
 *
 * @constructor
 */
vjs.TextTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'];

    // Modify options for parent MenuItem class's init.
    options['label'] = track.label();
    options['selected'] = track.dflt();
    vjs.MenuItem.call(this, player, options);

    this.player_.on(track.kind() + 'trackchange', vjs.bind(this, this.update));
  }
});

vjs.TextTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.showTextTrack(this.track.id_, this.track.kind());
};

vjs.TextTrackMenuItem.prototype.update = function(){
  this.selected(this.track.mode() == 2);
};

/**
 * A special menu item for turning of a specific type of text track
 *
 * @constructor
 */
vjs.OffTextTrackMenuItem = vjs.TextTrackMenuItem.extend({
  /** @constructor */
  init: function(player, options){
    // Create pseudo track info
    // Requires options['kind']
    options['track'] = {
      kind: function() { return options['kind']; },
      player: player,
      label: function(){ return options['kind'] + ' off'; },
      dflt: function(){ return false; },
      mode: function(){ return false; }
    };
    vjs.TextTrackMenuItem.call(this, player, options);
    this.selected(true);
  }
});

vjs.OffTextTrackMenuItem.prototype.onClick = function(){
  vjs.TextTrackMenuItem.prototype.onClick.call(this);
  this.player_.showTextTrack(this.track.id_, this.track.kind());
};

vjs.OffTextTrackMenuItem.prototype.update = function(){
  var tracks = this.player_.textTracks(),
      i=0, j=tracks.length, track,
      off = true;

  for (;i<j;i++) {
    track = tracks[i];
    if (track.kind() == this.track.kind() && track.mode() == 2) {
      off = false;
    }
  }

  this.selected(off);
};

/**
 * The base class for buttons that toggle specific text track types (e.g. subtitles)
 *
 * @constructor
 */
vjs.TextTrackButton = vjs.MenuButton.extend({
  /** @constructor */
  init: function(player, options){
    vjs.MenuButton.call(this, player, options);

    if (this.items.length <= 1) {
      this.hide();
    }
  }
});

// vjs.TextTrackButton.prototype.buttonPressed = false;

// vjs.TextTrackButton.prototype.createMenu = function(){
//   var menu = new vjs.Menu(this.player_);

//   // Add a title list item to the top
//   // menu.el().appendChild(vjs.createEl('li', {
//   //   className: 'vjs-menu-title',
//   //   innerHTML: vjs.capitalize(this.kind_),
//   //   tabindex: -1
//   // }));

//   this.items = this.createItems();

//   // Add menu items to the menu
//   for (var i = 0; i < this.items.length; i++) {
//     menu.addItem(this.items[i]);
//   }

//   // Add list to element
//   this.addChild(menu);

//   return menu;
// };

// Create a menu item for each text track
vjs.TextTrackButton.prototype.createItems = function(){
  var items = [], track;

  // Add an OFF menu item to turn all tracks off
  items.push(new vjs.OffTextTrackMenuItem(this.player_, { 'kind': this.kind_ }));

  for (var i = 0; i < this.player_.textTracks().length; i++) {
    track = this.player_.textTracks()[i];
    if (track.kind() === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

/**
 * The button component for toggling and selecting captions
 *
 * @constructor
 */
vjs.CaptionsButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Captions Menu');
  }
});
vjs.CaptionsButton.prototype.kind_ = 'captions';
vjs.CaptionsButton.prototype.buttonText = 'Captions';
vjs.CaptionsButton.prototype.className = 'vjs-captions-button';

/**
 * The button component for toggling and selecting subtitles
 *
 * @constructor
 */
vjs.SubtitlesButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Subtitles Menu');
  }
});
vjs.SubtitlesButton.prototype.kind_ = 'subtitles';
vjs.SubtitlesButton.prototype.buttonText = 'Subtitles';
vjs.SubtitlesButton.prototype.className = 'vjs-subtitles-button';

// Chapters act much differently than other text tracks
// Cues are navigation vs. other tracks of alternative languages
/**
 * The button component for toggling and selecting chapters
 *
 * @constructor
 */
vjs.ChaptersButton = vjs.TextTrackButton.extend({
  /** @constructor */
  init: function(player, options, ready){
    vjs.TextTrackButton.call(this, player, options, ready);
    this.el_.setAttribute('aria-label','Chapters Menu');
  }
});
vjs.ChaptersButton.prototype.kind_ = 'chapters';
vjs.ChaptersButton.prototype.buttonText = 'Chapters';
vjs.ChaptersButton.prototype.className = 'vjs-chapters-button';

// Create a menu item for each text track
vjs.ChaptersButton.prototype.createItems = function(){
  var items = [], track;

  for (var i = 0; i < this.player_.textTracks().length; i++) {
    track = this.player_.textTracks()[i];
    if (track.kind() === this.kind_) {
      items.push(new vjs.TextTrackMenuItem(this.player_, {
        'track': track
      }));
    }
  }

  return items;
};

vjs.ChaptersButton.prototype.createMenu = function(){
  var tracks = this.player_.textTracks(),
      i = 0,
      j = tracks.length,
      track, chaptersTrack,
      items = this.items = [];

  for (;i<j;i++) {
    track = tracks[i];
    if (track.kind() == this.kind_) {
      if (track.readyState() === 0) {
        track.load();
        track.on('loaded', vjs.bind(this, this.createMenu));
      } else {
        chaptersTrack = track;
        break;
      }
    }
  }

  var menu = this.menu;
  if (menu === undefined) {
    menu = new vjs.Menu(this.player_);
    menu.contentEl().appendChild(vjs.createEl('li', {
      className: 'vjs-menu-title',
      innerHTML: vjs.capitalize(this.kind_),
      tabindex: -1
    }));
  }

  if (chaptersTrack) {
    var cues = chaptersTrack.cues_, cue, mi;
    i = 0;
    j = cues.length;

    for (;i<j;i++) {
      cue = cues[i];

      mi = new vjs.ChaptersTrackMenuItem(this.player_, {
        'track': chaptersTrack,
        'cue': cue
      });

      items.push(mi);

      menu.addChild(mi);
    }
    this.addChild(menu);
  }

  if (this.items.length > 0) {
    this.show();
  }

  return menu;
};


/**
 * @constructor
 */
vjs.ChaptersTrackMenuItem = vjs.MenuItem.extend({
  /** @constructor */
  init: function(player, options){
    var track = this.track = options['track'],
        cue = this.cue = options['cue'],
        currentTime = player.currentTime();

    // Modify options for parent MenuItem class's init.
    options['label'] = cue.text;
    options['selected'] = (cue.startTime <= currentTime && currentTime < cue.endTime);
    vjs.MenuItem.call(this, player, options);

    track.on('cuechange', vjs.bind(this, this.update));
  }
});

vjs.ChaptersTrackMenuItem.prototype.onClick = function(){
  vjs.MenuItem.prototype.onClick.call(this);
  this.player_.currentTime(this.cue.startTime);
  this.update(this.cue.startTime);
};

vjs.ChaptersTrackMenuItem.prototype.update = function(){
  var cue = this.cue,
      currentTime = this.player_.currentTime();

  // vjs.log(currentTime, cue.startTime);
  this.selected(cue.startTime <= currentTime && currentTime < cue.endTime);
};

// Add Buttons to controlBar
vjs.obj.merge(vjs.ControlBar.prototype.options_['children'], {
  'subtitlesButton': {},
  'captionsButton': {},
  'chaptersButton': {}
});

// vjs.Cue = vjs.Component.extend({
//   /** @constructor */
//   init: function(player, options){
//     vjs.Component.call(this, player, options);
//   }
// });
/**
 * @fileoverview Add JSON support
 * @suppress {undefinedVars}
 * (Compiler doesn't like JSON not being declared)
 */

/**
 * Javascript JSON implementation
 * (Parse Method Only)
 * https://github.com/douglascrockford/JSON-js/blob/master/json2.js
 * Only using for parse method when parsing data-setup attribute JSON.
 * @suppress {undefinedVars}
 * @namespace
 * @private
 */
vjs.JSON;

if (typeof window.JSON !== 'undefined' && window.JSON.parse === 'function') {
  vjs.JSON = window.JSON;

} else {
  vjs.JSON = {};

  var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;

  /**
   * parse the json
   *
   * @memberof vjs.JSON
   * @param {String} text The JSON string to parse
   * @param {Function=} [reviver] Optional function that can transform the results
   * @return {Object|Array} The parsed JSON
   */
  vjs.JSON.parse = function (text, reviver) {
      var j;

      function walk(holder, key) {
          var k, v, value = holder[key];
          if (value && typeof value === 'object') {
              for (k in value) {
                  if (Object.prototype.hasOwnProperty.call(value, k)) {
                      v = walk(value, k);
                      if (v !== undefined) {
                          value[k] = v;
                      } else {
                          delete value[k];
                      }
                  }
              }
          }
          return reviver.call(holder, key, value);
      }
      text = String(text);
      cx.lastIndex = 0;
      if (cx.test(text)) {
          text = text.replace(cx, function (a) {
              return '\\u' +
                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);
          });
      }

      if (/^[\],:{}\s]*$/
              .test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                  .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                  .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {

          j = eval('(' + text + ')');

          return typeof reviver === 'function' ?
              walk({'': j}, '') : j;
      }

      throw new SyntaxError('JSON.parse(): invalid or malformed JSON data');
  };
}
/**
 * @fileoverview Functions for automatically setting up a player
 * based on the data-setup attribute of the video tag
 */

// Automatically set up any tags that have a data-setup attribute
vjs.autoSetup = function(){
  var options, vid, player,
      vids = document.getElementsByTagName('video');

  // Check if any media elements exist
  if (vids && vids.length > 0) {

    for (var i=0,j=vids.length; i<j; i++) {
      vid = vids[i];

      // Check if element exists, has getAttribute func.
      // IE seems to consider typeof el.getAttribute == 'object' instead of 'function' like expected, at least when loading the player immediately.
      if (vid && vid.getAttribute) {

        // Make sure this player hasn't already been set up.
        if (vid['player'] === undefined) {
          options = vid.getAttribute('data-setup');

          // Check if data-setup attr exists.
          // We only auto-setup if they've added the data-setup attr.
          if (options !== null) {

            // Parse options JSON
            // If empty string, make it a parsable json object.
            options = vjs.JSON.parse(options || '{}');

            // Create new video.js instance.
            player = videojs(vid, options);
          }
        }

      // If getAttribute isn't defined, we need to wait for the DOM.
      } else {
        vjs.autoSetupTimeout(1);
        break;
      }
    }

  // No videos were found, so keep looping unless page is finished loading.
  } else if (!vjs.windowLoaded) {
    vjs.autoSetupTimeout(1);
  }
};

// Pause to let the DOM keep processing
vjs.autoSetupTimeout = function(wait){
  setTimeout(vjs.autoSetup, wait);
};

if (document.readyState === 'complete') {
  vjs.windowLoaded = true;
} else {
  vjs.one(window, 'load', function(){
    vjs.windowLoaded = true;
  });
}

// Run Auto-load players
// You have to wait at least once in case this script is loaded after your video in the DOM (weird behavior only with minified version)
vjs.autoSetupTimeout(1);
/**
 * the method for registering a video.js plugin
 *
 * @param  {String} name The name of the plugin
 * @param  {Function} init The function that is run when the player inits
 */
vjs.plugin = function(name, init){
  vjs.Player.prototype[name] = init;
};

jQuery(document).ready(function($) {

    var timelapseMonthPrevious;
    var timelapseMonthNext;
    var timelapseYearPrevious;
    var timelapseYearNext;
    var rightnow = moment();

    // Timelapse video Calendar
    function getCalendar(year, month) {
        $('#timelapse-calendar').hide();
        $('#timelapse-loader').show();

        $.post('/api/get-timelapse-calendar-dates', {year: year, month: month}, function(data) {
            $('#timelapse-loader').hide();
            $('#timelapse-calendar').html(data.data).fadeIn(250);

            // Video player
            $('.timelapse-start-video').click(function() {
                var target = $(this).attr('rel');
                var path = 'http://video.revyweather.com/';
                var videoPlayer = videojs('timelapse-video');
                var dates = target.split('/');

                $('#timelapse-video-title').html(dates[1] + ' ' + dates[2] + ', ' + dates[0]);

                videoPlayer.ready(function() {
                    var timelapsePlayer = this;

                    timelapsePlayer.pause();
                    $('video').attr('src', path + target + '.mp4');
                    $('video source:nth-child(1)').attr('src', path + target + '.mp4');
                    $('video source:nth-child(2)').attr('src', path + target + '.webm');
                    $('.vjs-big-play-button').show();
                    $('#timelapse-video').removeClass('vjs-playing').addClass('vjs-pause');
                    timelapsePlayer.load();
                    $('#timelapse-video_html5_api').show();
                    timelapsePlayer.on('play', function() {
                        $('.vjs-big-play-button').hide();
                    });
                });
            });
        });

        timelapseYearPrevious = parseInt(year, 10);
        timelapseYearNext = parseInt(year, 10);

        // set values on buttons
        if (parseInt(month, 10) - 1 == 0) {
            timelapseMonthPrevious = 12;
        } else {
            timelapseMonthPrevious = parseInt(month, 10) - 1;
        }

        if (parseInt(month, 10) + 1 == 13) {
            timelapseMonthNext = 1;
        } else {
            timelapseMonthNext = parseInt(month, 10) + 1;
        }

        if (parseInt(month, 10) == 1) {
            timelapseYearPrevious = parseInt(year, 10) - 1;
        }

        if (parseInt(month, 10) == 12) {
            timelapseYearNext = parseInt(year, 10) + 1;
        }

        // set the button values
        $('#timelapse-previous').val(timelapseMonthPrevious);
        $('#timelapse-next').val(timelapseMonthNext);
        $('#timelapse-year-previous').val(timelapseYearPrevious);
        $('#timelapse-year-next').val(timelapseYearNext);

        // set date range
        if (month == rightnow.format('M') && parseInt(year, 10) == 2014) {
            $('#timelapse-next').addClass('disabled');
        } else {
            $('#timelapse-next').removeClass('disabled');
        }

        // no videos before August 2013
        if (parseInt(month, 10) == 8 && parseInt(year, 10) == 2013) {
            $('#timelapse-previous').addClass('disabled');
        } else {
            $('#timelapse-previous').removeClass('disabled');
        }

    }


    getCalendar(parseInt(rightnow.format('YYYY'), 10), parseInt(rightnow.format('MM'), 10));

    // listen to months buttons
    $('#timelapse-previous').click(function() {
        getCalendar($('#timelapse-year-previous').val(), $('#timelapse-previous').val());
    });

    $('#timelapse-next').click(function() {
        getCalendar($('#timelapse-year-next').val(), $('#timelapse-next').val());
    });
});
$(function() {

    var chart;

    Highcharts.setOptions({
        global: {
            useUTC: false
        }
    });

    if ($('#history-chart').length) {
        var options = {
            chart: {
                renderTo:           'history-chart',
                backgroundColor:    '#eeeeee',
                zoomType:           'x'
            },

            title: {
                text:               'Courthouse Weather History'
            },

            xAxis: {
                type:               'datetime',
                dateTimeLabelFormat: { hour: '%m %d %H:%M'},
                tickPixelInterval:  150,
                minRange:           1
            },

            yAxis: [{
                gridLineWidth: 1,
                labels: {
                    style: {
                        color: '#B26969'
                    },
                    format: '{value} °C'
                },
                title: {
                    text: 'Air Temp',
                    style: {
                        color: '#B26969'
                    }
                }
            }, {
                gridLineWidth: 0,
                labels: {
                    style: {
                        color: '#3B54FF'
                    },
                    format: '{value} kPa'
                },
                title: {
                    text: 'Barometer',
                    style: {
                        color: '#3B54FF'
                    }
                },
                opposite: false
            }, {
                gridLineWidth: 0,
                labels: {
                    style: {
                        color: '#88E8A9'
                    },
                    format: '{value} %'
                },
                title: {
                    text: 'Relative Humidity',
                    style: {
                        color: '#88E8A9'
                    }
                },
                opposite: true
            }, {
                gridLineWidth: 0,
                labels: {
                    style: {
                        color: '#999999'
                    },
                    format: '{value} km/h'
                },
                title: {
                    text: 'Wind Speed',
                    style: {
                        color: '#999999'
                    }
                },
                opposite: true
            }],

            legend: {
                layout:             'vertical',
                align:              'left',
                verticalAlign:      'top',
                x:                  180,
                y:                  2,
                borderWidth:        1,
                floating:           true,
                backgroundColor:    '#E6E6E6',
                borderColor:        '#DDDDDD',
                borderRadius:       0
            },

            credits: {
                href:   '',
                text:   ''
            },

            plotOptions: {
                column: {
                    pointPadding: 0.2,
                    borderWidth: 0
                }
            },

            series: []
        };

        // get the last week data
        var lastWeek = moment().subtract(6, 'days');
        var rightNow = moment();

        // initial load of data for high charts
        $.ajax({
            url: '/api/history/' + lastWeek.format('YYYY-MM-DD HH:mm:ss') + '/' + rightNow.format('YYYY-MM-DD HH:mm:ss'),
            dataType: 'json',
            type: 'GET'
        }).success(function(data) {
            options.series = data;
            var chart = new Highcharts.Chart(options);
        });



        // setup the date picker
        $('#history-dates').daterangepicker({
                format: 'YYYY-MM-DD',
                minDate: '2013-08-25 02:00:00',
                maxDate: moment(),
                timePicker: true,
                ranges: {
                    'Last 24 hours:': [moment().subtract(1, 'days'), moment()],
                    'Last 7 days:': [moment().subtract(6, 'days'), moment()],
                    'Last 30 days:': [moment().subtract(29, 'days'), moment()]
                },
                startDate: '2013-08-25 01:00:00',
                endDate: moment()
            },
            function(start, end) {
                //console.log(start.format('YYYY-MM-DD HH:mm:ss') + ' to ' + end.format('YYYY-MM-DD HH:mm:ss'));
                $.ajax({
                    url: '/api/history/' + start.format('YYYY-MM-DD HH:mm:ss') + '/' + end.format('YYYY-MM-DD HH:mm:ss'),
                    dataType: 'json',
                    type: 'GET'
                }).success(function(data) {
                    //console.log(data);
                    options.series = data;
                    var chart = new Highcharts.Chart(options);
                });
            }

        );
    }

});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5taW4uanMiLCJqcXVlcnkubW91c2V3aGVlbC0zLjAuNi5wYWNrLmpzIiwiYm9vdHN0cmFwLm1pbi5qcyIsImpxdWVyeS5mYW5jeWJveC5wYWNrLmpzIiwiYW5ndWxhci5taW4uanMiLCJ1aS1ib290c3RyYXAtdHBscy0wLjExLjAubWluLmpzIiwiYW5ndWxhci5za3ljb25zLmpzIiwic2t5Y29ucy5qcyIsInJhcGhhZWwuMi4xLjAubWluLmpzIiwianVzdGdhZ2UuMS4wLjEuanMiLCJtb21lbnQubWluLmpzIiwiZGF0ZXJhbmdlcGlja2VyLmpzIiwiaGlnaGNoYXJ0cy5qcyIsImluZGV4LmpzIiwidmlkZW8uZGV2LmpzIiwidGltZWxhcHNlLmpzIiwiaGlzdG9yeS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDMXRCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUM5bENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3BUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDN01BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvaVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3JHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBqUXVlcnkgdjIuMS4xIHwgKGMpIDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gfCBqcXVlcnkub3JnL2xpY2Vuc2UgKi9cbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPVwiMi4xLjFcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpPj0wfSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKGEpe3JldHVyblwib2JqZWN0XCIhPT1uLnR5cGUoYSl8fGEubm9kZVR5cGV8fG4uaXNXaW5kb3coYSk/ITE6YS5jb25zdHJ1Y3RvciYmIWouY2FsbChhLmNvbnN0cnVjdG9yLnByb3RvdHlwZSxcImlzUHJvdG90eXBlT2ZcIik/ITE6ITB9LGlzRW1wdHlPYmplY3Q6ZnVuY3Rpb24oYSl7dmFyIGI7Zm9yKGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hMH0sdHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT9hK1wiXCI6XCJvYmplY3RcIj09dHlwZW9mIGF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/aFtpLmNhbGwoYSldfHxcIm9iamVjdFwiOnR5cGVvZiBhfSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGM9ZXZhbDthPW4udHJpbShhKSxhJiYoMT09PWEuaW5kZXhPZihcInVzZSBzdHJpY3RcIik/KGI9bC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpLGIudGV4dD1hLGwuaGVhZC5hcHBlbmRDaGlsZChiKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpKTpjKGEpKX0sY2FtZWxDYXNlOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UocCxcIm1zLVwiKS5yZXBsYWNlKHEscil9LG5vZGVOYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWIudG9Mb3dlckNhc2UoKX0sZWFjaDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT0wLGY9YS5sZW5ndGgsZz1zKGEpO2lmKGMpe2lmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuYXBwbHkoYVtlXSxjKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGlmKGcpe2Zvcig7Zj5lO2UrKylpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrfWVsc2UgZm9yKGUgaW4gYSlpZihkPWIuY2FsbChhW2VdLGUsYVtlXSksZD09PSExKWJyZWFrO3JldHVybiBhfSx0cmltOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP1wiXCI6KGErXCJcIikucmVwbGFjZShvLFwiXCIpfSxtYWtlQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1ifHxbXTtyZXR1cm4gbnVsbCE9YSYmKHMoT2JqZWN0KGEpKT9uLm1lcmdlKGMsXCJzdHJpbmdcIj09dHlwZW9mIGE/W2FdOmEpOmYuY2FsbChjLGEpKSxjfSxpbkFycmF5OmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbnVsbD09Yj8tMTpnLmNhbGwoYixhLGMpfSxtZXJnZTpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0rYi5sZW5ndGgsZD0wLGU9YS5sZW5ndGg7Yz5kO2QrKylhW2UrK109YltkXTtyZXR1cm4gYS5sZW5ndGg9ZSxhfSxncmVwOmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQsZT1bXSxmPTAsZz1hLmxlbmd0aCxoPSFjO2c+ZjtmKyspZD0hYihhW2ZdLGYpLGQhPT1oJiZlLnB1c2goYVtmXSk7cmV0dXJuIGV9LG1hcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZj0wLGc9YS5sZW5ndGgsaD1zKGEpLGk9W107aWYoaClmb3IoO2c+ZjtmKyspZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7ZWxzZSBmb3IoZiBpbiBhKWQ9YihhW2ZdLGYsYyksbnVsbCE9ZCYmaS5wdXNoKGQpO3JldHVybiBlLmFwcGx5KFtdLGkpfSxndWlkOjEscHJveHk6ZnVuY3Rpb24oYSxiKXt2YXIgYyxlLGY7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGImJihjPWFbYl0sYj1hLGE9Yyksbi5pc0Z1bmN0aW9uKGEpPyhlPWQuY2FsbChhcmd1bWVudHMsMiksZj1mdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGJ8fHRoaXMsZS5jb25jYXQoZC5jYWxsKGFyZ3VtZW50cykpKX0sZi5ndWlkPWEuZ3VpZD1hLmd1aWR8fG4uZ3VpZCsrLGYpOnZvaWQgMH0sbm93OkRhdGUubm93LHN1cHBvcnQ6a30pLG4uZWFjaChcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3JcIi5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSxiKXtoW1wiW29iamVjdCBcIitiK1wiXVwiXT1iLnRvTG93ZXJDYXNlKCl9KTtmdW5jdGlvbiBzKGEpe3ZhciBiPWEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09Y3x8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9XCJzaXp6bGVcIistbmV3IERhdGUsdj1hLmRvY3VtZW50LHc9MCx4PTAseT1nYigpLHo9Z2IoKSxBPWdiKCksQj1mdW5jdGlvbihhLGIpe3JldHVybiBhPT09YiYmKGw9ITApLDB9LEM9XCJ1bmRlZmluZWRcIixEPTE8PDMxLEU9e30uaGFzT3duUHJvcGVydHksRj1bXSxHPUYucG9wLEg9Ri5wdXNoLEk9Ri5wdXNoLEo9Ri5zbGljZSxLPUYuaW5kZXhPZnx8ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz10aGlzLmxlbmd0aDtjPmI7YisrKWlmKHRoaXNbYl09PT1hKXJldHVybiBiO3JldHVybi0xfSxMPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixNPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixOPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTz1OLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxQPVwiXFxcXFtcIitNK1wiKihcIitOK1wiKSg/OlwiK00rXCIqKFsqXiR8IX5dPz0pXCIrTStcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK08rXCIpKXwpXCIrTStcIipcXFxcXVwiLFE9XCI6KFwiK04rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK1ArXCIpKil8LiopXFxcXCl8KVwiLFI9bmV3IFJlZ0V4cChcIl5cIitNK1wiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIitNK1wiKyRcIixcImdcIiksUz1uZXcgUmVnRXhwKFwiXlwiK00rXCIqLFwiK00rXCIqXCIpLFQ9bmV3IFJlZ0V4cChcIl5cIitNK1wiKihbPit+XXxcIitNK1wiKVwiK00rXCIqXCIpLFU9bmV3IFJlZ0V4cChcIj1cIitNK1wiKihbXlxcXFxdJ1xcXCJdKj8pXCIrTStcIipcXFxcXVwiLFwiZ1wiKSxWPW5ldyBSZWdFeHAoUSksVz1uZXcgUmVnRXhwKFwiXlwiK08rXCIkXCIpLFg9e0lEOm5ldyBSZWdFeHAoXCJeIyhcIitOK1wiKVwiKSxDTEFTUzpuZXcgUmVnRXhwKFwiXlxcXFwuKFwiK04rXCIpXCIpLFRBRzpuZXcgUmVnRXhwKFwiXihcIitOLnJlcGxhY2UoXCJ3XCIsXCJ3KlwiKStcIilcIiksQVRUUjpuZXcgUmVnRXhwKFwiXlwiK1ApLFBTRVVETzpuZXcgUmVnRXhwKFwiXlwiK1EpLENISUxEOm5ldyBSZWdFeHAoXCJeOihvbmx5fGZpcnN0fGxhc3R8bnRofG50aC1sYXN0KS0oY2hpbGR8b2YtdHlwZSkoPzpcXFxcKFwiK00rXCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIitNK1wiKig/OihbKy1dfClcIitNK1wiKihcXFxcZCspfCkpXCIrTStcIipcXFxcKXwpXCIsXCJpXCIpLGJvb2w6bmV3IFJlZ0V4cChcIl4oPzpcIitMK1wiKSRcIixcImlcIiksbmVlZHNDb250ZXh0Om5ldyBSZWdFeHAoXCJeXCIrTStcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIrTStcIiooKD86LVxcXFxkKT9cXFxcZCopXCIrTStcIipcXFxcKXwpKD89W14tXXwkKVwiLFwiaVwiKX0sWT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFo9L15oXFxkJC9pLCQ9L15bXntdK1xce1xccypcXFtuYXRpdmUgXFx3LyxfPS9eKD86IyhbXFx3LV0rKXwoXFx3Kyl8XFwuKFtcXHctXSspKSQvLGFiPS9bK35dLyxiYj0vJ3xcXFxcL2csY2I9bmV3IFJlZ0V4cChcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiK00rXCI/fChcIitNK1wiKXwuKVwiLFwiaWdcIiksZGI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVwiMHhcIitiLTY1NTM2O3JldHVybiBkIT09ZHx8Yz9iOjA+ZD9TdHJpbmcuZnJvbUNoYXJDb2RlKGQrNjU1MzYpOlN0cmluZy5mcm9tQ2hhckNvZGUoZD4+MTB8NTUyOTYsMTAyMyZkfDU2MzIwKX07dHJ5e0kuYXBwbHkoRj1KLmNhbGwodi5jaGlsZE5vZGVzKSx2LmNoaWxkTm9kZXMpLEZbdi5jaGlsZE5vZGVzLmxlbmd0aF0ubm9kZVR5cGV9Y2F0Y2goZWIpe0k9e2FwcGx5OkYubGVuZ3RoP2Z1bmN0aW9uKGEsYil7SC5hcHBseShhLEouY2FsbChiKSl9OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sZW5ndGgsZD0wO3doaWxlKGFbYysrXT1iW2QrK10pO2EubGVuZ3RoPWMtMX19fWZ1bmN0aW9uIGZiKGEsYixkLGUpe3ZhciBmLGgsaixrLGwsbyxyLHMsdyx4O2lmKChiP2Iub3duZXJEb2N1bWVudHx8Yjp2KSE9PW4mJm0oYiksYj1ifHxuLGQ9ZHx8W10sIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBkO2lmKDEhPT0oaz1iLm5vZGVUeXBlKSYmOSE9PWspcmV0dXJuW107aWYocCYmIWUpe2lmKGY9Xy5leGVjKGEpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSS5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKXJldHVybiBJLmFwcGx5KGQsYi5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGopKSxkfWlmKGMucXNhJiYoIXF8fCFxLnRlc3QoYSkpKXtpZihzPXI9dSx3PWIseD05PT09ayYmYSwxPT09ayYmXCJvYmplY3RcIiE9PWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSl7bz1nKGEpLChyPWIuZ2V0QXR0cmlidXRlKFwiaWRcIikpP3M9ci5yZXBsYWNlKGJiLFwiXFxcXCQmXCIpOmIuc2V0QXR0cmlidXRlKFwiaWRcIixzKSxzPVwiW2lkPSdcIitzK1wiJ10gXCIsbD1vLmxlbmd0aDt3aGlsZShsLS0pb1tsXT1zK3FiKG9bbF0pO3c9YWIudGVzdChhKSYmb2IoYi5wYXJlbnROb2RlKXx8Yix4PW8uam9pbihcIixcIil9aWYoeCl0cnl7cmV0dXJuIEkuYXBwbHkoZCx3LnF1ZXJ5U2VsZWN0b3JBbGwoeCkpLGR9Y2F0Y2goeSl7fWZpbmFsbHl7cnx8Yi5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKX19fXJldHVybiBpKGEucmVwbGFjZShSLFwiJDFcIiksYixkLGUpfWZ1bmN0aW9uIGdiKCl7dmFyIGE9W107ZnVuY3Rpb24gYihjLGUpe3JldHVybiBhLnB1c2goYytcIiBcIik+ZC5jYWNoZUxlbmd0aCYmZGVsZXRlIGJbYS5zaGlmdCgpXSxiW2MrXCIgXCJdPWV9cmV0dXJuIGJ9ZnVuY3Rpb24gaGIoYSl7cmV0dXJuIGFbdV09ITAsYX1mdW5jdGlvbiBpYihhKXt2YXIgYj1uLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dHJ5e3JldHVybiEhYShiKX1jYXRjaChjKXtyZXR1cm4hMX1maW5hbGx5e2IucGFyZW50Tm9kZSYmYi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGIpLGI9bnVsbH19ZnVuY3Rpb24gamIoYSxiKXt2YXIgYz1hLnNwbGl0KFwifFwiKSxlPWEubGVuZ3RoO3doaWxlKGUtLSlkLmF0dHJIYW5kbGVbY1tlXV09Yn1mdW5jdGlvbiBrYihhLGIpe3ZhciBjPWImJmEsZD1jJiYxPT09YS5ub2RlVHlwZSYmMT09PWIubm9kZVR5cGUmJih+Yi5zb3VyY2VJbmRleHx8RCktKH5hLnNvdXJjZUluZGV4fHxEKTtpZihkKXJldHVybiBkO2lmKGMpd2hpbGUoYz1jLm5leHRTaWJsaW5nKWlmKGM9PT1iKXJldHVybi0xO3JldHVybiBhPzE6LTF9ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1jJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBtYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVybihcImlucHV0XCI9PT1jfHxcImJ1dHRvblwiPT09YykmJmIudHlwZT09PWF9fWZ1bmN0aW9uIG5iKGEpe3JldHVybiBoYihmdW5jdGlvbihiKXtyZXR1cm4gYj0rYixoYihmdW5jdGlvbihjLGQpe3ZhciBlLGY9YShbXSxjLmxlbmd0aCxiKSxnPWYubGVuZ3RoO3doaWxlKGctLSljW2U9ZltnXV0mJihjW2VdPSEoZFtlXT1jW2VdKSl9KX0pfWZ1bmN0aW9uIG9iKGEpe3JldHVybiBhJiZ0eXBlb2YgYS5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PUMmJmF9Yz1mYi5zdXBwb3J0PXt9LGY9ZmIuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0sbT1mYi5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlPWE/YS5vd25lckRvY3VtZW50fHxhOnYsZz1lLmRlZmF1bHRWaWV3O3JldHVybiBlIT09biYmOT09PWUubm9kZVR5cGUmJmUuZG9jdW1lbnRFbGVtZW50PyhuPWUsbz1lLmRvY3VtZW50RWxlbWVudCxwPSFmKGUpLGcmJmchPT1nLnRvcCYmKGcuYWRkRXZlbnRMaXN0ZW5lcj9nLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixmdW5jdGlvbigpe20oKX0sITEpOmcuYXR0YWNoRXZlbnQmJmcuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7bSgpfSkpLGMuYXR0cmlidXRlcz1pYihmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1pYihmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChlLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9JC50ZXN0KGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSkmJmliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxkaXYgY2xhc3M9J2EnPjwvZGl2PjxkaXYgY2xhc3M9J2EgaSc+PC9kaXY+XCIsYS5maXJzdENoaWxkLmNsYXNzTmFtZT1cImlcIiwyPT09YS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiaVwiKS5sZW5ndGh9KSxjLmdldEJ5SWQ9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIG8uYXBwZW5kQ2hpbGQoYSkuaWQ9dSwhZS5nZXRFbGVtZW50c0J5TmFtZXx8IWUuZ2V0RWxlbWVudHNCeU5hbWUodSkubGVuZ3RofSksYy5nZXRCeUlkPyhkLmZpbmQuSUQ9ZnVuY3Rpb24oYSxiKXtpZih0eXBlb2YgYi5nZXRFbGVtZW50QnlJZCE9PUMmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2IsZGIpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNiLGRiKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSE9PUMmJmEuZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO3JldHVybiBjJiZjLnZhbHVlPT09Yn19KSxkLmZpbmQuVEFHPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWU/ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdHlwZW9mIGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUhPT1DP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6dm9pZCAwfTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT0wLGY9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZShhKTtpZihcIipcIj09PWEpe3doaWxlKGM9ZltlKytdKTE9PT1jLm5vZGVUeXBlJiZkLnB1c2goYyk7cmV0dXJuIGR9cmV0dXJuIGZ9LGQuZmluZC5DTEFTUz1jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmZ1bmN0aW9uKGEsYil7cmV0dXJuIHR5cGVvZiBiLmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT1DJiZwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9JC50ZXN0KGUucXVlcnlTZWxlY3RvckFsbCkpJiYoaWIoZnVuY3Rpb24oYSl7YS5pbm5lckhUTUw9XCI8c2VsZWN0IG1zYWxsb3djbGlwPScnPjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCIsYS5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djbGlwXj0nJ11cIikubGVuZ3RoJiZxLnB1c2goXCJbKl4kXT1cIitNK1wiKig/OicnfFxcXCJcXFwiKVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aHx8cS5wdXNoKFwiXFxcXFtcIitNK1wiKig/OnZhbHVlfFwiK0wrXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmNoZWNrZWRcIil9KSxpYihmdW5jdGlvbihhKXt2YXIgYj1lLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrTStcIipbKl4kfCF+XT89XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPSQudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmaWIoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcImRpdlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLFEpfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09ZXx8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1lfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0suY2FsbChrLGEpLUsuY2FsbChrLGIpOjA6NCZkPy0xOjEpfTpmdW5jdGlvbihhLGIpe2lmKGE9PT1iKXJldHVybiBsPSEwLDA7dmFyIGMsZD0wLGY9YS5wYXJlbnROb2RlLGc9Yi5wYXJlbnROb2RlLGg9W2FdLGk9W2JdO2lmKCFmfHwhZylyZXR1cm4gYT09PWU/LTE6Yj09PWU/MTpmPy0xOmc/MTprP0suY2FsbChrLGEpLUsuY2FsbChrLGIpOjA7aWYoZj09PWcpcmV0dXJuIGtiKGEsYik7Yz1hO3doaWxlKGM9Yy5wYXJlbnROb2RlKWgudW5zaGlmdChjKTtjPWI7d2hpbGUoYz1jLnBhcmVudE5vZGUpaS51bnNoaWZ0KGMpO3doaWxlKGhbZF09PT1pW2RdKWQrKztyZXR1cm4gZD9rYihoW2RdLGlbZF0pOmhbZF09PT12Py0xOmlbZF09PT12PzE6MH0sZSk6bn0sZmIubWF0Y2hlcz1mdW5jdGlvbihhLGIpe3JldHVybiBmYihhLG51bGwsbnVsbCxiKX0sZmIubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGEsYil7aWYoKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLGI9Yi5yZXBsYWNlKFUsXCI9JyQxJ11cIiksISghYy5tYXRjaGVzU2VsZWN0b3J8fCFwfHxyJiZyLnRlc3QoYil8fHEmJnEudGVzdChiKSkpdHJ5e3ZhciBkPXMuY2FsbChhLGIpO2lmKGR8fGMuZGlzY29ubmVjdGVkTWF0Y2h8fGEuZG9jdW1lbnQmJjExIT09YS5kb2N1bWVudC5ub2RlVHlwZSlyZXR1cm4gZH1jYXRjaChlKXt9cmV0dXJuIGZiKGIsbixudWxsLFthXSkubGVuZ3RoPjB9LGZiLmNvbnRhaW5zPWZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3duZXJEb2N1bWVudHx8YSkhPT1uJiZtKGEpLHQoYSxiKX0sZmIuYXR0cj1mdW5jdGlvbihhLGIpeyhhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKTt2YXIgZT1kLmF0dHJIYW5kbGVbYi50b0xvd2VyQ2FzZSgpXSxmPWUmJkUuY2FsbChkLmF0dHJIYW5kbGUsYi50b0xvd2VyQ2FzZSgpKT9lKGEsYiwhcCk6dm9pZCAwO3JldHVybiB2b2lkIDAhPT1mP2Y6Yy5hdHRyaWJ1dGVzfHwhcD9hLmdldEF0dHJpYnV0ZShiKTooZj1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZmLnNwZWNpZmllZD9mLnZhbHVlOm51bGx9LGZiLmVycm9yPWZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiK2EpfSxmYi51bmlxdWVTb3J0PWZ1bmN0aW9uKGEpe3ZhciBiLGQ9W10sZT0wLGY9MDtpZihsPSFjLmRldGVjdER1cGxpY2F0ZXMsaz0hYy5zb3J0U3RhYmxlJiZhLnNsaWNlKDApLGEuc29ydChCKSxsKXt3aGlsZShiPWFbZisrXSliPT09YVtmXSYmKGU9ZC5wdXNoKGYpKTt3aGlsZShlLS0pYS5zcGxpY2UoZFtlXSwxKX1yZXR1cm4gaz1udWxsLGF9LGU9ZmIuZ2V0VGV4dD1mdW5jdGlvbihhKXt2YXIgYixjPVwiXCIsZD0wLGY9YS5ub2RlVHlwZTtpZihmKXtpZigxPT09Znx8OT09PWZ8fDExPT09Zil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEudGV4dENvbnRlbnQpcmV0dXJuIGEudGV4dENvbnRlbnQ7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWMrPWUoYSl9ZWxzZSBpZigzPT09Znx8ND09PWYpcmV0dXJuIGEubm9kZVZhbHVlfWVsc2Ugd2hpbGUoYj1hW2QrK10pYys9ZShiKTtyZXR1cm4gY30sZD1mYi5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzpoYixtYXRjaDpYLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7XCI+XCI6e2RpcjpcInBhcmVudE5vZGVcIixmaXJzdDohMH0sXCIgXCI6e2RpcjpcInBhcmVudE5vZGVcIn0sXCIrXCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wiLGZpcnN0OiEwfSxcIn5cIjp7ZGlyOlwicHJldmlvdXNTaWJsaW5nXCJ9fSxwcmVGaWx0ZXI6e0FUVFI6ZnVuY3Rpb24oYSl7cmV0dXJuIGFbMV09YVsxXS5yZXBsYWNlKGNiLGRiKSxhWzNdPShhWzNdfHxhWzRdfHxhWzVdfHxcIlwiKS5yZXBsYWNlKGNiLGRiKSxcIn49XCI9PT1hWzJdJiYoYVszXT1cIiBcIithWzNdK1wiIFwiKSxhLnNsaWNlKDAsNCl9LENISUxEOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0udG9Mb3dlckNhc2UoKSxcIm50aFwiPT09YVsxXS5zbGljZSgwLDMpPyhhWzNdfHxmYi5lcnJvcihhWzBdKSxhWzRdPSsoYVs0XT9hWzVdKyhhWzZdfHwxKToyKihcImV2ZW5cIj09PWFbM118fFwib2RkXCI9PT1hWzNdKSksYVs1XT0rKGFbN10rYVs4XXx8XCJvZGRcIj09PWFbM10pKTphWzNdJiZmYi5lcnJvcihhWzBdKSxhfSxQU0VVRE86ZnVuY3Rpb24oYSl7dmFyIGIsYz0hYVs2XSYmYVsyXTtyZXR1cm4gWC5DSElMRC50ZXN0KGFbMF0pP251bGw6KGFbM10/YVsyXT1hWzRdfHxhWzVdfHxcIlwiOmMmJlYudGVzdChjKSYmKGI9ZyhjLCEwKSkmJihiPWMuaW5kZXhPZihcIilcIixjLmxlbmd0aC1iKS1jLmxlbmd0aCkmJihhWzBdPWFbMF0uc2xpY2UoMCxiKSxhWzJdPWMuc2xpY2UoMCxiKSksYS5zbGljZSgwLDMpKX19LGZpbHRlcjp7VEFHOmZ1bmN0aW9uKGEpe3ZhciBiPWEucmVwbGFjZShjYixkYikudG9Mb3dlckNhc2UoKTtyZXR1cm5cIipcIj09PWE/ZnVuY3Rpb24oKXtyZXR1cm4hMH06ZnVuY3Rpb24oYSl7cmV0dXJuIGEubm9kZU5hbWUmJmEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PWJ9fSxDTEFTUzpmdW5jdGlvbihhKXt2YXIgYj15W2ErXCIgXCJdO3JldHVybiBifHwoYj1uZXcgUmVnRXhwKFwiKF58XCIrTStcIilcIithK1wiKFwiK00rXCJ8JClcIikpJiZ5KGEsZnVuY3Rpb24oYSl7cmV0dXJuIGIudGVzdChcInN0cmluZ1wiPT10eXBlb2YgYS5jbGFzc05hbWUmJmEuY2xhc3NOYW1lfHx0eXBlb2YgYS5nZXRBdHRyaWJ1dGUhPT1DJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9ZmIuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6Yj8oZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UrXCIgXCIpLmluZGV4T2YoYyk+LTE6XCJ8PVwiPT09Yj9lPT09Y3x8ZS5zbGljZSgwLGMubGVuZ3RoKzEpPT09YytcIi1cIjohMSk6ITB9fSxDSElMRDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPVwibnRoXCIhPT1hLnNsaWNlKDAsMyksZz1cImxhc3RcIiE9PWEuc2xpY2UoLTQpLGg9XCJvZi10eXBlXCI9PT1iO3JldHVybiAxPT09ZCYmMD09PWU/ZnVuY3Rpb24oYSl7cmV0dXJuISFhLnBhcmVudE5vZGV9OmZ1bmN0aW9uKGIsYyxpKXt2YXIgaixrLGwsbSxuLG8scD1mIT09Zz9cIm5leHRTaWJsaW5nXCI6XCJwcmV2aW91c1NpYmxpbmdcIixxPWIucGFyZW50Tm9kZSxyPWgmJmIubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxzPSFpJiYhaDtpZihxKXtpZihmKXt3aGlsZShwKXtsPWI7d2hpbGUobD1sW3BdKWlmKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSlyZXR1cm4hMTtvPXA9XCJvbmx5XCI9PT1hJiYhbyYmXCJuZXh0U2libGluZ1wifXJldHVybiEwfWlmKG89W2c/cS5maXJzdENoaWxkOnEubGFzdENoaWxkXSxnJiZzKXtrPXFbdV18fChxW3VdPXt9KSxqPWtbYV18fFtdLG49alswXT09PXcmJmpbMV0sbT1qWzBdPT09dyYmalsyXSxsPW4mJnEuY2hpbGROb2Rlc1tuXTt3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigxPT09bC5ub2RlVHlwZSYmKyttJiZsPT09Yil7a1thXT1bdyxuLG1dO2JyZWFrfX1lbHNlIGlmKHMmJihqPShiW3VdfHwoYlt1XT17fSkpW2FdKSYmalswXT09PXcpbT1qWzFdO2Vsc2Ugd2hpbGUobD0rK24mJmwmJmxbcF18fChtPW49MCl8fG8ucG9wKCkpaWYoKGg/bC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09cjoxPT09bC5ub2RlVHlwZSkmJisrbSYmKHMmJigobFt1XXx8KGxbdV09e30pKVthXT1bdyxtXSksbD09PWIpKWJyZWFrO3JldHVybiBtLT1lLG09PT1kfHxtJWQ9PT0wJiZtL2Q+PTB9fX0sUFNFVURPOmZ1bmN0aW9uKGEsYil7dmFyIGMsZT1kLnBzZXVkb3NbYV18fGQuc2V0RmlsdGVyc1thLnRvTG93ZXJDYXNlKCldfHxmYi5lcnJvcihcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIrYSk7cmV0dXJuIGVbdV0/ZShiKTplLmxlbmd0aD4xPyhjPVthLGEsXCJcIixiXSxkLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoYS50b0xvd2VyQ2FzZSgpKT9oYihmdW5jdGlvbihhLGMpe3ZhciBkLGY9ZShhLGIpLGc9Zi5sZW5ndGg7d2hpbGUoZy0tKWQ9Sy5jYWxsKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmhiKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLFwiJDFcIikpO3JldHVybiBkW3VdP2hiKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLCFjLnBvcCgpfX0pLGhhczpoYihmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGZiKGEsYikubGVuZ3RoPjB9fSksY29udGFpbnM6aGIoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybihiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dHx8ZShiKSkuaW5kZXhPZihhKT4tMX19KSxsYW5nOmhiKGZ1bmN0aW9uKGEpe3JldHVybiBXLnRlc3QoYXx8XCJcIil8fGZiLmVycm9yKFwidW5zdXBwb3J0ZWQgbGFuZzogXCIrYSksYT1hLnJlcGxhY2UoY2IsZGIpLnRvTG93ZXJDYXNlKCksZnVuY3Rpb24oYil7dmFyIGM7ZG8gaWYoYz1wP2IubGFuZzpiLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpfHxiLmdldEF0dHJpYnV0ZShcImxhbmdcIikpcmV0dXJuIGM9Yy50b0xvd2VyQ2FzZSgpLGM9PT1hfHwwPT09Yy5pbmRleE9mKGErXCItXCIpO3doaWxlKChiPWIucGFyZW50Tm9kZSkmJjE9PT1iLm5vZGVUeXBlKTtyZXR1cm4hMX19KSx0YXJnZXQ6ZnVuY3Rpb24oYil7dmFyIGM9YS5sb2NhdGlvbiYmYS5sb2NhdGlvbi5oYXNoO3JldHVybiBjJiZjLnNsaWNlKDEpPT09Yi5pZH0scm9vdDpmdW5jdGlvbihhKXtyZXR1cm4gYT09PW99LGZvY3VzOmZ1bmN0aW9uKGEpe3JldHVybiBhPT09bi5hY3RpdmVFbGVtZW50JiYoIW4uaGFzRm9jdXN8fG4uaGFzRm9jdXMoKSkmJiEhKGEudHlwZXx8YS5ocmVmfHx+YS50YWJJbmRleCl9LGVuYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMX0sZGlzYWJsZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZGlzYWJsZWQ9PT0hMH0sY2hlY2tlZDpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmISFhLmNoZWNrZWR8fFwib3B0aW9uXCI9PT1iJiYhIWEuc2VsZWN0ZWR9LHNlbGVjdGVkOmZ1bmN0aW9uKGEpe3JldHVybiBhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LGEuc2VsZWN0ZWQ9PT0hMH0sZW1wdHk6ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU8NilyZXR1cm4hMTtyZXR1cm4hMH0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybiFkLnBzZXVkb3MuZW1wdHkoYSl9LGhlYWRlcjpmdW5jdGlvbihhKXtyZXR1cm4gWi50ZXN0KGEubm9kZU5hbWUpfSxpbnB1dDpmdW5jdGlvbihhKXtyZXR1cm4gWS50ZXN0KGEubm9kZU5hbWUpfSxidXR0b246ZnVuY3Rpb24oYSl7dmFyIGI9YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO3JldHVyblwiaW5wdXRcIj09PWImJlwiYnV0dG9uXCI9PT1hLnR5cGV8fFwiYnV0dG9uXCI9PT1ifSx0ZXh0OmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVyblwiaW5wdXRcIj09PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKSYmXCJ0ZXh0XCI9PT1hLnR5cGUmJihudWxsPT0oYj1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpfHxcInRleHRcIj09PWIudG9Mb3dlckNhc2UoKSl9LGZpcnN0Om5iKGZ1bmN0aW9uKCl7cmV0dXJuWzBdfSksbGFzdDpuYihmdW5jdGlvbihhLGIpe3JldHVybltiLTFdfSksZXE6bmIoZnVuY3Rpb24oYSxiLGMpe3JldHVyblswPmM/YytiOmNdfSksZXZlbjpuYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLG9kZDpuYihmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0xO2I+YztjKz0yKWEucHVzaChjKTtyZXR1cm4gYX0pLGx0Om5iKGZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9MD5jP2MrYjpjOy0tZD49MDspYS5wdXNoKGQpO3JldHVybiBhfSksZ3Q6bmIoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7KytkPGI7KWEucHVzaChkKTtyZXR1cm4gYX0pfX0sZC5wc2V1ZG9zLm50aD1kLnBzZXVkb3MuZXE7Zm9yKGIgaW57cmFkaW86ITAsY2hlY2tib3g6ITAsZmlsZTohMCxwYXNzd29yZDohMCxpbWFnZTohMH0pZC5wc2V1ZG9zW2JdPWxiKGIpO2ZvcihiIGlue3N1Ym1pdDohMCxyZXNldDohMH0pZC5wc2V1ZG9zW2JdPW1iKGIpO2Z1bmN0aW9uIHBiKCl7fXBiLnByb3RvdHlwZT1kLmZpbHRlcnM9ZC5wc2V1ZG9zLGQuc2V0RmlsdGVycz1uZXcgcGIsZz1mYi50b2tlbml6ZT1mdW5jdGlvbihhLGIpe3ZhciBjLGUsZixnLGgsaSxqLGs9elthK1wiIFwiXTtpZihrKXJldHVybiBiPzA6ay5zbGljZSgwKTtoPWEsaT1bXSxqPWQucHJlRmlsdGVyO3doaWxlKGgpeyghY3x8KGU9Uy5leGVjKGgpKSkmJihlJiYoaD1oLnNsaWNlKGVbMF0ubGVuZ3RoKXx8aCksaS5wdXNoKGY9W10pKSxjPSExLChlPVQuZXhlYyhoKSkmJihjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTplWzBdLnJlcGxhY2UoUixcIiBcIil9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtmb3IoZyBpbiBkLmZpbHRlcikhKGU9WFtnXS5leGVjKGgpKXx8altnXSYmIShlPWpbZ10oZSkpfHwoYz1lLnNoaWZ0KCksZi5wdXNoKHt2YWx1ZTpjLHR5cGU6ZyxtYXRjaGVzOmV9KSxoPWguc2xpY2UoYy5sZW5ndGgpKTtpZighYylicmVha31yZXR1cm4gYj9oLmxlbmd0aDpoP2ZiLmVycm9yKGEpOnooYSxpKS5zbGljZSgwKX07ZnVuY3Rpb24gcWIoYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aCxkPVwiXCI7Yz5iO2IrKylkKz1hW2JdLnZhbHVlO3JldHVybiBkfWZ1bmN0aW9uIHJiKGEsYixjKXt2YXIgZD1iLmRpcixlPWMmJlwicGFyZW50Tm9kZVwiPT09ZCxmPXgrKztyZXR1cm4gYi5maXJzdD9mdW5jdGlvbihiLGMsZil7d2hpbGUoYj1iW2RdKWlmKDE9PT1iLm5vZGVUeXBlfHxlKXJldHVybiBhKGIsYyxmKX06ZnVuY3Rpb24oYixjLGcpe3ZhciBoLGksaj1bdyxmXTtpZihnKXt3aGlsZShiPWJbZF0paWYoKDE9PT1iLm5vZGVUeXBlfHxlKSYmYShiLGMsZykpcmV0dXJuITB9ZWxzZSB3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpe2lmKGk9Ylt1XXx8KGJbdV09e30pLChoPWlbZF0pJiZoWzBdPT09dyYmaFsxXT09PWYpcmV0dXJuIGpbMl09aFsyXTtpZihpW2RdPWosalsyXT1hKGIsYyxnKSlyZXR1cm4hMH19fWZ1bmN0aW9uIHNiKGEpe3JldHVybiBhLmxlbmd0aD4xP2Z1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLmxlbmd0aDt3aGlsZShlLS0paWYoIWFbZV0oYixjLGQpKXJldHVybiExO3JldHVybiEwfTphWzBdfWZ1bmN0aW9uIHRiKGEsYixjKXtmb3IodmFyIGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspZmIoYSxiW2RdLGMpO3JldHVybiBjfWZ1bmN0aW9uIHViKGEsYixjLGQsZSl7Zm9yKHZhciBmLGc9W10saD0wLGk9YS5sZW5ndGgsaj1udWxsIT1iO2k+aDtoKyspKGY9YVtoXSkmJighY3x8YyhmLGQsZSkpJiYoZy5wdXNoKGYpLGomJmIucHVzaChoKSk7cmV0dXJuIGd9ZnVuY3Rpb24gdmIoYSxiLGMsZCxlLGYpe3JldHVybiBkJiYhZFt1XSYmKGQ9dmIoZCkpLGUmJiFlW3VdJiYoZT12YihlLGYpKSxoYihmdW5jdGlvbihmLGcsaCxpKXt2YXIgaixrLGwsbT1bXSxuPVtdLG89Zy5sZW5ndGgscD1mfHx0YihifHxcIipcIixoLm5vZGVUeXBlP1toXTpoLFtdKSxxPSFhfHwhZiYmYj9wOnViKHAsbSxhLGgsaSkscj1jP2V8fChmP2E6b3x8ZCk/W106ZzpxO2lmKGMmJmMocSxyLGgsaSksZCl7aj11YihyLG4pLGQoaixbXSxoLGkpLGs9ai5sZW5ndGg7d2hpbGUoay0tKShsPWpba10pJiYocltuW2tdXT0hKHFbbltrXV09bCkpfWlmKGYpe2lmKGV8fGEpe2lmKGUpe2o9W10saz1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJmoucHVzaChxW2tdPWwpO2UobnVsbCxyPVtdLGosaSl9az1yLmxlbmd0aDt3aGlsZShrLS0pKGw9cltrXSkmJihqPWU/Sy5jYWxsKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj11YihyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SS5hcHBseShnLHIpfSl9ZnVuY3Rpb24gd2IoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXJiKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1yYihmdW5jdGlvbihhKXtyZXR1cm4gSy5jYWxsKGIsYSk+LTF9LGgsITApLG09W2Z1bmN0aW9uKGEsYyxkKXtyZXR1cm4hZyYmKGR8fGMhPT1qKXx8KChiPWMpLm5vZGVUeXBlP2soYSxjLGQpOmwoYSxjLGQpKX1dO2Y+aTtpKyspaWYoYz1kLnJlbGF0aXZlW2FbaV0udHlwZV0pbT1bcmIoc2IobSksYyldO2Vsc2V7aWYoYz1kLmZpbHRlclthW2ldLnR5cGVdLmFwcGx5KG51bGwsYVtpXS5tYXRjaGVzKSxjW3VdKXtmb3IoZT0rK2k7Zj5lO2UrKylpZihkLnJlbGF0aXZlW2FbZV0udHlwZV0pYnJlYWs7cmV0dXJuIHZiKGk+MSYmc2IobSksaT4xJiZxYihhLnNsaWNlKDAsaS0xKS5jb25jYXQoe3ZhbHVlOlwiIFwiPT09YVtpLTJdLnR5cGU/XCIqXCI6XCJcIn0pKS5yZXBsYWNlKFIsXCIkMVwiKSxjLGU+aSYmd2IoYS5zbGljZShpLGUpKSxmPmUmJndiKGE9YS5zbGljZShlKSksZj5lJiZxYihhKSl9bS5wdXNoKGMpfXJldHVybiBzYihtKX1mdW5jdGlvbiB4YihhLGIpe3ZhciBjPWIubGVuZ3RoPjAsZT1hLmxlbmd0aD4wLGY9ZnVuY3Rpb24oZixnLGgsaSxrKXt2YXIgbCxtLG8scD0wLHE9XCIwXCIscj1mJiZbXSxzPVtdLHQ9aix1PWZ8fGUmJmQuZmluZC5UQUcoXCIqXCIsayksdj13Kz1udWxsPT10PzE6TWF0aC5yYW5kb20oKXx8LjEseD11Lmxlbmd0aDtmb3IoayYmKGo9ZyE9PW4mJmcpO3EhPT14JiZudWxsIT0obD11W3FdKTtxKyspe2lmKGUmJmwpe209MDt3aGlsZShvPWFbbSsrXSlpZihvKGwsZyxoKSl7aS5wdXNoKGwpO2JyZWFrfWsmJih3PXYpfWMmJigobD0hbyYmbCkmJnAtLSxmJiZyLnB1c2gobCkpfWlmKHArPXEsYyYmcSE9PXApe209MDt3aGlsZShvPWJbbSsrXSlvKHIscyxnLGgpO2lmKGYpe2lmKHA+MCl3aGlsZShxLS0pcltxXXx8c1txXXx8KHNbcV09Ry5jYWxsKGkpKTtzPXViKHMpfUkuYXBwbHkoaSxzKSxrJiYhZiYmcy5sZW5ndGg+MCYmcCtiLmxlbmd0aD4xJiZmYi51bmlxdWVTb3J0KGkpfXJldHVybiBrJiYodz12LGo9dCkscn07cmV0dXJuIGM/aGIoZik6Zn1yZXR1cm4gaD1mYi5jb21waWxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9QVthK1wiIFwiXTtpZighZil7Ynx8KGI9ZyhhKSksYz1iLmxlbmd0aDt3aGlsZShjLS0pZj13YihiW2NdKSxmW3VdP2QucHVzaChmKTplLnB1c2goZik7Zj1BKGEseGIoZSxkKSksZi5zZWxlY3Rvcj1hfXJldHVybiBmfSxpPWZiLnNlbGVjdD1mdW5jdGlvbihhLGIsZSxmKXt2YXIgaSxqLGssbCxtLG49XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmYSxvPSFmJiZnKGE9bi5zZWxlY3Rvcnx8YSk7aWYoZT1lfHxbXSwxPT09by5sZW5ndGgpe2lmKGo9b1swXT1vWzBdLnNsaWNlKDApLGoubGVuZ3RoPjImJlwiSURcIj09PShrPWpbMF0pLnR5cGUmJmMuZ2V0QnlJZCYmOT09PWIubm9kZVR5cGUmJnAmJmQucmVsYXRpdmVbalsxXS50eXBlXSl7aWYoYj0oZC5maW5kLklEKGsubWF0Y2hlc1swXS5yZXBsYWNlKGNiLGRiKSxiKXx8W10pWzBdLCFiKXJldHVybiBlO24mJihiPWIucGFyZW50Tm9kZSksYT1hLnNsaWNlKGouc2hpZnQoKS52YWx1ZS5sZW5ndGgpfWk9WC5uZWVkc0NvbnRleHQudGVzdChhKT8wOmoubGVuZ3RoO3doaWxlKGktLSl7aWYoaz1qW2ldLGQucmVsYXRpdmVbbD1rLnR5cGVdKWJyZWFrO2lmKChtPWQuZmluZFtsXSkmJihmPW0oay5tYXRjaGVzWzBdLnJlcGxhY2UoY2IsZGIpLGFiLnRlc3QoalswXS50eXBlKSYmb2IoYi5wYXJlbnROb2RlKXx8YikpKXtpZihqLnNwbGljZShpLDEpLGE9Zi5sZW5ndGgmJnFiKGopLCFhKXJldHVybiBJLmFwcGx5KGUsZiksZTticmVha319fXJldHVybihufHxoKGEsbykpKGYsYiwhcCxlLGFiLnRlc3QoYSkmJm9iKGIucGFyZW50Tm9kZSl8fGIpLGV9LGMuc29ydFN0YWJsZT11LnNwbGl0KFwiXCIpLnNvcnQoQikuam9pbihcIlwiKT09PXUsYy5kZXRlY3REdXBsaWNhdGVzPSEhbCxtKCksYy5zb3J0RGV0YWNoZWQ9aWIoZnVuY3Rpb24oYSl7cmV0dXJuIDEmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihuLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpfSksaWIoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGEgaHJlZj0nIyc+PC9hPlwiLFwiI1wiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcImhyZWZcIil9KXx8amIoXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjP3ZvaWQgMDphLmdldEF0dHJpYnV0ZShiLFwidHlwZVwiPT09Yi50b0xvd2VyQ2FzZSgpPzE6Mil9KSxjLmF0dHJpYnV0ZXMmJmliKGZ1bmN0aW9uKGEpe3JldHVybiBhLmlubmVySFRNTD1cIjxpbnB1dC8+XCIsYS5maXJzdENoaWxkLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsXCJcIiksXCJcIj09PWEuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKX0pfHxqYihcInZhbHVlXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBjfHxcImlucHV0XCIhPT1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk/dm9pZCAwOmEuZGVmYXVsdFZhbHVlfSksaWIoZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWEuZ2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIil9KXx8amIoTCxmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGM/dm9pZCAwOmFbYl09PT0hMD9iLnRvTG93ZXJDYXNlKCk6KGQ9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZC5zcGVjaWZpZWQ/ZC52YWx1ZTpudWxsfSksZmJ9KGEpO24uZmluZD10LG4uZXhwcj10LnNlbGVjdG9ycyxuLmV4cHJbXCI6XCJdPW4uZXhwci5wc2V1ZG9zLG4udW5pcXVlPXQudW5pcXVlU29ydCxuLnRleHQ9dC5nZXRUZXh0LG4uaXNYTUxEb2M9dC5pc1hNTCxuLmNvbnRhaW5zPXQuY29udGFpbnM7dmFyIHU9bi5leHByLm1hdGNoLm5lZWRzQ29udGV4dCx2PS9ePChcXHcrKVxccypcXC8/Pig/OjxcXC9cXDE+fCkkLyx3PS9eLlteOiNcXFtcXC4sXSokLztmdW5jdGlvbiB4KGEsYixjKXtpZihuLmlzRnVuY3Rpb24oYikpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEsZCl7cmV0dXJuISFiLmNhbGwoYSxkLGEpIT09Y30pO2lmKGIubm9kZVR5cGUpcmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBhPT09YiE9PWN9KTtpZihcInN0cmluZ1wiPT10eXBlb2YgYil7aWYody50ZXN0KGIpKXJldHVybiBuLmZpbHRlcihiLGEsYyk7Yj1uLmZpbHRlcihiLGEpfXJldHVybiBuLmdyZXAoYSxmdW5jdGlvbihhKXtyZXR1cm4gZy5jYWxsKGIsYSk+PTAhPT1jfSl9bi5maWx0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWJbMF07cmV0dXJuIGMmJihhPVwiOm5vdChcIithK1wiKVwiKSwxPT09Yi5sZW5ndGgmJjE9PT1kLm5vZGVUeXBlP24uZmluZC5tYXRjaGVzU2VsZWN0b3IoZCxhKT9bZF06W106bi5maW5kLm1hdGNoZXMoYSxuLmdyZXAoYixmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV9KSl9LG4uZm4uZXh0ZW5kKHtmaW5kOmZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5sZW5ndGgsZD1bXSxlPXRoaXM7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIHRoaXMucHVzaFN0YWNrKG4oYSkuZmlsdGVyKGZ1bmN0aW9uKCl7Zm9yKGI9MDtjPmI7YisrKWlmKG4uY29udGFpbnMoZVtiXSx0aGlzKSlyZXR1cm4hMH0pKTtmb3IoYj0wO2M+YjtiKyspbi5maW5kKGEsZVtiXSxkKTtyZXR1cm4gZD10aGlzLnB1c2hTdGFjayhjPjE/bi51bmlxdWUoZCk6ZCksZC5zZWxlY3Rvcj10aGlzLnNlbGVjdG9yP3RoaXMuc2VsZWN0b3IrXCIgXCIrYTphLGR9LGZpbHRlcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeCh0aGlzLGF8fFtdLCExKSl9LG5vdDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soeCh0aGlzLGF8fFtdLCEwKSl9LGlzOmZ1bmN0aW9uKGEpe3JldHVybiEheCh0aGlzLFwic3RyaW5nXCI9PXR5cGVvZiBhJiZ1LnRlc3QoYSk/bihhKTphfHxbXSwhMSkubGVuZ3RofX0pO3ZhciB5LHo9L14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sQT1uLmZuLmluaXQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKCFhKXJldHVybiB0aGlzO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXtpZihjPVwiPFwiPT09YVswXSYmXCI+XCI9PT1hW2EubGVuZ3RoLTFdJiZhLmxlbmd0aD49Mz9bbnVsbCxhLG51bGxdOnouZXhlYyhhKSwhY3x8IWNbMV0mJmIpcmV0dXJuIWJ8fGIuanF1ZXJ5PyhifHx5KS5maW5kKGEpOnRoaXMuY29uc3RydWN0b3IoYikuZmluZChhKTtpZihjWzFdKXtpZihiPWIgaW5zdGFuY2VvZiBuP2JbMF06YixuLm1lcmdlKHRoaXMsbi5wYXJzZUhUTUwoY1sxXSxiJiZiLm5vZGVUeXBlP2Iub3duZXJEb2N1bWVudHx8YjpsLCEwKSksdi50ZXN0KGNbMV0pJiZuLmlzUGxhaW5PYmplY3QoYikpZm9yKGMgaW4gYiluLmlzRnVuY3Rpb24odGhpc1tjXSk/dGhpc1tjXShiW2NdKTp0aGlzLmF0dHIoYyxiW2NdKTtyZXR1cm4gdGhpc31yZXR1cm4gZD1sLmdldEVsZW1lbnRCeUlkKGNbMl0pLGQmJmQucGFyZW50Tm9kZSYmKHRoaXMubGVuZ3RoPTEsdGhpc1swXT1kKSx0aGlzLmNvbnRleHQ9bCx0aGlzLnNlbGVjdG9yPWEsdGhpc31yZXR1cm4gYS5ub2RlVHlwZT8odGhpcy5jb250ZXh0PXRoaXNbMF09YSx0aGlzLmxlbmd0aD0xLHRoaXMpOm4uaXNGdW5jdGlvbihhKT9cInVuZGVmaW5lZFwiIT10eXBlb2YgeS5yZWFkeT95LnJlYWR5KGEpOmEobik6KHZvaWQgMCE9PWEuc2VsZWN0b3ImJih0aGlzLnNlbGVjdG9yPWEuc2VsZWN0b3IsdGhpcy5jb250ZXh0PWEuY29udGV4dCksbi5tYWtlQXJyYXkoYSx0aGlzKSl9O0EucHJvdG90eXBlPW4uZm4seT1uKGwpO3ZhciBCPS9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLEM9e2NoaWxkcmVuOiEwLGNvbnRlbnRzOiEwLG5leHQ6ITAscHJldjohMH07bi5leHRlbmQoe2RpcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9W10sZT12b2lkIDAhPT1jO3doaWxlKChhPWFbYl0pJiY5IT09YS5ub2RlVHlwZSlpZigxPT09YS5ub2RlVHlwZSl7aWYoZSYmbihhKS5pcyhjKSlicmVhaztkLnB1c2goYSl9cmV0dXJuIGR9LHNpYmxpbmc6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9W107YTthPWEubmV4dFNpYmxpbmcpMT09PWEubm9kZVR5cGUmJmEhPT1iJiZjLnB1c2goYSk7cmV0dXJuIGN9fSksbi5mbi5leHRlbmQoe2hhczpmdW5jdGlvbihhKXt2YXIgYj1uKGEsdGhpcyksYz1iLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXtmb3IodmFyIGE9MDtjPmE7YSsrKWlmKG4uY29udGFpbnModGhpcyxiW2FdKSlyZXR1cm4hMH0pfSxjbG9zZXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9MCxlPXRoaXMubGVuZ3RoLGY9W10sZz11LnRlc3QoYSl8fFwic3RyaW5nXCIhPXR5cGVvZiBhP24oYSxifHx0aGlzLmNvbnRleHQpOjA7ZT5kO2QrKylmb3IoYz10aGlzW2RdO2MmJmMhPT1iO2M9Yy5wYXJlbnROb2RlKWlmKGMubm9kZVR5cGU8MTEmJihnP2cuaW5kZXgoYyk+LTE6MT09PWMubm9kZVR5cGUmJm4uZmluZC5tYXRjaGVzU2VsZWN0b3IoYyxhKSkpe2YucHVzaChjKTticmVha31yZXR1cm4gdGhpcy5wdXNoU3RhY2soZi5sZW5ndGg+MT9uLnVuaXF1ZShmKTpmKX0saW5kZXg6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09dHlwZW9mIGE/Zy5jYWxsKG4oYSksdGhpc1swXSk6Zy5jYWxsKHRoaXMsYS5qcXVlcnk/YVswXTphKTp0aGlzWzBdJiZ0aGlzWzBdLnBhcmVudE5vZGU/dGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGg6LTF9LGFkZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLnVuaXF1ZShuLm1lcmdlKHRoaXMuZ2V0KCksbihhLGIpKSkpfSxhZGRCYWNrOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZChudWxsPT1hP3RoaXMucHJldk9iamVjdDp0aGlzLnByZXZPYmplY3QuZmlsdGVyKGEpKX19KTtmdW5jdGlvbiBEKGEsYil7d2hpbGUoKGE9YVtiXSkmJjEhPT1hLm5vZGVUeXBlKTtyZXR1cm4gYX1uLmVhY2goe3BhcmVudDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7cmV0dXJuIGImJjExIT09Yi5ub2RlVHlwZT9iOm51bGx9LHBhcmVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIpfSxwYXJlbnRzVW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLFwicGFyZW50Tm9kZVwiLGMpfSxuZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJuZXh0U2libGluZ1wiKX0scHJldjpmdW5jdGlvbihhKXtyZXR1cm4gRChhLFwicHJldmlvdXNTaWJsaW5nXCIpfSxuZXh0QWxsOmZ1bmN0aW9uKGEpe3JldHVybiBuLmRpcihhLFwibmV4dFNpYmxpbmdcIil9LHByZXZBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiLGMpfSxwcmV2VW50aWw6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmRpcihhLFwicHJldmlvdXNTaWJsaW5nXCIsYyl9LHNpYmxpbmdzOmZ1bmN0aW9uKGEpe3JldHVybiBuLnNpYmxpbmcoKGEucGFyZW50Tm9kZXx8e30pLmZpcnN0Q2hpbGQsYSl9LGNoaWxkcmVuOmZ1bmN0aW9uKGEpe3JldHVybiBuLnNpYmxpbmcoYS5maXJzdENoaWxkKX0sY29udGVudHM6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuY29udGVudERvY3VtZW50fHxuLm1lcmdlKFtdLGEuY2hpbGROb2Rlcyl9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYyxkKXt2YXIgZT1uLm1hcCh0aGlzLGIsYyk7cmV0dXJuXCJVbnRpbFwiIT09YS5zbGljZSgtNSkmJihkPWMpLGQmJlwic3RyaW5nXCI9PXR5cGVvZiBkJiYoZT1uLmZpbHRlcihkLGUpKSx0aGlzLmxlbmd0aD4xJiYoQ1thXXx8bi51bmlxdWUoZSksQi50ZXN0KGEpJiZlLnJldmVyc2UoKSksdGhpcy5wdXNoU3RhY2soZSl9fSk7dmFyIEU9L1xcUysvZyxGPXt9O2Z1bmN0aW9uIEcoYSl7dmFyIGI9RlthXT17fTtyZXR1cm4gbi5lYWNoKGEubWF0Y2goRSl8fFtdLGZ1bmN0aW9uKGEsYyl7YltjXT0hMH0pLGJ9bi5DYWxsYmFja3M9ZnVuY3Rpb24oYSl7YT1cInN0cmluZ1wiPT10eXBlb2YgYT9GW2FdfHxHKGEpOm4uZXh0ZW5kKHt9LGEpO3ZhciBiLGMsZCxlLGYsZyxoPVtdLGk9IWEub25jZSYmW10saj1mdW5jdGlvbihsKXtmb3IoYj1hLm1lbW9yeSYmbCxjPSEwLGc9ZXx8MCxlPTAsZj1oLmxlbmd0aCxkPSEwO2gmJmY+ZztnKyspaWYoaFtnXS5hcHBseShsWzBdLGxbMV0pPT09ITEmJmEuc3RvcE9uRmFsc2Upe2I9ITE7YnJlYWt9ZD0hMSxoJiYoaT9pLmxlbmd0aCYmaihpLnNoaWZ0KCkpOmI/aD1bXTprLmRpc2FibGUoKSl9LGs9e2FkZDpmdW5jdGlvbigpe2lmKGgpe3ZhciBjPWgubGVuZ3RoOyFmdW5jdGlvbiBnKGIpe24uZWFjaChiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi50eXBlKGMpO1wiZnVuY3Rpb25cIj09PWQ/YS51bmlxdWUmJmsuaGFzKGMpfHxoLnB1c2goYyk6YyYmYy5sZW5ndGgmJlwic3RyaW5nXCIhPT1kJiZnKGMpfSl9KGFyZ3VtZW50cyksZD9mPWgubGVuZ3RoOmImJihlPWMsaihiKSl9cmV0dXJuIHRoaXN9LHJlbW92ZTpmdW5jdGlvbigpe3JldHVybiBoJiZuLmVhY2goYXJndW1lbnRzLGZ1bmN0aW9uKGEsYil7dmFyIGM7d2hpbGUoKGM9bi5pbkFycmF5KGIsaCxjKSk+LTEpaC5zcGxpY2UoYywxKSxkJiYoZj49YyYmZi0tLGc+PWMmJmctLSl9KSx0aGlzfSxoYXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/bi5pbkFycmF5KGEsaCk+LTE6ISghaHx8IWgubGVuZ3RoKX0sZW1wdHk6ZnVuY3Rpb24oKXtyZXR1cm4gaD1bXSxmPTAsdGhpc30sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBoPWk9Yj12b2lkIDAsdGhpc30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haH0sbG9jazpmdW5jdGlvbigpe3JldHVybiBpPXZvaWQgMCxifHxrLmRpc2FibGUoKSx0aGlzfSxsb2NrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4haX0sZmlyZVdpdGg6ZnVuY3Rpb24oYSxiKXtyZXR1cm4haHx8YyYmIWl8fChiPWJ8fFtdLGI9W2EsYi5zbGljZT9iLnNsaWNlKCk6Yl0sZD9pLnB1c2goYik6aihiKSksdGhpc30sZmlyZTpmdW5jdGlvbigpe3JldHVybiBrLmZpcmVXaXRoKHRoaXMsYXJndW1lbnRzKSx0aGlzfSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhY319O3JldHVybiBrfSxuLmV4dGVuZCh7RGVmZXJyZWQ6ZnVuY3Rpb24oYSl7dmFyIGI9W1tcInJlc29sdmVcIixcImRvbmVcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVzb2x2ZWRcIl0sW1wicmVqZWN0XCIsXCJmYWlsXCIsbi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcInJlamVjdGVkXCJdLFtcIm5vdGlmeVwiLFwicHJvZ3Jlc3NcIixuLkNhbGxiYWNrcyhcIm1lbW9yeVwiKV1dLGM9XCJwZW5kaW5nXCIsZD17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gY30sYWx3YXlzOmZ1bmN0aW9uKCl7cmV0dXJuIGUuZG9uZShhcmd1bWVudHMpLmZhaWwoYXJndW1lbnRzKSx0aGlzfSx0aGVuOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzO3JldHVybiBuLkRlZmVycmVkKGZ1bmN0aW9uKGMpe24uZWFjaChiLGZ1bmN0aW9uKGIsZil7dmFyIGc9bi5pc0Z1bmN0aW9uKGFbYl0pJiZhW2JdO2VbZlsxXV0oZnVuY3Rpb24oKXt2YXIgYT1nJiZnLmFwcGx5KHRoaXMsYXJndW1lbnRzKTthJiZuLmlzRnVuY3Rpb24oYS5wcm9taXNlKT9hLnByb21pc2UoKS5kb25lKGMucmVzb2x2ZSkuZmFpbChjLnJlamVjdCkucHJvZ3Jlc3MoYy5ub3RpZnkpOmNbZlswXStcIldpdGhcIl0odGhpcz09PWQ/Yy5wcm9taXNlKCk6dGhpcyxnP1thXTphcmd1bWVudHMpfSl9KSxhPW51bGx9KS5wcm9taXNlKCl9LHByb21pc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGwhPWE/bi5leHRlbmQoYSxkKTpkfX0sZT17fTtyZXR1cm4gZC5waXBlPWQudGhlbixuLmVhY2goYixmdW5jdGlvbihhLGYpe3ZhciBnPWZbMl0saD1mWzNdO2RbZlsxXV09Zy5hZGQsaCYmZy5hZGQoZnVuY3Rpb24oKXtjPWh9LGJbMV5hXVsyXS5kaXNhYmxlLGJbMl1bMl0ubG9jayksZVtmWzBdXT1mdW5jdGlvbigpe3JldHVybiBlW2ZbMF0rXCJXaXRoXCJdKHRoaXM9PT1lP2Q6dGhpcyxhcmd1bWVudHMpLHRoaXN9LGVbZlswXStcIldpdGhcIl09Zy5maXJlV2l0aH0pLGQucHJvbWlzZShlKSxhJiZhLmNhbGwoZSxlKSxlfSx3aGVuOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz1kLmNhbGwoYXJndW1lbnRzKSxlPWMubGVuZ3RoLGY9MSE9PWV8fGEmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2U6MCxnPTE9PT1mP2E6bi5EZWZlcnJlZCgpLGg9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBmdW5jdGlvbihlKXtiW2FdPXRoaXMsY1thXT1hcmd1bWVudHMubGVuZ3RoPjE/ZC5jYWxsKGFyZ3VtZW50cyk6ZSxjPT09aT9nLm5vdGlmeVdpdGgoYixjKTotLWZ8fGcucmVzb2x2ZVdpdGgoYixjKX19LGksaixrO2lmKGU+MSlmb3IoaT1uZXcgQXJyYXkoZSksaj1uZXcgQXJyYXkoZSksaz1uZXcgQXJyYXkoZSk7ZT5iO2IrKyljW2JdJiZuLmlzRnVuY3Rpb24oY1tiXS5wcm9taXNlKT9jW2JdLnByb21pc2UoKS5kb25lKGgoYixrLGMpKS5mYWlsKGcucmVqZWN0KS5wcm9ncmVzcyhoKGIsaixpKSk6LS1mO3JldHVybiBmfHxnLnJlc29sdmVXaXRoKGssYyksZy5wcm9taXNlKCl9fSk7dmFyIEg7bi5mbi5yZWFkeT1mdW5jdGlvbihhKXtyZXR1cm4gbi5yZWFkeS5wcm9taXNlKCkuZG9uZShhKSx0aGlzfSxuLmV4dGVuZCh7aXNSZWFkeTohMSxyZWFkeVdhaXQ6MSxob2xkUmVhZHk6ZnVuY3Rpb24oYSl7YT9uLnJlYWR5V2FpdCsrOm4ucmVhZHkoITApfSxyZWFkeTpmdW5jdGlvbihhKXsoYT09PSEwPy0tbi5yZWFkeVdhaXQ6bi5pc1JlYWR5KXx8KG4uaXNSZWFkeT0hMCxhIT09ITAmJi0tbi5yZWFkeVdhaXQ+MHx8KEgucmVzb2x2ZVdpdGgobCxbbl0pLG4uZm4udHJpZ2dlckhhbmRsZXImJihuKGwpLnRyaWdnZXJIYW5kbGVyKFwicmVhZHlcIiksbihsKS5vZmYoXCJyZWFkeVwiKSkpKX19KTtmdW5jdGlvbiBJKCl7bC5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSxuLnJlYWR5KCl9bi5yZWFkeS5wcm9taXNlPWZ1bmN0aW9uKGIpe3JldHVybiBIfHwoSD1uLkRlZmVycmVkKCksXCJjb21wbGV0ZVwiPT09bC5yZWFkeVN0YXRlP3NldFRpbWVvdXQobi5yZWFkeSk6KGwuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixJLCExKSxhLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsSSwhMSkpKSxILnByb21pc2UoYil9LG4ucmVhZHkucHJvbWlzZSgpO3ZhciBKPW4uYWNjZXNzPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3ZhciBoPTAsaT1hLmxlbmd0aCxqPW51bGw9PWM7aWYoXCJvYmplY3RcIj09PW4udHlwZShjKSl7ZT0hMDtmb3IoaCBpbiBjKW4uYWNjZXNzKGEsYixoLGNbaF0sITAsZixnKX1lbHNlIGlmKHZvaWQgMCE9PWQmJihlPSEwLG4uaXNGdW5jdGlvbihkKXx8KGc9ITApLGomJihnPyhiLmNhbGwoYSxkKSxiPW51bGwpOihqPWIsYj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGouY2FsbChuKGEpLGMpfSkpLGIpKWZvcig7aT5oO2grKyliKGFbaF0sYyxnP2Q6ZC5jYWxsKGFbaF0saCxiKGFbaF0sYykpKTtyZXR1cm4gZT9hOmo/Yi5jYWxsKGEpOmk/YihhWzBdLGMpOmZ9O24uYWNjZXB0RGF0YT1mdW5jdGlvbihhKXtyZXR1cm4gMT09PWEubm9kZVR5cGV8fDk9PT1hLm5vZGVUeXBlfHwhK2Eubm9kZVR5cGV9O2Z1bmN0aW9uIEsoKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5jYWNoZT17fSwwLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm57fX19KSx0aGlzLmV4cGFuZG89bi5leHBhbmRvK01hdGgucmFuZG9tKCl9Sy51aWQ9MSxLLmFjY2VwdHM9bi5hY2NlcHREYXRhLEsucHJvdG90eXBlPXtrZXk6ZnVuY3Rpb24oYSl7aWYoIUsuYWNjZXB0cyhhKSlyZXR1cm4gMDt2YXIgYj17fSxjPWFbdGhpcy5leHBhbmRvXTtpZighYyl7Yz1LLnVpZCsrO3RyeXtiW3RoaXMuZXhwYW5kb109e3ZhbHVlOmN9LE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGEsYil9Y2F0Y2goZCl7Ylt0aGlzLmV4cGFuZG9dPWMsbi5leHRlbmQoYSxiKX19cmV0dXJuIHRoaXMuY2FjaGVbY118fCh0aGlzLmNhY2hlW2NdPXt9KSxjfSxzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU9dGhpcy5rZXkoYSksZj10aGlzLmNhY2hlW2VdO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKWZbYl09YztlbHNlIGlmKG4uaXNFbXB0eU9iamVjdChmKSluLmV4dGVuZCh0aGlzLmNhY2hlW2VdLGIpO2Vsc2UgZm9yKGQgaW4gYilmW2RdPWJbZF07cmV0dXJuIGZ9LGdldDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2FjaGVbdGhpcy5rZXkoYSldO3JldHVybiB2b2lkIDA9PT1iP2M6Y1tiXX0sYWNjZXNzOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gdm9pZCAwPT09Ynx8YiYmXCJzdHJpbmdcIj09dHlwZW9mIGImJnZvaWQgMD09PWM/KGQ9dGhpcy5nZXQoYSxiKSx2b2lkIDAhPT1kP2Q6dGhpcy5nZXQoYSxuLmNhbWVsQ2FzZShiKSkpOih0aGlzLnNldChhLGIsYyksdm9pZCAwIT09Yz9jOmIpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzLmtleShhKSxnPXRoaXMuY2FjaGVbZl07aWYodm9pZCAwPT09Yil0aGlzLmNhY2hlW2ZdPXt9O2Vsc2V7bi5pc0FycmF5KGIpP2Q9Yi5jb25jYXQoYi5tYXAobi5jYW1lbENhc2UpKTooZT1uLmNhbWVsQ2FzZShiKSxiIGluIGc/ZD1bYixlXTooZD1lLGQ9ZCBpbiBnP1tkXTpkLm1hdGNoKEUpfHxbXSkpLGM9ZC5sZW5ndGg7d2hpbGUoYy0tKWRlbGV0ZSBnW2RbY11dfX0saGFzRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4hbi5pc0VtcHR5T2JqZWN0KHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXXx8e30pfSxkaXNjYXJkOmZ1bmN0aW9uKGEpe2FbdGhpcy5leHBhbmRvXSYmZGVsZXRlIHRoaXMuY2FjaGVbYVt0aGlzLmV4cGFuZG9dXX19O3ZhciBMPW5ldyBLLE09bmV3IEssTj0vXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sTz0vKFtBLVpdKS9nO2Z1bmN0aW9uIFAoYSxiLGMpe3ZhciBkO2lmKHZvaWQgMD09PWMmJjE9PT1hLm5vZGVUeXBlKWlmKGQ9XCJkYXRhLVwiK2IucmVwbGFjZShPLFwiLSQxXCIpLnRvTG93ZXJDYXNlKCksYz1hLmdldEF0dHJpYnV0ZShkKSxcInN0cmluZ1wiPT10eXBlb2YgYyl7dHJ5e2M9XCJ0cnVlXCI9PT1jPyEwOlwiZmFsc2VcIj09PWM/ITE6XCJudWxsXCI9PT1jP251bGw6K2MrXCJcIj09PWM/K2M6Ti50ZXN0KGMpP24ucGFyc2VKU09OKGMpOmN9Y2F0Y2goZSl7fU0uc2V0KGEsYixjKX1lbHNlIGM9dm9pZCAwO3JldHVybiBjfW4uZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiBNLmhhc0RhdGEoYSl8fEwuaGFzRGF0YShhKX0sZGF0YTpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE0uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe00ucmVtb3ZlKGEsYilcbn0sX2RhdGE6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBMLmFjY2VzcyhhLGIsYyl9LF9yZW1vdmVEYXRhOmZ1bmN0aW9uKGEsYil7TC5yZW1vdmUoYSxiKX19KSxuLmZuLmV4dGVuZCh7ZGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXNbMF0sZz1mJiZmLmF0dHJpYnV0ZXM7aWYodm9pZCAwPT09YSl7aWYodGhpcy5sZW5ndGgmJihlPU0uZ2V0KGYpLDE9PT1mLm5vZGVUeXBlJiYhTC5nZXQoZixcImhhc0RhdGFBdHRyc1wiKSkpe2M9Zy5sZW5ndGg7d2hpbGUoYy0tKWdbY10mJihkPWdbY10ubmFtZSwwPT09ZC5pbmRleE9mKFwiZGF0YS1cIikmJihkPW4uY2FtZWxDYXNlKGQuc2xpY2UoNSkpLFAoZixkLGVbZF0pKSk7TC5zZXQoZixcImhhc0RhdGFBdHRyc1wiLCEwKX1yZXR1cm4gZX1yZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgYT90aGlzLmVhY2goZnVuY3Rpb24oKXtNLnNldCh0aGlzLGEpfSk6Sih0aGlzLGZ1bmN0aW9uKGIpe3ZhciBjLGQ9bi5jYW1lbENhc2UoYSk7aWYoZiYmdm9pZCAwPT09Yil7aWYoYz1NLmdldChmLGEpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1NLmdldChmLGQpLHZvaWQgMCE9PWMpcmV0dXJuIGM7aWYoYz1QKGYsZCx2b2lkIDApLHZvaWQgMCE9PWMpcmV0dXJuIGN9ZWxzZSB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1NLmdldCh0aGlzLGQpO00uc2V0KHRoaXMsZCxiKSwtMSE9PWEuaW5kZXhPZihcIi1cIikmJnZvaWQgMCE9PWMmJk0uc2V0KHRoaXMsYSxiKX0pfSxudWxsLGIsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsITApfSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtNLnJlbW92ZSh0aGlzLGEpfSl9fSksbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYT8oYj0oYnx8XCJmeFwiKStcInF1ZXVlXCIsZD1MLmdldChhLGIpLGMmJighZHx8bi5pc0FycmF5KGMpP2Q9TC5hY2Nlc3MoYSxiLG4ubWFrZUFycmF5KGMpKTpkLnB1c2goYykpLGR8fFtdKTp2b2lkIDB9LGRlcXVldWU6ZnVuY3Rpb24oYSxiKXtiPWJ8fFwiZnhcIjt2YXIgYz1uLnF1ZXVlKGEsYiksZD1jLmxlbmd0aCxlPWMuc2hpZnQoKSxmPW4uX3F1ZXVlSG9va3MoYSxiKSxnPWZ1bmN0aW9uKCl7bi5kZXF1ZXVlKGEsYil9O1wiaW5wcm9ncmVzc1wiPT09ZSYmKGU9Yy5zaGlmdCgpLGQtLSksZSYmKFwiZnhcIj09PWImJmMudW5zaGlmdChcImlucHJvZ3Jlc3NcIiksZGVsZXRlIGYuc3RvcCxlLmNhbGwoYSxnLGYpKSwhZCYmZiYmZi5lbXB0eS5maXJlKCl9LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGEsYil7dmFyIGM9YitcInF1ZXVlSG9va3NcIjtyZXR1cm4gTC5nZXQoYSxjKXx8TC5hY2Nlc3MoYSxjLHtlbXB0eTpuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpe0wucmVtb3ZlKGEsW2IrXCJxdWV1ZVwiLGNdKX0pfSl9fSksbi5mbi5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGEsYil7dmFyIGM9MjtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGI9YSxhPVwiZnhcIixjLS0pLGFyZ3VtZW50cy5sZW5ndGg8Yz9uLnF1ZXVlKHRoaXNbMF0sYSk6dm9pZCAwPT09Yj90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPW4ucXVldWUodGhpcyxhLGIpO24uX3F1ZXVlSG9va3ModGhpcyxhKSxcImZ4XCI9PT1hJiZcImlucHJvZ3Jlc3NcIiE9PWNbMF0mJm4uZGVxdWV1ZSh0aGlzLGEpfSl9LGRlcXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24uZGVxdWV1ZSh0aGlzLGEpfSl9LGNsZWFyUXVldWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucXVldWUoYXx8XCJmeFwiLFtdKX0scHJvbWlzZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9MSxlPW4uRGVmZXJyZWQoKSxmPXRoaXMsZz10aGlzLmxlbmd0aCxoPWZ1bmN0aW9uKCl7LS1kfHxlLnJlc29sdmVXaXRoKGYsW2ZdKX07XCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT12b2lkIDApLGE9YXx8XCJmeFwiO3doaWxlKGctLSljPUwuZ2V0KGZbZ10sYStcInF1ZXVlSG9va3NcIiksYyYmYy5lbXB0eSYmKGQrKyxjLmVtcHR5LmFkZChoKSk7cmV0dXJuIGgoKSxlLnByb21pc2UoYil9fSk7dmFyIFE9L1srLV0/KD86XFxkKlxcLnwpXFxkKyg/OltlRV1bKy1dP1xcZCt8KS8uc291cmNlLFI9W1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLFM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1ifHxhLFwibm9uZVwiPT09bi5jc3MoYSxcImRpc3BsYXlcIil8fCFuLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKX0sVD0vXig/OmNoZWNrYm94fHJhZGlvKSQvaTshZnVuY3Rpb24oKXt2YXIgYT1sLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxiPWEuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKSxjPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO2Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwicmFkaW9cIiksYy5zZXRBdHRyaWJ1dGUoXCJjaGVja2VkXCIsXCJjaGVja2VkXCIpLGMuc2V0QXR0cmlidXRlKFwibmFtZVwiLFwidFwiKSxiLmFwcGVuZENoaWxkKGMpLGsuY2hlY2tDbG9uZT1iLmNsb25lTm9kZSghMCkuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuY2hlY2tlZCxiLmlubmVySFRNTD1cIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIixrLm5vQ2xvbmVDaGVja2VkPSEhYi5jbG9uZU5vZGUoITApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWV9KCk7dmFyIFU9XCJ1bmRlZmluZWRcIjtrLmZvY3VzaW5CdWJibGVzPVwib25mb2N1c2luXCJpbiBhO3ZhciBWPS9ea2V5LyxXPS9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFg9L14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFk9L14oW14uXSopKD86XFwuKC4rKXwpJC87ZnVuY3Rpb24gWigpe3JldHVybiEwfWZ1bmN0aW9uICQoKXtyZXR1cm4hMX1mdW5jdGlvbiBfKCl7dHJ5e3JldHVybiBsLmFjdGl2ZUVsZW1lbnR9Y2F0Y2goYSl7fX1uLmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPUwuZ2V0KGEpO2lmKHIpe2MuaGFuZGxlciYmKGY9YyxjPWYuaGFuZGxlcixlPWYuc2VsZWN0b3IpLGMuZ3VpZHx8KGMuZ3VpZD1uLmd1aWQrKyksKGk9ci5ldmVudHMpfHwoaT1yLmV2ZW50cz17fSksKGc9ci5oYW5kbGUpfHwoZz1yLmhhbmRsZT1mdW5jdGlvbihiKXtyZXR1cm4gdHlwZW9mIG4hPT1VJiZuLmV2ZW50LnRyaWdnZXJlZCE9PWIudHlwZT9uLmV2ZW50LmRpc3BhdGNoLmFwcGx5KGEsYXJndW1lbnRzKTp2b2lkIDB9KSxiPShifHxcIlwiKS5tYXRjaChFKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8mJihsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZT9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30saz1uLmV4dGVuZCh7dHlwZTpvLG9yaWdUeXBlOnEsZGF0YTpkLGhhbmRsZXI6YyxndWlkOmMuZ3VpZCxzZWxlY3RvcjplLG5lZWRzQ29udGV4dDplJiZuLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoZSksbmFtZXNwYWNlOnAuam9pbihcIi5cIil9LGYpLChtPWlbb10pfHwobT1pW29dPVtdLG0uZGVsZWdhdGVDb3VudD0wLGwuc2V0dXAmJmwuc2V0dXAuY2FsbChhLGQscCxnKSE9PSExfHxhLmFkZEV2ZW50TGlzdGVuZXImJmEuYWRkRXZlbnRMaXN0ZW5lcihvLGcsITEpKSxsLmFkZCYmKGwuYWRkLmNhbGwoYSxrKSxrLmhhbmRsZXIuZ3VpZHx8KGsuaGFuZGxlci5ndWlkPWMuZ3VpZCkpLGU/bS5zcGxpY2UobS5kZWxlZ2F0ZUNvdW50KyssMCxrKTptLnB1c2goayksbi5ldmVudC5nbG9iYWxbb109ITApfX0scmVtb3ZlOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGYsZyxoLGksaixrLGwsbSxvLHAscSxyPUwuaGFzRGF0YShhKSYmTC5nZXQoYSk7aWYociYmKGk9ci5ldmVudHMpKXtiPShifHxcIlwiKS5tYXRjaChFKXx8W1wiXCJdLGo9Yi5sZW5ndGg7d2hpbGUoai0tKWlmKGg9WS5leGVjKGJbal0pfHxbXSxvPXE9aFsxXSxwPShoWzJdfHxcIlwiKS5zcGxpdChcIi5cIikuc29ydCgpLG8pe2w9bi5ldmVudC5zcGVjaWFsW29dfHx7fSxvPShkP2wuZGVsZWdhdGVUeXBlOmwuYmluZFR5cGUpfHxvLG09aVtvXXx8W10saD1oWzJdJiZuZXcgUmVnRXhwKFwiKF58XFxcXC4pXCIrcC5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikrXCIoXFxcXC58JClcIiksZz1mPW0ubGVuZ3RoO3doaWxlKGYtLSlrPW1bZl0sIWUmJnEhPT1rLm9yaWdUeXBlfHxjJiZjLmd1aWQhPT1rLmd1aWR8fGgmJiFoLnRlc3Qoay5uYW1lc3BhY2UpfHxkJiZkIT09ay5zZWxlY3RvciYmKFwiKipcIiE9PWR8fCFrLnNlbGVjdG9yKXx8KG0uc3BsaWNlKGYsMSksay5zZWxlY3RvciYmbS5kZWxlZ2F0ZUNvdW50LS0sbC5yZW1vdmUmJmwucmVtb3ZlLmNhbGwoYSxrKSk7ZyYmIW0ubGVuZ3RoJiYobC50ZWFyZG93biYmbC50ZWFyZG93bi5jYWxsKGEscCxyLmhhbmRsZSkhPT0hMXx8bi5yZW1vdmVFdmVudChhLG8sci5oYW5kbGUpLGRlbGV0ZSBpW29dKX1lbHNlIGZvcihvIGluIGkpbi5ldmVudC5yZW1vdmUoYSxvK2Jbal0sYyxkLCEwKTtuLmlzRW1wdHlPYmplY3QoaSkmJihkZWxldGUgci5oYW5kbGUsTC5yZW1vdmUoYSxcImV2ZW50c1wiKSl9fSx0cmlnZ2VyOmZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmLGcsaCxpLGssbSxvLHA9W2R8fGxdLHE9ai5jYWxsKGIsXCJ0eXBlXCIpP2IudHlwZTpiLHI9ai5jYWxsKGIsXCJuYW1lc3BhY2VcIik/Yi5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpOltdO2lmKGc9aD1kPWR8fGwsMyE9PWQubm9kZVR5cGUmJjghPT1kLm5vZGVUeXBlJiYhWC50ZXN0KHErbi5ldmVudC50cmlnZ2VyZWQpJiYocS5pbmRleE9mKFwiLlwiKT49MCYmKHI9cS5zcGxpdChcIi5cIikscT1yLnNoaWZ0KCksci5zb3J0KCkpLGs9cS5pbmRleE9mKFwiOlwiKTwwJiZcIm9uXCIrcSxiPWJbbi5leHBhbmRvXT9iOm5ldyBuLkV2ZW50KHEsXCJvYmplY3RcIj09dHlwZW9mIGImJmIpLGIuaXNUcmlnZ2VyPWU/MjozLGIubmFtZXNwYWNlPXIuam9pbihcIi5cIiksYi5uYW1lc3BhY2VfcmU9Yi5uYW1lc3BhY2U/bmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Iuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpOm51bGwsYi5yZXN1bHQ9dm9pZCAwLGIudGFyZ2V0fHwoYi50YXJnZXQ9ZCksYz1udWxsPT1jP1tiXTpuLm1ha2VBcnJheShjLFtiXSksbz1uLmV2ZW50LnNwZWNpYWxbcV18fHt9LGV8fCFvLnRyaWdnZXJ8fG8udHJpZ2dlci5hcHBseShkLGMpIT09ITEpKXtpZighZSYmIW8ubm9CdWJibGUmJiFuLmlzV2luZG93KGQpKXtmb3IoaT1vLmRlbGVnYXRlVHlwZXx8cSxYLnRlc3QoaStxKXx8KGc9Zy5wYXJlbnROb2RlKTtnO2c9Zy5wYXJlbnROb2RlKXAucHVzaChnKSxoPWc7aD09PShkLm93bmVyRG9jdW1lbnR8fGwpJiZwLnB1c2goaC5kZWZhdWx0Vmlld3x8aC5wYXJlbnRXaW5kb3d8fGEpfWY9MDt3aGlsZSgoZz1wW2YrK10pJiYhYi5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKWIudHlwZT1mPjE/aTpvLmJpbmRUeXBlfHxxLG09KEwuZ2V0KGcsXCJldmVudHNcIil8fHt9KVtiLnR5cGVdJiZMLmdldChnLFwiaGFuZGxlXCIpLG0mJm0uYXBwbHkoZyxjKSxtPWsmJmdba10sbSYmbS5hcHBseSYmbi5hY2NlcHREYXRhKGcpJiYoYi5yZXN1bHQ9bS5hcHBseShnLGMpLGIucmVzdWx0PT09ITEmJmIucHJldmVudERlZmF1bHQoKSk7cmV0dXJuIGIudHlwZT1xLGV8fGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fG8uX2RlZmF1bHQmJm8uX2RlZmF1bHQuYXBwbHkocC5wb3AoKSxjKSE9PSExfHwhbi5hY2NlcHREYXRhKGQpfHxrJiZuLmlzRnVuY3Rpb24oZFtxXSkmJiFuLmlzV2luZG93KGQpJiYoaD1kW2tdLGgmJihkW2tdPW51bGwpLG4uZXZlbnQudHJpZ2dlcmVkPXEsZFtxXSgpLG4uZXZlbnQudHJpZ2dlcmVkPXZvaWQgMCxoJiYoZFtrXT1oKSksYi5yZXN1bHR9fSxkaXNwYXRjaDpmdW5jdGlvbihhKXthPW4uZXZlbnQuZml4KGEpO3ZhciBiLGMsZSxmLGcsaD1bXSxpPWQuY2FsbChhcmd1bWVudHMpLGo9KEwuZ2V0KHRoaXMsXCJldmVudHNcIil8fHt9KVthLnR5cGVdfHxbXSxrPW4uZXZlbnQuc3BlY2lhbFthLnR5cGVdfHx7fTtpZihpWzBdPWEsYS5kZWxlZ2F0ZVRhcmdldD10aGlzLCFrLnByZURpc3BhdGNofHxrLnByZURpc3BhdGNoLmNhbGwodGhpcyxhKSE9PSExKXtoPW4uZXZlbnQuaGFuZGxlcnMuY2FsbCh0aGlzLGEsaiksYj0wO3doaWxlKChmPWhbYisrXSkmJiFhLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2EuY3VycmVudFRhcmdldD1mLmVsZW0sYz0wO3doaWxlKChnPWYuaGFuZGxlcnNbYysrXSkmJiFhLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkpKCFhLm5hbWVzcGFjZV9yZXx8YS5uYW1lc3BhY2VfcmUudGVzdChnLm5hbWVzcGFjZSkpJiYoYS5oYW5kbGVPYmo9ZyxhLmRhdGE9Zy5kYXRhLGU9KChuLmV2ZW50LnNwZWNpYWxbZy5vcmlnVHlwZV18fHt9KS5oYW5kbGV8fGcuaGFuZGxlcikuYXBwbHkoZi5lbGVtLGkpLHZvaWQgMCE9PWUmJihhLnJlc3VsdD1lKT09PSExJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCkpKX1yZXR1cm4gay5wb3N0RGlzcGF0Y2gmJmsucG9zdERpc3BhdGNoLmNhbGwodGhpcyxhKSxhLnJlc3VsdH19LGhhbmRsZXJzOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGYsZz1bXSxoPWIuZGVsZWdhdGVDb3VudCxpPWEudGFyZ2V0O2lmKGgmJmkubm9kZVR5cGUmJighYS5idXR0b258fFwiY2xpY2tcIiE9PWEudHlwZSkpZm9yKDtpIT09dGhpcztpPWkucGFyZW50Tm9kZXx8dGhpcylpZihpLmRpc2FibGVkIT09ITB8fFwiY2xpY2tcIiE9PWEudHlwZSl7Zm9yKGQ9W10sYz0wO2g+YztjKyspZj1iW2NdLGU9Zi5zZWxlY3RvcitcIiBcIix2b2lkIDA9PT1kW2VdJiYoZFtlXT1mLm5lZWRzQ29udGV4dD9uKGUsdGhpcykuaW5kZXgoaSk+PTA6bi5maW5kKGUsdGhpcyxudWxsLFtpXSkubGVuZ3RoKSxkW2VdJiZkLnB1c2goZik7ZC5sZW5ndGgmJmcucHVzaCh7ZWxlbTppLGhhbmRsZXJzOmR9KX1yZXR1cm4gaDxiLmxlbmd0aCYmZy5wdXNoKHtlbGVtOnRoaXMsaGFuZGxlcnM6Yi5zbGljZShoKX0pLGd9LHByb3BzOlwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLGZpeEhvb2tzOnt9LGtleUhvb2tzOntwcm9wczpcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIG51bGw9PWEud2hpY2gmJihhLndoaWNoPW51bGwhPWIuY2hhckNvZGU/Yi5jaGFyQ29kZTpiLmtleUNvZGUpLGF9fSxtb3VzZUhvb2tzOntwcm9wczpcImJ1dHRvbiBidXR0b25zIGNsaWVudFggY2xpZW50WSBvZmZzZXRYIG9mZnNldFkgcGFnZVggcGFnZVkgc2NyZWVuWCBzY3JlZW5ZIHRvRWxlbWVudFwiLnNwbGl0KFwiIFwiKSxmaWx0ZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj1iLmJ1dHRvbjtyZXR1cm4gbnVsbD09YS5wYWdlWCYmbnVsbCE9Yi5jbGllbnRYJiYoYz1hLnRhcmdldC5vd25lckRvY3VtZW50fHxsLGQ9Yy5kb2N1bWVudEVsZW1lbnQsZT1jLmJvZHksYS5wYWdlWD1iLmNsaWVudFgrKGQmJmQuc2Nyb2xsTGVmdHx8ZSYmZS5zY3JvbGxMZWZ0fHwwKS0oZCYmZC5jbGllbnRMZWZ0fHxlJiZlLmNsaWVudExlZnR8fDApLGEucGFnZVk9Yi5jbGllbnRZKyhkJiZkLnNjcm9sbFRvcHx8ZSYmZS5zY3JvbGxUb3B8fDApLShkJiZkLmNsaWVudFRvcHx8ZSYmZS5jbGllbnRUb3B8fDApKSxhLndoaWNofHx2b2lkIDA9PT1mfHwoYS53aGljaD0xJmY/MToyJmY/Mzo0JmY/MjowKSxhfX0sZml4OmZ1bmN0aW9uKGEpe2lmKGFbbi5leHBhbmRvXSlyZXR1cm4gYTt2YXIgYixjLGQsZT1hLnR5cGUsZj1hLGc9dGhpcy5maXhIb29rc1tlXTtnfHwodGhpcy5maXhIb29rc1tlXT1nPVcudGVzdChlKT90aGlzLm1vdXNlSG9va3M6Vi50ZXN0KGUpP3RoaXMua2V5SG9va3M6e30pLGQ9Zy5wcm9wcz90aGlzLnByb3BzLmNvbmNhdChnLnByb3BzKTp0aGlzLnByb3BzLGE9bmV3IG4uRXZlbnQoZiksYj1kLmxlbmd0aDt3aGlsZShiLS0pYz1kW2JdLGFbY109ZltjXTtyZXR1cm4gYS50YXJnZXR8fChhLnRhcmdldD1sKSwzPT09YS50YXJnZXQubm9kZVR5cGUmJihhLnRhcmdldD1hLnRhcmdldC5wYXJlbnROb2RlKSxnLmZpbHRlcj9nLmZpbHRlcihhLGYpOmF9LHNwZWNpYWw6e2xvYWQ6e25vQnViYmxlOiEwfSxmb2N1czp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzIT09XygpJiZ0aGlzLmZvY3VzPyh0aGlzLmZvY3VzKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNpblwifSxibHVyOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXM9PT1fKCkmJnRoaXMuYmx1cj8odGhpcy5ibHVyKCksITEpOnZvaWQgMH0sZGVsZWdhdGVUeXBlOlwiZm9jdXNvdXRcIn0sY2xpY2s6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm5cImNoZWNrYm94XCI9PT10aGlzLnR5cGUmJnRoaXMuY2xpY2smJm4ubm9kZU5hbWUodGhpcyxcImlucHV0XCIpPyh0aGlzLmNsaWNrKCksITEpOnZvaWQgMH0sX2RlZmF1bHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG4ubm9kZU5hbWUoYS50YXJnZXQsXCJhXCIpfX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oYSl7dm9pZCAwIT09YS5yZXN1bHQmJmEub3JpZ2luYWxFdmVudCYmKGEub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1hLnJlc3VsdCl9fX0sc2ltdWxhdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5leHRlbmQobmV3IG4uRXZlbnQsYyx7dHlwZTphLGlzU2ltdWxhdGVkOiEwLG9yaWdpbmFsRXZlbnQ6e319KTtkP24uZXZlbnQudHJpZ2dlcihlLG51bGwsYik6bi5ldmVudC5kaXNwYXRjaC5jYWxsKGIsZSksZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSYmYy5wcmV2ZW50RGVmYXVsdCgpfX0sbi5yZW1vdmVFdmVudD1mdW5jdGlvbihhLGIsYyl7YS5yZW1vdmVFdmVudExpc3RlbmVyJiZhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjLCExKX0sbi5FdmVudD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzIGluc3RhbmNlb2Ygbi5FdmVudD8oYSYmYS50eXBlPyh0aGlzLm9yaWdpbmFsRXZlbnQ9YSx0aGlzLnR5cGU9YS50eXBlLHRoaXMuaXNEZWZhdWx0UHJldmVudGVkPWEuZGVmYXVsdFByZXZlbnRlZHx8dm9pZCAwPT09YS5kZWZhdWx0UHJldmVudGVkJiZhLnJldHVyblZhbHVlPT09ITE/WjokKTp0aGlzLnR5cGU9YSxiJiZuLmV4dGVuZCh0aGlzLGIpLHRoaXMudGltZVN0YW1wPWEmJmEudGltZVN0YW1wfHxuLm5vdygpLHZvaWQodGhpc1tuLmV4cGFuZG9dPSEwKSk6bmV3IG4uRXZlbnQoYSxiKX0sbi5FdmVudC5wcm90b3R5cGU9e2lzRGVmYXVsdFByZXZlbnRlZDokLGlzUHJvcGFnYXRpb25TdG9wcGVkOiQsaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6JCxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1aLGEmJmEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9WixhJiZhLnN0b3BQcm9wYWdhdGlvbiYmYS5zdG9wUHJvcGFnYXRpb24oKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ9WixhJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLnN0b3BQcm9wYWdhdGlvbigpfX0sbi5lYWNoKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCIscG9pbnRlcmVudGVyOlwicG9pbnRlcm92ZXJcIixwb2ludGVybGVhdmU6XCJwb2ludGVyb3V0XCJ9LGZ1bmN0aW9uKGEsYil7bi5ldmVudC5zcGVjaWFsW2FdPXtkZWxlZ2F0ZVR5cGU6YixiaW5kVHlwZTpiLGhhbmRsZTpmdW5jdGlvbihhKXt2YXIgYyxkPXRoaXMsZT1hLnJlbGF0ZWRUYXJnZXQsZj1hLmhhbmRsZU9iajtyZXR1cm4oIWV8fGUhPT1kJiYhbi5jb250YWlucyhkLGUpKSYmKGEudHlwZT1mLm9yaWdUeXBlLGM9Zi5oYW5kbGVyLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhLnR5cGU9YiksY319fSksay5mb2N1c2luQnViYmxlc3x8bi5lYWNoKHtmb2N1czpcImZvY3VzaW5cIixibHVyOlwiZm9jdXNvdXRcIn0sZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbihhKXtuLmV2ZW50LnNpbXVsYXRlKGIsYS50YXJnZXQsbi5ldmVudC5maXgoYSksITApfTtuLmV2ZW50LnNwZWNpYWxbYl09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGQ9dGhpcy5vd25lckRvY3VtZW50fHx0aGlzLGU9TC5hY2Nlc3MoZCxiKTtlfHxkLmFkZEV2ZW50TGlzdGVuZXIoYSxjLCEwKSxMLmFjY2VzcyhkLGIsKGV8fDApKzEpfSx0ZWFyZG93bjpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYiktMTtlP0wuYWNjZXNzKGQsYixlKTooZC5yZW1vdmVFdmVudExpc3RlbmVyKGEsYywhMCksTC5yZW1vdmUoZCxiKSl9fX0pLG4uZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGc7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1jfHxiLGI9dm9pZCAwKTtmb3IoZyBpbiBhKXRoaXMub24oZyxiLGMsYVtnXSxlKTtyZXR1cm4gdGhpc31pZihudWxsPT1jJiZudWxsPT1kPyhkPWIsYz1iPXZvaWQgMCk6bnVsbD09ZCYmKFwic3RyaW5nXCI9PXR5cGVvZiBiPyhkPWMsYz12b2lkIDApOihkPWMsYz1iLGI9dm9pZCAwKSksZD09PSExKWQ9JDtlbHNlIGlmKCFkKXJldHVybiB0aGlzO3JldHVybiAxPT09ZSYmKGY9ZCxkPWZ1bmN0aW9uKGEpe3JldHVybiBuKCkub2ZmKGEpLGYuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxkLmd1aWQ9Zi5ndWlkfHwoZi5ndWlkPW4uZ3VpZCsrKSksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5hZGQodGhpcyxhLGQsYyxiKX0pfSxvbmU6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMub24oYSxiLGMsZCwxKX0sb2ZmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO2lmKGEmJmEucHJldmVudERlZmF1bHQmJmEuaGFuZGxlT2JqKXJldHVybiBkPWEuaGFuZGxlT2JqLG4oYS5kZWxlZ2F0ZVRhcmdldCkub2ZmKGQubmFtZXNwYWNlP2Qub3JpZ1R5cGUrXCIuXCIrZC5uYW1lc3BhY2U6ZC5vcmlnVHlwZSxkLnNlbGVjdG9yLGQuaGFuZGxlciksdGhpcztpZihcIm9iamVjdFwiPT10eXBlb2YgYSl7Zm9yKGUgaW4gYSl0aGlzLm9mZihlLGIsYVtlXSk7cmV0dXJuIHRoaXN9cmV0dXJuKGI9PT0hMXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYikmJihjPWIsYj12b2lkIDApLGM9PT0hMSYmKGM9JCksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC5yZW1vdmUodGhpcyxhLGMsYil9KX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmV2ZW50LnRyaWdnZXIoYSxiLHRoaXMpfSl9LHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpc1swXTtyZXR1cm4gYz9uLmV2ZW50LnRyaWdnZXIoYSxiLGMsITApOnZvaWQgMH19KTt2YXIgYWI9LzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLGJiPS88KFtcXHc6XSspLyxjYj0vPHwmIz9cXHcrOy8sZGI9LzwoPzpzY3JpcHR8c3R5bGV8bGluaykvaSxlYj0vY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLGZiPS9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksZ2I9L150cnVlXFwvKC4qKS8saGI9L15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLGliPXtvcHRpb246WzEsXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsXCI8L3NlbGVjdD5cIl0sdGhlYWQ6WzEsXCI8dGFibGU+XCIsXCI8L3RhYmxlPlwiXSxjb2w6WzIsXCI8dGFibGU+PGNvbGdyb3VwPlwiLFwiPC9jb2xncm91cD48L3RhYmxlPlwiXSx0cjpbMixcIjx0YWJsZT48dGJvZHk+XCIsXCI8L3Rib2R5PjwvdGFibGU+XCJdLHRkOlszLFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIl0sX2RlZmF1bHQ6WzAsXCJcIixcIlwiXX07aWIub3B0Z3JvdXA9aWIub3B0aW9uLGliLnRib2R5PWliLnRmb290PWliLmNvbGdyb3VwPWliLmNhcHRpb249aWIudGhlYWQsaWIudGg9aWIudGQ7ZnVuY3Rpb24gamIoYSxiKXtyZXR1cm4gbi5ub2RlTmFtZShhLFwidGFibGVcIikmJm4ubm9kZU5hbWUoMTEhPT1iLm5vZGVUeXBlP2I6Yi5maXJzdENoaWxkLFwidHJcIik/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdfHxhLmFwcGVuZENoaWxkKGEub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikpOmF9ZnVuY3Rpb24ga2IoYSl7cmV0dXJuIGEudHlwZT0obnVsbCE9PWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkrXCIvXCIrYS50eXBlLGF9ZnVuY3Rpb24gbGIoYSl7dmFyIGI9Z2IuZXhlYyhhLnR5cGUpO3JldHVybiBiP2EudHlwZT1iWzFdOmEucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKSxhfWZ1bmN0aW9uIG1iKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKUwuc2V0KGFbY10sXCJnbG9iYWxFdmFsXCIsIWJ8fEwuZ2V0KGJbY10sXCJnbG9iYWxFdmFsXCIpKX1mdW5jdGlvbiBuYihhLGIpe3ZhciBjLGQsZSxmLGcsaCxpLGo7aWYoMT09PWIubm9kZVR5cGUpe2lmKEwuaGFzRGF0YShhKSYmKGY9TC5hY2Nlc3MoYSksZz1MLnNldChiLGYpLGo9Zi5ldmVudHMpKXtkZWxldGUgZy5oYW5kbGUsZy5ldmVudHM9e307Zm9yKGUgaW4gailmb3IoYz0wLGQ9altlXS5sZW5ndGg7ZD5jO2MrKyluLmV2ZW50LmFkZChiLGUsaltlXVtjXSl9TS5oYXNEYXRhKGEpJiYoaD1NLmFjY2VzcyhhKSxpPW4uZXh0ZW5kKHt9LGgpLE0uc2V0KGIsaSkpfX1mdW5jdGlvbiBvYihhLGIpe3ZhciBjPWEuZ2V0RWxlbWVudHNCeVRhZ05hbWU/YS5nZXRFbGVtZW50c0J5VGFnTmFtZShifHxcIipcIik6YS5xdWVyeVNlbGVjdG9yQWxsP2EucXVlcnlTZWxlY3RvckFsbChifHxcIipcIik6W107cmV0dXJuIHZvaWQgMD09PWJ8fGImJm4ubm9kZU5hbWUoYSxiKT9uLm1lcmdlKFthXSxjKTpjfWZ1bmN0aW9uIHBiKGEsYil7dmFyIGM9Yi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1wiaW5wdXRcIj09PWMmJlQudGVzdChhLnR5cGUpP2IuY2hlY2tlZD1hLmNoZWNrZWQ6KFwiaW5wdXRcIj09PWN8fFwidGV4dGFyZWFcIj09PWMpJiYoYi5kZWZhdWx0VmFsdWU9YS5kZWZhdWx0VmFsdWUpfW4uZXh0ZW5kKHtjbG9uZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmLGcsaD1hLmNsb25lTm9kZSghMCksaT1uLmNvbnRhaW5zKGEub3duZXJEb2N1bWVudCxhKTtpZighKGsubm9DbG9uZUNoZWNrZWR8fDEhPT1hLm5vZGVUeXBlJiYxMSE9PWEubm9kZVR5cGV8fG4uaXNYTUxEb2MoYSkpKWZvcihnPW9iKGgpLGY9b2IoYSksZD0wLGU9Zi5sZW5ndGg7ZT5kO2QrKylwYihmW2RdLGdbZF0pO2lmKGIpaWYoYylmb3IoZj1mfHxvYihhKSxnPWd8fG9iKGgpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspbmIoZltkXSxnW2RdKTtlbHNlIG5iKGEsaCk7cmV0dXJuIGc9b2IoaCxcInNjcmlwdFwiKSxnLmxlbmd0aD4wJiZtYihnLCFpJiZvYihhLFwic2NyaXB0XCIpKSxofSxidWlsZEZyYWdtZW50OmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZSxmLGcsaCxpLGosaz1iLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxsPVtdLG09MCxvPWEubGVuZ3RoO28+bTttKyspaWYoZT1hW21dLGV8fDA9PT1lKWlmKFwib2JqZWN0XCI9PT1uLnR5cGUoZSkpbi5tZXJnZShsLGUubm9kZVR5cGU/W2VdOmUpO2Vsc2UgaWYoY2IudGVzdChlKSl7Zj1mfHxrLmFwcGVuZENoaWxkKGIuY3JlYXRlRWxlbWVudChcImRpdlwiKSksZz0oYmIuZXhlYyhlKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCksaD1pYltnXXx8aWIuX2RlZmF1bHQsZi5pbm5lckhUTUw9aFsxXStlLnJlcGxhY2UoYWIsXCI8JDE+PC8kMj5cIikraFsyXSxqPWhbMF07d2hpbGUoai0tKWY9Zi5sYXN0Q2hpbGQ7bi5tZXJnZShsLGYuY2hpbGROb2RlcyksZj1rLmZpcnN0Q2hpbGQsZi50ZXh0Q29udGVudD1cIlwifWVsc2UgbC5wdXNoKGIuY3JlYXRlVGV4dE5vZGUoZSkpO2sudGV4dENvbnRlbnQ9XCJcIixtPTA7d2hpbGUoZT1sW20rK10paWYoKCFkfHwtMT09PW4uaW5BcnJheShlLGQpKSYmKGk9bi5jb250YWlucyhlLm93bmVyRG9jdW1lbnQsZSksZj1vYihrLmFwcGVuZENoaWxkKGUpLFwic2NyaXB0XCIpLGkmJm1iKGYpLGMpKXtqPTA7d2hpbGUoZT1mW2orK10pZmIudGVzdChlLnR5cGV8fFwiXCIpJiZjLnB1c2goZSl9cmV0dXJuIGt9LGNsZWFuRGF0YTpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkLGUsZj1uLmV2ZW50LnNwZWNpYWwsZz0wO3ZvaWQgMCE9PShjPWFbZ10pO2crKyl7aWYobi5hY2NlcHREYXRhKGMpJiYoZT1jW0wuZXhwYW5kb10sZSYmKGI9TC5jYWNoZVtlXSkpKXtpZihiLmV2ZW50cylmb3IoZCBpbiBiLmV2ZW50cylmW2RdP24uZXZlbnQucmVtb3ZlKGMsZCk6bi5yZW1vdmVFdmVudChjLGQsYi5oYW5kbGUpO0wuY2FjaGVbZV0mJmRlbGV0ZSBMLmNhY2hlW2VdfWRlbGV0ZSBNLmNhY2hlW2NbTS5leHBhbmRvXV19fX0pLG4uZm4uZXh0ZW5kKHt0ZXh0OmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMD09PWE/bi50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7KDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKSYmKHRoaXMudGV4dENvbnRlbnQ9YSl9KX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxhcHBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWpiKHRoaXMsYSk7Yi5hcHBlbmRDaGlsZChhKX19KX0scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXtpZigxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSl7dmFyIGI9amIodGhpcyxhKTtiLmluc2VydEJlZm9yZShhLGIuZmlyc3RDaGlsZCl9fSl9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzKX0pfSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihhKXt0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoYSx0aGlzLm5leHRTaWJsaW5nKX0pfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD1hP24uZmlsdGVyKGEsdGhpcyk6dGhpcyxlPTA7bnVsbCE9KGM9ZFtlXSk7ZSsrKWJ8fDEhPT1jLm5vZGVUeXBlfHxuLmNsZWFuRGF0YShvYihjKSksYy5wYXJlbnROb2RlJiYoYiYmbi5jb250YWlucyhjLm93bmVyRG9jdW1lbnQsYykmJm1iKG9iKGMsXCJzY3JpcHRcIikpLGMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjKSk7cmV0dXJuIHRoaXN9LGVtcHR5OmZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MDtudWxsIT0oYT10aGlzW2JdKTtiKyspMT09PWEubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYihhLCExKSksYS50ZXh0Q29udGVudD1cIlwiKTtyZXR1cm4gdGhpc30sY2xvbmU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1udWxsPT1hPyExOmEsYj1udWxsPT1iP2E6Yix0aGlzLm1hcChmdW5jdGlvbigpe3JldHVybiBuLmNsb25lKHRoaXMsYSxiKX0pfSxodG1sOmZ1bmN0aW9uKGEpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSl7dmFyIGI9dGhpc1swXXx8e30sYz0wLGQ9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09YSYmMT09PWIubm9kZVR5cGUpcmV0dXJuIGIuaW5uZXJIVE1MO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiYhZGIudGVzdChhKSYmIWliWyhiYi5leGVjKGEpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKV0pe2E9YS5yZXBsYWNlKGFiLFwiPCQxPjwvJDI+XCIpO3RyeXtmb3IoO2Q+YztjKyspYj10aGlzW2NdfHx7fSwxPT09Yi5ub2RlVHlwZSYmKG4uY2xlYW5EYXRhKG9iKGIsITEpKSxiLmlubmVySFRNTD1hKTtiPTB9Y2F0Y2goZSl7fX1iJiZ0aGlzLmVtcHR5KCkuYXBwZW5kKGEpfSxudWxsLGEsYXJndW1lbnRzLmxlbmd0aCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKCl7dmFyIGE9YXJndW1lbnRzWzBdO3JldHVybiB0aGlzLmRvbU1hbmlwKGFyZ3VtZW50cyxmdW5jdGlvbihiKXthPXRoaXMucGFyZW50Tm9kZSxuLmNsZWFuRGF0YShvYih0aGlzKSksYSYmYS5yZXBsYWNlQ2hpbGQoYix0aGlzKX0pLGEmJihhLmxlbmd0aHx8YS5ub2RlVHlwZSk/dGhpczp0aGlzLnJlbW92ZSgpfSxkZXRhY2g6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMucmVtb3ZlKGEsITApfSxkb21NYW5pcDpmdW5jdGlvbihhLGIpe2E9ZS5hcHBseShbXSxhKTt2YXIgYyxkLGYsZyxoLGksaj0wLGw9dGhpcy5sZW5ndGgsbT10aGlzLG89bC0xLHA9YVswXSxxPW4uaXNGdW5jdGlvbihwKTtpZihxfHxsPjEmJlwic3RyaW5nXCI9PXR5cGVvZiBwJiYhay5jaGVja0Nsb25lJiZlYi50ZXN0KHApKXJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9bS5lcShjKTtxJiYoYVswXT1wLmNhbGwodGhpcyxjLGQuaHRtbCgpKSksZC5kb21NYW5pcChhLGIpfSk7aWYobCYmKGM9bi5idWlsZEZyYWdtZW50KGEsdGhpc1swXS5vd25lckRvY3VtZW50LCExLHRoaXMpLGQ9Yy5maXJzdENoaWxkLDE9PT1jLmNoaWxkTm9kZXMubGVuZ3RoJiYoYz1kKSxkKSl7Zm9yKGY9bi5tYXAob2IoYyxcInNjcmlwdFwiKSxrYiksZz1mLmxlbmd0aDtsPmo7aisrKWg9YyxqIT09byYmKGg9bi5jbG9uZShoLCEwLCEwKSxnJiZuLm1lcmdlKGYsb2IoaCxcInNjcmlwdFwiKSkpLGIuY2FsbCh0aGlzW2pdLGgsaik7aWYoZylmb3IoaT1mW2YubGVuZ3RoLTFdLm93bmVyRG9jdW1lbnQsbi5tYXAoZixsYiksaj0wO2c+ajtqKyspaD1mW2pdLGZiLnRlc3QoaC50eXBlfHxcIlwiKSYmIUwuYWNjZXNzKGgsXCJnbG9iYWxFdmFsXCIpJiZuLmNvbnRhaW5zKGksaCkmJihoLnNyYz9uLl9ldmFsVXJsJiZuLl9ldmFsVXJsKGguc3JjKTpuLmdsb2JhbEV2YWwoaC50ZXh0Q29udGVudC5yZXBsYWNlKGhiLFwiXCIpKSl9cmV0dXJuIHRoaXN9fSksbi5lYWNoKHthcHBlbmRUbzpcImFwcGVuZFwiLHByZXBlbmRUbzpcInByZXBlbmRcIixpbnNlcnRCZWZvcmU6XCJiZWZvcmVcIixpbnNlcnRBZnRlcjpcImFmdGVyXCIscmVwbGFjZUFsbDpcInJlcGxhY2VXaXRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhKXtmb3IodmFyIGMsZD1bXSxlPW4oYSksZz1lLmxlbmd0aC0xLGg9MDtnPj1oO2grKyljPWg9PT1nP3RoaXM6dGhpcy5jbG9uZSghMCksbihlW2hdKVtiXShjKSxmLmFwcGx5KGQsYy5nZXQoKSk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQpfX0pO3ZhciBxYixyYj17fTtmdW5jdGlvbiBzYihiLGMpe3ZhciBkLGU9bihjLmNyZWF0ZUVsZW1lbnQoYikpLmFwcGVuZFRvKGMuYm9keSksZj1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlJiYoZD1hLmdldERlZmF1bHRDb21wdXRlZFN0eWxlKGVbMF0pKT9kLmRpc3BsYXk6bi5jc3MoZVswXSxcImRpc3BsYXlcIik7cmV0dXJuIGUuZGV0YWNoKCksZn1mdW5jdGlvbiB0YihhKXt2YXIgYj1sLGM9cmJbYV07cmV0dXJuIGN8fChjPXNiKGEsYiksXCJub25lXCIhPT1jJiZjfHwocWI9KHFifHxuKFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiKSkuYXBwZW5kVG8oYi5kb2N1bWVudEVsZW1lbnQpLGI9cWJbMF0uY29udGVudERvY3VtZW50LGIud3JpdGUoKSxiLmNsb3NlKCksYz1zYihhLGIpLHFiLmRldGFjaCgpKSxyYlthXT1jKSxjfXZhciB1Yj0vXm1hcmdpbi8sdmI9bmV3IFJlZ0V4cChcIl4oXCIrUStcIikoPyFweClbYS16JV0rJFwiLFwiaVwiKSx3Yj1mdW5jdGlvbihhKXtyZXR1cm4gYS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYSxudWxsKX07ZnVuY3Rpb24geGIoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHx3YihhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0pLGMmJihcIlwiIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksdmIudGVzdChnKSYmdWIudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiB5YihhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0hZnVuY3Rpb24oKXt2YXIgYixjLGQ9bC5kb2N1bWVudEVsZW1lbnQsZT1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZj1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoZi5zdHlsZSl7Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsZi5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsay5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxlLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGUuYXBwZW5kQ2hpbGQoZik7ZnVuY3Rpb24gZygpe2Yuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZi5pbm5lckhUTUw9XCJcIixkLmFwcGVuZENoaWxkKGUpO3ZhciBnPWEuZ2V0Q29tcHV0ZWRTdHlsZShmLG51bGwpO2I9XCIxJVwiIT09Zy50b3AsYz1cIjRweFwiPT09Zy53aWR0aCxkLnJlbW92ZUNoaWxkKGUpfWEuZ2V0Q29tcHV0ZWRTdHlsZSYmbi5leHRlbmQoayx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksYn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmZygpLGN9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWYuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWYuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiLGMuc3R5bGUubWFyZ2luUmlnaHQ9Yy5zdHlsZS53aWR0aD1cIjBcIixmLnN0eWxlLndpZHRoPVwiMXB4XCIsZC5hcHBlbmRDaGlsZChlKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjLG51bGwpLm1hcmdpblJpZ2h0KSxkLnJlbW92ZUNoaWxkKGUpLGJ9fSl9fSgpLG4uc3dhcD1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGc9e307Zm9yKGYgaW4gYilnW2ZdPWEuc3R5bGVbZl0sYS5zdHlsZVtmXT1iW2ZdO2U9Yy5hcHBseShhLGR8fFtdKTtmb3IoZiBpbiBiKWEuc3R5bGVbZl09Z1tmXTtyZXR1cm4gZX07dmFyIHpiPS9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxBYj1uZXcgUmVnRXhwKFwiXihcIitRK1wiKSguKikkXCIsXCJpXCIpLEJiPW5ldyBSZWdFeHAoXCJeKFsrLV0pPShcIitRK1wiKVwiLFwiaVwiKSxDYj17cG9zaXRpb246XCJhYnNvbHV0ZVwiLHZpc2liaWxpdHk6XCJoaWRkZW5cIixkaXNwbGF5OlwiYmxvY2tcIn0sRGI9e2xldHRlclNwYWNpbmc6XCIwXCIsZm9udFdlaWdodDpcIjQwMFwifSxFYj1bXCJXZWJraXRcIixcIk9cIixcIk1velwiLFwibXNcIl07ZnVuY3Rpb24gRmIoYSxiKXtpZihiIGluIGEpcmV0dXJuIGI7dmFyIGM9YlswXS50b1VwcGVyQ2FzZSgpK2Iuc2xpY2UoMSksZD1iLGU9RWIubGVuZ3RoO3doaWxlKGUtLSlpZihiPUViW2VdK2MsYiBpbiBhKXJldHVybiBiO3JldHVybiBkfWZ1bmN0aW9uIEdiKGEsYixjKXt2YXIgZD1BYi5leGVjKGIpO3JldHVybiBkP01hdGgubWF4KDAsZFsxXS0oY3x8MCkpKyhkWzJdfHxcInB4XCIpOmJ9ZnVuY3Rpb24gSGIoYSxiLGMsZCxlKXtmb3IodmFyIGY9Yz09PShkP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpPzQ6XCJ3aWR0aFwiPT09Yj8xOjAsZz0wOzQ+ZjtmKz0yKVwibWFyZ2luXCI9PT1jJiYoZys9bi5jc3MoYSxjK1JbZl0sITAsZSkpLGQ/KFwiY29udGVudFwiPT09YyYmKGctPW4uY3NzKGEsXCJwYWRkaW5nXCIrUltmXSwhMCxlKSksXCJtYXJnaW5cIiE9PWMmJihnLT1uLmNzcyhhLFwiYm9yZGVyXCIrUltmXStcIldpZHRoXCIsITAsZSkpKTooZys9bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpLFwicGFkZGluZ1wiIT09YyYmKGcrPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpO3JldHVybiBnfWZ1bmN0aW9uIEliKGEsYixjKXt2YXIgZD0hMCxlPVwid2lkdGhcIj09PWI/YS5vZmZzZXRXaWR0aDphLm9mZnNldEhlaWdodCxmPXdiKGEpLGc9XCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZik7aWYoMD49ZXx8bnVsbD09ZSl7aWYoZT14YihhLGIsZiksKDA+ZXx8bnVsbD09ZSkmJihlPWEuc3R5bGVbYl0pLHZiLnRlc3QoZSkpcmV0dXJuIGU7ZD1nJiYoay5ib3hTaXppbmdSZWxpYWJsZSgpfHxlPT09YS5zdHlsZVtiXSksZT1wYXJzZUZsb2F0KGUpfHwwfXJldHVybiBlK0hiKGEsYixjfHwoZz9cImJvcmRlclwiOlwiY29udGVudFwiKSxkLGYpK1wicHhcIn1mdW5jdGlvbiBKYihhLGIpe2Zvcih2YXIgYyxkLGUsZj1bXSxnPTAsaD1hLmxlbmd0aDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoZltnXT1MLmdldChkLFwib2xkZGlzcGxheVwiKSxjPWQuc3R5bGUuZGlzcGxheSxiPyhmW2ddfHxcIm5vbmVcIiE9PWN8fChkLnN0eWxlLmRpc3BsYXk9XCJcIiksXCJcIj09PWQuc3R5bGUuZGlzcGxheSYmUyhkKSYmKGZbZ109TC5hY2Nlc3MoZCxcIm9sZGRpc3BsYXlcIix0YihkLm5vZGVOYW1lKSkpKTooZT1TKGQpLFwibm9uZVwiPT09YyYmZXx8TC5zZXQoZCxcIm9sZGRpc3BsYXlcIixlP2M6bi5jc3MoZCxcImRpc3BsYXlcIikpKSk7Zm9yKGc9MDtoPmc7ZysrKWQ9YVtnXSxkLnN0eWxlJiYoYiYmXCJub25lXCIhPT1kLnN0eWxlLmRpc3BsYXkmJlwiXCIhPT1kLnN0eWxlLmRpc3BsYXl8fChkLnN0eWxlLmRpc3BsYXk9Yj9mW2ddfHxcIlwiOlwibm9uZVwiKSk7cmV0dXJuIGF9bi5leHRlbmQoe2Nzc0hvb2tzOntvcGFjaXR5OntnZXQ6ZnVuY3Rpb24oYSxiKXtpZihiKXt2YXIgYz14YihhLFwib3BhY2l0eVwiKTtyZXR1cm5cIlwiPT09Yz9cIjFcIjpjfX19fSxjc3NOdW1iZXI6e2NvbHVtbkNvdW50OiEwLGZpbGxPcGFjaXR5OiEwLGZsZXhHcm93OiEwLGZsZXhTaHJpbms6ITAsZm9udFdlaWdodDohMCxsaW5lSGVpZ2h0OiEwLG9wYWNpdHk6ITAsb3JkZXI6ITAsb3JwaGFuczohMCx3aWRvd3M6ITAsekluZGV4OiEwLHpvb206ITB9LGNzc1Byb3BzOntcImZsb2F0XCI6XCJjc3NGbG9hdFwifSxzdHlsZTpmdW5jdGlvbihhLGIsYyxkKXtpZihhJiYzIT09YS5ub2RlVHlwZSYmOCE9PWEubm9kZVR5cGUmJmEuc3R5bGUpe3ZhciBlLGYsZyxoPW4uY2FtZWxDYXNlKGIpLGk9YS5zdHlsZTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYihpLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sdm9pZCAwPT09Yz9nJiZcImdldFwiaW4gZyYmdm9pZCAwIT09KGU9Zy5nZXQoYSwhMSxkKSk/ZTppW2JdOihmPXR5cGVvZiBjLFwic3RyaW5nXCI9PT1mJiYoZT1CYi5leGVjKGMpKSYmKGM9KGVbMV0rMSkqZVsyXStwYXJzZUZsb2F0KG4uY3NzKGEsYikpLGY9XCJudW1iZXJcIiksbnVsbCE9YyYmYz09PWMmJihcIm51bWJlclwiIT09Znx8bi5jc3NOdW1iZXJbaF18fChjKz1cInB4XCIpLGsuY2xlYXJDbG9uZVN0eWxlfHxcIlwiIT09Y3x8MCE9PWIuaW5kZXhPZihcImJhY2tncm91bmRcIil8fChpW2JdPVwiaW5oZXJpdFwiKSxnJiZcInNldFwiaW4gZyYmdm9pZCAwPT09KGM9Zy5zZXQoYSxjLGQpKXx8KGlbYl09YykpLHZvaWQgMCl9fSxjc3M6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYik7cmV0dXJuIGI9bi5jc3NQcm9wc1toXXx8KG4uY3NzUHJvcHNbaF09RmIoYS5zdHlsZSxoKSksZz1uLmNzc0hvb2tzW2JdfHxuLmNzc0hvb2tzW2hdLGcmJlwiZ2V0XCJpbiBnJiYoZT1nLmdldChhLCEwLGMpKSx2b2lkIDA9PT1lJiYoZT14YihhLGIsZCkpLFwibm9ybWFsXCI9PT1lJiZiIGluIERiJiYoZT1EYltiXSksXCJcIj09PWN8fGM/KGY9cGFyc2VGbG9hdChlKSxjPT09ITB8fG4uaXNOdW1lcmljKGYpP2Z8fDA6ZSk6ZX19KSxuLmVhY2goW1wiaGVpZ2h0XCIsXCJ3aWR0aFwiXSxmdW5jdGlvbihhLGIpe24uY3NzSG9va3NbYl09e2dldDpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIGM/emIudGVzdChuLmNzcyhhLFwiZGlzcGxheVwiKSkmJjA9PT1hLm9mZnNldFdpZHRoP24uc3dhcChhLENiLGZ1bmN0aW9uKCl7cmV0dXJuIEliKGEsYixkKX0pOkliKGEsYixkKTp2b2lkIDB9LHNldDpmdW5jdGlvbihhLGMsZCl7dmFyIGU9ZCYmd2IoYSk7cmV0dXJuIEdiKGEsYyxkP0hiKGEsYixkLFwiYm9yZGVyLWJveFwiPT09bi5jc3MoYSxcImJveFNpemluZ1wiLCExLGUpLGUpOjApfX19KSxuLmNzc0hvb2tzLm1hcmdpblJpZ2h0PXliKGsucmVsaWFibGVNYXJnaW5SaWdodCxmdW5jdGlvbihhLGIpe3JldHVybiBiP24uc3dhcChhLHtkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCJ9LHhiLFthLFwibWFyZ2luUmlnaHRcIl0pOnZvaWQgMH0pLG4uZWFjaCh7bWFyZ2luOlwiXCIscGFkZGluZzpcIlwiLGJvcmRlcjpcIldpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1thK2JdPXtleHBhbmQ6ZnVuY3Rpb24oYyl7Zm9yKHZhciBkPTAsZT17fSxmPVwic3RyaW5nXCI9PXR5cGVvZiBjP2Muc3BsaXQoXCIgXCIpOltjXTs0PmQ7ZCsrKWVbYStSW2RdK2JdPWZbZF18fGZbZC0yXXx8ZlswXTtyZXR1cm4gZX19LHViLnRlc3QoYSl8fChuLmNzc0hvb2tzW2ErYl0uc2V0PUdiKX0pLG4uZm4uZXh0ZW5kKHtjc3M6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9e30sZz0wO2lmKG4uaXNBcnJheShiKSl7Zm9yKGQ9d2IoYSksZT1iLmxlbmd0aDtlPmc7ZysrKWZbYltnXV09bi5jc3MoYSxiW2ddLCExLGQpO3JldHVybiBmfXJldHVybiB2b2lkIDAhPT1jP24uc3R5bGUoYSxiLGMpOm4uY3NzKGEsYil9LGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIEpiKHRoaXMsITApfSxoaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIEpiKHRoaXMpfSx0b2dnbGU6ZnVuY3Rpb24oYSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBhP2E/dGhpcy5zaG93KCk6dGhpcy5oaWRlKCk6dGhpcy5lYWNoKGZ1bmN0aW9uKCl7Uyh0aGlzKT9uKHRoaXMpLnNob3coKTpuKHRoaXMpLmhpZGUoKX0pfX0pO2Z1bmN0aW9uIEtiKGEsYixjLGQsZSl7cmV0dXJuIG5ldyBLYi5wcm90b3R5cGUuaW5pdChhLGIsYyxkLGUpfW4uVHdlZW49S2IsS2IucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpLYixpbml0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt0aGlzLmVsZW09YSx0aGlzLnByb3A9Yyx0aGlzLmVhc2luZz1lfHxcInN3aW5nXCIsdGhpcy5vcHRpb25zPWIsdGhpcy5zdGFydD10aGlzLm5vdz10aGlzLmN1cigpLHRoaXMuZW5kPWQsdGhpcy51bml0PWZ8fChuLmNzc051bWJlcltjXT9cIlwiOlwicHhcIil9LGN1cjpmdW5jdGlvbigpe3ZhciBhPUtiLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiBhJiZhLmdldD9hLmdldCh0aGlzKTpLYi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KHRoaXMpfSxydW46ZnVuY3Rpb24oYSl7dmFyIGIsYz1LYi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gdGhpcy5wb3M9Yj10aGlzLm9wdGlvbnMuZHVyYXRpb24/bi5lYXNpbmdbdGhpcy5lYXNpbmddKGEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKmEsMCwxLHRoaXMub3B0aW9ucy5kdXJhdGlvbik6YSx0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqYit0aGlzLnN0YXJ0LHRoaXMub3B0aW9ucy5zdGVwJiZ0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKHRoaXMuZWxlbSx0aGlzLm5vdyx0aGlzKSxjJiZjLnNldD9jLnNldCh0aGlzKTpLYi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KHRoaXMpLHRoaXN9fSxLYi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGU9S2IucHJvdG90eXBlLEtiLnByb3BIb29rcz17X2RlZmF1bHQ6e2dldDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbnVsbD09YS5lbGVtW2EucHJvcF18fGEuZWxlbS5zdHlsZSYmbnVsbCE9YS5lbGVtLnN0eWxlW2EucHJvcF0/KGI9bi5jc3MoYS5lbGVtLGEucHJvcCxcIlwiKSxiJiZcImF1dG9cIiE9PWI/YjowKTphLmVsZW1bYS5wcm9wXX0sc2V0OmZ1bmN0aW9uKGEpe24uZnguc3RlcFthLnByb3BdP24uZnguc3RlcFthLnByb3BdKGEpOmEuZWxlbS5zdHlsZSYmKG51bGwhPWEuZWxlbS5zdHlsZVtuLmNzc1Byb3BzW2EucHJvcF1dfHxuLmNzc0hvb2tzW2EucHJvcF0pP24uc3R5bGUoYS5lbGVtLGEucHJvcCxhLm5vdythLnVuaXQpOmEuZWxlbVthLnByb3BdPWEubm93fX19LEtiLnByb3BIb29rcy5zY3JvbGxUb3A9S2IucHJvcEhvb2tzLnNjcm9sbExlZnQ9e3NldDpmdW5jdGlvbihhKXthLmVsZW0ubm9kZVR5cGUmJmEuZWxlbS5wYXJlbnROb2RlJiYoYS5lbGVtW2EucHJvcF09YS5ub3cpfX0sbi5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sc3dpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuLjUtTWF0aC5jb3MoYSpNYXRoLlBJKS8yfX0sbi5meD1LYi5wcm90b3R5cGUuaW5pdCxuLmZ4LnN0ZXA9e307dmFyIExiLE1iLE5iPS9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxPYj1uZXcgUmVnRXhwKFwiXig/OihbKy1dKT18KShcIitRK1wiKShbYS16JV0qKSRcIixcImlcIiksUGI9L3F1ZXVlSG9va3MkLyxRYj1bVmJdLFJiPXtcIipcIjpbZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNyZWF0ZVR3ZWVuKGEsYiksZD1jLmN1cigpLGU9T2IuZXhlYyhiKSxmPWUmJmVbM118fChuLmNzc051bWJlclthXT9cIlwiOlwicHhcIiksZz0obi5jc3NOdW1iZXJbYV18fFwicHhcIiE9PWYmJitkKSYmT2IuZXhlYyhuLmNzcyhjLmVsZW0sYSkpLGg9MSxpPTIwO2lmKGcmJmdbM10hPT1mKXtmPWZ8fGdbM10sZT1lfHxbXSxnPStkfHwxO2RvIGg9aHx8XCIuNVwiLGcvPWgsbi5zdHlsZShjLmVsZW0sYSxnK2YpO3doaWxlKGghPT0oaD1jLmN1cigpL2QpJiYxIT09aCYmLS1pKX1yZXR1cm4gZSYmKGc9Yy5zdGFydD0rZ3x8K2R8fDAsYy51bml0PWYsYy5lbmQ9ZVsxXT9nKyhlWzFdKzEpKmVbMl06K2VbMl0pLGN9XX07ZnVuY3Rpb24gU2IoKXtyZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe0xiPXZvaWQgMH0pLExiPW4ubm93KCl9ZnVuY3Rpb24gVGIoYSxiKXt2YXIgYyxkPTAsZT17aGVpZ2h0OmF9O2ZvcihiPWI/MTowOzQ+ZDtkKz0yLWIpYz1SW2RdLGVbXCJtYXJnaW5cIitjXT1lW1wicGFkZGluZ1wiK2NdPWE7cmV0dXJuIGImJihlLm9wYWNpdHk9ZS53aWR0aD1hKSxlfWZ1bmN0aW9uIFViKGEsYixjKXtmb3IodmFyIGQsZT0oUmJbYl18fFtdKS5jb25jYXQoUmJbXCIqXCJdKSxmPTAsZz1lLmxlbmd0aDtnPmY7ZisrKWlmKGQ9ZVtmXS5jYWxsKGMsYixhKSlyZXR1cm4gZH1mdW5jdGlvbiBWYihhLGIsYyl7dmFyIGQsZSxmLGcsaCxpLGosayxsPXRoaXMsbT17fSxvPWEuc3R5bGUscD1hLm5vZGVUeXBlJiZTKGEpLHE9TC5nZXQoYSxcImZ4c2hvd1wiKTtjLnF1ZXVlfHwoaD1uLl9xdWV1ZUhvb2tzKGEsXCJmeFwiKSxudWxsPT1oLnVucXVldWVkJiYoaC51bnF1ZXVlZD0wLGk9aC5lbXB0eS5maXJlLGguZW1wdHkuZmlyZT1mdW5jdGlvbigpe2gudW5xdWV1ZWR8fGkoKX0pLGgudW5xdWV1ZWQrKyxsLmFsd2F5cyhmdW5jdGlvbigpe2wuYWx3YXlzKGZ1bmN0aW9uKCl7aC51bnF1ZXVlZC0tLG4ucXVldWUoYSxcImZ4XCIpLmxlbmd0aHx8aC5lbXB0eS5maXJlKCl9KX0pKSwxPT09YS5ub2RlVHlwZSYmKFwiaGVpZ2h0XCJpbiBifHxcIndpZHRoXCJpbiBiKSYmKGMub3ZlcmZsb3c9W28ub3ZlcmZsb3csby5vdmVyZmxvd1gsby5vdmVyZmxvd1ldLGo9bi5jc3MoYSxcImRpc3BsYXlcIiksaz1cIm5vbmVcIj09PWo/TC5nZXQoYSxcIm9sZGRpc3BsYXlcIil8fHRiKGEubm9kZU5hbWUpOmosXCJpbmxpbmVcIj09PWsmJlwibm9uZVwiPT09bi5jc3MoYSxcImZsb2F0XCIpJiYoby5kaXNwbGF5PVwiaW5saW5lLWJsb2NrXCIpKSxjLm92ZXJmbG93JiYoby5vdmVyZmxvdz1cImhpZGRlblwiLGwuYWx3YXlzKGZ1bmN0aW9uKCl7by5vdmVyZmxvdz1jLm92ZXJmbG93WzBdLG8ub3ZlcmZsb3dYPWMub3ZlcmZsb3dbMV0sby5vdmVyZmxvd1k9Yy5vdmVyZmxvd1syXX0pKTtmb3IoZCBpbiBiKWlmKGU9YltkXSxOYi5leGVjKGUpKXtpZihkZWxldGUgYltkXSxmPWZ8fFwidG9nZ2xlXCI9PT1lLGU9PT0ocD9cImhpZGVcIjpcInNob3dcIikpe2lmKFwic2hvd1wiIT09ZXx8IXF8fHZvaWQgMD09PXFbZF0pY29udGludWU7cD0hMH1tW2RdPXEmJnFbZF18fG4uc3R5bGUoYSxkKX1lbHNlIGo9dm9pZCAwO2lmKG4uaXNFbXB0eU9iamVjdChtKSlcImlubGluZVwiPT09KFwibm9uZVwiPT09aj90YihhLm5vZGVOYW1lKTpqKSYmKG8uZGlzcGxheT1qKTtlbHNle3E/XCJoaWRkZW5cImluIHEmJihwPXEuaGlkZGVuKTpxPUwuYWNjZXNzKGEsXCJmeHNob3dcIix7fSksZiYmKHEuaGlkZGVuPSFwKSxwP24oYSkuc2hvdygpOmwuZG9uZShmdW5jdGlvbigpe24oYSkuaGlkZSgpfSksbC5kb25lKGZ1bmN0aW9uKCl7dmFyIGI7TC5yZW1vdmUoYSxcImZ4c2hvd1wiKTtmb3IoYiBpbiBtKW4uc3R5bGUoYSxiLG1bYl0pfSk7Zm9yKGQgaW4gbSlnPVViKHA/cVtkXTowLGQsbCksZCBpbiBxfHwocVtkXT1nLnN0YXJ0LHAmJihnLmVuZD1nLnN0YXJ0LGcuc3RhcnQ9XCJ3aWR0aFwiPT09ZHx8XCJoZWlnaHRcIj09PWQ/MTowKSl9fWZ1bmN0aW9uIFdiKGEsYil7dmFyIGMsZCxlLGYsZztmb3IoYyBpbiBhKWlmKGQ9bi5jYW1lbENhc2UoYyksZT1iW2RdLGY9YVtjXSxuLmlzQXJyYXkoZikmJihlPWZbMV0sZj1hW2NdPWZbMF0pLGMhPT1kJiYoYVtkXT1mLGRlbGV0ZSBhW2NdKSxnPW4uY3NzSG9va3NbZF0sZyYmXCJleHBhbmRcImluIGcpe2Y9Zy5leHBhbmQoZiksZGVsZXRlIGFbZF07Zm9yKGMgaW4gZiljIGluIGF8fChhW2NdPWZbY10sYltjXT1lKX1lbHNlIGJbZF09ZX1mdW5jdGlvbiBYYihhLGIsYyl7dmFyIGQsZSxmPTAsZz1RYi5sZW5ndGgsaD1uLkRlZmVycmVkKCkuYWx3YXlzKGZ1bmN0aW9uKCl7ZGVsZXRlIGkuZWxlbX0pLGk9ZnVuY3Rpb24oKXtpZihlKXJldHVybiExO2Zvcih2YXIgYj1MYnx8U2IoKSxjPU1hdGgubWF4KDAsai5zdGFydFRpbWUrai5kdXJhdGlvbi1iKSxkPWMvai5kdXJhdGlvbnx8MCxmPTEtZCxnPTAsaT1qLnR3ZWVucy5sZW5ndGg7aT5nO2crKylqLnR3ZWVuc1tnXS5ydW4oZik7cmV0dXJuIGgubm90aWZ5V2l0aChhLFtqLGYsY10pLDE+ZiYmaT9jOihoLnJlc29sdmVXaXRoKGEsW2pdKSwhMSl9LGo9aC5wcm9taXNlKHtlbGVtOmEscHJvcHM6bi5leHRlbmQoe30sYiksb3B0czpuLmV4dGVuZCghMCx7c3BlY2lhbEVhc2luZzp7fX0sYyksb3JpZ2luYWxQcm9wZXJ0aWVzOmIsb3JpZ2luYWxPcHRpb25zOmMsc3RhcnRUaW1lOkxifHxTYigpLGR1cmF0aW9uOmMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKGIsYyl7dmFyIGQ9bi5Ud2VlbihhLGoub3B0cyxiLGMsai5vcHRzLnNwZWNpYWxFYXNpbmdbYl18fGoub3B0cy5lYXNpbmcpO3JldHVybiBqLnR3ZWVucy5wdXNoKGQpLGR9LHN0b3A6ZnVuY3Rpb24oYil7dmFyIGM9MCxkPWI/ai50d2VlbnMubGVuZ3RoOjA7aWYoZSlyZXR1cm4gdGhpcztmb3IoZT0hMDtkPmM7YysrKWoudHdlZW5zW2NdLnJ1bigxKTtyZXR1cm4gYj9oLnJlc29sdmVXaXRoKGEsW2osYl0pOmgucmVqZWN0V2l0aChhLFtqLGJdKSx0aGlzfX0pLGs9ai5wcm9wcztmb3IoV2IoayxqLm9wdHMuc3BlY2lhbEVhc2luZyk7Zz5mO2YrKylpZihkPVFiW2ZdLmNhbGwoaixhLGssai5vcHRzKSlyZXR1cm4gZDtyZXR1cm4gbi5tYXAoayxVYixqKSxuLmlzRnVuY3Rpb24oai5vcHRzLnN0YXJ0KSYmai5vcHRzLnN0YXJ0LmNhbGwoYSxqKSxuLmZ4LnRpbWVyKG4uZXh0ZW5kKGkse2VsZW06YSxhbmltOmoscXVldWU6ai5vcHRzLnF1ZXVlfSkpLGoucHJvZ3Jlc3Moai5vcHRzLnByb2dyZXNzKS5kb25lKGoub3B0cy5kb25lLGoub3B0cy5jb21wbGV0ZSkuZmFpbChqLm9wdHMuZmFpbCkuYWx3YXlzKGoub3B0cy5hbHdheXMpfW4uQW5pbWF0aW9uPW4uZXh0ZW5kKFhiLHt0d2VlbmVyOmZ1bmN0aW9uKGEsYil7bi5pc0Z1bmN0aW9uKGEpPyhiPWEsYT1bXCIqXCJdKTphPWEuc3BsaXQoXCIgXCIpO2Zvcih2YXIgYyxkPTAsZT1hLmxlbmd0aDtlPmQ7ZCsrKWM9YVtkXSxSYltjXT1SYltjXXx8W10sUmJbY10udW5zaGlmdChiKX0scHJlZmlsdGVyOmZ1bmN0aW9uKGEsYil7Yj9RYi51bnNoaWZ0KGEpOlFiLnB1c2goYSl9fSksbi5zcGVlZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSYmXCJvYmplY3RcIj09dHlwZW9mIGE/bi5leHRlbmQoe30sYSk6e2NvbXBsZXRlOmN8fCFjJiZifHxuLmlzRnVuY3Rpb24oYSkmJmEsZHVyYXRpb246YSxlYXNpbmc6YyYmYnx8YiYmIW4uaXNGdW5jdGlvbihiKSYmYn07cmV0dXJuIGQuZHVyYXRpb249bi5meC5vZmY/MDpcIm51bWJlclwiPT10eXBlb2YgZC5kdXJhdGlvbj9kLmR1cmF0aW9uOmQuZHVyYXRpb24gaW4gbi5meC5zcGVlZHM/bi5meC5zcGVlZHNbZC5kdXJhdGlvbl06bi5meC5zcGVlZHMuX2RlZmF1bHQsKG51bGw9PWQucXVldWV8fGQucXVldWU9PT0hMCkmJihkLnF1ZXVlPVwiZnhcIiksZC5vbGQ9ZC5jb21wbGV0ZSxkLmNvbXBsZXRlPWZ1bmN0aW9uKCl7bi5pc0Z1bmN0aW9uKGQub2xkKSYmZC5vbGQuY2FsbCh0aGlzKSxkLnF1ZXVlJiZuLmRlcXVldWUodGhpcyxkLnF1ZXVlKX0sZH0sbi5mbi5leHRlbmQoe2ZhZGVUbzpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5maWx0ZXIoUykuY3NzKFwib3BhY2l0eVwiLDApLnNob3coKS5lbmQoKS5hbmltYXRlKHtvcGFjaXR5OmJ9LGEsYyxkKX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1uLmlzRW1wdHlPYmplY3QoYSksZj1uLnNwZWVkKGIsYyxkKSxnPWZ1bmN0aW9uKCl7dmFyIGI9WGIodGhpcyxuLmV4dGVuZCh7fSxhKSxmKTsoZXx8TC5nZXQodGhpcyxcImZpbmlzaFwiKSkmJmIuc3RvcCghMCl9O3JldHVybiBnLmZpbmlzaD1nLGV8fGYucXVldWU9PT0hMT90aGlzLmVhY2goZyk6dGhpcy5xdWV1ZShmLnF1ZXVlLGcpfSxzdG9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1mdW5jdGlvbihhKXt2YXIgYj1hLnN0b3A7ZGVsZXRlIGEuc3RvcCxiKGMpfTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2YgYSYmKGM9YixiPWEsYT12b2lkIDApLGImJmEhPT0hMSYmdGhpcy5xdWV1ZShhfHxcImZ4XCIsW10pLHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBiPSEwLGU9bnVsbCE9YSYmYStcInF1ZXVlSG9va3NcIixmPW4udGltZXJzLGc9TC5nZXQodGhpcyk7aWYoZSlnW2VdJiZnW2VdLnN0b3AmJmQoZ1tlXSk7ZWxzZSBmb3IoZSBpbiBnKWdbZV0mJmdbZV0uc3RvcCYmUGIudGVzdChlKSYmZChnW2VdKTtmb3IoZT1mLmxlbmd0aDtlLS07KWZbZV0uZWxlbSE9PXRoaXN8fG51bGwhPWEmJmZbZV0ucXVldWUhPT1hfHwoZltlXS5hbmltLnN0b3AoYyksYj0hMSxmLnNwbGljZShlLDEpKTsoYnx8IWMpJiZuLmRlcXVldWUodGhpcyxhKX0pfSxmaW5pc2g6ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT0hMSYmKGE9YXx8XCJmeFwiKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYixjPUwuZ2V0KHRoaXMpLGQ9Y1thK1wicXVldWVcIl0sZT1jW2ErXCJxdWV1ZUhvb2tzXCJdLGY9bi50aW1lcnMsZz1kP2QubGVuZ3RoOjA7Zm9yKGMuZmluaXNoPSEwLG4ucXVldWUodGhpcyxhLFtdKSxlJiZlLnN0b3AmJmUuc3RvcC5jYWxsKHRoaXMsITApLGI9Zi5sZW5ndGg7Yi0tOylmW2JdLmVsZW09PT10aGlzJiZmW2JdLnF1ZXVlPT09YSYmKGZbYl0uYW5pbS5zdG9wKCEwKSxmLnNwbGljZShiLDEpKTtmb3IoYj0wO2c+YjtiKyspZFtiXSYmZFtiXS5maW5pc2gmJmRbYl0uZmluaXNoLmNhbGwodGhpcyk7ZGVsZXRlIGMuZmluaXNofSl9fSksbi5lYWNoKFtcInRvZ2dsZVwiLFwic2hvd1wiLFwiaGlkZVwiXSxmdW5jdGlvbihhLGIpe3ZhciBjPW4uZm5bYl07bi5mbltiXT1mdW5jdGlvbihhLGQsZSl7cmV0dXJuIG51bGw9PWF8fFwiYm9vbGVhblwiPT10eXBlb2YgYT9jLmFwcGx5KHRoaXMsYXJndW1lbnRzKTp0aGlzLmFuaW1hdGUoVGIoYiwhMCksYSxkLGUpfX0pLG4uZWFjaCh7c2xpZGVEb3duOlRiKFwic2hvd1wiKSxzbGlkZVVwOlRiKFwiaGlkZVwiKSxzbGlkZVRvZ2dsZTpUYihcInRvZ2dsZVwiKSxmYWRlSW46e29wYWNpdHk6XCJzaG93XCJ9LGZhZGVPdXQ6e29wYWNpdHk6XCJoaWRlXCJ9LGZhZGVUb2dnbGU6e29wYWNpdHk6XCJ0b2dnbGVcIn19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihhLGMsZCl7cmV0dXJuIHRoaXMuYW5pbWF0ZShiLGEsYyxkKX19KSxuLnRpbWVycz1bXSxuLmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgYSxiPTAsYz1uLnRpbWVycztmb3IoTGI9bi5ub3coKTtiPGMubGVuZ3RoO2IrKylhPWNbYl0sYSgpfHxjW2JdIT09YXx8Yy5zcGxpY2UoYi0tLDEpO2MubGVuZ3RofHxuLmZ4LnN0b3AoKSxMYj12b2lkIDB9LG4uZngudGltZXI9ZnVuY3Rpb24oYSl7bi50aW1lcnMucHVzaChhKSxhKCk/bi5meC5zdGFydCgpOm4udGltZXJzLnBvcCgpfSxuLmZ4LmludGVydmFsPTEzLG4uZnguc3RhcnQ9ZnVuY3Rpb24oKXtNYnx8KE1iPXNldEludGVydmFsKG4uZngudGljayxuLmZ4LmludGVydmFsKSl9LG4uZnguc3RvcD1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwoTWIpLE1iPW51bGx9LG4uZnguc3BlZWRzPXtzbG93OjYwMCxmYXN0OjIwMCxfZGVmYXVsdDo0MDB9LG4uZm4uZGVsYXk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT1uLmZ4P24uZnguc3BlZWRzW2FdfHxhOmEsYj1ifHxcImZ4XCIsdGhpcy5xdWV1ZShiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9c2V0VGltZW91dChiLGEpO2Muc3RvcD1mdW5jdGlvbigpe2NsZWFyVGltZW91dChkKX19KX0sZnVuY3Rpb24oKXt2YXIgYT1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKSxiPWwuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSxjPWIuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpKTthLnR5cGU9XCJjaGVja2JveFwiLGsuY2hlY2tPbj1cIlwiIT09YS52YWx1ZSxrLm9wdFNlbGVjdGVkPWMuc2VsZWN0ZWQsYi5kaXNhYmxlZD0hMCxrLm9wdERpc2FibGVkPSFjLmRpc2FibGVkLGE9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYS52YWx1ZT1cInRcIixhLnR5cGU9XCJyYWRpb1wiLGsucmFkaW9WYWx1ZT1cInRcIj09PWEudmFsdWV9KCk7dmFyIFliLFpiLCRiPW4uZXhwci5hdHRySGFuZGxlO24uZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIEoodGhpcyxuLmF0dHIsYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe24ucmVtb3ZlQXR0cih0aGlzLGEpfSl9fSksbi5leHRlbmQoe2F0dHI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj1hLm5vZGVUeXBlO2lmKGEmJjMhPT1mJiY4IT09ZiYmMiE9PWYpcmV0dXJuIHR5cGVvZiBhLmdldEF0dHJpYnV0ZT09PVU/bi5wcm9wKGEsYixjKTooMT09PWYmJm4uaXNYTUxEb2MoYSl8fChiPWIudG9Mb3dlckNhc2UoKSxkPW4uYXR0ckhvb2tzW2JdfHwobi5leHByLm1hdGNoLmJvb2wudGVzdChiKT9aYjpZYikpLHZvaWQgMD09PWM/ZCYmXCJnZXRcImluIGQmJm51bGwhPT0oZT1kLmdldChhLGIpKT9lOihlPW4uZmluZC5hdHRyKGEsYiksbnVsbD09ZT92b2lkIDA6ZSk6bnVsbCE9PWM/ZCYmXCJzZXRcImluIGQmJnZvaWQgMCE9PShlPWQuc2V0KGEsYyxiKSk/ZTooYS5zZXRBdHRyaWJ1dGUoYixjK1wiXCIpLGMpOnZvaWQgbi5yZW1vdmVBdHRyKGEsYikpXG59LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1uLnByb3BGaXhbY118fGMsbi5leHByLm1hdGNoLmJvb2wudGVzdChjKSYmKGFbZF09ITEpLGEucmVtb3ZlQXR0cmlidXRlKGMpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFrLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJm4ubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fX0pLFpiPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sbi5lYWNoKG4uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRiW2JdfHxuLmZpbmQuYXR0cjskYltiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9JGJbYl0sJGJbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLCRiW2JdPWYpLGV9fSk7dmFyIF9iPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifSxwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz1hLm5vZGVUeXBlO2lmKGEmJjMhPT1nJiY4IT09ZyYmMiE9PWcpcmV0dXJuIGY9MSE9PWd8fCFuLmlzWE1MRG9jKGEpLGYmJihiPW4ucHJvcEZpeFtiXXx8YixlPW4ucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJlwic2V0XCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJlwiZ2V0XCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKFwidGFiaW5kZXhcIil8fF9iLnRlc3QoYS5ub2RlTmFtZSl8fGEuaHJlZj9hLnRhYkluZGV4Oi0xfX19fSksay5vcHRTZWxlY3RlZHx8KG4ucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9fSksbi5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe24ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgYWM9L1tcXHRcXHJcXG5cXGZdL2c7bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPVwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWMsXCIgXCIpOlwiIFwiKSl7Zj0wO3doaWxlKGU9YltmKytdKWQuaW5kZXhPZihcIiBcIitlK1wiIFwiKTwwJiYoZCs9ZStcIiBcIik7Zz1uLnRyaW0oZCksYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPTA9PT1hcmd1bWVudHMubGVuZ3RofHxcInN0cmluZ1wiPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFjLFwiIFwiKTpcIlwiKSl7Zj0wO3doaWxlKGU9YltmKytdKXdoaWxlKGQuaW5kZXhPZihcIiBcIitlK1wiIFwiKT49MClkPWQucmVwbGFjZShcIiBcIitlK1wiIFwiLFwiIFwiKTtnPWE/bi50cmltKGQpOlwiXCIsYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiZcInN0cmluZ1wiPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe24odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZihcInN0cmluZ1wiPT09Yyl7dmFyIGIsZD0wLGU9bih0aGlzKSxmPWEubWF0Y2goRSl8fFtdO3doaWxlKGI9ZltkKytdKWUuaGFzQ2xhc3MoYik/ZS5yZW1vdmVDbGFzcyhiKTplLmFkZENsYXNzKGIpfWVsc2UoYz09PVV8fFwiYm9vbGVhblwiPT09YykmJih0aGlzLmNsYXNzTmFtZSYmTC5zZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT9cIlwiOkwuZ2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIpfHxcIlwiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtmb3IodmFyIGI9XCIgXCIrYStcIiBcIixjPTAsZD10aGlzLmxlbmd0aDtkPmM7YysrKWlmKDE9PT10aGlzW2NdLm5vZGVUeXBlJiYoXCIgXCIrdGhpc1tjXS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWMsXCIgXCIpLmluZGV4T2YoYik+PTApcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGJjPS9cXHIvZztuLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bi5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG4odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGU/ZSs9XCJcIjpuLmlzQXJyYXkoZSkmJihlPW4ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bi52YWxIb29rc1tlLnR5cGVdfHxuLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShiYyxcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLG4uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6bi50cmltKG4udGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZuLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPW4uaW5BcnJheShkLnZhbHVlLGYpPj0wKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksbi5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe24udmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmlzQXJyYXkoYik/YS5jaGVja2VkPW4uaW5BcnJheShuKGEpLnZhbCgpLGIpPj0wOnZvaWQgMH19LGsuY2hlY2tPbnx8KG4udmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6YS52YWx1ZX0pfSksbi5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG4uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSxcIioqXCIpOnRoaXMub2ZmKGIsYXx8XCIqKlwiLGMpfX0pO3ZhciBjYz1uLm5vdygpLGRjPS9cXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErXCJcIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7dHJ5e2M9bmV3IERPTVBhcnNlcixiPWMucGFyc2VGcm9tU3RyaW5nKGEsXCJ0ZXh0L3htbFwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGgpJiZuLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2EpLGJ9O3ZhciBlYyxmYyxnYz0vIy4qJC8saGM9LyhbPyZdKV89W14mXSovLGljPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20samM9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8sa2M9L14oPzpHRVR8SEVBRCkkLyxsYz0vXlxcL1xcLy8sbWM9L14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sbmM9e30sb2M9e30scGM9XCIqL1wiLmNvbmNhdChcIipcIik7dHJ5e2ZjPWxvY2F0aW9uLmhyZWZ9Y2F0Y2gocWMpe2ZjPWwuY3JlYXRlRWxlbWVudChcImFcIiksZmMuaHJlZj1cIlwiLGZjPWZjLmhyZWZ9ZWM9bWMuZXhlYyhmYy50b0xvd2VyQ2FzZSgpKXx8W107ZnVuY3Rpb24gcmMoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7XCJzdHJpbmdcIiE9dHlwZW9mIGImJihjPWIsYj1cIipcIik7dmFyIGQsZT0wLGY9Yi50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXTtpZihuLmlzRnVuY3Rpb24oYykpd2hpbGUoZD1mW2UrK10pXCIrXCI9PT1kWzBdPyhkPWQuc2xpY2UoMSl8fFwiKlwiLChhW2RdPWFbZF18fFtdKS51bnNoaWZ0KGMpKTooYVtkXT1hW2RdfHxbXSkucHVzaChjKX19ZnVuY3Rpb24gc2MoYSxiLGMsZCl7dmFyIGU9e30sZj1hPT09b2M7ZnVuY3Rpb24gZyhoKXt2YXIgaTtyZXR1cm4gZVtoXT0hMCxuLmVhY2goYVtoXXx8W10sZnVuY3Rpb24oYSxoKXt2YXIgaj1oKGIsYyxkKTtyZXR1cm5cInN0cmluZ1wiIT10eXBlb2Yganx8Znx8ZVtqXT9mPyEoaT1qKTp2b2lkIDA6KGIuZGF0YVR5cGVzLnVuc2hpZnQoaiksZyhqKSwhMSl9KSxpfXJldHVybiBnKGIuZGF0YVR5cGVzWzBdKXx8IWVbXCIqXCJdJiZnKFwiKlwiKX1mdW5jdGlvbiB0YyhhLGIpe3ZhciBjLGQsZT1uLmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9uc3x8e307Zm9yKGMgaW4gYil2b2lkIDAhPT1iW2NdJiYoKGVbY10/YTpkfHwoZD17fSkpW2NdPWJbY10pO3JldHVybiBkJiZuLmV4dGVuZCghMCxhLGQpLGF9ZnVuY3Rpb24gdWMoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jb250ZW50cyxpPWEuZGF0YVR5cGVzO3doaWxlKFwiKlwiPT09aVswXSlpLnNoaWZ0KCksdm9pZCAwPT09ZCYmKGQ9YS5taW1lVHlwZXx8Yi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKSk7aWYoZClmb3IoZSBpbiBoKWlmKGhbZV0mJmhbZV0udGVzdChkKSl7aS51bnNoaWZ0KGUpO2JyZWFrfWlmKGlbMF1pbiBjKWY9aVswXTtlbHNle2ZvcihlIGluIGMpe2lmKCFpWzBdfHxhLmNvbnZlcnRlcnNbZStcIiBcIitpWzBdXSl7Zj1lO2JyZWFrfWd8fChnPWUpfWY9Znx8Z31yZXR1cm4gZj8oZiE9PWlbMF0mJmkudW5zaGlmdChmKSxjW2ZdKTp2b2lkIDB9ZnVuY3Rpb24gdmMoYSxiLGMsZCl7dmFyIGUsZixnLGgsaSxqPXt9LGs9YS5kYXRhVHlwZXMuc2xpY2UoKTtpZihrWzFdKWZvcihnIGluIGEuY29udmVydGVycylqW2cudG9Mb3dlckNhc2UoKV09YS5jb252ZXJ0ZXJzW2ddO2Y9ay5zaGlmdCgpO3doaWxlKGYpaWYoYS5yZXNwb25zZUZpZWxkc1tmXSYmKGNbYS5yZXNwb25zZUZpZWxkc1tmXV09YiksIWkmJmQmJmEuZGF0YUZpbHRlciYmKGI9YS5kYXRhRmlsdGVyKGIsYS5kYXRhVHlwZSkpLGk9ZixmPWsuc2hpZnQoKSlpZihcIipcIj09PWYpZj1pO2Vsc2UgaWYoXCIqXCIhPT1pJiZpIT09Zil7aWYoZz1qW2krXCIgXCIrZl18fGpbXCIqIFwiK2ZdLCFnKWZvcihlIGluIGopaWYoaD1lLnNwbGl0KFwiIFwiKSxoWzFdPT09ZiYmKGc9altpK1wiIFwiK2hbMF1dfHxqW1wiKiBcIitoWzBdXSkpe2c9PT0hMD9nPWpbZV06altlXSE9PSEwJiYoZj1oWzBdLGsudW5zaGlmdChoWzFdKSk7YnJlYWt9aWYoZyE9PSEwKWlmKGcmJmFbXCJ0aHJvd3NcIl0pYj1nKGIpO2Vsc2UgdHJ5e2I9ZyhiKX1jYXRjaChsKXtyZXR1cm57c3RhdGU6XCJwYXJzZXJlcnJvclwiLGVycm9yOmc/bDpcIk5vIGNvbnZlcnNpb24gZnJvbSBcIitpK1wiIHRvIFwiK2Z9fX1yZXR1cm57c3RhdGU6XCJzdWNjZXNzXCIsZGF0YTpifX1uLmV4dGVuZCh7YWN0aXZlOjAsbGFzdE1vZGlmaWVkOnt9LGV0YWc6e30sYWpheFNldHRpbmdzOnt1cmw6ZmMsdHlwZTpcIkdFVFwiLGlzTG9jYWw6amMudGVzdChlY1sxXSksZ2xvYmFsOiEwLHByb2Nlc3NEYXRhOiEwLGFzeW5jOiEwLGNvbnRlbnRUeXBlOlwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsYWNjZXB0czp7XCIqXCI6cGMsdGV4dDpcInRleHQvcGxhaW5cIixodG1sOlwidGV4dC9odG1sXCIseG1sOlwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLGpzb246XCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIn0sY29udGVudHM6e3htbDoveG1sLyxodG1sOi9odG1sLyxqc29uOi9qc29uL30scmVzcG9uc2VGaWVsZHM6e3htbDpcInJlc3BvbnNlWE1MXCIsdGV4dDpcInJlc3BvbnNlVGV4dFwiLGpzb246XCJyZXNwb25zZUpTT05cIn0sY29udmVydGVyczp7XCIqIHRleHRcIjpTdHJpbmcsXCJ0ZXh0IGh0bWxcIjohMCxcInRleHQganNvblwiOm4ucGFyc2VKU09OLFwidGV4dCB4bWxcIjpuLnBhcnNlWE1MfSxmbGF0T3B0aW9uczp7dXJsOiEwLGNvbnRleHQ6ITB9fSxhamF4U2V0dXA6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYj90Yyh0YyhhLG4uYWpheFNldHRpbmdzKSxiKTp0YyhuLmFqYXhTZXR0aW5ncyxhKX0sYWpheFByZWZpbHRlcjpyYyhuYyksYWpheFRyYW5zcG9ydDpyYyhvYyksYWpheDpmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxiPWJ8fHt9O3ZhciBjLGQsZSxmLGcsaCxpLGosaz1uLmFqYXhTZXR1cCh7fSxiKSxsPWsuY29udGV4dHx8ayxtPWsuY29udGV4dCYmKGwubm9kZVR5cGV8fGwuanF1ZXJ5KT9uKGwpOm4uZXZlbnQsbz1uLkRlZmVycmVkKCkscD1uLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLHE9ay5zdGF0dXNDb2RlfHx7fSxyPXt9LHM9e30sdD0wLHU9XCJjYW5jZWxlZFwiLHY9e3JlYWR5U3RhdGU6MCxnZXRSZXNwb25zZUhlYWRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZigyPT09dCl7aWYoIWYpe2Y9e307d2hpbGUoYj1pYy5leGVjKGUpKWZbYlsxXS50b0xvd2VyQ2FzZSgpXT1iWzJdfWI9ZlthLnRvTG93ZXJDYXNlKCldfXJldHVybiBudWxsPT1iP251bGw6Yn0sZ2V0QWxsUmVzcG9uc2VIZWFkZXJzOmZ1bmN0aW9uKCl7cmV0dXJuIDI9PT10P2U6bnVsbH0sc2V0UmVxdWVzdEhlYWRlcjpmdW5jdGlvbihhLGIpe3ZhciBjPWEudG9Mb3dlckNhc2UoKTtyZXR1cm4gdHx8KGE9c1tjXT1zW2NdfHxhLHJbYV09YiksdGhpc30sb3ZlcnJpZGVNaW1lVHlwZTpmdW5jdGlvbihhKXtyZXR1cm4gdHx8KGsubWltZVR5cGU9YSksdGhpc30sc3RhdHVzQ29kZTpmdW5jdGlvbihhKXt2YXIgYjtpZihhKWlmKDI+dClmb3IoYiBpbiBhKXFbYl09W3FbYl0sYVtiXV07ZWxzZSB2LmFsd2F5cyhhW3Yuc3RhdHVzXSk7cmV0dXJuIHRoaXN9LGFib3J0OmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHU7cmV0dXJuIGMmJmMuYWJvcnQoYikseCgwLGIpLHRoaXN9fTtpZihvLnByb21pc2UodikuY29tcGxldGU9cC5hZGQsdi5zdWNjZXNzPXYuZG9uZSx2LmVycm9yPXYuZmFpbCxrLnVybD0oKGF8fGsudXJsfHxmYykrXCJcIikucmVwbGFjZShnYyxcIlwiKS5yZXBsYWNlKGxjLGVjWzFdK1wiLy9cIiksay50eXBlPWIubWV0aG9kfHxiLnR5cGV8fGsubWV0aG9kfHxrLnR5cGUsay5kYXRhVHlwZXM9bi50cmltKGsuZGF0YVR5cGV8fFwiKlwiKS50b0xvd2VyQ2FzZSgpLm1hdGNoKEUpfHxbXCJcIl0sbnVsbD09ay5jcm9zc0RvbWFpbiYmKGg9bWMuZXhlYyhrLnVybC50b0xvd2VyQ2FzZSgpKSxrLmNyb3NzRG9tYWluPSEoIWh8fGhbMV09PT1lY1sxXSYmaFsyXT09PWVjWzJdJiYoaFszXXx8KFwiaHR0cDpcIj09PWhbMV0/XCI4MFwiOlwiNDQzXCIpKT09PShlY1szXXx8KFwiaHR0cDpcIj09PWVjWzFdP1wiODBcIjpcIjQ0M1wiKSkpKSxrLmRhdGEmJmsucHJvY2Vzc0RhdGEmJlwic3RyaW5nXCIhPXR5cGVvZiBrLmRhdGEmJihrLmRhdGE9bi5wYXJhbShrLmRhdGEsay50cmFkaXRpb25hbCkpLHNjKG5jLGssYix2KSwyPT09dClyZXR1cm4gdjtpPWsuZ2xvYmFsLGkmJjA9PT1uLmFjdGl2ZSsrJiZuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIiksay50eXBlPWsudHlwZS50b1VwcGVyQ2FzZSgpLGsuaGFzQ29udGVudD0ha2MudGVzdChrLnR5cGUpLGQ9ay51cmwsay5oYXNDb250ZW50fHwoay5kYXRhJiYoZD1rLnVybCs9KGRjLnRlc3QoZCk/XCImXCI6XCI/XCIpK2suZGF0YSxkZWxldGUgay5kYXRhKSxrLmNhY2hlPT09ITEmJihrLnVybD1oYy50ZXN0KGQpP2QucmVwbGFjZShoYyxcIiQxXz1cIitjYysrKTpkKyhkYy50ZXN0KGQpP1wiJlwiOlwiP1wiKStcIl89XCIrY2MrKykpLGsuaWZNb2RpZmllZCYmKG4ubGFzdE1vZGlmaWVkW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Nb2RpZmllZC1TaW5jZVwiLG4ubGFzdE1vZGlmaWVkW2RdKSxuLmV0YWdbZF0mJnYuc2V0UmVxdWVzdEhlYWRlcihcIklmLU5vbmUtTWF0Y2hcIixuLmV0YWdbZF0pKSwoay5kYXRhJiZrLmhhc0NvbnRlbnQmJmsuY29udGVudFR5cGUhPT0hMXx8Yi5jb250ZW50VHlwZSkmJnYuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLGsuY29udGVudFR5cGUpLHYuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdFwiLGsuZGF0YVR5cGVzWzBdJiZrLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dP2suYWNjZXB0c1trLmRhdGFUeXBlc1swXV0rKFwiKlwiIT09ay5kYXRhVHlwZXNbMF0/XCIsIFwiK3BjK1wiOyBxPTAuMDFcIjpcIlwiKTprLmFjY2VwdHNbXCIqXCJdKTtmb3IoaiBpbiBrLmhlYWRlcnMpdi5zZXRSZXF1ZXN0SGVhZGVyKGosay5oZWFkZXJzW2pdKTtpZihrLmJlZm9yZVNlbmQmJihrLmJlZm9yZVNlbmQuY2FsbChsLHYsayk9PT0hMXx8Mj09PXQpKXJldHVybiB2LmFib3J0KCk7dT1cImFib3J0XCI7Zm9yKGogaW57c3VjY2VzczoxLGVycm9yOjEsY29tcGxldGU6MX0pdltqXShrW2pdKTtpZihjPXNjKG9jLGssYix2KSl7di5yZWFkeVN0YXRlPTEsaSYmbS50cmlnZ2VyKFwiYWpheFNlbmRcIixbdixrXSksay5hc3luYyYmay50aW1lb3V0PjAmJihnPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt2LmFib3J0KFwidGltZW91dFwiKX0say50aW1lb3V0KSk7dHJ5e3Q9MSxjLnNlbmQocix4KX1jYXRjaCh3KXtpZighKDI+dCkpdGhyb3cgdzt4KC0xLHcpfX1lbHNlIHgoLTEsXCJObyBUcmFuc3BvcnRcIik7ZnVuY3Rpb24geChhLGIsZixoKXt2YXIgaixyLHMsdSx3LHg9YjsyIT09dCYmKHQ9MixnJiZjbGVhclRpbWVvdXQoZyksYz12b2lkIDAsZT1ofHxcIlwiLHYucmVhZHlTdGF0ZT1hPjA/NDowLGo9YT49MjAwJiYzMDA+YXx8MzA0PT09YSxmJiYodT11YyhrLHYsZikpLHU9dmMoayx1LHYsaiksaj8oay5pZk1vZGlmaWVkJiYodz12LmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKSx3JiYobi5sYXN0TW9kaWZpZWRbZF09dyksdz12LmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKSx3JiYobi5ldGFnW2RdPXcpKSwyMDQ9PT1hfHxcIkhFQURcIj09PWsudHlwZT94PVwibm9jb250ZW50XCI6MzA0PT09YT94PVwibm90bW9kaWZpZWRcIjooeD11LnN0YXRlLHI9dS5kYXRhLHM9dS5lcnJvcixqPSFzKSk6KHM9eCwoYXx8IXgpJiYoeD1cImVycm9yXCIsMD5hJiYoYT0wKSkpLHYuc3RhdHVzPWEsdi5zdGF0dXNUZXh0PShifHx4KStcIlwiLGo/by5yZXNvbHZlV2l0aChsLFtyLHgsdl0pOm8ucmVqZWN0V2l0aChsLFt2LHgsc10pLHYuc3RhdHVzQ29kZShxKSxxPXZvaWQgMCxpJiZtLnRyaWdnZXIoaj9cImFqYXhTdWNjZXNzXCI6XCJhamF4RXJyb3JcIixbdixrLGo/cjpzXSkscC5maXJlV2l0aChsLFt2LHhdKSxpJiYobS50cmlnZ2VyKFwiYWpheENvbXBsZXRlXCIsW3Ysa10pLC0tbi5hY3RpdmV8fG4uZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpKSl9cmV0dXJuIHZ9LGdldEpTT046ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBuLmdldChhLGIsYyxcImpzb25cIil9LGdldFNjcmlwdDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmdldChhLHZvaWQgMCxiLFwic2NyaXB0XCIpfX0pLG4uZWFjaChbXCJnZXRcIixcInBvc3RcIl0sZnVuY3Rpb24oYSxiKXtuW2JdPWZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBuLmlzRnVuY3Rpb24oYykmJihlPWV8fGQsZD1jLGM9dm9pZCAwKSxuLmFqYXgoe3VybDphLHR5cGU6YixkYXRhVHlwZTplLGRhdGE6YyxzdWNjZXNzOmR9KX19KSxuLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxuLl9ldmFsVXJsPWZ1bmN0aW9uKGEpe3JldHVybiBuLmFqYXgoe3VybDphLHR5cGU6XCJHRVRcIixkYXRhVHlwZTpcInNjcmlwdFwiLGFzeW5jOiExLGdsb2JhbDohMSxcInRocm93c1wiOiEwfSl9LG4uZm4uZXh0ZW5kKHt3cmFwQWxsOmZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBuLmlzRnVuY3Rpb24oYSk/dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykud3JhcEFsbChhLmNhbGwodGhpcyxiKSl9KToodGhpc1swXSYmKGI9bihhLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUoITApLHRoaXNbMF0ucGFyZW50Tm9kZSYmYi5pbnNlcnRCZWZvcmUodGhpc1swXSksYi5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzO3doaWxlKGEuZmlyc3RFbGVtZW50Q2hpbGQpYT1hLmZpcnN0RWxlbWVudENoaWxkO3JldHVybiBhfSkuYXBwZW5kKHRoaXMpKSx0aGlzKX0sd3JhcElubmVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGIpe24odGhpcykud3JhcElubmVyKGEuY2FsbCh0aGlzLGIpKX06ZnVuY3Rpb24oKXt2YXIgYj1uKHRoaXMpLGM9Yi5jb250ZW50cygpO2MubGVuZ3RoP2Mud3JhcEFsbChhKTpiLmFwcGVuZChhKX0pfSx3cmFwOmZ1bmN0aW9uKGEpe3ZhciBiPW4uaXNGdW5jdGlvbihhKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe24odGhpcykud3JhcEFsbChiP2EuY2FsbCh0aGlzLGMpOmEpfSl9LHVud3JhcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudCgpLmVhY2goZnVuY3Rpb24oKXtuLm5vZGVOYW1lKHRoaXMsXCJib2R5XCIpfHxuKHRoaXMpLnJlcGxhY2VXaXRoKHRoaXMuY2hpbGROb2Rlcyl9KS5lbmQoKX19KSxuLmV4cHIuZmlsdGVycy5oaWRkZW49ZnVuY3Rpb24oYSl7cmV0dXJuIGEub2Zmc2V0V2lkdGg8PTAmJmEub2Zmc2V0SGVpZ2h0PD0wfSxuLmV4cHIuZmlsdGVycy52aXNpYmxlPWZ1bmN0aW9uKGEpe3JldHVybiFuLmV4cHIuZmlsdGVycy5oaWRkZW4oYSl9O3ZhciB3Yz0vJTIwL2cseGM9L1xcW1xcXSQvLHljPS9cXHI/XFxuL2csemM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLEFjPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtmdW5jdGlvbiBCYyhhLGIsYyxkKXt2YXIgZTtpZihuLmlzQXJyYXkoYikpbi5lYWNoKGIsZnVuY3Rpb24oYixlKXtjfHx4Yy50ZXN0KGEpP2QoYSxlKTpCYyhhK1wiW1wiKyhcIm9iamVjdFwiPT10eXBlb2YgZT9iOlwiXCIpK1wiXVwiLGUsYyxkKX0pO2Vsc2UgaWYoY3x8XCJvYmplY3RcIiE9PW4udHlwZShiKSlkKGEsYik7ZWxzZSBmb3IoZSBpbiBiKUJjKGErXCJbXCIrZStcIl1cIixiW2VdLGMsZCl9bi5wYXJhbT1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9W10sZT1mdW5jdGlvbihhLGIpe2I9bi5pc0Z1bmN0aW9uKGIpP2IoKTpudWxsPT1iP1wiXCI6YixkW2QubGVuZ3RoXT1lbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpfTtpZih2b2lkIDA9PT1iJiYoYj1uLmFqYXhTZXR0aW5ncyYmbi5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWwpLG4uaXNBcnJheShhKXx8YS5qcXVlcnkmJiFuLmlzUGxhaW5PYmplY3QoYSkpbi5lYWNoKGEsZnVuY3Rpb24oKXtlKHRoaXMubmFtZSx0aGlzLnZhbHVlKX0pO2Vsc2UgZm9yKGMgaW4gYSlCYyhjLGFbY10sYixlKTtyZXR1cm4gZC5qb2luKFwiJlwiKS5yZXBsYWNlKHdjLFwiK1wiKX0sbi5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBuLnBhcmFtKHRoaXMuc2VyaWFsaXplQXJyYXkoKSl9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGE9bi5wcm9wKHRoaXMsXCJlbGVtZW50c1wiKTtyZXR1cm4gYT9uLm1ha2VBcnJheShhKTp0aGlzfSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFuKHRoaXMpLmlzKFwiOmRpc2FibGVkXCIpJiZBYy50ZXN0KHRoaXMubm9kZU5hbWUpJiYhemMudGVzdChhKSYmKHRoaXMuY2hlY2tlZHx8IVQudGVzdChhKSl9KS5tYXAoZnVuY3Rpb24oYSxiKXt2YXIgYz1uKHRoaXMpLnZhbCgpO3JldHVybiBudWxsPT1jP251bGw6bi5pc0FycmF5KGMpP24ubWFwKGMsZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6Yi5uYW1lLHZhbHVlOmEucmVwbGFjZSh5YyxcIlxcclxcblwiKX19KTp7bmFtZTpiLm5hbWUsdmFsdWU6Yy5yZXBsYWNlKHljLFwiXFxyXFxuXCIpfX0pLmdldCgpfX0pLG4uYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fWNhdGNoKGEpe319O3ZhciBDYz0wLERjPXt9LEVjPXswOjIwMCwxMjIzOjIwNH0sRmM9bi5hamF4U2V0dGluZ3MueGhyKCk7YS5BY3RpdmVYT2JqZWN0JiZuKGEpLm9uKFwidW5sb2FkXCIsZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gRGMpRGNbYV0oKX0pLGsuY29ycz0hIUZjJiZcIndpdGhDcmVkZW50aWFsc1wiaW4gRmMsay5hamF4PUZjPSEhRmMsbi5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKGEpe3ZhciBiO3JldHVybiBrLmNvcnN8fEZjJiYhYS5jcm9zc0RvbWFpbj97c2VuZDpmdW5jdGlvbihjLGQpe3ZhciBlLGY9YS54aHIoKSxnPSsrQ2M7aWYoZi5vcGVuKGEudHlwZSxhLnVybCxhLmFzeW5jLGEudXNlcm5hbWUsYS5wYXNzd29yZCksYS54aHJGaWVsZHMpZm9yKGUgaW4gYS54aHJGaWVsZHMpZltlXT1hLnhockZpZWxkc1tlXTthLm1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUmJmYub3ZlcnJpZGVNaW1lVHlwZShhLm1pbWVUeXBlKSxhLmNyb3NzRG9tYWlufHxjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXXx8KGNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdPVwiWE1MSHR0cFJlcXVlc3RcIik7Zm9yKGUgaW4gYylmLnNldFJlcXVlc3RIZWFkZXIoZSxjW2VdKTtiPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe2ImJihkZWxldGUgRGNbZ10sYj1mLm9ubG9hZD1mLm9uZXJyb3I9bnVsbCxcImFib3J0XCI9PT1hP2YuYWJvcnQoKTpcImVycm9yXCI9PT1hP2QoZi5zdGF0dXMsZi5zdGF0dXNUZXh0KTpkKEVjW2Yuc3RhdHVzXXx8Zi5zdGF0dXMsZi5zdGF0dXNUZXh0LFwic3RyaW5nXCI9PXR5cGVvZiBmLnJlc3BvbnNlVGV4dD97dGV4dDpmLnJlc3BvbnNlVGV4dH06dm9pZCAwLGYuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKX19LGYub25sb2FkPWIoKSxmLm9uZXJyb3I9YihcImVycm9yXCIpLGI9RGNbZ109YihcImFib3J0XCIpO3RyeXtmLnNlbmQoYS5oYXNDb250ZW50JiZhLmRhdGF8fG51bGwpfWNhdGNoKGgpe2lmKGIpdGhyb3cgaH19LGFib3J0OmZ1bmN0aW9uKCl7YiYmYigpfX06dm9pZCAwfSksbi5hamF4U2V0dXAoe2FjY2VwdHM6e3NjcmlwdDpcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJ9LGNvbnRlbnRzOntzY3JpcHQ6Lyg/OmphdmF8ZWNtYSlzY3JpcHQvfSxjb252ZXJ0ZXJzOntcInRleHQgc2NyaXB0XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZ2xvYmFsRXZhbChhKSxhfX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJzY3JpcHRcIixmdW5jdGlvbihhKXt2b2lkIDA9PT1hLmNhY2hlJiYoYS5jYWNoZT0hMSksYS5jcm9zc0RvbWFpbiYmKGEudHlwZT1cIkdFVFwiKX0pLG4uYWpheFRyYW5zcG9ydChcInNjcmlwdFwiLGZ1bmN0aW9uKGEpe2lmKGEuY3Jvc3NEb21haW4pe3ZhciBiLGM7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oZCxlKXtiPW4oXCI8c2NyaXB0PlwiKS5wcm9wKHthc3luYzohMCxjaGFyc2V0OmEuc2NyaXB0Q2hhcnNldCxzcmM6YS51cmx9KS5vbihcImxvYWQgZXJyb3JcIixjPWZ1bmN0aW9uKGEpe2IucmVtb3ZlKCksYz1udWxsLGEmJmUoXCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDAsYS50eXBlKX0pLGwuaGVhZC5hcHBlbmRDaGlsZChiWzBdKX0sYWJvcnQ6ZnVuY3Rpb24oKXtjJiZjKCl9fX19KTt2YXIgR2M9W10sSGM9Lyg9KVxcPyg/PSZ8JCl8XFw/XFw/LztuLmFqYXhTZXR1cCh7anNvbnA6XCJjYWxsYmFja1wiLGpzb25wQ2FsbGJhY2s6ZnVuY3Rpb24oKXt2YXIgYT1HYy5wb3AoKXx8bi5leHBhbmRvK1wiX1wiK2NjKys7cmV0dXJuIHRoaXNbYV09ITAsYX19KSxuLmFqYXhQcmVmaWx0ZXIoXCJqc29uIGpzb25wXCIsZnVuY3Rpb24oYixjLGQpe3ZhciBlLGYsZyxoPWIuanNvbnAhPT0hMSYmKEhjLnRlc3QoYi51cmwpP1widXJsXCI6XCJzdHJpbmdcIj09dHlwZW9mIGIuZGF0YSYmIShiLmNvbnRlbnRUeXBlfHxcIlwiKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpJiZIYy50ZXN0KGIuZGF0YSkmJlwiZGF0YVwiKTtyZXR1cm4gaHx8XCJqc29ucFwiPT09Yi5kYXRhVHlwZXNbMF0/KGU9Yi5qc29ucENhbGxiYWNrPW4uaXNGdW5jdGlvbihiLmpzb25wQ2FsbGJhY2spP2IuanNvbnBDYWxsYmFjaygpOmIuanNvbnBDYWxsYmFjayxoP2JbaF09YltoXS5yZXBsYWNlKEhjLFwiJDFcIitlKTpiLmpzb25wIT09ITEmJihiLnVybCs9KGRjLnRlc3QoYi51cmwpP1wiJlwiOlwiP1wiKStiLmpzb25wK1wiPVwiK2UpLGIuY29udmVydGVyc1tcInNjcmlwdCBqc29uXCJdPWZ1bmN0aW9uKCl7cmV0dXJuIGd8fG4uZXJyb3IoZStcIiB3YXMgbm90IGNhbGxlZFwiKSxnWzBdfSxiLmRhdGFUeXBlc1swXT1cImpzb25cIixmPWFbZV0sYVtlXT1mdW5jdGlvbigpe2c9YXJndW1lbnRzfSxkLmFsd2F5cyhmdW5jdGlvbigpe2FbZV09ZixiW2VdJiYoYi5qc29ucENhbGxiYWNrPWMuanNvbnBDYWxsYmFjayxHYy5wdXNoKGUpKSxnJiZuLmlzRnVuY3Rpb24oZikmJmYoZ1swXSksZz1mPXZvaWQgMH0pLFwic2NyaXB0XCIpOnZvaWQgMH0pLG4ucGFyc2VIVE1MPWZ1bmN0aW9uKGEsYixjKXtpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7XCJib29sZWFuXCI9PXR5cGVvZiBiJiYoYz1iLGI9ITEpLGI9Ynx8bDt2YXIgZD12LmV4ZWMoYSksZT0hYyYmW107cmV0dXJuIGQ/W2IuY3JlYXRlRWxlbWVudChkWzFdKV06KGQ9bi5idWlsZEZyYWdtZW50KFthXSxiLGUpLGUmJmUubGVuZ3RoJiZuKGUpLnJlbW92ZSgpLG4ubWVyZ2UoW10sZC5jaGlsZE5vZGVzKSl9O3ZhciBJYz1uLmZuLmxvYWQ7bi5mbi5sb2FkPWZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiIT10eXBlb2YgYSYmSWMpcmV0dXJuIEljLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZCxlLGYsZz10aGlzLGg9YS5pbmRleE9mKFwiIFwiKTtyZXR1cm4gaD49MCYmKGQ9bi50cmltKGEuc2xpY2UoaCkpLGE9YS5zbGljZSgwLGgpKSxuLmlzRnVuY3Rpb24oYik/KGM9YixiPXZvaWQgMCk6YiYmXCJvYmplY3RcIj09dHlwZW9mIGImJihlPVwiUE9TVFwiKSxnLmxlbmd0aD4wJiZuLmFqYXgoe3VybDphLHR5cGU6ZSxkYXRhVHlwZTpcImh0bWxcIixkYXRhOmJ9KS5kb25lKGZ1bmN0aW9uKGEpe2Y9YXJndW1lbnRzLGcuaHRtbChkP24oXCI8ZGl2PlwiKS5hcHBlbmQobi5wYXJzZUhUTUwoYSkpLmZpbmQoZCk6YSl9KS5jb21wbGV0ZShjJiZmdW5jdGlvbihhLGIpe2cuZWFjaChjLGZ8fFthLnJlc3BvbnNlVGV4dCxiLGFdKX0pLHRoaXN9LG4uZXhwci5maWx0ZXJzLmFuaW1hdGVkPWZ1bmN0aW9uKGEpe3JldHVybiBuLmdyZXAobi50aW1lcnMsZnVuY3Rpb24oYil7cmV0dXJuIGE9PT1iLmVsZW19KS5sZW5ndGh9O3ZhciBKYz1hLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtmdW5jdGlvbiBLYyhhKXtyZXR1cm4gbi5pc1dpbmRvdyhhKT9hOjk9PT1hLm5vZGVUeXBlJiZhLmRlZmF1bHRWaWV3fW4ub2Zmc2V0PXtzZXRPZmZzZXQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGs9bi5jc3MoYSxcInBvc2l0aW9uXCIpLGw9bihhKSxtPXt9O1wic3RhdGljXCI9PT1rJiYoYS5zdHlsZS5wb3NpdGlvbj1cInJlbGF0aXZlXCIpLGg9bC5vZmZzZXQoKSxmPW4uY3NzKGEsXCJ0b3BcIiksaT1uLmNzcyhhLFwibGVmdFwiKSxqPShcImFic29sdXRlXCI9PT1rfHxcImZpeGVkXCI9PT1rKSYmKGYraSkuaW5kZXhPZihcImF1dG9cIik+LTEsaj8oZD1sLnBvc2l0aW9uKCksZz1kLnRvcCxlPWQubGVmdCk6KGc9cGFyc2VGbG9hdChmKXx8MCxlPXBhcnNlRmxvYXQoaSl8fDApLG4uaXNGdW5jdGlvbihiKSYmKGI9Yi5jYWxsKGEsYyxoKSksbnVsbCE9Yi50b3AmJihtLnRvcD1iLnRvcC1oLnRvcCtnKSxudWxsIT1iLmxlZnQmJihtLmxlZnQ9Yi5sZWZ0LWgubGVmdCtlKSxcInVzaW5nXCJpbiBiP2IudXNpbmcuY2FsbChhLG0pOmwuY3NzKG0pfX0sbi5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihhKXtpZihhcmd1bWVudHMubGVuZ3RoKXJldHVybiB2b2lkIDA9PT1hP3RoaXM6dGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24ub2Zmc2V0LnNldE9mZnNldCh0aGlzLGEsYil9KTt2YXIgYixjLGQ9dGhpc1swXSxlPXt0b3A6MCxsZWZ0OjB9LGY9ZCYmZC5vd25lckRvY3VtZW50O2lmKGYpcmV0dXJuIGI9Zi5kb2N1bWVudEVsZW1lbnQsbi5jb250YWlucyhiLGQpPyh0eXBlb2YgZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QhPT1VJiYoZT1kLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpKSxjPUtjKGYpLHt0b3A6ZS50b3ArYy5wYWdlWU9mZnNldC1iLmNsaWVudFRvcCxsZWZ0OmUubGVmdCtjLnBhZ2VYT2Zmc2V0LWIuY2xpZW50TGVmdH0pOmV9LHBvc2l0aW9uOmZ1bmN0aW9uKCl7aWYodGhpc1swXSl7dmFyIGEsYixjPXRoaXNbMF0sZD17dG9wOjAsbGVmdDowfTtyZXR1cm5cImZpeGVkXCI9PT1uLmNzcyhjLFwicG9zaXRpb25cIik/Yj1jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOihhPXRoaXMub2Zmc2V0UGFyZW50KCksYj10aGlzLm9mZnNldCgpLG4ubm9kZU5hbWUoYVswXSxcImh0bWxcIil8fChkPWEub2Zmc2V0KCkpLGQudG9wKz1uLmNzcyhhWzBdLFwiYm9yZGVyVG9wV2lkdGhcIiwhMCksZC5sZWZ0Kz1uLmNzcyhhWzBdLFwiYm9yZGVyTGVmdFdpZHRoXCIsITApKSx7dG9wOmIudG9wLWQudG9wLW4uY3NzKGMsXCJtYXJnaW5Ub3BcIiwhMCksbGVmdDpiLmxlZnQtZC5sZWZ0LW4uY3NzKGMsXCJtYXJnaW5MZWZ0XCIsITApfX19LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPXRoaXMub2Zmc2V0UGFyZW50fHxKYzt3aGlsZShhJiYhbi5ub2RlTmFtZShhLFwiaHRtbFwiKSYmXCJzdGF0aWNcIj09PW4uY3NzKGEsXCJwb3NpdGlvblwiKSlhPWEub2Zmc2V0UGFyZW50O3JldHVybiBhfHxKY30pfX0pLG4uZWFjaCh7c2Nyb2xsTGVmdDpcInBhZ2VYT2Zmc2V0XCIsc2Nyb2xsVG9wOlwicGFnZVlPZmZzZXRcIn0sZnVuY3Rpb24oYixjKXt2YXIgZD1cInBhZ2VZT2Zmc2V0XCI9PT1jO24uZm5bYl09ZnVuY3Rpb24oZSl7cmV0dXJuIEoodGhpcyxmdW5jdGlvbihiLGUsZil7dmFyIGc9S2MoYik7cmV0dXJuIHZvaWQgMD09PWY/Zz9nW2NdOmJbZV06dm9pZChnP2cuc2Nyb2xsVG8oZD9hLnBhZ2VYT2Zmc2V0OmYsZD9mOmEucGFnZVlPZmZzZXQpOmJbZV09Zil9LGIsZSxhcmd1bWVudHMubGVuZ3RoLG51bGwpfX0pLG4uZWFjaChbXCJ0b3BcIixcImxlZnRcIl0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2JdPXliKGsucGl4ZWxQb3NpdGlvbixmdW5jdGlvbihhLGMpe3JldHVybiBjPyhjPXhiKGEsYiksdmIudGVzdChjKT9uKGEpLnBvc2l0aW9uKClbYl0rXCJweFwiOmMpOnZvaWQgMH0pfSksbi5lYWNoKHtIZWlnaHQ6XCJoZWlnaHRcIixXaWR0aDpcIndpZHRoXCJ9LGZ1bmN0aW9uKGEsYil7bi5lYWNoKHtwYWRkaW5nOlwiaW5uZXJcIithLGNvbnRlbnQ6YixcIlwiOlwib3V0ZXJcIithfSxmdW5jdGlvbihjLGQpe24uZm5bZF09ZnVuY3Rpb24oZCxlKXt2YXIgZj1hcmd1bWVudHMubGVuZ3RoJiYoY3x8XCJib29sZWFuXCIhPXR5cGVvZiBkKSxnPWN8fChkPT09ITB8fGU9PT0hMD9cIm1hcmdpblwiOlwiYm9yZGVyXCIpO3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixjLGQpe3ZhciBlO3JldHVybiBuLmlzV2luZG93KGIpP2IuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50W1wiY2xpZW50XCIrYV06OT09PWIubm9kZVR5cGU/KGU9Yi5kb2N1bWVudEVsZW1lbnQsTWF0aC5tYXgoYi5ib2R5W1wic2Nyb2xsXCIrYV0sZVtcInNjcm9sbFwiK2FdLGIuYm9keVtcIm9mZnNldFwiK2FdLGVbXCJvZmZzZXRcIithXSxlW1wiY2xpZW50XCIrYV0pKTp2b2lkIDA9PT1kP24uY3NzKGIsYyxnKTpuLnN0eWxlKGIsYyxkLGcpfSxiLGY/ZDp2b2lkIDAsZixudWxsKX19KX0pLG4uZm4uc2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aH0sbi5mbi5hbmRTZWxmPW4uZm4uYWRkQmFjayxcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQmJmRlZmluZShcImpxdWVyeVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIG59KTt2YXIgTGM9YS5qUXVlcnksTWM9YS4kO3JldHVybiBuLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oYil7cmV0dXJuIGEuJD09PW4mJihhLiQ9TWMpLGImJmEualF1ZXJ5PT09biYmKGEualF1ZXJ5PUxjKSxufSx0eXBlb2YgYj09PVUmJihhLmpRdWVyeT1hLiQ9biksbn0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXAiLCIvKiEgQ29weXJpZ2h0IChjKSAyMDExIEJyYW5kb24gQWFyb24gKGh0dHA6Ly9icmFuZG9uYWFyb24ubmV0KVxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChMSUNFTlNFLnR4dCkuXG4gKlxuICogVGhhbmtzIHRvOiBodHRwOi8vYWRvbWFzLm9yZy9qYXZhc2NyaXB0LW1vdXNlLXdoZWVsLyBmb3Igc29tZSBwb2ludGVycy5cbiAqIFRoYW5rcyB0bzogTWF0aGlhcyBCYW5rKGh0dHA6Ly93d3cubWF0aGlhcy1iYW5rLmRlKSBmb3IgYSBzY29wZSBidWcgZml4LlxuICogVGhhbmtzIHRvOiBTZWFtdXMgTGVhaHkgZm9yIGFkZGluZyBkZWx0YVggYW5kIGRlbHRhWVxuICpcbiAqIFZlcnNpb246IDMuMC42XG4gKiBcbiAqIFJlcXVpcmVzOiAxLjIuMitcbiAqL1xuKGZ1bmN0aW9uKGQpe2Z1bmN0aW9uIGUoYSl7dmFyIGI9YXx8d2luZG93LmV2ZW50LGM9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksZj0wLGU9MCxnPTAsYT1kLmV2ZW50LmZpeChiKTthLnR5cGU9XCJtb3VzZXdoZWVsXCI7Yi53aGVlbERlbHRhJiYoZj1iLndoZWVsRGVsdGEvMTIwKTtiLmRldGFpbCYmKGY9LWIuZGV0YWlsLzMpO2c9ZjtiLmF4aXMhPT12b2lkIDAmJmIuYXhpcz09PWIuSE9SSVpPTlRBTF9BWElTJiYoZz0wLGU9LTEqZik7Yi53aGVlbERlbHRhWSE9PXZvaWQgMCYmKGc9Yi53aGVlbERlbHRhWS8xMjApO2Iud2hlZWxEZWx0YVghPT12b2lkIDAmJihlPS0xKmIud2hlZWxEZWx0YVgvMTIwKTtjLnVuc2hpZnQoYSxmLGUsZyk7cmV0dXJuKGQuZXZlbnQuZGlzcGF0Y2h8fGQuZXZlbnQuaGFuZGxlKS5hcHBseSh0aGlzLGMpfXZhciBjPVtcIkRPTU1vdXNlU2Nyb2xsXCIsXCJtb3VzZXdoZWVsXCJdO2lmKGQuZXZlbnQuZml4SG9va3MpZm9yKHZhciBoPWMubGVuZ3RoO2g7KWQuZXZlbnQuZml4SG9va3NbY1stLWhdXT1cbmQuZXZlbnQubW91c2VIb29rcztkLmV2ZW50LnNwZWNpYWwubW91c2V3aGVlbD17c2V0dXA6ZnVuY3Rpb24oKXtpZih0aGlzLmFkZEV2ZW50TGlzdGVuZXIpZm9yKHZhciBhPWMubGVuZ3RoO2E7KXRoaXMuYWRkRXZlbnRMaXN0ZW5lcihjWy0tYV0sZSxmYWxzZSk7ZWxzZSB0aGlzLm9ubW91c2V3aGVlbD1lfSx0ZWFyZG93bjpmdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcilmb3IodmFyIGE9Yy5sZW5ndGg7YTspdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGNbLS1hXSxlLGZhbHNlKTtlbHNlIHRoaXMub25tb3VzZXdoZWVsPW51bGx9fTtkLmZuLmV4dGVuZCh7bW91c2V3aGVlbDpmdW5jdGlvbihhKXtyZXR1cm4gYT90aGlzLmJpbmQoXCJtb3VzZXdoZWVsXCIsYSk6dGhpcy50cmlnZ2VyKFwibW91c2V3aGVlbFwiKX0sdW5tb3VzZXdoZWVsOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnVuYmluZChcIm1vdXNld2hlZWxcIixhKX19KX0pKGpRdWVyeSk7IiwiLyohXG4gKiBCb290c3RyYXAgdjMuMi4wIChodHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbSlcbiAqIENvcHlyaWdodCAyMDExLTIwMTQgVHdpdHRlciwgSW5jLlxuICogTGljZW5zZWQgdW5kZXIgTUlUIChodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvTElDRU5TRSlcbiAqL1xuaWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGpRdWVyeSl0aHJvdyBuZXcgRXJyb3IoXCJCb290c3RyYXAncyBKYXZhU2NyaXB0IHJlcXVpcmVzIGpRdWVyeVwiKTsrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYigpe3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJib290c3RyYXBcIiksYj17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIixNb3pUcmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwiLE9UcmFuc2l0aW9uOlwib1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvbmVuZFwifTtmb3IodmFyIGMgaW4gYilpZih2b2lkIDAhPT1hLnN0eWxlW2NdKXJldHVybntlbmQ6YltjXX07cmV0dXJuITF9YS5mbi5lbXVsYXRlVHJhbnNpdGlvbkVuZD1mdW5jdGlvbihiKXt2YXIgYz0hMSxkPXRoaXM7YSh0aGlzKS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2M9ITB9KTt2YXIgZT1mdW5jdGlvbigpe2N8fGEoZCkudHJpZ2dlcihhLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQpfTtyZXR1cm4gc2V0VGltZW91dChlLGIpLHRoaXN9LGEoZnVuY3Rpb24oKXthLnN1cHBvcnQudHJhbnNpdGlvbj1iKCksYS5zdXBwb3J0LnRyYW5zaXRpb24mJihhLmV2ZW50LnNwZWNpYWwuYnNUcmFuc2l0aW9uRW5kPXtiaW5kVHlwZTphLnN1cHBvcnQudHJhbnNpdGlvbi5lbmQsZGVsZWdhdGVUeXBlOmEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCxoYW5kbGU6ZnVuY3Rpb24oYil7cmV0dXJuIGEoYi50YXJnZXQpLmlzKHRoaXMpP2IuaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpOnZvaWQgMH19KX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGU9Yy5kYXRhKFwiYnMuYWxlcnRcIik7ZXx8Yy5kYXRhKFwiYnMuYWxlcnRcIixlPW5ldyBkKHRoaXMpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXS5jYWxsKGMpfSl9dmFyIGM9J1tkYXRhLWRpc21pc3M9XCJhbGVydFwiXScsZD1mdW5jdGlvbihiKXthKGIpLm9uKFwiY2xpY2tcIixjLHRoaXMuY2xvc2UpfTtkLlZFUlNJT049XCIzLjIuMFwiLGQucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKGIpe2Z1bmN0aW9uIGMoKXtmLmRldGFjaCgpLnRyaWdnZXIoXCJjbG9zZWQuYnMuYWxlcnRcIikucmVtb3ZlKCl9dmFyIGQ9YSh0aGlzKSxlPWQuYXR0cihcImRhdGEtdGFyZ2V0XCIpO2V8fChlPWQuYXR0cihcImhyZWZcIiksZT1lJiZlLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpO3ZhciBmPWEoZSk7YiYmYi5wcmV2ZW50RGVmYXVsdCgpLGYubGVuZ3RofHwoZj1kLmhhc0NsYXNzKFwiYWxlcnRcIik/ZDpkLnBhcmVudCgpKSxmLnRyaWdnZXIoYj1hLkV2ZW50KFwiY2xvc2UuYnMuYWxlcnRcIikpLGIuaXNEZWZhdWx0UHJldmVudGVkKCl8fChmLnJlbW92ZUNsYXNzKFwiaW5cIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJmYuaGFzQ2xhc3MoXCJmYWRlXCIpP2Yub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYykuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpjKCkpfTt2YXIgZT1hLmZuLmFsZXJ0O2EuZm4uYWxlcnQ9YixhLmZuLmFsZXJ0LkNvbnN0cnVjdG9yPWQsYS5mbi5hbGVydC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uYWxlcnQ9ZSx0aGlzfSxhKGRvY3VtZW50KS5vbihcImNsaWNrLmJzLmFsZXJ0LmRhdGEtYXBpXCIsYyxkLnByb3RvdHlwZS5jbG9zZSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5idXR0b25cIiksZj1cIm9iamVjdFwiPT10eXBlb2YgYiYmYjtlfHxkLmRhdGEoXCJicy5idXR0b25cIixlPW5ldyBjKHRoaXMsZikpLFwidG9nZ2xlXCI9PWI/ZS50b2dnbGUoKTpiJiZlLnNldFN0YXRlKGIpfSl9dmFyIGM9ZnVuY3Rpb24oYixkKXt0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5vcHRpb25zPWEuZXh0ZW5kKHt9LGMuREVGQVVMVFMsZCksdGhpcy5pc0xvYWRpbmc9ITF9O2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5ERUZBVUxUUz17bG9hZGluZ1RleHQ6XCJsb2FkaW5nLi4uXCJ9LGMucHJvdG90eXBlLnNldFN0YXRlPWZ1bmN0aW9uKGIpe3ZhciBjPVwiZGlzYWJsZWRcIixkPXRoaXMuJGVsZW1lbnQsZT1kLmlzKFwiaW5wdXRcIik/XCJ2YWxcIjpcImh0bWxcIixmPWQuZGF0YSgpO2IrPVwiVGV4dFwiLG51bGw9PWYucmVzZXRUZXh0JiZkLmRhdGEoXCJyZXNldFRleHRcIixkW2VdKCkpLGRbZV0obnVsbD09ZltiXT90aGlzLm9wdGlvbnNbYl06ZltiXSksc2V0VGltZW91dChhLnByb3h5KGZ1bmN0aW9uKCl7XCJsb2FkaW5nVGV4dFwiPT1iPyh0aGlzLmlzTG9hZGluZz0hMCxkLmFkZENsYXNzKGMpLmF0dHIoYyxjKSk6dGhpcy5pc0xvYWRpbmcmJih0aGlzLmlzTG9hZGluZz0hMSxkLnJlbW92ZUNsYXNzKGMpLnJlbW92ZUF0dHIoYykpfSx0aGlzKSwwKX0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dmFyIGE9ITAsYj10aGlzLiRlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLXRvZ2dsZT1cImJ1dHRvbnNcIl0nKTtpZihiLmxlbmd0aCl7dmFyIGM9dGhpcy4kZWxlbWVudC5maW5kKFwiaW5wdXRcIik7XCJyYWRpb1wiPT1jLnByb3AoXCJ0eXBlXCIpJiYoYy5wcm9wKFwiY2hlY2tlZFwiKSYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImFjdGl2ZVwiKT9hPSExOmIuZmluZChcIi5hY3RpdmVcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIikpLGEmJmMucHJvcChcImNoZWNrZWRcIiwhdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImFjdGl2ZVwiKSkudHJpZ2dlcihcImNoYW5nZVwiKX1hJiZ0aGlzLiRlbGVtZW50LnRvZ2dsZUNsYXNzKFwiYWN0aXZlXCIpfTt2YXIgZD1hLmZuLmJ1dHRvbjthLmZuLmJ1dHRvbj1iLGEuZm4uYnV0dG9uLkNvbnN0cnVjdG9yPWMsYS5mbi5idXR0b24ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmJ1dHRvbj1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuYnV0dG9uLmRhdGEtYXBpXCIsJ1tkYXRhLXRvZ2dsZV49XCJidXR0b25cIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEoYy50YXJnZXQpO2QuaGFzQ2xhc3MoXCJidG5cIil8fChkPWQuY2xvc2VzdChcIi5idG5cIikpLGIuY2FsbChkLFwidG9nZ2xlXCIpLGMucHJldmVudERlZmF1bHQoKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuY2Fyb3VzZWxcIiksZj1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxnPVwic3RyaW5nXCI9PXR5cGVvZiBiP2I6Zi5zbGlkZTtlfHxkLmRhdGEoXCJicy5jYXJvdXNlbFwiLGU9bmV3IGModGhpcyxmKSksXCJudW1iZXJcIj09dHlwZW9mIGI/ZS50byhiKTpnP2VbZ10oKTpmLmludGVydmFsJiZlLnBhdXNlKCkuY3ljbGUoKX0pfXZhciBjPWZ1bmN0aW9uKGIsYyl7dGhpcy4kZWxlbWVudD1hKGIpLm9uKFwia2V5ZG93bi5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5rZXlkb3duLHRoaXMpKSx0aGlzLiRpbmRpY2F0b3JzPXRoaXMuJGVsZW1lbnQuZmluZChcIi5jYXJvdXNlbC1pbmRpY2F0b3JzXCIpLHRoaXMub3B0aW9ucz1jLHRoaXMucGF1c2VkPXRoaXMuc2xpZGluZz10aGlzLmludGVydmFsPXRoaXMuJGFjdGl2ZT10aGlzLiRpdGVtcz1udWxsLFwiaG92ZXJcIj09dGhpcy5vcHRpb25zLnBhdXNlJiZ0aGlzLiRlbGVtZW50Lm9uKFwibW91c2VlbnRlci5icy5jYXJvdXNlbFwiLGEucHJveHkodGhpcy5wYXVzZSx0aGlzKSkub24oXCJtb3VzZWxlYXZlLmJzLmNhcm91c2VsXCIsYS5wcm94eSh0aGlzLmN5Y2xlLHRoaXMpKX07Yy5WRVJTSU9OPVwiMy4yLjBcIixjLkRFRkFVTFRTPXtpbnRlcnZhbDo1ZTMscGF1c2U6XCJob3ZlclwiLHdyYXA6ITB9LGMucHJvdG90eXBlLmtleWRvd249ZnVuY3Rpb24oYSl7c3dpdGNoKGEud2hpY2gpe2Nhc2UgMzc6dGhpcy5wcmV2KCk7YnJlYWs7Y2FzZSAzOTp0aGlzLm5leHQoKTticmVhaztkZWZhdWx0OnJldHVybn1hLnByZXZlbnREZWZhdWx0KCl9LGMucHJvdG90eXBlLmN5Y2xlPWZ1bmN0aW9uKGIpe3JldHVybiBifHwodGhpcy5wYXVzZWQ9ITEpLHRoaXMuaW50ZXJ2YWwmJmNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCksdGhpcy5vcHRpb25zLmludGVydmFsJiYhdGhpcy5wYXVzZWQmJih0aGlzLmludGVydmFsPXNldEludGVydmFsKGEucHJveHkodGhpcy5uZXh0LHRoaXMpLHRoaXMub3B0aW9ucy5pbnRlcnZhbCkpLHRoaXN9LGMucHJvdG90eXBlLmdldEl0ZW1JbmRleD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kaXRlbXM9YS5wYXJlbnQoKS5jaGlsZHJlbihcIi5pdGVtXCIpLHRoaXMuJGl0ZW1zLmluZGV4KGF8fHRoaXMuJGFjdGl2ZSl9LGMucHJvdG90eXBlLnRvPWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsZD10aGlzLmdldEl0ZW1JbmRleCh0aGlzLiRhY3RpdmU9dGhpcy4kZWxlbWVudC5maW5kKFwiLml0ZW0uYWN0aXZlXCIpKTtyZXR1cm4gYj50aGlzLiRpdGVtcy5sZW5ndGgtMXx8MD5iP3ZvaWQgMDp0aGlzLnNsaWRpbmc/dGhpcy4kZWxlbWVudC5vbmUoXCJzbGlkLmJzLmNhcm91c2VsXCIsZnVuY3Rpb24oKXtjLnRvKGIpfSk6ZD09Yj90aGlzLnBhdXNlKCkuY3ljbGUoKTp0aGlzLnNsaWRlKGI+ZD9cIm5leHRcIjpcInByZXZcIixhKHRoaXMuJGl0ZW1zW2JdKSl9LGMucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKGIpe3JldHVybiBifHwodGhpcy5wYXVzZWQ9ITApLHRoaXMuJGVsZW1lbnQuZmluZChcIi5uZXh0LCAucHJldlwiKS5sZW5ndGgmJmEuc3VwcG9ydC50cmFuc2l0aW9uJiYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGEuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCksdGhpcy5jeWNsZSghMCkpLHRoaXMuaW50ZXJ2YWw9Y2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKSx0aGlzfSxjLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2xpZGluZz92b2lkIDA6dGhpcy5zbGlkZShcIm5leHRcIil9LGMucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zbGlkaW5nP3ZvaWQgMDp0aGlzLnNsaWRlKFwicHJldlwiKX0sYy5wcm90b3R5cGUuc2xpZGU9ZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLiRlbGVtZW50LmZpbmQoXCIuaXRlbS5hY3RpdmVcIiksZT1jfHxkW2JdKCksZj10aGlzLmludGVydmFsLGc9XCJuZXh0XCI9PWI/XCJsZWZ0XCI6XCJyaWdodFwiLGg9XCJuZXh0XCI9PWI/XCJmaXJzdFwiOlwibGFzdFwiLGk9dGhpcztpZighZS5sZW5ndGgpe2lmKCF0aGlzLm9wdGlvbnMud3JhcClyZXR1cm47ZT10aGlzLiRlbGVtZW50LmZpbmQoXCIuaXRlbVwiKVtoXSgpfWlmKGUuaGFzQ2xhc3MoXCJhY3RpdmVcIikpcmV0dXJuIHRoaXMuc2xpZGluZz0hMTt2YXIgaj1lWzBdLGs9YS5FdmVudChcInNsaWRlLmJzLmNhcm91c2VsXCIse3JlbGF0ZWRUYXJnZXQ6aixkaXJlY3Rpb246Z30pO2lmKHRoaXMuJGVsZW1lbnQudHJpZ2dlcihrKSwhay5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYodGhpcy5zbGlkaW5nPSEwLGYmJnRoaXMucGF1c2UoKSx0aGlzLiRpbmRpY2F0b3JzLmxlbmd0aCl7dGhpcy4kaW5kaWNhdG9ycy5maW5kKFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTt2YXIgbD1hKHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oKVt0aGlzLmdldEl0ZW1JbmRleChlKV0pO2wmJmwuYWRkQ2xhc3MoXCJhY3RpdmVcIil9dmFyIG09YS5FdmVudChcInNsaWQuYnMuY2Fyb3VzZWxcIix7cmVsYXRlZFRhcmdldDpqLGRpcmVjdGlvbjpnfSk7cmV0dXJuIGEuc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwic2xpZGVcIik/KGUuYWRkQ2xhc3MoYiksZVswXS5vZmZzZXRXaWR0aCxkLmFkZENsYXNzKGcpLGUuYWRkQ2xhc3MoZyksZC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2UucmVtb3ZlQ2xhc3MoW2IsZ10uam9pbihcIiBcIikpLmFkZENsYXNzKFwiYWN0aXZlXCIpLGQucmVtb3ZlQ2xhc3MoW1wiYWN0aXZlXCIsZ10uam9pbihcIiBcIikpLGkuc2xpZGluZz0hMSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS4kZWxlbWVudC50cmlnZ2VyKG0pfSwwKX0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDFlMypkLmNzcyhcInRyYW5zaXRpb24tZHVyYXRpb25cIikuc2xpY2UoMCwtMSkpKTooZC5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxlLmFkZENsYXNzKFwiYWN0aXZlXCIpLHRoaXMuc2xpZGluZz0hMSx0aGlzLiRlbGVtZW50LnRyaWdnZXIobSkpLGYmJnRoaXMuY3ljbGUoKSx0aGlzfX07dmFyIGQ9YS5mbi5jYXJvdXNlbDthLmZuLmNhcm91c2VsPWIsYS5mbi5jYXJvdXNlbC5Db25zdHJ1Y3Rvcj1jLGEuZm4uY2Fyb3VzZWwubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmNhcm91c2VsPWQsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5jYXJvdXNlbC5kYXRhLWFwaVwiLFwiW2RhdGEtc2xpZGVdLCBbZGF0YS1zbGlkZS10b11cIixmdW5jdGlvbihjKXt2YXIgZCxlPWEodGhpcyksZj1hKGUuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHwoZD1lLmF0dHIoXCJocmVmXCIpKSYmZC5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpKTtpZihmLmhhc0NsYXNzKFwiY2Fyb3VzZWxcIikpe3ZhciBnPWEuZXh0ZW5kKHt9LGYuZGF0YSgpLGUuZGF0YSgpKSxoPWUuYXR0cihcImRhdGEtc2xpZGUtdG9cIik7aCYmKGcuaW50ZXJ2YWw9ITEpLGIuY2FsbChmLGcpLGgmJmYuZGF0YShcImJzLmNhcm91c2VsXCIpLnRvKGgpLGMucHJldmVudERlZmF1bHQoKX19KSxhKHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXthKCdbZGF0YS1yaWRlPVwiY2Fyb3VzZWxcIl0nKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9YSh0aGlzKTtiLmNhbGwoYyxjLmRhdGEoKSl9KX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLGU9ZC5kYXRhKFwiYnMuY29sbGFwc2VcIiksZj1hLmV4dGVuZCh7fSxjLkRFRkFVTFRTLGQuZGF0YSgpLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKTshZSYmZi50b2dnbGUmJlwic2hvd1wiPT1iJiYoYj0hYiksZXx8ZC5kYXRhKFwiYnMuY29sbGFwc2VcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCl9KX12YXIgYz1mdW5jdGlvbihiLGQpe3RoaXMuJGVsZW1lbnQ9YShiKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLnRyYW5zaXRpb25pbmc9bnVsbCx0aGlzLm9wdGlvbnMucGFyZW50JiYodGhpcy4kcGFyZW50PWEodGhpcy5vcHRpb25zLnBhcmVudCkpLHRoaXMub3B0aW9ucy50b2dnbGUmJnRoaXMudG9nZ2xlKCl9O2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5ERUZBVUxUUz17dG9nZ2xlOiEwfSxjLnByb3RvdHlwZS5kaW1lbnNpb249ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwid2lkdGhcIik7cmV0dXJuIGE/XCJ3aWR0aFwiOlwiaGVpZ2h0XCJ9LGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXtpZighdGhpcy50cmFuc2l0aW9uaW5nJiYhdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImluXCIpKXt2YXIgYz1hLkV2ZW50KFwic2hvdy5icy5jb2xsYXBzZVwiKTtpZih0aGlzLiRlbGVtZW50LnRyaWdnZXIoYyksIWMuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBkPXRoaXMuJHBhcmVudCYmdGhpcy4kcGFyZW50LmZpbmQoXCI+IC5wYW5lbCA+IC5pblwiKTtpZihkJiZkLmxlbmd0aCl7dmFyIGU9ZC5kYXRhKFwiYnMuY29sbGFwc2VcIik7aWYoZSYmZS50cmFuc2l0aW9uaW5nKXJldHVybjtiLmNhbGwoZCxcImhpZGVcIiksZXx8ZC5kYXRhKFwiYnMuY29sbGFwc2VcIixudWxsKX12YXIgZj10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKS5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIilbZl0oMCksdGhpcy50cmFuc2l0aW9uaW5nPTE7dmFyIGc9ZnVuY3Rpb24oKXt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlIGluXCIpW2ZdKFwiXCIpLHRoaXMudHJhbnNpdGlvbmluZz0wLHRoaXMuJGVsZW1lbnQudHJpZ2dlcihcInNob3duLmJzLmNvbGxhcHNlXCIpfTtpZighYS5zdXBwb3J0LnRyYW5zaXRpb24pcmV0dXJuIGcuY2FsbCh0aGlzKTt2YXIgaD1hLmNhbWVsQ2FzZShbXCJzY3JvbGxcIixmXS5qb2luKFwiLVwiKSk7dGhpcy4kZWxlbWVudC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixhLnByb3h5KGcsdGhpcykpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDM1MClbZl0odGhpcy4kZWxlbWVudFswXVtoXSl9fX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe2lmKCF0aGlzLnRyYW5zaXRpb25pbmcmJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJpblwiKSl7dmFyIGI9YS5FdmVudChcImhpZGUuYnMuY29sbGFwc2VcIik7aWYodGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpLCFiLmlzRGVmYXVsdFByZXZlbnRlZCgpKXt2YXIgYz10aGlzLmRpbWVuc2lvbigpO3RoaXMuJGVsZW1lbnRbY10odGhpcy4kZWxlbWVudFtjXSgpKVswXS5vZmZzZXRIZWlnaHQsdGhpcy4kZWxlbWVudC5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIikucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZVwiKS5yZW1vdmVDbGFzcyhcImluXCIpLHRoaXMudHJhbnNpdGlvbmluZz0xO3ZhciBkPWZ1bmN0aW9uKCl7dGhpcy50cmFuc2l0aW9uaW5nPTAsdGhpcy4kZWxlbWVudC50cmlnZ2VyKFwiaGlkZGVuLmJzLmNvbGxhcHNlXCIpLnJlbW92ZUNsYXNzKFwiY29sbGFwc2luZ1wiKS5hZGRDbGFzcyhcImNvbGxhcHNlXCIpfTtyZXR1cm4gYS5zdXBwb3J0LnRyYW5zaXRpb24/dm9pZCB0aGlzLiRlbGVtZW50W2NdKDApLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGEucHJveHkoZCx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMzUwKTpkLmNhbGwodGhpcyl9fX0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7dGhpc1t0aGlzLiRlbGVtZW50Lmhhc0NsYXNzKFwiaW5cIik/XCJoaWRlXCI6XCJzaG93XCJdKCl9O3ZhciBkPWEuZm4uY29sbGFwc2U7YS5mbi5jb2xsYXBzZT1iLGEuZm4uY29sbGFwc2UuQ29uc3RydWN0b3I9YyxhLmZuLmNvbGxhcHNlLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5jb2xsYXBzZT1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMuY29sbGFwc2UuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwiY29sbGFwc2VcIl0nLGZ1bmN0aW9uKGMpe3ZhciBkLGU9YSh0aGlzKSxmPWUuYXR0cihcImRhdGEtdGFyZ2V0XCIpfHxjLnByZXZlbnREZWZhdWx0KCl8fChkPWUuYXR0cihcImhyZWZcIikpJiZkLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIiksZz1hKGYpLGg9Zy5kYXRhKFwiYnMuY29sbGFwc2VcIiksaT1oP1widG9nZ2xlXCI6ZS5kYXRhKCksaj1lLmF0dHIoXCJkYXRhLXBhcmVudFwiKSxrPWomJmEoaik7aCYmaC50cmFuc2l0aW9uaW5nfHwoayYmay5maW5kKCdbZGF0YS10b2dnbGU9XCJjb2xsYXBzZVwiXVtkYXRhLXBhcmVudD1cIicraisnXCJdJykubm90KGUpLmFkZENsYXNzKFwiY29sbGFwc2VkXCIpLGVbZy5oYXNDbGFzcyhcImluXCIpP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwiY29sbGFwc2VkXCIpKSxiLmNhbGwoZyxpKX0pfShqUXVlcnkpLCtmdW5jdGlvbihhKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBiKGIpe2ImJjM9PT1iLndoaWNofHwoYShlKS5yZW1vdmUoKSxhKGYpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1jKGEodGhpcykpLGU9e3JlbGF0ZWRUYXJnZXQ6dGhpc307ZC5oYXNDbGFzcyhcIm9wZW5cIikmJihkLnRyaWdnZXIoYj1hLkV2ZW50KFwiaGlkZS5icy5kcm9wZG93blwiLGUpKSxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxkLnJlbW92ZUNsYXNzKFwib3BlblwiKS50cmlnZ2VyKFwiaGlkZGVuLmJzLmRyb3Bkb3duXCIsZSkpfSkpfWZ1bmN0aW9uIGMoYil7dmFyIGM9Yi5hdHRyKFwiZGF0YS10YXJnZXRcIik7Y3x8KGM9Yi5hdHRyKFwiaHJlZlwiKSxjPWMmJi8jW0EtWmEtel0vLnRlc3QoYykmJmMucmVwbGFjZSgvLiooPz0jW15cXHNdKiQpLyxcIlwiKSk7dmFyIGQ9YyYmYShjKTtyZXR1cm4gZCYmZC5sZW5ndGg/ZDpiLnBhcmVudCgpfWZ1bmN0aW9uIGQoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBjPWEodGhpcyksZD1jLmRhdGEoXCJicy5kcm9wZG93blwiKTtkfHxjLmRhdGEoXCJicy5kcm9wZG93blwiLGQ9bmV3IGcodGhpcykpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZkW2JdLmNhbGwoYyl9KX12YXIgZT1cIi5kcm9wZG93bi1iYWNrZHJvcFwiLGY9J1tkYXRhLXRvZ2dsZT1cImRyb3Bkb3duXCJdJyxnPWZ1bmN0aW9uKGIpe2EoYikub24oXCJjbGljay5icy5kcm9wZG93blwiLHRoaXMudG9nZ2xlKX07Zy5WRVJTSU9OPVwiMy4yLjBcIixnLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oZCl7dmFyIGU9YSh0aGlzKTtpZighZS5pcyhcIi5kaXNhYmxlZCwgOmRpc2FibGVkXCIpKXt2YXIgZj1jKGUpLGc9Zi5oYXNDbGFzcyhcIm9wZW5cIik7aWYoYigpLCFnKXtcIm9udG91Y2hzdGFydFwiaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50JiYhZi5jbG9zZXN0KFwiLm5hdmJhci1uYXZcIikubGVuZ3RoJiZhKCc8ZGl2IGNsYXNzPVwiZHJvcGRvd24tYmFja2Ryb3BcIi8+JykuaW5zZXJ0QWZ0ZXIoYSh0aGlzKSkub24oXCJjbGlja1wiLGIpO3ZhciBoPXtyZWxhdGVkVGFyZ2V0OnRoaXN9O2lmKGYudHJpZ2dlcihkPWEuRXZlbnQoXCJzaG93LmJzLmRyb3Bkb3duXCIsaCkpLGQuaXNEZWZhdWx0UHJldmVudGVkKCkpcmV0dXJuO2UudHJpZ2dlcihcImZvY3VzXCIpLGYudG9nZ2xlQ2xhc3MoXCJvcGVuXCIpLnRyaWdnZXIoXCJzaG93bi5icy5kcm9wZG93blwiLGgpfXJldHVybiExfX0sZy5wcm90b3R5cGUua2V5ZG93bj1mdW5jdGlvbihiKXtpZigvKDM4fDQwfDI3KS8udGVzdChiLmtleUNvZGUpKXt2YXIgZD1hKHRoaXMpO2lmKGIucHJldmVudERlZmF1bHQoKSxiLnN0b3BQcm9wYWdhdGlvbigpLCFkLmlzKFwiLmRpc2FibGVkLCA6ZGlzYWJsZWRcIikpe3ZhciBlPWMoZCksZz1lLmhhc0NsYXNzKFwib3BlblwiKTtpZighZ3x8ZyYmMjc9PWIua2V5Q29kZSlyZXR1cm4gMjc9PWIud2hpY2gmJmUuZmluZChmKS50cmlnZ2VyKFwiZm9jdXNcIiksZC50cmlnZ2VyKFwiY2xpY2tcIik7dmFyIGg9XCIgbGk6bm90KC5kaXZpZGVyKTp2aXNpYmxlIGFcIixpPWUuZmluZCgnW3JvbGU9XCJtZW51XCJdJytoKycsIFtyb2xlPVwibGlzdGJveFwiXScraCk7aWYoaS5sZW5ndGgpe3ZhciBqPWkuaW5kZXgoaS5maWx0ZXIoXCI6Zm9jdXNcIikpOzM4PT1iLmtleUNvZGUmJmo+MCYmai0tLDQwPT1iLmtleUNvZGUmJmo8aS5sZW5ndGgtMSYmaisrLH5qfHwoaj0wKSxpLmVxKGopLnRyaWdnZXIoXCJmb2N1c1wiKX19fX07dmFyIGg9YS5mbi5kcm9wZG93bjthLmZuLmRyb3Bkb3duPWQsYS5mbi5kcm9wZG93bi5Db25zdHJ1Y3Rvcj1nLGEuZm4uZHJvcGRvd24ubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLmRyb3Bkb3duPWgsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy5kcm9wZG93bi5kYXRhLWFwaVwiLGIpLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixcIi5kcm9wZG93biBmb3JtXCIsZnVuY3Rpb24oYSl7YS5zdG9wUHJvcGFnYXRpb24oKX0pLm9uKFwiY2xpY2suYnMuZHJvcGRvd24uZGF0YS1hcGlcIixmLGcucHJvdG90eXBlLnRvZ2dsZSkub24oXCJrZXlkb3duLmJzLmRyb3Bkb3duLmRhdGEtYXBpXCIsZisnLCBbcm9sZT1cIm1lbnVcIl0sIFtyb2xlPVwibGlzdGJveFwiXScsZy5wcm90b3R5cGUua2V5ZG93bil9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYixkKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGU9YSh0aGlzKSxmPWUuZGF0YShcImJzLm1vZGFsXCIpLGc9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxlLmRhdGEoKSxcIm9iamVjdFwiPT10eXBlb2YgYiYmYik7Znx8ZS5kYXRhKFwiYnMubW9kYWxcIixmPW5ldyBjKHRoaXMsZykpLFwic3RyaW5nXCI9PXR5cGVvZiBiP2ZbYl0oZCk6Zy5zaG93JiZmLnNob3coZCl9KX12YXIgYz1mdW5jdGlvbihiLGMpe3RoaXMub3B0aW9ucz1jLHRoaXMuJGJvZHk9YShkb2N1bWVudC5ib2R5KSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy4kYmFja2Ryb3A9dGhpcy5pc1Nob3duPW51bGwsdGhpcy5zY3JvbGxiYXJXaWR0aD0wLHRoaXMub3B0aW9ucy5yZW1vdGUmJnRoaXMuJGVsZW1lbnQuZmluZChcIi5tb2RhbC1jb250ZW50XCIpLmxvYWQodGhpcy5vcHRpb25zLnJlbW90ZSxhLnByb3h5KGZ1bmN0aW9uKCl7dGhpcy4kZWxlbWVudC50cmlnZ2VyKFwibG9hZGVkLmJzLm1vZGFsXCIpfSx0aGlzKSl9O2MuVkVSU0lPTj1cIjMuMi4wXCIsYy5ERUZBVUxUUz17YmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITAsc2hvdzohMH0sYy5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmlzU2hvd24/dGhpcy5oaWRlKCk6dGhpcy5zaG93KGEpfSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMsZD1hLkV2ZW50KFwic2hvdy5icy5tb2RhbFwiLHtyZWxhdGVkVGFyZ2V0OmJ9KTt0aGlzLiRlbGVtZW50LnRyaWdnZXIoZCksdGhpcy5pc1Nob3dufHxkLmlzRGVmYXVsdFByZXZlbnRlZCgpfHwodGhpcy5pc1Nob3duPSEwLHRoaXMuY2hlY2tTY3JvbGxiYXIoKSx0aGlzLiRib2R5LmFkZENsYXNzKFwibW9kYWwtb3BlblwiKSx0aGlzLnNldFNjcm9sbGJhcigpLHRoaXMuZXNjYXBlKCksdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIiwnW2RhdGEtZGlzbWlzcz1cIm1vZGFsXCJdJyxhLnByb3h5KHRoaXMuaGlkZSx0aGlzKSksdGhpcy5iYWNrZHJvcChmdW5jdGlvbigpe3ZhciBkPWEuc3VwcG9ydC50cmFuc2l0aW9uJiZjLiRlbGVtZW50Lmhhc0NsYXNzKFwiZmFkZVwiKTtjLiRlbGVtZW50LnBhcmVudCgpLmxlbmd0aHx8Yy4kZWxlbWVudC5hcHBlbmRUbyhjLiRib2R5KSxjLiRlbGVtZW50LnNob3coKS5zY3JvbGxUb3AoMCksZCYmYy4kZWxlbWVudFswXS5vZmZzZXRXaWR0aCxjLiRlbGVtZW50LmFkZENsYXNzKFwiaW5cIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITEpLGMuZW5mb3JjZUZvY3VzKCk7dmFyIGU9YS5FdmVudChcInNob3duLmJzLm1vZGFsXCIse3JlbGF0ZWRUYXJnZXQ6Yn0pO2Q/Yy4kZWxlbWVudC5maW5kKFwiLm1vZGFsLWRpYWxvZ1wiKS5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixmdW5jdGlvbigpe2MuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpLnRyaWdnZXIoZSl9KS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgzMDApOmMuJGVsZW1lbnQudHJpZ2dlcihcImZvY3VzXCIpLnRyaWdnZXIoZSl9KSl9LGMucHJvdG90eXBlLmhpZGU9ZnVuY3Rpb24oYil7YiYmYi5wcmV2ZW50RGVmYXVsdCgpLGI9YS5FdmVudChcImhpZGUuYnMubW9kYWxcIiksdGhpcy4kZWxlbWVudC50cmlnZ2VyKGIpLHRoaXMuaXNTaG93biYmIWIuaXNEZWZhdWx0UHJldmVudGVkKCkmJih0aGlzLmlzU2hvd249ITEsdGhpcy4kYm9keS5yZW1vdmVDbGFzcyhcIm1vZGFsLW9wZW5cIiksdGhpcy5yZXNldFNjcm9sbGJhcigpLHRoaXMuZXNjYXBlKCksYShkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5icy5tb2RhbFwiKSx0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKFwiaW5cIikuYXR0cihcImFyaWEtaGlkZGVuXCIsITApLm9mZihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP3RoaXMuJGVsZW1lbnQub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsYS5wcm94eSh0aGlzLmhpZGVNb2RhbCx0aGlzKSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMzAwKTp0aGlzLmhpZGVNb2RhbCgpKX0sYy5wcm90b3R5cGUuZW5mb3JjZUZvY3VzPWZ1bmN0aW9uKCl7YShkb2N1bWVudCkub2ZmKFwiZm9jdXNpbi5icy5tb2RhbFwiKS5vbihcImZvY3VzaW4uYnMubW9kYWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpe3RoaXMuJGVsZW1lbnRbMF09PT1hLnRhcmdldHx8dGhpcy4kZWxlbWVudC5oYXMoYS50YXJnZXQpLmxlbmd0aHx8dGhpcy4kZWxlbWVudC50cmlnZ2VyKFwiZm9jdXNcIil9LHRoaXMpKX0sYy5wcm90b3R5cGUuZXNjYXBlPWZ1bmN0aW9uKCl7dGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMua2V5Ym9hcmQ/dGhpcy4kZWxlbWVudC5vbihcImtleXVwLmRpc21pc3MuYnMubW9kYWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpezI3PT1hLndoaWNoJiZ0aGlzLmhpZGUoKX0sdGhpcykpOnRoaXMuaXNTaG93bnx8dGhpcy4kZWxlbWVudC5vZmYoXCJrZXl1cC5kaXNtaXNzLmJzLm1vZGFsXCIpfSxjLnByb3RvdHlwZS5oaWRlTW9kYWw9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3RoaXMuJGVsZW1lbnQuaGlkZSgpLHRoaXMuYmFja2Ryb3AoZnVuY3Rpb24oKXthLiRlbGVtZW50LnRyaWdnZXIoXCJoaWRkZW4uYnMubW9kYWxcIil9KX0sYy5wcm90b3R5cGUucmVtb3ZlQmFja2Ryb3A9ZnVuY3Rpb24oKXt0aGlzLiRiYWNrZHJvcCYmdGhpcy4kYmFja2Ryb3AucmVtb3ZlKCksdGhpcy4kYmFja2Ryb3A9bnVsbH0sYy5wcm90b3R5cGUuYmFja2Ryb3A9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxkPXRoaXMuJGVsZW1lbnQuaGFzQ2xhc3MoXCJmYWRlXCIpP1wiZmFkZVwiOlwiXCI7aWYodGhpcy5pc1Nob3duJiZ0aGlzLm9wdGlvbnMuYmFja2Ryb3Ape3ZhciBlPWEuc3VwcG9ydC50cmFuc2l0aW9uJiZkO2lmKHRoaXMuJGJhY2tkcm9wPWEoJzxkaXYgY2xhc3M9XCJtb2RhbC1iYWNrZHJvcCAnK2QrJ1wiIC8+JykuYXBwZW5kVG8odGhpcy4kYm9keSksdGhpcy4kZWxlbWVudC5vbihcImNsaWNrLmRpc21pc3MuYnMubW9kYWxcIixhLnByb3h5KGZ1bmN0aW9uKGEpe2EudGFyZ2V0PT09YS5jdXJyZW50VGFyZ2V0JiYoXCJzdGF0aWNcIj09dGhpcy5vcHRpb25zLmJhY2tkcm9wP3RoaXMuJGVsZW1lbnRbMF0uZm9jdXMuY2FsbCh0aGlzLiRlbGVtZW50WzBdKTp0aGlzLmhpZGUuY2FsbCh0aGlzKSl9LHRoaXMpKSxlJiZ0aGlzLiRiYWNrZHJvcFswXS5vZmZzZXRXaWR0aCx0aGlzLiRiYWNrZHJvcC5hZGRDbGFzcyhcImluXCIpLCFiKXJldHVybjtlP3RoaXMuJGJhY2tkcm9wLm9uZShcImJzVHJhbnNpdGlvbkVuZFwiLGIpLmVtdWxhdGVUcmFuc2l0aW9uRW5kKDE1MCk6YigpfWVsc2UgaWYoIXRoaXMuaXNTaG93biYmdGhpcy4kYmFja2Ryb3Ape3RoaXMuJGJhY2tkcm9wLnJlbW92ZUNsYXNzKFwiaW5cIik7dmFyIGY9ZnVuY3Rpb24oKXtjLnJlbW92ZUJhY2tkcm9wKCksYiYmYigpfTthLnN1cHBvcnQudHJhbnNpdGlvbiYmdGhpcy4kZWxlbWVudC5oYXNDbGFzcyhcImZhZGVcIik/dGhpcy4kYmFja2Ryb3Aub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIsZikuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpmKCl9ZWxzZSBiJiZiKCl9LGMucHJvdG90eXBlLmNoZWNrU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aD49d2luZG93LmlubmVyV2lkdGh8fCh0aGlzLnNjcm9sbGJhcldpZHRoPXRoaXMuc2Nyb2xsYmFyV2lkdGh8fHRoaXMubWVhc3VyZVNjcm9sbGJhcigpKX0sYy5wcm90b3R5cGUuc2V0U2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9cGFyc2VJbnQodGhpcy4kYm9keS5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpfHwwLDEwKTt0aGlzLnNjcm9sbGJhcldpZHRoJiZ0aGlzLiRib2R5LmNzcyhcInBhZGRpbmctcmlnaHRcIixhK3RoaXMuc2Nyb2xsYmFyV2lkdGgpfSxjLnByb3RvdHlwZS5yZXNldFNjcm9sbGJhcj1mdW5jdGlvbigpe3RoaXMuJGJvZHkuY3NzKFwicGFkZGluZy1yaWdodFwiLFwiXCIpfSxjLnByb3RvdHlwZS5tZWFzdXJlU2Nyb2xsYmFyPWZ1bmN0aW9uKCl7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLmNsYXNzTmFtZT1cIm1vZGFsLXNjcm9sbGJhci1tZWFzdXJlXCIsdGhpcy4kYm9keS5hcHBlbmQoYSk7dmFyIGI9YS5vZmZzZXRXaWR0aC1hLmNsaWVudFdpZHRoO3JldHVybiB0aGlzLiRib2R5WzBdLnJlbW92ZUNoaWxkKGEpLGJ9O3ZhciBkPWEuZm4ubW9kYWw7YS5mbi5tb2RhbD1iLGEuZm4ubW9kYWwuQ29uc3RydWN0b3I9YyxhLmZuLm1vZGFsLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi5tb2RhbD1kLHRoaXN9LGEoZG9jdW1lbnQpLm9uKFwiY2xpY2suYnMubW9kYWwuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwibW9kYWxcIl0nLGZ1bmN0aW9uKGMpe3ZhciBkPWEodGhpcyksZT1kLmF0dHIoXCJocmVmXCIpLGY9YShkLmF0dHIoXCJkYXRhLXRhcmdldFwiKXx8ZSYmZS5yZXBsYWNlKC8uKig/PSNbXlxcc10rJCkvLFwiXCIpKSxnPWYuZGF0YShcImJzLm1vZGFsXCIpP1widG9nZ2xlXCI6YS5leHRlbmQoe3JlbW90ZTohLyMvLnRlc3QoZSkmJmV9LGYuZGF0YSgpLGQuZGF0YSgpKTtkLmlzKFwiYVwiKSYmYy5wcmV2ZW50RGVmYXVsdCgpLGYub25lKFwic2hvdy5icy5tb2RhbFwiLGZ1bmN0aW9uKGEpe2EuaXNEZWZhdWx0UHJldmVudGVkKCl8fGYub25lKFwiaGlkZGVuLmJzLm1vZGFsXCIsZnVuY3Rpb24oKXtkLmlzKFwiOnZpc2libGVcIikmJmQudHJpZ2dlcihcImZvY3VzXCIpfSl9KSxiLmNhbGwoZixnLHRoaXMpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy50b29sdGlwXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7KGV8fFwiZGVzdHJveVwiIT1iKSYmKGV8fGQuZGF0YShcImJzLnRvb2x0aXBcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLnR5cGU9dGhpcy5vcHRpb25zPXRoaXMuZW5hYmxlZD10aGlzLnRpbWVvdXQ9dGhpcy5ob3ZlclN0YXRlPXRoaXMuJGVsZW1lbnQ9bnVsbCx0aGlzLmluaXQoXCJ0b29sdGlwXCIsYSxiKX07Yy5WRVJTSU9OPVwiMy4yLjBcIixjLkRFRkFVTFRTPXthbmltYXRpb246ITAscGxhY2VtZW50OlwidG9wXCIsc2VsZWN0b3I6ITEsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJ0b29sdGlwXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwidG9vbHRpcC1hcnJvd1wiPjwvZGl2PjxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCI+PC9kaXY+PC9kaXY+Jyx0cmlnZ2VyOlwiaG92ZXIgZm9jdXNcIix0aXRsZTpcIlwiLGRlbGF5OjAsaHRtbDohMSxjb250YWluZXI6ITEsdmlld3BvcnQ6e3NlbGVjdG9yOlwiYm9keVwiLHBhZGRpbmc6MH19LGMucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24oYixjLGQpe3RoaXMuZW5hYmxlZD0hMCx0aGlzLnR5cGU9Yix0aGlzLiRlbGVtZW50PWEoYyksdGhpcy5vcHRpb25zPXRoaXMuZ2V0T3B0aW9ucyhkKSx0aGlzLiR2aWV3cG9ydD10aGlzLm9wdGlvbnMudmlld3BvcnQmJmEodGhpcy5vcHRpb25zLnZpZXdwb3J0LnNlbGVjdG9yfHx0aGlzLm9wdGlvbnMudmlld3BvcnQpO2Zvcih2YXIgZT10aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdChcIiBcIiksZj1lLmxlbmd0aDtmLS07KXt2YXIgZz1lW2ZdO2lmKFwiY2xpY2tcIj09Zyl0aGlzLiRlbGVtZW50Lm9uKFwiY2xpY2suXCIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMudG9nZ2xlLHRoaXMpKTtlbHNlIGlmKFwibWFudWFsXCIhPWcpe3ZhciBoPVwiaG92ZXJcIj09Zz9cIm1vdXNlZW50ZXJcIjpcImZvY3VzaW5cIixpPVwiaG92ZXJcIj09Zz9cIm1vdXNlbGVhdmVcIjpcImZvY3Vzb3V0XCI7dGhpcy4kZWxlbWVudC5vbihoK1wiLlwiK3RoaXMudHlwZSx0aGlzLm9wdGlvbnMuc2VsZWN0b3IsYS5wcm94eSh0aGlzLmVudGVyLHRoaXMpKSx0aGlzLiRlbGVtZW50Lm9uKGkrXCIuXCIrdGhpcy50eXBlLHRoaXMub3B0aW9ucy5zZWxlY3RvcixhLnByb3h5KHRoaXMubGVhdmUsdGhpcykpfX10aGlzLm9wdGlvbnMuc2VsZWN0b3I/dGhpcy5fb3B0aW9ucz1hLmV4dGVuZCh7fSx0aGlzLm9wdGlvbnMse3RyaWdnZXI6XCJtYW51YWxcIixzZWxlY3RvcjpcIlwifSk6dGhpcy5maXhUaXRsZSgpfSxjLnByb3RvdHlwZS5nZXREZWZhdWx0cz1mdW5jdGlvbigpe3JldHVybiBjLkRFRkFVTFRTfSxjLnByb3RvdHlwZS5nZXRPcHRpb25zPWZ1bmN0aW9uKGIpe3JldHVybiBiPWEuZXh0ZW5kKHt9LHRoaXMuZ2V0RGVmYXVsdHMoKSx0aGlzLiRlbGVtZW50LmRhdGEoKSxiKSxiLmRlbGF5JiZcIm51bWJlclwiPT10eXBlb2YgYi5kZWxheSYmKGIuZGVsYXk9e3Nob3c6Yi5kZWxheSxoaWRlOmIuZGVsYXl9KSxifSxjLnByb3RvdHlwZS5nZXREZWxlZ2F0ZU9wdGlvbnM9ZnVuY3Rpb24oKXt2YXIgYj17fSxjPXRoaXMuZ2V0RGVmYXVsdHMoKTtyZXR1cm4gdGhpcy5fb3B0aW9ucyYmYS5lYWNoKHRoaXMuX29wdGlvbnMsZnVuY3Rpb24oYSxkKXtjW2FdIT1kJiYoYlthXT1kKX0pLGJ9LGMucHJvdG90eXBlLmVudGVyPWZ1bmN0aW9uKGIpe3ZhciBjPWIgaW5zdGFuY2VvZiB0aGlzLmNvbnN0cnVjdG9yP2I6YShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUpO3JldHVybiBjfHwoYz1uZXcgdGhpcy5jb25zdHJ1Y3RvcihiLmN1cnJlbnRUYXJnZXQsdGhpcy5nZXREZWxlZ2F0ZU9wdGlvbnMoKSksYShiLmN1cnJlbnRUYXJnZXQpLmRhdGEoXCJicy5cIit0aGlzLnR5cGUsYykpLGNsZWFyVGltZW91dChjLnRpbWVvdXQpLGMuaG92ZXJTdGF0ZT1cImluXCIsYy5vcHRpb25zLmRlbGF5JiZjLm9wdGlvbnMuZGVsYXkuc2hvdz92b2lkKGMudGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XCJpblwiPT1jLmhvdmVyU3RhdGUmJmMuc2hvdygpfSxjLm9wdGlvbnMuZGVsYXkuc2hvdykpOmMuc2hvdygpfSxjLnByb3RvdHlwZS5sZWF2ZT1mdW5jdGlvbihiKXt2YXIgYz1iIGluc3RhbmNlb2YgdGhpcy5jb25zdHJ1Y3Rvcj9iOmEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlKTtyZXR1cm4gY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSxjbGVhclRpbWVvdXQoYy50aW1lb3V0KSxjLmhvdmVyU3RhdGU9XCJvdXRcIixjLm9wdGlvbnMuZGVsYXkmJmMub3B0aW9ucy5kZWxheS5oaWRlP3ZvaWQoYy50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtcIm91dFwiPT1jLmhvdmVyU3RhdGUmJmMuaGlkZSgpfSxjLm9wdGlvbnMuZGVsYXkuaGlkZSkpOmMuaGlkZSgpfSxjLnByb3RvdHlwZS5zaG93PWZ1bmN0aW9uKCl7dmFyIGI9YS5FdmVudChcInNob3cuYnMuXCIrdGhpcy50eXBlKTtpZih0aGlzLmhhc0NvbnRlbnQoKSYmdGhpcy5lbmFibGVkKXt0aGlzLiRlbGVtZW50LnRyaWdnZXIoYik7dmFyIGM9YS5jb250YWlucyhkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsdGhpcy4kZWxlbWVudFswXSk7aWYoYi5pc0RlZmF1bHRQcmV2ZW50ZWQoKXx8IWMpcmV0dXJuO3ZhciBkPXRoaXMsZT10aGlzLnRpcCgpLGY9dGhpcy5nZXRVSUQodGhpcy50eXBlKTt0aGlzLnNldENvbnRlbnQoKSxlLmF0dHIoXCJpZFwiLGYpLHRoaXMuJGVsZW1lbnQuYXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIixmKSx0aGlzLm9wdGlvbnMuYW5pbWF0aW9uJiZlLmFkZENsYXNzKFwiZmFkZVwiKTt2YXIgZz1cImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMucGxhY2VtZW50P3RoaXMub3B0aW9ucy5wbGFjZW1lbnQuY2FsbCh0aGlzLGVbMF0sdGhpcy4kZWxlbWVudFswXSk6dGhpcy5vcHRpb25zLnBsYWNlbWVudCxoPS9cXHM/YXV0bz9cXHM/L2ksaT1oLnRlc3QoZyk7aSYmKGc9Zy5yZXBsYWNlKGgsXCJcIil8fFwidG9wXCIpLGUuZGV0YWNoKCkuY3NzKHt0b3A6MCxsZWZ0OjAsZGlzcGxheTpcImJsb2NrXCJ9KS5hZGRDbGFzcyhnKS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLHRoaXMpLHRoaXMub3B0aW9ucy5jb250YWluZXI/ZS5hcHBlbmRUbyh0aGlzLm9wdGlvbnMuY29udGFpbmVyKTplLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpO3ZhciBqPXRoaXMuZ2V0UG9zaXRpb24oKSxrPWVbMF0ub2Zmc2V0V2lkdGgsbD1lWzBdLm9mZnNldEhlaWdodDtpZihpKXt2YXIgbT1nLG49dGhpcy4kZWxlbWVudC5wYXJlbnQoKSxvPXRoaXMuZ2V0UG9zaXRpb24obik7Zz1cImJvdHRvbVwiPT1nJiZqLnRvcCtqLmhlaWdodCtsLW8uc2Nyb2xsPm8uaGVpZ2h0P1widG9wXCI6XCJ0b3BcIj09ZyYmai50b3Atby5zY3JvbGwtbDwwP1wiYm90dG9tXCI6XCJyaWdodFwiPT1nJiZqLnJpZ2h0K2s+by53aWR0aD9cImxlZnRcIjpcImxlZnRcIj09ZyYmai5sZWZ0LWs8by5sZWZ0P1wicmlnaHRcIjpnLGUucmVtb3ZlQ2xhc3MobSkuYWRkQ2xhc3MoZyl9dmFyIHA9dGhpcy5nZXRDYWxjdWxhdGVkT2Zmc2V0KGcsaixrLGwpO3RoaXMuYXBwbHlQbGFjZW1lbnQocCxnKTt2YXIgcT1mdW5jdGlvbigpe2QuJGVsZW1lbnQudHJpZ2dlcihcInNob3duLmJzLlwiK2QudHlwZSksZC5ob3ZlclN0YXRlPW51bGx9O2Euc3VwcG9ydC50cmFuc2l0aW9uJiZ0aGlzLiR0aXAuaGFzQ2xhc3MoXCJmYWRlXCIpP2Uub25lKFwiYnNUcmFuc2l0aW9uRW5kXCIscSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoMTUwKTpxKCl9fSxjLnByb3RvdHlwZS5hcHBseVBsYWNlbWVudD1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMudGlwKCksZT1kWzBdLm9mZnNldFdpZHRoLGY9ZFswXS5vZmZzZXRIZWlnaHQsZz1wYXJzZUludChkLmNzcyhcIm1hcmdpbi10b3BcIiksMTApLGg9cGFyc2VJbnQoZC5jc3MoXCJtYXJnaW4tbGVmdFwiKSwxMCk7aXNOYU4oZykmJihnPTApLGlzTmFOKGgpJiYoaD0wKSxiLnRvcD1iLnRvcCtnLGIubGVmdD1iLmxlZnQraCxhLm9mZnNldC5zZXRPZmZzZXQoZFswXSxhLmV4dGVuZCh7dXNpbmc6ZnVuY3Rpb24oYSl7ZC5jc3Moe3RvcDpNYXRoLnJvdW5kKGEudG9wKSxsZWZ0Ok1hdGgucm91bmQoYS5sZWZ0KX0pfX0sYiksMCksZC5hZGRDbGFzcyhcImluXCIpO3ZhciBpPWRbMF0ub2Zmc2V0V2lkdGgsaj1kWzBdLm9mZnNldEhlaWdodDtcInRvcFwiPT1jJiZqIT1mJiYoYi50b3A9Yi50b3ArZi1qKTt2YXIgaz10aGlzLmdldFZpZXdwb3J0QWRqdXN0ZWREZWx0YShjLGIsaSxqKTtrLmxlZnQ/Yi5sZWZ0Kz1rLmxlZnQ6Yi50b3ArPWsudG9wO3ZhciBsPWsubGVmdD8yKmsubGVmdC1lK2k6MiprLnRvcC1mK2osbT1rLmxlZnQ/XCJsZWZ0XCI6XCJ0b3BcIixuPWsubGVmdD9cIm9mZnNldFdpZHRoXCI6XCJvZmZzZXRIZWlnaHRcIjtkLm9mZnNldChiKSx0aGlzLnJlcGxhY2VBcnJvdyhsLGRbMF1bbl0sbSl9LGMucHJvdG90eXBlLnJlcGxhY2VBcnJvdz1mdW5jdGlvbihhLGIsYyl7dGhpcy5hcnJvdygpLmNzcyhjLGE/NTAqKDEtYS9iKStcIiVcIjpcIlwiKX0sYy5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGlwKCksYj10aGlzLmdldFRpdGxlKCk7YS5maW5kKFwiLnRvb2x0aXAtaW5uZXJcIilbdGhpcy5vcHRpb25zLmh0bWw/XCJodG1sXCI6XCJ0ZXh0XCJdKGIpLGEucmVtb3ZlQ2xhc3MoXCJmYWRlIGluIHRvcCBib3R0b20gbGVmdCByaWdodFwiKX0sYy5wcm90b3R5cGUuaGlkZT1mdW5jdGlvbigpe2Z1bmN0aW9uIGIoKXtcImluXCIhPWMuaG92ZXJTdGF0ZSYmZC5kZXRhY2goKSxjLiRlbGVtZW50LnRyaWdnZXIoXCJoaWRkZW4uYnMuXCIrYy50eXBlKX12YXIgYz10aGlzLGQ9dGhpcy50aXAoKSxlPWEuRXZlbnQoXCJoaWRlLmJzLlwiK3RoaXMudHlwZSk7cmV0dXJuIHRoaXMuJGVsZW1lbnQucmVtb3ZlQXR0cihcImFyaWEtZGVzY3JpYmVkYnlcIiksdGhpcy4kZWxlbWVudC50cmlnZ2VyKGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCk/dm9pZCAwOihkLnJlbW92ZUNsYXNzKFwiaW5cIiksYS5zdXBwb3J0LnRyYW5zaXRpb24mJnRoaXMuJHRpcC5oYXNDbGFzcyhcImZhZGVcIik/ZC5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixiKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApOmIoKSx0aGlzLmhvdmVyU3RhdGU9bnVsbCx0aGlzKX0sYy5wcm90b3R5cGUuZml4VGl0bGU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiRlbGVtZW50OyhhLmF0dHIoXCJ0aXRsZVwiKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEuYXR0cihcImRhdGEtb3JpZ2luYWwtdGl0bGVcIikpJiZhLmF0dHIoXCJkYXRhLW9yaWdpbmFsLXRpdGxlXCIsYS5hdHRyKFwidGl0bGVcIil8fFwiXCIpLmF0dHIoXCJ0aXRsZVwiLFwiXCIpfSxjLnByb3RvdHlwZS5oYXNDb250ZW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0VGl0bGUoKX0sYy5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oYil7Yj1ifHx0aGlzLiRlbGVtZW50O3ZhciBjPWJbMF0sZD1cIkJPRFlcIj09Yy50YWdOYW1lO3JldHVybiBhLmV4dGVuZCh7fSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBjLmdldEJvdW5kaW5nQ2xpZW50UmVjdD9jLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOm51bGwse3Njcm9sbDpkP2RvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3B8fGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wOmIuc2Nyb2xsVG9wKCksd2lkdGg6ZD9hKHdpbmRvdykud2lkdGgoKTpiLm91dGVyV2lkdGgoKSxoZWlnaHQ6ZD9hKHdpbmRvdykuaGVpZ2h0KCk6Yi5vdXRlckhlaWdodCgpfSxkP3t0b3A6MCxsZWZ0OjB9OmIub2Zmc2V0KCkpfSxjLnByb3RvdHlwZS5nZXRDYWxjdWxhdGVkT2Zmc2V0PWZ1bmN0aW9uKGEsYixjLGQpe3JldHVyblwiYm90dG9tXCI9PWE/e3RvcDpiLnRvcCtiLmhlaWdodCxsZWZ0OmIubGVmdCtiLndpZHRoLzItYy8yfTpcInRvcFwiPT1hP3t0b3A6Yi50b3AtZCxsZWZ0OmIubGVmdCtiLndpZHRoLzItYy8yfTpcImxlZnRcIj09YT97dG9wOmIudG9wK2IuaGVpZ2h0LzItZC8yLGxlZnQ6Yi5sZWZ0LWN9Ont0b3A6Yi50b3ArYi5oZWlnaHQvMi1kLzIsbGVmdDpiLmxlZnQrYi53aWR0aH19LGMucHJvdG90eXBlLmdldFZpZXdwb3J0QWRqdXN0ZWREZWx0YT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT17dG9wOjAsbGVmdDowfTtpZighdGhpcy4kdmlld3BvcnQpcmV0dXJuIGU7dmFyIGY9dGhpcy5vcHRpb25zLnZpZXdwb3J0JiZ0aGlzLm9wdGlvbnMudmlld3BvcnQucGFkZGluZ3x8MCxnPXRoaXMuZ2V0UG9zaXRpb24odGhpcy4kdmlld3BvcnQpO2lmKC9yaWdodHxsZWZ0Ly50ZXN0KGEpKXt2YXIgaD1iLnRvcC1mLWcuc2Nyb2xsLGk9Yi50b3ArZi1nLnNjcm9sbCtkO2g8Zy50b3A/ZS50b3A9Zy50b3AtaDppPmcudG9wK2cuaGVpZ2h0JiYoZS50b3A9Zy50b3ArZy5oZWlnaHQtaSl9ZWxzZXt2YXIgaj1iLmxlZnQtZixrPWIubGVmdCtmK2M7ajxnLmxlZnQ/ZS5sZWZ0PWcubGVmdC1qOms+Zy53aWR0aCYmKGUubGVmdD1nLmxlZnQrZy53aWR0aC1rKX1yZXR1cm4gZX0sYy5wcm90b3R5cGUuZ2V0VGl0bGU9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuJGVsZW1lbnQsYz10aGlzLm9wdGlvbnM7cmV0dXJuIGE9Yi5hdHRyKFwiZGF0YS1vcmlnaW5hbC10aXRsZVwiKXx8KFwiZnVuY3Rpb25cIj09dHlwZW9mIGMudGl0bGU/Yy50aXRsZS5jYWxsKGJbMF0pOmMudGl0bGUpfSxjLnByb3RvdHlwZS5nZXRVSUQ9ZnVuY3Rpb24oYSl7ZG8gYSs9fn4oMWU2Kk1hdGgucmFuZG9tKCkpO3doaWxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpKTtyZXR1cm4gYX0sYy5wcm90b3R5cGUudGlwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJHRpcD10aGlzLiR0aXB8fGEodGhpcy5vcHRpb25zLnRlbXBsYXRlKX0sYy5wcm90b3R5cGUuYXJyb3c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kYXJyb3c9dGhpcy4kYXJyb3d8fHRoaXMudGlwKCkuZmluZChcIi50b29sdGlwLWFycm93XCIpfSxjLnByb3RvdHlwZS52YWxpZGF0ZT1mdW5jdGlvbigpe3RoaXMuJGVsZW1lbnRbMF0ucGFyZW50Tm9kZXx8KHRoaXMuaGlkZSgpLHRoaXMuJGVsZW1lbnQ9bnVsbCx0aGlzLm9wdGlvbnM9bnVsbCl9LGMucHJvdG90eXBlLmVuYWJsZT1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMH0sYy5wcm90b3R5cGUuZGlzYWJsZT1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hMX0sYy5wcm90b3R5cGUudG9nZ2xlRW5hYmxlZD1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZD0hdGhpcy5lbmFibGVkfSxjLnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcztiJiYoYz1hKGIuY3VycmVudFRhcmdldCkuZGF0YShcImJzLlwiK3RoaXMudHlwZSksY3x8KGM9bmV3IHRoaXMuY29uc3RydWN0b3IoYi5jdXJyZW50VGFyZ2V0LHRoaXMuZ2V0RGVsZWdhdGVPcHRpb25zKCkpLGEoYi5jdXJyZW50VGFyZ2V0KS5kYXRhKFwiYnMuXCIrdGhpcy50eXBlLGMpKSksYy50aXAoKS5oYXNDbGFzcyhcImluXCIpP2MubGVhdmUoYyk6Yy5lbnRlcihjKX0sYy5wcm90b3R5cGUuZGVzdHJveT1mdW5jdGlvbigpe2NsZWFyVGltZW91dCh0aGlzLnRpbWVvdXQpLHRoaXMuaGlkZSgpLiRlbGVtZW50Lm9mZihcIi5cIit0aGlzLnR5cGUpLnJlbW92ZURhdGEoXCJicy5cIit0aGlzLnR5cGUpfTt2YXIgZD1hLmZuLnRvb2x0aXA7YS5mbi50b29sdGlwPWIsYS5mbi50b29sdGlwLkNvbnN0cnVjdG9yPWMsYS5mbi50b29sdGlwLm5vQ29uZmxpY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gYS5mbi50b29sdGlwPWQsdGhpc319KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5wb3BvdmVyXCIpLGY9XCJvYmplY3RcIj09dHlwZW9mIGImJmI7KGV8fFwiZGVzdHJveVwiIT1iKSYmKGV8fGQuZGF0YShcImJzLnBvcG92ZXJcIixlPW5ldyBjKHRoaXMsZikpLFwic3RyaW5nXCI9PXR5cGVvZiBiJiZlW2JdKCkpfSl9dmFyIGM9ZnVuY3Rpb24oYSxiKXt0aGlzLmluaXQoXCJwb3BvdmVyXCIsYSxiKX07aWYoIWEuZm4udG9vbHRpcCl0aHJvdyBuZXcgRXJyb3IoXCJQb3BvdmVyIHJlcXVpcmVzIHRvb2x0aXAuanNcIik7Yy5WRVJTSU9OPVwiMy4yLjBcIixjLkRFRkFVTFRTPWEuZXh0ZW5kKHt9LGEuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5ERUZBVUxUUyx7cGxhY2VtZW50OlwicmlnaHRcIix0cmlnZ2VyOlwiY2xpY2tcIixjb250ZW50OlwiXCIsdGVtcGxhdGU6JzxkaXYgY2xhc3M9XCJwb3BvdmVyXCIgcm9sZT1cInRvb2x0aXBcIj48ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj48aDMgY2xhc3M9XCJwb3BvdmVyLXRpdGxlXCI+PC9oMz48ZGl2IGNsYXNzPVwicG9wb3Zlci1jb250ZW50XCI+PC9kaXY+PC9kaXY+J30pLGMucHJvdG90eXBlPWEuZXh0ZW5kKHt9LGEuZm4udG9vbHRpcC5Db25zdHJ1Y3Rvci5wcm90b3R5cGUpLGMucHJvdG90eXBlLmNvbnN0cnVjdG9yPWMsYy5wcm90b3R5cGUuZ2V0RGVmYXVsdHM9ZnVuY3Rpb24oKXtyZXR1cm4gYy5ERUZBVUxUU30sYy5wcm90b3R5cGUuc2V0Q29udGVudD1mdW5jdGlvbigpe3ZhciBhPXRoaXMudGlwKCksYj10aGlzLmdldFRpdGxlKCksYz10aGlzLmdldENvbnRlbnQoKTthLmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKVt0aGlzLm9wdGlvbnMuaHRtbD9cImh0bWxcIjpcInRleHRcIl0oYiksYS5maW5kKFwiLnBvcG92ZXItY29udGVudFwiKS5lbXB0eSgpW3RoaXMub3B0aW9ucy5odG1sP1wic3RyaW5nXCI9PXR5cGVvZiBjP1wiaHRtbFwiOlwiYXBwZW5kXCI6XCJ0ZXh0XCJdKGMpLGEucmVtb3ZlQ2xhc3MoXCJmYWRlIHRvcCBib3R0b20gbGVmdCByaWdodCBpblwiKSxhLmZpbmQoXCIucG9wb3Zlci10aXRsZVwiKS5odG1sKCl8fGEuZmluZChcIi5wb3BvdmVyLXRpdGxlXCIpLmhpZGUoKX0sYy5wcm90b3R5cGUuaGFzQ29udGVudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFRpdGxlKCl8fHRoaXMuZ2V0Q29udGVudCgpfSxjLnByb3RvdHlwZS5nZXRDb250ZW50PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbWVudCxiPXRoaXMub3B0aW9ucztyZXR1cm4gYS5hdHRyKFwiZGF0YS1jb250ZW50XCIpfHwoXCJmdW5jdGlvblwiPT10eXBlb2YgYi5jb250ZW50P2IuY29udGVudC5jYWxsKGFbMF0pOmIuY29udGVudCl9LGMucHJvdG90eXBlLmFycm93PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGFycm93PXRoaXMuJGFycm93fHx0aGlzLnRpcCgpLmZpbmQoXCIuYXJyb3dcIil9LGMucHJvdG90eXBlLnRpcD1mdW5jdGlvbigpe3JldHVybiB0aGlzLiR0aXB8fCh0aGlzLiR0aXA9YSh0aGlzLm9wdGlvbnMudGVtcGxhdGUpKSx0aGlzLiR0aXB9O3ZhciBkPWEuZm4ucG9wb3ZlcjthLmZuLnBvcG92ZXI9YixhLmZuLnBvcG92ZXIuQ29uc3RydWN0b3I9YyxhLmZuLnBvcG92ZXIubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBhLmZuLnBvcG92ZXI9ZCx0aGlzfX0oalF1ZXJ5KSwrZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYihjLGQpe3ZhciBlPWEucHJveHkodGhpcy5wcm9jZXNzLHRoaXMpO3RoaXMuJGJvZHk9YShcImJvZHlcIiksdGhpcy4kc2Nyb2xsRWxlbWVudD1hKGEoYykuaXMoXCJib2R5XCIpP3dpbmRvdzpjKSx0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYi5ERUZBVUxUUyxkKSx0aGlzLnNlbGVjdG9yPSh0aGlzLm9wdGlvbnMudGFyZ2V0fHxcIlwiKStcIiAubmF2IGxpID4gYVwiLHRoaXMub2Zmc2V0cz1bXSx0aGlzLnRhcmdldHM9W10sdGhpcy5hY3RpdmVUYXJnZXQ9bnVsbCx0aGlzLnNjcm9sbEhlaWdodD0wLHRoaXMuJHNjcm9sbEVsZW1lbnQub24oXCJzY3JvbGwuYnMuc2Nyb2xsc3B5XCIsZSksdGhpcy5yZWZyZXNoKCksdGhpcy5wcm9jZXNzKCl9ZnVuY3Rpb24gYyhjKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQuZGF0YShcImJzLnNjcm9sbHNweVwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBjJiZjO2V8fGQuZGF0YShcImJzLnNjcm9sbHNweVwiLGU9bmV3IGIodGhpcyxmKSksXCJzdHJpbmdcIj09dHlwZW9mIGMmJmVbY10oKX0pfWIuVkVSU0lPTj1cIjMuMi4wXCIsYi5ERUZBVUxUUz17b2Zmc2V0OjEwfSxiLnByb3RvdHlwZS5nZXRTY3JvbGxIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kc2Nyb2xsRWxlbWVudFswXS5zY3JvbGxIZWlnaHR8fE1hdGgubWF4KHRoaXMuJGJvZHlbMF0uc2Nyb2xsSGVpZ2h0LGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxIZWlnaHQpfSxiLnByb3RvdHlwZS5yZWZyZXNoPWZ1bmN0aW9uKCl7dmFyIGI9XCJvZmZzZXRcIixjPTA7YS5pc1dpbmRvdyh0aGlzLiRzY3JvbGxFbGVtZW50WzBdKXx8KGI9XCJwb3NpdGlvblwiLGM9dGhpcy4kc2Nyb2xsRWxlbWVudC5zY3JvbGxUb3AoKSksdGhpcy5vZmZzZXRzPVtdLHRoaXMudGFyZ2V0cz1bXSx0aGlzLnNjcm9sbEhlaWdodD10aGlzLmdldFNjcm9sbEhlaWdodCgpO3ZhciBkPXRoaXM7dGhpcy4kYm9keS5maW5kKHRoaXMuc2VsZWN0b3IpLm1hcChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJ0YXJnZXRcIil8fGQuYXR0cihcImhyZWZcIiksZj0vXiMuLy50ZXN0KGUpJiZhKGUpO3JldHVybiBmJiZmLmxlbmd0aCYmZi5pcyhcIjp2aXNpYmxlXCIpJiZbW2ZbYl0oKS50b3ArYyxlXV18fG51bGx9KS5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGFbMF0tYlswXX0pLmVhY2goZnVuY3Rpb24oKXtkLm9mZnNldHMucHVzaCh0aGlzWzBdKSxkLnRhcmdldHMucHVzaCh0aGlzWzFdKX0pfSxiLnByb3RvdHlwZS5wcm9jZXNzPWZ1bmN0aW9uKCl7dmFyIGEsYj10aGlzLiRzY3JvbGxFbGVtZW50LnNjcm9sbFRvcCgpK3RoaXMub3B0aW9ucy5vZmZzZXQsYz10aGlzLmdldFNjcm9sbEhlaWdodCgpLGQ9dGhpcy5vcHRpb25zLm9mZnNldCtjLXRoaXMuJHNjcm9sbEVsZW1lbnQuaGVpZ2h0KCksZT10aGlzLm9mZnNldHMsZj10aGlzLnRhcmdldHMsZz10aGlzLmFjdGl2ZVRhcmdldDtpZih0aGlzLnNjcm9sbEhlaWdodCE9YyYmdGhpcy5yZWZyZXNoKCksYj49ZClyZXR1cm4gZyE9KGE9ZltmLmxlbmd0aC0xXSkmJnRoaXMuYWN0aXZhdGUoYSk7aWYoZyYmYjw9ZVswXSlyZXR1cm4gZyE9KGE9ZlswXSkmJnRoaXMuYWN0aXZhdGUoYSk7Zm9yKGE9ZS5sZW5ndGg7YS0tOylnIT1mW2FdJiZiPj1lW2FdJiYoIWVbYSsxXXx8Yjw9ZVthKzFdKSYmdGhpcy5hY3RpdmF0ZShmW2FdKX0sYi5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYil7dGhpcy5hY3RpdmVUYXJnZXQ9YixhKHRoaXMuc2VsZWN0b3IpLnBhcmVudHNVbnRpbCh0aGlzLm9wdGlvbnMudGFyZ2V0LFwiLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTt2YXIgYz10aGlzLnNlbGVjdG9yKydbZGF0YS10YXJnZXQ9XCInK2IrJ1wiXSwnK3RoaXMuc2VsZWN0b3IrJ1tocmVmPVwiJytiKydcIl0nLGQ9YShjKS5wYXJlbnRzKFwibGlcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7ZC5wYXJlbnQoXCIuZHJvcGRvd24tbWVudVwiKS5sZW5ndGgmJihkPWQuY2xvc2VzdChcImxpLmRyb3Bkb3duXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpKSxkLnRyaWdnZXIoXCJhY3RpdmF0ZS5icy5zY3JvbGxzcHlcIil9O3ZhciBkPWEuZm4uc2Nyb2xsc3B5O2EuZm4uc2Nyb2xsc3B5PWMsYS5mbi5zY3JvbGxzcHkuQ29uc3RydWN0b3I9YixhLmZuLnNjcm9sbHNweS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uc2Nyb2xsc3B5PWQsdGhpc30sYSh3aW5kb3cpLm9uKFwibG9hZC5icy5zY3JvbGxzcHkuZGF0YS1hcGlcIixmdW5jdGlvbigpe2EoJ1tkYXRhLXNweT1cInNjcm9sbFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYj1hKHRoaXMpO2MuY2FsbChiLGIuZGF0YSgpKX0pfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy50YWJcIik7ZXx8ZC5kYXRhKFwiYnMudGFiXCIsZT1uZXcgYyh0aGlzKSksXCJzdHJpbmdcIj09dHlwZW9mIGImJmVbYl0oKX0pfXZhciBjPWZ1bmN0aW9uKGIpe3RoaXMuZWxlbWVudD1hKGIpfTtjLlZFUlNJT049XCIzLjIuMFwiLGMucHJvdG90eXBlLnNob3c9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLmVsZW1lbnQsYz1iLmNsb3Nlc3QoXCJ1bDpub3QoLmRyb3Bkb3duLW1lbnUpXCIpLGQ9Yi5kYXRhKFwidGFyZ2V0XCIpO2lmKGR8fChkPWIuYXR0cihcImhyZWZcIiksZD1kJiZkLnJlcGxhY2UoLy4qKD89I1teXFxzXSokKS8sXCJcIikpLCFiLnBhcmVudChcImxpXCIpLmhhc0NsYXNzKFwiYWN0aXZlXCIpKXt2YXIgZT1jLmZpbmQoXCIuYWN0aXZlOmxhc3QgYVwiKVswXSxmPWEuRXZlbnQoXCJzaG93LmJzLnRhYlwiLHtyZWxhdGVkVGFyZ2V0OmV9KTtpZihiLnRyaWdnZXIoZiksIWYuaXNEZWZhdWx0UHJldmVudGVkKCkpe3ZhciBnPWEoZCk7dGhpcy5hY3RpdmF0ZShiLmNsb3Nlc3QoXCJsaVwiKSxjKSx0aGlzLmFjdGl2YXRlKGcsZy5wYXJlbnQoKSxmdW5jdGlvbigpe2IudHJpZ2dlcih7dHlwZTpcInNob3duLmJzLnRhYlwiLHJlbGF0ZWRUYXJnZXQ6ZX0pfSl9fX0sYy5wcm90b3R5cGUuYWN0aXZhdGU9ZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoKXtmLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLmZpbmQoXCI+IC5kcm9wZG93bi1tZW51ID4gLmFjdGl2ZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxiLmFkZENsYXNzKFwiYWN0aXZlXCIpLGc/KGJbMF0ub2Zmc2V0V2lkdGgsYi5hZGRDbGFzcyhcImluXCIpKTpiLnJlbW92ZUNsYXNzKFwiZmFkZVwiKSxiLnBhcmVudChcIi5kcm9wZG93bi1tZW51XCIpJiZiLmNsb3Nlc3QoXCJsaS5kcm9wZG93blwiKS5hZGRDbGFzcyhcImFjdGl2ZVwiKSxkJiZkKCl9dmFyIGY9Yy5maW5kKFwiPiAuYWN0aXZlXCIpLGc9ZCYmYS5zdXBwb3J0LnRyYW5zaXRpb24mJmYuaGFzQ2xhc3MoXCJmYWRlXCIpO2c/Zi5vbmUoXCJic1RyYW5zaXRpb25FbmRcIixlKS5lbXVsYXRlVHJhbnNpdGlvbkVuZCgxNTApOmUoKSxmLnJlbW92ZUNsYXNzKFwiaW5cIil9O3ZhciBkPWEuZm4udGFiO2EuZm4udGFiPWIsYS5mbi50YWIuQ29uc3RydWN0b3I9YyxhLmZuLnRhYi5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4udGFiPWQsdGhpc30sYShkb2N1bWVudCkub24oXCJjbGljay5icy50YWIuZGF0YS1hcGlcIiwnW2RhdGEtdG9nZ2xlPVwidGFiXCJdLCBbZGF0YS10b2dnbGU9XCJwaWxsXCJdJyxmdW5jdGlvbihjKXtjLnByZXZlbnREZWZhdWx0KCksYi5jYWxsKGEodGhpcyksXCJzaG93XCIpfSl9KGpRdWVyeSksK2Z1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIGIoYil7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBkPWEodGhpcyksZT1kLmRhdGEoXCJicy5hZmZpeFwiKSxmPVwib2JqZWN0XCI9PXR5cGVvZiBiJiZiO2V8fGQuZGF0YShcImJzLmFmZml4XCIsZT1uZXcgYyh0aGlzLGYpKSxcInN0cmluZ1wiPT10eXBlb2YgYiYmZVtiXSgpfSl9dmFyIGM9ZnVuY3Rpb24oYixkKXt0aGlzLm9wdGlvbnM9YS5leHRlbmQoe30sYy5ERUZBVUxUUyxkKSx0aGlzLiR0YXJnZXQ9YSh0aGlzLm9wdGlvbnMudGFyZ2V0KS5vbihcInNjcm9sbC5icy5hZmZpeC5kYXRhLWFwaVwiLGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpKS5vbihcImNsaWNrLmJzLmFmZml4LmRhdGEtYXBpXCIsYS5wcm94eSh0aGlzLmNoZWNrUG9zaXRpb25XaXRoRXZlbnRMb29wLHRoaXMpKSx0aGlzLiRlbGVtZW50PWEoYiksdGhpcy5hZmZpeGVkPXRoaXMudW5waW49dGhpcy5waW5uZWRPZmZzZXQ9bnVsbCx0aGlzLmNoZWNrUG9zaXRpb24oKX07Yy5WRVJTSU9OPVwiMy4yLjBcIixjLlJFU0VUPVwiYWZmaXggYWZmaXgtdG9wIGFmZml4LWJvdHRvbVwiLGMuREVGQVVMVFM9e29mZnNldDowLHRhcmdldDp3aW5kb3d9LGMucHJvdG90eXBlLmdldFBpbm5lZE9mZnNldD1mdW5jdGlvbigpe2lmKHRoaXMucGlubmVkT2Zmc2V0KXJldHVybiB0aGlzLnBpbm5lZE9mZnNldDt0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKGMuUkVTRVQpLmFkZENsYXNzKFwiYWZmaXhcIik7dmFyIGE9dGhpcy4kdGFyZ2V0LnNjcm9sbFRvcCgpLGI9dGhpcy4kZWxlbWVudC5vZmZzZXQoKTtyZXR1cm4gdGhpcy5waW5uZWRPZmZzZXQ9Yi50b3AtYX0sYy5wcm90b3R5cGUuY2hlY2tQb3NpdGlvbldpdGhFdmVudExvb3A9ZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGEucHJveHkodGhpcy5jaGVja1Bvc2l0aW9uLHRoaXMpLDEpfSxjLnByb3RvdHlwZS5jaGVja1Bvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy4kZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKXt2YXIgYj1hKGRvY3VtZW50KS5oZWlnaHQoKSxkPXRoaXMuJHRhcmdldC5zY3JvbGxUb3AoKSxlPXRoaXMuJGVsZW1lbnQub2Zmc2V0KCksZj10aGlzLm9wdGlvbnMub2Zmc2V0LGc9Zi50b3AsaD1mLmJvdHRvbTtcIm9iamVjdFwiIT10eXBlb2YgZiYmKGg9Zz1mKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBnJiYoZz1mLnRvcCh0aGlzLiRlbGVtZW50KSksXCJmdW5jdGlvblwiPT10eXBlb2YgaCYmKGg9Zi5ib3R0b20odGhpcy4kZWxlbWVudCkpO3ZhciBpPW51bGwhPXRoaXMudW5waW4mJmQrdGhpcy51bnBpbjw9ZS50b3A/ITE6bnVsbCE9aCYmZS50b3ArdGhpcy4kZWxlbWVudC5oZWlnaHQoKT49Yi1oP1wiYm90dG9tXCI6bnVsbCE9ZyYmZz49ZD9cInRvcFwiOiExO2lmKHRoaXMuYWZmaXhlZCE9PWkpe251bGwhPXRoaXMudW5waW4mJnRoaXMuJGVsZW1lbnQuY3NzKFwidG9wXCIsXCJcIik7dmFyIGo9XCJhZmZpeFwiKyhpP1wiLVwiK2k6XCJcIiksaz1hLkV2ZW50KGorXCIuYnMuYWZmaXhcIik7dGhpcy4kZWxlbWVudC50cmlnZ2VyKGspLGsuaXNEZWZhdWx0UHJldmVudGVkKCl8fCh0aGlzLmFmZml4ZWQ9aSx0aGlzLnVucGluPVwiYm90dG9tXCI9PWk/dGhpcy5nZXRQaW5uZWRPZmZzZXQoKTpudWxsLHRoaXMuJGVsZW1lbnQucmVtb3ZlQ2xhc3MoYy5SRVNFVCkuYWRkQ2xhc3MoaikudHJpZ2dlcihhLkV2ZW50KGoucmVwbGFjZShcImFmZml4XCIsXCJhZmZpeGVkXCIpKSksXCJib3R0b21cIj09aSYmdGhpcy4kZWxlbWVudC5vZmZzZXQoe3RvcDpiLXRoaXMuJGVsZW1lbnQuaGVpZ2h0KCktaH0pKX19fTt2YXIgZD1hLmZuLmFmZml4O2EuZm4uYWZmaXg9YixhLmZuLmFmZml4LkNvbnN0cnVjdG9yPWMsYS5mbi5hZmZpeC5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGEuZm4uYWZmaXg9ZCx0aGlzfSxhKHdpbmRvdykub24oXCJsb2FkXCIsZnVuY3Rpb24oKXthKCdbZGF0YS1zcHk9XCJhZmZpeFwiXScpLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1hKHRoaXMpLGQ9Yy5kYXRhKCk7ZC5vZmZzZXQ9ZC5vZmZzZXR8fHt9LGQub2Zmc2V0Qm90dG9tJiYoZC5vZmZzZXQuYm90dG9tPWQub2Zmc2V0Qm90dG9tKSxkLm9mZnNldFRvcCYmKGQub2Zmc2V0LnRvcD1kLm9mZnNldFRvcCksYi5jYWxsKGMsZCl9KX0pfShqUXVlcnkpOyIsIi8qISBmYW5jeUJveCB2Mi4xLjUgZmFuY3lhcHBzLmNvbSB8IGZhbmN5YXBwcy5jb20vZmFuY3lib3gvI2xpY2Vuc2UgKi9cbihmdW5jdGlvbihyLEcsZix2KXt2YXIgSj1mKFwiaHRtbFwiKSxuPWYocikscD1mKEcpLGI9Zi5mYW5jeWJveD1mdW5jdGlvbigpe2Iub3Blbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9LEk9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvbXNpZS9pKSxCPW51bGwscz1HLmNyZWF0ZVRvdWNoIT09dix0PWZ1bmN0aW9uKGEpe3JldHVybiBhJiZhLmhhc093blByb3BlcnR5JiZhIGluc3RhbmNlb2YgZn0scT1mdW5jdGlvbihhKXtyZXR1cm4gYSYmXCJzdHJpbmdcIj09PWYudHlwZShhKX0sRT1mdW5jdGlvbihhKXtyZXR1cm4gcShhKSYmMDxhLmluZGV4T2YoXCIlXCIpfSxsPWZ1bmN0aW9uKGEsZCl7dmFyIGU9cGFyc2VJbnQoYSwxMCl8fDA7ZCYmRShhKSYmKGUqPWIuZ2V0Vmlld3BvcnQoKVtkXS8xMDApO3JldHVybiBNYXRoLmNlaWwoZSl9LHc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbChhLGIpK1wicHhcIn07Zi5leHRlbmQoYix7dmVyc2lvbjpcIjIuMS41XCIsZGVmYXVsdHM6e3BhZGRpbmc6MTUsbWFyZ2luOjIwLFxud2lkdGg6ODAwLGhlaWdodDo2MDAsbWluV2lkdGg6MTAwLG1pbkhlaWdodDoxMDAsbWF4V2lkdGg6OTk5OSxtYXhIZWlnaHQ6OTk5OSxwaXhlbFJhdGlvOjEsYXV0b1NpemU6ITAsYXV0b0hlaWdodDohMSxhdXRvV2lkdGg6ITEsYXV0b1Jlc2l6ZTohMCxhdXRvQ2VudGVyOiFzLGZpdFRvVmlldzohMCxhc3BlY3RSYXRpbzohMSx0b3BSYXRpbzowLjUsbGVmdFJhdGlvOjAuNSxzY3JvbGxpbmc6XCJhdXRvXCIsd3JhcENTUzpcIlwiLGFycm93czohMCxjbG9zZUJ0bjohMCxjbG9zZUNsaWNrOiExLG5leHRDbGljazohMSxtb3VzZVdoZWVsOiEwLGF1dG9QbGF5OiExLHBsYXlTcGVlZDozRTMscHJlbG9hZDozLG1vZGFsOiExLGxvb3A6ITAsYWpheDp7ZGF0YVR5cGU6XCJodG1sXCIsaGVhZGVyczp7XCJYLWZhbmN5Qm94XCI6ITB9fSxpZnJhbWU6e3Njcm9sbGluZzpcImF1dG9cIixwcmVsb2FkOiEwfSxzd2Y6e3dtb2RlOlwidHJhbnNwYXJlbnRcIixhbGxvd2Z1bGxzY3JlZW46XCJ0cnVlXCIsYWxsb3dzY3JpcHRhY2Nlc3M6XCJhbHdheXNcIn0sXG5rZXlzOntuZXh0OnsxMzpcImxlZnRcIiwzNDpcInVwXCIsMzk6XCJsZWZ0XCIsNDA6XCJ1cFwifSxwcmV2Ons4OlwicmlnaHRcIiwzMzpcImRvd25cIiwzNzpcInJpZ2h0XCIsMzg6XCJkb3duXCJ9LGNsb3NlOlsyN10scGxheTpbMzJdLHRvZ2dsZTpbNzBdfSxkaXJlY3Rpb246e25leHQ6XCJsZWZ0XCIscHJldjpcInJpZ2h0XCJ9LHNjcm9sbE91dHNpZGU6ITAsaW5kZXg6MCx0eXBlOm51bGwsaHJlZjpudWxsLGNvbnRlbnQ6bnVsbCx0aXRsZTpudWxsLHRwbDp7d3JhcDonPGRpdiBjbGFzcz1cImZhbmN5Ym94LXdyYXBcIiB0YWJJbmRleD1cIi0xXCI+PGRpdiBjbGFzcz1cImZhbmN5Ym94LXNraW5cIj48ZGl2IGNsYXNzPVwiZmFuY3lib3gtb3V0ZXJcIj48ZGl2IGNsYXNzPVwiZmFuY3lib3gtaW5uZXJcIj48L2Rpdj48L2Rpdj48L2Rpdj48L2Rpdj4nLGltYWdlOic8aW1nIGNsYXNzPVwiZmFuY3lib3gtaW1hZ2VcIiBzcmM9XCJ7aHJlZn1cIiBhbHQ9XCJcIiAvPicsaWZyYW1lOic8aWZyYW1lIGlkPVwiZmFuY3lib3gtZnJhbWV7cm5kfVwiIG5hbWU9XCJmYW5jeWJveC1mcmFtZXtybmR9XCIgY2xhc3M9XCJmYW5jeWJveC1pZnJhbWVcIiBmcmFtZWJvcmRlcj1cIjBcIiB2c3BhY2U9XCIwXCIgaHNwYWNlPVwiMFwiIHdlYmtpdEFsbG93RnVsbFNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dGdWxsU2NyZWVuJytcbihJPycgYWxsb3d0cmFuc3BhcmVuY3k9XCJ0cnVlXCInOlwiXCIpK1wiPjwvaWZyYW1lPlwiLGVycm9yOic8cCBjbGFzcz1cImZhbmN5Ym94LWVycm9yXCI+VGhlIHJlcXVlc3RlZCBjb250ZW50IGNhbm5vdCBiZSBsb2FkZWQuPGJyLz5QbGVhc2UgdHJ5IGFnYWluIGxhdGVyLjwvcD4nLGNsb3NlQnRuOic8YSB0aXRsZT1cIkNsb3NlXCIgY2xhc3M9XCJmYW5jeWJveC1pdGVtIGZhbmN5Ym94LWNsb3NlXCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPjwvYT4nLG5leHQ6JzxhIHRpdGxlPVwiTmV4dFwiIGNsYXNzPVwiZmFuY3lib3gtbmF2IGZhbmN5Ym94LW5leHRcIiBocmVmPVwiamF2YXNjcmlwdDo7XCI+PHNwYW4+PC9zcGFuPjwvYT4nLHByZXY6JzxhIHRpdGxlPVwiUHJldmlvdXNcIiBjbGFzcz1cImZhbmN5Ym94LW5hdiBmYW5jeWJveC1wcmV2XCIgaHJlZj1cImphdmFzY3JpcHQ6O1wiPjxzcGFuPjwvc3Bhbj48L2E+J30sb3BlbkVmZmVjdDpcImZhZGVcIixvcGVuU3BlZWQ6MjUwLG9wZW5FYXNpbmc6XCJzd2luZ1wiLG9wZW5PcGFjaXR5OiEwLFxub3Blbk1ldGhvZDpcInpvb21JblwiLGNsb3NlRWZmZWN0OlwiZmFkZVwiLGNsb3NlU3BlZWQ6MjUwLGNsb3NlRWFzaW5nOlwic3dpbmdcIixjbG9zZU9wYWNpdHk6ITAsY2xvc2VNZXRob2Q6XCJ6b29tT3V0XCIsbmV4dEVmZmVjdDpcImVsYXN0aWNcIixuZXh0U3BlZWQ6MjUwLG5leHRFYXNpbmc6XCJzd2luZ1wiLG5leHRNZXRob2Q6XCJjaGFuZ2VJblwiLHByZXZFZmZlY3Q6XCJlbGFzdGljXCIscHJldlNwZWVkOjI1MCxwcmV2RWFzaW5nOlwic3dpbmdcIixwcmV2TWV0aG9kOlwiY2hhbmdlT3V0XCIsaGVscGVyczp7b3ZlcmxheTohMCx0aXRsZTohMH0sb25DYW5jZWw6Zi5ub29wLGJlZm9yZUxvYWQ6Zi5ub29wLGFmdGVyTG9hZDpmLm5vb3AsYmVmb3JlU2hvdzpmLm5vb3AsYWZ0ZXJTaG93OmYubm9vcCxiZWZvcmVDaGFuZ2U6Zi5ub29wLGJlZm9yZUNsb3NlOmYubm9vcCxhZnRlckNsb3NlOmYubm9vcH0sZ3JvdXA6e30sb3B0czp7fSxwcmV2aW91czpudWxsLGNvbWluZzpudWxsLGN1cnJlbnQ6bnVsbCxpc0FjdGl2ZTohMSxcbmlzT3BlbjohMSxpc09wZW5lZDohMSx3cmFwOm51bGwsc2tpbjpudWxsLG91dGVyOm51bGwsaW5uZXI6bnVsbCxwbGF5ZXI6e3RpbWVyOm51bGwsaXNBY3RpdmU6ITF9LGFqYXhMb2FkOm51bGwsaW1nUHJlbG9hZDpudWxsLHRyYW5zaXRpb25zOnt9LGhlbHBlcnM6e30sb3BlbjpmdW5jdGlvbihhLGQpe2lmKGEmJihmLmlzUGxhaW5PYmplY3QoZCl8fChkPXt9KSwhMSE9PWIuY2xvc2UoITApKSlyZXR1cm4gZi5pc0FycmF5KGEpfHwoYT10KGEpP2YoYSkuZ2V0KCk6W2FdKSxmLmVhY2goYSxmdW5jdGlvbihlLGMpe3ZhciBrPXt9LGcsaCxqLG0sbDtcIm9iamVjdFwiPT09Zi50eXBlKGMpJiYoYy5ub2RlVHlwZSYmKGM9ZihjKSksdChjKT8oaz17aHJlZjpjLmRhdGEoXCJmYW5jeWJveC1ocmVmXCIpfHxjLmF0dHIoXCJocmVmXCIpLHRpdGxlOmMuZGF0YShcImZhbmN5Ym94LXRpdGxlXCIpfHxjLmF0dHIoXCJ0aXRsZVwiKSxpc0RvbTohMCxlbGVtZW50OmN9LGYubWV0YWRhdGEmJmYuZXh0ZW5kKCEwLGssXG5jLm1ldGFkYXRhKCkpKTprPWMpO2c9ZC5ocmVmfHxrLmhyZWZ8fChxKGMpP2M6bnVsbCk7aD1kLnRpdGxlIT09dj9kLnRpdGxlOmsudGl0bGV8fFwiXCI7bT0oaj1kLmNvbnRlbnR8fGsuY29udGVudCk/XCJodG1sXCI6ZC50eXBlfHxrLnR5cGU7IW0mJmsuaXNEb20mJihtPWMuZGF0YShcImZhbmN5Ym94LXR5cGVcIiksbXx8KG09KG09Yy5wcm9wKFwiY2xhc3NcIikubWF0Y2goL2ZhbmN5Ym94XFwuKFxcdyspLykpP21bMV06bnVsbCkpO3EoZykmJihtfHwoYi5pc0ltYWdlKGcpP209XCJpbWFnZVwiOmIuaXNTV0YoZyk/bT1cInN3ZlwiOlwiI1wiPT09Zy5jaGFyQXQoMCk/bT1cImlubGluZVwiOnEoYykmJihtPVwiaHRtbFwiLGo9YykpLFwiYWpheFwiPT09bSYmKGw9Zy5zcGxpdCgvXFxzKy8sMiksZz1sLnNoaWZ0KCksbD1sLnNoaWZ0KCkpKTtqfHwoXCJpbmxpbmVcIj09PW0/Zz9qPWYocShnKT9nLnJlcGxhY2UoLy4qKD89I1teXFxzXSskKS8sXCJcIik6Zyk6ay5pc0RvbSYmKGo9Yyk6XCJodG1sXCI9PT1tP2o9ZzohbSYmKCFnJiZcbmsuaXNEb20pJiYobT1cImlubGluZVwiLGo9YykpO2YuZXh0ZW5kKGsse2hyZWY6Zyx0eXBlOm0sY29udGVudDpqLHRpdGxlOmgsc2VsZWN0b3I6bH0pO2FbZV09a30pLGIub3B0cz1mLmV4dGVuZCghMCx7fSxiLmRlZmF1bHRzLGQpLGQua2V5cyE9PXYmJihiLm9wdHMua2V5cz1kLmtleXM/Zi5leHRlbmQoe30sYi5kZWZhdWx0cy5rZXlzLGQua2V5cyk6ITEpLGIuZ3JvdXA9YSxiLl9zdGFydChiLm9wdHMuaW5kZXgpfSxjYW5jZWw6ZnVuY3Rpb24oKXt2YXIgYT1iLmNvbWluZzthJiYhMSE9PWIudHJpZ2dlcihcIm9uQ2FuY2VsXCIpJiYoYi5oaWRlTG9hZGluZygpLGIuYWpheExvYWQmJmIuYWpheExvYWQuYWJvcnQoKSxiLmFqYXhMb2FkPW51bGwsYi5pbWdQcmVsb2FkJiYoYi5pbWdQcmVsb2FkLm9ubG9hZD1iLmltZ1ByZWxvYWQub25lcnJvcj1udWxsKSxhLndyYXAmJmEud3JhcC5zdG9wKCEwLCEwKS50cmlnZ2VyKFwib25SZXNldFwiKS5yZW1vdmUoKSxiLmNvbWluZz1udWxsLGIuY3VycmVudHx8XG5iLl9hZnRlclpvb21PdXQoYSkpfSxjbG9zZTpmdW5jdGlvbihhKXtiLmNhbmNlbCgpOyExIT09Yi50cmlnZ2VyKFwiYmVmb3JlQ2xvc2VcIikmJihiLnVuYmluZEV2ZW50cygpLGIuaXNBY3RpdmUmJighYi5pc09wZW58fCEwPT09YT8oZihcIi5mYW5jeWJveC13cmFwXCIpLnN0b3AoITApLnRyaWdnZXIoXCJvblJlc2V0XCIpLnJlbW92ZSgpLGIuX2FmdGVyWm9vbU91dCgpKTooYi5pc09wZW49Yi5pc09wZW5lZD0hMSxiLmlzQ2xvc2luZz0hMCxmKFwiLmZhbmN5Ym94LWl0ZW0sIC5mYW5jeWJveC1uYXZcIikucmVtb3ZlKCksYi53cmFwLnN0b3AoITAsITApLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtb3BlbmVkXCIpLGIudHJhbnNpdGlvbnNbYi5jdXJyZW50LmNsb3NlTWV0aG9kXSgpKSkpfSxwbGF5OmZ1bmN0aW9uKGEpe3ZhciBkPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGIucGxheWVyLnRpbWVyKX0sZT1mdW5jdGlvbigpe2QoKTtiLmN1cnJlbnQmJmIucGxheWVyLmlzQWN0aXZlJiYoYi5wbGF5ZXIudGltZXI9XG5zZXRUaW1lb3V0KGIubmV4dCxiLmN1cnJlbnQucGxheVNwZWVkKSl9LGM9ZnVuY3Rpb24oKXtkKCk7cC51bmJpbmQoXCIucGxheWVyXCIpO2IucGxheWVyLmlzQWN0aXZlPSExO2IudHJpZ2dlcihcIm9uUGxheUVuZFwiKX07aWYoITA9PT1hfHwhYi5wbGF5ZXIuaXNBY3RpdmUmJiExIT09YSl7aWYoYi5jdXJyZW50JiYoYi5jdXJyZW50Lmxvb3B8fGIuY3VycmVudC5pbmRleDxiLmdyb3VwLmxlbmd0aC0xKSliLnBsYXllci5pc0FjdGl2ZT0hMCxwLmJpbmQoe1wib25DYW5jZWwucGxheWVyIGJlZm9yZUNsb3NlLnBsYXllclwiOmMsXCJvblVwZGF0ZS5wbGF5ZXJcIjplLFwiYmVmb3JlTG9hZC5wbGF5ZXJcIjpkfSksZSgpLGIudHJpZ2dlcihcIm9uUGxheVN0YXJ0XCIpfWVsc2UgYygpfSxuZXh0OmZ1bmN0aW9uKGEpe3ZhciBkPWIuY3VycmVudDtkJiYocShhKXx8KGE9ZC5kaXJlY3Rpb24ubmV4dCksYi5qdW1wdG8oZC5pbmRleCsxLGEsXCJuZXh0XCIpKX0scHJldjpmdW5jdGlvbihhKXt2YXIgZD1iLmN1cnJlbnQ7XG5kJiYocShhKXx8KGE9ZC5kaXJlY3Rpb24ucHJldiksYi5qdW1wdG8oZC5pbmRleC0xLGEsXCJwcmV2XCIpKX0sanVtcHRvOmZ1bmN0aW9uKGEsZCxlKXt2YXIgYz1iLmN1cnJlbnQ7YyYmKGE9bChhKSxiLmRpcmVjdGlvbj1kfHxjLmRpcmVjdGlvblthPj1jLmluZGV4P1wibmV4dFwiOlwicHJldlwiXSxiLnJvdXRlcj1lfHxcImp1bXB0b1wiLGMubG9vcCYmKDA+YSYmKGE9Yy5ncm91cC5sZW5ndGgrYSVjLmdyb3VwLmxlbmd0aCksYSU9Yy5ncm91cC5sZW5ndGgpLGMuZ3JvdXBbYV0hPT12JiYoYi5jYW5jZWwoKSxiLl9zdGFydChhKSkpfSxyZXBvc2l0aW9uOmZ1bmN0aW9uKGEsZCl7dmFyIGU9Yi5jdXJyZW50LGM9ZT9lLndyYXA6bnVsbCxrO2MmJihrPWIuX2dldFBvc2l0aW9uKGQpLGEmJlwic2Nyb2xsXCI9PT1hLnR5cGU/KGRlbGV0ZSBrLnBvc2l0aW9uLGMuc3RvcCghMCwhMCkuYW5pbWF0ZShrLDIwMCkpOihjLmNzcyhrKSxlLnBvcz1mLmV4dGVuZCh7fSxlLmRpbSxrKSkpfSx1cGRhdGU6ZnVuY3Rpb24oYSl7dmFyIGQ9XG5hJiZhLnR5cGUsZT0hZHx8XCJvcmllbnRhdGlvbmNoYW5nZVwiPT09ZDtlJiYoY2xlYXJUaW1lb3V0KEIpLEI9bnVsbCk7Yi5pc09wZW4mJiFCJiYoQj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGM9Yi5jdXJyZW50O2MmJiFiLmlzQ2xvc2luZyYmKGIud3JhcC5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LXRtcFwiKSwoZXx8XCJsb2FkXCI9PT1kfHxcInJlc2l6ZVwiPT09ZCYmYy5hdXRvUmVzaXplKSYmYi5fc2V0RGltZW5zaW9uKCksXCJzY3JvbGxcIj09PWQmJmMuY2FuU2hyaW5rfHxiLnJlcG9zaXRpb24oYSksYi50cmlnZ2VyKFwib25VcGRhdGVcIiksQj1udWxsKX0sZSYmIXM/MDozMDApKX0sdG9nZ2xlOmZ1bmN0aW9uKGEpe2IuaXNPcGVuJiYoYi5jdXJyZW50LmZpdFRvVmlldz1cImJvb2xlYW5cIj09PWYudHlwZShhKT9hOiFiLmN1cnJlbnQuZml0VG9WaWV3LHMmJihiLndyYXAucmVtb3ZlQXR0cihcInN0eWxlXCIpLmFkZENsYXNzKFwiZmFuY3lib3gtdG1wXCIpLGIudHJpZ2dlcihcIm9uVXBkYXRlXCIpKSxcbmIudXBkYXRlKCkpfSxoaWRlTG9hZGluZzpmdW5jdGlvbigpe3AudW5iaW5kKFwiLmxvYWRpbmdcIik7ZihcIiNmYW5jeWJveC1sb2FkaW5nXCIpLnJlbW92ZSgpfSxzaG93TG9hZGluZzpmdW5jdGlvbigpe3ZhciBhLGQ7Yi5oaWRlTG9hZGluZygpO2E9ZignPGRpdiBpZD1cImZhbmN5Ym94LWxvYWRpbmdcIj48ZGl2PjwvZGl2PjwvZGl2PicpLmNsaWNrKGIuY2FuY2VsKS5hcHBlbmRUbyhcImJvZHlcIik7cC5iaW5kKFwia2V5ZG93bi5sb2FkaW5nXCIsZnVuY3Rpb24oYSl7aWYoMjc9PT0oYS53aGljaHx8YS5rZXlDb2RlKSlhLnByZXZlbnREZWZhdWx0KCksYi5jYW5jZWwoKX0pO2IuZGVmYXVsdHMuZml4ZWR8fChkPWIuZ2V0Vmlld3BvcnQoKSxhLmNzcyh7cG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLjUqZC5oK2QueSxsZWZ0OjAuNSpkLncrZC54fSkpfSxnZXRWaWV3cG9ydDpmdW5jdGlvbigpe3ZhciBhPWIuY3VycmVudCYmYi5jdXJyZW50LmxvY2tlZHx8ITEsZD17eDpuLnNjcm9sbExlZnQoKSxcbnk6bi5zY3JvbGxUb3AoKX07YT8oZC53PWFbMF0uY2xpZW50V2lkdGgsZC5oPWFbMF0uY2xpZW50SGVpZ2h0KTooZC53PXMmJnIuaW5uZXJXaWR0aD9yLmlubmVyV2lkdGg6bi53aWR0aCgpLGQuaD1zJiZyLmlubmVySGVpZ2h0P3IuaW5uZXJIZWlnaHQ6bi5oZWlnaHQoKSk7cmV0dXJuIGR9LHVuYmluZEV2ZW50czpmdW5jdGlvbigpe2Iud3JhcCYmdChiLndyYXApJiZiLndyYXAudW5iaW5kKFwiLmZiXCIpO3AudW5iaW5kKFwiLmZiXCIpO24udW5iaW5kKFwiLmZiXCIpfSxiaW5kRXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJyZW50LGQ7YSYmKG4uYmluZChcIm9yaWVudGF0aW9uY2hhbmdlLmZiXCIrKHM/XCJcIjpcIiByZXNpemUuZmJcIikrKGEuYXV0b0NlbnRlciYmIWEubG9ja2VkP1wiIHNjcm9sbC5mYlwiOlwiXCIpLGIudXBkYXRlKSwoZD1hLmtleXMpJiZwLmJpbmQoXCJrZXlkb3duLmZiXCIsZnVuY3Rpb24oZSl7dmFyIGM9ZS53aGljaHx8ZS5rZXlDb2RlLGs9ZS50YXJnZXR8fGUuc3JjRWxlbWVudDtcbmlmKDI3PT09YyYmYi5jb21pbmcpcmV0dXJuITE7IWUuY3RybEtleSYmKCFlLmFsdEtleSYmIWUuc2hpZnRLZXkmJiFlLm1ldGFLZXkmJigha3x8IWsudHlwZSYmIWYoaykuaXMoXCJbY29udGVudGVkaXRhYmxlXVwiKSkpJiZmLmVhY2goZCxmdW5jdGlvbihkLGspe2lmKDE8YS5ncm91cC5sZW5ndGgmJmtbY10hPT12KXJldHVybiBiW2RdKGtbY10pLGUucHJldmVudERlZmF1bHQoKSwhMTtpZigtMTxmLmluQXJyYXkoYyxrKSlyZXR1cm4gYltkXSgpLGUucHJldmVudERlZmF1bHQoKSwhMX0pfSksZi5mbi5tb3VzZXdoZWVsJiZhLm1vdXNlV2hlZWwmJmIud3JhcC5iaW5kKFwibW91c2V3aGVlbC5mYlwiLGZ1bmN0aW9uKGQsYyxrLGcpe2Zvcih2YXIgaD1mKGQudGFyZ2V0fHxudWxsKSxqPSExO2gubGVuZ3RoJiYhaiYmIWguaXMoXCIuZmFuY3lib3gtc2tpblwiKSYmIWguaXMoXCIuZmFuY3lib3gtd3JhcFwiKTspaj1oWzBdJiYhKGhbMF0uc3R5bGUub3ZlcmZsb3cmJlwiaGlkZGVuXCI9PT1oWzBdLnN0eWxlLm92ZXJmbG93KSYmXG4oaFswXS5jbGllbnRXaWR0aCYmaFswXS5zY3JvbGxXaWR0aD5oWzBdLmNsaWVudFdpZHRofHxoWzBdLmNsaWVudEhlaWdodCYmaFswXS5zY3JvbGxIZWlnaHQ+aFswXS5jbGllbnRIZWlnaHQpLGg9ZihoKS5wYXJlbnQoKTtpZigwIT09YyYmIWomJjE8Yi5ncm91cC5sZW5ndGgmJiFhLmNhblNocmluayl7aWYoMDxnfHwwPGspYi5wcmV2KDA8Zz9cImRvd25cIjpcImxlZnRcIik7ZWxzZSBpZigwPmd8fDA+ayliLm5leHQoMD5nP1widXBcIjpcInJpZ2h0XCIpO2QucHJldmVudERlZmF1bHQoKX19KSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxkKXt2YXIgZSxjPWR8fGIuY29taW5nfHxiLmN1cnJlbnQ7aWYoYyl7Zi5pc0Z1bmN0aW9uKGNbYV0pJiYoZT1jW2FdLmFwcGx5KGMsQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKSk7aWYoITE9PT1lKXJldHVybiExO2MuaGVscGVycyYmZi5lYWNoKGMuaGVscGVycyxmdW5jdGlvbihkLGUpe2lmKGUmJmIuaGVscGVyc1tkXSYmZi5pc0Z1bmN0aW9uKGIuaGVscGVyc1tkXVthXSkpYi5oZWxwZXJzW2RdW2FdKGYuZXh0ZW5kKCEwLFxue30sYi5oZWxwZXJzW2RdLmRlZmF1bHRzLGUpLGMpfSk7cC50cmlnZ2VyKGEpfX0saXNJbWFnZTpmdW5jdGlvbihhKXtyZXR1cm4gcShhKSYmYS5tYXRjaCgvKF5kYXRhOmltYWdlXFwvLiosKXwoXFwuKGpwKGV8Z3xlZyl8Z2lmfHBuZ3xibXB8d2VicHxzdmcpKChcXD98IykuKik/JCkvaSl9LGlzU1dGOmZ1bmN0aW9uKGEpe3JldHVybiBxKGEpJiZhLm1hdGNoKC9cXC4oc3dmKSgoXFw/fCMpLiopPyQvaSl9LF9zdGFydDpmdW5jdGlvbihhKXt2YXIgZD17fSxlLGM7YT1sKGEpO2U9Yi5ncm91cFthXXx8bnVsbDtpZighZSlyZXR1cm4hMTtkPWYuZXh0ZW5kKCEwLHt9LGIub3B0cyxlKTtlPWQubWFyZ2luO2M9ZC5wYWRkaW5nO1wibnVtYmVyXCI9PT1mLnR5cGUoZSkmJihkLm1hcmdpbj1bZSxlLGUsZV0pO1wibnVtYmVyXCI9PT1mLnR5cGUoYykmJihkLnBhZGRpbmc9W2MsYyxjLGNdKTtkLm1vZGFsJiZmLmV4dGVuZCghMCxkLHtjbG9zZUJ0bjohMSxjbG9zZUNsaWNrOiExLG5leHRDbGljazohMSxhcnJvd3M6ITEsXG5tb3VzZVdoZWVsOiExLGtleXM6bnVsbCxoZWxwZXJzOntvdmVybGF5OntjbG9zZUNsaWNrOiExfX19KTtkLmF1dG9TaXplJiYoZC5hdXRvV2lkdGg9ZC5hdXRvSGVpZ2h0PSEwKTtcImF1dG9cIj09PWQud2lkdGgmJihkLmF1dG9XaWR0aD0hMCk7XCJhdXRvXCI9PT1kLmhlaWdodCYmKGQuYXV0b0hlaWdodD0hMCk7ZC5ncm91cD1iLmdyb3VwO2QuaW5kZXg9YTtiLmNvbWluZz1kO2lmKCExPT09Yi50cmlnZ2VyKFwiYmVmb3JlTG9hZFwiKSliLmNvbWluZz1udWxsO2Vsc2V7Yz1kLnR5cGU7ZT1kLmhyZWY7aWYoIWMpcmV0dXJuIGIuY29taW5nPW51bGwsYi5jdXJyZW50JiZiLnJvdXRlciYmXCJqdW1wdG9cIiE9PWIucm91dGVyPyhiLmN1cnJlbnQuaW5kZXg9YSxiW2Iucm91dGVyXShiLmRpcmVjdGlvbikpOiExO2IuaXNBY3RpdmU9ITA7aWYoXCJpbWFnZVwiPT09Y3x8XCJzd2ZcIj09PWMpZC5hdXRvSGVpZ2h0PWQuYXV0b1dpZHRoPSExLGQuc2Nyb2xsaW5nPVwidmlzaWJsZVwiO1wiaW1hZ2VcIj09PWMmJihkLmFzcGVjdFJhdGlvPVxuITApO1wiaWZyYW1lXCI9PT1jJiZzJiYoZC5zY3JvbGxpbmc9XCJzY3JvbGxcIik7ZC53cmFwPWYoZC50cGwud3JhcCkuYWRkQ2xhc3MoXCJmYW5jeWJveC1cIisocz9cIm1vYmlsZVwiOlwiZGVza3RvcFwiKStcIiBmYW5jeWJveC10eXBlLVwiK2MrXCIgZmFuY3lib3gtdG1wIFwiK2Qud3JhcENTUykuYXBwZW5kVG8oZC5wYXJlbnR8fFwiYm9keVwiKTtmLmV4dGVuZChkLHtza2luOmYoXCIuZmFuY3lib3gtc2tpblwiLGQud3JhcCksb3V0ZXI6ZihcIi5mYW5jeWJveC1vdXRlclwiLGQud3JhcCksaW5uZXI6ZihcIi5mYW5jeWJveC1pbm5lclwiLGQud3JhcCl9KTtmLmVhY2goW1wiVG9wXCIsXCJSaWdodFwiLFwiQm90dG9tXCIsXCJMZWZ0XCJdLGZ1bmN0aW9uKGEsYil7ZC5za2luLmNzcyhcInBhZGRpbmdcIitiLHcoZC5wYWRkaW5nW2FdKSl9KTtiLnRyaWdnZXIoXCJvblJlYWR5XCIpO2lmKFwiaW5saW5lXCI9PT1jfHxcImh0bWxcIj09PWMpe2lmKCFkLmNvbnRlbnR8fCFkLmNvbnRlbnQubGVuZ3RoKXJldHVybiBiLl9lcnJvcihcImNvbnRlbnRcIil9ZWxzZSBpZighZSlyZXR1cm4gYi5fZXJyb3IoXCJocmVmXCIpO1xuXCJpbWFnZVwiPT09Yz9iLl9sb2FkSW1hZ2UoKTpcImFqYXhcIj09PWM/Yi5fbG9hZEFqYXgoKTpcImlmcmFtZVwiPT09Yz9iLl9sb2FkSWZyYW1lKCk6Yi5fYWZ0ZXJMb2FkKCl9fSxfZXJyb3I6ZnVuY3Rpb24oYSl7Zi5leHRlbmQoYi5jb21pbmcse3R5cGU6XCJodG1sXCIsYXV0b1dpZHRoOiEwLGF1dG9IZWlnaHQ6ITAsbWluV2lkdGg6MCxtaW5IZWlnaHQ6MCxzY3JvbGxpbmc6XCJub1wiLGhhc0Vycm9yOmEsY29udGVudDpiLmNvbWluZy50cGwuZXJyb3J9KTtiLl9hZnRlckxvYWQoKX0sX2xvYWRJbWFnZTpmdW5jdGlvbigpe3ZhciBhPWIuaW1nUHJlbG9hZD1uZXcgSW1hZ2U7YS5vbmxvYWQ9ZnVuY3Rpb24oKXt0aGlzLm9ubG9hZD10aGlzLm9uZXJyb3I9bnVsbDtiLmNvbWluZy53aWR0aD10aGlzLndpZHRoL2Iub3B0cy5waXhlbFJhdGlvO2IuY29taW5nLmhlaWdodD10aGlzLmhlaWdodC9iLm9wdHMucGl4ZWxSYXRpbztiLl9hZnRlckxvYWQoKX07YS5vbmVycm9yPWZ1bmN0aW9uKCl7dGhpcy5vbmxvYWQ9XG50aGlzLm9uZXJyb3I9bnVsbDtiLl9lcnJvcihcImltYWdlXCIpfTthLnNyYz1iLmNvbWluZy5ocmVmOyEwIT09YS5jb21wbGV0ZSYmYi5zaG93TG9hZGluZygpfSxfbG9hZEFqYXg6ZnVuY3Rpb24oKXt2YXIgYT1iLmNvbWluZztiLnNob3dMb2FkaW5nKCk7Yi5hamF4TG9hZD1mLmFqYXgoZi5leHRlbmQoe30sYS5hamF4LHt1cmw6YS5ocmVmLGVycm9yOmZ1bmN0aW9uKGEsZSl7Yi5jb21pbmcmJlwiYWJvcnRcIiE9PWU/Yi5fZXJyb3IoXCJhamF4XCIsYSk6Yi5oaWRlTG9hZGluZygpfSxzdWNjZXNzOmZ1bmN0aW9uKGQsZSl7XCJzdWNjZXNzXCI9PT1lJiYoYS5jb250ZW50PWQsYi5fYWZ0ZXJMb2FkKCkpfX0pKX0sX2xvYWRJZnJhbWU6ZnVuY3Rpb24oKXt2YXIgYT1iLmNvbWluZyxkPWYoYS50cGwuaWZyYW1lLnJlcGxhY2UoL1xce3JuZFxcfS9nLChuZXcgRGF0ZSkuZ2V0VGltZSgpKSkuYXR0cihcInNjcm9sbGluZ1wiLHM/XCJhdXRvXCI6YS5pZnJhbWUuc2Nyb2xsaW5nKS5hdHRyKFwic3JjXCIsYS5ocmVmKTtcbmYoYS53cmFwKS5iaW5kKFwib25SZXNldFwiLGZ1bmN0aW9uKCl7dHJ5e2YodGhpcykuZmluZChcImlmcmFtZVwiKS5oaWRlKCkuYXR0cihcInNyY1wiLFwiLy9hYm91dDpibGFua1wiKS5lbmQoKS5lbXB0eSgpfWNhdGNoKGEpe319KTthLmlmcmFtZS5wcmVsb2FkJiYoYi5zaG93TG9hZGluZygpLGQub25lKFwibG9hZFwiLGZ1bmN0aW9uKCl7Zih0aGlzKS5kYXRhKFwicmVhZHlcIiwxKTtzfHxmKHRoaXMpLmJpbmQoXCJsb2FkLmZiXCIsYi51cGRhdGUpO2YodGhpcykucGFyZW50cyhcIi5mYW5jeWJveC13cmFwXCIpLndpZHRoKFwiMTAwJVwiKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LXRtcFwiKS5zaG93KCk7Yi5fYWZ0ZXJMb2FkKCl9KSk7YS5jb250ZW50PWQuYXBwZW5kVG8oYS5pbm5lcik7YS5pZnJhbWUucHJlbG9hZHx8Yi5fYWZ0ZXJMb2FkKCl9LF9wcmVsb2FkSW1hZ2VzOmZ1bmN0aW9uKCl7dmFyIGE9Yi5ncm91cCxkPWIuY3VycmVudCxlPWEubGVuZ3RoLGM9ZC5wcmVsb2FkP01hdGgubWluKGQucHJlbG9hZCxcbmUtMSk6MCxmLGc7Zm9yKGc9MTtnPD1jO2crPTEpZj1hWyhkLmluZGV4K2cpJWVdLFwiaW1hZ2VcIj09PWYudHlwZSYmZi5ocmVmJiYoKG5ldyBJbWFnZSkuc3JjPWYuaHJlZil9LF9hZnRlckxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT1iLmNvbWluZyxkPWIuY3VycmVudCxlLGMsayxnLGg7Yi5oaWRlTG9hZGluZygpO2lmKGEmJiExIT09Yi5pc0FjdGl2ZSlpZighMT09PWIudHJpZ2dlcihcImFmdGVyTG9hZFwiLGEsZCkpYS53cmFwLnN0b3AoITApLnRyaWdnZXIoXCJvblJlc2V0XCIpLnJlbW92ZSgpLGIuY29taW5nPW51bGw7ZWxzZXtkJiYoYi50cmlnZ2VyKFwiYmVmb3JlQ2hhbmdlXCIsZCksZC53cmFwLnN0b3AoITApLnJlbW92ZUNsYXNzKFwiZmFuY3lib3gtb3BlbmVkXCIpLmZpbmQoXCIuZmFuY3lib3gtaXRlbSwgLmZhbmN5Ym94LW5hdlwiKS5yZW1vdmUoKSk7Yi51bmJpbmRFdmVudHMoKTtlPWEuY29udGVudDtjPWEudHlwZTtrPWEuc2Nyb2xsaW5nO2YuZXh0ZW5kKGIse3dyYXA6YS53cmFwLHNraW46YS5za2luLFxub3V0ZXI6YS5vdXRlcixpbm5lcjphLmlubmVyLGN1cnJlbnQ6YSxwcmV2aW91czpkfSk7Zz1hLmhyZWY7c3dpdGNoKGMpe2Nhc2UgXCJpbmxpbmVcIjpjYXNlIFwiYWpheFwiOmNhc2UgXCJodG1sXCI6YS5zZWxlY3Rvcj9lPWYoXCI8ZGl2PlwiKS5odG1sKGUpLmZpbmQoYS5zZWxlY3Rvcik6dChlKSYmKGUuZGF0YShcImZhbmN5Ym94LXBsYWNlaG9sZGVyXCIpfHxlLmRhdGEoXCJmYW5jeWJveC1wbGFjZWhvbGRlclwiLGYoJzxkaXYgY2xhc3M9XCJmYW5jeWJveC1wbGFjZWhvbGRlclwiPjwvZGl2PicpLmluc2VydEFmdGVyKGUpLmhpZGUoKSksZT1lLnNob3coKS5kZXRhY2goKSxhLndyYXAuYmluZChcIm9uUmVzZXRcIixmdW5jdGlvbigpe2YodGhpcykuZmluZChlKS5sZW5ndGgmJmUuaGlkZSgpLnJlcGxhY2VBbGwoZS5kYXRhKFwiZmFuY3lib3gtcGxhY2Vob2xkZXJcIikpLmRhdGEoXCJmYW5jeWJveC1wbGFjZWhvbGRlclwiLCExKX0pKTticmVhaztjYXNlIFwiaW1hZ2VcIjplPWEudHBsLmltYWdlLnJlcGxhY2UoXCJ7aHJlZn1cIixcbmcpO2JyZWFrO2Nhc2UgXCJzd2ZcIjplPSc8b2JqZWN0IGlkPVwiZmFuY3lib3gtc3dmXCIgY2xhc3NpZD1cImNsc2lkOkQyN0NEQjZFLUFFNkQtMTFjZi05NkI4LTQ0NDU1MzU0MDAwMFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIj48cGFyYW0gbmFtZT1cIm1vdmllXCIgdmFsdWU9XCInK2crJ1wiPjwvcGFyYW0+JyxoPVwiXCIsZi5lYWNoKGEuc3dmLGZ1bmN0aW9uKGEsYil7ZSs9JzxwYXJhbSBuYW1lPVwiJythKydcIiB2YWx1ZT1cIicrYisnXCI+PC9wYXJhbT4nO2grPVwiIFwiK2ErJz1cIicrYisnXCInfSksZSs9JzxlbWJlZCBzcmM9XCInK2crJ1wiIHR5cGU9XCJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaFwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIicraCtcIj48L2VtYmVkPjwvb2JqZWN0PlwifSghdChlKXx8IWUucGFyZW50KCkuaXMoYS5pbm5lcikpJiZhLmlubmVyLmFwcGVuZChlKTtiLnRyaWdnZXIoXCJiZWZvcmVTaG93XCIpO2EuaW5uZXIuY3NzKFwib3ZlcmZsb3dcIixcInllc1wiPT09az9cInNjcm9sbFwiOlxuXCJub1wiPT09az9cImhpZGRlblwiOmspO2IuX3NldERpbWVuc2lvbigpO2IucmVwb3NpdGlvbigpO2IuaXNPcGVuPSExO2IuY29taW5nPW51bGw7Yi5iaW5kRXZlbnRzKCk7aWYoYi5pc09wZW5lZCl7aWYoZC5wcmV2TWV0aG9kKWIudHJhbnNpdGlvbnNbZC5wcmV2TWV0aG9kXSgpfWVsc2UgZihcIi5mYW5jeWJveC13cmFwXCIpLm5vdChhLndyYXApLnN0b3AoITApLnRyaWdnZXIoXCJvblJlc2V0XCIpLnJlbW92ZSgpO2IudHJhbnNpdGlvbnNbYi5pc09wZW5lZD9hLm5leHRNZXRob2Q6YS5vcGVuTWV0aG9kXSgpO2IuX3ByZWxvYWRJbWFnZXMoKX19LF9zZXREaW1lbnNpb246ZnVuY3Rpb24oKXt2YXIgYT1iLmdldFZpZXdwb3J0KCksZD0wLGU9ITEsYz0hMSxlPWIud3JhcCxrPWIuc2tpbixnPWIuaW5uZXIsaD1iLmN1cnJlbnQsYz1oLndpZHRoLGo9aC5oZWlnaHQsbT1oLm1pbldpZHRoLHU9aC5taW5IZWlnaHQsbj1oLm1heFdpZHRoLHA9aC5tYXhIZWlnaHQscz1oLnNjcm9sbGluZyxxPWguc2Nyb2xsT3V0c2lkZT9cbmguc2Nyb2xsYmFyV2lkdGg6MCx4PWgubWFyZ2luLHk9bCh4WzFdK3hbM10pLHI9bCh4WzBdK3hbMl0pLHYseix0LEMsQSxGLEIsRCxIO2UuYWRkKGspLmFkZChnKS53aWR0aChcImF1dG9cIikuaGVpZ2h0KFwiYXV0b1wiKS5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LXRtcFwiKTt4PWwoay5vdXRlcldpZHRoKCEwKS1rLndpZHRoKCkpO3Y9bChrLm91dGVySGVpZ2h0KCEwKS1rLmhlaWdodCgpKTt6PXkreDt0PXIrdjtDPUUoYyk/KGEudy16KSpsKGMpLzEwMDpjO0E9RShqKT8oYS5oLXQpKmwoaikvMTAwOmo7aWYoXCJpZnJhbWVcIj09PWgudHlwZSl7aWYoSD1oLmNvbnRlbnQsaC5hdXRvSGVpZ2h0JiYxPT09SC5kYXRhKFwicmVhZHlcIikpdHJ5e0hbMF0uY29udGVudFdpbmRvdy5kb2N1bWVudC5sb2NhdGlvbiYmKGcud2lkdGgoQykuaGVpZ2h0KDk5OTkpLEY9SC5jb250ZW50cygpLmZpbmQoXCJib2R5XCIpLHEmJkYuY3NzKFwib3ZlcmZsb3cteFwiLFwiaGlkZGVuXCIpLEE9Ri5vdXRlckhlaWdodCghMCkpfWNhdGNoKEcpe319ZWxzZSBpZihoLmF1dG9XaWR0aHx8XG5oLmF1dG9IZWlnaHQpZy5hZGRDbGFzcyhcImZhbmN5Ym94LXRtcFwiKSxoLmF1dG9XaWR0aHx8Zy53aWR0aChDKSxoLmF1dG9IZWlnaHR8fGcuaGVpZ2h0KEEpLGguYXV0b1dpZHRoJiYoQz1nLndpZHRoKCkpLGguYXV0b0hlaWdodCYmKEE9Zy5oZWlnaHQoKSksZy5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LXRtcFwiKTtjPWwoQyk7aj1sKEEpO0Q9Qy9BO209bChFKG0pP2wobSxcIndcIiktejptKTtuPWwoRShuKT9sKG4sXCJ3XCIpLXo6bik7dT1sKEUodSk/bCh1LFwiaFwiKS10OnUpO3A9bChFKHApP2wocCxcImhcIiktdDpwKTtGPW47Qj1wO2guZml0VG9WaWV3JiYobj1NYXRoLm1pbihhLncteixuKSxwPU1hdGgubWluKGEuaC10LHApKTt6PWEudy15O3I9YS5oLXI7aC5hc3BlY3RSYXRpbz8oYz5uJiYoYz1uLGo9bChjL0QpKSxqPnAmJihqPXAsYz1sKGoqRCkpLGM8bSYmKGM9bSxqPWwoYy9EKSksajx1JiYoaj11LGM9bChqKkQpKSk6KGM9TWF0aC5tYXgobSxNYXRoLm1pbihjLG4pKSxoLmF1dG9IZWlnaHQmJlxuXCJpZnJhbWVcIiE9PWgudHlwZSYmKGcud2lkdGgoYyksaj1nLmhlaWdodCgpKSxqPU1hdGgubWF4KHUsTWF0aC5taW4oaixwKSkpO2lmKGguZml0VG9WaWV3KWlmKGcud2lkdGgoYykuaGVpZ2h0KGopLGUud2lkdGgoYyt4KSxhPWUud2lkdGgoKSx5PWUuaGVpZ2h0KCksaC5hc3BlY3RSYXRpbylmb3IoOyhhPnp8fHk+cikmJihjPm0mJmo+dSkmJiEoMTk8ZCsrKTspaj1NYXRoLm1heCh1LE1hdGgubWluKHAsai0xMCkpLGM9bChqKkQpLGM8bSYmKGM9bSxqPWwoYy9EKSksYz5uJiYoYz1uLGo9bChjL0QpKSxnLndpZHRoKGMpLmhlaWdodChqKSxlLndpZHRoKGMreCksYT1lLndpZHRoKCkseT1lLmhlaWdodCgpO2Vsc2UgYz1NYXRoLm1heChtLE1hdGgubWluKGMsYy0oYS16KSkpLGo9TWF0aC5tYXgodSxNYXRoLm1pbihqLGotKHktcikpKTtxJiYoXCJhdXRvXCI9PT1zJiZqPEEmJmMreCtxPHopJiYoYys9cSk7Zy53aWR0aChjKS5oZWlnaHQoaik7ZS53aWR0aChjK3gpO2E9ZS53aWR0aCgpO1xueT1lLmhlaWdodCgpO2U9KGE+enx8eT5yKSYmYz5tJiZqPnU7Yz1oLmFzcGVjdFJhdGlvP2M8RiYmajxCJiZjPEMmJmo8QTooYzxGfHxqPEIpJiYoYzxDfHxqPEEpO2YuZXh0ZW5kKGgse2RpbTp7d2lkdGg6dyhhKSxoZWlnaHQ6dyh5KX0sb3JpZ1dpZHRoOkMsb3JpZ0hlaWdodDpBLGNhblNocmluazplLGNhbkV4cGFuZDpjLHdQYWRkaW5nOngsaFBhZGRpbmc6dix3cmFwU3BhY2U6eS1rLm91dGVySGVpZ2h0KCEwKSxza2luU3BhY2U6ay5oZWlnaHQoKS1qfSk7IUgmJihoLmF1dG9IZWlnaHQmJmo+dSYmajxwJiYhYykmJmcuaGVpZ2h0KFwiYXV0b1wiKX0sX2dldFBvc2l0aW9uOmZ1bmN0aW9uKGEpe3ZhciBkPWIuY3VycmVudCxlPWIuZ2V0Vmlld3BvcnQoKSxjPWQubWFyZ2luLGY9Yi53cmFwLndpZHRoKCkrY1sxXStjWzNdLGc9Yi53cmFwLmhlaWdodCgpK2NbMF0rY1syXSxjPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdG9wOmNbMF0sbGVmdDpjWzNdfTtkLmF1dG9DZW50ZXImJmQuZml4ZWQmJlxuIWEmJmc8PWUuaCYmZjw9ZS53P2MucG9zaXRpb249XCJmaXhlZFwiOmQubG9ja2VkfHwoYy50b3ArPWUueSxjLmxlZnQrPWUueCk7Yy50b3A9dyhNYXRoLm1heChjLnRvcCxjLnRvcCsoZS5oLWcpKmQudG9wUmF0aW8pKTtjLmxlZnQ9dyhNYXRoLm1heChjLmxlZnQsYy5sZWZ0KyhlLnctZikqZC5sZWZ0UmF0aW8pKTtyZXR1cm4gY30sX2FmdGVyWm9vbUluOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJyZW50O2EmJihiLmlzT3Blbj1iLmlzT3BlbmVkPSEwLGIud3JhcC5jc3MoXCJvdmVyZmxvd1wiLFwidmlzaWJsZVwiKS5hZGRDbGFzcyhcImZhbmN5Ym94LW9wZW5lZFwiKSxiLnVwZGF0ZSgpLChhLmNsb3NlQ2xpY2t8fGEubmV4dENsaWNrJiYxPGIuZ3JvdXAubGVuZ3RoKSYmYi5pbm5lci5jc3MoXCJjdXJzb3JcIixcInBvaW50ZXJcIikuYmluZChcImNsaWNrLmZiXCIsZnVuY3Rpb24oZCl7IWYoZC50YXJnZXQpLmlzKFwiYVwiKSYmIWYoZC50YXJnZXQpLnBhcmVudCgpLmlzKFwiYVwiKSYmKGQucHJldmVudERlZmF1bHQoKSxcbmJbYS5jbG9zZUNsaWNrP1wiY2xvc2VcIjpcIm5leHRcIl0oKSl9KSxhLmNsb3NlQnRuJiZmKGEudHBsLmNsb3NlQnRuKS5hcHBlbmRUbyhiLnNraW4pLmJpbmQoXCJjbGljay5mYlwiLGZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtiLmNsb3NlKCl9KSxhLmFycm93cyYmMTxiLmdyb3VwLmxlbmd0aCYmKChhLmxvb3B8fDA8YS5pbmRleCkmJmYoYS50cGwucHJldikuYXBwZW5kVG8oYi5vdXRlcikuYmluZChcImNsaWNrLmZiXCIsYi5wcmV2KSwoYS5sb29wfHxhLmluZGV4PGIuZ3JvdXAubGVuZ3RoLTEpJiZmKGEudHBsLm5leHQpLmFwcGVuZFRvKGIub3V0ZXIpLmJpbmQoXCJjbGljay5mYlwiLGIubmV4dCkpLGIudHJpZ2dlcihcImFmdGVyU2hvd1wiKSwhYS5sb29wJiZhLmluZGV4PT09YS5ncm91cC5sZW5ndGgtMT9iLnBsYXkoITEpOmIub3B0cy5hdXRvUGxheSYmIWIucGxheWVyLmlzQWN0aXZlJiYoYi5vcHRzLmF1dG9QbGF5PSExLGIucGxheSgpKSl9LF9hZnRlclpvb21PdXQ6ZnVuY3Rpb24oYSl7YT1cbmF8fGIuY3VycmVudDtmKFwiLmZhbmN5Ym94LXdyYXBcIikudHJpZ2dlcihcIm9uUmVzZXRcIikucmVtb3ZlKCk7Zi5leHRlbmQoYix7Z3JvdXA6e30sb3B0czp7fSxyb3V0ZXI6ITEsY3VycmVudDpudWxsLGlzQWN0aXZlOiExLGlzT3BlbmVkOiExLGlzT3BlbjohMSxpc0Nsb3Npbmc6ITEsd3JhcDpudWxsLHNraW46bnVsbCxvdXRlcjpudWxsLGlubmVyOm51bGx9KTtiLnRyaWdnZXIoXCJhZnRlckNsb3NlXCIsYSl9fSk7Yi50cmFuc2l0aW9ucz17Z2V0T3JpZ1Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJyZW50LGQ9YS5lbGVtZW50LGU9YS5vcmlnLGM9e30sZj01MCxnPTUwLGg9YS5oUGFkZGluZyxqPWEud1BhZGRpbmcsbT1iLmdldFZpZXdwb3J0KCk7IWUmJihhLmlzRG9tJiZkLmlzKFwiOnZpc2libGVcIikpJiYoZT1kLmZpbmQoXCJpbWc6Zmlyc3RcIiksZS5sZW5ndGh8fChlPWQpKTt0KGUpPyhjPWUub2Zmc2V0KCksZS5pcyhcImltZ1wiKSYmKGY9ZS5vdXRlcldpZHRoKCksZz1lLm91dGVySGVpZ2h0KCkpKTpcbihjLnRvcD1tLnkrKG0uaC1nKSphLnRvcFJhdGlvLGMubGVmdD1tLngrKG0udy1mKSphLmxlZnRSYXRpbyk7aWYoXCJmaXhlZFwiPT09Yi53cmFwLmNzcyhcInBvc2l0aW9uXCIpfHxhLmxvY2tlZCljLnRvcC09bS55LGMubGVmdC09bS54O3JldHVybiBjPXt0b3A6dyhjLnRvcC1oKmEudG9wUmF0aW8pLGxlZnQ6dyhjLmxlZnQtaiphLmxlZnRSYXRpbyksd2lkdGg6dyhmK2opLGhlaWdodDp3KGcraCl9fSxzdGVwOmZ1bmN0aW9uKGEsZCl7dmFyIGUsYyxmPWQucHJvcDtjPWIuY3VycmVudDt2YXIgZz1jLndyYXBTcGFjZSxoPWMuc2tpblNwYWNlO2lmKFwid2lkdGhcIj09PWZ8fFwiaGVpZ2h0XCI9PT1mKWU9ZC5lbmQ9PT1kLnN0YXJ0PzE6KGEtZC5zdGFydCkvKGQuZW5kLWQuc3RhcnQpLGIuaXNDbG9zaW5nJiYoZT0xLWUpLGM9XCJ3aWR0aFwiPT09Zj9jLndQYWRkaW5nOmMuaFBhZGRpbmcsYz1hLWMsYi5za2luW2ZdKGwoXCJ3aWR0aFwiPT09Zj9jOmMtZyplKSksYi5pbm5lcltmXShsKFwid2lkdGhcIj09PVxuZj9jOmMtZyplLWgqZSkpfSx6b29tSW46ZnVuY3Rpb24oKXt2YXIgYT1iLmN1cnJlbnQsZD1hLnBvcyxlPWEub3BlbkVmZmVjdCxjPVwiZWxhc3RpY1wiPT09ZSxrPWYuZXh0ZW5kKHtvcGFjaXR5OjF9LGQpO2RlbGV0ZSBrLnBvc2l0aW9uO2M/KGQ9dGhpcy5nZXRPcmlnUG9zaXRpb24oKSxhLm9wZW5PcGFjaXR5JiYoZC5vcGFjaXR5PTAuMSkpOlwiZmFkZVwiPT09ZSYmKGQub3BhY2l0eT0wLjEpO2Iud3JhcC5jc3MoZCkuYW5pbWF0ZShrLHtkdXJhdGlvbjpcIm5vbmVcIj09PWU/MDphLm9wZW5TcGVlZCxlYXNpbmc6YS5vcGVuRWFzaW5nLHN0ZXA6Yz90aGlzLnN0ZXA6bnVsbCxjb21wbGV0ZTpiLl9hZnRlclpvb21Jbn0pfSx6b29tT3V0OmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJyZW50LGQ9YS5jbG9zZUVmZmVjdCxlPVwiZWxhc3RpY1wiPT09ZCxjPXtvcGFjaXR5OjAuMX07ZSYmKGM9dGhpcy5nZXRPcmlnUG9zaXRpb24oKSxhLmNsb3NlT3BhY2l0eSYmKGMub3BhY2l0eT0wLjEpKTtiLndyYXAuYW5pbWF0ZShjLFxue2R1cmF0aW9uOlwibm9uZVwiPT09ZD8wOmEuY2xvc2VTcGVlZCxlYXNpbmc6YS5jbG9zZUVhc2luZyxzdGVwOmU/dGhpcy5zdGVwOm51bGwsY29tcGxldGU6Yi5fYWZ0ZXJab29tT3V0fSl9LGNoYW5nZUluOmZ1bmN0aW9uKCl7dmFyIGE9Yi5jdXJyZW50LGQ9YS5uZXh0RWZmZWN0LGU9YS5wb3MsYz17b3BhY2l0eToxfSxmPWIuZGlyZWN0aW9uLGc7ZS5vcGFjaXR5PTAuMTtcImVsYXN0aWNcIj09PWQmJihnPVwiZG93blwiPT09Znx8XCJ1cFwiPT09Zj9cInRvcFwiOlwibGVmdFwiLFwiZG93blwiPT09Znx8XCJyaWdodFwiPT09Zj8oZVtnXT13KGwoZVtnXSktMjAwKSxjW2ddPVwiKz0yMDBweFwiKTooZVtnXT13KGwoZVtnXSkrMjAwKSxjW2ddPVwiLT0yMDBweFwiKSk7XCJub25lXCI9PT1kP2IuX2FmdGVyWm9vbUluKCk6Yi53cmFwLmNzcyhlKS5hbmltYXRlKGMse2R1cmF0aW9uOmEubmV4dFNwZWVkLGVhc2luZzphLm5leHRFYXNpbmcsY29tcGxldGU6Yi5fYWZ0ZXJab29tSW59KX0sY2hhbmdlT3V0OmZ1bmN0aW9uKCl7dmFyIGE9XG5iLnByZXZpb3VzLGQ9YS5wcmV2RWZmZWN0LGU9e29wYWNpdHk6MC4xfSxjPWIuZGlyZWN0aW9uO1wiZWxhc3RpY1wiPT09ZCYmKGVbXCJkb3duXCI9PT1jfHxcInVwXCI9PT1jP1widG9wXCI6XCJsZWZ0XCJdPShcInVwXCI9PT1jfHxcImxlZnRcIj09PWM/XCItXCI6XCIrXCIpK1wiPTIwMHB4XCIpO2Eud3JhcC5hbmltYXRlKGUse2R1cmF0aW9uOlwibm9uZVwiPT09ZD8wOmEucHJldlNwZWVkLGVhc2luZzphLnByZXZFYXNpbmcsY29tcGxldGU6ZnVuY3Rpb24oKXtmKHRoaXMpLnRyaWdnZXIoXCJvblJlc2V0XCIpLnJlbW92ZSgpfX0pfX07Yi5oZWxwZXJzLm92ZXJsYXk9e2RlZmF1bHRzOntjbG9zZUNsaWNrOiEwLHNwZWVkT3V0OjIwMCxzaG93RWFybHk6ITAsY3NzOnt9LGxvY2tlZDohcyxmaXhlZDohMH0sb3ZlcmxheTpudWxsLGZpeGVkOiExLGVsOmYoXCJodG1sXCIpLGNyZWF0ZTpmdW5jdGlvbihhKXthPWYuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdHMsYSk7dGhpcy5vdmVybGF5JiZ0aGlzLmNsb3NlKCk7dGhpcy5vdmVybGF5PVxuZignPGRpdiBjbGFzcz1cImZhbmN5Ym94LW92ZXJsYXlcIj48L2Rpdj4nKS5hcHBlbmRUbyhiLmNvbWluZz9iLmNvbWluZy5wYXJlbnQ6YS5wYXJlbnQpO3RoaXMuZml4ZWQ9ITE7YS5maXhlZCYmYi5kZWZhdWx0cy5maXhlZCYmKHRoaXMub3ZlcmxheS5hZGRDbGFzcyhcImZhbmN5Ym94LW92ZXJsYXktZml4ZWRcIiksdGhpcy5maXhlZD0hMCl9LG9wZW46ZnVuY3Rpb24oYSl7dmFyIGQ9dGhpczthPWYuZXh0ZW5kKHt9LHRoaXMuZGVmYXVsdHMsYSk7dGhpcy5vdmVybGF5P3RoaXMub3ZlcmxheS51bmJpbmQoXCIub3ZlcmxheVwiKS53aWR0aChcImF1dG9cIikuaGVpZ2h0KFwiYXV0b1wiKTp0aGlzLmNyZWF0ZShhKTt0aGlzLmZpeGVkfHwobi5iaW5kKFwicmVzaXplLm92ZXJsYXlcIixmLnByb3h5KHRoaXMudXBkYXRlLHRoaXMpKSx0aGlzLnVwZGF0ZSgpKTthLmNsb3NlQ2xpY2smJnRoaXMub3ZlcmxheS5iaW5kKFwiY2xpY2sub3ZlcmxheVwiLGZ1bmN0aW9uKGEpe2lmKGYoYS50YXJnZXQpLmhhc0NsYXNzKFwiZmFuY3lib3gtb3ZlcmxheVwiKSlyZXR1cm4gYi5pc0FjdGl2ZT9cbmIuY2xvc2UoKTpkLmNsb3NlKCksITF9KTt0aGlzLm92ZXJsYXkuY3NzKGEuY3NzKS5zaG93KCl9LGNsb3NlOmZ1bmN0aW9uKCl7dmFyIGEsYjtuLnVuYmluZChcInJlc2l6ZS5vdmVybGF5XCIpO3RoaXMuZWwuaGFzQ2xhc3MoXCJmYW5jeWJveC1sb2NrXCIpJiYoZihcIi5mYW5jeWJveC1tYXJnaW5cIikucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1tYXJnaW5cIiksYT1uLnNjcm9sbFRvcCgpLGI9bi5zY3JvbGxMZWZ0KCksdGhpcy5lbC5yZW1vdmVDbGFzcyhcImZhbmN5Ym94LWxvY2tcIiksbi5zY3JvbGxUb3AoYSkuc2Nyb2xsTGVmdChiKSk7ZihcIi5mYW5jeWJveC1vdmVybGF5XCIpLnJlbW92ZSgpLmhpZGUoKTtmLmV4dGVuZCh0aGlzLHtvdmVybGF5Om51bGwsZml4ZWQ6ITF9KX0sdXBkYXRlOmZ1bmN0aW9uKCl7dmFyIGE9XCIxMDAlXCIsYjt0aGlzLm92ZXJsYXkud2lkdGgoYSkuaGVpZ2h0KFwiMTAwJVwiKTtJPyhiPU1hdGgubWF4KEcuZG9jdW1lbnRFbGVtZW50Lm9mZnNldFdpZHRoLEcuYm9keS5vZmZzZXRXaWR0aCksXG5wLndpZHRoKCk+YiYmKGE9cC53aWR0aCgpKSk6cC53aWR0aCgpPm4ud2lkdGgoKSYmKGE9cC53aWR0aCgpKTt0aGlzLm92ZXJsYXkud2lkdGgoYSkuaGVpZ2h0KHAuaGVpZ2h0KCkpfSxvblJlYWR5OmZ1bmN0aW9uKGEsYil7dmFyIGU9dGhpcy5vdmVybGF5O2YoXCIuZmFuY3lib3gtb3ZlcmxheVwiKS5zdG9wKCEwLCEwKTtlfHx0aGlzLmNyZWF0ZShhKTthLmxvY2tlZCYmKHRoaXMuZml4ZWQmJmIuZml4ZWQpJiYoZXx8KHRoaXMubWFyZ2luPXAuaGVpZ2h0KCk+bi5oZWlnaHQoKT9mKFwiaHRtbFwiKS5jc3MoXCJtYXJnaW4tcmlnaHRcIikucmVwbGFjZShcInB4XCIsXCJcIik6ITEpLGIubG9ja2VkPXRoaXMub3ZlcmxheS5hcHBlbmQoYi53cmFwKSxiLmZpeGVkPSExKTshMD09PWEuc2hvd0Vhcmx5JiZ0aGlzLmJlZm9yZVNob3cuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxiZWZvcmVTaG93OmZ1bmN0aW9uKGEsYil7dmFyIGUsYztiLmxvY2tlZCYmKCExIT09dGhpcy5tYXJnaW4mJihmKFwiKlwiKS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm5cImZpeGVkXCI9PT1cbmYodGhpcykuY3NzKFwicG9zaXRpb25cIikmJiFmKHRoaXMpLmhhc0NsYXNzKFwiZmFuY3lib3gtb3ZlcmxheVwiKSYmIWYodGhpcykuaGFzQ2xhc3MoXCJmYW5jeWJveC13cmFwXCIpfSkuYWRkQ2xhc3MoXCJmYW5jeWJveC1tYXJnaW5cIiksdGhpcy5lbC5hZGRDbGFzcyhcImZhbmN5Ym94LW1hcmdpblwiKSksZT1uLnNjcm9sbFRvcCgpLGM9bi5zY3JvbGxMZWZ0KCksdGhpcy5lbC5hZGRDbGFzcyhcImZhbmN5Ym94LWxvY2tcIiksbi5zY3JvbGxUb3AoZSkuc2Nyb2xsTGVmdChjKSk7dGhpcy5vcGVuKGEpfSxvblVwZGF0ZTpmdW5jdGlvbigpe3RoaXMuZml4ZWR8fHRoaXMudXBkYXRlKCl9LGFmdGVyQ2xvc2U6ZnVuY3Rpb24oYSl7dGhpcy5vdmVybGF5JiYhYi5jb21pbmcmJnRoaXMub3ZlcmxheS5mYWRlT3V0KGEuc3BlZWRPdXQsZi5wcm94eSh0aGlzLmNsb3NlLHRoaXMpKX19O2IuaGVscGVycy50aXRsZT17ZGVmYXVsdHM6e3R5cGU6XCJmbG9hdFwiLHBvc2l0aW9uOlwiYm90dG9tXCJ9LGJlZm9yZVNob3c6ZnVuY3Rpb24oYSl7dmFyIGQ9XG5iLmN1cnJlbnQsZT1kLnRpdGxlLGM9YS50eXBlO2YuaXNGdW5jdGlvbihlKSYmKGU9ZS5jYWxsKGQuZWxlbWVudCxkKSk7aWYocShlKSYmXCJcIiE9PWYudHJpbShlKSl7ZD1mKCc8ZGl2IGNsYXNzPVwiZmFuY3lib3gtdGl0bGUgZmFuY3lib3gtdGl0bGUtJytjKyctd3JhcFwiPicrZStcIjwvZGl2PlwiKTtzd2l0Y2goYyl7Y2FzZSBcImluc2lkZVwiOmM9Yi5za2luO2JyZWFrO2Nhc2UgXCJvdXRzaWRlXCI6Yz1iLndyYXA7YnJlYWs7Y2FzZSBcIm92ZXJcIjpjPWIuaW5uZXI7YnJlYWs7ZGVmYXVsdDpjPWIuc2tpbixkLmFwcGVuZFRvKFwiYm9keVwiKSxJJiZkLndpZHRoKGQud2lkdGgoKSksZC53cmFwSW5uZXIoJzxzcGFuIGNsYXNzPVwiY2hpbGRcIj48L3NwYW4+JyksYi5jdXJyZW50Lm1hcmdpblsyXSs9TWF0aC5hYnMobChkLmNzcyhcIm1hcmdpbi1ib3R0b21cIikpKX1kW1widG9wXCI9PT1hLnBvc2l0aW9uP1wicHJlcGVuZFRvXCI6XCJhcHBlbmRUb1wiXShjKX19fTtmLmZuLmZhbmN5Ym94PWZ1bmN0aW9uKGEpe3ZhciBkLFxuZT1mKHRoaXMpLGM9dGhpcy5zZWxlY3Rvcnx8XCJcIixrPWZ1bmN0aW9uKGcpe3ZhciBoPWYodGhpcykuYmx1cigpLGo9ZCxrLGw7IWcuY3RybEtleSYmKCFnLmFsdEtleSYmIWcuc2hpZnRLZXkmJiFnLm1ldGFLZXkpJiYhaC5pcyhcIi5mYW5jeWJveC13cmFwXCIpJiYoaz1hLmdyb3VwQXR0cnx8XCJkYXRhLWZhbmN5Ym94LWdyb3VwXCIsbD1oLmF0dHIoayksbHx8KGs9XCJyZWxcIixsPWguZ2V0KDApW2tdKSxsJiYoXCJcIiE9PWwmJlwibm9mb2xsb3dcIiE9PWwpJiYoaD1jLmxlbmd0aD9mKGMpOmUsaD1oLmZpbHRlcihcIltcIitrKyc9XCInK2wrJ1wiXScpLGo9aC5pbmRleCh0aGlzKSksYS5pbmRleD1qLCExIT09Yi5vcGVuKGgsYSkmJmcucHJldmVudERlZmF1bHQoKSl9O2E9YXx8e307ZD1hLmluZGV4fHwwOyFjfHwhMT09PWEubGl2ZT9lLnVuYmluZChcImNsaWNrLmZiLXN0YXJ0XCIpLmJpbmQoXCJjbGljay5mYi1zdGFydFwiLGspOnAudW5kZWxlZ2F0ZShjLFwiY2xpY2suZmItc3RhcnRcIikuZGVsZWdhdGUoYytcblwiOm5vdCgnLmZhbmN5Ym94LWl0ZW0sIC5mYW5jeWJveC1uYXYnKVwiLFwiY2xpY2suZmItc3RhcnRcIixrKTt0aGlzLmZpbHRlcihcIltkYXRhLWZhbmN5Ym94LXN0YXJ0PTFdXCIpLnRyaWdnZXIoXCJjbGlja1wiKTtyZXR1cm4gdGhpc307cC5yZWFkeShmdW5jdGlvbigpe3ZhciBhLGQ7Zi5zY3JvbGxiYXJXaWR0aD09PXYmJihmLnNjcm9sbGJhcldpZHRoPWZ1bmN0aW9uKCl7dmFyIGE9ZignPGRpdiBzdHlsZT1cIndpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6YXV0b1wiPjxkaXYvPjwvZGl2PicpLmFwcGVuZFRvKFwiYm9keVwiKSxiPWEuY2hpbGRyZW4oKSxiPWIuaW5uZXJXaWR0aCgpLWIuaGVpZ2h0KDk5KS5pbm5lcldpZHRoKCk7YS5yZW1vdmUoKTtyZXR1cm4gYn0pO2lmKGYuc3VwcG9ydC5maXhlZFBvc2l0aW9uPT09dil7YT1mLnN1cHBvcnQ7ZD1mKCc8ZGl2IHN0eWxlPVwicG9zaXRpb246Zml4ZWQ7dG9wOjIwcHg7XCI+PC9kaXY+JykuYXBwZW5kVG8oXCJib2R5XCIpO3ZhciBlPTIwPT09XG5kWzBdLm9mZnNldFRvcHx8MTU9PT1kWzBdLm9mZnNldFRvcDtkLnJlbW92ZSgpO2EuZml4ZWRQb3NpdGlvbj1lfWYuZXh0ZW5kKGIuZGVmYXVsdHMse3Njcm9sbGJhcldpZHRoOmYuc2Nyb2xsYmFyV2lkdGgoKSxmaXhlZDpmLnN1cHBvcnQuZml4ZWRQb3NpdGlvbixwYXJlbnQ6ZihcImJvZHlcIil9KTthPWYocikud2lkdGgoKTtKLmFkZENsYXNzKFwiZmFuY3lib3gtbG9jay10ZXN0XCIpO2Q9ZihyKS53aWR0aCgpO0oucmVtb3ZlQ2xhc3MoXCJmYW5jeWJveC1sb2NrLXRlc3RcIik7ZihcIjxzdHlsZSB0eXBlPSd0ZXh0L2Nzcyc+LmZhbmN5Ym94LW1hcmdpbnttYXJnaW4tcmlnaHQ6XCIrKGQtYSkrXCJweDt9PC9zdHlsZT5cIikuYXBwZW5kVG8oXCJoZWFkXCIpfSl9KSh3aW5kb3csZG9jdW1lbnQsalF1ZXJ5KTsiLCIvKlxuIEFuZ3VsYXJKUyB2MS4zLjAtYmV0YS4xNlxuIChjKSAyMDEwLTIwMTQgR29vZ2xlLCBJbmMuIGh0dHA6Ly9hbmd1bGFyanMub3JnXG4gTGljZW5zZTogTUlUXG4qL1xuKGZ1bmN0aW9uKFAsVyx0KXsndXNlIHN0cmljdCc7ZnVuY3Rpb24gTyhiKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHNbMF0sYyxhPVwiW1wiKyhiP2IrXCI6XCI6XCJcIikrYStcIl0gaHR0cDovL2Vycm9ycy5hbmd1bGFyanMub3JnLzEuMy4wLWJldGEuMTYvXCIrKGI/YitcIi9cIjpcIlwiKSthO2ZvcihjPTE7Yzxhcmd1bWVudHMubGVuZ3RoO2MrKylhPWErKDE9PWM/XCI/XCI6XCImXCIpK1wicFwiKyhjLTEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChcImZ1bmN0aW9uXCI9PXR5cGVvZiBhcmd1bWVudHNbY10/YXJndW1lbnRzW2NdLnRvU3RyaW5nKCkucmVwbGFjZSgvIFxce1tcXHNcXFNdKiQvLFwiXCIpOlwidW5kZWZpbmVkXCI9PXR5cGVvZiBhcmd1bWVudHNbY10/XCJ1bmRlZmluZWRcIjpcInN0cmluZ1wiIT10eXBlb2YgYXJndW1lbnRzW2NdP0pTT04uc3RyaW5naWZ5KGFyZ3VtZW50c1tjXSk6YXJndW1lbnRzW2NdKTtyZXR1cm4gRXJyb3IoYSl9fWZ1bmN0aW9uIGJiKGIpe2lmKG51bGw9PWJ8fExhKGIpKXJldHVybiExO1xudmFyIGE9Yi5sZW5ndGg7cmV0dXJuIDE9PT1iLm5vZGVUeXBlJiZhPyEwOkcoYil8fE0oYil8fDA9PT1hfHxcIm51bWJlclwiPT09dHlwZW9mIGEmJjA8YSYmYS0xIGluIGJ9ZnVuY3Rpb24gcShiLGEsYyl7dmFyIGQsZTtpZihiKWlmKEEoYikpZm9yKGQgaW4gYilcInByb3RvdHlwZVwiPT1kfHwoXCJsZW5ndGhcIj09ZHx8XCJuYW1lXCI9PWR8fGIuaGFzT3duUHJvcGVydHkmJiFiLmhhc093blByb3BlcnR5KGQpKXx8YS5jYWxsKGMsYltkXSxkKTtlbHNlIGlmKE0oYil8fGJiKGIpKWZvcihkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKWEuY2FsbChjLGJbZF0sZCk7ZWxzZSBpZihiLmZvckVhY2gmJmIuZm9yRWFjaCE9PXEpYi5mb3JFYWNoKGEsYyk7ZWxzZSBmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJmEuY2FsbChjLGJbZF0sZCk7cmV0dXJuIGJ9ZnVuY3Rpb24gJGIoYil7dmFyIGE9W10sYztmb3IoYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJmEucHVzaChjKTtyZXR1cm4gYS5zb3J0KCl9XG5mdW5jdGlvbiBoZChiLGEsYyl7Zm9yKHZhciBkPSRiKGIpLGU9MDtlPGQubGVuZ3RoO2UrKylhLmNhbGwoYyxiW2RbZV1dLGRbZV0pO3JldHVybiBkfWZ1bmN0aW9uIGFjKGIpe3JldHVybiBmdW5jdGlvbihhLGMpe2IoYyxhKX19ZnVuY3Rpb24gaWQoKXtyZXR1cm4rK2NifWZ1bmN0aW9uIGJjKGIsYSl7YT9iLiQkaGFzaEtleT1hOmRlbGV0ZSBiLiQkaGFzaEtleX1mdW5jdGlvbiBFKGIpe3ZhciBhPWIuJCRoYXNoS2V5O3EoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2EhPT1iJiZxKGEsZnVuY3Rpb24oYSxjKXtiW2NdPWF9KX0pO2JjKGIsYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gVShiKXtyZXR1cm4gcGFyc2VJbnQoYiwxMCl9ZnVuY3Rpb24gY2MoYixhKXtyZXR1cm4gRShuZXcgKEUoZnVuY3Rpb24oKXt9LHtwcm90b3R5cGU6Yn0pKSxhKX1mdW5jdGlvbiBCKCl7fWZ1bmN0aW9uIEJhKGIpe3JldHVybiBifWZ1bmN0aW9uIGJhKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBifX1mdW5jdGlvbiBGKGIpe3JldHVyblwidW5kZWZpbmVkXCI9PT1cbnR5cGVvZiBifWZ1bmN0aW9uIHYoYil7cmV0dXJuXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBifWZ1bmN0aW9uIFEoYil7cmV0dXJuIG51bGwhPWImJlwib2JqZWN0XCI9PT10eXBlb2YgYn1mdW5jdGlvbiBHKGIpe3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYn1mdW5jdGlvbiBDYShiKXtyZXR1cm5cIm51bWJlclwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gZGEoYil7cmV0dXJuXCJbb2JqZWN0IERhdGVdXCI9PT15YS5jYWxsKGIpfWZ1bmN0aW9uIEEoYil7cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGJ9ZnVuY3Rpb24gZGIoYil7cmV0dXJuXCJbb2JqZWN0IFJlZ0V4cF1cIj09PXlhLmNhbGwoYil9ZnVuY3Rpb24gTGEoYil7cmV0dXJuIGImJmIud2luZG93PT09Yn1mdW5jdGlvbiBqZChiKXtyZXR1cm4hKCFifHwhKGIubm9kZU5hbWV8fGIucHJvcCYmYi5hdHRyJiZiLmZpbmQpKX1mdW5jdGlvbiBrZChiKXt2YXIgYT17fTtiPWIuc3BsaXQoXCIsXCIpO3ZhciBjO2ZvcihjPTA7YzxiLmxlbmd0aDtjKyspYVtiW2NdXT1cbiEwO3JldHVybiBhfWZ1bmN0aW9uIGxkKGIsYSxjKXt2YXIgZD1bXTtxKGIsZnVuY3Rpb24oYixmLGgpe2QucHVzaChhLmNhbGwoYyxiLGYsaCkpfSk7cmV0dXJuIGR9ZnVuY3Rpb24gTWEoYixhKXtpZihiLmluZGV4T2YpcmV0dXJuIGIuaW5kZXhPZihhKTtmb3IodmFyIGM9MDtjPGIubGVuZ3RoO2MrKylpZihhPT09YltjXSlyZXR1cm4gYztyZXR1cm4tMX1mdW5jdGlvbiBEYShiLGEpe3ZhciBjPU1hKGIsYSk7MDw9YyYmYi5zcGxpY2UoYywxKTtyZXR1cm4gYX1mdW5jdGlvbiBFYShiLGEsYyxkKXtpZihMYShiKXx8YiYmYi4kZXZhbEFzeW5jJiZiLiR3YXRjaCl0aHJvdyBOYShcImNwd3NcIik7aWYoYSl7aWYoYj09PWEpdGhyb3cgTmEoXCJjcGlcIik7Yz1jfHxbXTtkPWR8fFtdO2lmKFEoYikpe3ZhciBlPU1hKGMsYik7aWYoLTEhPT1lKXJldHVybiBkW2VdO2MucHVzaChiKTtkLnB1c2goYSl9aWYoTShiKSlmb3IodmFyIGY9YS5sZW5ndGg9MDtmPGIubGVuZ3RoO2YrKyllPUVhKGJbZl0sXG5udWxsLGMsZCksUShiW2ZdKSYmKGMucHVzaChiW2ZdKSxkLnB1c2goZSkpLGEucHVzaChlKTtlbHNle3ZhciBoPWEuJCRoYXNoS2V5O3EoYSxmdW5jdGlvbihiLGMpe2RlbGV0ZSBhW2NdfSk7Zm9yKGYgaW4gYiliLmhhc093blByb3BlcnR5KGYpJiYoZT1FYShiW2ZdLG51bGwsYyxkKSxRKGJbZl0pJiYoYy5wdXNoKGJbZl0pLGQucHVzaChlKSksYVtmXT1lKTtiYyhhLGgpfX1lbHNlIGlmKGE9YilNKGIpP2E9RWEoYixbXSxjLGQpOmRhKGIpP2E9bmV3IERhdGUoYi5nZXRUaW1lKCkpOmRiKGIpP2E9UmVnRXhwKGIuc291cmNlKTpRKGIpJiYoZT1PYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZihiKSksYT1FYShiLGUsYyxkKSk7cmV0dXJuIGF9ZnVuY3Rpb24gamEoYixhKXt2YXIgYz0wO2lmKE0oYikpZm9yKGE9YXx8W107YzxiLmxlbmd0aDtjKyspYVtjXT1iW2NdO2Vsc2UgaWYoUShiKSl7YT1hfHx7fTtmb3IodmFyIGQ9T2JqZWN0LmtleXMoYiksZT1kLmxlbmd0aDtjPFxuZTtjKyspe3ZhciBmPWRbY107aWYoXCIkXCIhPT1mLmNoYXJBdCgwKXx8XCIkXCIhPT1mLmNoYXJBdCgxKSlhW2ZdPWJbZl19fXJldHVybiBhfHxifWZ1bmN0aW9uIHJhKGIsYSl7aWYoYj09PWEpcmV0dXJuITA7aWYobnVsbD09PWJ8fG51bGw9PT1hKXJldHVybiExO2lmKGIhPT1iJiZhIT09YSlyZXR1cm4hMDt2YXIgYz10eXBlb2YgYixkO2lmKGM9PXR5cGVvZiBhJiZcIm9iamVjdFwiPT1jKWlmKE0oYikpe2lmKCFNKGEpKXJldHVybiExO2lmKChjPWIubGVuZ3RoKT09YS5sZW5ndGgpe2ZvcihkPTA7ZDxjO2QrKylpZighcmEoYltkXSxhW2RdKSlyZXR1cm4hMTtyZXR1cm4hMH19ZWxzZXtpZihkYShiKSlyZXR1cm4gZGEoYSkmJmIuZ2V0VGltZSgpPT1hLmdldFRpbWUoKTtpZihkYihiKSYmZGIoYSkpcmV0dXJuIGIudG9TdHJpbmcoKT09YS50b1N0cmluZygpO2lmKGImJmIuJGV2YWxBc3luYyYmYi4kd2F0Y2h8fGEmJmEuJGV2YWxBc3luYyYmYS4kd2F0Y2h8fExhKGIpfHxMYShhKXx8TShhKSlyZXR1cm4hMTtcbmM9e307Zm9yKGQgaW4gYilpZihcIiRcIiE9PWQuY2hhckF0KDApJiYhQShiW2RdKSl7aWYoIXJhKGJbZF0sYVtkXSkpcmV0dXJuITE7Y1tkXT0hMH1mb3IoZCBpbiBhKWlmKCFjLmhhc093blByb3BlcnR5KGQpJiZcIiRcIiE9PWQuY2hhckF0KDApJiZhW2RdIT09dCYmIUEoYVtkXSkpcmV0dXJuITE7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gQ2IoYixhKXt2YXIgYz0yPGFyZ3VtZW50cy5sZW5ndGg/a2EuY2FsbChhcmd1bWVudHMsMik6W107cmV0dXJuIUEoYSl8fGEgaW5zdGFuY2VvZiBSZWdFeHA/YTpjLmxlbmd0aD9mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP2EuYXBwbHkoYixjLmNvbmNhdChrYS5jYWxsKGFyZ3VtZW50cywwKSkpOmEuYXBwbHkoYixjKX06ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9hLmFwcGx5KGIsYXJndW1lbnRzKTphLmNhbGwoYil9fWZ1bmN0aW9uIG1kKGIsYSl7dmFyIGM9YTtcInN0cmluZ1wiPT09dHlwZW9mIGImJlwiJFwiPT09XG5iLmNoYXJBdCgwKSYmXCIkXCI9PT1iLmNoYXJBdCgxKT9jPXQ6TGEoYSk/Yz1cIiRXSU5ET1dcIjphJiZXPT09YT9jPVwiJERPQ1VNRU5UXCI6YSYmKGEuJGV2YWxBc3luYyYmYS4kd2F0Y2gpJiYoYz1cIiRTQ09QRVwiKTtyZXR1cm4gY31mdW5jdGlvbiBzYShiLGEpe3JldHVyblwidW5kZWZpbmVkXCI9PT10eXBlb2YgYj90OkpTT04uc3RyaW5naWZ5KGIsbWQsYT9cIiAgXCI6bnVsbCl9ZnVuY3Rpb24gZGMoYil7cmV0dXJuIEcoYik/SlNPTi5wYXJzZShiKTpifWZ1bmN0aW9uIGdhKGIpe2I9eihiKS5jbG9uZSgpO3RyeXtiLmVtcHR5KCl9Y2F0Y2goYSl7fXZhciBjPXooXCI8ZGl2PlwiKS5hcHBlbmQoYikuaHRtbCgpO3RyeXtyZXR1cm4gMz09PWJbMF0ubm9kZVR5cGU/SihjKTpjLm1hdGNoKC9eKDxbXj5dKz4pLylbMV0ucmVwbGFjZSgvXjwoW1xcd1xcLV0rKS8sZnVuY3Rpb24oYSxiKXtyZXR1cm5cIjxcIitKKGIpfSl9Y2F0Y2goZCl7cmV0dXJuIEooYyl9fWZ1bmN0aW9uIGVjKGIpe3RyeXtyZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KGIpfWNhdGNoKGEpe319XG5mdW5jdGlvbiBmYyhiKXt2YXIgYT17fSxjLGQ7cSgoYnx8XCJcIikuc3BsaXQoXCImXCIpLGZ1bmN0aW9uKGIpe2ImJihjPWIucmVwbGFjZSgvXFwrL2csXCIlMjBcIikuc3BsaXQoXCI9XCIpLGQ9ZWMoY1swXSksdihkKSYmKGI9dihjWzFdKT9lYyhjWzFdKTohMCxEYi5jYWxsKGEsZCk/TShhW2RdKT9hW2RdLnB1c2goYik6YVtkXT1bYVtkXSxiXTphW2RdPWIpKX0pO3JldHVybiBhfWZ1bmN0aW9uIEViKGIpe3ZhciBhPVtdO3EoYixmdW5jdGlvbihiLGQpe00oYik/cShiLGZ1bmN0aW9uKGIpe2EucHVzaCh6YShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIremEoYiwhMCkpKX0pOmEucHVzaCh6YShkLCEwKSsoITA9PT1iP1wiXCI6XCI9XCIremEoYiwhMCkpKX0pO3JldHVybiBhLmxlbmd0aD9hLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gZWIoYil7cmV0dXJuIHphKGIsITApLnJlcGxhY2UoLyUyNi9naSxcIiZcIikucmVwbGFjZSgvJTNEL2dpLFwiPVwiKS5yZXBsYWNlKC8lMkIvZ2ksXCIrXCIpfWZ1bmN0aW9uIHphKGIsYSl7cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChiKS5yZXBsYWNlKC8lNDAvZ2ksXG5cIkBcIikucmVwbGFjZSgvJTNBL2dpLFwiOlwiKS5yZXBsYWNlKC8lMjQvZyxcIiRcIikucmVwbGFjZSgvJTJDL2dpLFwiLFwiKS5yZXBsYWNlKC8lMjAvZyxhP1wiJTIwXCI6XCIrXCIpfWZ1bmN0aW9uIG5kKGIsYSl7dmFyIGMsZCxlPWZiLmxlbmd0aDtiPXooYik7Zm9yKGQ9MDtkPGU7KytkKWlmKGM9ZmJbZF0rYSxHKGM9Yi5hdHRyKGMpKSlyZXR1cm4gYztyZXR1cm4gbnVsbH1mdW5jdGlvbiBvZChiLGEpe3ZhciBjLGQsZT17fTtxKGZiLGZ1bmN0aW9uKGEpe2ErPVwiYXBwXCI7IWMmJihiLmhhc0F0dHJpYnV0ZSYmYi5oYXNBdHRyaWJ1dGUoYSkpJiYoYz1iLGQ9Yi5nZXRBdHRyaWJ1dGUoYSkpfSk7cShmYixmdW5jdGlvbihhKXthKz1cImFwcFwiO3ZhciBlOyFjJiYoZT1iLnF1ZXJ5U2VsZWN0b3IoXCJbXCIrYS5yZXBsYWNlKFwiOlwiLFwiXFxcXDpcIikrXCJdXCIpKSYmKGM9ZSxkPWUuZ2V0QXR0cmlidXRlKGEpKX0pO2MmJihlLnN0cmljdERpPW51bGwhPT1uZChjLFwic3RyaWN0LWRpXCIpLGEoYyxkP1tkXTpbXSxlKSl9XG5mdW5jdGlvbiBnYyhiLGEsYyl7UShjKXx8KGM9e30pO2M9RSh7c3RyaWN0RGk6ITF9LGMpO3ZhciBkPWZ1bmN0aW9uKCl7Yj16KGIpO2lmKGIuaW5qZWN0b3IoKSl7dmFyIGQ9YlswXT09PVc/XCJkb2N1bWVudFwiOmdhKGIpO3Rocm93IE5hKFwiYnRzdHJwZFwiLGQpO31hPWF8fFtdO2EudW5zaGlmdChbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe2EudmFsdWUoXCIkcm9vdEVsZW1lbnRcIixiKX1dKTthLnVuc2hpZnQoXCJuZ1wiKTtkPUZiKGEsYy5zdHJpY3REaSk7ZC5pbnZva2UoW1wiJHJvb3RTY29wZVwiLFwiJHJvb3RFbGVtZW50XCIsXCIkY29tcGlsZVwiLFwiJGluamVjdG9yXCIsZnVuY3Rpb24oYSxiLGMsZCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtiLmRhdGEoXCIkaW5qZWN0b3JcIixkKTtjKGIpKGEpfSl9XSk7cmV0dXJuIGR9LGU9L15OR19ERUZFUl9CT09UU1RSQVAhLztpZihQJiYhZS50ZXN0KFAubmFtZSkpcmV0dXJuIGQoKTtQLm5hbWU9UC5uYW1lLnJlcGxhY2UoZSxcIlwiKTtPYS5yZXN1bWVCb290c3RyYXA9XG5mdW5jdGlvbihiKXtxKGIsZnVuY3Rpb24oYil7YS5wdXNoKGIpfSk7ZCgpfX1mdW5jdGlvbiBnYihiLGEpe2E9YXx8XCJfXCI7cmV0dXJuIGIucmVwbGFjZShwZCxmdW5jdGlvbihiLGQpe3JldHVybihkP2E6XCJcIikrYi50b0xvd2VyQ2FzZSgpfSl9ZnVuY3Rpb24gcWQoKXt2YXIgYjsodGE9UC5qUXVlcnkpJiZ0YS5mbi5vbj8oej10YSxFKHRhLmZuLHtzY29wZTpGYS5zY29wZSxpc29sYXRlU2NvcGU6RmEuaXNvbGF0ZVNjb3BlLGNvbnRyb2xsZXI6RmEuY29udHJvbGxlcixpbmplY3RvcjpGYS5pbmplY3Rvcixpbmhlcml0ZWREYXRhOkZhLmluaGVyaXRlZERhdGF9KSxiPXRhLmNsZWFuRGF0YSxiPWIuJCRvcmlnaW5hbHx8Yix0YS5jbGVhbkRhdGE9ZnVuY3Rpb24oYSl7Zm9yKHZhciBjPTAsZDtudWxsIT0oZD1hW2NdKTtjKyspdGEoZCkudHJpZ2dlckhhbmRsZXIoXCIkZGVzdHJveVwiKTtiKGEpfSx0YS5jbGVhbkRhdGEuJCRvcmlnaW5hbD1iKTp6PVY7T2EuZWxlbWVudD16fWZ1bmN0aW9uIEdiKGIsXG5hLGMpe2lmKCFiKXRocm93IE5hKFwiYXJlcVwiLGF8fFwiP1wiLGN8fFwicmVxdWlyZWRcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gUGEoYixhLGMpe2MmJk0oYikmJihiPWJbYi5sZW5ndGgtMV0pO0diKEEoYiksYSxcIm5vdCBhIGZ1bmN0aW9uLCBnb3QgXCIrKGImJlwib2JqZWN0XCI9PT10eXBlb2YgYj9iLmNvbnN0cnVjdG9yLm5hbWV8fFwiT2JqZWN0XCI6dHlwZW9mIGIpKTtyZXR1cm4gYn1mdW5jdGlvbiBBYShiLGEpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWIpdGhyb3cgTmEoXCJiYWRuYW1lXCIsYSk7fWZ1bmN0aW9uIGhjKGIsYSxjKXtpZighYSlyZXR1cm4gYjthPWEuc3BsaXQoXCIuXCIpO2Zvcih2YXIgZCxlPWIsZj1hLmxlbmd0aCxoPTA7aDxmO2grKylkPWFbaF0sYiYmKGI9KGU9YilbZF0pO3JldHVybiFjJiZBKGIpP0NiKGUsYik6Yn1mdW5jdGlvbiBoYihiKXt2YXIgYT1iWzBdO2I9YltiLmxlbmd0aC0xXTtpZihhPT09YilyZXR1cm4geihhKTt2YXIgYz1bYV07ZG97YT1hLm5leHRTaWJsaW5nO2lmKCFhKWJyZWFrO1xuYy5wdXNoKGEpfXdoaWxlKGEhPT1iKTtyZXR1cm4geihjKX1mdW5jdGlvbiByZChiKXt2YXIgYT1PKFwiJGluamVjdG9yXCIpLGM9TyhcIm5nXCIpO2I9Yi5hbmd1bGFyfHwoYi5hbmd1bGFyPXt9KTtiLiQkbWluRXJyPWIuJCRtaW5FcnJ8fE87cmV0dXJuIGIubW9kdWxlfHwoYi5tb2R1bGU9ZnVuY3Rpb24oKXt2YXIgYj17fTtyZXR1cm4gZnVuY3Rpb24oZSxmLGgpe2lmKFwiaGFzT3duUHJvcGVydHlcIj09PWUpdGhyb3cgYyhcImJhZG5hbWVcIixcIm1vZHVsZVwiKTtmJiZiLmhhc093blByb3BlcnR5KGUpJiYoYltlXT1udWxsKTtyZXR1cm4gYltlXXx8KGJbZV09ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsZCxlLGYpe2Z8fChmPWMpO3JldHVybiBmdW5jdGlvbigpe2ZbZXx8XCJwdXNoXCJdKFthLGQsYXJndW1lbnRzXSk7cmV0dXJuIGt9fWlmKCFmKXRocm93IGEoXCJub21vZFwiLGUpO3ZhciBjPVtdLGQ9W10sbT1bXSxwPWIoXCIkaW5qZWN0b3JcIixcImludm9rZVwiLFwicHVzaFwiLGQpLGs9e19pbnZva2VRdWV1ZTpjLFxuX2NvbmZpZ0Jsb2NrczpkLF9ydW5CbG9ja3M6bSxyZXF1aXJlczpmLG5hbWU6ZSxwcm92aWRlcjpiKFwiJHByb3ZpZGVcIixcInByb3ZpZGVyXCIpLGZhY3Rvcnk6YihcIiRwcm92aWRlXCIsXCJmYWN0b3J5XCIpLHNlcnZpY2U6YihcIiRwcm92aWRlXCIsXCJzZXJ2aWNlXCIpLHZhbHVlOmIoXCIkcHJvdmlkZVwiLFwidmFsdWVcIiksY29uc3RhbnQ6YihcIiRwcm92aWRlXCIsXCJjb25zdGFudFwiLFwidW5zaGlmdFwiKSxhbmltYXRpb246YihcIiRhbmltYXRlUHJvdmlkZXJcIixcInJlZ2lzdGVyXCIpLGZpbHRlcjpiKFwiJGZpbHRlclByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxjb250cm9sbGVyOmIoXCIkY29udHJvbGxlclByb3ZpZGVyXCIsXCJyZWdpc3RlclwiKSxkaXJlY3RpdmU6YihcIiRjb21waWxlUHJvdmlkZXJcIixcImRpcmVjdGl2ZVwiKSxjb25maWc6cCxydW46ZnVuY3Rpb24oYSl7bS5wdXNoKGEpO3JldHVybiB0aGlzfX07aCYmcChoKTtyZXR1cm4ga30oKSl9fSgpKX1mdW5jdGlvbiBzZChiKXtFKGIse2Jvb3RzdHJhcDpnYyxjb3B5OkVhLFxuZXh0ZW5kOkUsZXF1YWxzOnJhLGVsZW1lbnQ6eixmb3JFYWNoOnEsaW5qZWN0b3I6RmIsbm9vcDpCLGJpbmQ6Q2IsdG9Kc29uOnNhLGZyb21Kc29uOmRjLGlkZW50aXR5OkJhLGlzVW5kZWZpbmVkOkYsaXNEZWZpbmVkOnYsaXNTdHJpbmc6Ryxpc0Z1bmN0aW9uOkEsaXNPYmplY3Q6USxpc051bWJlcjpDYSxpc0VsZW1lbnQ6amQsaXNBcnJheTpNLHZlcnNpb246dGQsaXNEYXRlOmRhLGxvd2VyY2FzZTpKLHVwcGVyY2FzZTppYixjYWxsYmFja3M6e2NvdW50ZXI6MH0sJCRtaW5FcnI6TywkJGNzcDpRYX0pO1JhPXJkKFApO3RyeXtSYShcIm5nTG9jYWxlXCIpfWNhdGNoKGEpe1JhKFwibmdMb2NhbGVcIixbXSkucHJvdmlkZXIoXCIkbG9jYWxlXCIsdWQpfVJhKFwibmdcIixbXCJuZ0xvY2FsZVwiXSxbXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe2EucHJvdmlkZXIoeyQkc2FuaXRpemVVcmk6dmR9KTthLnByb3ZpZGVyKFwiJGNvbXBpbGVcIixpYykuZGlyZWN0aXZlKHthOndkLGlucHV0OmpjLHRleHRhcmVhOmpjLFxuZm9ybTp4ZCxzY3JpcHQ6eWQsc2VsZWN0OnpkLHN0eWxlOkFkLG9wdGlvbjpCZCxuZ0JpbmQ6Q2QsbmdCaW5kSHRtbDpEZCxuZ0JpbmRUZW1wbGF0ZTpFZCxuZ0NsYXNzOkZkLG5nQ2xhc3NFdmVuOkdkLG5nQ2xhc3NPZGQ6SGQsbmdDbG9hazpJZCxuZ0NvbnRyb2xsZXI6SmQsbmdGb3JtOktkLG5nSGlkZTpMZCxuZ0lmOk1kLG5nSW5jbHVkZTpOZCxuZ0luaXQ6T2QsbmdOb25CaW5kYWJsZTpQZCxuZ1BsdXJhbGl6ZTpRZCxuZ1JlcGVhdDpSZCxuZ1Nob3c6U2QsbmdTdHlsZTpUZCxuZ1N3aXRjaDpVZCxuZ1N3aXRjaFdoZW46VmQsbmdTd2l0Y2hEZWZhdWx0OldkLG5nT3B0aW9uczpYZCxuZ1RyYW5zY2x1ZGU6WWQsbmdNb2RlbDpaZCxuZ0xpc3Q6JGQsbmdDaGFuZ2U6YWUscGF0dGVybjprYyxuZ1BhdHRlcm46a2MscmVxdWlyZWQ6bGMsbmdSZXF1aXJlZDpsYyxtaW5sZW5ndGg6bWMsbmdNaW5sZW5ndGg6bWMsbWF4bGVuZ3RoOm5jLG5nTWF4bGVuZ3RoOm5jLG5nVmFsdWU6YmUsbmdNb2RlbE9wdGlvbnM6Y2V9KS5kaXJlY3RpdmUoe25nSW5jbHVkZTpkZX0pLmRpcmVjdGl2ZShqYikuZGlyZWN0aXZlKG9jKTtcbmEucHJvdmlkZXIoeyRhbmNob3JTY3JvbGw6ZWUsJGFuaW1hdGU6ZmUsJGJyb3dzZXI6Z2UsJGNhY2hlRmFjdG9yeTpoZSwkY29udHJvbGxlcjppZSwkZG9jdW1lbnQ6amUsJGV4Y2VwdGlvbkhhbmRsZXI6a2UsJGZpbHRlcjpwYywkaW50ZXJwb2xhdGU6bGUsJGludGVydmFsOm1lLCRodHRwOm5lLCRodHRwQmFja2VuZDpvZSwkbG9jYXRpb246cGUsJGxvZzpxZSwkcGFyc2U6cmUsJHJvb3RTY29wZTpzZSwkcTp0ZSwkJHE6dWUsJHNjZTp2ZSwkc2NlRGVsZWdhdGU6d2UsJHNuaWZmZXI6eGUsJHRlbXBsYXRlQ2FjaGU6eWUsJHRpbWVvdXQ6emUsJHdpbmRvdzpBZSwkJHJBRjpCZSwkJGFzeW5jQ2FsbGJhY2s6Q2V9KX1dKX1mdW5jdGlvbiBTYShiKXtyZXR1cm4gYi5yZXBsYWNlKERlLGZ1bmN0aW9uKGEsYixkLGUpe3JldHVybiBlP2QudG9VcHBlckNhc2UoKTpkfSkucmVwbGFjZShFZSxcIk1veiQxXCIpfWZ1bmN0aW9uIEZlKGIsYSl7dmFyIGMsZCxlPWEuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuZj1bXTtpZihIYi50ZXN0KGIpKXtjPWN8fGUuYXBwZW5kQ2hpbGQoYS5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtkPShHZS5leGVjKGIpfHxbXCJcIixcIlwiXSlbMV0udG9Mb3dlckNhc2UoKTtkPWVhW2RdfHxlYS5fZGVmYXVsdDtjLmlubmVySFRNTD1kWzFdK2IucmVwbGFjZShIZSxcIjwkMT48LyQyPlwiKStkWzJdO2ZvcihkPWRbMF07ZC0tOyljPWMubGFzdENoaWxkO2Y9Zi5jb25jYXQoa2EuY2FsbChjLmNoaWxkTm9kZXMsdm9pZCAwKSk7Yz1lLmZpcnN0Q2hpbGQ7Yy50ZXh0Q29udGVudD1cIlwifWVsc2UgZi5wdXNoKGEuY3JlYXRlVGV4dE5vZGUoYikpO2UudGV4dENvbnRlbnQ9XCJcIjtlLmlubmVySFRNTD1cIlwiO3EoZixmdW5jdGlvbihhKXtlLmFwcGVuZENoaWxkKGEpfSk7cmV0dXJuIGV9ZnVuY3Rpb24gVihiKXtpZihiIGluc3RhbmNlb2YgVilyZXR1cm4gYjtHKGIpJiYoYj1aKGIpKTtpZighKHRoaXMgaW5zdGFuY2VvZiBWKSl7aWYoRyhiKSYmXCI8XCIhPWIuY2hhckF0KDApKXRocm93IEliKFwibm9zZWxcIik7XG5yZXR1cm4gbmV3IFYoYil9aWYoRyhiKSl7dmFyIGE7YT1XO3ZhciBjO2I9KGM9SWUuZXhlYyhiKSk/W2EuY3JlYXRlRWxlbWVudChjWzFdKV06KGM9RmUoYixhKSk/Yy5jaGlsZE5vZGVzOltdfXFjKHRoaXMsYil9ZnVuY3Rpb24gSmIoYil7cmV0dXJuIGIuY2xvbmVOb2RlKCEwKX1mdW5jdGlvbiBrYihiLGEpe2F8fGxiKGIpO2lmKGIuY2hpbGROb2RlcyYmYi5jaGlsZE5vZGVzLmxlbmd0aClmb3IodmFyIGM9Yi5nZXRFbGVtZW50c0J5VGFnTmFtZT9iLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKTpiLnF1ZXJ5U2VsZWN0b3JBbGw/Yi5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKTpbXSxkPTAsZT1jLmxlbmd0aDtkPGU7ZCsrKWxiKGNbZF0pfWZ1bmN0aW9uIHJjKGIsYSxjLGQpe2lmKHYoZCkpdGhyb3cgSWIoXCJvZmZhcmdzXCIpO3ZhciBlPWxhKGIsXCJldmVudHNcIik7bGEoYixcImhhbmRsZVwiKSYmKEYoYSk/cShlLGZ1bmN0aW9uKGEsYyl7VGEoYixjLGEpO2RlbGV0ZSBlW2NdfSk6cShhLnNwbGl0KFwiIFwiKSxcbmZ1bmN0aW9uKGEpe0YoYyk/KFRhKGIsYSxlW2FdKSxkZWxldGUgZVthXSk6RGEoZVthXXx8W10sYyl9KSl9ZnVuY3Rpb24gbGIoYixhKXt2YXIgYz1iLm5nMzM5LGQ9VWFbY107ZCYmKGE/ZGVsZXRlIFVhW2NdLmRhdGFbYV06KGQuaGFuZGxlJiYoZC5ldmVudHMuJGRlc3Ryb3kmJmQuaGFuZGxlKHt9LFwiJGRlc3Ryb3lcIikscmMoYikpLGRlbGV0ZSBVYVtjXSxiLm5nMzM5PXQpKX1mdW5jdGlvbiBsYShiLGEsYyl7dmFyIGQ9Yi5uZzMzOSxkPVVhW2R8fC0xXTtpZih2KGMpKWR8fChiLm5nMzM5PWQ9KytKZSxkPVVhW2RdPXt9KSxkW2FdPWM7ZWxzZSByZXR1cm4gZCYmZFthXX1mdW5jdGlvbiBLYihiLGEsYyl7aWYoIWIubm9kZVR5cGV8fDE9PT1iLm5vZGVUeXBlfHw5PT09Yi5ub2RlVHlwZSl7dmFyIGQ9bGEoYixcImRhdGFcIiksZT12KGMpLGY9IWUmJnYoYSksaD1mJiYhUShhKTtkfHxofHxsYShiLFwiZGF0YVwiLGQ9e30pO2lmKGUpZFthXT1jO2Vsc2UgaWYoZil7aWYoaClyZXR1cm4gZCYmXG5kW2FdO0UoZCxhKX1lbHNlIHJldHVybiBkfX1mdW5jdGlvbiBMYihiLGEpe3JldHVybiBiLmdldEF0dHJpYnV0ZT8tMTwoXCIgXCIrKGIuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCIpK1wiIFwiKS5yZXBsYWNlKC9bXFxuXFx0XS9nLFwiIFwiKS5pbmRleE9mKFwiIFwiK2ErXCIgXCIpOiExfWZ1bmN0aW9uIG1iKGIsYSl7YSYmYi5zZXRBdHRyaWJ1dGUmJnEoYS5zcGxpdChcIiBcIiksZnVuY3Rpb24oYSl7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFooKFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIikucmVwbGFjZShcIiBcIitaKGEpK1wiIFwiLFwiIFwiKSkpfSl9ZnVuY3Rpb24gbmIoYixhKXtpZihhJiZiLnNldEF0dHJpYnV0ZSl7dmFyIGM9KFwiIFwiKyhiLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKStcIiBcIikucmVwbGFjZSgvW1xcblxcdF0vZyxcIiBcIik7cShhLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXthPVooYSk7LTE9PT1jLmluZGV4T2YoXCIgXCIrYStcIiBcIikmJlxuKGMrPWErXCIgXCIpfSk7Yi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFooYykpfX1mdW5jdGlvbiBxYyhiLGEpe2lmKGEpaWYoYS5ub2RlVHlwZSliW2IubGVuZ3RoKytdPWE7ZWxzZXt2YXIgYz1hLmxlbmd0aDtcIm51bWJlclwiPT09dHlwZW9mIGMmJmEud2luZG93IT09YT9jJiYoYS5pdGVtJiYoYT1rYS5jYWxsKGEpKSxzYy5hcHBseShiLGEpKTpiW2IubGVuZ3RoKytdPWF9fWZ1bmN0aW9uIHRjKGIsYSl7cmV0dXJuIG9iKGIsXCIkXCIrKGF8fFwibmdDb250cm9sbGVyXCIpK1wiQ29udHJvbGxlclwiKX1mdW5jdGlvbiBvYihiLGEsYyl7OT09Yi5ub2RlVHlwZSYmKGI9Yi5kb2N1bWVudEVsZW1lbnQpO2ZvcihhPU0oYSk/YTpbYV07Yjspe2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZDxlO2QrKylpZigoYz16LmRhdGEoYixhW2RdKSkhPT10KXJldHVybiBjO2I9Yi5wYXJlbnROb2RlfHwxMT09PWIubm9kZVR5cGUmJmIuaG9zdH19ZnVuY3Rpb24gdWMoYil7Zm9yKGtiKGIsITApO2IuZmlyc3RDaGlsZDspYi5yZW1vdmVDaGlsZChiLmZpcnN0Q2hpbGQpfVxuZnVuY3Rpb24gdmMoYixhKXt2YXIgYz1wYlthLnRvTG93ZXJDYXNlKCldO3JldHVybiBjJiZ3Y1ttYShiKV0mJmN9ZnVuY3Rpb24gS2UoYixhKXt2YXIgYz1iLm5vZGVOYW1lO3JldHVybihcIklOUFVUXCI9PT1jfHxcIlRFWFRBUkVBXCI9PT1jKSYmeGNbYV19ZnVuY3Rpb24gTGUoYixhKXt2YXIgYz1mdW5jdGlvbihjLGUpe2MucHJldmVudERlZmF1bHR8fChjLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Yy5yZXR1cm5WYWx1ZT0hMX0pO2Muc3RvcFByb3BhZ2F0aW9ufHwoYy5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXtjLmNhbmNlbEJ1YmJsZT0hMH0pO2MudGFyZ2V0fHwoYy50YXJnZXQ9Yy5zcmNFbGVtZW50fHxXKTtpZihGKGMuZGVmYXVsdFByZXZlbnRlZCkpe3ZhciBmPWMucHJldmVudERlZmF1bHQ7Yy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2MuZGVmYXVsdFByZXZlbnRlZD0hMDtmLmNhbGwoYyl9O2MuZGVmYXVsdFByZXZlbnRlZD0hMX1jLmlzRGVmYXVsdFByZXZlbnRlZD1cbmZ1bmN0aW9uKCl7cmV0dXJuIGMuZGVmYXVsdFByZXZlbnRlZHx8ITE9PT1jLnJldHVyblZhbHVlfTt2YXIgaD1qYShhW2V8fGMudHlwZV18fFtdKTtxKGgsZnVuY3Rpb24oYSl7YS5jYWxsKGIsYyl9KTs4Pj1UPyhjLnByZXZlbnREZWZhdWx0PW51bGwsYy5zdG9wUHJvcGFnYXRpb249bnVsbCxjLmlzRGVmYXVsdFByZXZlbnRlZD1udWxsKTooZGVsZXRlIGMucHJldmVudERlZmF1bHQsZGVsZXRlIGMuc3RvcFByb3BhZ2F0aW9uLGRlbGV0ZSBjLmlzRGVmYXVsdFByZXZlbnRlZCl9O2MuZWxlbT1iO3JldHVybiBjfWZ1bmN0aW9uIEdhKGIsYSl7dmFyIGM9dHlwZW9mIGIsZDtcImZ1bmN0aW9uXCI9PWN8fFwib2JqZWN0XCI9PWMmJm51bGwhPT1iP1wiZnVuY3Rpb25cIj09dHlwZW9mKGQ9Yi4kJGhhc2hLZXkpP2Q9Yi4kJGhhc2hLZXkoKTpkPT09dCYmKGQ9Yi4kJGhhc2hLZXk9KGF8fGlkKSgpKTpkPWI7cmV0dXJuIGMrXCI6XCIrZH1mdW5jdGlvbiBWYShiLGEpe2lmKGEpe3ZhciBjPTA7dGhpcy5uZXh0VWlkPVxuZnVuY3Rpb24oKXtyZXR1cm4rK2N9fXEoYix0aGlzLnB1dCx0aGlzKX1mdW5jdGlvbiBNZShiKXtyZXR1cm4oYj1iLnRvU3RyaW5nKCkucmVwbGFjZSh5YyxcIlwiKS5tYXRjaCh6YykpP1wiZnVuY3Rpb24oXCIrKGJbMV18fFwiXCIpLnJlcGxhY2UoL1tcXHNcXHJcXG5dKy8sXCIgXCIpK1wiKVwiOlwiZm5cIn1mdW5jdGlvbiBNYihiLGEsYyl7dmFyIGQ7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGIpe2lmKCEoZD1iLiRpbmplY3QpKXtkPVtdO2lmKGIubGVuZ3RoKXtpZihhKXRocm93IEcoYykmJmN8fChjPWIubmFtZXx8TWUoYikpLEhhKFwic3RyaWN0ZGlcIixjKTthPWIudG9TdHJpbmcoKS5yZXBsYWNlKHljLFwiXCIpO2E9YS5tYXRjaCh6Yyk7cShhWzFdLnNwbGl0KE5lKSxmdW5jdGlvbihhKXthLnJlcGxhY2UoT2UsZnVuY3Rpb24oYSxiLGMpe2QucHVzaChjKX0pfSl9Yi4kaW5qZWN0PWR9fWVsc2UgTShiKT8oYT1iLmxlbmd0aC0xLFBhKGJbYV0sXCJmblwiKSxkPWIuc2xpY2UoMCxhKSk6UGEoYixcImZuXCIsITApO1xucmV0dXJuIGR9ZnVuY3Rpb24gRmIoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe2lmKFEoYikpcShiLGFjKGEpKTtlbHNlIHJldHVybiBhKGIsYyl9fWZ1bmN0aW9uIGQoYSxiKXtBYShhLFwic2VydmljZVwiKTtpZihBKGIpfHxNKGIpKWI9ay5pbnN0YW50aWF0ZShiKTtpZighYi4kZ2V0KXRocm93IEhhKFwicGdldFwiLGEpO3JldHVybiBwW2Erbl09Yn1mdW5jdGlvbiBlKGEsYil7cmV0dXJuIGQoYSx7JGdldDpifSl9ZnVuY3Rpb24gZihhKXt2YXIgYj1bXSxjO3EoYSxmdW5jdGlvbihhKXtmdW5jdGlvbiBkKGEpe3ZhciBiLGM7Yj0wO2ZvcihjPWEubGVuZ3RoO2I8YztiKyspe3ZhciBlPWFbYl0sZj1rLmdldChlWzBdKTtmW2VbMV1dLmFwcGx5KGYsZVsyXSl9fWlmKCFtLmdldChhKSl7bS5wdXQoYSwhMCk7dHJ5e0coYSk/KGM9UmEoYSksYj1iLmNvbmNhdChmKGMucmVxdWlyZXMpKS5jb25jYXQoYy5fcnVuQmxvY2tzKSxkKGMuX2ludm9rZVF1ZXVlKSxkKGMuX2NvbmZpZ0Jsb2NrcykpOlxuQShhKT9iLnB1c2goay5pbnZva2UoYSkpOk0oYSk/Yi5wdXNoKGsuaW52b2tlKGEpKTpQYShhLFwibW9kdWxlXCIpfWNhdGNoKGUpe3Rocm93IE0oYSkmJihhPWFbYS5sZW5ndGgtMV0pLGUubWVzc2FnZSYmKGUuc3RhY2smJi0xPT1lLnN0YWNrLmluZGV4T2YoZS5tZXNzYWdlKSkmJihlPWUubWVzc2FnZStcIlxcblwiK2Uuc3RhY2spLEhhKFwibW9kdWxlcnJcIixhLGUuc3RhY2t8fGUubWVzc2FnZXx8ZSk7fX19KTtyZXR1cm4gYn1mdW5jdGlvbiBoKGIsYyl7ZnVuY3Rpb24gZChhKXtpZihiLmhhc093blByb3BlcnR5KGEpKXtpZihiW2FdPT09Zyl0aHJvdyBIYShcImNkZXBcIixhK1wiIDwtIFwiK2wuam9pbihcIiA8LSBcIikpO3JldHVybiBiW2FdfXRyeXtyZXR1cm4gbC51bnNoaWZ0KGEpLGJbYV09ZyxiW2FdPWMoYSl9Y2F0Y2goZSl7dGhyb3cgYlthXT09PWcmJmRlbGV0ZSBiW2FdLGU7fWZpbmFsbHl7bC5zaGlmdCgpfX1mdW5jdGlvbiBlKGIsYyxmLGcpe1wic3RyaW5nXCI9PT10eXBlb2YgZiYmKGc9XG5mLGY9bnVsbCk7dmFyIGg9W107Zz1NYihiLGEsZyk7dmFyIG4sbCxrO2w9MDtmb3Iobj1nLmxlbmd0aDtsPG47bCsrKXtrPWdbbF07aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBrKXRocm93IEhhKFwiaXRrblwiLGspO2gucHVzaChmJiZmLmhhc093blByb3BlcnR5KGspP2Zba106ZChrKSl9TShiKSYmKGI9YltuXSk7cmV0dXJuIGIuYXBwbHkoYyxoKX1yZXR1cm57aW52b2tlOmUsaW5zdGFudGlhdGU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWZ1bmN0aW9uKCl7fTtkLnByb3RvdHlwZT0oTShhKT9hW2EubGVuZ3RoLTFdOmEpLnByb3RvdHlwZTtkPW5ldyBkO2E9ZShhLGQsYixjKTtyZXR1cm4gUShhKXx8QShhKT9hOmR9LGdldDpkLGFubm90YXRlOk1iLGhhczpmdW5jdGlvbihhKXtyZXR1cm4gcC5oYXNPd25Qcm9wZXJ0eShhK24pfHxiLmhhc093blByb3BlcnR5KGEpfX19YT0hMD09PWE7dmFyIGc9e30sbj1cIlByb3ZpZGVyXCIsbD1bXSxtPW5ldyBWYShbXSwhMCkscD17JHByb3ZpZGU6e3Byb3ZpZGVyOmMoZCksXG5mYWN0b3J5OmMoZSksc2VydmljZTpjKGZ1bmN0aW9uKGEsYil7cmV0dXJuIGUoYSxbXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhKXtyZXR1cm4gYS5pbnN0YW50aWF0ZShiKX1dKX0pLHZhbHVlOmMoZnVuY3Rpb24oYSxiKXtyZXR1cm4gZShhLGJhKGIpKX0pLGNvbnN0YW50OmMoZnVuY3Rpb24oYSxiKXtBYShhLFwiY29uc3RhbnRcIik7cFthXT1iO3NbYV09Yn0pLGRlY29yYXRvcjpmdW5jdGlvbihhLGIpe3ZhciBjPWsuZ2V0KGErbiksZD1jLiRnZXQ7Yy4kZ2V0PWZ1bmN0aW9uKCl7dmFyIGE9ci5pbnZva2UoZCxjKTtyZXR1cm4gci5pbnZva2UoYixudWxsLHskZGVsZWdhdGU6YX0pfX19fSxrPXAuJGluamVjdG9yPWgocCxmdW5jdGlvbigpe3Rocm93IEhhKFwidW5wclwiLGwuam9pbihcIiA8LSBcIikpO30sYSkscz17fSxyPXMuJGluamVjdG9yPWgocyxmdW5jdGlvbihhKXt2YXIgYj1rLmdldChhK24pO3JldHVybiByLmludm9rZShiLiRnZXQsYix0LGEpfSxhKTtxKGYoYiksZnVuY3Rpb24oYSl7ci5pbnZva2UoYXx8XG5CKX0pO3JldHVybiByfWZ1bmN0aW9uIGVlKCl7dmFyIGI9ITA7dGhpcy5kaXNhYmxlQXV0b1Njcm9sbGluZz1mdW5jdGlvbigpe2I9ITF9O3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9jYXRpb25cIixcIiRyb290U2NvcGVcIixmdW5jdGlvbihhLGMsZCl7ZnVuY3Rpb24gZShhKXt2YXIgYj1udWxsO3EoYSxmdW5jdGlvbihhKXtifHxcImFcIiE9PW1hKGEpfHwoYj1hKX0pO3JldHVybiBifWZ1bmN0aW9uIGYoKXt2YXIgYj1jLmhhc2goKSxkO2I/KGQ9aC5nZXRFbGVtZW50QnlJZChiKSk/ZC5zY3JvbGxJbnRvVmlldygpOihkPWUoaC5nZXRFbGVtZW50c0J5TmFtZShiKSkpP2Quc2Nyb2xsSW50b1ZpZXcoKTpcInRvcFwiPT09YiYmYS5zY3JvbGxUbygwLDApOmEuc2Nyb2xsVG8oMCwwKX12YXIgaD1hLmRvY3VtZW50O2ImJmQuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGMuaGFzaCgpfSxmdW5jdGlvbigpe2QuJGV2YWxBc3luYyhmKX0pO3JldHVybiBmfV19ZnVuY3Rpb24gQ2UoKXt0aGlzLiRnZXQ9XG5bXCIkJHJBRlwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihiLGEpe3JldHVybiBiLnN1cHBvcnRlZD9mdW5jdGlvbihhKXtyZXR1cm4gYihhKX06ZnVuY3Rpb24oYil7cmV0dXJuIGEoYiwwLCExKX19XX1mdW5jdGlvbiBQZShiLGEsYyxkKXtmdW5jdGlvbiBlKGEpe3RyeXthLmFwcGx5KG51bGwsa2EuY2FsbChhcmd1bWVudHMsMSkpfWZpbmFsbHl7aWYoci0tLDA9PT1yKWZvcig7TC5sZW5ndGg7KXRyeXtMLnBvcCgpKCl9Y2F0Y2goYil7Yy5lcnJvcihiKX19fWZ1bmN0aW9uIGYoYSxiKXsoZnVuY3Rpb24gcWIoKXtxKHUsZnVuY3Rpb24oYSl7YSgpfSk7Sz1iKHFiLGEpfSkoKX1mdW5jdGlvbiBoKCl7eT1udWxsO3chPWcudXJsKCkmJih3PWcudXJsKCkscShZLGZ1bmN0aW9uKGEpe2EoZy51cmwoKSl9KSl9dmFyIGc9dGhpcyxuPWFbMF0sbD1iLmxvY2F0aW9uLG09Yi5oaXN0b3J5LHA9Yi5zZXRUaW1lb3V0LGs9Yi5jbGVhclRpbWVvdXQscz17fTtnLmlzTW9jaz0hMTt2YXIgcj0wLEw9W107XG5nLiQkY29tcGxldGVPdXRzdGFuZGluZ1JlcXVlc3Q9ZTtnLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ9ZnVuY3Rpb24oKXtyKyt9O2cubm90aWZ5V2hlbk5vT3V0c3RhbmRpbmdSZXF1ZXN0cz1mdW5jdGlvbihhKXtxKHUsZnVuY3Rpb24oYSl7YSgpfSk7MD09PXI/YSgpOkwucHVzaChhKX07dmFyIHU9W10sSztnLmFkZFBvbGxGbj1mdW5jdGlvbihhKXtGKEspJiZmKDEwMCxwKTt1LnB1c2goYSk7cmV0dXJuIGF9O3ZhciB3PWwuaHJlZix4PWEuZmluZChcImJhc2VcIikseT1udWxsO2cudXJsPWZ1bmN0aW9uKGEsYyl7bCE9PWIubG9jYXRpb24mJihsPWIubG9jYXRpb24pO20hPT1iLmhpc3RvcnkmJihtPWIuaGlzdG9yeSk7aWYoYSl7aWYodyE9YSlyZXR1cm4gdz1hLGQuaGlzdG9yeT9jP20ucmVwbGFjZVN0YXRlKG51bGwsXCJcIixhKToobS5wdXNoU3RhdGUobnVsbCxcIlwiLGEpLHguYXR0cihcImhyZWZcIix4LmF0dHIoXCJocmVmXCIpKSk6KHk9YSxjP2wucmVwbGFjZShhKTpsLmhyZWY9XG5hKSxnfWVsc2UgcmV0dXJuIHl8fGwuaHJlZi5yZXBsYWNlKC8lMjcvZyxcIidcIil9O3ZhciBZPVtdLE49ITE7Zy5vblVybENoYW5nZT1mdW5jdGlvbihhKXtpZighTil7aWYoZC5oaXN0b3J5KXooYikub24oXCJwb3BzdGF0ZVwiLGgpO2lmKGQuaGFzaGNoYW5nZSl6KGIpLm9uKFwiaGFzaGNoYW5nZVwiLGgpO2Vsc2UgZy5hZGRQb2xsRm4oaCk7Tj0hMH1ZLnB1c2goYSk7cmV0dXJuIGF9O2cuYmFzZUhyZWY9ZnVuY3Rpb24oKXt2YXIgYT14LmF0dHIoXCJocmVmXCIpO3JldHVybiBhP2EucmVwbGFjZSgvXihodHRwcz9cXDopP1xcL1xcL1teXFwvXSovLFwiXCIpOlwiXCJ9O3ZhciBSPXt9LEg9XCJcIixDPWcuYmFzZUhyZWYoKTtnLmNvb2tpZXM9ZnVuY3Rpb24oYSxiKXt2YXIgZCxlLGYsZztpZihhKWI9PT10P24uY29va2llPWVuY29kZVVSSUNvbXBvbmVudChhKStcIj07cGF0aD1cIitDK1wiO2V4cGlyZXM9VGh1LCAwMSBKYW4gMTk3MCAwMDowMDowMCBHTVRcIjpHKGIpJiYoZD0obi5jb29raWU9ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1xuXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGIpK1wiO3BhdGg9XCIrQykubGVuZ3RoKzEsNDA5NjxkJiZjLndhcm4oXCJDb29raWUgJ1wiK2ErXCInIHBvc3NpYmx5IG5vdCBzZXQgb3Igb3ZlcmZsb3dlZCBiZWNhdXNlIGl0IHdhcyB0b28gbGFyZ2UgKFwiK2QrXCIgPiA0MDk2IGJ5dGVzKSFcIikpO2Vsc2V7aWYobi5jb29raWUhPT1IKWZvcihIPW4uY29va2llLGQ9SC5zcGxpdChcIjsgXCIpLFI9e30sZj0wO2Y8ZC5sZW5ndGg7ZisrKWU9ZFtmXSxnPWUuaW5kZXhPZihcIj1cIiksMDxnJiYoYT1kZWNvZGVVUklDb21wb25lbnQoZS5zdWJzdHJpbmcoMCxnKSksUlthXT09PXQmJihSW2FdPWRlY29kZVVSSUNvbXBvbmVudChlLnN1YnN0cmluZyhnKzEpKSkpO3JldHVybiBSfX07Zy5kZWZlcj1mdW5jdGlvbihhLGIpe3ZhciBjO3IrKztjPXAoZnVuY3Rpb24oKXtkZWxldGUgc1tjXTtlKGEpfSxifHwwKTtzW2NdPSEwO3JldHVybiBjfTtnLmRlZmVyLmNhbmNlbD1mdW5jdGlvbihhKXtyZXR1cm4gc1thXT8oZGVsZXRlIHNbYV0sXG5rKGEpLGUoQiksITApOiExfX1mdW5jdGlvbiBnZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsXCIkbG9nXCIsXCIkc25pZmZlclwiLFwiJGRvY3VtZW50XCIsZnVuY3Rpb24oYixhLGMsZCl7cmV0dXJuIG5ldyBQZShiLGQsYSxjKX1dfWZ1bmN0aW9uIGhlKCl7dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYihiLGQpe2Z1bmN0aW9uIGUoYSl7YSE9cCYmKGs/az09YSYmKGs9YS5uKTprPWEsZihhLm4sYS5wKSxmKGEscCkscD1hLHAubj1udWxsKX1mdW5jdGlvbiBmKGEsYil7YSE9YiYmKGEmJihhLnA9YiksYiYmKGIubj1hKSl9aWYoYiBpbiBhKXRocm93IE8oXCIkY2FjaGVGYWN0b3J5XCIpKFwiaWlkXCIsYik7dmFyIGg9MCxnPUUoe30sZCx7aWQ6Yn0pLG49e30sbD1kJiZkLmNhcGFjaXR5fHxOdW1iZXIuTUFYX1ZBTFVFLG09e30scD1udWxsLGs9bnVsbDtyZXR1cm4gYVtiXT17cHV0OmZ1bmN0aW9uKGEsYil7aWYobDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYz1tW2FdfHwobVthXT17a2V5OmF9KTtcbmUoYyl9aWYoIUYoYikpcmV0dXJuIGEgaW4gbnx8aCsrLG5bYV09YixoPmwmJnRoaXMucmVtb3ZlKGsua2V5KSxifSxnZXQ6ZnVuY3Rpb24oYSl7aWYobDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1tW2FdO2lmKCFiKXJldHVybjtlKGIpfXJldHVybiBuW2FdfSxyZW1vdmU6ZnVuY3Rpb24oYSl7aWYobDxOdW1iZXIuTUFYX1ZBTFVFKXt2YXIgYj1tW2FdO2lmKCFiKXJldHVybjtiPT1wJiYocD1iLnApO2I9PWsmJihrPWIubik7ZihiLm4sYi5wKTtkZWxldGUgbVthXX1kZWxldGUgblthXTtoLS19LHJlbW92ZUFsbDpmdW5jdGlvbigpe249e307aD0wO209e307cD1rPW51bGx9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttPWc9bj1udWxsO2RlbGV0ZSBhW2JdfSxpbmZvOmZ1bmN0aW9uKCl7cmV0dXJuIEUoe30sZyx7c2l6ZTpofSl9fX12YXIgYT17fTtiLmluZm89ZnVuY3Rpb24oKXt2YXIgYj17fTtxKGEsZnVuY3Rpb24oYSxlKXtiW2VdPWEuaW5mbygpfSk7cmV0dXJuIGJ9O2IuZ2V0PWZ1bmN0aW9uKGIpe3JldHVybiBhW2JdfTtcbnJldHVybiBifX1mdW5jdGlvbiB5ZSgpe3RoaXMuJGdldD1bXCIkY2FjaGVGYWN0b3J5XCIsZnVuY3Rpb24oYil7cmV0dXJuIGIoXCJ0ZW1wbGF0ZXNcIil9XX1mdW5jdGlvbiBpYyhiLGEpe3ZhciBjPXt9LGQ9XCJEaXJlY3RpdmVcIixlPS9eXFxzKmRpcmVjdGl2ZVxcOlxccyooW1xcZFxcd19cXC1dKylcXHMrKC4qKSQvLGY9LygoW1xcZFxcd19cXC1dKykoPzpcXDooW147XSspKT87PykvLGg9a2QoXCJuZ1NyYyxuZ1NyY3NldCxzcmMsc3Jjc2V0XCIpLGc9L14ob25bYS16XSt8Zm9ybWFjdGlvbikkLzt0aGlzLmRpcmVjdGl2ZT1mdW5jdGlvbiBsKGEsZSl7QWEoYSxcImRpcmVjdGl2ZVwiKTtHKGEpPyhHYihlLFwiZGlyZWN0aXZlRmFjdG9yeVwiKSxjLmhhc093blByb3BlcnR5KGEpfHwoY1thXT1bXSxiLmZhY3RvcnkoYStkLFtcIiRpbmplY3RvclwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixmdW5jdGlvbihiLGQpe3ZhciBlPVtdO3EoY1thXSxmdW5jdGlvbihjLGYpe3RyeXt2YXIgZz1iLmludm9rZShjKTtBKGcpP2c9e2NvbXBpbGU6YmEoZyl9OlxuIWcuY29tcGlsZSYmZy5saW5rJiYoZy5jb21waWxlPWJhKGcubGluaykpO2cucHJpb3JpdHk9Zy5wcmlvcml0eXx8MDtnLmluZGV4PWY7Zy5uYW1lPWcubmFtZXx8YTtnLnJlcXVpcmU9Zy5yZXF1aXJlfHxnLmNvbnRyb2xsZXImJmcubmFtZTtnLnJlc3RyaWN0PWcucmVzdHJpY3R8fFwiQVwiO2UucHVzaChnKX1jYXRjaChoKXtkKGgpfX0pO3JldHVybiBlfV0pKSxjW2FdLnB1c2goZSkpOnEoYSxhYyhsKSk7cmV0dXJuIHRoaXN9O3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9ZnVuY3Rpb24oYil7cmV0dXJuIHYoYik/KGEuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5hSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdCgpfTt0aGlzLmltZ1NyY1Nhbml0aXphdGlvbldoaXRlbGlzdD1mdW5jdGlvbihiKXtyZXR1cm4gdihiKT8oYS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoYiksdGhpcyk6YS5pbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3QoKX07dGhpcy4kZ2V0PVxuW1wiJGluamVjdG9yXCIsXCIkaW50ZXJwb2xhdGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsXCIkaHR0cFwiLFwiJHRlbXBsYXRlQ2FjaGVcIixcIiRwYXJzZVwiLFwiJGNvbnRyb2xsZXJcIixcIiRyb290U2NvcGVcIixcIiRkb2N1bWVudFwiLFwiJHNjZVwiLFwiJGFuaW1hdGVcIixcIiQkc2FuaXRpemVVcmlcIixmdW5jdGlvbihhLGIscCxrLHMscixMLHUsSyx3LHgseSl7ZnVuY3Rpb24gWShhLGIsYyxkLGUpe2EgaW5zdGFuY2VvZiB6fHwoYT16KGEpKTtxKGEsZnVuY3Rpb24oYixjKXszPT1iLm5vZGVUeXBlJiZiLm5vZGVWYWx1ZS5tYXRjaCgvXFxTKy8pJiYoYVtjXT16KGIpLndyYXAoXCI8c3Bhbj48L3NwYW4+XCIpLnBhcmVudCgpWzBdKX0pO3ZhciBmPVIoYSxiLGEsYyxkLGUpO04oYSxcIm5nLXNjb3BlXCIpO3JldHVybiBmdW5jdGlvbihiLGMsZCxlKXtHYihiLFwic2NvcGVcIik7dmFyIGc9Yz9GYS5jbG9uZS5jYWxsKGEpOmE7cShkLGZ1bmN0aW9uKGEsYil7Zy5kYXRhKFwiJFwiK2IrXCJDb250cm9sbGVyXCIsYSl9KTtnLmRhdGEoXCIkc2NvcGVcIixcbmIpO2MmJmMoZyxiKTtmJiZmKGIsZyxnLGUpO3JldHVybiBnfX1mdW5jdGlvbiBOKGEsYil7dHJ5e2EuYWRkQ2xhc3MoYil9Y2F0Y2goYyl7fX1mdW5jdGlvbiBSKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYyxkLGUpe3ZhciBmLGwsayxtLHAscyx1O2Y9Yy5sZW5ndGg7dmFyIHI9QXJyYXkoZik7Zm9yKG09MDttPGY7bSsrKXJbbV09Y1ttXTtzPW09MDtmb3IocD1oLmxlbmd0aDttPHA7cysrKWw9cltzXSxjPWhbbSsrXSxmPWhbbSsrXSxjPyhjLnNjb3BlPyhrPWEuJG5ldygpLHouZGF0YShsLFwiJHNjb3BlXCIsaykpOms9YSx1PWMudHJhbnNjbHVkZU9uVGhpc0VsZW1lbnQ/SChhLGMudHJhbnNjbHVkZSxlKTohYy50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQmJmU/ZTohZSYmYj9IKGEsYik6bnVsbCxjKGYsayxsLGQsdSkpOmYmJmYoYSxsLmNoaWxkTm9kZXMsdCxlKX1mb3IodmFyIGg9W10sbCxrLG0scCxzPTA7czxhLmxlbmd0aDtzKyspbD1uZXcgTmIsaz1DKGFbc10sW10sbCwwPT09XG5zP2Q6dCxlKSwoZj1rLmxlbmd0aD9jYShrLGFbc10sbCxiLGMsbnVsbCxbXSxbXSxmKTpudWxsKSYmZi5zY29wZSYmTihsLiQkZWxlbWVudCxcIm5nLXNjb3BlXCIpLGw9ZiYmZi50ZXJtaW5hbHx8IShtPWFbc10uY2hpbGROb2Rlcyl8fCFtLmxlbmd0aD9udWxsOlIobSxmPyhmLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50fHwhZi50ZW1wbGF0ZU9uVGhpc0VsZW1lbnQpJiZmLnRyYW5zY2x1ZGU6YiksaC5wdXNoKGYsbCkscD1wfHxmfHxsLGY9bnVsbDtyZXR1cm4gcD9nOm51bGx9ZnVuY3Rpb24gSChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXt2YXIgZz0hMTtkfHwoZD1hLiRuZXcoKSxnPWQuJCR0cmFuc2NsdWRlZD0hMCk7ZT1iKGQsZSxmLGMpO2lmKGcpZS5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtkLiRkZXN0cm95KCl9KTtyZXR1cm4gZX19ZnVuY3Rpb24gQyhiLGcsaCxrLG0pe3ZhciBwPWguJGF0dHIscztzd2l0Y2goYi5ub2RlVHlwZSl7Y2FzZSAxOnYoZyxvYShtYShiKSksXG5cIkVcIixrLG0pO2Zvcih2YXIgdSxyLEssTD1iLmF0dHJpYnV0ZXMseD0wLHc9TCYmTC5sZW5ndGg7eDx3O3grKyl7dmFyIHk9ITEsTj0hMTt1PUxbeF07aWYoIVR8fDg8PVR8fHUuc3BlY2lmaWVkKXtzPXUubmFtZTt1PVoodS52YWx1ZSk7cj1vYShzKTtpZihLPXVhLnRlc3Qocikpcz1nYihyLnN1YnN0cig2KSxcIi1cIik7dmFyIHE9ci5yZXBsYWNlKC8oU3RhcnR8RW5kKSQvLFwiXCIpLEg7YTp7dmFyIEQ9cTtpZihjLmhhc093blByb3BlcnR5KEQpKXtIPXZvaWQgMDtmb3IodmFyIEQ9YS5nZXQoRCtkKSxYPTAsQz1ELmxlbmd0aDtYPEM7WCsrKWlmKEg9RFtYXSxILm11bHRpRWxlbWVudCl7SD0hMDticmVhayBhfX1IPSExfUgmJnI9PT1xK1wiU3RhcnRcIiYmKHk9cyxOPXMuc3Vic3RyKDAscy5sZW5ndGgtNSkrXCJlbmRcIixzPXMuc3Vic3RyKDAscy5sZW5ndGgtNikpO3I9b2Eocy50b0xvd2VyQ2FzZSgpKTtwW3JdPXM7aWYoS3x8IWguaGFzT3duUHJvcGVydHkocikpaFtyXT11LHZjKGIscikmJlxuKGhbcl09ITApO1MoYixnLHUscik7dihnLHIsXCJBXCIsayxtLHksTil9fWI9Yi5jbGFzc05hbWU7aWYoRyhiKSYmXCJcIiE9PWIpZm9yKDtzPWYuZXhlYyhiKTspcj1vYShzWzJdKSx2KGcscixcIkNcIixrLG0pJiYoaFtyXT1aKHNbM10pKSxiPWIuc3Vic3RyKHMuaW5kZXgrc1swXS5sZW5ndGgpO2JyZWFrO2Nhc2UgMzpPKGcsYi5ub2RlVmFsdWUpO2JyZWFrO2Nhc2UgODp0cnl7aWYocz1lLmV4ZWMoYi5ub2RlVmFsdWUpKXI9b2Eoc1sxXSksdihnLHIsXCJNXCIsayxtKSYmKGhbcl09WihzWzJdKSl9Y2F0Y2goUil7fX1nLnNvcnQoRik7cmV0dXJuIGd9ZnVuY3Rpb24gRChhLGIsYyl7dmFyIGQ9W10sZT0wO2lmKGImJmEuaGFzQXR0cmlidXRlJiZhLmhhc0F0dHJpYnV0ZShiKSl7ZG97aWYoIWEpdGhyb3cgaGEoXCJ1dGVyZGlyXCIsYixjKTsxPT1hLm5vZGVUeXBlJiYoYS5oYXNBdHRyaWJ1dGUoYikmJmUrKyxhLmhhc0F0dHJpYnV0ZShjKSYmZS0tKTtkLnB1c2goYSk7YT1hLm5leHRTaWJsaW5nfXdoaWxlKDA8XG5lKX1lbHNlIGQucHVzaChhKTtyZXR1cm4geihkKX1mdW5jdGlvbiBYKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYsZyxoKXtlPUQoZVswXSxiLGMpO3JldHVybiBhKGQsZSxmLGcsaCl9fWZ1bmN0aW9uIGNhKGEsYyxkLGUsZixnLGgsbCxrKXtmdW5jdGlvbiBzKGEsYixjLGQpe2lmKGEpe2MmJihhPVgoYSxjLGQpKTthLnJlcXVpcmU9SS5yZXF1aXJlO2EuZGlyZWN0aXZlTmFtZT1uYTtpZihIPT09SXx8SS4kJGlzb2xhdGVTY29wZSlhPUNjKGEse2lzb2xhdGVTY29wZTohMH0pO2gucHVzaChhKX1pZihiKXtjJiYoYj1YKGIsYyxkKSk7Yi5yZXF1aXJlPUkucmVxdWlyZTtiLmRpcmVjdGl2ZU5hbWU9bmE7aWYoSD09PUl8fEkuJCRpc29sYXRlU2NvcGUpYj1DYyhiLHtpc29sYXRlU2NvcGU6ITB9KTtsLnB1c2goYil9fWZ1bmN0aW9uIHUoYSxiLGMsZCl7dmFyIGUsZj1cImRhdGFcIixnPSExO2lmKEcoYikpe2Zvcig7XCJeXCI9PShlPWIuY2hhckF0KDApKXx8XCI/XCI9PWU7KWI9Yi5zdWJzdHIoMSksXG5cIl5cIj09ZSYmKGY9XCJpbmhlcml0ZWREYXRhXCIpLGc9Z3x8XCI/XCI9PWU7ZT1udWxsO2QmJlwiZGF0YVwiPT09ZiYmKGU9ZFtiXSk7ZT1lfHxjW2ZdKFwiJFwiK2IrXCJDb250cm9sbGVyXCIpO2lmKCFlJiYhZyl0aHJvdyBoYShcImN0cmVxXCIsYixhKTt9ZWxzZSBNKGIpJiYoZT1bXSxxKGIsZnVuY3Rpb24oYil7ZS5wdXNoKHUoYSxiLGMsZCkpfSkpO3JldHVybiBlfWZ1bmN0aW9uIEsoYSxlLGYsZyxrKXtmdW5jdGlvbiBzKGEsYil7dmFyIGM7Mj5hcmd1bWVudHMubGVuZ3RoJiYoYj1hLGE9dCk7RiYmKGM9Y2EpO3JldHVybiBrKGEsYixjKX12YXIgeCx3LEJjLEQsWCxDLGNhPXt9LFk7eD1jPT09Zj9kOmphKGQsbmV3IE5iKHooZiksZC4kYXR0cikpO3c9eC4kJGVsZW1lbnQ7aWYoSCl7dmFyIHY9L15cXHMqKFtAPSZdKShcXD8/KVxccyooXFx3KilcXHMqJC87Qz1lLiRuZXcoITApOyFSfHxSIT09SCYmUiE9PUguJCRvcmlnaW5hbERpcmVjdGl2ZT93LmRhdGEoXCIkaXNvbGF0ZVNjb3BlTm9UZW1wbGF0ZVwiLEMpOlxudy5kYXRhKFwiJGlzb2xhdGVTY29wZVwiLEMpO04odyxcIm5nLWlzb2xhdGUtc2NvcGVcIik7cShILnNjb3BlLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9YS5tYXRjaCh2KXx8W10sZj1kWzNdfHxjLGc9XCI/XCI9PWRbMl0sZD1kWzFdLGgsayxsLHM7Qy4kJGlzb2xhdGVCaW5kaW5nc1tjXT1kK2Y7c3dpdGNoKGQpe2Nhc2UgXCJAXCI6eC4kb2JzZXJ2ZShmLGZ1bmN0aW9uKGEpe0NbY109YX0pO3guJCRvYnNlcnZlcnNbZl0uJCRzY29wZT1lO3hbZl0mJihDW2NdPWIoeFtmXSkoZSkpO2JyZWFrO2Nhc2UgXCI9XCI6aWYoZyYmIXhbZl0pYnJlYWs7az1yKHhbZl0pO3M9ay5saXRlcmFsP3JhOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1ifTtsPWsuYXNzaWdufHxmdW5jdGlvbigpe2g9Q1tjXT1rKGUpO3Rocm93IGhhKFwibm9uYXNzaWduXCIseFtmXSxILm5hbWUpO307aD1DW2NdPWsoZSk7Zz1lLiR3YXRjaChyKHhbZl0sZnVuY3Rpb24oYSl7cyhhLENbY10pfHwocyhhLGgpP2woZSxhPUNbY10pOkNbY109YSk7XG5yZXR1cm4gaD1hfSksbnVsbCxrLmxpdGVyYWwpO0MuJG9uKFwiJGRlc3Ryb3lcIixnKTticmVhaztjYXNlIFwiJlwiOms9cih4W2ZdKTtDW2NdPWZ1bmN0aW9uKGEpe3JldHVybiBrKGUsYSl9O2JyZWFrO2RlZmF1bHQ6dGhyb3cgaGEoXCJpc2NwXCIsSC5uYW1lLGMsYSk7fX0pfVk9ayYmczt5JiZxKHksZnVuY3Rpb24oYSl7dmFyIGI9eyRzY29wZTphPT09SHx8YS4kJGlzb2xhdGVTY29wZT9DOmUsJGVsZW1lbnQ6dywkYXR0cnM6eCwkdHJhbnNjbHVkZTpZfSxjO1g9YS5jb250cm9sbGVyO1wiQFwiPT1YJiYoWD14W2EubmFtZV0pO2M9TChYLGIpO2NhW2EubmFtZV09YztGfHx3LmRhdGEoXCIkXCIrYS5uYW1lK1wiQ29udHJvbGxlclwiLGMpO2EuY29udHJvbGxlckFzJiYoYi4kc2NvcGVbYS5jb250cm9sbGVyQXNdPWMpfSk7Zz0wO2ZvcihCYz1oLmxlbmd0aDtnPEJjO2crKyl0cnl7RD1oW2ddLEQoRC5pc29sYXRlU2NvcGU/QzplLHcseCxELnJlcXVpcmUmJnUoRC5kaXJlY3RpdmVOYW1lLEQucmVxdWlyZSxcbncsY2EpLFkpfWNhdGNoKFFlKXtwKFFlLGdhKHcpKX1nPWU7SCYmKEgudGVtcGxhdGV8fG51bGw9PT1ILnRlbXBsYXRlVXJsKSYmKGc9Qyk7YSYmYShnLGYuY2hpbGROb2Rlcyx0LGspO2ZvcihnPWwubGVuZ3RoLTE7MDw9ZztnLS0pdHJ5e0Q9bFtnXSxEKEQuaXNvbGF0ZVNjb3BlP0M6ZSx3LHgsRC5yZXF1aXJlJiZ1KEQuZGlyZWN0aXZlTmFtZSxELnJlcXVpcmUsdyxjYSksWSl9Y2F0Y2goUyl7cChTLGdhKHcpKX19az1rfHx7fTtmb3IodmFyIHg9LU51bWJlci5NQVhfVkFMVUUsdyx5PWsuY29udHJvbGxlckRpcmVjdGl2ZXMsSD1rLm5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZSxSPWsudGVtcGxhdGVEaXJlY3RpdmUsY2E9ay5ub25UbGJUcmFuc2NsdWRlRGlyZWN0aXZlLHY9ITEsV2E9ITEsRj1rLmhhc0VsZW1lbnRUcmFuc2NsdWRlRGlyZWN0aXZlLEU9ZC4kJGVsZW1lbnQ9eihjKSxJLG5hLFMsTz1lLEosUD0wLHVhPWEubGVuZ3RoO1A8dWE7UCsrKXtJPWFbUF07dmFyIFQ9SS4kJHN0YXJ0LFxuVT1JLiQkZW5kO1QmJihFPUQoYyxULFUpKTtTPXQ7aWYoeD5JLnByaW9yaXR5KWJyZWFrO2lmKFM9SS5zY29wZSlJLnRlbXBsYXRlVXJsfHwoUShTKT8oSWEoXCJuZXcvaXNvbGF0ZWQgc2NvcGVcIixIfHx3LEksRSksSD1JKTpJYShcIm5ldy9pc29sYXRlZCBzY29wZVwiLEgsSSxFKSksdz13fHxJO25hPUkubmFtZTshSS50ZW1wbGF0ZVVybCYmSS5jb250cm9sbGVyJiYoUz1JLmNvbnRyb2xsZXIseT15fHx7fSxJYShcIidcIituYStcIicgY29udHJvbGxlclwiLHlbbmFdLEksRSkseVtuYV09SSk7aWYoUz1JLnRyYW5zY2x1ZGUpdj0hMCxJLiQkdGxifHwoSWEoXCJ0cmFuc2NsdXNpb25cIixjYSxJLEUpLGNhPUkpLFwiZWxlbWVudFwiPT1TPyhGPSEwLHg9SS5wcmlvcml0eSxTPUUsRT1kLiQkZWxlbWVudD16KFcuY3JlYXRlQ29tbWVudChcIiBcIituYStcIjogXCIrZFtuYV0rXCIgXCIpKSxjPUVbMF0scmIoZixrYS5jYWxsKFMsMCksYyksTz1ZKFMsZSx4LGcmJmcubmFtZSx7bm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpjYX0pKTpcbihTPXooSmIoYykpLmNvbnRlbnRzKCksRS5lbXB0eSgpLE89WShTLGUpKTtpZihJLnRlbXBsYXRlKWlmKFdhPSEwLElhKFwidGVtcGxhdGVcIixSLEksRSksUj1JLFM9QShJLnRlbXBsYXRlKT9JLnRlbXBsYXRlKEUsZCk6SS50ZW1wbGF0ZSxTPURjKFMpLEkucmVwbGFjZSl7Zz1JO1M9SGIudGVzdChTKT96KFYoSS50eXBlLFooUykpKTpbXTtjPVNbMF07aWYoMSE9Uy5sZW5ndGh8fDEhPT1jLm5vZGVUeXBlKXRocm93IGhhKFwidHBscnRcIixuYSxcIlwiKTtyYihmLEUsYyk7dWE9eyRhdHRyOnt9fTtTPUMoYyxbXSx1YSk7dmFyIFNlPWEuc3BsaWNlKFArMSxhLmxlbmd0aC0oUCsxKSk7SCYmcWIoUyk7YT1hLmNvbmNhdChTKS5jb25jYXQoU2UpO0FjKGQsdWEpO3VhPWEubGVuZ3RofWVsc2UgRS5odG1sKFMpO2lmKEkudGVtcGxhdGVVcmwpV2E9ITAsSWEoXCJ0ZW1wbGF0ZVwiLFIsSSxFKSxSPUksSS5yZXBsYWNlJiYoZz1JKSxLPUIoYS5zcGxpY2UoUCxhLmxlbmd0aC1QKSxFLGQsZix2JiZPLGgsXG5sLHtjb250cm9sbGVyRGlyZWN0aXZlczp5LG5ld0lzb2xhdGVTY29wZURpcmVjdGl2ZTpILHRlbXBsYXRlRGlyZWN0aXZlOlIsbm9uVGxiVHJhbnNjbHVkZURpcmVjdGl2ZTpjYX0pLHVhPWEubGVuZ3RoO2Vsc2UgaWYoSS5jb21waWxlKXRyeXtKPUkuY29tcGlsZShFLGQsTyksQShKKT9zKG51bGwsSixULFUpOkomJnMoSi5wcmUsSi5wb3N0LFQsVSl9Y2F0Y2goUmUpe3AoUmUsZ2EoRSkpfUkudGVybWluYWwmJihLLnRlcm1pbmFsPSEwLHg9TWF0aC5tYXgoeCxJLnByaW9yaXR5KSl9Sy5zY29wZT13JiYhMD09PXcuc2NvcGU7Sy50cmFuc2NsdWRlT25UaGlzRWxlbWVudD12O0sudGVtcGxhdGVPblRoaXNFbGVtZW50PVdhO0sudHJhbnNjbHVkZT1PO2suaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmU9RjtyZXR1cm4gS31mdW5jdGlvbiBxYihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2I8YztiKyspYVtiXT1jYyhhW2JdLHskJGlzb2xhdGVTY29wZTohMH0pfWZ1bmN0aW9uIHYoYixcbmUsZixnLGgsayxtKXtpZihlPT09aClyZXR1cm4gbnVsbDtoPW51bGw7aWYoYy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHM7ZT1hLmdldChlK2QpO2Zvcih2YXIgdT0wLHI9ZS5sZW5ndGg7dTxyO3UrKyl0cnl7cz1lW3VdLChnPT09dHx8Zz5zLnByaW9yaXR5KSYmLTEhPXMucmVzdHJpY3QuaW5kZXhPZihmKSYmKGsmJihzPWNjKHMseyQkc3RhcnQ6aywkJGVuZDptfSkpLGIucHVzaChzKSxoPXMpfWNhdGNoKEspe3AoSyl9fXJldHVybiBofWZ1bmN0aW9uIEFjKGEsYil7dmFyIGM9Yi4kYXR0cixkPWEuJGF0dHIsZT1hLiQkZWxlbWVudDtxKGEsZnVuY3Rpb24oZCxlKXtcIiRcIiE9ZS5jaGFyQXQoMCkmJihiW2VdJiZiW2VdIT09ZCYmKGQrPShcInN0eWxlXCI9PT1lP1wiO1wiOlwiIFwiKStiW2VdKSxhLiRzZXQoZSxkLCEwLGNbZV0pKX0pO3EoYixmdW5jdGlvbihiLGYpe1wiY2xhc3NcIj09Zj8oTihlLGIpLGFbXCJjbGFzc1wiXT0oYVtcImNsYXNzXCJdP2FbXCJjbGFzc1wiXStcIiBcIjpcIlwiKStiKTpcInN0eWxlXCI9PVxuZj8oZS5hdHRyKFwic3R5bGVcIixlLmF0dHIoXCJzdHlsZVwiKStcIjtcIitiKSxhLnN0eWxlPShhLnN0eWxlP2Euc3R5bGUrXCI7XCI6XCJcIikrYik6XCIkXCI9PWYuY2hhckF0KDApfHxhLmhhc093blByb3BlcnR5KGYpfHwoYVtmXT1iLGRbZl09Y1tmXSl9KX1mdW5jdGlvbiBCKGEsYixjLGQsZSxmLGcsaCl7dmFyIGw9W10sbSxwLHU9YlswXSxyPWEuc2hpZnQoKSxLPUUoe30scix7dGVtcGxhdGVVcmw6bnVsbCx0cmFuc2NsdWRlOm51bGwscmVwbGFjZTpudWxsLCQkb3JpZ2luYWxEaXJlY3RpdmU6cn0pLHg9QShyLnRlbXBsYXRlVXJsKT9yLnRlbXBsYXRlVXJsKGIsYyk6ci50ZW1wbGF0ZVVybCxMPXIudHlwZTtiLmVtcHR5KCk7ay5nZXQody5nZXRUcnVzdGVkUmVzb3VyY2VVcmwoeCkse2NhY2hlOnN9KS5zdWNjZXNzKGZ1bmN0aW9uKGspe3ZhciBzLHc7az1EYyhrKTtpZihyLnJlcGxhY2Upe2s9SGIudGVzdChrKT96KFYoTCxaKGspKSk6W107cz1rWzBdO2lmKDEhPWsubGVuZ3RofHwxIT09cy5ub2RlVHlwZSl0aHJvdyBoYShcInRwbHJ0XCIsXG5yLm5hbWUseCk7az17JGF0dHI6e319O3JiKGQsYixzKTt2YXIgeT1DKHMsW10sayk7UShyLnNjb3BlKSYmcWIoeSk7YT15LmNvbmNhdChhKTtBYyhjLGspfWVsc2Ugcz11LGIuaHRtbChrKTthLnVuc2hpZnQoSyk7bT1jYShhLHMsYyxlLGIscixmLGcsaCk7cShkLGZ1bmN0aW9uKGEsYyl7YT09cyYmKGRbY109YlswXSl9KTtmb3IocD1SKGJbMF0uY2hpbGROb2RlcyxlKTtsLmxlbmd0aDspe2s9bC5zaGlmdCgpO3c9bC5zaGlmdCgpO3ZhciBEPWwuc2hpZnQoKSxYPWwuc2hpZnQoKSx5PWJbMF07aWYodyE9PXUpe3ZhciBZPXcuY2xhc3NOYW1lO2guaGFzRWxlbWVudFRyYW5zY2x1ZGVEaXJlY3RpdmUmJnIucmVwbGFjZXx8KHk9SmIocykpO3JiKEQseih3KSx5KTtOKHooeSksWSl9dz1tLnRyYW5zY2x1ZGVPblRoaXNFbGVtZW50P0goayxtLnRyYW5zY2x1ZGUsWCk6WDttKHAsayx5LGQsdyl9bD1udWxsfSkuZXJyb3IoZnVuY3Rpb24oYSxiLGMsZCl7dGhyb3cgaGEoXCJ0cGxvYWRcIixkLnVybCk7XG59KTtyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCxlKXthPWU7bD8obC5wdXNoKGIpLGwucHVzaChjKSxsLnB1c2goZCksbC5wdXNoKGEpKToobS50cmFuc2NsdWRlT25UaGlzRWxlbWVudCYmKGE9SChiLG0udHJhbnNjbHVkZSxlKSksbShwLGIsYyxkLGEpKX19ZnVuY3Rpb24gRihhLGIpe3ZhciBjPWIucHJpb3JpdHktYS5wcmlvcml0eTtyZXR1cm4gMCE9PWM/YzphLm5hbWUhPT1iLm5hbWU/YS5uYW1lPGIubmFtZT8tMToxOmEuaW5kZXgtYi5pbmRleH1mdW5jdGlvbiBJYShhLGIsYyxkKXtpZihiKXRocm93IGhhKFwibXVsdGlkaXJcIixiLm5hbWUsYy5uYW1lLGEsZ2EoZCkpO31mdW5jdGlvbiBPKGEsYyl7dmFyIGQ9YihjLCEwKTtkJiZhLnB1c2goe3ByaW9yaXR5OjAsY29tcGlsZTpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudCgpLmxlbmd0aDtiJiZOKGEucGFyZW50KCksXCJuZy1iaW5kaW5nXCIpO3JldHVybiBmdW5jdGlvbihhLGMpe3ZhciBlPWMucGFyZW50KCksZj1lLmRhdGEoXCIkYmluZGluZ1wiKXx8XG5bXTtmLnB1c2goZCk7ZS5kYXRhKFwiJGJpbmRpbmdcIixmKTtifHxOKGUsXCJuZy1iaW5kaW5nXCIpO2EuJHdhdGNoKGQsZnVuY3Rpb24oYSl7Y1swXS5ub2RlVmFsdWU9YX0pfX19KX1mdW5jdGlvbiBWKGEsYil7YT1KKGF8fFwiaHRtbFwiKTtzd2l0Y2goYSl7Y2FzZSBcInN2Z1wiOmNhc2UgXCJtYXRoXCI6dmFyIGM9Vy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuaW5uZXJIVE1MPVwiPFwiK2ErXCI+XCIrYitcIjwvXCIrYStcIj5cIjtyZXR1cm4gYy5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXM7ZGVmYXVsdDpyZXR1cm4gYn19ZnVuY3Rpb24gV2EoYSxiKXtpZihcInNyY2RvY1wiPT1iKXJldHVybiB3LkhUTUw7dmFyIGM9bWEoYSk7aWYoXCJ4bGlua0hyZWZcIj09Ynx8XCJmb3JtXCI9PWMmJlwiYWN0aW9uXCI9PWJ8fFwiaW1nXCIhPWMmJihcInNyY1wiPT1ifHxcIm5nU3JjXCI9PWIpKXJldHVybiB3LlJFU09VUkNFX1VSTH1mdW5jdGlvbiBTKGEsYyxkLGUpe3ZhciBmPWIoZCwhMCk7aWYoZil7aWYoXCJtdWx0aXBsZVwiPT09ZSYmXCJzZWxlY3RcIj09PVxubWEoYSkpdGhyb3cgaGEoXCJzZWxtdWx0aVwiLGdhKGEpKTtjLnB1c2goe3ByaW9yaXR5OjEwMCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihjLGQsayl7ZD1rLiQkb2JzZXJ2ZXJzfHwoay4kJG9ic2VydmVycz17fSk7aWYoZy50ZXN0KGUpKXRocm93IGhhKFwibm9kb21ldmVudHNcIik7aWYoZj1iKGtbZV0sITAsV2EoYSxlKSxoW2VdKSlrW2VdPWYoYyksKGRbZV18fChkW2VdPVtdKSkuJCRpbnRlcj0hMCwoay4kJG9ic2VydmVycyYmay4kJG9ic2VydmVyc1tlXS4kJHNjb3BlfHxjKS4kd2F0Y2goZixmdW5jdGlvbihhLGIpe1wiY2xhc3NcIj09PWUmJmEhPWI/ay4kdXBkYXRlQ2xhc3MoYSxiKTprLiRzZXQoZSxhKX0pfX19fSl9fWZ1bmN0aW9uIHJiKGEsYixjKXt2YXIgZD1iWzBdLGU9Yi5sZW5ndGgsZj1kLnBhcmVudE5vZGUsZyxoO2lmKGEpZm9yKGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspaWYoYVtnXT09ZCl7YVtnKytdPWM7aD1nK2UtMTtmb3IodmFyIGs9YS5sZW5ndGg7Zzxcbms7ZysrLGgrKyloPGs/YVtnXT1hW2hdOmRlbGV0ZSBhW2ddO2EubGVuZ3RoLT1lLTE7YnJlYWt9ZiYmZi5yZXBsYWNlQ2hpbGQoYyxkKTthPVcuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO2EuYXBwZW5kQ2hpbGQoZCk7Y1t6LmV4cGFuZG9dPWRbei5leHBhbmRvXTtkPTE7Zm9yKGU9Yi5sZW5ndGg7ZDxlO2QrKylmPWJbZF0seihmKS5yZW1vdmUoKSxhLmFwcGVuZENoaWxkKGYpLGRlbGV0ZSBiW2RdO2JbMF09YztiLmxlbmd0aD0xfWZ1bmN0aW9uIENjKGEsYil7cmV0dXJuIEUoZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShudWxsLGFyZ3VtZW50cyl9LGEsYil9dmFyIE5iPWZ1bmN0aW9uKGEsYil7dGhpcy4kJGVsZW1lbnQ9YTt0aGlzLiRhdHRyPWJ8fHt9fTtOYi5wcm90b3R5cGU9eyRub3JtYWxpemU6b2EsJGFkZENsYXNzOmZ1bmN0aW9uKGEpe2EmJjA8YS5sZW5ndGgmJnguYWRkQ2xhc3ModGhpcy4kJGVsZW1lbnQsYSl9LCRyZW1vdmVDbGFzczpmdW5jdGlvbihhKXthJiYwPFxuYS5sZW5ndGgmJngucmVtb3ZlQ2xhc3ModGhpcy4kJGVsZW1lbnQsYSl9LCR1cGRhdGVDbGFzczpmdW5jdGlvbihhLGIpe3ZhciBjPUVjKGEsYiksZD1FYyhiLGEpOzA9PT1jLmxlbmd0aD94LnJlbW92ZUNsYXNzKHRoaXMuJCRlbGVtZW50LGQpOjA9PT1kLmxlbmd0aD94LmFkZENsYXNzKHRoaXMuJCRlbGVtZW50LGMpOnguc2V0Q2xhc3ModGhpcy4kJGVsZW1lbnQsYyxkKX0sJHNldDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLiQkZWxlbWVudFswXSxmPXZjKGUsYSksZz1LZShlLGEpLGU9YTtmPyh0aGlzLiQkZWxlbWVudC5wcm9wKGEsYiksZD1mKTpnJiYodGhpc1tnXT1iLGU9Zyk7dGhpc1thXT1iO2Q/dGhpcy4kYXR0clthXT1kOihkPXRoaXMuJGF0dHJbYV0pfHwodGhpcy4kYXR0clthXT1kPWdiKGEsXCItXCIpKTtmPW1hKHRoaXMuJCRlbGVtZW50KTtpZihcImFcIj09PWYmJlwiaHJlZlwiPT09YXx8XCJpbWdcIj09PWYmJlwic3JjXCI9PT1hKXRoaXNbYV09Yj15KGIsXCJzcmNcIj09PWEpO1xuITEhPT1jJiYobnVsbD09PWJ8fGI9PT10P3RoaXMuJCRlbGVtZW50LnJlbW92ZUF0dHIoZCk6dGhpcy4kJGVsZW1lbnQuYXR0cihkLGIpKTsoYT10aGlzLiQkb2JzZXJ2ZXJzKSYmcShhW2VdLGZ1bmN0aW9uKGEpe3RyeXthKGIpfWNhdGNoKGMpe3AoYyl9fSl9LCRvYnNlcnZlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuJCRvYnNlcnZlcnN8fChjLiQkb2JzZXJ2ZXJzPXt9KSxlPWRbYV18fChkW2FdPVtdKTtlLnB1c2goYik7dS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7ZS4kJGludGVyfHxiKGNbYV0pfSk7cmV0dXJuIGZ1bmN0aW9uKCl7RGEoZSxiKX19fTt2YXIgUD1iLnN0YXJ0U3ltYm9sKCksVT1iLmVuZFN5bWJvbCgpLERjPVwie3tcIj09UHx8XCJ9fVwiPT1VP0JhOmZ1bmN0aW9uKGEpe3JldHVybiBhLnJlcGxhY2UoL1xce1xcey9nLFApLnJlcGxhY2UoL319L2csVSl9LHVhPS9ebmdBdHRyW0EtWl0vO3JldHVybiBZfV19ZnVuY3Rpb24gb2EoYil7cmV0dXJuIFNhKGIucmVwbGFjZShUZSxcblwiXCIpKX1mdW5jdGlvbiBFYyhiLGEpe3ZhciBjPVwiXCIsZD1iLnNwbGl0KC9cXHMrLyksZT1hLnNwbGl0KC9cXHMrLyksZj0wO2E6Zm9yKDtmPGQubGVuZ3RoO2YrKyl7Zm9yKHZhciBoPWRbZl0sZz0wO2c8ZS5sZW5ndGg7ZysrKWlmKGg9PWVbZ10pY29udGludWUgYTtjKz0oMDxjLmxlbmd0aD9cIiBcIjpcIlwiKStofXJldHVybiBjfWZ1bmN0aW9uIGllKCl7dmFyIGI9e30sYT0hMSxjPS9eKFxcUyspKFxccythc1xccysoXFx3KykpPyQvO3RoaXMucmVnaXN0ZXI9ZnVuY3Rpb24oYSxjKXtBYShhLFwiY29udHJvbGxlclwiKTtRKGEpP0UoYixhKTpiW2FdPWN9O3RoaXMuYWxsb3dHbG9iYWxzPWZ1bmN0aW9uKCl7YT0hMH07dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLFwiJHdpbmRvd1wiLGZ1bmN0aW9uKGQsZSl7cmV0dXJuIGZ1bmN0aW9uKGYsaCl7dmFyIGcsbixsO0coZikmJihnPWYubWF0Y2goYyksbj1nWzFdLGw9Z1szXSxmPWIuaGFzT3duUHJvcGVydHkobik/YltuXTpoYyhoLiRzY29wZSxuLCEwKXx8KGE/XG5oYyhlLG4sITApOnQpLFBhKGYsbiwhMCkpO2c9ZC5pbnN0YW50aWF0ZShmLGgsbik7aWYobCl7aWYoIWh8fFwib2JqZWN0XCIhPT10eXBlb2YgaC4kc2NvcGUpdGhyb3cgTyhcIiRjb250cm9sbGVyXCIpKFwibm9zY3BcIixufHxmLm5hbWUsbCk7aC4kc2NvcGVbbF09Z31yZXR1cm4gZ319XX1mdW5jdGlvbiBqZSgpe3RoaXMuJGdldD1bXCIkd2luZG93XCIsZnVuY3Rpb24oYil7cmV0dXJuIHooYi5kb2N1bWVudCl9XX1mdW5jdGlvbiBrZSgpe3RoaXMuJGdldD1bXCIkbG9nXCIsZnVuY3Rpb24oYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyl7Yi5lcnJvci5hcHBseShiLGFyZ3VtZW50cyl9fV19ZnVuY3Rpb24gRmMoYil7dmFyIGE9e30sYyxkLGU7aWYoIWIpcmV0dXJuIGE7cShiLnNwbGl0KFwiXFxuXCIpLGZ1bmN0aW9uKGIpe2U9Yi5pbmRleE9mKFwiOlwiKTtjPUooWihiLnN1YnN0cigwLGUpKSk7ZD1aKGIuc3Vic3RyKGUrMSkpO2MmJihhW2NdPWFbY10/YVtjXStcIiwgXCIrZDpkKX0pO3JldHVybiBhfWZ1bmN0aW9uIEdjKGIpe3ZhciBhPVxuUShiKT9iOnQ7cmV0dXJuIGZ1bmN0aW9uKGMpe2F8fChhPUZjKGIpKTtyZXR1cm4gYz9hW0ooYyldfHxudWxsOmF9fWZ1bmN0aW9uIEhjKGIsYSxjKXtpZihBKGMpKXJldHVybiBjKGIsYSk7cShjLGZ1bmN0aW9uKGMpe2I9YyhiLGEpfSk7cmV0dXJuIGJ9ZnVuY3Rpb24gbmUoKXt2YXIgYj0vXlxccyooXFxbfFxce1teXFx7XSkvLGE9L1tcXH1cXF1dXFxzKiQvLGM9L15cXClcXF1cXH0nLD9cXG4vLGQ9e1wiQ29udGVudC1UeXBlXCI6XCJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLThcIn0sZT10aGlzLmRlZmF1bHRzPXt0cmFuc2Zvcm1SZXNwb25zZTpbZnVuY3Rpb24oZCl7RyhkKSYmKGQ9ZC5yZXBsYWNlKGMsXCJcIiksYi50ZXN0KGQpJiZhLnRlc3QoZCkmJihkPWRjKGQpKSk7cmV0dXJuIGR9XSx0cmFuc2Zvcm1SZXF1ZXN0OltmdW5jdGlvbihhKXtyZXR1cm4gUShhKSYmXCJbb2JqZWN0IEZpbGVdXCIhPT15YS5jYWxsKGEpJiZcIltvYmplY3QgQmxvYl1cIiE9PXlhLmNhbGwoYSk/c2EoYSk6YX1dLGhlYWRlcnM6e2NvbW1vbjp7QWNjZXB0OlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpbiwgKi8qXCJ9LFxucG9zdDpqYShkKSxwdXQ6amEoZCkscGF0Y2g6amEoZCl9LHhzcmZDb29raWVOYW1lOlwiWFNSRi1UT0tFTlwiLHhzcmZIZWFkZXJOYW1lOlwiWC1YU1JGLVRPS0VOXCJ9LGY9dGhpcy5pbnRlcmNlcHRvcnM9W107dGhpcy4kZ2V0PVtcIiRodHRwQmFja2VuZFwiLFwiJGJyb3dzZXJcIixcIiRjYWNoZUZhY3RvcnlcIixcIiRyb290U2NvcGVcIixcIiRxXCIsXCIkaW5qZWN0b3JcIixmdW5jdGlvbihhLGIsYyxkLG0scCl7ZnVuY3Rpb24gayhhKXtmdW5jdGlvbiBiKGEpe3ZhciBkPUUoe30sYSx7ZGF0YTpIYyhhLmRhdGEsYS5oZWFkZXJzLGMudHJhbnNmb3JtUmVzcG9uc2UpfSk7cmV0dXJuIDIwMDw9YS5zdGF0dXMmJjMwMD5hLnN0YXR1cz9kOm0ucmVqZWN0KGQpfXZhciBjPXttZXRob2Q6XCJnZXRcIix0cmFuc2Zvcm1SZXF1ZXN0OmUudHJhbnNmb3JtUmVxdWVzdCx0cmFuc2Zvcm1SZXNwb25zZTplLnRyYW5zZm9ybVJlc3BvbnNlfSxkPWZ1bmN0aW9uKGEpe3ZhciBiPWUuaGVhZGVycyxjPUUoe30sYS5oZWFkZXJzKSxcbmQsZixiPUUoe30sYi5jb21tb24sYltKKGEubWV0aG9kKV0pO2E6Zm9yKGQgaW4gYil7YT1KKGQpO2ZvcihmIGluIGMpaWYoSihmKT09PWEpY29udGludWUgYTtjW2RdPWJbZF19KGZ1bmN0aW9uKGEpe3ZhciBiO3EoYSxmdW5jdGlvbihjLGQpe0EoYykmJihiPWMoKSxudWxsIT1iP2FbZF09YjpkZWxldGUgYVtkXSl9KX0pKGMpO3JldHVybiBjfShhKTtFKGMsYSk7Yy5oZWFkZXJzPWQ7Yy5tZXRob2Q9aWIoYy5tZXRob2QpO3ZhciBmPVtmdW5jdGlvbihhKXtkPWEuaGVhZGVyczt2YXIgYz1IYyhhLmRhdGEsR2MoZCksYS50cmFuc2Zvcm1SZXF1ZXN0KTtGKGMpJiZxKGQsZnVuY3Rpb24oYSxiKXtcImNvbnRlbnQtdHlwZVwiPT09SihiKSYmZGVsZXRlIGRbYl19KTtGKGEud2l0aENyZWRlbnRpYWxzKSYmIUYoZS53aXRoQ3JlZGVudGlhbHMpJiYoYS53aXRoQ3JlZGVudGlhbHM9ZS53aXRoQ3JlZGVudGlhbHMpO3JldHVybiBzKGEsYyxkKS50aGVuKGIsYil9LHRdLGc9bS53aGVuKGMpO2ZvcihxKHUsXG5mdW5jdGlvbihhKXsoYS5yZXF1ZXN0fHxhLnJlcXVlc3RFcnJvcikmJmYudW5zaGlmdChhLnJlcXVlc3QsYS5yZXF1ZXN0RXJyb3IpOyhhLnJlc3BvbnNlfHxhLnJlc3BvbnNlRXJyb3IpJiZmLnB1c2goYS5yZXNwb25zZSxhLnJlc3BvbnNlRXJyb3IpfSk7Zi5sZW5ndGg7KXthPWYuc2hpZnQoKTt2YXIgaD1mLnNoaWZ0KCksZz1nLnRoZW4oYSxoKX1nLnN1Y2Nlc3M9ZnVuY3Rpb24oYSl7Zy50aGVuKGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxjKX0pO3JldHVybiBnfTtnLmVycm9yPWZ1bmN0aW9uKGEpe2cudGhlbihudWxsLGZ1bmN0aW9uKGIpe2EoYi5kYXRhLGIuc3RhdHVzLGIuaGVhZGVycyxjKX0pO3JldHVybiBnfTtyZXR1cm4gZ31mdW5jdGlvbiBzKGMsZixuKXtmdW5jdGlvbiBzKGEsYixjLGUpe0MmJigyMDA8PWEmJjMwMD5hP0MucHV0KFgsW2EsYixGYyhjKSxlXSk6Qy5yZW1vdmUoWCkpO3AoYixhLGMsZSk7ZC4kJHBoYXNlfHxkLiRhcHBseSgpfVxuZnVuY3Rpb24gcChhLGIsZCxlKXtiPU1hdGgubWF4KGIsMCk7KDIwMDw9YiYmMzAwPmI/cS5yZXNvbHZlOnEucmVqZWN0KSh7ZGF0YTphLHN0YXR1czpiLGhlYWRlcnM6R2MoZCksY29uZmlnOmMsc3RhdHVzVGV4dDplfSl9ZnVuY3Rpb24gdSgpe3ZhciBhPU1hKGsucGVuZGluZ1JlcXVlc3RzLGMpOy0xIT09YSYmay5wZW5kaW5nUmVxdWVzdHMuc3BsaWNlKGEsMSl9dmFyIHE9bS5kZWZlcigpLEg9cS5wcm9taXNlLEMsRCxYPXIoYy51cmwsYy5wYXJhbXMpO2sucGVuZGluZ1JlcXVlc3RzLnB1c2goYyk7SC50aGVuKHUsdSk7KGMuY2FjaGV8fGUuY2FjaGUpJiYoITEhPT1jLmNhY2hlJiZcIkdFVFwiPT1jLm1ldGhvZCkmJihDPVEoYy5jYWNoZSk/Yy5jYWNoZTpRKGUuY2FjaGUpP2UuY2FjaGU6TCk7aWYoQylpZihEPUMuZ2V0KFgpLHYoRCkpe2lmKEQudGhlbilyZXR1cm4gRC50aGVuKHUsdSksRDtNKEQpP3AoRFsxXSxEWzBdLGphKERbMl0pLERbM10pOnAoRCwyMDAse30sXCJPS1wiKX1lbHNlIEMucHV0KFgsXG5IKTtGKEQpJiYoKEQ9T2IoYy51cmwpP2IuY29va2llcygpW2MueHNyZkNvb2tpZU5hbWV8fGUueHNyZkNvb2tpZU5hbWVdOnQpJiYobltjLnhzcmZIZWFkZXJOYW1lfHxlLnhzcmZIZWFkZXJOYW1lXT1EKSxhKGMubWV0aG9kLFgsZixzLG4sYy50aW1lb3V0LGMud2l0aENyZWRlbnRpYWxzLGMucmVzcG9uc2VUeXBlKSk7cmV0dXJuIEh9ZnVuY3Rpb24gcihhLGIpe2lmKCFiKXJldHVybiBhO3ZhciBjPVtdO2hkKGIsZnVuY3Rpb24oYSxiKXtudWxsPT09YXx8RihhKXx8KE0oYSl8fChhPVthXSkscShhLGZ1bmN0aW9uKGEpe1EoYSkmJihkYShhKT9hPWEudG9JU09TdHJpbmcoKTpRKGEpJiYoYT1zYShhKSkpO2MucHVzaCh6YShiKStcIj1cIit6YShhKSl9KSl9KTswPGMubGVuZ3RoJiYoYSs9KC0xPT1hLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiKStjLmpvaW4oXCImXCIpKTtyZXR1cm4gYX12YXIgTD1jKFwiJGh0dHBcIiksdT1bXTtxKGYsZnVuY3Rpb24oYSl7dS51bnNoaWZ0KEcoYSk/cC5nZXQoYSk6XG5wLmludm9rZShhKSl9KTtrLnBlbmRpbmdSZXF1ZXN0cz1bXTsoZnVuY3Rpb24oYSl7cShhcmd1bWVudHMsZnVuY3Rpb24oYSl7a1thXT1mdW5jdGlvbihiLGMpe3JldHVybiBrKEUoY3x8e30se21ldGhvZDphLHVybDpifSkpfX0pfSkoXCJnZXRcIixcImRlbGV0ZVwiLFwiaGVhZFwiLFwianNvbnBcIik7KGZ1bmN0aW9uKGEpe3EoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2tbYV09ZnVuY3Rpb24oYixjLGQpe3JldHVybiBrKEUoZHx8e30se21ldGhvZDphLHVybDpiLGRhdGE6Y30pKX19KX0pKFwicG9zdFwiLFwicHV0XCIsXCJwYXRjaFwiKTtrLmRlZmF1bHRzPWU7cmV0dXJuIGt9XX1mdW5jdGlvbiBVZShiKXtpZig4Pj1UJiYoIWIubWF0Y2goL14oZ2V0fHBvc3R8aGVhZHxwdXR8ZGVsZXRlfG9wdGlvbnMpJC9pKXx8IVAuWE1MSHR0cFJlcXVlc3QpKXJldHVybiBuZXcgUC5BY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7aWYoUC5YTUxIdHRwUmVxdWVzdClyZXR1cm4gbmV3IFAuWE1MSHR0cFJlcXVlc3Q7XG50aHJvdyBPKFwiJGh0dHBCYWNrZW5kXCIpKFwibm94aHJcIik7fWZ1bmN0aW9uIG9lKCl7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkd2luZG93XCIsXCIkZG9jdW1lbnRcIixmdW5jdGlvbihiLGEsYyl7cmV0dXJuIFZlKGIsVWUsYi5kZWZlcixhLmFuZ3VsYXIuY2FsbGJhY2tzLGNbMF0pfV19ZnVuY3Rpb24gVmUoYixhLGMsZCxlKXtmdW5jdGlvbiBmKGEsYixjKXt2YXIgZj1lLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksaD1udWxsO2YudHlwZT1cInRleHQvamF2YXNjcmlwdFwiO2Yuc3JjPWE7Zi5hc3luYz0hMDtoPWZ1bmN0aW9uKGEpe1RhKGYsXCJsb2FkXCIsaCk7VGEoZixcImVycm9yXCIsaCk7ZS5ib2R5LnJlbW92ZUNoaWxkKGYpO2Y9bnVsbDt2YXIgZz0tMSxyPVwidW5rbm93blwiO2EmJihcImxvYWRcIiE9PWEudHlwZXx8ZFtiXS5jYWxsZWR8fChhPXt0eXBlOlwiZXJyb3JcIn0pLHI9YS50eXBlLGc9XCJlcnJvclwiPT09YS50eXBlPzQwNDoyMDApO2MmJmMoZyxyKX07c2IoZixcImxvYWRcIixoKTtzYihmLFwiZXJyb3JcIixcbmgpO2UuYm9keS5hcHBlbmRDaGlsZChmKTtyZXR1cm4gaH12YXIgaD0tMTtyZXR1cm4gZnVuY3Rpb24oZSxuLGwsbSxwLGsscyxyKXtmdW5jdGlvbiBMKCl7Sz1oO3gmJngoKTt5JiZ5LmFib3J0KCl9ZnVuY3Rpb24gdShhLGQsZSxmLGcpe04mJmMuY2FuY2VsKE4pO3g9eT1udWxsOzA9PT1kJiYoZD1lPzIwMDpcImZpbGVcIj09dmEobikucHJvdG9jb2w/NDA0OjApO2EoMTIyMz09PWQ/MjA0OmQsZSxmLGd8fFwiXCIpO2IuJCRjb21wbGV0ZU91dHN0YW5kaW5nUmVxdWVzdChCKX12YXIgSztiLiQkaW5jT3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQoKTtuPW58fGIudXJsKCk7aWYoXCJqc29ucFwiPT1KKGUpKXt2YXIgdz1cIl9cIisoZC5jb3VudGVyKyspLnRvU3RyaW5nKDM2KTtkW3ddPWZ1bmN0aW9uKGEpe2Rbd10uZGF0YT1hO2Rbd10uY2FsbGVkPSEwfTt2YXIgeD1mKG4ucmVwbGFjZShcIkpTT05fQ0FMTEJBQ0tcIixcImFuZ3VsYXIuY2FsbGJhY2tzLlwiK3cpLHcsZnVuY3Rpb24oYSxiKXt1KG0sYSxkW3ddLmRhdGEsXG5cIlwiLGIpO2Rbd109Qn0pfWVsc2V7dmFyIHk9YShlKTt5Lm9wZW4oZSxuLCEwKTtxKHAsZnVuY3Rpb24oYSxiKXt2KGEpJiZ5LnNldFJlcXVlc3RIZWFkZXIoYixhKX0pO3kub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoeSYmND09eS5yZWFkeVN0YXRlKXt2YXIgYT1udWxsLGI9bnVsbCxjPVwiXCI7SyE9PWgmJihhPXkuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCksYj1cInJlc3BvbnNlXCJpbiB5P3kucmVzcG9uc2U6eS5yZXNwb25zZVRleHQpO0s9PT1oJiYxMD5UfHwoYz15LnN0YXR1c1RleHQpO3UobSxLfHx5LnN0YXR1cyxiLGEsYyl9fTtzJiYoeS53aXRoQ3JlZGVudGlhbHM9ITApO2lmKHIpdHJ5e3kucmVzcG9uc2VUeXBlPXJ9Y2F0Y2goWSl7aWYoXCJqc29uXCIhPT1yKXRocm93IFk7fXkuc2VuZChsfHxudWxsKX1pZigwPGspdmFyIE49YyhMLGspO2Vsc2UgayYmay50aGVuJiZrLnRoZW4oTCl9fWZ1bmN0aW9uIGxlKCl7dmFyIGI9XCJ7e1wiLGE9XCJ9fVwiO3RoaXMuc3RhcnRTeW1ib2w9XG5mdW5jdGlvbihhKXtyZXR1cm4gYT8oYj1hLHRoaXMpOmJ9O3RoaXMuZW5kU3ltYm9sPWZ1bmN0aW9uKGIpe3JldHVybiBiPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiRwYXJzZVwiLFwiJGV4Y2VwdGlvbkhhbmRsZXJcIixcIiRzY2VcIixmdW5jdGlvbihjLGQsZSl7ZnVuY3Rpb24gZihhKXtyZXR1cm5cIlxcXFxcXFxcXFxcXFwiK2F9ZnVuY3Rpb24gaChmLGgscyxyKXtmdW5jdGlvbiBMKGEpe3RyeXt2YXIgYjt2YXIgYz1zP2UuZ2V0VHJ1c3RlZChzLGEpOmUudmFsdWVPZihhKTtpZihudWxsPT1jKWI9XCJcIjtlbHNle3N3aXRjaCh0eXBlb2YgYyl7Y2FzZSBcInN0cmluZ1wiOmJyZWFrO2Nhc2UgXCJudW1iZXJcIjpjPVwiXCIrYzticmVhaztkZWZhdWx0OmM9c2EoYyl9Yj1jfXJldHVybiBifWNhdGNoKGcpe2E9UGIoXCJpbnRlcnJcIixmLGcudG9TdHJpbmcoKSksZChhKX19cj0hIXI7Zm9yKHZhciB1LEssdz0wLHg9W10seT1bXSxZPVtdLE49Zi5sZW5ndGgsUj0hMSxIPSExLEM9W107dzxOOylpZigtMSE9KHU9Zi5pbmRleE9mKGIsXG53KSkmJi0xIT0oSz1mLmluZGV4T2YoYSx1K2cpKSl3IT09dSYmKEg9ITApLHgucHVzaChmLnN1YnN0cmluZyh3LHUpKSx3PWYuc3Vic3RyaW5nKHUrZyxLKSx5LnB1c2godyksWS5wdXNoKGModyxMKSksdz1LK24sUj0hMDtlbHNle3chPT1OJiYoSD0hMCx4LnB1c2goZi5zdWJzdHJpbmcodykpKTticmVha31xKHgsZnVuY3Rpb24oYyxkKXt4W2RdPXhbZF0ucmVwbGFjZShsLGIpLnJlcGxhY2UobSxhKX0pO3gubGVuZ3RoPT09eS5sZW5ndGgmJngucHVzaChcIlwiKTtpZihzJiZSJiYoSHx8MTx5Lmxlbmd0aCkpdGhyb3cgUGIoXCJub2NvbmNhdFwiLGYpO2lmKCFofHxSKXtDLmxlbmd0aD14Lmxlbmd0aCt5Lmxlbmd0aDt2YXIgRD1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXkubGVuZ3RoO2I8YztiKyspe2lmKHImJkYoYVtiXSkpcmV0dXJuO0NbMipiXT14W2JdO0NbMipiKzFdPWFbYl19Q1syKmNdPXhbY107cmV0dXJuIEMuam9pbihcIlwiKX07cmV0dXJuIEUoZnVuY3Rpb24oYSl7dmFyIGI9XG4wLGM9eS5sZW5ndGgsZT1BcnJheShjKTt0cnl7Zm9yKDtiPGM7YisrKWVbYl09WVtiXShhKTtyZXR1cm4gRChlKX1jYXRjaChnKXthPVBiKFwiaW50ZXJyXCIsZixnLnRvU3RyaW5nKCkpLGQoYSl9fSx7ZXhwOmYsc2VwYXJhdG9yczp4LGV4cHJlc3Npb25zOnksJCR3YXRjaERlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlO3JldHVybiBhLiR3YXRjaEdyb3VwKFksZnVuY3Rpb24oYyxkKXt2YXIgZj1EKGMpO0EoYikmJmIuY2FsbCh0aGlzLGYsYyE9PWQ/ZTpmLGEpO2U9Zn0sYyxkKX19KX19dmFyIGc9Yi5sZW5ndGgsbj1hLmxlbmd0aCxsPVJlZ0V4cChiLnJlcGxhY2UoLy4vZyxmKSxcImdcIiksbT1SZWdFeHAoYS5yZXBsYWNlKC8uL2csZiksXCJnXCIpO2guc3RhcnRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYn07aC5lbmRTeW1ib2w9ZnVuY3Rpb24oKXtyZXR1cm4gYX07cmV0dXJuIGh9XX1mdW5jdGlvbiBtZSgpe3RoaXMuJGdldD1bXCIkcm9vdFNjb3BlXCIsXCIkd2luZG93XCIsXCIkcVwiLFxuXCIkJHFcIixmdW5jdGlvbihiLGEsYyxkKXtmdW5jdGlvbiBlKGUsZyxuLGwpe3ZhciBtPWEuc2V0SW50ZXJ2YWwscD1hLmNsZWFySW50ZXJ2YWwsaz0wLHM9dihsKSYmIWwscj0ocz9kOmMpLmRlZmVyKCksTD1yLnByb21pc2U7bj12KG4pP246MDtMLnRoZW4obnVsbCxudWxsLGUpO0wuJCRpbnRlcnZhbElkPW0oZnVuY3Rpb24oKXtyLm5vdGlmeShrKyspOzA8biYmaz49biYmKHIucmVzb2x2ZShrKSxwKEwuJCRpbnRlcnZhbElkKSxkZWxldGUgZltMLiQkaW50ZXJ2YWxJZF0pO3N8fGIuJGFwcGx5KCl9LGcpO2ZbTC4kJGludGVydmFsSWRdPXI7cmV0dXJuIEx9dmFyIGY9e307ZS5jYW5jZWw9ZnVuY3Rpb24oYil7cmV0dXJuIGImJmIuJCRpbnRlcnZhbElkIGluIGY/KGZbYi4kJGludGVydmFsSWRdLnJlamVjdChcImNhbmNlbGVkXCIpLGEuY2xlYXJJbnRlcnZhbChiLiQkaW50ZXJ2YWxJZCksZGVsZXRlIGZbYi4kJGludGVydmFsSWRdLCEwKTohMX07cmV0dXJuIGV9XX1mdW5jdGlvbiB1ZCgpe3RoaXMuJGdldD1cbmZ1bmN0aW9uKCl7cmV0dXJue2lkOlwiZW4tdXNcIixOVU1CRVJfRk9STUFUUzp7REVDSU1BTF9TRVA6XCIuXCIsR1JPVVBfU0VQOlwiLFwiLFBBVFRFUk5TOlt7bWluSW50OjEsbWluRnJhYzowLG1heEZyYWM6Myxwb3NQcmU6XCJcIixwb3NTdWY6XCJcIixuZWdQcmU6XCItXCIsbmVnU3VmOlwiXCIsZ1NpemU6MyxsZ1NpemU6M30se21pbkludDoxLG1pbkZyYWM6MixtYXhGcmFjOjIscG9zUHJlOlwiXFx1MDBhNFwiLHBvc1N1ZjpcIlwiLG5lZ1ByZTpcIihcXHUwMGE0XCIsbmVnU3VmOlwiKVwiLGdTaXplOjMsbGdTaXplOjN9XSxDVVJSRU5DWV9TWU06XCIkXCJ9LERBVEVUSU1FX0ZPUk1BVFM6e01PTlRIOlwiSmFudWFyeSBGZWJydWFyeSBNYXJjaCBBcHJpbCBNYXkgSnVuZSBKdWx5IEF1Z3VzdCBTZXB0ZW1iZXIgT2N0b2JlciBOb3ZlbWJlciBEZWNlbWJlclwiLnNwbGl0KFwiIFwiKSxTSE9SVE1PTlRIOlwiSmFuIEZlYiBNYXIgQXByIE1heSBKdW4gSnVsIEF1ZyBTZXAgT2N0IE5vdiBEZWNcIi5zcGxpdChcIiBcIiksREFZOlwiU3VuZGF5IE1vbmRheSBUdWVzZGF5IFdlZG5lc2RheSBUaHVyc2RheSBGcmlkYXkgU2F0dXJkYXlcIi5zcGxpdChcIiBcIiksXG5TSE9SVERBWTpcIlN1biBNb24gVHVlIFdlZCBUaHUgRnJpIFNhdFwiLnNwbGl0KFwiIFwiKSxBTVBNUzpbXCJBTVwiLFwiUE1cIl0sbWVkaXVtOlwiTU1NIGQsIHkgaDptbTpzcyBhXCIsXCJzaG9ydFwiOlwiTS9kL3l5IGg6bW0gYVwiLGZ1bGxEYXRlOlwiRUVFRSwgTU1NTSBkLCB5XCIsbG9uZ0RhdGU6XCJNTU1NIGQsIHlcIixtZWRpdW1EYXRlOlwiTU1NIGQsIHlcIixzaG9ydERhdGU6XCJNL2QveXlcIixtZWRpdW1UaW1lOlwiaDptbTpzcyBhXCIsc2hvcnRUaW1lOlwiaDptbSBhXCJ9LHBsdXJhbENhdDpmdW5jdGlvbihiKXtyZXR1cm4gMT09PWI/XCJvbmVcIjpcIm90aGVyXCJ9fX19ZnVuY3Rpb24gUWIoYil7Yj1iLnNwbGl0KFwiL1wiKTtmb3IodmFyIGE9Yi5sZW5ndGg7YS0tOyliW2FdPWViKGJbYV0pO3JldHVybiBiLmpvaW4oXCIvXCIpfWZ1bmN0aW9uIEljKGIsYSxjKXtiPXZhKGIsYyk7YS4kJHByb3RvY29sPWIucHJvdG9jb2w7YS4kJGhvc3Q9Yi5ob3N0bmFtZTthLiQkcG9ydD1VKGIucG9ydCl8fFdlW2IucHJvdG9jb2xdfHxudWxsfVxuZnVuY3Rpb24gSmMoYixhLGMpe3ZhciBkPVwiL1wiIT09Yi5jaGFyQXQoMCk7ZCYmKGI9XCIvXCIrYik7Yj12YShiLGMpO2EuJCRwYXRoPWRlY29kZVVSSUNvbXBvbmVudChkJiZcIi9cIj09PWIucGF0aG5hbWUuY2hhckF0KDApP2IucGF0aG5hbWUuc3Vic3RyaW5nKDEpOmIucGF0aG5hbWUpO2EuJCRzZWFyY2g9ZmMoYi5zZWFyY2gpO2EuJCRoYXNoPWRlY29kZVVSSUNvbXBvbmVudChiLmhhc2gpO2EuJCRwYXRoJiZcIi9cIiE9YS4kJHBhdGguY2hhckF0KDApJiYoYS4kJHBhdGg9XCIvXCIrYS4kJHBhdGgpfWZ1bmN0aW9uIHBhKGIsYSl7aWYoMD09PWEuaW5kZXhPZihiKSlyZXR1cm4gYS5zdWJzdHIoYi5sZW5ndGgpfWZ1bmN0aW9uIFhhKGIpe3ZhciBhPWIuaW5kZXhPZihcIiNcIik7cmV0dXJuLTE9PWE/YjpiLnN1YnN0cigwLGEpfWZ1bmN0aW9uIFJiKGIpe3JldHVybiBiLnN1YnN0cigwLFhhKGIpLmxhc3RJbmRleE9mKFwiL1wiKSsxKX1mdW5jdGlvbiBLYyhiLGEpe3RoaXMuJCRodG1sNT0hMDthPWF8fFxuXCJcIjt2YXIgYz1SYihiKTtJYyhiLHRoaXMsYik7dGhpcy4kJHBhcnNlPWZ1bmN0aW9uKGEpe3ZhciBlPXBhKGMsYSk7aWYoIUcoZSkpdGhyb3cgU2IoXCJpcHRocHJmeFwiLGEsYyk7SmMoZSx0aGlzLGIpO3RoaXMuJCRwYXRofHwodGhpcy4kJHBhdGg9XCIvXCIpO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGE9RWIodGhpcy4kJHNlYXJjaCksYj10aGlzLiQkaGFzaD9cIiNcIitlYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPVFiKHRoaXMuJCRwYXRoKSsoYT9cIj9cIithOlwiXCIpK2I7dGhpcy4kJGFic1VybD1jK3RoaXMuJCR1cmwuc3Vic3RyKDEpfTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihkKXt2YXIgZTtpZigoZT1wYShiLGQpKSE9PXQpcmV0dXJuIGQ9ZSwoZT1wYShhLGUpKSE9PXQ/YysocGEoXCIvXCIsZSl8fGUpOmIrZDtpZigoZT1wYShjLGQpKSE9PXQpcmV0dXJuIGMrZTtpZihjPT1kK1wiL1wiKXJldHVybiBjfX1mdW5jdGlvbiBUYihiLGEpe3ZhciBjPVxuUmIoYik7SWMoYix0aGlzLGIpO3RoaXMuJCRwYXJzZT1mdW5jdGlvbihkKXt2YXIgZT1wYShiLGQpfHxwYShjLGQpLGU9XCIjXCI9PWUuY2hhckF0KDApP3BhKGEsZSk6dGhpcy4kJGh0bWw1P2U6XCJcIjtpZighRyhlKSl0aHJvdyBTYihcImloc2hwcmZ4XCIsZCxhKTtKYyhlLHRoaXMsYik7ZD10aGlzLiQkcGF0aDt2YXIgZj0vXlxcL1tBLVpdOihcXC8uKikvOzA9PT1lLmluZGV4T2YoYikmJihlPWUucmVwbGFjZShiLFwiXCIpKTtmLmV4ZWMoZSl8fChkPShlPWYuZXhlYyhkKSk/ZVsxXTpkKTt0aGlzLiQkcGF0aD1kO3RoaXMuJCRjb21wb3NlKCl9O3RoaXMuJCRjb21wb3NlPWZ1bmN0aW9uKCl7dmFyIGM9RWIodGhpcy4kJHNlYXJjaCksZT10aGlzLiQkaGFzaD9cIiNcIitlYih0aGlzLiQkaGFzaCk6XCJcIjt0aGlzLiQkdXJsPVFiKHRoaXMuJCRwYXRoKSsoYz9cIj9cIitjOlwiXCIpK2U7dGhpcy4kJGFic1VybD1iKyh0aGlzLiQkdXJsP2ErdGhpcy4kJHVybDpcIlwiKX07dGhpcy4kJHJld3JpdGU9ZnVuY3Rpb24oYSl7aWYoWGEoYik9PVxuWGEoYSkpcmV0dXJuIGF9fWZ1bmN0aW9uIFViKGIsYSl7dGhpcy4kJGh0bWw1PSEwO1RiLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYz1SYihiKTt0aGlzLiQkcmV3cml0ZT1mdW5jdGlvbihkKXt2YXIgZTtpZihiPT1YYShkKSlyZXR1cm4gZDtpZihlPXBhKGMsZCkpcmV0dXJuIGIrYStlO2lmKGM9PT1kK1wiL1wiKXJldHVybiBjfTt0aGlzLiQkY29tcG9zZT1mdW5jdGlvbigpe3ZhciBjPUViKHRoaXMuJCRzZWFyY2gpLGU9dGhpcy4kJGhhc2g/XCIjXCIrZWIodGhpcy4kJGhhc2gpOlwiXCI7dGhpcy4kJHVybD1RYih0aGlzLiQkcGF0aCkrKGM/XCI/XCIrYzpcIlwiKStlO3RoaXMuJCRhYnNVcmw9YithK3RoaXMuJCR1cmx9fWZ1bmN0aW9uIHRiKGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2JdfX1mdW5jdGlvbiBMYyhiLGEpe3JldHVybiBmdW5jdGlvbihjKXtpZihGKGMpKXJldHVybiB0aGlzW2JdO3RoaXNbYl09YShjKTt0aGlzLiQkY29tcG9zZSgpO3JldHVybiB0aGlzfX1mdW5jdGlvbiBwZSgpe3ZhciBiPVxuXCJcIixhPSExO3RoaXMuaGFzaFByZWZpeD1mdW5jdGlvbihhKXtyZXR1cm4gdihhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaHRtbDVNb2RlPWZ1bmN0aW9uKGIpe3JldHVybiB2KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PVtcIiRyb290U2NvcGVcIixcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJHJvb3RFbGVtZW50XCIsZnVuY3Rpb24oYyxkLGUsZil7ZnVuY3Rpb24gaChhKXtjLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsZy5hYnNVcmwoKSxhKX12YXIgZyxuLGw9ZC5iYXNlSHJlZigpLG09ZC51cmwoKSxwO2E/KHA9bS5zdWJzdHJpbmcoMCxtLmluZGV4T2YoXCIvXCIsbS5pbmRleE9mKFwiLy9cIikrMikpKyhsfHxcIi9cIiksbj1lLmhpc3Rvcnk/S2M6VWIpOihwPVhhKG0pLG49VGIpO2c9bmV3IG4ocCxcIiNcIitiKTtnLiQkcGFyc2UoZy4kJHJld3JpdGUobSkpO2Yub24oXCJjbGlja1wiLGZ1bmN0aW9uKGEpe2lmKCFhLmN0cmxLZXkmJiFhLm1ldGFLZXkmJjIhPWEud2hpY2gpe2Zvcih2YXIgZT1cbnooYS50YXJnZXQpO1wiYVwiIT09bWEoZVswXSk7KWlmKGVbMF09PT1mWzBdfHwhKGU9ZS5wYXJlbnQoKSlbMF0pcmV0dXJuO3ZhciBoPWUucHJvcChcImhyZWZcIik7UShoKSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09aC50b1N0cmluZygpJiYoaD12YShoLmFuaW1WYWwpLmhyZWYpO2lmKG49PT1VYil7dmFyIGs9ZS5hdHRyKFwiaHJlZlwiKXx8ZS5hdHRyKFwieGxpbms6aHJlZlwiKTtpZigwPmsuaW5kZXhPZihcIjovL1wiKSlpZihoPVwiI1wiK2IsXCIvXCI9PWtbMF0paD1wK2graztlbHNlIGlmKFwiI1wiPT1rWzBdKWg9cCtoKyhnLnBhdGgoKXx8XCIvXCIpK2s7ZWxzZXtmb3IodmFyIGw9Zy5wYXRoKCkuc3BsaXQoXCIvXCIpLGs9ay5zcGxpdChcIi9cIiksbT0wO208ay5sZW5ndGg7bSsrKVwiLlwiIT1rW21dJiYoXCIuLlwiPT1rW21dP2wucG9wKCk6a1ttXS5sZW5ndGgmJmwucHVzaChrW21dKSk7aD1wK2grbC5qb2luKFwiL1wiKX19bD1nLiQkcmV3cml0ZShoKTtoJiYoIWUuYXR0cihcInRhcmdldFwiKSYmbCYmXG4hYS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSkmJihhLnByZXZlbnREZWZhdWx0KCksbCE9ZC51cmwoKSYmKGcuJCRwYXJzZShsKSxjLiRhcHBseSgpLFAuYW5ndWxhcltcImZmLTY4NDIwOC1wcmV2ZW50RGVmYXVsdFwiXT0hMCkpfX0pO2cuYWJzVXJsKCkhPW0mJmQudXJsKGcuYWJzVXJsKCksITApO2Qub25VcmxDaGFuZ2UoZnVuY3Rpb24oYSl7Zy5hYnNVcmwoKSE9YSYmKGMuJGV2YWxBc3luYyhmdW5jdGlvbigpe3ZhciBiPWcuYWJzVXJsKCk7Zy4kJHBhcnNlKGEpO2MuJGJyb2FkY2FzdChcIiRsb2NhdGlvbkNoYW5nZVN0YXJ0XCIsYSxiKS5kZWZhdWx0UHJldmVudGVkPyhnLiQkcGFyc2UoYiksZC51cmwoYikpOmgoYil9KSxjLiQkcGhhc2V8fGMuJGRpZ2VzdCgpKX0pO3ZhciBrPTA7Yy4kd2F0Y2goZnVuY3Rpb24oKXt2YXIgYT1kLnVybCgpLGI9Zy4kJHJlcGxhY2U7ayYmYT09Zy5hYnNVcmwoKXx8KGsrKyxjLiRldmFsQXN5bmMoZnVuY3Rpb24oKXtjLiRicm9hZGNhc3QoXCIkbG9jYXRpb25DaGFuZ2VTdGFydFwiLFxuZy5hYnNVcmwoKSxhKS5kZWZhdWx0UHJldmVudGVkP2cuJCRwYXJzZShhKTooZC51cmwoZy5hYnNVcmwoKSxiKSxoKGEpKX0pKTtnLiQkcmVwbGFjZT0hMTtyZXR1cm4ga30pO3JldHVybiBnfV19ZnVuY3Rpb24gcWUoKXt2YXIgYj0hMCxhPXRoaXM7dGhpcy5kZWJ1Z0VuYWJsZWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHYoYSk/KGI9YSx0aGlzKTpifTt0aGlzLiRnZXQ9W1wiJHdpbmRvd1wiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSl7YSBpbnN0YW5jZW9mIEVycm9yJiYoYS5zdGFjaz9hPWEubWVzc2FnZSYmLTE9PT1hLnN0YWNrLmluZGV4T2YoYS5tZXNzYWdlKT9cIkVycm9yOiBcIithLm1lc3NhZ2UrXCJcXG5cIithLnN0YWNrOmEuc3RhY2s6YS5zb3VyY2VVUkwmJihhPWEubWVzc2FnZStcIlxcblwiK2Euc291cmNlVVJMK1wiOlwiK2EubGluZSkpO3JldHVybiBhfWZ1bmN0aW9uIGUoYSl7dmFyIGI9Yy5jb25zb2xlfHx7fSxlPWJbYV18fGIubG9nfHxCO2E9ITE7dHJ5e2E9ISFlLmFwcGx5fWNhdGNoKG4pe31yZXR1cm4gYT9cbmZ1bmN0aW9uKCl7dmFyIGE9W107cShhcmd1bWVudHMsZnVuY3Rpb24oYil7YS5wdXNoKGQoYikpfSk7cmV0dXJuIGUuYXBwbHkoYixhKX06ZnVuY3Rpb24oYSxiKXtlKGEsbnVsbD09Yj9cIlwiOmIpfX1yZXR1cm57bG9nOmUoXCJsb2dcIiksaW5mbzplKFwiaW5mb1wiKSx3YXJuOmUoXCJ3YXJuXCIpLGVycm9yOmUoXCJlcnJvclwiKSxkZWJ1ZzpmdW5jdGlvbigpe3ZhciBjPWUoXCJkZWJ1Z1wiKTtyZXR1cm4gZnVuY3Rpb24oKXtiJiZjLmFwcGx5KGEsYXJndW1lbnRzKX19KCl9fV19ZnVuY3Rpb24gcWEoYixhKXtpZihcIl9fZGVmaW5lR2V0dGVyX19cIj09PWJ8fFwiX19kZWZpbmVTZXR0ZXJfX1wiPT09Ynx8XCJfX2xvb2t1cEdldHRlcl9fXCI9PT1ifHxcIl9fbG9va3VwU2V0dGVyX19cIj09PWJ8fFwiX19wcm90b19fXCI9PT1iKXRocm93IGlhKFwiaXNlY2ZsZFwiLGEpO3JldHVybiBifWZ1bmN0aW9uIEphKGIsYSl7aWYoYil7aWYoYi5jb25zdHJ1Y3Rvcj09PWIpdGhyb3cgaWEoXCJpc2VjZm5cIixhKTtpZihiLndpbmRvdz09PVxuYil0aHJvdyBpYShcImlzZWN3aW5kb3dcIixhKTtpZihiLmNoaWxkcmVuJiYoYi5ub2RlTmFtZXx8Yi5wcm9wJiZiLmF0dHImJmIuZmluZCkpdGhyb3cgaWEoXCJpc2VjZG9tXCIsYSk7aWYoYj09PU9iamVjdCl0aHJvdyBpYShcImlzZWNvYmpcIixhKTt9cmV0dXJuIGJ9ZnVuY3Rpb24gdWIoYixhLGMsZCl7YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGUsZj0wOzE8YS5sZW5ndGg7ZisrKXtlPXFhKGEuc2hpZnQoKSxkKTt2YXIgaD1iW2VdO2h8fChoPXt9LGJbZV09aCk7Yj1ofWU9cWEoYS5zaGlmdCgpLGQpO0phKGIsZCk7SmEoYltlXSxkKTtyZXR1cm4gYltlXT1jfWZ1bmN0aW9uIE1jKGIsYSxjLGQsZSxmKXtxYShiLGYpO3FhKGEsZik7cWEoYyxmKTtxYShkLGYpO3FhKGUsZik7cmV0dXJuIGZ1bmN0aW9uKGYsZyl7dmFyIG49ZyYmZy5oYXNPd25Qcm9wZXJ0eShiKT9nOmY7aWYobnVsbD09bilyZXR1cm4gbjtuPW5bYl07aWYoIWEpcmV0dXJuIG47aWYobnVsbD09bilyZXR1cm4gdDtuPW5bYV07XG5pZighYylyZXR1cm4gbjtpZihudWxsPT1uKXJldHVybiB0O249bltjXTtpZighZClyZXR1cm4gbjtpZihudWxsPT1uKXJldHVybiB0O249bltkXTtyZXR1cm4gZT9udWxsPT1uP3Q6bj1uW2VdOm59fWZ1bmN0aW9uIE5jKGIsYSxjKXtpZihWYi5oYXNPd25Qcm9wZXJ0eShiKSlyZXR1cm4gVmJbYl07dmFyIGQ9Yi5zcGxpdChcIi5cIiksZT1kLmxlbmd0aDtpZihhLmNzcClhPTY+ZT9NYyhkWzBdLGRbMV0sZFsyXSxkWzNdLGRbNF0sYyk6ZnVuY3Rpb24oYSxiKXt2YXIgZj0wLGw7ZG8gbD1NYyhkW2YrK10sZFtmKytdLGRbZisrXSxkW2YrK10sZFtmKytdLGMpKGEsYiksYj10LGE9bDt3aGlsZShmPGUpO3JldHVybiBsfTtlbHNle3ZhciBmPVwidmFyIHA7XFxuXCI7cShkLGZ1bmN0aW9uKGEsYil7cWEoYSxjKTtmKz1cImlmKHMgPT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZDtcXG5zPVwiKyhiP1wic1wiOicoKGsmJmsuaGFzT3duUHJvcGVydHkoXCInK2ErJ1wiKSk/azpzKScpKydbXCInK2ErJ1wiXTtcXG4nfSk7XG5mKz1cInJldHVybiBzO1wiO2E9bmV3IEZ1bmN0aW9uKFwic1wiLFwia1wiLGYpO2EudG9TdHJpbmc9YmEoZil9XCJoYXNPd25Qcm9wZXJ0eVwiIT09YiYmKFZiW2JdPWEpO3JldHVybiBhfWZ1bmN0aW9uIHJlKCl7dmFyIGI9e30sYT17Y3NwOiExfTt0aGlzLiRnZXQ9W1wiJGZpbHRlclwiLFwiJHNuaWZmZXJcIixmdW5jdGlvbihjLGQpe2Z1bmN0aW9uIGUoYSxiLGMsZCxlKXt2YXIgZixoO3JldHVybiBmPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpfSxmdW5jdGlvbihhLGMsZCl7aD1hO0EoYikmJmIuYXBwbHkodGhpcyxhcmd1bWVudHMpO3YoYSkmJmQuJCRwb3N0RGlnZXN0KGZ1bmN0aW9uKCl7dihoKSYmZigpfSl9LGMsZCl9ZnVuY3Rpb24gZihhLGIsYyxkLGUpe3ZhciBmO3JldHVybiBmPWEuJHdhdGNoKGZ1bmN0aW9uKGEpe3JldHVybiBlKGEpfSxmdW5jdGlvbihhLGMsZCl7QShiKSYmYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7ZigpfSxjLGQpfWZ1bmN0aW9uIGgoYSxiKXtpZihBKGIpKXt2YXIgYz1cbmZ1bmN0aW9uKGMsZCl7dmFyIGU9YShjLGQpLGY9YihlLGMsZCk7cmV0dXJuIHYoZSk/ZjplfTtjLiQkd2F0Y2hEZWxlZ2F0ZT1hLiQkd2F0Y2hEZWxlZ2F0ZTtyZXR1cm4gY31yZXR1cm4gYX1hLmNzcD1kLmNzcDtyZXR1cm4gZnVuY3Rpb24oZCxuKXt2YXIgbCxtLHA9ZD1aKGQpO3N3aXRjaCh0eXBlb2YgZCl7Y2FzZSBcInN0cmluZ1wiOnJldHVybiBiLmhhc093blByb3BlcnR5KHApP2w9YltwXTooXCI6XCI9PT1kLmNoYXJBdCgwKSYmXCI6XCI9PT1kLmNoYXJBdCgxKSYmKG09ITAsZD1kLnN1YnN0cmluZygyKSksbD1uZXcgV2IoYSksbD0obmV3IFlhKGwsYyxhKSkucGFyc2UoZCksbC5jb25zdGFudD9sLiQkd2F0Y2hEZWxlZ2F0ZT1mOm0mJihsLiQkd2F0Y2hEZWxlZ2F0ZT1lKSxcImhhc093blByb3BlcnR5XCIhPT1wJiYoYltwXT1sKSksaChsLG4pO2Nhc2UgXCJmdW5jdGlvblwiOnJldHVybiBoKGQsbik7ZGVmYXVsdDpyZXR1cm4gaChCLG4pfX19XX1mdW5jdGlvbiB0ZSgpe3RoaXMuJGdldD1cbltcIiRyb290U2NvcGVcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhKXtyZXR1cm4gT2MoZnVuY3Rpb24oYSl7Yi4kZXZhbEFzeW5jKGEpfSxhKX1dfWZ1bmN0aW9uIHVlKCl7dGhpcy4kZ2V0PVtcIiRicm93c2VyXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLGZ1bmN0aW9uKGIsYSl7cmV0dXJuIE9jKGZ1bmN0aW9uKGEpe2IuZGVmZXIoYSl9LGEpfV19ZnVuY3Rpb24gT2MoYixhKXtmdW5jdGlvbiBjKGEpe3JldHVybiBhfWZ1bmN0aW9uIGQoYSl7cmV0dXJuIGgoYSl9dmFyIGU9ZnVuY3Rpb24oKXt2YXIgaD1bXSxsLG07cmV0dXJuIG09e3Jlc29sdmU6ZnVuY3Rpb24oYSl7aWYoaCl7dmFyIGM9aDtoPXQ7bD1mKGEpO2MubGVuZ3RoJiZiKGZ1bmN0aW9uKCl7Zm9yKHZhciBhLGI9MCxkPWMubGVuZ3RoO2I8ZDtiKyspYT1jW2JdLGwudGhlbihhWzBdLGFbMV0sYVsyXSl9KX19LHJlamVjdDpmdW5jdGlvbihhKXttLnJlc29sdmUoZyhhKSl9LG5vdGlmeTpmdW5jdGlvbihhKXtpZihoKXt2YXIgYz1cbmg7aC5sZW5ndGgmJmIoZnVuY3Rpb24oKXtmb3IodmFyIGIsZD0wLGU9Yy5sZW5ndGg7ZDxlO2QrKyliPWNbZF0sYlsyXShhKX0pfX0scHJvbWlzZTp7dGhlbjpmdW5jdGlvbihiLGYsZyl7dmFyIG09ZSgpLEw9ZnVuY3Rpb24oZCl7dHJ5e20ucmVzb2x2ZSgoQShiKT9iOmMpKGQpKX1jYXRjaChlKXttLnJlamVjdChlKSxhKGUpfX0sdT1mdW5jdGlvbihiKXt0cnl7bS5yZXNvbHZlKChBKGYpP2Y6ZCkoYikpfWNhdGNoKGMpe20ucmVqZWN0KGMpLGEoYyl9fSxLPWZ1bmN0aW9uKGIpe3RyeXttLm5vdGlmeSgoQShnKT9nOmMpKGIpKX1jYXRjaChkKXthKGQpfX07aD9oLnB1c2goW0wsdSxLXSk6bC50aGVuKEwsdSxLKTtyZXR1cm4gbS5wcm9taXNlfSxcImNhdGNoXCI6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudGhlbihudWxsLGEpfSxcImZpbmFsbHlcIjpmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYyl7dmFyIGQ9ZSgpO2M/ZC5yZXNvbHZlKGEpOmQucmVqZWN0KGEpO3JldHVybiBkLnByb21pc2V9XG5mdW5jdGlvbiBkKGUsZil7dmFyIGc9bnVsbDt0cnl7Zz0oYXx8YykoKX1jYXRjaChoKXtyZXR1cm4gYihoLCExKX1yZXR1cm4gZyYmQShnLnRoZW4pP2cudGhlbihmdW5jdGlvbigpe3JldHVybiBiKGUsZil9LGZ1bmN0aW9uKGEpe3JldHVybiBiKGEsITEpfSk6YihlLGYpfXJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24oYSl7cmV0dXJuIGQoYSwhMCl9LGZ1bmN0aW9uKGEpe3JldHVybiBkKGEsITEpfSl9fX19LGY9ZnVuY3Rpb24oYSl7cmV0dXJuIGEmJkEoYS50aGVuKT9hOnt0aGVuOmZ1bmN0aW9uKGMpe3ZhciBkPWUoKTtiKGZ1bmN0aW9uKCl7ZC5yZXNvbHZlKGMoYSkpfSk7cmV0dXJuIGQucHJvbWlzZX19fSxoPWZ1bmN0aW9uKGEpe3ZhciBiPWUoKTtiLnJlamVjdChhKTtyZXR1cm4gYi5wcm9taXNlfSxnPWZ1bmN0aW9uKGMpe3JldHVybnt0aGVuOmZ1bmN0aW9uKGYsZyl7dmFyIGg9ZSgpO2IoZnVuY3Rpb24oKXt0cnl7aC5yZXNvbHZlKChBKGcpP2c6ZCkoYykpfWNhdGNoKGIpe2gucmVqZWN0KGIpLFxuYShiKX19KTtyZXR1cm4gaC5wcm9taXNlfX19O3JldHVybntkZWZlcjplLHJlamVjdDpoLHdoZW46ZnVuY3Rpb24oZyxsLG0scCl7dmFyIGs9ZSgpLHMscj1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKEEobCk/bDpjKShiKX1jYXRjaChkKXtyZXR1cm4gYShkKSxoKGQpfX0sTD1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKEEobSk/bTpkKShiKX1jYXRjaChjKXtyZXR1cm4gYShjKSxoKGMpfX0sdT1mdW5jdGlvbihiKXt0cnl7cmV0dXJuKEEocCk/cDpjKShiKX1jYXRjaChkKXthKGQpfX07YihmdW5jdGlvbigpe2YoZykudGhlbihmdW5jdGlvbihhKXtzfHwocz0hMCxrLnJlc29sdmUoZihhKS50aGVuKHIsTCx1KSkpfSxmdW5jdGlvbihhKXtzfHwocz0hMCxrLnJlc29sdmUoTChhKSkpfSxmdW5jdGlvbihhKXtzfHxrLm5vdGlmeSh1KGEpKX0pfSk7cmV0dXJuIGsucHJvbWlzZX0sYWxsOmZ1bmN0aW9uKGEpe3ZhciBiPWUoKSxjPTAsZD1NKGEpP1tdOnt9O3EoYSxmdW5jdGlvbihhLGUpe2MrKztcbmYoYSkudGhlbihmdW5jdGlvbihhKXtkLmhhc093blByb3BlcnR5KGUpfHwoZFtlXT1hLC0tY3x8Yi5yZXNvbHZlKGQpKX0sZnVuY3Rpb24oYSl7ZC5oYXNPd25Qcm9wZXJ0eShlKXx8Yi5yZWplY3QoYSl9KX0pOzA9PT1jJiZiLnJlc29sdmUoZCk7cmV0dXJuIGIucHJvbWlzZX19fWZ1bmN0aW9uIEJlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYixhKXt2YXIgYz1iLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGIubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lLGQ9Yi5jYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi5tb3pDYW5jZWxBbmltYXRpb25GcmFtZXx8Yi53ZWJraXRDYW5jZWxSZXF1ZXN0QW5pbWF0aW9uRnJhbWUsZT0hIWMsZj1lP2Z1bmN0aW9uKGEpe3ZhciBiPWMoYSk7cmV0dXJuIGZ1bmN0aW9uKCl7ZChiKX19OmZ1bmN0aW9uKGIpe3ZhciBjPVxuYShiLDE2LjY2LCExKTtyZXR1cm4gZnVuY3Rpb24oKXthLmNhbmNlbChjKX19O2Yuc3VwcG9ydGVkPWU7cmV0dXJuIGZ9XX1mdW5jdGlvbiBzZSgpe3ZhciBiPTEwLGE9TyhcIiRyb290U2NvcGVcIiksYz1udWxsO3RoaXMuZGlnZXN0VHRsPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPWEpO3JldHVybiBifTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJHBhcnNlXCIsXCIkYnJvd3NlclwiLGZ1bmN0aW9uKGQsZSxmLGgpe2Z1bmN0aW9uIGcoKXt0aGlzLiRpZD0rK2NiO3RoaXMuJCRwaGFzZT10aGlzLiRwYXJlbnQ9dGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRuZXh0U2libGluZz10aGlzLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpc1tcInRoaXNcIl09dGhpcy4kcm9vdD10aGlzO3RoaXMuJCRkZXN0cm95ZWQ9ITE7dGhpcy4kJGFzeW5jUXVldWU9W107dGhpcy4kJHBvc3REaWdlc3RRdWV1ZT1bXTtcbnRoaXMuJCRsaXN0ZW5lcnM9e307dGhpcy4kJGxpc3RlbmVyQ291bnQ9e307dGhpcy4kJGlzb2xhdGVCaW5kaW5ncz17fX1mdW5jdGlvbiBuKGIpe2lmKGsuJCRwaGFzZSl0aHJvdyBhKFwiaW5wcm9nXCIsay4kJHBoYXNlKTtrLiQkcGhhc2U9Yn1mdW5jdGlvbiBsKGEsYil7dmFyIGM9ZihhKTtQYShjLGIpO3JldHVybiBjfWZ1bmN0aW9uIG0oYSxiLGMpe2RvIGEuJCRsaXN0ZW5lckNvdW50W2NdLT1iLDA9PT1hLiQkbGlzdGVuZXJDb3VudFtjXSYmZGVsZXRlIGEuJCRsaXN0ZW5lckNvdW50W2NdO3doaWxlKGE9YS4kcGFyZW50KX1mdW5jdGlvbiBwKCl7fWcucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpnLCRuZXc6ZnVuY3Rpb24oYSl7YT8oYT1uZXcgZyxhLiRyb290PXRoaXMuJHJvb3QsYS4kJGFzeW5jUXVldWU9dGhpcy4kJGFzeW5jUXVldWUsYS4kJHBvc3REaWdlc3RRdWV1ZT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlKToodGhpcy4kJGNoaWxkU2NvcGVDbGFzc3x8KHRoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9XG5mdW5jdGlvbigpe3RoaXMuJCR3YXRjaGVycz10aGlzLiQkbmV4dFNpYmxpbmc9dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPW51bGw7dGhpcy4kJGxpc3RlbmVycz17fTt0aGlzLiQkbGlzdGVuZXJDb3VudD17fTt0aGlzLiRpZD0rK2NiO3RoaXMuJCRjaGlsZFNjb3BlQ2xhc3M9bnVsbH0sdGhpcy4kJGNoaWxkU2NvcGVDbGFzcy5wcm90b3R5cGU9dGhpcyksYT1uZXcgdGhpcy4kJGNoaWxkU2NvcGVDbGFzcyk7YVtcInRoaXNcIl09YTthLiRwYXJlbnQ9dGhpczthLiQkcHJldlNpYmxpbmc9dGhpcy4kJGNoaWxkVGFpbDt0aGlzLiQkY2hpbGRIZWFkP3RoaXMuJCRjaGlsZFRhaWw9dGhpcy4kJGNoaWxkVGFpbC4kJG5leHRTaWJsaW5nPWE6dGhpcy4kJGNoaWxkSGVhZD10aGlzLiQkY2hpbGRUYWlsPWE7cmV0dXJuIGF9LCR3YXRjaDpmdW5jdGlvbihhLGIsZCxlKXt2YXIgZj1sKGEsXCJ3YXRjaFwiKTtpZihmLiQkd2F0Y2hEZWxlZ2F0ZSlyZXR1cm4gZi4kJHdhdGNoRGVsZWdhdGUodGhpcyxcbmIsZCxlLGYpO3ZhciBnPXRoaXMuJCR3YXRjaGVycyxoPXtmbjpiLGxhc3Q6cCxnZXQ6ZixleHA6YSxlcTohIWR9O2M9bnVsbDtBKGIpfHwoaC5mbj1CKTtnfHwoZz10aGlzLiQkd2F0Y2hlcnM9W10pO2cudW5zaGlmdChoKTtyZXR1cm4gZnVuY3Rpb24oKXtEYShnLGgpO2M9bnVsbDtBKGUpJiZlKCl9fSwkd2F0Y2hHcm91cDpmdW5jdGlvbihhLGIpe3ZhciBjPUFycmF5KGEubGVuZ3RoKSxkPUFycmF5KGEubGVuZ3RoKSxlPVtdLGY9MCxnPXRoaXMsaDtpZigxPT09YS5sZW5ndGgpcmV0dXJuIHRoaXMuJHdhdGNoKGFbMF0sZnVuY3Rpb24oYSxlLGYpe2RbMF09YTtjWzBdPWU7Yi5jYWxsKHRoaXMsZCxhPT09ZT9kOmMsZil9KTtxKGEsZnVuY3Rpb24oYSxiKXt2YXIgaz1nLiR3YXRjaChhLGZ1bmN0aW9uKGEsZSl7ZFtiXT1hO2NbYl09ZTtmKyt9LCExLGZ1bmN0aW9uKCl7RGEoZSxrKTtlLmxlbmd0aHx8aCgpfSk7ZS5wdXNoKGspfSx0aGlzKTtoPWcuJHdhdGNoKGZ1bmN0aW9uKCl7cmV0dXJuIGZ9LFxuZnVuY3Rpb24oYSxlKXtiKGQsYT09PWU/ZDpjLGcpfSk7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKDtlLmxlbmd0aDspZVswXSgpfX0sJHdhdGNoQ29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZCxlLGcsaD0xPGIubGVuZ3RoLGs9MCxuPWYoYSxmdW5jdGlvbihhKXtkPWE7dmFyIGIsYztpZihRKGQpKWlmKGJiKGQpKWZvcihlIT09bCYmKGU9bCxxPWUubGVuZ3RoPTAsaysrKSxhPWQubGVuZ3RoLHEhPT1hJiYoaysrLGUubGVuZ3RoPXE9YSksYj0wO2I8YTtiKyspYz1lW2JdIT09ZVtiXSYmZFtiXSE9PWRbYl0sY3x8ZVtiXT09PWRbYl18fChrKyssZVtiXT1kW2JdKTtlbHNle2UhPT1tJiYoZT1tPXt9LHE9MCxrKyspO2E9MDtmb3IoYiBpbiBkKWQuaGFzT3duUHJvcGVydHkoYikmJihhKyssZS5oYXNPd25Qcm9wZXJ0eShiKT8oYz1lW2JdIT09ZVtiXSYmZFtiXSE9PWRbYl0sY3x8ZVtiXT09PWRbYl18fChrKyssZVtiXT1kW2JdKSk6KHErKyxlW2JdPWRbYl0saysrKSk7XG5pZihxPmEpZm9yKGIgaW4gaysrLGUpZS5oYXNPd25Qcm9wZXJ0eShiKSYmIWQuaGFzT3duUHJvcGVydHkoYikmJihxLS0sZGVsZXRlIGVbYl0pfWVsc2UgZSE9PWQmJihlPWQsaysrKTtyZXR1cm4ga30pLGw9W10sbT17fSxwPSEwLHE9MDtyZXR1cm4gdGhpcy4kd2F0Y2gobixmdW5jdGlvbigpe3A/KHA9ITEsYihkLGQsYykpOmIoZCxnLGMpO2lmKGgpaWYoUShkKSlpZihiYihkKSl7Zz1BcnJheShkLmxlbmd0aCk7Zm9yKHZhciBhPTA7YTxkLmxlbmd0aDthKyspZ1thXT1kW2FdfWVsc2UgZm9yKGEgaW4gZz17fSxkKURiLmNhbGwoZCxhKSYmKGdbYV09ZFthXSk7ZWxzZSBnPWR9KX0sJGRpZ2VzdDpmdW5jdGlvbigpe3ZhciBkLGYsZyxoLGw9dGhpcy4kJGFzeW5jUXVldWUsbT10aGlzLiQkcG9zdERpZ2VzdFF1ZXVlLHgscSx2PWIsTixSPVtdLEgsQyxEO24oXCIkZGlnZXN0XCIpO2M9bnVsbDtkb3txPSExO2ZvcihOPXRoaXM7bC5sZW5ndGg7KXt0cnl7RD1sLnNoaWZ0KCksRC5zY29wZS4kZXZhbChELmV4cHJlc3Npb24pfWNhdGNoKHQpe2suJCRwaGFzZT1cbm51bGwsZSh0KX1jPW51bGx9YTpkb3tpZihoPU4uJCR3YXRjaGVycylmb3IoeD1oLmxlbmd0aDt4LS07KXRyeXtpZihkPWhbeF0paWYoKGY9ZC5nZXQoTikpIT09KGc9ZC5sYXN0KSYmIShkLmVxP3JhKGYsZyk6XCJudW1iZXJcIj09PXR5cGVvZiBmJiZcIm51bWJlclwiPT09dHlwZW9mIGcmJmlzTmFOKGYpJiZpc05hTihnKSkpcT0hMCxjPWQsZC5sYXN0PWQuZXE/RWEoZixudWxsKTpmLGQuZm4oZixnPT09cD9mOmcsTiksNT52JiYoSD00LXYsUltIXXx8KFJbSF09W10pLEM9QShkLmV4cCk/XCJmbjogXCIrKGQuZXhwLm5hbWV8fGQuZXhwLnRvU3RyaW5nKCkpOmQuZXhwLEMrPVwiOyBuZXdWYWw6IFwiK3NhKGYpK1wiOyBvbGRWYWw6IFwiK3NhKGcpLFJbSF0ucHVzaChDKSk7ZWxzZSBpZihkPT09Yyl7cT0hMTticmVhayBhfX1jYXRjaChFKXtrLiQkcGhhc2U9bnVsbCxlKEUpfWlmKCEoaD1OLiQkY2hpbGRIZWFkfHxOIT09dGhpcyYmTi4kJG5leHRTaWJsaW5nKSlmb3IoO04hPT10aGlzJiYhKGg9Ti4kJG5leHRTaWJsaW5nKTspTj1cbk4uJHBhcmVudH13aGlsZShOPWgpO2lmKChxfHxsLmxlbmd0aCkmJiF2LS0pdGhyb3cgay4kJHBoYXNlPW51bGwsYShcImluZmRpZ1wiLGIsc2EoUikpO313aGlsZShxfHxsLmxlbmd0aCk7Zm9yKGsuJCRwaGFzZT1udWxsO20ubGVuZ3RoOyl0cnl7bS5zaGlmdCgpKCl9Y2F0Y2goeil7ZSh6KX19LCRkZXN0cm95OmZ1bmN0aW9uKCl7aWYoIXRoaXMuJCRkZXN0cm95ZWQpe3ZhciBhPXRoaXMuJHBhcmVudDt0aGlzLiRicm9hZGNhc3QoXCIkZGVzdHJveVwiKTt0aGlzLiQkZGVzdHJveWVkPSEwO3RoaXMhPT1rJiYocSh0aGlzLiQkbGlzdGVuZXJDb3VudCxDYihudWxsLG0sdGhpcykpLGEuJCRjaGlsZEhlYWQ9PXRoaXMmJihhLiQkY2hpbGRIZWFkPXRoaXMuJCRuZXh0U2libGluZyksYS4kJGNoaWxkVGFpbD09dGhpcyYmKGEuJCRjaGlsZFRhaWw9dGhpcy4kJHByZXZTaWJsaW5nKSx0aGlzLiQkcHJldlNpYmxpbmcmJih0aGlzLiQkcHJldlNpYmxpbmcuJCRuZXh0U2libGluZz10aGlzLiQkbmV4dFNpYmxpbmcpLFxudGhpcy4kJG5leHRTaWJsaW5nJiYodGhpcy4kJG5leHRTaWJsaW5nLiQkcHJldlNpYmxpbmc9dGhpcy4kJHByZXZTaWJsaW5nKSx0aGlzLiRwYXJlbnQ9dGhpcy4kJG5leHRTaWJsaW5nPXRoaXMuJCRwcmV2U2libGluZz10aGlzLiQkY2hpbGRIZWFkPXRoaXMuJCRjaGlsZFRhaWw9dGhpcy4kcm9vdD1udWxsLHRoaXMuJCRsaXN0ZW5lcnM9e30sdGhpcy4kJHdhdGNoZXJzPXRoaXMuJCRhc3luY1F1ZXVlPXRoaXMuJCRwb3N0RGlnZXN0UXVldWU9W10sdGhpcy4kZGVzdHJveT10aGlzLiRkaWdlc3Q9dGhpcy4kYXBwbHk9Qix0aGlzLiRvbj10aGlzLiR3YXRjaD10aGlzLiR3YXRjaEdyb3VwPWZ1bmN0aW9uKCl7cmV0dXJuIEJ9KX19LCRldmFsOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGYoYSkodGhpcyxiKX0sJGV2YWxBc3luYzpmdW5jdGlvbihhKXtrLiQkcGhhc2V8fGsuJCRhc3luY1F1ZXVlLmxlbmd0aHx8aC5kZWZlcihmdW5jdGlvbigpe2suJCRhc3luY1F1ZXVlLmxlbmd0aCYmay4kZGlnZXN0KCl9KTtcbnRoaXMuJCRhc3luY1F1ZXVlLnB1c2goe3Njb3BlOnRoaXMsZXhwcmVzc2lvbjphfSl9LCQkcG9zdERpZ2VzdDpmdW5jdGlvbihhKXt0aGlzLiQkcG9zdERpZ2VzdFF1ZXVlLnB1c2goYSl9LCRhcHBseTpmdW5jdGlvbihhKXt0cnl7cmV0dXJuIG4oXCIkYXBwbHlcIiksdGhpcy4kZXZhbChhKX1jYXRjaChiKXtlKGIpfWZpbmFsbHl7ay4kJHBoYXNlPW51bGw7dHJ5e2suJGRpZ2VzdCgpfWNhdGNoKGMpe3Rocm93IGUoYyksYzt9fX0sJG9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy4kJGxpc3RlbmVyc1thXTtjfHwodGhpcy4kJGxpc3RlbmVyc1thXT1jPVtdKTtjLnB1c2goYik7dmFyIGQ9dGhpcztkbyBkLiQkbGlzdGVuZXJDb3VudFthXXx8KGQuJCRsaXN0ZW5lckNvdW50W2FdPTApLGQuJCRsaXN0ZW5lckNvdW50W2FdKys7d2hpbGUoZD1kLiRwYXJlbnQpO3ZhciBlPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKCl7Y1tNYShjLGIpXT1udWxsO20oZSwxLGEpfX0sJGVtaXQ6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPVtdLGQsZj10aGlzLGc9ITEsaD17bmFtZTphLHRhcmdldFNjb3BlOmYsc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7Zz0hMH0scHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXtoLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGs9W2hdLmNvbmNhdChrYS5jYWxsKGFyZ3VtZW50cywxKSksbixsO2Rve2Q9Zi4kJGxpc3RlbmVyc1thXXx8YztoLmN1cnJlbnRTY29wZT1mO249MDtmb3IobD1kLmxlbmd0aDtuPGw7bisrKWlmKGRbbl0pdHJ5e2Rbbl0uYXBwbHkobnVsbCxrKX1jYXRjaChtKXtlKG0pfWVsc2UgZC5zcGxpY2UobiwxKSxuLS0sbC0tO2lmKGcpcmV0dXJuIGguY3VycmVudFNjb3BlPW51bGwsaDtmPWYuJHBhcmVudH13aGlsZShmKTtoLmN1cnJlbnRTY29wZT1udWxsO3JldHVybiBofSwkYnJvYWRjYXN0OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMsZD10aGlzLGY9e25hbWU6YSx0YXJnZXRTY29wZTp0aGlzLHByZXZlbnREZWZhdWx0OmZ1bmN0aW9uKCl7Zi5kZWZhdWx0UHJldmVudGVkPVxuITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LGc9W2ZdLmNvbmNhdChrYS5jYWxsKGFyZ3VtZW50cywxKSksaCxrO2M9ZDspe2YuY3VycmVudFNjb3BlPWM7ZD1jLiQkbGlzdGVuZXJzW2FdfHxbXTtoPTA7Zm9yKGs9ZC5sZW5ndGg7aDxrO2grKylpZihkW2hdKXRyeXtkW2hdLmFwcGx5KG51bGwsZyl9Y2F0Y2gobil7ZShuKX1lbHNlIGQuc3BsaWNlKGgsMSksaC0tLGstLTtpZighKGQ9Yy4kJGxpc3RlbmVyQ291bnRbYV0mJmMuJCRjaGlsZEhlYWR8fGMhPT10aGlzJiZjLiQkbmV4dFNpYmxpbmcpKWZvcig7YyE9PXRoaXMmJiEoZD1jLiQkbmV4dFNpYmxpbmcpOyljPWMuJHBhcmVudH1mLmN1cnJlbnRTY29wZT1udWxsO3JldHVybiBmfX07dmFyIGs9bmV3IGc7cmV0dXJuIGt9XX1mdW5jdGlvbiB2ZCgpe3ZhciBiPS9eXFxzKihodHRwcz98ZnRwfG1haWx0b3x0ZWx8ZmlsZSk6LyxhPS9eXFxzKihodHRwcz98ZnRwfGZpbGV8YmxvYik6fGRhdGE6aW1hZ2VcXC8vO3RoaXMuYUhyZWZTYW5pdGl6YXRpb25XaGl0ZWxpc3Q9XG5mdW5jdGlvbihhKXtyZXR1cm4gdihhKT8oYj1hLHRoaXMpOmJ9O3RoaXMuaW1nU3JjU2FuaXRpemF0aW9uV2hpdGVsaXN0PWZ1bmN0aW9uKGIpe3JldHVybiB2KGIpPyhhPWIsdGhpcyk6YX07dGhpcy4kZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZD9hOmIsZjtpZighVHx8ODw9VClpZihmPXZhKGMpLmhyZWYsXCJcIiE9PWYmJiFmLm1hdGNoKGUpKXJldHVyblwidW5zYWZlOlwiK2Y7cmV0dXJuIGN9fX1mdW5jdGlvbiBYZShiKXtpZihcInNlbGZcIj09PWIpcmV0dXJuIGI7aWYoRyhiKSl7aWYoLTE8Yi5pbmRleE9mKFwiKioqXCIpKXRocm93IHdhKFwiaXdjYXJkXCIsYik7Yj1iLnJlcGxhY2UoLyhbLSgpXFxbXFxde30rPyouJFxcXnwsOiM8IVxcXFxdKS9nLFwiXFxcXCQxXCIpLnJlcGxhY2UoL1xceDA4L2csXCJcXFxceDA4XCIpLnJlcGxhY2UoXCJcXFxcKlxcXFwqXCIsXCIuKlwiKS5yZXBsYWNlKFwiXFxcXCpcIixcIlteOi8uPyY7XSpcIik7cmV0dXJuIFJlZ0V4cChcIl5cIitiK1wiJFwiKX1pZihkYihiKSlyZXR1cm4gUmVnRXhwKFwiXlwiK1xuYi5zb3VyY2UrXCIkXCIpO3Rocm93IHdhKFwiaW1hdGNoZXJcIik7fWZ1bmN0aW9uIFBjKGIpe3ZhciBhPVtdO3YoYikmJnEoYixmdW5jdGlvbihiKXthLnB1c2goWGUoYikpfSk7cmV0dXJuIGF9ZnVuY3Rpb24gd2UoKXt0aGlzLlNDRV9DT05URVhUUz1mYTt2YXIgYj1bXCJzZWxmXCJdLGE9W107dGhpcy5yZXNvdXJjZVVybFdoaXRlbGlzdD1mdW5jdGlvbihhKXthcmd1bWVudHMubGVuZ3RoJiYoYj1QYyhhKSk7cmV0dXJuIGJ9O3RoaXMucmVzb3VyY2VVcmxCbGFja2xpc3Q9ZnVuY3Rpb24oYil7YXJndW1lbnRzLmxlbmd0aCYmKGE9UGMoYikpO3JldHVybiBhfTt0aGlzLiRnZXQ9W1wiJGluamVjdG9yXCIsZnVuY3Rpb24oYyl7ZnVuY3Rpb24gZChhKXt2YXIgYj1mdW5jdGlvbihhKXt0aGlzLiQkdW53cmFwVHJ1c3RlZFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIGF9fTthJiYoYi5wcm90b3R5cGU9bmV3IGEpO2IucHJvdG90eXBlLnZhbHVlT2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy4kJHVud3JhcFRydXN0ZWRWYWx1ZSgpfTtcbmIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJCR1bndyYXBUcnVzdGVkVmFsdWUoKS50b1N0cmluZygpfTtyZXR1cm4gYn12YXIgZT1mdW5jdGlvbihhKXt0aHJvdyB3YShcInVuc2FmZVwiKTt9O2MuaGFzKFwiJHNhbml0aXplXCIpJiYoZT1jLmdldChcIiRzYW5pdGl6ZVwiKSk7dmFyIGY9ZCgpLGg9e307aFtmYS5IVE1MXT1kKGYpO2hbZmEuQ1NTXT1kKGYpO2hbZmEuVVJMXT1kKGYpO2hbZmEuSlNdPWQoZik7aFtmYS5SRVNPVVJDRV9VUkxdPWQoaFtmYS5VUkxdKTtyZXR1cm57dHJ1c3RBczpmdW5jdGlvbihhLGIpe3ZhciBjPWguaGFzT3duUHJvcGVydHkoYSk/aFthXTpudWxsO2lmKCFjKXRocm93IHdhKFwiaWNvbnRleHRcIixhLGIpO2lmKG51bGw9PT1ifHxiPT09dHx8XCJcIj09PWIpcmV0dXJuIGI7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBiKXRocm93IHdhKFwiaXR5cGVcIixhKTtyZXR1cm4gbmV3IGMoYil9LGdldFRydXN0ZWQ6ZnVuY3Rpb24oYyxkKXtpZihudWxsPT09XG5kfHxkPT09dHx8XCJcIj09PWQpcmV0dXJuIGQ7dmFyIGY9aC5oYXNPd25Qcm9wZXJ0eShjKT9oW2NdOm51bGw7aWYoZiYmZCBpbnN0YW5jZW9mIGYpcmV0dXJuIGQuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTtpZihjPT09ZmEuUkVTT1VSQ0VfVVJMKXt2YXIgZj12YShkLnRvU3RyaW5nKCkpLG0scCxrPSExO209MDtmb3IocD1iLmxlbmd0aDttPHA7bSsrKWlmKFwic2VsZlwiPT09YlttXT9PYihmKTpiW21dLmV4ZWMoZi5ocmVmKSl7az0hMDticmVha31pZihrKWZvcihtPTAscD1hLmxlbmd0aDttPHA7bSsrKWlmKFwic2VsZlwiPT09YVttXT9PYihmKTphW21dLmV4ZWMoZi5ocmVmKSl7az0hMTticmVha31pZihrKXJldHVybiBkO3Rocm93IHdhKFwiaW5zZWN1cmxcIixkLnRvU3RyaW5nKCkpO31pZihjPT09ZmEuSFRNTClyZXR1cm4gZShkKTt0aHJvdyB3YShcInVuc2FmZVwiKTt9LHZhbHVlT2Y6ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBmP2EuJCR1bndyYXBUcnVzdGVkVmFsdWUoKTphfX19XX1cbmZ1bmN0aW9uIHZlKCl7dmFyIGI9ITA7dGhpcy5lbmFibGVkPWZ1bmN0aW9uKGEpe2FyZ3VtZW50cy5sZW5ndGgmJihiPSEhYSk7cmV0dXJuIGJ9O3RoaXMuJGdldD1bXCIkcGFyc2VcIixcIiRzbmlmZmVyXCIsXCIkc2NlRGVsZWdhdGVcIixmdW5jdGlvbihhLGMsZCl7aWYoYiYmYy5tc2llJiY4PmMubXNpZURvY3VtZW50TW9kZSl0aHJvdyB3YShcImllcXVpcmtzXCIpO3ZhciBlPWphKGZhKTtlLmlzRW5hYmxlZD1mdW5jdGlvbigpe3JldHVybiBifTtlLnRydXN0QXM9ZC50cnVzdEFzO2UuZ2V0VHJ1c3RlZD1kLmdldFRydXN0ZWQ7ZS52YWx1ZU9mPWQudmFsdWVPZjtifHwoZS50cnVzdEFzPWUuZ2V0VHJ1c3RlZD1mdW5jdGlvbihhLGIpe3JldHVybiBifSxlLnZhbHVlT2Y9QmEpO2UucGFyc2VBcz1mdW5jdGlvbihiLGMpe3ZhciBkPWEoYyk7cmV0dXJuIGQubGl0ZXJhbCYmZC5jb25zdGFudD9kOmEoYyxmdW5jdGlvbihhKXtyZXR1cm4gZS5nZXRUcnVzdGVkKGIsYSl9KX07dmFyIGY9ZS5wYXJzZUFzLFxuaD1lLmdldFRydXN0ZWQsZz1lLnRydXN0QXM7cShmYSxmdW5jdGlvbihhLGIpe3ZhciBjPUooYik7ZVtTYShcInBhcnNlX2FzX1wiK2MpXT1mdW5jdGlvbihiKXtyZXR1cm4gZihhLGIpfTtlW1NhKFwiZ2V0X3RydXN0ZWRfXCIrYyldPWZ1bmN0aW9uKGIpe3JldHVybiBoKGEsYil9O2VbU2EoXCJ0cnVzdF9hc19cIitjKV09ZnVuY3Rpb24oYil7cmV0dXJuIGcoYSxiKX19KTtyZXR1cm4gZX1dfWZ1bmN0aW9uIHhlKCl7dGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRkb2N1bWVudFwiLGZ1bmN0aW9uKGIsYSl7dmFyIGM9e30sZD1VKCgvYW5kcm9pZCAoXFxkKykvLmV4ZWMoSigoYi5uYXZpZ2F0b3J8fHt9KS51c2VyQWdlbnQpKXx8W10pWzFdKSxlPS9Cb3hlZS9pLnRlc3QoKGIubmF2aWdhdG9yfHx7fSkudXNlckFnZW50KSxmPWFbMF18fHt9LGg9Zi5kb2N1bWVudE1vZGUsZyxuPS9eKE1venx3ZWJraXR8T3xtcykoPz1bQS1aXSkvLGw9Zi5ib2R5JiZmLmJvZHkuc3R5bGUsbT0hMSxwPSExO2lmKGwpe2Zvcih2YXIgayBpbiBsKWlmKG09XG5uLmV4ZWMoaykpe2c9bVswXTtnPWcuc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKStnLnN1YnN0cigxKTticmVha31nfHwoZz1cIldlYmtpdE9wYWNpdHlcImluIGwmJlwid2Via2l0XCIpO209ISEoXCJ0cmFuc2l0aW9uXCJpbiBsfHxnK1wiVHJhbnNpdGlvblwiaW4gbCk7cD0hIShcImFuaW1hdGlvblwiaW4gbHx8ZytcIkFuaW1hdGlvblwiaW4gbCk7IWR8fG0mJnB8fChtPUcoZi5ib2R5LnN0eWxlLndlYmtpdFRyYW5zaXRpb24pLHA9RyhmLmJvZHkuc3R5bGUud2Via2l0QW5pbWF0aW9uKSl9cmV0dXJue2hpc3Rvcnk6ISghYi5oaXN0b3J5fHwhYi5oaXN0b3J5LnB1c2hTdGF0ZXx8ND5kfHxlKSxoYXNoY2hhbmdlOlwib25oYXNoY2hhbmdlXCJpbiBiJiYoIWh8fDc8aCksaGFzRXZlbnQ6ZnVuY3Rpb24oYSl7aWYoXCJpbnB1dFwiPT1hJiY5PT1UKXJldHVybiExO2lmKEYoY1thXSkpe3ZhciBiPWYuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjW2FdPVwib25cIithIGluIGJ9cmV0dXJuIGNbYV19LGNzcDpRYSgpLHZlbmRvclByZWZpeDpnLFxudHJhbnNpdGlvbnM6bSxhbmltYXRpb25zOnAsYW5kcm9pZDpkLG1zaWU6VCxtc2llRG9jdW1lbnRNb2RlOmh9fV19ZnVuY3Rpb24gemUoKXt0aGlzLiRnZXQ9W1wiJHJvb3RTY29wZVwiLFwiJGJyb3dzZXJcIixcIiRxXCIsXCIkJHFcIixcIiRleGNlcHRpb25IYW5kbGVyXCIsZnVuY3Rpb24oYixhLGMsZCxlKXtmdW5jdGlvbiBmKGYsbixsKXt2YXIgbT12KGwpJiYhbCxwPShtP2Q6YykuZGVmZXIoKSxrPXAucHJvbWlzZTtuPWEuZGVmZXIoZnVuY3Rpb24oKXt0cnl7cC5yZXNvbHZlKGYoKSl9Y2F0Y2goYSl7cC5yZWplY3QoYSksZShhKX1maW5hbGx5e2RlbGV0ZSBoW2suJCR0aW1lb3V0SWRdfW18fGIuJGFwcGx5KCl9LG4pO2suJCR0aW1lb3V0SWQ9bjtoW25dPXA7cmV0dXJuIGt9dmFyIGg9e307Zi5jYW5jZWw9ZnVuY3Rpb24oYil7cmV0dXJuIGImJmIuJCR0aW1lb3V0SWQgaW4gaD8oaFtiLiQkdGltZW91dElkXS5yZWplY3QoXCJjYW5jZWxlZFwiKSxkZWxldGUgaFtiLiQkdGltZW91dElkXSxhLmRlZmVyLmNhbmNlbChiLiQkdGltZW91dElkKSk6XG4hMX07cmV0dXJuIGZ9XX1mdW5jdGlvbiB2YShiLGEpe3ZhciBjPWI7VCYmKCQuc2V0QXR0cmlidXRlKFwiaHJlZlwiLGMpLGM9JC5ocmVmKTskLnNldEF0dHJpYnV0ZShcImhyZWZcIixjKTtyZXR1cm57aHJlZjokLmhyZWYscHJvdG9jb2w6JC5wcm90b2NvbD8kLnByb3RvY29sLnJlcGxhY2UoLzokLyxcIlwiKTpcIlwiLGhvc3Q6JC5ob3N0LHNlYXJjaDokLnNlYXJjaD8kLnNlYXJjaC5yZXBsYWNlKC9eXFw/LyxcIlwiKTpcIlwiLGhhc2g6JC5oYXNoPyQuaGFzaC5yZXBsYWNlKC9eIy8sXCJcIik6XCJcIixob3N0bmFtZTokLmhvc3RuYW1lLHBvcnQ6JC5wb3J0LHBhdGhuYW1lOlwiL1wiPT09JC5wYXRobmFtZS5jaGFyQXQoMCk/JC5wYXRobmFtZTpcIi9cIiskLnBhdGhuYW1lfX1mdW5jdGlvbiBPYihiKXtiPUcoYik/dmEoYik6YjtyZXR1cm4gYi5wcm90b2NvbD09PVFjLnByb3RvY29sJiZiLmhvc3Q9PT1RYy5ob3N0fWZ1bmN0aW9uIEFlKCl7dGhpcy4kZ2V0PWJhKFApfWZ1bmN0aW9uIHBjKGIpe2Z1bmN0aW9uIGEoZCxcbmUpe2lmKFEoZCkpe3ZhciBmPXt9O3EoZCxmdW5jdGlvbihiLGMpe2ZbY109YShjLGIpfSk7cmV0dXJuIGZ9cmV0dXJuIGIuZmFjdG9yeShkK2MsZSl9dmFyIGM9XCJGaWx0ZXJcIjt0aGlzLnJlZ2lzdGVyPWE7dGhpcy4kZ2V0PVtcIiRpbmplY3RvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYS5nZXQoYitjKX19XTthKFwiY3VycmVuY3lcIixSYyk7YShcImRhdGVcIixTYyk7YShcImZpbHRlclwiLFllKTthKFwianNvblwiLFplKTthKFwibGltaXRUb1wiLCRlKTthKFwibG93ZXJjYXNlXCIsYWYpO2EoXCJudW1iZXJcIixUYyk7YShcIm9yZGVyQnlcIixVYyk7YShcInVwcGVyY2FzZVwiLGJmKX1mdW5jdGlvbiBZZSgpe3JldHVybiBmdW5jdGlvbihiLGEsYyl7aWYoIU0oYikpcmV0dXJuIGI7dmFyIGQ9dHlwZW9mIGMsZT1bXTtlLmNoZWNrPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8ZS5sZW5ndGg7YisrKWlmKCFlW2JdKGEpKXJldHVybiExO3JldHVybiEwfTtcImZ1bmN0aW9uXCIhPT1kJiZcbihjPVwiYm9vbGVhblwiPT09ZCYmYz9mdW5jdGlvbihhLGIpe3JldHVybiBPYS5lcXVhbHMoYSxiKX06ZnVuY3Rpb24oYSxiKXtpZihhJiZiJiZcIm9iamVjdFwiPT09dHlwZW9mIGEmJlwib2JqZWN0XCI9PT10eXBlb2YgYil7Zm9yKHZhciBkIGluIGEpaWYoXCIkXCIhPT1kLmNoYXJBdCgwKSYmRGIuY2FsbChhLGQpJiZjKGFbZF0sYltkXSkpcmV0dXJuITA7cmV0dXJuITF9Yj0oXCJcIitiKS50b0xvd2VyQ2FzZSgpO3JldHVybi0xPChcIlwiK2EpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihiKX0pO3ZhciBmPWZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGImJlwiIVwiPT09Yi5jaGFyQXQoMCkpcmV0dXJuIWYoYSxiLnN1YnN0cigxKSk7c3dpdGNoKHR5cGVvZiBhKXtjYXNlIFwiYm9vbGVhblwiOmNhc2UgXCJudW1iZXJcIjpjYXNlIFwic3RyaW5nXCI6cmV0dXJuIGMoYSxiKTtjYXNlIFwib2JqZWN0XCI6c3dpdGNoKHR5cGVvZiBiKXtjYXNlIFwib2JqZWN0XCI6cmV0dXJuIGMoYSxiKTtkZWZhdWx0OmZvcih2YXIgZCBpbiBhKWlmKFwiJFwiIT09XG5kLmNoYXJBdCgwKSYmZihhW2RdLGIpKXJldHVybiEwfXJldHVybiExO2Nhc2UgXCJhcnJheVwiOmZvcihkPTA7ZDxhLmxlbmd0aDtkKyspaWYoZihhW2RdLGIpKXJldHVybiEwO3JldHVybiExO2RlZmF1bHQ6cmV0dXJuITF9fTtzd2l0Y2godHlwZW9mIGEpe2Nhc2UgXCJib29sZWFuXCI6Y2FzZSBcIm51bWJlclwiOmNhc2UgXCJzdHJpbmdcIjphPXskOmF9O2Nhc2UgXCJvYmplY3RcIjpmb3IodmFyIGggaW4gYSkoZnVuY3Rpb24oYil7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhW2JdJiZlLnB1c2goZnVuY3Rpb24oYyl7cmV0dXJuIGYoXCIkXCI9PWI/YzpjJiZjW2JdLGFbYl0pfSl9KShoKTticmVhaztjYXNlIFwiZnVuY3Rpb25cIjplLnB1c2goYSk7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gYn1kPVtdO2ZvcihoPTA7aDxiLmxlbmd0aDtoKyspe3ZhciBnPWJbaF07ZS5jaGVjayhnKSYmZC5wdXNoKGcpfXJldHVybiBkfX1mdW5jdGlvbiBSYyhiKXt2YXIgYT1iLk5VTUJFUl9GT1JNQVRTO3JldHVybiBmdW5jdGlvbihiLFxuZCl7RihkKSYmKGQ9YS5DVVJSRU5DWV9TWU0pO3JldHVybiBWYyhiLGEuUEFUVEVSTlNbMV0sYS5HUk9VUF9TRVAsYS5ERUNJTUFMX1NFUCwyKS5yZXBsYWNlKC9cXHUwMEE0L2csZCl9fWZ1bmN0aW9uIFRjKGIpe3ZhciBhPWIuTlVNQkVSX0ZPUk1BVFM7cmV0dXJuIGZ1bmN0aW9uKGIsZCl7cmV0dXJuIFZjKGIsYS5QQVRURVJOU1swXSxhLkdST1VQX1NFUCxhLkRFQ0lNQUxfU0VQLGQpfX1mdW5jdGlvbiBWYyhiLGEsYyxkLGUpe2lmKG51bGw9PWJ8fCFpc0Zpbml0ZShiKXx8UShiKSlyZXR1cm5cIlwiO3ZhciBmPTA+YjtiPU1hdGguYWJzKGIpO3ZhciBoPWIrXCJcIixnPVwiXCIsbj1bXSxsPSExO2lmKC0xIT09aC5pbmRleE9mKFwiZVwiKSl7dmFyIG09aC5tYXRjaCgvKFtcXGRcXC5dKyllKC0/KShcXGQrKS8pO20mJlwiLVwiPT1tWzJdJiZtWzNdPmUrMT8oaD1cIjBcIixiPTApOihnPWgsbD0hMCl9aWYobCkwPGUmJigtMTxiJiYxPmIpJiYoZz1iLnRvRml4ZWQoZSkpO2Vsc2V7aD0oaC5zcGxpdChXYylbMV18fFxuXCJcIikubGVuZ3RoO0YoZSkmJihlPU1hdGgubWluKE1hdGgubWF4KGEubWluRnJhYyxoKSxhLm1heEZyYWMpKTtiPSsoTWF0aC5yb3VuZCgrKGIudG9TdHJpbmcoKStcImVcIitlKSkudG9TdHJpbmcoKStcImVcIistZSk7Yj0oXCJcIitiKS5zcGxpdChXYyk7aD1iWzBdO2I9YlsxXXx8XCJcIjt2YXIgbT0wLHA9YS5sZ1NpemUsaz1hLmdTaXplO2lmKGgubGVuZ3RoPj1wK2spZm9yKG09aC5sZW5ndGgtcCxsPTA7bDxtO2wrKykwPT09KG0tbCklayYmMCE9PWwmJihnKz1jKSxnKz1oLmNoYXJBdChsKTtmb3IobD1tO2w8aC5sZW5ndGg7bCsrKTA9PT0oaC5sZW5ndGgtbCklcCYmMCE9PWwmJihnKz1jKSxnKz1oLmNoYXJBdChsKTtmb3IoO2IubGVuZ3RoPGU7KWIrPVwiMFwiO2UmJlwiMFwiIT09ZSYmKGcrPWQrYi5zdWJzdHIoMCxlKSl9bi5wdXNoKGY/YS5uZWdQcmU6YS5wb3NQcmUpO24ucHVzaChnKTtuLnB1c2goZj9hLm5lZ1N1ZjphLnBvc1N1Zik7cmV0dXJuIG4uam9pbihcIlwiKX1mdW5jdGlvbiB2YihiLFxuYSxjKXt2YXIgZD1cIlwiOzA+YiYmKGQ9XCItXCIsYj0tYik7Zm9yKGI9XCJcIitiO2IubGVuZ3RoPGE7KWI9XCIwXCIrYjtjJiYoYj1iLnN1YnN0cihiLmxlbmd0aC1hKSk7cmV0dXJuIGQrYn1mdW5jdGlvbiBhYShiLGEsYyxkKXtjPWN8fDA7cmV0dXJuIGZ1bmN0aW9uKGUpe2U9ZVtcImdldFwiK2JdKCk7aWYoMDxjfHxlPi1jKWUrPWM7MD09PWUmJi0xMj09YyYmKGU9MTIpO3JldHVybiB2YihlLGEsZCl9fWZ1bmN0aW9uIHdiKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9Y1tcImdldFwiK2JdKCksZj1pYihhP1wiU0hPUlRcIitiOmIpO3JldHVybiBkW2ZdW2VdfX1mdW5jdGlvbiBYYyhiKXt2YXIgYT0obmV3IERhdGUoYiwwLDEpKS5nZXREYXkoKTtyZXR1cm4gbmV3IERhdGUoYiwwLCg0Pj1hPzU6MTIpLWEpfWZ1bmN0aW9uIFljKGIpe3JldHVybiBmdW5jdGlvbihhKXt2YXIgYz1YYyhhLmdldEZ1bGxZZWFyKCkpO2E9K25ldyBEYXRlKGEuZ2V0RnVsbFllYXIoKSxhLmdldE1vbnRoKCksYS5nZXREYXRlKCkrXG4oNC1hLmdldERheSgpKSktK2M7YT0xK01hdGgucm91bmQoYS82MDQ4RTUpO3JldHVybiB2YihhLGIpfX1mdW5jdGlvbiBTYyhiKXtmdW5jdGlvbiBhKGEpe3ZhciBiO2lmKGI9YS5tYXRjaChjKSl7YT1uZXcgRGF0ZSgwKTt2YXIgZj0wLGg9MCxnPWJbOF0/YS5zZXRVVENGdWxsWWVhcjphLnNldEZ1bGxZZWFyLG49Yls4XT9hLnNldFVUQ0hvdXJzOmEuc2V0SG91cnM7Yls5XSYmKGY9VShiWzldK2JbMTBdKSxoPVUoYls5XStiWzExXSkpO2cuY2FsbChhLFUoYlsxXSksVShiWzJdKS0xLFUoYlszXSkpO2Y9VShiWzRdfHwwKS1mO2g9VShiWzVdfHwwKS1oO2c9VShiWzZdfHwwKTtiPU1hdGgucm91bmQoMUUzKnBhcnNlRmxvYXQoXCIwLlwiKyhiWzddfHwwKSkpO24uY2FsbChhLGYsaCxnLGIpfXJldHVybiBhfXZhciBjPS9eKFxcZHs0fSktPyhcXGRcXGQpLT8oXFxkXFxkKSg/OlQoXFxkXFxkKSg/Ojo/KFxcZFxcZCkoPzo6PyhcXGRcXGQpKD86XFwuKFxcZCspKT8pPyk/KFp8KFsrLV0pKFxcZFxcZCk6PyhcXGRcXGQpKT8pPyQvO1xucmV0dXJuIGZ1bmN0aW9uKGMsZSl7dmFyIGY9XCJcIixoPVtdLGcsbjtlPWV8fFwibWVkaXVtRGF0ZVwiO2U9Yi5EQVRFVElNRV9GT1JNQVRTW2VdfHxlO0coYykmJihjPWNmLnRlc3QoYyk/VShjKTphKGMpKTtDYShjKSYmKGM9bmV3IERhdGUoYykpO2lmKCFkYShjKSlyZXR1cm4gYztmb3IoO2U7KShuPWRmLmV4ZWMoZSkpPyhoPWguY29uY2F0KGthLmNhbGwobiwxKSksZT1oLnBvcCgpKTooaC5wdXNoKGUpLGU9bnVsbCk7cShoLGZ1bmN0aW9uKGEpe2c9ZWZbYV07Zis9Zz9nKGMsYi5EQVRFVElNRV9GT1JNQVRTKTphLnJlcGxhY2UoLyheJ3wnJCkvZyxcIlwiKS5yZXBsYWNlKC8nJy9nLFwiJ1wiKX0pO3JldHVybiBmfX1mdW5jdGlvbiBaZSgpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gc2EoYiwhMCl9fWZ1bmN0aW9uICRlKCl7cmV0dXJuIGZ1bmN0aW9uKGIsYSl7aWYoIU0oYikmJiFHKGIpKXJldHVybiBiO2E9SW5maW5pdHk9PT1NYXRoLmFicyhOdW1iZXIoYSkpP051bWJlcihhKTpVKGEpO1xuaWYoRyhiKSlyZXR1cm4gYT8wPD1hP2Iuc2xpY2UoMCxhKTpiLnNsaWNlKGEsYi5sZW5ndGgpOlwiXCI7dmFyIGM9W10sZCxlO2E+Yi5sZW5ndGg/YT1iLmxlbmd0aDphPC1iLmxlbmd0aCYmKGE9LWIubGVuZ3RoKTswPGE/KGQ9MCxlPWEpOihkPWIubGVuZ3RoK2EsZT1iLmxlbmd0aCk7Zm9yKDtkPGU7ZCsrKWMucHVzaChiW2RdKTtyZXR1cm4gY319ZnVuY3Rpb24gVWMoYil7cmV0dXJuIGZ1bmN0aW9uKGEsYyxkKXtmdW5jdGlvbiBlKGEsYil7cmV0dXJuIGI/ZnVuY3Rpb24oYixjKXtyZXR1cm4gYShjLGIpfTphfWZ1bmN0aW9uIGYoYSxiKXt2YXIgYz10eXBlb2YgYSxkPXR5cGVvZiBiO3JldHVybiBjPT1kPyhkYShhKSYmZGEoYikmJihhPWEudmFsdWVPZigpLGI9Yi52YWx1ZU9mKCkpLFwic3RyaW5nXCI9PWMmJihhPWEudG9Mb3dlckNhc2UoKSxiPWIudG9Mb3dlckNhc2UoKSksYT09PWI/MDphPGI/LTE6MSk6YzxkPy0xOjF9aWYoIU0oYSl8fCFjKXJldHVybiBhO2M9TShjKT9jOltjXTtcbmM9bGQoYyxmdW5jdGlvbihhKXt2YXIgYz0hMSxkPWF8fEJhO2lmKEcoYSkpe2lmKFwiK1wiPT1hLmNoYXJBdCgwKXx8XCItXCI9PWEuY2hhckF0KDApKWM9XCItXCI9PWEuY2hhckF0KDApLGE9YS5zdWJzdHJpbmcoMSk7ZD1iKGEpO2lmKGQuY29uc3RhbnQpe3ZhciBnPWQoKTtyZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBmKGFbZ10sYltnXSl9LGMpfX1yZXR1cm4gZShmdW5jdGlvbihhLGIpe3JldHVybiBmKGQoYSksZChiKSl9LGMpfSk7Zm9yKHZhciBoPVtdLGc9MDtnPGEubGVuZ3RoO2crKyloLnB1c2goYVtnXSk7cmV0dXJuIGguc29ydChlKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0oYSxiKTtpZigwIT09ZSlyZXR1cm4gZX1yZXR1cm4gMH0sZCkpfX1mdW5jdGlvbiB4YShiKXtBKGIpJiYoYj17bGluazpifSk7Yi5yZXN0cmljdD1iLnJlc3RyaWN0fHxcIkFDXCI7cmV0dXJuIGJhKGIpfWZ1bmN0aW9uIFpjKGIsYSxjLGQpe2Z1bmN0aW9uIGUoYSxcbmMpe2M9Yz9cIi1cIitnYihjLFwiLVwiKTpcIlwiO2QucmVtb3ZlQ2xhc3MoYiwoYT94Yjp5YikrYyk7ZC5hZGRDbGFzcyhiLChhP3liOnhiKStjKX12YXIgZj10aGlzLGg9Yi5wYXJlbnQoKS5jb250cm9sbGVyKFwiZm9ybVwiKXx8emIsZz0wLG49Zi4kZXJyb3I9e30sbD1bXTtmLiRuYW1lPWEubmFtZXx8YS5uZ0Zvcm07Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7Zi4kdmFsaWQ9ITA7Zi4kaW52YWxpZD0hMTtoLiRhZGRDb250cm9sKGYpO2IuYWRkQ2xhc3MoS2EpO2UoITApO2YuJHJvbGxiYWNrVmlld1ZhbHVlPWZ1bmN0aW9uKCl7cShsLGZ1bmN0aW9uKGEpe2EuJHJvbGxiYWNrVmlld1ZhbHVlKCl9KX07Zi4kY29tbWl0Vmlld1ZhbHVlPWZ1bmN0aW9uKCl7cShsLGZ1bmN0aW9uKGEpe2EuJGNvbW1pdFZpZXdWYWx1ZSgpfSl9O2YuJGFkZENvbnRyb2w9ZnVuY3Rpb24oYSl7QWEoYS4kbmFtZSxcImlucHV0XCIpO2wucHVzaChhKTthLiRuYW1lJiYoZlthLiRuYW1lXT1hKX07Zi4kcmVtb3ZlQ29udHJvbD1cbmZ1bmN0aW9uKGEpe2EuJG5hbWUmJmZbYS4kbmFtZV09PT1hJiZkZWxldGUgZlthLiRuYW1lXTtxKG4sZnVuY3Rpb24oYixjKXtmLiRzZXRWYWxpZGl0eShjLCEwLGEpfSk7RGEobCxhKX07Zi4kc2V0VmFsaWRpdHk9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPW5bYV07aWYoYilkJiYoRGEoZCxjKSxkLmxlbmd0aHx8KGctLSxnfHwoZShiKSxmLiR2YWxpZD0hMCxmLiRpbnZhbGlkPSExKSxuW2FdPSExLGUoITAsYSksaC4kc2V0VmFsaWRpdHkoYSwhMCxmKSkpO2Vsc2V7Z3x8ZShiKTtpZihkKXtpZigtMSE9TWEoZCxjKSlyZXR1cm59ZWxzZSBuW2FdPWQ9W10sZysrLGUoITEsYSksaC4kc2V0VmFsaWRpdHkoYSwhMSxmKTtkLnB1c2goYyk7Zi4kdmFsaWQ9ITE7Zi4kaW52YWxpZD0hMH19O2YuJHNldERpcnR5PWZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhiLEthKTtkLmFkZENsYXNzKGIsQWIpO2YuJGRpcnR5PSEwO2YuJHByaXN0aW5lPSExO2guJHNldERpcnR5KCl9O2YuJHNldFByaXN0aW5lPVxuZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGIsQWIpO2QuYWRkQ2xhc3MoYixLYSk7Zi4kZGlydHk9ITE7Zi4kcHJpc3RpbmU9ITA7cShsLGZ1bmN0aW9uKGEpe2EuJHNldFByaXN0aW5lKCl9KX19ZnVuY3Rpb24gWGIoYixhLGMsZCl7Yi4kc2V0VmFsaWRpdHkoYSxjKTtyZXR1cm4gYz9kOnR9ZnVuY3Rpb24gJGMoYixhKXt2YXIgYyxkO2lmKGEpZm9yKGM9MDtjPGEubGVuZ3RoOysrYylpZihkPWFbY10sYltkXSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBmZihiLGEsYyxkLGUpe1EoZSkmJihiLiQkaGFzTmF0aXZlVmFsaWRhdG9ycz0hMCxiLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oZil7aWYoYi4kZXJyb3JbYV18fCRjKGUsZCl8fCEkYyhlLGMpKXJldHVybiBmO2IuJHNldFZhbGlkaXR5KGEsITEpfSkpfWZ1bmN0aW9uIFphKGIsYSxjLGQsZSxmKXt2YXIgaD1hLnByb3AoZ2YpLGc9YVswXS5wbGFjZWhvbGRlcixuPXt9O2QuJCR2YWxpZGl0eVN0YXRlPWg7aWYoIWUuYW5kcm9pZCl7dmFyIGw9XG4hMTthLm9uKFwiY29tcG9zaXRpb25zdGFydFwiLGZ1bmN0aW9uKGEpe2w9ITB9KTthLm9uKFwiY29tcG9zaXRpb25lbmRcIixmdW5jdGlvbigpe2w9ITE7bSgpfSl9dmFyIG09ZnVuY3Rpb24oZSl7aWYoIWwpe3ZhciBmPWEudmFsKCksaz1lJiZlLnR5cGU7aWYoVCYmXCJpbnB1dFwiPT09KGV8fG4pLnR5cGUmJmFbMF0ucGxhY2Vob2xkZXIhPT1nKWc9YVswXS5wbGFjZWhvbGRlcjtlbHNle2MubmdUcmltJiZcImZhbHNlXCI9PT1jLm5nVHJpbXx8KGY9WihmKSk7dmFyIG09aCYmZC4kJGhhc05hdGl2ZVZhbGlkYXRvcnM7aWYoZC4kdmlld1ZhbHVlIT09Znx8XCJcIj09PWYmJm0pYi4kJHBoYXNlP2QuJHNldFZpZXdWYWx1ZShmLGssbSk6Yi4kYXBwbHkoZnVuY3Rpb24oKXtkLiRzZXRWaWV3VmFsdWUoZixrLG0pfSl9fX07aWYoZS5oYXNFdmVudChcImlucHV0XCIpKWEub24oXCJpbnB1dFwiLG0pO2Vsc2V7dmFyIHAsaz1mdW5jdGlvbihhKXtwfHwocD1mLmRlZmVyKGZ1bmN0aW9uKCl7bShhKTtwPW51bGx9KSl9O1xuYS5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXt2YXIgYj1hLmtleUNvZGU7OTE9PT1ifHwoMTU8YiYmMTk+Ynx8Mzc8PWImJjQwPj1iKXx8ayhhKX0pO2lmKGUuaGFzRXZlbnQoXCJwYXN0ZVwiKSlhLm9uKFwicGFzdGUgY3V0XCIsayl9YS5vbihcImNoYW5nZVwiLG0pO2QuJHJlbmRlcj1mdW5jdGlvbigpe2EudmFsKGQuJGlzRW1wdHkoZC4kdmlld1ZhbHVlKT9cIlwiOmQuJHZpZXdWYWx1ZSl9fWZ1bmN0aW9uIEJiKGIsYSl7cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkO3JldHVybiBkYShjKT9jOkcoYykmJihiLmxhc3RJbmRleD0wLGM9Yi5leGVjKGMpKT8oYy5zaGlmdCgpLGQ9e3l5eXk6MCxNTToxLGRkOjEsSEg6MCxtbTowfSxxKGMsZnVuY3Rpb24oYixjKXtjPGEubGVuZ3RoJiYoZFthW2NdXT0rYil9KSxuZXcgRGF0ZShkLnl5eXksZC5NTS0xLGQuZGQsZC5ISCxkLm1tKSk6TmFOfX1mdW5jdGlvbiAkYShiLGEsYyxkKXtyZXR1cm4gZnVuY3Rpb24oZSxmLGgsZyxuLGwsbSl7WmEoZSxmLGgsZyxcbm4sbCk7Zy4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGQpe2lmKGcuJGlzRW1wdHkoZCkpcmV0dXJuIGcuJHNldFZhbGlkaXR5KGIsITApLG51bGw7aWYoYS50ZXN0KGQpKXJldHVybiBnLiRzZXRWYWxpZGl0eShiLCEwKSxjKGQpO2cuJHNldFZhbGlkaXR5KGIsITEpO3JldHVybiB0fSk7Zy4kZm9ybWF0dGVycy5wdXNoKGZ1bmN0aW9uKGEpe3JldHVybiBkYShhKT9tKFwiZGF0ZVwiKShhLGQpOlwiXCJ9KTtoLm1pbiYmKGU9ZnVuY3Rpb24oYSl7dmFyIGI9Zy4kaXNFbXB0eShhKXx8YyhhKT49YyhoLm1pbik7Zy4kc2V0VmFsaWRpdHkoXCJtaW5cIixiKTtyZXR1cm4gYj9hOnR9LGcuJHBhcnNlcnMucHVzaChlKSxnLiRmb3JtYXR0ZXJzLnB1c2goZSkpO2gubWF4JiYoZT1mdW5jdGlvbihhKXt2YXIgYj1nLiRpc0VtcHR5KGEpfHxjKGEpPD1jKGgubWF4KTtnLiRzZXRWYWxpZGl0eShcIm1heFwiLGIpO3JldHVybiBiP2E6dH0sZy4kcGFyc2Vycy5wdXNoKGUpLGcuJGZvcm1hdHRlcnMucHVzaChlKSl9fVxuZnVuY3Rpb24gYWQoYixhLGMsZCxlKXtpZih2KGQpKXtiPWIoZCk7aWYoIWIuY29uc3RhbnQpdGhyb3cobmV3IE8oXCJuZ01vZGVsXCIpKShcImNvbnN0ZXhwclwiLFwiRXhwZWN0ZWQgY29uc3RhbnQgZXhwcmVzc2lvbiBmb3IgYHswfWAsIGJ1dCBzYXcgYHsxfWAuXCIsYyxkKTtyZXR1cm4gYihhKX1yZXR1cm4gZX1mdW5jdGlvbiBZYihiLGEpe2I9XCJuZ0NsYXNzXCIrYjtyZXR1cm5bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGMpe2Z1bmN0aW9uIGQoYSxiKXt2YXIgYz1bXSxkPTA7YTpmb3IoO2Q8YS5sZW5ndGg7ZCsrKXtmb3IodmFyIGU9YVtkXSxtPTA7bTxiLmxlbmd0aDttKyspaWYoZT09YlttXSljb250aW51ZSBhO2MucHVzaChlKX1yZXR1cm4gY31mdW5jdGlvbiBlKGEpe2lmKCFNKGEpKXtpZihHKGEpKXJldHVybiBhLnNwbGl0KFwiIFwiKTtpZihRKGEpKXt2YXIgYj1bXTtxKGEsZnVuY3Rpb24oYSxjKXthJiYoYj1iLmNvbmNhdChjLnNwbGl0KFwiIFwiKSkpfSk7cmV0dXJuIGJ9fXJldHVybiBhfXJldHVybntyZXN0cmljdDpcIkFDXCIsXG5saW5rOmZ1bmN0aW9uKGYsaCxnKXtmdW5jdGlvbiBuKGEsYil7dmFyIGM9aC5kYXRhKFwiJGNsYXNzQ291bnRzXCIpfHx7fSxkPVtdO3EoYSxmdW5jdGlvbihhKXtpZigwPGJ8fGNbYV0pY1thXT0oY1thXXx8MCkrYixjW2FdPT09KygwPGIpJiZkLnB1c2goYSl9KTtoLmRhdGEoXCIkY2xhc3NDb3VudHNcIixjKTtyZXR1cm4gZC5qb2luKFwiIFwiKX1mdW5jdGlvbiBsKGIpe2lmKCEwPT09YXx8Zi4kaW5kZXglMj09PWEpe3ZhciBrPWUoYnx8W10pO2lmKCFtKXt2YXIgbD1uKGssMSk7Zy4kYWRkQ2xhc3MobCl9ZWxzZSBpZighcmEoYixtKSl7dmFyIHE9ZShtKSxsPWQoayxxKSxrPWQocSxrKSxrPW4oaywtMSksbD1uKGwsMSk7MD09PWwubGVuZ3RoP2MucmVtb3ZlQ2xhc3MoaCxrKTowPT09ay5sZW5ndGg/Yy5hZGRDbGFzcyhoLGwpOmMuc2V0Q2xhc3MoaCxsLGspfX1tPWphKGIpfXZhciBtO2YuJHdhdGNoKGdbYl0sbCwhMCk7Zy4kb2JzZXJ2ZShcImNsYXNzXCIsZnVuY3Rpb24oYSl7bChmLiRldmFsKGdbYl0pKX0pO1xuXCJuZ0NsYXNzXCIhPT1iJiZmLiR3YXRjaChcIiRpbmRleFwiLGZ1bmN0aW9uKGMsZCl7dmFyIGg9YyYxO2lmKGghPT0oZCYxKSl7dmFyIGw9ZShmLiRldmFsKGdbYl0pKTtoPT09YT8oaD1uKGwsMSksZy4kYWRkQ2xhc3MoaCkpOihoPW4obCwtMSksZy4kcmVtb3ZlQ2xhc3MoaCkpfX0pfX19XX12YXIgaGY9L15cXC8oLispXFwvKFthLXpdKikkLyxnZj1cInZhbGlkaXR5XCIsSj1mdW5jdGlvbihiKXtyZXR1cm4gRyhiKT9iLnRvTG93ZXJDYXNlKCk6Yn0sRGI9T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxpYj1mdW5jdGlvbihiKXtyZXR1cm4gRyhiKT9iLnRvVXBwZXJDYXNlKCk6Yn0sVCx6LHRhLGthPVtdLnNsaWNlLHNjPVtdLnB1c2gseWE9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxOYT1PKFwibmdcIiksT2E9UC5hbmd1bGFyfHwoUC5hbmd1bGFyPXt9KSxSYSxtYSxjYj0wO1Q9VSgoL21zaWUgKFxcZCspLy5leGVjKEoobmF2aWdhdG9yLnVzZXJBZ2VudCkpfHxbXSlbMV0pO2lzTmFOKFQpJiZcbihUPVUoKC90cmlkZW50XFwvLio7IHJ2OihcXGQrKS8uZXhlYyhKKG5hdmlnYXRvci51c2VyQWdlbnQpKXx8W10pWzFdKSk7Qi4kaW5qZWN0PVtdO0JhLiRpbmplY3Q9W107dmFyIE09ZnVuY3Rpb24oKXtyZXR1cm4gQShBcnJheS5pc0FycmF5KT9BcnJheS5pc0FycmF5OmZ1bmN0aW9uKGIpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PXlhLmNhbGwoYil9fSgpLFo9ZnVuY3Rpb24oKXtyZXR1cm4gU3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGIpe3JldHVybiBHKGIpP2IudHJpbSgpOmJ9OmZ1bmN0aW9uKGIpe3JldHVybiBHKGIpP2IucmVwbGFjZSgvXlxcc1xccyovLFwiXCIpLnJlcGxhY2UoL1xcc1xccyokLyxcIlwiKTpifX0oKTttYT05PlQ/ZnVuY3Rpb24oYil7Yj1iLm5vZGVOYW1lP2I6YlswXTtyZXR1cm4gSihiLnNjb3BlTmFtZSYmXCJIVE1MXCIhPWIuc2NvcGVOYW1lP2Iuc2NvcGVOYW1lK1wiOlwiK2Iubm9kZU5hbWU6Yi5ub2RlTmFtZSl9OmZ1bmN0aW9uKGIpe3JldHVybiBKKGIubm9kZU5hbWU/XG5iLm5vZGVOYW1lOmJbMF0ubm9kZU5hbWUpfTt2YXIgUWE9ZnVuY3Rpb24oKXtpZih2KFFhLmlzQWN0aXZlXykpcmV0dXJuIFFhLmlzQWN0aXZlXzt2YXIgYj0hKCFXLnF1ZXJ5U2VsZWN0b3IoXCJbbmctY3NwXVwiKSYmIVcucXVlcnlTZWxlY3RvcihcIltkYXRhLW5nLWNzcF1cIikpO2lmKCFiKXRyeXtuZXcgRnVuY3Rpb24oXCJcIil9Y2F0Y2goYSl7Yj0hMH1yZXR1cm4gUWEuaXNBY3RpdmVfPWJ9LGZiPVtcIm5nLVwiLFwiZGF0YS1uZy1cIixcIm5nOlwiLFwieC1uZy1cIl0scGQ9L1tBLVpdL2csdGQ9e2Z1bGw6XCIxLjMuMC1iZXRhLjE2XCIsbWFqb3I6MSxtaW5vcjozLGRvdDowLGNvZGVOYW1lOlwicGl6emEtdHJhbnN1YnN0YW50aWF0aW9uXCJ9O1YuZXhwYW5kbz1cIm5nMzM5XCI7dmFyIFVhPVYuY2FjaGU9e30sSmU9MSxzYj1QLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYixhLGMpe2IuYWRkRXZlbnRMaXN0ZW5lcihhLGMsITEpfTpmdW5jdGlvbihiLGEsYyl7Yi5hdHRhY2hFdmVudChcIm9uXCIrXG5hLGMpfSxUYT1QLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXI/ZnVuY3Rpb24oYixhLGMpe2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITEpfTpmdW5jdGlvbihiLGEsYyl7Yi5kZXRhY2hFdmVudChcIm9uXCIrYSxjKX07Vi5fZGF0YT1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5jYWNoZVtiW3RoaXMuZXhwYW5kb11dfHx7fX07dmFyIERlPS8oW1xcOlxcLVxcX10rKC4pKS9nLEVlPS9ebW96KFtBLVpdKS8sSWI9TyhcImpxTGl0ZVwiKSxJZT0vXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8sSGI9Lzx8JiM/XFx3KzsvLEdlPS88KFtcXHc6XSspLyxIZT0vPCg/IWFyZWF8YnJ8Y29sfGVtYmVkfGhyfGltZ3xpbnB1dHxsaW5rfG1ldGF8cGFyYW0pKChbXFx3Ol0rKVtePl0qKVxcLz4vZ2ksZWE9e29wdGlvbjpbMSwnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JyxcIjwvc2VsZWN0PlwiXSx0aGVhZDpbMSxcIjx0YWJsZT5cIixcIjwvdGFibGU+XCJdLGNvbDpbMixcIjx0YWJsZT48Y29sZ3JvdXA+XCIsXCI8L2NvbGdyb3VwPjwvdGFibGU+XCJdLFxudHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2VhLm9wdGdyb3VwPWVhLm9wdGlvbjtlYS50Ym9keT1lYS50Zm9vdD1lYS5jb2xncm91cD1lYS5jYXB0aW9uPWVhLnRoZWFkO2VhLnRoPWVhLnRkO3ZhciBGYT1WLnByb3RvdHlwZT17cmVhZHk6ZnVuY3Rpb24oYil7ZnVuY3Rpb24gYSgpe2N8fChjPSEwLGIoKSl9dmFyIGM9ITE7XCJjb21wbGV0ZVwiPT09Vy5yZWFkeVN0YXRlP3NldFRpbWVvdXQoYSk6KHRoaXMub24oXCJET01Db250ZW50TG9hZGVkXCIsYSksVihQKS5vbihcImxvYWRcIixhKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7dmFyIGI9W107cSh0aGlzLGZ1bmN0aW9uKGEpe2IucHVzaChcIlwiK2EpfSk7cmV0dXJuXCJbXCIrYi5qb2luKFwiLCBcIikrXCJdXCJ9LGVxOmZ1bmN0aW9uKGIpe3JldHVybiAwPD1iP3oodGhpc1tiXSk6eih0aGlzW3RoaXMubGVuZ3RoK1xuYl0pfSxsZW5ndGg6MCxwdXNoOnNjLHNvcnQ6W10uc29ydCxzcGxpY2U6W10uc3BsaWNlfSxwYj17fTtxKFwibXVsdGlwbGUgc2VsZWN0ZWQgY2hlY2tlZCBkaXNhYmxlZCByZWFkT25seSByZXF1aXJlZCBvcGVuXCIuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGIpe3BiW0ooYildPWJ9KTt2YXIgd2M9e307cShcImlucHV0IHNlbGVjdCBvcHRpb24gdGV4dGFyZWEgYnV0dG9uIGZvcm0gZGV0YWlsc1wiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihiKXt3Y1tiXT0hMH0pO3ZhciB4Yz17bmdNaW5sZW5ndGg6XCJtaW5sZW5ndGhcIixuZ01heGxlbmd0aDpcIm1heGxlbmd0aFwiLG5nUGF0dGVybjpcInBhdHRlcm5cIn07cSh7ZGF0YTpLYixyZW1vdmVEYXRhOmxifSxmdW5jdGlvbihiLGEpe1ZbYV09Yn0pO3Eoe2RhdGE6S2IsaW5oZXJpdGVkRGF0YTpvYixzY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gei5kYXRhKGIsXCIkc2NvcGVcIil8fG9iKGIucGFyZW50Tm9kZXx8YixbXCIkaXNvbGF0ZVNjb3BlXCIsXCIkc2NvcGVcIl0pfSxcbmlzb2xhdGVTY29wZTpmdW5jdGlvbihiKXtyZXR1cm4gei5kYXRhKGIsXCIkaXNvbGF0ZVNjb3BlXCIpfHx6LmRhdGEoYixcIiRpc29sYXRlU2NvcGVOb1RlbXBsYXRlXCIpfSxjb250cm9sbGVyOnRjLGluamVjdG9yOmZ1bmN0aW9uKGIpe3JldHVybiBvYihiLFwiJGluamVjdG9yXCIpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGIsYSl7Yi5yZW1vdmVBdHRyaWJ1dGUoYSl9LGhhc0NsYXNzOkxiLGNzczpmdW5jdGlvbihiLGEsYyl7YT1TYShhKTtpZih2KGMpKWIuc3R5bGVbYV09YztlbHNle3ZhciBkOzg+PVQmJihkPWIuY3VycmVudFN0eWxlJiZiLmN1cnJlbnRTdHlsZVthXSxcIlwiPT09ZCYmKGQ9XCJhdXRvXCIpKTtkPWR8fGIuc3R5bGVbYV07OD49VCYmKGQ9XCJcIj09PWQ/dDpkKTtyZXR1cm4gZH19LGF0dHI6ZnVuY3Rpb24oYixhLGMpe3ZhciBkPUooYSk7aWYocGJbZF0paWYodihjKSljPyhiW2FdPSEwLGIuc2V0QXR0cmlidXRlKGEsZCkpOihiW2FdPSExLGIucmVtb3ZlQXR0cmlidXRlKGQpKTtlbHNlIHJldHVybiBiW2FdfHxcbihiLmF0dHJpYnV0ZXMuZ2V0TmFtZWRJdGVtKGEpfHxCKS5zcGVjaWZpZWQ/ZDp0O2Vsc2UgaWYodihjKSliLnNldEF0dHJpYnV0ZShhLGMpO2Vsc2UgaWYoYi5nZXRBdHRyaWJ1dGUpcmV0dXJuIGI9Yi5nZXRBdHRyaWJ1dGUoYSwyKSxudWxsPT09Yj90OmJ9LHByb3A6ZnVuY3Rpb24oYixhLGMpe2lmKHYoYykpYlthXT1jO2Vsc2UgcmV0dXJuIGJbYV19LHRleHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEsYil7aWYoRihiKSl7dmFyIGQ9YS5ub2RlVHlwZTtyZXR1cm4gMT09PWR8fDM9PT1kP2EudGV4dENvbnRlbnQ6XCJcIn1hLnRleHRDb250ZW50PWJ9Yi4kZHY9XCJcIjtyZXR1cm4gYn0oKSx2YWw6ZnVuY3Rpb24oYixhKXtpZihGKGEpKXtpZihiLm11bHRpcGxlJiZcInNlbGVjdFwiPT09bWEoYikpe3ZhciBjPVtdO3EoYi5vcHRpb25zLGZ1bmN0aW9uKGEpe2Euc2VsZWN0ZWQmJmMucHVzaChhLnZhbHVlfHxhLnRleHQpfSk7cmV0dXJuIDA9PT1jLmxlbmd0aD9udWxsOmN9cmV0dXJuIGIudmFsdWV9Yi52YWx1ZT1cbmF9LGh0bWw6ZnVuY3Rpb24oYixhKXtpZihGKGEpKXJldHVybiBiLmlubmVySFRNTDtrYihiLCEwKTtiLmlubmVySFRNTD1hfSxlbXB0eTp1Y30sZnVuY3Rpb24oYixhKXtWLnByb3RvdHlwZVthXT1mdW5jdGlvbihhLGQpe3ZhciBlLGYsaD10aGlzLmxlbmd0aDtpZihiIT09dWMmJigyPT1iLmxlbmd0aCYmYiE9PUxiJiZiIT09dGM/YTpkKT09PXQpe2lmKFEoYSkpe2ZvcihlPTA7ZTxoO2UrKylpZihiPT09S2IpYih0aGlzW2VdLGEpO2Vsc2UgZm9yKGYgaW4gYSliKHRoaXNbZV0sZixhW2ZdKTtyZXR1cm4gdGhpc31lPWIuJGR2O2g9ZT09PXQ/TWF0aC5taW4oaCwxKTpoO2ZvcihmPTA7ZjxoO2YrKyl7dmFyIGc9Yih0aGlzW2ZdLGEsZCk7ZT1lP2UrZzpnfXJldHVybiBlfWZvcihlPTA7ZTxoO2UrKyliKHRoaXNbZV0sYSxkKTtyZXR1cm4gdGhpc319KTtxKHtyZW1vdmVEYXRhOmxiLG9uOmZ1bmN0aW9uIGEoYyxkLGUsZil7aWYodihmKSl0aHJvdyBJYihcIm9uYXJnc1wiKTtpZighYy5ub2RlVHlwZXx8XG4xPT09Yy5ub2RlVHlwZXx8OT09PWMubm9kZVR5cGUpe3ZhciBoPWxhKGMsXCJldmVudHNcIiksZz1sYShjLFwiaGFuZGxlXCIpO2h8fGxhKGMsXCJldmVudHNcIixoPXt9KTtnfHxsYShjLFwiaGFuZGxlXCIsZz1MZShjLGgpKTtxKGQuc3BsaXQoXCIgXCIpLGZ1bmN0aW9uKGQpe3ZhciBmPWhbZF07aWYoIWYpe2lmKFwibW91c2VlbnRlclwiPT1kfHxcIm1vdXNlbGVhdmVcIj09ZCl7dmFyIG09Vy5ib2R5LmNvbnRhaW5zfHxXLmJvZHkuY29tcGFyZURvY3VtZW50UG9zaXRpb24/ZnVuY3Rpb24oYSxjKXt2YXIgZD05PT09YS5ub2RlVHlwZT9hLmRvY3VtZW50RWxlbWVudDphLGU9YyYmYy5wYXJlbnROb2RlO3JldHVybiBhPT09ZXx8ISEoZSYmMT09PWUubm9kZVR5cGUmJihkLmNvbnRhaW5zP2QuY29udGFpbnMoZSk6YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiYmYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihlKSYxNikpfTpmdW5jdGlvbihhLGMpe2lmKGMpZm9yKDtjPWMucGFyZW50Tm9kZTspaWYoYz09PVxuYSlyZXR1cm4hMDtyZXR1cm4hMX07aFtkXT1bXTthKGMse21vdXNlbGVhdmU6XCJtb3VzZW91dFwiLG1vdXNlZW50ZXI6XCJtb3VzZW92ZXJcIn1bZF0sZnVuY3Rpb24oYSl7dmFyIGM9YS5yZWxhdGVkVGFyZ2V0O2MmJihjPT09dGhpc3x8bSh0aGlzLGMpKXx8ZyhhLGQpfSl9ZWxzZSBzYihjLGQsZyksaFtkXT1bXTtmPWhbZF19Zi5wdXNoKGUpfSl9fSxvZmY6cmMsb25lOmZ1bmN0aW9uKGEsYyxkKXthPXooYSk7YS5vbihjLGZ1bmN0aW9uIGYoKXthLm9mZihjLGQpO2Eub2ZmKGMsZil9KTthLm9uKGMsZCl9LHJlcGxhY2VXaXRoOmZ1bmN0aW9uKGEsYyl7dmFyIGQsZT1hLnBhcmVudE5vZGU7a2IoYSk7cShuZXcgVihjKSxmdW5jdGlvbihjKXtkP2UuaW5zZXJ0QmVmb3JlKGMsZC5uZXh0U2libGluZyk6ZS5yZXBsYWNlQ2hpbGQoYyxhKTtkPWN9KX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7dmFyIGM9W107cShhLmNoaWxkTm9kZXMsZnVuY3Rpb24oYSl7MT09PWEubm9kZVR5cGUmJmMucHVzaChhKX0pO1xucmV0dXJuIGN9LGNvbnRlbnRzOmZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRlbnREb2N1bWVudHx8YS5jaGlsZE5vZGVzfHxbXX0sYXBwZW5kOmZ1bmN0aW9uKGEsYyl7cShuZXcgVihjKSxmdW5jdGlvbihjKXsxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxhLmFwcGVuZENoaWxkKGMpfSl9LHByZXBlbmQ6ZnVuY3Rpb24oYSxjKXtpZigxPT09YS5ub2RlVHlwZSl7dmFyIGQ9YS5maXJzdENoaWxkO3EobmV3IFYoYyksZnVuY3Rpb24oYyl7YS5pbnNlcnRCZWZvcmUoYyxkKX0pfX0sd3JhcDpmdW5jdGlvbihhLGMpe2M9eihjKVswXTt2YXIgZD1hLnBhcmVudE5vZGU7ZCYmZC5yZXBsYWNlQ2hpbGQoYyxhKTtjLmFwcGVuZENoaWxkKGEpfSxyZW1vdmU6ZnVuY3Rpb24oYSl7a2IoYSk7dmFyIGM9YS5wYXJlbnROb2RlO2MmJmMucmVtb3ZlQ2hpbGQoYSl9LGFmdGVyOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9YSxlPWEucGFyZW50Tm9kZTtxKG5ldyBWKGMpLGZ1bmN0aW9uKGEpe2UuaW5zZXJ0QmVmb3JlKGEsXG5kLm5leHRTaWJsaW5nKTtkPWF9KX0sYWRkQ2xhc3M6bmIscmVtb3ZlQ2xhc3M6bWIsdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24oYSxjLGQpe2MmJnEoYy5zcGxpdChcIiBcIiksZnVuY3Rpb24oYyl7dmFyIGY9ZDtGKGYpJiYoZj0hTGIoYSxjKSk7KGY/bmI6bWIpKGEsYyl9KX0scGFyZW50OmZ1bmN0aW9uKGEpe3JldHVybihhPWEucGFyZW50Tm9kZSkmJjExIT09YS5ub2RlVHlwZT9hOm51bGx9LG5leHQ6ZnVuY3Rpb24oYSl7aWYoYS5uZXh0RWxlbWVudFNpYmxpbmcpcmV0dXJuIGEubmV4dEVsZW1lbnRTaWJsaW5nO2ZvcihhPWEubmV4dFNpYmxpbmc7bnVsbCE9YSYmMSE9PWEubm9kZVR5cGU7KWE9YS5uZXh0U2libGluZztyZXR1cm4gYX0sZmluZDpmdW5jdGlvbihhLGMpe3JldHVybiBhLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYyk6W119LGNsb25lOkpiLHRyaWdnZXJIYW5kbGVyOmZ1bmN0aW9uKGEsYyxkKXtjPShsYShhLFwiZXZlbnRzXCIpfHx7fSlbY107XG5kPWR8fFtdO3ZhciBlPVt7cHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGlzRGVmYXVsdFByZXZlbnRlZDpmdW5jdGlvbigpe3JldHVybiEwPT09dGhpcy5kZWZhdWx0UHJldmVudGVkfSxzdG9wUHJvcGFnYXRpb246Qn1dO3EoYyxmdW5jdGlvbihjKXtjLmFwcGx5KGEsZS5jb25jYXQoZCkpfSl9fSxmdW5jdGlvbihhLGMpe1YucHJvdG90eXBlW2NdPWZ1bmN0aW9uKGMsZSxmKXtmb3IodmFyIGgsZz0wO2c8dGhpcy5sZW5ndGg7ZysrKUYoaCk/KGg9YSh0aGlzW2ddLGMsZSxmKSx2KGgpJiYoaD16KGgpKSk6cWMoaCxhKHRoaXNbZ10sYyxlLGYpKTtyZXR1cm4gdihoKT9oOnRoaXN9O1YucHJvdG90eXBlLmJpbmQ9Vi5wcm90b3R5cGUub247Vi5wcm90b3R5cGUudW5iaW5kPVYucHJvdG90eXBlLm9mZn0pO1ZhLnByb3RvdHlwZT17cHV0OmZ1bmN0aW9uKGEsYyl7dGhpc1tHYShhLHRoaXMubmV4dFVpZCldPWN9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpc1tHYShhLFxudGhpcy5uZXh0VWlkKV19LHJlbW92ZTpmdW5jdGlvbihhKXt2YXIgYz10aGlzW2E9R2EoYSx0aGlzLm5leHRVaWQpXTtkZWxldGUgdGhpc1thXTtyZXR1cm4gY319O3ZhciB6Yz0vXmZ1bmN0aW9uXFxzKlteXFwoXSpcXChcXHMqKFteXFwpXSopXFwpL20sTmU9LywvLE9lPS9eXFxzKihfPykoXFxTKz8pXFwxXFxzKiQvLHljPS8oKFxcL1xcLy4qJCl8KFxcL1xcKltcXHNcXFNdKj9cXCpcXC8pKS9tZyxIYT1PKFwiJGluamVjdG9yXCIpO0ZiLiQkYW5ub3RhdGU9TWI7dmFyIGpmPU8oXCIkYW5pbWF0ZVwiKSxmZT1bXCIkcHJvdmlkZVwiLGZ1bmN0aW9uKGEpe3RoaXMuJCRzZWxlY3RvcnM9e307dGhpcy5yZWdpc3Rlcj1mdW5jdGlvbihjLGQpe3ZhciBlPWMrXCItYW5pbWF0aW9uXCI7aWYoYyYmXCIuXCIhPWMuY2hhckF0KDApKXRocm93IGpmKFwibm90Y3NlbFwiLGMpO3RoaXMuJCRzZWxlY3RvcnNbYy5zdWJzdHIoMSldPWU7YS5mYWN0b3J5KGUsZCl9O3RoaXMuY2xhc3NOYW1lRmlsdGVyPWZ1bmN0aW9uKGEpezE9PT1hcmd1bWVudHMubGVuZ3RoJiZcbih0aGlzLiQkY2xhc3NOYW1lRmlsdGVyPWEgaW5zdGFuY2VvZiBSZWdFeHA/YTpudWxsKTtyZXR1cm4gdGhpcy4kJGNsYXNzTmFtZUZpbHRlcn07dGhpcy4kZ2V0PVtcIiR0aW1lb3V0XCIsXCIkJGFzeW5jQ2FsbGJhY2tcIixmdW5jdGlvbihhLGQpe3JldHVybntlbnRlcjpmdW5jdGlvbihhLGMsaCxnKXtoP2guYWZ0ZXIoYSk6Yy5wcmVwZW5kKGEpO2cmJmQoZyk7cmV0dXJuIEJ9LGxlYXZlOmZ1bmN0aW9uKGEsYyl7YS5yZW1vdmUoKTtjJiZkKGMpO3JldHVybiBCfSxtb3ZlOmZ1bmN0aW9uKGEsYyxkLGcpe3JldHVybiB0aGlzLmVudGVyKGEsYyxkLGcpfSxhZGRDbGFzczpmdW5jdGlvbihhLGMsaCl7Yz1HKGMpP2M6TShjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cShhLGZ1bmN0aW9uKGEpe25iKGEsYyl9KTtoJiZkKGgpO3JldHVybiBCfSxyZW1vdmVDbGFzczpmdW5jdGlvbihhLGMsaCl7Yz1HKGMpP2M6TShjKT9jLmpvaW4oXCIgXCIpOlwiXCI7cShhLGZ1bmN0aW9uKGEpe21iKGEsYyl9KTtoJiZkKGgpO1xucmV0dXJuIEJ9LHNldENsYXNzOmZ1bmN0aW9uKGEsYyxoLGcpe3EoYSxmdW5jdGlvbihhKXtuYihhLGMpO21iKGEsaCl9KTtnJiZkKGcpO3JldHVybiBCfSxlbmFibGVkOkJ9fV19XSxoYT1PKFwiJGNvbXBpbGVcIik7aWMuJGluamVjdD1bXCIkcHJvdmlkZVwiLFwiJCRzYW5pdGl6ZVVyaVByb3ZpZGVyXCJdO3ZhciBUZT0vXih4W1xcOlxcLV9dfGRhdGFbXFw6XFwtX10pL2ksUGI9TyhcIiRpbnRlcnBvbGF0ZVwiKSxrZj0vXihbXlxcPyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyxXZT17aHR0cDo4MCxodHRwczo0NDMsZnRwOjIxfSxTYj1PKFwiJGxvY2F0aW9uXCIpO1ViLnByb3RvdHlwZT1UYi5wcm90b3R5cGU9S2MucHJvdG90eXBlPXskJGh0bWw1OiExLCQkcmVwbGFjZTohMSxhYnNVcmw6dGIoXCIkJGFic1VybFwiKSx1cmw6ZnVuY3Rpb24oYSxjKXtpZihGKGEpKXJldHVybiB0aGlzLiQkdXJsO3ZhciBkPWtmLmV4ZWMoYSk7ZFsxXSYmdGhpcy5wYXRoKGRlY29kZVVSSUNvbXBvbmVudChkWzFdKSk7KGRbMl18fFxuZFsxXSkmJnRoaXMuc2VhcmNoKGRbM118fFwiXCIpO3RoaXMuaGFzaChkWzVdfHxcIlwiLGMpO3JldHVybiB0aGlzfSxwcm90b2NvbDp0YihcIiQkcHJvdG9jb2xcIiksaG9zdDp0YihcIiQkaG9zdFwiKSxwb3J0OnRiKFwiJCRwb3J0XCIpLHBhdGg6TGMoXCIkJHBhdGhcIixmdW5jdGlvbihhKXtyZXR1cm5cIi9cIj09YS5jaGFyQXQoMCk/YTpcIi9cIithfSksc2VhcmNoOmZ1bmN0aW9uKGEsYyl7c3dpdGNoKGFyZ3VtZW50cy5sZW5ndGgpe2Nhc2UgMDpyZXR1cm4gdGhpcy4kJHNlYXJjaDtjYXNlIDE6aWYoRyhhKSl0aGlzLiQkc2VhcmNoPWZjKGEpO2Vsc2UgaWYoUShhKSlxKGEsZnVuY3Rpb24oYyxlKXtudWxsPT1jJiZkZWxldGUgYVtlXX0pLHRoaXMuJCRzZWFyY2g9YTtlbHNlIHRocm93IFNiKFwiaXNyY2hhcmdcIik7YnJlYWs7ZGVmYXVsdDpGKGMpfHxudWxsPT09Yz9kZWxldGUgdGhpcy4kJHNlYXJjaFthXTp0aGlzLiQkc2VhcmNoW2FdPWN9dGhpcy4kJGNvbXBvc2UoKTtyZXR1cm4gdGhpc30saGFzaDpMYyhcIiQkaGFzaFwiLFxuQmEpLHJlcGxhY2U6ZnVuY3Rpb24oKXt0aGlzLiQkcmVwbGFjZT0hMDtyZXR1cm4gdGhpc319O3ZhciBpYT1PKFwiJHBhcnNlXCIpLGxmPUZ1bmN0aW9uLnByb3RvdHlwZS5jYWxsLG1mPUZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSxuZj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCxhYj17XCJudWxsXCI6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sXCJ0cnVlXCI6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sXCJmYWxzZVwiOmZ1bmN0aW9uKCl7cmV0dXJuITF9LHVuZGVmaW5lZDpCLFwiK1wiOmZ1bmN0aW9uKGEsYyxkLGUpe2Q9ZChhLGMpO2U9ZShhLGMpO3JldHVybiB2KGQpP3YoZSk/ZCtlOmQ6dihlKT9lOnR9LFwiLVwiOmZ1bmN0aW9uKGEsYyxkLGUpe2Q9ZChhLGMpO2U9ZShhLGMpO3JldHVybih2KGQpP2Q6MCktKHYoZSk/ZTowKX0sXCIqXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSplKGEsYyl9LFwiL1wiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykvZShhLGMpfSxcIiVcIjpmdW5jdGlvbihhLFxuYyxkLGUpe3JldHVybiBkKGEsYyklZShhLGMpfSxcIl5cIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZChhLGMpXmUoYSxjKX0sXCI9XCI6QixcIj09PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk9PT1lKGEsYyl9LFwiIT09XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSE9PWUoYSxjKX0sXCI9PVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk9PWUoYSxjKX0sXCIhPVwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykhPWUoYSxjKX0sXCI8XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKTxlKGEsYyl9LFwiPlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYyk+ZShhLGMpfSxcIjw9XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKTw9ZShhLGMpfSxcIj49XCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKT49ZShhLGMpfSxcIiYmXCI6ZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJuIGQoYSxjKSYmZShhLGMpfSxcInx8XCI6ZnVuY3Rpb24oYSxcbmMsZCxlKXtyZXR1cm4gZChhLGMpfHxlKGEsYyl9LFwiJlwiOmZ1bmN0aW9uKGEsYyxkLGUpe3JldHVybiBkKGEsYykmZShhLGMpfSxcInxcIjpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gZShhLGMpKGEsYyxkKGEsYykpfSxcIiFcIjpmdW5jdGlvbihhLGMsZCl7cmV0dXJuIWQoYSxjKX19LG9mPXtuOlwiXFxuXCIsZjpcIlxcZlwiLHI6XCJcXHJcIix0OlwiXFx0XCIsdjpcIlxcdlwiLFwiJ1wiOlwiJ1wiLCdcIic6J1wiJ30sV2I9ZnVuY3Rpb24oYSl7dGhpcy5vcHRpb25zPWF9O1diLnByb3RvdHlwZT17Y29uc3RydWN0b3I6V2IsbGV4OmZ1bmN0aW9uKGEpe3RoaXMudGV4dD1hO3RoaXMuaW5kZXg9MDt0aGlzLmNoPXQ7Zm9yKHRoaXMudG9rZW5zPVtdO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspaWYodGhpcy5jaD10aGlzLnRleHQuY2hhckF0KHRoaXMuaW5kZXgpLHRoaXMuaXMoXCJcXFwiJ1wiKSl0aGlzLnJlYWRTdHJpbmcodGhpcy5jaCk7ZWxzZSBpZih0aGlzLmlzTnVtYmVyKHRoaXMuY2gpfHx0aGlzLmlzKFwiLlwiKSYmdGhpcy5pc051bWJlcih0aGlzLnBlZWsoKSkpdGhpcy5yZWFkTnVtYmVyKCk7XG5lbHNlIGlmKHRoaXMuaXNJZGVudCh0aGlzLmNoKSl0aGlzLnJlYWRJZGVudCgpO2Vsc2UgaWYodGhpcy5pcyhcIigpe31bXS4sOzo/XCIpKXRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDp0aGlzLmNofSksdGhpcy5pbmRleCsrO2Vsc2UgaWYodGhpcy5pc1doaXRlc3BhY2UodGhpcy5jaCkpdGhpcy5pbmRleCsrO2Vsc2V7YT10aGlzLmNoK3RoaXMucGVlaygpO3ZhciBjPWErdGhpcy5wZWVrKDIpLGQ9YWJbdGhpcy5jaF0sZT1hYlthXSxmPWFiW2NdO2Y/KHRoaXMudG9rZW5zLnB1c2goe2luZGV4OnRoaXMuaW5kZXgsdGV4dDpjLGZuOmZ9KSx0aGlzLmluZGV4Kz0zKTplPyh0aGlzLnRva2Vucy5wdXNoKHtpbmRleDp0aGlzLmluZGV4LHRleHQ6YSxmbjplfSksdGhpcy5pbmRleCs9Mik6ZD8odGhpcy50b2tlbnMucHVzaCh7aW5kZXg6dGhpcy5pbmRleCx0ZXh0OnRoaXMuY2gsZm46ZH0pLHRoaXMuaW5kZXgrPTEpOnRoaXMudGhyb3dFcnJvcihcIlVuZXhwZWN0ZWQgbmV4dCBjaGFyYWN0ZXIgXCIsXG50aGlzLmluZGV4LHRoaXMuaW5kZXgrMSl9cmV0dXJuIHRoaXMudG9rZW5zfSxpczpmdW5jdGlvbihhKXtyZXR1cm4tMSE9PWEuaW5kZXhPZih0aGlzLmNoKX0scGVlazpmdW5jdGlvbihhKXthPWF8fDE7cmV0dXJuIHRoaXMuaW5kZXgrYTx0aGlzLnRleHQubGVuZ3RoP3RoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCthKTohMX0saXNOdW1iZXI6ZnVuY3Rpb24oYSl7cmV0dXJuXCIwXCI8PWEmJlwiOVwiPj1hfSxpc1doaXRlc3BhY2U6ZnVuY3Rpb24oYSl7cmV0dXJuXCIgXCI9PT1hfHxcIlxcclwiPT09YXx8XCJcXHRcIj09PWF8fFwiXFxuXCI9PT1hfHxcIlxcdlwiPT09YXx8XCJcXHUwMGEwXCI9PT1hfSxpc0lkZW50OmZ1bmN0aW9uKGEpe3JldHVyblwiYVwiPD1hJiZcInpcIj49YXx8XCJBXCI8PWEmJlwiWlwiPj1hfHxcIl9cIj09PWF8fFwiJFwiPT09YX0saXNFeHBPcGVyYXRvcjpmdW5jdGlvbihhKXtyZXR1cm5cIi1cIj09PWF8fFwiK1wiPT09YXx8dGhpcy5pc051bWJlcihhKX0sdGhyb3dFcnJvcjpmdW5jdGlvbihhLGMsZCl7ZD1kfHx0aGlzLmluZGV4O1xuYz12KGMpP1wicyBcIitjK1wiLVwiK3RoaXMuaW5kZXgrXCIgW1wiK3RoaXMudGV4dC5zdWJzdHJpbmcoYyxkKStcIl1cIjpcIiBcIitkO3Rocm93IGlhKFwibGV4ZXJyXCIsYSxjLHRoaXMudGV4dCk7fSxyZWFkTnVtYmVyOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiXCIsYz10aGlzLmluZGV4O3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBkPUoodGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KSk7aWYoXCIuXCI9PWR8fHRoaXMuaXNOdW1iZXIoZCkpYSs9ZDtlbHNle3ZhciBlPXRoaXMucGVlaygpO2lmKFwiZVwiPT1kJiZ0aGlzLmlzRXhwT3BlcmF0b3IoZSkpYSs9ZDtlbHNlIGlmKHRoaXMuaXNFeHBPcGVyYXRvcihkKSYmZSYmdGhpcy5pc051bWJlcihlKSYmXCJlXCI9PWEuY2hhckF0KGEubGVuZ3RoLTEpKWErPWQ7ZWxzZSBpZighdGhpcy5pc0V4cE9wZXJhdG9yKGQpfHxlJiZ0aGlzLmlzTnVtYmVyKGUpfHxcImVcIiE9YS5jaGFyQXQoYS5sZW5ndGgtMSkpYnJlYWs7ZWxzZSB0aGlzLnRocm93RXJyb3IoXCJJbnZhbGlkIGV4cG9uZW50XCIpfXRoaXMuaW5kZXgrK31hKj1cbjE7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmEsY29uc3RhbnQ6ITAsZm46ZnVuY3Rpb24oKXtyZXR1cm4gYX19KX0scmVhZElkZW50OmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMsYz1cIlwiLGQ9dGhpcy5pbmRleCxlLGYsaCxnO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe2c9dGhpcy50ZXh0LmNoYXJBdCh0aGlzLmluZGV4KTtpZihcIi5cIj09PWd8fHRoaXMuaXNJZGVudChnKXx8dGhpcy5pc051bWJlcihnKSlcIi5cIj09PWcmJihlPXRoaXMuaW5kZXgpLGMrPWc7ZWxzZSBicmVhazt0aGlzLmluZGV4Kyt9aWYoZSlmb3IoZj10aGlzLmluZGV4O2Y8dGhpcy50ZXh0Lmxlbmd0aDspe2c9dGhpcy50ZXh0LmNoYXJBdChmKTtpZihcIihcIj09PWcpe2g9Yy5zdWJzdHIoZS1kKzEpO2M9Yy5zdWJzdHIoMCxlLWQpO3RoaXMuaW5kZXg9ZjticmVha31pZih0aGlzLmlzV2hpdGVzcGFjZShnKSlmKys7ZWxzZSBicmVha31kPXtpbmRleDpkLHRleHQ6Y307aWYoYWIuaGFzT3duUHJvcGVydHkoYykpZC5mbj1cbmFiW2NdLGQuY29uc3RhbnQ9ITA7ZWxzZXt2YXIgbj1OYyhjLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO2QuZm49RShmdW5jdGlvbihhLGMpe3JldHVybiBuKGEsYyl9LHthc3NpZ246ZnVuY3Rpb24oZCxlKXtyZXR1cm4gdWIoZCxjLGUsYS50ZXh0KX19KX10aGlzLnRva2Vucy5wdXNoKGQpO2gmJih0aGlzLnRva2Vucy5wdXNoKHtpbmRleDplLHRleHQ6XCIuXCJ9KSx0aGlzLnRva2Vucy5wdXNoKHtpbmRleDplKzEsdGV4dDpofSkpfSxyZWFkU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBjPXRoaXMuaW5kZXg7dGhpcy5pbmRleCsrO2Zvcih2YXIgZD1cIlwiLGU9YSxmPSExO3RoaXMuaW5kZXg8dGhpcy50ZXh0Lmxlbmd0aDspe3ZhciBoPXRoaXMudGV4dC5jaGFyQXQodGhpcy5pbmRleCksZT1lK2g7aWYoZilcInVcIj09PWg/KGY9dGhpcy50ZXh0LnN1YnN0cmluZyh0aGlzLmluZGV4KzEsdGhpcy5pbmRleCs1KSxmLm1hdGNoKC9bXFxkYS1mXXs0fS9pKXx8dGhpcy50aHJvd0Vycm9yKFwiSW52YWxpZCB1bmljb2RlIGVzY2FwZSBbXFxcXHVcIitcbmYrXCJdXCIpLHRoaXMuaW5kZXgrPTQsZCs9U3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludChmLDE2KSkpOmQrPW9mW2hdfHxoLGY9ITE7ZWxzZSBpZihcIlxcXFxcIj09PWgpZj0hMDtlbHNle2lmKGg9PT1hKXt0aGlzLmluZGV4Kys7dGhpcy50b2tlbnMucHVzaCh7aW5kZXg6Yyx0ZXh0OmUsc3RyaW5nOmQsY29uc3RhbnQ6ITAsZm46ZnVuY3Rpb24oKXtyZXR1cm4gZH19KTtyZXR1cm59ZCs9aH10aGlzLmluZGV4Kyt9dGhpcy50aHJvd0Vycm9yKFwiVW50ZXJtaW5hdGVkIHF1b3RlXCIsYyl9fTt2YXIgWWE9ZnVuY3Rpb24oYSxjLGQpe3RoaXMubGV4ZXI9YTt0aGlzLiRmaWx0ZXI9Yzt0aGlzLm9wdGlvbnM9ZH07WWEuWkVSTz1FKGZ1bmN0aW9uKCl7cmV0dXJuIDB9LHtjb25zdGFudDohMH0pO1lhLnByb3RvdHlwZT17Y29uc3RydWN0b3I6WWEscGFyc2U6ZnVuY3Rpb24oYSl7dGhpcy50ZXh0PWE7dGhpcy50b2tlbnM9dGhpcy5sZXhlci5sZXgoYSk7YT10aGlzLnN0YXRlbWVudHMoKTswIT09XG50aGlzLnRva2Vucy5sZW5ndGgmJnRoaXMudGhyb3dFcnJvcihcImlzIGFuIHVuZXhwZWN0ZWQgdG9rZW5cIix0aGlzLnRva2Vuc1swXSk7YS5saXRlcmFsPSEhYS5saXRlcmFsO2EuY29uc3RhbnQ9ISFhLmNvbnN0YW50O3JldHVybiBhfSxwcmltYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7aWYodGhpcy5leHBlY3QoXCIoXCIpKWE9dGhpcy5maWx0ZXJDaGFpbigpLHRoaXMuY29uc3VtZShcIilcIik7ZWxzZSBpZih0aGlzLmV4cGVjdChcIltcIikpYT10aGlzLmFycmF5RGVjbGFyYXRpb24oKTtlbHNlIGlmKHRoaXMuZXhwZWN0KFwie1wiKSlhPXRoaXMub2JqZWN0KCk7ZWxzZXt2YXIgYz10aGlzLmV4cGVjdCgpOyhhPWMuZm4pfHx0aGlzLnRocm93RXJyb3IoXCJub3QgYSBwcmltYXJ5IGV4cHJlc3Npb25cIixjKTtjLmNvbnN0YW50JiYoYS5jb25zdGFudD0hMCxhLmxpdGVyYWw9ITApfWZvcih2YXIgZDtjPXRoaXMuZXhwZWN0KFwiKFwiLFwiW1wiLFwiLlwiKTspXCIoXCI9PT1jLnRleHQ/KGE9dGhpcy5mdW5jdGlvbkNhbGwoYSxcbmQpLGQ9bnVsbCk6XCJbXCI9PT1jLnRleHQ/KGQ9YSxhPXRoaXMub2JqZWN0SW5kZXgoYSkpOlwiLlwiPT09Yy50ZXh0PyhkPWEsYT10aGlzLmZpZWxkQWNjZXNzKGEpKTp0aGlzLnRocm93RXJyb3IoXCJJTVBPU1NJQkxFXCIpO3JldHVybiBhfSx0aHJvd0Vycm9yOmZ1bmN0aW9uKGEsYyl7dGhyb3cgaWEoXCJzeW50YXhcIixjLnRleHQsYSxjLmluZGV4KzEsdGhpcy50ZXh0LHRoaXMudGV4dC5zdWJzdHJpbmcoYy5pbmRleCkpO30scGVla1Rva2VuOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMudG9rZW5zLmxlbmd0aCl0aHJvdyBpYShcInVlb2VcIix0aGlzLnRleHQpO3JldHVybiB0aGlzLnRva2Vuc1swXX0scGVlazpmdW5jdGlvbihhLGMsZCxlKXtpZigwPHRoaXMudG9rZW5zLmxlbmd0aCl7dmFyIGY9dGhpcy50b2tlbnNbMF0saD1mLnRleHQ7aWYoaD09PWF8fGg9PT1jfHxoPT09ZHx8aD09PWV8fCEoYXx8Y3x8ZHx8ZSkpcmV0dXJuIGZ9cmV0dXJuITF9LGV4cGVjdDpmdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4oYT1cbnRoaXMucGVlayhhLGMsZCxlKSk/KHRoaXMudG9rZW5zLnNoaWZ0KCksYSk6ITF9LGNvbnN1bWU6ZnVuY3Rpb24oYSl7dGhpcy5leHBlY3QoYSl8fHRoaXMudGhyb3dFcnJvcihcImlzIHVuZXhwZWN0ZWQsIGV4cGVjdGluZyBbXCIrYStcIl1cIix0aGlzLnBlZWsoKSl9LHVuYXJ5Rm46ZnVuY3Rpb24oYSxjKXtyZXR1cm4gRShmdW5jdGlvbihkLGUpe3JldHVybiBhKGQsZSxjKX0se2NvbnN0YW50OmMuY29uc3RhbnR9KX0sdGVybmFyeUZuOmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gRShmdW5jdGlvbihlLGYpe3JldHVybiBhKGUsZik/YyhlLGYpOmQoZSxmKX0se2NvbnN0YW50OmEuY29uc3RhbnQmJmMuY29uc3RhbnQmJmQuY29uc3RhbnR9KX0sYmluYXJ5Rm46ZnVuY3Rpb24oYSxjLGQpe3JldHVybiBFKGZ1bmN0aW9uKGUsZil7cmV0dXJuIGMoZSxmLGEsZCl9LHtjb25zdGFudDphLmNvbnN0YW50JiZkLmNvbnN0YW50fSl9LHN0YXRlbWVudHM6ZnVuY3Rpb24oKXtmb3IodmFyIGE9W107OylpZigwPFxudGhpcy50b2tlbnMubGVuZ3RoJiYhdGhpcy5wZWVrKFwifVwiLFwiKVwiLFwiO1wiLFwiXVwiKSYmYS5wdXNoKHRoaXMuZmlsdGVyQ2hhaW4oKSksIXRoaXMuZXhwZWN0KFwiO1wiKSlyZXR1cm4gMT09PWEubGVuZ3RoP2FbMF06ZnVuY3Rpb24oYyxkKXtmb3IodmFyIGUsZj0wO2Y8YS5sZW5ndGg7ZisrKXt2YXIgaD1hW2ZdO2gmJihlPWgoYyxkKSl9cmV0dXJuIGV9fSxmaWx0ZXJDaGFpbjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmV4cHJlc3Npb24oKSxjOzspaWYoYz10aGlzLmV4cGVjdChcInxcIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmZpbHRlcigpKTtlbHNlIHJldHVybiBhfSxmaWx0ZXI6ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5leHBlY3QoKSxjPXRoaXMuJGZpbHRlcihhLnRleHQpLGQ9W107dGhpcy5leHBlY3QoXCI6XCIpOylkLnB1c2godGhpcy5leHByZXNzaW9uKCkpO3JldHVybiBiYShmdW5jdGlvbihhLGYsaCl7aD1baF07Zm9yKHZhciBnPTA7ZzxkLmxlbmd0aDtnKyspaC5wdXNoKGRbZ10oYSxcbmYpKTtyZXR1cm4gYy5hcHBseShhLGgpfSl9LGV4cHJlc3Npb246ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hc3NpZ25tZW50KCl9LGFzc2lnbm1lbnQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRlcm5hcnkoKSxjLGQ7cmV0dXJuKGQ9dGhpcy5leHBlY3QoXCI9XCIpKT8oYS5hc3NpZ258fHRoaXMudGhyb3dFcnJvcihcImltcGxpZXMgYXNzaWdubWVudCBidXQgW1wiK3RoaXMudGV4dC5zdWJzdHJpbmcoMCxkLmluZGV4KStcIl0gY2FuIG5vdCBiZSBhc3NpZ25lZCB0b1wiLGQpLGM9dGhpcy50ZXJuYXJ5KCksZnVuY3Rpb24oZCxmKXtyZXR1cm4gYS5hc3NpZ24oZCxjKGQsZiksZil9KTphfSx0ZXJuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sb2dpY2FsT1IoKSxjLGQ7aWYodGhpcy5leHBlY3QoXCI/XCIpKXtjPXRoaXMudGVybmFyeSgpO2lmKGQ9dGhpcy5leHBlY3QoXCI6XCIpKXJldHVybiB0aGlzLnRlcm5hcnlGbihhLGMsdGhpcy50ZXJuYXJ5KCkpO3RoaXMudGhyb3dFcnJvcihcImV4cGVjdGVkIDpcIixcbmQpfWVsc2UgcmV0dXJuIGF9LGxvZ2ljYWxPUjpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmxvZ2ljYWxBTkQoKSxjOzspaWYoYz10aGlzLmV4cGVjdChcInx8XCIpKWE9dGhpcy5iaW5hcnlGbihhLGMuZm4sdGhpcy5sb2dpY2FsQU5EKCkpO2Vsc2UgcmV0dXJuIGF9LGxvZ2ljYWxBTkQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmVxdWFsaXR5KCksYztpZihjPXRoaXMuZXhwZWN0KFwiJiZcIikpYT10aGlzLmJpbmFyeUZuKGEsYy5mbix0aGlzLmxvZ2ljYWxBTkQoKSk7cmV0dXJuIGF9LGVxdWFsaXR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yZWxhdGlvbmFsKCksYztpZihjPXRoaXMuZXhwZWN0KFwiPT1cIixcIiE9XCIsXCI9PT1cIixcIiE9PVwiKSlhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMuZXF1YWxpdHkoKSk7cmV0dXJuIGF9LHJlbGF0aW9uYWw6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmFkZGl0aXZlKCksYztpZihjPXRoaXMuZXhwZWN0KFwiPFwiLFwiPlwiLFwiPD1cIixcIj49XCIpKWE9dGhpcy5iaW5hcnlGbihhLFxuYy5mbix0aGlzLnJlbGF0aW9uYWwoKSk7cmV0dXJuIGF9LGFkZGl0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubXVsdGlwbGljYXRpdmUoKSxjO2M9dGhpcy5leHBlY3QoXCIrXCIsXCItXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMubXVsdGlwbGljYXRpdmUoKSk7cmV0dXJuIGF9LG11bHRpcGxpY2F0aXZlOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMudW5hcnkoKSxjO2M9dGhpcy5leHBlY3QoXCIqXCIsXCIvXCIsXCIlXCIpOylhPXRoaXMuYmluYXJ5Rm4oYSxjLmZuLHRoaXMudW5hcnkoKSk7cmV0dXJuIGF9LHVuYXJ5OmZ1bmN0aW9uKCl7dmFyIGE7cmV0dXJuIHRoaXMuZXhwZWN0KFwiK1wiKT90aGlzLnByaW1hcnkoKTooYT10aGlzLmV4cGVjdChcIi1cIikpP3RoaXMuYmluYXJ5Rm4oWWEuWkVSTyxhLmZuLHRoaXMudW5hcnkoKSk6KGE9dGhpcy5leHBlY3QoXCIhXCIpKT90aGlzLnVuYXJ5Rm4oYS5mbix0aGlzLnVuYXJ5KCkpOnRoaXMucHJpbWFyeSgpfSxmaWVsZEFjY2VzczpmdW5jdGlvbihhKXt2YXIgYz1cbnRoaXMsZD10aGlzLmV4cGVjdCgpLnRleHQsZT1OYyhkLHRoaXMub3B0aW9ucyx0aGlzLnRleHQpO3JldHVybiBFKGZ1bmN0aW9uKGMsZCxnKXtyZXR1cm4gZShnfHxhKGMsZCkpfSx7YXNzaWduOmZ1bmN0aW9uKGUsaCxnKXtyZXR1cm4gdWIoYShlLGcpLGQsaCxjLnRleHQpfX0pfSxvYmplY3RJbmRleDpmdW5jdGlvbihhKXt2YXIgYz10aGlzLGQ9dGhpcy5leHByZXNzaW9uKCk7dGhpcy5jb25zdW1lKFwiXVwiKTtyZXR1cm4gRShmdW5jdGlvbihlLGYpe3ZhciBoPWEoZSxmKSxnPWQoZSxmKTtxYShnLGMudGV4dCk7cmV0dXJuIGg/SmEoaFtnXSxjLnRleHQpOnR9LHthc3NpZ246ZnVuY3Rpb24oZSxmLGgpe3ZhciBnPWQoZSxoKTtyZXR1cm4gSmEoYShlLGgpLGMudGV4dClbZ109Zn19KX0sZnVuY3Rpb25DYWxsOmZ1bmN0aW9uKGEsYyl7dmFyIGQ9W107aWYoXCIpXCIhPT10aGlzLnBlZWtUb2tlbigpLnRleHQpe2RvIGQucHVzaCh0aGlzLmV4cHJlc3Npb24oKSk7d2hpbGUodGhpcy5leHBlY3QoXCIsXCIpKVxufXRoaXMuY29uc3VtZShcIilcIik7dmFyIGU9dGhpcztyZXR1cm4gZnVuY3Rpb24oZixoKXtmb3IodmFyIGc9W10sbj1jP2MoZixoKTpmLGw9MDtsPGQubGVuZ3RoO2wrKylnLnB1c2goZFtsXShmLGgpKTtsPWEoZixoLG4pfHxCO0phKG4sZS50ZXh0KTt2YXIgbT1lLnRleHQ7aWYobCl7aWYobC5jb25zdHJ1Y3Rvcj09PWwpdGhyb3cgaWEoXCJpc2VjZm5cIixtKTtpZihsPT09bGZ8fGw9PT1tZnx8bD09PW5mKXRocm93IGlhKFwiaXNlY2ZmXCIsbSk7fWc9bC5hcHBseT9sLmFwcGx5KG4sZyk6bChnWzBdLGdbMV0sZ1syXSxnWzNdLGdbNF0pO3JldHVybiBKYShnLGUudGV4dCl9fSxhcnJheURlY2xhcmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9W10sYz0hMDtpZihcIl1cIiE9PXRoaXMucGVla1Rva2VuKCkudGV4dCl7ZG97aWYodGhpcy5wZWVrKFwiXVwiKSlicmVhazt2YXIgZD10aGlzLmV4cHJlc3Npb24oKTthLnB1c2goZCk7ZC5jb25zdGFudHx8KGM9ITEpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwiXVwiKTtcbnJldHVybiBFKGZ1bmN0aW9uKGMsZCl7Zm9yKHZhciBoPVtdLGc9MDtnPGEubGVuZ3RoO2crKyloLnB1c2goYVtnXShjLGQpKTtyZXR1cm4gaH0se2xpdGVyYWw6ITAsY29uc3RhbnQ6Y30pfSxvYmplY3Q6ZnVuY3Rpb24oKXt2YXIgYT1bXSxjPSEwO2lmKFwifVwiIT09dGhpcy5wZWVrVG9rZW4oKS50ZXh0KXtkb3tpZih0aGlzLnBlZWsoXCJ9XCIpKWJyZWFrO3ZhciBkPXRoaXMuZXhwZWN0KCksZD1kLnN0cmluZ3x8ZC50ZXh0O3RoaXMuY29uc3VtZShcIjpcIik7dmFyIGU9dGhpcy5leHByZXNzaW9uKCk7YS5wdXNoKHtrZXk6ZCx2YWx1ZTplfSk7ZS5jb25zdGFudHx8KGM9ITEpfXdoaWxlKHRoaXMuZXhwZWN0KFwiLFwiKSl9dGhpcy5jb25zdW1lKFwifVwiKTtyZXR1cm4gRShmdW5jdGlvbihjLGQpe2Zvcih2YXIgZT17fSxuPTA7bjxhLmxlbmd0aDtuKyspe3ZhciBsPWFbbl07ZVtsLmtleV09bC52YWx1ZShjLGQpfXJldHVybiBlfSx7bGl0ZXJhbDohMCxjb25zdGFudDpjfSl9fTt2YXIgVmI9e30sXG53YT1PKFwiJHNjZVwiKSxmYT17SFRNTDpcImh0bWxcIixDU1M6XCJjc3NcIixVUkw6XCJ1cmxcIixSRVNPVVJDRV9VUkw6XCJyZXNvdXJjZVVybFwiLEpTOlwianNcIn0sJD1XLmNyZWF0ZUVsZW1lbnQoXCJhXCIpLFFjPXZhKFAubG9jYXRpb24uaHJlZiwhMCk7cGMuJGluamVjdD1bXCIkcHJvdmlkZVwiXTtSYy4kaW5qZWN0PVtcIiRsb2NhbGVcIl07VGMuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBXYz1cIi5cIixlZj17eXl5eTphYShcIkZ1bGxZZWFyXCIsNCkseXk6YWEoXCJGdWxsWWVhclwiLDIsMCwhMCkseTphYShcIkZ1bGxZZWFyXCIsMSksTU1NTTp3YihcIk1vbnRoXCIpLE1NTTp3YihcIk1vbnRoXCIsITApLE1NOmFhKFwiTW9udGhcIiwyLDEpLE06YWEoXCJNb250aFwiLDEsMSksZGQ6YWEoXCJEYXRlXCIsMiksZDphYShcIkRhdGVcIiwxKSxISDphYShcIkhvdXJzXCIsMiksSDphYShcIkhvdXJzXCIsMSksaGg6YWEoXCJIb3Vyc1wiLDIsLTEyKSxoOmFhKFwiSG91cnNcIiwxLC0xMiksbW06YWEoXCJNaW51dGVzXCIsMiksbTphYShcIk1pbnV0ZXNcIiwxKSxzczphYShcIlNlY29uZHNcIixcbjIpLHM6YWEoXCJTZWNvbmRzXCIsMSksc3NzOmFhKFwiTWlsbGlzZWNvbmRzXCIsMyksRUVFRTp3YihcIkRheVwiKSxFRUU6d2IoXCJEYXlcIiwhMCksYTpmdW5jdGlvbihhLGMpe3JldHVybiAxMj5hLmdldEhvdXJzKCk/Yy5BTVBNU1swXTpjLkFNUE1TWzFdfSxaOmZ1bmN0aW9uKGEpe2E9LTEqYS5nZXRUaW1lem9uZU9mZnNldCgpO3JldHVybiBhPSgwPD1hP1wiK1wiOlwiXCIpKyh2YihNYXRoWzA8YT9cImZsb29yXCI6XCJjZWlsXCJdKGEvNjApLDIpK3ZiKE1hdGguYWJzKGElNjApLDIpKX0sd3c6WWMoMiksdzpZYygxKX0sZGY9LygoPzpbXnlNZEhobXNhWkV3J10rKXwoPzonKD86W14nXXwnJykqJyl8KD86RSt8eSt8TSt8ZCt8SCt8aCt8bSt8cyt8YXxafHcrKSkoLiopLyxjZj0vXlxcLT9cXGQrJC87U2MuJGluamVjdD1bXCIkbG9jYWxlXCJdO3ZhciBhZj1iYShKKSxiZj1iYShpYik7VWMuJGluamVjdD1bXCIkcGFyc2VcIl07dmFyIHdkPWJhKHtyZXN0cmljdDpcIkVcIixjb21waWxlOmZ1bmN0aW9uKGEsYyl7OD49VCYmXG4oYy5ocmVmfHxjLm5hbWV8fGMuJHNldChcImhyZWZcIixcIlwiKSxhLmFwcGVuZChXLmNyZWF0ZUNvbW1lbnQoXCJJRSBmaXhcIikpKTtpZighYy5ocmVmJiYhYy54bGlua0hyZWYmJiFjLm5hbWUpcmV0dXJuIGZ1bmN0aW9uKGEsYyl7dmFyIGY9XCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09eWEuY2FsbChjLnByb3AoXCJocmVmXCIpKT9cInhsaW5rOmhyZWZcIjpcImhyZWZcIjtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbihhKXtjLmF0dHIoZil8fGEucHJldmVudERlZmF1bHQoKX0pfX19KSxqYj17fTtxKHBiLGZ1bmN0aW9uKGEsYyl7aWYoXCJtdWx0aXBsZVwiIT1hKXt2YXIgZD1vYShcIm5nLVwiK2MpO2piW2RdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxsaW5rOmZ1bmN0aW9uKGEsZixoKXthLiR3YXRjaChoW2RdLGZ1bmN0aW9uKGEpe2guJHNldChjLCEhYSl9KX19fX19KTtxKHhjLGZ1bmN0aW9uKGEsYyl7amJbY109ZnVuY3Rpb24oKXtyZXR1cm57cHJpb3JpdHk6MTAwLGxpbms6ZnVuY3Rpb24oYSxcbmUsZil7aWYoXCJuZ1BhdHRlcm5cIj09PWMmJlwiL1wiPT1mLm5nUGF0dGVybi5jaGFyQXQoMCkmJihlPWYubmdQYXR0ZXJuLm1hdGNoKGhmKSkpe2YuJHNldChcIm5nUGF0dGVyblwiLFJlZ0V4cChlWzFdLGVbMl0pKTtyZXR1cm59YS4kd2F0Y2goZltjXSxmdW5jdGlvbihhKXtmLiRzZXQoYyxhKX0pfX19fSk7cShbXCJzcmNcIixcInNyY3NldFwiLFwiaHJlZlwiXSxmdW5jdGlvbihhKXt2YXIgYz1vYShcIm5nLVwiK2EpO2piW2NdPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5Ojk5LGxpbms6ZnVuY3Rpb24oZCxlLGYpe3ZhciBoPWEsZz1hO1wiaHJlZlwiPT09YSYmXCJbb2JqZWN0IFNWR0FuaW1hdGVkU3RyaW5nXVwiPT09eWEuY2FsbChlLnByb3AoXCJocmVmXCIpKSYmKGc9XCJ4bGlua0hyZWZcIixmLiRhdHRyW2ddPVwieGxpbms6aHJlZlwiLGg9bnVsbCk7Zi4kb2JzZXJ2ZShjLGZ1bmN0aW9uKGEpe2EmJihmLiRzZXQoZyxhKSxUJiZoJiZlLnByb3AoaCxmW2ddKSl9KX19fX0pO3ZhciB6Yj17JGFkZENvbnRyb2w6QixcbiRyZW1vdmVDb250cm9sOkIsJHNldFZhbGlkaXR5OkIsJHNldERpcnR5OkIsJHNldFByaXN0aW5lOkJ9O1pjLiRpbmplY3Q9W1wiJGVsZW1lbnRcIixcIiRhdHRyc1wiLFwiJHNjb3BlXCIsXCIkYW5pbWF0ZVwiXTt2YXIgYmQ9ZnVuY3Rpb24oYSl7cmV0dXJuW1wiJHRpbWVvdXRcIixmdW5jdGlvbihjKXtyZXR1cm57bmFtZTpcImZvcm1cIixyZXN0cmljdDphP1wiRUFDXCI6XCJFXCIsY29udHJvbGxlcjpaYyxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGUsZixoKXtpZighZi5hY3Rpb24pe3ZhciBnPWZ1bmN0aW9uKGMpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7aC4kY29tbWl0Vmlld1ZhbHVlKCl9KTtjLnByZXZlbnREZWZhdWx0P2MucHJldmVudERlZmF1bHQoKTpjLnJldHVyblZhbHVlPSExfTtzYihlWzBdLFwic3VibWl0XCIsZyk7ZS5vbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtjKGZ1bmN0aW9uKCl7VGEoZVswXSxcInN1Ym1pdFwiLGcpfSwwLCExKX0pfXZhciBuPWUucGFyZW50KCkuY29udHJvbGxlcihcImZvcm1cIiksXG5sPWYubmFtZXx8Zi5uZ0Zvcm07bCYmdWIoYSxsLGgsbCk7aWYobillLm9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe24uJHJlbW92ZUNvbnRyb2woaCk7bCYmdWIoYSxsLHQsbCk7RShoLHpiKX0pfX19fX1dfSx4ZD1iZCgpLEtkPWJkKCEwKSxwZj0vXihmdHB8aHR0cHxodHRwcyk6XFwvXFwvKFxcdys6ezAsMX1cXHcqQCk/KFxcUyspKDpbMC05XSspPyhcXC98XFwvKFtcXHcjITouPys9JiVAIVxcLVxcL10pKT8kLyxxZj0vXlthLXowLTkhIyQlJicqK1xcLz0/Xl9ge3x9fi4tXStAW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8oXFwuW2EtejAtOV0oW2EtejAtOS1dKlthLXowLTldKT8pKiQvaSxyZj0vXlxccyooXFwtfFxcKyk/KFxcZCt8KFxcZCooXFwuXFxkKikpKVxccyokLyxjZD0vXihcXGR7NH0pLShcXGR7Mn0pLShcXGR7Mn0pJC8sZGQ9L14oXFxkezR9KS0oXFxkXFxkKS0oXFxkXFxkKVQoXFxkXFxkKTooXFxkXFxkKSQvLFpiPS9eKFxcZHs0fSktVyhcXGRcXGQpJC8sZWQ9L14oXFxkezR9KS0oXFxkXFxkKSQvLGZkPS9eKFxcZFxcZCk6KFxcZFxcZCkkLyxcbnNmPS8oXFxzK3xeKWRlZmF1bHQoXFxzK3wkKS8sZ2Q9e3RleHQ6WmEsZGF0ZTokYShcImRhdGVcIixjZCxCYihjZCxbXCJ5eXl5XCIsXCJNTVwiLFwiZGRcIl0pLFwieXl5eS1NTS1kZFwiKSxcImRhdGV0aW1lLWxvY2FsXCI6JGEoXCJkYXRldGltZWxvY2FsXCIsZGQsQmIoZGQsW1wieXl5eVwiLFwiTU1cIixcImRkXCIsXCJISFwiLFwibW1cIl0pLFwieXl5eS1NTS1kZFRISDptbVwiKSx0aW1lOiRhKFwidGltZVwiLGZkLEJiKGZkLFtcIkhIXCIsXCJtbVwiXSksXCJISDptbVwiKSx3ZWVrOiRhKFwid2Vla1wiLFpiLGZ1bmN0aW9uKGEpe2lmKGRhKGEpKXJldHVybiBhO2lmKEcoYSkpe1piLmxhc3RJbmRleD0wO3ZhciBjPVpiLmV4ZWMoYSk7aWYoYyl7YT0rY1sxXTt2YXIgZD0rY1syXSxjPVhjKGEpLGQ9NyooZC0xKTtyZXR1cm4gbmV3IERhdGUoYSwwLGMuZ2V0RGF0ZSgpK2QpfX1yZXR1cm4gTmFOfSxcInl5eXktV3d3XCIpLG1vbnRoOiRhKFwibW9udGhcIixlZCxCYihlZCxbXCJ5eXl5XCIsXCJNTVwiXSksXCJ5eXl5LU1NXCIpLG51bWJlcjpmdW5jdGlvbihhLFxuYyxkLGUsZixoKXtaYShhLGMsZCxlLGYsaCk7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe3ZhciBjPWUuJGlzRW1wdHkoYSk7aWYoY3x8cmYudGVzdChhKSlyZXR1cm4gZS4kc2V0VmFsaWRpdHkoXCJudW1iZXJcIiwhMCksXCJcIj09PWE/bnVsbDpjP2E6cGFyc2VGbG9hdChhKTtlLiRzZXRWYWxpZGl0eShcIm51bWJlclwiLCExKTtyZXR1cm4gdH0pO2ZmKGUsXCJudW1iZXJcIix0ZixudWxsLGUuJCR2YWxpZGl0eVN0YXRlKTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSk/XCJcIjpcIlwiK2F9KTtkLm1pbiYmKGE9ZnVuY3Rpb24oYSl7dmFyIGM9cGFyc2VGbG9hdChkLm1pbik7cmV0dXJuIFhiKGUsXCJtaW5cIixlLiRpc0VtcHR5KGEpfHxhPj1jLGEpfSxlLiRwYXJzZXJzLnB1c2goYSksZS4kZm9ybWF0dGVycy5wdXNoKGEpKTtkLm1heCYmKGE9ZnVuY3Rpb24oYSl7dmFyIGM9cGFyc2VGbG9hdChkLm1heCk7cmV0dXJuIFhiKGUsXCJtYXhcIixlLiRpc0VtcHR5KGEpfHxcbmE8PWMsYSl9LGUuJHBhcnNlcnMucHVzaChhKSxlLiRmb3JtYXR0ZXJzLnB1c2goYSkpO2UuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gWGIoZSxcIm51bWJlclwiLGUuJGlzRW1wdHkoYSl8fENhKGEpLGEpfSl9LHVybDpmdW5jdGlvbihhLGMsZCxlLGYsaCl7WmEoYSxjLGQsZSxmLGgpO2UuJHZhbGlkYXRvcnMudXJsPWZ1bmN0aW9uKGEsYyl7dmFyIGQ9YXx8YztyZXR1cm4gZS4kaXNFbXB0eShkKXx8cGYudGVzdChkKX19LGVtYWlsOmZ1bmN0aW9uKGEsYyxkLGUsZixoKXtaYShhLGMsZCxlLGYsaCk7ZS4kdmFsaWRhdG9ycy5lbWFpbD1mdW5jdGlvbihhLGMpe3ZhciBkPWF8fGM7cmV0dXJuIGUuJGlzRW1wdHkoZCl8fHFmLnRlc3QoZCl9fSxyYWRpbzpmdW5jdGlvbihhLGMsZCxlKXtGKGQubmFtZSkmJmMuYXR0cihcIm5hbWVcIiwrK2NiKTtjLm9uKFwiY2xpY2tcIixmdW5jdGlvbihmKXtjWzBdLmNoZWNrZWQmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7ZS4kc2V0Vmlld1ZhbHVlKGQudmFsdWUsXG5mJiZmLnR5cGUpfSl9KTtlLiRyZW5kZXI9ZnVuY3Rpb24oKXtjWzBdLmNoZWNrZWQ9ZC52YWx1ZT09ZS4kdmlld1ZhbHVlfTtkLiRvYnNlcnZlKFwidmFsdWVcIixlLiRyZW5kZXIpfSxjaGVja2JveDpmdW5jdGlvbihhLGMsZCxlLGYsaCxnLG4pe3ZhciBsPWFkKG4sYSxcIm5nVHJ1ZVZhbHVlXCIsZC5uZ1RydWVWYWx1ZSwhMCksbT1hZChuLGEsXCJuZ0ZhbHNlVmFsdWVcIixkLm5nRmFsc2VWYWx1ZSwhMSk7Yy5vbihcImNsaWNrXCIsZnVuY3Rpb24oZCl7YS4kYXBwbHkoZnVuY3Rpb24oKXtlLiRzZXRWaWV3VmFsdWUoY1swXS5jaGVja2VkLGQmJmQudHlwZSl9KX0pO2UuJHJlbmRlcj1mdW5jdGlvbigpe2NbMF0uY2hlY2tlZD1lLiR2aWV3VmFsdWV9O2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIGEhPT1sfTtlLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIHJhKGEsbCl9KTtlLiRwYXJzZXJzLnB1c2goZnVuY3Rpb24oYSl7cmV0dXJuIGE/bDptfSl9LGhpZGRlbjpCLFxuYnV0dG9uOkIsc3VibWl0OkIscmVzZXQ6QixmaWxlOkJ9LHRmPVtcImJhZElucHV0XCJdLGpjPVtcIiRicm93c2VyXCIsXCIkc25pZmZlclwiLFwiJGZpbHRlclwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxjLGQsZSl7cmV0dXJue3Jlc3RyaWN0OlwiRVwiLHJlcXVpcmU6W1wiP25nTW9kZWxcIl0sbGluazpmdW5jdGlvbihmLGgsZyxuKXtuWzBdJiYoZ2RbSihnLnR5cGUpXXx8Z2QudGV4dCkoZixoLGcsblswXSxjLGEsZCxlKX19fV0seWI9XCJuZy12YWxpZFwiLHhiPVwibmctaW52YWxpZFwiLEthPVwibmctcHJpc3RpbmVcIixBYj1cIm5nLWRpcnR5XCIsdWY9W1wiJHNjb3BlXCIsXCIkZXhjZXB0aW9uSGFuZGxlclwiLFwiJGF0dHJzXCIsXCIkZWxlbWVudFwiLFwiJHBhcnNlXCIsXCIkYW5pbWF0ZVwiLFwiJHRpbWVvdXRcIixmdW5jdGlvbihhLGMsZCxlLGYsaCxnKXtmdW5jdGlvbiBuKGEsYyl7Yz1jP1wiLVwiK2diKGMsXCItXCIpOlwiXCI7aC5yZW1vdmVDbGFzcyhlLChhP3hiOnliKStjKTtoLmFkZENsYXNzKGUsKGE/eWI6eGIpK2MpfXRoaXMuJG1vZGVsVmFsdWU9XG50aGlzLiR2aWV3VmFsdWU9TnVtYmVyLk5hTjt0aGlzLiR2YWxpZGF0b3JzPXt9O3RoaXMuJHBhcnNlcnM9W107dGhpcy4kZm9ybWF0dGVycz1bXTt0aGlzLiR2aWV3Q2hhbmdlTGlzdGVuZXJzPVtdO3RoaXMuJHVudG91Y2hlZD0hMDt0aGlzLiR0b3VjaGVkPSExO3RoaXMuJHByaXN0aW5lPSEwO3RoaXMuJGRpcnR5PSExO3RoaXMuJHZhbGlkPSEwO3RoaXMuJGludmFsaWQ9ITE7dGhpcy4kbmFtZT1kLm5hbWU7dmFyIGw9ZihkLm5nTW9kZWwpLG09bC5hc3NpZ24scD1udWxsLGs9dGhpcztpZighbSl0aHJvdyBPKFwibmdNb2RlbFwiKShcIm5vbmFzc2lnblwiLGQubmdNb2RlbCxnYShlKSk7dGhpcy4kcmVuZGVyPUI7dGhpcy4kaXNFbXB0eT1mdW5jdGlvbihhKXtyZXR1cm4gRihhKXx8XCJcIj09PWF8fG51bGw9PT1hfHxhIT09YX07dmFyIHM9ZS5pbmhlcml0ZWREYXRhKFwiJGZvcm1Db250cm9sbGVyXCIpfHx6YixyPTAsTD10aGlzLiRlcnJvcj17fTtlLmFkZENsYXNzKEthKS5hZGRDbGFzcyhcIm5nLXVudG91Y2hlZFwiKTtcbm4oITApO3RoaXMuJHNldFZhbGlkaXR5PWZ1bmN0aW9uKGEsYyl7TFthXSE9PSFjJiYoYz8oTFthXSYmci0tLHJ8fChuKCEwKSxrLiR2YWxpZD0hMCxrLiRpbnZhbGlkPSExKSk6KG4oITEpLGsuJGludmFsaWQ9ITAsay4kdmFsaWQ9ITEscisrKSxMW2FdPSFjLG4oYyxhKSxzLiRzZXRWYWxpZGl0eShhLGMsaykpfTt0aGlzLiRzZXRQcmlzdGluZT1mdW5jdGlvbigpe2suJGRpcnR5PSExO2suJHByaXN0aW5lPSEwO2gucmVtb3ZlQ2xhc3MoZSxBYik7aC5hZGRDbGFzcyhlLEthKX07dGhpcy4kc2V0VW50b3VjaGVkPWZ1bmN0aW9uKCl7ay4kdG91Y2hlZD0hMTtrLiR1bnRvdWNoZWQ9ITA7aC5zZXRDbGFzcyhlLFwibmctdW50b3VjaGVkXCIsXCJuZy10b3VjaGVkXCIpfTt0aGlzLiRzZXRUb3VjaGVkPWZ1bmN0aW9uKCl7ay4kdG91Y2hlZD0hMDtrLiR1bnRvdWNoZWQ9ITE7aC5zZXRDbGFzcyhlLFwibmctdG91Y2hlZFwiLFwibmctdW50b3VjaGVkXCIpfTt0aGlzLiRyb2xsYmFja1ZpZXdWYWx1ZT1mdW5jdGlvbigpe2cuY2FuY2VsKHApO1xuay4kdmlld1ZhbHVlPWsuJCRsYXN0Q29tbWl0dGVkVmlld1ZhbHVlO2suJHJlbmRlcigpfTt0aGlzLiR2YWxpZGF0ZT1mdW5jdGlvbigpe2lmKGsuJG1vZGVsVmFsdWU9PT1rLiRtb2RlbFZhbHVlKXt2YXIgYT1rLiRtb2RlbFZhbHVlO2suJCRydW5WYWxpZGF0b3JzKGsuJCRpbnZhbGlkTW9kZWxWYWx1ZXx8ay4kbW9kZWxWYWx1ZSxrLiR2aWV3VmFsdWUpO2EhPT1rLiRtb2RlbFZhbHVlJiZrLiQkd3JpdGVNb2RlbFRvU2NvcGUoKX19O3RoaXMuJCRydW5WYWxpZGF0b3JzPWZ1bmN0aW9uKGEsYyl7cShrLiR2YWxpZGF0b3JzLGZ1bmN0aW9uKGQsZSl7ay4kc2V0VmFsaWRpdHkoZSxkKGEsYykpfSk7ay4kbW9kZWxWYWx1ZT1rLiR2YWxpZD9hOnQ7ay4kJGludmFsaWRNb2RlbFZhbHVlPWsuJHZhbGlkP3Q6YX07dGhpcy4kY29tbWl0Vmlld1ZhbHVlPWZ1bmN0aW9uKGEpe3ZhciBjPWsuJHZpZXdWYWx1ZTtnLmNhbmNlbChwKTtpZihhfHxrLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZSE9PVxuYyl7ay4kJGxhc3RDb21taXR0ZWRWaWV3VmFsdWU9YztrLiRwcmlzdGluZSYmKGsuJGRpcnR5PSEwLGsuJHByaXN0aW5lPSExLGgucmVtb3ZlQ2xhc3MoZSxLYSksaC5hZGRDbGFzcyhlLEFiKSxzLiRzZXREaXJ0eSgpKTt2YXIgZD1jO3Eoay4kcGFyc2VycyxmdW5jdGlvbihhKXtkPWEoZCl9KTtrLiRtb2RlbFZhbHVlPT09ZHx8IUYoay4kJGludmFsaWRNb2RlbFZhbHVlKSYmay4kJGludmFsaWRNb2RlbFZhbHVlPT1kfHwoay4kJHJ1blZhbGlkYXRvcnMoZCxjKSxrLiQkd3JpdGVNb2RlbFRvU2NvcGUoKSl9fTt0aGlzLiQkd3JpdGVNb2RlbFRvU2NvcGU9ZnVuY3Rpb24oKXt2YXIgZDtrLiRvcHRpb25zJiZrLiRvcHRpb25zLmdldHRlclNldHRlciYmQShkPWwoYSkpP2Qoay4kbW9kZWxWYWx1ZSk6bShhLGsuJG1vZGVsVmFsdWUpO3Eoay4kdmlld0NoYW5nZUxpc3RlbmVycyxmdW5jdGlvbihhKXt0cnl7YSgpfWNhdGNoKGQpe2MoZCl9fSl9O3RoaXMuJHNldFZpZXdWYWx1ZT1mdW5jdGlvbihhLFxuYyxkKXtrLiR2aWV3VmFsdWU9YTtrLiRvcHRpb25zJiYhay4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHR8fGsuJCRkZWJvdW5jZVZpZXdWYWx1ZUNvbW1pdChjLGQpfTt0aGlzLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQ9ZnVuY3Rpb24oYSxjKXt2YXIgZD0wLGU9ay4kb3B0aW9ucztlJiZ2KGUuZGVib3VuY2UpJiYoZT1lLmRlYm91bmNlLENhKGUpP2Q9ZTpDYShlW2FdKT9kPWVbYV06Q2EoZVtcImRlZmF1bHRcIl0pJiYoZD1lW1wiZGVmYXVsdFwiXSkpO2cuY2FuY2VsKHApO2Q/cD1nKGZ1bmN0aW9uKCl7ay4kY29tbWl0Vmlld1ZhbHVlKGMpfSxkKTprLiRjb21taXRWaWV3VmFsdWUoYyl9O2EuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9bChhKTtrLiRvcHRpb25zJiYoay4kb3B0aW9ucy5nZXR0ZXJTZXR0ZXImJkEoYykpJiYoYz1jKCkpO2lmKGsuJG1vZGVsVmFsdWUhPT1jJiYoRihrLiQkaW52YWxpZE1vZGVsVmFsdWUpfHxrLiQkaW52YWxpZE1vZGVsVmFsdWUhPWMpKXtmb3IodmFyIGQ9XG5rLiRmb3JtYXR0ZXJzLGU9ZC5sZW5ndGgsZj1jO2UtLTspZj1kW2VdKGYpO2suJCRydW5WYWxpZGF0b3JzKGMsZik7ay4kdmlld1ZhbHVlIT09ZiYmKGsuJHZpZXdWYWx1ZT1rLiQkbGFzdENvbW1pdHRlZFZpZXdWYWx1ZT1mLGsuJHJlbmRlcigpKX1yZXR1cm4gY30pfV0sWmQ9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpbXCJuZ01vZGVsXCIsXCJeP2Zvcm1cIixcIl4/bmdNb2RlbE9wdGlvbnNcIl0sY29udHJvbGxlcjp1ZixsaW5rOntwcmU6ZnVuY3Rpb24oYSxjLGQsZSl7ZVsyXSYmKGVbMF0uJG9wdGlvbnM9ZVsyXS4kb3B0aW9ucyk7dmFyIGY9ZVswXSxoPWVbMV18fHpiO2guJGFkZENvbnRyb2woZik7YS4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7aC4kcmVtb3ZlQ29udHJvbChmKX0pfSxwb3N0OmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWVbMF07aWYoZi4kb3B0aW9ucyYmZi4kb3B0aW9ucy51cGRhdGVPbiljLm9uKGYuJG9wdGlvbnMudXBkYXRlT24sZnVuY3Rpb24oYyl7YS4kYXBwbHkoZnVuY3Rpb24oKXtmLiQkZGVib3VuY2VWaWV3VmFsdWVDb21taXQoYyYmXG5jLnR5cGUpfSl9KTtjLm9uKFwiYmx1clwiLGZ1bmN0aW9uKGMpe2EuJGFwcGx5KGZ1bmN0aW9uKCl7Zi4kc2V0VG91Y2hlZCgpfSl9KX19fX0sYWU9YmEoe3JlcXVpcmU6XCJuZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtlLiR2aWV3Q2hhbmdlTGlzdGVuZXJzLnB1c2goZnVuY3Rpb24oKXthLiRldmFsKGQubmdDaGFuZ2UpfSl9fSksbGM9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtlJiYoZC5yZXF1aXJlZD0hMCxlLiR2YWxpZGF0b3JzLnJlcXVpcmVkPWZ1bmN0aW9uKGEsYyl7cmV0dXJuIWQucmVxdWlyZWR8fCFlLiRpc0VtcHR5KGMpfSxkLiRvYnNlcnZlKFwicmVxdWlyZWRcIixmdW5jdGlvbigpe2UuJHZhbGlkYXRlKCl9KSl9fX0sa2M9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXt2YXIgZixoPWQubmdQYXR0ZXJufHxkLnBhdHRlcm47ZC4kb2JzZXJ2ZShcInBhdHRlcm5cIixcbmZ1bmN0aW9uKGEpe0coYSkmJjA8YS5sZW5ndGgmJihhPVJlZ0V4cChhKSk7aWYoYSYmIWEudGVzdCl0aHJvdyBPKFwibmdQYXR0ZXJuXCIpKFwibm9yZWdleHBcIixoLGEsZ2EoYykpO2Y9YXx8dDtlLiR2YWxpZGF0ZSgpfSk7ZS4kdmFsaWRhdG9ycy5wYXR0ZXJuPWZ1bmN0aW9uKGEpe3JldHVybiBlLiRpc0VtcHR5KGEpfHxGKGYpfHxmLnRlc3QoYSl9fX19fSxuYz1mdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwiP25nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe2lmKGUpe3ZhciBmPTA7ZC4kb2JzZXJ2ZShcIm1heGxlbmd0aFwiLGZ1bmN0aW9uKGEpe2Y9VShhKXx8MDtlLiR2YWxpZGF0ZSgpfSk7ZS4kdmFsaWRhdG9ycy5tYXhsZW5ndGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSl8fGEubGVuZ3RoPD1mfX19fX0sbWM9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIj9uZ01vZGVsXCIsbGluazpmdW5jdGlvbihhLGMsZCxlKXtpZihlKXt2YXIgZj0wO2QuJG9ic2VydmUoXCJtaW5sZW5ndGhcIixcbmZ1bmN0aW9uKGEpe2Y9VShhKXx8MDtlLiR2YWxpZGF0ZSgpfSk7ZS4kdmFsaWRhdG9ycy5taW5sZW5ndGg9ZnVuY3Rpb24oYSl7cmV0dXJuIGUuJGlzRW1wdHkoYSl8fGEubGVuZ3RoPj1mfX19fX0sJGQ9ZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIm5nTW9kZWxcIixsaW5rOmZ1bmN0aW9uKGEsYyxkLGUpe3ZhciBmPWMuYXR0cihkLiRhdHRyLm5nTGlzdCl8fFwiLCBcIixoPVwiZmFsc2VcIiE9PWQubmdUcmltLGc9aD9aKGYpOmY7ZS4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uKGEpe2lmKCFGKGEpKXt2YXIgYz1bXTthJiZxKGEuc3BsaXQoZyksZnVuY3Rpb24oYSl7YSYmYy5wdXNoKGg/WihhKTphKX0pO3JldHVybiBjfX0pO2UuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbihhKXtyZXR1cm4gTShhKT9hLmpvaW4oZik6dH0pO2UuJGlzRW1wdHk9ZnVuY3Rpb24oYSl7cmV0dXJuIWF8fCFhLmxlbmd0aH19fX0sdmY9L14odHJ1ZXxmYWxzZXxcXGQrKSQvLGJlPWZ1bmN0aW9uKCl7cmV0dXJue3ByaW9yaXR5OjEwMCxcbmNvbXBpbGU6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gdmYudGVzdChjLm5nVmFsdWUpP2Z1bmN0aW9uKGEsYyxmKXtmLiRzZXQoXCJ2YWx1ZVwiLGEuJGV2YWwoZi5uZ1ZhbHVlKSl9OmZ1bmN0aW9uKGEsYyxmKXthLiR3YXRjaChmLm5nVmFsdWUsZnVuY3Rpb24oYSl7Zi4kc2V0KFwidmFsdWVcIixhKX0pfX19fSxjZT1mdW5jdGlvbigpe3JldHVybntjb250cm9sbGVyOltcIiRzY29wZVwiLFwiJGF0dHJzXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzO3RoaXMuJG9wdGlvbnM9YS4kZXZhbChjLm5nTW9kZWxPcHRpb25zKTt0aGlzLiRvcHRpb25zLnVwZGF0ZU9uIT09dD8odGhpcy4kb3B0aW9ucy51cGRhdGVPbkRlZmF1bHQ9ITEsdGhpcy4kb3B0aW9ucy51cGRhdGVPbj1aKHRoaXMuJG9wdGlvbnMudXBkYXRlT24ucmVwbGFjZShzZixmdW5jdGlvbigpe2QuJG9wdGlvbnMudXBkYXRlT25EZWZhdWx0PSEwO3JldHVyblwiIFwifSkpKTp0aGlzLiRvcHRpb25zLnVwZGF0ZU9uRGVmYXVsdD0hMH1dfX0sQ2Q9XG54YSh7Y29tcGlsZTpmdW5jdGlvbihhKXthLmFkZENsYXNzKFwibmctYmluZGluZ1wiKTtyZXR1cm4gZnVuY3Rpb24oYSxkLGUpe2QuZGF0YShcIiRiaW5kaW5nXCIsZS5uZ0JpbmQpO2EuJHdhdGNoKGUubmdCaW5kLGZ1bmN0aW9uKGEpe2QudGV4dChhPT10P1wiXCI6YSl9KX19fSksRWQ9W1wiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXtjPWEoZC5hdHRyKGUuJGF0dHIubmdCaW5kVGVtcGxhdGUpKTtkLmFkZENsYXNzKFwibmctYmluZGluZ1wiKS5kYXRhKFwiJGJpbmRpbmdcIixjKTtlLiRvYnNlcnZlKFwibmdCaW5kVGVtcGxhdGVcIixmdW5jdGlvbihhKXtkLnRleHQoYSl9KX19XSxEZD1bXCIkc2NlXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGMpe3JldHVybntjb21waWxlOmZ1bmN0aW9uKGQsZSl7ZC5hZGRDbGFzcyhcIm5nLWJpbmRpbmdcIik7cmV0dXJuIGZ1bmN0aW9uKGQsZSxnKXtlLmRhdGEoXCIkYmluZGluZ1wiLGcubmdCaW5kSHRtbCk7dmFyIG49YyhnLm5nQmluZEh0bWwpO1xuZz1jKGcubmdCaW5kSHRtbCxmdW5jdGlvbihhKXtyZXR1cm4oYXx8XCJcIikudG9TdHJpbmcoKX0pO2QuJHdhdGNoKGcsZnVuY3Rpb24oKXtlLmh0bWwoYS5nZXRUcnVzdGVkSHRtbChuKGQpKXx8XCJcIil9KX19fX1dLEZkPVliKFwiXCIsITApLEhkPVliKFwiT2RkXCIsMCksR2Q9WWIoXCJFdmVuXCIsMSksSWQ9eGEoe2NvbXBpbGU6ZnVuY3Rpb24oYSxjKXtjLiRzZXQoXCJuZ0Nsb2FrXCIsdCk7YS5yZW1vdmVDbGFzcyhcIm5nLWNsb2FrXCIpfX0pLEpkPVtmdW5jdGlvbigpe3JldHVybntzY29wZTohMCxjb250cm9sbGVyOlwiQFwiLHByaW9yaXR5OjUwMH19XSxvYz17fTtxKFwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlbW92ZSBtb3VzZWVudGVyIG1vdXNlbGVhdmUga2V5ZG93biBrZXl1cCBrZXlwcmVzcyBzdWJtaXQgZm9jdXMgYmx1ciBjb3B5IGN1dCBwYXN0ZVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhKXt2YXIgYz1vYShcIm5nLVwiK2EpO29jW2NdPVxuW1wiJHBhcnNlXCIsZnVuY3Rpb24oZCl7cmV0dXJue2NvbXBpbGU6ZnVuY3Rpb24oZSxmKXt2YXIgaD1kKGZbY10pO3JldHVybiBmdW5jdGlvbihjLGQpe2Qub24oSihhKSxmdW5jdGlvbihhKXtjLiRhcHBseShmdW5jdGlvbigpe2goYyx7JGV2ZW50OmF9KX0pfSl9fX19XX0pO3ZhciBNZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybnttdWx0aUVsZW1lbnQ6ITAsdHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eTo2MDAsdGVybWluYWw6ITAscmVzdHJpY3Q6XCJBXCIsJCR0bGI6ITAsbGluazpmdW5jdGlvbihjLGQsZSxmLGgpe3ZhciBnLG4sbDtjLiR3YXRjaChlLm5nSWYsZnVuY3Rpb24oYyl7Yz9ufHxoKGZ1bmN0aW9uKGMsZil7bj1mO2NbYy5sZW5ndGgrK109Vy5jcmVhdGVDb21tZW50KFwiIGVuZCBuZ0lmOiBcIitlLm5nSWYrXCIgXCIpO2c9e2Nsb25lOmN9O2EuZW50ZXIoYyxkLnBhcmVudCgpLGQpfSk6KGwmJihsLnJlbW92ZSgpLGw9bnVsbCksbiYmKG4uJGRlc3Ryb3koKSxuPVxubnVsbCksZyYmKGw9aGIoZy5jbG9uZSksYS5sZWF2ZShsLGZ1bmN0aW9uKCl7bD1udWxsfSksZz1udWxsKSl9KX19fV0sTmQ9W1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkYW5jaG9yU2Nyb2xsXCIsXCIkYW5pbWF0ZVwiLFwiJHNjZVwiLGZ1bmN0aW9uKGEsYyxkLGUsZil7cmV0dXJue3Jlc3RyaWN0OlwiRUNBXCIscHJpb3JpdHk6NDAwLHRlcm1pbmFsOiEwLHRyYW5zY2x1ZGU6XCJlbGVtZW50XCIsY29udHJvbGxlcjpPYS5ub29wLGNvbXBpbGU6ZnVuY3Rpb24oaCxnKXt2YXIgbj1nLm5nSW5jbHVkZXx8Zy5zcmMsbD1nLm9ubG9hZHx8XCJcIixtPWcuYXV0b3Njcm9sbDtyZXR1cm4gZnVuY3Rpb24oZyxoLHEscixMKXt2YXIgdT0wLHQsdyx4LHk9ZnVuY3Rpb24oKXt3JiYody5yZW1vdmUoKSx3PW51bGwpO3QmJih0LiRkZXN0cm95KCksdD1udWxsKTt4JiYoZS5sZWF2ZSh4LGZ1bmN0aW9uKCl7dz1udWxsfSksdz14LHg9bnVsbCl9O2cuJHdhdGNoKGYucGFyc2VBc1Jlc291cmNlVXJsKG4pLGZ1bmN0aW9uKGYpe3ZhciBuPVxuZnVuY3Rpb24oKXshdihtKXx8bSYmIWcuJGV2YWwobSl8fGQoKX0scT0rK3U7Zj8oYS5nZXQoZix7Y2FjaGU6Y30pLnN1Y2Nlc3MoZnVuY3Rpb24oYSl7aWYocT09PXUpe3ZhciBjPWcuJG5ldygpO3IudGVtcGxhdGU9YTthPUwoYyxmdW5jdGlvbihhKXt5KCk7ZS5lbnRlcihhLG51bGwsaCxuKX0pO3Q9Yzt4PWE7dC4kZW1pdChcIiRpbmNsdWRlQ29udGVudExvYWRlZFwiKTtnLiRldmFsKGwpfX0pLmVycm9yKGZ1bmN0aW9uKCl7cT09PXUmJih5KCksZy4kZW1pdChcIiRpbmNsdWRlQ29udGVudEVycm9yXCIpKX0pLGcuJGVtaXQoXCIkaW5jbHVkZUNvbnRlbnRSZXF1ZXN0ZWRcIikpOih5KCksci50ZW1wbGF0ZT1udWxsKX0pfX19fV0sZGU9W1wiJGNvbXBpbGVcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQ0FcIixwcmlvcml0eTotNDAwLHJlcXVpcmU6XCJuZ0luY2x1ZGVcIixsaW5rOmZ1bmN0aW9uKGMsZCxlLGYpe2QuaHRtbChmLnRlbXBsYXRlKTthKGQuY29udGVudHMoKSkoYyl9fX1dLFxuT2Q9eGEoe3ByaW9yaXR5OjQ1MCxjb21waWxlOmZ1bmN0aW9uKCl7cmV0dXJue3ByZTpmdW5jdGlvbihhLGMsZCl7YS4kZXZhbChkLm5nSW5pdCl9fX19KSxQZD14YSh7dGVybWluYWw6ITAscHJpb3JpdHk6MUUzfSksUWQ9W1wiJGxvY2FsZVwiLFwiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD0ve30vZztyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLGxpbms6ZnVuY3Rpb24oZSxmLGgpe3ZhciBnPWguY291bnQsbj1oLiRhdHRyLndoZW4mJmYuYXR0cihoLiRhdHRyLndoZW4pLGw9aC5vZmZzZXR8fDAsbT1lLiRldmFsKG4pfHx7fSxwPXt9LGs9Yy5zdGFydFN5bWJvbCgpLHM9Yy5lbmRTeW1ib2woKSxyPS9ed2hlbihNaW51cyk/KC4rKSQvO3EoaCxmdW5jdGlvbihhLGMpe3IudGVzdChjKSYmKG1bSihjLnJlcGxhY2UoXCJ3aGVuXCIsXCJcIikucmVwbGFjZShcIk1pbnVzXCIsXCItXCIpKV09Zi5hdHRyKGguJGF0dHJbY10pKX0pO3EobSxmdW5jdGlvbihhLGUpe3BbZV09YyhhLnJlcGxhY2UoZCxcbmsrZytcIi1cIitsK3MpKX0pO2UuJHdhdGNoKGZ1bmN0aW9uKCl7dmFyIGM9cGFyc2VGbG9hdChlLiRldmFsKGcpKTtpZihpc05hTihjKSlyZXR1cm5cIlwiO2MgaW4gbXx8KGM9YS5wbHVyYWxDYXQoYy1sKSk7cmV0dXJuIHBbY10oZSl9LGZ1bmN0aW9uKGEpe2YudGV4dChhKX0pfX19XSxSZD1bXCIkcGFyc2VcIixcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSxjKXt2YXIgZD1PKFwibmdSZXBlYXRcIik7cmV0dXJue211bHRpRWxlbWVudDohMCx0cmFuc2NsdWRlOlwiZWxlbWVudFwiLHByaW9yaXR5OjFFMyx0ZXJtaW5hbDohMCwkJHRsYjohMCxsaW5rOmZ1bmN0aW9uKGUsZixoLGcsbil7dmFyIGw9aC5uZ1JlcGVhdCxtPWwubWF0Y2goL15cXHMqKFtcXHNcXFNdKz8pXFxzK2luXFxzKyhbXFxzXFxTXSs/KSg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLykscCxrLHMscix0LHUsdj17JGlkOkdhfTtpZighbSl0aHJvdyBkKFwiaWV4cFwiLGwpO2g9bVsxXTtnPW1bMl07KG09bVszXSk/KHA9YShtKSxrPWZ1bmN0aW9uKGEsXG5jLGQpe3UmJih2W3VdPWEpO3ZbdF09Yzt2LiRpbmRleD1kO3JldHVybiBwKGUsdil9KToocz1mdW5jdGlvbihhLGMpe3JldHVybiBHYShjKX0scj1mdW5jdGlvbihhKXtyZXR1cm4gYX0pO209aC5tYXRjaCgvXig/OihbXFwkXFx3XSspfFxcKChbXFwkXFx3XSspXFxzKixcXHMqKFtcXCRcXHddKylcXCkpJC8pO2lmKCFtKXRocm93IGQoXCJpaWRleHBcIixoKTt0PW1bM118fG1bMV07dT1tWzJdO3ZhciB3PXt9O2UuJHdhdGNoQ29sbGVjdGlvbihnLGZ1bmN0aW9uKGEpe3ZhciBlLGcsaD1mWzBdLG0scD17fSx2LEQsRSxCLEYsRyxBLEs9W10sTT1mdW5jdGlvbihhLGMpe2FbdF09RTt1JiYoYVt1XT1EKTthLiRpbmRleD1jO2EuJGZpcnN0PTA9PT1jO2EuJGxhc3Q9Yz09PXYtMTthLiRtaWRkbGU9IShhLiRmaXJzdHx8YS4kbGFzdCk7YS4kb2RkPSEoYS4kZXZlbj0wPT09KGMmMSkpfTtpZihiYihhKSlHPWEsRj1rfHxzO2Vsc2V7Rj1rfHxyO0c9W107Zm9yKGcgaW4gYSlhLmhhc093blByb3BlcnR5KGcpJiZcblwiJFwiIT1nLmNoYXJBdCgwKSYmRy5wdXNoKGcpO0cuc29ydCgpfXY9Ry5sZW5ndGg7Zz1LLmxlbmd0aD1HLmxlbmd0aDtmb3IoZT0wO2U8ZztlKyspaWYoRD1hPT09Rz9lOkdbZV0sRT1hW0RdLEI9RihELEUsZSksQWEoQixcImB0cmFjayBieWAgaWRcIiksdy5oYXNPd25Qcm9wZXJ0eShCKSlBPXdbQl0sZGVsZXRlIHdbQl0scFtCXT1BLEtbZV09QTtlbHNle2lmKHAuaGFzT3duUHJvcGVydHkoQikpdGhyb3cgcShLLGZ1bmN0aW9uKGEpe2EmJmEuc2NvcGUmJih3W2EuaWRdPWEpfSksZChcImR1cGVzXCIsbCxCKTtLW2VdPXtpZDpCfTtwW0JdPSExfWZvcihtIGluIHcpdy5oYXNPd25Qcm9wZXJ0eShtKSYmKEE9d1ttXSxnPWhiKEEuY2xvbmUpLGMubGVhdmUoZykscShnLGZ1bmN0aW9uKGEpe2EuJCROR19SRU1PVkVEPSEwfSksQS5zY29wZS4kZGVzdHJveSgpKTtlPTA7Zm9yKGc9Ry5sZW5ndGg7ZTxnO2UrKylpZihEPWE9PT1HP2U6R1tlXSxFPWFbRF0sQT1LW2VdLEtbZS0xXSYmKGg9S1tlLVxuMV0uY2xvbmVbS1tlLTFdLmNsb25lLmxlbmd0aC0xXSksQS5zY29wZSl7bT1oO2RvIG09bS5uZXh0U2libGluZzt3aGlsZShtJiZtLiQkTkdfUkVNT1ZFRCk7QS5jbG9uZVswXSE9bSYmYy5tb3ZlKGhiKEEuY2xvbmUpLG51bGwseihoKSk7aD1BLmNsb25lW0EuY2xvbmUubGVuZ3RoLTFdO00oQS5zY29wZSxlKX1lbHNlIG4oZnVuY3Rpb24oYSxkKXtBLnNjb3BlPWQ7YVthLmxlbmd0aCsrXT1XLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nUmVwZWF0OiBcIitsK1wiIFwiKTtjLmVudGVyKGEsbnVsbCx6KGgpKTtoPWE7QS5jbG9uZT1hO3BbQS5pZF09QTtNKEEuc2NvcGUsZSl9KTt3PXB9KX19fV0sU2Q9W1wiJGFuaW1hdGVcIixmdW5jdGlvbihhKXtyZXR1cm57bXVsdGlFbGVtZW50OiEwLGxpbms6ZnVuY3Rpb24oYyxkLGUpe2MuJHdhdGNoKGUubmdTaG93LGZ1bmN0aW9uKGMpe2FbYz9cInJlbW92ZUNsYXNzXCI6XCJhZGRDbGFzc1wiXShkLFwibmctaGlkZVwiKX0pfX19XSxMZD1bXCIkYW5pbWF0ZVwiLGZ1bmN0aW9uKGEpe3JldHVybnttdWx0aUVsZW1lbnQ6ITAsXG5saW5rOmZ1bmN0aW9uKGMsZCxlKXtjLiR3YXRjaChlLm5nSGlkZSxmdW5jdGlvbihjKXthW2M/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oZCxcIm5nLWhpZGVcIil9KX19fV0sVGQ9eGEoZnVuY3Rpb24oYSxjLGQpe2EuJHdhdGNoKGQubmdTdHlsZSxmdW5jdGlvbihhLGQpe2QmJmEhPT1kJiZxKGQsZnVuY3Rpb24oYSxkKXtjLmNzcyhkLFwiXCIpfSk7YSYmYy5jc3MoYSl9LCEwKX0pLFVkPVtcIiRhbmltYXRlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXF1aXJlOlwibmdTd2l0Y2hcIixjb250cm9sbGVyOltcIiRzY29wZVwiLGZ1bmN0aW9uKCl7dGhpcy5jYXNlcz17fX1dLGxpbms6ZnVuY3Rpb24oYyxkLGUsZil7dmFyIGg9W10sZz1bXSxuPVtdLGw9W107Yy4kd2F0Y2goZS5uZ1N3aXRjaHx8ZS5vbixmdW5jdGlvbihkKXt2YXIgcCxrO3A9MDtmb3Ioaz1uLmxlbmd0aDtwPGs7KytwKW5bcF0ucmVtb3ZlKCk7cD1uLmxlbmd0aD0wO2ZvcihrPWwubGVuZ3RoO3A8azsrK3Ape3ZhciBzPVxuaGIoZ1twXS5jbG9uZSk7bFtwXS4kZGVzdHJveSgpO25bcF09czthLmxlYXZlKHMsZnVuY3Rpb24oKXtuLnNwbGljZShwLDEpfSl9Zy5sZW5ndGg9MDtsLmxlbmd0aD0wO2lmKGg9Zi5jYXNlc1tcIiFcIitkXXx8Zi5jYXNlc1tcIj9cIl0pYy4kZXZhbChlLmNoYW5nZSkscShoLGZ1bmN0aW9uKGMpe2MudHJhbnNjbHVkZShmdW5jdGlvbihkLGUpe2wucHVzaChlKTt2YXIgZj1jLmVsZW1lbnQ7ZFtkLmxlbmd0aCsrXT1XLmNyZWF0ZUNvbW1lbnQoXCIgZW5kIG5nU3dpdGNoV2hlbjogXCIpO2cucHVzaCh7Y2xvbmU6ZH0pO2EuZW50ZXIoZCxmLnBhcmVudCgpLGYpfSl9KX0pfX19XSxWZD14YSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxMjAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2UuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dPWUuY2FzZXNbXCIhXCIrZC5uZ1N3aXRjaFdoZW5dfHxbXTtlLmNhc2VzW1wiIVwiK2QubmdTd2l0Y2hXaGVuXS5wdXNoKHt0cmFuc2NsdWRlOmYsXG5lbGVtZW50OmN9KX19KSxXZD14YSh7dHJhbnNjbHVkZTpcImVsZW1lbnRcIixwcmlvcml0eToxMjAwLHJlcXVpcmU6XCJebmdTd2l0Y2hcIixtdWx0aUVsZW1lbnQ6ITAsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2UuY2FzZXNbXCI/XCJdPWUuY2FzZXNbXCI/XCJdfHxbXTtlLmNhc2VzW1wiP1wiXS5wdXNoKHt0cmFuc2NsdWRlOmYsZWxlbWVudDpjfSl9fSksWWQ9eGEoe3Jlc3RyaWN0OlwiRUFDXCIsbGluazpmdW5jdGlvbihhLGMsZCxlLGYpe2lmKCFmKXRocm93IE8oXCJuZ1RyYW5zY2x1ZGVcIikoXCJvcnBoYW5cIixnYShjKSk7ZihmdW5jdGlvbihhKXtjLmVtcHR5KCk7Yy5hcHBlbmQoYSl9KX19KSx5ZD1bXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe3JldHVybntyZXN0cmljdDpcIkVcIix0ZXJtaW5hbDohMCxjb21waWxlOmZ1bmN0aW9uKGMsZCl7XCJ0ZXh0L25nLXRlbXBsYXRlXCI9PWQudHlwZSYmYS5wdXQoZC5pZCxjWzBdLnRleHQpfX19XSx3Zj1PKFwibmdPcHRpb25zXCIpLFhkPWJhKHt0ZXJtaW5hbDohMH0pLFxuemQ9W1wiJGNvbXBpbGVcIixcIiRwYXJzZVwiLGZ1bmN0aW9uKGEsYyl7dmFyIGQ9L15cXHMqKFtcXHNcXFNdKz8pKD86XFxzK2FzXFxzKyhbXFxzXFxTXSs/KSk/KD86XFxzK2dyb3VwXFxzK2J5XFxzKyhbXFxzXFxTXSs/KSk/XFxzK2ZvclxccysoPzooW1xcJFxcd11bXFwkXFx3XSopfCg/OlxcKFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKixcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccypcXCkpKVxccytpblxccysoW1xcc1xcU10rPykoPzpcXHMrdHJhY2tcXHMrYnlcXHMrKFtcXHNcXFNdKz8pKT8kLyxlPXskc2V0Vmlld1ZhbHVlOkJ9O3JldHVybntyZXN0cmljdDpcIkVcIixyZXF1aXJlOltcInNlbGVjdFwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpbXCIkZWxlbWVudFwiLFwiJHNjb3BlXCIsXCIkYXR0cnNcIixmdW5jdGlvbihhLGMsZCl7dmFyIG49dGhpcyxsPXt9LG09ZSxwO24uZGF0YWJvdW5kPWQubmdNb2RlbDtuLmluaXQ9ZnVuY3Rpb24oYSxjLGQpe209YTtwPWR9O24uYWRkT3B0aW9uPWZ1bmN0aW9uKGMsZCl7QWEoYywnXCJvcHRpb24gdmFsdWVcIicpO2xbY109XG4hMDttLiR2aWV3VmFsdWU9PWMmJihhLnZhbChjKSxwLnBhcmVudCgpJiZwLnJlbW92ZSgpKTtkWzBdLmhhc0F0dHJpYnV0ZShcInNlbGVjdGVkXCIpJiYoZFswXS5zZWxlY3RlZD0hMCl9O24ucmVtb3ZlT3B0aW9uPWZ1bmN0aW9uKGEpe3RoaXMuaGFzT3B0aW9uKGEpJiYoZGVsZXRlIGxbYV0sbS4kdmlld1ZhbHVlPT1hJiZ0aGlzLnJlbmRlclVua25vd25PcHRpb24oYSkpfTtuLnJlbmRlclVua25vd25PcHRpb249ZnVuY3Rpb24oYyl7Yz1cIj8gXCIrR2EoYykrXCIgP1wiO3AudmFsKGMpO2EucHJlcGVuZChwKTthLnZhbChjKTtwLnByb3AoXCJzZWxlY3RlZFwiLCEwKX07bi5oYXNPcHRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIGwuaGFzT3duUHJvcGVydHkoYSl9O2MuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe24ucmVuZGVyVW5rbm93bk9wdGlvbj1CfSl9XSxsaW5rOmZ1bmN0aW9uKGUsaCxnLG4pe2Z1bmN0aW9uIGwoYSxjLGQsZSl7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9ZC4kdmlld1ZhbHVlO1xuZS5oYXNPcHRpb24oYSk/KHgucGFyZW50KCkmJngucmVtb3ZlKCksYy52YWwoYSksXCJcIj09PWEmJnUucHJvcChcInNlbGVjdGVkXCIsITApKTpGKGEpJiZ1P2MudmFsKFwiXCIpOmUucmVuZGVyVW5rbm93bk9wdGlvbihhKX07Yy5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7YS4kYXBwbHkoZnVuY3Rpb24oKXt4LnBhcmVudCgpJiZ4LnJlbW92ZSgpO2QuJHNldFZpZXdWYWx1ZShjLnZhbCgpKX0pfSl9ZnVuY3Rpb24gbShhLGMsZCl7dmFyIGU7ZC4kcmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFZhKGQuJHZpZXdWYWx1ZSk7cShjLmZpbmQoXCJvcHRpb25cIiksZnVuY3Rpb24oYyl7Yy5zZWxlY3RlZD12KGEuZ2V0KGMudmFsdWUpKX0pfTthLiR3YXRjaChmdW5jdGlvbigpe3JhKGUsZC4kdmlld1ZhbHVlKXx8KGU9amEoZC4kdmlld1ZhbHVlKSxkLiRyZW5kZXIoKSl9KTtjLm9uKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe3ZhciBhPVtdO3EoYy5maW5kKFwib3B0aW9uXCIpLFxuZnVuY3Rpb24oYyl7Yy5zZWxlY3RlZCYmYS5wdXNoKGMudmFsdWUpfSk7ZC4kc2V0Vmlld1ZhbHVlKGEpfSl9KX1mdW5jdGlvbiBwKGUsZixnKXtmdW5jdGlvbiBoKCl7dmFyIGE9e1wiXCI6W119LGM9W1wiXCJdLGQsayxyLHQsQjt0PWcuJG1vZGVsVmFsdWU7Qj14KGUpfHxbXTt2YXIgRD1uPyRiKEIpOkIsRyx6LEM7ej17fTtyPSExO3ZhciBGLEo7aWYocylpZih1JiZNKHQpKWZvcihyPW5ldyBWYShbXSksQz0wO0M8dC5sZW5ndGg7QysrKXpbbV09dFtDXSxyLnB1dCh1KGUseiksdFtDXSk7ZWxzZSByPW5ldyBWYSh0KTtmb3IoQz0wO0c9RC5sZW5ndGgsQzxHO0MrKyl7az1DO2lmKG4pe2s9RFtDXTtpZihcIiRcIj09PWsuY2hhckF0KDApKWNvbnRpbnVlO3pbbl09a316W21dPUJba107ZD1wKGUseil8fFwiXCI7KGs9YVtkXSl8fChrPWFbZF09W10sYy5wdXNoKGQpKTtzP2Q9dihyLnJlbW92ZSh1P3UoZSx6KTpxKGUseikpKToodT8oZD17fSxkW21dPXQsZD11KGUsZCk9PT11KGUseikpOmQ9dD09PVxucShlLHopLHI9cnx8ZCk7Rj1sKGUseik7Rj12KEYpP0Y6XCJcIjtrLnB1c2goe2lkOnU/dShlLHopOm4/RFtDXTpDLGxhYmVsOkYsc2VsZWN0ZWQ6ZH0pfXN8fChBfHxudWxsPT09dD9hW1wiXCJdLnVuc2hpZnQoe2lkOlwiXCIsbGFiZWw6XCJcIixzZWxlY3RlZDohcn0pOnJ8fGFbXCJcIl0udW5zaGlmdCh7aWQ6XCI/XCIsbGFiZWw6XCJcIixzZWxlY3RlZDohMH0pKTt6PTA7Zm9yKEQ9Yy5sZW5ndGg7ejxEO3orKyl7ZD1jW3pdO2s9YVtkXTt5Lmxlbmd0aDw9ej8odD17ZWxlbWVudDp3LmNsb25lKCkuYXR0cihcImxhYmVsXCIsZCksbGFiZWw6ay5sYWJlbH0sQj1bdF0seS5wdXNoKEIpLGYuYXBwZW5kKHQuZWxlbWVudCkpOihCPXlbel0sdD1CWzBdLHQubGFiZWwhPWQmJnQuZWxlbWVudC5hdHRyKFwibGFiZWxcIix0LmxhYmVsPWQpKTtGPW51bGw7Qz0wO2ZvcihHPWsubGVuZ3RoO0M8RztDKyspcj1rW0NdLChkPUJbQysxXSk/KEY9ZC5lbGVtZW50LGQubGFiZWwhPT1yLmxhYmVsJiZGLnRleHQoZC5sYWJlbD1yLmxhYmVsKSxcbmQuaWQhPT1yLmlkJiZGLnZhbChkLmlkPXIuaWQpLGQuc2VsZWN0ZWQhPT1yLnNlbGVjdGVkJiYoRi5wcm9wKFwic2VsZWN0ZWRcIixkLnNlbGVjdGVkPXIuc2VsZWN0ZWQpLFQmJkYucHJvcChcInNlbGVjdGVkXCIsZC5zZWxlY3RlZCkpKTooXCJcIj09PXIuaWQmJkE/Sj1BOihKPUUuY2xvbmUoKSkudmFsKHIuaWQpLnByb3AoXCJzZWxlY3RlZFwiLHIuc2VsZWN0ZWQpLnRleHQoci5sYWJlbCksQi5wdXNoKHtlbGVtZW50OkosbGFiZWw6ci5sYWJlbCxpZDpyLmlkLHNlbGVjdGVkOnIuc2VsZWN0ZWR9KSxGP0YuYWZ0ZXIoSik6dC5lbGVtZW50LmFwcGVuZChKKSxGPUopO2ZvcihDKys7Qi5sZW5ndGg+QzspQi5wb3AoKS5lbGVtZW50LnJlbW92ZSgpfWZvcig7eS5sZW5ndGg+ejspeS5wb3AoKVswXS5lbGVtZW50LnJlbW92ZSgpfXZhciBrO2lmKCEoaz1yLm1hdGNoKGQpKSl0aHJvdyB3ZihcImlleHBcIixyLGdhKGYpKTt2YXIgbD1jKGtbMl18fGtbMV0pLG09a1s0XXx8a1s2XSxuPWtbNV0scD1jKGtbM118fFxuXCJcIikscT1jKGtbMl0/a1sxXTptKSx4PWMoa1s3XSksdT1rWzhdP2Moa1s4XSk6bnVsbCx5PVtbe2VsZW1lbnQ6ZixsYWJlbDpcIlwifV1dO0EmJihhKEEpKGUpLEEucmVtb3ZlQ2xhc3MoXCJuZy1zY29wZVwiKSxBLnJlbW92ZSgpKTtmLmVtcHR5KCk7Zi5vbihcImNoYW5nZVwiLGZ1bmN0aW9uKCl7ZS4kYXBwbHkoZnVuY3Rpb24oKXt2YXIgYSxjPXgoZSl8fFtdLGQ9e30saCxrLGwscCxyLHcsdjtpZihzKWZvcihrPVtdLHA9MCx3PXkubGVuZ3RoO3A8dztwKyspZm9yKGE9eVtwXSxsPTEscj1hLmxlbmd0aDtsPHI7bCsrKXtpZigoaD1hW2xdLmVsZW1lbnQpWzBdLnNlbGVjdGVkKXtoPWgudmFsKCk7biYmKGRbbl09aCk7aWYodSlmb3Iodj0wO3Y8Yy5sZW5ndGgmJihkW21dPWNbdl0sdShlLGQpIT1oKTt2KyspO2Vsc2UgZFttXT1jW2hdO2sucHVzaChxKGUsZCkpfX1lbHNle2g9Zi52YWwoKTtpZihcIj9cIj09aClrPXQ7ZWxzZSBpZihcIlwiPT09aClrPW51bGw7ZWxzZSBpZih1KWZvcih2PTA7djxjLmxlbmd0aDt2Kyspe2lmKGRbbV09XG5jW3ZdLHUoZSxkKT09aCl7az1xKGUsZCk7YnJlYWt9fWVsc2UgZFttXT1jW2hdLG4mJihkW25dPWgpLGs9cShlLGQpOzE8eVswXS5sZW5ndGgmJnlbMF1bMV0uaWQhPT1oJiYoeVswXVsxXS5zZWxlY3RlZD0hMSl9Zy4kc2V0Vmlld1ZhbHVlKGspfSl9KTtnLiRyZW5kZXI9aDtlLiR3YXRjaChoKX1pZihuWzFdKXt2YXIgaz1uWzBdO249blsxXTt2YXIgcz1nLm11bHRpcGxlLHI9Zy5uZ09wdGlvbnMsQT0hMSx1LEU9eihXLmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLHc9eihXLmNyZWF0ZUVsZW1lbnQoXCJvcHRncm91cFwiKSkseD1FLmNsb25lKCk7Zz0wO2Zvcih2YXIgeT1oLmNoaWxkcmVuKCksQj15Lmxlbmd0aDtnPEI7ZysrKWlmKFwiXCI9PT15W2ddLnZhbHVlKXt1PUE9eS5lcShnKTticmVha31rLmluaXQobixBLHgpO3MmJihuLiRpc0VtcHR5PWZ1bmN0aW9uKGEpe3JldHVybiFhfHwwPT09YS5sZW5ndGh9KTtyP3AoZSxoLG4pOnM/bShlLGgsbik6bChlLGgsbixrKX19fX1dLEJkPVtcIiRpbnRlcnBvbGF0ZVwiLFxuZnVuY3Rpb24oYSl7dmFyIGM9e2FkZE9wdGlvbjpCLHJlbW92ZU9wdGlvbjpCfTtyZXR1cm57cmVzdHJpY3Q6XCJFXCIscHJpb3JpdHk6MTAwLGNvbXBpbGU6ZnVuY3Rpb24oZCxlKXtpZihGKGUudmFsdWUpKXt2YXIgZj1hKGQudGV4dCgpLCEwKTtmfHxlLiRzZXQoXCJ2YWx1ZVwiLGQudGV4dCgpKX1yZXR1cm4gZnVuY3Rpb24oYSxkLGUpe3ZhciBsPWQucGFyZW50KCksbT1sLmRhdGEoXCIkc2VsZWN0Q29udHJvbGxlclwiKXx8bC5wYXJlbnQoKS5kYXRhKFwiJHNlbGVjdENvbnRyb2xsZXJcIik7bSYmbS5kYXRhYm91bmQ/ZC5wcm9wKFwic2VsZWN0ZWRcIiwhMSk6bT1jO2Y/YS4kd2F0Y2goZixmdW5jdGlvbihhLGMpe2UuJHNldChcInZhbHVlXCIsYSk7YyE9PWEmJm0ucmVtb3ZlT3B0aW9uKGMpO20uYWRkT3B0aW9uKGEsZCl9KTptLmFkZE9wdGlvbihlLnZhbHVlLGQpO2Qub24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7bS5yZW1vdmVPcHRpb24oZS52YWx1ZSl9KX19fX1dLEFkPWJhKHtyZXN0cmljdDpcIkVcIixcbnRlcm1pbmFsOiExfSk7UC5hbmd1bGFyLmJvb3RzdHJhcD9jb25zb2xlLmxvZyhcIldBUk5JTkc6IFRyaWVkIHRvIGxvYWQgYW5ndWxhciBtb3JlIHRoYW4gb25jZS5cIik6KHFkKCksc2QoT2EpLHooVykucmVhZHkoZnVuY3Rpb24oKXtvZChXLGdjKX0pKX0pKHdpbmRvdyxkb2N1bWVudCk7IXdpbmRvdy5hbmd1bGFyLiQkY3NwKCkmJndpbmRvdy5hbmd1bGFyLmVsZW1lbnQoZG9jdW1lbnQpLmZpbmQoXCJoZWFkXCIpLnByZXBlbmQoJzxzdHlsZSB0eXBlPVwidGV4dC9jc3NcIj5AY2hhcnNldCBcIlVURi04XCI7W25nXFxcXDpjbG9ha10sW25nLWNsb2FrXSxbZGF0YS1uZy1jbG9ha10sW3gtbmctY2xvYWtdLC5uZy1jbG9haywueC1uZy1jbG9haywubmctaGlkZTpub3QoLm5nLWFuaW1hdGUpe2Rpc3BsYXk6bm9uZSAhaW1wb3J0YW50O31uZ1xcXFw6Zm9ybXtkaXNwbGF5OmJsb2NrO308L3N0eWxlPicpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YW5ndWxhci5taW4uanMubWFwXG4iLCIvKlxuICogYW5ndWxhci11aS1ib290c3RyYXBcbiAqIGh0dHA6Ly9hbmd1bGFyLXVpLmdpdGh1Yi5pby9ib290c3RyYXAvXG5cbiAqIFZlcnNpb246IDAuMTEuMCAtIDIwMTQtMDUtMDFcbiAqIExpY2Vuc2U6IE1JVFxuICovXG5hbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcFwiLFtcInVpLmJvb3RzdHJhcC50cGxzXCIsXCJ1aS5ib290c3RyYXAudHJhbnNpdGlvblwiLFwidWkuYm9vdHN0cmFwLmNvbGxhcHNlXCIsXCJ1aS5ib290c3RyYXAuYWNjb3JkaW9uXCIsXCJ1aS5ib290c3RyYXAuYWxlcnRcIixcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiLFwidWkuYm9vdHN0cmFwLmJ1dHRvbnNcIixcInVpLmJvb3RzdHJhcC5jYXJvdXNlbFwiLFwidWkuYm9vdHN0cmFwLmRhdGVwYXJzZXJcIixcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFwidWkuYm9vdHN0cmFwLmRhdGVwaWNrZXJcIixcInVpLmJvb3RzdHJhcC5kcm9wZG93blwiLFwidWkuYm9vdHN0cmFwLm1vZGFsXCIsXCJ1aS5ib290c3RyYXAucGFnaW5hdGlvblwiLFwidWkuYm9vdHN0cmFwLnRvb2x0aXBcIixcInVpLmJvb3RzdHJhcC5wb3BvdmVyXCIsXCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXJcIixcInVpLmJvb3RzdHJhcC5yYXRpbmdcIixcInVpLmJvb3RzdHJhcC50YWJzXCIsXCJ1aS5ib290c3RyYXAudGltZXBpY2tlclwiLFwidWkuYm9vdHN0cmFwLnR5cGVhaGVhZFwiXSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAudHBsc1wiLFtcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24tZ3JvdXAuaHRtbFwiLFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsXCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9jYXJvdXNlbC5odG1sXCIsXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwiLFwidGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sXCIsXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWxcIixcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIsXCJ0ZW1wbGF0ZS9tb2RhbC9iYWNrZHJvcC5odG1sXCIsXCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwiLFwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIsXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIixcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCIsXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIixcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixcInRlbXBsYXRlL3JhdGluZy9yYXRpbmcuaHRtbFwiLFwidGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLFwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIixcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCJdKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50cmFuc2l0aW9uXCIsW10pLmZhY3RvcnkoXCIkdHJhbnNpdGlvblwiLFtcIiRxXCIsXCIkdGltZW91dFwiLFwiJHJvb3RTY29wZVwiLGZ1bmN0aW9uKGEsYixjKXtmdW5jdGlvbiBkKGEpe2Zvcih2YXIgYiBpbiBhKWlmKHZvaWQgMCE9PWYuc3R5bGVbYl0pcmV0dXJuIGFbYl19dmFyIGU9ZnVuY3Rpb24oZCxmLGcpe2c9Z3x8e307dmFyIGg9YS5kZWZlcigpLGk9ZVtnLmFuaW1hdGlvbj9cImFuaW1hdGlvbkVuZEV2ZW50TmFtZVwiOlwidHJhbnNpdGlvbkVuZEV2ZW50TmFtZVwiXSxqPWZ1bmN0aW9uKCl7Yy4kYXBwbHkoZnVuY3Rpb24oKXtkLnVuYmluZChpLGopLGgucmVzb2x2ZShkKX0pfTtyZXR1cm4gaSYmZC5iaW5kKGksaiksYihmdW5jdGlvbigpe2FuZ3VsYXIuaXNTdHJpbmcoZik/ZC5hZGRDbGFzcyhmKTphbmd1bGFyLmlzRnVuY3Rpb24oZik/ZihkKTphbmd1bGFyLmlzT2JqZWN0KGYpJiZkLmNzcyhmKSxpfHxoLnJlc29sdmUoZCl9KSxoLnByb21pc2UuY2FuY2VsPWZ1bmN0aW9uKCl7aSYmZC51bmJpbmQoaSxqKSxoLnJlamVjdChcIlRyYW5zaXRpb24gY2FuY2VsbGVkXCIpfSxoLnByb21pc2V9LGY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyYW5zXCIpLGc9e1dlYmtpdFRyYW5zaXRpb246XCJ3ZWJraXRUcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kXCIsdHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIn0saD17V2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdEFuaW1hdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJhbmltYXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9BbmltYXRpb25FbmRcIix0cmFuc2l0aW9uOlwiYW5pbWF0aW9uZW5kXCJ9O3JldHVybiBlLnRyYW5zaXRpb25FbmRFdmVudE5hbWU9ZChnKSxlLmFuaW1hdGlvbkVuZEV2ZW50TmFtZT1kKGgpLGV9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuY29sbGFwc2VcIixbXCJ1aS5ib290c3RyYXAudHJhbnNpdGlvblwiXSkuZGlyZWN0aXZlKFwiY29sbGFwc2VcIixbXCIkdHJhbnNpdGlvblwiLGZ1bmN0aW9uKGEpe3JldHVybntsaW5rOmZ1bmN0aW9uKGIsYyxkKXtmdW5jdGlvbiBlKGIpe2Z1bmN0aW9uIGQoKXtqPT09ZSYmKGo9dm9pZCAwKX12YXIgZT1hKGMsYik7cmV0dXJuIGomJmouY2FuY2VsKCksaj1lLGUudGhlbihkLGQpLGV9ZnVuY3Rpb24gZigpe2s/KGs9ITEsZygpKTooYy5yZW1vdmVDbGFzcyhcImNvbGxhcHNlXCIpLmFkZENsYXNzKFwiY29sbGFwc2luZ1wiKSxlKHtoZWlnaHQ6Y1swXS5zY3JvbGxIZWlnaHQrXCJweFwifSkudGhlbihnKSl9ZnVuY3Rpb24gZygpe2MucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzaW5nXCIpLGMuYWRkQ2xhc3MoXCJjb2xsYXBzZSBpblwiKSxjLmNzcyh7aGVpZ2h0OlwiYXV0b1wifSl9ZnVuY3Rpb24gaCgpe2lmKGspaz0hMSxpKCksYy5jc3Moe2hlaWdodDowfSk7ZWxzZXtjLmNzcyh7aGVpZ2h0OmNbMF0uc2Nyb2xsSGVpZ2h0K1wicHhcIn0pO3tjWzBdLm9mZnNldFdpZHRofWMucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZSBpblwiKS5hZGRDbGFzcyhcImNvbGxhcHNpbmdcIiksZSh7aGVpZ2h0OjB9KS50aGVuKGkpfX1mdW5jdGlvbiBpKCl7Yy5yZW1vdmVDbGFzcyhcImNvbGxhcHNpbmdcIiksYy5hZGRDbGFzcyhcImNvbGxhcHNlXCIpfXZhciBqLGs9ITA7Yi4kd2F0Y2goZC5jb2xsYXBzZSxmdW5jdGlvbihhKXthP2goKTpmKCl9KX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmFjY29yZGlvblwiLFtcInVpLmJvb3RzdHJhcC5jb2xsYXBzZVwiXSkuY29uc3RhbnQoXCJhY2NvcmRpb25Db25maWdcIix7Y2xvc2VPdGhlcnM6ITB9KS5jb250cm9sbGVyKFwiQWNjb3JkaW9uQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCJhY2NvcmRpb25Db25maWdcIixmdW5jdGlvbihhLGIsYyl7dGhpcy5ncm91cHM9W10sdGhpcy5jbG9zZU90aGVycz1mdW5jdGlvbihkKXt2YXIgZT1hbmd1bGFyLmlzRGVmaW5lZChiLmNsb3NlT3RoZXJzKT9hLiRldmFsKGIuY2xvc2VPdGhlcnMpOmMuY2xvc2VPdGhlcnM7ZSYmYW5ndWxhci5mb3JFYWNoKHRoaXMuZ3JvdXBzLGZ1bmN0aW9uKGEpe2EhPT1kJiYoYS5pc09wZW49ITEpfSl9LHRoaXMuYWRkR3JvdXA9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpczt0aGlzLmdyb3Vwcy5wdXNoKGEpLGEuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2IucmVtb3ZlR3JvdXAoYSl9KX0sdGhpcy5yZW1vdmVHcm91cD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmdyb3Vwcy5pbmRleE9mKGEpOy0xIT09YiYmdGhpcy5ncm91cHMuc3BsaWNlKGIsMSl9fV0pLmRpcmVjdGl2ZShcImFjY29yZGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixjb250cm9sbGVyOlwiQWNjb3JkaW9uQ29udHJvbGxlclwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2FjY29yZGlvbi9hY2NvcmRpb24uaHRtbFwifX0pLmRpcmVjdGl2ZShcImFjY29yZGlvbkdyb3VwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpcIl5hY2NvcmRpb25cIixyZXN0cmljdDpcIkVBXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi1ncm91cC5odG1sXCIsc2NvcGU6e2hlYWRpbmc6XCJAXCIsaXNPcGVuOlwiPT9cIixpc0Rpc2FibGVkOlwiPT9cIn0sY29udHJvbGxlcjpmdW5jdGlvbigpe3RoaXMuc2V0SGVhZGluZz1mdW5jdGlvbihhKXt0aGlzLmhlYWRpbmc9YX19LGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7ZC5hZGRHcm91cChhKSxhLiR3YXRjaChcImlzT3BlblwiLGZ1bmN0aW9uKGIpe2ImJmQuY2xvc2VPdGhlcnMoYSl9KSxhLnRvZ2dsZU9wZW49ZnVuY3Rpb24oKXthLmlzRGlzYWJsZWR8fChhLmlzT3Blbj0hYS5pc09wZW4pfX19fSkuZGlyZWN0aXZlKFwiYWNjb3JkaW9uSGVhZGluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIix0cmFuc2NsdWRlOiEwLHRlbXBsYXRlOlwiXCIscmVwbGFjZTohMCxyZXF1aXJlOlwiXmFjY29yZGlvbkdyb3VwXCIsbGluazpmdW5jdGlvbihhLGIsYyxkLGUpe2Quc2V0SGVhZGluZyhlKGEsZnVuY3Rpb24oKXt9KSl9fX0pLmRpcmVjdGl2ZShcImFjY29yZGlvblRyYW5zY2x1ZGVcIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOlwiXmFjY29yZGlvbkdyb3VwXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXthLiR3YXRjaChmdW5jdGlvbigpe3JldHVybiBkW2MuYWNjb3JkaW9uVHJhbnNjbHVkZV19LGZ1bmN0aW9uKGEpe2EmJihiLmh0bWwoXCJcIiksYi5hcHBlbmQoYSkpfSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmFsZXJ0XCIsW10pLmNvbnRyb2xsZXIoXCJBbGVydENvbnRyb2xsZXJcIixbXCIkc2NvcGVcIixcIiRhdHRyc1wiLGZ1bmN0aW9uKGEsYil7YS5jbG9zZWFibGU9XCJjbG9zZVwiaW4gYn1dKS5kaXJlY3RpdmUoXCJhbGVydFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixjb250cm9sbGVyOlwiQWxlcnRDb250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHNjb3BlOnt0eXBlOlwiQFwiLGNsb3NlOlwiJlwifX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiLFtdKS5kaXJlY3RpdmUoXCJiaW5kSHRtbFVuc2FmZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYixjKXtiLmFkZENsYXNzKFwibmctYmluZGluZ1wiKS5kYXRhKFwiJGJpbmRpbmdcIixjLmJpbmRIdG1sVW5zYWZlKSxhLiR3YXRjaChjLmJpbmRIdG1sVW5zYWZlLGZ1bmN0aW9uKGEpe2IuaHRtbChhfHxcIlwiKX0pfX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLmJ1dHRvbnNcIixbXSkuY29uc3RhbnQoXCJidXR0b25Db25maWdcIix7YWN0aXZlQ2xhc3M6XCJhY3RpdmVcIix0b2dnbGVFdmVudDpcImNsaWNrXCJ9KS5jb250cm9sbGVyKFwiQnV0dG9uc0NvbnRyb2xsZXJcIixbXCJidXR0b25Db25maWdcIixmdW5jdGlvbihhKXt0aGlzLmFjdGl2ZUNsYXNzPWEuYWN0aXZlQ2xhc3N8fFwiYWN0aXZlXCIsdGhpcy50b2dnbGVFdmVudD1hLnRvZ2dsZUV2ZW50fHxcImNsaWNrXCJ9XSkuZGlyZWN0aXZlKFwiYnRuUmFkaW9cIixmdW5jdGlvbigpe3JldHVybntyZXF1aXJlOltcImJ0blJhZGlvXCIsXCJuZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJCdXR0b25zQ29udHJvbGxlclwiLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07Zi4kcmVuZGVyPWZ1bmN0aW9uKCl7Yi50b2dnbGVDbGFzcyhlLmFjdGl2ZUNsYXNzLGFuZ3VsYXIuZXF1YWxzKGYuJG1vZGVsVmFsdWUsYS4kZXZhbChjLmJ0blJhZGlvKSkpfSxiLmJpbmQoZS50b2dnbGVFdmVudCxmdW5jdGlvbigpe3ZhciBkPWIuaGFzQ2xhc3MoZS5hY3RpdmVDbGFzcyk7KCFkfHxhbmd1bGFyLmlzRGVmaW5lZChjLnVuY2hlY2thYmxlKSkmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7Zi4kc2V0Vmlld1ZhbHVlKGQ/bnVsbDphLiRldmFsKGMuYnRuUmFkaW8pKSxmLiRyZW5kZXIoKX0pfSl9fX0pLmRpcmVjdGl2ZShcImJ0bkNoZWNrYm94XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVxdWlyZTpbXCJidG5DaGVja2JveFwiLFwibmdNb2RlbFwiXSxjb250cm9sbGVyOlwiQnV0dG9uc0NvbnRyb2xsZXJcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gZyhjLmJ0bkNoZWNrYm94VHJ1ZSwhMCl9ZnVuY3Rpb24gZigpe3JldHVybiBnKGMuYnRuQ2hlY2tib3hGYWxzZSwhMSl9ZnVuY3Rpb24gZyhiLGMpe3ZhciBkPWEuJGV2YWwoYik7cmV0dXJuIGFuZ3VsYXIuaXNEZWZpbmVkKGQpP2Q6Y312YXIgaD1kWzBdLGk9ZFsxXTtpLiRyZW5kZXI9ZnVuY3Rpb24oKXtiLnRvZ2dsZUNsYXNzKGguYWN0aXZlQ2xhc3MsYW5ndWxhci5lcXVhbHMoaS4kbW9kZWxWYWx1ZSxlKCkpKX0sYi5iaW5kKGgudG9nZ2xlRXZlbnQsZnVuY3Rpb24oKXthLiRhcHBseShmdW5jdGlvbigpe2kuJHNldFZpZXdWYWx1ZShiLmhhc0NsYXNzKGguYWN0aXZlQ2xhc3MpP2YoKTplKCkpLGkuJHJlbmRlcigpfSl9KX19fSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAuY2Fyb3VzZWxcIixbXCJ1aS5ib290c3RyYXAudHJhbnNpdGlvblwiXSkuY29udHJvbGxlcihcIkNhcm91c2VsQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJHRpbWVvdXRcIixcIiR0cmFuc2l0aW9uXCIsZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtlKCk7dmFyIGM9K2EuaW50ZXJ2YWw7IWlzTmFOKGMpJiZjPj0wJiYoZz1iKGYsYykpfWZ1bmN0aW9uIGUoKXtnJiYoYi5jYW5jZWwoZyksZz1udWxsKX1mdW5jdGlvbiBmKCl7aD8oYS5uZXh0KCksZCgpKTphLnBhdXNlKCl9dmFyIGcsaCxpPXRoaXMsaj1pLnNsaWRlcz1hLnNsaWRlcz1bXSxrPS0xO2kuY3VycmVudFNsaWRlPW51bGw7dmFyIGw9ITE7aS5zZWxlY3Q9YS5zZWxlY3Q9ZnVuY3Rpb24oZSxmKXtmdW5jdGlvbiBnKCl7aWYoIWwpe2lmKGkuY3VycmVudFNsaWRlJiZhbmd1bGFyLmlzU3RyaW5nKGYpJiYhYS5ub1RyYW5zaXRpb24mJmUuJGVsZW1lbnQpe2UuJGVsZW1lbnQuYWRkQ2xhc3MoZik7e2UuJGVsZW1lbnRbMF0ub2Zmc2V0V2lkdGh9YW5ndWxhci5mb3JFYWNoKGosZnVuY3Rpb24oYSl7YW5ndWxhci5leHRlbmQoYSx7ZGlyZWN0aW9uOlwiXCIsZW50ZXJpbmc6ITEsbGVhdmluZzohMSxhY3RpdmU6ITF9KX0pLGFuZ3VsYXIuZXh0ZW5kKGUse2RpcmVjdGlvbjpmLGFjdGl2ZTohMCxlbnRlcmluZzohMH0pLGFuZ3VsYXIuZXh0ZW5kKGkuY3VycmVudFNsaWRlfHx7fSx7ZGlyZWN0aW9uOmYsbGVhdmluZzohMH0pLGEuJGN1cnJlbnRUcmFuc2l0aW9uPWMoZS4kZWxlbWVudCx7fSksZnVuY3Rpb24oYixjKXthLiRjdXJyZW50VHJhbnNpdGlvbi50aGVuKGZ1bmN0aW9uKCl7aChiLGMpfSxmdW5jdGlvbigpe2goYixjKX0pfShlLGkuY3VycmVudFNsaWRlKX1lbHNlIGgoZSxpLmN1cnJlbnRTbGlkZSk7aS5jdXJyZW50U2xpZGU9ZSxrPW0sZCgpfX1mdW5jdGlvbiBoKGIsYyl7YW5ndWxhci5leHRlbmQoYix7ZGlyZWN0aW9uOlwiXCIsYWN0aXZlOiEwLGxlYXZpbmc6ITEsZW50ZXJpbmc6ITF9KSxhbmd1bGFyLmV4dGVuZChjfHx7fSx7ZGlyZWN0aW9uOlwiXCIsYWN0aXZlOiExLGxlYXZpbmc6ITEsZW50ZXJpbmc6ITF9KSxhLiRjdXJyZW50VHJhbnNpdGlvbj1udWxsfXZhciBtPWouaW5kZXhPZihlKTt2b2lkIDA9PT1mJiYoZj1tPms/XCJuZXh0XCI6XCJwcmV2XCIpLGUmJmUhPT1pLmN1cnJlbnRTbGlkZSYmKGEuJGN1cnJlbnRUcmFuc2l0aW9uPyhhLiRjdXJyZW50VHJhbnNpdGlvbi5jYW5jZWwoKSxiKGcpKTpnKCkpfSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtsPSEwfSksaS5pbmRleE9mU2xpZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGouaW5kZXhPZihhKX0sYS5uZXh0PWZ1bmN0aW9uKCl7dmFyIGI9KGsrMSklai5sZW5ndGg7cmV0dXJuIGEuJGN1cnJlbnRUcmFuc2l0aW9uP3ZvaWQgMDppLnNlbGVjdChqW2JdLFwibmV4dFwiKX0sYS5wcmV2PWZ1bmN0aW9uKCl7dmFyIGI9MD5rLTE/ai5sZW5ndGgtMTprLTE7cmV0dXJuIGEuJGN1cnJlbnRUcmFuc2l0aW9uP3ZvaWQgMDppLnNlbGVjdChqW2JdLFwicHJldlwiKX0sYS5pc0FjdGl2ZT1mdW5jdGlvbihhKXtyZXR1cm4gaS5jdXJyZW50U2xpZGU9PT1hfSxhLiR3YXRjaChcImludGVydmFsXCIsZCksYS4kb24oXCIkZGVzdHJveVwiLGUpLGEucGxheT1mdW5jdGlvbigpe2h8fChoPSEwLGQoKSl9LGEucGF1c2U9ZnVuY3Rpb24oKXthLm5vUGF1c2V8fChoPSExLGUoKSl9LGkuYWRkU2xpZGU9ZnVuY3Rpb24oYixjKXtiLiRlbGVtZW50PWMsai5wdXNoKGIpLDE9PT1qLmxlbmd0aHx8Yi5hY3RpdmU/KGkuc2VsZWN0KGpbai5sZW5ndGgtMV0pLDE9PWoubGVuZ3RoJiZhLnBsYXkoKSk6Yi5hY3RpdmU9ITF9LGkucmVtb3ZlU2xpZGU9ZnVuY3Rpb24oYSl7dmFyIGI9ai5pbmRleE9mKGEpO2ouc3BsaWNlKGIsMSksai5sZW5ndGg+MCYmYS5hY3RpdmU/aS5zZWxlY3QoYj49ai5sZW5ndGg/altiLTFdOmpbYl0pOms+YiYmay0tfX1dKS5kaXJlY3RpdmUoXCJjYXJvdXNlbFwiLFtmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLGNvbnRyb2xsZXI6XCJDYXJvdXNlbENvbnRyb2xsZXJcIixyZXF1aXJlOlwiY2Fyb3VzZWxcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIixzY29wZTp7aW50ZXJ2YWw6XCI9XCIsbm9UcmFuc2l0aW9uOlwiPVwiLG5vUGF1c2U6XCI9XCJ9fX1dKS5kaXJlY3RpdmUoXCJzbGlkZVwiLGZ1bmN0aW9uKCl7cmV0dXJue3JlcXVpcmU6XCJeY2Fyb3VzZWxcIixyZXN0cmljdDpcIkVBXCIsdHJhbnNjbHVkZTohMCxyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvY2Fyb3VzZWwvc2xpZGUuaHRtbFwiLHNjb3BlOnthY3RpdmU6XCI9P1wifSxsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkU2xpZGUoYSxiKSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtkLnJlbW92ZVNsaWRlKGEpfSksYS4kd2F0Y2goXCJhY3RpdmVcIixmdW5jdGlvbihiKXtiJiZkLnNlbGVjdChhKX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5kYXRlcGFyc2VyXCIsW10pLnNlcnZpY2UoXCJkYXRlUGFyc2VyXCIsW1wiJGxvY2FsZVwiLFwib3JkZXJCeUZpbHRlclwiLGZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIsYyl7cmV0dXJuIDE9PT1iJiZjPjI4PzI5PT09YyYmKGElND09PTAmJmElMTAwIT09MHx8YSU0MDA9PT0wKTozPT09Ynx8NT09PWJ8fDg9PT1ifHwxMD09PWI/MzE+YzohMH10aGlzLnBhcnNlcnM9e307dmFyIGQ9e3l5eXk6e3JlZ2V4OlwiXFxcXGR7NH1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9fSx5eTp7cmVnZXg6XCJcXFxcZHsyfVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMueWVhcj0rYSsyZTN9fSx5OntyZWdleDpcIlxcXFxkezEsNH1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLnllYXI9K2F9fSxNTU1NOntyZWdleDphLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguam9pbihcInxcIiksYXBwbHk6ZnVuY3Rpb24oYil7dGhpcy5tb250aD1hLkRBVEVUSU1FX0ZPUk1BVFMuTU9OVEguaW5kZXhPZihiKX19LE1NTTp7cmVnZXg6YS5EQVRFVElNRV9GT1JNQVRTLlNIT1JUTU9OVEguam9pbihcInxcIiksYXBwbHk6ZnVuY3Rpb24oYil7dGhpcy5tb250aD1hLkRBVEVUSU1FX0ZPUk1BVFMuU0hPUlRNT05USC5pbmRleE9mKGIpfX0sTU06e3JlZ2V4OlwiMFsxLTldfDFbMC0yXVwiLGFwcGx5OmZ1bmN0aW9uKGEpe3RoaXMubW9udGg9YS0xfX0sTTp7cmVnZXg6XCJbMS05XXwxWzAtMl1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLm1vbnRoPWEtMX19LGRkOntyZWdleDpcIlswLTJdWzAtOV17MX18M1swLTFdezF9XCIsYXBwbHk6ZnVuY3Rpb24oYSl7dGhpcy5kYXRlPSthfX0sZDp7cmVnZXg6XCJbMS0yXT9bMC05XXsxfXwzWzAtMV17MX1cIixhcHBseTpmdW5jdGlvbihhKXt0aGlzLmRhdGU9K2F9fSxFRUVFOntyZWdleDphLkRBVEVUSU1FX0ZPUk1BVFMuREFZLmpvaW4oXCJ8XCIpfSxFRUU6e3JlZ2V4OmEuREFURVRJTUVfRk9STUFUUy5TSE9SVERBWS5qb2luKFwifFwiKX19O3RoaXMuY3JlYXRlUGFyc2VyPWZ1bmN0aW9uKGEpe3ZhciBjPVtdLGU9YS5zcGxpdChcIlwiKTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGQsZnVuY3Rpb24oYixkKXt2YXIgZj1hLmluZGV4T2YoZCk7aWYoZj4tMSl7YT1hLnNwbGl0KFwiXCIpLGVbZl09XCIoXCIrYi5yZWdleCtcIilcIixhW2ZdPVwiJFwiO2Zvcih2YXIgZz1mKzEsaD1mK2QubGVuZ3RoO2g+ZztnKyspZVtnXT1cIlwiLGFbZ109XCIkXCI7YT1hLmpvaW4oXCJcIiksYy5wdXNoKHtpbmRleDpmLGFwcGx5OmIuYXBwbHl9KX19KSx7cmVnZXg6bmV3IFJlZ0V4cChcIl5cIitlLmpvaW4oXCJcIikrXCIkXCIpLG1hcDpiKGMsXCJpbmRleFwiKX19LHRoaXMucGFyc2U9ZnVuY3Rpb24oYixkKXtpZighYW5ndWxhci5pc1N0cmluZyhiKSlyZXR1cm4gYjtkPWEuREFURVRJTUVfRk9STUFUU1tkXXx8ZCx0aGlzLnBhcnNlcnNbZF18fCh0aGlzLnBhcnNlcnNbZF09dGhpcy5jcmVhdGVQYXJzZXIoZCkpO3ZhciBlPXRoaXMucGFyc2Vyc1tkXSxmPWUucmVnZXgsZz1lLm1hcCxoPWIubWF0Y2goZik7aWYoaCYmaC5sZW5ndGgpe2Zvcih2YXIgaSxqPXt5ZWFyOjE5MDAsbW9udGg6MCxkYXRlOjEsaG91cnM6MH0saz0xLGw9aC5sZW5ndGg7bD5rO2srKyl7dmFyIG09Z1trLTFdO20uYXBwbHkmJm0uYXBwbHkuY2FsbChqLGhba10pfXJldHVybiBjKGoueWVhcixqLm1vbnRoLGouZGF0ZSkmJihpPW5ldyBEYXRlKGoueWVhcixqLm1vbnRoLGouZGF0ZSxqLmhvdXJzKSksaX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnBvc2l0aW9uXCIsW10pLmZhY3RvcnkoXCIkcG9zaXRpb25cIixbXCIkZG9jdW1lbnRcIixcIiR3aW5kb3dcIixmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxjKXtyZXR1cm4gYS5jdXJyZW50U3R5bGU/YS5jdXJyZW50U3R5bGVbY106Yi5nZXRDb21wdXRlZFN0eWxlP2IuZ2V0Q29tcHV0ZWRTdHlsZShhKVtjXTphLnN0eWxlW2NdfWZ1bmN0aW9uIGQoYSl7cmV0dXJuXCJzdGF0aWNcIj09PShjKGEsXCJwb3NpdGlvblwiKXx8XCJzdGF0aWNcIil9dmFyIGU9ZnVuY3Rpb24oYil7Zm9yKHZhciBjPWFbMF0sZT1iLm9mZnNldFBhcmVudHx8YztlJiZlIT09YyYmZChlKTspZT1lLm9mZnNldFBhcmVudDtyZXR1cm4gZXx8Y307cmV0dXJue3Bvc2l0aW9uOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMub2Zmc2V0KGIpLGQ9e3RvcDowLGxlZnQ6MH0sZj1lKGJbMF0pO2YhPWFbMF0mJihkPXRoaXMub2Zmc2V0KGFuZ3VsYXIuZWxlbWVudChmKSksZC50b3ArPWYuY2xpZW50VG9wLWYuc2Nyb2xsVG9wLGQubGVmdCs9Zi5jbGllbnRMZWZ0LWYuc2Nyb2xsTGVmdCk7dmFyIGc9YlswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm57d2lkdGg6Zy53aWR0aHx8Yi5wcm9wKFwib2Zmc2V0V2lkdGhcIiksaGVpZ2h0OmcuaGVpZ2h0fHxiLnByb3AoXCJvZmZzZXRIZWlnaHRcIiksdG9wOmMudG9wLWQudG9wLGxlZnQ6Yy5sZWZ0LWQubGVmdH19LG9mZnNldDpmdW5jdGlvbihjKXt2YXIgZD1jWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybnt3aWR0aDpkLndpZHRofHxjLnByb3AoXCJvZmZzZXRXaWR0aFwiKSxoZWlnaHQ6ZC5oZWlnaHR8fGMucHJvcChcIm9mZnNldEhlaWdodFwiKSx0b3A6ZC50b3ArKGIucGFnZVlPZmZzZXR8fGFbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCksbGVmdDpkLmxlZnQrKGIucGFnZVhPZmZzZXR8fGFbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbExlZnQpfX0scG9zaXRpb25FbGVtZW50czpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaCxpPWMuc3BsaXQoXCItXCIpLGo9aVswXSxrPWlbMV18fFwiY2VudGVyXCI7ZT1kP3RoaXMub2Zmc2V0KGEpOnRoaXMucG9zaXRpb24oYSksZj1iLnByb3AoXCJvZmZzZXRXaWR0aFwiKSxnPWIucHJvcChcIm9mZnNldEhlaWdodFwiKTt2YXIgbD17Y2VudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGUubGVmdCtlLndpZHRoLzItZi8yfSxsZWZ0OmZ1bmN0aW9uKCl7cmV0dXJuIGUubGVmdH0scmlnaHQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5sZWZ0K2Uud2lkdGh9fSxtPXtjZW50ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZS50b3ArZS5oZWlnaHQvMi1nLzJ9LHRvcDpmdW5jdGlvbigpe3JldHVybiBlLnRvcH0sYm90dG9tOmZ1bmN0aW9uKCl7cmV0dXJuIGUudG9wK2UuaGVpZ2h0fX07c3dpdGNoKGope2Nhc2VcInJpZ2h0XCI6aD17dG9wOm1ba10oKSxsZWZ0Omxbal0oKX07YnJlYWs7Y2FzZVwibGVmdFwiOmg9e3RvcDptW2tdKCksbGVmdDplLmxlZnQtZn07YnJlYWs7Y2FzZVwiYm90dG9tXCI6aD17dG9wOm1bal0oKSxsZWZ0Omxba10oKX07YnJlYWs7ZGVmYXVsdDpoPXt0b3A6ZS50b3AtZyxsZWZ0Omxba10oKX19cmV0dXJuIGh9fX1dKSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5kYXRlcGlja2VyXCIsW1widWkuYm9vdHN0cmFwLmRhdGVwYXJzZXJcIixcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiXSkuY29uc3RhbnQoXCJkYXRlcGlja2VyQ29uZmlnXCIse2Zvcm1hdERheTpcImRkXCIsZm9ybWF0TW9udGg6XCJNTU1NXCIsZm9ybWF0WWVhcjpcInl5eXlcIixmb3JtYXREYXlIZWFkZXI6XCJFRUVcIixmb3JtYXREYXlUaXRsZTpcIk1NTU0geXl5eVwiLGZvcm1hdE1vbnRoVGl0bGU6XCJ5eXl5XCIsZGF0ZXBpY2tlck1vZGU6XCJkYXlcIixtaW5Nb2RlOlwiZGF5XCIsbWF4TW9kZTpcInllYXJcIixzaG93V2Vla3M6ITAsc3RhcnRpbmdEYXk6MCx5ZWFyUmFuZ2U6MjAsbWluRGF0ZTpudWxsLG1heERhdGU6bnVsbH0pLmNvbnRyb2xsZXIoXCJEYXRlcGlja2VyQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkcGFyc2VcIixcIiRpbnRlcnBvbGF0ZVwiLFwiJHRpbWVvdXRcIixcIiRsb2dcIixcImRhdGVGaWx0ZXJcIixcImRhdGVwaWNrZXJDb25maWdcIixmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgpe3ZhciBpPXRoaXMsaj17JHNldFZpZXdWYWx1ZTphbmd1bGFyLm5vb3B9O3RoaXMubW9kZXM9W1wiZGF5XCIsXCJtb250aFwiLFwieWVhclwiXSxhbmd1bGFyLmZvckVhY2goW1wiZm9ybWF0RGF5XCIsXCJmb3JtYXRNb250aFwiLFwiZm9ybWF0WWVhclwiLFwiZm9ybWF0RGF5SGVhZGVyXCIsXCJmb3JtYXREYXlUaXRsZVwiLFwiZm9ybWF0TW9udGhUaXRsZVwiLFwibWluTW9kZVwiLFwibWF4TW9kZVwiLFwic2hvd1dlZWtzXCIsXCJzdGFydGluZ0RheVwiLFwieWVhclJhbmdlXCJdLGZ1bmN0aW9uKGMsZSl7aVtjXT1hbmd1bGFyLmlzRGVmaW5lZChiW2NdKT84PmU/ZChiW2NdKShhLiRwYXJlbnQpOmEuJHBhcmVudC4kZXZhbChiW2NdKTpoW2NdfSksYW5ndWxhci5mb3JFYWNoKFtcIm1pbkRhdGVcIixcIm1heERhdGVcIl0sZnVuY3Rpb24oZCl7YltkXT9hLiRwYXJlbnQuJHdhdGNoKGMoYltkXSksZnVuY3Rpb24oYSl7aVtkXT1hP25ldyBEYXRlKGEpOm51bGwsaS5yZWZyZXNoVmlldygpfSk6aVtkXT1oW2RdP25ldyBEYXRlKGhbZF0pOm51bGx9KSxhLmRhdGVwaWNrZXJNb2RlPWEuZGF0ZXBpY2tlck1vZGV8fGguZGF0ZXBpY2tlck1vZGUsYS51bmlxdWVJZD1cImRhdGVwaWNrZXItXCIrYS4kaWQrXCItXCIrTWF0aC5mbG9vcigxZTQqTWF0aC5yYW5kb20oKSksdGhpcy5hY3RpdmVEYXRlPWFuZ3VsYXIuaXNEZWZpbmVkKGIuaW5pdERhdGUpP2EuJHBhcmVudC4kZXZhbChiLmluaXREYXRlKTpuZXcgRGF0ZSxhLmlzQWN0aXZlPWZ1bmN0aW9uKGIpe3JldHVybiAwPT09aS5jb21wYXJlKGIuZGF0ZSxpLmFjdGl2ZURhdGUpPyhhLmFjdGl2ZURhdGVJZD1iLnVpZCwhMCk6ITF9LHRoaXMuaW5pdD1mdW5jdGlvbihhKXtqPWEsai4kcmVuZGVyPWZ1bmN0aW9uKCl7aS5yZW5kZXIoKX19LHRoaXMucmVuZGVyPWZ1bmN0aW9uKCl7aWYoai4kbW9kZWxWYWx1ZSl7dmFyIGE9bmV3IERhdGUoai4kbW9kZWxWYWx1ZSksYj0haXNOYU4oYSk7Yj90aGlzLmFjdGl2ZURhdGU9YTpmLmVycm9yKCdEYXRlcGlja2VyIGRpcmVjdGl2ZTogXCJuZy1tb2RlbFwiIHZhbHVlIG11c3QgYmUgYSBEYXRlIG9iamVjdCwgYSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDAxLjAxLjE5NzAgb3IgYSBzdHJpbmcgcmVwcmVzZW50aW5nIGFuIFJGQzI4MjIgb3IgSVNPIDg2MDEgZGF0ZS4nKSxqLiRzZXRWYWxpZGl0eShcImRhdGVcIixiKX10aGlzLnJlZnJlc2hWaWV3KCl9LHRoaXMucmVmcmVzaFZpZXc9ZnVuY3Rpb24oKXtpZih0aGlzLmVsZW1lbnQpe3RoaXMuX3JlZnJlc2hWaWV3KCk7dmFyIGE9ai4kbW9kZWxWYWx1ZT9uZXcgRGF0ZShqLiRtb2RlbFZhbHVlKTpudWxsO2ouJHNldFZhbGlkaXR5KFwiZGF0ZS1kaXNhYmxlZFwiLCFhfHx0aGlzLmVsZW1lbnQmJiF0aGlzLmlzRGlzYWJsZWQoYSkpfX0sdGhpcy5jcmVhdGVEYXRlT2JqZWN0PWZ1bmN0aW9uKGEsYil7dmFyIGM9ai4kbW9kZWxWYWx1ZT9uZXcgRGF0ZShqLiRtb2RlbFZhbHVlKTpudWxsO3JldHVybntkYXRlOmEsbGFiZWw6ZyhhLGIpLHNlbGVjdGVkOmMmJjA9PT10aGlzLmNvbXBhcmUoYSxjKSxkaXNhYmxlZDp0aGlzLmlzRGlzYWJsZWQoYSksY3VycmVudDowPT09dGhpcy5jb21wYXJlKGEsbmV3IERhdGUpfX0sdGhpcy5pc0Rpc2FibGVkPWZ1bmN0aW9uKGMpe3JldHVybiB0aGlzLm1pbkRhdGUmJnRoaXMuY29tcGFyZShjLHRoaXMubWluRGF0ZSk8MHx8dGhpcy5tYXhEYXRlJiZ0aGlzLmNvbXBhcmUoYyx0aGlzLm1heERhdGUpPjB8fGIuZGF0ZURpc2FibGVkJiZhLmRhdGVEaXNhYmxlZCh7ZGF0ZTpjLG1vZGU6YS5kYXRlcGlja2VyTW9kZX0pfSx0aGlzLnNwbGl0PWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2EubGVuZ3RoPjA7KWMucHVzaChhLnNwbGljZSgwLGIpKTtyZXR1cm4gY30sYS5zZWxlY3Q9ZnVuY3Rpb24oYil7aWYoYS5kYXRlcGlja2VyTW9kZT09PWkubWluTW9kZSl7dmFyIGM9ai4kbW9kZWxWYWx1ZT9uZXcgRGF0ZShqLiRtb2RlbFZhbHVlKTpuZXcgRGF0ZSgwLDAsMCwwLDAsMCwwKTtjLnNldEZ1bGxZZWFyKGIuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCkpLGouJHNldFZpZXdWYWx1ZShjKSxqLiRyZW5kZXIoKX1lbHNlIGkuYWN0aXZlRGF0ZT1iLGEuZGF0ZXBpY2tlck1vZGU9aS5tb2Rlc1tpLm1vZGVzLmluZGV4T2YoYS5kYXRlcGlja2VyTW9kZSktMV19LGEubW92ZT1mdW5jdGlvbihhKXt2YXIgYj1pLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSthKihpLnN0ZXAueWVhcnN8fDApLGM9aS5hY3RpdmVEYXRlLmdldE1vbnRoKCkrYSooaS5zdGVwLm1vbnRoc3x8MCk7aS5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGIsYywxKSxpLnJlZnJlc2hWaWV3KCl9LGEudG9nZ2xlTW9kZT1mdW5jdGlvbihiKXtiPWJ8fDEsYS5kYXRlcGlja2VyTW9kZT09PWkubWF4TW9kZSYmMT09PWJ8fGEuZGF0ZXBpY2tlck1vZGU9PT1pLm1pbk1vZGUmJi0xPT09Ynx8KGEuZGF0ZXBpY2tlck1vZGU9aS5tb2Rlc1tpLm1vZGVzLmluZGV4T2YoYS5kYXRlcGlja2VyTW9kZSkrYl0pfSxhLmtleXM9ezEzOlwiZW50ZXJcIiwzMjpcInNwYWNlXCIsMzM6XCJwYWdldXBcIiwzNDpcInBhZ2Vkb3duXCIsMzU6XCJlbmRcIiwzNjpcImhvbWVcIiwzNzpcImxlZnRcIiwzODpcInVwXCIsMzk6XCJyaWdodFwiLDQwOlwiZG93blwifTt2YXIgaz1mdW5jdGlvbigpe2UoZnVuY3Rpb24oKXtpLmVsZW1lbnRbMF0uZm9jdXMoKX0sMCwhMSl9O2EuJG9uKFwiZGF0ZXBpY2tlci5mb2N1c1wiLGspLGEua2V5ZG93bj1mdW5jdGlvbihiKXt2YXIgYz1hLmtleXNbYi53aGljaF07aWYoYyYmIWIuc2hpZnRLZXkmJiFiLmFsdEtleSlpZihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxcImVudGVyXCI9PT1jfHxcInNwYWNlXCI9PT1jKXtpZihpLmlzRGlzYWJsZWQoaS5hY3RpdmVEYXRlKSlyZXR1cm47YS5zZWxlY3QoaS5hY3RpdmVEYXRlKSxrKCl9ZWxzZSFiLmN0cmxLZXl8fFwidXBcIiE9PWMmJlwiZG93blwiIT09Yz8oaS5oYW5kbGVLZXlEb3duKGMsYiksaS5yZWZyZXNoVmlldygpKTooYS50b2dnbGVNb2RlKFwidXBcIj09PWM/MTotMSksaygpKX19XSkuZGlyZWN0aXZlKFwiZGF0ZXBpY2tlclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXRlcGlja2VyLmh0bWxcIixzY29wZTp7ZGF0ZXBpY2tlck1vZGU6XCI9P1wiLGRhdGVEaXNhYmxlZDpcIiZcIn0scmVxdWlyZTpbXCJkYXRlcGlja2VyXCIsXCI/Xm5nTW9kZWxcIl0sY29udHJvbGxlcjpcIkRhdGVwaWNrZXJDb250cm9sbGVyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmJiZlLmluaXQoZil9fX0pLmRpcmVjdGl2ZShcImRheXBpY2tlclwiLFtcImRhdGVGaWx0ZXJcIixmdW5jdGlvbihhKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIscmVxdWlyZTpcIl5kYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXtmdW5jdGlvbiBmKGEsYil7cmV0dXJuIDEhPT1ifHxhJTQhPT0wfHxhJTEwMD09PTAmJmElNDAwIT09MD9pW2JdOjI5fWZ1bmN0aW9uIGcoYSxiKXt2YXIgYz1uZXcgQXJyYXkoYiksZD1uZXcgRGF0ZShhKSxlPTA7Zm9yKGQuc2V0SG91cnMoMTIpO2I+ZTspY1tlKytdPW5ldyBEYXRlKGQpLGQuc2V0RGF0ZShkLmdldERhdGUoKSsxKTtyZXR1cm4gY31mdW5jdGlvbiBoKGEpe3ZhciBiPW5ldyBEYXRlKGEpO2Iuc2V0RGF0ZShiLmdldERhdGUoKSs0LShiLmdldERheSgpfHw3KSk7dmFyIGM9Yi5nZXRUaW1lKCk7cmV0dXJuIGIuc2V0TW9udGgoMCksYi5zZXREYXRlKDEpLE1hdGguZmxvb3IoTWF0aC5yb3VuZCgoYy1iKS84NjRlNSkvNykrMX1iLnNob3dXZWVrcz1lLnNob3dXZWVrcyxlLnN0ZXA9e21vbnRoczoxfSxlLmVsZW1lbnQ9Yzt2YXIgaT1bMzEsMjgsMzEsMzAsMzEsMzAsMzEsMzEsMzAsMzEsMzAsMzFdO2UuX3JlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7dmFyIGM9ZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksZD1lLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSxmPW5ldyBEYXRlKGMsZCwxKSxpPWUuc3RhcnRpbmdEYXktZi5nZXREYXkoKSxqPWk+MD83LWk6LWksaz1uZXcgRGF0ZShmKTtqPjAmJmsuc2V0RGF0ZSgtaisxKTtmb3IodmFyIGw9ZyhrLDQyKSxtPTA7NDI+bTttKyspbFttXT1hbmd1bGFyLmV4dGVuZChlLmNyZWF0ZURhdGVPYmplY3QobFttXSxlLmZvcm1hdERheSkse3NlY29uZGFyeTpsW21dLmdldE1vbnRoKCkhPT1kLHVpZDpiLnVuaXF1ZUlkK1wiLVwiK219KTtiLmxhYmVscz1uZXcgQXJyYXkoNyk7Zm9yKHZhciBuPTA7Nz5uO24rKyliLmxhYmVsc1tuXT17YWJicjphKGxbbl0uZGF0ZSxlLmZvcm1hdERheUhlYWRlciksZnVsbDphKGxbbl0uZGF0ZSxcIkVFRUVcIil9O2lmKGIudGl0bGU9YShlLmFjdGl2ZURhdGUsZS5mb3JtYXREYXlUaXRsZSksYi5yb3dzPWUuc3BsaXQobCw3KSxiLnNob3dXZWVrcyl7Yi53ZWVrTnVtYmVycz1bXTtmb3IodmFyIG89aChiLnJvd3NbMF1bMF0uZGF0ZSkscD1iLnJvd3MubGVuZ3RoO2Iud2Vla051bWJlcnMucHVzaChvKyspPHA7KTt9fSxlLmNvbXBhcmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IERhdGUoYS5nZXRGdWxsWWVhcigpLGEuZ2V0TW9udGgoKSxhLmdldERhdGUoKSktbmV3IERhdGUoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSl9LGUuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhKXt2YXIgYj1lLmFjdGl2ZURhdGUuZ2V0RGF0ZSgpO2lmKFwibGVmdFwiPT09YSliLT0xO2Vsc2UgaWYoXCJ1cFwiPT09YSliLT03O2Vsc2UgaWYoXCJyaWdodFwiPT09YSliKz0xO2Vsc2UgaWYoXCJkb3duXCI9PT1hKWIrPTc7ZWxzZSBpZihcInBhZ2V1cFwiPT09YXx8XCJwYWdlZG93blwiPT09YSl7dmFyIGM9ZS5hY3RpdmVEYXRlLmdldE1vbnRoKCkrKFwicGFnZXVwXCI9PT1hPy0xOjEpO2UuYWN0aXZlRGF0ZS5zZXRNb250aChjLDEpLGI9TWF0aC5taW4oZihlLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxlLmFjdGl2ZURhdGUuZ2V0TW9udGgoKSksYil9ZWxzZVwiaG9tZVwiPT09YT9iPTE6XCJlbmRcIj09PWEmJihiPWYoZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCksZS5hY3RpdmVEYXRlLmdldE1vbnRoKCkpKTtlLmFjdGl2ZURhdGUuc2V0RGF0ZShiKX0sZS5yZWZyZXNoVmlldygpfX19XSkuZGlyZWN0aXZlKFwibW9udGhwaWNrZXJcIixbXCJkYXRlRmlsdGVyXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvZGF0ZXBpY2tlci9tb250aC5odG1sXCIscmVxdWlyZTpcIl5kYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihiLGMsZCxlKXtlLnN0ZXA9e3llYXJzOjF9LGUuZWxlbWVudD1jLGUuX3JlZnJlc2hWaWV3PWZ1bmN0aW9uKCl7Zm9yKHZhciBjPW5ldyBBcnJheSgxMiksZD1lLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSxmPTA7MTI+ZjtmKyspY1tmXT1hbmd1bGFyLmV4dGVuZChlLmNyZWF0ZURhdGVPYmplY3QobmV3IERhdGUoZCxmLDEpLGUuZm9ybWF0TW9udGgpLHt1aWQ6Yi51bmlxdWVJZCtcIi1cIitmfSk7Yi50aXRsZT1hKGUuYWN0aXZlRGF0ZSxlLmZvcm1hdE1vbnRoVGl0bGUpLGIucm93cz1lLnNwbGl0KGMsMyl9LGUuY29tcGFyZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgRGF0ZShhLmdldEZ1bGxZZWFyKCksYS5nZXRNb250aCgpKS1uZXcgRGF0ZShiLmdldEZ1bGxZZWFyKCksYi5nZXRNb250aCgpKX0sZS5oYW5kbGVLZXlEb3duPWZ1bmN0aW9uKGEpe3ZhciBiPWUuYWN0aXZlRGF0ZS5nZXRNb250aCgpO2lmKFwibGVmdFwiPT09YSliLT0xO2Vsc2UgaWYoXCJ1cFwiPT09YSliLT0zO2Vsc2UgaWYoXCJyaWdodFwiPT09YSliKz0xO2Vsc2UgaWYoXCJkb3duXCI9PT1hKWIrPTM7ZWxzZSBpZihcInBhZ2V1cFwiPT09YXx8XCJwYWdlZG93blwiPT09YSl7dmFyIGM9ZS5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkrKFwicGFnZXVwXCI9PT1hPy0xOjEpO2UuYWN0aXZlRGF0ZS5zZXRGdWxsWWVhcihjKX1lbHNlXCJob21lXCI9PT1hP2I9MDpcImVuZFwiPT09YSYmKGI9MTEpO2UuYWN0aXZlRGF0ZS5zZXRNb250aChiKX0sZS5yZWZyZXNoVmlldygpfX19XSkuZGlyZWN0aXZlKFwieWVhcnBpY2tlclwiLFtcImRhdGVGaWx0ZXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIscmVxdWlyZTpcIl5kYXRlcGlja2VyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtmdW5jdGlvbiBlKGEpe3JldHVybiBwYXJzZUludCgoYS0xKS9mLDEwKSpmKzF9dmFyIGY9ZC55ZWFyUmFuZ2U7ZC5zdGVwPXt5ZWFyczpmfSxkLmVsZW1lbnQ9YixkLl9yZWZyZXNoVmlldz1mdW5jdGlvbigpe2Zvcih2YXIgYj1uZXcgQXJyYXkoZiksYz0wLGc9ZShkLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSk7Zj5jO2MrKyliW2NdPWFuZ3VsYXIuZXh0ZW5kKGQuY3JlYXRlRGF0ZU9iamVjdChuZXcgRGF0ZShnK2MsMCwxKSxkLmZvcm1hdFllYXIpLHt1aWQ6YS51bmlxdWVJZCtcIi1cIitjfSk7YS50aXRsZT1bYlswXS5sYWJlbCxiW2YtMV0ubGFiZWxdLmpvaW4oXCIgLSBcIiksYS5yb3dzPWQuc3BsaXQoYiw1KX0sZC5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZ2V0RnVsbFllYXIoKS1iLmdldEZ1bGxZZWFyKCl9LGQuaGFuZGxlS2V5RG93bj1mdW5jdGlvbihhKXt2YXIgYj1kLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKTtcImxlZnRcIj09PWE/Yi09MTpcInVwXCI9PT1hP2ItPTU6XCJyaWdodFwiPT09YT9iKz0xOlwiZG93blwiPT09YT9iKz01OlwicGFnZXVwXCI9PT1hfHxcInBhZ2Vkb3duXCI9PT1hP2IrPShcInBhZ2V1cFwiPT09YT8tMToxKSpkLnN0ZXAueWVhcnM6XCJob21lXCI9PT1hP2I9ZShkLmFjdGl2ZURhdGUuZ2V0RnVsbFllYXIoKSk6XCJlbmRcIj09PWEmJihiPWUoZC5hY3RpdmVEYXRlLmdldEZ1bGxZZWFyKCkpK2YtMSksZC5hY3RpdmVEYXRlLnNldEZ1bGxZZWFyKGIpfSxkLnJlZnJlc2hWaWV3KCl9fX1dKS5jb25zdGFudChcImRhdGVwaWNrZXJQb3B1cENvbmZpZ1wiLHtkYXRlcGlja2VyUG9wdXA6XCJ5eXl5LU1NLWRkXCIsY3VycmVudFRleHQ6XCJUb2RheVwiLGNsZWFyVGV4dDpcIkNsZWFyXCIsY2xvc2VUZXh0OlwiRG9uZVwiLGNsb3NlT25EYXRlU2VsZWN0aW9uOiEwLGFwcGVuZFRvQm9keTohMSxzaG93QnV0dG9uQmFyOiEwfSkuZGlyZWN0aXZlKFwiZGF0ZXBpY2tlclBvcHVwXCIsW1wiJGNvbXBpbGVcIixcIiRwYXJzZVwiLFwiJGRvY3VtZW50XCIsXCIkcG9zaXRpb25cIixcImRhdGVGaWx0ZXJcIixcImRhdGVQYXJzZXJcIixcImRhdGVwaWNrZXJQb3B1cENvbmZpZ1wiLGZ1bmN0aW9uKGEsYixjLGQsZSxmLGcpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpcIm5nTW9kZWxcIixzY29wZTp7aXNPcGVuOlwiPT9cIixjdXJyZW50VGV4dDpcIkBcIixjbGVhclRleHQ6XCJAXCIsY2xvc2VUZXh0OlwiQFwiLGRhdGVEaXNhYmxlZDpcIiZcIn0sbGluazpmdW5jdGlvbihoLGksaixrKXtmdW5jdGlvbiBsKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbQS1aXSkvZyxmdW5jdGlvbihhKXtyZXR1cm5cIi1cIithLnRvTG93ZXJDYXNlKCl9KX1mdW5jdGlvbiBtKGEpe2lmKGEpe2lmKGFuZ3VsYXIuaXNEYXRlKGEpJiYhaXNOYU4oYSkpcmV0dXJuIGsuJHNldFZhbGlkaXR5KFwiZGF0ZVwiLCEwKSxhO2lmKGFuZ3VsYXIuaXNTdHJpbmcoYSkpe3ZhciBiPWYucGFyc2UoYSxuKXx8bmV3IERhdGUoYSk7cmV0dXJuIGlzTmFOKGIpP3ZvaWQgay4kc2V0VmFsaWRpdHkoXCJkYXRlXCIsITEpOihrLiRzZXRWYWxpZGl0eShcImRhdGVcIiwhMCksYil9cmV0dXJuIHZvaWQgay4kc2V0VmFsaWRpdHkoXCJkYXRlXCIsITEpfXJldHVybiBrLiRzZXRWYWxpZGl0eShcImRhdGVcIiwhMCksbnVsbH12YXIgbixvPWFuZ3VsYXIuaXNEZWZpbmVkKGouY2xvc2VPbkRhdGVTZWxlY3Rpb24pP2guJHBhcmVudC4kZXZhbChqLmNsb3NlT25EYXRlU2VsZWN0aW9uKTpnLmNsb3NlT25EYXRlU2VsZWN0aW9uLHA9YW5ndWxhci5pc0RlZmluZWQoai5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KT9oLiRwYXJlbnQuJGV2YWwoai5kYXRlcGlja2VyQXBwZW5kVG9Cb2R5KTpnLmFwcGVuZFRvQm9keTtoLnNob3dCdXR0b25CYXI9YW5ndWxhci5pc0RlZmluZWQoai5zaG93QnV0dG9uQmFyKT9oLiRwYXJlbnQuJGV2YWwoai5zaG93QnV0dG9uQmFyKTpnLnNob3dCdXR0b25CYXIsaC5nZXRUZXh0PWZ1bmN0aW9uKGEpe3JldHVybiBoW2ErXCJUZXh0XCJdfHxnW2ErXCJUZXh0XCJdfSxqLiRvYnNlcnZlKFwiZGF0ZXBpY2tlclBvcHVwXCIsZnVuY3Rpb24oYSl7bj1hfHxnLmRhdGVwaWNrZXJQb3B1cCxrLiRyZW5kZXIoKX0pO3ZhciBxPWFuZ3VsYXIuZWxlbWVudChcIjxkaXYgZGF0ZXBpY2tlci1wb3B1cC13cmFwPjxkaXYgZGF0ZXBpY2tlcj48L2Rpdj48L2Rpdj5cIik7cS5hdHRyKHtcIm5nLW1vZGVsXCI6XCJkYXRlXCIsXCJuZy1jaGFuZ2VcIjpcImRhdGVTZWxlY3Rpb24oKVwifSk7dmFyIHI9YW5ndWxhci5lbGVtZW50KHEuY2hpbGRyZW4oKVswXSk7ai5kYXRlcGlja2VyT3B0aW9ucyYmYW5ndWxhci5mb3JFYWNoKGguJHBhcmVudC4kZXZhbChqLmRhdGVwaWNrZXJPcHRpb25zKSxmdW5jdGlvbihhLGIpe3IuYXR0cihsKGIpLGEpfSksYW5ndWxhci5mb3JFYWNoKFtcIm1pbkRhdGVcIixcIm1heERhdGVcIl0sZnVuY3Rpb24oYSl7althXSYmKGguJHBhcmVudC4kd2F0Y2goYihqW2FdKSxmdW5jdGlvbihiKXtoW2FdPWJ9KSxyLmF0dHIobChhKSxhKSl9KSxqLmRhdGVEaXNhYmxlZCYmci5hdHRyKFwiZGF0ZS1kaXNhYmxlZFwiLFwiZGF0ZURpc2FibGVkKHsgZGF0ZTogZGF0ZSwgbW9kZTogbW9kZSB9KVwiKSxrLiRwYXJzZXJzLnVuc2hpZnQobSksaC5kYXRlU2VsZWN0aW9uPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuaXNEZWZpbmVkKGEpJiYoaC5kYXRlPWEpLGsuJHNldFZpZXdWYWx1ZShoLmRhdGUpLGsuJHJlbmRlcigpLG8mJihoLmlzT3Blbj0hMSxpWzBdLmZvY3VzKCkpfSxpLmJpbmQoXCJpbnB1dCBjaGFuZ2Uga2V5dXBcIixmdW5jdGlvbigpe2guJGFwcGx5KGZ1bmN0aW9uKCl7aC5kYXRlPWsuJG1vZGVsVmFsdWV9KX0pLGsuJHJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPWsuJHZpZXdWYWx1ZT9lKGsuJHZpZXdWYWx1ZSxuKTpcIlwiO2kudmFsKGEpLGguZGF0ZT1tKGsuJG1vZGVsVmFsdWUpfTt2YXIgcz1mdW5jdGlvbihhKXtoLmlzT3BlbiYmYS50YXJnZXQhPT1pWzBdJiZoLiRhcHBseShmdW5jdGlvbigpe2guaXNPcGVuPSExfSl9LHQ9ZnVuY3Rpb24oYSl7aC5rZXlkb3duKGEpfTtpLmJpbmQoXCJrZXlkb3duXCIsdCksaC5rZXlkb3duPWZ1bmN0aW9uKGEpezI3PT09YS53aGljaD8oYS5wcmV2ZW50RGVmYXVsdCgpLGEuc3RvcFByb3BhZ2F0aW9uKCksaC5jbG9zZSgpKTo0MCE9PWEud2hpY2h8fGguaXNPcGVufHwoaC5pc09wZW49ITApfSxoLiR3YXRjaChcImlzT3BlblwiLGZ1bmN0aW9uKGEpe2E/KGguJGJyb2FkY2FzdChcImRhdGVwaWNrZXIuZm9jdXNcIiksaC5wb3NpdGlvbj1wP2Qub2Zmc2V0KGkpOmQucG9zaXRpb24oaSksaC5wb3NpdGlvbi50b3A9aC5wb3NpdGlvbi50b3AraS5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpLGMuYmluZChcImNsaWNrXCIscykpOmMudW5iaW5kKFwiY2xpY2tcIixzKX0pLGguc2VsZWN0PWZ1bmN0aW9uKGEpe2lmKFwidG9kYXlcIj09PWEpe3ZhciBiPW5ldyBEYXRlO2FuZ3VsYXIuaXNEYXRlKGsuJG1vZGVsVmFsdWUpPyhhPW5ldyBEYXRlKGsuJG1vZGVsVmFsdWUpLGEuc2V0RnVsbFllYXIoYi5nZXRGdWxsWWVhcigpLGIuZ2V0TW9udGgoKSxiLmdldERhdGUoKSkpOmE9bmV3IERhdGUoYi5zZXRIb3VycygwLDAsMCwwKSl9aC5kYXRlU2VsZWN0aW9uKGEpfSxoLmNsb3NlPWZ1bmN0aW9uKCl7aC5pc09wZW49ITEsaVswXS5mb2N1cygpfTt2YXIgdT1hKHEpKGgpO3A/Yy5maW5kKFwiYm9keVwiKS5hcHBlbmQodSk6aS5hZnRlcih1KSxoLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXt1LnJlbW92ZSgpLGkudW5iaW5kKFwia2V5ZG93blwiLHQpLGMudW5iaW5kKFwiY2xpY2tcIixzKX0pfX19XSkuZGlyZWN0aXZlKFwiZGF0ZXBpY2tlclBvcHVwV3JhcFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWxcIixsaW5rOmZ1bmN0aW9uKGEsYil7Yi5iaW5kKFwiY2xpY2tcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksYS5zdG9wUHJvcGFnYXRpb24oKX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5kcm9wZG93blwiLFtdKS5jb25zdGFudChcImRyb3Bkb3duQ29uZmlnXCIse29wZW5DbGFzczpcIm9wZW5cIn0pLnNlcnZpY2UoXCJkcm9wZG93blNlcnZpY2VcIixbXCIkZG9jdW1lbnRcIixmdW5jdGlvbihhKXt2YXIgYj1udWxsO3RoaXMub3Blbj1mdW5jdGlvbihlKXtifHwoYS5iaW5kKFwiY2xpY2tcIixjKSxhLmJpbmQoXCJrZXlkb3duXCIsZCkpLGImJmIhPT1lJiYoYi5pc09wZW49ITEpLGI9ZX0sdGhpcy5jbG9zZT1mdW5jdGlvbihlKXtiPT09ZSYmKGI9bnVsbCxhLnVuYmluZChcImNsaWNrXCIsYyksYS51bmJpbmQoXCJrZXlkb3duXCIsZCkpfTt2YXIgYz1mdW5jdGlvbihhKXthJiZhLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxiLiRhcHBseShmdW5jdGlvbigpe2IuaXNPcGVuPSExfSl9LGQ9ZnVuY3Rpb24oYSl7Mjc9PT1hLndoaWNoJiYoYi5mb2N1c1RvZ2dsZUVsZW1lbnQoKSxjKCkpfX1dKS5jb250cm9sbGVyKFwiRHJvcGRvd25Db250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcIiRwYXJzZVwiLFwiZHJvcGRvd25Db25maWdcIixcImRyb3Bkb3duU2VydmljZVwiLFwiJGFuaW1hdGVcIixmdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGcsaD10aGlzLGk9YS4kbmV3KCksaj1kLm9wZW5DbGFzcyxrPWFuZ3VsYXIubm9vcCxsPWIub25Ub2dnbGU/YyhiLm9uVG9nZ2xlKTphbmd1bGFyLm5vb3A7dGhpcy5pbml0PWZ1bmN0aW9uKGQpe2guJGVsZW1lbnQ9ZCxiLmlzT3BlbiYmKGc9YyhiLmlzT3Blbiksaz1nLmFzc2lnbixhLiR3YXRjaChnLGZ1bmN0aW9uKGEpe2kuaXNPcGVuPSEhYX0pKX0sdGhpcy50b2dnbGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGkuaXNPcGVuPWFyZ3VtZW50cy5sZW5ndGg/ISFhOiFpLmlzT3Blbn0sdGhpcy5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gaS5pc09wZW59LGkuZm9jdXNUb2dnbGVFbGVtZW50PWZ1bmN0aW9uKCl7aC50b2dnbGVFbGVtZW50JiZoLnRvZ2dsZUVsZW1lbnRbMF0uZm9jdXMoKX0saS4kd2F0Y2goXCJpc09wZW5cIixmdW5jdGlvbihiLGMpe2ZbYj9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShoLiRlbGVtZW50LGopLGI/KGkuZm9jdXNUb2dnbGVFbGVtZW50KCksZS5vcGVuKGkpKTplLmNsb3NlKGkpLGsoYSxiKSxhbmd1bGFyLmlzRGVmaW5lZChiKSYmYiE9PWMmJmwoYSx7b3BlbjohIWJ9KX0pLGEuJG9uKFwiJGxvY2F0aW9uQ2hhbmdlU3VjY2Vzc1wiLGZ1bmN0aW9uKCl7aS5pc09wZW49ITF9KSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtpLiRkZXN0cm95KCl9KX1dKS5kaXJlY3RpdmUoXCJkcm9wZG93blwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiQ0FcIixjb250cm9sbGVyOlwiRHJvcGRvd25Db250cm9sbGVyXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmluaXQoYil9fX0pLmRpcmVjdGl2ZShcImRyb3Bkb3duVG9nZ2xlXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJDQVwiLHJlcXVpcmU6XCI/XmRyb3Bkb3duXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtpZihkKXtkLnRvZ2dsZUVsZW1lbnQ9Yjt2YXIgZT1mdW5jdGlvbihlKXtlLnByZXZlbnREZWZhdWx0KCksYi5oYXNDbGFzcyhcImRpc2FibGVkXCIpfHxjLmRpc2FibGVkfHxhLiRhcHBseShmdW5jdGlvbigpe2QudG9nZ2xlKCl9KX07Yi5iaW5kKFwiY2xpY2tcIixlKSxiLmF0dHIoe1wiYXJpYS1oYXNwb3B1cFwiOiEwLFwiYXJpYS1leHBhbmRlZFwiOiExfSksYS4kd2F0Y2goZC5pc09wZW4sZnVuY3Rpb24oYSl7Yi5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEhYSl9KSxhLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtiLnVuYmluZChcImNsaWNrXCIsZSl9KX19fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLm1vZGFsXCIsW1widWkuYm9vdHN0cmFwLnRyYW5zaXRpb25cIl0pLmZhY3RvcnkoXCIkJHN0YWNrZWRNYXBcIixmdW5jdGlvbigpe3JldHVybntjcmVhdGVOZXc6ZnVuY3Rpb24oKXt2YXIgYT1bXTtyZXR1cm57YWRkOmZ1bmN0aW9uKGIsYyl7YS5wdXNoKHtrZXk6Yix2YWx1ZTpjfSl9LGdldDpmdW5jdGlvbihiKXtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKylpZihiPT1hW2NdLmtleSlyZXR1cm4gYVtjXX0sa2V5czpmdW5jdGlvbigpe2Zvcih2YXIgYj1bXSxjPTA7YzxhLmxlbmd0aDtjKyspYi5wdXNoKGFbY10ua2V5KTtyZXR1cm4gYn0sdG9wOmZ1bmN0aW9uKCl7cmV0dXJuIGFbYS5sZW5ndGgtMV19LHJlbW92ZTpmdW5jdGlvbihiKXtmb3IodmFyIGM9LTEsZD0wO2Q8YS5sZW5ndGg7ZCsrKWlmKGI9PWFbZF0ua2V5KXtjPWQ7YnJlYWt9cmV0dXJuIGEuc3BsaWNlKGMsMSlbMF19LHJlbW92ZVRvcDpmdW5jdGlvbigpe3JldHVybiBhLnNwbGljZShhLmxlbmd0aC0xLDEpWzBdfSxsZW5ndGg6ZnVuY3Rpb24oKXtyZXR1cm4gYS5sZW5ndGh9fX19fSkuZGlyZWN0aXZlKFwibW9kYWxCYWNrZHJvcFwiLFtcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLGxpbms6ZnVuY3Rpb24oYil7Yi5hbmltYXRlPSExLGEoZnVuY3Rpb24oKXtiLmFuaW1hdGU9ITB9KX19fV0pLmRpcmVjdGl2ZShcIm1vZGFsV2luZG93XCIsW1wiJG1vZGFsU3RhY2tcIixcIiR0aW1lb3V0XCIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHNjb3BlOntpbmRleDpcIkBcIixhbmltYXRlOlwiPVwifSxyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsdGVtcGxhdGVVcmw6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50ZW1wbGF0ZVVybHx8XCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwifSxsaW5rOmZ1bmN0aW9uKGMsZCxlKXtkLmFkZENsYXNzKGUud2luZG93Q2xhc3N8fFwiXCIpLGMuc2l6ZT1lLnNpemUsYihmdW5jdGlvbigpe2MuYW5pbWF0ZT0hMCxkWzBdLmZvY3VzKCl9KSxjLmNsb3NlPWZ1bmN0aW9uKGIpe3ZhciBjPWEuZ2V0VG9wKCk7YyYmYy52YWx1ZS5iYWNrZHJvcCYmXCJzdGF0aWNcIiE9Yy52YWx1ZS5iYWNrZHJvcCYmYi50YXJnZXQ9PT1iLmN1cnJlbnRUYXJnZXQmJihiLnByZXZlbnREZWZhdWx0KCksYi5zdG9wUHJvcGFnYXRpb24oKSxhLmRpc21pc3MoYy5rZXksXCJiYWNrZHJvcCBjbGlja1wiKSl9fX19XSkuZmFjdG9yeShcIiRtb2RhbFN0YWNrXCIsW1wiJHRyYW5zaXRpb25cIixcIiR0aW1lb3V0XCIsXCIkZG9jdW1lbnRcIixcIiRjb21waWxlXCIsXCIkcm9vdFNjb3BlXCIsXCIkJHN0YWNrZWRNYXBcIixmdW5jdGlvbihhLGIsYyxkLGUsZil7ZnVuY3Rpb24gZygpe2Zvcih2YXIgYT0tMSxiPW4ua2V5cygpLGM9MDtjPGIubGVuZ3RoO2MrKyluLmdldChiW2NdKS52YWx1ZS5iYWNrZHJvcCYmKGE9Yyk7cmV0dXJuIGF9ZnVuY3Rpb24gaChhKXt2YXIgYj1jLmZpbmQoXCJib2R5XCIpLmVxKDApLGQ9bi5nZXQoYSkudmFsdWU7bi5yZW1vdmUoYSksaihkLm1vZGFsRG9tRWwsZC5tb2RhbFNjb3BlLDMwMCxmdW5jdGlvbigpe2QubW9kYWxTY29wZS4kZGVzdHJveSgpLGIudG9nZ2xlQ2xhc3MobSxuLmxlbmd0aCgpPjApLGkoKX0pfWZ1bmN0aW9uIGkoKXtpZihrJiYtMT09ZygpKXt2YXIgYT1sO2ooayxsLDE1MCxmdW5jdGlvbigpe2EuJGRlc3Ryb3koKSxhPW51bGx9KSxrPXZvaWQgMCxsPXZvaWQgMH19ZnVuY3Rpb24gaihjLGQsZSxmKXtmdW5jdGlvbiBnKCl7Zy5kb25lfHwoZy5kb25lPSEwLGMucmVtb3ZlKCksZiYmZigpKX1kLmFuaW1hdGU9ITE7dmFyIGg9YS50cmFuc2l0aW9uRW5kRXZlbnROYW1lO2lmKGgpe3ZhciBpPWIoZyxlKTtjLmJpbmQoaCxmdW5jdGlvbigpe2IuY2FuY2VsKGkpLGcoKSxkLiRhcHBseSgpfSl9ZWxzZSBiKGcsMCl9dmFyIGssbCxtPVwibW9kYWwtb3BlblwiLG49Zi5jcmVhdGVOZXcoKSxvPXt9O3JldHVybiBlLiR3YXRjaChnLGZ1bmN0aW9uKGEpe2wmJihsLmluZGV4PWEpfSksYy5iaW5kKFwia2V5ZG93blwiLGZ1bmN0aW9uKGEpe3ZhciBiOzI3PT09YS53aGljaCYmKGI9bi50b3AoKSxiJiZiLnZhbHVlLmtleWJvYXJkJiYoYS5wcmV2ZW50RGVmYXVsdCgpLGUuJGFwcGx5KGZ1bmN0aW9uKCl7by5kaXNtaXNzKGIua2V5LFwiZXNjYXBlIGtleSBwcmVzc1wiKX0pKSl9KSxvLm9wZW49ZnVuY3Rpb24oYSxiKXtuLmFkZChhLHtkZWZlcnJlZDpiLmRlZmVycmVkLG1vZGFsU2NvcGU6Yi5zY29wZSxiYWNrZHJvcDpiLmJhY2tkcm9wLGtleWJvYXJkOmIua2V5Ym9hcmR9KTt2YXIgZj1jLmZpbmQoXCJib2R5XCIpLmVxKDApLGg9ZygpO2g+PTAmJiFrJiYobD1lLiRuZXcoITApLGwuaW5kZXg9aCxrPWQoXCI8ZGl2IG1vZGFsLWJhY2tkcm9wPjwvZGl2PlwiKShsKSxmLmFwcGVuZChrKSk7dmFyIGk9YW5ndWxhci5lbGVtZW50KFwiPGRpdiBtb2RhbC13aW5kb3c+PC9kaXY+XCIpO2kuYXR0cih7XCJ0ZW1wbGF0ZS11cmxcIjpiLndpbmRvd1RlbXBsYXRlVXJsLFwid2luZG93LWNsYXNzXCI6Yi53aW5kb3dDbGFzcyxzaXplOmIuc2l6ZSxpbmRleDpuLmxlbmd0aCgpLTEsYW5pbWF0ZTpcImFuaW1hdGVcIn0pLmh0bWwoYi5jb250ZW50KTt2YXIgaj1kKGkpKGIuc2NvcGUpO24udG9wKCkudmFsdWUubW9kYWxEb21FbD1qLGYuYXBwZW5kKGopLGYuYWRkQ2xhc3MobSl9LG8uY2xvc2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmdldChhKS52YWx1ZTtjJiYoYy5kZWZlcnJlZC5yZXNvbHZlKGIpLGgoYSkpfSxvLmRpc21pc3M9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmdldChhKS52YWx1ZTtjJiYoYy5kZWZlcnJlZC5yZWplY3QoYiksaChhKSl9LG8uZGlzbWlzc0FsbD1mdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5nZXRUb3AoKTtiOyl0aGlzLmRpc21pc3MoYi5rZXksYSksYj10aGlzLmdldFRvcCgpfSxvLmdldFRvcD1mdW5jdGlvbigpe3JldHVybiBuLnRvcCgpfSxvfV0pLnByb3ZpZGVyKFwiJG1vZGFsXCIsZnVuY3Rpb24oKXt2YXIgYT17b3B0aW9uczp7YmFja2Ryb3A6ITAsa2V5Ym9hcmQ6ITB9LCRnZXQ6W1wiJGluamVjdG9yXCIsXCIkcm9vdFNjb3BlXCIsXCIkcVwiLFwiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkY29udHJvbGxlclwiLFwiJG1vZGFsU3RhY2tcIixmdW5jdGlvbihiLGMsZCxlLGYsZyxoKXtmdW5jdGlvbiBpKGEpe3JldHVybiBhLnRlbXBsYXRlP2Qud2hlbihhLnRlbXBsYXRlKTplLmdldChhLnRlbXBsYXRlVXJsLHtjYWNoZTpmfSkudGhlbihmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhfSl9ZnVuY3Rpb24gaihhKXt2YXIgYz1bXTtyZXR1cm4gYW5ndWxhci5mb3JFYWNoKGEsZnVuY3Rpb24oYSl7KGFuZ3VsYXIuaXNGdW5jdGlvbihhKXx8YW5ndWxhci5pc0FycmF5KGEpKSYmYy5wdXNoKGQud2hlbihiLmludm9rZShhKSkpfSksY312YXIgaz17fTtyZXR1cm4gay5vcGVuPWZ1bmN0aW9uKGIpe3ZhciBlPWQuZGVmZXIoKSxmPWQuZGVmZXIoKSxrPXtyZXN1bHQ6ZS5wcm9taXNlLG9wZW5lZDpmLnByb21pc2UsY2xvc2U6ZnVuY3Rpb24oYSl7aC5jbG9zZShrLGEpfSxkaXNtaXNzOmZ1bmN0aW9uKGEpe2guZGlzbWlzcyhrLGEpfX07aWYoYj1hbmd1bGFyLmV4dGVuZCh7fSxhLm9wdGlvbnMsYiksYi5yZXNvbHZlPWIucmVzb2x2ZXx8e30sIWIudGVtcGxhdGUmJiFiLnRlbXBsYXRlVXJsKXRocm93IG5ldyBFcnJvcihcIk9uZSBvZiB0ZW1wbGF0ZSBvciB0ZW1wbGF0ZVVybCBvcHRpb25zIGlzIHJlcXVpcmVkLlwiKTt2YXIgbD1kLmFsbChbaShiKV0uY29uY2F0KGooYi5yZXNvbHZlKSkpO3JldHVybiBsLnRoZW4oZnVuY3Rpb24oYSl7dmFyIGQ9KGIuc2NvcGV8fGMpLiRuZXcoKTtkLiRjbG9zZT1rLmNsb3NlLGQuJGRpc21pc3M9ay5kaXNtaXNzO3ZhciBmLGk9e30saj0xO2IuY29udHJvbGxlciYmKGkuJHNjb3BlPWQsaS4kbW9kYWxJbnN0YW5jZT1rLGFuZ3VsYXIuZm9yRWFjaChiLnJlc29sdmUsZnVuY3Rpb24oYixjKXtpW2NdPWFbaisrXX0pLGY9ZyhiLmNvbnRyb2xsZXIsaSkpLGgub3BlbihrLHtzY29wZTpkLGRlZmVycmVkOmUsY29udGVudDphWzBdLGJhY2tkcm9wOmIuYmFja2Ryb3Asa2V5Ym9hcmQ6Yi5rZXlib2FyZCx3aW5kb3dDbGFzczpiLndpbmRvd0NsYXNzLHdpbmRvd1RlbXBsYXRlVXJsOmIud2luZG93VGVtcGxhdGVVcmwsc2l6ZTpiLnNpemV9KX0sZnVuY3Rpb24oYSl7ZS5yZWplY3QoYSl9KSxsLnRoZW4oZnVuY3Rpb24oKXtmLnJlc29sdmUoITApfSxmdW5jdGlvbigpe2YucmVqZWN0KCExKX0pLGt9LGt9XX07cmV0dXJuIGF9KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5wYWdpbmF0aW9uXCIsW10pLmNvbnRyb2xsZXIoXCJQYWdpbmF0aW9uQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCIkcGFyc2VcIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH0sZj1iLm51bVBhZ2VzP2MoYi5udW1QYWdlcykuYXNzaWduOmFuZ3VsYXIubm9vcDt0aGlzLmluaXQ9ZnVuY3Rpb24oZixnKXtlPWYsdGhpcy5jb25maWc9ZyxlLiRyZW5kZXI9ZnVuY3Rpb24oKXtkLnJlbmRlcigpfSxiLml0ZW1zUGVyUGFnZT9hLiRwYXJlbnQuJHdhdGNoKGMoYi5pdGVtc1BlclBhZ2UpLGZ1bmN0aW9uKGIpe2QuaXRlbXNQZXJQYWdlPXBhcnNlSW50KGIsMTApLGEudG90YWxQYWdlcz1kLmNhbGN1bGF0ZVRvdGFsUGFnZXMoKX0pOnRoaXMuaXRlbXNQZXJQYWdlPWcuaXRlbXNQZXJQYWdlfSx0aGlzLmNhbGN1bGF0ZVRvdGFsUGFnZXM9ZnVuY3Rpb24oKXt2YXIgYj10aGlzLml0ZW1zUGVyUGFnZTwxPzE6TWF0aC5jZWlsKGEudG90YWxJdGVtcy90aGlzLml0ZW1zUGVyUGFnZSk7cmV0dXJuIE1hdGgubWF4KGJ8fDAsMSl9LHRoaXMucmVuZGVyPWZ1bmN0aW9uKCl7YS5wYWdlPXBhcnNlSW50KGUuJHZpZXdWYWx1ZSwxMCl8fDF9LGEuc2VsZWN0UGFnZT1mdW5jdGlvbihiKXthLnBhZ2UhPT1iJiZiPjAmJmI8PWEudG90YWxQYWdlcyYmKGUuJHNldFZpZXdWYWx1ZShiKSxlLiRyZW5kZXIoKSl9LGEuZ2V0VGV4dD1mdW5jdGlvbihiKXtyZXR1cm4gYVtiK1wiVGV4dFwiXXx8ZC5jb25maWdbYitcIlRleHRcIl19LGEubm9QcmV2aW91cz1mdW5jdGlvbigpe3JldHVybiAxPT09YS5wYWdlfSxhLm5vTmV4dD1mdW5jdGlvbigpe3JldHVybiBhLnBhZ2U9PT1hLnRvdGFsUGFnZXN9LGEuJHdhdGNoKFwidG90YWxJdGVtc1wiLGZ1bmN0aW9uKCl7YS50b3RhbFBhZ2VzPWQuY2FsY3VsYXRlVG90YWxQYWdlcygpfSksYS4kd2F0Y2goXCJ0b3RhbFBhZ2VzXCIsZnVuY3Rpb24oYil7ZihhLiRwYXJlbnQsYiksYS5wYWdlPmI/YS5zZWxlY3RQYWdlKGIpOmUuJHJlbmRlcigpfSl9XSkuY29uc3RhbnQoXCJwYWdpbmF0aW9uQ29uZmlnXCIse2l0ZW1zUGVyUGFnZToxMCxib3VuZGFyeUxpbmtzOiExLGRpcmVjdGlvbkxpbmtzOiEwLGZpcnN0VGV4dDpcIkZpcnN0XCIscHJldmlvdXNUZXh0OlwiUHJldmlvdXNcIixuZXh0VGV4dDpcIk5leHRcIixsYXN0VGV4dDpcIkxhc3RcIixyb3RhdGU6ITB9KS5kaXJlY3RpdmUoXCJwYWdpbmF0aW9uXCIsW1wiJHBhcnNlXCIsXCJwYWdpbmF0aW9uQ29uZmlnXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHNjb3BlOnt0b3RhbEl0ZW1zOlwiPVwiLGZpcnN0VGV4dDpcIkBcIixwcmV2aW91c1RleHQ6XCJAXCIsbmV4dFRleHQ6XCJAXCIsbGFzdFRleHQ6XCJAXCJ9LHJlcXVpcmU6W1wicGFnaW5hdGlvblwiLFwiP25nTW9kZWxcIl0sY29udHJvbGxlcjpcIlBhZ2luYXRpb25Db250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLHJlcGxhY2U6ITAsbGluazpmdW5jdGlvbihjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYixjKXtyZXR1cm57bnVtYmVyOmEsdGV4dDpiLGFjdGl2ZTpjfX1mdW5jdGlvbiBoKGEsYil7dmFyIGM9W10sZD0xLGU9YixmPWFuZ3VsYXIuaXNEZWZpbmVkKGspJiZiPms7ZiYmKGw/KGQ9TWF0aC5tYXgoYS1NYXRoLmZsb29yKGsvMiksMSksZT1kK2stMSxlPmImJihlPWIsZD1lLWsrMSkpOihkPShNYXRoLmNlaWwoYS9rKS0xKSprKzEsZT1NYXRoLm1pbihkK2stMSxiKSkpO2Zvcih2YXIgaD1kO2U+PWg7aCsrKXt2YXIgaT1nKGgsaCxoPT09YSk7Yy5wdXNoKGkpfWlmKGYmJiFsKXtpZihkPjEpe3ZhciBqPWcoZC0xLFwiLi4uXCIsITEpO2MudW5zaGlmdChqKX1pZihiPmUpe3ZhciBtPWcoZSsxLFwiLi4uXCIsITEpO2MucHVzaChtKX19cmV0dXJuIGN9dmFyIGk9ZlswXSxqPWZbMV07aWYoail7dmFyIGs9YW5ndWxhci5pc0RlZmluZWQoZS5tYXhTaXplKT9jLiRwYXJlbnQuJGV2YWwoZS5tYXhTaXplKTpiLm1heFNpemUsbD1hbmd1bGFyLmlzRGVmaW5lZChlLnJvdGF0ZSk/Yy4kcGFyZW50LiRldmFsKGUucm90YXRlKTpiLnJvdGF0ZTtjLmJvdW5kYXJ5TGlua3M9YW5ndWxhci5pc0RlZmluZWQoZS5ib3VuZGFyeUxpbmtzKT9jLiRwYXJlbnQuJGV2YWwoZS5ib3VuZGFyeUxpbmtzKTpiLmJvdW5kYXJ5TGlua3MsYy5kaXJlY3Rpb25MaW5rcz1hbmd1bGFyLmlzRGVmaW5lZChlLmRpcmVjdGlvbkxpbmtzKT9jLiRwYXJlbnQuJGV2YWwoZS5kaXJlY3Rpb25MaW5rcyk6Yi5kaXJlY3Rpb25MaW5rcyxpLmluaXQoaixiKSxlLm1heFNpemUmJmMuJHBhcmVudC4kd2F0Y2goYShlLm1heFNpemUpLGZ1bmN0aW9uKGEpe2s9cGFyc2VJbnQoYSwxMCksaS5yZW5kZXIoKX0pO3ZhciBtPWkucmVuZGVyO2kucmVuZGVyPWZ1bmN0aW9uKCl7bSgpLGMucGFnZT4wJiZjLnBhZ2U8PWMudG90YWxQYWdlcyYmKGMucGFnZXM9aChjLnBhZ2UsYy50b3RhbFBhZ2VzKSl9fX19fV0pLmNvbnN0YW50KFwicGFnZXJDb25maWdcIix7aXRlbXNQZXJQYWdlOjEwLHByZXZpb3VzVGV4dDpcIsKrIFByZXZpb3VzXCIsbmV4dFRleHQ6XCJOZXh0IMK7XCIsYWxpZ246ITB9KS5kaXJlY3RpdmUoXCJwYWdlclwiLFtcInBhZ2VyQ29uZmlnXCIsZnVuY3Rpb24oYSl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7dG90YWxJdGVtczpcIj1cIixwcmV2aW91c1RleHQ6XCJAXCIsbmV4dFRleHQ6XCJAXCJ9LHJlcXVpcmU6W1wicGFnZXJcIixcIj9uZ01vZGVsXCJdLGNvbnRyb2xsZXI6XCJQYWdpbmF0aW9uQ29udHJvbGxlclwiLHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcGFnaW5hdGlvbi9wYWdlci5odG1sXCIscmVwbGFjZTohMCxsaW5rOmZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmPWVbMF0sZz1lWzFdO2cmJihiLmFsaWduPWFuZ3VsYXIuaXNEZWZpbmVkKGQuYWxpZ24pP2IuJHBhcmVudC4kZXZhbChkLmFsaWduKTphLmFsaWduLGYuaW5pdChnLGEpKX19fV0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnRvb2x0aXBcIixbXCJ1aS5ib290c3RyYXAucG9zaXRpb25cIixcInVpLmJvb3RzdHJhcC5iaW5kSHRtbFwiXSkucHJvdmlkZXIoXCIkdG9vbHRpcFwiLGZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgYj0vW0EtWl0vZyxjPVwiLVwiO1xucmV0dXJuIGEucmVwbGFjZShiLGZ1bmN0aW9uKGEsYil7cmV0dXJuKGI/YzpcIlwiKSthLnRvTG93ZXJDYXNlKCl9KX12YXIgYj17cGxhY2VtZW50OlwidG9wXCIsYW5pbWF0aW9uOiEwLHBvcHVwRGVsYXk6MH0sYz17bW91c2VlbnRlcjpcIm1vdXNlbGVhdmVcIixjbGljazpcImNsaWNrXCIsZm9jdXM6XCJibHVyXCJ9LGQ9e307dGhpcy5vcHRpb25zPWZ1bmN0aW9uKGEpe2FuZ3VsYXIuZXh0ZW5kKGQsYSl9LHRoaXMuc2V0VHJpZ2dlcnM9ZnVuY3Rpb24oYSl7YW5ndWxhci5leHRlbmQoYyxhKX0sdGhpcy4kZ2V0PVtcIiR3aW5kb3dcIixcIiRjb21waWxlXCIsXCIkdGltZW91dFwiLFwiJHBhcnNlXCIsXCIkZG9jdW1lbnRcIixcIiRwb3NpdGlvblwiLFwiJGludGVycG9sYXRlXCIsZnVuY3Rpb24oZSxmLGcsaCxpLGosayl7cmV0dXJuIGZ1bmN0aW9uKGUsbCxtKXtmdW5jdGlvbiBuKGEpe3ZhciBiPWF8fG8udHJpZ2dlcnx8bSxkPWNbYl18fGI7cmV0dXJue3Nob3c6YixoaWRlOmR9fXZhciBvPWFuZ3VsYXIuZXh0ZW5kKHt9LGIsZCkscD1hKGUpLHE9ay5zdGFydFN5bWJvbCgpLHI9ay5lbmRTeW1ib2woKSxzPVwiPGRpdiBcIitwKyctcG9wdXAgdGl0bGU9XCInK3ErXCJ0dF90aXRsZVwiK3IrJ1wiIGNvbnRlbnQ9XCInK3ErXCJ0dF9jb250ZW50XCIrcisnXCIgcGxhY2VtZW50PVwiJytxK1widHRfcGxhY2VtZW50XCIrcisnXCIgYW5pbWF0aW9uPVwidHRfYW5pbWF0aW9uXCIgaXMtb3Blbj1cInR0X2lzT3BlblwiPjwvZGl2Pic7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTohMCxjb21waWxlOmZ1bmN0aW9uKCl7dmFyIGE9ZihzKTtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGYoKXtiLnR0X2lzT3Blbj9tKCk6aygpfWZ1bmN0aW9uIGsoKXsoIXl8fGIuJGV2YWwoZFtsK1wiRW5hYmxlXCJdKSkmJihiLnR0X3BvcHVwRGVsYXk/dnx8KHY9ZyhwLGIudHRfcG9wdXBEZWxheSwhMSksdi50aGVuKGZ1bmN0aW9uKGEpe2EoKX0pKTpwKCkoKSl9ZnVuY3Rpb24gbSgpe2IuJGFwcGx5KGZ1bmN0aW9uKCl7cSgpfSl9ZnVuY3Rpb24gcCgpe3JldHVybiB2PW51bGwsdSYmKGcuY2FuY2VsKHUpLHU9bnVsbCksYi50dF9jb250ZW50PyhyKCksdC5jc3Moe3RvcDowLGxlZnQ6MCxkaXNwbGF5OlwiYmxvY2tcIn0pLHc/aS5maW5kKFwiYm9keVwiKS5hcHBlbmQodCk6Yy5hZnRlcih0KSx6KCksYi50dF9pc09wZW49ITAsYi4kZGlnZXN0KCkseik6YW5ndWxhci5ub29wfWZ1bmN0aW9uIHEoKXtiLnR0X2lzT3Blbj0hMSxnLmNhbmNlbCh2KSx2PW51bGwsYi50dF9hbmltYXRpb24/dXx8KHU9ZyhzLDUwMCkpOnMoKX1mdW5jdGlvbiByKCl7dCYmcygpLHQ9YShiLGZ1bmN0aW9uKCl7fSksYi4kZGlnZXN0KCl9ZnVuY3Rpb24gcygpe3U9bnVsbCx0JiYodC5yZW1vdmUoKSx0PW51bGwpfXZhciB0LHUsdix3PWFuZ3VsYXIuaXNEZWZpbmVkKG8uYXBwZW5kVG9Cb2R5KT9vLmFwcGVuZFRvQm9keTohMSx4PW4odm9pZCAwKSx5PWFuZ3VsYXIuaXNEZWZpbmVkKGRbbCtcIkVuYWJsZVwiXSksej1mdW5jdGlvbigpe3ZhciBhPWoucG9zaXRpb25FbGVtZW50cyhjLHQsYi50dF9wbGFjZW1lbnQsdyk7YS50b3ArPVwicHhcIixhLmxlZnQrPVwicHhcIix0LmNzcyhhKX07Yi50dF9pc09wZW49ITEsZC4kb2JzZXJ2ZShlLGZ1bmN0aW9uKGEpe2IudHRfY29udGVudD1hLCFhJiZiLnR0X2lzT3BlbiYmcSgpfSksZC4kb2JzZXJ2ZShsK1wiVGl0bGVcIixmdW5jdGlvbihhKXtiLnR0X3RpdGxlPWF9KSxkLiRvYnNlcnZlKGwrXCJQbGFjZW1lbnRcIixmdW5jdGlvbihhKXtiLnR0X3BsYWNlbWVudD1hbmd1bGFyLmlzRGVmaW5lZChhKT9hOm8ucGxhY2VtZW50fSksZC4kb2JzZXJ2ZShsK1wiUG9wdXBEZWxheVwiLGZ1bmN0aW9uKGEpe3ZhciBjPXBhcnNlSW50KGEsMTApO2IudHRfcG9wdXBEZWxheT1pc05hTihjKT9vLnBvcHVwRGVsYXk6Y30pO3ZhciBBPWZ1bmN0aW9uKCl7Yy51bmJpbmQoeC5zaG93LGspLGMudW5iaW5kKHguaGlkZSxtKX07ZC4kb2JzZXJ2ZShsK1wiVHJpZ2dlclwiLGZ1bmN0aW9uKGEpe0EoKSx4PW4oYSkseC5zaG93PT09eC5oaWRlP2MuYmluZCh4LnNob3csZik6KGMuYmluZCh4LnNob3csayksYy5iaW5kKHguaGlkZSxtKSl9KTt2YXIgQj1iLiRldmFsKGRbbCtcIkFuaW1hdGlvblwiXSk7Yi50dF9hbmltYXRpb249YW5ndWxhci5pc0RlZmluZWQoQik/ISFCOm8uYW5pbWF0aW9uLGQuJG9ic2VydmUobCtcIkFwcGVuZFRvQm9keVwiLGZ1bmN0aW9uKGEpe3c9YW5ndWxhci5pc0RlZmluZWQoYSk/aChhKShiKTp3fSksdyYmYi4kb24oXCIkbG9jYXRpb25DaGFuZ2VTdWNjZXNzXCIsZnVuY3Rpb24oKXtiLnR0X2lzT3BlbiYmcSgpfSksYi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zy5jYW5jZWwodSksZy5jYW5jZWwodiksQSgpLHMoKX0pfX19fX1dfSkuZGlyZWN0aXZlKFwidG9vbHRpcFBvcHVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsc2NvcGU6e2NvbnRlbnQ6XCJAXCIscGxhY2VtZW50OlwiQFwiLGFuaW1hdGlvbjpcIiZcIixpc09wZW46XCImXCJ9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIn19KS5kaXJlY3RpdmUoXCJ0b29sdGlwXCIsW1wiJHRvb2x0aXBcIixmdW5jdGlvbihhKXtyZXR1cm4gYShcInRvb2x0aXBcIixcInRvb2x0aXBcIixcIm1vdXNlZW50ZXJcIil9XSkuZGlyZWN0aXZlKFwidG9vbHRpcEh0bWxVbnNhZmVQb3B1cFwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHNjb3BlOntjb250ZW50OlwiQFwiLHBsYWNlbWVudDpcIkBcIixhbmltYXRpb246XCImXCIsaXNPcGVuOlwiJlwifSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1odG1sLXVuc2FmZS1wb3B1cC5odG1sXCJ9fSkuZGlyZWN0aXZlKFwidG9vbHRpcEh0bWxVbnNhZmVcIixbXCIkdG9vbHRpcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwidG9vbHRpcEh0bWxVbnNhZmVcIixcInRvb2x0aXBcIixcIm1vdXNlZW50ZXJcIil9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucG9wb3ZlclwiLFtcInVpLmJvb3RzdHJhcC50b29sdGlwXCJdKS5kaXJlY3RpdmUoXCJwb3BvdmVyUG9wdXBcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVwbGFjZTohMCxzY29wZTp7dGl0bGU6XCJAXCIsY29udGVudDpcIkBcIixwbGFjZW1lbnQ6XCJAXCIsYW5pbWF0aW9uOlwiJlwiLGlzT3BlbjpcIiZcIn0sdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwifX0pLmRpcmVjdGl2ZShcInBvcG92ZXJcIixbXCIkdG9vbHRpcFwiLGZ1bmN0aW9uKGEpe3JldHVybiBhKFwicG9wb3ZlclwiLFwicG9wb3ZlclwiLFwiY2xpY2tcIil9XSksYW5ndWxhci5tb2R1bGUoXCJ1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXJcIixbXSkuY29uc3RhbnQoXCJwcm9ncmVzc0NvbmZpZ1wiLHthbmltYXRlOiEwLG1heDoxMDB9KS5jb250cm9sbGVyKFwiUHJvZ3Jlc3NDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcInByb2dyZXNzQ29uZmlnXCIsZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT1hbmd1bGFyLmlzRGVmaW5lZChiLmFuaW1hdGUpP2EuJHBhcmVudC4kZXZhbChiLmFuaW1hdGUpOmMuYW5pbWF0ZTt0aGlzLmJhcnM9W10sYS5tYXg9YW5ndWxhci5pc0RlZmluZWQoYi5tYXgpP2EuJHBhcmVudC4kZXZhbChiLm1heCk6Yy5tYXgsdGhpcy5hZGRCYXI9ZnVuY3Rpb24oYixjKXtlfHxjLmNzcyh7dHJhbnNpdGlvbjpcIm5vbmVcIn0pLHRoaXMuYmFycy5wdXNoKGIpLGIuJHdhdGNoKFwidmFsdWVcIixmdW5jdGlvbihjKXtiLnBlcmNlbnQ9KygxMDAqYy9hLm1heCkudG9GaXhlZCgyKX0pLGIuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe2M9bnVsbCxkLnJlbW92ZUJhcihiKX0pfSx0aGlzLnJlbW92ZUJhcj1mdW5jdGlvbihhKXt0aGlzLmJhcnMuc3BsaWNlKHRoaXMuYmFycy5pbmRleE9mKGEpLDEpfX1dKS5kaXJlY3RpdmUoXCJwcm9ncmVzc1wiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjpcIlByb2dyZXNzQ29udHJvbGxlclwiLHJlcXVpcmU6XCJwcm9ncmVzc1wiLHNjb3BlOnt9LHRlbXBsYXRlVXJsOlwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbFwifX0pLmRpcmVjdGl2ZShcImJhclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAscmVxdWlyZTpcIl5wcm9ncmVzc1wiLHNjb3BlOnt2YWx1ZTpcIj1cIix0eXBlOlwiQFwifSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXtkLmFkZEJhcihhLGIpfX19KS5kaXJlY3RpdmUoXCJwcm9ncmVzc2JhclwiLGZ1bmN0aW9uKCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixyZXBsYWNlOiEwLHRyYW5zY2x1ZGU6ITAsY29udHJvbGxlcjpcIlByb2dyZXNzQ29udHJvbGxlclwiLHNjb3BlOnt2YWx1ZTpcIj1cIix0eXBlOlwiQFwifSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixsaW5rOmZ1bmN0aW9uKGEsYixjLGQpe2QuYWRkQmFyKGEsYW5ndWxhci5lbGVtZW50KGIuY2hpbGRyZW4oKVswXSkpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC5yYXRpbmdcIixbXSkuY29uc3RhbnQoXCJyYXRpbmdDb25maWdcIix7bWF4OjUsc3RhdGVPbjpudWxsLHN0YXRlT2ZmOm51bGx9KS5jb250cm9sbGVyKFwiUmF0aW5nQ29udHJvbGxlclwiLFtcIiRzY29wZVwiLFwiJGF0dHJzXCIsXCJyYXRpbmdDb25maWdcIixmdW5jdGlvbihhLGIsYyl7dmFyIGQ9eyRzZXRWaWV3VmFsdWU6YW5ndWxhci5ub29wfTt0aGlzLmluaXQ9ZnVuY3Rpb24oZSl7ZD1lLGQuJHJlbmRlcj10aGlzLnJlbmRlcix0aGlzLnN0YXRlT249YW5ndWxhci5pc0RlZmluZWQoYi5zdGF0ZU9uKT9hLiRwYXJlbnQuJGV2YWwoYi5zdGF0ZU9uKTpjLnN0YXRlT24sdGhpcy5zdGF0ZU9mZj1hbmd1bGFyLmlzRGVmaW5lZChiLnN0YXRlT2ZmKT9hLiRwYXJlbnQuJGV2YWwoYi5zdGF0ZU9mZik6Yy5zdGF0ZU9mZjt2YXIgZj1hbmd1bGFyLmlzRGVmaW5lZChiLnJhdGluZ1N0YXRlcyk/YS4kcGFyZW50LiRldmFsKGIucmF0aW5nU3RhdGVzKTpuZXcgQXJyYXkoYW5ndWxhci5pc0RlZmluZWQoYi5tYXgpP2EuJHBhcmVudC4kZXZhbChiLm1heCk6Yy5tYXgpO2EucmFuZ2U9dGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cyhmKX0sdGhpcy5idWlsZFRlbXBsYXRlT2JqZWN0cz1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspYVtiXT1hbmd1bGFyLmV4dGVuZCh7aW5kZXg6Yn0se3N0YXRlT246dGhpcy5zdGF0ZU9uLHN0YXRlT2ZmOnRoaXMuc3RhdGVPZmZ9LGFbYl0pO3JldHVybiBhfSxhLnJhdGU9ZnVuY3Rpb24oYil7IWEucmVhZG9ubHkmJmI+PTAmJmI8PWEucmFuZ2UubGVuZ3RoJiYoZC4kc2V0Vmlld1ZhbHVlKGIpLGQuJHJlbmRlcigpKX0sYS5lbnRlcj1mdW5jdGlvbihiKXthLnJlYWRvbmx5fHwoYS52YWx1ZT1iKSxhLm9uSG92ZXIoe3ZhbHVlOmJ9KX0sYS5yZXNldD1mdW5jdGlvbigpe2EudmFsdWU9ZC4kdmlld1ZhbHVlLGEub25MZWF2ZSgpfSxhLm9uS2V5ZG93bj1mdW5jdGlvbihiKXsvKDM3fDM4fDM5fDQwKS8udGVzdChiLndoaWNoKSYmKGIucHJldmVudERlZmF1bHQoKSxiLnN0b3BQcm9wYWdhdGlvbigpLGEucmF0ZShhLnZhbHVlKygzOD09PWIud2hpY2h8fDM5PT09Yi53aGljaD8xOi0xKSkpfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe2EudmFsdWU9ZC4kdmlld1ZhbHVlfX1dKS5kaXJlY3RpdmUoXCJyYXRpbmdcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpbXCJyYXRpbmdcIixcIm5nTW9kZWxcIl0sc2NvcGU6e3JlYWRvbmx5OlwiPT9cIixvbkhvdmVyOlwiJlwiLG9uTGVhdmU6XCImXCJ9LGNvbnRyb2xsZXI6XCJSYXRpbmdDb250cm9sbGVyXCIsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS9yYXRpbmcvcmF0aW5nLmh0bWxcIixyZXBsYWNlOiEwLGxpbms6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZFswXSxmPWRbMV07ZiYmZS5pbml0KGYpfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50YWJzXCIsW10pLmNvbnRyb2xsZXIoXCJUYWJzZXRDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIudGFicz1hLnRhYnM9W107Yi5zZWxlY3Q9ZnVuY3Rpb24oYSl7YW5ndWxhci5mb3JFYWNoKGMsZnVuY3Rpb24oYil7Yi5hY3RpdmUmJmIhPT1hJiYoYi5hY3RpdmU9ITEsYi5vbkRlc2VsZWN0KCkpfSksYS5hY3RpdmU9ITAsYS5vblNlbGVjdCgpfSxiLmFkZFRhYj1mdW5jdGlvbihhKXtjLnB1c2goYSksMT09PWMubGVuZ3RoP2EuYWN0aXZlPSEwOmEuYWN0aXZlJiZiLnNlbGVjdChhKX0sYi5yZW1vdmVUYWI9ZnVuY3Rpb24oYSl7dmFyIGQ9Yy5pbmRleE9mKGEpO2lmKGEuYWN0aXZlJiZjLmxlbmd0aD4xKXt2YXIgZT1kPT1jLmxlbmd0aC0xP2QtMTpkKzE7Yi5zZWxlY3QoY1tlXSl9Yy5zcGxpY2UoZCwxKX19XSkuZGlyZWN0aXZlKFwidGFic2V0XCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHRyYW5zY2x1ZGU6ITAscmVwbGFjZTohMCxzY29wZTp7dHlwZTpcIkBcIn0sY29udHJvbGxlcjpcIlRhYnNldENvbnRyb2xsZXJcIix0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIixsaW5rOmZ1bmN0aW9uKGEsYixjKXthLnZlcnRpY2FsPWFuZ3VsYXIuaXNEZWZpbmVkKGMudmVydGljYWwpP2EuJHBhcmVudC4kZXZhbChjLnZlcnRpY2FsKTohMSxhLmp1c3RpZmllZD1hbmd1bGFyLmlzRGVmaW5lZChjLmp1c3RpZmllZCk/YS4kcGFyZW50LiRldmFsKGMuanVzdGlmaWVkKTohMX19fSkuZGlyZWN0aXZlKFwidGFiXCIsW1wiJHBhcnNlXCIsZnVuY3Rpb24oYSl7cmV0dXJue3JlcXVpcmU6XCJedGFic2V0XCIscmVzdHJpY3Q6XCJFQVwiLHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90YWJzL3RhYi5odG1sXCIsdHJhbnNjbHVkZTohMCxzY29wZTp7YWN0aXZlOlwiPT9cIixoZWFkaW5nOlwiQFwiLG9uU2VsZWN0OlwiJnNlbGVjdFwiLG9uRGVzZWxlY3Q6XCImZGVzZWxlY3RcIn0sY29udHJvbGxlcjpmdW5jdGlvbigpe30sY29tcGlsZTpmdW5jdGlvbihiLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxlLGYpe2IuJHdhdGNoKFwiYWN0aXZlXCIsZnVuY3Rpb24oYSl7YSYmZi5zZWxlY3QoYil9KSxiLmRpc2FibGVkPSExLGUuZGlzYWJsZWQmJmIuJHBhcmVudC4kd2F0Y2goYShlLmRpc2FibGVkKSxmdW5jdGlvbihhKXtiLmRpc2FibGVkPSEhYX0pLGIuc2VsZWN0PWZ1bmN0aW9uKCl7Yi5kaXNhYmxlZHx8KGIuYWN0aXZlPSEwKX0sZi5hZGRUYWIoYiksYi4kb24oXCIkZGVzdHJveVwiLGZ1bmN0aW9uKCl7Zi5yZW1vdmVUYWIoYil9KSxiLiR0cmFuc2NsdWRlRm49ZH19fX1dKS5kaXJlY3RpdmUoXCJ0YWJIZWFkaW5nVHJhbnNjbHVkZVwiLFtmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkFcIixyZXF1aXJlOlwiXnRhYlwiLGxpbms6ZnVuY3Rpb24oYSxiKXthLiR3YXRjaChcImhlYWRpbmdFbGVtZW50XCIsZnVuY3Rpb24oYSl7YSYmKGIuaHRtbChcIlwiKSxiLmFwcGVuZChhKSl9KX19fV0pLmRpcmVjdGl2ZShcInRhYkNvbnRlbnRUcmFuc2NsdWRlXCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhLnRhZ05hbWUmJihhLmhhc0F0dHJpYnV0ZShcInRhYi1oZWFkaW5nXCIpfHxhLmhhc0F0dHJpYnV0ZShcImRhdGEtdGFiLWhlYWRpbmdcIil8fFwidGFiLWhlYWRpbmdcIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpfHxcImRhdGEtdGFiLWhlYWRpbmdcIj09PWEudGFnTmFtZS50b0xvd2VyQ2FzZSgpKX1yZXR1cm57cmVzdHJpY3Q6XCJBXCIscmVxdWlyZTpcIl50YWJzZXRcIixsaW5rOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1iLiRldmFsKGQudGFiQ29udGVudFRyYW5zY2x1ZGUpO2UuJHRyYW5zY2x1ZGVGbihlLiRwYXJlbnQsZnVuY3Rpb24oYil7YW5ndWxhci5mb3JFYWNoKGIsZnVuY3Rpb24oYil7YShiKT9lLmhlYWRpbmdFbGVtZW50PWI6Yy5hcHBlbmQoYil9KX0pfX19KSxhbmd1bGFyLm1vZHVsZShcInVpLmJvb3RzdHJhcC50aW1lcGlja2VyXCIsW10pLmNvbnN0YW50KFwidGltZXBpY2tlckNvbmZpZ1wiLHtob3VyU3RlcDoxLG1pbnV0ZVN0ZXA6MSxzaG93TWVyaWRpYW46ITAsbWVyaWRpYW5zOm51bGwscmVhZG9ubHlJbnB1dDohMSxtb3VzZXdoZWVsOiEwfSkuY29udHJvbGxlcihcIlRpbWVwaWNrZXJDb250cm9sbGVyXCIsW1wiJHNjb3BlXCIsXCIkYXR0cnNcIixcIiRwYXJzZVwiLFwiJGxvZ1wiLFwiJGxvY2FsZVwiLFwidGltZXBpY2tlckNvbmZpZ1wiLGZ1bmN0aW9uKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKCl7dmFyIGI9cGFyc2VJbnQoYS5ob3VycywxMCksYz1hLnNob3dNZXJpZGlhbj9iPjAmJjEzPmI6Yj49MCYmMjQ+YjtyZXR1cm4gYz8oYS5zaG93TWVyaWRpYW4mJigxMj09PWImJihiPTApLGEubWVyaWRpYW49PT1wWzFdJiYoYis9MTIpKSxiKTp2b2lkIDB9ZnVuY3Rpb24gaCgpe3ZhciBiPXBhcnNlSW50KGEubWludXRlcywxMCk7cmV0dXJuIGI+PTAmJjYwPmI/Yjp2b2lkIDB9ZnVuY3Rpb24gaShhKXtyZXR1cm4gYW5ndWxhci5pc0RlZmluZWQoYSkmJmEudG9TdHJpbmcoKS5sZW5ndGg8Mj9cIjBcIithOmF9ZnVuY3Rpb24gaihhKXtrKCksby4kc2V0Vmlld1ZhbHVlKG5ldyBEYXRlKG4pKSxsKGEpfWZ1bmN0aW9uIGsoKXtvLiRzZXRWYWxpZGl0eShcInRpbWVcIiwhMCksYS5pbnZhbGlkSG91cnM9ITEsYS5pbnZhbGlkTWludXRlcz0hMX1mdW5jdGlvbiBsKGIpe3ZhciBjPW4uZ2V0SG91cnMoKSxkPW4uZ2V0TWludXRlcygpO2Euc2hvd01lcmlkaWFuJiYoYz0wPT09Y3x8MTI9PT1jPzEyOmMlMTIpLGEuaG91cnM9XCJoXCI9PT1iP2M6aShjKSxhLm1pbnV0ZXM9XCJtXCI9PT1iP2Q6aShkKSxhLm1lcmlkaWFuPW4uZ2V0SG91cnMoKTwxMj9wWzBdOnBbMV19ZnVuY3Rpb24gbShhKXt2YXIgYj1uZXcgRGF0ZShuLmdldFRpbWUoKSs2ZTQqYSk7bi5zZXRIb3VycyhiLmdldEhvdXJzKCksYi5nZXRNaW51dGVzKCkpLGooKX12YXIgbj1uZXcgRGF0ZSxvPXskc2V0Vmlld1ZhbHVlOmFuZ3VsYXIubm9vcH0scD1hbmd1bGFyLmlzRGVmaW5lZChiLm1lcmlkaWFucyk/YS4kcGFyZW50LiRldmFsKGIubWVyaWRpYW5zKTpmLm1lcmlkaWFuc3x8ZS5EQVRFVElNRV9GT1JNQVRTLkFNUE1TO3RoaXMuaW5pdD1mdW5jdGlvbihjLGQpe289YyxvLiRyZW5kZXI9dGhpcy5yZW5kZXI7dmFyIGU9ZC5lcSgwKSxnPWQuZXEoMSksaD1hbmd1bGFyLmlzRGVmaW5lZChiLm1vdXNld2hlZWwpP2EuJHBhcmVudC4kZXZhbChiLm1vdXNld2hlZWwpOmYubW91c2V3aGVlbDtoJiZ0aGlzLnNldHVwTW91c2V3aGVlbEV2ZW50cyhlLGcpLGEucmVhZG9ubHlJbnB1dD1hbmd1bGFyLmlzRGVmaW5lZChiLnJlYWRvbmx5SW5wdXQpP2EuJHBhcmVudC4kZXZhbChiLnJlYWRvbmx5SW5wdXQpOmYucmVhZG9ubHlJbnB1dCx0aGlzLnNldHVwSW5wdXRFdmVudHMoZSxnKX07dmFyIHE9Zi5ob3VyU3RlcDtiLmhvdXJTdGVwJiZhLiRwYXJlbnQuJHdhdGNoKGMoYi5ob3VyU3RlcCksZnVuY3Rpb24oYSl7cT1wYXJzZUludChhLDEwKX0pO3ZhciByPWYubWludXRlU3RlcDtiLm1pbnV0ZVN0ZXAmJmEuJHBhcmVudC4kd2F0Y2goYyhiLm1pbnV0ZVN0ZXApLGZ1bmN0aW9uKGEpe3I9cGFyc2VJbnQoYSwxMCl9KSxhLnNob3dNZXJpZGlhbj1mLnNob3dNZXJpZGlhbixiLnNob3dNZXJpZGlhbiYmYS4kcGFyZW50LiR3YXRjaChjKGIuc2hvd01lcmlkaWFuKSxmdW5jdGlvbihiKXtpZihhLnNob3dNZXJpZGlhbj0hIWIsby4kZXJyb3IudGltZSl7dmFyIGM9ZygpLGQ9aCgpO2FuZ3VsYXIuaXNEZWZpbmVkKGMpJiZhbmd1bGFyLmlzRGVmaW5lZChkKSYmKG4uc2V0SG91cnMoYyksaigpKX1lbHNlIGwoKX0pLHRoaXMuc2V0dXBNb3VzZXdoZWVsRXZlbnRzPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7YS5vcmlnaW5hbEV2ZW50JiYoYT1hLm9yaWdpbmFsRXZlbnQpO3ZhciBiPWEud2hlZWxEZWx0YT9hLndoZWVsRGVsdGE6LWEuZGVsdGFZO3JldHVybiBhLmRldGFpbHx8Yj4wfTtiLmJpbmQoXCJtb3VzZXdoZWVsIHdoZWVsXCIsZnVuY3Rpb24oYil7YS4kYXBwbHkoZChiKT9hLmluY3JlbWVudEhvdXJzKCk6YS5kZWNyZW1lbnRIb3VycygpKSxiLnByZXZlbnREZWZhdWx0KCl9KSxjLmJpbmQoXCJtb3VzZXdoZWVsIHdoZWVsXCIsZnVuY3Rpb24oYil7YS4kYXBwbHkoZChiKT9hLmluY3JlbWVudE1pbnV0ZXMoKTphLmRlY3JlbWVudE1pbnV0ZXMoKSksYi5wcmV2ZW50RGVmYXVsdCgpfSl9LHRoaXMuc2V0dXBJbnB1dEV2ZW50cz1mdW5jdGlvbihiLGMpe2lmKGEucmVhZG9ubHlJbnB1dClyZXR1cm4gYS51cGRhdGVIb3Vycz1hbmd1bGFyLm5vb3Asdm9pZChhLnVwZGF0ZU1pbnV0ZXM9YW5ndWxhci5ub29wKTt2YXIgZD1mdW5jdGlvbihiLGMpe28uJHNldFZpZXdWYWx1ZShudWxsKSxvLiRzZXRWYWxpZGl0eShcInRpbWVcIiwhMSksYW5ndWxhci5pc0RlZmluZWQoYikmJihhLmludmFsaWRIb3Vycz1iKSxhbmd1bGFyLmlzRGVmaW5lZChjKSYmKGEuaW52YWxpZE1pbnV0ZXM9Yyl9O2EudXBkYXRlSG91cnM9ZnVuY3Rpb24oKXt2YXIgYT1nKCk7YW5ndWxhci5pc0RlZmluZWQoYSk/KG4uc2V0SG91cnMoYSksaihcImhcIikpOmQoITApfSxiLmJpbmQoXCJibHVyXCIsZnVuY3Rpb24oKXshYS5pbnZhbGlkSG91cnMmJmEuaG91cnM8MTAmJmEuJGFwcGx5KGZ1bmN0aW9uKCl7YS5ob3Vycz1pKGEuaG91cnMpfSl9KSxhLnVwZGF0ZU1pbnV0ZXM9ZnVuY3Rpb24oKXt2YXIgYT1oKCk7YW5ndWxhci5pc0RlZmluZWQoYSk/KG4uc2V0TWludXRlcyhhKSxqKFwibVwiKSk6ZCh2b2lkIDAsITApfSxjLmJpbmQoXCJibHVyXCIsZnVuY3Rpb24oKXshYS5pbnZhbGlkTWludXRlcyYmYS5taW51dGVzPDEwJiZhLiRhcHBseShmdW5jdGlvbigpe2EubWludXRlcz1pKGEubWludXRlcyl9KX0pfSx0aGlzLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBhPW8uJG1vZGVsVmFsdWU/bmV3IERhdGUoby4kbW9kZWxWYWx1ZSk6bnVsbDtpc05hTihhKT8oby4kc2V0VmFsaWRpdHkoXCJ0aW1lXCIsITEpLGQuZXJyb3IoJ1RpbWVwaWNrZXIgZGlyZWN0aXZlOiBcIm5nLW1vZGVsXCIgdmFsdWUgbXVzdCBiZSBhIERhdGUgb2JqZWN0LCBhIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMDEuMDEuMTk3MCBvciBhIHN0cmluZyByZXByZXNlbnRpbmcgYW4gUkZDMjgyMiBvciBJU08gODYwMSBkYXRlLicpKTooYSYmKG49YSksaygpLGwoKSl9LGEuaW5jcmVtZW50SG91cnM9ZnVuY3Rpb24oKXttKDYwKnEpfSxhLmRlY3JlbWVudEhvdXJzPWZ1bmN0aW9uKCl7bSg2MCotcSl9LGEuaW5jcmVtZW50TWludXRlcz1mdW5jdGlvbigpe20ocil9LGEuZGVjcmVtZW50TWludXRlcz1mdW5jdGlvbigpe20oLXIpfSxhLnRvZ2dsZU1lcmlkaWFuPWZ1bmN0aW9uKCl7bSg3MjAqKG4uZ2V0SG91cnMoKTwxMj8xOi0xKSl9fV0pLmRpcmVjdGl2ZShcInRpbWVwaWNrZXJcIixmdW5jdGlvbigpe3JldHVybntyZXN0cmljdDpcIkVBXCIscmVxdWlyZTpbXCJ0aW1lcGlja2VyXCIsXCI/Xm5nTW9kZWxcIl0sY29udHJvbGxlcjpcIlRpbWVwaWNrZXJDb250cm9sbGVyXCIscmVwbGFjZTohMCxzY29wZTp7fSx0ZW1wbGF0ZVVybDpcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsbGluazpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1kWzBdLGY9ZFsxXTtmJiZlLmluaXQoZixiLmZpbmQoXCJpbnB1dFwiKSl9fX0pLGFuZ3VsYXIubW9kdWxlKFwidWkuYm9vdHN0cmFwLnR5cGVhaGVhZFwiLFtcInVpLmJvb3RzdHJhcC5wb3NpdGlvblwiLFwidWkuYm9vdHN0cmFwLmJpbmRIdG1sXCJdKS5mYWN0b3J5KFwidHlwZWFoZWFkUGFyc2VyXCIsW1wiJHBhcnNlXCIsZnVuY3Rpb24oYSl7dmFyIGI9L15cXHMqKC4qPykoPzpcXHMrYXNcXHMrKC4qPykpP1xccytmb3JcXHMrKD86KFtcXCRcXHddW1xcJFxcd1xcZF0qKSlcXHMraW5cXHMrKC4qKSQvO3JldHVybntwYXJzZTpmdW5jdGlvbihjKXt2YXIgZD1jLm1hdGNoKGIpO2lmKCFkKXRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgdHlwZWFoZWFkIHNwZWNpZmljYXRpb24gaW4gZm9ybSBvZiBcIl9tb2RlbFZhbHVlXyAoYXMgX2xhYmVsXyk/IGZvciBfaXRlbV8gaW4gX2NvbGxlY3Rpb25fXCIgYnV0IGdvdCBcIicrYysnXCIuJyk7cmV0dXJue2l0ZW1OYW1lOmRbM10sc291cmNlOmEoZFs0XSksdmlld01hcHBlcjphKGRbMl18fGRbMV0pLG1vZGVsTWFwcGVyOmEoZFsxXSl9fX19XSkuZGlyZWN0aXZlKFwidHlwZWFoZWFkXCIsW1wiJGNvbXBpbGVcIixcIiRwYXJzZVwiLFwiJHFcIixcIiR0aW1lb3V0XCIsXCIkZG9jdW1lbnRcIixcIiRwb3NpdGlvblwiLFwidHlwZWFoZWFkUGFyc2VyXCIsZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9WzksMTMsMjcsMzgsNDBdO3JldHVybntyZXF1aXJlOlwibmdNb2RlbFwiLGxpbms6ZnVuY3Rpb24oaSxqLGssbCl7dmFyIG0sbj1pLiRldmFsKGsudHlwZWFoZWFkTWluTGVuZ3RoKXx8MSxvPWkuJGV2YWwoay50eXBlYWhlYWRXYWl0TXMpfHwwLHA9aS4kZXZhbChrLnR5cGVhaGVhZEVkaXRhYmxlKSE9PSExLHE9YihrLnR5cGVhaGVhZExvYWRpbmcpLmFzc2lnbnx8YW5ndWxhci5ub29wLHI9YihrLnR5cGVhaGVhZE9uU2VsZWN0KSxzPWsudHlwZWFoZWFkSW5wdXRGb3JtYXR0ZXI/YihrLnR5cGVhaGVhZElucHV0Rm9ybWF0dGVyKTp2b2lkIDAsdD1rLnR5cGVhaGVhZEFwcGVuZFRvQm9keT9pLiRldmFsKGsudHlwZWFoZWFkQXBwZW5kVG9Cb2R5KTohMSx1PWIoay5uZ01vZGVsKS5hc3NpZ24sdj1nLnBhcnNlKGsudHlwZWFoZWFkKSx3PWkuJG5ldygpO2kuJG9uKFwiJGRlc3Ryb3lcIixmdW5jdGlvbigpe3cuJGRlc3Ryb3koKX0pO3ZhciB4PVwidHlwZWFoZWFkLVwiK3cuJGlkK1wiLVwiK01hdGguZmxvb3IoMWU0Kk1hdGgucmFuZG9tKCkpO2ouYXR0cih7XCJhcmlhLWF1dG9jb21wbGV0ZVwiOlwibGlzdFwiLFwiYXJpYS1leHBhbmRlZFwiOiExLFwiYXJpYS1vd25zXCI6eH0pO3ZhciB5PWFuZ3VsYXIuZWxlbWVudChcIjxkaXYgdHlwZWFoZWFkLXBvcHVwPjwvZGl2PlwiKTt5LmF0dHIoe2lkOngsbWF0Y2hlczpcIm1hdGNoZXNcIixhY3RpdmU6XCJhY3RpdmVJZHhcIixzZWxlY3Q6XCJzZWxlY3QoYWN0aXZlSWR4KVwiLHF1ZXJ5OlwicXVlcnlcIixwb3NpdGlvbjpcInBvc2l0aW9uXCJ9KSxhbmd1bGFyLmlzRGVmaW5lZChrLnR5cGVhaGVhZFRlbXBsYXRlVXJsKSYmeS5hdHRyKFwidGVtcGxhdGUtdXJsXCIsay50eXBlYWhlYWRUZW1wbGF0ZVVybCk7dmFyIHo9ZnVuY3Rpb24oKXt3Lm1hdGNoZXM9W10sdy5hY3RpdmVJZHg9LTEsai5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKX0sQT1mdW5jdGlvbihhKXtyZXR1cm4geCtcIi1vcHRpb24tXCIrYX07dy4kd2F0Y2goXCJhY3RpdmVJZHhcIixmdW5jdGlvbihhKXswPmE/ai5yZW1vdmVBdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIpOmouYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLEEoYSkpfSk7dmFyIEI9ZnVuY3Rpb24oYSl7dmFyIGI9eyR2aWV3VmFsdWU6YX07cShpLCEwKSxjLndoZW4odi5zb3VyY2UoaSxiKSkudGhlbihmdW5jdGlvbihjKXt2YXIgZD1hPT09bC4kdmlld1ZhbHVlO2lmKGQmJm0paWYoYy5sZW5ndGg+MCl7dy5hY3RpdmVJZHg9MCx3Lm1hdGNoZXMubGVuZ3RoPTA7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspYlt2Lml0ZW1OYW1lXT1jW2VdLHcubWF0Y2hlcy5wdXNoKHtpZDpBKGUpLGxhYmVsOnYudmlld01hcHBlcih3LGIpLG1vZGVsOmNbZV19KTt3LnF1ZXJ5PWEsdy5wb3NpdGlvbj10P2Yub2Zmc2V0KGopOmYucG9zaXRpb24oaiksdy5wb3NpdGlvbi50b3A9dy5wb3NpdGlvbi50b3Arai5wcm9wKFwib2Zmc2V0SGVpZ2h0XCIpLGouYXR0cihcImFyaWEtZXhwYW5kZWRcIiwhMCl9ZWxzZSB6KCk7ZCYmcShpLCExKX0sZnVuY3Rpb24oKXt6KCkscShpLCExKX0pfTt6KCksdy5xdWVyeT12b2lkIDA7dmFyIEM7bC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uKGEpe3JldHVybiBtPSEwLGEmJmEubGVuZ3RoPj1uP28+MD8oQyYmZC5jYW5jZWwoQyksQz1kKGZ1bmN0aW9uKCl7QihhKX0sbykpOkIoYSk6KHEoaSwhMSkseigpKSxwP2E6YT92b2lkIGwuJHNldFZhbGlkaXR5KFwiZWRpdGFibGVcIiwhMSk6KGwuJHNldFZhbGlkaXR5KFwiZWRpdGFibGVcIiwhMCksYSl9KSxsLiRmb3JtYXR0ZXJzLnB1c2goZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXt9O3JldHVybiBzPyhkLiRtb2RlbD1hLHMoaSxkKSk6KGRbdi5pdGVtTmFtZV09YSxiPXYudmlld01hcHBlcihpLGQpLGRbdi5pdGVtTmFtZV09dm9pZCAwLGM9di52aWV3TWFwcGVyKGksZCksYiE9PWM/YjphKX0pLHcuc2VsZWN0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZT17fTtlW3YuaXRlbU5hbWVdPWM9dy5tYXRjaGVzW2FdLm1vZGVsLGI9di5tb2RlbE1hcHBlcihpLGUpLHUoaSxiKSxsLiRzZXRWYWxpZGl0eShcImVkaXRhYmxlXCIsITApLHIoaSx7JGl0ZW06YywkbW9kZWw6YiwkbGFiZWw6di52aWV3TWFwcGVyKGksZSl9KSx6KCksZChmdW5jdGlvbigpe2pbMF0uZm9jdXMoKX0sMCwhMSl9LGouYmluZChcImtleWRvd25cIixmdW5jdGlvbihhKXswIT09dy5tYXRjaGVzLmxlbmd0aCYmLTEhPT1oLmluZGV4T2YoYS53aGljaCkmJihhLnByZXZlbnREZWZhdWx0KCksNDA9PT1hLndoaWNoPyh3LmFjdGl2ZUlkeD0ody5hY3RpdmVJZHgrMSkldy5tYXRjaGVzLmxlbmd0aCx3LiRkaWdlc3QoKSk6Mzg9PT1hLndoaWNoPyh3LmFjdGl2ZUlkeD0ody5hY3RpdmVJZHg/dy5hY3RpdmVJZHg6dy5tYXRjaGVzLmxlbmd0aCktMSx3LiRkaWdlc3QoKSk6MTM9PT1hLndoaWNofHw5PT09YS53aGljaD93LiRhcHBseShmdW5jdGlvbigpe3cuc2VsZWN0KHcuYWN0aXZlSWR4KX0pOjI3PT09YS53aGljaCYmKGEuc3RvcFByb3BhZ2F0aW9uKCkseigpLHcuJGRpZ2VzdCgpKSl9KSxqLmJpbmQoXCJibHVyXCIsZnVuY3Rpb24oKXttPSExfSk7dmFyIEQ9ZnVuY3Rpb24oYSl7alswXSE9PWEudGFyZ2V0JiYoeigpLHcuJGRpZ2VzdCgpKX07ZS5iaW5kKFwiY2xpY2tcIixEKSxpLiRvbihcIiRkZXN0cm95XCIsZnVuY3Rpb24oKXtlLnVuYmluZChcImNsaWNrXCIsRCl9KTt2YXIgRT1hKHkpKHcpO3Q/ZS5maW5kKFwiYm9keVwiKS5hcHBlbmQoRSk6ai5hZnRlcihFKX19fV0pLmRpcmVjdGl2ZShcInR5cGVhaGVhZFBvcHVwXCIsZnVuY3Rpb24oKXtyZXR1cm57cmVzdHJpY3Q6XCJFQVwiLHNjb3BlOnttYXRjaGVzOlwiPVwiLHF1ZXJ5OlwiPVwiLGFjdGl2ZTpcIj1cIixwb3NpdGlvbjpcIj1cIixzZWxlY3Q6XCImXCJ9LHJlcGxhY2U6ITAsdGVtcGxhdGVVcmw6XCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLXBvcHVwLmh0bWxcIixsaW5rOmZ1bmN0aW9uKGEsYixjKXthLnRlbXBsYXRlVXJsPWMudGVtcGxhdGVVcmwsYS5pc09wZW49ZnVuY3Rpb24oKXtyZXR1cm4gYS5tYXRjaGVzLmxlbmd0aD4wfSxhLmlzQWN0aXZlPWZ1bmN0aW9uKGIpe3JldHVybiBhLmFjdGl2ZT09Yn0sYS5zZWxlY3RBY3RpdmU9ZnVuY3Rpb24oYil7YS5hY3RpdmU9Yn0sYS5zZWxlY3RNYXRjaD1mdW5jdGlvbihiKXthLnNlbGVjdCh7YWN0aXZlSWR4OmJ9KX19fX0pLmRpcmVjdGl2ZShcInR5cGVhaGVhZE1hdGNoXCIsW1wiJGh0dHBcIixcIiR0ZW1wbGF0ZUNhY2hlXCIsXCIkY29tcGlsZVwiLFwiJHBhcnNlXCIsZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJue3Jlc3RyaWN0OlwiRUFcIixzY29wZTp7aW5kZXg6XCI9XCIsbWF0Y2g6XCI9XCIscXVlcnk6XCI9XCJ9LGxpbms6ZnVuY3Rpb24oZSxmLGcpe3ZhciBoPWQoZy50ZW1wbGF0ZVVybCkoZS4kcGFyZW50KXx8XCJ0ZW1wbGF0ZS90eXBlYWhlYWQvdHlwZWFoZWFkLW1hdGNoLmh0bWxcIjthLmdldChoLHtjYWNoZTpifSkuc3VjY2VzcyhmdW5jdGlvbihhKXtmLnJlcGxhY2VXaXRoKGMoYS50cmltKCkpKGUpKX0pfX19XSkuZmlsdGVyKFwidHlwZWFoZWFkSGlnaGxpZ2h0XCIsZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3JldHVybiBhLnJlcGxhY2UoLyhbLj8qK14kW1xcXVxcXFwoKXt9fC1dKS9nLFwiXFxcXCQxXCIpfXJldHVybiBmdW5jdGlvbihiLGMpe3JldHVybiBjPyhcIlwiK2IpLnJlcGxhY2UobmV3IFJlZ0V4cChhKGMpLFwiZ2lcIiksXCI8c3Ryb25nPiQmPC9zdHJvbmc+XCIpOmJ9fSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9hY2NvcmRpb24vYWNjb3JkaW9uLWdyb3VwLmh0bWxcIiwnPGRpdiBjbGFzcz1cInBhbmVsIHBhbmVsLWRlZmF1bHRcIj5cXG4gIDxkaXYgY2xhc3M9XCJwYW5lbC1oZWFkaW5nXCI+XFxuICAgIDxoNCBjbGFzcz1cInBhbmVsLXRpdGxlXCI+XFxuICAgICAgPGEgY2xhc3M9XCJhY2NvcmRpb24tdG9nZ2xlXCIgbmctY2xpY2s9XCJ0b2dnbGVPcGVuKClcIiBhY2NvcmRpb24tdHJhbnNjbHVkZT1cImhlYWRpbmdcIj48c3BhbiBuZy1jbGFzcz1cIntcXCd0ZXh0LW11dGVkXFwnOiBpc0Rpc2FibGVkfVwiPnt7aGVhZGluZ319PC9zcGFuPjwvYT5cXG4gICAgPC9oND5cXG4gIDwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cInBhbmVsLWNvbGxhcHNlXCIgY29sbGFwc2U9XCIhaXNPcGVuXCI+XFxuXHQgIDxkaXYgY2xhc3M9XCJwYW5lbC1ib2R5XCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvYWNjb3JkaW9uL2FjY29yZGlvbi5odG1sXCIsJzxkaXYgY2xhc3M9XCJwYW5lbC1ncm91cFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9hbGVydC9hbGVydC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvYWxlcnQvYWxlcnQuaHRtbFwiLCc8ZGl2IGNsYXNzPVwiYWxlcnRcIiBuZy1jbGFzcz1cIntcXCdhbGVydC17e3R5cGUgfHwgXFwnd2FybmluZ1xcJ319XFwnOiB0cnVlLCBcXCdhbGVydC1kaXNtaXNzYWJsZVxcJzogY2xvc2VhYmxlfVwiIHJvbGU9XCJhbGVydFwiPlxcbiAgICA8YnV0dG9uIG5nLXNob3c9XCJjbG9zZWFibGVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZVwiIG5nLWNsaWNrPVwiY2xvc2UoKVwiPlxcbiAgICAgICAgPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+JnRpbWVzOzwvc3Bhbj5cXG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPkNsb3NlPC9zcGFuPlxcbiAgICA8L2J1dHRvbj5cXG4gICAgPGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvY2Fyb3VzZWwvY2Fyb3VzZWwuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWxcIiwnPGRpdiBuZy1tb3VzZWVudGVyPVwicGF1c2UoKVwiIG5nLW1vdXNlbGVhdmU9XCJwbGF5KClcIiBjbGFzcz1cImNhcm91c2VsXCIgbmctc3dpcGUtcmlnaHQ9XCJwcmV2KClcIiBuZy1zd2lwZS1sZWZ0PVwibmV4dCgpXCI+XFxuICAgIDxvbCBjbGFzcz1cImNhcm91c2VsLWluZGljYXRvcnNcIiBuZy1zaG93PVwic2xpZGVzLmxlbmd0aCA+IDFcIj5cXG4gICAgICAgIDxsaSBuZy1yZXBlYXQ9XCJzbGlkZSBpbiBzbGlkZXMgdHJhY2sgYnkgJGluZGV4XCIgbmctY2xhc3M9XCJ7YWN0aXZlOiBpc0FjdGl2ZShzbGlkZSl9XCIgbmctY2xpY2s9XCJzZWxlY3Qoc2xpZGUpXCI+PC9saT5cXG4gICAgPC9vbD5cXG4gICAgPGRpdiBjbGFzcz1cImNhcm91c2VsLWlubmVyXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG4gICAgPGEgY2xhc3M9XCJsZWZ0IGNhcm91c2VsLWNvbnRyb2xcIiBuZy1jbGljaz1cInByZXYoKVwiIG5nLXNob3c9XCJzbGlkZXMubGVuZ3RoID4gMVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWxlZnRcIj48L3NwYW4+PC9hPlxcbiAgICA8YSBjbGFzcz1cInJpZ2h0IGNhcm91c2VsLWNvbnRyb2xcIiBuZy1jbGljaz1cIm5leHQoKVwiIG5nLXNob3c9XCJzbGlkZXMubGVuZ3RoID4gMVwiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9zcGFuPjwvYT5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2Nhcm91c2VsL3NsaWRlLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9jYXJvdXNlbC9zbGlkZS5odG1sXCIsXCI8ZGl2IG5nLWNsYXNzPVxcXCJ7XFxuICAgICdhY3RpdmUnOiBsZWF2aW5nIHx8IChhY3RpdmUgJiYgIWVudGVyaW5nKSxcXG4gICAgJ3ByZXYnOiAobmV4dCB8fCBhY3RpdmUpICYmIGRpcmVjdGlvbj09J3ByZXYnLFxcbiAgICAnbmV4dCc6IChuZXh0IHx8IGFjdGl2ZSkgJiYgZGlyZWN0aW9uPT0nbmV4dCcsXFxuICAgICdyaWdodCc6IGRpcmVjdGlvbj09J3ByZXYnLFxcbiAgICAnbGVmdCc6IGRpcmVjdGlvbj09J25leHQnXFxuICB9XFxcIiBjbGFzcz1cXFwiaXRlbSB0ZXh0LWNlbnRlclxcXCIgbmctdHJhbnNjbHVkZT48L2Rpdj5cXG5cIil9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RhdGVwaWNrZXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvZGF0ZXBpY2tlci5odG1sXCIsJzxkaXYgbmctc3dpdGNoPVwiZGF0ZXBpY2tlck1vZGVcIiByb2xlPVwiYXBwbGljYXRpb25cIiBuZy1rZXlkb3duPVwia2V5ZG93bigkZXZlbnQpXCI+XFxuICA8ZGF5cGlja2VyIG5nLXN3aXRjaC13aGVuPVwiZGF5XCIgdGFiaW5kZXg9XCIwXCI+PC9kYXlwaWNrZXI+XFxuICA8bW9udGhwaWNrZXIgbmctc3dpdGNoLXdoZW49XCJtb250aFwiIHRhYmluZGV4PVwiMFwiPjwvbW9udGhwaWNrZXI+XFxuICA8eWVhcnBpY2tlciBuZy1zd2l0Y2gtd2hlbj1cInllYXJcIiB0YWJpbmRleD1cIjBcIj48L3llYXJwaWNrZXI+XFxuPC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL2RheS5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvZGF0ZXBpY2tlci9kYXkuaHRtbFwiLCc8dGFibGUgcm9sZT1cImdyaWRcIiBhcmlhLWxhYmVsbGVkYnk9XCJ7e3VuaXF1ZUlkfX0tdGl0bGVcIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9XCJ7e2FjdGl2ZURhdGVJZH19XCI+XFxuICA8dGhlYWQ+XFxuICAgIDx0cj5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwibW92ZSgtMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aCBjb2xzcGFuPVwie3s1ICsgc2hvd1dlZWtzfX1cIj48YnV0dG9uIGlkPVwie3t1bmlxdWVJZH19LXRpdGxlXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgbmctY2xpY2s9XCJ0b2dnbGVNb2RlKClcIiB0YWJpbmRleD1cIi0xXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHRcIiBuZy1jbGljaz1cIm1vdmUoMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgPC90cj5cXG4gICAgPHRyPlxcbiAgICAgIDx0aCBuZy1zaG93PVwic2hvd1dlZWtzXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPjwvdGg+XFxuICAgICAgPHRoIG5nLXJlcGVhdD1cImxhYmVsIGluIGxhYmVscyB0cmFjayBieSAkaW5kZXhcIiBjbGFzcz1cInRleHQtY2VudGVyXCI+PHNtYWxsIGFyaWEtbGFiZWw9XCJ7e2xhYmVsLmZ1bGx9fVwiPnt7bGFiZWwuYWJicn19PC9zbWFsbD48L3RoPlxcbiAgICA8L3RyPlxcbiAgPC90aGVhZD5cXG4gIDx0Ym9keT5cXG4gICAgPHRyIG5nLXJlcGVhdD1cInJvdyBpbiByb3dzIHRyYWNrIGJ5ICRpbmRleFwiPlxcbiAgICAgIDx0ZCBuZy1zaG93PVwic2hvd1dlZWtzXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlciBoNlwiPjxlbT57eyB3ZWVrTnVtYmVyc1skaW5kZXhdIH19PC9lbT48L3RkPlxcbiAgICAgIDx0ZCBuZy1yZXBlYXQ9XCJkdCBpbiByb3cgdHJhY2sgYnkgZHQuZGF0ZVwiIGNsYXNzPVwidGV4dC1jZW50ZXJcIiByb2xlPVwiZ3JpZGNlbGxcIiBpZD1cInt7ZHQudWlkfX1cIiBhcmlhLWRpc2FibGVkPVwie3shIWR0LmRpc2FibGVkfX1cIj5cXG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc21cIiBuZy1jbGFzcz1cIntcXCdidG4taW5mb1xcJzogZHQuc2VsZWN0ZWQsIGFjdGl2ZTogaXNBY3RpdmUoZHQpfVwiIG5nLWNsaWNrPVwic2VsZWN0KGR0LmRhdGUpXCIgbmctZGlzYWJsZWQ9XCJkdC5kaXNhYmxlZFwiIHRhYmluZGV4PVwiLTFcIj48c3BhbiBuZy1jbGFzcz1cIntcXCd0ZXh0LW11dGVkXFwnOiBkdC5zZWNvbmRhcnksIFxcJ3RleHQtaW5mb1xcJzogZHQuY3VycmVudH1cIj57e2R0LmxhYmVsfX08L3NwYW4+PC9idXR0b24+XFxuICAgICAgPC90ZD5cXG4gICAgPC90cj5cXG4gIDwvdGJvZHk+XFxuPC90YWJsZT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIvbW9udGguaHRtbFwiLCc8dGFibGUgcm9sZT1cImdyaWRcIiBhcmlhLWxhYmVsbGVkYnk9XCJ7e3VuaXF1ZUlkfX0tdGl0bGVcIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9XCJ7e2FjdGl2ZURhdGVJZH19XCI+XFxuICA8dGhlYWQ+XFxuICAgIDx0cj5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtbGVmdFwiIG5nLWNsaWNrPVwibW92ZSgtMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tbGVmdFwiPjwvaT48L2J1dHRvbj48L3RoPlxcbiAgICAgIDx0aD48YnV0dG9uIGlkPVwie3t1bmlxdWVJZH19LXRpdGxlXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBhcmlhLWF0b21pYz1cInRydWVcIiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtXCIgbmctY2xpY2s9XCJ0b2dnbGVNb2RlKClcIiB0YWJpbmRleD1cIi0xXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiPjxzdHJvbmc+e3t0aXRsZX19PC9zdHJvbmc+PC9idXR0b24+PC90aD5cXG4gICAgICA8dGg+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgYnRuLXNtIHB1bGwtcmlnaHRcIiBuZy1jbGljaz1cIm1vdmUoMSlcIiB0YWJpbmRleD1cIi0xXCI+PGkgY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tcmlnaHRcIj48L2k+PC9idXR0b24+PC90aD5cXG4gICAgPC90cj5cXG4gIDwvdGhlYWQ+XFxuICA8dGJvZHk+XFxuICAgIDx0ciBuZy1yZXBlYXQ9XCJyb3cgaW4gcm93cyB0cmFjayBieSAkaW5kZXhcIj5cXG4gICAgICA8dGQgbmctcmVwZWF0PVwiZHQgaW4gcm93IHRyYWNrIGJ5IGR0LmRhdGVcIiBjbGFzcz1cInRleHQtY2VudGVyXCIgcm9sZT1cImdyaWRjZWxsXCIgaWQ9XCJ7e2R0LnVpZH19XCIgYXJpYS1kaXNhYmxlZD1cInt7ISFkdC5kaXNhYmxlZH19XCI+XFxuICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBzdHlsZT1cIndpZHRoOjEwMCU7XCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHRcIiBuZy1jbGFzcz1cIntcXCdidG4taW5mb1xcJzogZHQuc2VsZWN0ZWQsIGFjdGl2ZTogaXNBY3RpdmUoZHQpfVwiIG5nLWNsaWNrPVwic2VsZWN0KGR0LmRhdGUpXCIgbmctZGlzYWJsZWQ9XCJkdC5kaXNhYmxlZFwiIHRhYmluZGV4PVwiLTFcIj48c3BhbiBuZy1jbGFzcz1cIntcXCd0ZXh0LWluZm9cXCc6IGR0LmN1cnJlbnR9XCI+e3tkdC5sYWJlbH19PC9zcGFuPjwvYnV0dG9uPlxcbiAgICAgIDwvdGQ+XFxuICAgIDwvdHI+XFxuICA8L3Rib2R5PlxcbjwvdGFibGU+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3BvcHVwLmh0bWxcIiwnPHVsIGNsYXNzPVwiZHJvcGRvd24tbWVudVwiIG5nLXN0eWxlPVwie2Rpc3BsYXk6IChpc09wZW4gJiYgXFwnYmxvY2tcXCcpIHx8IFxcJ25vbmVcXCcsIHRvcDogcG9zaXRpb24udG9wK1xcJ3B4XFwnLCBsZWZ0OiBwb3NpdGlvbi5sZWZ0K1xcJ3B4XFwnfVwiIG5nLWtleWRvd249XCJrZXlkb3duKCRldmVudClcIj5cXG5cdDxsaSBuZy10cmFuc2NsdWRlPjwvbGk+XFxuXHQ8bGkgbmctaWY9XCJzaG93QnV0dG9uQmFyXCIgc3R5bGU9XCJwYWRkaW5nOjEwcHggOXB4IDJweFwiPlxcblx0XHQ8c3BhbiBjbGFzcz1cImJ0bi1ncm91cFwiPlxcblx0XHRcdDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4taW5mb1wiIG5nLWNsaWNrPVwic2VsZWN0KFxcJ3RvZGF5XFwnKVwiPnt7IGdldFRleHQoXFwnY3VycmVudFxcJykgfX08L2J1dHRvbj5cXG5cdFx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLWRhbmdlclwiIG5nLWNsaWNrPVwic2VsZWN0KG51bGwpXCI+e3sgZ2V0VGV4dChcXCdjbGVhclxcJykgfX08L2J1dHRvbj5cXG5cdFx0PC9zcGFuPlxcblx0XHQ8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLXN1Y2Nlc3MgcHVsbC1yaWdodFwiIG5nLWNsaWNrPVwiY2xvc2UoKVwiPnt7IGdldFRleHQoXFwnY2xvc2VcXCcpIH19PC9idXR0b24+XFxuXHQ8L2xpPlxcbjwvdWw+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9kYXRlcGlja2VyL3llYXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL2RhdGVwaWNrZXIveWVhci5odG1sXCIsJzx0YWJsZSByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cInt7dW5pcXVlSWR9fS10aXRsZVwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cInt7YWN0aXZlRGF0ZUlkfX1cIj5cXG4gIDx0aGVhZD5cXG4gICAgPHRyPlxcbiAgICAgIDx0aD48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tZGVmYXVsdCBidG4tc20gcHVsbC1sZWZ0XCIgbmctY2xpY2s9XCJtb3ZlKC0xKVwiIHRhYmluZGV4PVwiLTFcIj48aSBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1sZWZ0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgICAgPHRoIGNvbHNwYW49XCIzXCI+PGJ1dHRvbiBpZD1cInt7dW5pcXVlSWR9fS10aXRsZVwiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCIgYXJpYS1hdG9taWM9XCJ0cnVlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbVwiIG5nLWNsaWNrPVwidG9nZ2xlTW9kZSgpXCIgdGFiaW5kZXg9XCItMVwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIj48c3Ryb25nPnt7dGl0bGV9fTwvc3Ryb25nPjwvYnV0dG9uPjwvdGg+XFxuICAgICAgPHRoPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0IGJ0bi1zbSBwdWxsLXJpZ2h0XCIgbmctY2xpY2s9XCJtb3ZlKDEpXCIgdGFiaW5kZXg9XCItMVwiPjxpIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvYnV0dG9uPjwvdGg+XFxuICAgIDwvdHI+XFxuICA8L3RoZWFkPlxcbiAgPHRib2R5PlxcbiAgICA8dHIgbmctcmVwZWF0PVwicm93IGluIHJvd3MgdHJhY2sgYnkgJGluZGV4XCI+XFxuICAgICAgPHRkIG5nLXJlcGVhdD1cImR0IGluIHJvdyB0cmFjayBieSBkdC5kYXRlXCIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiIHJvbGU9XCJncmlkY2VsbFwiIGlkPVwie3tkdC51aWR9fVwiIGFyaWEtZGlzYWJsZWQ9XCJ7eyEhZHQuZGlzYWJsZWR9fVwiPlxcbiAgICAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgc3R5bGU9XCJ3aWR0aDoxMDAlO1wiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgbmctY2xhc3M9XCJ7XFwnYnRuLWluZm9cXCc6IGR0LnNlbGVjdGVkLCBhY3RpdmU6IGlzQWN0aXZlKGR0KX1cIiBuZy1jbGljaz1cInNlbGVjdChkdC5kYXRlKVwiIG5nLWRpc2FibGVkPVwiZHQuZGlzYWJsZWRcIiB0YWJpbmRleD1cIi0xXCI+PHNwYW4gbmctY2xhc3M9XCJ7XFwndGV4dC1pbmZvXFwnOiBkdC5jdXJyZW50fVwiPnt7ZHQubGFiZWx9fTwvc3Bhbj48L2J1dHRvbj5cXG4gICAgICA8L3RkPlxcbiAgICA8L3RyPlxcbiAgPC90Ym9keT5cXG48L3RhYmxlPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvbW9kYWwvYmFja2Ryb3AuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL21vZGFsL2JhY2tkcm9wLmh0bWxcIiwnPGRpdiBjbGFzcz1cIm1vZGFsLWJhY2tkcm9wIGZhZGVcIlxcbiAgICAgbmctY2xhc3M9XCJ7aW46IGFuaW1hdGV9XCJcXG4gICAgIG5nLXN0eWxlPVwie1xcJ3otaW5kZXhcXCc6IDEwNDAgKyAoaW5kZXggJiYgMSB8fCAwKSArIGluZGV4KjEwfVwiXFxuPjwvZGl2PlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvbW9kYWwvd2luZG93Lmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9tb2RhbC93aW5kb3cuaHRtbFwiLCc8ZGl2IHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCIgY2xhc3M9XCJtb2RhbCBmYWRlXCIgbmctY2xhc3M9XCJ7aW46IGFuaW1hdGV9XCIgbmctc3R5bGU9XCJ7XFwnei1pbmRleFxcJzogMTA1MCArIGluZGV4KjEwLCBkaXNwbGF5OiBcXCdibG9ja1xcJ31cIiBuZy1jbGljaz1cImNsb3NlKCRldmVudClcIj5cXG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWRpYWxvZ1wiIG5nLWNsYXNzPVwie1xcJ21vZGFsLXNtXFwnOiBzaXplID09IFxcJ3NtXFwnLCBcXCdtb2RhbC1sZ1xcJzogc2l6ZSA9PSBcXCdsZ1xcJ31cIj48ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiIG5nLXRyYW5zY2x1ZGU+PC9kaXY+PC9kaXY+XFxuPC9kaXY+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2VyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2VyLmh0bWxcIiwnPHVsIGNsYXNzPVwicGFnZXJcIj5cXG4gIDxsaSBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9QcmV2aW91cygpLCBwcmV2aW91czogYWxpZ259XCI+PGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdFBhZ2UocGFnZSAtIDEpXCI+e3tnZXRUZXh0KFxcJ3ByZXZpb3VzXFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpLCBuZXh0OiBhbGlnbn1cIj48YSBocmVmIG5nLWNsaWNrPVwic2VsZWN0UGFnZShwYWdlICsgMSlcIj57e2dldFRleHQoXFwnbmV4dFxcJyl9fTwvYT48L2xpPlxcbjwvdWw+Jyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wYWdpbmF0aW9uL3BhZ2luYXRpb24uaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3BhZ2luYXRpb24vcGFnaW5hdGlvbi5odG1sXCIsJzx1bCBjbGFzcz1cInBhZ2luYXRpb25cIj5cXG4gIDxsaSBuZy1pZj1cImJvdW5kYXJ5TGlua3NcIiBuZy1jbGFzcz1cIntkaXNhYmxlZDogbm9QcmV2aW91cygpfVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKDEpXCI+e3tnZXRUZXh0KFxcJ2ZpcnN0XFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctaWY9XCJkaXJlY3Rpb25MaW5rc1wiIG5nLWNsYXNzPVwie2Rpc2FibGVkOiBub1ByZXZpb3VzKCl9XCI+PGEgaHJlZiBuZy1jbGljaz1cInNlbGVjdFBhZ2UocGFnZSAtIDEpXCI+e3tnZXRUZXh0KFxcJ3ByZXZpb3VzXFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctcmVwZWF0PVwicGFnZSBpbiBwYWdlcyB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInthY3RpdmU6IHBhZ2UuYWN0aXZlfVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHBhZ2UubnVtYmVyKVwiPnt7cGFnZS50ZXh0fX08L2E+PC9saT5cXG4gIDxsaSBuZy1pZj1cImRpcmVjdGlvbkxpbmtzXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHBhZ2UgKyAxKVwiPnt7Z2V0VGV4dChcXCduZXh0XFwnKX19PC9hPjwvbGk+XFxuICA8bGkgbmctaWY9XCJib3VuZGFyeUxpbmtzXCIgbmctY2xhc3M9XCJ7ZGlzYWJsZWQ6IG5vTmV4dCgpfVwiPjxhIGhyZWYgbmctY2xpY2s9XCJzZWxlY3RQYWdlKHRvdGFsUGFnZXMpXCI+e3tnZXRUZXh0KFxcJ2xhc3RcXCcpfX08L2E+PC9saT5cXG48L3VsPicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLWh0bWwtdW5zYWZlLXBvcHVwLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90b29sdGlwL3Rvb2x0aXAtaHRtbC11bnNhZmUtcG9wdXAuaHRtbFwiLCc8ZGl2IGNsYXNzPVwidG9vbHRpcCB7e3BsYWNlbWVudH19XCIgbmctY2xhc3M9XCJ7IGluOiBpc09wZW4oKSwgZmFkZTogYW5pbWF0aW9uKCkgfVwiPlxcbiAgPGRpdiBjbGFzcz1cInRvb2x0aXAtYXJyb3dcIj48L2Rpdj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWlubmVyXCIgYmluZC1odG1sLXVuc2FmZT1cImNvbnRlbnRcIj48L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Rvb2x0aXAvdG9vbHRpcC1wb3B1cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdG9vbHRpcC90b29sdGlwLXBvcHVwLmh0bWxcIiwnPGRpdiBjbGFzcz1cInRvb2x0aXAge3twbGFjZW1lbnR9fVwiIG5nLWNsYXNzPVwieyBpbjogaXNPcGVuKCksIGZhZGU6IGFuaW1hdGlvbigpIH1cIj5cXG4gIDxkaXYgY2xhc3M9XCJ0b29sdGlwLWFycm93XCI+PC9kaXY+XFxuICA8ZGl2IGNsYXNzPVwidG9vbHRpcC1pbm5lclwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+XFxuPC9kaXY+XFxuJyl9XSksYW5ndWxhci5tb2R1bGUoXCJ0ZW1wbGF0ZS9wb3BvdmVyL3BvcG92ZXIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3BvcG92ZXIvcG9wb3Zlci5odG1sXCIsJzxkaXYgY2xhc3M9XCJwb3BvdmVyIHt7cGxhY2VtZW50fX1cIiBuZy1jbGFzcz1cInsgaW46IGlzT3BlbigpLCBmYWRlOiBhbmltYXRpb24oKSB9XCI+XFxuICA8ZGl2IGNsYXNzPVwiYXJyb3dcIj48L2Rpdj5cXG5cXG4gIDxkaXYgY2xhc3M9XCJwb3BvdmVyLWlubmVyXCI+XFxuICAgICAgPGgzIGNsYXNzPVwicG9wb3Zlci10aXRsZVwiIG5nLWJpbmQ9XCJ0aXRsZVwiIG5nLXNob3c9XCJ0aXRsZVwiPjwvaDM+XFxuICAgICAgPGRpdiBjbGFzcz1cInBvcG92ZXItY29udGVudFwiIG5nLWJpbmQ9XCJjb250ZW50XCI+PC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL2Jhci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvYmFyLmh0bWxcIiwnPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIG5nLWNsYXNzPVwidHlwZSAmJiBcXCdwcm9ncmVzcy1iYXItXFwnICsgdHlwZVwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIGFyaWEtdmFsdWVub3c9XCJ7e3ZhbHVlfX1cIiBhcmlhLXZhbHVlbWluPVwiMFwiIGFyaWEtdmFsdWVtYXg9XCJ7e21heH19XCIgbmctc3R5bGU9XCJ7d2lkdGg6IHBlcmNlbnQgKyBcXCclXFwnfVwiIGFyaWEtdmFsdWV0ZXh0PVwie3twZXJjZW50IHwgbnVtYmVyOjB9fSVcIiBuZy10cmFuc2NsdWRlPjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3MuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzLmh0bWxcIiwnPGRpdiBjbGFzcz1cInByb2dyZXNzXCIgbmctdHJhbnNjbHVkZT48L2Rpdj4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3Byb2dyZXNzYmFyL3Byb2dyZXNzYmFyLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sXCIsJzxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiPlxcbiAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhclwiIG5nLWNsYXNzPVwidHlwZSAmJiBcXCdwcm9ncmVzcy1iYXItXFwnICsgdHlwZVwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIGFyaWEtdmFsdWVub3c9XCJ7e3ZhbHVlfX1cIiBhcmlhLXZhbHVlbWluPVwiMFwiIGFyaWEtdmFsdWVtYXg9XCJ7e21heH19XCIgbmctc3R5bGU9XCJ7d2lkdGg6IHBlcmNlbnQgKyBcXCclXFwnfVwiIGFyaWEtdmFsdWV0ZXh0PVwie3twZXJjZW50IHwgbnVtYmVyOjB9fSVcIiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcbjwvZGl2PicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvcmF0aW5nL3JhdGluZy5odG1sXCIsJzxzcGFuIG5nLW1vdXNlbGVhdmU9XCJyZXNldCgpXCIgbmcta2V5ZG93bj1cIm9uS2V5ZG93bigkZXZlbnQpXCIgdGFiaW5kZXg9XCIwXCIgcm9sZT1cInNsaWRlclwiIGFyaWEtdmFsdWVtaW49XCIwXCIgYXJpYS12YWx1ZW1heD1cInt7cmFuZ2UubGVuZ3RofX1cIiBhcmlhLXZhbHVlbm93PVwie3t2YWx1ZX19XCI+XFxuICAgIDxpIG5nLXJlcGVhdD1cInIgaW4gcmFuZ2UgdHJhY2sgYnkgJGluZGV4XCIgbmctbW91c2VlbnRlcj1cImVudGVyKCRpbmRleCArIDEpXCIgbmctY2xpY2s9XCJyYXRlKCRpbmRleCArIDEpXCIgY2xhc3M9XCJnbHlwaGljb25cIiBuZy1jbGFzcz1cIiRpbmRleCA8IHZhbHVlICYmIChyLnN0YXRlT24gfHwgXFwnZ2x5cGhpY29uLXN0YXJcXCcpIHx8IChyLnN0YXRlT2ZmIHx8IFxcJ2dseXBoaWNvbi1zdGFyLWVtcHR5XFwnKVwiPlxcbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+KHt7ICRpbmRleCA8IHZhbHVlID8gXFwnKlxcJyA6IFxcJyBcXCcgfX0pPC9zcGFuPlxcbiAgICA8L2k+XFxuPC9zcGFuPicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGFicy90YWIuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3RhYnMvdGFiLmh0bWxcIiwnPGxpIG5nLWNsYXNzPVwie2FjdGl2ZTogYWN0aXZlLCBkaXNhYmxlZDogZGlzYWJsZWR9XCI+XFxuICA8YSBuZy1jbGljaz1cInNlbGVjdCgpXCIgdGFiLWhlYWRpbmctdHJhbnNjbHVkZT57e2hlYWRpbmd9fTwvYT5cXG48L2xpPlxcbicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGFicy90YWJzZXQtdGl0bGVzLmh0bWxcIixbXSkucnVuKFtcIiR0ZW1wbGF0ZUNhY2hlXCIsZnVuY3Rpb24oYSl7YS5wdXQoXCJ0ZW1wbGF0ZS90YWJzL3RhYnNldC10aXRsZXMuaHRtbFwiLFwiPHVsIGNsYXNzPVxcXCJuYXYge3t0eXBlICYmICduYXYtJyArIHR5cGV9fVxcXCIgbmctY2xhc3M9XFxcInsnbmF2LXN0YWNrZWQnOiB2ZXJ0aWNhbH1cXFwiPlxcbjwvdWw+XFxuXCIpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdGFicy90YWJzZXQuaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3RhYnMvdGFic2V0Lmh0bWxcIiwnXFxuPGRpdj5cXG4gIDx1bCBjbGFzcz1cIm5hdiBuYXYte3t0eXBlIHx8IFxcJ3RhYnNcXCd9fVwiIG5nLWNsYXNzPVwie1xcJ25hdi1zdGFja2VkXFwnOiB2ZXJ0aWNhbCwgXFwnbmF2LWp1c3RpZmllZFxcJzoganVzdGlmaWVkfVwiIG5nLXRyYW5zY2x1ZGU+PC91bD5cXG4gIDxkaXYgY2xhc3M9XCJ0YWItY29udGVudFwiPlxcbiAgICA8ZGl2IGNsYXNzPVwidGFiLXBhbmVcIiBcXG4gICAgICAgICBuZy1yZXBlYXQ9XCJ0YWIgaW4gdGFic1wiIFxcbiAgICAgICAgIG5nLWNsYXNzPVwie2FjdGl2ZTogdGFiLmFjdGl2ZX1cIlxcbiAgICAgICAgIHRhYi1jb250ZW50LXRyYW5zY2x1ZGU9XCJ0YWJcIj5cXG4gICAgPC9kaXY+XFxuICA8L2Rpdj5cXG48L2Rpdj5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3RpbWVwaWNrZXIvdGltZXBpY2tlci5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdGltZXBpY2tlci90aW1lcGlja2VyLmh0bWxcIiwnPHRhYmxlPlxcblx0PHRib2R5Plxcblx0XHQ8dHIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxcblx0XHRcdDx0ZD48YSBuZy1jbGljaz1cImluY3JlbWVudEhvdXJzKClcIiBjbGFzcz1cImJ0biBidG4tbGlua1wiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwXCI+PC9zcGFuPjwvYT48L3RkPlxcblx0XHRcdDx0ZD4mbmJzcDs8L3RkPlxcblx0XHRcdDx0ZD48YSBuZy1jbGljaz1cImluY3JlbWVudE1pbnV0ZXMoKVwiIGNsYXNzPVwiYnRuIGJ0bi1saW5rXCI+PHNwYW4gY2xhc3M9XCJnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tdXBcIj48L3NwYW4+PC9hPjwvdGQ+XFxuXHRcdFx0PHRkIG5nLXNob3c9XCJzaG93TWVyaWRpYW5cIj48L3RkPlxcblx0XHQ8L3RyPlxcblx0XHQ8dHI+XFxuXHRcdFx0PHRkIHN0eWxlPVwid2lkdGg6NTBweDtcIiBjbGFzcz1cImZvcm0tZ3JvdXBcIiBuZy1jbGFzcz1cIntcXCdoYXMtZXJyb3JcXCc6IGludmFsaWRIb3Vyc31cIj5cXG5cdFx0XHRcdDxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwiaG91cnNcIiBuZy1jaGFuZ2U9XCJ1cGRhdGVIb3VycygpXCIgY2xhc3M9XCJmb3JtLWNvbnRyb2wgdGV4dC1jZW50ZXJcIiBuZy1tb3VzZXdoZWVsPVwiaW5jcmVtZW50SG91cnMoKVwiIG5nLXJlYWRvbmx5PVwicmVhZG9ubHlJbnB1dFwiIG1heGxlbmd0aD1cIjJcIj5cXG5cdFx0XHQ8L3RkPlxcblx0XHRcdDx0ZD46PC90ZD5cXG5cdFx0XHQ8dGQgc3R5bGU9XCJ3aWR0aDo1MHB4O1wiIGNsYXNzPVwiZm9ybS1ncm91cFwiIG5nLWNsYXNzPVwie1xcJ2hhcy1lcnJvclxcJzogaW52YWxpZE1pbnV0ZXN9XCI+XFxuXHRcdFx0XHQ8aW5wdXQgdHlwZT1cInRleHRcIiBuZy1tb2RlbD1cIm1pbnV0ZXNcIiBuZy1jaGFuZ2U9XCJ1cGRhdGVNaW51dGVzKClcIiBjbGFzcz1cImZvcm0tY29udHJvbCB0ZXh0LWNlbnRlclwiIG5nLXJlYWRvbmx5PVwicmVhZG9ubHlJbnB1dFwiIG1heGxlbmd0aD1cIjJcIj5cXG5cdFx0XHQ8L3RkPlxcblx0XHRcdDx0ZCBuZy1zaG93PVwic2hvd01lcmlkaWFuXCI+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLWRlZmF1bHQgdGV4dC1jZW50ZXJcIiBuZy1jbGljaz1cInRvZ2dsZU1lcmlkaWFuKClcIj57e21lcmlkaWFufX08L2J1dHRvbj48L3RkPlxcblx0XHQ8L3RyPlxcblx0XHQ8dHIgY2xhc3M9XCJ0ZXh0LWNlbnRlclwiPlxcblx0XHRcdDx0ZD48YSBuZy1jbGljaz1cImRlY3JlbWVudEhvdXJzKClcIiBjbGFzcz1cImJ0biBidG4tbGlua1wiPjxzcGFuIGNsYXNzPVwiZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLWRvd25cIj48L3NwYW4+PC9hPjwvdGQ+XFxuXHRcdFx0PHRkPiZuYnNwOzwvdGQ+XFxuXHRcdFx0PHRkPjxhIG5nLWNsaWNrPVwiZGVjcmVtZW50TWludXRlcygpXCIgY2xhc3M9XCJidG4gYnRuLWxpbmtcIj48c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tY2hldnJvbi1kb3duXCI+PC9zcGFuPjwvYT48L3RkPlxcblx0XHRcdDx0ZCBuZy1zaG93PVwic2hvd01lcmlkaWFuXCI+PC90ZD5cXG5cdFx0PC90cj5cXG5cdDwvdGJvZHk+XFxuPC90YWJsZT5cXG4nKX1dKSxhbmd1bGFyLm1vZHVsZShcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIixmdW5jdGlvbihhKXthLnB1dChcInRlbXBsYXRlL3R5cGVhaGVhZC90eXBlYWhlYWQtbWF0Y2guaHRtbFwiLCc8YSB0YWJpbmRleD1cIi0xXCIgYmluZC1odG1sLXVuc2FmZT1cIm1hdGNoLmxhYmVsIHwgdHlwZWFoZWFkSGlnaGxpZ2h0OnF1ZXJ5XCI+PC9hPicpfV0pLGFuZ3VsYXIubW9kdWxlKFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCIsW10pLnJ1bihbXCIkdGVtcGxhdGVDYWNoZVwiLGZ1bmN0aW9uKGEpe2EucHV0KFwidGVtcGxhdGUvdHlwZWFoZWFkL3R5cGVhaGVhZC1wb3B1cC5odG1sXCIsJzx1bCBjbGFzcz1cImRyb3Bkb3duLW1lbnVcIiBuZy1pZj1cImlzT3BlbigpXCIgbmctc3R5bGU9XCJ7dG9wOiBwb3NpdGlvbi50b3ArXFwncHhcXCcsIGxlZnQ6IHBvc2l0aW9uLmxlZnQrXFwncHhcXCd9XCIgc3R5bGU9XCJkaXNwbGF5OiBibG9jaztcIiByb2xlPVwibGlzdGJveFwiIGFyaWEtaGlkZGVuPVwie3shaXNPcGVuKCl9fVwiPlxcbiAgICA8bGkgbmctcmVwZWF0PVwibWF0Y2ggaW4gbWF0Y2hlcyB0cmFjayBieSAkaW5kZXhcIiBuZy1jbGFzcz1cInthY3RpdmU6IGlzQWN0aXZlKCRpbmRleCkgfVwiIG5nLW1vdXNlZW50ZXI9XCJzZWxlY3RBY3RpdmUoJGluZGV4KVwiIG5nLWNsaWNrPVwic2VsZWN0TWF0Y2goJGluZGV4KVwiIHJvbGU9XCJvcHRpb25cIiBpZD1cInt7bWF0Y2guaWR9fVwiPlxcbiAgICAgICAgPGRpdiB0eXBlYWhlYWQtbWF0Y2ggaW5kZXg9XCIkaW5kZXhcIiBtYXRjaD1cIm1hdGNoXCIgcXVlcnk9XCJxdWVyeVwiIHRlbXBsYXRlLXVybD1cInRlbXBsYXRlVXJsXCI+PC9kaXY+XFxuICAgIDwvbGk+XFxuPC91bD4nKVxufV0pOyIsInZhciBhbmd1bGFyU2t5Y29ucyA9IGFuZ3VsYXIubW9kdWxlKCAnYW5ndWxhci1za3ljb25zJywgW10gKTtcblxuXG5hbmd1bGFyU2t5Y29ucy5kaXJlY3RpdmUoICdza3ljb24nLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgc2NvcGU6IHtcbiAgICAgICAgICAgIGljb246IFwiPVwiLFxuICAgICAgICAgICAgc2l6ZTogXCI9XCJcbiAgICAgICAgfSxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKCBzY29wZSwgZWxlbWVudCwgYXR0cnMgKSB7XG5cbiAgICAgICAgICAgIC8vIG1ha2UgYSBjYW52YXMgZm9yIG91ciBpY29uXG4gICAgICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2NhbnZhcycgKTtcblxuICAgICAgICAgICAgLy8gc2V0IHRoZSBDU1MgY2xhc3MgZnJvbSBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGlmICggIWF0dHJzLmNsYXNzICkge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5jbGFzc05hbWUgPSBcIlwiO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYW52YXMuY2xhc3NOYW1lID0gYXR0cnMuY2xhc3M7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHNldCBkZWZhdWx0IGNvbG9yIGlmIFwiY29sb3JcIiBhdHRyaWJ1dGUgbm90IHByZXNlbnRcbiAgICAgICAgICAgIHZhciBjb25maWcgPSB7fTtcbiAgICAgICAgICAgIGlmICggIWF0dHJzLmNvbG9yICkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5jb2xvciA9IFwiYmxhY2tcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLmNvbG9yID0gYXR0cnMuY29sb3I7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBza3ljb25zID0gbmV3IFNreWNvbnMoIGNvbmZpZyApO1xuXG4gICAgICAgICAgICAvLyB3YXRjaCB0aGUgc2l6ZSBwcm9wZXJ0eSBmcm9tIHRoZSBjb250cm9sbGVyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goIFwic2l6ZVwiLCBmdW5jdGlvbiAoIG5ld1ZhbCwgb2xkVmFsICkge1xuICAgICAgICAgICAgICAgIGlmICggbmV3VmFsICkge1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gbmV3VmFsO1xuICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBuZXdWYWw7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHNjb3BlLnNpemUgfHwgNjQ7XG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IHNjb3BlLnNpemUgIHx8IDY0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHRydWUgKTtcblxuICAgICAgICAgICAgLy8gd2F0Y2ggdGhlIGljb24gcHJvcGVydHkgZnJvbSB0aGUgY29udHJvbGxlclxuICAgICAgICAgICAgc2NvcGUuJHdhdGNoKCBcImljb25cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNreWNvbnMuYWRkKCBjYW52YXMsIHNjb3BlLmljb24gKTtcbiAgICAgICAgICAgIH0sIHRydWUgKTtcblxuICAgICAgICAgICAgc2t5Y29ucy5wbGF5KCk7XG5cbiAgICAgICAgICAgIGlmICggZWxlbWVudFswXS5ub2RlVHlwZSA9PT0gOCApIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlcGxhY2VXaXRoKCBjYW52YXMgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudFswXS5hcHBlbmRDaGlsZCggY2FudmFzICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2t5Y29ucy5yZW1vdmUoY2FudmFzKTtcbiAgICAgICAgICAgICAgICBpZiAoc2t5Y29ucy5saXN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBza3ljb25zLnBhdXNlKGNhbnZhcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufSApO1xuIiwiKGZ1bmN0aW9uKGdsb2JhbCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyogU2V0IHVwIGEgUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHNoaW0gc28gd2UgY2FuIGFuaW1hdGUgZWZmaWNpZW50bHkgRk9SXG4gICAgICogR1JFQVQgSlVTVElDRS4gKi9cbiAgICB2YXIgcmVxdWVzdEludGVydmFsLCBjYW5jZWxJbnRlcnZhbDtcblxuICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJhZiA9IGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICAgfHxcbiAgICAgICAgICAgICAgICBnbG9iYWwud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG4gICAgICAgICAgICAgICAgZ2xvYmFsLm1velJlcXVlc3RBbmltYXRpb25GcmFtZSAgICB8fFxuICAgICAgICAgICAgICAgIGdsb2JhbC5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lICAgICAgfHxcbiAgICAgICAgICAgICAgICBnbG9iYWwubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgICAgICxcbiAgICAgICAgICAgIGNhZiA9IGdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZSAgICAgICAgfHxcbiAgICAgICAgICAgICAgICBnbG9iYWwud2Via2l0Q2FuY2VsQW5pbWF0aW9uRnJhbWUgIHx8XG4gICAgICAgICAgICAgICAgZ2xvYmFsLm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lICAgICB8fFxuICAgICAgICAgICAgICAgIGdsb2JhbC5vQ2FuY2VsQW5pbWF0aW9uRnJhbWUgICAgICAgfHxcbiAgICAgICAgICAgICAgICBnbG9iYWwubXNDYW5jZWxBbmltYXRpb25GcmFtZSAgICAgIDtcblxuICAgICAgICBpZihyYWYgJiYgY2FmKSB7XG4gICAgICAgICAgICByZXF1ZXN0SW50ZXJ2YWwgPSBmdW5jdGlvbihmbiwgZGVsYXkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaGFuZGxlID0ge3ZhbHVlOiBudWxsfTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGxvb3AoKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZS52YWx1ZSA9IHJhZihsb29wKTtcbiAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsb29wKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNhbmNlbEludGVydmFsID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAgICAgY2FmKGhhbmRsZS52YWx1ZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbDtcbiAgICAgICAgICAgIGNhbmNlbEludGVydmFsID0gY2xlYXJJbnRlcnZhbDtcbiAgICAgICAgfVxuICAgIH0oKSk7XG5cbiAgICAvKiBDYXRtdWxsLXJvbSBzcGxpbmUgc3R1ZmZzLiAqL1xuICAgIC8qXG4gICAgIGZ1bmN0aW9uIHVwc2FtcGxlKG4sIHNwbGluZSkge1xuICAgICB2YXIgcG9seWxpbmUgPSBbXSxcbiAgICAgbGVuID0gc3BsaW5lLmxlbmd0aCxcbiAgICAgYnggID0gc3BsaW5lWzBdLFxuICAgICBieSAgPSBzcGxpbmVbMV0sXG4gICAgIGN4ICA9IHNwbGluZVsyXSxcbiAgICAgY3kgID0gc3BsaW5lWzNdLFxuICAgICBkeCAgPSBzcGxpbmVbNF0sXG4gICAgIGR5ICA9IHNwbGluZVs1XSxcbiAgICAgaSwgaiwgYXgsIGF5LCBweCwgcXgsIHJ4LCBzeCwgcHksIHF5LCByeSwgc3ksIHQ7XG5cbiAgICAgZm9yKGkgPSA2OyBpICE9PSBzcGxpbmUubGVuZ3RoOyBpICs9IDIpIHtcbiAgICAgYXggPSBieDtcbiAgICAgYnggPSBjeDtcbiAgICAgY3ggPSBkeDtcbiAgICAgZHggPSBzcGxpbmVbaSAgICBdO1xuICAgICBweCA9IC0wLjUgKiBheCArIDEuNSAqIGJ4IC0gMS41ICogY3ggKyAwLjUgKiBkeDtcbiAgICAgcXggPSAgICAgICAgYXggLSAyLjUgKiBieCArIDIuMCAqIGN4IC0gMC41ICogZHg7XG4gICAgIHJ4ID0gLTAuNSAqIGF4ICAgICAgICAgICAgKyAwLjUgKiBjeCAgICAgICAgICAgO1xuICAgICBzeCA9ICAgICAgICAgICAgICAgICAgIGJ4ICAgICAgICAgICAgICAgICAgICAgIDtcblxuICAgICBheSA9IGJ5O1xuICAgICBieSA9IGN5O1xuICAgICBjeSA9IGR5O1xuICAgICBkeSA9IHNwbGluZVtpICsgMV07XG4gICAgIHB5ID0gLTAuNSAqIGF5ICsgMS41ICogYnkgLSAxLjUgKiBjeSArIDAuNSAqIGR5O1xuICAgICBxeSA9ICAgICAgICBheSAtIDIuNSAqIGJ5ICsgMi4wICogY3kgLSAwLjUgKiBkeTtcbiAgICAgcnkgPSAtMC41ICogYXkgICAgICAgICAgICArIDAuNSAqIGN5ICAgICAgICAgICA7XG4gICAgIHN5ID0gICAgICAgICAgICAgICAgICAgYnkgICAgICAgICAgICAgICAgICAgICAgO1xuXG4gICAgIGZvcihqID0gMDsgaiAhPT0gbjsgKytqKSB7XG4gICAgIHQgPSBqIC8gbjtcblxuICAgICBwb2x5bGluZS5wdXNoKFxuICAgICAoKHB4ICogdCArIHF4KSAqIHQgKyByeCkgKiB0ICsgc3gsXG4gICAgICgocHkgKiB0ICsgcXkpICogdCArIHJ5KSAqIHQgKyBzeVxuICAgICApO1xuICAgICB9XG4gICAgIH1cblxuICAgICBwb2x5bGluZS5wdXNoKFxuICAgICBweCArIHF4ICsgcnggKyBzeCxcbiAgICAgcHkgKyBxeSArIHJ5ICsgc3lcbiAgICAgKTtcblxuICAgICByZXR1cm4gcG9seWxpbmU7XG4gICAgIH1cblxuICAgICBmdW5jdGlvbiBkb3duc2FtcGxlKG4sIHBvbHlsaW5lKSB7XG4gICAgIHZhciBsZW4gPSAwLFxuICAgICBpLCBkeCwgZHk7XG5cbiAgICAgZm9yKGkgPSAyOyBpICE9PSBwb2x5bGluZS5sZW5ndGg7IGkgKz0gMikge1xuICAgICBkeCA9IHBvbHlsaW5lW2kgICAgXSAtIHBvbHlsaW5lW2kgLSAyXTtcbiAgICAgZHkgPSBwb2x5bGluZVtpICsgMV0gLSBwb2x5bGluZVtpIC0gMV07XG4gICAgIGxlbiArPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xuICAgICB9XG5cbiAgICAgbGVuIC89IG47XG5cbiAgICAgdmFyIHNtYWxsID0gW10sXG4gICAgIHRhcmdldCA9IGxlbixcbiAgICAgbWluID0gMCxcbiAgICAgbWF4LCB0O1xuXG4gICAgIHNtYWxsLnB1c2gocG9seWxpbmVbMF0sIHBvbHlsaW5lWzFdKTtcblxuICAgICBmb3IoaSA9IDI7IGkgIT09IHBvbHlsaW5lLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgIGR4ID0gcG9seWxpbmVbaSAgICBdIC0gcG9seWxpbmVbaSAtIDJdO1xuICAgICBkeSA9IHBvbHlsaW5lW2kgKyAxXSAtIHBvbHlsaW5lW2kgLSAxXTtcbiAgICAgbWF4ID0gbWluICsgTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcblxuICAgICBpZihtYXggPiB0YXJnZXQpIHtcbiAgICAgdCA9ICh0YXJnZXQgLSBtaW4pIC8gKG1heCAtIG1pbik7XG5cbiAgICAgc21hbGwucHVzaChcbiAgICAgcG9seWxpbmVbaSAtIDJdICsgZHggKiB0LFxuICAgICBwb2x5bGluZVtpIC0gMV0gKyBkeSAqIHRcbiAgICAgKTtcblxuICAgICB0YXJnZXQgKz0gbGVuO1xuICAgICB9XG5cbiAgICAgbWluID0gbWF4O1xuICAgICB9XG5cbiAgICAgc21hbGwucHVzaChwb2x5bGluZVtwb2x5bGluZS5sZW5ndGggLSAyXSwgcG9seWxpbmVbcG9seWxpbmUubGVuZ3RoIC0gMV0pO1xuXG4gICAgIHJldHVybiBzbWFsbDtcbiAgICAgfVxuICAgICAqL1xuXG4gICAgLyogRGVmaW5lIHNreWNvbiB0aGluZ3MuICovXG4gICAgLyogRklYTUU6IEknbSAqcmVhbGx5IHJlYWxseSogc29ycnkgdGhhdCB0aGlzIGNvZGUgaXMgc28gZ3Jvc3MuIFJlYWxseSwgSSBhbS5cbiAgICAgKiBJJ2xsIHRyeSB0byBjbGVhbiBpdCB1cCBldmVudHVhbGx5ISBQcm9taXNlISAqL1xuICAgIHZhciBLRVlGUkFNRSA9IDUwMCxcbiAgICAgICAgU1RST0tFID0gMC4wOCxcbiAgICAgICAgVEFVID0gMi4wICogTWF0aC5QSSxcbiAgICAgICAgVFdPX09WRVJfU1FSVF8yID0gMi4wIC8gTWF0aC5zcXJ0KDIpO1xuXG4gICAgZnVuY3Rpb24gY2lyY2xlKGN0eCwgeCwgeSwgcikge1xuICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIGN0eC5hcmMoeCwgeSwgciwgMCwgVEFVLCBmYWxzZSk7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGluZShjdHgsIGF4LCBheSwgYngsIGJ5KSB7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4Lm1vdmVUbyhheCwgYXkpO1xuICAgICAgICBjdHgubGluZVRvKGJ4LCBieSk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwdWZmKGN0eCwgdCwgY3gsIGN5LCByeCwgcnksIHJtaW4sIHJtYXgpIHtcbiAgICAgICAgdmFyIGMgPSBNYXRoLmNvcyh0ICogVEFVKSxcbiAgICAgICAgICAgIHMgPSBNYXRoLnNpbih0ICogVEFVKTtcblxuICAgICAgICBybWF4IC09IHJtaW47XG5cbiAgICAgICAgY2lyY2xlKFxuICAgICAgICAgICAgY3R4LFxuICAgICAgICAgICAgY3ggLSBzICogcngsXG4gICAgICAgICAgICBjeSArIGMgKiByeSArIHJtYXggKiAwLjUsXG4gICAgICAgICAgICBybWluICsgKDEgLSBjICogMC41KSAqIHJtYXhcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwdWZmcyhjdHgsIHQsIGN4LCBjeSwgcngsIHJ5LCBybWluLCBybWF4KSB7XG4gICAgICAgIHZhciBpO1xuXG4gICAgICAgIGZvcihpID0gNTsgaS0tOyApXG4gICAgICAgICAgICBwdWZmKGN0eCwgdCArIGkgLyA1LCBjeCwgY3ksIHJ4LCByeSwgcm1pbiwgcm1heCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xvdWQoY3R4LCB0LCBjeCwgY3ksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB0IC89IDMwMDAwO1xuXG4gICAgICAgIHZhciBhID0gY3cgKiAwLjIxLFxuICAgICAgICAgICAgYiA9IGN3ICogMC4xMixcbiAgICAgICAgICAgIGMgPSBjdyAqIDAuMjQsXG4gICAgICAgICAgICBkID0gY3cgKiAwLjI4O1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgcHVmZnMoY3R4LCB0LCBjeCwgY3ksIGEsIGIsIGMsIGQpO1xuXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcbiAgICAgICAgcHVmZnMoY3R4LCB0LCBjeCwgY3ksIGEsIGIsIGMgLSBzLCBkIC0gcyk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHN1bihjdHgsIHQsIGN4LCBjeSwgY3csIHMsIGNvbG9yKSB7XG4gICAgICAgIHQgLz0gMTIwMDAwO1xuXG4gICAgICAgIHZhciBhID0gY3cgKiAwLjI1IC0gcyAqIDAuNSxcbiAgICAgICAgICAgIGIgPSBjdyAqIDAuMzIgKyBzICogMC41LFxuICAgICAgICAgICAgYyA9IGN3ICogMC41MCAtIHMgKiAwLjUsXG4gICAgICAgICAgICBpLCBwLCBjb3MsIHNpbjtcblxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHM7XG4gICAgICAgIGN0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xuICAgICAgICBjdHgubGluZUpvaW4gPSBcInJvdW5kXCI7XG5cbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKGN4LCBjeSwgYSwgMCwgVEFVLCBmYWxzZSk7XG4gICAgICAgIGN0eC5zdHJva2UoKTtcblxuICAgICAgICBmb3IoaSA9IDg7IGktLTsgKSB7XG4gICAgICAgICAgICBwID0gKHQgKyBpIC8gOCkgKiBUQVU7XG4gICAgICAgICAgICBjb3MgPSBNYXRoLmNvcyhwKTtcbiAgICAgICAgICAgIHNpbiA9IE1hdGguc2luKHApO1xuICAgICAgICAgICAgbGluZShjdHgsIGN4ICsgY29zICogYiwgY3kgKyBzaW4gKiBiLCBjeCArIGNvcyAqIGMsIGN5ICsgc2luICogYyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtb29uKGN0eCwgdCwgY3gsIGN5LCBjdywgcywgY29sb3IpIHtcbiAgICAgICAgdCAvPSAxNTAwMDtcblxuICAgICAgICB2YXIgYSA9IGN3ICogMC4yOSAtIHMgKiAwLjUsXG4gICAgICAgICAgICBiID0gY3cgKiAwLjA1LFxuICAgICAgICAgICAgYyA9IE1hdGguY29zKHQgKiBUQVUpLFxuICAgICAgICAgICAgcCA9IGMgKiBUQVUgLyAtMTY7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzO1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGN4ICs9IGMgKiBiO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LmFyYyhjeCwgY3ksIGEsIHAgKyBUQVUgLyA4LCBwICsgVEFVICogNyAvIDgsIGZhbHNlKTtcbiAgICAgICAgY3R4LmFyYyhjeCArIE1hdGguY29zKHApICogYSAqIFRXT19PVkVSX1NRUlRfMiwgY3kgKyBNYXRoLnNpbihwKSAqIGEgKiBUV09fT1ZFUl9TUVJUXzIsIGEsIHAgKyBUQVUgKiA1IC8gOCwgcCArIFRBVSAqIDMgLyA4LCB0cnVlKTtcbiAgICAgICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmFpbihjdHgsIHQsIGN4LCBjeSwgY3csIHMsIGNvbG9yKSB7XG4gICAgICAgIHQgLz0gMTM1MDtcblxuICAgICAgICB2YXIgYSA9IGN3ICogMC4xNixcbiAgICAgICAgICAgIGIgPSBUQVUgKiAxMSAvIDEyLFxuICAgICAgICAgICAgYyA9IFRBVSAqICA3IC8gMTIsXG4gICAgICAgICAgICBpLCBwLCB4LCB5O1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcblxuICAgICAgICBmb3IoaSA9IDQ7IGktLTsgKSB7XG4gICAgICAgICAgICBwID0gKHQgKyBpIC8gNCkgJSAxO1xuICAgICAgICAgICAgeCA9IGN4ICsgKChpIC0gMS41KSAvIDEuNSkgKiAoaSA9PT0gMSB8fCBpID09PSAyID8gLTEgOiAxKSAqIGE7XG4gICAgICAgICAgICB5ID0gY3kgKyBwICogcCAqIGN3O1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4Lm1vdmVUbyh4LCB5IC0gcyAqIDEuNSk7XG4gICAgICAgICAgICBjdHguYXJjKHgsIHksIHMgKiAwLjc1LCBiLCBjLCBmYWxzZSk7XG4gICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2xlZXQoY3R4LCB0LCBjeCwgY3ksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB0IC89IDc1MDtcblxuICAgICAgICB2YXIgYSA9IGN3ICogMC4xODc1LFxuICAgICAgICAgICAgYiA9IFRBVSAqIDExIC8gMTIsXG4gICAgICAgICAgICBjID0gVEFVICogIDcgLyAxMixcbiAgICAgICAgICAgIGksIHAsIHgsIHk7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzICogMC41O1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGZvcihpID0gNDsgaS0tOyApIHtcbiAgICAgICAgICAgIHAgPSAodCArIGkgLyA0KSAlIDE7XG4gICAgICAgICAgICB4ID0gTWF0aC5mbG9vcihjeCArICgoaSAtIDEuNSkgLyAxLjUpICogKGkgPT09IDEgfHwgaSA9PT0gMiA/IC0xIDogMSkgKiBhKSArIDAuNTtcbiAgICAgICAgICAgIHkgPSBjeSArIHAgKiBjdztcbiAgICAgICAgICAgIGxpbmUoY3R4LCB4LCB5IC0gcyAqIDEuNSwgeCwgeSArIHMgKiAxLjUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc25vdyhjdHgsIHQsIGN4LCBjeSwgY3csIHMsIGNvbG9yKSB7XG4gICAgICAgIHQgLz0gMzAwMDtcblxuICAgICAgICB2YXIgYSAgPSBjdyAqIDAuMTYsXG4gICAgICAgICAgICBiICA9IHMgKiAwLjc1LFxuICAgICAgICAgICAgdSAgPSB0ICogVEFVICogMC43LFxuICAgICAgICAgICAgdXggPSBNYXRoLmNvcyh1KSAqIGIsXG4gICAgICAgICAgICB1eSA9IE1hdGguc2luKHUpICogYixcbiAgICAgICAgICAgIHYgID0gdSArIFRBVSAvIDMsXG4gICAgICAgICAgICB2eCA9IE1hdGguY29zKHYpICogYixcbiAgICAgICAgICAgIHZ5ID0gTWF0aC5zaW4odikgKiBiLFxuICAgICAgICAgICAgdyAgPSB1ICsgVEFVICogMiAvIDMsXG4gICAgICAgICAgICB3eCA9IE1hdGguY29zKHcpICogYixcbiAgICAgICAgICAgIHd5ID0gTWF0aC5zaW4odykgKiBiLFxuICAgICAgICAgICAgaSwgcCwgeCwgeTtcblxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHMgKiAwLjU7XG4gICAgICAgIGN0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xuICAgICAgICBjdHgubGluZUpvaW4gPSBcInJvdW5kXCI7XG5cbiAgICAgICAgZm9yKGkgPSA0OyBpLS07ICkge1xuICAgICAgICAgICAgcCA9ICh0ICsgaSAvIDQpICUgMTtcbiAgICAgICAgICAgIHggPSBjeCArIE1hdGguc2luKChwICsgaSAvIDQpICogVEFVKSAqIGE7XG4gICAgICAgICAgICB5ID0gY3kgKyBwICogY3c7XG5cbiAgICAgICAgICAgIGxpbmUoY3R4LCB4IC0gdXgsIHkgLSB1eSwgeCArIHV4LCB5ICsgdXkpO1xuICAgICAgICAgICAgbGluZShjdHgsIHggLSB2eCwgeSAtIHZ5LCB4ICsgdngsIHkgKyB2eSk7XG4gICAgICAgICAgICBsaW5lKGN0eCwgeCAtIHd4LCB5IC0gd3ksIHggKyB3eCwgeSArIHd5KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZvZ2JhbmsoY3R4LCB0LCBjeCwgY3ksIGN3LCBzLCBjb2xvcikge1xuICAgICAgICB0IC89IDMwMDAwO1xuXG4gICAgICAgIHZhciBhID0gY3cgKiAwLjIxLFxuICAgICAgICAgICAgYiA9IGN3ICogMC4wNixcbiAgICAgICAgICAgIGMgPSBjdyAqIDAuMjEsXG4gICAgICAgICAgICBkID0gY3cgKiAwLjI4O1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgcHVmZnMoY3R4LCB0LCBjeCwgY3ksIGEsIGIsIGMsIGQpO1xuXG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnZGVzdGluYXRpb24tb3V0JztcbiAgICAgICAgcHVmZnMoY3R4LCB0LCBjeCwgY3ksIGEsIGIsIGMgLSBzLCBkIC0gcyk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgIH1cblxuICAgIC8qXG4gICAgIHZhciBXSU5EX1BBVEhTID0gW1xuICAgICBkb3duc2FtcGxlKDYzLCB1cHNhbXBsZSg4LCBbXG4gICAgIC0xLjAwLCAtMC4yOCxcbiAgICAgLTAuNzUsIC0wLjE4LFxuICAgICAtMC41MCwgIDAuMTIsXG4gICAgIC0wLjIwLCAgMC4xMixcbiAgICAgLTAuMDQsIC0wLjA0LFxuICAgICAtMC4wNywgLTAuMTgsXG4gICAgIC0wLjE5LCAtMC4xOCxcbiAgICAgLTAuMjMsIC0wLjA1LFxuICAgICAtMC4xMiwgIDAuMTEsXG4gICAgIDAuMDIsICAwLjE2LFxuICAgICAwLjIwLCAgMC4xNSxcbiAgICAgMC41MCwgIDAuMDcsXG4gICAgIDAuNzUsICAwLjE4LFxuICAgICAxLjAwLCAgMC4yOFxuICAgICBdKSksXG4gICAgIGRvd25zYW1wbGUoMzEsIHVwc2FtcGxlKDE2LCBbXG4gICAgIC0xLjAwLCAtMC4xMCxcbiAgICAgLTAuNzUsICAwLjAwLFxuICAgICAtMC41MCwgIDAuMTAsXG4gICAgIC0wLjI1LCAgMC4xNCxcbiAgICAgMC4wMCwgIDAuMTAsXG4gICAgIDAuMjUsICAwLjAwLFxuICAgICAwLjUwLCAtMC4xMCxcbiAgICAgMC43NSwgLTAuMTQsXG4gICAgIDEuMDAsIC0wLjEwXG4gICAgIF0pKVxuICAgICBdO1xuICAgICAqL1xuXG4gICAgdmFyIFdJTkRfUEFUSFMgPSBbXG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgLTAuNzUwMCwgLTAuMTgwMCwgLTAuNzIxOSwgLTAuMTUyNywgLTAuNjk3MSwgLTAuMTIyNSxcbiAgICAgICAgICAgICAgICAtMC42NzM5LCAtMC4wOTEwLCAtMC42NTE2LCAtMC4wNTg4LCAtMC42Mjk4LCAtMC4wMjYyLFxuICAgICAgICAgICAgICAgIC0wLjYwODMsICAwLjAwNjUsIC0wLjU4NjgsICAwLjAzOTYsIC0wLjU2NDMsICAwLjA3MzEsXG4gICAgICAgICAgICAgICAgLTAuNTM3MiwgIDAuMTA0MSwgLTAuNTAzMywgIDAuMTI1OSwgLTAuNDY2MiwgIDAuMTQwNixcbiAgICAgICAgICAgICAgICAtMC40Mjc1LCAgMC4xNDkzLCAtMC4zODgxLCAgMC4xNTMwLCAtMC4zNDg3LCAgMC4xNTI2LFxuICAgICAgICAgICAgICAgIC0wLjMwOTUsICAwLjE0ODgsIC0wLjI3MDgsICAwLjE0MjEsIC0wLjIzMTksICAwLjEzNDIsXG4gICAgICAgICAgICAgICAgLTAuMTk0MywgIDAuMTIxNywgLTAuMTYwMCwgIDAuMTAyNSwgLTAuMTI5MCwgIDAuMDc4NSxcbiAgICAgICAgICAgICAgICAtMC4xMDEyLCAgMC4wNTA5LCAtMC4wNzY0LCAgMC4wMjA2LCAtMC4wNTQ3LCAtMC4wMTIwLFxuICAgICAgICAgICAgICAgIC0wLjAzNzgsIC0wLjA0NzIsIC0wLjAzMjQsIC0wLjA4NTcsIC0wLjAzODksIC0wLjEyNDEsXG4gICAgICAgICAgICAgICAgLTAuMDU0NiwgLTAuMTU5OSwgLTAuMDgxNCwgLTAuMTg3NiwgLTAuMTE5MywgLTAuMTk2NCxcbiAgICAgICAgICAgICAgICAtMC4xNTgyLCAtMC4xOTM1LCAtMC4xOTMxLCAtMC4xNzY5LCAtMC4yMTU3LCAtMC4xNDUzLFxuICAgICAgICAgICAgICAgIC0wLjIyOTAsIC0wLjEwODUsIC0wLjIzMjcsIC0wLjA2OTcsIC0wLjIyNDAsIC0wLjAzMTcsXG4gICAgICAgICAgICAgICAgLTAuMjA2NCwgIDAuMDAzMywgLTAuMTg1MywgIDAuMDM2MiwgLTAuMTYxMywgIDAuMDY3MixcbiAgICAgICAgICAgICAgICAtMC4xMzUwLCAgMC4wOTYxLCAtMC4xMDUxLCAgMC4xMjEzLCAtMC4wNzA2LCAgMC4xMzk3LFxuICAgICAgICAgICAgICAgIC0wLjAzMzIsICAwLjE1MTIsICAwLjAwNTMsICAwLjE1ODAsICAwLjA0NDIsICAwLjE2MjQsXG4gICAgICAgICAgICAgICAgMC4wODMzLCAgMC4xNjM2LCAgMC4xMjI0LCAgMC4xNjE1LCAgMC4xNjEzLCAgMC4xNTY1LFxuICAgICAgICAgICAgICAgIDAuMTk5OSwgIDAuMTUwMCwgIDAuMjM3OCwgIDAuMTQwMiwgIDAuMjc0OSwgIDAuMTI3OSxcbiAgICAgICAgICAgICAgICAwLjMxMTgsICAwLjExNDcsICAwLjM0ODcsICAwLjEwMTUsICAwLjM4NTgsICAwLjA4OTIsXG4gICAgICAgICAgICAgICAgMC40MjM2LCAgMC4wNzg3LCAgMC40NjIxLCAgMC4wNzE1LCAgMC41MDEyLCAgMC4wNzAyLFxuICAgICAgICAgICAgICAgIDAuNTM5OCwgIDAuMDc2NiwgIDAuNTc2OCwgIDAuMDg5MCwgIDAuNjEyMywgIDAuMTA1NSxcbiAgICAgICAgICAgICAgICAwLjY0NjYsICAwLjEyNDQsICAwLjY4MDUsICAwLjE0NDAsICAwLjcxNDcsICAwLjE2MzAsXG4gICAgICAgICAgICAgICAgMC43NTAwLCAgMC4xODAwXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIC0wLjc1MDAsICAwLjAwMDAsIC0wLjcwMzMsICAwLjAxOTUsIC0wLjY1NjksICAwLjAzOTksXG4gICAgICAgICAgICAgICAgLTAuNjEwNCwgIDAuMDYwMCwgLTAuNTYzNCwgIDAuMDc4OSwgLTAuNTE1NSwgIDAuMDk1NCxcbiAgICAgICAgICAgICAgICAtMC40NjY3LCAgMC4xMDg5LCAtMC40MTc0LCAgMC4xMjA2LCAtMC4zNjc2LCAgMC4xMjk5LFxuICAgICAgICAgICAgICAgIC0wLjMxNzQsICAwLjEzNjUsIC0wLjI2NjksICAwLjEzOTgsIC0wLjIxNjIsICAwLjEzOTEsXG4gICAgICAgICAgICAgICAgLTAuMTY1OCwgIDAuMTM0NywgLTAuMTE1NywgIDAuMTI3MSwgLTAuMDY2MSwgIDAuMTE2OSxcbiAgICAgICAgICAgICAgICAtMC4wMTcwLCAgMC4xMDQ2LCAgMC4wMzE2LCAgMC4wOTAzLCAgMC4wNzkxLCAgMC4wNzI4LFxuICAgICAgICAgICAgICAgIDAuMTI1OSwgIDAuMDUzNCwgIDAuMTcyMywgIDAuMDMzMSwgIDAuMjE4OCwgIDAuMDEyOSxcbiAgICAgICAgICAgICAgICAwLjI2NTYsIC0wLjAwNjQsICAwLjMxMjIsIC0wLjAyNjMsICAwLjM1ODYsIC0wLjA0NjYsXG4gICAgICAgICAgICAgICAgMC40MDUyLCAtMC4wNjY1LCAgMC40NTI1LCAtMC4wODQ3LCAgMC41MDA3LCAtMC4xMDAyLFxuICAgICAgICAgICAgICAgIDAuNTQ5NywgLTAuMTEzMCwgIDAuNTk5MSwgLTAuMTI0MCwgIDAuNjQ5MSwgLTAuMTMyNSxcbiAgICAgICAgICAgICAgICAwLjY5OTQsIC0wLjEzODAsICAwLjc1MDAsIC0wLjE0MDBcbiAgICAgICAgICAgIF1cbiAgICAgICAgXSxcbiAgICAgICAgV0lORF9PRkZTRVRTID0gW1xuICAgICAgICAgICAge3N0YXJ0OiAwLjM2LCBlbmQ6IDAuMTF9LFxuICAgICAgICAgICAge3N0YXJ0OiAwLjU2LCBlbmQ6IDAuMTZ9XG4gICAgICAgIF07XG5cbiAgICBmdW5jdGlvbiBsZWFmKGN0eCwgdCwgeCwgeSwgY3csIHMsIGNvbG9yKSB7XG4gICAgICAgIHZhciBhID0gY3cgLyA4LFxuICAgICAgICAgICAgYiA9IGEgLyAzLFxuICAgICAgICAgICAgYyA9IDIgKiBiLFxuICAgICAgICAgICAgZCA9ICh0ICUgMSkgKiBUQVUsXG4gICAgICAgICAgICBlID0gTWF0aC5jb3MoZCksXG4gICAgICAgICAgICBmID0gTWF0aC5zaW4oZCk7XG5cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjtcbiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHM7XG4gICAgICAgIGN0eC5saW5lQ2FwID0gXCJyb3VuZFwiO1xuICAgICAgICBjdHgubGluZUpvaW4gPSBcInJvdW5kXCI7XG5cbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHguYXJjKHggICAgICAgICwgeSAgICAgICAgLCBhLCBkICAgICAgICAgICwgZCArIE1hdGguUEksIGZhbHNlKTtcbiAgICAgICAgY3R4LmFyYyh4IC0gYiAqIGUsIHkgLSBiICogZiwgYywgZCArIE1hdGguUEksIGQgICAgICAgICAgLCBmYWxzZSk7XG4gICAgICAgIGN0eC5hcmMoeCArIGMgKiBlLCB5ICsgYyAqIGYsIGIsIGQgKyBNYXRoLlBJLCBkICAgICAgICAgICwgdHJ1ZSApO1xuICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLW91dCc7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIGN0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSAnc291cmNlLW92ZXInO1xuICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3dvb3NoKGN0eCwgdCwgY3gsIGN5LCBjdywgcywgaW5kZXgsIHRvdGFsLCBjb2xvcikge1xuICAgICAgICB0IC89IDI1MDA7XG5cbiAgICAgICAgdmFyIHBhdGggPSBXSU5EX1BBVEhTW2luZGV4XSxcbiAgICAgICAgICAgIGEgPSAodCArIGluZGV4IC0gV0lORF9PRkZTRVRTW2luZGV4XS5zdGFydCkgJSB0b3RhbCxcbiAgICAgICAgICAgIGMgPSAodCArIGluZGV4IC0gV0lORF9PRkZTRVRTW2luZGV4XS5lbmQgICkgJSB0b3RhbCxcbiAgICAgICAgICAgIGUgPSAodCArIGluZGV4ICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJSB0b3RhbCxcbiAgICAgICAgICAgIGIsIGQsIGYsIGk7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBzO1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGlmKGEgPCAxKSB7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG5cbiAgICAgICAgICAgIGEgKj0gcGF0aC5sZW5ndGggLyAyIC0gMTtcbiAgICAgICAgICAgIGIgID0gTWF0aC5mbG9vcihhKTtcbiAgICAgICAgICAgIGEgLT0gYjtcbiAgICAgICAgICAgIGIgKj0gMjtcbiAgICAgICAgICAgIGIgKz0gMjtcblxuICAgICAgICAgICAgY3R4Lm1vdmVUbyhcbiAgICAgICAgICAgICAgICBjeCArIChwYXRoW2IgLSAyXSAqICgxIC0gYSkgKyBwYXRoW2IgICAgXSAqIGEpICogY3csXG4gICAgICAgICAgICAgICAgY3kgKyAocGF0aFtiIC0gMV0gKiAoMSAtIGEpICsgcGF0aFtiICsgMV0gKiBhKSAqIGN3XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZihjIDwgMSkge1xuICAgICAgICAgICAgICAgIGMgKj0gcGF0aC5sZW5ndGggLyAyIC0gMTtcbiAgICAgICAgICAgICAgICBkICA9IE1hdGguZmxvb3IoYyk7XG4gICAgICAgICAgICAgICAgYyAtPSBkO1xuICAgICAgICAgICAgICAgIGQgKj0gMjtcbiAgICAgICAgICAgICAgICBkICs9IDI7XG5cbiAgICAgICAgICAgICAgICBmb3IoaSA9IGI7IGkgIT09IGQ7IGkgKz0gMilcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhjeCArIHBhdGhbaV0gKiBjdywgY3kgKyBwYXRoW2kgKyAxXSAqIGN3KTtcblxuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oXG4gICAgICAgICAgICAgICAgICAgIGN4ICsgKHBhdGhbZCAtIDJdICogKDEgLSBjKSArIHBhdGhbZCAgICBdICogYykgKiBjdyxcbiAgICAgICAgICAgICAgICAgICAgY3kgKyAocGF0aFtkIC0gMV0gKiAoMSAtIGMpICsgcGF0aFtkICsgMV0gKiBjKSAqIGN3XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGZvcihpID0gYjsgaSAhPT0gcGF0aC5sZW5ndGg7IGkgKz0gMilcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhjeCArIHBhdGhbaV0gKiBjdywgY3kgKyBwYXRoW2kgKyAxXSAqIGN3KTtcblxuICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxzZSBpZihjIDwgMSkge1xuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuXG4gICAgICAgICAgICBjICo9IHBhdGgubGVuZ3RoIC8gMiAtIDE7XG4gICAgICAgICAgICBkICA9IE1hdGguZmxvb3IoYyk7XG4gICAgICAgICAgICBjIC09IGQ7XG4gICAgICAgICAgICBkICo9IDI7XG4gICAgICAgICAgICBkICs9IDI7XG5cbiAgICAgICAgICAgIGN0eC5tb3ZlVG8oY3ggKyBwYXRoWzBdICogY3csIGN5ICsgcGF0aFsxXSAqIGN3KTtcblxuICAgICAgICAgICAgZm9yKGkgPSAyOyBpICE9PSBkOyBpICs9IDIpXG4gICAgICAgICAgICAgICAgY3R4LmxpbmVUbyhjeCArIHBhdGhbaV0gKiBjdywgY3kgKyBwYXRoW2kgKyAxXSAqIGN3KTtcblxuICAgICAgICAgICAgY3R4LmxpbmVUbyhcbiAgICAgICAgICAgICAgICBjeCArIChwYXRoW2QgLSAyXSAqICgxIC0gYykgKyBwYXRoW2QgICAgXSAqIGMpICogY3csXG4gICAgICAgICAgICAgICAgY3kgKyAocGF0aFtkIC0gMV0gKiAoMSAtIGMpICsgcGF0aFtkICsgMV0gKiBjKSAqIGN3XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihlIDwgMSkge1xuICAgICAgICAgICAgZSAqPSBwYXRoLmxlbmd0aCAvIDIgLSAxO1xuICAgICAgICAgICAgZiAgPSBNYXRoLmZsb29yKGUpO1xuICAgICAgICAgICAgZSAtPSBmO1xuICAgICAgICAgICAgZiAqPSAyO1xuICAgICAgICAgICAgZiArPSAyO1xuXG4gICAgICAgICAgICBsZWFmKFxuICAgICAgICAgICAgICAgIGN0eCxcbiAgICAgICAgICAgICAgICB0LFxuICAgICAgICAgICAgICAgIGN4ICsgKHBhdGhbZiAtIDJdICogKDEgLSBlKSArIHBhdGhbZiAgICBdICogZSkgKiBjdyxcbiAgICAgICAgICAgICAgICBjeSArIChwYXRoW2YgLSAxXSAqICgxIC0gZSkgKyBwYXRoW2YgKyAxXSAqIGUpICogY3csXG4gICAgICAgICAgICAgICAgY3csXG4gICAgICAgICAgICAgICAgcyxcbiAgICAgICAgICAgICAgICBjb2xvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBTa3ljb25zID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB0aGlzLmxpc3QgICAgICAgID0gW107XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgICAgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbG9yICAgICAgID0gb3B0cyAmJiBvcHRzLmNvbG9yID8gb3B0cy5jb2xvciA6IFwiYmxhY2tcIjtcbiAgICAgICAgdGhpcy5yZXNpemVDbGVhciA9ICEhKG9wdHMgJiYgb3B0cy5yZXNpemVDbGVhcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuQ0xFQVJfREFZID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgc3VuKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuNSwgcywgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLkNMRUFSX05JR0hUID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgbW9vbihjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjUsIHMsIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICB9O1xuXG4gICAgU2t5Y29ucy5QQVJUTFlfQ0xPVURZX0RBWSA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIHN1bihjdHgsIHQsIHcgKiAwLjYyNSwgaCAqIDAuMzc1LCBzICogMC43NSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgICAgICBjbG91ZChjdHgsIHQsIHcgKiAwLjM3NSwgaCAqIDAuNjI1LCBzICogMC43NSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgIH07XG5cbiAgICBTa3ljb25zLlBBUlRMWV9DTE9VRFlfTklHSFQgPSBmdW5jdGlvbihjdHgsIHQsIGNvbG9yKSB7XG4gICAgICAgIHZhciB3ID0gY3R4LmNhbnZhcy53aWR0aCxcbiAgICAgICAgICAgIGggPSBjdHguY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIHMgPSBNYXRoLm1pbih3LCBoKTtcblxuICAgICAgICBtb29uKGN0eCwgdCwgdyAqIDAuNjY3LCBoICogMC4zNzUsIHMgKiAwLjc1LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgICAgIGNsb3VkKGN0eCwgdCwgdyAqIDAuMzc1LCBoICogMC42MjUsIHMgKiAwLjc1LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuQ0xPVURZID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgY2xvdWQoY3R4LCB0LCB3ICogMC41LCBoICogMC41LCBzLCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuUkFJTiA9IGZ1bmN0aW9uKGN0eCwgdCwgY29sb3IpIHtcbiAgICAgICAgdmFyIHcgPSBjdHguY2FudmFzLndpZHRoLFxuICAgICAgICAgICAgaCA9IGN0eC5jYW52YXMuaGVpZ2h0LFxuICAgICAgICAgICAgcyA9IE1hdGgubWluKHcsIGgpO1xuXG4gICAgICAgIHJhaW4oY3R4LCB0LCB3ICogMC41LCBoICogMC4zNywgcyAqIDAuOSwgcyAqIFNUUk9LRSwgY29sb3IpO1xuICAgICAgICBjbG91ZChjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjM3LCBzICogMC45LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuU0xFRVQgPSBmdW5jdGlvbihjdHgsIHQsIGNvbG9yKSB7XG4gICAgICAgIHZhciB3ID0gY3R4LmNhbnZhcy53aWR0aCxcbiAgICAgICAgICAgIGggPSBjdHguY2FudmFzLmhlaWdodCxcbiAgICAgICAgICAgIHMgPSBNYXRoLm1pbih3LCBoKTtcblxuICAgICAgICBzbGVldChjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjM3LCBzICogMC45LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgICAgIGNsb3VkKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuMzcsIHMgKiAwLjksIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICB9O1xuXG4gICAgU2t5Y29ucy5TTk9XID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgc25vdyhjdHgsIHQsIHcgKiAwLjUsIGggKiAwLjM3LCBzICogMC45LCBzICogU1RST0tFLCBjb2xvcik7XG4gICAgICAgIGNsb3VkKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuMzcsIHMgKiAwLjksIHMgKiBTVFJPS0UsIGNvbG9yKTtcbiAgICB9O1xuXG4gICAgU2t5Y29ucy5XSU5EID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCk7XG5cbiAgICAgICAgc3dvb3NoKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuNSwgcywgcyAqIFNUUk9LRSwgMCwgMiwgY29sb3IpO1xuICAgICAgICBzd29vc2goY3R4LCB0LCB3ICogMC41LCBoICogMC41LCBzLCBzICogU1RST0tFLCAxLCAyLCBjb2xvcik7XG4gICAgfTtcblxuICAgIFNreWNvbnMuRk9HID0gZnVuY3Rpb24oY3R4LCB0LCBjb2xvcikge1xuICAgICAgICB2YXIgdyA9IGN0eC5jYW52YXMud2lkdGgsXG4gICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICBzID0gTWF0aC5taW4odywgaCksXG4gICAgICAgICAgICBrID0gcyAqIFNUUk9LRTtcblxuICAgICAgICBmb2diYW5rKGN0eCwgdCwgdyAqIDAuNSwgaCAqIDAuMzIsIHMgKiAwLjc1LCBrLCBjb2xvcik7XG5cbiAgICAgICAgdCAvPSA1MDAwO1xuXG4gICAgICAgIHZhciBhID0gTWF0aC5jb3MoKHQgICAgICAgKSAqIFRBVSkgKiBzICogMC4wMixcbiAgICAgICAgICAgIGIgPSBNYXRoLmNvcygodCArIDAuMjUpICogVEFVKSAqIHMgKiAwLjAyLFxuICAgICAgICAgICAgYyA9IE1hdGguY29zKCh0ICsgMC41MCkgKiBUQVUpICogcyAqIDAuMDIsXG4gICAgICAgICAgICBkID0gTWF0aC5jb3MoKHQgKyAwLjc1KSAqIFRBVSkgKiBzICogMC4wMixcbiAgICAgICAgICAgIG4gPSBoICogMC45MzYsXG4gICAgICAgICAgICBlID0gTWF0aC5mbG9vcihuIC0gayAqIDAuNSkgKyAwLjUsXG4gICAgICAgICAgICBmID0gTWF0aC5mbG9vcihuIC0gayAqIDIuNSkgKyAwLjU7XG5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSBrO1xuICAgICAgICBjdHgubGluZUNhcCA9IFwicm91bmRcIjtcbiAgICAgICAgY3R4LmxpbmVKb2luID0gXCJyb3VuZFwiO1xuXG4gICAgICAgIGxpbmUoY3R4LCBhICsgdyAqIDAuMiArIGsgKiAwLjUsIGUsIGIgKyB3ICogMC44IC0gayAqIDAuNSwgZSk7XG4gICAgICAgIGxpbmUoY3R4LCBjICsgdyAqIDAuMiArIGsgKiAwLjUsIGYsIGQgKyB3ICogMC44IC0gayAqIDAuNSwgZik7XG4gICAgfTtcblxuICAgIFNreWNvbnMucHJvdG90eXBlID0ge1xuICAgICAgICBfZGV0ZXJtaW5lRHJhd2luZ0Z1bmN0aW9uOiBmdW5jdGlvbihkcmF3KSB7XG4gICAgICAgICAgICBpZih0eXBlb2YgZHJhdyA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBkcmF3ID0gU2t5Y29uc1tkcmF3LnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvLS9nLCBcIl9cIildIHx8IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBkcmF3O1xuICAgICAgICB9LFxuICAgICAgICBhZGQ6IGZ1bmN0aW9uKGVsLCBkcmF3KSB7XG4gICAgICAgICAgICB2YXIgb2JqO1xuXG4gICAgICAgICAgICBpZih0eXBlb2YgZWwgPT09IFwic3RyaW5nXCIpXG4gICAgICAgICAgICAgICAgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbCk7XG5cbiAgICAgICAgICAgIC8vIERvZXMgbm90aGluZyBpZiBjYW52YXMgbmFtZSBkb2Vzbid0IGV4aXN0c1xuICAgICAgICAgICAgaWYoZWwgPT09IG51bGwpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBkcmF3ID0gdGhpcy5fZGV0ZXJtaW5lRHJhd2luZ0Z1bmN0aW9uKGRyYXcpO1xuXG4gICAgICAgICAgICAvLyBEb2VzIG5vdGhpbmcgaWYgdGhlIGRyYXcgZnVuY3Rpb24gaXNuJ3QgYWN0dWFsbHkgYSBmdW5jdGlvblxuICAgICAgICAgICAgaWYodHlwZW9mIGRyYXcgIT09IFwiZnVuY3Rpb25cIilcbiAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgIG9iaiA9IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBlbCxcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBlbC5nZXRDb250ZXh0KFwiMmRcIiksXG4gICAgICAgICAgICAgICAgZHJhd2luZzogZHJhd1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5saXN0LnB1c2gob2JqKTtcbiAgICAgICAgICAgIHRoaXMuZHJhdyhvYmosIEtFWUZSQU1FKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbihlbCwgZHJhdykge1xuICAgICAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiBlbCA9PT0gXCJzdHJpbmdcIilcbiAgICAgICAgICAgICAgICBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsKTtcblxuICAgICAgICAgICAgZm9yKGkgPSB0aGlzLmxpc3QubGVuZ3RoOyBpLS07IClcbiAgICAgICAgICAgICAgICBpZih0aGlzLmxpc3RbaV0uZWxlbWVudCA9PT0gZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0W2ldLmRyYXdpbmcgPSB0aGlzLl9kZXRlcm1pbmVEcmF3aW5nRnVuY3Rpb24oZHJhdyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhdyh0aGlzLmxpc3RbaV0sIEtFWUZSQU1FKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hZGQoZWwsIGRyYXcpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICB2YXIgaTtcblxuICAgICAgICAgICAgaWYodHlwZW9mIGVsID09PSBcInN0cmluZ1wiKVxuICAgICAgICAgICAgICAgIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWwpO1xuXG4gICAgICAgICAgICBmb3IoaSA9IHRoaXMubGlzdC5sZW5ndGg7IGktLTsgKVxuICAgICAgICAgICAgICAgIGlmKHRoaXMubGlzdFtpXS5lbGVtZW50ID09PSBlbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3Quc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkcmF3OiBmdW5jdGlvbihvYmosIHRpbWUpIHtcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBvYmouY29udGV4dC5jYW52YXM7XG5cbiAgICAgICAgICAgIGlmKHRoaXMucmVzaXplQ2xlYXIpXG4gICAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gY2FudmFzLndpZHRoO1xuXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgb2JqLmNvbnRleHQuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG5cbiAgICAgICAgICAgIG9iai5kcmF3aW5nKG9iai5jb250ZXh0LCB0aW1lLCB0aGlzLmNvbG9yKTtcbiAgICAgICAgfSxcbiAgICAgICAgcGxheTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSByZXF1ZXN0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgICAgIGk7XG5cbiAgICAgICAgICAgICAgICBmb3IoaSA9IHNlbGYubGlzdC5sZW5ndGg7IGktLTsgKVxuICAgICAgICAgICAgICAgICAgICBzZWxmLmRyYXcoc2VsZi5saXN0W2ldLCBub3cpO1xuICAgICAgICAgICAgfSwgMTAwMCAvIDYwKTtcbiAgICAgICAgfSxcbiAgICAgICAgcGF1c2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGk7XG5cbiAgICAgICAgICAgIGlmKHRoaXMuaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgICAgICBjYW5jZWxJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBnbG9iYWwuU2t5Y29ucyA9IFNreWNvbnM7XG59KHRoaXMpKTtcbiIsIi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgXFxcXFxyXG4vLyDvv70gUmFwaGHvv71sIDIuMS4wIC0gSmF2YVNjcmlwdCBWZWN0b3IgTGlicmFyeSAgICAgICAgICAgICAgICAgICAgICAgICAg77+9IFxcXFxcclxuLy8gKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t77+9IFxcXFxcclxuLy8g77+9IENvcHlyaWdodCDvv70gMjAwOC0yMDEyIERtaXRyeSBCYXJhbm92c2tpeSAoaHR0cDovL3JhcGhhZWxqcy5jb20pICAgIO+/vSBcXFxcXHJcbi8vIO+/vSBDb3B5cmlnaHQg77+9IDIwMDgtMjAxMiBTZW5jaGEgTGFicyAoaHR0cDovL3NlbmNoYS5jb20pICAgICAgICAgICAgICDvv70gXFxcXFxyXG4vLyArLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS3vv70gXFxcXFxyXG4vLyDvv70gTGljZW5zZWQgdW5kZXIgdGhlIE1JVCAoaHR0cDovL3JhcGhhZWxqcy5jb20vbGljZW5zZS5odG1sKSBsaWNlbnNlLu+/vSBcXFxcXHJcbi8vICstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSsgXFxcXFxyXG5cclxuKGZ1bmN0aW9uKGEpe3ZhciBiPVwiMC4zLjRcIixjPVwiaGFzT3duUHJvcGVydHlcIixkPS9bXFwuXFwvXS8sZT1cIipcIixmPWZ1bmN0aW9uKCl7fSxnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0saCxpLGo9e246e319LGs9ZnVuY3Rpb24oYSxiKXt2YXIgYz1qLGQ9aSxlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKSxmPWsubGlzdGVuZXJzKGEpLGw9MCxtPSExLG4sbz1bXSxwPXt9LHE9W10scj1oLHM9W107aD1hLGk9MDtmb3IodmFyIHQ9MCx1PWYubGVuZ3RoO3Q8dTt0KyspXCJ6SW5kZXhcImluIGZbdF0mJihvLnB1c2goZlt0XS56SW5kZXgpLGZbdF0uekluZGV4PDAmJihwW2ZbdF0uekluZGV4XT1mW3RdKSk7by5zb3J0KGcpO3doaWxlKG9bbF08MCl7bj1wW29bbCsrXV0scS5wdXNoKG4uYXBwbHkoYixlKSk7aWYoaSl7aT1kO3JldHVybiBxfX1mb3IodD0wO3Q8dTt0Kyspe249Zlt0XTtpZihcInpJbmRleFwiaW4gbilpZihuLnpJbmRleD09b1tsXSl7cS5wdXNoKG4uYXBwbHkoYixlKSk7aWYoaSlicmVhaztkb3tsKyssbj1wW29bbF1dLG4mJnEucHVzaChuLmFwcGx5KGIsZSkpO2lmKGkpYnJlYWt9d2hpbGUobil9ZWxzZSBwW24uekluZGV4XT1uO2Vsc2V7cS5wdXNoKG4uYXBwbHkoYixlKSk7aWYoaSlicmVha319aT1kLGg9cjtyZXR1cm4gcS5sZW5ndGg/cTpudWxsfTtrLmxpc3RlbmVycz1mdW5jdGlvbihhKXt2YXIgYj1hLnNwbGl0KGQpLGM9aixmLGcsaCxpLGssbCxtLG4sbz1bY10scD1bXTtmb3IoaT0wLGs9Yi5sZW5ndGg7aTxrO2krKyl7bj1bXTtmb3IobD0wLG09by5sZW5ndGg7bDxtO2wrKyl7Yz1vW2xdLm4sZz1bY1tiW2ldXSxjW2VdXSxoPTI7d2hpbGUoaC0tKWY9Z1toXSxmJiYobi5wdXNoKGYpLHA9cC5jb25jYXQoZi5mfHxbXSkpfW89bn1yZXR1cm4gcH0say5vbj1mdW5jdGlvbihhLGIpe3ZhciBjPWEuc3BsaXQoZCksZT1qO2Zvcih2YXIgZz0wLGg9Yy5sZW5ndGg7ZzxoO2crKyllPWUubiwhZVtjW2ddXSYmKGVbY1tnXV09e246e319KSxlPWVbY1tnXV07ZS5mPWUuZnx8W107Zm9yKGc9MCxoPWUuZi5sZW5ndGg7ZzxoO2crKylpZihlLmZbZ109PWIpcmV0dXJuIGY7ZS5mLnB1c2goYik7cmV0dXJuIGZ1bmN0aW9uKGEpeythPT0rYSYmKGIuekluZGV4PSthKX19LGsuc3RvcD1mdW5jdGlvbigpe2k9MX0say5udD1mdW5jdGlvbihhKXtpZihhKXJldHVybihuZXcgUmVnRXhwKFwiKD86XFxcXC58XFxcXC98XilcIithK1wiKD86XFxcXC58XFxcXC98JClcIikpLnRlc3QoaCk7cmV0dXJuIGh9LGsub2ZmPWsudW5iaW5kPWZ1bmN0aW9uKGEsYil7dmFyIGY9YS5zcGxpdChkKSxnLGgsaSxrLGwsbSxuLG89W2pdO2ZvcihrPTAsbD1mLmxlbmd0aDtrPGw7aysrKWZvcihtPTA7bTxvLmxlbmd0aDttKz1pLmxlbmd0aC0yKXtpPVttLDFdLGc9b1ttXS5uO2lmKGZba10hPWUpZ1tmW2tdXSYmaS5wdXNoKGdbZltrXV0pO2Vsc2UgZm9yKGggaW4gZylnW2NdKGgpJiZpLnB1c2goZ1toXSk7by5zcGxpY2UuYXBwbHkobyxpKX1mb3Ioaz0wLGw9by5sZW5ndGg7azxsO2srKyl7Zz1vW2tdO3doaWxlKGcubil7aWYoYil7aWYoZy5mKXtmb3IobT0wLG49Zy5mLmxlbmd0aDttPG47bSsrKWlmKGcuZlttXT09Yil7Zy5mLnNwbGljZShtLDEpO2JyZWFrfSFnLmYubGVuZ3RoJiZkZWxldGUgZy5mfWZvcihoIGluIGcubilpZihnLm5bY10oaCkmJmcubltoXS5mKXt2YXIgcD1nLm5baF0uZjtmb3IobT0wLG49cC5sZW5ndGg7bTxuO20rKylpZihwW21dPT1iKXtwLnNwbGljZShtLDEpO2JyZWFrfSFwLmxlbmd0aCYmZGVsZXRlIGcubltoXS5mfX1lbHNle2RlbGV0ZSBnLmY7Zm9yKGggaW4gZy5uKWcubltjXShoKSYmZy5uW2hdLmYmJmRlbGV0ZSBnLm5baF0uZn1nPWcubn19fSxrLm9uY2U9ZnVuY3Rpb24oYSxiKXt2YXIgYz1mdW5jdGlvbigpe3ZhciBkPWIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2sudW5iaW5kKGEsYyk7cmV0dXJuIGR9O3JldHVybiBrLm9uKGEsYyl9LGsudmVyc2lvbj1iLGsudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIllvdSBhcmUgcnVubmluZyBFdmUgXCIrYn0sdHlwZW9mIG1vZHVsZSE9XCJ1bmRlZmluZWRcIiYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9azp0eXBlb2YgZGVmaW5lIT1cInVuZGVmaW5lZFwiP2RlZmluZShcImV2ZVwiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGt9KTphLmV2ZT1rfSkodGhpcyksZnVuY3Rpb24oKXtmdW5jdGlvbiBjRihhKXtmb3IodmFyIGI9MDtiPGN5Lmxlbmd0aDtiKyspY3lbYl0uZWwucGFwZXI9PWEmJmN5LnNwbGljZShiLS0sMSl9ZnVuY3Rpb24gY0UoYixkLGUsZixoLGkpe2U9UShlKTt2YXIgaixrLGwsbT1bXSxvLHAscSx0PWIubXMsdT17fSx2PXt9LHc9e307aWYoZilmb3IoeT0wLHo9Y3kubGVuZ3RoO3k8ejt5Kyspe3ZhciB4PWN5W3ldO2lmKHguZWwuaWQ9PWQuaWQmJnguYW5pbT09Yil7eC5wZXJjZW50IT1lPyhjeS5zcGxpY2UoeSwxKSxsPTEpOms9eCxkLmF0dHIoeC50b3RhbE9yaWdpbik7YnJlYWt9fWVsc2UgZj0rdjtmb3IodmFyIHk9MCx6PWIucGVyY2VudHMubGVuZ3RoO3k8ejt5Kyspe2lmKGIucGVyY2VudHNbeV09PWV8fGIucGVyY2VudHNbeV0+ZipiLnRvcCl7ZT1iLnBlcmNlbnRzW3ldLHA9Yi5wZXJjZW50c1t5LTFdfHwwLHQ9dC9iLnRvcCooZS1wKSxvPWIucGVyY2VudHNbeSsxXSxqPWIuYW5pbVtlXTticmVha31mJiZkLmF0dHIoYi5hbmltW2IucGVyY2VudHNbeV1dKX1pZighIWope2lmKCFrKXtmb3IodmFyIEEgaW4gailpZihqW2ddKEEpKWlmKFVbZ10oQSl8fGQucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tnXShBKSl7dVtBXT1kLmF0dHIoQSksdVtBXT09bnVsbCYmKHVbQV09VFtBXSksdltBXT1qW0FdO3N3aXRjaChVW0FdKXtjYXNlIEM6d1tBXT0odltBXS11W0FdKS90O2JyZWFrO2Nhc2VcImNvbG91clwiOnVbQV09YS5nZXRSR0IodVtBXSk7dmFyIEI9YS5nZXRSR0IodltBXSk7d1tBXT17cjooQi5yLXVbQV0ucikvdCxnOihCLmctdVtBXS5nKS90LGI6KEIuYi11W0FdLmIpL3R9O2JyZWFrO2Nhc2VcInBhdGhcIjp2YXIgRD1iUih1W0FdLHZbQV0pLEU9RFsxXTt1W0FdPURbMF0sd1tBXT1bXTtmb3IoeT0wLHo9dVtBXS5sZW5ndGg7eTx6O3krKyl7d1tBXVt5XT1bMF07Zm9yKHZhciBGPTEsRz11W0FdW3ldLmxlbmd0aDtGPEc7RisrKXdbQV1beV1bRl09KEVbeV1bRl0tdVtBXVt5XVtGXSkvdH1icmVhaztjYXNlXCJ0cmFuc2Zvcm1cIjp2YXIgSD1kLl8sST1jYShIW0FdLHZbQV0pO2lmKEkpe3VbQV09SS5mcm9tLHZbQV09SS50byx3W0FdPVtdLHdbQV0ucmVhbD0hMDtmb3IoeT0wLHo9dVtBXS5sZW5ndGg7eTx6O3krKyl7d1tBXVt5XT1bdVtBXVt5XVswXV07Zm9yKEY9MSxHPXVbQV1beV0ubGVuZ3RoO0Y8RztGKyspd1tBXVt5XVtGXT0odltBXVt5XVtGXS11W0FdW3ldW0ZdKS90fX1lbHNle3ZhciBKPWQubWF0cml4fHxuZXcgY2IsSz17Xzp7dHJhbnNmb3JtOkgudHJhbnNmb3JtfSxnZXRCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIGQuZ2V0QkJveCgxKX19O3VbQV09W0ouYSxKLmIsSi5jLEouZCxKLmUsSi5mXSxiJChLLHZbQV0pLHZbQV09Sy5fLnRyYW5zZm9ybSx3W0FdPVsoSy5tYXRyaXguYS1KLmEpL3QsKEsubWF0cml4LmItSi5iKS90LChLLm1hdHJpeC5jLUouYykvdCwoSy5tYXRyaXguZC1KLmQpL3QsKEsubWF0cml4LmUtSi5lKS90LChLLm1hdHJpeC5mLUouZikvdF19YnJlYWs7Y2FzZVwiY3N2XCI6dmFyIEw9cihqW0FdKVtzXShjKSxNPXIodVtBXSlbc10oYyk7aWYoQT09XCJjbGlwLXJlY3RcIil7dVtBXT1NLHdbQV09W10seT1NLmxlbmd0aDt3aGlsZSh5LS0pd1tBXVt5XT0oTFt5XS11W0FdW3ldKS90fXZbQV09TDticmVhaztkZWZhdWx0Okw9W11bbl0oaltBXSksTT1bXVtuXSh1W0FdKSx3W0FdPVtdLHk9ZC5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW0FdLmxlbmd0aDt3aGlsZSh5LS0pd1tBXVt5XT0oKExbeV18fDApLShNW3ldfHwwKSkvdH19dmFyIE89ai5lYXNpbmcsUD1hLmVhc2luZ19mb3JtdWxhc1tPXTtpZighUCl7UD1yKE8pLm1hdGNoKE4pO2lmKFAmJlAubGVuZ3RoPT01KXt2YXIgUj1QO1A9ZnVuY3Rpb24oYSl7cmV0dXJuIGNDKGEsK1JbMV0sK1JbMl0sK1JbM10sK1JbNF0sdCl9fWVsc2UgUD1iZn1xPWouc3RhcnR8fGIuc3RhcnR8fCsobmV3IERhdGUpLHg9e2FuaW06YixwZXJjZW50OmUsdGltZXN0YW1wOnEsc3RhcnQ6cSsoYi5kZWx8fDApLHN0YXR1czowLGluaXRzdGF0dXM6Znx8MCxzdG9wOiExLG1zOnQsZWFzaW5nOlAsZnJvbTp1LGRpZmY6dyx0bzp2LGVsOmQsY2FsbGJhY2s6ai5jYWxsYmFjayxwcmV2OnAsbmV4dDpvLHJlcGVhdDppfHxiLnRpbWVzLG9yaWdpbjpkLmF0dHIoKSx0b3RhbE9yaWdpbjpofSxjeS5wdXNoKHgpO2lmKGYmJiFrJiYhbCl7eC5zdG9wPSEwLHguc3RhcnQ9bmV3IERhdGUtdCpmO2lmKGN5Lmxlbmd0aD09MSlyZXR1cm4gY0EoKX1sJiYoeC5zdGFydD1uZXcgRGF0ZS14Lm1zKmYpLGN5Lmxlbmd0aD09MSYmY3ooY0EpfWVsc2Ugay5pbml0c3RhdHVzPWYsay5zdGFydD1uZXcgRGF0ZS1rLm1zKmY7ZXZlKFwicmFwaGFlbC5hbmltLnN0YXJ0LlwiK2QuaWQsZCxiKX19ZnVuY3Rpb24gY0QoYSxiKXt2YXIgYz1bXSxkPXt9O3RoaXMubXM9Yix0aGlzLnRpbWVzPTE7aWYoYSl7Zm9yKHZhciBlIGluIGEpYVtnXShlKSYmKGRbUShlKV09YVtlXSxjLnB1c2goUShlKSkpO2Muc29ydChiZCl9dGhpcy5hbmltPWQsdGhpcy50b3A9Y1tjLmxlbmd0aC0xXSx0aGlzLnBlcmNlbnRzPWN9ZnVuY3Rpb24gY0MoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIG8oYSxiKXt2YXIgYyxkLGUsZixqLGs7Zm9yKGU9YSxrPTA7azw4O2srKyl7Zj1tKGUpLWE7aWYoeihmKTxiKXJldHVybiBlO2o9KDMqaSplKzIqaCkqZStnO2lmKHooaik8MWUtNilicmVhaztlPWUtZi9qfWM9MCxkPTEsZT1hO2lmKGU8YylyZXR1cm4gYztpZihlPmQpcmV0dXJuIGQ7d2hpbGUoYzxkKXtmPW0oZSk7aWYoeihmLWEpPGIpcmV0dXJuIGU7YT5mP2M9ZTpkPWUsZT0oZC1jKS8yK2N9cmV0dXJuIGV9ZnVuY3Rpb24gbihhLGIpe3ZhciBjPW8oYSxiKTtyZXR1cm4oKGwqYytrKSpjK2opKmN9ZnVuY3Rpb24gbShhKXtyZXR1cm4oKGkqYStoKSphK2cpKmF9dmFyIGc9MypiLGg9MyooZC1iKS1nLGk9MS1nLWgsaj0zKmMsaz0zKihlLWMpLWosbD0xLWotaztyZXR1cm4gbihhLDEvKDIwMCpmKSl9ZnVuY3Rpb24gY3EoKXtyZXR1cm4gdGhpcy54K3ErdGhpcy55K3ErdGhpcy53aWR0aCtcIiDvv70gXCIrdGhpcy5oZWlnaHR9ZnVuY3Rpb24gY3AoKXtyZXR1cm4gdGhpcy54K3ErdGhpcy55fWZ1bmN0aW9uIGNiKGEsYixjLGQsZSxmKXthIT1udWxsPyh0aGlzLmE9K2EsdGhpcy5iPStiLHRoaXMuYz0rYyx0aGlzLmQ9K2QsdGhpcy5lPStlLHRoaXMuZj0rZik6KHRoaXMuYT0xLHRoaXMuYj0wLHRoaXMuYz0wLHRoaXMuZD0xLHRoaXMuZT0wLHRoaXMuZj0wKX1mdW5jdGlvbiBiSChiLGMsZCl7Yj1hLl9wYXRoMmN1cnZlKGIpLGM9YS5fcGF0aDJjdXJ2ZShjKTt2YXIgZSxmLGcsaCxpLGosayxsLG0sbixvPWQ/MDpbXTtmb3IodmFyIHA9MCxxPWIubGVuZ3RoO3A8cTtwKyspe3ZhciByPWJbcF07aWYoclswXT09XCJNXCIpZT1pPXJbMV0sZj1qPXJbMl07ZWxzZXtyWzBdPT1cIkNcIj8obT1bZSxmXS5jb25jYXQoci5zbGljZSgxKSksZT1tWzZdLGY9bVs3XSk6KG09W2UsZixlLGYsaSxqLGksal0sZT1pLGY9aik7Zm9yKHZhciBzPTAsdD1jLmxlbmd0aDtzPHQ7cysrKXt2YXIgdT1jW3NdO2lmKHVbMF09PVwiTVwiKWc9az11WzFdLGg9bD11WzJdO2Vsc2V7dVswXT09XCJDXCI/KG49W2csaF0uY29uY2F0KHUuc2xpY2UoMSkpLGc9bls2XSxoPW5bN10pOihuPVtnLGgsZyxoLGssbCxrLGxdLGc9ayxoPWwpO3ZhciB2PWJHKG0sbixkKTtpZihkKW8rPXY7ZWxzZXtmb3IodmFyIHc9MCx4PXYubGVuZ3RoO3c8eDt3Kyspdlt3XS5zZWdtZW50MT1wLHZbd10uc2VnbWVudDI9cyx2W3ddLmJlejE9bSx2W3ddLmJlejI9bjtvPW8uY29uY2F0KHYpfX19fX1yZXR1cm4gb31mdW5jdGlvbiBiRyhiLGMsZCl7dmFyIGU9YS5iZXppZXJCQm94KGIpLGY9YS5iZXppZXJCQm94KGMpO2lmKCFhLmlzQkJveEludGVyc2VjdChlLGYpKXJldHVybiBkPzA6W107dmFyIGc9YkIuYXBwbHkoMCxiKSxoPWJCLmFwcGx5KDAsYyksaT1+fihnLzUpLGo9fn4oaC81KSxrPVtdLGw9W10sbT17fSxuPWQ/MDpbXTtmb3IodmFyIG89MDtvPGkrMTtvKyspe3ZhciBwPWEuZmluZERvdHNBdFNlZ21lbnQuYXBwbHkoYSxiLmNvbmNhdChvL2kpKTtrLnB1c2goe3g6cC54LHk6cC55LHQ6by9pfSl9Zm9yKG89MDtvPGorMTtvKyspcD1hLmZpbmREb3RzQXRTZWdtZW50LmFwcGx5KGEsYy5jb25jYXQoby9qKSksbC5wdXNoKHt4OnAueCx5OnAueSx0Om8van0pO2ZvcihvPTA7bzxpO28rKylmb3IodmFyIHE9MDtxPGo7cSsrKXt2YXIgcj1rW29dLHM9a1tvKzFdLHQ9bFtxXSx1PWxbcSsxXSx2PXoocy54LXIueCk8LjAwMT9cInlcIjpcInhcIix3PXoodS54LXQueCk8LjAwMT9cInlcIjpcInhcIix4PWJEKHIueCxyLnkscy54LHMueSx0LngsdC55LHUueCx1LnkpO2lmKHgpe2lmKG1beC54LnRvRml4ZWQoNCldPT14LnkudG9GaXhlZCg0KSljb250aW51ZTttW3gueC50b0ZpeGVkKDQpXT14LnkudG9GaXhlZCg0KTt2YXIgeT1yLnQreigoeFt2XS1yW3ZdKS8oc1t2XS1yW3ZdKSkqKHMudC1yLnQpLEE9dC50K3ooKHhbd10tdFt3XSkvKHVbd10tdFt3XSkpKih1LnQtdC50KTt5Pj0wJiZ5PD0xJiZBPj0wJiZBPD0xJiYoZD9uKys6bi5wdXNoKHt4OngueCx5OngueSx0MTp5LHQyOkF9KSl9fXJldHVybiBufWZ1bmN0aW9uIGJGKGEsYil7cmV0dXJuIGJHKGEsYiwxKX1mdW5jdGlvbiBiRShhLGIpe3JldHVybiBiRyhhLGIpfWZ1bmN0aW9uIGJEKGEsYixjLGQsZSxmLGcsaCl7aWYoISh4KGEsYyk8eShlLGcpfHx5KGEsYyk+eChlLGcpfHx4KGIsZCk8eShmLGgpfHx5KGIsZCk+eChmLGgpKSl7dmFyIGk9KGEqZC1iKmMpKihlLWcpLShhLWMpKihlKmgtZipnKSxqPShhKmQtYipjKSooZi1oKS0oYi1kKSooZSpoLWYqZyksaz0oYS1jKSooZi1oKS0oYi1kKSooZS1nKTtpZighaylyZXR1cm47dmFyIGw9aS9rLG09ai9rLG49K2wudG9GaXhlZCgyKSxvPSttLnRvRml4ZWQoMik7aWYobjwreShhLGMpLnRvRml4ZWQoMil8fG4+K3goYSxjKS50b0ZpeGVkKDIpfHxuPCt5KGUsZykudG9GaXhlZCgyKXx8bj4reChlLGcpLnRvRml4ZWQoMil8fG88K3koYixkKS50b0ZpeGVkKDIpfHxvPit4KGIsZCkudG9GaXhlZCgyKXx8bzwreShmLGgpLnRvRml4ZWQoMil8fG8+K3goZixoKS50b0ZpeGVkKDIpKXJldHVybjtyZXR1cm57eDpsLHk6bX19fWZ1bmN0aW9uIGJDKGEsYixjLGQsZSxmLGcsaCxpKXtpZighKGk8MHx8YkIoYSxiLGMsZCxlLGYsZyxoKTxpKSl7dmFyIGo9MSxrPWovMixsPWotayxtLG49LjAxO209YkIoYSxiLGMsZCxlLGYsZyxoLGwpO3doaWxlKHoobS1pKT5uKWsvPTIsbCs9KG08aT8xOi0xKSprLG09YkIoYSxiLGMsZCxlLGYsZyxoLGwpO3JldHVybiBsfX1mdW5jdGlvbiBiQihhLGIsYyxkLGUsZixnLGgsaSl7aT09bnVsbCYmKGk9MSksaT1pPjE/MTppPDA/MDppO3ZhciBqPWkvMixrPTEyLGw9Wy0wLjEyNTIsLjEyNTIsLTAuMzY3OCwuMzY3OCwtMC41ODczLC41ODczLC0wLjc2OTksLjc2OTksLTAuOTA0MSwuOTA0MSwtMC45ODE2LC45ODE2XSxtPVsuMjQ5MSwuMjQ5MSwuMjMzNSwuMjMzNSwuMjAzMiwuMjAzMiwuMTYwMSwuMTYwMSwuMTA2OSwuMTA2OSwuMDQ3MiwuMDQ3Ml0sbj0wO2Zvcih2YXIgbz0wO288aztvKyspe3ZhciBwPWoqbFtvXStqLHE9YkEocCxhLGMsZSxnKSxyPWJBKHAsYixkLGYsaCkscz1xKnErcipyO24rPW1bb10qdy5zcXJ0KHMpfXJldHVybiBqKm59ZnVuY3Rpb24gYkEoYSxiLGMsZCxlKXt2YXIgZj0tMypiKzkqYy05KmQrMyplLGc9YSpmKzYqYi0xMipjKzYqZDtyZXR1cm4gYSpnLTMqYiszKmN9ZnVuY3Rpb24gYnkoYSxiKXt2YXIgYz1bXTtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2UtMiohYj5kO2QrPTIpe3ZhciBmPVt7eDorYVtkLTJdLHk6K2FbZC0xXX0se3g6K2FbZF0seTorYVtkKzFdfSx7eDorYVtkKzJdLHk6K2FbZCszXX0se3g6K2FbZCs0XSx5OithW2QrNV19XTtiP2Q/ZS00PT1kP2ZbM109e3g6K2FbMF0seTorYVsxXX06ZS0yPT1kJiYoZlsyXT17eDorYVswXSx5OithWzFdfSxmWzNdPXt4OithWzJdLHk6K2FbM119KTpmWzBdPXt4OithW2UtMl0seTorYVtlLTFdfTplLTQ9PWQ/ZlszXT1mWzJdOmR8fChmWzBdPXt4OithW2RdLHk6K2FbZCsxXX0pLGMucHVzaChbXCJDXCIsKC1mWzBdLngrNipmWzFdLngrZlsyXS54KS82LCgtZlswXS55KzYqZlsxXS55K2ZbMl0ueSkvNiwoZlsxXS54KzYqZlsyXS54LWZbM10ueCkvNiwoZlsxXS55KzYqZlsyXS55LWZbM10ueSkvNixmWzJdLngsZlsyXS55XSl9cmV0dXJuIGN9ZnVuY3Rpb24gYngoKXtyZXR1cm4gdGhpcy5oZXh9ZnVuY3Rpb24gYnYoYSxiLGMpe2Z1bmN0aW9uIGQoKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCksZj1lLmpvaW4oXCI/XCIpLGg9ZC5jYWNoZT1kLmNhY2hlfHx7fSxpPWQuY291bnQ9ZC5jb3VudHx8W107aWYoaFtnXShmKSl7YnUoaSxmKTtyZXR1cm4gYz9jKGhbZl0pOmhbZl19aS5sZW5ndGg+PTFlMyYmZGVsZXRlIGhbaS5zaGlmdCgpXSxpLnB1c2goZiksaFtmXT1hW21dKGIsZSk7cmV0dXJuIGM/YyhoW2ZdKTpoW2ZdfXJldHVybiBkfWZ1bmN0aW9uIGJ1KGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7YysrKWlmKGFbY109PT1iKXJldHVybiBhLnB1c2goYS5zcGxpY2UoYywxKVswXSl9ZnVuY3Rpb24gYm0oYSl7aWYoT2JqZWN0KGEpIT09YSlyZXR1cm4gYTt2YXIgYj1uZXcgYS5jb25zdHJ1Y3Rvcjtmb3IodmFyIGMgaW4gYSlhW2ddKGMpJiYoYltjXT1ibShhW2NdKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYShjKXtpZihhLmlzKGMsXCJmdW5jdGlvblwiKSlyZXR1cm4gYj9jKCk6ZXZlLm9uKFwicmFwaGFlbC5ET01sb2FkXCIsYyk7aWYoYS5pcyhjLEUpKXJldHVybiBhLl9lbmdpbmUuY3JlYXRlW21dKGEsYy5zcGxpY2UoMCwzK2EuaXMoY1swXSxDKSkpLmFkZChjKTt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7aWYoYS5pcyhkW2QubGVuZ3RoLTFdLFwiZnVuY3Rpb25cIikpe3ZhciBlPWQucG9wKCk7cmV0dXJuIGI/ZS5jYWxsKGEuX2VuZ2luZS5jcmVhdGVbbV0oYSxkKSk6ZXZlLm9uKFwicmFwaGFlbC5ET01sb2FkXCIsZnVuY3Rpb24oKXtlLmNhbGwoYS5fZW5naW5lLmNyZWF0ZVttXShhLGQpKX0pfXJldHVybiBhLl9lbmdpbmUuY3JlYXRlW21dKGEsYXJndW1lbnRzKX1hLnZlcnNpb249XCIyLjEuMFwiLGEuZXZlPWV2ZTt2YXIgYixjPS9bLCBdKy8sZD17Y2lyY2xlOjEscmVjdDoxLHBhdGg6MSxlbGxpcHNlOjEsdGV4dDoxLGltYWdlOjF9LGU9L1xceyhcXGQrKVxcfS9nLGY9XCJwcm90b3R5cGVcIixnPVwiaGFzT3duUHJvcGVydHlcIixoPXtkb2M6ZG9jdW1lbnQsd2luOndpbmRvd30saT17d2FzOk9iamVjdC5wcm90b3R5cGVbZ10uY2FsbChoLndpbixcIlJhcGhhZWxcIiksaXM6aC53aW4uUmFwaGFlbH0saj1mdW5jdGlvbigpe3RoaXMuY2E9dGhpcy5jdXN0b21BdHRyaWJ1dGVzPXt9fSxrLGw9XCJhcHBlbmRDaGlsZFwiLG09XCJhcHBseVwiLG49XCJjb25jYXRcIixvPVwiY3JlYXRlVG91Y2hcImluIGguZG9jLHA9XCJcIixxPVwiIFwiLHI9U3RyaW5nLHM9XCJzcGxpdFwiLHQ9XCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gbW91c2Vtb3ZlIG1vdXNlb3V0IG1vdXNlb3ZlciBtb3VzZXVwIHRvdWNoc3RhcnQgdG91Y2htb3ZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsXCJbc10ocSksdT17bW91c2Vkb3duOlwidG91Y2hzdGFydFwiLG1vdXNlbW92ZTpcInRvdWNobW92ZVwiLG1vdXNldXA6XCJ0b3VjaGVuZFwifSx2PXIucHJvdG90eXBlLnRvTG93ZXJDYXNlLHc9TWF0aCx4PXcubWF4LHk9dy5taW4sej13LmFicyxBPXcucG93LEI9dy5QSSxDPVwibnVtYmVyXCIsRD1cInN0cmluZ1wiLEU9XCJhcnJheVwiLEY9XCJ0b1N0cmluZ1wiLEc9XCJmaWxsXCIsSD1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLEk9e30sSj1cInB1c2hcIixLPWEuX0lTVVJMPS9edXJsXFwoWydcIl0/KFteXFwpXSs/KVsnXCJdP1xcKSQvaSxMPS9eXFxzKigoI1thLWZcXGRdezZ9KXwoI1thLWZcXGRdezN9KXxyZ2JhP1xcKFxccyooW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSslP1xccyosXFxzKltcXGRcXC5dKyU/KD86XFxzKixcXHMqW1xcZFxcLl0rJT8pPylcXHMqXFwpfGhzYmE/XFwoXFxzKihbXFxkXFwuXSsoPzpkZWd8XFx4YjB8JSk/XFxzKixcXHMqW1xcZFxcLl0rJT9cXHMqLFxccypbXFxkXFwuXSsoPzolP1xccyosXFxzKltcXGRcXC5dKyk/KSU/XFxzKlxcKXxoc2xhP1xcKFxccyooW1xcZFxcLl0rKD86ZGVnfFxceGIwfCUpP1xccyosXFxzKltcXGRcXC5dKyU/XFxzKixcXHMqW1xcZFxcLl0rKD86JT9cXHMqLFxccypbXFxkXFwuXSspPyklP1xccypcXCkpXFxzKiQvaSxNPXtOYU46MSxJbmZpbml0eToxLFwiLUluZmluaXR5XCI6MX0sTj0vXig/OmN1YmljLSk/YmV6aWVyXFwoKFteLF0rKSwoW14sXSspLChbXixdKyksKFteXFwpXSspXFwpLyxPPXcucm91bmQsUD1cInNldEF0dHJpYnV0ZVwiLFE9cGFyc2VGbG9hdCxSPXBhcnNlSW50LFM9ci5wcm90b3R5cGUudG9VcHBlckNhc2UsVD1hLl9hdmFpbGFibGVBdHRycz17XCJhcnJvdy1lbmRcIjpcIm5vbmVcIixcImFycm93LXN0YXJ0XCI6XCJub25lXCIsYmx1cjowLFwiY2xpcC1yZWN0XCI6XCIwIDAgMWU5IDFlOVwiLGN1cnNvcjpcImRlZmF1bHRcIixjeDowLGN5OjAsZmlsbDpcIiNmZmZcIixcImZpbGwtb3BhY2l0eVwiOjEsZm9udDonMTBweCBcIkFyaWFsXCInLFwiZm9udC1mYW1pbHlcIjonXCJBcmlhbFwiJyxcImZvbnQtc2l6ZVwiOlwiMTBcIixcImZvbnQtc3R5bGVcIjpcIm5vcm1hbFwiLFwiZm9udC13ZWlnaHRcIjo0MDAsZ3JhZGllbnQ6MCxoZWlnaHQ6MCxocmVmOlwiaHR0cDovL3JhcGhhZWxqcy5jb20vXCIsXCJsZXR0ZXItc3BhY2luZ1wiOjAsb3BhY2l0eToxLHBhdGg6XCJNMCwwXCIscjowLHJ4OjAscnk6MCxzcmM6XCJcIixzdHJva2U6XCIjMDAwXCIsXCJzdHJva2UtZGFzaGFycmF5XCI6XCJcIixcInN0cm9rZS1saW5lY2FwXCI6XCJidXR0XCIsXCJzdHJva2UtbGluZWpvaW5cIjpcImJ1dHRcIixcInN0cm9rZS1taXRlcmxpbWl0XCI6MCxcInN0cm9rZS1vcGFjaXR5XCI6MSxcInN0cm9rZS13aWR0aFwiOjEsdGFyZ2V0OlwiX2JsYW5rXCIsXCJ0ZXh0LWFuY2hvclwiOlwibWlkZGxlXCIsdGl0bGU6XCJSYXBoYWVsXCIsdHJhbnNmb3JtOlwiXCIsd2lkdGg6MCx4OjAseTowfSxVPWEuX2F2YWlsYWJsZUFuaW1BdHRycz17Ymx1cjpDLFwiY2xpcC1yZWN0XCI6XCJjc3ZcIixjeDpDLGN5OkMsZmlsbDpcImNvbG91clwiLFwiZmlsbC1vcGFjaXR5XCI6QyxcImZvbnQtc2l6ZVwiOkMsaGVpZ2h0OkMsb3BhY2l0eTpDLHBhdGg6XCJwYXRoXCIscjpDLHJ4OkMscnk6QyxzdHJva2U6XCJjb2xvdXJcIixcInN0cm9rZS1vcGFjaXR5XCI6QyxcInN0cm9rZS13aWR0aFwiOkMsdHJhbnNmb3JtOlwidHJhbnNmb3JtXCIsd2lkdGg6Qyx4OkMseTpDfSxWPS9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldL2csVz0vW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSovLFg9e2hzOjEscmc6MX0sWT0vLD8oW2FjaGxtcXJzdHZ4el0pLD8vZ2ksWj0vKFthY2hsbXJxc3R2el0pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5LF0qKCgtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qKSspL2lnLCQ9LyhbcnN0bV0pW1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5LF0qKCgtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/W1xceDA5XFx4MGFcXHgwYlxceDBjXFx4MGRcXHgyMFxceGEwXFx1MTY4MFxcdTE4MGVcXHUyMDAwXFx1MjAwMVxcdTIwMDJcXHUyMDAzXFx1MjAwNFxcdTIwMDVcXHUyMDA2XFx1MjAwN1xcdTIwMDhcXHUyMDA5XFx1MjAwYVxcdTIwMmZcXHUyMDVmXFx1MzAwMFxcdTIwMjhcXHUyMDI5XSosP1tcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qKSspL2lnLF89LygtP1xcZCpcXC4/XFxkKig/OmVbXFwtK10/XFxkKyk/KVtcXHgwOVxceDBhXFx4MGJcXHgwY1xceDBkXFx4MjBcXHhhMFxcdTE2ODBcXHUxODBlXFx1MjAwMFxcdTIwMDFcXHUyMDAyXFx1MjAwM1xcdTIwMDRcXHUyMDA1XFx1MjAwNlxcdTIwMDdcXHUyMDA4XFx1MjAwOVxcdTIwMGFcXHUyMDJmXFx1MjA1ZlxcdTMwMDBcXHUyMDI4XFx1MjAyOV0qLD9bXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKi9pZyxiYT1hLl9yYWRpYWxfZ3JhZGllbnQ9L15yKD86XFwoKFteLF0rPylbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKixbXFx4MDlcXHgwYVxceDBiXFx4MGNcXHgwZFxceDIwXFx4YTBcXHUxNjgwXFx1MTgwZVxcdTIwMDBcXHUyMDAxXFx1MjAwMlxcdTIwMDNcXHUyMDA0XFx1MjAwNVxcdTIwMDZcXHUyMDA3XFx1MjAwOFxcdTIwMDlcXHUyMDBhXFx1MjAyZlxcdTIwNWZcXHUzMDAwXFx1MjAyOFxcdTIwMjldKihbXlxcKV0rPylcXCkpPy8sYmI9e30sYmM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5rZXktYi5rZXl9LGJkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFEoYSktUShiKX0sYmU9ZnVuY3Rpb24oKXt9LGJmPWZ1bmN0aW9uKGEpe3JldHVybiBhfSxiZz1hLl9yZWN0UGF0aD1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKGUpcmV0dXJuW1tcIk1cIixhK2UsYl0sW1wibFwiLGMtZSoyLDBdLFtcImFcIixlLGUsMCwwLDEsZSxlXSxbXCJsXCIsMCxkLWUqMl0sW1wiYVwiLGUsZSwwLDAsMSwtZSxlXSxbXCJsXCIsZSoyLWMsMF0sW1wiYVwiLGUsZSwwLDAsMSwtZSwtZV0sW1wibFwiLDAsZSoyLWRdLFtcImFcIixlLGUsMCwwLDEsZSwtZV0sW1wielwiXV07cmV0dXJuW1tcIk1cIixhLGJdLFtcImxcIixjLDBdLFtcImxcIiwwLGRdLFtcImxcIiwtYywwXSxbXCJ6XCJdXX0sYmg9ZnVuY3Rpb24oYSxiLGMsZCl7ZD09bnVsbCYmKGQ9Yyk7cmV0dXJuW1tcIk1cIixhLGJdLFtcIm1cIiwwLC1kXSxbXCJhXCIsYyxkLDAsMSwxLDAsMipkXSxbXCJhXCIsYyxkLDAsMSwxLDAsLTIqZF0sW1wielwiXV19LGJpPWEuX2dldFBhdGg9e3BhdGg6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuYXR0cihcInBhdGhcIil9LGNpcmNsZTpmdW5jdGlvbihhKXt2YXIgYj1hLmF0dHJzO3JldHVybiBiaChiLmN4LGIuY3ksYi5yKX0sZWxsaXBzZTpmdW5jdGlvbihhKXt2YXIgYj1hLmF0dHJzO3JldHVybiBiaChiLmN4LGIuY3ksYi5yeCxiLnJ5KX0scmVjdDpmdW5jdGlvbihhKXt2YXIgYj1hLmF0dHJzO3JldHVybiBiZyhiLngsYi55LGIud2lkdGgsYi5oZWlnaHQsYi5yKX0saW1hZ2U6ZnVuY3Rpb24oYSl7dmFyIGI9YS5hdHRycztyZXR1cm4gYmcoYi54LGIueSxiLndpZHRoLGIuaGVpZ2h0KX0sdGV4dDpmdW5jdGlvbihhKXt2YXIgYj1hLl9nZXRCQm94KCk7cmV0dXJuIGJnKGIueCxiLnksYi53aWR0aCxiLmhlaWdodCl9fSxiaj1hLm1hcFBhdGg9ZnVuY3Rpb24oYSxiKXtpZighYilyZXR1cm4gYTt2YXIgYyxkLGUsZixnLGgsaTthPWJSKGEpO2ZvcihlPTAsZz1hLmxlbmd0aDtlPGc7ZSsrKXtpPWFbZV07Zm9yKGY9MSxoPWkubGVuZ3RoO2Y8aDtmKz0yKWM9Yi54KGlbZl0saVtmKzFdKSxkPWIueShpW2ZdLGlbZisxXSksaVtmXT1jLGlbZisxXT1kfXJldHVybiBhfTthLl9nPWgsYS50eXBlPWgud2luLlNWR0FuZ2xlfHxoLmRvYy5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKFwiaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvZmVhdHVyZSNCYXNpY1N0cnVjdHVyZVwiLFwiMS4xXCIpP1wiU1ZHXCI6XCJWTUxcIjtpZihhLnR5cGU9PVwiVk1MXCIpe3ZhciBiaz1oLmRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGJsO2JrLmlubmVySFRNTD0nPHY6c2hhcGUgYWRqPVwiMVwiLz4nLGJsPWJrLmZpcnN0Q2hpbGQsYmwuc3R5bGUuYmVoYXZpb3I9XCJ1cmwoI2RlZmF1bHQjVk1MKVwiO2lmKCFibHx8dHlwZW9mIGJsLmFkaiE9XCJvYmplY3RcIilyZXR1cm4gYS50eXBlPXA7Yms9bnVsbH1hLnN2Zz0hKGEudm1sPWEudHlwZT09XCJWTUxcIiksYS5fUGFwZXI9aixhLmZuPWs9ai5wcm90b3R5cGU9YS5wcm90b3R5cGUsYS5faWQ9MCxhLl9vaWQ9MCxhLmlzPWZ1bmN0aW9uKGEsYil7Yj12LmNhbGwoYik7aWYoYj09XCJmaW5pdGVcIilyZXR1cm4hTVtnXSgrYSk7aWYoYj09XCJhcnJheVwiKXJldHVybiBhIGluc3RhbmNlb2YgQXJyYXk7cmV0dXJuIGI9PVwibnVsbFwiJiZhPT09bnVsbHx8Yj09dHlwZW9mIGEmJmEhPT1udWxsfHxiPT1cIm9iamVjdFwiJiZhPT09T2JqZWN0KGEpfHxiPT1cImFycmF5XCImJkFycmF5LmlzQXJyYXkmJkFycmF5LmlzQXJyYXkoYSl8fEguY2FsbChhKS5zbGljZSg4LC0xKS50b0xvd2VyQ2FzZSgpPT1ifSxhLmFuZ2xlPWZ1bmN0aW9uKGIsYyxkLGUsZixnKXtpZihmPT1udWxsKXt2YXIgaD1iLWQsaT1jLWU7aWYoIWgmJiFpKXJldHVybiAwO3JldHVybigxODArdy5hdGFuMigtaSwtaCkqMTgwL0IrMzYwKSUzNjB9cmV0dXJuIGEuYW5nbGUoYixjLGYsZyktYS5hbmdsZShkLGUsZixnKX0sYS5yYWQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGElMzYwKkIvMTgwfSxhLmRlZz1mdW5jdGlvbihhKXtyZXR1cm4gYSoxODAvQiUzNjB9LGEuc25hcFRvPWZ1bmN0aW9uKGIsYyxkKXtkPWEuaXMoZCxcImZpbml0ZVwiKT9kOjEwO2lmKGEuaXMoYixFKSl7dmFyIGU9Yi5sZW5ndGg7d2hpbGUoZS0tKWlmKHooYltlXS1jKTw9ZClyZXR1cm4gYltlXX1lbHNle2I9K2I7dmFyIGY9YyViO2lmKGY8ZClyZXR1cm4gYy1mO2lmKGY+Yi1kKXJldHVybiBjLWYrYn1yZXR1cm4gY307dmFyIGJuPWEuY3JlYXRlVVVJRD1mdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe3JldHVyblwieHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4XCIucmVwbGFjZShhLGIpLnRvVXBwZXJDYXNlKCl9fSgvW3h5XS9nLGZ1bmN0aW9uKGEpe3ZhciBiPXcucmFuZG9tKCkqMTZ8MCxjPWE9PVwieFwiP2I6YiYzfDg7cmV0dXJuIGMudG9TdHJpbmcoMTYpfSk7YS5zZXRXaW5kb3c9ZnVuY3Rpb24oYil7ZXZlKFwicmFwaGFlbC5zZXRXaW5kb3dcIixhLGgud2luLGIpLGgud2luPWIsaC5kb2M9aC53aW4uZG9jdW1lbnQsYS5fZW5naW5lLmluaXRXaW4mJmEuX2VuZ2luZS5pbml0V2luKGgud2luKX07dmFyIGJvPWZ1bmN0aW9uKGIpe2lmKGEudm1sKXt2YXIgYz0vXlxccyt8XFxzKyQvZyxkO3RyeXt2YXIgZT1uZXcgQWN0aXZlWE9iamVjdChcImh0bWxmaWxlXCIpO2Uud3JpdGUoXCI8Ym9keT5cIiksZS5jbG9zZSgpLGQ9ZS5ib2R5fWNhdGNoKGYpe2Q9Y3JlYXRlUG9wdXAoKS5kb2N1bWVudC5ib2R5fXZhciBnPWQuY3JlYXRlVGV4dFJhbmdlKCk7Ym89YnYoZnVuY3Rpb24oYSl7dHJ5e2Quc3R5bGUuY29sb3I9cihhKS5yZXBsYWNlKGMscCk7dmFyIGI9Zy5xdWVyeUNvbW1hbmRWYWx1ZShcIkZvcmVDb2xvclwiKTtiPShiJjI1NSk8PDE2fGImNjUyODB8KGImMTY3MTE2ODApPj4+MTY7cmV0dXJuXCIjXCIrKFwiMDAwMDAwXCIrYi50b1N0cmluZygxNikpLnNsaWNlKC02KX1jYXRjaChlKXtyZXR1cm5cIm5vbmVcIn19KX1lbHNle3ZhciBpPWguZG9jLmNyZWF0ZUVsZW1lbnQoXCJpXCIpO2kudGl0bGU9XCJSYXBoYe+/vWwgQ29sb3VyIFBpY2tlclwiLGkuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixoLmRvYy5ib2R5LmFwcGVuZENoaWxkKGkpLGJvPWJ2KGZ1bmN0aW9uKGEpe2kuc3R5bGUuY29sb3I9YTtyZXR1cm4gaC5kb2MuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShpLHApLmdldFByb3BlcnR5VmFsdWUoXCJjb2xvclwiKX0pfXJldHVybiBibyhiKX0sYnA9ZnVuY3Rpb24oKXtyZXR1cm5cImhzYihcIitbdGhpcy5oLHRoaXMucyx0aGlzLmJdK1wiKVwifSxicT1mdW5jdGlvbigpe3JldHVyblwiaHNsKFwiK1t0aGlzLmgsdGhpcy5zLHRoaXMubF0rXCIpXCJ9LGJyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaGV4fSxicz1mdW5jdGlvbihiLGMsZCl7Yz09bnVsbCYmYS5pcyhiLFwib2JqZWN0XCIpJiZcInJcImluIGImJlwiZ1wiaW4gYiYmXCJiXCJpbiBiJiYoZD1iLmIsYz1iLmcsYj1iLnIpO2lmKGM9PW51bGwmJmEuaXMoYixEKSl7dmFyIGU9YS5nZXRSR0IoYik7Yj1lLnIsYz1lLmcsZD1lLmJ9aWYoYj4xfHxjPjF8fGQ+MSliLz0yNTUsYy89MjU1LGQvPTI1NTtyZXR1cm5bYixjLGRdfSxidD1mdW5jdGlvbihiLGMsZCxlKXtiKj0yNTUsYyo9MjU1LGQqPTI1NTt2YXIgZj17cjpiLGc6YyxiOmQsaGV4OmEucmdiKGIsYyxkKSx0b1N0cmluZzpicn07YS5pcyhlLFwiZmluaXRlXCIpJiYoZi5vcGFjaXR5PWUpO3JldHVybiBmfTthLmNvbG9yPWZ1bmN0aW9uKGIpe3ZhciBjO2EuaXMoYixcIm9iamVjdFwiKSYmXCJoXCJpbiBiJiZcInNcImluIGImJlwiYlwiaW4gYj8oYz1hLmhzYjJyZ2IoYiksYi5yPWMucixiLmc9Yy5nLGIuYj1jLmIsYi5oZXg9Yy5oZXgpOmEuaXMoYixcIm9iamVjdFwiKSYmXCJoXCJpbiBiJiZcInNcImluIGImJlwibFwiaW4gYj8oYz1hLmhzbDJyZ2IoYiksYi5yPWMucixiLmc9Yy5nLGIuYj1jLmIsYi5oZXg9Yy5oZXgpOihhLmlzKGIsXCJzdHJpbmdcIikmJihiPWEuZ2V0UkdCKGIpKSxhLmlzKGIsXCJvYmplY3RcIikmJlwiclwiaW4gYiYmXCJnXCJpbiBiJiZcImJcImluIGI/KGM9YS5yZ2IyaHNsKGIpLGIuaD1jLmgsYi5zPWMucyxiLmw9Yy5sLGM9YS5yZ2IyaHNiKGIpLGIudj1jLmIpOihiPXtoZXg6XCJub25lXCJ9LGIucj1iLmc9Yi5iPWIuaD1iLnM9Yi52PWIubD0tMSkpLGIudG9TdHJpbmc9YnI7cmV0dXJuIGJ9LGEuaHNiMnJnYj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLmlzKGEsXCJvYmplY3RcIikmJlwiaFwiaW4gYSYmXCJzXCJpbiBhJiZcImJcImluIGEmJihjPWEuYixiPWEucyxhPWEuaCxkPWEubyksYSo9MzYwO3ZhciBlLGYsZyxoLGk7YT1hJTM2MC82MCxpPWMqYixoPWkqKDEteihhJTItMSkpLGU9Zj1nPWMtaSxhPX5+YSxlKz1baSxoLDAsMCxoLGldW2FdLGYrPVtoLGksaSxoLDAsMF1bYV0sZys9WzAsMCxoLGksaSxoXVthXTtyZXR1cm4gYnQoZSxmLGcsZCl9LGEuaHNsMnJnYj1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLmlzKGEsXCJvYmplY3RcIikmJlwiaFwiaW4gYSYmXCJzXCJpbiBhJiZcImxcImluIGEmJihjPWEubCxiPWEucyxhPWEuaCk7aWYoYT4xfHxiPjF8fGM+MSlhLz0zNjAsYi89MTAwLGMvPTEwMDthKj0zNjA7dmFyIGUsZixnLGgsaTthPWElMzYwLzYwLGk9MipiKihjPC41P2M6MS1jKSxoPWkqKDEteihhJTItMSkpLGU9Zj1nPWMtaS8yLGE9fn5hLGUrPVtpLGgsMCwwLGgsaV1bYV0sZis9W2gsaSxpLGgsMCwwXVthXSxnKz1bMCwwLGgsaSxpLGhdW2FdO3JldHVybiBidChlLGYsZyxkKX0sYS5yZ2IyaHNiPWZ1bmN0aW9uKGEsYixjKXtjPWJzKGEsYixjKSxhPWNbMF0sYj1jWzFdLGM9Y1syXTt2YXIgZCxlLGYsZztmPXgoYSxiLGMpLGc9Zi15KGEsYixjKSxkPWc9PTA/bnVsbDpmPT1hPyhiLWMpL2c6Zj09Yj8oYy1hKS9nKzI6KGEtYikvZys0LGQ9KGQrMzYwKSU2KjYwLzM2MCxlPWc9PTA/MDpnL2Y7cmV0dXJue2g6ZCxzOmUsYjpmLHRvU3RyaW5nOmJwfX0sYS5yZ2IyaHNsPWZ1bmN0aW9uKGEsYixjKXtjPWJzKGEsYixjKSxhPWNbMF0sYj1jWzFdLGM9Y1syXTt2YXIgZCxlLGYsZyxoLGk7Zz14KGEsYixjKSxoPXkoYSxiLGMpLGk9Zy1oLGQ9aT09MD9udWxsOmc9PWE/KGItYykvaTpnPT1iPyhjLWEpL2krMjooYS1iKS9pKzQsZD0oZCszNjApJTYqNjAvMzYwLGY9KGcraCkvMixlPWk9PTA/MDpmPC41P2kvKDIqZik6aS8oMi0yKmYpO3JldHVybntoOmQsczplLGw6Zix0b1N0cmluZzpicX19LGEuX3BhdGgyc3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuam9pbihcIixcIikucmVwbGFjZShZLFwiJDFcIil9O3ZhciBidz1hLl9wcmVsb2FkPWZ1bmN0aW9uKGEsYil7dmFyIGM9aC5kb2MuY3JlYXRlRWxlbWVudChcImltZ1wiKTtjLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW1cIixjLm9ubG9hZD1mdW5jdGlvbigpe2IuY2FsbCh0aGlzKSx0aGlzLm9ubG9hZD1udWxsLGguZG9jLmJvZHkucmVtb3ZlQ2hpbGQodGhpcyl9LGMub25lcnJvcj1mdW5jdGlvbigpe2guZG9jLmJvZHkucmVtb3ZlQ2hpbGQodGhpcyl9LGguZG9jLmJvZHkuYXBwZW5kQ2hpbGQoYyksYy5zcmM9YX07YS5nZXRSR0I9YnYoZnVuY3Rpb24oYil7aWYoIWJ8fCEhKChiPXIoYikpLmluZGV4T2YoXCItXCIpKzEpKXJldHVybntyOi0xLGc6LTEsYjotMSxoZXg6XCJub25lXCIsZXJyb3I6MSx0b1N0cmluZzpieH07aWYoYj09XCJub25lXCIpcmV0dXJue3I6LTEsZzotMSxiOi0xLGhleDpcIm5vbmVcIix0b1N0cmluZzpieH07IVhbZ10oYi50b0xvd2VyQ2FzZSgpLnN1YnN0cmluZygwLDIpKSYmYi5jaGFyQXQoKSE9XCIjXCImJihiPWJvKGIpKTt2YXIgYyxkLGUsZixoLGksaixrPWIubWF0Y2goTCk7aWYoayl7a1syXSYmKGY9UihrWzJdLnN1YnN0cmluZyg1KSwxNiksZT1SKGtbMl0uc3Vic3RyaW5nKDMsNSksMTYpLGQ9UihrWzJdLnN1YnN0cmluZygxLDMpLDE2KSksa1szXSYmKGY9UigoaT1rWzNdLmNoYXJBdCgzKSkraSwxNiksZT1SKChpPWtbM10uY2hhckF0KDIpKStpLDE2KSxkPVIoKGk9a1szXS5jaGFyQXQoMSkpK2ksMTYpKSxrWzRdJiYoaj1rWzRdW3NdKFcpLGQ9UShqWzBdKSxqWzBdLnNsaWNlKC0xKT09XCIlXCImJihkKj0yLjU1KSxlPVEoalsxXSksalsxXS5zbGljZSgtMSk9PVwiJVwiJiYoZSo9Mi41NSksZj1RKGpbMl0pLGpbMl0uc2xpY2UoLTEpPT1cIiVcIiYmKGYqPTIuNTUpLGtbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLDQpPT1cInJnYmFcIiYmKGg9UShqWzNdKSksalszXSYmalszXS5zbGljZSgtMSk9PVwiJVwiJiYoaC89MTAwKSk7aWYoa1s1XSl7aj1rWzVdW3NdKFcpLGQ9UShqWzBdKSxqWzBdLnNsaWNlKC0xKT09XCIlXCImJihkKj0yLjU1KSxlPVEoalsxXSksalsxXS5zbGljZSgtMSk9PVwiJVwiJiYoZSo9Mi41NSksZj1RKGpbMl0pLGpbMl0uc2xpY2UoLTEpPT1cIiVcIiYmKGYqPTIuNTUpLChqWzBdLnNsaWNlKC0zKT09XCJkZWdcInx8alswXS5zbGljZSgtMSk9PVwi77+9XCIpJiYoZC89MzYwKSxrWzFdLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCw0KT09XCJoc2JhXCImJihoPVEoalszXSkpLGpbM10mJmpbM10uc2xpY2UoLTEpPT1cIiVcIiYmKGgvPTEwMCk7cmV0dXJuIGEuaHNiMnJnYihkLGUsZixoKX1pZihrWzZdKXtqPWtbNl1bc10oVyksZD1RKGpbMF0pLGpbMF0uc2xpY2UoLTEpPT1cIiVcIiYmKGQqPTIuNTUpLGU9UShqWzFdKSxqWzFdLnNsaWNlKC0xKT09XCIlXCImJihlKj0yLjU1KSxmPVEoalsyXSksalsyXS5zbGljZSgtMSk9PVwiJVwiJiYoZio9Mi41NSksKGpbMF0uc2xpY2UoLTMpPT1cImRlZ1wifHxqWzBdLnNsaWNlKC0xKT09XCLvv71cIikmJihkLz0zNjApLGtbMV0udG9Mb3dlckNhc2UoKS5zbGljZSgwLDQpPT1cImhzbGFcIiYmKGg9UShqWzNdKSksalszXSYmalszXS5zbGljZSgtMSk9PVwiJVwiJiYoaC89MTAwKTtyZXR1cm4gYS5oc2wycmdiKGQsZSxmLGgpfWs9e3I6ZCxnOmUsYjpmLHRvU3RyaW5nOmJ4fSxrLmhleD1cIiNcIisoMTY3NzcyMTZ8ZnxlPDw4fGQ8PDE2KS50b1N0cmluZygxNikuc2xpY2UoMSksYS5pcyhoLFwiZmluaXRlXCIpJiYoay5vcGFjaXR5PWgpO3JldHVybiBrfXJldHVybntyOi0xLGc6LTEsYjotMSxoZXg6XCJub25lXCIsZXJyb3I6MSx0b1N0cmluZzpieH19LGEpLGEuaHNiPWJ2KGZ1bmN0aW9uKGIsYyxkKXtyZXR1cm4gYS5oc2IycmdiKGIsYyxkKS5oZXh9KSxhLmhzbD1idihmdW5jdGlvbihiLGMsZCl7cmV0dXJuIGEuaHNsMnJnYihiLGMsZCkuaGV4fSksYS5yZ2I9YnYoZnVuY3Rpb24oYSxiLGMpe3JldHVyblwiI1wiKygxNjc3NzIxNnxjfGI8PDh8YTw8MTYpLnRvU3RyaW5nKDE2KS5zbGljZSgxKX0pLGEuZ2V0Q29sb3I9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nZXRDb2xvci5zdGFydD10aGlzLmdldENvbG9yLnN0YXJ0fHx7aDowLHM6MSxiOmF8fC43NX0sYz10aGlzLmhzYjJyZ2IoYi5oLGIucyxiLmIpO2IuaCs9LjA3NSxiLmg+MSYmKGIuaD0wLGIucy09LjIsYi5zPD0wJiYodGhpcy5nZXRDb2xvci5zdGFydD17aDowLHM6MSxiOmIuYn0pKTtyZXR1cm4gYy5oZXh9LGEuZ2V0Q29sb3IucmVzZXQ9ZnVuY3Rpb24oKXtkZWxldGUgdGhpcy5zdGFydH0sYS5wYXJzZVBhdGhTdHJpbmc9ZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuIG51bGw7dmFyIGM9YnooYik7aWYoYy5hcnIpcmV0dXJuIGJKKGMuYXJyKTt2YXIgZD17YTo3LGM6NixoOjEsbDoyLG06MixyOjQscTo0LHM6NCx0OjIsdjoxLHo6MH0sZT1bXTthLmlzKGIsRSkmJmEuaXMoYlswXSxFKSYmKGU9YkooYikpLGUubGVuZ3RofHxyKGIpLnJlcGxhY2UoWixmdW5jdGlvbihhLGIsYyl7dmFyIGY9W10sZz1iLnRvTG93ZXJDYXNlKCk7Yy5yZXBsYWNlKF8sZnVuY3Rpb24oYSxiKXtiJiZmLnB1c2goK2IpfSksZz09XCJtXCImJmYubGVuZ3RoPjImJihlLnB1c2goW2JdW25dKGYuc3BsaWNlKDAsMikpKSxnPVwibFwiLGI9Yj09XCJtXCI/XCJsXCI6XCJMXCIpO2lmKGc9PVwiclwiKWUucHVzaChbYl1bbl0oZikpO2Vsc2Ugd2hpbGUoZi5sZW5ndGg+PWRbZ10pe2UucHVzaChbYl1bbl0oZi5zcGxpY2UoMCxkW2ddKSkpO2lmKCFkW2ddKWJyZWFrfX0pLGUudG9TdHJpbmc9YS5fcGF0aDJzdHJpbmcsYy5hcnI9YkooZSk7cmV0dXJuIGV9LGEucGFyc2VUcmFuc2Zvcm1TdHJpbmc9YnYoZnVuY3Rpb24oYil7aWYoIWIpcmV0dXJuIG51bGw7dmFyIGM9e3I6MyxzOjQsdDoyLG06Nn0sZD1bXTthLmlzKGIsRSkmJmEuaXMoYlswXSxFKSYmKGQ9YkooYikpLGQubGVuZ3RofHxyKGIpLnJlcGxhY2UoJCxmdW5jdGlvbihhLGIsYyl7dmFyIGU9W10sZj12LmNhbGwoYik7Yy5yZXBsYWNlKF8sZnVuY3Rpb24oYSxiKXtiJiZlLnB1c2goK2IpfSksZC5wdXNoKFtiXVtuXShlKSl9KSxkLnRvU3RyaW5nPWEuX3BhdGgyc3RyaW5nO3JldHVybiBkfSk7dmFyIGJ6PWZ1bmN0aW9uKGEpe3ZhciBiPWJ6LnBzPWJ6LnBzfHx7fTtiW2FdP2JbYV0uc2xlZXA9MTAwOmJbYV09e3NsZWVwOjEwMH0sc2V0VGltZW91dChmdW5jdGlvbigpe2Zvcih2YXIgYyBpbiBiKWJbZ10oYykmJmMhPWEmJihiW2NdLnNsZWVwLS0sIWJbY10uc2xlZXAmJmRlbGV0ZSBiW2NdKX0pO3JldHVybiBiW2FdfTthLmZpbmREb3RzQXRTZWdtZW50PWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXt2YXIgaj0xLWksaz1BKGosMyksbD1BKGosMiksbT1pKmksbj1tKmksbz1rKmErbCozKmkqYytqKjMqaSppKmUrbipnLHA9aypiK2wqMyppKmQraiozKmkqaSpmK24qaCxxPWErMippKihjLWEpK20qKGUtMipjK2EpLHI9YisyKmkqKGQtYikrbSooZi0yKmQrYikscz1jKzIqaSooZS1jKSttKihnLTIqZStjKSx0PWQrMippKihmLWQpK20qKGgtMipmK2QpLHU9aiphK2kqYyx2PWoqYitpKmQseD1qKmUraSpnLHk9aipmK2kqaCx6PTkwLXcuYXRhbjIocS1zLHItdCkqMTgwL0I7KHE+c3x8cjx0KSYmKHorPTE4MCk7cmV0dXJue3g6byx5OnAsbTp7eDpxLHk6cn0sbjp7eDpzLHk6dH0sc3RhcnQ6e3g6dSx5OnZ9LGVuZDp7eDp4LHk6eX0sYWxwaGE6en19LGEuYmV6aWVyQkJveD1mdW5jdGlvbihiLGMsZCxlLGYsZyxoLGkpe2EuaXMoYixcImFycmF5XCIpfHwoYj1bYixjLGQsZSxmLGcsaCxpXSk7dmFyIGo9YlEuYXBwbHkobnVsbCxiKTtyZXR1cm57eDpqLm1pbi54LHk6ai5taW4ueSx4MjpqLm1heC54LHkyOmoubWF4Lnksd2lkdGg6ai5tYXgueC1qLm1pbi54LGhlaWdodDpqLm1heC55LWoubWluLnl9fSxhLmlzUG9pbnRJbnNpZGVCQm94PWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYj49YS54JiZiPD1hLngyJiZjPj1hLnkmJmM8PWEueTJ9LGEuaXNCQm94SW50ZXJzZWN0PWZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5pc1BvaW50SW5zaWRlQkJveDtyZXR1cm4gZChjLGIueCxiLnkpfHxkKGMsYi54MixiLnkpfHxkKGMsYi54LGIueTIpfHxkKGMsYi54MixiLnkyKXx8ZChiLGMueCxjLnkpfHxkKGIsYy54MixjLnkpfHxkKGIsYy54LGMueTIpfHxkKGIsYy54MixjLnkyKXx8KGIueDxjLngyJiZiLng+Yy54fHxjLng8Yi54MiYmYy54PmIueCkmJihiLnk8Yy55MiYmYi55PmMueXx8Yy55PGIueTImJmMueT5iLnkpfSxhLnBhdGhJbnRlcnNlY3Rpb249ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYkgoYSxiKX0sYS5wYXRoSW50ZXJzZWN0aW9uTnVtYmVyPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGJIKGEsYiwxKX0sYS5pc1BvaW50SW5zaWRlUGF0aD1mdW5jdGlvbihiLGMsZCl7dmFyIGU9YS5wYXRoQkJveChiKTtyZXR1cm4gYS5pc1BvaW50SW5zaWRlQkJveChlLGMsZCkmJmJIKGIsW1tcIk1cIixjLGRdLFtcIkhcIixlLngyKzEwXV0sMSklMj09MX0sYS5fcmVtb3ZlZEZhY3Rvcnk9ZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKCl7ZXZlKFwicmFwaGFlbC5sb2dcIixudWxsLFwiUmFwaGHvv71sOiB5b3UgYXJlIGNhbGxpbmcgdG8gbWV0aG9kIO+/vVwiK2ErXCLvv70gb2YgcmVtb3ZlZCBvYmplY3RcIixhKX19O3ZhciBiST1hLnBhdGhCQm94PWZ1bmN0aW9uKGEpe3ZhciBiPWJ6KGEpO2lmKGIuYmJveClyZXR1cm4gYi5iYm94O2lmKCFhKXJldHVybnt4OjAseTowLHdpZHRoOjAsaGVpZ2h0OjAseDI6MCx5MjowfTthPWJSKGEpO3ZhciBjPTAsZD0wLGU9W10sZj1bXSxnO2Zvcih2YXIgaD0wLGk9YS5sZW5ndGg7aDxpO2grKyl7Zz1hW2hdO2lmKGdbMF09PVwiTVwiKWM9Z1sxXSxkPWdbMl0sZS5wdXNoKGMpLGYucHVzaChkKTtlbHNle3ZhciBqPWJRKGMsZCxnWzFdLGdbMl0sZ1szXSxnWzRdLGdbNV0sZ1s2XSk7ZT1lW25dKGoubWluLngsai5tYXgueCksZj1mW25dKGoubWluLnksai5tYXgueSksYz1nWzVdLGQ9Z1s2XX19dmFyIGs9eVttXSgwLGUpLGw9eVttXSgwLGYpLG89eFttXSgwLGUpLHA9eFttXSgwLGYpLHE9e3g6ayx5OmwseDI6byx5MjpwLHdpZHRoOm8tayxoZWlnaHQ6cC1sfTtiLmJib3g9Ym0ocSk7cmV0dXJuIHF9LGJKPWZ1bmN0aW9uKGIpe3ZhciBjPWJtKGIpO2MudG9TdHJpbmc9YS5fcGF0aDJzdHJpbmc7cmV0dXJuIGN9LGJLPWEuX3BhdGhUb1JlbGF0aXZlPWZ1bmN0aW9uKGIpe3ZhciBjPWJ6KGIpO2lmKGMucmVsKXJldHVybiBiSihjLnJlbCk7aWYoIWEuaXMoYixFKXx8IWEuaXMoYiYmYlswXSxFKSliPWEucGFyc2VQYXRoU3RyaW5nKGIpO3ZhciBkPVtdLGU9MCxmPTAsZz0wLGg9MCxpPTA7YlswXVswXT09XCJNXCImJihlPWJbMF1bMV0sZj1iWzBdWzJdLGc9ZSxoPWYsaSsrLGQucHVzaChbXCJNXCIsZSxmXSkpO2Zvcih2YXIgaj1pLGs9Yi5sZW5ndGg7ajxrO2orKyl7dmFyIGw9ZFtqXT1bXSxtPWJbal07aWYobVswXSE9di5jYWxsKG1bMF0pKXtsWzBdPXYuY2FsbChtWzBdKTtzd2l0Y2gobFswXSl7Y2FzZVwiYVwiOmxbMV09bVsxXSxsWzJdPW1bMl0sbFszXT1tWzNdLGxbNF09bVs0XSxsWzVdPW1bNV0sbFs2XT0rKG1bNl0tZSkudG9GaXhlZCgzKSxsWzddPSsobVs3XS1mKS50b0ZpeGVkKDMpO2JyZWFrO2Nhc2VcInZcIjpsWzFdPSsobVsxXS1mKS50b0ZpeGVkKDMpO2JyZWFrO2Nhc2VcIm1cIjpnPW1bMV0saD1tWzJdO2RlZmF1bHQ6Zm9yKHZhciBuPTEsbz1tLmxlbmd0aDtuPG87bisrKWxbbl09KyhtW25dLShuJTI/ZTpmKSkudG9GaXhlZCgzKX19ZWxzZXtsPWRbal09W10sbVswXT09XCJtXCImJihnPW1bMV0rZSxoPW1bMl0rZik7Zm9yKHZhciBwPTAscT1tLmxlbmd0aDtwPHE7cCsrKWRbal1bcF09bVtwXX12YXIgcj1kW2pdLmxlbmd0aDtzd2l0Y2goZFtqXVswXSl7Y2FzZVwielwiOmU9ZyxmPWg7YnJlYWs7Y2FzZVwiaFwiOmUrPStkW2pdW3ItMV07YnJlYWs7Y2FzZVwidlwiOmYrPStkW2pdW3ItMV07YnJlYWs7ZGVmYXVsdDplKz0rZFtqXVtyLTJdLGYrPStkW2pdW3ItMV19fWQudG9TdHJpbmc9YS5fcGF0aDJzdHJpbmcsYy5yZWw9YkooZCk7cmV0dXJuIGR9LGJMPWEuX3BhdGhUb0Fic29sdXRlPWZ1bmN0aW9uKGIpe3ZhciBjPWJ6KGIpO2lmKGMuYWJzKXJldHVybiBiSihjLmFicyk7aWYoIWEuaXMoYixFKXx8IWEuaXMoYiYmYlswXSxFKSliPWEucGFyc2VQYXRoU3RyaW5nKGIpO2lmKCFifHwhYi5sZW5ndGgpcmV0dXJuW1tcIk1cIiwwLDBdXTt2YXIgZD1bXSxlPTAsZj0wLGc9MCxoPTAsaT0wO2JbMF1bMF09PVwiTVwiJiYoZT0rYlswXVsxXSxmPStiWzBdWzJdLGc9ZSxoPWYsaSsrLGRbMF09W1wiTVwiLGUsZl0pO3ZhciBqPWIubGVuZ3RoPT0zJiZiWzBdWzBdPT1cIk1cIiYmYlsxXVswXS50b1VwcGVyQ2FzZSgpPT1cIlJcIiYmYlsyXVswXS50b1VwcGVyQ2FzZSgpPT1cIlpcIjtmb3IodmFyIGssbCxtPWksbz1iLmxlbmd0aDttPG87bSsrKXtkLnB1c2goaz1bXSksbD1iW21dO2lmKGxbMF0hPVMuY2FsbChsWzBdKSl7a1swXT1TLmNhbGwobFswXSk7c3dpdGNoKGtbMF0pe2Nhc2VcIkFcIjprWzFdPWxbMV0sa1syXT1sWzJdLGtbM109bFszXSxrWzRdPWxbNF0sa1s1XT1sWzVdLGtbNl09KyhsWzZdK2UpLGtbN109KyhsWzddK2YpO2JyZWFrO2Nhc2VcIlZcIjprWzFdPStsWzFdK2Y7YnJlYWs7Y2FzZVwiSFwiOmtbMV09K2xbMV0rZTticmVhaztjYXNlXCJSXCI6dmFyIHA9W2UsZl1bbl0obC5zbGljZSgxKSk7Zm9yKHZhciBxPTIscj1wLmxlbmd0aDtxPHI7cSsrKXBbcV09K3BbcV0rZSxwWysrcV09K3BbcV0rZjtkLnBvcCgpLGQ9ZFtuXShieShwLGopKTticmVhaztjYXNlXCJNXCI6Zz0rbFsxXStlLGg9K2xbMl0rZjtkZWZhdWx0OmZvcihxPTEscj1sLmxlbmd0aDtxPHI7cSsrKWtbcV09K2xbcV0rKHElMj9lOmYpfX1lbHNlIGlmKGxbMF09PVwiUlwiKXA9W2UsZl1bbl0obC5zbGljZSgxKSksZC5wb3AoKSxkPWRbbl0oYnkocCxqKSksaz1bXCJSXCJdW25dKGwuc2xpY2UoLTIpKTtlbHNlIGZvcih2YXIgcz0wLHQ9bC5sZW5ndGg7czx0O3MrKylrW3NdPWxbc107c3dpdGNoKGtbMF0pe2Nhc2VcIlpcIjplPWcsZj1oO2JyZWFrO2Nhc2VcIkhcIjplPWtbMV07YnJlYWs7Y2FzZVwiVlwiOmY9a1sxXTticmVhaztjYXNlXCJNXCI6Zz1rW2subGVuZ3RoLTJdLGg9a1trLmxlbmd0aC0xXTtkZWZhdWx0OmU9a1trLmxlbmd0aC0yXSxmPWtbay5sZW5ndGgtMV19fWQudG9TdHJpbmc9YS5fcGF0aDJzdHJpbmcsYy5hYnM9YkooZCk7cmV0dXJuIGR9LGJNPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVyblthLGIsYyxkLGMsZF19LGJOPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz0xLzMsaD0yLzM7cmV0dXJuW2cqYStoKmMsZypiK2gqZCxnKmUraCpjLGcqZitoKmQsZSxmXX0sYk89ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGksail7dmFyIGs9QioxMjAvMTgwLGw9Qi8xODAqKCtlfHwwKSxtPVtdLG8scD1idihmdW5jdGlvbihhLGIsYyl7dmFyIGQ9YSp3LmNvcyhjKS1iKncuc2luKGMpLGU9YSp3LnNpbihjKStiKncuY29zKGMpO3JldHVybnt4OmQseTplfX0pO2lmKCFqKXtvPXAoYSxiLC1sKSxhPW8ueCxiPW8ueSxvPXAoaCxpLC1sKSxoPW8ueCxpPW8ueTt2YXIgcT13LmNvcyhCLzE4MCplKSxyPXcuc2luKEIvMTgwKmUpLHQ9KGEtaCkvMix1PShiLWkpLzIsdj10KnQvKGMqYykrdSp1LyhkKmQpO3Y+MSYmKHY9dy5zcXJ0KHYpLGM9dipjLGQ9dipkKTt2YXIgeD1jKmMseT1kKmQsQT0oZj09Zz8tMToxKSp3LnNxcnQoeigoeCp5LXgqdSp1LXkqdCp0KS8oeCp1KnUreSp0KnQpKSksQz1BKmMqdS9kKyhhK2gpLzIsRD1BKi1kKnQvYysoYitpKS8yLEU9dy5hc2luKCgoYi1EKS9kKS50b0ZpeGVkKDkpKSxGPXcuYXNpbigoKGktRCkvZCkudG9GaXhlZCg5KSk7RT1hPEM/Qi1FOkUsRj1oPEM/Qi1GOkYsRTwwJiYoRT1CKjIrRSksRjwwJiYoRj1CKjIrRiksZyYmRT5GJiYoRT1FLUIqMiksIWcmJkY+RSYmKEY9Ri1CKjIpfWVsc2UgRT1qWzBdLEY9alsxXSxDPWpbMl0sRD1qWzNdO3ZhciBHPUYtRTtpZih6KEcpPmspe3ZhciBIPUYsST1oLEo9aTtGPUUrayooZyYmRj5FPzE6LTEpLGg9QytjKncuY29zKEYpLGk9RCtkKncuc2luKEYpLG09Yk8oaCxpLGMsZCxlLDAsZyxJLEosW0YsSCxDLERdKX1HPUYtRTt2YXIgSz13LmNvcyhFKSxMPXcuc2luKEUpLE09dy5jb3MoRiksTj13LnNpbihGKSxPPXcudGFuKEcvNCksUD00LzMqYypPLFE9NC8zKmQqTyxSPVthLGJdLFM9W2ErUCpMLGItUSpLXSxUPVtoK1AqTixpLVEqTV0sVT1baCxpXTtTWzBdPTIqUlswXS1TWzBdLFNbMV09MipSWzFdLVNbMV07aWYoailyZXR1cm5bUyxULFVdW25dKG0pO209W1MsVCxVXVtuXShtKS5qb2luKClbc10oXCIsXCIpO3ZhciBWPVtdO2Zvcih2YXIgVz0wLFg9bS5sZW5ndGg7VzxYO1crKylWW1ddPVclMj9wKG1bVy0xXSxtW1ddLGwpLnk6cChtW1ddLG1bVysxXSxsKS54O3JldHVybiBWfSxiUD1mdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSl7dmFyIGo9MS1pO3JldHVybnt4OkEoaiwzKSphK0EoaiwyKSozKmkqYytqKjMqaSppKmUrQShpLDMpKmcseTpBKGosMykqYitBKGosMikqMyppKmQraiozKmkqaSpmK0EoaSwzKSpofX0sYlE9YnYoZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoKXt2YXIgaT1lLTIqYythLShnLTIqZStjKSxqPTIqKGMtYSktMiooZS1jKSxrPWEtYyxsPSgtait3LnNxcnQoaipqLTQqaSprKSkvMi9pLG49KC1qLXcuc3FydChqKmotNCppKmspKS8yL2ksbz1bYixoXSxwPVthLGddLHE7eihsKT5cIjFlMTJcIiYmKGw9LjUpLHoobik+XCIxZTEyXCImJihuPS41KSxsPjAmJmw8MSYmKHE9YlAoYSxiLGMsZCxlLGYsZyxoLGwpLHAucHVzaChxLngpLG8ucHVzaChxLnkpKSxuPjAmJm48MSYmKHE9YlAoYSxiLGMsZCxlLGYsZyxoLG4pLHAucHVzaChxLngpLG8ucHVzaChxLnkpKSxpPWYtMipkK2ItKGgtMipmK2QpLGo9MiooZC1iKS0yKihmLWQpLGs9Yi1kLGw9KC1qK3cuc3FydChqKmotNCppKmspKS8yL2ksbj0oLWotdy5zcXJ0KGoqai00KmkqaykpLzIvaSx6KGwpPlwiMWUxMlwiJiYobD0uNSkseihuKT5cIjFlMTJcIiYmKG49LjUpLGw+MCYmbDwxJiYocT1iUChhLGIsYyxkLGUsZixnLGgsbCkscC5wdXNoKHEueCksby5wdXNoKHEueSkpLG4+MCYmbjwxJiYocT1iUChhLGIsYyxkLGUsZixnLGgsbikscC5wdXNoKHEueCksby5wdXNoKHEueSkpO3JldHVybnttaW46e3g6eVttXSgwLHApLHk6eVttXSgwLG8pfSxtYXg6e3g6eFttXSgwLHApLHk6eFttXSgwLG8pfX19KSxiUj1hLl9wYXRoMmN1cnZlPWJ2KGZ1bmN0aW9uKGEsYil7dmFyIGM9IWImJmJ6KGEpO2lmKCFiJiZjLmN1cnZlKXJldHVybiBiSihjLmN1cnZlKTt2YXIgZD1iTChhKSxlPWImJmJMKGIpLGY9e3g6MCx5OjAsYng6MCxieTowLFg6MCxZOjAscXg6bnVsbCxxeTpudWxsfSxnPXt4OjAseTowLGJ4OjAsYnk6MCxYOjAsWTowLHF4Om51bGwscXk6bnVsbH0saD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuW1wiQ1wiLGIueCxiLnksYi54LGIueSxiLngsYi55XTshKGFbMF1pbntUOjEsUToxfSkmJihiLnF4PWIucXk9bnVsbCk7c3dpdGNoKGFbMF0pe2Nhc2VcIk1cIjpiLlg9YVsxXSxiLlk9YVsyXTticmVhaztjYXNlXCJBXCI6YT1bXCJDXCJdW25dKGJPW21dKDAsW2IueCxiLnldW25dKGEuc2xpY2UoMSkpKSk7YnJlYWs7Y2FzZVwiU1wiOmM9Yi54KyhiLngtKGIuYnh8fGIueCkpLGQ9Yi55KyhiLnktKGIuYnl8fGIueSkpLGE9W1wiQ1wiLGMsZF1bbl0oYS5zbGljZSgxKSk7YnJlYWs7Y2FzZVwiVFwiOmIucXg9Yi54KyhiLngtKGIucXh8fGIueCkpLGIucXk9Yi55KyhiLnktKGIucXl8fGIueSkpLGE9W1wiQ1wiXVtuXShiTihiLngsYi55LGIucXgsYi5xeSxhWzFdLGFbMl0pKTticmVhaztjYXNlXCJRXCI6Yi5xeD1hWzFdLGIucXk9YVsyXSxhPVtcIkNcIl1bbl0oYk4oYi54LGIueSxhWzFdLGFbMl0sYVszXSxhWzRdKSk7YnJlYWs7Y2FzZVwiTFwiOmE9W1wiQ1wiXVtuXShiTShiLngsYi55LGFbMV0sYVsyXSkpO2JyZWFrO2Nhc2VcIkhcIjphPVtcIkNcIl1bbl0oYk0oYi54LGIueSxhWzFdLGIueSkpO2JyZWFrO2Nhc2VcIlZcIjphPVtcIkNcIl1bbl0oYk0oYi54LGIueSxiLngsYVsxXSkpO2JyZWFrO2Nhc2VcIlpcIjphPVtcIkNcIl1bbl0oYk0oYi54LGIueSxiLlgsYi5ZKSl9cmV0dXJuIGF9LGk9ZnVuY3Rpb24oYSxiKXtpZihhW2JdLmxlbmd0aD43KXthW2JdLnNoaWZ0KCk7dmFyIGM9YVtiXTt3aGlsZShjLmxlbmd0aClhLnNwbGljZShiKyssMCxbXCJDXCJdW25dKGMuc3BsaWNlKDAsNikpKTthLnNwbGljZShiLDEpLGw9eChkLmxlbmd0aCxlJiZlLmxlbmd0aHx8MCl9fSxqPWZ1bmN0aW9uKGEsYixjLGYsZyl7YSYmYiYmYVtnXVswXT09XCJNXCImJmJbZ11bMF0hPVwiTVwiJiYoYi5zcGxpY2UoZywwLFtcIk1cIixmLngsZi55XSksYy5ieD0wLGMuYnk9MCxjLng9YVtnXVsxXSxjLnk9YVtnXVsyXSxsPXgoZC5sZW5ndGgsZSYmZS5sZW5ndGh8fDApKX07Zm9yKHZhciBrPTAsbD14KGQubGVuZ3RoLGUmJmUubGVuZ3RofHwwKTtrPGw7aysrKXtkW2tdPWgoZFtrXSxmKSxpKGQsayksZSYmKGVba109aChlW2tdLGcpKSxlJiZpKGUsayksaihkLGUsZixnLGspLGooZSxkLGcsZixrKTt2YXIgbz1kW2tdLHA9ZSYmZVtrXSxxPW8ubGVuZ3RoLHI9ZSYmcC5sZW5ndGg7Zi54PW9bcS0yXSxmLnk9b1txLTFdLGYuYng9UShvW3EtNF0pfHxmLngsZi5ieT1RKG9bcS0zXSl8fGYueSxnLmJ4PWUmJihRKHBbci00XSl8fGcueCksZy5ieT1lJiYoUShwW3ItM10pfHxnLnkpLGcueD1lJiZwW3ItMl0sZy55PWUmJnBbci0xXX1lfHwoYy5jdXJ2ZT1iSihkKSk7cmV0dXJuIGU/W2QsZV06ZH0sbnVsbCxiSiksYlM9YS5fcGFyc2VEb3RzPWJ2KGZ1bmN0aW9uKGIpe3ZhciBjPVtdO2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlO2QrKyl7dmFyIGY9e30sZz1iW2RdLm1hdGNoKC9eKFteOl0qKTo/KFtcXGRcXC5dKikvKTtmLmNvbG9yPWEuZ2V0UkdCKGdbMV0pO2lmKGYuY29sb3IuZXJyb3IpcmV0dXJuIG51bGw7Zi5jb2xvcj1mLmNvbG9yLmhleCxnWzJdJiYoZi5vZmZzZXQ9Z1syXStcIiVcIiksYy5wdXNoKGYpfWZvcihkPTEsZT1jLmxlbmd0aC0xO2Q8ZTtkKyspaWYoIWNbZF0ub2Zmc2V0KXt2YXIgaD1RKGNbZC0xXS5vZmZzZXR8fDApLGk9MDtmb3IodmFyIGo9ZCsxO2o8ZTtqKyspaWYoY1tqXS5vZmZzZXQpe2k9Y1tqXS5vZmZzZXQ7YnJlYWt9aXx8KGk9MTAwLGo9ZSksaT1RKGkpO3ZhciBrPShpLWgpLyhqLWQrMSk7Zm9yKDtkPGo7ZCsrKWgrPWssY1tkXS5vZmZzZXQ9aCtcIiVcIn1yZXR1cm4gY30pLGJUPWEuX3RlYXI9ZnVuY3Rpb24oYSxiKXthPT1iLnRvcCYmKGIudG9wPWEucHJldiksYT09Yi5ib3R0b20mJihiLmJvdHRvbT1hLm5leHQpLGEubmV4dCYmKGEubmV4dC5wcmV2PWEucHJldiksYS5wcmV2JiYoYS5wcmV2Lm5leHQ9YS5uZXh0KX0sYlU9YS5fdG9mcm9udD1mdW5jdGlvbihhLGIpe2IudG9wIT09YSYmKGJUKGEsYiksYS5uZXh0PW51bGwsYS5wcmV2PWIudG9wLGIudG9wLm5leHQ9YSxiLnRvcD1hKX0sYlY9YS5fdG9iYWNrPWZ1bmN0aW9uKGEsYil7Yi5ib3R0b20hPT1hJiYoYlQoYSxiKSxhLm5leHQ9Yi5ib3R0b20sYS5wcmV2PW51bGwsYi5ib3R0b20ucHJldj1hLGIuYm90dG9tPWEpfSxiVz1hLl9pbnNlcnRhZnRlcj1mdW5jdGlvbihhLGIsYyl7YlQoYSxjKSxiPT1jLnRvcCYmKGMudG9wPWEpLGIubmV4dCYmKGIubmV4dC5wcmV2PWEpLGEubmV4dD1iLm5leHQsYS5wcmV2PWIsYi5uZXh0PWF9LGJYPWEuX2luc2VydGJlZm9yZT1mdW5jdGlvbihhLGIsYyl7YlQoYSxjKSxiPT1jLmJvdHRvbSYmKGMuYm90dG9tPWEpLGIucHJldiYmKGIucHJldi5uZXh0PWEpLGEucHJldj1iLnByZXYsYi5wcmV2PWEsYS5uZXh0PWJ9LGJZPWEudG9NYXRyaXg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iSShhKSxkPXtfOnt0cmFuc2Zvcm06cH0sZ2V0QkJveDpmdW5jdGlvbigpe3JldHVybiBjfX07YiQoZCxiKTtyZXR1cm4gZC5tYXRyaXh9LGJaPWEudHJhbnNmb3JtUGF0aD1mdW5jdGlvbihhLGIpe3JldHVybiBiaihhLGJZKGEsYikpfSxiJD1hLl9leHRyYWN0VHJhbnNmb3JtPWZ1bmN0aW9uKGIsYyl7aWYoYz09bnVsbClyZXR1cm4gYi5fLnRyYW5zZm9ybTtjPXIoYykucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZyxiLl8udHJhbnNmb3JtfHxwKTt2YXIgZD1hLnBhcnNlVHJhbnNmb3JtU3RyaW5nKGMpLGU9MCxmPTAsZz0wLGg9MSxpPTEsaj1iLl8saz1uZXcgY2I7ai50cmFuc2Zvcm09ZHx8W107aWYoZClmb3IodmFyIGw9MCxtPWQubGVuZ3RoO2w8bTtsKyspe3ZhciBuPWRbbF0sbz1uLmxlbmd0aCxxPXIoblswXSkudG9Mb3dlckNhc2UoKSxzPW5bMF0hPXEsdD1zP2suaW52ZXJ0KCk6MCx1LHYsdyx4LHk7cT09XCJ0XCImJm89PTM/cz8odT10LngoMCwwKSx2PXQueSgwLDApLHc9dC54KG5bMV0sblsyXSkseD10LnkoblsxXSxuWzJdKSxrLnRyYW5zbGF0ZSh3LXUseC12KSk6ay50cmFuc2xhdGUoblsxXSxuWzJdKTpxPT1cInJcIj9vPT0yPyh5PXl8fGIuZ2V0QkJveCgxKSxrLnJvdGF0ZShuWzFdLHkueCt5LndpZHRoLzIseS55K3kuaGVpZ2h0LzIpLGUrPW5bMV0pOm89PTQmJihzPyh3PXQueChuWzJdLG5bM10pLHg9dC55KG5bMl0sblszXSksay5yb3RhdGUoblsxXSx3LHgpKTprLnJvdGF0ZShuWzFdLG5bMl0sblszXSksZSs9blsxXSk6cT09XCJzXCI/bz09Mnx8bz09Mz8oeT15fHxiLmdldEJCb3goMSksay5zY2FsZShuWzFdLG5bby0xXSx5LngreS53aWR0aC8yLHkueSt5LmhlaWdodC8yKSxoKj1uWzFdLGkqPW5bby0xXSk6bz09NSYmKHM/KHc9dC54KG5bM10sbls0XSkseD10LnkoblszXSxuWzRdKSxrLnNjYWxlKG5bMV0sblsyXSx3LHgpKTprLnNjYWxlKG5bMV0sblsyXSxuWzNdLG5bNF0pLGgqPW5bMV0saSo9blsyXSk6cT09XCJtXCImJm89PTcmJmsuYWRkKG5bMV0sblsyXSxuWzNdLG5bNF0sbls1XSxuWzZdKSxqLmRpcnR5VD0xLGIubWF0cml4PWt9Yi5tYXRyaXg9ayxqLnN4PWgsai5zeT1pLGouZGVnPWUsai5keD1mPWsuZSxqLmR5PWc9ay5mLGg9PTEmJmk9PTEmJiFlJiZqLmJib3g/KGouYmJveC54Kz0rZixqLmJib3gueSs9K2cpOmouZGlydHlUPTF9LGJfPWZ1bmN0aW9uKGEpe3ZhciBiPWFbMF07c3dpdGNoKGIudG9Mb3dlckNhc2UoKSl7Y2FzZVwidFwiOnJldHVybltiLDAsMF07Y2FzZVwibVwiOnJldHVybltiLDEsMCwwLDEsMCwwXTtjYXNlXCJyXCI6cmV0dXJuIGEubGVuZ3RoPT00P1tiLDAsYVsyXSxhWzNdXTpbYiwwXTtjYXNlXCJzXCI6cmV0dXJuIGEubGVuZ3RoPT01P1tiLDEsMSxhWzNdLGFbNF1dOmEubGVuZ3RoPT0zP1tiLDEsMV06W2IsMV19fSxjYT1hLl9lcXVhbGlzZVRyYW5zZm9ybT1mdW5jdGlvbihiLGMpe2M9cihjKS5yZXBsYWNlKC9cXC57M318XFx1MjAyNi9nLGIpLGI9YS5wYXJzZVRyYW5zZm9ybVN0cmluZyhiKXx8W10sYz1hLnBhcnNlVHJhbnNmb3JtU3RyaW5nKGMpfHxbXTt2YXIgZD14KGIubGVuZ3RoLGMubGVuZ3RoKSxlPVtdLGY9W10sZz0wLGgsaSxqLGs7Zm9yKDtnPGQ7ZysrKXtqPWJbZ118fGJfKGNbZ10pLGs9Y1tnXXx8Yl8oaik7aWYoalswXSE9a1swXXx8alswXS50b0xvd2VyQ2FzZSgpPT1cInJcIiYmKGpbMl0hPWtbMl18fGpbM10hPWtbM10pfHxqWzBdLnRvTG93ZXJDYXNlKCk9PVwic1wiJiYoalszXSE9a1szXXx8als0XSE9a1s0XSkpcmV0dXJuO2VbZ109W10sZltnXT1bXTtmb3IoaD0wLGk9eChqLmxlbmd0aCxrLmxlbmd0aCk7aDxpO2grKyloIGluIGomJihlW2ddW2hdPWpbaF0pLGggaW4gayYmKGZbZ11baF09a1toXSl9cmV0dXJue2Zyb206ZSx0bzpmfX07YS5fZ2V0Q29udGFpbmVyPWZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmO2Y9ZT09bnVsbCYmIWEuaXMoYixcIm9iamVjdFwiKT9oLmRvYy5nZXRFbGVtZW50QnlJZChiKTpiO2lmKGYhPW51bGwpe2lmKGYudGFnTmFtZSlyZXR1cm4gYz09bnVsbD97Y29udGFpbmVyOmYsd2lkdGg6Zi5zdHlsZS5waXhlbFdpZHRofHxmLm9mZnNldFdpZHRoLGhlaWdodDpmLnN0eWxlLnBpeGVsSGVpZ2h0fHxmLm9mZnNldEhlaWdodH06e2NvbnRhaW5lcjpmLHdpZHRoOmMsaGVpZ2h0OmR9O3JldHVybntjb250YWluZXI6MSx4OmIseTpjLHdpZHRoOmQsaGVpZ2h0OmV9fX0sYS5wYXRoVG9SZWxhdGl2ZT1iSyxhLl9lbmdpbmU9e30sYS5wYXRoMmN1cnZlPWJSLGEubWF0cml4PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXtyZXR1cm4gbmV3IGNiKGEsYixjLGQsZSxmKX0sZnVuY3Rpb24oYil7ZnVuY3Rpb24gZChhKXt2YXIgYj13LnNxcnQoYyhhKSk7YVswXSYmKGFbMF0vPWIpLGFbMV0mJihhWzFdLz1iKX1mdW5jdGlvbiBjKGEpe3JldHVybiBhWzBdKmFbMF0rYVsxXSphWzFdfWIuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1bW10sW10sW11dLGg9W1t0aGlzLmEsdGhpcy5jLHRoaXMuZV0sW3RoaXMuYix0aGlzLmQsdGhpcy5mXSxbMCwwLDFdXSxpPVtbYSxjLGVdLFtiLGQsZl0sWzAsMCwxXV0saixrLGwsbTthJiZhIGluc3RhbmNlb2YgY2ImJihpPVtbYS5hLGEuYyxhLmVdLFthLmIsYS5kLGEuZl0sWzAsMCwxXV0pO2ZvcihqPTA7ajwzO2orKylmb3Ioaz0wO2s8MztrKyspe209MDtmb3IobD0wO2w8MztsKyspbSs9aFtqXVtsXSppW2xdW2tdO2dbal1ba109bX10aGlzLmE9Z1swXVswXSx0aGlzLmI9Z1sxXVswXSx0aGlzLmM9Z1swXVsxXSx0aGlzLmQ9Z1sxXVsxXSx0aGlzLmU9Z1swXVsyXSx0aGlzLmY9Z1sxXVsyXX0sYi5pbnZlcnQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5hKmEuZC1hLmIqYS5jO3JldHVybiBuZXcgY2IoYS5kL2IsLWEuYi9iLC1hLmMvYixhLmEvYiwoYS5jKmEuZi1hLmQqYS5lKS9iLChhLmIqYS5lLWEuYSphLmYpL2IpfSxiLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjYih0aGlzLmEsdGhpcy5iLHRoaXMuYyx0aGlzLmQsdGhpcy5lLHRoaXMuZil9LGIudHJhbnNsYXRlPWZ1bmN0aW9uKGEsYil7dGhpcy5hZGQoMSwwLDAsMSxhLGIpfSxiLnNjYWxlPWZ1bmN0aW9uKGEsYixjLGQpe2I9PW51bGwmJihiPWEpLChjfHxkKSYmdGhpcy5hZGQoMSwwLDAsMSxjLGQpLHRoaXMuYWRkKGEsMCwwLGIsMCwwKSwoY3x8ZCkmJnRoaXMuYWRkKDEsMCwwLDEsLWMsLWQpfSxiLnJvdGF0ZT1mdW5jdGlvbihiLGMsZCl7Yj1hLnJhZChiKSxjPWN8fDAsZD1kfHwwO3ZhciBlPSt3LmNvcyhiKS50b0ZpeGVkKDkpLGY9K3cuc2luKGIpLnRvRml4ZWQoOSk7dGhpcy5hZGQoZSxmLC1mLGUsYyxkKSx0aGlzLmFkZCgxLDAsMCwxLC1jLC1kKX0sYi54PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqdGhpcy5hK2IqdGhpcy5jK3RoaXMuZX0sYi55PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEqdGhpcy5iK2IqdGhpcy5kK3RoaXMuZn0sYi5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuK3RoaXNbci5mcm9tQ2hhckNvZGUoOTcrYSldLnRvRml4ZWQoNCl9LGIudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gYS5zdmc/XCJtYXRyaXgoXCIrW3RoaXMuZ2V0KDApLHRoaXMuZ2V0KDEpLHRoaXMuZ2V0KDIpLHRoaXMuZ2V0KDMpLHRoaXMuZ2V0KDQpLHRoaXMuZ2V0KDUpXS5qb2luKCkrXCIpXCI6W3RoaXMuZ2V0KDApLHRoaXMuZ2V0KDIpLHRoaXMuZ2V0KDEpLHRoaXMuZ2V0KDMpLDAsMF0uam9pbigpfSxiLnRvRmlsdGVyPWZ1bmN0aW9uKCl7cmV0dXJuXCJwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuTWF0cml4KE0xMT1cIit0aGlzLmdldCgwKStcIiwgTTEyPVwiK3RoaXMuZ2V0KDIpK1wiLCBNMjE9XCIrdGhpcy5nZXQoMSkrXCIsIE0yMj1cIit0aGlzLmdldCgzKStcIiwgRHg9XCIrdGhpcy5nZXQoNCkrXCIsIER5PVwiK3RoaXMuZ2V0KDUpK1wiLCBzaXppbmdtZXRob2Q9J2F1dG8gZXhwYW5kJylcIn0sYi5vZmZzZXQ9ZnVuY3Rpb24oKXtyZXR1cm5bdGhpcy5lLnRvRml4ZWQoNCksdGhpcy5mLnRvRml4ZWQoNCldfSxiLnNwbGl0PWZ1bmN0aW9uKCl7dmFyIGI9e307Yi5keD10aGlzLmUsYi5keT10aGlzLmY7dmFyIGU9W1t0aGlzLmEsdGhpcy5jXSxbdGhpcy5iLHRoaXMuZF1dO2Iuc2NhbGV4PXcuc3FydChjKGVbMF0pKSxkKGVbMF0pLGIuc2hlYXI9ZVswXVswXSplWzFdWzBdK2VbMF1bMV0qZVsxXVsxXSxlWzFdPVtlWzFdWzBdLWVbMF1bMF0qYi5zaGVhcixlWzFdWzFdLWVbMF1bMV0qYi5zaGVhcl0sYi5zY2FsZXk9dy5zcXJ0KGMoZVsxXSkpLGQoZVsxXSksYi5zaGVhci89Yi5zY2FsZXk7dmFyIGY9LWVbMF1bMV0sZz1lWzFdWzFdO2c8MD8oYi5yb3RhdGU9YS5kZWcody5hY29zKGcpKSxmPDAmJihiLnJvdGF0ZT0zNjAtYi5yb3RhdGUpKTpiLnJvdGF0ZT1hLmRlZyh3LmFzaW4oZikpLGIuaXNTaW1wbGU9IStiLnNoZWFyLnRvRml4ZWQoOSkmJihiLnNjYWxleC50b0ZpeGVkKDkpPT1iLnNjYWxleS50b0ZpeGVkKDkpfHwhYi5yb3RhdGUpLGIuaXNTdXBlclNpbXBsZT0hK2Iuc2hlYXIudG9GaXhlZCg5KSYmYi5zY2FsZXgudG9GaXhlZCg5KT09Yi5zY2FsZXkudG9GaXhlZCg5KSYmIWIucm90YXRlLGIubm9Sb3RhdGlvbj0hK2Iuc2hlYXIudG9GaXhlZCg5KSYmIWIucm90YXRlO3JldHVybiBifSxiLnRvVHJhbnNmb3JtU3RyaW5nPWZ1bmN0aW9uKGEpe3ZhciBiPWF8fHRoaXNbc10oKTtpZihiLmlzU2ltcGxlKXtiLnNjYWxleD0rYi5zY2FsZXgudG9GaXhlZCg0KSxiLnNjYWxleT0rYi5zY2FsZXkudG9GaXhlZCg0KSxiLnJvdGF0ZT0rYi5yb3RhdGUudG9GaXhlZCg0KTtyZXR1cm4oYi5keHx8Yi5keT9cInRcIitbYi5keCxiLmR5XTpwKSsoYi5zY2FsZXghPTF8fGIuc2NhbGV5IT0xP1wic1wiK1tiLnNjYWxleCxiLnNjYWxleSwwLDBdOnApKyhiLnJvdGF0ZT9cInJcIitbYi5yb3RhdGUsMCwwXTpwKX1yZXR1cm5cIm1cIitbdGhpcy5nZXQoMCksdGhpcy5nZXQoMSksdGhpcy5nZXQoMiksdGhpcy5nZXQoMyksdGhpcy5nZXQoNCksdGhpcy5nZXQoNSldfX0oY2IucHJvdG90eXBlKTt2YXIgY2M9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvVmVyc2lvblxcLyguKj8pXFxzLyl8fG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0Nocm9tZVxcLyhcXGQrKS8pO25hdmlnYXRvci52ZW5kb3I9PVwiQXBwbGUgQ29tcHV0ZXIsIEluYy5cIiYmKGNjJiZjY1sxXTw0fHxuYXZpZ2F0b3IucGxhdGZvcm0uc2xpY2UoMCwyKT09XCJpUFwiKXx8bmF2aWdhdG9yLnZlbmRvcj09XCJHb29nbGUgSW5jLlwiJiZjYyYmY2NbMV08OD9rLnNhZmFyaT1mdW5jdGlvbigpe3ZhciBhPXRoaXMucmVjdCgtOTksLTk5LHRoaXMud2lkdGgrOTksdGhpcy5oZWlnaHQrOTkpLmF0dHIoe3N0cm9rZTpcIm5vbmVcIn0pO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLnJlbW92ZSgpfSl9Omsuc2FmYXJpPWJlO3ZhciBjZD1mdW5jdGlvbigpe3RoaXMucmV0dXJuVmFsdWU9ITF9LGNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudC5wcmV2ZW50RGVmYXVsdCgpfSxjZj1mdW5jdGlvbigpe3RoaXMuY2FuY2VsQnViYmxlPSEwfSxjZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9LGNoPWZ1bmN0aW9uKCl7aWYoaC5kb2MuYWRkRXZlbnRMaXN0ZW5lcilyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9byYmdVtiXT91W2JdOmIsZj1mdW5jdGlvbihlKXt2YXIgZj1oLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxoLmRvYy5ib2R5LnNjcm9sbFRvcCxpPWguZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxoLmRvYy5ib2R5LnNjcm9sbExlZnQsaj1lLmNsaWVudFgraSxrPWUuY2xpZW50WStmO2lmKG8mJnVbZ10oYikpZm9yKHZhciBsPTAsbT1lLnRhcmdldFRvdWNoZXMmJmUudGFyZ2V0VG91Y2hlcy5sZW5ndGg7bDxtO2wrKylpZihlLnRhcmdldFRvdWNoZXNbbF0udGFyZ2V0PT1hKXt2YXIgbj1lO2U9ZS50YXJnZXRUb3VjaGVzW2xdLGUub3JpZ2luYWxFdmVudD1uLGUucHJldmVudERlZmF1bHQ9Y2UsZS5zdG9wUHJvcGFnYXRpb249Y2c7YnJlYWt9cmV0dXJuIGMuY2FsbChkLGUsaixrKX07YS5hZGRFdmVudExpc3RlbmVyKGUsZiwhMSk7cmV0dXJuIGZ1bmN0aW9uKCl7YS5yZW1vdmVFdmVudExpc3RlbmVyKGUsZiwhMSk7cmV0dXJuITB9fTtpZihoLmRvYy5hdHRhY2hFdmVudClyZXR1cm4gZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9ZnVuY3Rpb24oYSl7YT1hfHxoLndpbi5ldmVudDt2YXIgYj1oLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wfHxoLmRvYy5ib2R5LnNjcm9sbFRvcCxlPWguZG9jLmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0fHxoLmRvYy5ib2R5LnNjcm9sbExlZnQsZj1hLmNsaWVudFgrZSxnPWEuY2xpZW50WStiO2EucHJldmVudERlZmF1bHQ9YS5wcmV2ZW50RGVmYXVsdHx8Y2QsYS5zdG9wUHJvcGFnYXRpb249YS5zdG9wUHJvcGFnYXRpb258fGNmO3JldHVybiBjLmNhbGwoZCxhLGYsZyl9O2EuYXR0YWNoRXZlbnQoXCJvblwiK2IsZSk7dmFyIGY9ZnVuY3Rpb24oKXthLmRldGFjaEV2ZW50KFwib25cIitiLGUpO3JldHVybiEwfTtyZXR1cm4gZn19KCksY2k9W10sY2o9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jbGllbnRYLGM9YS5jbGllbnRZLGQ9aC5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8aC5kb2MuYm9keS5zY3JvbGxUb3AsZT1oLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8aC5kb2MuYm9keS5zY3JvbGxMZWZ0LGYsZz1jaS5sZW5ndGg7d2hpbGUoZy0tKXtmPWNpW2ddO2lmKG8pe3ZhciBpPWEudG91Y2hlcy5sZW5ndGgsajt3aGlsZShpLS0pe2o9YS50b3VjaGVzW2ldO2lmKGouaWRlbnRpZmllcj09Zi5lbC5fZHJhZy5pZCl7Yj1qLmNsaWVudFgsYz1qLmNsaWVudFksKGEub3JpZ2luYWxFdmVudD9hLm9yaWdpbmFsRXZlbnQ6YSkucHJldmVudERlZmF1bHQoKTticmVha319fWVsc2UgYS5wcmV2ZW50RGVmYXVsdCgpO3ZhciBrPWYuZWwubm9kZSxsLG09ay5uZXh0U2libGluZyxuPWsucGFyZW50Tm9kZSxwPWsuc3R5bGUuZGlzcGxheTtoLndpbi5vcGVyYSYmbi5yZW1vdmVDaGlsZChrKSxrLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsbD1mLmVsLnBhcGVyLmdldEVsZW1lbnRCeVBvaW50KGIsYyksay5zdHlsZS5kaXNwbGF5PXAsaC53aW4ub3BlcmEmJihtP24uaW5zZXJ0QmVmb3JlKGssbSk6bi5hcHBlbmRDaGlsZChrKSksbCYmZXZlKFwicmFwaGFlbC5kcmFnLm92ZXIuXCIrZi5lbC5pZCxmLmVsLGwpLGIrPWUsYys9ZCxldmUoXCJyYXBoYWVsLmRyYWcubW92ZS5cIitmLmVsLmlkLGYubW92ZV9zY29wZXx8Zi5lbCxiLWYuZWwuX2RyYWcueCxjLWYuZWwuX2RyYWcueSxiLGMsYSl9fSxjaz1mdW5jdGlvbihiKXthLnVubW91c2Vtb3ZlKGNqKS51bm1vdXNldXAoY2spO3ZhciBjPWNpLmxlbmd0aCxkO3doaWxlKGMtLSlkPWNpW2NdLGQuZWwuX2RyYWc9e30sZXZlKFwicmFwaGFlbC5kcmFnLmVuZC5cIitkLmVsLmlkLGQuZW5kX3Njb3BlfHxkLnN0YXJ0X3Njb3BlfHxkLm1vdmVfc2NvcGV8fGQuZWwsYik7Y2k9W119LGNsPWEuZWw9e307Zm9yKHZhciBjbT10Lmxlbmd0aDtjbS0tOykoZnVuY3Rpb24oYil7YVtiXT1jbFtiXT1mdW5jdGlvbihjLGQpe2EuaXMoYyxcImZ1bmN0aW9uXCIpJiYodGhpcy5ldmVudHM9dGhpcy5ldmVudHN8fFtdLHRoaXMuZXZlbnRzLnB1c2goe25hbWU6YixmOmMsdW5iaW5kOmNoKHRoaXMuc2hhcGV8fHRoaXMubm9kZXx8aC5kb2MsYixjLGR8fHRoaXMpfSkpO3JldHVybiB0aGlzfSxhW1widW5cIitiXT1jbFtcInVuXCIrYl09ZnVuY3Rpb24oYSl7dmFyIGM9dGhpcy5ldmVudHN8fFtdLGQ9Yy5sZW5ndGg7d2hpbGUoZC0tKWlmKGNbZF0ubmFtZT09YiYmY1tkXS5mPT1hKXtjW2RdLnVuYmluZCgpLGMuc3BsaWNlKGQsMSksIWMubGVuZ3RoJiZkZWxldGUgdGhpcy5ldmVudHM7cmV0dXJuIHRoaXN9cmV0dXJuIHRoaXN9fSkodFtjbV0pO2NsLmRhdGE9ZnVuY3Rpb24oYixjKXt2YXIgZD1iYlt0aGlzLmlkXT1iYlt0aGlzLmlkXXx8e307aWYoYXJndW1lbnRzLmxlbmd0aD09MSl7aWYoYS5pcyhiLFwib2JqZWN0XCIpKXtmb3IodmFyIGUgaW4gYiliW2ddKGUpJiZ0aGlzLmRhdGEoZSxiW2VdKTtyZXR1cm4gdGhpc31ldmUoXCJyYXBoYWVsLmRhdGEuZ2V0LlwiK3RoaXMuaWQsdGhpcyxkW2JdLGIpO3JldHVybiBkW2JdfWRbYl09YyxldmUoXCJyYXBoYWVsLmRhdGEuc2V0LlwiK3RoaXMuaWQsdGhpcyxjLGIpO3JldHVybiB0aGlzfSxjbC5yZW1vdmVEYXRhPWZ1bmN0aW9uKGEpe2E9PW51bGw/YmJbdGhpcy5pZF09e306YmJbdGhpcy5pZF0mJmRlbGV0ZSBiYlt0aGlzLmlkXVthXTtyZXR1cm4gdGhpc30sY2wuaG92ZXI9ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMubW91c2VvdmVyKGEsYykubW91c2VvdXQoYixkfHxjKX0sY2wudW5ob3Zlcj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnVubW91c2VvdmVyKGEpLnVubW91c2VvdXQoYil9O3ZhciBjbj1bXTtjbC5kcmFnPWZ1bmN0aW9uKGIsYyxkLGUsZixnKXtmdW5jdGlvbiBpKGkpeyhpLm9yaWdpbmFsRXZlbnR8fGkpLnByZXZlbnREZWZhdWx0KCk7dmFyIGo9aC5kb2MuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcHx8aC5kb2MuYm9keS5zY3JvbGxUb3Asaz1oLmRvYy5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdHx8aC5kb2MuYm9keS5zY3JvbGxMZWZ0O3RoaXMuX2RyYWcueD1pLmNsaWVudFgrayx0aGlzLl9kcmFnLnk9aS5jbGllbnRZK2osdGhpcy5fZHJhZy5pZD1pLmlkZW50aWZpZXIsIWNpLmxlbmd0aCYmYS5tb3VzZW1vdmUoY2opLm1vdXNldXAoY2spLGNpLnB1c2goe2VsOnRoaXMsbW92ZV9zY29wZTplLHN0YXJ0X3Njb3BlOmYsZW5kX3Njb3BlOmd9KSxjJiZldmUub24oXCJyYXBoYWVsLmRyYWcuc3RhcnQuXCIrdGhpcy5pZCxjKSxiJiZldmUub24oXCJyYXBoYWVsLmRyYWcubW92ZS5cIit0aGlzLmlkLGIpLGQmJmV2ZS5vbihcInJhcGhhZWwuZHJhZy5lbmQuXCIrdGhpcy5pZCxkKSxldmUoXCJyYXBoYWVsLmRyYWcuc3RhcnQuXCIrdGhpcy5pZCxmfHxlfHx0aGlzLGkuY2xpZW50WCtrLGkuY2xpZW50WStqLGkpfXRoaXMuX2RyYWc9e30sY24ucHVzaCh7ZWw6dGhpcyxzdGFydDppfSksdGhpcy5tb3VzZWRvd24oaSk7cmV0dXJuIHRoaXN9LGNsLm9uRHJhZ092ZXI9ZnVuY3Rpb24oYSl7YT9ldmUub24oXCJyYXBoYWVsLmRyYWcub3Zlci5cIit0aGlzLmlkLGEpOmV2ZS51bmJpbmQoXCJyYXBoYWVsLmRyYWcub3Zlci5cIit0aGlzLmlkKX0sY2wudW5kcmFnPWZ1bmN0aW9uKCl7dmFyIGI9Y24ubGVuZ3RoO3doaWxlKGItLSljbltiXS5lbD09dGhpcyYmKHRoaXMudW5tb3VzZWRvd24oY25bYl0uc3RhcnQpLGNuLnNwbGljZShiLDEpLGV2ZS51bmJpbmQoXCJyYXBoYWVsLmRyYWcuKi5cIit0aGlzLmlkKSk7IWNuLmxlbmd0aCYmYS51bm1vdXNlbW92ZShjaikudW5tb3VzZXVwKGNrKX0say5jaXJjbGU9ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEuX2VuZ2luZS5jaXJjbGUodGhpcyxifHwwLGN8fDAsZHx8MCk7dGhpcy5fX3NldF9fJiZ0aGlzLl9fc2V0X18ucHVzaChlKTtyZXR1cm4gZX0say5yZWN0PWZ1bmN0aW9uKGIsYyxkLGUsZil7dmFyIGc9YS5fZW5naW5lLnJlY3QodGhpcyxifHwwLGN8fDAsZHx8MCxlfHwwLGZ8fDApO3RoaXMuX19zZXRfXyYmdGhpcy5fX3NldF9fLnB1c2goZyk7cmV0dXJuIGd9LGsuZWxsaXBzZT1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj1hLl9lbmdpbmUuZWxsaXBzZSh0aGlzLGJ8fDAsY3x8MCxkfHwwLGV8fDApO3RoaXMuX19zZXRfXyYmdGhpcy5fX3NldF9fLnB1c2goZik7cmV0dXJuIGZ9LGsucGF0aD1mdW5jdGlvbihiKXtiJiYhYS5pcyhiLEQpJiYhYS5pcyhiWzBdLEUpJiYoYis9cCk7dmFyIGM9YS5fZW5naW5lLnBhdGgoYS5mb3JtYXRbbV0oYSxhcmd1bWVudHMpLHRoaXMpO3RoaXMuX19zZXRfXyYmdGhpcy5fX3NldF9fLnB1c2goYyk7cmV0dXJuIGN9LGsuaW1hZ2U9ZnVuY3Rpb24oYixjLGQsZSxmKXt2YXIgZz1hLl9lbmdpbmUuaW1hZ2UodGhpcyxifHxcImFib3V0OmJsYW5rXCIsY3x8MCxkfHwwLGV8fDAsZnx8MCk7dGhpcy5fX3NldF9fJiZ0aGlzLl9fc2V0X18ucHVzaChnKTtyZXR1cm4gZ30say50ZXh0PWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLl9lbmdpbmUudGV4dCh0aGlzLGJ8fDAsY3x8MCxyKGQpKTt0aGlzLl9fc2V0X18mJnRoaXMuX19zZXRfXy5wdXNoKGUpO3JldHVybiBlfSxrLnNldD1mdW5jdGlvbihiKXshYS5pcyhiLFwiYXJyYXlcIikmJihiPUFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChhcmd1bWVudHMsMCxhcmd1bWVudHMubGVuZ3RoKSk7dmFyIGM9bmV3IGNHKGIpO3RoaXMuX19zZXRfXyYmdGhpcy5fX3NldF9fLnB1c2goYyk7cmV0dXJuIGN9LGsuc2V0U3RhcnQ9ZnVuY3Rpb24oYSl7dGhpcy5fX3NldF9fPWF8fHRoaXMuc2V0KCl9LGsuc2V0RmluaXNoPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX19zZXRfXztkZWxldGUgdGhpcy5fX3NldF9fO3JldHVybiBifSxrLnNldFNpemU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5fZW5naW5lLnNldFNpemUuY2FsbCh0aGlzLGIsYyl9LGsuc2V0Vmlld0JveD1mdW5jdGlvbihiLGMsZCxlLGYpe3JldHVybiBhLl9lbmdpbmUuc2V0Vmlld0JveC5jYWxsKHRoaXMsYixjLGQsZSxmKX0say50b3A9ay5ib3R0b209bnVsbCxrLnJhcGhhZWw9YTt2YXIgY289ZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxjPWEub3duZXJEb2N1bWVudCxkPWMuYm9keSxlPWMuZG9jdW1lbnRFbGVtZW50LGY9ZS5jbGllbnRUb3B8fGQuY2xpZW50VG9wfHwwLGc9ZS5jbGllbnRMZWZ0fHxkLmNsaWVudExlZnR8fDAsaT1iLnRvcCsoaC53aW4ucGFnZVlPZmZzZXR8fGUuc2Nyb2xsVG9wfHxkLnNjcm9sbFRvcCktZixqPWIubGVmdCsoaC53aW4ucGFnZVhPZmZzZXR8fGUuc2Nyb2xsTGVmdHx8ZC5zY3JvbGxMZWZ0KS1nO3JldHVybnt5OmkseDpqfX07ay5nZXRFbGVtZW50QnlQb2ludD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmNhbnZhcyxlPWguZG9jLmVsZW1lbnRGcm9tUG9pbnQoYSxiKTtpZihoLndpbi5vcGVyYSYmZS50YWdOYW1lPT1cInN2Z1wiKXt2YXIgZj1jbyhkKSxnPWQuY3JlYXRlU1ZHUmVjdCgpO2cueD1hLWYueCxnLnk9Yi1mLnksZy53aWR0aD1nLmhlaWdodD0xO3ZhciBpPWQuZ2V0SW50ZXJzZWN0aW9uTGlzdChnLG51bGwpO2kubGVuZ3RoJiYoZT1pW2kubGVuZ3RoLTFdKX1pZighZSlyZXR1cm4gbnVsbDt3aGlsZShlLnBhcmVudE5vZGUmJmUhPWQucGFyZW50Tm9kZSYmIWUucmFwaGFlbCllPWUucGFyZW50Tm9kZTtlPT1jLmNhbnZhcy5wYXJlbnROb2RlJiYoZT1kKSxlPWUmJmUucmFwaGFlbD9jLmdldEJ5SWQoZS5yYXBoYWVsaWQpOm51bGw7cmV0dXJuIGV9LGsuZ2V0QnlJZD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmJvdHRvbTt3aGlsZShiKXtpZihiLmlkPT1hKXJldHVybiBiO2I9Yi5uZXh0fXJldHVybiBudWxsfSxrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmJvdHRvbTt3aGlsZShjKXtpZihhLmNhbGwoYixjKT09PSExKXJldHVybiB0aGlzO2M9Yy5uZXh0fXJldHVybiB0aGlzfSxrLmdldEVsZW1lbnRzQnlQb2ludD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc2V0KCk7dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGQpe2QuaXNQb2ludEluc2lkZShhLGIpJiZjLnB1c2goZCl9KTtyZXR1cm4gY30sY2wuaXNQb2ludEluc2lkZT1mdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMucmVhbFBhdGg9dGhpcy5yZWFsUGF0aHx8YmlbdGhpcy50eXBlXSh0aGlzKTtyZXR1cm4gYS5pc1BvaW50SW5zaWRlUGF0aChkLGIsYyl9LGNsLmdldEJCb3g9ZnVuY3Rpb24oYSl7aWYodGhpcy5yZW1vdmVkKXJldHVybnt9O3ZhciBiPXRoaXMuXztpZihhKXtpZihiLmRpcnR5fHwhYi5iYm94d3QpdGhpcy5yZWFsUGF0aD1iaVt0aGlzLnR5cGVdKHRoaXMpLGIuYmJveHd0PWJJKHRoaXMucmVhbFBhdGgpLGIuYmJveHd0LnRvU3RyaW5nPWNxLGIuZGlydHk9MDtyZXR1cm4gYi5iYm94d3R9aWYoYi5kaXJ0eXx8Yi5kaXJ0eVR8fCFiLmJib3gpe2lmKGIuZGlydHl8fCF0aGlzLnJlYWxQYXRoKWIuYmJveHd0PTAsdGhpcy5yZWFsUGF0aD1iaVt0aGlzLnR5cGVdKHRoaXMpO2IuYmJveD1iSShiaih0aGlzLnJlYWxQYXRoLHRoaXMubWF0cml4KSksYi5iYm94LnRvU3RyaW5nPWNxLGIuZGlydHk9Yi5kaXJ0eVQ9MH1yZXR1cm4gYi5iYm94fSxjbC5jbG9uZT1mdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gbnVsbDt2YXIgYT10aGlzLnBhcGVyW3RoaXMudHlwZV0oKS5hdHRyKHRoaXMuYXR0cigpKTt0aGlzLl9fc2V0X18mJnRoaXMuX19zZXRfXy5wdXNoKGEpO3JldHVybiBhfSxjbC5nbG93PWZ1bmN0aW9uKGEpe2lmKHRoaXMudHlwZT09XCJ0ZXh0XCIpcmV0dXJuIG51bGw7YT1hfHx7fTt2YXIgYj17d2lkdGg6KGEud2lkdGh8fDEwKSsoK3RoaXMuYXR0cihcInN0cm9rZS13aWR0aFwiKXx8MSksZmlsbDphLmZpbGx8fCExLG9wYWNpdHk6YS5vcGFjaXR5fHwuNSxvZmZzZXR4OmEub2Zmc2V0eHx8MCxvZmZzZXR5OmEub2Zmc2V0eXx8MCxjb2xvcjphLmNvbG9yfHxcIiMwMDBcIn0sYz1iLndpZHRoLzIsZD10aGlzLnBhcGVyLGU9ZC5zZXQoKSxmPXRoaXMucmVhbFBhdGh8fGJpW3RoaXMudHlwZV0odGhpcyk7Zj10aGlzLm1hdHJpeD9iaihmLHRoaXMubWF0cml4KTpmO2Zvcih2YXIgZz0xO2c8YysxO2crKyllLnB1c2goZC5wYXRoKGYpLmF0dHIoe3N0cm9rZTpiLmNvbG9yLGZpbGw6Yi5maWxsP2IuY29sb3I6XCJub25lXCIsXCJzdHJva2UtbGluZWpvaW5cIjpcInJvdW5kXCIsXCJzdHJva2UtbGluZWNhcFwiOlwicm91bmRcIixcInN0cm9rZS13aWR0aFwiOisoYi53aWR0aC9jKmcpLnRvRml4ZWQoMyksb3BhY2l0eTorKGIub3BhY2l0eS9jKS50b0ZpeGVkKDMpfSkpO3JldHVybiBlLmluc2VydEJlZm9yZSh0aGlzKS50cmFuc2xhdGUoYi5vZmZzZXR4LGIub2Zmc2V0eSl9O3ZhciBjcj17fSxjcz1mdW5jdGlvbihiLGMsZCxlLGYsZyxoLGksail7cmV0dXJuIGo9PW51bGw/YkIoYixjLGQsZSxmLGcsaCxpKTphLmZpbmREb3RzQXRTZWdtZW50KGIsYyxkLGUsZixnLGgsaSxiQyhiLGMsZCxlLGYsZyxoLGksaikpfSxjdD1mdW5jdGlvbihiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZil7ZD1iUihkKTt2YXIgZyxoLGksaixrPVwiXCIsbD17fSxtLG49MDtmb3IodmFyIG89MCxwPWQubGVuZ3RoO288cDtvKyspe2k9ZFtvXTtpZihpWzBdPT1cIk1cIilnPStpWzFdLGg9K2lbMl07ZWxzZXtqPWNzKGcsaCxpWzFdLGlbMl0saVszXSxpWzRdLGlbNV0saVs2XSk7aWYobitqPmUpe2lmKGMmJiFsLnN0YXJ0KXttPWNzKGcsaCxpWzFdLGlbMl0saVszXSxpWzRdLGlbNV0saVs2XSxlLW4pLGsrPVtcIkNcIittLnN0YXJ0LngsbS5zdGFydC55LG0ubS54LG0ubS55LG0ueCxtLnldO2lmKGYpcmV0dXJuIGs7bC5zdGFydD1rLGs9W1wiTVwiK20ueCxtLnkrXCJDXCIrbS5uLngsbS5uLnksbS5lbmQueCxtLmVuZC55LGlbNV0saVs2XV0uam9pbigpLG4rPWosZz0raVs1XSxoPStpWzZdO2NvbnRpbnVlfWlmKCFiJiYhYyl7bT1jcyhnLGgsaVsxXSxpWzJdLGlbM10saVs0XSxpWzVdLGlbNl0sZS1uKTtyZXR1cm57eDptLngseTptLnksYWxwaGE6bS5hbHBoYX19fW4rPWosZz0raVs1XSxoPStpWzZdfWsrPWkuc2hpZnQoKStpfWwuZW5kPWssbT1iP246Yz9sOmEuZmluZERvdHNBdFNlZ21lbnQoZyxoLGlbMF0saVsxXSxpWzJdLGlbM10saVs0XSxpWzVdLDEpLG0uYWxwaGEmJihtPXt4Om0ueCx5Om0ueSxhbHBoYTptLmFscGhhfSk7cmV0dXJuIG19fSxjdT1jdCgxKSxjdj1jdCgpLGN3PWN0KDAsMSk7YS5nZXRUb3RhbExlbmd0aD1jdSxhLmdldFBvaW50QXRMZW5ndGg9Y3YsYS5nZXRTdWJwYXRoPWZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmdldFRvdGFsTGVuZ3RoKGEpLWM8MWUtNilyZXR1cm4gY3coYSxiKS5lbmQ7dmFyIGQ9Y3coYSxjLDEpO3JldHVybiBiP2N3KGQsYikuZW5kOmR9LGNsLmdldFRvdGFsTGVuZ3RoPWZ1bmN0aW9uKCl7aWYodGhpcy50eXBlPT1cInBhdGhcIil7aWYodGhpcy5ub2RlLmdldFRvdGFsTGVuZ3RoKXJldHVybiB0aGlzLm5vZGUuZ2V0VG90YWxMZW5ndGgoKTtyZXR1cm4gY3UodGhpcy5hdHRycy5wYXRoKX19LGNsLmdldFBvaW50QXRMZW5ndGg9ZnVuY3Rpb24oYSl7aWYodGhpcy50eXBlPT1cInBhdGhcIilyZXR1cm4gY3YodGhpcy5hdHRycy5wYXRoLGEpfSxjbC5nZXRTdWJwYXRoPWZ1bmN0aW9uKGIsYyl7aWYodGhpcy50eXBlPT1cInBhdGhcIilyZXR1cm4gYS5nZXRTdWJwYXRoKHRoaXMuYXR0cnMucGF0aCxiLGMpfTt2YXIgY3g9YS5lYXNpbmdfZm9ybXVsYXM9e2xpbmVhcjpmdW5jdGlvbihhKXtyZXR1cm4gYX0sXCI8XCI6ZnVuY3Rpb24oYSl7cmV0dXJuIEEoYSwxLjcpfSxcIj5cIjpmdW5jdGlvbihhKXtyZXR1cm4gQShhLC40OCl9LFwiPD5cIjpmdW5jdGlvbihhKXt2YXIgYj0uNDgtYS8xLjA0LGM9dy5zcXJ0KC4xNzM0K2IqYiksZD1jLWIsZT1BKHooZCksMS8zKSooZDwwPy0xOjEpLGY9LWMtYixnPUEoeihmKSwxLzMpKihmPDA/LTE6MSksaD1lK2crLjU7cmV0dXJuKDEtaCkqMypoKmgraCpoKmh9LGJhY2tJbjpmdW5jdGlvbihhKXt2YXIgYj0xLjcwMTU4O3JldHVybiBhKmEqKChiKzEpKmEtYil9LGJhY2tPdXQ6ZnVuY3Rpb24oYSl7YT1hLTE7dmFyIGI9MS43MDE1ODtyZXR1cm4gYSphKigoYisxKSphK2IpKzF9LGVsYXN0aWM6ZnVuY3Rpb24oYSl7aWYoYT09ISFhKXJldHVybiBhO3JldHVybiBBKDIsLTEwKmEpKncuc2luKChhLS4wNzUpKjIqQi8uMykrMX0sYm91bmNlOmZ1bmN0aW9uKGEpe3ZhciBiPTcuNTYyNSxjPTIuNzUsZDthPDEvYz9kPWIqYSphOmE8Mi9jPyhhLT0xLjUvYyxkPWIqYSphKy43NSk6YTwyLjUvYz8oYS09Mi4yNS9jLGQ9YiphKmErLjkzNzUpOihhLT0yLjYyNS9jLGQ9YiphKmErLjk4NDM3NSk7cmV0dXJuIGR9fTtjeC5lYXNlSW49Y3hbXCJlYXNlLWluXCJdPWN4W1wiPFwiXSxjeC5lYXNlT3V0PWN4W1wiZWFzZS1vdXRcIl09Y3hbXCI+XCJdLGN4LmVhc2VJbk91dD1jeFtcImVhc2UtaW4tb3V0XCJdPWN4W1wiPD5cIl0sY3hbXCJiYWNrLWluXCJdPWN4LmJhY2tJbixjeFtcImJhY2stb3V0XCJdPWN4LmJhY2tPdXQ7dmFyIGN5PVtdLGN6PXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5vUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoYSwxNil9LGNBPWZ1bmN0aW9uKCl7dmFyIGI9KyhuZXcgRGF0ZSksYz0wO2Zvcig7YzxjeS5sZW5ndGg7YysrKXt2YXIgZD1jeVtjXTtpZihkLmVsLnJlbW92ZWR8fGQucGF1c2VkKWNvbnRpbnVlO3ZhciBlPWItZC5zdGFydCxmPWQubXMsaD1kLmVhc2luZyxpPWQuZnJvbSxqPWQuZGlmZixrPWQudG8sbD1kLnQsbT1kLmVsLG89e30scCxyPXt9LHM7ZC5pbml0c3RhdHVzPyhlPShkLmluaXRzdGF0dXMqZC5hbmltLnRvcC1kLnByZXYpLyhkLnBlcmNlbnQtZC5wcmV2KSpmLGQuc3RhdHVzPWQuaW5pdHN0YXR1cyxkZWxldGUgZC5pbml0c3RhdHVzLGQuc3RvcCYmY3kuc3BsaWNlKGMtLSwxKSk6ZC5zdGF0dXM9KGQucHJldisoZC5wZXJjZW50LWQucHJldikqKGUvZikpL2QuYW5pbS50b3A7aWYoZTwwKWNvbnRpbnVlO2lmKGU8Zil7dmFyIHQ9aChlL2YpO2Zvcih2YXIgdSBpbiBpKWlmKGlbZ10odSkpe3N3aXRjaChVW3VdKXtjYXNlIEM6cD0raVt1XSt0KmYqalt1XTticmVhaztjYXNlXCJjb2xvdXJcIjpwPVwicmdiKFwiK1tjQihPKGlbdV0ucit0KmYqalt1XS5yKSksY0IoTyhpW3VdLmcrdCpmKmpbdV0uZykpLGNCKE8oaVt1XS5iK3QqZipqW3VdLmIpKV0uam9pbihcIixcIikrXCIpXCI7YnJlYWs7Y2FzZVwicGF0aFwiOnA9W107Zm9yKHZhciB2PTAsdz1pW3VdLmxlbmd0aDt2PHc7disrKXtwW3ZdPVtpW3VdW3ZdWzBdXTtmb3IodmFyIHg9MSx5PWlbdV1bdl0ubGVuZ3RoO3g8eTt4KyspcFt2XVt4XT0raVt1XVt2XVt4XSt0KmYqalt1XVt2XVt4XTtwW3ZdPXBbdl0uam9pbihxKX1wPXAuam9pbihxKTticmVhaztjYXNlXCJ0cmFuc2Zvcm1cIjppZihqW3VdLnJlYWwpe3A9W107Zm9yKHY9MCx3PWlbdV0ubGVuZ3RoO3Y8dzt2Kyspe3Bbdl09W2lbdV1bdl1bMF1dO2Zvcih4PTEseT1pW3VdW3ZdLmxlbmd0aDt4PHk7eCsrKXBbdl1beF09aVt1XVt2XVt4XSt0KmYqalt1XVt2XVt4XX19ZWxzZXt2YXIgej1mdW5jdGlvbihhKXtyZXR1cm4raVt1XVthXSt0KmYqalt1XVthXX07cD1bW1wibVwiLHooMCkseigxKSx6KDIpLHooMykseig0KSx6KDUpXV19YnJlYWs7Y2FzZVwiY3N2XCI6aWYodT09XCJjbGlwLXJlY3RcIil7cD1bXSx2PTQ7d2hpbGUodi0tKXBbdl09K2lbdV1bdl0rdCpmKmpbdV1bdl19YnJlYWs7ZGVmYXVsdDp2YXIgQT1bXVtuXShpW3VdKTtwPVtdLHY9bS5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW3VdLmxlbmd0aDt3aGlsZSh2LS0pcFt2XT0rQVt2XSt0KmYqalt1XVt2XX1vW3VdPXB9bS5hdHRyKG8pLGZ1bmN0aW9uKGEsYixjKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZXZlKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiK2EsYixjKX0pfShtLmlkLG0sZC5hbmltKX1lbHNleyhmdW5jdGlvbihiLGMsZCl7c2V0VGltZW91dChmdW5jdGlvbigpe2V2ZShcInJhcGhhZWwuYW5pbS5mcmFtZS5cIitjLmlkLGMsZCksZXZlKFwicmFwaGFlbC5hbmltLmZpbmlzaC5cIitjLmlkLGMsZCksYS5pcyhiLFwiZnVuY3Rpb25cIikmJmIuY2FsbChjKX0pfSkoZC5jYWxsYmFjayxtLGQuYW5pbSksbS5hdHRyKGspLGN5LnNwbGljZShjLS0sMSk7aWYoZC5yZXBlYXQ+MSYmIWQubmV4dCl7Zm9yKHMgaW4gaylrW2ddKHMpJiYocltzXT1kLnRvdGFsT3JpZ2luW3NdKTtkLmVsLmF0dHIociksY0UoZC5hbmltLGQuZWwsZC5hbmltLnBlcmNlbnRzWzBdLG51bGwsZC50b3RhbE9yaWdpbixkLnJlcGVhdC0xKX1kLm5leHQmJiFkLnN0b3AmJmNFKGQuYW5pbSxkLmVsLGQubmV4dCxudWxsLGQudG90YWxPcmlnaW4sZC5yZXBlYXQpfX1hLnN2ZyYmbSYmbS5wYXBlciYmbS5wYXBlci5zYWZhcmkoKSxjeS5sZW5ndGgmJmN6KGNBKX0sY0I9ZnVuY3Rpb24oYSl7cmV0dXJuIGE+MjU1PzI1NTphPDA/MDphfTtjbC5hbmltYXRlV2l0aD1mdW5jdGlvbihiLGMsZCxlLGYsZyl7dmFyIGg9dGhpcztpZihoLnJlbW92ZWQpe2cmJmcuY2FsbChoKTtyZXR1cm4gaH12YXIgaT1kIGluc3RhbmNlb2YgY0Q/ZDphLmFuaW1hdGlvbihkLGUsZixnKSxqLGs7Y0UoaSxoLGkucGVyY2VudHNbMF0sbnVsbCxoLmF0dHIoKSk7Zm9yKHZhciBsPTAsbT1jeS5sZW5ndGg7bDxtO2wrKylpZihjeVtsXS5hbmltPT1jJiZjeVtsXS5lbD09Yil7Y3lbbS0xXS5zdGFydD1jeVtsXS5zdGFydDticmVha31yZXR1cm4gaH0sY2wub25BbmltYXRpb249ZnVuY3Rpb24oYSl7YT9ldmUub24oXCJyYXBoYWVsLmFuaW0uZnJhbWUuXCIrdGhpcy5pZCxhKTpldmUudW5iaW5kKFwicmFwaGFlbC5hbmltLmZyYW1lLlwiK3RoaXMuaWQpO3JldHVybiB0aGlzfSxjRC5wcm90b3R5cGUuZGVsYXk9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGNEKHRoaXMuYW5pbSx0aGlzLm1zKTtiLnRpbWVzPXRoaXMudGltZXMsYi5kZWw9K2F8fDA7cmV0dXJuIGJ9LGNELnByb3RvdHlwZS5yZXBlYXQ9ZnVuY3Rpb24oYSl7dmFyIGI9bmV3IGNEKHRoaXMuYW5pbSx0aGlzLm1zKTtiLmRlbD10aGlzLmRlbCxiLnRpbWVzPXcuZmxvb3IoeChhLDApKXx8MTtyZXR1cm4gYn0sYS5hbmltYXRpb249ZnVuY3Rpb24oYixjLGQsZSl7aWYoYiBpbnN0YW5jZW9mIGNEKXJldHVybiBiO2lmKGEuaXMoZCxcImZ1bmN0aW9uXCIpfHwhZCllPWV8fGR8fG51bGwsZD1udWxsO2I9T2JqZWN0KGIpLGM9K2N8fDA7dmFyIGY9e30saCxpO2ZvcihpIGluIGIpYltnXShpKSYmUShpKSE9aSYmUShpKStcIiVcIiE9aSYmKGg9ITAsZltpXT1iW2ldKTtpZighaClyZXR1cm4gbmV3IGNEKGIsYyk7ZCYmKGYuZWFzaW5nPWQpLGUmJihmLmNhbGxiYWNrPWUpO3JldHVybiBuZXcgY0QoezEwMDpmfSxjKX0sY2wuYW5pbWF0ZT1mdW5jdGlvbihiLGMsZCxlKXt2YXIgZj10aGlzO2lmKGYucmVtb3ZlZCl7ZSYmZS5jYWxsKGYpO3JldHVybiBmfXZhciBnPWIgaW5zdGFuY2VvZiBjRD9iOmEuYW5pbWF0aW9uKGIsYyxkLGUpO2NFKGcsZixnLnBlcmNlbnRzWzBdLG51bGwsZi5hdHRyKCkpO3JldHVybiBmfSxjbC5zZXRUaW1lPWZ1bmN0aW9uKGEsYil7YSYmYiE9bnVsbCYmdGhpcy5zdGF0dXMoYSx5KGIsYS5tcykvYS5tcyk7cmV0dXJuIHRoaXN9LGNsLnN0YXR1cz1mdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9MCxlLGY7aWYoYiE9bnVsbCl7Y0UoYSx0aGlzLC0xLHkoYiwxKSk7cmV0dXJuIHRoaXN9ZT1jeS5sZW5ndGg7Zm9yKDtkPGU7ZCsrKXtmPWN5W2RdO2lmKGYuZWwuaWQ9PXRoaXMuaWQmJighYXx8Zi5hbmltPT1hKSl7aWYoYSlyZXR1cm4gZi5zdGF0dXM7Yy5wdXNoKHthbmltOmYuYW5pbSxzdGF0dXM6Zi5zdGF0dXN9KX19aWYoYSlyZXR1cm4gMDtyZXR1cm4gY30sY2wucGF1c2U9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxjeS5sZW5ndGg7YisrKWN5W2JdLmVsLmlkPT10aGlzLmlkJiYoIWF8fGN5W2JdLmFuaW09PWEpJiZldmUoXCJyYXBoYWVsLmFuaW0ucGF1c2UuXCIrdGhpcy5pZCx0aGlzLGN5W2JdLmFuaW0pIT09ITEmJihjeVtiXS5wYXVzZWQ9ITApO3JldHVybiB0aGlzfSxjbC5yZXN1bWU9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxjeS5sZW5ndGg7YisrKWlmKGN5W2JdLmVsLmlkPT10aGlzLmlkJiYoIWF8fGN5W2JdLmFuaW09PWEpKXt2YXIgYz1jeVtiXTtldmUoXCJyYXBoYWVsLmFuaW0ucmVzdW1lLlwiK3RoaXMuaWQsdGhpcyxjLmFuaW0pIT09ITEmJihkZWxldGUgYy5wYXVzZWQsdGhpcy5zdGF0dXMoYy5hbmltLGMuc3RhdHVzKSl9cmV0dXJuIHRoaXN9LGNsLnN0b3A9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTA7YjxjeS5sZW5ndGg7YisrKWN5W2JdLmVsLmlkPT10aGlzLmlkJiYoIWF8fGN5W2JdLmFuaW09PWEpJiZldmUoXCJyYXBoYWVsLmFuaW0uc3RvcC5cIit0aGlzLmlkLHRoaXMsY3lbYl0uYW5pbSkhPT0hMSYmY3kuc3BsaWNlKGItLSwxKTtyZXR1cm4gdGhpc30sZXZlLm9uKFwicmFwaGFlbC5yZW1vdmVcIixjRiksZXZlLm9uKFwicmFwaGFlbC5jbGVhclwiLGNGKSxjbC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiUmFwaGHvv71s77+9cyBvYmplY3RcIn07dmFyIGNHPWZ1bmN0aW9uKGEpe3RoaXMuaXRlbXM9W10sdGhpcy5sZW5ndGg9MCx0aGlzLnR5cGU9XCJzZXRcIjtpZihhKWZvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKylhW2JdJiYoYVtiXS5jb25zdHJ1Y3Rvcj09Y2wuY29uc3RydWN0b3J8fGFbYl0uY29uc3RydWN0b3I9PWNHKSYmKHRoaXNbdGhpcy5pdGVtcy5sZW5ndGhdPXRoaXMuaXRlbXNbdGhpcy5pdGVtcy5sZW5ndGhdPWFbYl0sdGhpcy5sZW5ndGgrKyl9LGNIPWNHLnByb3RvdHlwZTtjSC5wdXNoPWZ1bmN0aW9uKCl7dmFyIGEsYjtmb3IodmFyIGM9MCxkPWFyZ3VtZW50cy5sZW5ndGg7YzxkO2MrKylhPWFyZ3VtZW50c1tjXSxhJiYoYS5jb25zdHJ1Y3Rvcj09Y2wuY29uc3RydWN0b3J8fGEuY29uc3RydWN0b3I9PWNHKSYmKGI9dGhpcy5pdGVtcy5sZW5ndGgsdGhpc1tiXT10aGlzLml0ZW1zW2JdPWEsdGhpcy5sZW5ndGgrKyk7cmV0dXJuIHRoaXN9LGNILnBvcD1mdW5jdGlvbigpe3RoaXMubGVuZ3RoJiZkZWxldGUgdGhpc1t0aGlzLmxlbmd0aC0tXTtyZXR1cm4gdGhpcy5pdGVtcy5wb3AoKX0sY0guZm9yRWFjaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9dGhpcy5pdGVtcy5sZW5ndGg7YzxkO2MrKylpZihhLmNhbGwoYix0aGlzLml0ZW1zW2NdLGMpPT09ITEpcmV0dXJuIHRoaXM7cmV0dXJuIHRoaXN9O2Zvcih2YXIgY0kgaW4gY2wpY2xbZ10oY0kpJiYoY0hbY0ldPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cztyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2NbYV1bbV0oYyxiKX0pfX0oY0kpKTtjSC5hdHRyPWZ1bmN0aW9uKGIsYyl7aWYoYiYmYS5pcyhiLEUpJiZhLmlzKGJbMF0sXCJvYmplY3RcIikpZm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKXRoaXMuaXRlbXNbZF0uYXR0cihiW2RdKTtlbHNlIGZvcih2YXIgZj0wLGc9dGhpcy5pdGVtcy5sZW5ndGg7ZjxnO2YrKyl0aGlzLml0ZW1zW2ZdLmF0dHIoYixjKTtyZXR1cm4gdGhpc30sY0guY2xlYXI9ZnVuY3Rpb24oKXt3aGlsZSh0aGlzLmxlbmd0aCl0aGlzLnBvcCgpfSxjSC5zcGxpY2U9ZnVuY3Rpb24oYSxiLGMpe2E9YTwwP3godGhpcy5sZW5ndGgrYSwwKTphLGI9eCgwLHkodGhpcy5sZW5ndGgtYSxiKSk7dmFyIGQ9W10sZT1bXSxmPVtdLGc7Zm9yKGc9MjtnPGFyZ3VtZW50cy5sZW5ndGg7ZysrKWYucHVzaChhcmd1bWVudHNbZ10pO2ZvcihnPTA7ZzxiO2crKyllLnB1c2godGhpc1thK2ddKTtmb3IoO2c8dGhpcy5sZW5ndGgtYTtnKyspZC5wdXNoKHRoaXNbYStnXSk7dmFyIGg9Zi5sZW5ndGg7Zm9yKGc9MDtnPGgrZC5sZW5ndGg7ZysrKXRoaXMuaXRlbXNbYStnXT10aGlzW2ErZ109ZzxoP2ZbZ106ZFtnLWhdO2c9dGhpcy5pdGVtcy5sZW5ndGg9dGhpcy5sZW5ndGgtPWItaDt3aGlsZSh0aGlzW2ddKWRlbGV0ZSB0aGlzW2crK107cmV0dXJuIG5ldyBjRyhlKX0sY0guZXhjbHVkZT1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPXRoaXMubGVuZ3RoO2I8YztiKyspaWYodGhpc1tiXT09YSl7dGhpcy5zcGxpY2UoYiwxKTtyZXR1cm4hMH19LGNILmFuaW1hdGU9ZnVuY3Rpb24oYixjLGQsZSl7KGEuaXMoZCxcImZ1bmN0aW9uXCIpfHwhZCkmJihlPWR8fG51bGwpO3ZhciBmPXRoaXMuaXRlbXMubGVuZ3RoLGc9ZixoLGk9dGhpcyxqO2lmKCFmKXJldHVybiB0aGlzO2UmJihqPWZ1bmN0aW9uKCl7IS0tZiYmZS5jYWxsKGkpfSksZD1hLmlzKGQsRCk/ZDpqO3ZhciBrPWEuYW5pbWF0aW9uKGIsYyxkLGopO2g9dGhpcy5pdGVtc1stLWddLmFuaW1hdGUoayk7d2hpbGUoZy0tKXRoaXMuaXRlbXNbZ10mJiF0aGlzLml0ZW1zW2ddLnJlbW92ZWQmJnRoaXMuaXRlbXNbZ10uYW5pbWF0ZVdpdGgoaCxrLGspO3JldHVybiB0aGlzfSxjSC5pbnNlcnRBZnRlcj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLml0ZW1zLmxlbmd0aDt3aGlsZShiLS0pdGhpcy5pdGVtc1tiXS5pbnNlcnRBZnRlcihhKTtyZXR1cm4gdGhpc30sY0guZ2V0QkJveD1mdW5jdGlvbigpe3ZhciBhPVtdLGI9W10sYz1bXSxkPVtdO2Zvcih2YXIgZT10aGlzLml0ZW1zLmxlbmd0aDtlLS07KWlmKCF0aGlzLml0ZW1zW2VdLnJlbW92ZWQpe3ZhciBmPXRoaXMuaXRlbXNbZV0uZ2V0QkJveCgpO2EucHVzaChmLngpLGIucHVzaChmLnkpLGMucHVzaChmLngrZi53aWR0aCksZC5wdXNoKGYueStmLmhlaWdodCl9YT15W21dKDAsYSksYj15W21dKDAsYiksYz14W21dKDAsYyksZD14W21dKDAsZCk7cmV0dXJue3g6YSx5OmIseDI6Yyx5MjpkLHdpZHRoOmMtYSxoZWlnaHQ6ZC1ifX0sY0guY2xvbmU9ZnVuY3Rpb24oYSl7YT1uZXcgY0c7Zm9yKHZhciBiPTAsYz10aGlzLml0ZW1zLmxlbmd0aDtiPGM7YisrKWEucHVzaCh0aGlzLml0ZW1zW2JdLmNsb25lKCkpO3JldHVybiBhfSxjSC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiUmFwaGHvv71s77+9cyBzZXRcIn0sYS5yZWdpc3RlckZvbnQ9ZnVuY3Rpb24oYSl7aWYoIWEuZmFjZSlyZXR1cm4gYTt0aGlzLmZvbnRzPXRoaXMuZm9udHN8fHt9O3ZhciBiPXt3OmEudyxmYWNlOnt9LGdseXBoczp7fX0sYz1hLmZhY2VbXCJmb250LWZhbWlseVwiXTtmb3IodmFyIGQgaW4gYS5mYWNlKWEuZmFjZVtnXShkKSYmKGIuZmFjZVtkXT1hLmZhY2VbZF0pO3RoaXMuZm9udHNbY10/dGhpcy5mb250c1tjXS5wdXNoKGIpOnRoaXMuZm9udHNbY109W2JdO2lmKCFhLnN2Zyl7Yi5mYWNlW1widW5pdHMtcGVyLWVtXCJdPVIoYS5mYWNlW1widW5pdHMtcGVyLWVtXCJdLDEwKTtmb3IodmFyIGUgaW4gYS5nbHlwaHMpaWYoYS5nbHlwaHNbZ10oZSkpe3ZhciBmPWEuZ2x5cGhzW2VdO2IuZ2x5cGhzW2VdPXt3OmYudyxrOnt9LGQ6Zi5kJiZcIk1cIitmLmQucmVwbGFjZSgvW21sY3h0cnZdL2csZnVuY3Rpb24oYSl7cmV0dXJue2w6XCJMXCIsYzpcIkNcIix4OlwielwiLHQ6XCJtXCIscjpcImxcIix2OlwiY1wifVthXXx8XCJNXCJ9KStcInpcIn07aWYoZi5rKWZvcih2YXIgaCBpbiBmLmspZltnXShoKSYmKGIuZ2x5cGhzW2VdLmtbaF09Zi5rW2hdKX19cmV0dXJuIGF9LGsuZ2V0Rm9udD1mdW5jdGlvbihiLGMsZCxlKXtlPWV8fFwibm9ybWFsXCIsZD1kfHxcIm5vcm1hbFwiLGM9K2N8fHtub3JtYWw6NDAwLGJvbGQ6NzAwLGxpZ2h0ZXI6MzAwLGJvbGRlcjo4MDB9W2NdfHw0MDA7aWYoISFhLmZvbnRzKXt2YXIgZj1hLmZvbnRzW2JdO2lmKCFmKXt2YXIgaD1uZXcgUmVnRXhwKFwiKF58XFxcXHMpXCIrYi5yZXBsYWNlKC9bXlxcd1xcZFxccyshfi46Xy1dL2cscCkrXCIoXFxcXHN8JClcIixcImlcIik7Zm9yKHZhciBpIGluIGEuZm9udHMpaWYoYS5mb250c1tnXShpKSYmaC50ZXN0KGkpKXtmPWEuZm9udHNbaV07YnJlYWt9fXZhciBqO2lmKGYpZm9yKHZhciBrPTAsbD1mLmxlbmd0aDtrPGw7aysrKXtqPWZba107aWYoai5mYWNlW1wiZm9udC13ZWlnaHRcIl09PWMmJihqLmZhY2VbXCJmb250LXN0eWxlXCJdPT1kfHwhai5mYWNlW1wiZm9udC1zdHlsZVwiXSkmJmouZmFjZVtcImZvbnQtc3RyZXRjaFwiXT09ZSlicmVha31yZXR1cm4gan19LGsucHJpbnQ9ZnVuY3Rpb24oYixkLGUsZixnLGgsaSl7aD1ofHxcIm1pZGRsZVwiLGk9eCh5KGl8fDAsMSksLTEpO3ZhciBqPXIoZSlbc10ocCksaz0wLGw9MCxtPXAsbjthLmlzKGYsZSkmJihmPXRoaXMuZ2V0Rm9udChmKSk7aWYoZil7bj0oZ3x8MTYpL2YuZmFjZVtcInVuaXRzLXBlci1lbVwiXTt2YXIgbz1mLmZhY2UuYmJveFtzXShjKSxxPStvWzBdLHQ9b1szXS1vWzFdLHU9MCx2PStvWzFdKyhoPT1cImJhc2VsaW5lXCI/dCsgK2YuZmFjZS5kZXNjZW50OnQvMik7Zm9yKHZhciB3PTAsej1qLmxlbmd0aDt3PHo7dysrKXtpZihqW3ddPT1cIlxcblwiKWs9MCxCPTAsbD0wLHUrPXQ7ZWxzZXt2YXIgQT1sJiZmLmdseXBoc1tqW3ctMV1dfHx7fSxCPWYuZ2x5cGhzW2pbd11dO2srPWw/KEEud3x8Zi53KSsoQS5rJiZBLmtbalt3XV18fDApK2YudyppOjAsbD0xfUImJkIuZCYmKG0rPWEudHJhbnNmb3JtUGF0aChCLmQsW1widFwiLGsqbix1Km4sXCJzXCIsbixuLHEsdixcInRcIiwoYi1xKS9uLChkLXYpL25dKSl9fXJldHVybiB0aGlzLnBhdGgobSkuYXR0cih7ZmlsbDpcIiMwMDBcIixzdHJva2U6XCJub25lXCJ9KX0say5hZGQ9ZnVuY3Rpb24oYil7aWYoYS5pcyhiLFwiYXJyYXlcIikpe3ZhciBjPXRoaXMuc2V0KCksZT0wLGY9Yi5sZW5ndGgsaDtmb3IoO2U8ZjtlKyspaD1iW2VdfHx7fSxkW2ddKGgudHlwZSkmJmMucHVzaCh0aGlzW2gudHlwZV0oKS5hdHRyKGgpKX1yZXR1cm4gY30sYS5mb3JtYXQ9ZnVuY3Rpb24oYixjKXt2YXIgZD1hLmlzKGMsRSk/WzBdW25dKGMpOmFyZ3VtZW50cztiJiZhLmlzKGIsRCkmJmQubGVuZ3RoLTEmJihiPWIucmVwbGFjZShlLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGRbKytiXT09bnVsbD9wOmRbYl19KSk7cmV0dXJuIGJ8fHB9LGEuZnVsbGZpbGw9ZnVuY3Rpb24oKXt2YXIgYT0vXFx7KFteXFx9XSspXFx9L2csYj0vKD86KD86XnxcXC4pKC4rPykoPz1cXFt8XFwufCR8XFwoKXxcXFsoJ3xcIikoLis/KVxcMlxcXSkoXFwoXFwpKT8vZyxjPWZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kO2MucmVwbGFjZShiLGZ1bmN0aW9uKGEsYixjLGQsZil7Yj1ifHxkLGUmJihiIGluIGUmJihlPWVbYl0pLHR5cGVvZiBlPT1cImZ1bmN0aW9uXCImJmYmJihlPWUoKSkpfSksZT0oZT09bnVsbHx8ZT09ZD9hOmUpK1wiXCI7cmV0dXJuIGV9O3JldHVybiBmdW5jdGlvbihiLGQpe3JldHVybiBTdHJpbmcoYikucmVwbGFjZShhLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGMoYSxiLGQpfSl9fSgpLGEubmluamE9ZnVuY3Rpb24oKXtpLndhcz9oLndpbi5SYXBoYWVsPWkuaXM6ZGVsZXRlIFJhcGhhZWw7cmV0dXJuIGF9LGEuc3Q9Y0gsZnVuY3Rpb24oYixjLGQpe2Z1bmN0aW9uIGUoKXsvaW4vLnRlc3QoYi5yZWFkeVN0YXRlKT9zZXRUaW1lb3V0KGUsOSk6YS5ldmUoXCJyYXBoYWVsLkRPTWxvYWRcIil9Yi5yZWFkeVN0YXRlPT1udWxsJiZiLmFkZEV2ZW50TGlzdGVuZXImJihiLmFkZEV2ZW50TGlzdGVuZXIoYyxkPWZ1bmN0aW9uKCl7Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCwhMSksYi5yZWFkeVN0YXRlPVwiY29tcGxldGVcIn0sITEpLGIucmVhZHlTdGF0ZT1cImxvYWRpbmdcIiksZSgpfShkb2N1bWVudCxcIkRPTUNvbnRlbnRMb2FkZWRcIiksaS53YXM/aC53aW4uUmFwaGFlbD1hOlJhcGhhZWw9YSxldmUub24oXCJyYXBoYWVsLkRPTWxvYWRcIixmdW5jdGlvbigpe2I9ITB9KX0oKSx3aW5kb3cuUmFwaGFlbC5zdmcmJmZ1bmN0aW9uKGEpe3ZhciBiPVwiaGFzT3duUHJvcGVydHlcIixjPVN0cmluZyxkPXBhcnNlRmxvYXQsZT1wYXJzZUludCxmPU1hdGgsZz1mLm1heCxoPWYuYWJzLGk9Zi5wb3csaj0vWywgXSsvLGs9YS5ldmUsbD1cIlwiLG09XCIgXCIsbj1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixvPXtibG9jazpcIk01LDAgMCwyLjUgNSw1elwiLGNsYXNzaWM6XCJNNSwwIDAsMi41IDUsNSAzLjUsMyAzLjUsMnpcIixkaWFtb25kOlwiTTIuNSwwIDUsMi41IDIuNSw1IDAsMi41elwiLG9wZW46XCJNNiwxIDEsMy41IDYsNlwiLG92YWw6XCJNMi41LDBBMi41LDIuNSwwLDAsMSwyLjUsNSAyLjUsMi41LDAsMCwxLDIuNSwwelwifSxwPXt9O2EudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIllvdXIgYnJvd3NlciBzdXBwb3J0cyBTVkcuXFxuWW91IGFyZSBydW5uaW5nIFJhcGhh77+9bCBcIit0aGlzLnZlcnNpb259O3ZhciBxPWZ1bmN0aW9uKGQsZSl7aWYoZSl7dHlwZW9mIGQ9PVwic3RyaW5nXCImJihkPXEoZCkpO2Zvcih2YXIgZiBpbiBlKWVbYl0oZikmJihmLnN1YnN0cmluZygwLDYpPT1cInhsaW5rOlwiP2Quc2V0QXR0cmlidXRlTlMobixmLnN1YnN0cmluZyg2KSxjKGVbZl0pKTpkLnNldEF0dHJpYnV0ZShmLGMoZVtmXSkpKX1lbHNlIGQ9YS5fZy5kb2MuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixkKSxkLnN0eWxlJiYoZC5zdHlsZS53ZWJraXRUYXBIaWdobGlnaHRDb2xvcj1cInJnYmEoMCwwLDAsMClcIik7cmV0dXJuIGR9LHI9ZnVuY3Rpb24oYixlKXt2YXIgaj1cImxpbmVhclwiLGs9Yi5pZCtlLG09LjUsbj0uNSxvPWIubm9kZSxwPWIucGFwZXIscj1vLnN0eWxlLHM9YS5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQoayk7aWYoIXMpe2U9YyhlKS5yZXBsYWNlKGEuX3JhZGlhbF9ncmFkaWVudCxmdW5jdGlvbihhLGIsYyl7aj1cInJhZGlhbFwiO2lmKGImJmMpe209ZChiKSxuPWQoYyk7dmFyIGU9KG4+LjUpKjItMTtpKG0tLjUsMikraShuLS41LDIpPi4yNSYmKG49Zi5zcXJ0KC4yNS1pKG0tLjUsMikpKmUrLjUpJiZuIT0uNSYmKG49bi50b0ZpeGVkKDUpLTFlLTUqZSl9cmV0dXJuIGx9KSxlPWUuc3BsaXQoL1xccypcXC1cXHMqLyk7aWYoaj09XCJsaW5lYXJcIil7dmFyIHQ9ZS5zaGlmdCgpO3Q9LWQodCk7aWYoaXNOYU4odCkpcmV0dXJuIG51bGw7dmFyIHU9WzAsMCxmLmNvcyhhLnJhZCh0KSksZi5zaW4oYS5yYWQodCkpXSx2PTEvKGcoaCh1WzJdKSxoKHVbM10pKXx8MSk7dVsyXSo9dix1WzNdKj12LHVbMl08MCYmKHVbMF09LXVbMl0sdVsyXT0wKSx1WzNdPDAmJih1WzFdPS11WzNdLHVbM109MCl9dmFyIHc9YS5fcGFyc2VEb3RzKGUpO2lmKCF3KXJldHVybiBudWxsO2s9ay5yZXBsYWNlKC9bXFwoXFwpXFxzLFxceGIwI10vZyxcIl9cIiksYi5ncmFkaWVudCYmayE9Yi5ncmFkaWVudC5pZCYmKHAuZGVmcy5yZW1vdmVDaGlsZChiLmdyYWRpZW50KSxkZWxldGUgYi5ncmFkaWVudCk7aWYoIWIuZ3JhZGllbnQpe3M9cShqK1wiR3JhZGllbnRcIix7aWQ6a30pLGIuZ3JhZGllbnQ9cyxxKHMsaj09XCJyYWRpYWxcIj97Zng6bSxmeTpufTp7eDE6dVswXSx5MTp1WzFdLHgyOnVbMl0seTI6dVszXSxncmFkaWVudFRyYW5zZm9ybTpiLm1hdHJpeC5pbnZlcnQoKX0pLHAuZGVmcy5hcHBlbmRDaGlsZChzKTtmb3IodmFyIHg9MCx5PXcubGVuZ3RoO3g8eTt4Kyspcy5hcHBlbmRDaGlsZChxKFwic3RvcFwiLHtvZmZzZXQ6d1t4XS5vZmZzZXQ/d1t4XS5vZmZzZXQ6eD9cIjEwMCVcIjpcIjAlXCIsXCJzdG9wLWNvbG9yXCI6d1t4XS5jb2xvcnx8XCIjZmZmXCJ9KSl9fXEobyx7ZmlsbDpcInVybCgjXCIraytcIilcIixvcGFjaXR5OjEsXCJmaWxsLW9wYWNpdHlcIjoxfSksci5maWxsPWwsci5vcGFjaXR5PTEsci5maWxsT3BhY2l0eT0xO3JldHVybiAxfSxzPWZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QkJveCgxKTtxKGEucGF0dGVybix7cGF0dGVyblRyYW5zZm9ybTphLm1hdHJpeC5pbnZlcnQoKStcIiB0cmFuc2xhdGUoXCIrYi54K1wiLFwiK2IueStcIilcIn0pfSx0PWZ1bmN0aW9uKGQsZSxmKXtpZihkLnR5cGU9PVwicGF0aFwiKXt2YXIgZz1jKGUpLnRvTG93ZXJDYXNlKCkuc3BsaXQoXCItXCIpLGg9ZC5wYXBlcixpPWY/XCJlbmRcIjpcInN0YXJ0XCIsaj1kLm5vZGUsaz1kLmF0dHJzLG09a1tcInN0cm9rZS13aWR0aFwiXSxuPWcubGVuZ3RoLHI9XCJjbGFzc2ljXCIscyx0LHUsdix3LHg9Myx5PTMsej01O3doaWxlKG4tLSlzd2l0Y2goZ1tuXSl7Y2FzZVwiYmxvY2tcIjpjYXNlXCJjbGFzc2ljXCI6Y2FzZVwib3ZhbFwiOmNhc2VcImRpYW1vbmRcIjpjYXNlXCJvcGVuXCI6Y2FzZVwibm9uZVwiOnI9Z1tuXTticmVhaztjYXNlXCJ3aWRlXCI6eT01O2JyZWFrO2Nhc2VcIm5hcnJvd1wiOnk9MjticmVhaztjYXNlXCJsb25nXCI6eD01O2JyZWFrO2Nhc2VcInNob3J0XCI6eD0yfXI9PVwib3BlblwiPyh4Kz0yLHkrPTIseis9Mix1PTEsdj1mPzQ6MSx3PXtmaWxsOlwibm9uZVwiLHN0cm9rZTprLnN0cm9rZX0pOih2PXU9eC8yLHc9e2ZpbGw6ay5zdHJva2Usc3Ryb2tlOlwibm9uZVwifSksZC5fLmFycm93cz9mPyhkLl8uYXJyb3dzLmVuZFBhdGgmJnBbZC5fLmFycm93cy5lbmRQYXRoXS0tLGQuXy5hcnJvd3MuZW5kTWFya2VyJiZwW2QuXy5hcnJvd3MuZW5kTWFya2VyXS0tKTooZC5fLmFycm93cy5zdGFydFBhdGgmJnBbZC5fLmFycm93cy5zdGFydFBhdGhdLS0sZC5fLmFycm93cy5zdGFydE1hcmtlciYmcFtkLl8uYXJyb3dzLnN0YXJ0TWFya2VyXS0tKTpkLl8uYXJyb3dzPXt9O2lmKHIhPVwibm9uZVwiKXt2YXIgQT1cInJhcGhhZWwtbWFya2VyLVwiK3IsQj1cInJhcGhhZWwtbWFya2VyLVwiK2krcit4K3k7YS5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQoQSk/cFtBXSsrOihoLmRlZnMuYXBwZW5kQ2hpbGQocShxKFwicGF0aFwiKSx7XCJzdHJva2UtbGluZWNhcFwiOlwicm91bmRcIixkOm9bcl0saWQ6QX0pKSxwW0FdPTEpO3ZhciBDPWEuX2cuZG9jLmdldEVsZW1lbnRCeUlkKEIpLEQ7Qz8ocFtCXSsrLEQ9Qy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInVzZVwiKVswXSk6KEM9cShxKFwibWFya2VyXCIpLHtpZDpCLG1hcmtlckhlaWdodDp5LG1hcmtlcldpZHRoOngsb3JpZW50OlwiYXV0b1wiLHJlZlg6dixyZWZZOnkvMn0pLEQ9cShxKFwidXNlXCIpLHtcInhsaW5rOmhyZWZcIjpcIiNcIitBLHRyYW5zZm9ybTooZj9cInJvdGF0ZSgxODAgXCIreC8yK1wiIFwiK3kvMitcIikgXCI6bCkrXCJzY2FsZShcIit4L3orXCIsXCIreS96K1wiKVwiLFwic3Ryb2tlLXdpZHRoXCI6KDEvKCh4L3oreS96KS8yKSkudG9GaXhlZCg0KX0pLEMuYXBwZW5kQ2hpbGQoRCksaC5kZWZzLmFwcGVuZENoaWxkKEMpLHBbQl09MSkscShELHcpO3ZhciBGPXUqKHIhPVwiZGlhbW9uZFwiJiZyIT1cIm92YWxcIik7Zj8ocz1kLl8uYXJyb3dzLnN0YXJ0ZHgqbXx8MCx0PWEuZ2V0VG90YWxMZW5ndGgoay5wYXRoKS1GKm0pOihzPUYqbSx0PWEuZ2V0VG90YWxMZW5ndGgoay5wYXRoKS0oZC5fLmFycm93cy5lbmRkeCptfHwwKSksdz17fSx3W1wibWFya2VyLVwiK2ldPVwidXJsKCNcIitCK1wiKVwiO2lmKHR8fHMpdy5kPVJhcGhhZWwuZ2V0U3VicGF0aChrLnBhdGgscyx0KTtxKGosdyksZC5fLmFycm93c1tpK1wiUGF0aFwiXT1BLGQuXy5hcnJvd3NbaStcIk1hcmtlclwiXT1CLGQuXy5hcnJvd3NbaStcImR4XCJdPUYsZC5fLmFycm93c1tpK1wiVHlwZVwiXT1yLGQuXy5hcnJvd3NbaStcIlN0cmluZ1wiXT1lfWVsc2UgZj8ocz1kLl8uYXJyb3dzLnN0YXJ0ZHgqbXx8MCx0PWEuZ2V0VG90YWxMZW5ndGgoay5wYXRoKS1zKToocz0wLHQ9YS5nZXRUb3RhbExlbmd0aChrLnBhdGgpLShkLl8uYXJyb3dzLmVuZGR4Km18fDApKSxkLl8uYXJyb3dzW2krXCJQYXRoXCJdJiZxKGose2Q6UmFwaGFlbC5nZXRTdWJwYXRoKGsucGF0aCxzLHQpfSksZGVsZXRlIGQuXy5hcnJvd3NbaStcIlBhdGhcIl0sZGVsZXRlIGQuXy5hcnJvd3NbaStcIk1hcmtlclwiXSxkZWxldGUgZC5fLmFycm93c1tpK1wiZHhcIl0sZGVsZXRlIGQuXy5hcnJvd3NbaStcIlR5cGVcIl0sZGVsZXRlIGQuXy5hcnJvd3NbaStcIlN0cmluZ1wiXTtmb3IodyBpbiBwKWlmKHBbYl0odykmJiFwW3ddKXt2YXIgRz1hLl9nLmRvYy5nZXRFbGVtZW50QnlJZCh3KTtHJiZHLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoRyl9fX0sdT17XCJcIjpbMF0sbm9uZTpbMF0sXCItXCI6WzMsMV0sXCIuXCI6WzEsMV0sXCItLlwiOlszLDEsMSwxXSxcIi0uLlwiOlszLDEsMSwxLDEsMV0sXCIuIFwiOlsxLDNdLFwiLSBcIjpbNCwzXSxcIi0tXCI6WzgsM10sXCItIC5cIjpbNCwzLDEsM10sXCItLS5cIjpbOCwzLDEsM10sXCItLS4uXCI6WzgsMywxLDMsMSwzXX0sdj1mdW5jdGlvbihhLGIsZCl7Yj11W2MoYikudG9Mb3dlckNhc2UoKV07aWYoYil7dmFyIGU9YS5hdHRyc1tcInN0cm9rZS13aWR0aFwiXXx8XCIxXCIsZj17cm91bmQ6ZSxzcXVhcmU6ZSxidXR0OjB9W2EuYXR0cnNbXCJzdHJva2UtbGluZWNhcFwiXXx8ZFtcInN0cm9rZS1saW5lY2FwXCJdXXx8MCxnPVtdLGg9Yi5sZW5ndGg7d2hpbGUoaC0tKWdbaF09YltoXSplKyhoJTI/MTotMSkqZjtxKGEubm9kZSx7XCJzdHJva2UtZGFzaGFycmF5XCI6Zy5qb2luKFwiLFwiKX0pfX0sdz1mdW5jdGlvbihkLGYpe3ZhciBpPWQubm9kZSxrPWQuYXR0cnMsbT1pLnN0eWxlLnZpc2liaWxpdHk7aS5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCI7Zm9yKHZhciBvIGluIGYpaWYoZltiXShvKSl7aWYoIWEuX2F2YWlsYWJsZUF0dHJzW2JdKG8pKWNvbnRpbnVlO3ZhciBwPWZbb107a1tvXT1wO3N3aXRjaChvKXtjYXNlXCJibHVyXCI6ZC5ibHVyKHApO2JyZWFrO2Nhc2VcImhyZWZcIjpjYXNlXCJ0aXRsZVwiOmNhc2VcInRhcmdldFwiOnZhciB1PWkucGFyZW50Tm9kZTtpZih1LnRhZ05hbWUudG9Mb3dlckNhc2UoKSE9XCJhXCIpe3ZhciB3PXEoXCJhXCIpO3UuaW5zZXJ0QmVmb3JlKHcsaSksdy5hcHBlbmRDaGlsZChpKSx1PXd9bz09XCJ0YXJnZXRcIj91LnNldEF0dHJpYnV0ZU5TKG4sXCJzaG93XCIscD09XCJibGFua1wiP1wibmV3XCI6cCk6dS5zZXRBdHRyaWJ1dGVOUyhuLG8scCk7YnJlYWs7Y2FzZVwiY3Vyc29yXCI6aS5zdHlsZS5jdXJzb3I9cDticmVhaztjYXNlXCJ0cmFuc2Zvcm1cIjpkLnRyYW5zZm9ybShwKTticmVhaztjYXNlXCJhcnJvdy1zdGFydFwiOnQoZCxwKTticmVhaztjYXNlXCJhcnJvdy1lbmRcIjp0KGQscCwxKTticmVhaztjYXNlXCJjbGlwLXJlY3RcIjp2YXIgeD1jKHApLnNwbGl0KGopO2lmKHgubGVuZ3RoPT00KXtkLmNsaXAmJmQuY2xpcC5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZC5jbGlwLnBhcmVudE5vZGUpO3ZhciB6PXEoXCJjbGlwUGF0aFwiKSxBPXEoXCJyZWN0XCIpO3ouaWQ9YS5jcmVhdGVVVUlEKCkscShBLHt4OnhbMF0seTp4WzFdLHdpZHRoOnhbMl0saGVpZ2h0OnhbM119KSx6LmFwcGVuZENoaWxkKEEpLGQucGFwZXIuZGVmcy5hcHBlbmRDaGlsZCh6KSxxKGkse1wiY2xpcC1wYXRoXCI6XCJ1cmwoI1wiK3ouaWQrXCIpXCJ9KSxkLmNsaXA9QX1pZighcCl7dmFyIEI9aS5nZXRBdHRyaWJ1dGUoXCJjbGlwLXBhdGhcIik7aWYoQil7dmFyIEM9YS5fZy5kb2MuZ2V0RWxlbWVudEJ5SWQoQi5yZXBsYWNlKC8oXnVybFxcKCN8XFwpJCkvZyxsKSk7QyYmQy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKEMpLHEoaSx7XCJjbGlwLXBhdGhcIjpsfSksZGVsZXRlIGQuY2xpcH19YnJlYWs7Y2FzZVwicGF0aFwiOmQudHlwZT09XCJwYXRoXCImJihxKGkse2Q6cD9rLnBhdGg9YS5fcGF0aFRvQWJzb2x1dGUocCk6XCJNMCwwXCJ9KSxkLl8uZGlydHk9MSxkLl8uYXJyb3dzJiYoXCJzdGFydFN0cmluZ1wiaW4gZC5fLmFycm93cyYmdChkLGQuXy5hcnJvd3Muc3RhcnRTdHJpbmcpLFwiZW5kU3RyaW5nXCJpbiBkLl8uYXJyb3dzJiZ0KGQsZC5fLmFycm93cy5lbmRTdHJpbmcsMSkpKTticmVhaztjYXNlXCJ3aWR0aFwiOmkuc2V0QXR0cmlidXRlKG8scCksZC5fLmRpcnR5PTE7aWYoay5meClvPVwieFwiLHA9ay54O2Vsc2UgYnJlYWs7Y2FzZVwieFwiOmsuZngmJihwPS1rLngtKGsud2lkdGh8fDApKTtjYXNlXCJyeFwiOmlmKG89PVwicnhcIiYmZC50eXBlPT1cInJlY3RcIilicmVhaztjYXNlXCJjeFwiOmkuc2V0QXR0cmlidXRlKG8scCksZC5wYXR0ZXJuJiZzKGQpLGQuXy5kaXJ0eT0xO2JyZWFrO2Nhc2VcImhlaWdodFwiOmkuc2V0QXR0cmlidXRlKG8scCksZC5fLmRpcnR5PTE7aWYoay5meSlvPVwieVwiLHA9ay55O2Vsc2UgYnJlYWs7Y2FzZVwieVwiOmsuZnkmJihwPS1rLnktKGsuaGVpZ2h0fHwwKSk7Y2FzZVwicnlcIjppZihvPT1cInJ5XCImJmQudHlwZT09XCJyZWN0XCIpYnJlYWs7Y2FzZVwiY3lcIjppLnNldEF0dHJpYnV0ZShvLHApLGQucGF0dGVybiYmcyhkKSxkLl8uZGlydHk9MTticmVhaztjYXNlXCJyXCI6ZC50eXBlPT1cInJlY3RcIj9xKGkse3J4OnAscnk6cH0pOmkuc2V0QXR0cmlidXRlKG8scCksZC5fLmRpcnR5PTE7YnJlYWs7Y2FzZVwic3JjXCI6ZC50eXBlPT1cImltYWdlXCImJmkuc2V0QXR0cmlidXRlTlMobixcImhyZWZcIixwKTticmVhaztjYXNlXCJzdHJva2Utd2lkdGhcIjppZihkLl8uc3ghPTF8fGQuXy5zeSE9MSlwLz1nKGgoZC5fLnN4KSxoKGQuXy5zeSkpfHwxO2QucGFwZXIuX3ZiU2l6ZSYmKHAqPWQucGFwZXIuX3ZiU2l6ZSksaS5zZXRBdHRyaWJ1dGUobyxwKSxrW1wic3Ryb2tlLWRhc2hhcnJheVwiXSYmdihkLGtbXCJzdHJva2UtZGFzaGFycmF5XCJdLGYpLGQuXy5hcnJvd3MmJihcInN0YXJ0U3RyaW5nXCJpbiBkLl8uYXJyb3dzJiZ0KGQsZC5fLmFycm93cy5zdGFydFN0cmluZyksXCJlbmRTdHJpbmdcImluIGQuXy5hcnJvd3MmJnQoZCxkLl8uYXJyb3dzLmVuZFN0cmluZywxKSk7YnJlYWs7Y2FzZVwic3Ryb2tlLWRhc2hhcnJheVwiOnYoZCxwLGYpO2JyZWFrO2Nhc2VcImZpbGxcIjp2YXIgRD1jKHApLm1hdGNoKGEuX0lTVVJMKTtpZihEKXt6PXEoXCJwYXR0ZXJuXCIpO3ZhciBGPXEoXCJpbWFnZVwiKTt6LmlkPWEuY3JlYXRlVVVJRCgpLHEoeix7eDowLHk6MCxwYXR0ZXJuVW5pdHM6XCJ1c2VyU3BhY2VPblVzZVwiLGhlaWdodDoxLHdpZHRoOjF9KSxxKEYse3g6MCx5OjAsXCJ4bGluazpocmVmXCI6RFsxXX0pLHouYXBwZW5kQ2hpbGQoRiksZnVuY3Rpb24oYil7YS5fcHJlbG9hZChEWzFdLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vZmZzZXRXaWR0aCxjPXRoaXMub2Zmc2V0SGVpZ2h0O3EoYix7d2lkdGg6YSxoZWlnaHQ6Y30pLHEoRix7d2lkdGg6YSxoZWlnaHQ6Y30pLGQucGFwZXIuc2FmYXJpKCl9KX0oeiksZC5wYXBlci5kZWZzLmFwcGVuZENoaWxkKHopLHEoaSx7ZmlsbDpcInVybCgjXCIrei5pZCtcIilcIn0pLGQucGF0dGVybj16LGQucGF0dGVybiYmcyhkKTticmVha312YXIgRz1hLmdldFJHQihwKTtpZighRy5lcnJvcilkZWxldGUgZi5ncmFkaWVudCxkZWxldGUgay5ncmFkaWVudCwhYS5pcyhrLm9wYWNpdHksXCJ1bmRlZmluZWRcIikmJmEuaXMoZi5vcGFjaXR5LFwidW5kZWZpbmVkXCIpJiZxKGkse29wYWNpdHk6ay5vcGFjaXR5fSksIWEuaXMoa1tcImZpbGwtb3BhY2l0eVwiXSxcInVuZGVmaW5lZFwiKSYmYS5pcyhmW1wiZmlsbC1vcGFjaXR5XCJdLFwidW5kZWZpbmVkXCIpJiZxKGkse1wiZmlsbC1vcGFjaXR5XCI6a1tcImZpbGwtb3BhY2l0eVwiXX0pO2Vsc2UgaWYoKGQudHlwZT09XCJjaXJjbGVcInx8ZC50eXBlPT1cImVsbGlwc2VcInx8YyhwKS5jaGFyQXQoKSE9XCJyXCIpJiZyKGQscCkpe2lmKFwib3BhY2l0eVwiaW4ga3x8XCJmaWxsLW9wYWNpdHlcImluIGspe3ZhciBIPWEuX2cuZG9jLmdldEVsZW1lbnRCeUlkKGkuZ2V0QXR0cmlidXRlKFwiZmlsbFwiKS5yZXBsYWNlKC9edXJsXFwoI3xcXCkkL2csbCkpO2lmKEgpe3ZhciBJPUguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpO3EoSVtJLmxlbmd0aC0xXSx7XCJzdG9wLW9wYWNpdHlcIjooXCJvcGFjaXR5XCJpbiBrP2sub3BhY2l0eToxKSooXCJmaWxsLW9wYWNpdHlcImluIGs/a1tcImZpbGwtb3BhY2l0eVwiXToxKX0pfX1rLmdyYWRpZW50PXAsay5maWxsPVwibm9uZVwiO2JyZWFrfUdbYl0oXCJvcGFjaXR5XCIpJiZxKGkse1wiZmlsbC1vcGFjaXR5XCI6Ry5vcGFjaXR5PjE/Ry5vcGFjaXR5LzEwMDpHLm9wYWNpdHl9KTtjYXNlXCJzdHJva2VcIjpHPWEuZ2V0UkdCKHApLGkuc2V0QXR0cmlidXRlKG8sRy5oZXgpLG89PVwic3Ryb2tlXCImJkdbYl0oXCJvcGFjaXR5XCIpJiZxKGkse1wic3Ryb2tlLW9wYWNpdHlcIjpHLm9wYWNpdHk+MT9HLm9wYWNpdHkvMTAwOkcub3BhY2l0eX0pLG89PVwic3Ryb2tlXCImJmQuXy5hcnJvd3MmJihcInN0YXJ0U3RyaW5nXCJpbiBkLl8uYXJyb3dzJiZ0KGQsZC5fLmFycm93cy5zdGFydFN0cmluZyksXCJlbmRTdHJpbmdcImluIGQuXy5hcnJvd3MmJnQoZCxkLl8uYXJyb3dzLmVuZFN0cmluZywxKSk7YnJlYWs7Y2FzZVwiZ3JhZGllbnRcIjooZC50eXBlPT1cImNpcmNsZVwifHxkLnR5cGU9PVwiZWxsaXBzZVwifHxjKHApLmNoYXJBdCgpIT1cInJcIikmJnIoZCxwKTticmVhaztjYXNlXCJvcGFjaXR5XCI6ay5ncmFkaWVudCYmIWtbYl0oXCJzdHJva2Utb3BhY2l0eVwiKSYmcShpLHtcInN0cm9rZS1vcGFjaXR5XCI6cD4xP3AvMTAwOnB9KTtjYXNlXCJmaWxsLW9wYWNpdHlcIjppZihrLmdyYWRpZW50KXtIPWEuX2cuZG9jLmdldEVsZW1lbnRCeUlkKGkuZ2V0QXR0cmlidXRlKFwiZmlsbFwiKS5yZXBsYWNlKC9edXJsXFwoI3xcXCkkL2csbCkpLEgmJihJPUguZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdG9wXCIpLHEoSVtJLmxlbmd0aC0xXSx7XCJzdG9wLW9wYWNpdHlcIjpwfSkpO2JyZWFrfTtkZWZhdWx0Om89PVwiZm9udC1zaXplXCImJihwPWUocCwxMCkrXCJweFwiKTt2YXIgSj1vLnJlcGxhY2UoLyhcXC0uKS9nLGZ1bmN0aW9uKGEpe3JldHVybiBhLnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpfSk7aS5zdHlsZVtKXT1wLGQuXy5kaXJ0eT0xLGkuc2V0QXR0cmlidXRlKG8scCl9fXkoZCxmKSxpLnN0eWxlLnZpc2liaWxpdHk9bX0seD0xLjIseT1mdW5jdGlvbihkLGYpe2lmKGQudHlwZT09XCJ0ZXh0XCImJiEhKGZbYl0oXCJ0ZXh0XCIpfHxmW2JdKFwiZm9udFwiKXx8ZltiXShcImZvbnQtc2l6ZVwiKXx8ZltiXShcInhcIil8fGZbYl0oXCJ5XCIpKSl7dmFyIGc9ZC5hdHRycyxoPWQubm9kZSxpPWguZmlyc3RDaGlsZD9lKGEuX2cuZG9jLmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoaC5maXJzdENoaWxkLGwpLmdldFByb3BlcnR5VmFsdWUoXCJmb250LXNpemVcIiksMTApOjEwO2lmKGZbYl0oXCJ0ZXh0XCIpKXtnLnRleHQ9Zi50ZXh0O3doaWxlKGguZmlyc3RDaGlsZCloLnJlbW92ZUNoaWxkKGguZmlyc3RDaGlsZCk7dmFyIGo9YyhmLnRleHQpLnNwbGl0KFwiXFxuXCIpLGs9W10sbTtmb3IodmFyIG49MCxvPWoubGVuZ3RoO248bztuKyspbT1xKFwidHNwYW5cIiksbiYmcShtLHtkeTppKngseDpnLnh9KSxtLmFwcGVuZENoaWxkKGEuX2cuZG9jLmNyZWF0ZVRleHROb2RlKGpbbl0pKSxoLmFwcGVuZENoaWxkKG0pLGtbbl09bX1lbHNle2s9aC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRzcGFuXCIpO2ZvcihuPTAsbz1rLmxlbmd0aDtuPG87bisrKW4/cShrW25dLHtkeTppKngseDpnLnh9KTpxKGtbMF0se2R5OjB9KX1xKGgse3g6Zy54LHk6Zy55fSksZC5fLmRpcnR5PTE7dmFyIHA9ZC5fZ2V0QkJveCgpLHI9Zy55LShwLnkrcC5oZWlnaHQvMik7ciYmYS5pcyhyLFwiZmluaXRlXCIpJiZxKGtbMF0se2R5OnJ9KX19LHo9ZnVuY3Rpb24oYixjKXt2YXIgZD0wLGU9MDt0aGlzWzBdPXRoaXMubm9kZT1iLGIucmFwaGFlbD0hMCx0aGlzLmlkPWEuX29pZCsrLGIucmFwaGFlbGlkPXRoaXMuaWQsdGhpcy5tYXRyaXg9YS5tYXRyaXgoKSx0aGlzLnJlYWxQYXRoPW51bGwsdGhpcy5wYXBlcj1jLHRoaXMuYXR0cnM9dGhpcy5hdHRyc3x8e30sdGhpcy5fPXt0cmFuc2Zvcm06W10sc3g6MSxzeToxLGRlZzowLGR4OjAsZHk6MCxkaXJ0eToxfSwhYy5ib3R0b20mJihjLmJvdHRvbT10aGlzKSx0aGlzLnByZXY9Yy50b3AsYy50b3AmJihjLnRvcC5uZXh0PXRoaXMpLGMudG9wPXRoaXMsdGhpcy5uZXh0PW51bGx9LEE9YS5lbDt6LnByb3RvdHlwZT1BLEEuY29uc3RydWN0b3I9eixhLl9lbmdpbmUucGF0aD1mdW5jdGlvbihhLGIpe3ZhciBjPXEoXCJwYXRoXCIpO2IuY2FudmFzJiZiLmNhbnZhcy5hcHBlbmRDaGlsZChjKTt2YXIgZD1uZXcgeihjLGIpO2QudHlwZT1cInBhdGhcIix3KGQse2ZpbGw6XCJub25lXCIsc3Ryb2tlOlwiIzAwMFwiLHBhdGg6YX0pO3JldHVybiBkfSxBLnJvdGF0ZT1mdW5jdGlvbihhLGIsZSl7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2E9YyhhKS5zcGxpdChqKSxhLmxlbmd0aC0xJiYoYj1kKGFbMV0pLGU9ZChhWzJdKSksYT1kKGFbMF0pLGU9PW51bGwmJihiPWUpO2lmKGI9PW51bGx8fGU9PW51bGwpe3ZhciBmPXRoaXMuZ2V0QkJveCgxKTtiPWYueCtmLndpZHRoLzIsZT1mLnkrZi5oZWlnaHQvMn10aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wiclwiLGEsYixlXV0pKTtyZXR1cm4gdGhpc30sQS5zY2FsZT1mdW5jdGlvbihhLGIsZSxmKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7YT1jKGEpLnNwbGl0KGopLGEubGVuZ3RoLTEmJihiPWQoYVsxXSksZT1kKGFbMl0pLGY9ZChhWzNdKSksYT1kKGFbMF0pLGI9PW51bGwmJihiPWEpLGY9PW51bGwmJihlPWYpO2lmKGU9PW51bGx8fGY9PW51bGwpdmFyIGc9dGhpcy5nZXRCQm94KDEpO2U9ZT09bnVsbD9nLngrZy53aWR0aC8yOmUsZj1mPT1udWxsP2cueStnLmhlaWdodC8yOmYsdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInNcIixhLGIsZSxmXV0pKTtyZXR1cm4gdGhpc30sQS50cmFuc2xhdGU9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7YT1jKGEpLnNwbGl0KGopLGEubGVuZ3RoLTEmJihiPWQoYVsxXSkpLGE9ZChhWzBdKXx8MCxiPStifHwwLHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJ0XCIsYSxiXV0pKTtyZXR1cm4gdGhpc30sQS50cmFuc2Zvcm09ZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5fO2lmKGM9PW51bGwpcmV0dXJuIGQudHJhbnNmb3JtO2EuX2V4dHJhY3RUcmFuc2Zvcm0odGhpcyxjKSx0aGlzLmNsaXAmJnEodGhpcy5jbGlwLHt0cmFuc2Zvcm06dGhpcy5tYXRyaXguaW52ZXJ0KCl9KSx0aGlzLnBhdHRlcm4mJnModGhpcyksdGhpcy5ub2RlJiZxKHRoaXMubm9kZSx7dHJhbnNmb3JtOnRoaXMubWF0cml4fSk7aWYoZC5zeCE9MXx8ZC5zeSE9MSl7dmFyIGU9dGhpcy5hdHRyc1tiXShcInN0cm9rZS13aWR0aFwiKT90aGlzLmF0dHJzW1wic3Ryb2tlLXdpZHRoXCJdOjE7dGhpcy5hdHRyKHtcInN0cm9rZS13aWR0aFwiOmV9KX1yZXR1cm4gdGhpc30sQS5oaWRlPWZ1bmN0aW9uKCl7IXRoaXMucmVtb3ZlZCYmdGhpcy5wYXBlci5zYWZhcmkodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpO3JldHVybiB0aGlzfSxBLnNob3c9ZnVuY3Rpb24oKXshdGhpcy5yZW1vdmVkJiZ0aGlzLnBhcGVyLnNhZmFyaSh0aGlzLm5vZGUuc3R5bGUuZGlzcGxheT1cIlwiKTtyZXR1cm4gdGhpc30sQS5yZW1vdmU9ZnVuY3Rpb24oKXtpZighdGhpcy5yZW1vdmVkJiYhIXRoaXMubm9kZS5wYXJlbnROb2RlKXt2YXIgYj10aGlzLnBhcGVyO2IuX19zZXRfXyYmYi5fX3NldF9fLmV4Y2x1ZGUodGhpcyksay51bmJpbmQoXCJyYXBoYWVsLiouKi5cIit0aGlzLmlkKSx0aGlzLmdyYWRpZW50JiZiLmRlZnMucmVtb3ZlQ2hpbGQodGhpcy5ncmFkaWVudCksYS5fdGVhcih0aGlzLGIpLHRoaXMubm9kZS5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJhXCI/dGhpcy5ub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLm5vZGUucGFyZW50Tm9kZSk6dGhpcy5ub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKTtmb3IodmFyIGMgaW4gdGhpcyl0aGlzW2NdPXR5cGVvZiB0aGlzW2NdPT1cImZ1bmN0aW9uXCI/YS5fcmVtb3ZlZEZhY3RvcnkoYyk6bnVsbDt0aGlzLnJlbW92ZWQ9ITB9fSxBLl9nZXRCQm94PWZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlLnN0eWxlLmRpc3BsYXk9PVwibm9uZVwiKXt0aGlzLnNob3coKTt2YXIgYT0hMH12YXIgYj17fTt0cnl7Yj10aGlzLm5vZGUuZ2V0QkJveCgpfWNhdGNoKGMpe31maW5hbGx5e2I9Ynx8e319YSYmdGhpcy5oaWRlKCk7cmV0dXJuIGJ9LEEuYXR0cj1mdW5jdGlvbihjLGQpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpcztpZihjPT1udWxsKXt2YXIgZT17fTtmb3IodmFyIGYgaW4gdGhpcy5hdHRycyl0aGlzLmF0dHJzW2JdKGYpJiYoZVtmXT10aGlzLmF0dHJzW2ZdKTtlLmdyYWRpZW50JiZlLmZpbGw9PVwibm9uZVwiJiYoZS5maWxsPWUuZ3JhZGllbnQpJiZkZWxldGUgZS5ncmFkaWVudCxlLnRyYW5zZm9ybT10aGlzLl8udHJhbnNmb3JtO3JldHVybiBlfWlmKGQ9PW51bGwmJmEuaXMoYyxcInN0cmluZ1wiKSl7aWYoYz09XCJmaWxsXCImJnRoaXMuYXR0cnMuZmlsbD09XCJub25lXCImJnRoaXMuYXR0cnMuZ3JhZGllbnQpcmV0dXJuIHRoaXMuYXR0cnMuZ3JhZGllbnQ7aWYoYz09XCJ0cmFuc2Zvcm1cIilyZXR1cm4gdGhpcy5fLnRyYW5zZm9ybTt2YXIgZz1jLnNwbGl0KGopLGg9e307Zm9yKHZhciBpPTAsbD1nLmxlbmd0aDtpPGw7aSsrKWM9Z1tpXSxjIGluIHRoaXMuYXR0cnM/aFtjXT10aGlzLmF0dHJzW2NdOmEuaXModGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2NdLFwiZnVuY3Rpb25cIik/aFtjXT10aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbY10uZGVmOmhbY109YS5fYXZhaWxhYmxlQXR0cnNbY107cmV0dXJuIGwtMT9oOmhbZ1swXV19aWYoZD09bnVsbCYmYS5pcyhjLFwiYXJyYXlcIikpe2g9e307Zm9yKGk9MCxsPWMubGVuZ3RoO2k8bDtpKyspaFtjW2ldXT10aGlzLmF0dHIoY1tpXSk7cmV0dXJuIGh9aWYoZCE9bnVsbCl7dmFyIG09e307bVtjXT1kfWVsc2UgYyE9bnVsbCYmYS5pcyhjLFwib2JqZWN0XCIpJiYobT1jKTtmb3IodmFyIG4gaW4gbSlrKFwicmFwaGFlbC5hdHRyLlwiK24rXCIuXCIrdGhpcy5pZCx0aGlzLG1bbl0pO2ZvcihuIGluIHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlcylpZih0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbYl0obikmJm1bYl0obikmJmEuaXModGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW25dLFwiZnVuY3Rpb25cIikpe3ZhciBvPXRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tuXS5hcHBseSh0aGlzLFtdLmNvbmNhdChtW25dKSk7dGhpcy5hdHRyc1tuXT1tW25dO2Zvcih2YXIgcCBpbiBvKW9bYl0ocCkmJihtW3BdPW9bcF0pfXcodGhpcyxtKTtyZXR1cm4gdGhpc30sQS50b0Zyb250PWZ1bmN0aW9uKCl7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO3RoaXMubm9kZS5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKT09XCJhXCI/dGhpcy5ub2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUucGFyZW50Tm9kZSk6dGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTt2YXIgYj10aGlzLnBhcGVyO2IudG9wIT10aGlzJiZhLl90b2Zyb250KHRoaXMsYik7cmV0dXJuIHRoaXN9LEEudG9CYWNrPWZ1bmN0aW9uKCl7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO3ZhciBiPXRoaXMubm9kZS5wYXJlbnROb2RlO2IudGFnTmFtZS50b0xvd2VyQ2FzZSgpPT1cImFcIj9iLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZS5wYXJlbnROb2RlLHRoaXMubm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuZmlyc3RDaGlsZCk6Yi5maXJzdENoaWxkIT10aGlzLm5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXMubm9kZSx0aGlzLm5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkKSxhLl90b2JhY2sodGhpcyx0aGlzLnBhcGVyKTt2YXIgYz10aGlzLnBhcGVyO3JldHVybiB0aGlzfSxBLmluc2VydEFmdGVyPWZ1bmN0aW9uKGIpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczt2YXIgYz1iLm5vZGV8fGJbYi5sZW5ndGgtMV0ubm9kZTtjLm5leHRTaWJsaW5nP2MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGMubmV4dFNpYmxpbmcpOmMucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpLGEuX2luc2VydGFmdGVyKHRoaXMsYix0aGlzLnBhcGVyKTtyZXR1cm4gdGhpc30sQS5pbnNlcnRCZWZvcmU9ZnVuY3Rpb24oYil7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO3ZhciBjPWIubm9kZXx8YlswXS5ub2RlO2MucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLGMpLGEuX2luc2VydGJlZm9yZSh0aGlzLGIsdGhpcy5wYXBlcik7cmV0dXJuIHRoaXN9LEEuYmx1cj1mdW5jdGlvbihiKXt2YXIgYz10aGlzO2lmKCtiIT09MCl7dmFyIGQ9cShcImZpbHRlclwiKSxlPXEoXCJmZUdhdXNzaWFuQmx1clwiKTtjLmF0dHJzLmJsdXI9YixkLmlkPWEuY3JlYXRlVVVJRCgpLHEoZSx7c3RkRGV2aWF0aW9uOitifHwxLjV9KSxkLmFwcGVuZENoaWxkKGUpLGMucGFwZXIuZGVmcy5hcHBlbmRDaGlsZChkKSxjLl9ibHVyPWQscShjLm5vZGUse2ZpbHRlcjpcInVybCgjXCIrZC5pZCtcIilcIn0pfWVsc2UgYy5fYmx1ciYmKGMuX2JsdXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChjLl9ibHVyKSxkZWxldGUgYy5fYmx1cixkZWxldGUgYy5hdHRycy5ibHVyKSxjLm5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZmlsdGVyXCIpfSxhLl9lbmdpbmUuY2lyY2xlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXEoXCJjaXJjbGVcIik7YS5jYW52YXMmJmEuY2FudmFzLmFwcGVuZENoaWxkKGUpO3ZhciBmPW5ldyB6KGUsYSk7Zi5hdHRycz17Y3g6YixjeTpjLHI6ZCxmaWxsOlwibm9uZVwiLHN0cm9rZTpcIiMwMDBcIn0sZi50eXBlPVwiY2lyY2xlXCIscShlLGYuYXR0cnMpO3JldHVybiBmfSxhLl9lbmdpbmUucmVjdD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9cShcInJlY3RcIik7YS5jYW52YXMmJmEuY2FudmFzLmFwcGVuZENoaWxkKGcpO3ZhciBoPW5ldyB6KGcsYSk7aC5hdHRycz17eDpiLHk6Yyx3aWR0aDpkLGhlaWdodDplLHI6Znx8MCxyeDpmfHwwLHJ5OmZ8fDAsZmlsbDpcIm5vbmVcIixzdHJva2U6XCIjMDAwXCJ9LGgudHlwZT1cInJlY3RcIixxKGcsaC5hdHRycyk7cmV0dXJuIGh9LGEuX2VuZ2luZS5lbGxpcHNlPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9cShcImVsbGlwc2VcIik7YS5jYW52YXMmJmEuY2FudmFzLmFwcGVuZENoaWxkKGYpO3ZhciBnPW5ldyB6KGYsYSk7Zy5hdHRycz17Y3g6YixjeTpjLHJ4OmQscnk6ZSxmaWxsOlwibm9uZVwiLHN0cm9rZTpcIiMwMDBcIn0sZy50eXBlPVwiZWxsaXBzZVwiLHEoZixnLmF0dHJzKTtyZXR1cm4gZ30sYS5fZW5naW5lLmltYWdlPWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1xKFwiaW1hZ2VcIik7cShnLHt4OmMseTpkLHdpZHRoOmUsaGVpZ2h0OmYscHJlc2VydmVBc3BlY3RSYXRpbzpcIm5vbmVcIn0pLGcuc2V0QXR0cmlidXRlTlMobixcImhyZWZcIixiKSxhLmNhbnZhcyYmYS5jYW52YXMuYXBwZW5kQ2hpbGQoZyk7dmFyIGg9bmV3IHooZyxhKTtoLmF0dHJzPXt4OmMseTpkLHdpZHRoOmUsaGVpZ2h0OmYsc3JjOmJ9LGgudHlwZT1cImltYWdlXCI7cmV0dXJuIGh9LGEuX2VuZ2luZS50ZXh0PWZ1bmN0aW9uKGIsYyxkLGUpe3ZhciBmPXEoXCJ0ZXh0XCIpO2IuY2FudmFzJiZiLmNhbnZhcy5hcHBlbmRDaGlsZChmKTt2YXIgZz1uZXcgeihmLGIpO2cuYXR0cnM9e3g6Yyx5OmQsXCJ0ZXh0LWFuY2hvclwiOlwibWlkZGxlXCIsdGV4dDplLGZvbnQ6YS5fYXZhaWxhYmxlQXR0cnMuZm9udCxzdHJva2U6XCJub25lXCIsZmlsbDpcIiMwMDBcIn0sZy50eXBlPVwidGV4dFwiLHcoZyxnLmF0dHJzKTtyZXR1cm4gZ30sYS5fZW5naW5lLnNldFNpemU9ZnVuY3Rpb24oYSxiKXt0aGlzLndpZHRoPWF8fHRoaXMud2lkdGgsdGhpcy5oZWlnaHQ9Ynx8dGhpcy5oZWlnaHQsdGhpcy5jYW52YXMuc2V0QXR0cmlidXRlKFwid2lkdGhcIix0aGlzLndpZHRoKSx0aGlzLmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIix0aGlzLmhlaWdodCksdGhpcy5fdmlld0JveCYmdGhpcy5zZXRWaWV3Qm94LmFwcGx5KHRoaXMsdGhpcy5fdmlld0JveCk7cmV0dXJuIHRoaXN9LGEuX2VuZ2luZS5jcmVhdGU9ZnVuY3Rpb24oKXt2YXIgYj1hLl9nZXRDb250YWluZXIuYXBwbHkoMCxhcmd1bWVudHMpLGM9YiYmYi5jb250YWluZXIsZD1iLngsZT1iLnksZj1iLndpZHRoLGc9Yi5oZWlnaHQ7aWYoIWMpdGhyb3cgbmV3IEVycm9yKFwiU1ZHIGNvbnRhaW5lciBub3QgZm91bmQuXCIpO3ZhciBoPXEoXCJzdmdcIiksaT1cIm92ZXJmbG93OmhpZGRlbjtcIixqO2Q9ZHx8MCxlPWV8fDAsZj1mfHw1MTIsZz1nfHwzNDIscShoLHtoZWlnaHQ6Zyx2ZXJzaW9uOjEuMSx3aWR0aDpmLHhtbG5zOlwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIn0pLGM9PTE/KGguc3R5bGUuY3NzVGV4dD1pK1wicG9zaXRpb246YWJzb2x1dGU7bGVmdDpcIitkK1wicHg7dG9wOlwiK2UrXCJweFwiLGEuX2cuZG9jLmJvZHkuYXBwZW5kQ2hpbGQoaCksaj0xKTooaC5zdHlsZS5jc3NUZXh0PWkrXCJwb3NpdGlvbjpyZWxhdGl2ZVwiLGMuZmlyc3RDaGlsZD9jLmluc2VydEJlZm9yZShoLGMuZmlyc3RDaGlsZCk6Yy5hcHBlbmRDaGlsZChoKSksYz1uZXcgYS5fUGFwZXIsYy53aWR0aD1mLGMuaGVpZ2h0PWcsYy5jYW52YXM9aCxjLmNsZWFyKCksYy5fbGVmdD1jLl90b3A9MCxqJiYoYy5yZW5kZXJmaXg9ZnVuY3Rpb24oKXt9KSxjLnJlbmRlcmZpeCgpO3JldHVybiBjfSxhLl9lbmdpbmUuc2V0Vmlld0JveD1mdW5jdGlvbihhLGIsYyxkLGUpe2soXCJyYXBoYWVsLnNldFZpZXdCb3hcIix0aGlzLHRoaXMuX3ZpZXdCb3gsW2EsYixjLGQsZV0pO3ZhciBmPWcoYy90aGlzLndpZHRoLGQvdGhpcy5oZWlnaHQpLGg9dGhpcy50b3AsaT1lP1wibWVldFwiOlwieE1pbllNaW5cIixqLGw7YT09bnVsbD8odGhpcy5fdmJTaXplJiYoZj0xKSxkZWxldGUgdGhpcy5fdmJTaXplLGo9XCIwIDAgXCIrdGhpcy53aWR0aCttK3RoaXMuaGVpZ2h0KToodGhpcy5fdmJTaXplPWYsaj1hK20rYittK2MrbStkKSxxKHRoaXMuY2FudmFzLHt2aWV3Qm94OmoscHJlc2VydmVBc3BlY3RSYXRpbzppfSk7d2hpbGUoZiYmaClsPVwic3Ryb2tlLXdpZHRoXCJpbiBoLmF0dHJzP2guYXR0cnNbXCJzdHJva2Utd2lkdGhcIl06MSxoLmF0dHIoe1wic3Ryb2tlLXdpZHRoXCI6bH0pLGguXy5kaXJ0eT0xLGguXy5kaXJ0eVQ9MSxoPWgucHJldjt0aGlzLl92aWV3Qm94PVthLGIsYyxkLCEhZV07cmV0dXJuIHRoaXN9LGEucHJvdG90eXBlLnJlbmRlcmZpeD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY2FudmFzLGI9YS5zdHlsZSxjO3RyeXtjPWEuZ2V0U2NyZWVuQ1RNKCl8fGEuY3JlYXRlU1ZHTWF0cml4KCl9Y2F0Y2goZCl7Yz1hLmNyZWF0ZVNWR01hdHJpeCgpfXZhciBlPS1jLmUlMSxmPS1jLmYlMTtpZihlfHxmKWUmJih0aGlzLl9sZWZ0PSh0aGlzLl9sZWZ0K2UpJTEsYi5sZWZ0PXRoaXMuX2xlZnQrXCJweFwiKSxmJiYodGhpcy5fdG9wPSh0aGlzLl90b3ArZiklMSxiLnRvcD10aGlzLl90b3ArXCJweFwiKX0sYS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXthLmV2ZShcInJhcGhhZWwuY2xlYXJcIix0aGlzKTt2YXIgYj10aGlzLmNhbnZhczt3aGlsZShiLmZpcnN0Q2hpbGQpYi5yZW1vdmVDaGlsZChiLmZpcnN0Q2hpbGQpO3RoaXMuYm90dG9tPXRoaXMudG9wPW51bGwsKHRoaXMuZGVzYz1xKFwiZGVzY1wiKSkuYXBwZW5kQ2hpbGQoYS5fZy5kb2MuY3JlYXRlVGV4dE5vZGUoXCJDcmVhdGVkIHdpdGggUmFwaGHvv71sIFwiK2EudmVyc2lvbikpLGIuYXBwZW5kQ2hpbGQodGhpcy5kZXNjKSxiLmFwcGVuZENoaWxkKHRoaXMuZGVmcz1xKFwiZGVmc1wiKSl9LGEucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe2soXCJyYXBoYWVsLnJlbW92ZVwiLHRoaXMpLHRoaXMuY2FudmFzLnBhcmVudE5vZGUmJnRoaXMuY2FudmFzLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5jYW52YXMpO2Zvcih2YXIgYiBpbiB0aGlzKXRoaXNbYl09dHlwZW9mIHRoaXNbYl09PVwiZnVuY3Rpb25cIj9hLl9yZW1vdmVkRmFjdG9yeShiKTpudWxsfTt2YXIgQj1hLnN0O2Zvcih2YXIgQyBpbiBBKUFbYl0oQykmJiFCW2JdKEMpJiYoQltDXT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgYj1hcmd1bWVudHM7cmV0dXJuIHRoaXMuZm9yRWFjaChmdW5jdGlvbihjKXtjW2FdLmFwcGx5KGMsYil9KX19KEMpKX0od2luZG93LlJhcGhhZWwpLHdpbmRvdy5SYXBoYWVsLnZtbCYmZnVuY3Rpb24oYSl7dmFyIGI9XCJoYXNPd25Qcm9wZXJ0eVwiLGM9U3RyaW5nLGQ9cGFyc2VGbG9hdCxlPU1hdGgsZj1lLnJvdW5kLGc9ZS5tYXgsaD1lLm1pbixpPWUuYWJzLGo9XCJmaWxsXCIsaz0vWywgXSsvLGw9YS5ldmUsbT1cIiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnRcIixuPVwiIFwiLG89XCJcIixwPXtNOlwibVwiLEw6XCJsXCIsQzpcImNcIixaOlwieFwiLG06XCJ0XCIsbDpcInJcIixjOlwidlwiLHo6XCJ4XCJ9LHE9LyhbY2xtel0pLD8oW15jbG16XSopL2dpLHI9LyBwcm9naWQ6XFxTK0JsdXJcXChbXlxcKV0rXFwpL2cscz0vLT9bXixcXHMtXSsvZyx0PVwicG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDowO3dpZHRoOjFweDtoZWlnaHQ6MXB4XCIsdT0yMTYwMCx2PXtwYXRoOjEscmVjdDoxLGltYWdlOjF9LHc9e2NpcmNsZToxLGVsbGlwc2U6MX0seD1mdW5jdGlvbihiKXt2YXIgZD0vW2FocXN0dl0vaWcsZT1hLl9wYXRoVG9BYnNvbHV0ZTtjKGIpLm1hdGNoKGQpJiYoZT1hLl9wYXRoMmN1cnZlKSxkPS9bY2xtel0vZztpZihlPT1hLl9wYXRoVG9BYnNvbHV0ZSYmIWMoYikubWF0Y2goZCkpe3ZhciBnPWMoYikucmVwbGFjZShxLGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPWIudG9Mb3dlckNhc2UoKT09XCJtXCIsZz1wW2JdO2MucmVwbGFjZShzLGZ1bmN0aW9uKGEpe2UmJmQubGVuZ3RoPT0yJiYoZys9ZCtwW2I9PVwibVwiP1wibFwiOlwiTFwiXSxkPVtdKSxkLnB1c2goZihhKnUpKX0pO3JldHVybiBnK2R9KTtyZXR1cm4gZ312YXIgaD1lKGIpLGksajtnPVtdO2Zvcih2YXIgaz0wLGw9aC5sZW5ndGg7azxsO2srKyl7aT1oW2tdLGo9aFtrXVswXS50b0xvd2VyQ2FzZSgpLGo9PVwielwiJiYoaj1cInhcIik7Zm9yKHZhciBtPTEscj1pLmxlbmd0aDttPHI7bSsrKWorPWYoaVttXSp1KSsobSE9ci0xP1wiLFwiOm8pO2cucHVzaChqKX1yZXR1cm4gZy5qb2luKG4pfSx5PWZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1hLm1hdHJpeCgpO2Uucm90YXRlKC1iLC41LC41KTtyZXR1cm57ZHg6ZS54KGMsZCksZHk6ZS55KGMsZCl9fSx6PWZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZz1hLl8saD1hLm1hdHJpeCxrPWcuZmlsbHBvcyxsPWEubm9kZSxtPWwuc3R5bGUsbz0xLHA9XCJcIixxLHI9dS9iLHM9dS9jO20udmlzaWJpbGl0eT1cImhpZGRlblwiO2lmKCEhYiYmISFjKXtsLmNvb3Jkc2l6ZT1pKHIpK24raShzKSxtLnJvdGF0aW9uPWYqKGIqYzwwPy0xOjEpO2lmKGYpe3ZhciB0PXkoZixkLGUpO2Q9dC5keCxlPXQuZHl9YjwwJiYocCs9XCJ4XCIpLGM8MCYmKHArPVwiIHlcIikmJihvPS0xKSxtLmZsaXA9cCxsLmNvb3Jkb3JpZ2luPWQqLXIrbitlKi1zO2lmKGt8fGcuZmlsbHNpemUpe3ZhciB2PWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoaik7dj12JiZ2WzBdLGwucmVtb3ZlQ2hpbGQodiksayYmKHQ9eShmLGgueChrWzBdLGtbMV0pLGgueShrWzBdLGtbMV0pKSx2LnBvc2l0aW9uPXQuZHgqbytuK3QuZHkqbyksZy5maWxsc2l6ZSYmKHYuc2l6ZT1nLmZpbGxzaXplWzBdKmkoYikrbitnLmZpbGxzaXplWzFdKmkoYykpLGwuYXBwZW5kQ2hpbGQodil9bS52aXNpYmlsaXR5PVwidmlzaWJsZVwifX07YS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiWW91ciBicm93c2VyIGRvZXNu77+9dCBzdXBwb3J0IFNWRy4gRmFsbGluZyBkb3duIHRvIFZNTC5cXG5Zb3UgYXJlIHJ1bm5pbmcgUmFwaGHvv71sIFwiK3RoaXMudmVyc2lvbn07dmFyIEE9ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWMoYikudG9Mb3dlckNhc2UoKS5zcGxpdChcIi1cIiksZj1kP1wiZW5kXCI6XCJzdGFydFwiLGc9ZS5sZW5ndGgsaD1cImNsYXNzaWNcIixpPVwibWVkaXVtXCIsaj1cIm1lZGl1bVwiO3doaWxlKGctLSlzd2l0Y2goZVtnXSl7Y2FzZVwiYmxvY2tcIjpjYXNlXCJjbGFzc2ljXCI6Y2FzZVwib3ZhbFwiOmNhc2VcImRpYW1vbmRcIjpjYXNlXCJvcGVuXCI6Y2FzZVwibm9uZVwiOmg9ZVtnXTticmVhaztjYXNlXCJ3aWRlXCI6Y2FzZVwibmFycm93XCI6aj1lW2ddO2JyZWFrO2Nhc2VcImxvbmdcIjpjYXNlXCJzaG9ydFwiOmk9ZVtnXX12YXIgaz1hLm5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF07a1tmK1wiYXJyb3dcIl09aCxrW2YrXCJhcnJvd2xlbmd0aFwiXT1pLGtbZitcImFycm93d2lkdGhcIl09an0sQj1mdW5jdGlvbihlLGkpe2UuYXR0cnM9ZS5hdHRyc3x8e307dmFyIGw9ZS5ub2RlLG09ZS5hdHRycyxwPWwuc3R5bGUscSxyPXZbZS50eXBlXSYmKGkueCE9bS54fHxpLnkhPW0ueXx8aS53aWR0aCE9bS53aWR0aHx8aS5oZWlnaHQhPW0uaGVpZ2h0fHxpLmN4IT1tLmN4fHxpLmN5IT1tLmN5fHxpLnJ4IT1tLnJ4fHxpLnJ5IT1tLnJ5fHxpLnIhPW0ucikscz13W2UudHlwZV0mJihtLmN4IT1pLmN4fHxtLmN5IT1pLmN5fHxtLnIhPWkucnx8bS5yeCE9aS5yeHx8bS5yeSE9aS5yeSksdD1lO2Zvcih2YXIgeSBpbiBpKWlbYl0oeSkmJihtW3ldPWlbeV0pO3ImJihtLnBhdGg9YS5fZ2V0UGF0aFtlLnR5cGVdKGUpLGUuXy5kaXJ0eT0xKSxpLmhyZWYmJihsLmhyZWY9aS5ocmVmKSxpLnRpdGxlJiYobC50aXRsZT1pLnRpdGxlKSxpLnRhcmdldCYmKGwudGFyZ2V0PWkudGFyZ2V0KSxpLmN1cnNvciYmKHAuY3Vyc29yPWkuY3Vyc29yKSxcImJsdXJcImluIGkmJmUuYmx1cihpLmJsdXIpO2lmKGkucGF0aCYmZS50eXBlPT1cInBhdGhcInx8cilsLnBhdGg9eCh+YyhtLnBhdGgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInJcIik/YS5fcGF0aFRvQWJzb2x1dGUobS5wYXRoKTptLnBhdGgpLGUudHlwZT09XCJpbWFnZVwiJiYoZS5fLmZpbGxwb3M9W20ueCxtLnldLGUuXy5maWxsc2l6ZT1bbS53aWR0aCxtLmhlaWdodF0seihlLDEsMSwwLDAsMCkpO1widHJhbnNmb3JtXCJpbiBpJiZlLnRyYW5zZm9ybShpLnRyYW5zZm9ybSk7aWYocyl7dmFyIEI9K20uY3gsRD0rbS5jeSxFPSttLnJ4fHwrbS5yfHwwLEc9K20ucnl8fCttLnJ8fDA7bC5wYXRoPWEuZm9ybWF0KFwiYXJ7MH0sezF9LHsyfSx7M30sezR9LHsxfSx7NH0sezF9eFwiLGYoKEItRSkqdSksZigoRC1HKSp1KSxmKChCK0UpKnUpLGYoKEQrRykqdSksZihCKnUpKX1pZihcImNsaXAtcmVjdFwiaW4gaSl7dmFyIEg9YyhpW1wiY2xpcC1yZWN0XCJdKS5zcGxpdChrKTtpZihILmxlbmd0aD09NCl7SFsyXT0rSFsyXSsgK0hbMF0sSFszXT0rSFszXSsgK0hbMV07dmFyIEk9bC5jbGlwUmVjdHx8YS5fZy5kb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSxKPUkuc3R5bGU7Si5jbGlwPWEuZm9ybWF0KFwicmVjdCh7MX1weCB7Mn1weCB7M31weCB7MH1weClcIixIKSxsLmNsaXBSZWN0fHwoSi5wb3NpdGlvbj1cImFic29sdXRlXCIsSi50b3A9MCxKLmxlZnQ9MCxKLndpZHRoPWUucGFwZXIud2lkdGgrXCJweFwiLEouaGVpZ2h0PWUucGFwZXIuaGVpZ2h0K1wicHhcIixsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKEksbCksSS5hcHBlbmRDaGlsZChsKSxsLmNsaXBSZWN0PUkpfWlbXCJjbGlwLXJlY3RcIl18fGwuY2xpcFJlY3QmJihsLmNsaXBSZWN0LnN0eWxlLmNsaXA9XCJhdXRvXCIpfWlmKGUudGV4dHBhdGgpe3ZhciBLPWUudGV4dHBhdGguc3R5bGU7aS5mb250JiYoSy5mb250PWkuZm9udCksaVtcImZvbnQtZmFtaWx5XCJdJiYoSy5mb250RmFtaWx5PSdcIicraVtcImZvbnQtZmFtaWx5XCJdLnNwbGl0KFwiLFwiKVswXS5yZXBsYWNlKC9eWydcIl0rfFsnXCJdKyQvZyxvKSsnXCInKSxpW1wiZm9udC1zaXplXCJdJiYoSy5mb250U2l6ZT1pW1wiZm9udC1zaXplXCJdKSxpW1wiZm9udC13ZWlnaHRcIl0mJihLLmZvbnRXZWlnaHQ9aVtcImZvbnQtd2VpZ2h0XCJdKSxpW1wiZm9udC1zdHlsZVwiXSYmKEsuZm9udFN0eWxlPWlbXCJmb250LXN0eWxlXCJdKX1cImFycm93LXN0YXJ0XCJpbiBpJiZBKHQsaVtcImFycm93LXN0YXJ0XCJdKSxcImFycm93LWVuZFwiaW4gaSYmQSh0LGlbXCJhcnJvdy1lbmRcIl0sMSk7aWYoaS5vcGFjaXR5IT1udWxsfHxpW1wic3Ryb2tlLXdpZHRoXCJdIT1udWxsfHxpLmZpbGwhPW51bGx8fGkuc3JjIT1udWxsfHxpLnN0cm9rZSE9bnVsbHx8aVtcInN0cm9rZS13aWR0aFwiXSE9bnVsbHx8aVtcInN0cm9rZS1vcGFjaXR5XCJdIT1udWxsfHxpW1wiZmlsbC1vcGFjaXR5XCJdIT1udWxsfHxpW1wic3Ryb2tlLWRhc2hhcnJheVwiXSE9bnVsbHx8aVtcInN0cm9rZS1taXRlcmxpbWl0XCJdIT1udWxsfHxpW1wic3Ryb2tlLWxpbmVqb2luXCJdIT1udWxsfHxpW1wic3Ryb2tlLWxpbmVjYXBcIl0hPW51bGwpe3ZhciBMPWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoaiksTT0hMTtMPUwmJkxbMF0sIUwmJihNPUw9RihqKSksZS50eXBlPT1cImltYWdlXCImJmkuc3JjJiYoTC5zcmM9aS5zcmMpLGkuZmlsbCYmKEwub249ITApO2lmKEwub249PW51bGx8fGkuZmlsbD09XCJub25lXCJ8fGkuZmlsbD09PW51bGwpTC5vbj0hMTtpZihMLm9uJiZpLmZpbGwpe3ZhciBOPWMoaS5maWxsKS5tYXRjaChhLl9JU1VSTCk7aWYoTil7TC5wYXJlbnROb2RlPT1sJiZsLnJlbW92ZUNoaWxkKEwpLEwucm90YXRlPSEwLEwuc3JjPU5bMV0sTC50eXBlPVwidGlsZVwiO3ZhciBPPWUuZ2V0QkJveCgxKTtMLnBvc2l0aW9uPU8ueCtuK08ueSxlLl8uZmlsbHBvcz1bTy54LE8ueV0sYS5fcHJlbG9hZChOWzFdLGZ1bmN0aW9uKCl7ZS5fLmZpbGxzaXplPVt0aGlzLm9mZnNldFdpZHRoLHRoaXMub2Zmc2V0SGVpZ2h0XX0pfWVsc2UgTC5jb2xvcj1hLmdldFJHQihpLmZpbGwpLmhleCxMLnNyYz1vLEwudHlwZT1cInNvbGlkXCIsYS5nZXRSR0IoaS5maWxsKS5lcnJvciYmKHQudHlwZSBpbntjaXJjbGU6MSxlbGxpcHNlOjF9fHxjKGkuZmlsbCkuY2hhckF0KCkhPVwiclwiKSYmQyh0LGkuZmlsbCxMKSYmKG0uZmlsbD1cIm5vbmVcIixtLmdyYWRpZW50PWkuZmlsbCxMLnJvdGF0ZT0hMSl9aWYoXCJmaWxsLW9wYWNpdHlcImluIGl8fFwib3BhY2l0eVwiaW4gaSl7dmFyIFA9KCgrbVtcImZpbGwtb3BhY2l0eVwiXSsxfHwyKS0xKSooKCttLm9wYWNpdHkrMXx8MiktMSkqKCgrYS5nZXRSR0IoaS5maWxsKS5vKzF8fDIpLTEpO1A9aChnKFAsMCksMSksTC5vcGFjaXR5PVAsTC5zcmMmJihMLmNvbG9yPVwibm9uZVwiKX1sLmFwcGVuZENoaWxkKEwpO3ZhciBRPWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIikmJmwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF0sVD0hMTshUSYmKFQ9UT1GKFwic3Ryb2tlXCIpKTtpZihpLnN0cm9rZSYmaS5zdHJva2UhPVwibm9uZVwifHxpW1wic3Ryb2tlLXdpZHRoXCJdfHxpW1wic3Ryb2tlLW9wYWNpdHlcIl0hPW51bGx8fGlbXCJzdHJva2UtZGFzaGFycmF5XCJdfHxpW1wic3Ryb2tlLW1pdGVybGltaXRcIl18fGlbXCJzdHJva2UtbGluZWpvaW5cIl18fGlbXCJzdHJva2UtbGluZWNhcFwiXSlRLm9uPSEwOyhpLnN0cm9rZT09XCJub25lXCJ8fGkuc3Ryb2tlPT09bnVsbHx8US5vbj09bnVsbHx8aS5zdHJva2U9PTB8fGlbXCJzdHJva2Utd2lkdGhcIl09PTApJiYoUS5vbj0hMSk7dmFyIFU9YS5nZXRSR0IoaS5zdHJva2UpO1Eub24mJmkuc3Ryb2tlJiYoUS5jb2xvcj1VLmhleCksUD0oKCttW1wic3Ryb2tlLW9wYWNpdHlcIl0rMXx8MiktMSkqKCgrbS5vcGFjaXR5KzF8fDIpLTEpKigoK1UubysxfHwyKS0xKTt2YXIgVj0oZChpW1wic3Ryb2tlLXdpZHRoXCJdKXx8MSkqLjc1O1A9aChnKFAsMCksMSksaVtcInN0cm9rZS13aWR0aFwiXT09bnVsbCYmKFY9bVtcInN0cm9rZS13aWR0aFwiXSksaVtcInN0cm9rZS13aWR0aFwiXSYmKFEud2VpZ2h0PVYpLFYmJlY8MSYmKFAqPVYpJiYoUS53ZWlnaHQ9MSksUS5vcGFjaXR5PVAsaVtcInN0cm9rZS1saW5lam9pblwiXSYmKFEuam9pbnN0eWxlPWlbXCJzdHJva2UtbGluZWpvaW5cIl18fFwibWl0ZXJcIiksUS5taXRlcmxpbWl0PWlbXCJzdHJva2UtbWl0ZXJsaW1pdFwiXXx8OCxpW1wic3Ryb2tlLWxpbmVjYXBcIl0mJihRLmVuZGNhcD1pW1wic3Ryb2tlLWxpbmVjYXBcIl09PVwiYnV0dFwiP1wiZmxhdFwiOmlbXCJzdHJva2UtbGluZWNhcFwiXT09XCJzcXVhcmVcIj9cInNxdWFyZVwiOlwicm91bmRcIik7aWYoaVtcInN0cm9rZS1kYXNoYXJyYXlcIl0pe3ZhciBXPXtcIi1cIjpcInNob3J0ZGFzaFwiLFwiLlwiOlwic2hvcnRkb3RcIixcIi0uXCI6XCJzaG9ydGRhc2hkb3RcIixcIi0uLlwiOlwic2hvcnRkYXNoZG90ZG90XCIsXCIuIFwiOlwiZG90XCIsXCItIFwiOlwiZGFzaFwiLFwiLS1cIjpcImxvbmdkYXNoXCIsXCItIC5cIjpcImRhc2hkb3RcIixcIi0tLlwiOlwibG9uZ2Rhc2hkb3RcIixcIi0tLi5cIjpcImxvbmdkYXNoZG90ZG90XCJ9O1EuZGFzaHN0eWxlPVdbYl0oaVtcInN0cm9rZS1kYXNoYXJyYXlcIl0pP1dbaVtcInN0cm9rZS1kYXNoYXJyYXlcIl1dOm99VCYmbC5hcHBlbmRDaGlsZChRKX1pZih0LnR5cGU9PVwidGV4dFwiKXt0LnBhcGVyLmNhbnZhcy5zdHlsZS5kaXNwbGF5PW87dmFyIFg9dC5wYXBlci5zcGFuLFk9MTAwLFo9bS5mb250JiZtLmZvbnQubWF0Y2goL1xcZCsoPzpcXC5cXGQqKT8oPz1weCkvKTtwPVguc3R5bGUsbS5mb250JiYocC5mb250PW0uZm9udCksbVtcImZvbnQtZmFtaWx5XCJdJiYocC5mb250RmFtaWx5PW1bXCJmb250LWZhbWlseVwiXSksbVtcImZvbnQtd2VpZ2h0XCJdJiYocC5mb250V2VpZ2h0PW1bXCJmb250LXdlaWdodFwiXSksbVtcImZvbnQtc3R5bGVcIl0mJihwLmZvbnRTdHlsZT1tW1wiZm9udC1zdHlsZVwiXSksWj1kKG1bXCJmb250LXNpemVcIl18fFomJlpbMF0pfHwxMCxwLmZvbnRTaXplPVoqWStcInB4XCIsdC50ZXh0cGF0aC5zdHJpbmcmJihYLmlubmVySFRNTD1jKHQudGV4dHBhdGguc3RyaW5nKS5yZXBsYWNlKC88L2csXCImIzYwO1wiKS5yZXBsYWNlKC8mL2csXCImIzM4O1wiKS5yZXBsYWNlKC9cXG4vZyxcIjxicj5cIikpO3ZhciAkPVguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dC5XPW0udz0oJC5yaWdodC0kLmxlZnQpL1ksdC5IPW0uaD0oJC5ib3R0b20tJC50b3ApL1ksdC5YPW0ueCx0Llk9bS55K3QuSC8yLChcInhcImluIGl8fFwieVwiaW4gaSkmJih0LnBhdGgudj1hLmZvcm1hdChcIm17MH0sezF9bHsyfSx7MX1cIixmKG0ueCp1KSxmKG0ueSp1KSxmKG0ueCp1KSsxKSk7dmFyIF89W1wieFwiLFwieVwiLFwidGV4dFwiLFwiZm9udFwiLFwiZm9udC1mYW1pbHlcIixcImZvbnQtd2VpZ2h0XCIsXCJmb250LXN0eWxlXCIsXCJmb250LXNpemVcIl07Zm9yKHZhciBiYT0wLGJiPV8ubGVuZ3RoO2JhPGJiO2JhKyspaWYoX1tiYV1pbiBpKXt0Ll8uZGlydHk9MTticmVha31zd2l0Y2gobVtcInRleHQtYW5jaG9yXCJdKXtjYXNlXCJzdGFydFwiOnQudGV4dHBhdGguc3R5bGVbXCJ2LXRleHQtYWxpZ25cIl09XCJsZWZ0XCIsdC5iYng9dC5XLzI7YnJlYWs7Y2FzZVwiZW5kXCI6dC50ZXh0cGF0aC5zdHlsZVtcInYtdGV4dC1hbGlnblwiXT1cInJpZ2h0XCIsdC5iYng9LXQuVy8yO2JyZWFrO2RlZmF1bHQ6dC50ZXh0cGF0aC5zdHlsZVtcInYtdGV4dC1hbGlnblwiXT1cImNlbnRlclwiLHQuYmJ4PTB9dC50ZXh0cGF0aC5zdHlsZVtcInYtdGV4dC1rZXJuXCJdPSEwfX0sQz1mdW5jdGlvbihiLGYsZyl7Yi5hdHRycz1iLmF0dHJzfHx7fTt2YXIgaD1iLmF0dHJzLGk9TWF0aC5wb3csaixrLGw9XCJsaW5lYXJcIixtPVwiLjUgLjVcIjtiLmF0dHJzLmdyYWRpZW50PWYsZj1jKGYpLnJlcGxhY2UoYS5fcmFkaWFsX2dyYWRpZW50LGZ1bmN0aW9uKGEsYixjKXtsPVwicmFkaWFsXCIsYiYmYyYmKGI9ZChiKSxjPWQoYyksaShiLS41LDIpK2koYy0uNSwyKT4uMjUmJihjPWUuc3FydCguMjUtaShiLS41LDIpKSooKGM+LjUpKjItMSkrLjUpLG09YituK2MpO3JldHVybiBvfSksZj1mLnNwbGl0KC9cXHMqXFwtXFxzKi8pO2lmKGw9PVwibGluZWFyXCIpe3ZhciBwPWYuc2hpZnQoKTtwPS1kKHApO2lmKGlzTmFOKHApKXJldHVybiBudWxsfXZhciBxPWEuX3BhcnNlRG90cyhmKTtpZighcSlyZXR1cm4gbnVsbDtiPWIuc2hhcGV8fGIubm9kZTtpZihxLmxlbmd0aCl7Yi5yZW1vdmVDaGlsZChnKSxnLm9uPSEwLGcubWV0aG9kPVwibm9uZVwiLGcuY29sb3I9cVswXS5jb2xvcixnLmNvbG9yMj1xW3EubGVuZ3RoLTFdLmNvbG9yO3ZhciByPVtdO2Zvcih2YXIgcz0wLHQ9cS5sZW5ndGg7czx0O3MrKylxW3NdLm9mZnNldCYmci5wdXNoKHFbc10ub2Zmc2V0K24rcVtzXS5jb2xvcik7Zy5jb2xvcnM9ci5sZW5ndGg/ci5qb2luKCk6XCIwJSBcIitnLmNvbG9yLGw9PVwicmFkaWFsXCI/KGcudHlwZT1cImdyYWRpZW50VGl0bGVcIixnLmZvY3VzPVwiMTAwJVwiLGcuZm9jdXNzaXplPVwiMCAwXCIsZy5mb2N1c3Bvc2l0aW9uPW0sZy5hbmdsZT0wKTooZy50eXBlPVwiZ3JhZGllbnRcIixnLmFuZ2xlPSgyNzAtcCklMzYwKSxiLmFwcGVuZENoaWxkKGcpfXJldHVybiAxfSxEPWZ1bmN0aW9uKGIsYyl7dGhpc1swXT10aGlzLm5vZGU9YixiLnJhcGhhZWw9ITAsdGhpcy5pZD1hLl9vaWQrKyxiLnJhcGhhZWxpZD10aGlzLmlkLHRoaXMuWD0wLHRoaXMuWT0wLHRoaXMuYXR0cnM9e30sdGhpcy5wYXBlcj1jLHRoaXMubWF0cml4PWEubWF0cml4KCksdGhpcy5fPXt0cmFuc2Zvcm06W10sc3g6MSxzeToxLGR4OjAsZHk6MCxkZWc6MCxkaXJ0eToxLGRpcnR5VDoxfSwhYy5ib3R0b20mJihjLmJvdHRvbT10aGlzKSx0aGlzLnByZXY9Yy50b3AsYy50b3AmJihjLnRvcC5uZXh0PXRoaXMpLGMudG9wPXRoaXMsdGhpcy5uZXh0PW51bGx9LEU9YS5lbDtELnByb3RvdHlwZT1FLEUuY29uc3RydWN0b3I9RCxFLnRyYW5zZm9ybT1mdW5jdGlvbihiKXtpZihiPT1udWxsKXJldHVybiB0aGlzLl8udHJhbnNmb3JtO3ZhciBkPXRoaXMucGFwZXIuX3ZpZXdCb3hTaGlmdCxlPWQ/XCJzXCIrW2Quc2NhbGUsZC5zY2FsZV0rXCItMS0xdFwiK1tkLmR4LGQuZHldOm8sZjtkJiYoZj1iPWMoYikucmVwbGFjZSgvXFwuezN9fFxcdTIwMjYvZyx0aGlzLl8udHJhbnNmb3JtfHxvKSksYS5fZXh0cmFjdFRyYW5zZm9ybSh0aGlzLGUrYik7dmFyIGc9dGhpcy5tYXRyaXguY2xvbmUoKSxoPXRoaXMuc2tldyxpPXRoaXMubm9kZSxqLGs9fmModGhpcy5hdHRycy5maWxsKS5pbmRleE9mKFwiLVwiKSxsPSFjKHRoaXMuYXR0cnMuZmlsbCkuaW5kZXhPZihcInVybChcIik7Zy50cmFuc2xhdGUoLTAuNSwtMC41KTtpZihsfHxrfHx0aGlzLnR5cGU9PVwiaW1hZ2VcIil7aC5tYXRyaXg9XCIxIDAgMCAxXCIsaC5vZmZzZXQ9XCIwIDBcIixqPWcuc3BsaXQoKTtpZihrJiZqLm5vUm90YXRpb258fCFqLmlzU2ltcGxlKXtpLnN0eWxlLmZpbHRlcj1nLnRvRmlsdGVyKCk7dmFyIG09dGhpcy5nZXRCQm94KCkscD10aGlzLmdldEJCb3goMSkscT1tLngtcC54LHI9bS55LXAueTtpLmNvb3Jkb3JpZ2luPXEqLXUrbityKi11LHoodGhpcywxLDEscSxyLDApfWVsc2UgaS5zdHlsZS5maWx0ZXI9byx6KHRoaXMsai5zY2FsZXgsai5zY2FsZXksai5keCxqLmR5LGoucm90YXRlKX1lbHNlIGkuc3R5bGUuZmlsdGVyPW8saC5tYXRyaXg9YyhnKSxoLm9mZnNldD1nLm9mZnNldCgpO2YmJih0aGlzLl8udHJhbnNmb3JtPWYpO3JldHVybiB0aGlzfSxFLnJvdGF0ZT1mdW5jdGlvbihhLGIsZSl7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2lmKGEhPW51bGwpe2E9YyhhKS5zcGxpdChrKSxhLmxlbmd0aC0xJiYoYj1kKGFbMV0pLGU9ZChhWzJdKSksYT1kKGFbMF0pLGU9PW51bGwmJihiPWUpO2lmKGI9PW51bGx8fGU9PW51bGwpe3ZhciBmPXRoaXMuZ2V0QkJveCgxKTtiPWYueCtmLndpZHRoLzIsZT1mLnkrZi5oZWlnaHQvMn10aGlzLl8uZGlydHlUPTEsdGhpcy50cmFuc2Zvcm0odGhpcy5fLnRyYW5zZm9ybS5jb25jYXQoW1tcInJcIixhLGIsZV1dKSk7cmV0dXJuIHRoaXN9fSxFLnRyYW5zbGF0ZT1mdW5jdGlvbihhLGIpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczthPWMoYSkuc3BsaXQoayksYS5sZW5ndGgtMSYmKGI9ZChhWzFdKSksYT1kKGFbMF0pfHwwLGI9K2J8fDAsdGhpcy5fLmJib3gmJih0aGlzLl8uYmJveC54Kz1hLHRoaXMuXy5iYm94LnkrPWIpLHRoaXMudHJhbnNmb3JtKHRoaXMuXy50cmFuc2Zvcm0uY29uY2F0KFtbXCJ0XCIsYSxiXV0pKTtyZXR1cm4gdGhpc30sRS5zY2FsZT1mdW5jdGlvbihhLGIsZSxmKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7YT1jKGEpLnNwbGl0KGspLGEubGVuZ3RoLTEmJihiPWQoYVsxXSksZT1kKGFbMl0pLGY9ZChhWzNdKSxpc05hTihlKSYmKGU9bnVsbCksaXNOYU4oZikmJihmPW51bGwpKSxhPWQoYVswXSksYj09bnVsbCYmKGI9YSksZj09bnVsbCYmKGU9Zik7aWYoZT09bnVsbHx8Zj09bnVsbCl2YXIgZz10aGlzLmdldEJCb3goMSk7ZT1lPT1udWxsP2cueCtnLndpZHRoLzI6ZSxmPWY9PW51bGw/Zy55K2cuaGVpZ2h0LzI6Zix0aGlzLnRyYW5zZm9ybSh0aGlzLl8udHJhbnNmb3JtLmNvbmNhdChbW1wic1wiLGEsYixlLGZdXSkpLHRoaXMuXy5kaXJ0eVQ9MTtyZXR1cm4gdGhpc30sRS5oaWRlPWZ1bmN0aW9uKCl7IXRoaXMucmVtb3ZlZCYmKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiKTtyZXR1cm4gdGhpc30sRS5zaG93PWZ1bmN0aW9uKCl7IXRoaXMucmVtb3ZlZCYmKHRoaXMubm9kZS5zdHlsZS5kaXNwbGF5PW8pO3JldHVybiB0aGlzfSxFLl9nZXRCQm94PWZ1bmN0aW9uKCl7aWYodGhpcy5yZW1vdmVkKXJldHVybnt9O3JldHVybnt4OnRoaXMuWCsodGhpcy5iYnh8fDApLXRoaXMuVy8yLHk6dGhpcy5ZLXRoaXMuSCx3aWR0aDp0aGlzLlcsaGVpZ2h0OnRoaXMuSH19LEUucmVtb3ZlPWZ1bmN0aW9uKCl7aWYoIXRoaXMucmVtb3ZlZCYmISF0aGlzLm5vZGUucGFyZW50Tm9kZSl7dGhpcy5wYXBlci5fX3NldF9fJiZ0aGlzLnBhcGVyLl9fc2V0X18uZXhjbHVkZSh0aGlzKSxhLmV2ZS51bmJpbmQoXCJyYXBoYWVsLiouKi5cIit0aGlzLmlkKSxhLl90ZWFyKHRoaXMsdGhpcy5wYXBlciksdGhpcy5ub2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ub2RlKSx0aGlzLnNoYXBlJiZ0aGlzLnNoYXBlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5zaGFwZSk7Zm9yKHZhciBiIGluIHRoaXMpdGhpc1tiXT10eXBlb2YgdGhpc1tiXT09XCJmdW5jdGlvblwiP2EuX3JlbW92ZWRGYWN0b3J5KGIpOm51bGw7dGhpcy5yZW1vdmVkPSEwfX0sRS5hdHRyPWZ1bmN0aW9uKGMsZCl7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2lmKGM9PW51bGwpe3ZhciBlPXt9O2Zvcih2YXIgZiBpbiB0aGlzLmF0dHJzKXRoaXMuYXR0cnNbYl0oZikmJihlW2ZdPXRoaXMuYXR0cnNbZl0pO2UuZ3JhZGllbnQmJmUuZmlsbD09XCJub25lXCImJihlLmZpbGw9ZS5ncmFkaWVudCkmJmRlbGV0ZSBlLmdyYWRpZW50LGUudHJhbnNmb3JtPXRoaXMuXy50cmFuc2Zvcm07cmV0dXJuIGV9aWYoZD09bnVsbCYmYS5pcyhjLFwic3RyaW5nXCIpKXtpZihjPT1qJiZ0aGlzLmF0dHJzLmZpbGw9PVwibm9uZVwiJiZ0aGlzLmF0dHJzLmdyYWRpZW50KXJldHVybiB0aGlzLmF0dHJzLmdyYWRpZW50O3ZhciBnPWMuc3BsaXQoayksaD17fTtmb3IodmFyIGk9MCxtPWcubGVuZ3RoO2k8bTtpKyspYz1nW2ldLGMgaW4gdGhpcy5hdHRycz9oW2NdPXRoaXMuYXR0cnNbY106YS5pcyh0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbY10sXCJmdW5jdGlvblwiKT9oW2NdPXRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tjXS5kZWY6aFtjXT1hLl9hdmFpbGFibGVBdHRyc1tjXTtyZXR1cm4gbS0xP2g6aFtnWzBdXX1pZih0aGlzLmF0dHJzJiZkPT1udWxsJiZhLmlzKGMsXCJhcnJheVwiKSl7aD17fTtmb3IoaT0wLG09Yy5sZW5ndGg7aTxtO2krKyloW2NbaV1dPXRoaXMuYXR0cihjW2ldKTtyZXR1cm4gaH12YXIgbjtkIT1udWxsJiYobj17fSxuW2NdPWQpLGQ9PW51bGwmJmEuaXMoYyxcIm9iamVjdFwiKSYmKG49Yyk7Zm9yKHZhciBvIGluIG4pbChcInJhcGhhZWwuYXR0ci5cIitvK1wiLlwiK3RoaXMuaWQsdGhpcyxuW29dKTtpZihuKXtmb3IobyBpbiB0aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXMpaWYodGhpcy5wYXBlci5jdXN0b21BdHRyaWJ1dGVzW2JdKG8pJiZuW2JdKG8pJiZhLmlzKHRoaXMucGFwZXIuY3VzdG9tQXR0cmlidXRlc1tvXSxcImZ1bmN0aW9uXCIpKXt2YXIgcD10aGlzLnBhcGVyLmN1c3RvbUF0dHJpYnV0ZXNbb10uYXBwbHkodGhpcyxbXS5jb25jYXQobltvXSkpO3RoaXMuYXR0cnNbb109bltvXTtmb3IodmFyIHEgaW4gcClwW2JdKHEpJiYobltxXT1wW3FdKX1uLnRleHQmJnRoaXMudHlwZT09XCJ0ZXh0XCImJih0aGlzLnRleHRwYXRoLnN0cmluZz1uLnRleHQpLEIodGhpcyxuKX1yZXR1cm4gdGhpc30sRS50b0Zyb250PWZ1bmN0aW9uKCl7IXRoaXMucmVtb3ZlZCYmdGhpcy5ub2RlLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKSx0aGlzLnBhcGVyJiZ0aGlzLnBhcGVyLnRvcCE9dGhpcyYmYS5fdG9mcm9udCh0aGlzLHRoaXMucGFwZXIpO3JldHVybiB0aGlzfSxFLnRvQmFjaz1mdW5jdGlvbigpe2lmKHRoaXMucmVtb3ZlZClyZXR1cm4gdGhpczt0aGlzLm5vZGUucGFyZW50Tm9kZS5maXJzdENoaWxkIT10aGlzLm5vZGUmJih0aGlzLm5vZGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGhpcy5ub2RlLHRoaXMubm9kZS5wYXJlbnROb2RlLmZpcnN0Q2hpbGQpLGEuX3RvYmFjayh0aGlzLHRoaXMucGFwZXIpKTtyZXR1cm4gdGhpc30sRS5pbnNlcnRBZnRlcj1mdW5jdGlvbihiKXtpZih0aGlzLnJlbW92ZWQpcmV0dXJuIHRoaXM7Yi5jb25zdHJ1Y3Rvcj09YS5zdC5jb25zdHJ1Y3RvciYmKGI9YltiLmxlbmd0aC0xXSksYi5ub2RlLm5leHRTaWJsaW5nP2Iubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsYi5ub2RlLm5leHRTaWJsaW5nKTpiLm5vZGUucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLm5vZGUpLGEuX2luc2VydGFmdGVyKHRoaXMsYix0aGlzLnBhcGVyKTtyZXR1cm4gdGhpc30sRS5pbnNlcnRCZWZvcmU9ZnVuY3Rpb24oYil7aWYodGhpcy5yZW1vdmVkKXJldHVybiB0aGlzO2IuY29uc3RydWN0b3I9PWEuc3QuY29uc3RydWN0b3ImJihiPWJbMF0pLGIubm9kZS5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLm5vZGUsYi5ub2RlKSxhLl9pbnNlcnRiZWZvcmUodGhpcyxiLHRoaXMucGFwZXIpO3JldHVybiB0aGlzfSxFLmJsdXI9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5ub2RlLnJ1bnRpbWVTdHlsZSxkPWMuZmlsdGVyO2Q9ZC5yZXBsYWNlKHIsbyksK2IhPT0wPyh0aGlzLmF0dHJzLmJsdXI9YixjLmZpbHRlcj1kK24rbStcIi5CbHVyKHBpeGVscmFkaXVzPVwiKygrYnx8MS41KStcIilcIixjLm1hcmdpbj1hLmZvcm1hdChcIi17MH1weCAwIDAgLXswfXB4XCIsZigrYnx8MS41KSkpOihjLmZpbHRlcj1kLGMubWFyZ2luPTAsZGVsZXRlIHRoaXMuYXR0cnMuYmx1cil9LGEuX2VuZ2luZS5wYXRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9RihcInNoYXBlXCIpO2Muc3R5bGUuY3NzVGV4dD10LGMuY29vcmRzaXplPXUrbit1LGMuY29vcmRvcmlnaW49Yi5jb29yZG9yaWdpbjt2YXIgZD1uZXcgRChjLGIpLGU9e2ZpbGw6XCJub25lXCIsc3Ryb2tlOlwiIzAwMFwifTthJiYoZS5wYXRoPWEpLGQudHlwZT1cInBhdGhcIixkLnBhdGg9W10sZC5QYXRoPW8sQihkLGUpLGIuY2FudmFzLmFwcGVuZENoaWxkKGMpO3ZhciBmPUYoXCJza2V3XCIpO2Yub249ITAsYy5hcHBlbmRDaGlsZChmKSxkLnNrZXc9ZixkLnRyYW5zZm9ybShvKTtyZXR1cm4gZH0sYS5fZW5naW5lLnJlY3Q9ZnVuY3Rpb24oYixjLGQsZSxmLGcpe3ZhciBoPWEuX3JlY3RQYXRoKGMsZCxlLGYsZyksaT1iLnBhdGgoaCksaj1pLmF0dHJzO2kuWD1qLng9YyxpLlk9ai55PWQsaS5XPWoud2lkdGg9ZSxpLkg9ai5oZWlnaHQ9ZixqLnI9ZyxqLnBhdGg9aCxpLnR5cGU9XCJyZWN0XCI7cmV0dXJuIGl9LGEuX2VuZ2luZS5lbGxpcHNlPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS5wYXRoKCksZz1mLmF0dHJzO2YuWD1iLWQsZi5ZPWMtZSxmLlc9ZCoyLGYuSD1lKjIsZi50eXBlPVwiZWxsaXBzZVwiLEIoZix7Y3g6YixjeTpjLHJ4OmQscnk6ZX0pO3JldHVybiBmfSxhLl9lbmdpbmUuY2lyY2xlPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucGF0aCgpLGY9ZS5hdHRycztlLlg9Yi1kLGUuWT1jLWQsZS5XPWUuSD1kKjIsZS50eXBlPVwiY2lyY2xlXCIsQihlLHtjeDpiLGN5OmMscjpkfSk7cmV0dXJuIGV9LGEuX2VuZ2luZS5pbWFnZT1mdW5jdGlvbihiLGMsZCxlLGYsZyl7dmFyIGg9YS5fcmVjdFBhdGgoZCxlLGYsZyksaT1iLnBhdGgoaCkuYXR0cih7c3Ryb2tlOlwibm9uZVwifSksaz1pLmF0dHJzLGw9aS5ub2RlLG09bC5nZXRFbGVtZW50c0J5VGFnTmFtZShqKVswXTtrLnNyYz1jLGkuWD1rLng9ZCxpLlk9ay55PWUsaS5XPWsud2lkdGg9ZixpLkg9ay5oZWlnaHQ9ZyxrLnBhdGg9aCxpLnR5cGU9XCJpbWFnZVwiLG0ucGFyZW50Tm9kZT09bCYmbC5yZW1vdmVDaGlsZChtKSxtLnJvdGF0ZT0hMCxtLnNyYz1jLG0udHlwZT1cInRpbGVcIixpLl8uZmlsbHBvcz1bZCxlXSxpLl8uZmlsbHNpemU9W2YsZ10sbC5hcHBlbmRDaGlsZChtKSx6KGksMSwxLDAsMCwwKTtyZXR1cm4gaX0sYS5fZW5naW5lLnRleHQ9ZnVuY3Rpb24oYixkLGUsZyl7dmFyIGg9RihcInNoYXBlXCIpLGk9RihcInBhdGhcIiksaj1GKFwidGV4dHBhdGhcIik7ZD1kfHwwLGU9ZXx8MCxnPWd8fFwiXCIsaS52PWEuZm9ybWF0KFwibXswfSx7MX1sezJ9LHsxfVwiLGYoZCp1KSxmKGUqdSksZihkKnUpKzEpLGkudGV4dHBhdGhvaz0hMCxqLnN0cmluZz1jKGcpLGoub249ITAsaC5zdHlsZS5jc3NUZXh0PXQsaC5jb29yZHNpemU9dStuK3UsaC5jb29yZG9yaWdpbj1cIjAgMFwiO3ZhciBrPW5ldyBEKGgsYiksbD17ZmlsbDpcIiMwMDBcIixzdHJva2U6XCJub25lXCIsZm9udDphLl9hdmFpbGFibGVBdHRycy5mb250LHRleHQ6Z307ay5zaGFwZT1oLGsucGF0aD1pLGsudGV4dHBhdGg9aixrLnR5cGU9XCJ0ZXh0XCIsay5hdHRycy50ZXh0PWMoZyksay5hdHRycy54PWQsay5hdHRycy55PWUsay5hdHRycy53PTEsay5hdHRycy5oPTEsQihrLGwpLGguYXBwZW5kQ2hpbGQoaiksaC5hcHBlbmRDaGlsZChpKSxiLmNhbnZhcy5hcHBlbmRDaGlsZChoKTt2YXIgbT1GKFwic2tld1wiKTttLm9uPSEwLGguYXBwZW5kQ2hpbGQobSksay5za2V3PW0say50cmFuc2Zvcm0obyk7cmV0dXJuIGt9LGEuX2VuZ2luZS5zZXRTaXplPWZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5jYW52YXMuc3R5bGU7dGhpcy53aWR0aD1iLHRoaXMuaGVpZ2h0PWMsYj09K2ImJihiKz1cInB4XCIpLGM9PStjJiYoYys9XCJweFwiKSxkLndpZHRoPWIsZC5oZWlnaHQ9YyxkLmNsaXA9XCJyZWN0KDAgXCIrYitcIiBcIitjK1wiIDApXCIsdGhpcy5fdmlld0JveCYmYS5fZW5naW5lLnNldFZpZXdCb3guYXBwbHkodGhpcyx0aGlzLl92aWV3Qm94KTtyZXR1cm4gdGhpc30sYS5fZW5naW5lLnNldFZpZXdCb3g9ZnVuY3Rpb24oYixjLGQsZSxmKXthLmV2ZShcInJhcGhhZWwuc2V0Vmlld0JveFwiLHRoaXMsdGhpcy5fdmlld0JveCxbYixjLGQsZSxmXSk7dmFyIGg9dGhpcy53aWR0aCxpPXRoaXMuaGVpZ2h0LGo9MS9nKGQvaCxlL2kpLGssbDtmJiYoaz1pL2UsbD1oL2QsZCprPGgmJihiLT0oaC1kKmspLzIvayksZSpsPGkmJihjLT0oaS1lKmwpLzIvbCkpLHRoaXMuX3ZpZXdCb3g9W2IsYyxkLGUsISFmXSx0aGlzLl92aWV3Qm94U2hpZnQ9e2R4Oi1iLGR5Oi1jLHNjYWxlOmp9LHRoaXMuZm9yRWFjaChmdW5jdGlvbihhKXthLnRyYW5zZm9ybShcIi4uLlwiKX0pO3JldHVybiB0aGlzfTt2YXIgRjthLl9lbmdpbmUuaW5pdFdpbj1mdW5jdGlvbihhKXt2YXIgYj1hLmRvY3VtZW50O2IuY3JlYXRlU3R5bGVTaGVldCgpLmFkZFJ1bGUoXCIucnZtbFwiLFwiYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTClcIik7dHJ5eyFiLm5hbWVzcGFjZXMucnZtbCYmYi5uYW1lc3BhY2VzLmFkZChcInJ2bWxcIixcInVybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sXCIpLEY9ZnVuY3Rpb24oYSl7cmV0dXJuIGIuY3JlYXRlRWxlbWVudChcIjxydm1sOlwiK2ErJyBjbGFzcz1cInJ2bWxcIj4nKX19Y2F0Y2goYyl7Rj1mdW5jdGlvbihhKXtyZXR1cm4gYi5jcmVhdGVFbGVtZW50KFwiPFwiK2ErJyB4bWxucz1cInVybjpzY2hlbWFzLW1pY3Jvc29mdC5jb206dm1sXCIgY2xhc3M9XCJydm1sXCI+Jyl9fX0sYS5fZW5naW5lLmluaXRXaW4oYS5fZy53aW4pLGEuX2VuZ2luZS5jcmVhdGU9ZnVuY3Rpb24oKXt2YXIgYj1hLl9nZXRDb250YWluZXIuYXBwbHkoMCxhcmd1bWVudHMpLGM9Yi5jb250YWluZXIsZD1iLmhlaWdodCxlLGY9Yi53aWR0aCxnPWIueCxoPWIueTtpZighYyl0aHJvdyBuZXcgRXJyb3IoXCJWTUwgY29udGFpbmVyIG5vdCBmb3VuZC5cIik7dmFyIGk9bmV3IGEuX1BhcGVyLGo9aS5jYW52YXM9YS5fZy5kb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSxrPWouc3R5bGU7Zz1nfHwwLGg9aHx8MCxmPWZ8fDUxMixkPWR8fDM0MixpLndpZHRoPWYsaS5oZWlnaHQ9ZCxmPT0rZiYmKGYrPVwicHhcIiksZD09K2QmJihkKz1cInB4XCIpLGkuY29vcmRzaXplPXUqMWUzK24rdSoxZTMsaS5jb29yZG9yaWdpbj1cIjAgMFwiLGkuc3Bhbj1hLl9nLmRvYy5jcmVhdGVFbGVtZW50KFwic3BhblwiKSxpLnNwYW4uc3R5bGUuY3NzVGV4dD1cInBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTk5OTllbTt0b3A6LTk5OTllbTtwYWRkaW5nOjA7bWFyZ2luOjA7bGluZS1oZWlnaHQ6MTtcIixqLmFwcGVuZENoaWxkKGkuc3Bhbiksay5jc3NUZXh0PWEuZm9ybWF0KFwidG9wOjA7bGVmdDowO3dpZHRoOnswfTtoZWlnaHQ6ezF9O2Rpc3BsYXk6aW5saW5lLWJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO2NsaXA6cmVjdCgwIHswfSB7MX0gMCk7b3ZlcmZsb3c6aGlkZGVuXCIsZixkKSxjPT0xPyhhLl9nLmRvYy5ib2R5LmFwcGVuZENoaWxkKGopLGsubGVmdD1nK1wicHhcIixrLnRvcD1oK1wicHhcIixrLnBvc2l0aW9uPVwiYWJzb2x1dGVcIik6Yy5maXJzdENoaWxkP2MuaW5zZXJ0QmVmb3JlKGosYy5maXJzdENoaWxkKTpjLmFwcGVuZENoaWxkKGopLGkucmVuZGVyZml4PWZ1bmN0aW9uKCl7fTtyZXR1cm4gaX0sYS5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXthLmV2ZShcInJhcGhhZWwuY2xlYXJcIix0aGlzKSx0aGlzLmNhbnZhcy5pbm5lckhUTUw9byx0aGlzLnNwYW49YS5fZy5kb2MuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5zcGFuLnN0eWxlLmNzc1RleHQ9XCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi05OTk5ZW07dG9wOi05OTk5ZW07cGFkZGluZzowO21hcmdpbjowO2xpbmUtaGVpZ2h0OjE7ZGlzcGxheTppbmxpbmU7XCIsdGhpcy5jYW52YXMuYXBwZW5kQ2hpbGQodGhpcy5zcGFuKSx0aGlzLmJvdHRvbT10aGlzLnRvcD1udWxsfSxhLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXthLmV2ZShcInJhcGhhZWwucmVtb3ZlXCIsdGhpcyksdGhpcy5jYW52YXMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNhbnZhcyk7Zm9yKHZhciBiIGluIHRoaXMpdGhpc1tiXT10eXBlb2YgdGhpc1tiXT09XCJmdW5jdGlvblwiP2EuX3JlbW92ZWRGYWN0b3J5KGIpOm51bGw7cmV0dXJuITB9O3ZhciBHPWEuc3Q7Zm9yKHZhciBIIGluIEUpRVtiXShIKSYmIUdbYl0oSCkmJihHW0hdPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cztyZXR1cm4gdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGMpe2NbYV0uYXBwbHkoYyxiKX0pfX0oSCkpfSh3aW5kb3cuUmFwaGFlbCkiLCIvKipcclxuICogSnVzdEdhZ2UgLSBhIGhhbmR5IEphdmFTY3JpcHQgcGx1Z2luIGZvciBnZW5lcmF0aW5nIGFuZCBhbmltYXRpbmcgbmljZSAmIGNsZWFuIGRhc2hib2FyZCBnYXVnZXMuXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMiBCb2phbiBEanVyaWNpYyAtIHBpbmRqdXIoYXQpZ21haWwoZG90KWNvbSB8IGh0dHA6Ly93d3cubWFkY29nLmNvbVxyXG4gKiBMaWNlbnNlZCB1bmRlciBNSVQuXHJcbiAqIERhdGU6IDMxLzA3LzIwMTJcclxuICogQGF1dGhvciBCb2phbiBEanVyaWNpYyAgKEBUb29yc2hpYSlcclxuICogQHZlcnNpb24gMS4wXHJcbiAqXHJcbiAqIGh0dHA6Ly93d3cuanVzdGdhZ2UuY29tXHJcbiAqL1xyXG5cclxuSnVzdEdhZ2UgPSBmdW5jdGlvbihjb25maWcpIHsgXHJcbiAgXHJcbiAgaWYgKCFjb25maWcuaWQpIHthbGVydChcIk1pc3NpbmcgaWQgcGFyYW1ldGVyIGZvciBnYXVnZSFcIik7IHJldHVybiBmYWxzZTt9IFxyXG4gIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29uZmlnLmlkKSkge2FsZXJ0KFwiTm8gZWxlbWVudCB3aXRoIGlkOiBcXFwiXCIrY29uZmlnLmlkK1wiXFxcIiBmb3VuZCFcIik7IHJldHVybiBmYWxzZTt9IFxyXG4gIFxyXG4gIC8vIGNvbmZpZ3VyYWJsZSBwYXJhbWV0ZXJzXHJcbiAgdGhpcy5jb25maWcgPSBcclxuICB7XHJcbiAgICAvLyBpZCA6IHN0cmluZyBcclxuICAgIC8vIHRoaXMgaXMgY29udGFpbmVyIGVsZW1lbnQgaWRcclxuICAgIGlkIDogY29uZmlnLmlkLFxyXG4gICAgXHJcbiAgICAvLyB0aXRsZSA6IHN0cmluZ1xyXG4gICAgLy8gZ2F1Z2UgdGl0bGUgXHJcbiAgICB0aXRsZSA6IChjb25maWcudGl0bGUpID8gY29uZmlnLnRpdGxlIDogXCJUaXRsZVwiLFxyXG4gICAgXHJcbiAgICAvLyB0aXRsZUZvbnRDb2xvciA6IHN0cmluZ1xyXG4gICAgLy8gY29sb3Igb2YgZ2F1Z2UgdGl0bGUgXHJcbiAgICB0aXRsZUZvbnRDb2xvciA6IChjb25maWcudGl0bGVGb250Q29sb3IpID8gY29uZmlnLnRpdGxlRm9udENvbG9yIDogXCIjOTk5OTk5XCIsXHJcbiAgICBcclxuICAgIC8vIHZhbHVlIDogaW50XHJcbiAgICAvLyB2YWx1ZSBnYXVnZSBpcyBzaG93aW5nIFxyXG4gICAgdmFsdWUgOiAoY29uZmlnLnZhbHVlKSA/IGNvbmZpZy52YWx1ZSA6IDAsXHJcbiAgICBcclxuICAgIC8vIHZhbHVlRm9udENvbG9yIDogc3RyaW5nXHJcbiAgICAvLyBjb2xvciBvZiBsYWJlbCBzaG93aW5nIGN1cnJlbnQgdmFsdWVcclxuICAgIHZhbHVlRm9udENvbG9yIDogKGNvbmZpZy52YWx1ZUZvbnRDb2xvcikgPyBjb25maWcudmFsdWVGb250Q29sb3IgOiBcIiMwMTAxMDFcIixcclxuICAgIFxyXG4gICAgLy8gbWluIDogaW50XHJcbiAgICAvLyBtaW4gdmFsdWVcclxuICAgIG1pbiA6IChjb25maWcubWluKSA/IGNvbmZpZy5taW4gOiAwLFxyXG4gICAgXHJcbiAgICAvLyBtYXggOiBpbnRcclxuICAgIC8vIG1heCB2YWx1ZVxyXG4gICAgbWF4IDogKGNvbmZpZy5tYXgpID8gY29uZmlnLm1heCA6IDEwMCxcclxuICAgIFxyXG4gICAgLy8gc2hvd01pbk1heCA6IGJvb2xcclxuICAgIC8vIGhpZGUgb3IgZGlzcGxheSBtaW4gYW5kIG1heCB2YWx1ZXNcclxuICAgIHNob3dNaW5NYXggOiAoY29uZmlnLnNob3dNaW5NYXggIT0gbnVsbCkgPyBjb25maWcuc2hvd01pbk1heCA6IHRydWUsXHJcbiAgICBcclxuICAgIC8vIGdhdWdlV2lkdGhTY2FsZSA6IGZsb2F0XHJcbiAgICAvLyB3aWR0aCBvZiB0aGUgZ2F1Z2UgZWxlbWVudFxyXG4gICAgZ2F1Z2VXaWR0aFNjYWxlIDogKGNvbmZpZy5nYXVnZVdpZHRoU2NhbGUpID8gY29uZmlnLmdhdWdlV2lkdGhTY2FsZSA6IDEuMCxcclxuICAgIFxyXG4gICAgLy8gZ2F1Z2VDb2xvciA6IHN0cmluZ1xyXG4gICAgLy8gYmFja2dyb3VuZCBjb2xvciBvZiBnYXVnZSBlbGVtZW50IFxyXG4gICAgZ2F1Z2VDb2xvciA6IChjb25maWcuZ2F1Z2VDb2xvcikgPyBjb25maWcuZ2F1Z2VDb2xvciA6IFwiI2VkZWJlYlwiLFxyXG4gICAgXHJcbiAgICAvLyBsYWJlbCA6IHN0cmluZ1xyXG4gICAgLy8gdGV4dCB0byBzaG93IGJlbG93IHZhbHVlXHJcbiAgICBsYWJlbCA6IChjb25maWcubGFiZWwpID8gY29uZmlnLmxhYmVsIDogXCJcIixcclxuICAgIFxyXG4gICAgLy8gc2hvd0lubmVyU2hhZG93IDogYm9vbFxyXG4gICAgLy8gZ2l2ZSBnYXVnZSBlbGVtZW50IHNtYWxsIGFtb3VudCBvZiBpbm5lciBzaGFkb3cgXHJcbiAgICBzaG93SW5uZXJTaGFkb3cgOiAoY29uZmlnLnNob3dJbm5lclNoYWRvdyAhPSBudWxsKSA/IGNvbmZpZy5zaG93SW5uZXJTaGFkb3cgOiB0cnVlLFxyXG4gICAgXHJcbiAgICAvLyBzaGFkb3dPcGFjaXR5IDogaW50XHJcbiAgICAvLyAwIH4gMVxyXG4gICAgc2hhZG93T3BhY2l0eSA6IChjb25maWcuc2hhZG93T3BhY2l0eSkgPyBjb25maWcuc2hhZG93T3BhY2l0eSA6IDAuMixcclxuICAgIFxyXG4gICAgLy8gc2hhZG93U2l6ZTogaW50XHJcbiAgICAvLyBpbm5lciBzaGFkb3cgc2l6ZVxyXG4gICAgc2hhZG93U2l6ZSA6IChjb25maWcuc2hhZG93U2l6ZSkgPyBjb25maWcuc2hhZG93U2l6ZSA6IDUsXHJcbiAgICBcclxuICAgIC8vIHNoYWRvd1ZlcnRpY2FsT2Zmc2V0IDogaW50XHJcbiAgICAvLyBob3cgbXVjaCBzaGFkb3cgaXMgb2Zmc2V0IGZyb20gdG9wIFxyXG4gICAgc2hhZG93VmVydGljYWxPZmZzZXQgOiAoY29uZmlnLnNoYWRvd1ZlcnRpY2FsT2Zmc2V0KSA/IGNvbmZpZy5zaGFkb3dWZXJ0aWNhbE9mZnNldCA6IDMsXHJcbiAgICBcclxuICAgIC8vIGxldmVsQ29sb3JzIDogc3RyaW5nW11cclxuICAgIC8vIGNvbG9ycyBvZiBpbmRpY2F0b3IsIGZyb20gbG93ZXIgdG8gdXBwZXIsIGluIFJHQiBmb3JtYXQgXHJcbiAgICBsZXZlbENvbG9ycyA6IChjb25maWcubGV2ZWxDb2xvcnMpID8gY29uZmlnLmxldmVsQ29sb3JzIDogcGVyY2VudENvbG9ycyxcclxuICAgIFxyXG4gICAgLy8gbGV2ZWxDb2xvcnNHcmFkaWVudCA6IGJvb2xcclxuICAgIC8vIHdoZXRoZXIgdG8gdXNlIGdyYWR1YWwgY29sb3IgY2hhbmdlIGZvciB2YWx1ZSwgb3Igc2VjdG9yLWJhc2VkXHJcbiAgICBsZXZlbENvbG9yc0dyYWRpZW50IDogKGNvbmZpZy5sZXZlbENvbG9yc0dyYWRpZW50ICE9IG51bGwpID8gY29uZmlnLmxldmVsQ29sb3JzR3JhZGllbnQgOiB0cnVlLFxyXG4gICAgXHJcbiAgICAvLyBsYWJlbEZvbnRDb2xvciA6IHN0cmluZ1xyXG4gICAgLy8gY29sb3Igb2YgbGFiZWwgc2hvd2luZyBsYWJlbCB1bmRlciB2YWx1ZVxyXG4gICAgbGFiZWxGb250Q29sb3IgOiAoY29uZmlnLmxhYmVsRm9udENvbG9yKSA/IGNvbmZpZy5sYWJlbEZvbnRDb2xvciA6IFwiI2IzYjNiM1wiLFxyXG4gICAgXHJcbiAgICAvLyBzdGFydEFuaW1hdGlvblRpbWUgOiBpbnRcclxuICAgIC8vIGxlbmd0aCBvZiBpbml0aWFsIGFuaW1hdGlvbiBcclxuICAgIHN0YXJ0QW5pbWF0aW9uVGltZSA6IChjb25maWcuc3RhcnRBbmltYXRpb25UaW1lKSA/IGNvbmZpZy5zdGFydEFuaW1hdGlvblRpbWUgOiA3MDAsXHJcbiAgICBcclxuICAgIC8vIHN0YXJ0QW5pbWF0aW9uVHlwZSA6IHN0cmluZ1xyXG4gICAgLy8gdHlwZSBvZiBpbml0aWFsIGFuaW1hdGlvbiAobGluZWFyLCA+LCA8LCAgPD4sIGJvdW5jZSkgXHJcbiAgICBzdGFydEFuaW1hdGlvblR5cGUgOiAoY29uZmlnLnN0YXJ0QW5pbWF0aW9uVHlwZSkgPyBjb25maWcuc3RhcnRBbmltYXRpb25UeXBlIDogXCI+XCIsXHJcbiAgICBcclxuICAgIC8vIHJlZnJlc2hBbmltYXRpb25UaW1lIDogaW50XHJcbiAgICAvLyBsZW5ndGggb2YgcmVmcmVzaCBhbmltYXRpb24gXHJcbiAgICByZWZyZXNoQW5pbWF0aW9uVGltZSA6IChjb25maWcucmVmcmVzaEFuaW1hdGlvblRpbWUpID8gY29uZmlnLnJlZnJlc2hBbmltYXRpb25UaW1lIDogNzAwLFxyXG4gICAgXHJcbiAgICAvLyByZWZyZXNoQW5pbWF0aW9uVHlwZSA6IHN0cmluZ1xyXG4gICAgLy8gdHlwZSBvZiByZWZyZXNoIGFuaW1hdGlvbiAobGluZWFyLCA+LCA8LCAgPD4sIGJvdW5jZSkgXHJcbiAgICByZWZyZXNoQW5pbWF0aW9uVHlwZSA6IChjb25maWcucmVmcmVzaEFuaW1hdGlvblR5cGUpID8gY29uZmlnLnJlZnJlc2hBbmltYXRpb25UeXBlIDogXCI+XCJcclxuICB9O1xyXG4gIFxyXG4gIC8vIG92ZXJmbG93IHZhbHVlc1xyXG4gIGlmIChjb25maWcudmFsdWUgPiB0aGlzLmNvbmZpZy5tYXgpIHRoaXMuY29uZmlnLnZhbHVlID0gdGhpcy5jb25maWcubWF4OyBcclxuICBpZiAoY29uZmlnLnZhbHVlIDwgdGhpcy5jb25maWcubWluKSB0aGlzLmNvbmZpZy52YWx1ZSA9IHRoaXMuY29uZmlnLm1pbjtcclxuICB0aGlzLm9yaWdpbmFsVmFsdWUgPSBjb25maWcudmFsdWU7XHJcbiAgXHJcbiAgLy8gY2FudmFzXHJcbiAgdGhpcy5jYW52YXMgPSBSYXBoYWVsKHRoaXMuY29uZmlnLmlkLCBcIjEwMCVcIiwgXCIxMDAlXCIpO1xyXG4gIFxyXG4gIC8vIGNhbnZhcyBkaW1lbnNpb25zXHJcbiAgLy92YXIgY2FudmFzVyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmlkKS5jbGllbnRXaWR0aDtcclxuICAvL3ZhciBjYW52YXNIID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuaWQpLmNsaWVudEhlaWdodDtcclxuICB2YXIgY2FudmFzVyA9IGdldFN0eWxlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuY29uZmlnLmlkKSwgXCJ3aWR0aFwiKS5zbGljZSgwLCAtMikgKiAxO1xyXG4gIHZhciBjYW52YXNIID0gZ2V0U3R5bGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5jb25maWcuaWQpLCBcImhlaWdodFwiKS5zbGljZSgwLCAtMikgKiAxO1xyXG4gIFxyXG4gIC8vIHdpZGdldCBkaW1lbnNpb25zXHJcbiAgdmFyIHdpZGdldFcsIHdpZGdldEg7XHJcbiAgaWYgKChjYW52YXNXIC8gY2FudmFzSCkgPiAxLjI1KSB7XHJcbiAgICB3aWRnZXRXID0gMS4yNSAqIGNhbnZhc0g7XHJcbiAgICB3aWRnZXRIID0gY2FudmFzSDtcclxuICB9IGVsc2Uge1xyXG4gICAgd2lkZ2V0VyA9IGNhbnZhc1c7XHJcbiAgICB3aWRnZXRIID0gY2FudmFzVyAvIDEuMjU7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIGRlbHRhIFxyXG4gIHZhciBkeCA9IChjYW52YXNXIC0gd2lkZ2V0VykvMjtcclxuICB2YXIgZHkgPSAoY2FudmFzSCAtIHdpZGdldEgpLzI7XHJcbiAgXHJcbiAgLy8gdGl0bGUgXHJcbiAgdmFyIHRpdGxlRm9udFNpemUgPSAoKHdpZGdldEggLyA4KSA+IDEwKSA/ICh3aWRnZXRIIC8gMTApIDogMTA7XHJcbiAgdmFyIHRpdGxlWCA9IGR4ICsgd2lkZ2V0VyAvIDI7XHJcbiAgdmFyIHRpdGxlWSA9IGR5ICsgd2lkZ2V0SCAvIDk7XHJcbiAgXHJcbiAgLy8gdmFsdWUgXHJcbiAgdmFyIHZhbHVlRm9udFNpemUgPSAoKHdpZGdldEggLyA2LjQpID4gMTYpID8gKHdpZGdldEggLyA2LjQpIDogMTY7XHJcbiAgdmFyIHZhbHVlWCA9IGR4ICsgd2lkZ2V0VyAvIDI7XHJcbiAgdmFyIHZhbHVlWSA9IGR5ICsgd2lkZ2V0SCAvIDEuNDtcclxuICBcclxuICAvLyBsYWJlbCBcclxuICB2YXIgbGFiZWxGb250U2l6ZSA9ICgod2lkZ2V0SCAvIDE2KSA+IDEwKSA/ICh3aWRnZXRIIC8gMTYpIDogMTA7XHJcbiAgdmFyIGxhYmVsWCA9IGR4ICsgd2lkZ2V0VyAvIDI7XHJcbiAgLy92YXIgbGFiZWxZID0gZHkgKyB3aWRnZXRIIC8gMS4xMjY3NjA1NjMzODAyODI7XHJcbiAgdmFyIGxhYmVsWSA9IHZhbHVlWSArIHZhbHVlRm9udFNpemUgLyAyICsgNjtcclxuICBcclxuICAvLyBtaW4gXHJcbiAgdmFyIG1pbkZvbnRTaXplID0gKCh3aWRnZXRIIC8gMTYpID4gMTApID8gKHdpZGdldEggLyAxNikgOiAxMDtcclxuICB2YXIgbWluWCA9IGR4ICsgKHdpZGdldFcgLyAxMCkgKyAod2lkZ2V0VyAvIDYuNjY2NjY2NjY2NjY2NjY3ICogdGhpcy5jb25maWcuZ2F1Z2VXaWR0aFNjYWxlKSAvIDIgO1xyXG4gIHZhciBtaW5ZID0gZHkgKyB3aWRnZXRIIC8gMS4xMjY3NjA1NjMzODAyODI7XHJcbiAgXHJcbiAgLy8gbWF4IFxyXG4gIHZhciBtYXhGb250U2l6ZSA9ICgod2lkZ2V0SCAvIDE2KSA+IDEwKSA/ICh3aWRnZXRIIC8gMTYpIDogMTA7XHJcbiAgdmFyIG1heFggPSBkeCArIHdpZGdldFcgLSAod2lkZ2V0VyAvIDEwKSAtICh3aWRnZXRXIC8gNi42NjY2NjY2NjY2NjY2NjcgKiB0aGlzLmNvbmZpZy5nYXVnZVdpZHRoU2NhbGUpIC8gMiA7XHJcbiAgdmFyIG1heFkgPSBkeSArIHdpZGdldEggLyAxLjEyNjc2MDU2MzM4MDI4MjtcclxuICBcclxuICAvLyBwYXJhbWV0ZXJzXHJcbiAgdGhpcy5wYXJhbXMgID0ge1xyXG4gICAgY2FudmFzVyA6IGNhbnZhc1csXHJcbiAgICBjYW52YXNIIDogY2FudmFzSCxcclxuICAgIHdpZGdldFcgOiB3aWRnZXRXLFxyXG4gICAgd2lkZ2V0SCA6IHdpZGdldEgsXHJcbiAgICBkeCA6IGR4LFxyXG4gICAgZHkgOiBkeSxcclxuICAgIHRpdGxlRm9udFNpemUgOiB0aXRsZUZvbnRTaXplLFxyXG4gICAgdGl0bGVYIDogdGl0bGVYLFxyXG4gICAgdGl0bGVZIDogdGl0bGVZLFxyXG4gICAgdmFsdWVGb250U2l6ZSA6IHZhbHVlRm9udFNpemUsXHJcbiAgICB2YWx1ZVggOiB2YWx1ZVgsXHJcbiAgICB2YWx1ZVkgOiB2YWx1ZVksXHJcbiAgICBsYWJlbEZvbnRTaXplIDogbGFiZWxGb250U2l6ZSxcclxuICAgIGxhYmVsWCA6IGxhYmVsWCxcclxuICAgIGxhYmVsWSA6IGxhYmVsWSxcclxuICAgIG1pbkZvbnRTaXplIDogbWluRm9udFNpemUsXHJcbiAgICBtaW5YIDogbWluWCxcclxuICAgIG1pblkgOiBtaW5ZLFxyXG4gICAgbWF4Rm9udFNpemUgOiBtYXhGb250U2l6ZSxcclxuICAgIG1heFggOiBtYXhYLFxyXG4gICAgbWF4WSA6IG1heFlcclxuICB9O1xyXG4gIFxyXG4gIC8vIHBraSAtIGN1c3RvbSBhdHRyaWJ1dGUgZm9yIGdlbmVyYXRpbmcgZ2F1Z2UgcGF0aHNcclxuICB0aGlzLmNhbnZhcy5jdXN0b21BdHRyaWJ1dGVzLnBraSA9IGZ1bmN0aW9uICh2YWx1ZSwgbWluLCBtYXgsIHcsIGgsIGR4LCBkeSwgZ3dzKSB7XHJcbiAgICBcclxuICAgICAgIHZhciBhbHBoYSA9ICgxIC0gKHZhbHVlIC0gbWluKSAvIChtYXggLSBtaW4pKSAqIE1hdGguUEkgLFxyXG4gICAgICAgICAgUm8gPSB3IC8gMiAtIHcgLyAxMCxcclxuICAgICAgICAgIFJpID0gUm8gLSB3IC8gNi42NjY2NjY2NjY2NjY2NjcgKiBnd3MsXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIEN4ID0gdyAvIDIgKyBkeCxcclxuICAgICAgICAgIEN5ID0gaCAvIDEuMjUgKyBkeSxcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgWG8gPSB3IC8gMiArIGR4ICsgUm8gKiBNYXRoLmNvcyhhbHBoYSksXHJcbiAgICAgICAgICBZbyA9IGggLSAoaCAtIEN5KSArIGR5IC0gUm8gKiBNYXRoLnNpbihhbHBoYSksXHJcbiAgICAgICAgICBYaSA9IHcgLyAyICsgZHggKyBSaSAqIE1hdGguY29zKGFscGhhKSxcclxuICAgICAgICAgIFlpID0gaCAtIChoIC0gQ3kpICsgZHkgLSBSaSAqIE1hdGguc2luKGFscGhhKSxcclxuICAgICAgICAgIHBhdGg7XHJcbiAgICBcclxuICAgICAgcGF0aCArPSBcIk1cIiArIChDeCAtIFJpKSArIFwiLFwiICsgQ3kgKyBcIiBcIjtcclxuICAgICAgcGF0aCArPSBcIkxcIiArIChDeCAtIFJvKSArIFwiLFwiICsgQ3kgKyBcIiBcIjtcclxuICAgICAgcGF0aCArPSBcIkFcIiArIFJvICsgXCIsXCIgKyBSbyArIFwiIDAgMCwxIFwiICsgWG8gKyBcIixcIiArIFlvICsgXCIgXCI7XHJcbiAgICAgIHBhdGggKz0gXCJMXCIgKyBYaSArIFwiLFwiICsgWWkgKyBcIiBcIjtcclxuICAgICAgcGF0aCArPSBcIkFcIiArIFJpICsgXCIsXCIgKyBSaSArIFwiIDAgMCwwIFwiICsgKEN4IC0gUmkpICsgXCIsXCIgKyBDeSArIFwiIFwiO1xyXG4gICAgICBwYXRoICs9IFwieiBcIjtcclxuICAgICAgcmV0dXJuIHsgcGF0aDogcGF0aCB9O1xyXG4gIH0gIFxyXG4gIFxyXG4gIC8vIGdhdWdlXHJcbiAgdGhpcy5nYXVnZSA9IHRoaXMuY2FudmFzLnBhdGgoKS5hdHRyKHtcclxuICAgIFwic3Ryb2tlXCI6IFwibm9uZVwiLFxyXG4gICAgXCJmaWxsXCI6IHRoaXMuY29uZmlnLmdhdWdlQ29sb3IsICAgXHJcbiAgICBwa2k6IFt0aGlzLmNvbmZpZy5tYXgsIHRoaXMuY29uZmlnLm1pbiwgdGhpcy5jb25maWcubWF4LCB0aGlzLnBhcmFtcy53aWRnZXRXLCB0aGlzLnBhcmFtcy53aWRnZXRILCAgdGhpcy5wYXJhbXMuZHgsIHRoaXMucGFyYW1zLmR5LCB0aGlzLmNvbmZpZy5nYXVnZVdpZHRoU2NhbGVdXHJcbiAgfSk7XHJcbiAgdGhpcy5nYXVnZS5pZCA9IHRoaXMuY29uZmlnLmlkK1wiLWdhdWdlXCI7XHJcbiAgXHJcbiAgLy8gbGV2ZWxcclxuICB0aGlzLmxldmVsID0gdGhpcy5jYW52YXMucGF0aCgpLmF0dHIoe1xyXG4gICAgXCJzdHJva2VcIjogXCJub25lXCIsXHJcbiAgICBcImZpbGxcIjogZ2V0Q29sb3JGb3JQZXJjZW50YWdlKCh0aGlzLmNvbmZpZy52YWx1ZSAtIHRoaXMuY29uZmlnLm1pbikgLyAodGhpcy5jb25maWcubWF4IC0gdGhpcy5jb25maWcubWluKSwgdGhpcy5jb25maWcubGV2ZWxDb2xvcnMsIHRoaXMuY29uZmlnLmxldmVsQ29sb3JzR3JhZGllbnQpLCAgXHJcbiAgICBwa2k6IFt0aGlzLmNvbmZpZy5taW4sIHRoaXMuY29uZmlnLm1pbiwgdGhpcy5jb25maWcubWF4LCB0aGlzLnBhcmFtcy53aWRnZXRXLCB0aGlzLnBhcmFtcy53aWRnZXRILCAgdGhpcy5wYXJhbXMuZHgsIHRoaXMucGFyYW1zLmR5LCB0aGlzLmNvbmZpZy5nYXVnZVdpZHRoU2NhbGVdXHJcbiAgfSk7XHJcbiAgdGhpcy5sZXZlbC5pZCA9IHRoaXMuY29uZmlnLmlkK1wiLWxldmVsXCI7XHJcbiAgXHJcbiAgLy8gdGl0bGVcclxuICB0aGlzLnR4dFRpdGxlID0gdGhpcy5jYW52YXMudGV4dCh0aGlzLnBhcmFtcy50aXRsZVgsIHRoaXMucGFyYW1zLnRpdGxlWSwgdGhpcy5jb25maWcudGl0bGUpO1xyXG4gIHRoaXMudHh0VGl0bGUuIGF0dHIoe1xyXG4gICAgXCJmb250LXNpemVcIjp0aGlzLnBhcmFtcy50aXRsZUZvbnRTaXplLFxyXG4gICAgXCJmb250LXdlaWdodFwiOlwiYm9sZFwiLFxyXG4gICAgXCJmb250LWZhbWlseVwiOlwiQXJpYWxcIixcclxuICAgIFwiZmlsbFwiOnRoaXMuY29uZmlnLnRpdGxlRm9udENvbG9yLFxyXG4gICAgXCJmaWxsLW9wYWNpdHlcIjpcIjFcIiAgICAgICAgIFxyXG4gIH0pO1xyXG4gIHRoaXMudHh0VGl0bGUuaWQgPSB0aGlzLmNvbmZpZy5pZCtcIi10eHR0aXRsZVwiO1xyXG4gIFxyXG4gIC8vIHZhbHVlXHJcbiAgdGhpcy50eHRWYWx1ZSA9IHRoaXMuY2FudmFzLnRleHQodGhpcy5wYXJhbXMudmFsdWVYLCB0aGlzLnBhcmFtcy52YWx1ZVksIHRoaXMub3JpZ2luYWxWYWx1ZSk7XHJcbiAgdGhpcy50eHRWYWx1ZS4gYXR0cih7XHJcbiAgICBcImZvbnQtc2l6ZVwiOnRoaXMucGFyYW1zLnZhbHVlRm9udFNpemUsXHJcbiAgICBcImZvbnQtd2VpZ2h0XCI6XCJib2xkXCIsXHJcbiAgICBcImZvbnQtZmFtaWx5XCI6XCJBcmlhbFwiLFxyXG4gICAgXCJmaWxsXCI6dGhpcy5jb25maWcudmFsdWVGb250Q29sb3IsXHJcbiAgICBcImZpbGwtb3BhY2l0eVwiOlwiMFwiICAgICAgICAgIFxyXG4gIH0pO1xyXG4gIHRoaXMudHh0VmFsdWUuaWQgPSB0aGlzLmNvbmZpZy5pZCtcIi10eHR2YWx1ZVwiO1xyXG4gIFxyXG4gIC8vIGxhYmVsXHJcbiAgdGhpcy50eHRMYWJlbCA9IHRoaXMuY2FudmFzLnRleHQodGhpcy5wYXJhbXMubGFiZWxYLCB0aGlzLnBhcmFtcy5sYWJlbFksIHRoaXMuY29uZmlnLmxhYmVsKTtcclxuICB0aGlzLnR4dExhYmVsLiBhdHRyKHtcclxuICAgIFwiZm9udC1zaXplXCI6dGhpcy5wYXJhbXMubGFiZWxGb250U2l6ZSxcclxuICAgIFwiZm9udC13ZWlnaHRcIjpcIm5vcm1hbFwiLFxyXG4gICAgXCJmb250LWZhbWlseVwiOlwiQXJpYWxcIixcclxuICAgIFwiZmlsbFwiOnRoaXMuY29uZmlnLmxhYmVsRm9udENvbG9yLCAgIFxyXG4gICAgXCJmaWxsLW9wYWNpdHlcIjpcIjBcIlxyXG4gIH0pO1xyXG4gIHRoaXMudHh0TGFiZWwuaWQgPSB0aGlzLmNvbmZpZy5pZCtcIi10eHRsYWJlbFwiO1xyXG4gIFxyXG4gIC8vIG1pblxyXG4gIHRoaXMudHh0TWluID0gdGhpcy5jYW52YXMudGV4dCh0aGlzLnBhcmFtcy5taW5YLCB0aGlzLnBhcmFtcy5taW5ZLCB0aGlzLmNvbmZpZy5taW4pO1xyXG4gIHRoaXMudHh0TWluLiBhdHRyKHtcclxuICAgIFwiZm9udC1zaXplXCI6dGhpcy5wYXJhbXMubWluRm9udFNpemUsXHJcbiAgICBcImZvbnQtd2VpZ2h0XCI6XCJub3JtYWxcIixcclxuICAgIFwiZm9udC1mYW1pbHlcIjpcIkFyaWFsXCIsXHJcbiAgICBcImZpbGxcIjp0aGlzLmNvbmZpZy5sYWJlbEZvbnRDb2xvciwgICBcclxuICAgIFwiZmlsbC1vcGFjaXR5XCI6ICh0aGlzLmNvbmZpZy5zaG93TWluTWF4ID09IHRydWUpPyBcIjFcIiA6IFwiMFwiXHJcbiAgfSk7XHJcbiAgdGhpcy50eHRNaW4uaWQgPSB0aGlzLmNvbmZpZy5pZCtcIi10eHRtaW5cIjtcclxuICBcclxuICAvLyBtYXhcclxuICB0aGlzLnR4dE1heCA9IHRoaXMuY2FudmFzLnRleHQodGhpcy5wYXJhbXMubWF4WCwgdGhpcy5wYXJhbXMubWF4WSwgdGhpcy5jb25maWcubWF4KTtcclxuICB0aGlzLnR4dE1heC4gYXR0cih7XHJcbiAgICBcImZvbnQtc2l6ZVwiOnRoaXMucGFyYW1zLm1heEZvbnRTaXplLFxyXG4gICAgXCJmb250LXdlaWdodFwiOlwibm9ybWFsXCIsXHJcbiAgICBcImZvbnQtZmFtaWx5XCI6XCJBcmlhbFwiLFxyXG4gICAgXCJmaWxsXCI6dGhpcy5jb25maWcubGFiZWxGb250Q29sb3IsICAgXHJcbiAgICBcImZpbGwtb3BhY2l0eVwiOiAodGhpcy5jb25maWcuc2hvd01pbk1heCA9PSB0cnVlKT8gXCIxXCIgOiBcIjBcIlxyXG4gIH0pO1xyXG4gIHRoaXMudHh0TWF4LmlkID0gdGhpcy5jb25maWcuaWQrXCItdHh0bWF4XCI7XHJcbiAgXHJcbiAgdmFyIGRlZnMgPSB0aGlzLmNhbnZhcy5jYW52YXMuY2hpbGROb2Rlc1sxXTtcclxuICB2YXIgc3ZnID0gXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiO1xyXG4gIFxyXG4gIFxyXG4gIFxyXG4gIGlmIChpZSA8IDkpIHtcclxuICAgIG9uQ3JlYXRlRWxlbWVudE5zUmVhZHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRoaXMuZ2VuZXJhdGVTaGFkb3coKTtcclxuICAgIH0pOyAgXHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMuZ2VuZXJhdGVTaGFkb3coc3ZnLCBkZWZzKTtcclxuICB9XHJcbiAgXHJcbiAgLy8gYW5pbWF0ZSBcclxuICB0aGlzLmxldmVsLmFuaW1hdGUoe3BraTogW3RoaXMuY29uZmlnLnZhbHVlLCB0aGlzLmNvbmZpZy5taW4sIHRoaXMuY29uZmlnLm1heCwgdGhpcy5wYXJhbXMud2lkZ2V0VywgdGhpcy5wYXJhbXMud2lkZ2V0SCwgIHRoaXMucGFyYW1zLmR4LCB0aGlzLnBhcmFtcy5keSwgdGhpcy5jb25maWcuZ2F1Z2VXaWR0aFNjYWxlXX0sICB0aGlzLmNvbmZpZy5zdGFydEFuaW1hdGlvblRpbWUsIHRoaXMuY29uZmlnLnN0YXJ0QW5pbWF0aW9uVHlwZSk7XHJcbiAgXHJcbiAgdGhpcy50eHRWYWx1ZS5hbmltYXRlKHtcImZpbGwtb3BhY2l0eVwiOlwiMVwifSwgdGhpcy5jb25maWcuc3RhcnRBbmltYXRpb25UaW1lLCB0aGlzLmNvbmZpZy5zdGFydEFuaW1hdGlvblR5cGUpOyBcclxuICB0aGlzLnR4dExhYmVsLmFuaW1hdGUoe1wiZmlsbC1vcGFjaXR5XCI6XCIxXCJ9LCB0aGlzLmNvbmZpZy5zdGFydEFuaW1hdGlvblRpbWUsIHRoaXMuY29uZmlnLnN0YXJ0QW5pbWF0aW9uVHlwZSk7ICBcclxufTtcclxuXHJcbi8vIHJlZnJlc2ggZ2F1Z2UgbGV2ZWxcclxuSnVzdEdhZ2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbih2YWwpIHtcclxuICAvLyBvdmVyZmxvdyB2YWx1ZXNcclxuICBvcmlnaW5hbFZhbCA9IHZhbDtcclxuICBpZiAodmFsID4gdGhpcy5jb25maWcubWF4KSB7dmFsID0gdGhpcy5jb25maWcubWF4O31cclxuICBpZiAodmFsIDwgdGhpcy5jb25maWcubWluKSB7dmFsID0gdGhpcy5jb25maWcubWluO31cclxuICAgIFxyXG4gIHZhciBjb2xvciA9IGdldENvbG9yRm9yUGVyY2VudGFnZSgodmFsIC0gdGhpcy5jb25maWcubWluKSAvICh0aGlzLmNvbmZpZy5tYXggLSB0aGlzLmNvbmZpZy5taW4pLCB0aGlzLmNvbmZpZy5sZXZlbENvbG9ycywgdGhpcy5jb25maWcubGV2ZWxDb2xvcnNHcmFkaWVudCk7XHJcbiAgdGhpcy5jYW52YXMuZ2V0QnlJZCh0aGlzLmNvbmZpZy5pZCtcIi10eHR2YWx1ZVwiKS5hdHRyKHtcInRleHRcIjpvcmlnaW5hbFZhbH0pO1xyXG4gIHRoaXMuY2FudmFzLmdldEJ5SWQodGhpcy5jb25maWcuaWQrXCItbGV2ZWxcIikuYW5pbWF0ZSh7cGtpOiBbdmFsLCB0aGlzLmNvbmZpZy5taW4sIHRoaXMuY29uZmlnLm1heCwgdGhpcy5wYXJhbXMud2lkZ2V0VywgdGhpcy5wYXJhbXMud2lkZ2V0SCwgIHRoaXMucGFyYW1zLmR4LCB0aGlzLnBhcmFtcy5keSwgdGhpcy5jb25maWcuZ2F1Z2VXaWR0aFNjYWxlXSwgXCJmaWxsXCI6Y29sb3J9LCAgdGhpcy5jb25maWcucmVmcmVzaEFuaW1hdGlvblRpbWUsIHRoaXMuY29uZmlnLnJlZnJlc2hBbmltYXRpb25UeXBlKTtcclxufTtcclxuXHJcbnZhciBwZXJjZW50Q29sb3JzID0gW1xyXG4gIFwiI2E5ZDcwYlwiLFxyXG4gIFwiI2Y5YzgwMlwiLFxyXG4gIFwiI2ZmMDAwMFwiXHJcbl1cclxuXHJcbkp1c3RHYWdlLnByb3RvdHlwZS5nZW5lcmF0ZVNoYWRvdyA9IGZ1bmN0aW9uKHN2ZywgZGVmcykge1xyXG4gICAgLy8gRklMVEVSXHJcbiAgICB2YXIgZ2F1c3NGaWx0ZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2ZyxcImZpbHRlclwiKTtcclxuICAgIGdhdXNzRmlsdGVyLnNldEF0dHJpYnV0ZShcImlkXCIsIHRoaXMuY29uZmlnLmlkICsgXCItaW5uZXItc2hhZG93XCIpO1xyXG4gICAgZGVmcy5hcHBlbmRDaGlsZChnYXVzc0ZpbHRlcik7XHJcbiAgICBcclxuICAgIC8vIG9mZnNldFxyXG4gICAgdmFyIGZlT2Zmc2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2ZyxcImZlT2Zmc2V0XCIpO1xyXG4gICAgZmVPZmZzZXQuc2V0QXR0cmlidXRlKFwiZHhcIiwgMCk7XHJcbiAgICBmZU9mZnNldC5zZXRBdHRyaWJ1dGUoXCJkeVwiLCB0aGlzLmNvbmZpZy5zaGFkb3dWZXJ0aWNhbE9mZnNldCk7XHJcbiAgICBnYXVzc0ZpbHRlci5hcHBlbmRDaGlsZChmZU9mZnNldCk7XHJcbiAgICBcclxuICAgIC8vIGJsdXJcclxuICAgIHZhciBmZUdhdXNzaWFuQmx1ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmZUdhdXNzaWFuQmx1clwiKTtcclxuICAgIGZlR2F1c3NpYW5CbHVyLnNldEF0dHJpYnV0ZShcInJlc3VsdFwiLFwib2Zmc2V0LWJsdXJcIik7XHJcbiAgICBmZUdhdXNzaWFuQmx1ci5zZXRBdHRyaWJ1dGUoXCJzdGREZXZpYXRpb25cIiwgdGhpcy5jb25maWcuc2hhZG93U2l6ZSk7XHJcbiAgICBnYXVzc0ZpbHRlci5hcHBlbmRDaGlsZChmZUdhdXNzaWFuQmx1cik7XHJcbiAgICBcclxuICAgIC8vIGNvbXBvc2l0ZSAxXHJcbiAgICB2YXIgZmVDb21wb3NpdGUxID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2ZyxcImZlQ29tcG9zaXRlXCIpO1xyXG4gICAgZmVDb21wb3NpdGUxLnNldEF0dHJpYnV0ZShcIm9wZXJhdG9yXCIsXCJvdXRcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTEuc2V0QXR0cmlidXRlKFwiaW5cIiwgXCJTb3VyY2VHcmFwaGljXCIpO1xyXG4gICAgZmVDb21wb3NpdGUxLnNldEF0dHJpYnV0ZShcImluMlwiLFwib2Zmc2V0LWJsdXJcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTEuc2V0QXR0cmlidXRlKFwicmVzdWx0XCIsXCJpbnZlcnNlXCIpO1xyXG4gICAgZ2F1c3NGaWx0ZXIuYXBwZW5kQ2hpbGQoZmVDb21wb3NpdGUxKTtcclxuICAgIFxyXG4gICAgLy8gZmxvb2RcclxuICAgIHZhciBmZUZsb29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2ZyxcImZlRmxvb2RcIik7XHJcbiAgICBmZUZsb29kLnNldEF0dHJpYnV0ZShcImZsb29kLWNvbG9yXCIsXCJibGFja1wiKTtcclxuICAgIGZlRmxvb2Quc2V0QXR0cmlidXRlKFwiZmxvb2Qtb3BhY2l0eVwiLCB0aGlzLmNvbmZpZy5zaGFkb3dPcGFjaXR5KTtcclxuICAgIGZlRmxvb2Quc2V0QXR0cmlidXRlKFwicmVzdWx0XCIsXCJjb2xvclwiKTtcclxuICAgIGdhdXNzRmlsdGVyLmFwcGVuZENoaWxkKGZlRmxvb2QpO1xyXG4gICAgXHJcbiAgICAvLyBjb21wb3NpdGUgMlxyXG4gICAgdmFyIGZlQ29tcG9zaXRlMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmZUNvbXBvc2l0ZVwiKTtcclxuICAgIGZlQ29tcG9zaXRlMi5zZXRBdHRyaWJ1dGUoXCJvcGVyYXRvclwiLFwiaW5cIik7XHJcbiAgICBmZUNvbXBvc2l0ZTIuc2V0QXR0cmlidXRlKFwiaW5cIiwgXCJjb2xvclwiKTtcclxuICAgIGZlQ29tcG9zaXRlMi5zZXRBdHRyaWJ1dGUoXCJpbjJcIixcImludmVyc2VcIik7XHJcbiAgICBmZUNvbXBvc2l0ZTIuc2V0QXR0cmlidXRlKFwicmVzdWx0XCIsXCJzaGFkb3dcIik7XHJcbiAgICBnYXVzc0ZpbHRlci5hcHBlbmRDaGlsZChmZUNvbXBvc2l0ZTIpO1xyXG4gICAgXHJcbiAgICAvLyBjb21wb3NpdGUgM1xyXG4gICAgdmFyIGZlQ29tcG9zaXRlMyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzdmcsXCJmZUNvbXBvc2l0ZVwiKTtcclxuICAgIGZlQ29tcG9zaXRlMy5zZXRBdHRyaWJ1dGUoXCJvcGVyYXRvclwiLFwib3ZlclwiKTtcclxuICAgIGZlQ29tcG9zaXRlMy5zZXRBdHRyaWJ1dGUoXCJpblwiLCBcInNoYWRvd1wiKTtcclxuICAgIGZlQ29tcG9zaXRlMy5zZXRBdHRyaWJ1dGUoXCJpbjJcIixcIlNvdXJjZUdyYXBoaWNcIik7XHJcbiAgICBnYXVzc0ZpbHRlci5hcHBlbmRDaGlsZChmZUNvbXBvc2l0ZTMpO1xyXG5cclxuICAgIC8vIHNldCBzaGFkb3dcclxuICAgIGlmICh0aGlzLmNvbmZpZy5zaG93SW5uZXJTaGFkb3cgPT0gdHJ1ZSkge1xyXG4gICAgICB0aGlzLmNhbnZhcy5jYW52YXMuY2hpbGROb2Rlc1syXS5zZXRBdHRyaWJ1dGUoXCJmaWx0ZXJcIiwgXCJ1cmwoI1wiICsgdGhpcy5jb25maWcuaWQgKyBcIi1pbm5lci1zaGFkb3cpXCIpO1xyXG4gICAgICB0aGlzLmNhbnZhcy5jYW52YXMuY2hpbGROb2Rlc1szXS5zZXRBdHRyaWJ1dGUoXCJmaWx0ZXJcIiwgXCJ1cmwoI1wiICsgdGhpcy5jb25maWcuaWQgKyBcIi1pbm5lci1zaGFkb3cpXCIpO1xyXG4gICAgfVxyXG59XHJcblxyXG52YXIgZ2V0Q29sb3JGb3JQZXJjZW50YWdlID0gZnVuY3Rpb24ocGN0LCBjb2wsIGdyYWQpIHtcclxuICAgIFxyXG4gICAgdmFyIG5vID0gY29sLmxlbmd0aDtcclxuICAgIGlmIChubyA9PT0gMSkgcmV0dXJuIGNvbFswXTtcclxuICAgIHZhciBpbmMgPSAoZ3JhZCkgPyAoMSAvIChubyAtIDEpKSA6ICgxIC8gbm8pO1xyXG4gICAgdmFyIGNvbG9ycyA9IG5ldyBBcnJheSgpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2wubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIHBlcmNlbnRhZ2UgPSAoZ3JhZCkgPyAoaW5jICogaSkgOiAoaW5jICogKGkgKyAxKSk7XHJcbiAgICAgIHZhciBydmFsID0gcGFyc2VJbnQoKGN1dEhleChjb2xbaV0pKS5zdWJzdHJpbmcoMCwyKSwxNik7XHJcbiAgICAgIHZhciBndmFsID0gcGFyc2VJbnQoKGN1dEhleChjb2xbaV0pKS5zdWJzdHJpbmcoMiw0KSwxNik7XHJcbiAgICAgIHZhciBidmFsID0gcGFyc2VJbnQoKGN1dEhleChjb2xbaV0pKS5zdWJzdHJpbmcoNCw2KSwxNik7XHJcbiAgICAgIGNvbG9yc1tpXSA9IHsgcGN0OiBwZXJjZW50YWdlLCBjb2xvcjogeyByOiBydmFsLCBnOiBndmFsLCBiOiBidmFsICB9IH07XHJcbiAgICB9XHJcbiAgICAgICAgXHJcbiAgICBpZihwY3QgPT0gMCkgcmV0dXJuICdyZ2IoJyArIFtjb2xvcnNbMF0uY29sb3IuciwgY29sb3JzWzBdLmNvbG9yLmcsIGNvbG9yc1swXS5jb2xvci5iXS5qb2luKCcsJykgKyAnKSc7XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICBpZiAocGN0IDw9IGNvbG9yc1tpXS5wY3QpIHtcclxuICAgICAgICAgICAgaWYgKGdyYWQgPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHZhciBsb3dlciA9IGNvbG9yc1tpIC0gMV07XHJcbiAgICAgICAgICAgICAgdmFyIHVwcGVyID0gY29sb3JzW2ldO1xyXG4gICAgICAgICAgICAgIHZhciByYW5nZSA9IHVwcGVyLnBjdCAtIGxvd2VyLnBjdDtcclxuICAgICAgICAgICAgICB2YXIgcmFuZ2VQY3QgPSAocGN0IC0gbG93ZXIucGN0KSAvIHJhbmdlO1xyXG4gICAgICAgICAgICAgIHZhciBwY3RMb3dlciA9IDEgLSByYW5nZVBjdDtcclxuICAgICAgICAgICAgICB2YXIgcGN0VXBwZXIgPSByYW5nZVBjdDtcclxuICAgICAgICAgICAgICB2YXIgY29sb3IgPSB7XHJcbiAgICAgICAgICAgICAgICAgIHI6IE1hdGguZmxvb3IobG93ZXIuY29sb3IuciAqIHBjdExvd2VyICsgdXBwZXIuY29sb3IuciAqIHBjdFVwcGVyKSxcclxuICAgICAgICAgICAgICAgICAgZzogTWF0aC5mbG9vcihsb3dlci5jb2xvci5nICogcGN0TG93ZXIgKyB1cHBlci5jb2xvci5nICogcGN0VXBwZXIpLFxyXG4gICAgICAgICAgICAgICAgICBiOiBNYXRoLmZsb29yKGxvd2VyLmNvbG9yLmIgKiBwY3RMb3dlciArIHVwcGVyLmNvbG9yLmIgKiBwY3RVcHBlcilcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgIHJldHVybiAncmdiKCcgKyBbY29sb3IuciwgY29sb3IuZywgY29sb3IuYl0uam9pbignLCcpICsgJyknO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHJldHVybiAncmdiKCcgKyBbY29sb3JzW2ldLmNvbG9yLnIsIGNvbG9yc1tpXS5jb2xvci5nLCBjb2xvcnNbaV0uY29sb3IuYl0uam9pbignLCcpICsgJyknOyBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICB9XHJcbn0gXHJcblxyXG5mdW5jdGlvbiBnZXRSYW5kb21JbnQgKG1pbiwgbWF4KSB7XHJcbiAgICByZXR1cm4gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKSArIG1pbjtcclxufSAgICBcclxuXHJcbmZ1bmN0aW9uIGN1dEhleChzdHIpIHtyZXR1cm4gKHN0ci5jaGFyQXQoMCk9PVwiI1wiKSA/IHN0ci5zdWJzdHJpbmcoMSw3KTpzdHJ9XHJcblxyXG5mdW5jdGlvbiBnZXRTdHlsZShvRWxtLCBzdHJDc3NSdWxlKXtcclxuXHR2YXIgc3RyVmFsdWUgPSBcIlwiO1xyXG5cdGlmKGRvY3VtZW50LmRlZmF1bHRWaWV3ICYmIGRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUpe1xyXG5cdFx0c3RyVmFsdWUgPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKG9FbG0sIFwiXCIpLmdldFByb3BlcnR5VmFsdWUoc3RyQ3NzUnVsZSk7XHJcblx0fVxyXG5cdGVsc2UgaWYob0VsbS5jdXJyZW50U3R5bGUpe1xyXG5cdFx0c3RyQ3NzUnVsZSA9IHN0ckNzc1J1bGUucmVwbGFjZSgvXFwtKFxcdykvZywgZnVuY3Rpb24gKHN0ck1hdGNoLCBwMSl7XHJcblx0XHRcdHJldHVybiBwMS50b1VwcGVyQ2FzZSgpO1xyXG5cdFx0fSk7XHJcblx0XHRzdHJWYWx1ZSA9IG9FbG0uY3VycmVudFN0eWxlW3N0ckNzc1J1bGVdO1xyXG5cdH1cclxuXHRyZXR1cm4gc3RyVmFsdWU7XHJcbn1cclxuXHJcbiBmdW5jdGlvbiBvbkNyZWF0ZUVsZW1lbnROc1JlYWR5KGZ1bmMpIHtcclxuICBpZiAoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICE9IHVuZGVmaW5lZCkge1xyXG4gICAgZnVuYygpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBvbkNyZWF0ZUVsZW1lbnROc1JlYWR5KGZ1bmMpOyB9LCAxMDApO1xyXG4gIH1cclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBBIHNob3J0IHNuaXBwZXQgZm9yIGRldGVjdGluZyB2ZXJzaW9ucyBvZiBJRSBpbiBKYXZhU2NyaXB0XHJcbi8vIHdpdGhvdXQgcmVzb3J0aW5nIHRvIHVzZXItYWdlbnQgc25pZmZpbmdcclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyBJZiB5b3UncmUgbm90IGluIElFIChvciBJRSB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1KSB0aGVuOlxyXG4vLyBpZSA9PT0gdW5kZWZpbmVkXHJcbi8vIElmIHlvdSdyZSBpbiBJRSAoPj01KSB0aGVuIHlvdSBjYW4gZGV0ZXJtaW5lIHdoaWNoIHZlcnNpb246XHJcbi8vIGllID09PSA3OyAvLyBJRTdcclxuLy8gVGh1cywgdG8gZGV0ZWN0IElFOlxyXG4vLyBpZiAoaWUpIHt9XHJcbi8vIEFuZCB0byBkZXRlY3QgdGhlIHZlcnNpb246XHJcbi8vIGllID09PSA2IC8vIElFNlxyXG4vLyBpZSA+IDcgLy8gSUU4LCBJRTkgLi4uXHJcbi8vIGllIDwgOSAvLyBBbnl0aGluZyBsZXNzIHRoYW4gSUU5XHJcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbi8vIFVQREFURTogTm93IHVzaW5nIExpdmUgTm9kZUxpc3QgaWRlYSBmcm9tIEBqZGFsdG9uXHJcblxyXG52YXIgaWUgPSAoZnVuY3Rpb24oKXtcclxuXHJcbiAgICB2YXIgdW5kZWYsXHJcbiAgICAgICAgdiA9IDMsXHJcbiAgICAgICAgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JyksXHJcbiAgICAgICAgYWxsID0gZGl2LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpJyk7XHJcblxyXG4gICAgd2hpbGUgKFxyXG4gICAgICAgIGRpdi5pbm5lckhUTUwgPSAnPCEtLVtpZiBndCBJRSAnICsgKCsrdikgKyAnXT48aT48L2k+PCFbZW5kaWZdLS0+JyxcclxuICAgICAgICBhbGxbMF1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHYgPiA0ID8gdiA6IHVuZGVmO1xyXG5cclxufSgpKTsiLCIvLyEgbW9tZW50LmpzXG4vLyEgdmVyc2lvbiA6IDIuOC4xXG4vLyEgYXV0aG9ycyA6IFRpbSBXb29kLCBJc2tyZW4gQ2hlcm5ldiwgTW9tZW50LmpzIGNvbnRyaWJ1dG9yc1xuLy8hIGxpY2Vuc2UgOiBNSVRcbi8vISBtb21lbnRqcy5jb21cbihmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEsYixjKXtzd2l0Y2goYXJndW1lbnRzLmxlbmd0aCl7Y2FzZSAyOnJldHVybiBudWxsIT1hP2E6YjtjYXNlIDM6cmV0dXJuIG51bGwhPWE/YTpudWxsIT1iP2I6YztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkltcGxlbWVudCBtZVwiKX19ZnVuY3Rpb24gYygpe3JldHVybntlbXB0eTohMSx1bnVzZWRUb2tlbnM6W10sdW51c2VkSW5wdXQ6W10sb3ZlcmZsb3c6LTIsY2hhcnNMZWZ0T3ZlcjowLG51bGxJbnB1dDohMSxpbnZhbGlkTW9udGg6bnVsbCxpbnZhbGlkRm9ybWF0OiExLHVzZXJJbnZhbGlkYXRlZDohMSxpc286ITF9fWZ1bmN0aW9uIGQoYSl7cmIuc3VwcHJlc3NEZXByZWNhdGlvbldhcm5pbmdzPT09ITEmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBjb25zb2xlJiZjb25zb2xlLndhcm4mJmNvbnNvbGUud2FybihcIkRlcHJlY2F0aW9uIHdhcm5pbmc6IFwiK2EpfWZ1bmN0aW9uIGUoYSxiKXt2YXIgYz0hMDtyZXR1cm4gbChmdW5jdGlvbigpe3JldHVybiBjJiYoZChhKSxjPSExKSxiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYil9ZnVuY3Rpb24gZihhLGIpe25jW2FdfHwoZChiKSxuY1thXT0hMCl9ZnVuY3Rpb24gZyhhLGIpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gbyhhLmNhbGwodGhpcyxjKSxiKX19ZnVuY3Rpb24gaChhLGIpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkub3JkaW5hbChhLmNhbGwodGhpcyxjKSxiKX19ZnVuY3Rpb24gaSgpe31mdW5jdGlvbiBqKGEsYil7YiE9PSExJiZFKGEpLG0odGhpcyxhKSx0aGlzLl9kPW5ldyBEYXRlKCthLl9kKX1mdW5jdGlvbiBrKGEpe3ZhciBiPXgoYSksYz1iLnllYXJ8fDAsZD1iLnF1YXJ0ZXJ8fDAsZT1iLm1vbnRofHwwLGY9Yi53ZWVrfHwwLGc9Yi5kYXl8fDAsaD1iLmhvdXJ8fDAsaT1iLm1pbnV0ZXx8MCxqPWIuc2Vjb25kfHwwLGs9Yi5taWxsaXNlY29uZHx8MDt0aGlzLl9taWxsaXNlY29uZHM9K2srMWUzKmorNmU0KmkrMzZlNSpoLHRoaXMuX2RheXM9K2crNypmLHRoaXMuX21vbnRocz0rZSszKmQrMTIqYyx0aGlzLl9kYXRhPXt9LHRoaXMuX2xvY2FsZT1yYi5sb2NhbGVEYXRhKCksdGhpcy5fYnViYmxlKCl9ZnVuY3Rpb24gbChhLGIpe2Zvcih2YXIgYyBpbiBiKWIuaGFzT3duUHJvcGVydHkoYykmJihhW2NdPWJbY10pO3JldHVybiBiLmhhc093blByb3BlcnR5KFwidG9TdHJpbmdcIikmJihhLnRvU3RyaW5nPWIudG9TdHJpbmcpLGIuaGFzT3duUHJvcGVydHkoXCJ2YWx1ZU9mXCIpJiYoYS52YWx1ZU9mPWIudmFsdWVPZiksYX1mdW5jdGlvbiBtKGEsYil7dmFyIGMsZCxlO2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl9pc0FNb21lbnRPYmplY3QmJihhLl9pc0FNb21lbnRPYmplY3Q9Yi5faXNBTW9tZW50T2JqZWN0KSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5faSYmKGEuX2k9Yi5faSksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuX2YmJihhLl9mPWIuX2YpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl9sJiYoYS5fbD1iLl9sKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5fc3RyaWN0JiYoYS5fc3RyaWN0PWIuX3N0cmljdCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuX3R6bSYmKGEuX3R6bT1iLl90em0pLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl9pc1VUQyYmKGEuX2lzVVRDPWIuX2lzVVRDKSxcInVuZGVmaW5lZFwiIT10eXBlb2YgYi5fb2Zmc2V0JiYoYS5fb2Zmc2V0PWIuX29mZnNldCksXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuX3BmJiYoYS5fcGY9Yi5fcGYpLFwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLl9sb2NhbGUmJihhLl9sb2NhbGU9Yi5fbG9jYWxlKSxGYi5sZW5ndGg+MClmb3IoYyBpbiBGYilkPUZiW2NdLGU9YltkXSxcInVuZGVmaW5lZFwiIT10eXBlb2YgZSYmKGFbZF09ZSk7cmV0dXJuIGF9ZnVuY3Rpb24gbihhKXtyZXR1cm4gMD5hP01hdGguY2VpbChhKTpNYXRoLmZsb29yKGEpfWZ1bmN0aW9uIG8oYSxiLGMpe2Zvcih2YXIgZD1cIlwiK01hdGguYWJzKGEpLGU9YT49MDtkLmxlbmd0aDxiOylkPVwiMFwiK2Q7cmV0dXJuKGU/Yz9cIitcIjpcIlwiOlwiLVwiKStkfWZ1bmN0aW9uIHAoYSxiKXt2YXIgYz17bWlsbGlzZWNvbmRzOjAsbW9udGhzOjB9O3JldHVybiBjLm1vbnRocz1iLm1vbnRoKCktYS5tb250aCgpKzEyKihiLnllYXIoKS1hLnllYXIoKSksYS5jbG9uZSgpLmFkZChjLm1vbnRocyxcIk1cIikuaXNBZnRlcihiKSYmLS1jLm1vbnRocyxjLm1pbGxpc2Vjb25kcz0rYi0rYS5jbG9uZSgpLmFkZChjLm1vbnRocyxcIk1cIiksY31mdW5jdGlvbiBxKGEsYil7dmFyIGM7cmV0dXJuIGI9SihiLGEpLGEuaXNCZWZvcmUoYik/Yz1wKGEsYik6KGM9cChiLGEpLGMubWlsbGlzZWNvbmRzPS1jLm1pbGxpc2Vjb25kcyxjLm1vbnRocz0tYy5tb250aHMpLGN9ZnVuY3Rpb24gcihhLGIpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlLGc7cmV0dXJuIG51bGw9PT1kfHxpc05hTigrZCl8fChmKGIsXCJtb21lbnQoKS5cIitiK1wiKHBlcmlvZCwgbnVtYmVyKSBpcyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIG1vbWVudCgpLlwiK2IrXCIobnVtYmVyLCBwZXJpb2QpLlwiKSxnPWMsYz1kLGQ9ZyksYz1cInN0cmluZ1wiPT10eXBlb2YgYz8rYzpjLGU9cmIuZHVyYXRpb24oYyxkKSxzKHRoaXMsZSxhKSx0aGlzfX1mdW5jdGlvbiBzKGEsYixjLGQpe3ZhciBlPWIuX21pbGxpc2Vjb25kcyxmPWIuX2RheXMsZz1iLl9tb250aHM7ZD1udWxsPT1kPyEwOmQsZSYmYS5fZC5zZXRUaW1lKCthLl9kK2UqYyksZiYmbGIoYSxcIkRhdGVcIixrYihhLFwiRGF0ZVwiKStmKmMpLGcmJmpiKGEsa2IoYSxcIk1vbnRoXCIpK2cqYyksZCYmcmIudXBkYXRlT2Zmc2V0KGEsZnx8Zyl9ZnVuY3Rpb24gdChhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9ZnVuY3Rpb24gdShhKXtyZXR1cm5cIltvYmplY3QgRGF0ZV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKXx8YSBpbnN0YW5jZW9mIERhdGV9ZnVuY3Rpb24gdihhLGIsYyl7dmFyIGQsZT1NYXRoLm1pbihhLmxlbmd0aCxiLmxlbmd0aCksZj1NYXRoLmFicyhhLmxlbmd0aC1iLmxlbmd0aCksZz0wO2ZvcihkPTA7ZT5kO2QrKykoYyYmYVtkXSE9PWJbZF18fCFjJiZ6KGFbZF0pIT09eihiW2RdKSkmJmcrKztyZXR1cm4gZytmfWZ1bmN0aW9uIHcoYSl7aWYoYSl7dmFyIGI9YS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoLyguKXMkLyxcIiQxXCIpO2E9Z2NbYV18fGhjW2JdfHxifXJldHVybiBhfWZ1bmN0aW9uIHgoYSl7dmFyIGIsYyxkPXt9O2ZvcihjIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShjKSYmKGI9dyhjKSxiJiYoZFtiXT1hW2NdKSk7cmV0dXJuIGR9ZnVuY3Rpb24geShiKXt2YXIgYyxkO2lmKDA9PT1iLmluZGV4T2YoXCJ3ZWVrXCIpKWM9NyxkPVwiZGF5XCI7ZWxzZXtpZigwIT09Yi5pbmRleE9mKFwibW9udGhcIikpcmV0dXJuO2M9MTIsZD1cIm1vbnRoXCJ9cmJbYl09ZnVuY3Rpb24oZSxmKXt2YXIgZyxoLGk9cmIuX2xvY2FsZVtiXSxqPVtdO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlJiYoZj1lLGU9YSksaD1mdW5jdGlvbihhKXt2YXIgYj1yYigpLnV0YygpLnNldChkLGEpO3JldHVybiBpLmNhbGwocmIuX2xvY2FsZSxiLGV8fFwiXCIpfSxudWxsIT1mKXJldHVybiBoKGYpO2ZvcihnPTA7Yz5nO2crKylqLnB1c2goaChnKSk7cmV0dXJuIGp9fWZ1bmN0aW9uIHooYSl7dmFyIGI9K2EsYz0wO3JldHVybiAwIT09YiYmaXNGaW5pdGUoYikmJihjPWI+PTA/TWF0aC5mbG9vcihiKTpNYXRoLmNlaWwoYikpLGN9ZnVuY3Rpb24gQShhLGIpe3JldHVybiBuZXcgRGF0ZShEYXRlLlVUQyhhLGIrMSwwKSkuZ2V0VVRDRGF0ZSgpfWZ1bmN0aW9uIEIoYSxiLGMpe3JldHVybiBmYihyYihbYSwxMSwzMStiLWNdKSxiLGMpLndlZWt9ZnVuY3Rpb24gQyhhKXtyZXR1cm4gRChhKT8zNjY6MzY1fWZ1bmN0aW9uIEQoYSl7cmV0dXJuIGElND09PTAmJmElMTAwIT09MHx8YSU0MDA9PT0wfWZ1bmN0aW9uIEUoYSl7dmFyIGI7YS5fYSYmLTI9PT1hLl9wZi5vdmVyZmxvdyYmKGI9YS5fYVt5Yl08MHx8YS5fYVt5Yl0+MTE/eWI6YS5fYVt6Yl08MXx8YS5fYVt6Yl0+QShhLl9hW3hiXSxhLl9hW3liXSk/emI6YS5fYVtBYl08MHx8YS5fYVtBYl0+MjM/QWI6YS5fYVtCYl08MHx8YS5fYVtCYl0+NTk/QmI6YS5fYVtDYl08MHx8YS5fYVtDYl0+NTk/Q2I6YS5fYVtEYl08MHx8YS5fYVtEYl0+OTk5P0RiOi0xLGEuX3BmLl9vdmVyZmxvd0RheU9mWWVhciYmKHhiPmJ8fGI+emIpJiYoYj16YiksYS5fcGYub3ZlcmZsb3c9Yil9ZnVuY3Rpb24gRihhKXtyZXR1cm4gbnVsbD09YS5faXNWYWxpZCYmKGEuX2lzVmFsaWQ9IWlzTmFOKGEuX2QuZ2V0VGltZSgpKSYmYS5fcGYub3ZlcmZsb3c8MCYmIWEuX3BmLmVtcHR5JiYhYS5fcGYuaW52YWxpZE1vbnRoJiYhYS5fcGYubnVsbElucHV0JiYhYS5fcGYuaW52YWxpZEZvcm1hdCYmIWEuX3BmLnVzZXJJbnZhbGlkYXRlZCxhLl9zdHJpY3QmJihhLl9pc1ZhbGlkPWEuX2lzVmFsaWQmJjA9PT1hLl9wZi5jaGFyc0xlZnRPdmVyJiYwPT09YS5fcGYudW51c2VkVG9rZW5zLmxlbmd0aCkpLGEuX2lzVmFsaWR9ZnVuY3Rpb24gRyhhKXtyZXR1cm4gYT9hLnRvTG93ZXJDYXNlKCkucmVwbGFjZShcIl9cIixcIi1cIik6YX1mdW5jdGlvbiBIKGEpe2Zvcih2YXIgYixjLGQsZSxmPTA7ZjxhLmxlbmd0aDspe2ZvcihlPUcoYVtmXSkuc3BsaXQoXCItXCIpLGI9ZS5sZW5ndGgsYz1HKGFbZisxXSksYz1jP2Muc3BsaXQoXCItXCIpOm51bGw7Yj4wOyl7aWYoZD1JKGUuc2xpY2UoMCxiKS5qb2luKFwiLVwiKSkpcmV0dXJuIGQ7aWYoYyYmYy5sZW5ndGg+PWImJnYoZSxjLCEwKT49Yi0xKWJyZWFrO2ItLX1mKyt9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSShhKXt2YXIgYj1udWxsO2lmKCFFYlthXSYmR2IpdHJ5e2I9cmIubG9jYWxlKCkscmVxdWlyZShcIi4vbG9jYWxlL1wiK2EpLHJiLmxvY2FsZShiKX1jYXRjaChjKXt9cmV0dXJuIEViW2FdfWZ1bmN0aW9uIEooYSxiKXtyZXR1cm4gYi5faXNVVEM/cmIoYSkuem9uZShiLl9vZmZzZXR8fDApOnJiKGEpLmxvY2FsKCl9ZnVuY3Rpb24gSyhhKXtyZXR1cm4gYS5tYXRjaCgvXFxbW1xcc1xcU10vKT9hLnJlcGxhY2UoL15cXFt8XFxdJC9nLFwiXCIpOmEucmVwbGFjZSgvXFxcXC9nLFwiXCIpfWZ1bmN0aW9uIEwoYSl7dmFyIGIsYyxkPWEubWF0Y2goS2IpO2ZvcihiPTAsYz1kLmxlbmd0aDtjPmI7YisrKWRbYl09bWNbZFtiXV0/bWNbZFtiXV06SyhkW2JdKTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIGY9XCJcIjtmb3IoYj0wO2M+YjtiKyspZis9ZFtiXWluc3RhbmNlb2YgRnVuY3Rpb24/ZFtiXS5jYWxsKGUsYSk6ZFtiXTtyZXR1cm4gZn19ZnVuY3Rpb24gTShhLGIpe3JldHVybiBhLmlzVmFsaWQoKT8oYj1OKGIsYS5sb2NhbGVEYXRhKCkpLGljW2JdfHwoaWNbYl09TChiKSksaWNbYl0oYSkpOmEubG9jYWxlRGF0YSgpLmludmFsaWREYXRlKCl9ZnVuY3Rpb24gTihhLGIpe2Z1bmN0aW9uIGMoYSl7cmV0dXJuIGIubG9uZ0RhdGVGb3JtYXQoYSl8fGF9dmFyIGQ9NTtmb3IoTGIubGFzdEluZGV4PTA7ZD49MCYmTGIudGVzdChhKTspYT1hLnJlcGxhY2UoTGIsYyksTGIubGFzdEluZGV4PTAsZC09MTtyZXR1cm4gYX1mdW5jdGlvbiBPKGEsYil7dmFyIGMsZD1iLl9zdHJpY3Q7c3dpdGNoKGEpe2Nhc2VcIlFcIjpyZXR1cm4gV2I7Y2FzZVwiRERERFwiOnJldHVybiBZYjtjYXNlXCJZWVlZXCI6Y2FzZVwiR0dHR1wiOmNhc2VcImdnZ2dcIjpyZXR1cm4gZD9aYjpPYjtjYXNlXCJZXCI6Y2FzZVwiR1wiOmNhc2VcImdcIjpyZXR1cm4gX2I7Y2FzZVwiWVlZWVlZXCI6Y2FzZVwiWVlZWVlcIjpjYXNlXCJHR0dHR1wiOmNhc2VcImdnZ2dnXCI6cmV0dXJuIGQ/JGI6UGI7Y2FzZVwiU1wiOmlmKGQpcmV0dXJuIFdiO2Nhc2VcIlNTXCI6aWYoZClyZXR1cm4gWGI7Y2FzZVwiU1NTXCI6aWYoZClyZXR1cm4gWWI7Y2FzZVwiREREXCI6cmV0dXJuIE5iO2Nhc2VcIk1NTVwiOmNhc2VcIk1NTU1cIjpjYXNlXCJkZFwiOmNhc2VcImRkZFwiOmNhc2VcImRkZGRcIjpyZXR1cm4gUmI7Y2FzZVwiYVwiOmNhc2VcIkFcIjpyZXR1cm4gYi5fbG9jYWxlLl9tZXJpZGllbVBhcnNlO2Nhc2VcIlhcIjpyZXR1cm4gVWI7Y2FzZVwiWlwiOmNhc2VcIlpaXCI6cmV0dXJuIFNiO2Nhc2VcIlRcIjpyZXR1cm4gVGI7Y2FzZVwiU1NTU1wiOnJldHVybiBRYjtjYXNlXCJNTVwiOmNhc2VcIkREXCI6Y2FzZVwiWVlcIjpjYXNlXCJHR1wiOmNhc2VcImdnXCI6Y2FzZVwiSEhcIjpjYXNlXCJoaFwiOmNhc2VcIm1tXCI6Y2FzZVwic3NcIjpjYXNlXCJ3d1wiOmNhc2VcIldXXCI6cmV0dXJuIGQ/WGI6TWI7Y2FzZVwiTVwiOmNhc2VcIkRcIjpjYXNlXCJkXCI6Y2FzZVwiSFwiOmNhc2VcImhcIjpjYXNlXCJtXCI6Y2FzZVwic1wiOmNhc2VcIndcIjpjYXNlXCJXXCI6Y2FzZVwiZVwiOmNhc2VcIkVcIjpyZXR1cm4gTWI7Y2FzZVwiRG9cIjpyZXR1cm4gVmI7ZGVmYXVsdDpyZXR1cm4gYz1uZXcgUmVnRXhwKFgoVyhhLnJlcGxhY2UoXCJcXFxcXCIsXCJcIikpLFwiaVwiKSl9fWZ1bmN0aW9uIFAoYSl7YT1hfHxcIlwiO3ZhciBiPWEubWF0Y2goU2IpfHxbXSxjPWJbYi5sZW5ndGgtMV18fFtdLGQ9KGMrXCJcIikubWF0Y2goZWMpfHxbXCItXCIsMCwwXSxlPSsoNjAqZFsxXSkreihkWzJdKTtyZXR1cm5cIitcIj09PWRbMF0/LWU6ZX1mdW5jdGlvbiBRKGEsYixjKXt2YXIgZCxlPWMuX2E7c3dpdGNoKGEpe2Nhc2VcIlFcIjpudWxsIT1iJiYoZVt5Yl09MyooeihiKS0xKSk7YnJlYWs7Y2FzZVwiTVwiOmNhc2VcIk1NXCI6bnVsbCE9YiYmKGVbeWJdPXooYiktMSk7YnJlYWs7Y2FzZVwiTU1NXCI6Y2FzZVwiTU1NTVwiOmQ9Yy5fbG9jYWxlLm1vbnRoc1BhcnNlKGIpLG51bGwhPWQ/ZVt5Yl09ZDpjLl9wZi5pbnZhbGlkTW9udGg9YjticmVhaztjYXNlXCJEXCI6Y2FzZVwiRERcIjpudWxsIT1iJiYoZVt6Yl09eihiKSk7YnJlYWs7Y2FzZVwiRG9cIjpudWxsIT1iJiYoZVt6Yl09eihwYXJzZUludChiLDEwKSkpO2JyZWFrO2Nhc2VcIkRERFwiOmNhc2VcIkRERERcIjpudWxsIT1iJiYoYy5fZGF5T2ZZZWFyPXooYikpO2JyZWFrO2Nhc2VcIllZXCI6ZVt4Yl09cmIucGFyc2VUd29EaWdpdFllYXIoYik7YnJlYWs7Y2FzZVwiWVlZWVwiOmNhc2VcIllZWVlZXCI6Y2FzZVwiWVlZWVlZXCI6ZVt4Yl09eihiKTticmVhaztjYXNlXCJhXCI6Y2FzZVwiQVwiOmMuX2lzUG09Yy5fbG9jYWxlLmlzUE0oYik7YnJlYWs7Y2FzZVwiSFwiOmNhc2VcIkhIXCI6Y2FzZVwiaFwiOmNhc2VcImhoXCI6ZVtBYl09eihiKTticmVhaztjYXNlXCJtXCI6Y2FzZVwibW1cIjplW0JiXT16KGIpO2JyZWFrO2Nhc2VcInNcIjpjYXNlXCJzc1wiOmVbQ2JdPXooYik7YnJlYWs7Y2FzZVwiU1wiOmNhc2VcIlNTXCI6Y2FzZVwiU1NTXCI6Y2FzZVwiU1NTU1wiOmVbRGJdPXooMWUzKihcIjAuXCIrYikpO2JyZWFrO2Nhc2VcIlhcIjpjLl9kPW5ldyBEYXRlKDFlMypwYXJzZUZsb2F0KGIpKTticmVhaztjYXNlXCJaXCI6Y2FzZVwiWlpcIjpjLl91c2VVVEM9ITAsYy5fdHptPVAoYik7YnJlYWs7Y2FzZVwiZGRcIjpjYXNlXCJkZGRcIjpjYXNlXCJkZGRkXCI6ZD1jLl9sb2NhbGUud2Vla2RheXNQYXJzZShiKSxudWxsIT1kPyhjLl93PWMuX3d8fHt9LGMuX3cuZD1kKTpjLl9wZi5pbnZhbGlkV2Vla2RheT1iO2JyZWFrO2Nhc2VcIndcIjpjYXNlXCJ3d1wiOmNhc2VcIldcIjpjYXNlXCJXV1wiOmNhc2VcImRcIjpjYXNlXCJlXCI6Y2FzZVwiRVwiOmE9YS5zdWJzdHIoMCwxKTtjYXNlXCJnZ2dnXCI6Y2FzZVwiR0dHR1wiOmNhc2VcIkdHR0dHXCI6YT1hLnN1YnN0cigwLDIpLGImJihjLl93PWMuX3d8fHt9LGMuX3dbYV09eihiKSk7YnJlYWs7Y2FzZVwiZ2dcIjpjYXNlXCJHR1wiOmMuX3c9Yy5fd3x8e30sYy5fd1thXT1yYi5wYXJzZVR3b0RpZ2l0WWVhcihiKX19ZnVuY3Rpb24gUihhKXt2YXIgYyxkLGUsZixnLGgsaTtjPWEuX3csbnVsbCE9Yy5HR3x8bnVsbCE9Yy5XfHxudWxsIT1jLkU/KGc9MSxoPTQsZD1iKGMuR0csYS5fYVt4Yl0sZmIocmIoKSwxLDQpLnllYXIpLGU9YihjLlcsMSksZj1iKGMuRSwxKSk6KGc9YS5fbG9jYWxlLl93ZWVrLmRvdyxoPWEuX2xvY2FsZS5fd2Vlay5kb3ksZD1iKGMuZ2csYS5fYVt4Yl0sZmIocmIoKSxnLGgpLnllYXIpLGU9YihjLncsMSksbnVsbCE9Yy5kPyhmPWMuZCxnPmYmJisrZSk6Zj1udWxsIT1jLmU/Yy5lK2c6ZyksaT1nYihkLGUsZixoLGcpLGEuX2FbeGJdPWkueWVhcixhLl9kYXlPZlllYXI9aS5kYXlPZlllYXJ9ZnVuY3Rpb24gUyhhKXt2YXIgYyxkLGUsZixnPVtdO2lmKCFhLl9kKXtmb3IoZT1VKGEpLGEuX3cmJm51bGw9PWEuX2FbemJdJiZudWxsPT1hLl9hW3liXSYmUihhKSxhLl9kYXlPZlllYXImJihmPWIoYS5fYVt4Yl0sZVt4Yl0pLGEuX2RheU9mWWVhcj5DKGYpJiYoYS5fcGYuX292ZXJmbG93RGF5T2ZZZWFyPSEwKSxkPWJiKGYsMCxhLl9kYXlPZlllYXIpLGEuX2FbeWJdPWQuZ2V0VVRDTW9udGgoKSxhLl9hW3piXT1kLmdldFVUQ0RhdGUoKSksYz0wOzM+YyYmbnVsbD09YS5fYVtjXTsrK2MpYS5fYVtjXT1nW2NdPWVbY107Zm9yKDs3PmM7YysrKWEuX2FbY109Z1tjXT1udWxsPT1hLl9hW2NdPzI9PT1jPzE6MDphLl9hW2NdO2EuX2Q9KGEuX3VzZVVUQz9iYjphYikuYXBwbHkobnVsbCxnKSxudWxsIT1hLl90em0mJmEuX2Quc2V0VVRDTWludXRlcyhhLl9kLmdldFVUQ01pbnV0ZXMoKSthLl90em0pfX1mdW5jdGlvbiBUKGEpe3ZhciBiO2EuX2R8fChiPXgoYS5faSksYS5fYT1bYi55ZWFyLGIubW9udGgsYi5kYXksYi5ob3VyLGIubWludXRlLGIuc2Vjb25kLGIubWlsbGlzZWNvbmRdLFMoYSkpfWZ1bmN0aW9uIFUoYSl7dmFyIGI9bmV3IERhdGU7cmV0dXJuIGEuX3VzZVVUQz9bYi5nZXRVVENGdWxsWWVhcigpLGIuZ2V0VVRDTW9udGgoKSxiLmdldFVUQ0RhdGUoKV06W2IuZ2V0RnVsbFllYXIoKSxiLmdldE1vbnRoKCksYi5nZXREYXRlKCldfWZ1bmN0aW9uIFYoYSl7aWYoYS5fZj09PXJiLklTT184NjAxKXJldHVybiB2b2lkIFooYSk7YS5fYT1bXSxhLl9wZi5lbXB0eT0hMDt2YXIgYixjLGQsZSxmLGc9XCJcIithLl9pLGg9Zy5sZW5ndGgsaT0wO2ZvcihkPU4oYS5fZixhLl9sb2NhbGUpLm1hdGNoKEtiKXx8W10sYj0wO2I8ZC5sZW5ndGg7YisrKWU9ZFtiXSxjPShnLm1hdGNoKE8oZSxhKSl8fFtdKVswXSxjJiYoZj1nLnN1YnN0cigwLGcuaW5kZXhPZihjKSksZi5sZW5ndGg+MCYmYS5fcGYudW51c2VkSW5wdXQucHVzaChmKSxnPWcuc2xpY2UoZy5pbmRleE9mKGMpK2MubGVuZ3RoKSxpKz1jLmxlbmd0aCksbWNbZV0/KGM/YS5fcGYuZW1wdHk9ITE6YS5fcGYudW51c2VkVG9rZW5zLnB1c2goZSksUShlLGMsYSkpOmEuX3N0cmljdCYmIWMmJmEuX3BmLnVudXNlZFRva2Vucy5wdXNoKGUpO2EuX3BmLmNoYXJzTGVmdE92ZXI9aC1pLGcubGVuZ3RoPjAmJmEuX3BmLnVudXNlZElucHV0LnB1c2goZyksYS5faXNQbSYmYS5fYVtBYl08MTImJihhLl9hW0FiXSs9MTIpLGEuX2lzUG09PT0hMSYmMTI9PT1hLl9hW0FiXSYmKGEuX2FbQWJdPTApLFMoYSksRShhKX1mdW5jdGlvbiBXKGEpe3JldHVybiBhLnJlcGxhY2UoL1xcXFwoXFxbKXxcXFxcKFxcXSl8XFxbKFteXFxdXFxbXSopXFxdfFxcXFwoLikvZyxmdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBifHxjfHxkfHxlfSl9ZnVuY3Rpb24gWChhKXtyZXR1cm4gYS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csXCJcXFxcJCZcIil9ZnVuY3Rpb24gWShhKXt2YXIgYixkLGUsZixnO2lmKDA9PT1hLl9mLmxlbmd0aClyZXR1cm4gYS5fcGYuaW52YWxpZEZvcm1hdD0hMCx2b2lkKGEuX2Q9bmV3IERhdGUoMC8wKSk7Zm9yKGY9MDtmPGEuX2YubGVuZ3RoO2YrKylnPTAsYj1tKHt9LGEpLGIuX3BmPWMoKSxiLl9mPWEuX2ZbZl0sVihiKSxGKGIpJiYoZys9Yi5fcGYuY2hhcnNMZWZ0T3ZlcixnKz0xMCpiLl9wZi51bnVzZWRUb2tlbnMubGVuZ3RoLGIuX3BmLnNjb3JlPWcsKG51bGw9PWV8fGU+ZykmJihlPWcsZD1iKSk7bChhLGR8fGIpfWZ1bmN0aW9uIFooYSl7dmFyIGIsYyxkPWEuX2ksZT1hYy5leGVjKGQpO2lmKGUpe2ZvcihhLl9wZi5pc289ITAsYj0wLGM9Y2MubGVuZ3RoO2M+YjtiKyspaWYoY2NbYl1bMV0uZXhlYyhkKSl7YS5fZj1jY1tiXVswXSsoZVs2XXx8XCIgXCIpO2JyZWFrfWZvcihiPTAsYz1kYy5sZW5ndGg7Yz5iO2IrKylpZihkY1tiXVsxXS5leGVjKGQpKXthLl9mKz1kY1tiXVswXTticmVha31kLm1hdGNoKFNiKSYmKGEuX2YrPVwiWlwiKSxWKGEpfWVsc2UgYS5faXNWYWxpZD0hMX1mdW5jdGlvbiAkKGEpe1ooYSksYS5faXNWYWxpZD09PSExJiYoZGVsZXRlIGEuX2lzVmFsaWQscmIuY3JlYXRlRnJvbUlucHV0RmFsbGJhY2soYSkpfWZ1bmN0aW9uIF8oYil7dmFyIGMsZD1iLl9pO2Q9PT1hP2IuX2Q9bmV3IERhdGU6dShkKT9iLl9kPW5ldyBEYXRlKCtkKTpudWxsIT09KGM9SGIuZXhlYyhkKSk/Yi5fZD1uZXcgRGF0ZSgrY1sxXSk6XCJzdHJpbmdcIj09dHlwZW9mIGQ/JChiKTp0KGQpPyhiLl9hPWQuc2xpY2UoMCksUyhiKSk6XCJvYmplY3RcIj09dHlwZW9mIGQ/VChiKTpcIm51bWJlclwiPT10eXBlb2YgZD9iLl9kPW5ldyBEYXRlKGQpOnJiLmNyZWF0ZUZyb21JbnB1dEZhbGxiYWNrKGIpfWZ1bmN0aW9uIGFiKGEsYixjLGQsZSxmLGcpe3ZhciBoPW5ldyBEYXRlKGEsYixjLGQsZSxmLGcpO3JldHVybiAxOTcwPmEmJmguc2V0RnVsbFllYXIoYSksaH1mdW5jdGlvbiBiYihhKXt2YXIgYj1uZXcgRGF0ZShEYXRlLlVUQy5hcHBseShudWxsLGFyZ3VtZW50cykpO3JldHVybiAxOTcwPmEmJmIuc2V0VVRDRnVsbFllYXIoYSksYn1mdW5jdGlvbiBjYihhLGIpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKWlmKGlzTmFOKGEpKXtpZihhPWIud2Vla2RheXNQYXJzZShhKSxcIm51bWJlclwiIT10eXBlb2YgYSlyZXR1cm4gbnVsbH1lbHNlIGE9cGFyc2VJbnQoYSwxMCk7cmV0dXJuIGF9ZnVuY3Rpb24gZGIoYSxiLGMsZCxlKXtyZXR1cm4gZS5yZWxhdGl2ZVRpbWUoYnx8MSwhIWMsYSxkKX1mdW5jdGlvbiBlYihhLGIsYyl7dmFyIGQ9cmIuZHVyYXRpb24oYSkuYWJzKCksZT13YihkLmFzKFwic1wiKSksZj13YihkLmFzKFwibVwiKSksZz13YihkLmFzKFwiaFwiKSksaD13YihkLmFzKFwiZFwiKSksaT13YihkLmFzKFwiTVwiKSksaj13YihkLmFzKFwieVwiKSksaz1lPGpjLnMmJltcInNcIixlXXx8MT09PWYmJltcIm1cIl18fGY8amMubSYmW1wibW1cIixmXXx8MT09PWcmJltcImhcIl18fGc8amMuaCYmW1wiaGhcIixnXXx8MT09PWgmJltcImRcIl18fGg8amMuZCYmW1wiZGRcIixoXXx8MT09PWkmJltcIk1cIl18fGk8amMuTSYmW1wiTU1cIixpXXx8MT09PWomJltcInlcIl18fFtcInl5XCIsal07cmV0dXJuIGtbMl09YixrWzNdPSthPjAsa1s0XT1jLGRiLmFwcGx5KHt9LGspfWZ1bmN0aW9uIGZiKGEsYixjKXt2YXIgZCxlPWMtYixmPWMtYS5kYXkoKTtyZXR1cm4gZj5lJiYoZi09NyksZS03PmYmJihmKz03KSxkPXJiKGEpLmFkZChmLFwiZFwiKSx7d2VlazpNYXRoLmNlaWwoZC5kYXlPZlllYXIoKS83KSx5ZWFyOmQueWVhcigpfX1mdW5jdGlvbiBnYihhLGIsYyxkLGUpe3ZhciBmLGcsaD1iYihhLDAsMSkuZ2V0VVRDRGF5KCk7cmV0dXJuIGg9MD09PWg/NzpoLGM9bnVsbCE9Yz9jOmUsZj1lLWgrKGg+ZD83OjApLShlPmg/NzowKSxnPTcqKGItMSkrKGMtZSkrZisxLHt5ZWFyOmc+MD9hOmEtMSxkYXlPZlllYXI6Zz4wP2c6QyhhLTEpK2d9fWZ1bmN0aW9uIGhiKGIpe3ZhciBjPWIuX2ksZD1iLl9mO3JldHVybiBiLl9sb2NhbGU9Yi5fbG9jYWxlfHxyYi5sb2NhbGVEYXRhKGIuX2wpLG51bGw9PT1jfHxkPT09YSYmXCJcIj09PWM/cmIuaW52YWxpZCh7bnVsbElucHV0OiEwfSk6KFwic3RyaW5nXCI9PXR5cGVvZiBjJiYoYi5faT1jPWIuX2xvY2FsZS5wcmVwYXJzZShjKSkscmIuaXNNb21lbnQoYyk/bmV3IGooYywhMCk6KGQ/dChkKT9ZKGIpOlYoYik6XyhiKSxuZXcgaihiKSkpfWZ1bmN0aW9uIGliKGEsYil7dmFyIGMsZDtpZigxPT09Yi5sZW5ndGgmJnQoYlswXSkmJihiPWJbMF0pLCFiLmxlbmd0aClyZXR1cm4gcmIoKTtmb3IoYz1iWzBdLGQ9MTtkPGIubGVuZ3RoOysrZCliW2RdW2FdKGMpJiYoYz1iW2RdKTtyZXR1cm4gY31mdW5jdGlvbiBqYihhLGIpe3ZhciBjO3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBiJiYoYj1hLmxvY2FsZURhdGEoKS5tb250aHNQYXJzZShiKSxcIm51bWJlclwiIT10eXBlb2YgYik/YTooYz1NYXRoLm1pbihhLmRhdGUoKSxBKGEueWVhcigpLGIpKSxhLl9kW1wic2V0XCIrKGEuX2lzVVRDP1wiVVRDXCI6XCJcIikrXCJNb250aFwiXShiLGMpLGEpfWZ1bmN0aW9uIGtiKGEsYil7cmV0dXJuIGEuX2RbXCJnZXRcIisoYS5faXNVVEM/XCJVVENcIjpcIlwiKStiXSgpfWZ1bmN0aW9uIGxiKGEsYixjKXtyZXR1cm5cIk1vbnRoXCI9PT1iP2piKGEsYyk6YS5fZFtcInNldFwiKyhhLl9pc1VUQz9cIlVUQ1wiOlwiXCIpK2JdKGMpfWZ1bmN0aW9uIG1iKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMpe3JldHVybiBudWxsIT1jPyhsYih0aGlzLGEsYykscmIudXBkYXRlT2Zmc2V0KHRoaXMsYiksdGhpcyk6a2IodGhpcyxhKX19ZnVuY3Rpb24gbmIoYSl7cmV0dXJuIDQwMCphLzE0NjA5N31mdW5jdGlvbiBvYihhKXtyZXR1cm4gMTQ2MDk3KmEvNDAwfWZ1bmN0aW9uIHBiKGEpe3JiLmR1cmF0aW9uLmZuW2FdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFbYV19fWZ1bmN0aW9uIHFiKGEpe1widW5kZWZpbmVkXCI9PXR5cGVvZiBlbmRlciYmKHNiPXZiLm1vbWVudCx2Yi5tb21lbnQ9YT9lKFwiQWNjZXNzaW5nIE1vbWVudCB0aHJvdWdoIHRoZSBnbG9iYWwgc2NvcGUgaXMgZGVwcmVjYXRlZCwgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiBhbiB1cGNvbWluZyByZWxlYXNlLlwiLHJiKTpyYil9Zm9yKHZhciByYixzYix0Yix1Yj1cIjIuOC4xXCIsdmI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbD9nbG9iYWw6dGhpcyx3Yj1NYXRoLnJvdW5kLHhiPTAseWI9MSx6Yj0yLEFiPTMsQmI9NCxDYj01LERiPTYsRWI9e30sRmI9W10sR2I9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMsSGI9L15cXC8/RGF0ZVxcKChcXC0/XFxkKykvaSxJYj0vKFxcLSk/KD86KFxcZCopXFwuKT8oXFxkKylcXDooXFxkKykoPzpcXDooXFxkKylcXC4/KFxcZHszfSk/KT8vLEpiPS9eKC0pP1AoPzooPzooWzAtOSwuXSopWSk/KD86KFswLTksLl0qKU0pPyg/OihbMC05LC5dKilEKT8oPzpUKD86KFswLTksLl0qKUgpPyg/OihbMC05LC5dKilNKT8oPzooWzAtOSwuXSopUyk/KT98KFswLTksLl0qKVcpJC8sS2I9LyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KE1vfE1NP00/TT98RG98REREb3xERD9EP0Q/fGRkZD9kP3xkbz98d1tvfHddP3xXW298V10/fFF8WVlZWVlZfFlZWVlZfFlZWVl8WVl8Z2coZ2dnPyk/fEdHKEdHRz8pP3xlfEV8YXxBfGhoP3xISD98bW0/fHNzP3xTezEsNH18WHx6ej98Wlo/fC4pL2csTGI9LyhcXFtbXlxcW10qXFxdKXwoXFxcXCk/KExUfExMP0w/TD98bHsxLDR9KS9nLE1iPS9cXGRcXGQ/LyxOYj0vXFxkezEsM30vLE9iPS9cXGR7MSw0fS8sUGI9L1srXFwtXT9cXGR7MSw2fS8sUWI9L1xcZCsvLFJiPS9bMC05XSpbJ2EtelxcdTAwQTAtXFx1MDVGRlxcdTA3MDAtXFx1RDdGRlxcdUY5MDAtXFx1RkRDRlxcdUZERjAtXFx1RkZFRl0rfFtcXHUwNjAwLVxcdTA2RkZcXC9dKyhcXHMqP1tcXHUwNjAwLVxcdTA2RkZdKyl7MSwyfS9pLFNiPS9afFtcXCtcXC1dXFxkXFxkOj9cXGRcXGQvZ2ksVGI9L1QvaSxVYj0vW1xcK1xcLV0/XFxkKyhcXC5cXGR7MSwzfSk/LyxWYj0vXFxkezEsMn0vLFdiPS9cXGQvLFhiPS9cXGRcXGQvLFliPS9cXGR7M30vLFpiPS9cXGR7NH0vLCRiPS9bKy1dP1xcZHs2fS8sX2I9L1srLV0/XFxkKy8sYWM9L15cXHMqKD86WystXVxcZHs2fXxcXGR7NH0pLSg/OihcXGRcXGQtXFxkXFxkKXwoV1xcZFxcZCQpfChXXFxkXFxkLVxcZCl8KFxcZFxcZFxcZCkpKChUfCApKFxcZFxcZCg6XFxkXFxkKDpcXGRcXGQoXFwuXFxkKyk/KT8pPyk/KFtcXCtcXC1dXFxkXFxkKD86Oj9cXGRcXGQpP3xcXHMqWik/KT8kLyxiYz1cIllZWVktTU0tRERUSEg6bW06c3NaXCIsY2M9W1tcIllZWVlZWS1NTS1ERFwiLC9bKy1dXFxkezZ9LVxcZHsyfS1cXGR7Mn0vXSxbXCJZWVlZLU1NLUREXCIsL1xcZHs0fS1cXGR7Mn0tXFxkezJ9L10sW1wiR0dHRy1bV11XVy1FXCIsL1xcZHs0fS1XXFxkezJ9LVxcZC9dLFtcIkdHR0ctW1ddV1dcIiwvXFxkezR9LVdcXGR7Mn0vXSxbXCJZWVlZLURERFwiLC9cXGR7NH0tXFxkezN9L11dLGRjPVtbXCJISDptbTpzcy5TU1NTXCIsLyhUfCApXFxkXFxkOlxcZFxcZDpcXGRcXGRcXC5cXGQrL10sW1wiSEg6bW06c3NcIiwvKFR8IClcXGRcXGQ6XFxkXFxkOlxcZFxcZC9dLFtcIkhIOm1tXCIsLyhUfCApXFxkXFxkOlxcZFxcZC9dLFtcIkhIXCIsLyhUfCApXFxkXFxkL11dLGVjPS8oW1xcK1xcLV18XFxkXFxkKS9naSxmYz0oXCJEYXRlfEhvdXJzfE1pbnV0ZXN8U2Vjb25kc3xNaWxsaXNlY29uZHNcIi5zcGxpdChcInxcIikse01pbGxpc2Vjb25kczoxLFNlY29uZHM6MWUzLE1pbnV0ZXM6NmU0LEhvdXJzOjM2ZTUsRGF5czo4NjRlNSxNb250aHM6MjU5MmU2LFllYXJzOjMxNTM2ZTZ9KSxnYz17bXM6XCJtaWxsaXNlY29uZFwiLHM6XCJzZWNvbmRcIixtOlwibWludXRlXCIsaDpcImhvdXJcIixkOlwiZGF5XCIsRDpcImRhdGVcIix3Olwid2Vla1wiLFc6XCJpc29XZWVrXCIsTTpcIm1vbnRoXCIsUTpcInF1YXJ0ZXJcIix5OlwieWVhclwiLERERDpcImRheU9mWWVhclwiLGU6XCJ3ZWVrZGF5XCIsRTpcImlzb1dlZWtkYXlcIixnZzpcIndlZWtZZWFyXCIsR0c6XCJpc29XZWVrWWVhclwifSxoYz17ZGF5b2Z5ZWFyOlwiZGF5T2ZZZWFyXCIsaXNvd2Vla2RheTpcImlzb1dlZWtkYXlcIixpc293ZWVrOlwiaXNvV2Vla1wiLHdlZWt5ZWFyOlwid2Vla1llYXJcIixpc293ZWVreWVhcjpcImlzb1dlZWtZZWFyXCJ9LGljPXt9LGpjPXtzOjQ1LG06NDUsaDoyMixkOjI2LE06MTF9LGtjPVwiREREIHcgVyBNIEQgZFwiLnNwbGl0KFwiIFwiKSxsYz1cIk0gRCBIIGggbSBzIHcgV1wiLnNwbGl0KFwiIFwiKSxtYz17TTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1vbnRoKCkrMX0sTU1NOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHNTaG9ydCh0aGlzLGEpfSxNTU1NOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tb250aHModGhpcyxhKX0sRDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGUoKX0sREREOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGF5T2ZZZWFyKCl9LGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXkoKX0sZGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLndlZWtkYXlzTWluKHRoaXMsYSl9LGRkZDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkud2Vla2RheXNTaG9ydCh0aGlzLGEpfSxkZGRkOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS53ZWVrZGF5cyh0aGlzLGEpfSx3OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2VlaygpfSxXOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaXNvV2VlaygpfSxZWTpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMueWVhcigpJTEwMCwyKX0sWVlZWTpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMueWVhcigpLDQpfSxZWVlZWTpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMueWVhcigpLDUpfSxZWVlZWVk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnllYXIoKSxiPWE+PTA/XCIrXCI6XCItXCI7cmV0dXJuIGIrbyhNYXRoLmFicyhhKSw2KX0sZ2c6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLndlZWtZZWFyKCklMTAwLDIpfSxnZ2dnOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy53ZWVrWWVhcigpLDQpfSxnZ2dnZzpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMud2Vla1llYXIoKSw1KX0sR0c6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLmlzb1dlZWtZZWFyKCklMTAwLDIpfSxHR0dHOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy5pc29XZWVrWWVhcigpLDQpfSxHR0dHRzpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMuaXNvV2Vla1llYXIoKSw1KX0sZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLndlZWtkYXkoKX0sRTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmlzb1dlZWtkYXkoKX0sYTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmxvY2FsZURhdGEoKS5tZXJpZGllbSh0aGlzLmhvdXJzKCksdGhpcy5taW51dGVzKCksITApfSxBOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubG9jYWxlRGF0YSgpLm1lcmlkaWVtKHRoaXMuaG91cnMoKSx0aGlzLm1pbnV0ZXMoKSwhMSl9LEg6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ob3VycygpfSxoOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaG91cnMoKSUxMnx8MTJ9LG06ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5taW51dGVzKCl9LHM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zZWNvbmRzKCl9LFM6ZnVuY3Rpb24oKXtyZXR1cm4geih0aGlzLm1pbGxpc2Vjb25kcygpLzEwMCl9LFNTOmZ1bmN0aW9uKCl7cmV0dXJuIG8oeih0aGlzLm1pbGxpc2Vjb25kcygpLzEwKSwyKX0sU1NTOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcy5taWxsaXNlY29uZHMoKSwzKX0sU1NTUzpmdW5jdGlvbigpe3JldHVybiBvKHRoaXMubWlsbGlzZWNvbmRzKCksMyl9LFo6ZnVuY3Rpb24oKXt2YXIgYT0tdGhpcy56b25lKCksYj1cIitcIjtyZXR1cm4gMD5hJiYoYT0tYSxiPVwiLVwiKSxiK28oeihhLzYwKSwyKStcIjpcIitvKHooYSklNjAsMil9LFpaOmZ1bmN0aW9uKCl7dmFyIGE9LXRoaXMuem9uZSgpLGI9XCIrXCI7cmV0dXJuIDA+YSYmKGE9LWEsYj1cIi1cIiksYitvKHooYS82MCksMikrbyh6KGEpJTYwLDIpfSx6OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuem9uZUFiYnIoKX0seno6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b25lTmFtZSgpfSxYOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudW5peCgpfSxROmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucXVhcnRlcigpfX0sbmM9e30sb2M9W1wibW9udGhzXCIsXCJtb250aHNTaG9ydFwiLFwid2Vla2RheXNcIixcIndlZWtkYXlzU2hvcnRcIixcIndlZWtkYXlzTWluXCJdO2tjLmxlbmd0aDspdGI9a2MucG9wKCksbWNbdGIrXCJvXCJdPWgobWNbdGJdLHRiKTtmb3IoO2xjLmxlbmd0aDspdGI9bGMucG9wKCksbWNbdGIrdGJdPWcobWNbdGJdLDIpO21jLkREREQ9ZyhtYy5EREQsMyksbChpLnByb3RvdHlwZSx7c2V0OmZ1bmN0aW9uKGEpe3ZhciBiLGM7Zm9yKGMgaW4gYSliPWFbY10sXCJmdW5jdGlvblwiPT10eXBlb2YgYj90aGlzW2NdPWI6dGhpc1tcIl9cIitjXT1ifSxfbW9udGhzOlwiSmFudWFyeV9GZWJydWFyeV9NYXJjaF9BcHJpbF9NYXlfSnVuZV9KdWx5X0F1Z3VzdF9TZXB0ZW1iZXJfT2N0b2Jlcl9Ob3ZlbWJlcl9EZWNlbWJlclwiLnNwbGl0KFwiX1wiKSxtb250aHM6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX21vbnRoc1thLm1vbnRoKCldfSxfbW9udGhzU2hvcnQ6XCJKYW5fRmViX01hcl9BcHJfTWF5X0p1bl9KdWxfQXVnX1NlcF9PY3RfTm92X0RlY1wiLnNwbGl0KFwiX1wiKSxtb250aHNTaG9ydDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fbW9udGhzU2hvcnRbYS5tb250aCgpXX0sbW9udGhzUGFyc2U6ZnVuY3Rpb24oYSl7dmFyIGIsYyxkO2Zvcih0aGlzLl9tb250aHNQYXJzZXx8KHRoaXMuX21vbnRoc1BhcnNlPVtdKSxiPTA7MTI+YjtiKyspaWYodGhpcy5fbW9udGhzUGFyc2VbYl18fChjPXJiLnV0YyhbMmUzLGJdKSxkPVwiXlwiK3RoaXMubW9udGhzKGMsXCJcIikrXCJ8XlwiK3RoaXMubW9udGhzU2hvcnQoYyxcIlwiKSx0aGlzLl9tb250aHNQYXJzZVtiXT1uZXcgUmVnRXhwKGQucmVwbGFjZShcIi5cIixcIlwiKSxcImlcIikpLHRoaXMuX21vbnRoc1BhcnNlW2JdLnRlc3QoYSkpcmV0dXJuIGJ9LF93ZWVrZGF5czpcIlN1bmRheV9Nb25kYXlfVHVlc2RheV9XZWRuZXNkYXlfVGh1cnNkYXlfRnJpZGF5X1NhdHVyZGF5XCIuc3BsaXQoXCJfXCIpLHdlZWtkYXlzOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLl93ZWVrZGF5c1thLmRheSgpXX0sX3dlZWtkYXlzU2hvcnQ6XCJTdW5fTW9uX1R1ZV9XZWRfVGh1X0ZyaV9TYXRcIi5zcGxpdChcIl9cIiksd2Vla2RheXNTaG9ydDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fd2Vla2RheXNTaG9ydFthLmRheSgpXX0sX3dlZWtkYXlzTWluOlwiU3VfTW9fVHVfV2VfVGhfRnJfU2FcIi5zcGxpdChcIl9cIiksd2Vla2RheXNNaW46ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3dlZWtkYXlzTWluW2EuZGF5KCldfSx3ZWVrZGF5c1BhcnNlOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZDtmb3IodGhpcy5fd2Vla2RheXNQYXJzZXx8KHRoaXMuX3dlZWtkYXlzUGFyc2U9W10pLGI9MDs3PmI7YisrKWlmKHRoaXMuX3dlZWtkYXlzUGFyc2VbYl18fChjPXJiKFsyZTMsMV0pLmRheShiKSxkPVwiXlwiK3RoaXMud2Vla2RheXMoYyxcIlwiKStcInxeXCIrdGhpcy53ZWVrZGF5c1Nob3J0KGMsXCJcIikrXCJ8XlwiK3RoaXMud2Vla2RheXNNaW4oYyxcIlwiKSx0aGlzLl93ZWVrZGF5c1BhcnNlW2JdPW5ldyBSZWdFeHAoZC5yZXBsYWNlKFwiLlwiLFwiXCIpLFwiaVwiKSksdGhpcy5fd2Vla2RheXNQYXJzZVtiXS50ZXN0KGEpKXJldHVybiBifSxfbG9uZ0RhdGVGb3JtYXQ6e0xUOlwiaDptbSBBXCIsTDpcIk1NL0REL1lZWVlcIixMTDpcIk1NTU0gRCwgWVlZWVwiLExMTDpcIk1NTU0gRCwgWVlZWSBMVFwiLExMTEw6XCJkZGRkLCBNTU1NIEQsIFlZWVkgTFRcIn0sbG9uZ0RhdGVGb3JtYXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fbG9uZ0RhdGVGb3JtYXRbYV07cmV0dXJuIWImJnRoaXMuX2xvbmdEYXRlRm9ybWF0W2EudG9VcHBlckNhc2UoKV0mJihiPXRoaXMuX2xvbmdEYXRlRm9ybWF0W2EudG9VcHBlckNhc2UoKV0ucmVwbGFjZSgvTU1NTXxNTXxERHxkZGRkL2csZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2xpY2UoMSl9KSx0aGlzLl9sb25nRGF0ZUZvcm1hdFthXT1iKSxifSxpc1BNOmZ1bmN0aW9uKGEpe3JldHVyblwicFwiPT09KGErXCJcIikudG9Mb3dlckNhc2UoKS5jaGFyQXQoMCl9LF9tZXJpZGllbVBhcnNlOi9bYXBdXFwuP20/XFwuPy9pLG1lcmlkaWVtOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYT4xMT9jP1wicG1cIjpcIlBNXCI6Yz9cImFtXCI6XCJBTVwifSxfY2FsZW5kYXI6e3NhbWVEYXk6XCJbVG9kYXkgYXRdIExUXCIsbmV4dERheTpcIltUb21vcnJvdyBhdF0gTFRcIixuZXh0V2VlazpcImRkZGQgW2F0XSBMVFwiLGxhc3REYXk6XCJbWWVzdGVyZGF5IGF0XSBMVFwiLGxhc3RXZWVrOlwiW0xhc3RdIGRkZGQgW2F0XSBMVFwiLHNhbWVFbHNlOlwiTFwifSxjYWxlbmRhcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuX2NhbGVuZGFyW2FdO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGM/Yy5hcHBseShiKTpjfSxfcmVsYXRpdmVUaW1lOntmdXR1cmU6XCJpbiAlc1wiLHBhc3Q6XCIlcyBhZ29cIixzOlwiYSBmZXcgc2Vjb25kc1wiLG06XCJhIG1pbnV0ZVwiLG1tOlwiJWQgbWludXRlc1wiLGg6XCJhbiBob3VyXCIsaGg6XCIlZCBob3Vyc1wiLGQ6XCJhIGRheVwiLGRkOlwiJWQgZGF5c1wiLE06XCJhIG1vbnRoXCIsTU06XCIlZCBtb250aHNcIix5OlwiYSB5ZWFyXCIseXk6XCIlZCB5ZWFyc1wifSxyZWxhdGl2ZVRpbWU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5fcmVsYXRpdmVUaW1lW2NdO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZShhLGIsYyxkKTplLnJlcGxhY2UoLyVkL2ksYSl9LHBhc3RGdXR1cmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9yZWxhdGl2ZVRpbWVbYT4wP1wiZnV0dXJlXCI6XCJwYXN0XCJdO3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGM/YyhiKTpjLnJlcGxhY2UoLyVzL2ksYil9LG9yZGluYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX29yZGluYWwucmVwbGFjZShcIiVkXCIsYSl9LF9vcmRpbmFsOlwiJWRcIixwcmVwYXJzZTpmdW5jdGlvbihhKXtyZXR1cm4gYX0scG9zdGZvcm1hdDpmdW5jdGlvbihhKXtyZXR1cm4gYX0sd2VlazpmdW5jdGlvbihhKXtyZXR1cm4gZmIoYSx0aGlzLl93ZWVrLmRvdyx0aGlzLl93ZWVrLmRveSkud2Vla30sX3dlZWs6e2RvdzowLGRveTo2fSxfaW52YWxpZERhdGU6XCJJbnZhbGlkIGRhdGVcIixpbnZhbGlkRGF0ZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnZhbGlkRGF0ZX19KSxyYj1mdW5jdGlvbihiLGQsZSxmKXt2YXIgZztyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGUmJihmPWUsZT1hKSxnPXt9LGcuX2lzQU1vbWVudE9iamVjdD0hMCxnLl9pPWIsZy5fZj1kLGcuX2w9ZSxnLl9zdHJpY3Q9ZixnLl9pc1VUQz0hMSxnLl9wZj1jKCksaGIoZyl9LHJiLnN1cHByZXNzRGVwcmVjYXRpb25XYXJuaW5ncz0hMSxyYi5jcmVhdGVGcm9tSW5wdXRGYWxsYmFjaz1lKFwibW9tZW50IGNvbnN0cnVjdGlvbiBmYWxscyBiYWNrIHRvIGpzIERhdGUuIFRoaXMgaXMgZGlzY291cmFnZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGNvbWluZyBtYWpvciByZWxlYXNlLiBQbGVhc2UgcmVmZXIgdG8gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE0MDcgZm9yIG1vcmUgaW5mby5cIixmdW5jdGlvbihhKXthLl9kPW5ldyBEYXRlKGEuX2kpfSkscmIubWluPWZ1bmN0aW9uKCl7dmFyIGE9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIGliKFwiaXNCZWZvcmVcIixhKX0scmIubWF4PWZ1bmN0aW9uKCl7dmFyIGE9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMCk7cmV0dXJuIGliKFwiaXNBZnRlclwiLGEpfSxyYi51dGM9ZnVuY3Rpb24oYixkLGUsZil7dmFyIGc7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlJiYoZj1lLGU9YSksZz17fSxnLl9pc0FNb21lbnRPYmplY3Q9ITAsZy5fdXNlVVRDPSEwLGcuX2lzVVRDPSEwLGcuX2w9ZSxnLl9pPWIsZy5fZj1kLGcuX3N0cmljdD1mLGcuX3BmPWMoKSxoYihnKS51dGMoKX0scmIudW5peD1mdW5jdGlvbihhKXtyZXR1cm4gcmIoMWUzKmEpfSxyYi5kdXJhdGlvbj1mdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9YSxoPW51bGw7cmV0dXJuIHJiLmlzRHVyYXRpb24oYSk/Zz17bXM6YS5fbWlsbGlzZWNvbmRzLGQ6YS5fZGF5cyxNOmEuX21vbnRoc306XCJudW1iZXJcIj09dHlwZW9mIGE/KGc9e30sYj9nW2JdPWE6Zy5taWxsaXNlY29uZHM9YSk6KGg9SWIuZXhlYyhhKSk/KGM9XCItXCI9PT1oWzFdPy0xOjEsZz17eTowLGQ6eihoW3piXSkqYyxoOnooaFtBYl0pKmMsbTp6KGhbQmJdKSpjLHM6eihoW0NiXSkqYyxtczp6KGhbRGJdKSpjfSk6KGg9SmIuZXhlYyhhKSk/KGM9XCItXCI9PT1oWzFdPy0xOjEsZT1mdW5jdGlvbihhKXt2YXIgYj1hJiZwYXJzZUZsb2F0KGEucmVwbGFjZShcIixcIixcIi5cIikpO3JldHVybihpc05hTihiKT8wOmIpKmN9LGc9e3k6ZShoWzJdKSxNOmUoaFszXSksZDplKGhbNF0pLGg6ZShoWzVdKSxtOmUoaFs2XSksczplKGhbN10pLHc6ZShoWzhdKX0pOlwib2JqZWN0XCI9PXR5cGVvZiBnJiYoXCJmcm9tXCJpbiBnfHxcInRvXCJpbiBnKSYmKGY9cShyYihnLmZyb20pLHJiKGcudG8pKSxnPXt9LGcubXM9Zi5taWxsaXNlY29uZHMsZy5NPWYubW9udGhzKSxkPW5ldyBrKGcpLHJiLmlzRHVyYXRpb24oYSkmJmEuaGFzT3duUHJvcGVydHkoXCJfbG9jYWxlXCIpJiYoZC5fbG9jYWxlPWEuX2xvY2FsZSksZH0scmIudmVyc2lvbj11YixyYi5kZWZhdWx0Rm9ybWF0PWJjLHJiLklTT184NjAxPWZ1bmN0aW9uKCl7fSxyYi5tb21lbnRQcm9wZXJ0aWVzPUZiLHJiLnVwZGF0ZU9mZnNldD1mdW5jdGlvbigpe30scmIucmVsYXRpdmVUaW1lVGhyZXNob2xkPWZ1bmN0aW9uKGIsYyl7cmV0dXJuIGpjW2JdPT09YT8hMTpjPT09YT9qY1tiXTooamNbYl09YywhMCl9LHJiLmxhbmc9ZShcIm1vbWVudC5sYW5nIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQubG9jYWxlIGluc3RlYWQuXCIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gcmIubG9jYWxlKGEsYil9KSxyYi5sb2NhbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYztyZXR1cm4gYSYmKGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGI/cmIuZGVmaW5lTG9jYWxlKGEsYik6cmIubG9jYWxlRGF0YShhKSxjJiYocmIuZHVyYXRpb24uX2xvY2FsZT1yYi5fbG9jYWxlPWMpKSxyYi5fbG9jYWxlLl9hYmJyfSxyYi5kZWZpbmVMb2NhbGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbnVsbCE9PWI/KGIuYWJicj1hLEViW2FdfHwoRWJbYV09bmV3IGkpLEViW2FdLnNldChiKSxyYi5sb2NhbGUoYSksRWJbYV0pOihkZWxldGUgRWJbYV0sbnVsbCl9LHJiLmxhbmdEYXRhPWUoXCJtb21lbnQubGFuZ0RhdGEgaXMgZGVwcmVjYXRlZC4gVXNlIG1vbWVudC5sb2NhbGVEYXRhIGluc3RlYWQuXCIsZnVuY3Rpb24oYSl7cmV0dXJuIHJiLmxvY2FsZURhdGEoYSl9KSxyYi5sb2NhbGVEYXRhPWZ1bmN0aW9uKGEpe3ZhciBiO2lmKGEmJmEuX2xvY2FsZSYmYS5fbG9jYWxlLl9hYmJyJiYoYT1hLl9sb2NhbGUuX2FiYnIpLCFhKXJldHVybiByYi5fbG9jYWxlO2lmKCF0KGEpKXtpZihiPUkoYSkpcmV0dXJuIGI7YT1bYV19cmV0dXJuIEgoYSl9LHJiLmlzTW9tZW50PWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2Yganx8bnVsbCE9YSYmYS5oYXNPd25Qcm9wZXJ0eShcIl9pc0FNb21lbnRPYmplY3RcIil9LHJiLmlzRHVyYXRpb249ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBrfTtmb3IodGI9b2MubGVuZ3RoLTE7dGI+PTA7LS10Yil5KG9jW3RiXSk7cmIubm9ybWFsaXplVW5pdHM9ZnVuY3Rpb24oYSl7cmV0dXJuIHcoYSl9LHJiLmludmFsaWQ9ZnVuY3Rpb24oYSl7dmFyIGI9cmIudXRjKDAvMCk7cmV0dXJuIG51bGwhPWE/bChiLl9wZixhKTpiLl9wZi51c2VySW52YWxpZGF0ZWQ9ITAsYn0scmIucGFyc2Vab25lPWZ1bmN0aW9uKCl7cmV0dXJuIHJiLmFwcGx5KG51bGwsYXJndW1lbnRzKS5wYXJzZVpvbmUoKX0scmIucGFyc2VUd29EaWdpdFllYXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSkrKHooYSk+Njg/MTkwMDoyZTMpfSxsKHJiLmZuPWoucHJvdG90eXBlLHtjbG9uZTpmdW5jdGlvbigpe3JldHVybiByYih0aGlzKX0sdmFsdWVPZjpmdW5jdGlvbigpe3JldHVybit0aGlzLl9kKzZlNCoodGhpcy5fb2Zmc2V0fHwwKX0sdW5peDpmdW5jdGlvbigpe3JldHVybiBNYXRoLmZsb29yKCt0aGlzLzFlMyl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5sb2NhbGUoXCJlblwiKS5mb3JtYXQoXCJkZGQgTU1NIEREIFlZWVkgSEg6bW06c3MgW0dNVF1aWlwiKX0sdG9EYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX29mZnNldD9uZXcgRGF0ZSgrdGhpcyk6dGhpcy5fZH0sdG9JU09TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1yYih0aGlzKS51dGMoKTtyZXR1cm4gMDxhLnllYXIoKSYmYS55ZWFyKCk8PTk5OTk/TShhLFwiWVlZWS1NTS1ERFtUXUhIOm1tOnNzLlNTU1taXVwiKTpNKGEsXCJZWVlZWVktTU0tRERbVF1ISDptbTpzcy5TU1NbWl1cIil9LHRvQXJyYXk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO3JldHVyblthLnllYXIoKSxhLm1vbnRoKCksYS5kYXRlKCksYS5ob3VycygpLGEubWludXRlcygpLGEuc2Vjb25kcygpLGEubWlsbGlzZWNvbmRzKCldfSxpc1ZhbGlkOmZ1bmN0aW9uKCl7cmV0dXJuIEYodGhpcyl9LGlzRFNUU2hpZnRlZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9hP3RoaXMuaXNWYWxpZCgpJiZ2KHRoaXMuX2EsKHRoaXMuX2lzVVRDP3JiLnV0Yyh0aGlzLl9hKTpyYih0aGlzLl9hKSkudG9BcnJheSgpKT4wOiExfSxwYXJzaW5nRmxhZ3M6ZnVuY3Rpb24oKXtyZXR1cm4gbCh7fSx0aGlzLl9wZil9LGludmFsaWRBdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wZi5vdmVyZmxvd30sdXRjOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnpvbmUoMCxhKX0sbG9jYWw6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX2lzVVRDJiYodGhpcy56b25lKDAsYSksdGhpcy5faXNVVEM9ITEsYSYmdGhpcy5hZGQodGhpcy5fZC5nZXRUaW1lem9uZU9mZnNldCgpLFwibVwiKSksdGhpc30sZm9ybWF0OmZ1bmN0aW9uKGEpe3ZhciBiPU0odGhpcyxhfHxyYi5kZWZhdWx0Rm9ybWF0KTtyZXR1cm4gdGhpcy5sb2NhbGVEYXRhKCkucG9zdGZvcm1hdChiKX0sYWRkOnIoMSxcImFkZFwiKSxzdWJ0cmFjdDpyKC0xLFwic3VidHJhY3RcIiksZGlmZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZSxmPUooYSx0aGlzKSxnPTZlNCoodGhpcy56b25lKCktZi56b25lKCkpO3JldHVybiBiPXcoYiksXCJ5ZWFyXCI9PT1ifHxcIm1vbnRoXCI9PT1iPyhkPTQzMmU1Kih0aGlzLmRheXNJbk1vbnRoKCkrZi5kYXlzSW5Nb250aCgpKSxlPTEyKih0aGlzLnllYXIoKS1mLnllYXIoKSkrKHRoaXMubW9udGgoKS1mLm1vbnRoKCkpLGUrPSh0aGlzLXJiKHRoaXMpLnN0YXJ0T2YoXCJtb250aFwiKS0oZi1yYihmKS5zdGFydE9mKFwibW9udGhcIikpKS9kLGUtPTZlNCoodGhpcy56b25lKCktcmIodGhpcykuc3RhcnRPZihcIm1vbnRoXCIpLnpvbmUoKS0oZi56b25lKCktcmIoZikuc3RhcnRPZihcIm1vbnRoXCIpLnpvbmUoKSkpL2QsXCJ5ZWFyXCI9PT1iJiYoZS89MTIpKTooZD10aGlzLWYsZT1cInNlY29uZFwiPT09Yj9kLzFlMzpcIm1pbnV0ZVwiPT09Yj9kLzZlNDpcImhvdXJcIj09PWI/ZC8zNmU1OlwiZGF5XCI9PT1iPyhkLWcpLzg2NGU1Olwid2Vla1wiPT09Yj8oZC1nKS82MDQ4ZTU6ZCksYz9lOm4oZSl9LGZyb206ZnVuY3Rpb24oYSxiKXtyZXR1cm4gcmIuZHVyYXRpb24oe3RvOnRoaXMsZnJvbTphfSkubG9jYWxlKHRoaXMubG9jYWxlKCkpLmh1bWFuaXplKCFiKX0sZnJvbU5vdzpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5mcm9tKHJiKCksYSl9LGNhbGVuZGFyOmZ1bmN0aW9uKGEpe3ZhciBiPWF8fHJiKCksYz1KKGIsdGhpcykuc3RhcnRPZihcImRheVwiKSxkPXRoaXMuZGlmZihjLFwiZGF5c1wiLCEwKSxlPS02PmQ/XCJzYW1lRWxzZVwiOi0xPmQ/XCJsYXN0V2Vla1wiOjA+ZD9cImxhc3REYXlcIjoxPmQ/XCJzYW1lRGF5XCI6Mj5kP1wibmV4dERheVwiOjc+ZD9cIm5leHRXZWVrXCI6XCJzYW1lRWxzZVwiO3JldHVybiB0aGlzLmZvcm1hdCh0aGlzLmxvY2FsZURhdGEoKS5jYWxlbmRhcihlLHRoaXMpKX0saXNMZWFwWWVhcjpmdW5jdGlvbigpe3JldHVybiBEKHRoaXMueWVhcigpKX0saXNEU1Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56b25lKCk8dGhpcy5jbG9uZSgpLm1vbnRoKDApLnpvbmUoKXx8dGhpcy56b25lKCk8dGhpcy5jbG9uZSgpLm1vbnRoKDUpLnpvbmUoKX0sZGF5OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuX2lzVVRDP3RoaXMuX2QuZ2V0VVRDRGF5KCk6dGhpcy5fZC5nZXREYXkoKTtyZXR1cm4gbnVsbCE9YT8oYT1jYihhLHRoaXMubG9jYWxlRGF0YSgpKSx0aGlzLmFkZChhLWIsXCJkXCIpKTpifSxtb250aDptYihcIk1vbnRoXCIsITApLHN0YXJ0T2Y6ZnVuY3Rpb24oYSl7c3dpdGNoKGE9dyhhKSl7Y2FzZVwieWVhclwiOnRoaXMubW9udGgoMCk7Y2FzZVwicXVhcnRlclwiOmNhc2VcIm1vbnRoXCI6dGhpcy5kYXRlKDEpO2Nhc2VcIndlZWtcIjpjYXNlXCJpc29XZWVrXCI6Y2FzZVwiZGF5XCI6dGhpcy5ob3VycygwKTtjYXNlXCJob3VyXCI6dGhpcy5taW51dGVzKDApO2Nhc2VcIm1pbnV0ZVwiOnRoaXMuc2Vjb25kcygwKTtjYXNlXCJzZWNvbmRcIjp0aGlzLm1pbGxpc2Vjb25kcygwKX1yZXR1cm5cIndlZWtcIj09PWE/dGhpcy53ZWVrZGF5KDApOlwiaXNvV2Vla1wiPT09YSYmdGhpcy5pc29XZWVrZGF5KDEpLFwicXVhcnRlclwiPT09YSYmdGhpcy5tb250aCgzKk1hdGguZmxvb3IodGhpcy5tb250aCgpLzMpKSx0aGlzfSxlbmRPZjpmdW5jdGlvbihhKXtyZXR1cm4gYT13KGEpLHRoaXMuc3RhcnRPZihhKS5hZGQoMSxcImlzb1dlZWtcIj09PWE/XCJ3ZWVrXCI6YSkuc3VidHJhY3QoMSxcIm1zXCIpfSxpc0FmdGVyOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGI/YjpcIm1pbGxpc2Vjb25kXCIsK3RoaXMuY2xvbmUoKS5zdGFydE9mKGIpPityYihhKS5zdGFydE9mKGIpfSxpc0JlZm9yZTpmdW5jdGlvbihhLGIpe3JldHVybiBiPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBiP2I6XCJtaWxsaXNlY29uZFwiLCt0aGlzLmNsb25lKCkuc3RhcnRPZihiKTwrcmIoYSkuc3RhcnRPZihiKX0saXNTYW1lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI9Ynx8XCJtc1wiLCt0aGlzLmNsb25lKCkuc3RhcnRPZihiKT09PStKKGEsdGhpcykuc3RhcnRPZihiKX0sbWluOmUoXCJtb21lbnQoKS5taW4gaXMgZGVwcmVjYXRlZCwgdXNlIG1vbWVudC5taW4gaW5zdGVhZC4gaHR0cHM6Ly9naXRodWIuY29tL21vbWVudC9tb21lbnQvaXNzdWVzLzE1NDhcIixmdW5jdGlvbihhKXtyZXR1cm4gYT1yYi5hcHBseShudWxsLGFyZ3VtZW50cyksdGhpcz5hP3RoaXM6YX0pLG1heDplKFwibW9tZW50KCkubWF4IGlzIGRlcHJlY2F0ZWQsIHVzZSBtb21lbnQubWF4IGluc3RlYWQuIGh0dHBzOi8vZ2l0aHViLmNvbS9tb21lbnQvbW9tZW50L2lzc3Vlcy8xNTQ4XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGE9cmIuYXBwbHkobnVsbCxhcmd1bWVudHMpLGE+dGhpcz90aGlzOmF9KSx6b25lOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLl9vZmZzZXR8fDA7cmV0dXJuIG51bGw9PWE/dGhpcy5faXNVVEM/ZDp0aGlzLl9kLmdldFRpbWV6b25lT2Zmc2V0KCk6KFwic3RyaW5nXCI9PXR5cGVvZiBhJiYoYT1QKGEpKSxNYXRoLmFicyhhKTwxNiYmKGE9NjAqYSksIXRoaXMuX2lzVVRDJiZiJiYoYz10aGlzLl9kLmdldFRpbWV6b25lT2Zmc2V0KCkpLHRoaXMuX29mZnNldD1hLHRoaXMuX2lzVVRDPSEwLG51bGwhPWMmJnRoaXMuc3VidHJhY3QoYyxcIm1cIiksZCE9PWEmJighYnx8dGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz9zKHRoaXMscmIuZHVyYXRpb24oZC1hLFwibVwiKSwxLCExKTp0aGlzLl9jaGFuZ2VJblByb2dyZXNzfHwodGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz0hMCxyYi51cGRhdGVPZmZzZXQodGhpcywhMCksdGhpcy5fY2hhbmdlSW5Qcm9ncmVzcz1udWxsKSksdGhpcyl9LHpvbmVBYmJyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzVVRDP1wiVVRDXCI6XCJcIn0sem9uZU5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNVVEM/XCJDb29yZGluYXRlZCBVbml2ZXJzYWwgVGltZVwiOlwiXCJ9LHBhcnNlWm9uZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90em0/dGhpcy56b25lKHRoaXMuX3R6bSk6XCJzdHJpbmdcIj09dHlwZW9mIHRoaXMuX2kmJnRoaXMuem9uZSh0aGlzLl9pKSx0aGlzfSxoYXNBbGlnbmVkSG91ck9mZnNldDpmdW5jdGlvbihhKXtyZXR1cm4gYT1hP3JiKGEpLnpvbmUoKTowLCh0aGlzLnpvbmUoKS1hKSU2MD09PTB9LGRheXNJbk1vbnRoOmZ1bmN0aW9uKCl7cmV0dXJuIEEodGhpcy55ZWFyKCksdGhpcy5tb250aCgpKX0sZGF5T2ZZZWFyOmZ1bmN0aW9uKGEpe3ZhciBiPXdiKChyYih0aGlzKS5zdGFydE9mKFwiZGF5XCIpLXJiKHRoaXMpLnN0YXJ0T2YoXCJ5ZWFyXCIpKS84NjRlNSkrMTtyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKGEtYixcImRcIil9LHF1YXJ0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/TWF0aC5jZWlsKCh0aGlzLm1vbnRoKCkrMSkvMyk6dGhpcy5tb250aCgzKihhLTEpK3RoaXMubW9udGgoKSUzKX0sd2Vla1llYXI6ZnVuY3Rpb24oYSl7dmFyIGI9ZmIodGhpcyx0aGlzLmxvY2FsZURhdGEoKS5fd2Vlay5kb3csdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG95KS55ZWFyO3JldHVybiBudWxsPT1hP2I6dGhpcy5hZGQoYS1iLFwieVwiKX0saXNvV2Vla1llYXI6ZnVuY3Rpb24oYSl7dmFyIGI9ZmIodGhpcywxLDQpLnllYXI7cmV0dXJuIG51bGw9PWE/Yjp0aGlzLmFkZChhLWIsXCJ5XCIpfSx3ZWVrOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMubG9jYWxlRGF0YSgpLndlZWsodGhpcyk7cmV0dXJuIG51bGw9PWE/Yjp0aGlzLmFkZCg3KihhLWIpLFwiZFwiKX0saXNvV2VlazpmdW5jdGlvbihhKXt2YXIgYj1mYih0aGlzLDEsNCkud2VlaztyZXR1cm4gbnVsbD09YT9iOnRoaXMuYWRkKDcqKGEtYiksXCJkXCIpfSx3ZWVrZGF5OmZ1bmN0aW9uKGEpe3ZhciBiPSh0aGlzLmRheSgpKzctdGhpcy5sb2NhbGVEYXRhKCkuX3dlZWsuZG93KSU3O3JldHVybiBudWxsPT1hP2I6dGhpcy5hZGQoYS1iLFwiZFwiKX0saXNvV2Vla2RheTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YT90aGlzLmRheSgpfHw3OnRoaXMuZGF5KHRoaXMuZGF5KCklNz9hOmEtNyl9LGlzb1dlZWtzSW5ZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIEIodGhpcy55ZWFyKCksMSw0KX0sd2Vla3NJblllYXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmxvY2FsZURhdGEoKS5fd2VlaztyZXR1cm4gQih0aGlzLnllYXIoKSxhLmRvdyxhLmRveSl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gYT13KGEpLHRoaXNbYV0oKX0sc2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9dyhhKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW2FdJiZ0aGlzW2FdKGIpLHRoaXN9LGxvY2FsZTpmdW5jdGlvbihiKXtyZXR1cm4gYj09PWE/dGhpcy5fbG9jYWxlLl9hYmJyOih0aGlzLl9sb2NhbGU9cmIubG9jYWxlRGF0YShiKSx0aGlzKX0sbGFuZzplKFwibW9tZW50KCkubGFuZygpIGlzIGRlcHJlY2F0ZWQuIFVzZSBtb21lbnQoKS5sb2NhbGVEYXRhKCkgaW5zdGVhZC5cIixmdW5jdGlvbihiKXtyZXR1cm4gYj09PWE/dGhpcy5sb2NhbGVEYXRhKCk6KHRoaXMuX2xvY2FsZT1yYi5sb2NhbGVEYXRhKGIpLHRoaXMpfSksbG9jYWxlRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbGV9fSkscmIuZm4ubWlsbGlzZWNvbmQ9cmIuZm4ubWlsbGlzZWNvbmRzPW1iKFwiTWlsbGlzZWNvbmRzXCIsITEpLHJiLmZuLnNlY29uZD1yYi5mbi5zZWNvbmRzPW1iKFwiU2Vjb25kc1wiLCExKSxyYi5mbi5taW51dGU9cmIuZm4ubWludXRlcz1tYihcIk1pbnV0ZXNcIiwhMSkscmIuZm4uaG91cj1yYi5mbi5ob3Vycz1tYihcIkhvdXJzXCIsITApLHJiLmZuLmRhdGU9bWIoXCJEYXRlXCIsITApLHJiLmZuLmRhdGVzPWUoXCJkYXRlcyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgZGF0ZSBpbnN0ZWFkLlwiLG1iKFwiRGF0ZVwiLCEwKSkscmIuZm4ueWVhcj1tYihcIkZ1bGxZZWFyXCIsITApLHJiLmZuLnllYXJzPWUoXCJ5ZWFycyBhY2Nlc3NvciBpcyBkZXByZWNhdGVkLiBVc2UgeWVhciBpbnN0ZWFkLlwiLG1iKFwiRnVsbFllYXJcIiwhMCkpLHJiLmZuLmRheXM9cmIuZm4uZGF5LHJiLmZuLm1vbnRocz1yYi5mbi5tb250aCxyYi5mbi53ZWVrcz1yYi5mbi53ZWVrLHJiLmZuLmlzb1dlZWtzPXJiLmZuLmlzb1dlZWsscmIuZm4ucXVhcnRlcnM9cmIuZm4ucXVhcnRlcixyYi5mbi50b0pTT049cmIuZm4udG9JU09TdHJpbmcsbChyYi5kdXJhdGlvbi5mbj1rLnByb3RvdHlwZSx7X2J1YmJsZTpmdW5jdGlvbigpe3ZhciBhLGIsYyxkPXRoaXMuX21pbGxpc2Vjb25kcyxlPXRoaXMuX2RheXMsZj10aGlzLl9tb250aHMsZz10aGlzLl9kYXRhLGg9MDtnLm1pbGxpc2Vjb25kcz1kJTFlMyxhPW4oZC8xZTMpLGcuc2Vjb25kcz1hJTYwLGI9bihhLzYwKSxnLm1pbnV0ZXM9YiU2MCxjPW4oYi82MCksZy5ob3Vycz1jJTI0LGUrPW4oYy8yNCksaD1uKG5iKGUpKSxlLT1uKG9iKGgpKSxmKz1uKGUvMzApLGUlPTMwLGgrPW4oZi8xMiksZiU9MTIsZy5kYXlzPWUsZy5tb250aHM9ZixnLnllYXJzPWh9LGFiczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9taWxsaXNlY29uZHM9TWF0aC5hYnModGhpcy5fbWlsbGlzZWNvbmRzKSx0aGlzLl9kYXlzPU1hdGguYWJzKHRoaXMuX2RheXMpLHRoaXMuX21vbnRocz1NYXRoLmFicyh0aGlzLl9tb250aHMpLHRoaXMuX2RhdGEubWlsbGlzZWNvbmRzPU1hdGguYWJzKHRoaXMuX2RhdGEubWlsbGlzZWNvbmRzKSx0aGlzLl9kYXRhLnNlY29uZHM9TWF0aC5hYnModGhpcy5fZGF0YS5zZWNvbmRzKSx0aGlzLl9kYXRhLm1pbnV0ZXM9TWF0aC5hYnModGhpcy5fZGF0YS5taW51dGVzKSx0aGlzLl9kYXRhLmhvdXJzPU1hdGguYWJzKHRoaXMuX2RhdGEuaG91cnMpLHRoaXMuX2RhdGEubW9udGhzPU1hdGguYWJzKHRoaXMuX2RhdGEubW9udGhzKSx0aGlzLl9kYXRhLnllYXJzPU1hdGguYWJzKHRoaXMuX2RhdGEueWVhcnMpLHRoaXN9LHdlZWtzOmZ1bmN0aW9uKCl7cmV0dXJuIG4odGhpcy5kYXlzKCkvNyl9LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbWlsbGlzZWNvbmRzKzg2NGU1KnRoaXMuX2RheXMrdGhpcy5fbW9udGhzJTEyKjI1OTJlNiszMTUzNmU2KnoodGhpcy5fbW9udGhzLzEyKX0saHVtYW5pemU6ZnVuY3Rpb24oYSl7dmFyIGI9ZWIodGhpcywhYSx0aGlzLmxvY2FsZURhdGEoKSk7cmV0dXJuIGEmJihiPXRoaXMubG9jYWxlRGF0YSgpLnBhc3RGdXR1cmUoK3RoaXMsYikpLHRoaXMubG9jYWxlRGF0YSgpLnBvc3Rmb3JtYXQoYil9LGFkZDpmdW5jdGlvbihhLGIpe3ZhciBjPXJiLmR1cmF0aW9uKGEsYik7cmV0dXJuIHRoaXMuX21pbGxpc2Vjb25kcys9Yy5fbWlsbGlzZWNvbmRzLHRoaXMuX2RheXMrPWMuX2RheXMsdGhpcy5fbW9udGhzKz1jLl9tb250aHMsdGhpcy5fYnViYmxlKCksdGhpc30sc3VidHJhY3Q6ZnVuY3Rpb24oYSxiKXt2YXIgYz1yYi5kdXJhdGlvbihhLGIpO3JldHVybiB0aGlzLl9taWxsaXNlY29uZHMtPWMuX21pbGxpc2Vjb25kcyx0aGlzLl9kYXlzLT1jLl9kYXlzLHRoaXMuX21vbnRocy09Yy5fbW9udGhzLHRoaXMuX2J1YmJsZSgpLHRoaXN9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gYT13KGEpLHRoaXNbYS50b0xvd2VyQ2FzZSgpK1wic1wiXSgpfSxhczpmdW5jdGlvbihhKXt2YXIgYixjO2lmKGE9dyhhKSxiPXRoaXMuX2RheXMrdGhpcy5fbWlsbGlzZWNvbmRzLzg2NGU1LFwibW9udGhcIj09PWF8fFwieWVhclwiPT09YSlyZXR1cm4gYz10aGlzLl9tb250aHMrMTIqbmIoYiksXCJtb250aFwiPT09YT9jOmMvMTI7c3dpdGNoKGIrPW9iKHRoaXMuX21vbnRocy8xMiksYSl7Y2FzZVwid2Vla1wiOnJldHVybiBiLzc7Y2FzZVwiZGF5XCI6cmV0dXJuIGI7Y2FzZVwiaG91clwiOnJldHVybiAyNCpiO2Nhc2VcIm1pbnV0ZVwiOnJldHVybiAyNCpiKjYwO2Nhc2VcInNlY29uZFwiOnJldHVybiAyNCpiKjYwKjYwO2Nhc2VcIm1pbGxpc2Vjb25kXCI6cmV0dXJuIDI0KmIqNjAqNjAqMWUzO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB1bml0IFwiK2EpfX0sbGFuZzpyYi5mbi5sYW5nLGxvY2FsZTpyYi5mbi5sb2NhbGUsdG9Jc29TdHJpbmc6ZShcInRvSXNvU3RyaW5nKCkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSB0b0lTT1N0cmluZygpIGluc3RlYWQgKG5vdGljZSB0aGUgY2FwaXRhbHMpXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b0lTT1N0cmluZygpfSksdG9JU09TdHJpbmc6ZnVuY3Rpb24oKXt2YXIgYT1NYXRoLmFicyh0aGlzLnllYXJzKCkpLGI9TWF0aC5hYnModGhpcy5tb250aHMoKSksYz1NYXRoLmFicyh0aGlzLmRheXMoKSksZD1NYXRoLmFicyh0aGlzLmhvdXJzKCkpLGU9TWF0aC5hYnModGhpcy5taW51dGVzKCkpLGY9TWF0aC5hYnModGhpcy5zZWNvbmRzKCkrdGhpcy5taWxsaXNlY29uZHMoKS8xZTMpO3JldHVybiB0aGlzLmFzU2Vjb25kcygpPyh0aGlzLmFzU2Vjb25kcygpPDA/XCItXCI6XCJcIikrXCJQXCIrKGE/YStcIllcIjpcIlwiKSsoYj9iK1wiTVwiOlwiXCIpKyhjP2MrXCJEXCI6XCJcIikrKGR8fGV8fGY/XCJUXCI6XCJcIikrKGQ/ZCtcIkhcIjpcIlwiKSsoZT9lK1wiTVwiOlwiXCIpKyhmP2YrXCJTXCI6XCJcIik6XCJQMERcIn0sbG9jYWxlRGF0YTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb2NhbGV9fSk7Zm9yKHRiIGluIGZjKWZjLmhhc093blByb3BlcnR5KHRiKSYmcGIodGIudG9Mb3dlckNhc2UoKSk7cmIuZHVyYXRpb24uZm4uYXNNaWxsaXNlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcyhcIm1zXCIpfSxyYi5kdXJhdGlvbi5mbi5hc1NlY29uZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcyhcInNcIil9LHJiLmR1cmF0aW9uLmZuLmFzTWludXRlcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKFwibVwiKX0scmIuZHVyYXRpb24uZm4uYXNIb3Vycz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFzKFwiaFwiKX0scmIuZHVyYXRpb24uZm4uYXNEYXlzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoXCJkXCIpfSxyYi5kdXJhdGlvbi5mbi5hc1dlZWtzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXMoXCJ3ZWVrc1wiKX0scmIuZHVyYXRpb24uZm4uYXNNb250aHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcyhcIk1cIil9LHJiLmR1cmF0aW9uLmZuLmFzWWVhcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hcyhcInlcIil9LHJiLmxvY2FsZShcImVuXCIse29yZGluYWw6ZnVuY3Rpb24oYSl7dmFyIGI9YSUxMCxjPTE9PT16KGElMTAwLzEwKT9cInRoXCI6MT09PWI/XCJzdFwiOjI9PT1iP1wibmRcIjozPT09Yj9cInJkXCI6XCJ0aFwiO3JldHVybiBhK2N9fSksR2I/bW9kdWxlLmV4cG9ydHM9cmI6XCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kPyhkZWZpbmUoXCJtb21lbnRcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGMuY29uZmlnJiZjLmNvbmZpZygpJiZjLmNvbmZpZygpLm5vR2xvYmFsPT09ITAmJih2Yi5tb21lbnQ9c2IpLHJifSkscWIoITApKTpxYigpfSkuY2FsbCh0aGlzKTsiLCIvKipcbiogQHZlcnNpb246IDEuMy4xM1xuKiBAYXV0aG9yOiBEYW4gR3Jvc3NtYW4gaHR0cDovL3d3dy5kYW5ncm9zc21hbi5pbmZvL1xuKiBAZGF0ZTogMjAxNC0wOS0wNFxuKiBAY29weXJpZ2h0OiBDb3B5cmlnaHQgKGMpIDIwMTItMjAxNCBEYW4gR3Jvc3NtYW4uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4qIEBsaWNlbnNlOiBMaWNlbnNlZCB1bmRlciBBcGFjaGUgTGljZW5zZSB2Mi4wLiBTZWUgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4qIEB3ZWJzaXRlOiBodHRwOi8vd3d3LmltcHJvdmVseS5jb20vXG4qL1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWydtb21lbnQnLCAnanF1ZXJ5JywgJ2V4cG9ydHMnXSwgZnVuY3Rpb24obW9tZW50anMsICQsIGV4cG9ydHMpIHtcbiAgICAgIHJvb3QuZGF0ZXJhbmdlcGlja2VyID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBtb21lbnRqcywgJCk7XG4gICAgfSk7XG5cbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbW9tZW50anMgPSByZXF1aXJlKCdtb21lbnQnKTtcbiAgICB2YXIgalF1ZXJ5O1xuICAgIHRyeSB7XG4gICAgICBqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGpRdWVyeSA9IHdpbmRvdy5qUXVlcnk7XG4gICAgICBpZiAoIWpRdWVyeSkgdGhyb3cgbmV3IEVycm9yKCdqUXVlcnkgZGVwZW5kZW5jeSBub3QgZm91bmQnKTtcbiAgICB9XG5cbiAgICBmYWN0b3J5KHJvb3QsIGV4cG9ydHMsIG1vbWVudGpzLCBqUXVlcnkpO1xuXG4gIC8vIEZpbmFsbHksIGFzIGEgYnJvd3NlciBnbG9iYWwuXG4gIH0gZWxzZSB7XG4gICAgcm9vdC5kYXRlcmFuZ2VwaWNrZXIgPSBmYWN0b3J5KHJvb3QsIHt9LCByb290Lm1vbWVudCwgKHJvb3QualF1ZXJ5IHx8IHJvb3QuWmVwdG8gfHwgcm9vdC5lbmRlciB8fCByb290LiQpKTtcbiAgfVxuXG59KHRoaXMsIGZ1bmN0aW9uKHJvb3QsIGRhdGVyYW5nZXBpY2tlciwgbW9tZW50LCAkKSB7XG5cbiAgICB2YXIgRGF0ZVJhbmdlUGlja2VyID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9wdGlvbnMsIGNiKSB7XG5cbiAgICAgICAgLy8gYnkgZGVmYXVsdCwgdGhlIGRhdGVyYW5nZXBpY2tlciBlbGVtZW50IGlzIHBsYWNlZCBhdCB0aGUgYm90dG9tIG9mIEhUTUwgYm9keVxuICAgICAgICB0aGlzLnBhcmVudEVsID0gJ2JvZHknO1xuXG4gICAgICAgIC8vZWxlbWVudCB0aGF0IHRyaWdnZXJlZCB0aGUgZGF0ZSByYW5nZSBwaWNrZXJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gJChlbGVtZW50KTtcblxuICAgICAgICAvL3RyYWNrcyB2aXNpYmxlIHN0YXRlXG4gICAgICAgIHRoaXMuaXNTaG93aW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy9jcmVhdGUgdGhlIHBpY2tlciBIVE1MIG9iamVjdFxuICAgICAgICB2YXIgRFJQVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cImRhdGVyYW5nZXBpY2tlciBkcm9wZG93bi1tZW51XCI+JyArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjYWxlbmRhciBsZWZ0XCI+PC9kaXY+JyArXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjYWxlbmRhciByaWdodFwiPjwvZGl2PicgK1xuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicmFuZ2VzXCI+JyArXG4gICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJhbmdlX2lucHV0c1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRhdGVyYW5nZXBpY2tlcl9zdGFydF9pbnB1dFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICc8bGFiZWwgZm9yPVwiZGF0ZXJhbmdlcGlja2VyX3N0YXJ0XCI+PC9sYWJlbD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGNsYXNzPVwiaW5wdXQtbWluaVwiIHR5cGU9XCJ0ZXh0XCIgbmFtZT1cImRhdGVyYW5nZXBpY2tlcl9zdGFydFwiIHZhbHVlPVwiXCIgLz4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRhdGVyYW5nZXBpY2tlcl9lbmRfaW5wdXRcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cImRhdGVyYW5nZXBpY2tlcl9lbmRcIj48L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgY2xhc3M9XCJpbnB1dC1taW5pXCIgdHlwZT1cInRleHRcIiBuYW1lPVwiZGF0ZXJhbmdlcGlja2VyX2VuZFwiIHZhbHVlPVwiXCIgLz4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImFwcGx5QnRuXCIgZGlzYWJsZWQ9XCJkaXNhYmxlZFwiPjwvYnV0dG9uPiZuYnNwOycgK1xuICAgICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cImNhbmNlbEJ0blwiPjwvYnV0dG9uPicgK1xuICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgJzwvZGl2Pic7XG5cbiAgICAgICAgLy9jdXN0b20gb3B0aW9uc1xuICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMgIT09ICdvYmplY3QnIHx8IG9wdGlvbnMgPT09IG51bGwpXG4gICAgICAgICAgICBvcHRpb25zID0ge307XG5cbiAgICAgICAgdGhpcy5wYXJlbnRFbCA9ICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ29iamVjdCcgJiYgb3B0aW9ucy5wYXJlbnRFbCAmJiAkKG9wdGlvbnMucGFyZW50RWwpLmxlbmd0aCkgPyAkKG9wdGlvbnMucGFyZW50RWwpIDogJCh0aGlzLnBhcmVudEVsKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSAkKERSUFRlbXBsYXRlKS5hcHBlbmRUbyh0aGlzLnBhcmVudEVsKTtcblxuICAgICAgICB0aGlzLnNldE9wdGlvbnMob3B0aW9ucywgY2IpO1xuXG4gICAgICAgIC8vYXBwbHkgQ1NTIGNsYXNzZXMgYW5kIGxhYmVscyB0byBidXR0b25zXG4gICAgICAgIHZhciBjID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgICQuZWFjaCh0aGlzLmJ1dHRvbkNsYXNzZXMsIGZ1bmN0aW9uIChpZHgsIHZhbCkge1xuICAgICAgICAgICAgYy5maW5kKCdidXR0b24nKS5hZGRDbGFzcyh2YWwpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmRhdGVyYW5nZXBpY2tlcl9zdGFydF9pbnB1dCBsYWJlbCcpLmh0bWwodGhpcy5sb2NhbGUuZnJvbUxhYmVsKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmRhdGVyYW5nZXBpY2tlcl9lbmRfaW5wdXQgbGFiZWwnKS5odG1sKHRoaXMubG9jYWxlLnRvTGFiZWwpO1xuICAgICAgICBpZiAodGhpcy5hcHBseUNsYXNzLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5hcHBseUJ0bicpLmFkZENsYXNzKHRoaXMuYXBwbHlDbGFzcyk7XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbENsYXNzLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYW5jZWxCdG4nKS5hZGRDbGFzcyh0aGlzLmNhbmNlbENsYXNzKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmFwcGx5QnRuJykuaHRtbCh0aGlzLmxvY2FsZS5hcHBseUxhYmVsKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmNhbmNlbEJ0bicpLmh0bWwodGhpcy5sb2NhbGUuY2FuY2VsTGFiZWwpO1xuXG4gICAgICAgIC8vZXZlbnQgbGlzdGVuZXJzXG5cbiAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyJylcbiAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJy5wcmV2JywgJC5wcm94eSh0aGlzLmNsaWNrUHJldiwgdGhpcykpXG4gICAgICAgICAgICAub24oJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcicsICcubmV4dCcsICQucHJveHkodGhpcy5jbGlja05leHQsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdjbGljay5kYXRlcmFuZ2VwaWNrZXInLCAndGQuYXZhaWxhYmxlJywgJC5wcm94eSh0aGlzLmNsaWNrRGF0ZSwgdGhpcykpXG4gICAgICAgICAgICAub24oJ21vdXNlZW50ZXIuZGF0ZXJhbmdlcGlja2VyJywgJ3RkLmF2YWlsYWJsZScsICQucHJveHkodGhpcy5ob3ZlckRhdGUsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZWxlYXZlLmRhdGVyYW5nZXBpY2tlcicsICd0ZC5hdmFpbGFibGUnLCAkLnByb3h5KHRoaXMudXBkYXRlRm9ybUlucHV0cywgdGhpcykpXG4gICAgICAgICAgICAub24oJ2NoYW5nZS5kYXRlcmFuZ2VwaWNrZXInLCAnc2VsZWN0LnllYXJzZWxlY3QnLCAkLnByb3h5KHRoaXMudXBkYXRlTW9udGhZZWFyLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2hhbmdlLmRhdGVyYW5nZXBpY2tlcicsICdzZWxlY3QubW9udGhzZWxlY3QnLCAkLnByb3h5KHRoaXMudXBkYXRlTW9udGhZZWFyLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2hhbmdlLmRhdGVyYW5nZXBpY2tlcicsICdzZWxlY3QuaG91cnNlbGVjdCxzZWxlY3QubWludXRlc2VsZWN0LHNlbGVjdC5hbXBtc2VsZWN0JywgJC5wcm94eSh0aGlzLnVwZGF0ZVRpbWUsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzJylcbiAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJ2J1dHRvbi5hcHBseUJ0bicsICQucHJveHkodGhpcy5jbGlja0FwcGx5LCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJ2J1dHRvbi5jYW5jZWxCdG4nLCAkLnByb3h5KHRoaXMuY2xpY2tDYW5jZWwsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdjbGljay5kYXRlcmFuZ2VwaWNrZXInLCAnLmRhdGVyYW5nZXBpY2tlcl9zdGFydF9pbnB1dCwuZGF0ZXJhbmdlcGlja2VyX2VuZF9pbnB1dCcsICQucHJveHkodGhpcy5zaG93Q2FsZW5kYXJzLCB0aGlzKSlcbiAgICAgICAgICAgIC5vbignY2hhbmdlLmRhdGVyYW5nZXBpY2tlcicsICcuZGF0ZXJhbmdlcGlja2VyX3N0YXJ0X2lucHV0LC5kYXRlcmFuZ2VwaWNrZXJfZW5kX2lucHV0JywgJC5wcm94eSh0aGlzLmlucHV0c0NoYW5nZWQsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdrZXlkb3duLmRhdGVyYW5nZXBpY2tlcicsICcuZGF0ZXJhbmdlcGlja2VyX3N0YXJ0X2lucHV0LC5kYXRlcmFuZ2VwaWNrZXJfZW5kX2lucHV0JywgJC5wcm94eSh0aGlzLmlucHV0c0tleWRvd24sIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdjbGljay5kYXRlcmFuZ2VwaWNrZXInLCAnbGknLCAkLnByb3h5KHRoaXMuY2xpY2tSYW5nZSwgdGhpcykpXG4gICAgICAgICAgICAub24oJ21vdXNlZW50ZXIuZGF0ZXJhbmdlcGlja2VyJywgJ2xpJywgJC5wcm94eSh0aGlzLmVudGVyUmFuZ2UsIHRoaXMpKVxuICAgICAgICAgICAgLm9uKCdtb3VzZWxlYXZlLmRhdGVyYW5nZXBpY2tlcicsICdsaScsICQucHJveHkodGhpcy51cGRhdGVGb3JtSW5wdXRzLCB0aGlzKSk7XG5cbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pcygnaW5wdXQnKSkge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm9uKHtcbiAgICAgICAgICAgICAgICAnY2xpY2suZGF0ZXJhbmdlcGlja2VyJzogJC5wcm94eSh0aGlzLnNob3csIHRoaXMpLFxuICAgICAgICAgICAgICAgICdmb2N1cy5kYXRlcmFuZ2VwaWNrZXInOiAkLnByb3h5KHRoaXMuc2hvdywgdGhpcyksXG4gICAgICAgICAgICAgICAgJ2tleXVwLmRhdGVyYW5nZXBpY2tlcic6ICQucHJveHkodGhpcy51cGRhdGVGcm9tQ29udHJvbCwgdGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lm9uKCdjbGljay5kYXRlcmFuZ2VwaWNrZXInLCAkLnByb3h5KHRoaXMudG9nZ2xlLCB0aGlzKSk7XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBEYXRlUmFuZ2VQaWNrZXIucHJvdG90eXBlID0ge1xuXG4gICAgICAgIGNvbnN0cnVjdG9yOiBEYXRlUmFuZ2VQaWNrZXIsXG5cbiAgICAgICAgc2V0T3B0aW9uczogZnVuY3Rpb24ob3B0aW9ucywgY2FsbGJhY2spIHtcblxuICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudCgpLmVuZE9mKCdkYXknKTtcbiAgICAgICAgICAgIHRoaXMubWluRGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5tYXhEYXRlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRhdGVMaW1pdCA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLnNob3dEcm9wZG93bnMgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1dlZWtOdW1iZXJzID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMudGltZVBpY2tlckluY3JlbWVudCA9IDMwO1xuICAgICAgICAgICAgdGhpcy50aW1lUGlja2VyMTJIb3VyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlRGF0ZVBpY2tlciA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5yYW5nZXMgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5vcGVucyA9ICdyaWdodCc7XG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50Lmhhc0NsYXNzKCdwdWxsLXJpZ2h0JykpXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVucyA9ICdsZWZ0JztcblxuICAgICAgICAgICAgdGhpcy5idXR0b25DbGFzc2VzID0gWydidG4nLCAnYnRuLXNtYWxsIGJ0bi1zbSddO1xuICAgICAgICAgICAgdGhpcy5hcHBseUNsYXNzID0gJ2J0bi1zdWNjZXNzJztcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsQ2xhc3MgPSAnYnRuLWRlZmF1bHQnO1xuXG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9ICdNTS9ERC9ZWVlZJztcbiAgICAgICAgICAgIHRoaXMuc2VwYXJhdG9yID0gJyAtICc7XG5cbiAgICAgICAgICAgIHRoaXMubG9jYWxlID0ge1xuICAgICAgICAgICAgICAgIGFwcGx5TGFiZWw6ICdBcHBseScsXG4gICAgICAgICAgICAgICAgY2FuY2VsTGFiZWw6ICdDYW5jZWwnLFxuICAgICAgICAgICAgICAgIGZyb21MYWJlbDogJ0Zyb20nLFxuICAgICAgICAgICAgICAgIHRvTGFiZWw6ICdUbycsXG4gICAgICAgICAgICAgICAgd2Vla0xhYmVsOiAnVycsXG4gICAgICAgICAgICAgICAgY3VzdG9tUmFuZ2VMYWJlbDogJ0N1c3RvbSBSYW5nZScsXG4gICAgICAgICAgICAgICAgZGF5c09mV2VlazogbW9tZW50LndlZWtkYXlzTWluKCksXG4gICAgICAgICAgICAgICAgbW9udGhOYW1lczogbW9tZW50Lm1vbnRoc1Nob3J0KCksXG4gICAgICAgICAgICAgICAgZmlyc3REYXk6IG1vbWVudC5sb2NhbGVEYXRhKCkuX3dlZWsuZG93XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNiID0gZnVuY3Rpb24gKCkgeyB9O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZm9ybWF0ID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbnMuZm9ybWF0O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc2VwYXJhdG9yID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aGlzLnNlcGFyYXRvciA9IG9wdGlvbnMuc2VwYXJhdG9yO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhcnREYXRlID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IG1vbWVudChvcHRpb25zLnN0YXJ0RGF0ZSwgdGhpcy5mb3JtYXQpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuZW5kRGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gbW9tZW50KG9wdGlvbnMuZW5kRGF0ZSwgdGhpcy5mb3JtYXQpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWluRGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5taW5EYXRlID0gbW9tZW50KG9wdGlvbnMubWluRGF0ZSwgdGhpcy5mb3JtYXQpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWF4RGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhEYXRlID0gbW9tZW50KG9wdGlvbnMubWF4RGF0ZSwgdGhpcy5mb3JtYXQpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhcnREYXRlID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IG1vbWVudChvcHRpb25zLnN0YXJ0RGF0ZSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5lbmREYXRlID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQob3B0aW9ucy5lbmREYXRlKTtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm1pbkRhdGUgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgIHRoaXMubWluRGF0ZSA9IG1vbWVudChvcHRpb25zLm1pbkRhdGUpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubWF4RGF0ZSA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICAgICAgdGhpcy5tYXhEYXRlID0gbW9tZW50KG9wdGlvbnMubWF4RGF0ZSk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5hcHBseUNsYXNzID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2xhc3MgPSBvcHRpb25zLmFwcGx5Q2xhc3M7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYW5jZWxDbGFzcyA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxDbGFzcyA9IG9wdGlvbnMuY2FuY2VsQ2xhc3M7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5kYXRlTGltaXQgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgIHRoaXMuZGF0ZUxpbWl0ID0gb3B0aW9ucy5kYXRlTGltaXQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUgPT09ICdvYmplY3QnKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLmRheXNPZldlZWsgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNvcHkgb2YgZGF5c09mV2VlayB0byBhdm9pZCBtb2RpZmljYXRpb24gb2Ygb3JpZ2luYWxcbiAgICAgICAgICAgICAgICAgICAgLy8gb3B0aW9ucyBvYmplY3QgZm9yIHJldXNhYmlsaXR5IGluIG11bHRpcGxlIGRhdGVyYW5nZXBpY2tlciBpbnN0YW5jZXNcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUuZGF5c09mV2VlayA9IG9wdGlvbnMubG9jYWxlLmRheXNPZldlZWsuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMubG9jYWxlLm1vbnRoTmFtZXMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS5tb250aE5hbWVzID0gb3B0aW9ucy5sb2NhbGUubW9udGhOYW1lcy5zbGljZSgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUuZmlyc3REYXkgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS5maXJzdERheSA9IG9wdGlvbnMubG9jYWxlLmZpcnN0RGF5O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUuYXBwbHlMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlLmFwcGx5TGFiZWwgPSBvcHRpb25zLmxvY2FsZS5hcHBseUxhYmVsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUuY2FuY2VsTGFiZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS5jYW5jZWxMYWJlbCA9IG9wdGlvbnMubG9jYWxlLmNhbmNlbExhYmVsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUuZnJvbUxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUuZnJvbUxhYmVsID0gb3B0aW9ucy5sb2NhbGUuZnJvbUxhYmVsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUudG9MYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlLnRvTGFiZWwgPSBvcHRpb25zLmxvY2FsZS50b0xhYmVsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUud2Vla0xhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgdGhpcy5sb2NhbGUud2Vla0xhYmVsID0gb3B0aW9ucy5sb2NhbGUud2Vla0xhYmVsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5sb2NhbGUuY3VzdG9tUmFuZ2VMYWJlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMubG9jYWxlLmN1c3RvbVJhbmdlTGFiZWwgPSBvcHRpb25zLmxvY2FsZS5jdXN0b21SYW5nZUxhYmVsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLm9wZW5zID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW5zID0gb3B0aW9ucy5vcGVucztcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNob3dXZWVrTnVtYmVycyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93V2Vla051bWJlcnMgPSBvcHRpb25zLnNob3dXZWVrTnVtYmVycztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLmJ1dHRvbkNsYXNzZXMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5idXR0b25DbGFzc2VzID0gW29wdGlvbnMuYnV0dG9uQ2xhc3Nlc107XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5idXR0b25DbGFzc2VzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uQ2xhc3NlcyA9IG9wdGlvbnMuYnV0dG9uQ2xhc3NlcztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNob3dEcm9wZG93bnMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0Ryb3Bkb3ducyA9IG9wdGlvbnMuc2hvd0Ryb3Bkb3ducztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnNpbmdsZURhdGVQaWNrZXIgPT09ICdib29sZWFuJykge1xuICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlRGF0ZVBpY2tlciA9IG9wdGlvbnMuc2luZ2xlRGF0ZVBpY2tlcjtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVEYXRlUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGltZVBpY2tlciA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lUGlja2VyID0gb3B0aW9ucy50aW1lUGlja2VyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMudGltZVBpY2tlckluY3JlbWVudCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXJJbmNyZW1lbnQgPSBvcHRpb25zLnRpbWVQaWNrZXJJbmNyZW1lbnQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy50aW1lUGlja2VyMTJIb3VyID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRpbWVQaWNrZXIxMkhvdXIgPSBvcHRpb25zLnRpbWVQaWNrZXIxMkhvdXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIHVwZGF0ZSBkYXkgbmFtZXMgb3JkZXIgdG8gZmlyc3REYXlcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsZS5maXJzdERheSAhPSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5sb2NhbGUuZmlyc3REYXk7XG4gICAgICAgICAgICAgICAgd2hpbGUgKGl0ZXJhdG9yID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2FsZS5kYXlzT2ZXZWVrLnB1c2godGhpcy5sb2NhbGUuZGF5c09mV2Vlay5zaGlmdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgaXRlcmF0b3ItLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBzdGFydCwgZW5kLCByYW5nZTtcblxuICAgICAgICAgICAgLy9pZiBubyBzdGFydC9lbmQgZGF0ZXMgc2V0LCBjaGVjayBpZiBhbiBpbnB1dCBlbGVtZW50IGNvbnRhaW5zIGluaXRpYWwgdmFsdWVzXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9wdGlvbnMuc3RhcnREYXRlID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygb3B0aW9ucy5lbmREYXRlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIGlmICgkKHRoaXMuZWxlbWVudCkuaXMoJ2lucHV0W3R5cGU9dGV4dF0nKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gJCh0aGlzLmVsZW1lbnQpLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3BsaXQgPSB2YWwuc3BsaXQodGhpcy5zZXBhcmF0b3IpO1xuICAgICAgICAgICAgICAgICAgICBzdGFydCA9IGVuZCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzcGxpdC5sZW5ndGggPT0gMikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBtb21lbnQoc3BsaXRbMF0sIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZCA9IG1vbWVudChzcGxpdFsxXSwgdGhpcy5mb3JtYXQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBtb21lbnQodmFsLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQgPSBtb21lbnQodmFsLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXJ0ICE9PSBudWxsICYmIGVuZCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBzdGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IGVuZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zLnJhbmdlcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHJhbmdlIGluIG9wdGlvbnMucmFuZ2VzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgc3RhcnQgPSBtb21lbnQob3B0aW9ucy5yYW5nZXNbcmFuZ2VdWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gbW9tZW50KG9wdGlvbnMucmFuZ2VzW3JhbmdlXVsxXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgaGF2ZSBhIG1pbi9tYXggZGF0ZSBzZXQsIGJvdW5kIHRoaXMgcmFuZ2VcbiAgICAgICAgICAgICAgICAgICAgLy8gdG8gaXQsIGJ1dCBvbmx5IGlmIGl0IHdvdWxkIG90aGVyd2lzZSBmYWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIG91dHNpZGUgb2YgdGhlIG1pbi9tYXguXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pbkRhdGUgJiYgc3RhcnQuaXNCZWZvcmUodGhpcy5taW5EYXRlKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gbW9tZW50KHRoaXMubWluRGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4RGF0ZSAmJiBlbmQuaXNBZnRlcih0aGlzLm1heERhdGUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kID0gbW9tZW50KHRoaXMubWF4RGF0ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVuZCBvZiB0aGUgcmFuZ2UgaXMgYmVmb3JlIHRoZSBtaW5pbXVtIChpZiBtaW4gaXMgc2V0KSBPUlxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgc3RhcnQgb2YgdGhlIHJhbmdlIGlzIGFmdGVyIHRoZSBtYXggKGFsc28gaWYgc2V0KSBkb24ndCBkaXNwbGF5IHRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmFuZ2Ugb3B0aW9uLlxuICAgICAgICAgICAgICAgICAgICBpZiAoKHRoaXMubWluRGF0ZSAmJiBlbmQuaXNCZWZvcmUodGhpcy5taW5EYXRlKSkgfHwgKHRoaXMubWF4RGF0ZSAmJiBzdGFydC5pc0FmdGVyKHRoaXMubWF4RGF0ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmFuZ2VzW3JhbmdlXSA9IFtzdGFydCwgZW5kXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbGlzdCA9ICc8dWw+JztcbiAgICAgICAgICAgICAgICBmb3IgKHJhbmdlIGluIHRoaXMucmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxpc3QgKz0gJzxsaT4nICsgcmFuZ2UgKyAnPC9saT4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsaXN0ICs9ICc8bGk+JyArIHRoaXMubG9jYWxlLmN1c3RvbVJhbmdlTGFiZWwgKyAnPC9saT4nO1xuICAgICAgICAgICAgICAgIGxpc3QgKz0gJzwvdWw+JztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzIHVsJykucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcycpLnByZXBlbmQobGlzdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNiID0gY2FsbGJhY2s7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy50aW1lUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSB0aGlzLmVuZERhdGUuZW5kT2YoJ2RheScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVEYXRlUGlja2VyKSB7XG4gICAgICAgICAgICBcdHRoaXMub3BlbnMgPSAncmlnaHQnO1xuICAgICAgICAgICAgXHR0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygnc2luZ2xlJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLnJpZ2h0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci5sZWZ0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy50aW1lUGlja2VyKSB7XG5cdCAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgXHR0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzIC5kYXRlcmFuZ2VwaWNrZXJfc3RhcnRfaW5wdXQsIC5yYW5nZXMgLmRhdGVyYW5nZXBpY2tlcl9lbmRfaW5wdXQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLnJpZ2h0JykuaGFzQ2xhc3MoJ3NpbmdsZScpKVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcuY2FsZW5kYXIucmlnaHQnKS5hZGRDbGFzcygnc2luZ2xlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXHR0aGlzLmNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2luZ2xlJyk7XG4gICAgICAgICAgICBcdHRoaXMuY29udGFpbmVyLmZpbmQoJy5jYWxlbmRhci5yaWdodCcpLnJlbW92ZUNsYXNzKCdzaW5nbGUnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzJykuc2hvdygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLm9sZFN0YXJ0RGF0ZSA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICB0aGlzLm9sZEVuZERhdGUgPSB0aGlzLmVuZERhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgIHRoaXMub2xkQ2hvc2VuTGFiZWwgPSB0aGlzLmNob3NlbkxhYmVsO1xuXG4gICAgICAgICAgICB0aGlzLmxlZnRDYWxlbmRhciA9IHtcbiAgICAgICAgICAgICAgICBtb250aDogbW9tZW50KFt0aGlzLnN0YXJ0RGF0ZS55ZWFyKCksIHRoaXMuc3RhcnREYXRlLm1vbnRoKCksIDEsIHRoaXMuc3RhcnREYXRlLmhvdXIoKSwgdGhpcy5zdGFydERhdGUubWludXRlKCldKSxcbiAgICAgICAgICAgICAgICBjYWxlbmRhcjogW11cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucmlnaHRDYWxlbmRhciA9IHtcbiAgICAgICAgICAgICAgICBtb250aDogbW9tZW50KFt0aGlzLmVuZERhdGUueWVhcigpLCB0aGlzLmVuZERhdGUubW9udGgoKSwgMSwgdGhpcy5lbmREYXRlLmhvdXIoKSwgdGhpcy5lbmREYXRlLm1pbnV0ZSgpXSksXG4gICAgICAgICAgICAgICAgY2FsZW5kYXI6IFtdXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAodGhpcy5vcGVucyA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgLy9zd2FwIGNhbGVuZGFyIHBvc2l0aW9uc1xuICAgICAgICAgICAgICAgIHZhciBsZWZ0ID0gdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLmxlZnQnKTtcbiAgICAgICAgICAgICAgICB2YXIgcmlnaHQgPSB0aGlzLmNvbnRhaW5lci5maW5kKCcuY2FsZW5kYXIucmlnaHQnKTtcblxuICAgICAgICAgICAgICAgIGlmIChyaWdodC5oYXNDbGFzcygnc2luZ2xlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQucmVtb3ZlQ2xhc3MoJ3NpbmdsZScpO1xuICAgICAgICAgICAgICAgICAgICBsZWZ0LmFkZENsYXNzKCdzaW5nbGUnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBsZWZ0LnJlbW92ZUNsYXNzKCdsZWZ0JykuYWRkQ2xhc3MoJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgICAgcmlnaHQucmVtb3ZlQ2xhc3MoJ3JpZ2h0JykuYWRkQ2xhc3MoJ2xlZnQnKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZURhdGVQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdC5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0LmhpZGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5yYW5nZXMgPT09ICd1bmRlZmluZWQnICYmICF0aGlzLnNpbmdsZURhdGVQaWNrZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygnc2hvdy1jYWxlbmRhcicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygnb3BlbnMnICsgdGhpcy5vcGVucyk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcblxuICAgICAgICB9LFxuXG4gICAgICAgIHNldFN0YXJ0RGF0ZTogZnVuY3Rpb24oc3RhcnREYXRlKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0YXJ0RGF0ZSA9PT0gJ3N0cmluZycpXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBtb21lbnQoc3RhcnREYXRlLCB0aGlzLmZvcm1hdCk7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc3RhcnREYXRlID09PSAnb2JqZWN0JylcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IG1vbWVudChzdGFydERhdGUpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMudGltZVBpY2tlcilcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHRoaXMuc3RhcnREYXRlLnN0YXJ0T2YoJ2RheScpO1xuXG4gICAgICAgICAgICB0aGlzLm9sZFN0YXJ0RGF0ZSA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRUZXh0KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0RW5kRGF0ZTogZnVuY3Rpb24oZW5kRGF0ZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBlbmREYXRlID09PSAnc3RyaW5nJylcbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBtb21lbnQoZW5kRGF0ZSwgdGhpcy5mb3JtYXQpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGVuZERhdGUgPT09ICdvYmplY3QnKVxuICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZSA9IG1vbWVudChlbmREYXRlKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnRpbWVQaWNrZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gdGhpcy5lbmREYXRlLmVuZE9mKCdkYXknKTtcblxuICAgICAgICAgICAgdGhpcy5vbGRFbmREYXRlID0gdGhpcy5lbmREYXRlLmNsb25lKCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRUZXh0KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlVmlldzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGgubW9udGgodGhpcy5zdGFydERhdGUubW9udGgoKSkueWVhcih0aGlzLnN0YXJ0RGF0ZS55ZWFyKCkpLmhvdXIodGhpcy5zdGFydERhdGUuaG91cigpKS5taW51dGUodGhpcy5zdGFydERhdGUubWludXRlKCkpO1xuICAgICAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLm1vbnRoKHRoaXMuZW5kRGF0ZS5tb250aCgpKS55ZWFyKHRoaXMuZW5kRGF0ZS55ZWFyKCkpLmhvdXIodGhpcy5lbmREYXRlLmhvdXIoKSkubWludXRlKHRoaXMuZW5kRGF0ZS5taW51dGUoKSk7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUZvcm1JbnB1dHMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVGb3JtSW5wdXRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPWRhdGVyYW5nZXBpY2tlcl9zdGFydF0nKS52YWwodGhpcy5zdGFydERhdGUuZm9ybWF0KHRoaXMuZm9ybWF0KSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPWRhdGVyYW5nZXBpY2tlcl9lbmRdJykudmFsKHRoaXMuZW5kRGF0ZS5mb3JtYXQodGhpcy5mb3JtYXQpKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhcnREYXRlLmlzU2FtZSh0aGlzLmVuZERhdGUpIHx8IHRoaXMuc3RhcnREYXRlLmlzQmVmb3JlKHRoaXMuZW5kRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdidXR0b24uYXBwbHlCdG4nKS5yZW1vdmVBdHRyKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdidXR0b24uYXBwbHlCdG4nKS5hdHRyKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUZyb21Db250cm9sOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5pcygnaW5wdXQnKSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQudmFsKCkubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBkYXRlU3RyaW5nID0gdGhpcy5lbGVtZW50LnZhbCgpLnNwbGl0KHRoaXMuc2VwYXJhdG9yKSxcbiAgICAgICAgICAgICAgICBzdGFydCA9IG51bGwsXG4gICAgICAgICAgICAgICAgZW5kID0gbnVsbDtcblxuICAgICAgICAgICAgaWYoZGF0ZVN0cmluZy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IG1vbWVudChkYXRlU3RyaW5nWzBdLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgZW5kID0gbW9tZW50KGRhdGVTdHJpbmdbMV0sIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlciB8fCBzdGFydCA9PT0gbnVsbCB8fCBlbmQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IG1vbWVudCh0aGlzLmVsZW1lbnQudmFsKCksIHRoaXMuZm9ybWF0KTtcbiAgICAgICAgICAgICAgICBlbmQgPSBzdGFydDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGVuZC5pc0JlZm9yZShzdGFydCkpIHJldHVybjtcblxuICAgICAgICAgICAgdGhpcy5vbGRTdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgdGhpcy5vbGRFbmREYXRlID0gdGhpcy5lbmREYXRlLmNsb25lKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gc3RhcnQ7XG4gICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBlbmQ7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5zdGFydERhdGUuaXNTYW1lKHRoaXMub2xkU3RhcnREYXRlKSB8fCAhdGhpcy5lbmREYXRlLmlzU2FtZSh0aGlzLm9sZEVuZERhdGUpKVxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCk7XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbm90aWZ5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMuY2IodGhpcy5zdGFydERhdGUsIHRoaXMuZW5kRGF0ZSwgdGhpcy5jaG9zZW5MYWJlbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG4gICAgICAgICAgICB2YXIgcGFyZW50UmlnaHRFZGdlID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGFyZW50RWwuaXMoJ2JvZHknKSkge1xuICAgICAgICAgICAgICAgIHBhcmVudE9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB0aGlzLnBhcmVudEVsLm9mZnNldCgpLnRvcCAtIHRoaXMucGFyZW50RWwuc2Nyb2xsVG9wKCksXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRoaXMucGFyZW50RWwub2Zmc2V0KCkubGVmdCAtIHRoaXMucGFyZW50RWwuc2Nyb2xsTGVmdCgpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBwYXJlbnRSaWdodEVkZ2UgPSB0aGlzLnBhcmVudEVsWzBdLmNsaWVudFdpZHRoICsgdGhpcy5wYXJlbnRFbC5vZmZzZXQoKS5sZWZ0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5vcGVucyA9PSAnbGVmdCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC5vZmZzZXQoKS50b3AgKyB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHBhcmVudE9mZnNldC50b3AsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBwYXJlbnRSaWdodEVkZ2UgLSB0aGlzLmVsZW1lbnQub2Zmc2V0KCkubGVmdCAtIHRoaXMuZWxlbWVudC5vdXRlcldpZHRoKCksXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICdhdXRvJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbnRhaW5lci5vZmZzZXQoKS5sZWZ0IDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6ICdhdXRvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICB0b3A6IHRoaXMuZWxlbWVudC5vZmZzZXQoKS50b3AgKyB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHBhcmVudE9mZnNldC50b3AsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IHRoaXMuZWxlbWVudC5vZmZzZXQoKS5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnYXV0bydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb250YWluZXIub2Zmc2V0KCkubGVmdCArIHRoaXMuY29udGFpbmVyLm91dGVyV2lkdGgoKSA+ICQod2luZG93KS53aWR0aCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNzcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnYXV0bycsXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdzogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2hvd2luZykgcmV0dXJuO1xuXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlKCk7XG5cbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIGNsaWNrIHByb3h5IHRoYXQgaXMgcHJpdmF0ZSB0byB0aGlzIGluc3RhbmNlIG9mIGRhdGVwaWNrZXIsIGZvciB1bmJpbmRpbmdcbiAgICAgICAgICAgIHRoaXMuX291dHNpZGVDbGlja1Byb3h5ID0gJC5wcm94eShmdW5jdGlvbiAoZSkgeyB0aGlzLm91dHNpZGVDbGljayhlKTsgfSwgdGhpcyk7XG4gICAgICAgICAgICAvLyBCaW5kIGdsb2JhbCBkYXRlcGlja2VyIG1vdXNlZG93biBmb3IgaGlkaW5nIGFuZFxuICAgICAgICAgICAgJChkb2N1bWVudClcbiAgICAgICAgICAgICAgLm9uKCdtb3VzZWRvd24uZGF0ZXJhbmdlcGlja2VyJywgdGhpcy5fb3V0c2lkZUNsaWNrUHJveHkpXG4gICAgICAgICAgICAgIC8vIGFsc28gZXhwbGljaXRseSBwbGF5IG5pY2Ugd2l0aCBCb290c3RyYXAgZHJvcGRvd25zLCB3aGljaCBzdG9wUHJvcGFnYXRpb24gd2hlbiBjbGlja2luZyB0aGVtXG4gICAgICAgICAgICAgIC5vbignY2xpY2suZGF0ZXJhbmdlcGlja2VyJywgJ1tkYXRhLXRvZ2dsZT1kcm9wZG93bl0nLCB0aGlzLl9vdXRzaWRlQ2xpY2tQcm94eSlcbiAgICAgICAgICAgICAgLy8gYW5kIGFsc28gY2xvc2Ugd2hlbiBmb2N1cyBjaGFuZ2VzIHRvIG91dHNpZGUgdGhlIHBpY2tlciAoZWcuIHRhYmJpbmcgYmV0d2VlbiBjb250cm9scylcbiAgICAgICAgICAgICAgLm9uKCdmb2N1c2luLmRhdGVyYW5nZXBpY2tlcicsIHRoaXMuX291dHNpZGVDbGlja1Byb3h5KTtcblxuICAgICAgICAgICAgdGhpcy5pc1Nob3dpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ3Nob3cuZGF0ZXJhbmdlcGlja2VyJywgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb3V0c2lkZUNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgLy8gaWYgdGhlIHBhZ2UgaXMgY2xpY2tlZCBhbnl3aGVyZSBleGNlcHQgd2l0aGluIHRoZSBkYXRlcmFuZ2VycGlja2VyL2J1dHRvblxuICAgICAgICAgICAgLy8gaXRzZWxmIHRoZW4gY2FsbCB0aGlzLmhpZGUoKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KHRoaXMuZWxlbWVudCkubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsb3Nlc3QodGhpcy5jb250YWluZXIpLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgIHRhcmdldC5jbG9zZXN0KCcuY2FsZW5kYXItZGF0ZScpLmxlbmd0aFxuICAgICAgICAgICAgICAgICkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1Nob3dpbmcpIHJldHVybjtcblxuICAgICAgICAgICAgJChkb2N1bWVudClcbiAgICAgICAgICAgICAgLm9mZignbW91c2Vkb3duLmRhdGVyYW5nZXBpY2tlcicpXG4gICAgICAgICAgICAgIC5vZmYoJ2NsaWNrLmRhdGVyYW5nZXBpY2tlcicsICdbZGF0YS10b2dnbGU9ZHJvcGRvd25dJylcbiAgICAgICAgICAgICAgLm9mZignZm9jdXNpbi5kYXRlcmFuZ2VwaWNrZXInKTtcblxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmhpZGUoKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnN0YXJ0RGF0ZS5pc1NhbWUodGhpcy5vbGRTdGFydERhdGUpIHx8ICF0aGlzLmVuZERhdGUuaXNTYW1lKHRoaXMub2xkRW5kRGF0ZSkpXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoKTtcblxuICAgICAgICAgICAgdGhpcy5vbGRTdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZS5jbG9uZSgpO1xuICAgICAgICAgICAgdGhpcy5vbGRFbmREYXRlID0gdGhpcy5lbmREYXRlLmNsb25lKCk7XG5cbiAgICAgICAgICAgIHRoaXMuaXNTaG93aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcignaGlkZS5kYXRlcmFuZ2VwaWNrZXInLCB0aGlzKTtcbiAgICAgICAgfSxcblxuICAgICAgICBlbnRlclJhbmdlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gbW91c2UgcG9pbnRlciBoYXMgZW50ZXJlZCBhIHJhbmdlIGxhYmVsXG4gICAgICAgICAgICB2YXIgbGFiZWwgPSBlLnRhcmdldC5pbm5lckhUTUw7XG4gICAgICAgICAgICBpZiAobGFiZWwgPT0gdGhpcy5sb2NhbGUuY3VzdG9tUmFuZ2VMYWJlbCkge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZXMgPSB0aGlzLnJhbmdlc1tsYWJlbF07XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1kYXRlcmFuZ2VwaWNrZXJfc3RhcnRdJykudmFsKGRhdGVzWzBdLmZvcm1hdCh0aGlzLmZvcm1hdCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmZpbmQoJ2lucHV0W25hbWU9ZGF0ZXJhbmdlcGlja2VyX2VuZF0nKS52YWwoZGF0ZXNbMV0uZm9ybWF0KHRoaXMuZm9ybWF0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd0NhbGVuZGFyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygnc2hvdy1jYWxlbmRhcicpO1xuICAgICAgICAgICAgdGhpcy5tb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQudHJpZ2dlcignc2hvd0NhbGVuZGFyLmRhdGVyYW5nZXBpY2tlcicsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGVDYWxlbmRhcnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ3Nob3ctY2FsZW5kYXInKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKCdoaWRlQ2FsZW5kYXIuZGF0ZXJhbmdlcGlja2VyJywgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gd2hlbiBhIGRhdGUgaXMgdHlwZWQgaW50byB0aGUgc3RhcnQgdG8gZW5kIGRhdGUgdGV4dGJveGVzXG4gICAgICAgIGlucHV0c0NoYW5nZWQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBkYXRlID0gbW9tZW50KGVsLnZhbCgpLCB0aGlzLmZvcm1hdCk7XG4gICAgICAgICAgICBpZiAoIWRhdGUuaXNWYWxpZCgpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBzdGFydERhdGUsIGVuZERhdGU7XG4gICAgICAgICAgICBpZiAoZWwuYXR0cignbmFtZScpID09PSAnZGF0ZXJhbmdlcGlja2VyX3N0YXJ0Jykge1xuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSA9IGRhdGU7XG4gICAgICAgICAgICAgICAgZW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlID0gdGhpcy5zdGFydERhdGU7XG4gICAgICAgICAgICAgICAgZW5kRGF0ZSA9IGRhdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNldEN1c3RvbURhdGVzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5wdXRzS2V5ZG93bjogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlucHV0c0NoYW5nZWQoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVJbnB1dFRleHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pcygnaW5wdXQnKSAmJiAhdGhpcy5zaW5nbGVEYXRlUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnZhbCh0aGlzLnN0YXJ0RGF0ZS5mb3JtYXQodGhpcy5mb3JtYXQpICsgdGhpcy5zZXBhcmF0b3IgKyB0aGlzLmVuZERhdGUuZm9ybWF0KHRoaXMuZm9ybWF0KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZWxlbWVudC5pcygnaW5wdXQnKSkge1xuICAgICAgICAgICAgXHR0aGlzLmVsZW1lbnQudmFsKHRoaXMuZW5kRGF0ZS5mb3JtYXQodGhpcy5mb3JtYXQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjbGlja1JhbmdlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGxhYmVsID0gZS50YXJnZXQuaW5uZXJIVE1MO1xuICAgICAgICAgICAgdGhpcy5jaG9zZW5MYWJlbCA9IGxhYmVsO1xuICAgICAgICAgICAgaWYgKGxhYmVsID09IHRoaXMubG9jYWxlLmN1c3RvbVJhbmdlTGFiZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGVzID0gdGhpcy5yYW5nZXNbbGFiZWxdO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBkYXRlc1swXTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBkYXRlc1sxXTtcblxuICAgICAgICAgICAgICAgIGlmICghdGhpcy50aW1lUGlja2VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGUuZW5kT2YoJ2RheScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLm1vbnRoKHRoaXMuc3RhcnREYXRlLm1vbnRoKCkpLnllYXIodGhpcy5zdGFydERhdGUueWVhcigpKS5ob3VyKHRoaXMuc3RhcnREYXRlLmhvdXIoKSkubWludXRlKHRoaXMuc3RhcnREYXRlLm1pbnV0ZSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGgubW9udGgodGhpcy5lbmREYXRlLm1vbnRoKCkpLnllYXIodGhpcy5lbmREYXRlLnllYXIoKSkuaG91cih0aGlzLmVuZERhdGUuaG91cigpKS5taW51dGUodGhpcy5lbmREYXRlLm1pbnV0ZSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFycygpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dFRleHQoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZUNhbGVuZGFycygpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKCdhcHBseS5kYXRlcmFuZ2VwaWNrZXInLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjbGlja1ByZXY6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2FsID0gJChlLnRhcmdldCkucGFyZW50cygnLmNhbGVuZGFyJyk7XG4gICAgICAgICAgICBpZiAoY2FsLmhhc0NsYXNzKCdsZWZ0JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRDYWxlbmRhci5tb250aC5zdWJ0cmFjdCgxLCAnbW9udGgnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLm1vbnRoLnN1YnRyYWN0KDEsICdtb250aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbGlja05leHQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgY2FsID0gJChlLnRhcmdldCkucGFyZW50cygnLmNhbGVuZGFyJyk7XG4gICAgICAgICAgICBpZiAoY2FsLmhhc0NsYXNzKCdsZWZ0JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxlZnRDYWxlbmRhci5tb250aC5hZGQoMSwgJ21vbnRoJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5hZGQoMSwgJ21vbnRoJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhvdmVyRGF0ZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQoZS50YXJnZXQpLmF0dHIoJ2RhdGEtdGl0bGUnKTtcbiAgICAgICAgICAgIHZhciByb3cgPSB0aXRsZS5zdWJzdHIoMSwgMSk7XG4gICAgICAgICAgICB2YXIgY29sID0gdGl0bGUuc3Vic3RyKDMsIDEpO1xuICAgICAgICAgICAgdmFyIGNhbCA9ICQoZS50YXJnZXQpLnBhcmVudHMoJy5jYWxlbmRhcicpO1xuXG4gICAgICAgICAgICBpZiAoY2FsLmhhc0NsYXNzKCdsZWZ0JykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPWRhdGVyYW5nZXBpY2tlcl9zdGFydF0nKS52YWwodGhpcy5sZWZ0Q2FsZW5kYXIuY2FsZW5kYXJbcm93XVtjb2xdLmZvcm1hdCh0aGlzLmZvcm1hdCkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPWRhdGVyYW5nZXBpY2tlcl9lbmRdJykudmFsKHRoaXMucmlnaHRDYWxlbmRhci5jYWxlbmRhcltyb3ddW2NvbF0uZm9ybWF0KHRoaXMuZm9ybWF0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0Q3VzdG9tRGF0ZXM6IGZ1bmN0aW9uKHN0YXJ0RGF0ZSwgZW5kRGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5jaG9zZW5MYWJlbCA9IHRoaXMubG9jYWxlLmN1c3RvbVJhbmdlTGFiZWw7XG4gICAgICAgICAgICBpZiAoc3RhcnREYXRlLmlzQWZ0ZXIoZW5kRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGlmZmVyZW5jZSA9IHRoaXMuZW5kRGF0ZS5kaWZmKHRoaXMuc3RhcnREYXRlKTtcbiAgICAgICAgICAgICAgICBlbmREYXRlID0gbW9tZW50KHN0YXJ0RGF0ZSkuYWRkKGRpZmZlcmVuY2UsICdtcycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zdGFydERhdGUgPSBzdGFydERhdGU7XG4gICAgICAgICAgICB0aGlzLmVuZERhdGUgPSBlbmREYXRlO1xuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsZW5kYXJzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpY2tEYXRlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRpdGxlID0gJChlLnRhcmdldCkuYXR0cignZGF0YS10aXRsZScpO1xuICAgICAgICAgICAgdmFyIHJvdyA9IHRpdGxlLnN1YnN0cigxLCAxKTtcbiAgICAgICAgICAgIHZhciBjb2wgPSB0aXRsZS5zdWJzdHIoMywgMSk7XG4gICAgICAgICAgICB2YXIgY2FsID0gJChlLnRhcmdldCkucGFyZW50cygnLmNhbGVuZGFyJyk7XG5cbiAgICAgICAgICAgIHZhciBzdGFydERhdGUsIGVuZERhdGU7XG4gICAgICAgICAgICBpZiAoY2FsLmhhc0NsYXNzKCdsZWZ0JykpIHtcbiAgICAgICAgICAgICAgICBzdGFydERhdGUgPSB0aGlzLmxlZnRDYWxlbmRhci5jYWxlbmRhcltyb3ddW2NvbF07XG4gICAgICAgICAgICAgICAgZW5kRGF0ZSA9IHRoaXMuZW5kRGF0ZTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0ZUxpbWl0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWF4RGF0ZSA9IG1vbWVudChzdGFydERhdGUpLmFkZCh0aGlzLmRhdGVMaW1pdCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmREYXRlLmlzQWZ0ZXIobWF4RGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZERhdGUgPSBtYXhEYXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGFydERhdGUgPSB0aGlzLnN0YXJ0RGF0ZTtcbiAgICAgICAgICAgICAgICBlbmREYXRlID0gdGhpcy5yaWdodENhbGVuZGFyLmNhbGVuZGFyW3Jvd11bY29sXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0ZUxpbWl0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWluRGF0ZSA9IG1vbWVudChlbmREYXRlKS5zdWJ0cmFjdCh0aGlzLmRhdGVMaW1pdCkuc3RhcnRPZignZGF5Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGFydERhdGUuaXNCZWZvcmUobWluRGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSA9IG1pbkRhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNpbmdsZURhdGVQaWNrZXIgJiYgY2FsLmhhc0NsYXNzKCdsZWZ0JykpIHtcbiAgICAgICAgICAgICAgICBlbmREYXRlID0gc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2luZ2xlRGF0ZVBpY2tlciAmJiBjYWwuaGFzQ2xhc3MoJ3JpZ2h0JykpIHtcbiAgICAgICAgICAgICAgICBzdGFydERhdGUgPSBlbmREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNhbC5maW5kKCd0ZCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICB0aGlzLnNldEN1c3RvbURhdGVzKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy50aW1lUGlja2VyKVxuICAgICAgICAgICAgICAgIGVuZERhdGUuZW5kT2YoJ2RheScpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaW5nbGVEYXRlUGlja2VyICYmICF0aGlzLnRpbWVQaWNrZXIpXG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja0FwcGx5KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xpY2tBcHBseTogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXRUZXh0KCk7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC50cmlnZ2VyKCdhcHBseS5kYXRlcmFuZ2VwaWNrZXInLCB0aGlzKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbGlja0NhbmNlbDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlID0gdGhpcy5vbGRTdGFydERhdGU7XG4gICAgICAgICAgICB0aGlzLmVuZERhdGUgPSB0aGlzLm9sZEVuZERhdGU7XG4gICAgICAgICAgICB0aGlzLmNob3NlbkxhYmVsID0gdGhpcy5vbGRDaG9zZW5MYWJlbDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlldygpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoJ2NhbmNlbC5kYXRlcmFuZ2VwaWNrZXInLCB0aGlzKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVNb250aFllYXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgaXNMZWZ0ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhbGVuZGFyJykuaGFzQ2xhc3MoJ2xlZnQnKSxcbiAgICAgICAgICAgICAgICBsZWZ0T3JSaWdodCA9IGlzTGVmdCA/ICdsZWZ0JyA6ICdyaWdodCcsXG4gICAgICAgICAgICAgICAgY2FsID0gdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLicrbGVmdE9yUmlnaHQpO1xuXG4gICAgICAgICAgICAvLyBNb250aCBtdXN0IGJlIE51bWJlciBmb3IgbmV3IG1vbWVudCB2ZXJzaW9uc1xuICAgICAgICAgICAgdmFyIG1vbnRoID0gcGFyc2VJbnQoY2FsLmZpbmQoJy5tb250aHNlbGVjdCcpLnZhbCgpLCAxMCk7XG4gICAgICAgICAgICB2YXIgeWVhciA9IGNhbC5maW5kKCcueWVhcnNlbGVjdCcpLnZhbCgpO1xuXG4gICAgICAgICAgICB0aGlzW2xlZnRPclJpZ2h0KydDYWxlbmRhciddLm1vbnRoLm1vbnRoKG1vbnRoKS55ZWFyKHllYXIpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxlbmRhcnMoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVUaW1lOiBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgICAgIHZhciBjYWwgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2FsZW5kYXInKSxcbiAgICAgICAgICAgICAgICBpc0xlZnQgPSBjYWwuaGFzQ2xhc3MoJ2xlZnQnKTtcblxuICAgICAgICAgICAgdmFyIGhvdXIgPSBwYXJzZUludChjYWwuZmluZCgnLmhvdXJzZWxlY3QnKS52YWwoKSwgMTApO1xuICAgICAgICAgICAgdmFyIG1pbnV0ZSA9IHBhcnNlSW50KGNhbC5maW5kKCcubWludXRlc2VsZWN0JykudmFsKCksIDEwKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMudGltZVBpY2tlcjEySG91cikge1xuICAgICAgICAgICAgICAgIHZhciBhbXBtID0gY2FsLmZpbmQoJy5hbXBtc2VsZWN0JykudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKGFtcG0gPT09ICdQTScgJiYgaG91ciA8IDEyKVxuICAgICAgICAgICAgICAgICAgICBob3VyICs9IDEyO1xuICAgICAgICAgICAgICAgIGlmIChhbXBtID09PSAnQU0nICYmIGhvdXIgPT09IDEyKVxuICAgICAgICAgICAgICAgICAgICBob3VyID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGlzTGVmdCkge1xuICAgICAgICAgICAgICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnREYXRlLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgc3RhcnQuaG91cihob3VyKTtcbiAgICAgICAgICAgICAgICBzdGFydC5taW51dGUobWludXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZSA9IHN0YXJ0O1xuICAgICAgICAgICAgICAgIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLmhvdXIoaG91cikubWludXRlKG1pbnV0ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSB0aGlzLmVuZERhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBlbmQuaG91cihob3VyKTtcbiAgICAgICAgICAgICAgICBlbmQubWludXRlKG1pbnV0ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlID0gZW5kO1xuICAgICAgICAgICAgICAgIHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5ob3VyKGhvdXIpLm1pbnV0ZShtaW51dGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbGVuZGFycygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZUNhbGVuZGFyczogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5sZWZ0Q2FsZW5kYXIuY2FsZW5kYXIgPSB0aGlzLmJ1aWxkQ2FsZW5kYXIodGhpcy5sZWZ0Q2FsZW5kYXIubW9udGgubW9udGgoKSwgdGhpcy5sZWZ0Q2FsZW5kYXIubW9udGgueWVhcigpLCB0aGlzLmxlZnRDYWxlbmRhci5tb250aC5ob3VyKCksIHRoaXMubGVmdENhbGVuZGFyLm1vbnRoLm1pbnV0ZSgpLCAnbGVmdCcpO1xuICAgICAgICAgICAgdGhpcy5yaWdodENhbGVuZGFyLmNhbGVuZGFyID0gdGhpcy5idWlsZENhbGVuZGFyKHRoaXMucmlnaHRDYWxlbmRhci5tb250aC5tb250aCgpLCB0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGgueWVhcigpLCB0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGguaG91cigpLCB0aGlzLnJpZ2h0Q2FsZW5kYXIubW9udGgubWludXRlKCksICdyaWdodCcpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuZmluZCgnLmNhbGVuZGFyLmxlZnQnKS5lbXB0eSgpLmh0bWwodGhpcy5yZW5kZXJDYWxlbmRhcih0aGlzLmxlZnRDYWxlbmRhci5jYWxlbmRhciwgdGhpcy5zdGFydERhdGUsIHRoaXMubWluRGF0ZSwgdGhpcy5tYXhEYXRlKSk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcuY2FsZW5kYXIucmlnaHQnKS5lbXB0eSgpLmh0bWwodGhpcy5yZW5kZXJDYWxlbmRhcih0aGlzLnJpZ2h0Q2FsZW5kYXIuY2FsZW5kYXIsIHRoaXMuZW5kRGF0ZSwgdGhpcy5zaW5nbGVEYXRlUGlja2VyID8gdGhpcy5taW5EYXRlIDogdGhpcy5zdGFydERhdGUsIHRoaXMubWF4RGF0ZSkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5maW5kKCcucmFuZ2VzIGxpJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIGN1c3RvbVJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIHJhbmdlIGluIHRoaXMucmFuZ2VzKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudGltZVBpY2tlcikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydERhdGUuaXNTYW1lKHRoaXMucmFuZ2VzW3JhbmdlXVswXSkgJiYgdGhpcy5lbmREYXRlLmlzU2FtZSh0aGlzLnJhbmdlc1tyYW5nZV1bMV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXN0b21SYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaG9zZW5MYWJlbCA9IHRoaXMuY29udGFpbmVyLmZpbmQoJy5yYW5nZXMgbGk6ZXEoJyArIGkgKyAnKScpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKCdhY3RpdmUnKS5odG1sKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL2lnbm9yZSB0aW1lcyB3aGVuIGNvbXBhcmluZyBkYXRlcyBpZiB0aW1lIHBpY2tlciBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydERhdGUuZm9ybWF0KCdZWVlZLU1NLUREJykgPT0gdGhpcy5yYW5nZXNbcmFuZ2VdWzBdLmZvcm1hdCgnWVlZWS1NTS1ERCcpICYmIHRoaXMuZW5kRGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKSA9PSB0aGlzLnJhbmdlc1tyYW5nZV1bMV0uZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1c3RvbVJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNob3NlbkxhYmVsID0gdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcyBsaTplcSgnICsgaSArICcpJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2FjdGl2ZScpLmh0bWwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VzdG9tUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNob3NlbkxhYmVsID0gdGhpcy5jb250YWluZXIuZmluZCgnLnJhbmdlcyBsaTpsYXN0JykuYWRkQ2xhc3MoJ2FjdGl2ZScpLmh0bWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dDYWxlbmRhcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBidWlsZENhbGVuZGFyOiBmdW5jdGlvbiAobW9udGgsIHllYXIsIGhvdXIsIG1pbnV0ZSwgc2lkZSkge1xuICAgICAgICAgICAgdmFyIGRheXNJbk1vbnRoID0gbW9tZW50KFt5ZWFyLCBtb250aF0pLmRheXNJbk1vbnRoKCk7XG4gICAgICAgICAgICB2YXIgZmlyc3REYXkgPSBtb21lbnQoW3llYXIsIG1vbnRoLCAxXSk7XG4gICAgICAgICAgICB2YXIgbGFzdERheSA9IG1vbWVudChbeWVhciwgbW9udGgsIGRheXNJbk1vbnRoXSk7XG4gICAgICAgICAgICB2YXIgbGFzdE1vbnRoID0gbW9tZW50KGZpcnN0RGF5KS5zdWJ0cmFjdCgxLCAnbW9udGgnKS5tb250aCgpO1xuICAgICAgICAgICAgdmFyIGxhc3RZZWFyID0gbW9tZW50KGZpcnN0RGF5KS5zdWJ0cmFjdCgxLCAnbW9udGgnKS55ZWFyKCk7XG5cbiAgICAgICAgICAgIHZhciBkYXlzSW5MYXN0TW9udGggPSBtb21lbnQoW2xhc3RZZWFyLCBsYXN0TW9udGhdKS5kYXlzSW5Nb250aCgpO1xuXG4gICAgICAgICAgICB2YXIgZGF5T2ZXZWVrID0gZmlyc3REYXkuZGF5KCk7XG5cbiAgICAgICAgICAgIHZhciBpO1xuXG4gICAgICAgICAgICAvL2luaXRpYWxpemUgYSA2IHJvd3MgeCA3IGNvbHVtbnMgYXJyYXkgZm9yIHRoZSBjYWxlbmRhclxuICAgICAgICAgICAgdmFyIGNhbGVuZGFyID0gW107XG4gICAgICAgICAgICBjYWxlbmRhci5maXJzdERheSA9IGZpcnN0RGF5O1xuICAgICAgICAgICAgY2FsZW5kYXIubGFzdERheSA9IGxhc3REYXk7XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYWxlbmRhcltpXSA9IFtdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL3BvcHVsYXRlIHRoZSBjYWxlbmRhciB3aXRoIGRhdGUgb2JqZWN0c1xuICAgICAgICAgICAgdmFyIHN0YXJ0RGF5ID0gZGF5c0luTGFzdE1vbnRoIC0gZGF5T2ZXZWVrICsgdGhpcy5sb2NhbGUuZmlyc3REYXkgKyAxO1xuICAgICAgICAgICAgaWYgKHN0YXJ0RGF5ID4gZGF5c0luTGFzdE1vbnRoKVxuICAgICAgICAgICAgICAgIHN0YXJ0RGF5IC09IDc7XG5cbiAgICAgICAgICAgIGlmIChkYXlPZldlZWsgPT0gdGhpcy5sb2NhbGUuZmlyc3REYXkpXG4gICAgICAgICAgICAgICAgc3RhcnREYXkgPSBkYXlzSW5MYXN0TW9udGggLSA2O1xuXG4gICAgICAgICAgICB2YXIgY3VyRGF0ZSA9IG1vbWVudChbbGFzdFllYXIsIGxhc3RNb250aCwgc3RhcnREYXksIDEyLCBtaW51dGVdKTtcbiAgICAgICAgICAgIHZhciBjb2wsIHJvdztcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIGNvbCA9IDAsIHJvdyA9IDA7IGkgPCA0MjsgaSsrLCBjb2wrKywgY3VyRGF0ZSA9IG1vbWVudChjdXJEYXRlKS5hZGQoMjQsICdob3VyJykpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA+IDAgJiYgY29sICUgNyA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb2wgPSAwO1xuICAgICAgICAgICAgICAgICAgICByb3crKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2FsZW5kYXJbcm93XVtjb2xdID0gY3VyRGF0ZS5jbG9uZSgpLmhvdXIoaG91cik7XG4gICAgICAgICAgICAgICAgY3VyRGF0ZS5ob3VyKDEyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNhbGVuZGFyO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlckRyb3Bkb3duczogZnVuY3Rpb24gKHNlbGVjdGVkLCBtaW5EYXRlLCBtYXhEYXRlKSB7XG4gICAgICAgICAgICB2YXIgY3VycmVudE1vbnRoID0gc2VsZWN0ZWQubW9udGgoKTtcbiAgICAgICAgICAgIHZhciBtb250aEh0bWwgPSAnPHNlbGVjdCBjbGFzcz1cIm1vbnRoc2VsZWN0XCI+JztcbiAgICAgICAgICAgIHZhciBpbk1pblllYXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBpbk1heFllYXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgZm9yICh2YXIgbSA9IDA7IG0gPCAxMjsgbSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCghaW5NaW5ZZWFyIHx8IG0gPj0gbWluRGF0ZS5tb250aCgpKSAmJiAoIWluTWF4WWVhciB8fCBtIDw9IG1heERhdGUubW9udGgoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9udGhIdG1sICs9IFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBtICsgXCInXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgKG0gPT09IGN1cnJlbnRNb250aCA/IFwiIHNlbGVjdGVkPSdzZWxlY3RlZCdcIiA6IFwiXCIpICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPlwiICsgdGhpcy5sb2NhbGUubW9udGhOYW1lc1ttXSArIFwiPC9vcHRpb24+XCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbW9udGhIdG1sICs9IFwiPC9zZWxlY3Q+XCI7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50WWVhciA9IHNlbGVjdGVkLnllYXIoKTtcbiAgICAgICAgICAgIHZhciBtYXhZZWFyID0gKG1heERhdGUgJiYgbWF4RGF0ZS55ZWFyKCkpIHx8IChjdXJyZW50WWVhciArIDUpO1xuICAgICAgICAgICAgdmFyIG1pblllYXIgPSAobWluRGF0ZSAmJiBtaW5EYXRlLnllYXIoKSkgfHwgKGN1cnJlbnRZZWFyIC0gNTApO1xuICAgICAgICAgICAgdmFyIHllYXJIdG1sID0gJzxzZWxlY3QgY2xhc3M9XCJ5ZWFyc2VsZWN0XCI+JztcblxuICAgICAgICAgICAgZm9yICh2YXIgeSA9IG1pblllYXI7IHkgPD0gbWF4WWVhcjsgeSsrKSB7XG4gICAgICAgICAgICAgICAgeWVhckh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgeSArICdcIicgK1xuICAgICAgICAgICAgICAgICAgICAoeSA9PT0gY3VycmVudFllYXIgPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJykgK1xuICAgICAgICAgICAgICAgICAgICAnPicgKyB5ICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHllYXJIdG1sICs9ICc8L3NlbGVjdD4nO1xuXG4gICAgICAgICAgICByZXR1cm4gbW9udGhIdG1sICsgeWVhckh0bWw7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyQ2FsZW5kYXI6IGZ1bmN0aW9uIChjYWxlbmRhciwgc2VsZWN0ZWQsIG1pbkRhdGUsIG1heERhdGUpIHtcblxuICAgICAgICAgICAgdmFyIGh0bWwgPSAnPGRpdiBjbGFzcz1cImNhbGVuZGFyLWRhdGVcIj4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPHRhYmxlIGNsYXNzPVwidGFibGUtY29uZGVuc2VkXCI+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzx0aGVhZD4nO1xuICAgICAgICAgICAgaHRtbCArPSAnPHRyPic7XG5cbiAgICAgICAgICAgIC8vIGFkZCBlbXB0eSBjZWxsIGZvciB3ZWVrIG51bWJlclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd1dlZWtOdW1iZXJzKVxuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0aD48L3RoPic7XG5cbiAgICAgICAgICAgIGlmICghbWluRGF0ZSB8fCBtaW5EYXRlLmlzQmVmb3JlKGNhbGVuZGFyLmZpcnN0RGF5KSkge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0aCBjbGFzcz1cInByZXYgYXZhaWxhYmxlXCI+PGkgY2xhc3M9XCJmYSBmYS1hcnJvdy1sZWZ0IGljb24tYXJyb3ctbGVmdCBnbHlwaGljb24gZ2x5cGhpY29uLWFycm93LWxlZnRcIj48L2k+PC90aD4nO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGg+PC90aD4nO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZGF0ZUh0bWwgPSB0aGlzLmxvY2FsZS5tb250aE5hbWVzW2NhbGVuZGFyWzFdWzFdLm1vbnRoKCldICsgY2FsZW5kYXJbMV1bMV0uZm9ybWF0KFwiIFlZWVlcIik7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dEcm9wZG93bnMpIHtcbiAgICAgICAgICAgICAgICBkYXRlSHRtbCA9IHRoaXMucmVuZGVyRHJvcGRvd25zKGNhbGVuZGFyWzFdWzFdLCBtaW5EYXRlLCBtYXhEYXRlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaHRtbCArPSAnPHRoIGNvbHNwYW49XCI1XCIgY2xhc3M9XCJtb250aFwiPicgKyBkYXRlSHRtbCArICc8L3RoPic7XG4gICAgICAgICAgICBpZiAoIW1heERhdGUgfHwgbWF4RGF0ZS5pc0FmdGVyKGNhbGVuZGFyLmxhc3REYXkpKSB7XG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPHRoIGNsYXNzPVwibmV4dCBhdmFpbGFibGVcIj48aSBjbGFzcz1cImZhIGZhLWFycm93LXJpZ2h0IGljb24tYXJyb3ctcmlnaHQgZ2x5cGhpY29uIGdseXBoaWNvbi1hcnJvdy1yaWdodFwiPjwvaT48L3RoPic7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0aD48L3RoPic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGh0bWwgKz0gJzwvdHI+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzx0cj4nO1xuXG4gICAgICAgICAgICAvLyBhZGQgd2VlayBudW1iZXIgbGFiZWxcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dXZWVrTnVtYmVycylcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dGggY2xhc3M9XCJ3ZWVrXCI+JyArIHRoaXMubG9jYWxlLndlZWtMYWJlbCArICc8L3RoPic7XG5cbiAgICAgICAgICAgICQuZWFjaCh0aGlzLmxvY2FsZS5kYXlzT2ZXZWVrLCBmdW5jdGlvbiAoaW5kZXgsIGRheU9mV2Vlaykge1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzx0aD4nICsgZGF5T2ZXZWVrICsgJzwvdGg+JztcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBodG1sICs9ICc8L3RyPic7XG4gICAgICAgICAgICBodG1sICs9ICc8L3RoZWFkPic7XG4gICAgICAgICAgICBodG1sICs9ICc8dGJvZHk+JztcblxuICAgICAgICAgICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgNjsgcm93KyspIHtcbiAgICAgICAgICAgICAgICBodG1sICs9ICc8dHI+JztcblxuICAgICAgICAgICAgICAgIC8vIGFkZCB3ZWVrIG51bWJlclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dXZWVrTnVtYmVycylcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHRkIGNsYXNzPVwid2Vla1wiPicgKyBjYWxlbmRhcltyb3ddWzBdLndlZWsoKSArICc8L3RkPic7XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCA3OyBjb2wrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY25hbWUgPSAnYXZhaWxhYmxlICc7XG4gICAgICAgICAgICAgICAgICAgIGNuYW1lICs9IChjYWxlbmRhcltyb3ddW2NvbF0ubW9udGgoKSA9PSBjYWxlbmRhclsxXVsxXS5tb250aCgpKSA/ICcnIDogJ29mZic7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKChtaW5EYXRlICYmIGNhbGVuZGFyW3Jvd11bY29sXS5pc0JlZm9yZShtaW5EYXRlLCAnZGF5JykpIHx8IChtYXhEYXRlICYmIGNhbGVuZGFyW3Jvd11bY29sXS5pc0FmdGVyKG1heERhdGUsICdkYXknKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNuYW1lID0gJyBvZmYgZGlzYWJsZWQgJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYWxlbmRhcltyb3ddW2NvbF0uZm9ybWF0KCdZWVlZLU1NLUREJykgPT0gc2VsZWN0ZWQuZm9ybWF0KCdZWVlZLU1NLUREJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNuYW1lICs9ICcgYWN0aXZlICc7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsZW5kYXJbcm93XVtjb2xdLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09IHRoaXMuc3RhcnREYXRlLmZvcm1hdCgnWVlZWS1NTS1ERCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY25hbWUgKz0gJyBzdGFydC1kYXRlICc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsZW5kYXJbcm93XVtjb2xdLmZvcm1hdCgnWVlZWS1NTS1ERCcpID09IHRoaXMuZW5kRGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNuYW1lICs9ICcgZW5kLWRhdGUgJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjYWxlbmRhcltyb3ddW2NvbF0gPj0gdGhpcy5zdGFydERhdGUgJiYgY2FsZW5kYXJbcm93XVtjb2xdIDw9IHRoaXMuZW5kRGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY25hbWUgKz0gJyBpbi1yYW5nZSAnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGVuZGFyW3Jvd11bY29sXS5pc1NhbWUodGhpcy5zdGFydERhdGUpKSB7IGNuYW1lICs9ICcgc3RhcnQtZGF0ZSAnOyB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsZW5kYXJbcm93XVtjb2xdLmlzU2FtZSh0aGlzLmVuZERhdGUpKSB7IGNuYW1lICs9ICcgZW5kLWRhdGUgJzsgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJ3InICsgcm93ICsgJ2MnICsgY29sO1xuICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8dGQgY2xhc3M9XCInICsgY25hbWUucmVwbGFjZSgvXFxzKy9nLCAnICcpLnJlcGxhY2UoL15cXHM/KC4qPylcXHM/JC8sICckMScpICsgJ1wiIGRhdGEtdGl0bGU9XCInICsgdGl0bGUgKyAnXCI+JyArIGNhbGVuZGFyW3Jvd11bY29sXS5kYXRlKCkgKyAnPC90ZD4nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L3RyPic7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGh0bWwgKz0gJzwvdGJvZHk+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvdGFibGU+JztcbiAgICAgICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgaWYgKHRoaXMudGltZVBpY2tlcikge1xuXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cImNhbGVuZGFyLXRpbWVcIj4nO1xuICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxzZWxlY3QgY2xhc3M9XCJob3Vyc2VsZWN0XCI+JztcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICAgICAgICAgIHZhciBlbmQgPSAyMztcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRfaG91ciA9IHNlbGVjdGVkLmhvdXIoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy50aW1lUGlja2VyMTJIb3VyKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gMTtcbiAgICAgICAgICAgICAgICAgICAgZW5kID0gMTI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZF9ob3VyID49IDEyKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRfaG91ciAtPSAxMjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkX2hvdXIgPT09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZF9ob3VyID0gMTI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPD0gZW5kOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT0gc2VsZWN0ZWRfaG91cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBpICsgJ1wiIHNlbGVjdGVkPVwic2VsZWN0ZWRcIj4nICsgaSArICc8L29wdGlvbj4nO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBpICsgJ1wiPicgKyBpICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L3NlbGVjdD4gOiAnO1xuXG4gICAgICAgICAgICAgICAgaHRtbCArPSAnPHNlbGVjdCBjbGFzcz1cIm1pbnV0ZXNlbGVjdFwiPic7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgNjA7IGkgKz0gdGhpcy50aW1lUGlja2VySW5jcmVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSBpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVtIDwgMTApXG4gICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAnMCcgKyBudW07XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IHNlbGVjdGVkLm1pbnV0ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGkgKyAnXCIgc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiPicgKyBudW0gKyAnPC9vcHRpb24+JztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgaSArICdcIj4nICsgbnVtICsgJzwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L3NlbGVjdD4gJztcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRpbWVQaWNrZXIxMkhvdXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPHNlbGVjdCBjbGFzcz1cImFtcG1zZWxlY3RcIj4nO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWQuaG91cigpID49IDEyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiQU1cIj5BTTwvb3B0aW9uPjxvcHRpb24gdmFsdWU9XCJQTVwiIHNlbGVjdGVkPVwic2VsZWN0ZWRcIj5QTTwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiQU1cIiBzZWxlY3RlZD1cInNlbGVjdGVkXCI+QU08L29wdGlvbj48b3B0aW9uIHZhbHVlPVwiUE1cIj5QTTwvb3B0aW9uPic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaHRtbCArPSAnPC9zZWxlY3Q+JztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBodG1sO1xuXG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQub2ZmKCcuZGF0ZXJhbmdlcGlja2VyJyk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRGF0YSgnZGF0ZXJhbmdlcGlja2VyJyk7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgICQuZm4uZGF0ZXJhbmdlcGlja2VyID0gZnVuY3Rpb24gKG9wdGlvbnMsIGNiKSB7XG4gICAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSAkKHRoaXMpO1xuICAgICAgICAgICAgaWYgKGVsLmRhdGEoJ2RhdGVyYW5nZXBpY2tlcicpKVxuICAgICAgICAgICAgICAgIGVsLmRhdGEoJ2RhdGVyYW5nZXBpY2tlcicpLnJlbW92ZSgpO1xuICAgICAgICAgICAgZWwuZGF0YSgnZGF0ZXJhbmdlcGlja2VyJywgbmV3IERhdGVSYW5nZVBpY2tlcihlbCwgb3B0aW9ucywgY2IpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbn0pKTtcbiIsIi8qXG4gSGlnaGNoYXJ0cyBKUyB2NC4wLjQgKDIwMTQtMDktMDIpXG5cbiAoYykgMjAwOS0yMDE0IFRvcnN0ZWluIEhvbnNpXG5cbiBMaWNlbnNlOiB3d3cuaGlnaGNoYXJ0cy5jb20vbGljZW5zZVxuKi9cbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoYSxiKXt2YXIgYzthfHwoYT17fSk7Zm9yKGMgaW4gYilhW2NdPWJbY107cmV0dXJuIGF9ZnVuY3Rpb24gdygpe3ZhciBhLGI9YXJndW1lbnRzLGMsZD17fSxlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZDt0eXBlb2YgYSE9PVwib2JqZWN0XCImJihhPXt9KTtmb3IoZCBpbiBiKWIuaGFzT3duUHJvcGVydHkoZCkmJihjPWJbZF0sYVtkXT1jJiZ0eXBlb2YgYz09PVwib2JqZWN0XCImJk9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChjKSE9PVwiW29iamVjdCBBcnJheV1cIiYmZCE9PVwicmVuZGVyVG9cIiYmdHlwZW9mIGMubm9kZVR5cGUhPT1cIm51bWJlclwiP2UoYVtkXXx8e30sYyk6YltkXSk7cmV0dXJuIGF9O2JbMF09PT0hMCYmKGQ9YlsxXSxiPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGIsMikpO2M9Yi5sZW5ndGg7Zm9yKGE9MDthPGM7YSsrKWQ9ZShkLGJbYV0pO3JldHVybiBkfWZ1bmN0aW9uIHkoYSxiKXtyZXR1cm4gcGFyc2VJbnQoYSxifHxcbjEwKX1mdW5jdGlvbiBHYShhKXtyZXR1cm4gdHlwZW9mIGE9PT1cInN0cmluZ1wifWZ1bmN0aW9uIGRhKGEpe3JldHVybiBhJiZ0eXBlb2YgYT09PVwib2JqZWN0XCJ9ZnVuY3Rpb24gSGEoYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKT09PVwiW29iamVjdCBBcnJheV1cIn1mdW5jdGlvbiBqYShhKXtyZXR1cm4gdHlwZW9mIGE9PT1cIm51bWJlclwifWZ1bmN0aW9uIHphKGEpe3JldHVybiBWLmxvZyhhKS9WLkxOMTB9ZnVuY3Rpb24ga2EoYSl7cmV0dXJuIFYucG93KDEwLGEpfWZ1bmN0aW9uIGxhKGEsYil7Zm9yKHZhciBjPWEubGVuZ3RoO2MtLTspaWYoYVtjXT09PWIpe2Euc3BsaWNlKGMsMSk7YnJlYWt9fWZ1bmN0aW9uIHMoYSl7cmV0dXJuIGEhPT11JiZhIT09bnVsbH1mdW5jdGlvbiBGKGEsYixjKXt2YXIgZCxlO2lmKEdhKGIpKXMoYyk/YS5zZXRBdHRyaWJ1dGUoYixjKTphJiZhLmdldEF0dHJpYnV0ZSYmKGU9YS5nZXRBdHRyaWJ1dGUoYikpO2Vsc2UgaWYocyhiKSYmXG5kYShiKSlmb3IoZCBpbiBiKWEuc2V0QXR0cmlidXRlKGQsYltkXSk7cmV0dXJuIGV9ZnVuY3Rpb24gcmEoYSl7cmV0dXJuIEhhKGEpP2E6W2FdfWZ1bmN0aW9uIHAoKXt2YXIgYT1hcmd1bWVudHMsYixjLGQ9YS5sZW5ndGg7Zm9yKGI9MDtiPGQ7YisrKWlmKGM9YVtiXSxjIT09dSYmYyE9PW51bGwpcmV0dXJuIGN9ZnVuY3Rpb24gQihhLGIpe2lmKEFhJiYhYmEmJmImJmIub3BhY2l0eSE9PXUpYi5maWx0ZXI9XCJhbHBoYShvcGFjaXR5PVwiK2Iub3BhY2l0eSoxMDArXCIpXCI7cihhLnN0eWxlLGIpfWZ1bmN0aW9uICQoYSxiLGMsZCxlKXthPXguY3JlYXRlRWxlbWVudChhKTtiJiZyKGEsYik7ZSYmQihhLHtwYWRkaW5nOjAsYm9yZGVyOlAsbWFyZ2luOjB9KTtjJiZCKGEsYyk7ZCYmZC5hcHBlbmRDaGlsZChhKTtyZXR1cm4gYX1mdW5jdGlvbiBtYShhLGIpe3ZhciBjPWZ1bmN0aW9uKCl7cmV0dXJuIHV9O2MucHJvdG90eXBlPW5ldyBhO3IoYy5wcm90b3R5cGUsYik7cmV0dXJuIGN9ZnVuY3Rpb24gQmEoYSxcbmIsYyxkKXt2YXIgZT1LLm51bWJlckZvcm1hdCxmPUUubGFuZyxnPSthfHwwLGg9Yj09PS0xPyhnLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpWzFdfHxcIlwiKS5sZW5ndGg6aXNOYU4oYj1RKGIpKT8yOmIsaT1jPT09dm9pZCAwP2YuZGVjaW1hbFBvaW50OmMsZj1kPT09dm9pZCAwP2YudGhvdXNhbmRzU2VwOmQsaj1nPDA/XCItXCI6XCJcIixrPVN0cmluZyh5KGc9UShnKS50b0ZpeGVkKGgpKSksbD1rLmxlbmd0aD4zP2subGVuZ3RoJTM6MDtyZXR1cm4gZSE9PUJhP2UoYSxiLGMsZCk6aisobD9rLnN1YnN0cigwLGwpK2Y6XCJcIikray5zdWJzdHIobCkucmVwbGFjZSgvKFxcZHszfSkoPz1cXGQpL2csXCIkMVwiK2YpKyhoP2krUShnLWspLnRvRml4ZWQoaCkuc2xpY2UoMik6XCJcIil9ZnVuY3Rpb24gSWEoYSxiKXtyZXR1cm4gQXJyYXkoKGJ8fDIpKzEtU3RyaW5nKGEpLmxlbmd0aCkuam9pbigwKSthfWZ1bmN0aW9uIE5hKGEsYixjKXt2YXIgZD1hW2JdO2FbYl09ZnVuY3Rpb24oKXt2YXIgYT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuYS51bnNoaWZ0KGQpO3JldHVybiBjLmFwcGx5KHRoaXMsYSl9fWZ1bmN0aW9uIEphKGEsYil7Zm9yKHZhciBjPVwie1wiLGQ9ITEsZSxmLGcsaCxpLGo9W107KGM9YS5pbmRleE9mKGMpKSE9PS0xOyl7ZT1hLnNsaWNlKDAsYyk7aWYoZCl7Zj1lLnNwbGl0KFwiOlwiKTtnPWYuc2hpZnQoKS5zcGxpdChcIi5cIik7aT1nLmxlbmd0aDtlPWI7Zm9yKGg9MDtoPGk7aCsrKWU9ZVtnW2hdXTtpZihmLmxlbmd0aClmPWYuam9pbihcIjpcIiksZz0vXFwuKFswLTldKS8saD1FLmxhbmcsaT12b2lkIDAsL2YkLy50ZXN0KGYpPyhpPShpPWYubWF0Y2goZykpP2lbMV06LTEsZSE9PW51bGwmJihlPUJhKGUsaSxoLmRlY2ltYWxQb2ludCxmLmluZGV4T2YoXCIsXCIpPi0xP2gudGhvdXNhbmRzU2VwOlwiXCIpKSk6ZT1jYihmLGUpfWoucHVzaChlKTthPWEuc2xpY2UoYysxKTtjPShkPSFkKT9cIn1cIjpcIntcIn1qLnB1c2goYSk7cmV0dXJuIGouam9pbihcIlwiKX1mdW5jdGlvbiBtYihhKXtyZXR1cm4gVi5wb3coMTAsVShWLmxvZyhhKS9cblYuTE4xMCkpfWZ1bmN0aW9uIG5iKGEsYixjLGQpe3ZhciBlLGM9cChjLDEpO2U9YS9jO2J8fChiPVsxLDIsMi41LDUsMTBdLGQ9PT0hMSYmKGM9PT0xP2I9WzEsMiw1LDEwXTpjPD0wLjEmJihiPVsxL2NdKSkpO2ZvcihkPTA7ZDxiLmxlbmd0aDtkKyspaWYoYT1iW2RdLGU8PShiW2RdKyhiW2QrMV18fGJbZF0pKS8yKWJyZWFrO2EqPWM7cmV0dXJuIGF9ZnVuY3Rpb24gb2IoYSxiKXt2YXIgYz1hLmxlbmd0aCxkLGU7Zm9yKGU9MDtlPGM7ZSsrKWFbZV0uc3NfaT1lO2Euc29ydChmdW5jdGlvbihhLGMpe2Q9YihhLGMpO3JldHVybiBkPT09MD9hLnNzX2ktYy5zc19pOmR9KTtmb3IoZT0wO2U8YztlKyspZGVsZXRlIGFbZV0uc3NfaX1mdW5jdGlvbiBPYShhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1hWzBdO2ItLTspYVtiXTxjJiYoYz1hW2JdKTtyZXR1cm4gY31mdW5jdGlvbiBDYShhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1hWzBdO2ItLTspYVtiXT5jJiYoYz1hW2JdKTtyZXR1cm4gY31cbmZ1bmN0aW9uIFBhKGEsYil7Zm9yKHZhciBjIGluIGEpYVtjXSYmYVtjXSE9PWImJmFbY10uZGVzdHJveSYmYVtjXS5kZXN0cm95KCksZGVsZXRlIGFbY119ZnVuY3Rpb24gUWEoYSl7ZGJ8fChkYj0kKEthKSk7YSYmZGIuYXBwZW5kQ2hpbGQoYSk7ZGIuaW5uZXJIVE1MPVwiXCJ9ZnVuY3Rpb24gZWEoYSl7cmV0dXJuIHBhcnNlRmxvYXQoYS50b1ByZWNpc2lvbigxNCkpfWZ1bmN0aW9uIFJhKGEsYil7dmE9cChhLGIuYW5pbWF0aW9uKX1mdW5jdGlvbiBCYigpe3ZhciBhPUUuZ2xvYmFsLnVzZVVUQyxiPWE/XCJnZXRVVENcIjpcImdldFwiLGM9YT9cInNldFVUQ1wiOlwic2V0XCI7RGE9RS5nbG9iYWwuRGF0ZXx8d2luZG93LkRhdGU7U2E9KGEmJkUuZ2xvYmFsLnRpbWV6b25lT2Zmc2V0fHwwKSo2RTQ7ZWI9YT9EYS5VVEM6ZnVuY3Rpb24oYSxiLGMsZyxoLGkpe3JldHVybihuZXcgRGEoYSxiLHAoYywxKSxwKGcsMCkscChoLDApLHAoaSwwKSkpLmdldFRpbWUoKX07cGI9YitcIk1pbnV0ZXNcIjtxYj1iK1xuXCJIb3Vyc1wiO3JiPWIrXCJEYXlcIjtYYT1iK1wiRGF0ZVwiO2ZiPWIrXCJNb250aFwiO2diPWIrXCJGdWxsWWVhclwiO0NiPWMrXCJNaW51dGVzXCI7RGI9YytcIkhvdXJzXCI7c2I9YytcIkRhdGVcIjtFYj1jK1wiTW9udGhcIjtGYj1jK1wiRnVsbFllYXJcIn1mdW5jdGlvbiBTKCl7fWZ1bmN0aW9uIFRhKGEsYixjLGQpe3RoaXMuYXhpcz1hO3RoaXMucG9zPWI7dGhpcy50eXBlPWN8fFwiXCI7dGhpcy5pc05ldz0hMDshYyYmIWQmJnRoaXMuYWRkTGFiZWwoKX1mdW5jdGlvbiBuYSgpe3RoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZnVuY3Rpb24gWWEoKXt0aGlzLmluaXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfWZ1bmN0aW9uIEdiKGEsYixjLGQsZSl7dmFyIGY9YS5jaGFydC5pbnZlcnRlZDt0aGlzLmF4aXM9YTt0aGlzLmlzTmVnYXRpdmU9Yzt0aGlzLm9wdGlvbnM9Yjt0aGlzLng9ZDt0aGlzLnRvdGFsPW51bGw7dGhpcy5wb2ludHM9e307dGhpcy5zdGFjaz1lO3RoaXMuYWxpZ25PcHRpb25zPXthbGlnbjpiLmFsaWdufHxcbihmP2M/XCJsZWZ0XCI6XCJyaWdodFwiOlwiY2VudGVyXCIpLHZlcnRpY2FsQWxpZ246Yi52ZXJ0aWNhbEFsaWdufHwoZj9cIm1pZGRsZVwiOmM/XCJib3R0b21cIjpcInRvcFwiKSx5OnAoYi55LGY/NDpjPzE0Oi02KSx4OnAoYi54LGY/Yz8tNjo2OjApfTt0aGlzLnRleHRBbGlnbj1iLnRleHRBbGlnbnx8KGY/Yz9cInJpZ2h0XCI6XCJsZWZ0XCI6XCJjZW50ZXJcIil9dmFyIHUseD1kb2N1bWVudCxHPXdpbmRvdyxWPU1hdGgsdj1WLnJvdW5kLFU9Vi5mbG9vcixMYT1WLmNlaWwsdD1WLm1heCxMPVYubWluLFE9Vi5hYnMsYWE9Vi5jb3MsZmE9Vi5zaW4sb2E9Vi5QSSxFYT1vYSoyLzM2MCx3YT1uYXZpZ2F0b3IudXNlckFnZW50LEhiPUcub3BlcmEsQWE9L21zaWUvaS50ZXN0KHdhKSYmIUhiLGhiPXguZG9jdW1lbnRNb2RlPT09OCx0Yj0vQXBwbGVXZWJLaXQvLnRlc3Qod2EpLFVhPS9GaXJlZm94Ly50ZXN0KHdhKSxJYj0vKE1vYmlsZXxBbmRyb2lkfFdpbmRvd3MgUGhvbmUpLy50ZXN0KHdhKSx4YT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG5iYT0hIXguY3JlYXRlRWxlbWVudE5TJiYhIXguY3JlYXRlRWxlbWVudE5TKHhhLFwic3ZnXCIpLmNyZWF0ZVNWR1JlY3QsT2I9VWEmJnBhcnNlSW50KHdhLnNwbGl0KFwiRmlyZWZveC9cIilbMV0sMTApPDQsZ2E9IWJhJiYhQWEmJiEheC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQsWmEsJGEsSmI9e30sdWI9MCxkYixFLGNiLHZhLHZiLEEsaGEsc2E9ZnVuY3Rpb24oKXtyZXR1cm4gdX0sVz1bXSxhYj0wLEthPVwiZGl2XCIsUD1cIm5vbmVcIixQYj0vXlswLTldKyQvLFFiPVwic3Ryb2tlLXdpZHRoXCIsRGEsZWIsU2EscGIscWIscmIsWGEsZmIsZ2IsQ2IsRGIsc2IsRWIsRmIsSD17fSxLO0cuSGlnaGNoYXJ0cz9oYSgxNiwhMCk6Sz1HLkhpZ2hjaGFydHM9e307Y2I9ZnVuY3Rpb24oYSxiLGMpe2lmKCFzKGIpfHxpc05hTihiKSlyZXR1cm5cIkludmFsaWQgZGF0ZVwiO3ZhciBhPXAoYSxcIiVZLSVtLSVkICVIOiVNOiVTXCIpLGQ9bmV3IERhKGItU2EpLGUsZj1kW3FiXSgpLGc9ZFtyYl0oKSxcbmg9ZFtYYV0oKSxpPWRbZmJdKCksaj1kW2diXSgpLGs9RS5sYW5nLGw9ay53ZWVrZGF5cyxkPXIoe2E6bFtnXS5zdWJzdHIoMCwzKSxBOmxbZ10sZDpJYShoKSxlOmgsYjprLnNob3J0TW9udGhzW2ldLEI6ay5tb250aHNbaV0sbTpJYShpKzEpLHk6ai50b1N0cmluZygpLnN1YnN0cigyLDIpLFk6aixIOklhKGYpLEk6SWEoZiUxMnx8MTIpLGw6ZiUxMnx8MTIsTTpJYShkW3BiXSgpKSxwOmY8MTI/XCJBTVwiOlwiUE1cIixQOmY8MTI/XCJhbVwiOlwicG1cIixTOklhKGQuZ2V0U2Vjb25kcygpKSxMOklhKHYoYiUxRTMpLDMpfSxLLmRhdGVGb3JtYXRzKTtmb3IoZSBpbiBkKWZvcig7YS5pbmRleE9mKFwiJVwiK2UpIT09LTE7KWE9YS5yZXBsYWNlKFwiJVwiK2UsdHlwZW9mIGRbZV09PT1cImZ1bmN0aW9uXCI/ZFtlXShiKTpkW2VdKTtyZXR1cm4gYz9hLnN1YnN0cigwLDEpLnRvVXBwZXJDYXNlKCkrYS5zdWJzdHIoMSk6YX07aGE9ZnVuY3Rpb24oYSxiKXt2YXIgYz1cIkhpZ2hjaGFydHMgZXJyb3IgI1wiK2ErXCI6IHd3dy5oaWdoY2hhcnRzLmNvbS9lcnJvcnMvXCIrXG5hO2lmKGIpdGhyb3cgYztHLmNvbnNvbGUmJmNvbnNvbGUubG9nKGMpfTtBPXttaWxsaXNlY29uZDoxLHNlY29uZDoxRTMsbWludXRlOjZFNCxob3VyOjM2RTUsZGF5Ojg2NEU1LHdlZWs6NjA0OEU1LG1vbnRoOjI2Nzg0RTUseWVhcjozMTU1Njk1MkUzfTt2Yj17aW5pdDpmdW5jdGlvbihhLGIsYyl7dmFyIGI9Ynx8XCJcIixkPWEuc2hpZnQsZT1iLmluZGV4T2YoXCJDXCIpPi0xLGY9ZT83OjMsZyxiPWIuc3BsaXQoXCIgXCIpLGM9W10uY29uY2F0KGMpLGgsaSxqPWZ1bmN0aW9uKGEpe2ZvcihnPWEubGVuZ3RoO2ctLTspYVtnXT09PVwiTVwiJiZhLnNwbGljZShnKzEsMCxhW2crMV0sYVtnKzJdLGFbZysxXSxhW2crMl0pfTtlJiYoaihiKSxqKGMpKTthLmlzQXJlYSYmKGg9Yi5zcGxpY2UoYi5sZW5ndGgtNiw2KSxpPWMuc3BsaWNlKGMubGVuZ3RoLTYsNikpO2lmKGQ8PWMubGVuZ3RoL2YmJmIubGVuZ3RoPT09Yy5sZW5ndGgpZm9yKDtkLS07KWM9W10uY29uY2F0KGMpLnNwbGljZSgwLGYpLmNvbmNhdChjKTtcbmEuc2hpZnQ9MDtpZihiLmxlbmd0aClmb3IoYT1jLmxlbmd0aDtiLmxlbmd0aDxhOylkPVtdLmNvbmNhdChiKS5zcGxpY2UoYi5sZW5ndGgtZixmKSxlJiYoZFtmLTZdPWRbZi0yXSxkW2YtNV09ZFtmLTFdKSxiPWIuY29uY2F0KGQpO2gmJihiPWIuY29uY2F0KGgpLGM9Yy5jb25jYXQoaSkpO3JldHVybltiLGNdfSxzdGVwOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVtdLGY9YS5sZW5ndGg7aWYoYz09PTEpZT1kO2Vsc2UgaWYoZj09PWIubGVuZ3RoJiZjPDEpZm9yKDtmLS07KWQ9cGFyc2VGbG9hdChhW2ZdKSxlW2ZdPWlzTmFOKGQpP2FbZl06YypwYXJzZUZsb2F0KGJbZl0tZCkrZDtlbHNlIGU9YjtyZXR1cm4gZX19OyhmdW5jdGlvbihhKXtHLkhpZ2hjaGFydHNBZGFwdGVyPUcuSGlnaGNoYXJ0c0FkYXB0ZXJ8fGEmJntpbml0OmZ1bmN0aW9uKGIpe3ZhciBjPWEuZng7YS5leHRlbmQoYS5lYXNpbmcse2Vhc2VPdXRRdWFkOmZ1bmN0aW9uKGEsYixjLGcsaCl7cmV0dXJuLWcqKGIvPVxuaCkqKGItMikrY319KTthLmVhY2goW1wiY3VyXCIsXCJfZGVmYXVsdFwiLFwid2lkdGhcIixcImhlaWdodFwiLFwib3BhY2l0eVwiXSxmdW5jdGlvbihiLGUpe3ZhciBmPWMuc3RlcCxnO2U9PT1cImN1clwiP2Y9Yy5wcm90b3R5cGU6ZT09PVwiX2RlZmF1bHRcIiYmYS5Ud2VlbiYmKGY9YS5Ud2Vlbi5wcm9wSG9va3NbZV0sZT1cInNldFwiKTsoZz1mW2VdKSYmKGZbZV09ZnVuY3Rpb24oYSl7dmFyIGMsYT1iP2E6dGhpcztpZihhLnByb3AhPT1cImFsaWduXCIpcmV0dXJuIGM9YS5lbGVtLGMuYXR0cj9jLmF0dHIoYS5wcm9wLGU9PT1cImN1clwiP3U6YS5ub3cpOmcuYXBwbHkodGhpcyxhcmd1bWVudHMpfSl9KTtOYShhLmNzc0hvb2tzLm9wYWNpdHksXCJnZXRcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGIuYXR0cj9iLm9wYWNpdHl8fDA6YS5jYWxsKHRoaXMsYixjKX0pO3RoaXMuYWRkQW5pbVNldHRlcihcImRcIixmdW5jdGlvbihhKXt2YXIgYz1hLmVsZW0sZjtpZighYS5zdGFydGVkKWY9Yi5pbml0KGMsYy5kLGMudG9EKSxcbmEuc3RhcnQ9ZlswXSxhLmVuZD1mWzFdLGEuc3RhcnRlZD0hMDtjLmF0dHIoXCJkXCIsYi5zdGVwKGEuc3RhcnQsYS5lbmQsYS5wb3MsYy50b0QpKX0pO3RoaXMuZWFjaD1BcnJheS5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGEsYil9OmZ1bmN0aW9uKGEsYil7dmFyIGMsZz1hLmxlbmd0aDtmb3IoYz0wO2M8ZztjKyspaWYoYi5jYWxsKGFbY10sYVtjXSxjLGEpPT09ITEpcmV0dXJuIGN9O2EuZm4uaGlnaGNoYXJ0cz1mdW5jdGlvbigpe3ZhciBhPVwiQ2hhcnRcIixiPWFyZ3VtZW50cyxjLGc7aWYodGhpc1swXSl7R2EoYlswXSkmJihhPWJbMF0sYj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiLDEpKTtjPWJbMF07aWYoYyE9PXUpYy5jaGFydD1jLmNoYXJ0fHx7fSxjLmNoYXJ0LnJlbmRlclRvPXRoaXNbMF0sbmV3IEtbYV0oYyxiWzFdKSxnPXRoaXM7Yz09PXUmJihnPVdbRih0aGlzWzBdLFwiZGF0YS1oaWdoY2hhcnRzLWNoYXJ0XCIpXSl9cmV0dXJuIGd9fSxcbmFkZEFuaW1TZXR0ZXI6ZnVuY3Rpb24oYixjKXthLlR3ZWVuP2EuVHdlZW4ucHJvcEhvb2tzW2JdPXtzZXQ6Y306YS5meC5zdGVwW2JdPWN9LGdldFNjcmlwdDphLmdldFNjcmlwdCxpbkFycmF5OmEuaW5BcnJheSxhZGFwdGVyUnVuOmZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEoYilbY10oKX0sZ3JlcDphLmdyZXAsbWFwOmZ1bmN0aW9uKGEsYyl7Zm9yKHZhciBkPVtdLGU9MCxmPWEubGVuZ3RoO2U8ZjtlKyspZFtlXT1jLmNhbGwoYVtlXSxhW2VdLGUsYSk7cmV0dXJuIGR9LG9mZnNldDpmdW5jdGlvbihiKXtyZXR1cm4gYShiKS5vZmZzZXQoKX0sYWRkRXZlbnQ6ZnVuY3Rpb24oYixjLGQpe2EoYikuYmluZChjLGQpfSxyZW1vdmVFdmVudDpmdW5jdGlvbihiLGMsZCl7dmFyIGU9eC5yZW1vdmVFdmVudExpc3RlbmVyP1wicmVtb3ZlRXZlbnRMaXN0ZW5lclwiOlwiZGV0YWNoRXZlbnRcIjt4W2VdJiZiJiYhYltlXSYmKGJbZV09ZnVuY3Rpb24oKXt9KTthKGIpLnVuYmluZChjLGQpfSxmaXJlRXZlbnQ6ZnVuY3Rpb24oYixcbmMsZCxlKXt2YXIgZj1hLkV2ZW50KGMpLGc9XCJkZXRhY2hlZFwiK2MsaDshQWEmJmQmJihkZWxldGUgZC5sYXllclgsZGVsZXRlIGQubGF5ZXJZLGRlbGV0ZSBkLnJldHVyblZhbHVlKTtyKGYsZCk7YltjXSYmKGJbZ109YltjXSxiW2NdPW51bGwpO2EuZWFjaChbXCJwcmV2ZW50RGVmYXVsdFwiLFwic3RvcFByb3BhZ2F0aW9uXCJdLGZ1bmN0aW9uKGEsYil7dmFyIGM9ZltiXTtmW2JdPWZ1bmN0aW9uKCl7dHJ5e2MuY2FsbChmKX1jYXRjaChhKXtiPT09XCJwcmV2ZW50RGVmYXVsdFwiJiYoaD0hMCl9fX0pO2EoYikudHJpZ2dlcihmKTtiW2ddJiYoYltjXT1iW2ddLGJbZ109bnVsbCk7ZSYmIWYuaXNEZWZhdWx0UHJldmVudGVkKCkmJiFoJiZlKGYpfSx3YXNoTW91c2VFdmVudDpmdW5jdGlvbihhKXt2YXIgYz1hLm9yaWdpbmFsRXZlbnR8fGE7aWYoYy5wYWdlWD09PXUpYy5wYWdlWD1hLnBhZ2VYLGMucGFnZVk9YS5wYWdlWTtyZXR1cm4gY30sYW5pbWF0ZTpmdW5jdGlvbihiLGMsZCl7dmFyIGU9XG5hKGIpO2lmKCFiLnN0eWxlKWIuc3R5bGU9e307aWYoYy5kKWIudG9EPWMuZCxjLmQ9MTtlLnN0b3AoKTtjLm9wYWNpdHkhPT11JiZiLmF0dHImJihjLm9wYWNpdHkrPVwicHhcIik7Yi5oYXNBbmltPTE7ZS5hbmltYXRlKGMsZCl9LHN0b3A6ZnVuY3Rpb24oYil7Yi5oYXNBbmltJiZhKGIpLnN0b3AoKX19fSkoRy5qUXVlcnkpO3ZhciBUPUcuSGlnaGNoYXJ0c0FkYXB0ZXIsTT1UfHx7fTtUJiZULmluaXQuY2FsbChULHZiKTt2YXIgaWI9TS5hZGFwdGVyUnVuLFJiPU0uZ2V0U2NyaXB0LE1hPU0uaW5BcnJheSxxPU0uZWFjaCx3Yj1NLmdyZXAsU2I9TS5vZmZzZXQsVmE9TS5tYXAsTj1NLmFkZEV2ZW50LFg9TS5yZW1vdmVFdmVudCxJPU0uZmlyZUV2ZW50LFRiPU0ud2FzaE1vdXNlRXZlbnQsamI9TS5hbmltYXRlLGJiPU0uc3RvcCxNPXtlbmFibGVkOiEwLHg6MCx5OjE1LHN0eWxlOntjb2xvcjpcIiM2MDYwNjBcIixjdXJzb3I6XCJkZWZhdWx0XCIsZm9udFNpemU6XCIxMXB4XCJ9fTtFPXtjb2xvcnM6XCIjN2NiNWVjLCM0MzQzNDgsIzkwZWQ3ZCwjZjdhMzVjLCM4MDg1ZTksI2YxNWM4MCwjZTRkMzU0LCM4MDg1ZTgsIzhkNDY1MywjOTFlOGUxXCIuc3BsaXQoXCIsXCIpLFxuc3ltYm9sczpbXCJjaXJjbGVcIixcImRpYW1vbmRcIixcInNxdWFyZVwiLFwidHJpYW5nbGVcIixcInRyaWFuZ2xlLWRvd25cIl0sbGFuZzp7bG9hZGluZzpcIkxvYWRpbmcuLi5cIixtb250aHM6XCJKYW51YXJ5LEZlYnJ1YXJ5LE1hcmNoLEFwcmlsLE1heSxKdW5lLEp1bHksQXVndXN0LFNlcHRlbWJlcixPY3RvYmVyLE5vdmVtYmVyLERlY2VtYmVyXCIuc3BsaXQoXCIsXCIpLHNob3J0TW9udGhzOlwiSmFuLEZlYixNYXIsQXByLE1heSxKdW4sSnVsLEF1ZyxTZXAsT2N0LE5vdixEZWNcIi5zcGxpdChcIixcIiksd2Vla2RheXM6XCJTdW5kYXksTW9uZGF5LFR1ZXNkYXksV2VkbmVzZGF5LFRodXJzZGF5LEZyaWRheSxTYXR1cmRheVwiLnNwbGl0KFwiLFwiKSxkZWNpbWFsUG9pbnQ6XCIuXCIsbnVtZXJpY1N5bWJvbHM6XCJrLE0sRyxULFAsRVwiLnNwbGl0KFwiLFwiKSxyZXNldFpvb206XCJSZXNldCB6b29tXCIscmVzZXRab29tVGl0bGU6XCJSZXNldCB6b29tIGxldmVsIDE6MVwiLHRob3VzYW5kc1NlcDpcIixcIn0sZ2xvYmFsOnt1c2VVVEM6ITAsXG5jYW52YXNUb29sc1VSTDpcImh0dHA6Ly9jb2RlLmhpZ2hjaGFydHMuY29tLzQuMC40L21vZHVsZXMvY2FudmFzLXRvb2xzLmpzXCIsVk1MUmFkaWFsR3JhZGllbnRVUkw6XCJodHRwOi8vY29kZS5oaWdoY2hhcnRzLmNvbS80LjAuNC9nZngvdm1sLXJhZGlhbC1ncmFkaWVudC5wbmdcIn0sY2hhcnQ6e2JvcmRlckNvbG9yOlwiIzQ1NzJBN1wiLGJvcmRlclJhZGl1czowLGRlZmF1bHRTZXJpZXNUeXBlOlwibGluZVwiLGlnbm9yZUhpZGRlblNlcmllczohMCxzcGFjaW5nOlsxMCwxMCwxNSwxMF0sYmFja2dyb3VuZENvbG9yOlwiI0ZGRkZGRlwiLHBsb3RCb3JkZXJDb2xvcjpcIiNDMEMwQzBcIixyZXNldFpvb21CdXR0b246e3RoZW1lOnt6SW5kZXg6MjB9LHBvc2l0aW9uOnthbGlnbjpcInJpZ2h0XCIseDotMTAseToxMH19fSx0aXRsZTp7dGV4dDpcIkNoYXJ0IHRpdGxlXCIsYWxpZ246XCJjZW50ZXJcIixtYXJnaW46MTUsc3R5bGU6e2NvbG9yOlwiIzMzMzMzM1wiLGZvbnRTaXplOlwiMThweFwifX0sc3VidGl0bGU6e3RleHQ6XCJcIixcbmFsaWduOlwiY2VudGVyXCIsc3R5bGU6e2NvbG9yOlwiIzU1NTU1NVwifX0scGxvdE9wdGlvbnM6e2xpbmU6e2FsbG93UG9pbnRTZWxlY3Q6ITEsc2hvd0NoZWNrYm94OiExLGFuaW1hdGlvbjp7ZHVyYXRpb246MUUzfSxldmVudHM6e30sbGluZVdpZHRoOjIsbWFya2VyOntsaW5lV2lkdGg6MCxyYWRpdXM6NCxsaW5lQ29sb3I6XCIjRkZGRkZGXCIsc3RhdGVzOntob3Zlcjp7ZW5hYmxlZDohMCxsaW5lV2lkdGhQbHVzOjEscmFkaXVzUGx1czoyfSxzZWxlY3Q6e2ZpbGxDb2xvcjpcIiNGRkZGRkZcIixsaW5lQ29sb3I6XCIjMDAwMDAwXCIsbGluZVdpZHRoOjJ9fX0scG9pbnQ6e2V2ZW50czp7fX0sZGF0YUxhYmVsczp3KE0se2FsaWduOlwiY2VudGVyXCIsZW5hYmxlZDohMSxmb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy55PT09bnVsbD9cIlwiOkJhKHRoaXMueSwtMSl9LHZlcnRpY2FsQWxpZ246XCJib3R0b21cIix5OjB9KSxjcm9wVGhyZXNob2xkOjMwMCxwb2ludFJhbmdlOjAsc3RhdGVzOntob3Zlcjp7bGluZVdpZHRoUGx1czoxLFxubWFya2VyOnt9LGhhbG86e3NpemU6MTAsb3BhY2l0eTowLjI1fX0sc2VsZWN0OnttYXJrZXI6e319fSxzdGlja3lUcmFja2luZzohMCx0dXJib1RocmVzaG9sZDoxRTN9fSxsYWJlbHM6e3N0eWxlOntwb3NpdGlvbjpcImFic29sdXRlXCIsY29sb3I6XCIjM0U1NzZGXCJ9fSxsZWdlbmQ6e2VuYWJsZWQ6ITAsYWxpZ246XCJjZW50ZXJcIixsYXlvdXQ6XCJob3Jpem9udGFsXCIsbGFiZWxGb3JtYXR0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5uYW1lfSxib3JkZXJDb2xvcjpcIiM5MDkwOTBcIixib3JkZXJSYWRpdXM6MCxuYXZpZ2F0aW9uOnthY3RpdmVDb2xvcjpcIiMyNzRiNmRcIixpbmFjdGl2ZUNvbG9yOlwiI0NDQ1wifSxzaGFkb3c6ITEsaXRlbVN0eWxlOntjb2xvcjpcIiMzMzMzMzNcIixmb250U2l6ZTpcIjEycHhcIixmb250V2VpZ2h0OlwiYm9sZFwifSxpdGVtSG92ZXJTdHlsZTp7Y29sb3I6XCIjMDAwXCJ9LGl0ZW1IaWRkZW5TdHlsZTp7Y29sb3I6XCIjQ0NDXCJ9LGl0ZW1DaGVja2JveFN0eWxlOntwb3NpdGlvbjpcImFic29sdXRlXCIsXG53aWR0aDpcIjEzcHhcIixoZWlnaHQ6XCIxM3B4XCJ9LHN5bWJvbFBhZGRpbmc6NSx2ZXJ0aWNhbEFsaWduOlwiYm90dG9tXCIseDowLHk6MCx0aXRsZTp7c3R5bGU6e2ZvbnRXZWlnaHQ6XCJib2xkXCJ9fX0sbG9hZGluZzp7bGFiZWxTdHlsZTp7Zm9udFdlaWdodDpcImJvbGRcIixwb3NpdGlvbjpcInJlbGF0aXZlXCIsdG9wOlwiNDUlXCJ9LHN0eWxlOntwb3NpdGlvbjpcImFic29sdXRlXCIsYmFja2dyb3VuZENvbG9yOlwid2hpdGVcIixvcGFjaXR5OjAuNSx0ZXh0QWxpZ246XCJjZW50ZXJcIn19LHRvb2x0aXA6e2VuYWJsZWQ6ITAsYW5pbWF0aW9uOmJhLGJhY2tncm91bmRDb2xvcjpcInJnYmEoMjQ5LCAyNDksIDI0OSwgLjg1KVwiLGJvcmRlcldpZHRoOjEsYm9yZGVyUmFkaXVzOjMsZGF0ZVRpbWVMYWJlbEZvcm1hdHM6e21pbGxpc2Vjb25kOlwiJUEsICViICVlLCAlSDolTTolUy4lTFwiLHNlY29uZDpcIiVBLCAlYiAlZSwgJUg6JU06JVNcIixtaW51dGU6XCIlQSwgJWIgJWUsICVIOiVNXCIsaG91cjpcIiVBLCAlYiAlZSwgJUg6JU1cIixcbmRheTpcIiVBLCAlYiAlZSwgJVlcIix3ZWVrOlwiV2VlayBmcm9tICVBLCAlYiAlZSwgJVlcIixtb250aDpcIiVCICVZXCIseWVhcjpcIiVZXCJ9LGhlYWRlckZvcm1hdDonPHNwYW4gc3R5bGU9XCJmb250LXNpemU6IDEwcHhcIj57cG9pbnQua2V5fTwvc3Bhbj48YnIvPicscG9pbnRGb3JtYXQ6JzxzcGFuIHN0eWxlPVwiY29sb3I6e3Nlcmllcy5jb2xvcn1cIj7il488L3NwYW4+IHtzZXJpZXMubmFtZX06IDxiPntwb2ludC55fTwvYj48YnIvPicsc2hhZG93OiEwLHNuYXA6SWI/MjU6MTAsc3R5bGU6e2NvbG9yOlwiIzMzMzMzM1wiLGN1cnNvcjpcImRlZmF1bHRcIixmb250U2l6ZTpcIjEycHhcIixwYWRkaW5nOlwiOHB4XCIsd2hpdGVTcGFjZTpcIm5vd3JhcFwifX0sY3JlZGl0czp7ZW5hYmxlZDohMCx0ZXh0OlwiSGlnaGNoYXJ0cy5jb21cIixocmVmOlwiaHR0cDovL3d3dy5oaWdoY2hhcnRzLmNvbVwiLHBvc2l0aW9uOnthbGlnbjpcInJpZ2h0XCIseDotMTAsdmVydGljYWxBbGlnbjpcImJvdHRvbVwiLHk6LTV9LHN0eWxlOntjdXJzb3I6XCJwb2ludGVyXCIsXG5jb2xvcjpcIiM5MDkwOTBcIixmb250U2l6ZTpcIjlweFwifX19O3ZhciBjYT1FLnBsb3RPcHRpb25zLFQ9Y2EubGluZTtCYigpO3ZhciBVYj0vcmdiYVxcKFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV17MSwzfSlcXHMqLFxccyooWzAtOV0/KD86XFwuWzAtOV0rKT8pXFxzKlxcKS8sVmI9LyMoW2EtZkEtRjAtOV17Mn0pKFthLWZBLUYwLTldezJ9KShbYS1mQS1GMC05XXsyfSkvLFdiPS9yZ2JcXChcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldezEsM30pXFxzKixcXHMqKFswLTldezEsM30pXFxzKlxcKS8seWE9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYyxkOyhmdW5jdGlvbihhKXthJiZhLnN0b3BzP2Q9VmEoYS5zdG9wcyxmdW5jdGlvbihhKXtyZXR1cm4geWEoYVsxXSl9KTooYz1VYi5leGVjKGEpKT9iPVt5KGNbMV0pLHkoY1syXSkseShjWzNdKSxwYXJzZUZsb2F0KGNbNF0sMTApXTooYz1WYi5leGVjKGEpKT9iPVt5KGNbMV0sMTYpLHkoY1syXSwxNikseShjWzNdLFxuMTYpLDFdOihjPVdiLmV4ZWMoYSkpJiYoYj1beShjWzFdKSx5KGNbMl0pLHkoY1szXSksMV0pfSkoYSk7cmV0dXJue2dldDpmdW5jdGlvbihjKXt2YXIgZjtkPyhmPXcoYSksZi5zdG9wcz1bXS5jb25jYXQoZi5zdG9wcykscShkLGZ1bmN0aW9uKGEsYil7Zi5zdG9wc1tiXT1bZi5zdG9wc1tiXVswXSxhLmdldChjKV19KSk6Zj1iJiYhaXNOYU4oYlswXSk/Yz09PVwicmdiXCI/XCJyZ2IoXCIrYlswXStcIixcIitiWzFdK1wiLFwiK2JbMl0rXCIpXCI6Yz09PVwiYVwiP2JbM106XCJyZ2JhKFwiK2Iuam9pbihcIixcIikrXCIpXCI6YTtyZXR1cm4gZn0sYnJpZ2h0ZW46ZnVuY3Rpb24oYSl7aWYoZClxKGQsZnVuY3Rpb24oYil7Yi5icmlnaHRlbihhKX0pO2Vsc2UgaWYoamEoYSkmJmEhPT0wKXt2YXIgYztmb3IoYz0wO2M8MztjKyspYltjXSs9eShhKjI1NSksYltjXTwwJiYoYltjXT0wKSxiW2NdPjI1NSYmKGJbY109MjU1KX1yZXR1cm4gdGhpc30scmdiYTpiLHNldE9wYWNpdHk6ZnVuY3Rpb24oYSl7YlszXT1hO3JldHVybiB0aGlzfX19O1xuUy5wcm90b3R5cGU9e29wYWNpdHk6MSx0ZXh0UHJvcHM6XCJmb250U2l6ZSxmb250V2VpZ2h0LGZvbnRGYW1pbHksY29sb3IsbGluZUhlaWdodCx3aWR0aCx0ZXh0RGVjb3JhdGlvbix0ZXh0U2hhZG93LEhjVGV4dFN0cm9rZVwiLnNwbGl0KFwiLFwiKSxpbml0OmZ1bmN0aW9uKGEsYil7dGhpcy5lbGVtZW50PWI9PT1cInNwYW5cIj8kKGIpOnguY3JlYXRlRWxlbWVudE5TKHhhLGIpO3RoaXMucmVuZGVyZXI9YX0sYW5pbWF0ZTpmdW5jdGlvbihhLGIsYyl7Yj1wKGIsdmEsITApO2JiKHRoaXMpO2lmKGIpe2I9dyhiLHt9KTtpZihjKWIuY29tcGxldGU9YztqYih0aGlzLGEsYil9ZWxzZSB0aGlzLmF0dHIoYSksYyYmYygpO3JldHVybiB0aGlzfSxjb2xvckdyYWRpZW50OmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnJlbmRlcmVyLGUsZixnLGgsaSxqLGssbCxuLG0sbz1bXTthLmxpbmVhckdyYWRpZW50P2Y9XCJsaW5lYXJHcmFkaWVudFwiOmEucmFkaWFsR3JhZGllbnQmJihmPVwicmFkaWFsR3JhZGllbnRcIik7XG5pZihmKXtnPWFbZl07aD1kLmdyYWRpZW50cztqPWEuc3RvcHM7bj1jLnJhZGlhbFJlZmVyZW5jZTtIYShnKSYmKGFbZl09Zz17eDE6Z1swXSx5MTpnWzFdLHgyOmdbMl0seTI6Z1szXSxncmFkaWVudFVuaXRzOlwidXNlclNwYWNlT25Vc2VcIn0pO2Y9PT1cInJhZGlhbEdyYWRpZW50XCImJm4mJiFzKGcuZ3JhZGllbnRVbml0cykmJihnPXcoZyx7Y3g6blswXS1uWzJdLzIrZy5jeCpuWzJdLGN5Om5bMV0tblsyXS8yK2cuY3kqblsyXSxyOmcucipuWzJdLGdyYWRpZW50VW5pdHM6XCJ1c2VyU3BhY2VPblVzZVwifSkpO2ZvcihtIGluIGcpbSE9PVwiaWRcIiYmby5wdXNoKG0sZ1ttXSk7Zm9yKG0gaW4gailvLnB1c2goalttXSk7bz1vLmpvaW4oXCIsXCIpO2hbb10/YT1oW29dLmF0dHIoXCJpZFwiKTooZy5pZD1hPVwiaGlnaGNoYXJ0cy1cIit1YisrLGhbb109aT1kLmNyZWF0ZUVsZW1lbnQoZikuYXR0cihnKS5hZGQoZC5kZWZzKSxpLnN0b3BzPVtdLHEoaixmdW5jdGlvbihhKXthWzFdLmluZGV4T2YoXCJyZ2JhXCIpPT09XG4wPyhlPXlhKGFbMV0pLGs9ZS5nZXQoXCJyZ2JcIiksbD1lLmdldChcImFcIikpOihrPWFbMV0sbD0xKTthPWQuY3JlYXRlRWxlbWVudChcInN0b3BcIikuYXR0cih7b2Zmc2V0OmFbMF0sXCJzdG9wLWNvbG9yXCI6ayxcInN0b3Atb3BhY2l0eVwiOmx9KS5hZGQoaSk7aS5zdG9wcy5wdXNoKGEpfSkpO2Muc2V0QXR0cmlidXRlKGIsXCJ1cmwoXCIrZC51cmwrXCIjXCIrYStcIilcIil9fSxhdHRyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlPXRoaXMuZWxlbWVudCxmLGc9dGhpcyxoO3R5cGVvZiBhPT09XCJzdHJpbmdcIiYmYiE9PXUmJihjPWEsYT17fSxhW2NdPWIpO2lmKHR5cGVvZiBhPT09XCJzdHJpbmdcIilnPSh0aGlzW2ErXCJHZXR0ZXJcIl18fHRoaXMuX2RlZmF1bHRHZXR0ZXIpLmNhbGwodGhpcyxhLGUpO2Vsc2V7Zm9yKGMgaW4gYSl7ZD1hW2NdO2g9ITE7dGhpcy5zeW1ib2xOYW1lJiYvXih4fHl8d2lkdGh8aGVpZ2h0fHJ8c3RhcnR8ZW5kfGlubmVyUnxhbmNob3JYfGFuY2hvclkpLy50ZXN0KGMpJiYoZnx8KHRoaXMuc3ltYm9sQXR0cihhKSxcbmY9ITApLGg9ITApO2lmKHRoaXMucm90YXRpb24mJihjPT09XCJ4XCJ8fGM9PT1cInlcIikpdGhpcy5kb1RyYW5zZm9ybT0hMDtofHwodGhpc1tjK1wiU2V0dGVyXCJdfHx0aGlzLl9kZWZhdWx0U2V0dGVyKS5jYWxsKHRoaXMsZCxjLGUpO3RoaXMuc2hhZG93cyYmL14od2lkdGh8aGVpZ2h0fHZpc2liaWxpdHl8eHx5fGR8dHJhbnNmb3JtfGN4fGN5fHIpJC8udGVzdChjKSYmdGhpcy51cGRhdGVTaGFkb3dzKGMsZCl9aWYodGhpcy5kb1RyYW5zZm9ybSl0aGlzLnVwZGF0ZVRyYW5zZm9ybSgpLHRoaXMuZG9UcmFuc2Zvcm09ITF9cmV0dXJuIGd9LHVwZGF0ZVNoYWRvd3M6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5zaGFkb3dzLGQ9Yy5sZW5ndGg7ZC0tOyljW2RdLnNldEF0dHJpYnV0ZShhLGE9PT1cImhlaWdodFwiP3QoYi0oY1tkXS5jdXRIZWlnaHR8fDApLDApOmE9PT1cImRcIj90aGlzLmQ6Yil9LGFkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudCxjPUYoYixcImNsYXNzXCIpfHxcblwiXCI7Yy5pbmRleE9mKGEpPT09LTEmJkYoYixcImNsYXNzXCIsYytcIiBcIithKTtyZXR1cm4gdGhpc30sc3ltYm9sQXR0cjpmdW5jdGlvbihhKXt2YXIgYj10aGlzO3EoXCJ4LHkscixzdGFydCxlbmQsd2lkdGgsaGVpZ2h0LGlubmVyUixhbmNob3JYLGFuY2hvcllcIi5zcGxpdChcIixcIiksZnVuY3Rpb24oYyl7YltjXT1wKGFbY10sYltjXSl9KTtiLmF0dHIoe2Q6Yi5yZW5kZXJlci5zeW1ib2xzW2Iuc3ltYm9sTmFtZV0oYi54LGIueSxiLndpZHRoLGIuaGVpZ2h0LGIpfSl9LGNsaXA6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYXR0cihcImNsaXAtcGF0aFwiLGE/XCJ1cmwoXCIrdGhpcy5yZW5kZXJlci51cmwrXCIjXCIrYS5pZCtcIilcIjpQKX0sY3Jpc3A6ZnVuY3Rpb24oYSl7dmFyIGIsYz17fSxkLGU9YS5zdHJva2VXaWR0aHx8dGhpcy5zdHJva2VXaWR0aHx8MDtkPXYoZSklMi8yO2EueD1VKGEueHx8dGhpcy54fHwwKStkO2EueT1VKGEueXx8dGhpcy55fHwwKStkO2Eud2lkdGg9VSgoYS53aWR0aHx8dGhpcy53aWR0aHx8XG4wKS0yKmQpO2EuaGVpZ2h0PVUoKGEuaGVpZ2h0fHx0aGlzLmhlaWdodHx8MCktMipkKTthLnN0cm9rZVdpZHRoPWU7Zm9yKGIgaW4gYSl0aGlzW2JdIT09YVtiXSYmKHRoaXNbYl09Y1tiXT1hW2JdKTtyZXR1cm4gY30sY3NzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc3R5bGVzLGM9e30sZD10aGlzLmVsZW1lbnQsZSxmLGc9XCJcIjtlPSFiO2lmKGEmJmEuY29sb3IpYS5maWxsPWEuY29sb3I7aWYoYilmb3IoZiBpbiBhKWFbZl0hPT1iW2ZdJiYoY1tmXT1hW2ZdLGU9ITApO2lmKGUpe2U9dGhpcy50ZXh0V2lkdGg9YSYmYS53aWR0aCYmZC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09XCJ0ZXh0XCImJnkoYS53aWR0aCk7YiYmKGE9cihiLGMpKTt0aGlzLnN0eWxlcz1hO2UmJihnYXx8IWJhJiZ0aGlzLnJlbmRlcmVyLmZvckV4cG9ydCkmJmRlbGV0ZSBhLndpZHRoO2lmKEFhJiYhYmEpQih0aGlzLmVsZW1lbnQsYSk7ZWxzZXtiPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCItXCIrYi50b0xvd2VyQ2FzZSgpfTtcbmZvcihmIGluIGEpZys9Zi5yZXBsYWNlKC8oW0EtWl0pL2csYikrXCI6XCIrYVtmXStcIjtcIjtGKGQsXCJzdHlsZVwiLGcpfWUmJnRoaXMuYWRkZWQmJnRoaXMucmVuZGVyZXIuYnVpbGRUZXh0KHRoaXMpfXJldHVybiB0aGlzfSxvbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmVsZW1lbnQ7JGEmJmE9PT1cImNsaWNrXCI/KGQub250b3VjaHN0YXJ0PWZ1bmN0aW9uKGEpe2MudG91Y2hFdmVudEZpcmVkPURhLm5vdygpO2EucHJldmVudERlZmF1bHQoKTtiLmNhbGwoZCxhKX0sZC5vbmNsaWNrPWZ1bmN0aW9uKGEpeyh3YS5pbmRleE9mKFwiQW5kcm9pZFwiKT09PS0xfHxEYS5ub3coKS0oYy50b3VjaEV2ZW50RmlyZWR8fDApPjExMDApJiZiLmNhbGwoZCxhKX0pOmRbXCJvblwiK2FdPWI7cmV0dXJuIHRoaXN9LHNldFJhZGlhbFJlZmVyZW5jZTpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQucmFkaWFsUmVmZXJlbmNlPWE7cmV0dXJuIHRoaXN9LHRyYW5zbGF0ZTpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmF0dHIoe3RyYW5zbGF0ZVg6YSxcbnRyYW5zbGF0ZVk6Yn0pfSxpbnZlcnQ6ZnVuY3Rpb24oKXt0aGlzLmludmVydGVkPSEwO3RoaXMudXBkYXRlVHJhbnNmb3JtKCk7cmV0dXJuIHRoaXN9LHVwZGF0ZVRyYW5zZm9ybTpmdW5jdGlvbigpe3ZhciBhPXRoaXMudHJhbnNsYXRlWHx8MCxiPXRoaXMudHJhbnNsYXRlWXx8MCxjPXRoaXMuc2NhbGVYLGQ9dGhpcy5zY2FsZVksZT10aGlzLmludmVydGVkLGY9dGhpcy5yb3RhdGlvbixnPXRoaXMuZWxlbWVudDtlJiYoYSs9dGhpcy5hdHRyKFwid2lkdGhcIiksYis9dGhpcy5hdHRyKFwiaGVpZ2h0XCIpKTthPVtcInRyYW5zbGF0ZShcIithK1wiLFwiK2IrXCIpXCJdO2U/YS5wdXNoKFwicm90YXRlKDkwKSBzY2FsZSgtMSwxKVwiKTpmJiZhLnB1c2goXCJyb3RhdGUoXCIrZitcIiBcIisoZy5nZXRBdHRyaWJ1dGUoXCJ4XCIpfHwwKStcIiBcIisoZy5nZXRBdHRyaWJ1dGUoXCJ5XCIpfHwwKStcIilcIik7KHMoYyl8fHMoZCkpJiZhLnB1c2goXCJzY2FsZShcIitwKGMsMSkrXCIgXCIrcChkLDEpK1wiKVwiKTthLmxlbmd0aCYmZy5zZXRBdHRyaWJ1dGUoXCJ0cmFuc2Zvcm1cIixcbmEuam9pbihcIiBcIikpfSx0b0Zyb250OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5lbGVtZW50O2EucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChhKTtyZXR1cm4gdGhpc30sYWxpZ246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9e307ZT10aGlzLnJlbmRlcmVyO2Y9ZS5hbGlnbmVkT2JqZWN0cztpZihhKXtpZih0aGlzLmFsaWduT3B0aW9ucz1hLHRoaXMuYWxpZ25CeVRyYW5zbGF0ZT1iLCFjfHxHYShjKSl0aGlzLmFsaWduVG89ZD1jfHxcInJlbmRlcmVyXCIsbGEoZix0aGlzKSxmLnB1c2godGhpcyksYz1udWxsfWVsc2UgYT10aGlzLmFsaWduT3B0aW9ucyxiPXRoaXMuYWxpZ25CeVRyYW5zbGF0ZSxkPXRoaXMuYWxpZ25UbztjPXAoYyxlW2RdLGUpO2Q9YS5hbGlnbjtlPWEudmVydGljYWxBbGlnbjtmPShjLnh8fDApKyhhLnh8fDApO2c9KGMueXx8MCkrKGEueXx8MCk7aWYoZD09PVwicmlnaHRcInx8ZD09PVwiY2VudGVyXCIpZis9KGMud2lkdGgtKGEud2lkdGh8fDApKS97cmlnaHQ6MSxjZW50ZXI6Mn1bZF07XG5oW2I/XCJ0cmFuc2xhdGVYXCI6XCJ4XCJdPXYoZik7aWYoZT09PVwiYm90dG9tXCJ8fGU9PT1cIm1pZGRsZVwiKWcrPShjLmhlaWdodC0oYS5oZWlnaHR8fDApKS8oe2JvdHRvbToxLG1pZGRsZToyfVtlXXx8MSk7aFtiP1widHJhbnNsYXRlWVwiOlwieVwiXT12KGcpO3RoaXNbdGhpcy5wbGFjZWQ/XCJhbmltYXRlXCI6XCJhdHRyXCJdKGgpO3RoaXMucGxhY2VkPSEwO3RoaXMuYWxpZ25BdHRyPWg7cmV0dXJuIHRoaXN9LGdldEJCb3g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJCb3gsYj10aGlzLnJlbmRlcmVyLGMsZCxlPXRoaXMucm90YXRpb247Yz10aGlzLmVsZW1lbnQ7dmFyIGY9dGhpcy5zdHlsZXMsZz1lKkVhO2Q9dGhpcy50ZXh0U3RyO3ZhciBoO2lmKGQ9PT1cIlwifHxQYi50ZXN0KGQpKWg9XCJudW0uXCIrZC50b1N0cmluZygpLmxlbmd0aCsoZj9cInxcIitmLmZvbnRTaXplK1wifFwiK2YuZm9udEZhbWlseTpcIlwiKTtoJiYoYT1iLmNhY2hlW2hdKTtpZighYSl7aWYoYy5uYW1lc3BhY2VVUkk9PT14YXx8Yi5mb3JFeHBvcnQpe3RyeXthPVxuYy5nZXRCQm94P3Ioe30sYy5nZXRCQm94KCkpOnt3aWR0aDpjLm9mZnNldFdpZHRoLGhlaWdodDpjLm9mZnNldEhlaWdodH19Y2F0Y2goaSl7fWlmKCFhfHxhLndpZHRoPDApYT17d2lkdGg6MCxoZWlnaHQ6MH19ZWxzZSBhPXRoaXMuaHRtbEdldEJCb3goKTtpZihiLmlzU1ZHKXtjPWEud2lkdGg7ZD1hLmhlaWdodDtpZihBYSYmZiYmZi5mb250U2l6ZT09PVwiMTFweFwiJiZkLnRvUHJlY2lzaW9uKDMpPT09XCIxNi45XCIpYS5oZWlnaHQ9ZD0xNDtpZihlKWEud2lkdGg9UShkKmZhKGcpKStRKGMqYWEoZykpLGEuaGVpZ2h0PVEoZCphYShnKSkrUShjKmZhKGcpKX10aGlzLmJCb3g9YTtoJiYoYi5jYWNoZVtoXT1hKX1yZXR1cm4gYX0sc2hvdzpmdW5jdGlvbihhKXthJiZ0aGlzLmVsZW1lbnQubmFtZXNwYWNlVVJJPT09eGE/dGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcInZpc2liaWxpdHlcIik6dGhpcy5hdHRyKHt2aXNpYmlsaXR5OmE/XCJpbmhlcml0XCI6XCJ2aXNpYmxlXCJ9KTtyZXR1cm4gdGhpc30sXG5oaWRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXR0cih7dmlzaWJpbGl0eTpcImhpZGRlblwifSl9LGZhZGVPdXQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcztiLmFuaW1hdGUoe29wYWNpdHk6MH0se2R1cmF0aW9uOmF8fDE1MCxjb21wbGV0ZTpmdW5jdGlvbigpe2IuYXR0cih7eTotOTk5OX0pfX0pfSxhZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZW5kZXJlcixjPWF8fGIsZD1jLmVsZW1lbnR8fGIuYm94LGU9dGhpcy5lbGVtZW50LGY9dGhpcy56SW5kZXgsZyxoO2lmKGEpdGhpcy5wYXJlbnRHcm91cD1hO3RoaXMucGFyZW50SW52ZXJ0ZWQ9YSYmYS5pbnZlcnRlZDt0aGlzLnRleHRTdHIhPT12b2lkIDAmJmIuYnVpbGRUZXh0KHRoaXMpO2lmKGYpYy5oYW5kbGVaPSEwLGY9eShmKTtpZihjLmhhbmRsZVope2E9ZC5jaGlsZE5vZGVzO2ZvcihnPTA7ZzxhLmxlbmd0aDtnKyspaWYoYj1hW2ddLGM9RihiLFwiekluZGV4XCIpLGIhPT1lJiYoeShjKT5mfHwhcyhmKSYmcyhjKSkpe2QuaW5zZXJ0QmVmb3JlKGUsXG5iKTtoPSEwO2JyZWFrfX1ofHxkLmFwcGVuZENoaWxkKGUpO3RoaXMuYWRkZWQ9ITA7aWYodGhpcy5vbkFkZCl0aGlzLm9uQWRkKCk7cmV0dXJuIHRoaXN9LHNhZmVSZW1vdmVDaGlsZDpmdW5jdGlvbihhKXt2YXIgYj1hLnBhcmVudE5vZGU7YiYmYi5yZW1vdmVDaGlsZChhKX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmVsZW1lbnR8fHt9LGM9YS5zaGFkb3dzLGQ9YS5yZW5kZXJlci5pc1NWRyYmYi5ub2RlTmFtZT09PVwiU1BBTlwiJiZhLnBhcmVudEdyb3VwLGUsZjtiLm9uY2xpY2s9Yi5vbm1vdXNlb3V0PWIub25tb3VzZW92ZXI9Yi5vbm1vdXNlbW92ZT1iLnBvaW50PW51bGw7YmIoYSk7aWYoYS5jbGlwUGF0aClhLmNsaXBQYXRoPWEuY2xpcFBhdGguZGVzdHJveSgpO2lmKGEuc3RvcHMpe2ZvcihmPTA7ZjxhLnN0b3BzLmxlbmd0aDtmKyspYS5zdG9wc1tmXT1hLnN0b3BzW2ZdLmRlc3Ryb3koKTthLnN0b3BzPW51bGx9YS5zYWZlUmVtb3ZlQ2hpbGQoYik7Zm9yKGMmJlxucShjLGZ1bmN0aW9uKGIpe2Euc2FmZVJlbW92ZUNoaWxkKGIpfSk7ZCYmZC5kaXYmJmQuZGl2LmNoaWxkTm9kZXMubGVuZ3RoPT09MDspYj1kLnBhcmVudEdyb3VwLGEuc2FmZVJlbW92ZUNoaWxkKGQuZGl2KSxkZWxldGUgZC5kaXYsZD1iO2EuYWxpZ25UbyYmbGEoYS5yZW5kZXJlci5hbGlnbmVkT2JqZWN0cyxhKTtmb3IoZSBpbiBhKWRlbGV0ZSBhW2VdO3JldHVybiBudWxsfSxzaGFkb3c6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGUsZixnPXRoaXMuZWxlbWVudCxoLGksaixrO2lmKGEpe2k9cChhLndpZHRoLDMpO2o9KGEub3BhY2l0eXx8MC4xNSkvaTtrPXRoaXMucGFyZW50SW52ZXJ0ZWQ/XCIoLTEsLTEpXCI6XCIoXCIrcChhLm9mZnNldFgsMSkrXCIsIFwiK3AoYS5vZmZzZXRZLDEpK1wiKVwiO2ZvcihlPTE7ZTw9aTtlKyspe2Y9Zy5jbG9uZU5vZGUoMCk7aD1pKjIrMS0yKmU7RihmLHtpc1NoYWRvdzpcInRydWVcIixzdHJva2U6YS5jb2xvcnx8XCJibGFja1wiLFwic3Ryb2tlLW9wYWNpdHlcIjpqKlxuZSxcInN0cm9rZS13aWR0aFwiOmgsdHJhbnNmb3JtOlwidHJhbnNsYXRlXCIrayxmaWxsOlB9KTtpZihjKUYoZixcImhlaWdodFwiLHQoRihmLFwiaGVpZ2h0XCIpLWgsMCkpLGYuY3V0SGVpZ2h0PWg7Yj9iLmVsZW1lbnQuYXBwZW5kQ2hpbGQoZik6Zy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShmLGcpO2QucHVzaChmKX10aGlzLnNoYWRvd3M9ZH1yZXR1cm4gdGhpc30seEdldHRlcjpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQubm9kZU5hbWU9PT1cImNpcmNsZVwiJiYoYT17eDpcImN4XCIseTpcImN5XCJ9W2FdfHxhKTtyZXR1cm4gdGhpcy5fZGVmYXVsdEdldHRlcihhKX0sX2RlZmF1bHRHZXR0ZXI6ZnVuY3Rpb24oYSl7YT1wKHRoaXNbYV0sdGhpcy5lbGVtZW50P3RoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoYSk6bnVsbCwwKTsvXltcXC0wLTlcXC5dKyQvLnRlc3QoYSkmJihhPXBhcnNlRmxvYXQoYSkpO3JldHVybiBhfSxkU2V0dGVyOmZ1bmN0aW9uKGEsYixjKXthJiZhLmpvaW4mJihhPWEuam9pbihcIiBcIikpO1xuLyhOYU58IHsyfXxeJCkvLnRlc3QoYSkmJihhPVwiTSAwIDBcIik7Yy5zZXRBdHRyaWJ1dGUoYixhKTt0aGlzW2JdPWF9LGRhc2hzdHlsZVNldHRlcjpmdW5jdGlvbihhKXt2YXIgYjtpZihhPWEmJmEudG9Mb3dlckNhc2UoKSl7YT1hLnJlcGxhY2UoXCJzaG9ydGRhc2hkb3Rkb3RcIixcIjMsMSwxLDEsMSwxLFwiKS5yZXBsYWNlKFwic2hvcnRkYXNoZG90XCIsXCIzLDEsMSwxXCIpLnJlcGxhY2UoXCJzaG9ydGRvdFwiLFwiMSwxLFwiKS5yZXBsYWNlKFwic2hvcnRkYXNoXCIsXCIzLDEsXCIpLnJlcGxhY2UoXCJsb25nZGFzaFwiLFwiOCwzLFwiKS5yZXBsYWNlKC9kb3QvZyxcIjEsMyxcIikucmVwbGFjZShcImRhc2hcIixcIjQsMyxcIikucmVwbGFjZSgvLCQvLFwiXCIpLnNwbGl0KFwiLFwiKTtmb3IoYj1hLmxlbmd0aDtiLS07KWFbYl09eShhW2JdKSp0aGlzW1wic3Ryb2tlLXdpZHRoXCJdO2E9YS5qb2luKFwiLFwiKS5yZXBsYWNlKFwiTmFOXCIsXCJub25lXCIpO3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaGFycmF5XCIsYSl9fSxcbmFsaWduU2V0dGVyOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJ0ZXh0LWFuY2hvclwiLHtsZWZ0Olwic3RhcnRcIixjZW50ZXI6XCJtaWRkbGVcIixyaWdodDpcImVuZFwifVthXSl9LG9wYWNpdHlTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe3RoaXNbYl09YTtjLnNldEF0dHJpYnV0ZShiLGEpfSx0aXRsZVNldHRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0aXRsZVwiKVswXTtifHwoYj14LmNyZWF0ZUVsZW1lbnROUyh4YSxcInRpdGxlXCIpLHRoaXMuZWxlbWVudC5hcHBlbmRDaGlsZChiKSk7Yi50ZXh0Q29udGVudD1wKGEsXCJcIikucmVwbGFjZSgvPFtePl0qPi9nLFwiXCIpfSx0ZXh0U2V0dGVyOmZ1bmN0aW9uKGEpe2lmKGEhPT10aGlzLnRleHRTdHIpZGVsZXRlIHRoaXMuYkJveCx0aGlzLnRleHRTdHI9YSx0aGlzLmFkZGVkJiZ0aGlzLnJlbmRlcmVyLmJ1aWxkVGV4dCh0aGlzKX0sZmlsbFNldHRlcjpmdW5jdGlvbihhLGIsXG5jKXt0eXBlb2YgYT09PVwic3RyaW5nXCI/Yy5zZXRBdHRyaWJ1dGUoYixhKTphJiZ0aGlzLmNvbG9yR3JhZGllbnQoYSxiLGMpfSx6SW5kZXhTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe2Muc2V0QXR0cmlidXRlKGIsYSk7dGhpc1tiXT1hfSxfZGVmYXVsdFNldHRlcjpmdW5jdGlvbihhLGIsYyl7Yy5zZXRBdHRyaWJ1dGUoYixhKX19O1MucHJvdG90eXBlLnlHZXR0ZXI9Uy5wcm90b3R5cGUueEdldHRlcjtTLnByb3RvdHlwZS50cmFuc2xhdGVYU2V0dGVyPVMucHJvdG90eXBlLnRyYW5zbGF0ZVlTZXR0ZXI9Uy5wcm90b3R5cGUucm90YXRpb25TZXR0ZXI9Uy5wcm90b3R5cGUudmVydGljYWxBbGlnblNldHRlcj1TLnByb3RvdHlwZS5zY2FsZVhTZXR0ZXI9Uy5wcm90b3R5cGUuc2NhbGVZU2V0dGVyPWZ1bmN0aW9uKGEsYil7dGhpc1tiXT1hO3RoaXMuZG9UcmFuc2Zvcm09ITB9O1MucHJvdG90eXBlW1wic3Ryb2tlLXdpZHRoU2V0dGVyXCJdPVMucHJvdG90eXBlLnN0cm9rZVNldHRlcj1mdW5jdGlvbihhLFxuYixjKXt0aGlzW2JdPWE7aWYodGhpcy5zdHJva2UmJnRoaXNbXCJzdHJva2Utd2lkdGhcIl0pdGhpcy5zdHJva2VXaWR0aD10aGlzW1wic3Ryb2tlLXdpZHRoXCJdLFMucHJvdG90eXBlLmZpbGxTZXR0ZXIuY2FsbCh0aGlzLHRoaXMuc3Ryb2tlLFwic3Ryb2tlXCIsYyksYy5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIix0aGlzW1wic3Ryb2tlLXdpZHRoXCJdKSx0aGlzLmhhc1N0cm9rZT0hMDtlbHNlIGlmKGI9PT1cInN0cm9rZS13aWR0aFwiJiZhPT09MCYmdGhpcy5oYXNTdHJva2UpYy5yZW1vdmVBdHRyaWJ1dGUoXCJzdHJva2VcIiksdGhpcy5oYXNTdHJva2U9ITF9O3ZhciB0YT1mdW5jdGlvbigpe3RoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O3RhLnByb3RvdHlwZT17RWxlbWVudDpTLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1sb2NhdGlvbixnLGQ9dGhpcy5jcmVhdGVFbGVtZW50KFwic3ZnXCIpLmF0dHIoe3ZlcnNpb246XCIxLjFcIn0pLmNzcyh0aGlzLmdldFN0eWxlKGQpKTtcbmc9ZC5lbGVtZW50O2EuYXBwZW5kQ2hpbGQoZyk7YS5pbm5lckhUTUwuaW5kZXhPZihcInhtbG5zXCIpPT09LTEmJkYoZyxcInhtbG5zXCIseGEpO3RoaXMuaXNTVkc9ITA7dGhpcy5ib3g9Zzt0aGlzLmJveFdyYXBwZXI9ZDt0aGlzLmFsaWduZWRPYmplY3RzPVtdO3RoaXMudXJsPShVYXx8dGIpJiZ4LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYmFzZVwiKS5sZW5ndGg/Zi5ocmVmLnJlcGxhY2UoLyMuKj8kLyxcIlwiKS5yZXBsYWNlKC8oW1xcKCdcXCldKS9nLFwiXFxcXCQxXCIpLnJlcGxhY2UoLyAvZyxcIiUyMFwiKTpcIlwiO3RoaXMuY3JlYXRlRWxlbWVudChcImRlc2NcIikuYWRkKCkuZWxlbWVudC5hcHBlbmRDaGlsZCh4LmNyZWF0ZVRleHROb2RlKFwiQ3JlYXRlZCB3aXRoIEhpZ2hjaGFydHMgNC4wLjRcIikpO3RoaXMuZGVmcz10aGlzLmNyZWF0ZUVsZW1lbnQoXCJkZWZzXCIpLmFkZCgpO3RoaXMuZm9yRXhwb3J0PWU7dGhpcy5ncmFkaWVudHM9e307dGhpcy5jYWNoZT17fTt0aGlzLnNldFNpemUoYixjLCExKTt2YXIgaDtcbmlmKFVhJiZhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCl0aGlzLnN1YlBpeGVsRml4PWI9ZnVuY3Rpb24oKXtCKGEse2xlZnQ6MCx0b3A6MH0pO2g9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtCKGEse2xlZnQ6TGEoaC5sZWZ0KS1oLmxlZnQrXCJweFwiLHRvcDpMYShoLnRvcCktaC50b3ArXCJweFwifSl9LGIoKSxOKEcsXCJyZXNpemVcIixiKX0sZ2V0U3R5bGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuc3R5bGU9cih7Zm9udEZhbWlseTonXCJMdWNpZGEgR3JhbmRlXCIsIFwiTHVjaWRhIFNhbnMgVW5pY29kZVwiLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmJyxmb250U2l6ZTpcIjEycHhcIn0sYSl9LGlzSGlkZGVuOmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuYm94V3JhcHBlci5nZXRCQm94KCkud2lkdGh9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmRlZnM7dGhpcy5ib3g9bnVsbDt0aGlzLmJveFdyYXBwZXI9dGhpcy5ib3hXcmFwcGVyLmRlc3Ryb3koKTtQYSh0aGlzLmdyYWRpZW50c3x8XG57fSk7dGhpcy5ncmFkaWVudHM9bnVsbDtpZihhKXRoaXMuZGVmcz1hLmRlc3Ryb3koKTt0aGlzLnN1YlBpeGVsRml4JiZYKEcsXCJyZXNpemVcIix0aGlzLnN1YlBpeGVsRml4KTtyZXR1cm4gdGhpcy5hbGlnbmVkT2JqZWN0cz1udWxsfSxjcmVhdGVFbGVtZW50OmZ1bmN0aW9uKGEpe3ZhciBiPW5ldyB0aGlzLkVsZW1lbnQ7Yi5pbml0KHRoaXMsYSk7cmV0dXJuIGJ9LGRyYXc6ZnVuY3Rpb24oKXt9LGJ1aWxkVGV4dDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5lbGVtZW50LGM9dGhpcyxkPWMuZm9yRXhwb3J0LGU9cChhLnRleHRTdHIsXCJcIikudG9TdHJpbmcoKSxmPWUuaW5kZXhPZihcIjxcIikhPT0tMSxnPWIuY2hpbGROb2RlcyxoLGksaj1GKGIsXCJ4XCIpLGs9YS5zdHlsZXMsbD1hLnRleHRXaWR0aCxuPWsmJmsubGluZUhlaWdodCxtPWsmJmsuSGNUZXh0U3Ryb2tlLG89Zy5sZW5ndGgsWT1mdW5jdGlvbihhKXtyZXR1cm4gbj95KG4pOmMuZm9udE1ldHJpY3MoLyhweHxlbSkkLy50ZXN0KGEmJlxuYS5zdHlsZS5mb250U2l6ZSk/YS5zdHlsZS5mb250U2l6ZTprJiZrLmZvbnRTaXplfHxjLnN0eWxlLmZvbnRTaXplfHwxMixhKS5ofTtvLS07KWIucmVtb3ZlQ2hpbGQoZ1tvXSk7IWYmJiFtJiZlLmluZGV4T2YoXCIgXCIpPT09LTE/Yi5hcHBlbmRDaGlsZCh4LmNyZWF0ZVRleHROb2RlKGUpKTooaD0vPC4qc3R5bGU9XCIoW15cIl0rKVwiLio+LyxpPS88LipocmVmPVwiKGh0dHBbXlwiXSspXCIuKj4vLGwmJiFhLmFkZGVkJiZ0aGlzLmJveC5hcHBlbmRDaGlsZChiKSxlPWY/ZS5yZXBsYWNlKC88KGJ8c3Ryb25nKT4vZywnPHNwYW4gc3R5bGU9XCJmb250LXdlaWdodDpib2xkXCI+JykucmVwbGFjZSgvPChpfGVtKT4vZywnPHNwYW4gc3R5bGU9XCJmb250LXN0eWxlOml0YWxpY1wiPicpLnJlcGxhY2UoLzxhL2csXCI8c3BhblwiKS5yZXBsYWNlKC88XFwvKGJ8c3Ryb25nfGl8ZW18YSk+L2csXCI8L3NwYW4+XCIpLnNwbGl0KC88YnIuKj8+L2cpOltlXSxlW2UubGVuZ3RoLTFdPT09XCJcIiYmZS5wb3AoKSxxKGUsZnVuY3Rpb24oZSxcbmYpe3ZhciBnLG49MCxlPWUucmVwbGFjZSgvPHNwYW4vZyxcInx8fDxzcGFuXCIpLnJlcGxhY2UoLzxcXC9zcGFuPi9nLFwiPC9zcGFuPnx8fFwiKTtnPWUuc3BsaXQoXCJ8fHxcIik7cShnLGZ1bmN0aW9uKGUpe2lmKGUhPT1cIlwifHxnLmxlbmd0aD09PTEpe3ZhciBtPXt9LG89eC5jcmVhdGVFbGVtZW50TlMoeGEsXCJ0c3BhblwiKSxwO2gudGVzdChlKSYmKHA9ZS5tYXRjaChoKVsxXS5yZXBsYWNlKC8oO3wgfF4pY29sb3IoWyA6XSkvLFwiJDFmaWxsJDJcIiksRihvLFwic3R5bGVcIixwKSk7aS50ZXN0KGUpJiYhZCYmKEYobyxcIm9uY2xpY2tcIiwnbG9jYXRpb24uaHJlZj1cIicrZS5tYXRjaChpKVsxXSsnXCInKSxCKG8se2N1cnNvcjpcInBvaW50ZXJcIn0pKTtlPShlLnJlcGxhY2UoLzwoLnxcXG4pKj8+L2csXCJcIil8fFwiIFwiKS5yZXBsYWNlKC8mbHQ7L2csXCI8XCIpLnJlcGxhY2UoLyZndDsvZyxcIj5cIik7aWYoZSE9PVwiIFwiKXtvLmFwcGVuZENoaWxkKHguY3JlYXRlVGV4dE5vZGUoZSkpO2lmKG4pbS5keD0wO2Vsc2UgaWYoZiYmXG5qIT09bnVsbCltLng9ajtGKG8sbSk7Yi5hcHBlbmRDaGlsZChvKTshbiYmZiYmKCFiYSYmZCYmQihvLHtkaXNwbGF5OlwiYmxvY2tcIn0pLEYobyxcImR5XCIsWShvKSkpO2lmKGwpZm9yKHZhciBlPWUucmVwbGFjZSgvKFteXFxeXSktL2csXCIkMS0gXCIpLnNwbGl0KFwiIFwiKSxtPWcubGVuZ3RoPjF8fGUubGVuZ3RoPjEmJmsud2hpdGVTcGFjZSE9PVwibm93cmFwXCIscSxELHM9ay5IY0hlaWdodCx0PVtdLHU9WShvKSxMYj0xO20mJihlLmxlbmd0aHx8dC5sZW5ndGgpOylkZWxldGUgYS5iQm94LHE9YS5nZXRCQm94KCksRD1xLndpZHRoLCFiYSYmYy5mb3JFeHBvcnQmJihEPWMubWVhc3VyZVNwYW5XaWR0aChvLmZpcnN0Q2hpbGQuZGF0YSxhLnN0eWxlcykpLHE9RD5sLCFxfHxlLmxlbmd0aD09PTE/KGU9dCx0PVtdLGUubGVuZ3RoJiYoTGIrKyxzJiZMYip1PnM/KGU9W1wiLi4uXCJdLGEuYXR0cihcInRpdGxlXCIsYS50ZXh0U3RyKSk6KG89eC5jcmVhdGVFbGVtZW50TlMoeGEsXCJ0c3BhblwiKSxGKG8se2R5OnUsXG54Omp9KSxwJiZGKG8sXCJzdHlsZVwiLHApLGIuYXBwZW5kQ2hpbGQobykpKSxEPmwmJihsPUQpKTooby5yZW1vdmVDaGlsZChvLmZpcnN0Q2hpbGQpLHQudW5zaGlmdChlLnBvcCgpKSksZS5sZW5ndGgmJm8uYXBwZW5kQ2hpbGQoeC5jcmVhdGVUZXh0Tm9kZShlLmpvaW4oXCIgXCIpLnJlcGxhY2UoLy0gL2csXCItXCIpKSk7bisrfX19KX0pKX0sYnV0dG9uOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXt2YXIgaj10aGlzLmxhYmVsKGEsYixjLGksbnVsbCxudWxsLG51bGwsbnVsbCxcImJ1dHRvblwiKSxrPTAsbCxuLG0sbyxwLHEsYT17eDE6MCx5MTowLHgyOjAseTI6MX0sZT13KHtcInN0cm9rZS13aWR0aFwiOjEsc3Ryb2tlOlwiI0NDQ0NDQ1wiLGZpbGw6e2xpbmVhckdyYWRpZW50OmEsc3RvcHM6W1swLFwiI0ZFRkVGRVwiXSxbMSxcIiNGNkY2RjZcIl1dfSxyOjIscGFkZGluZzo1LHN0eWxlOntjb2xvcjpcImJsYWNrXCJ9fSxlKTttPWUuc3R5bGU7ZGVsZXRlIGUuc3R5bGU7Zj13KGUse3N0cm9rZTpcIiM2OEFcIixcbmZpbGw6e2xpbmVhckdyYWRpZW50OmEsc3RvcHM6W1swLFwiI0ZGRlwiXSxbMSxcIiNBQ0ZcIl1dfX0sZik7bz1mLnN0eWxlO2RlbGV0ZSBmLnN0eWxlO2c9dyhlLHtzdHJva2U6XCIjNjhBXCIsZmlsbDp7bGluZWFyR3JhZGllbnQ6YSxzdG9wczpbWzAsXCIjOUJEXCJdLFsxLFwiI0NERlwiXV19fSxnKTtwPWcuc3R5bGU7ZGVsZXRlIGcuc3R5bGU7aD13KGUse3N0eWxlOntjb2xvcjpcIiNDQ0NcIn19LGgpO3E9aC5zdHlsZTtkZWxldGUgaC5zdHlsZTtOKGouZWxlbWVudCxBYT9cIm1vdXNlb3ZlclwiOlwibW91c2VlbnRlclwiLGZ1bmN0aW9uKCl7ayE9PTMmJmouYXR0cihmKS5jc3Mobyl9KTtOKGouZWxlbWVudCxBYT9cIm1vdXNlb3V0XCI6XCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oKXtrIT09MyYmKGw9W2UsZixnXVtrXSxuPVttLG8scF1ba10sai5hdHRyKGwpLmNzcyhuKSl9KTtqLnNldFN0YXRlPWZ1bmN0aW9uKGEpeyhqLnN0YXRlPWs9YSk/YT09PTI/ai5hdHRyKGcpLmNzcyhwKTphPT09MyYmai5hdHRyKGgpLmNzcyhxKTpcbmouYXR0cihlKS5jc3MobSl9O3JldHVybiBqLm9uKFwiY2xpY2tcIixmdW5jdGlvbigpe2shPT0zJiZkLmNhbGwoail9KS5hdHRyKGUpLmNzcyhyKHtjdXJzb3I6XCJkZWZhdWx0XCJ9LG0pKX0sY3Jpc3BMaW5lOmZ1bmN0aW9uKGEsYil7YVsxXT09PWFbNF0mJihhWzFdPWFbNF09dihhWzFdKS1iJTIvMik7YVsyXT09PWFbNV0mJihhWzJdPWFbNV09dihhWzJdKStiJTIvMik7cmV0dXJuIGF9LHBhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9e2ZpbGw6UH07SGEoYSk/Yi5kPWE6ZGEoYSkmJnIoYixhKTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50KFwicGF0aFwiKS5hdHRyKGIpfSxjaXJjbGU6ZnVuY3Rpb24oYSxiLGMpe2E9ZGEoYSk/YTp7eDphLHk6YixyOmN9O2I9dGhpcy5jcmVhdGVFbGVtZW50KFwiY2lyY2xlXCIpO2IueFNldHRlcj1mdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiY3hcIixhKX07Yi55U2V0dGVyPWZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJjeVwiLFxuYSl9O3JldHVybiBiLmF0dHIoYSl9LGFyYzpmdW5jdGlvbihhLGIsYyxkLGUsZil7aWYoZGEoYSkpYj1hLnksYz1hLnIsZD1hLmlubmVyUixlPWEuc3RhcnQsZj1hLmVuZCxhPWEueDthPXRoaXMuc3ltYm9sKFwiYXJjXCIsYXx8MCxifHwwLGN8fDAsY3x8MCx7aW5uZXJSOmR8fDAsc3RhcnQ6ZXx8MCxlbmQ6Znx8MH0pO2Eucj1jO3JldHVybiBhfSxyZWN0OmZ1bmN0aW9uKGEsYixjLGQsZSxmKXt2YXIgZT1kYShhKT9hLnI6ZSxnPXRoaXMuY3JlYXRlRWxlbWVudChcInJlY3RcIiksYT1kYShhKT9hOmE9PT11P3t9Ont4OmEseTpiLHdpZHRoOnQoYywwKSxoZWlnaHQ6dChkLDApfTtpZihmIT09dSlhLnN0cm9rZVdpZHRoPWYsYT1nLmNyaXNwKGEpO2lmKGUpYS5yPWU7Zy5yU2V0dGVyPWZ1bmN0aW9uKGEpe0YodGhpcy5lbGVtZW50LHtyeDphLHJ5OmF9KX07cmV0dXJuIGcuYXR0cihhKX0sc2V0U2l6ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5hbGlnbmVkT2JqZWN0cyxlPWQubGVuZ3RoO1xudGhpcy53aWR0aD1hO3RoaXMuaGVpZ2h0PWI7Zm9yKHRoaXMuYm94V3JhcHBlcltwKGMsITApP1wiYW5pbWF0ZVwiOlwiYXR0clwiXSh7d2lkdGg6YSxoZWlnaHQ6Yn0pO2UtLTspZFtlXS5hbGlnbigpfSxnOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY3JlYXRlRWxlbWVudChcImdcIik7cmV0dXJuIHMoYSk/Yi5hdHRyKHtcImNsYXNzXCI6XCJoaWdoY2hhcnRzLVwiK2F9KTpifSxpbWFnZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXtwcmVzZXJ2ZUFzcGVjdFJhdGlvOlB9O2FyZ3VtZW50cy5sZW5ndGg+MSYmcihmLHt4OmIseTpjLHdpZHRoOmQsaGVpZ2h0OmV9KTtmPXRoaXMuY3JlYXRlRWxlbWVudChcImltYWdlXCIpLmF0dHIoZik7Zi5lbGVtZW50LnNldEF0dHJpYnV0ZU5TP2YuZWxlbWVudC5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIixcImhyZWZcIixhKTpmLmVsZW1lbnQuc2V0QXR0cmlidXRlKFwiaGMtc3ZnLWhyZWZcIixhKTtyZXR1cm4gZn0sc3ltYm9sOmZ1bmN0aW9uKGEsXG5iLGMsZCxlLGYpe3ZhciBnLGg9dGhpcy5zeW1ib2xzW2FdLGg9aCYmaCh2KGIpLHYoYyksZCxlLGYpLGk9L151cmxcXCgoLio/KVxcKSQvLGosaztpZihoKWc9dGhpcy5wYXRoKGgpLHIoZyx7c3ltYm9sTmFtZTphLHg6Yix5OmMsd2lkdGg6ZCxoZWlnaHQ6ZX0pLGYmJnIoZyxmKTtlbHNlIGlmKGkudGVzdChhKSlrPWZ1bmN0aW9uKGEsYil7YS5lbGVtZW50JiYoYS5hdHRyKHt3aWR0aDpiWzBdLGhlaWdodDpiWzFdfSksYS5hbGlnbkJ5VHJhbnNsYXRlfHxhLnRyYW5zbGF0ZSh2KChkLWJbMF0pLzIpLHYoKGUtYlsxXSkvMikpKX0saj1hLm1hdGNoKGkpWzFdLGE9SmJbal18fGYmJmYud2lkdGgmJmYuaGVpZ2h0JiZbZi53aWR0aCxmLmhlaWdodF0sZz10aGlzLmltYWdlKGopLmF0dHIoe3g6Yix5OmN9KSxnLmlzSW1nPSEwLGE/ayhnLGEpOihnLmF0dHIoe3dpZHRoOjAsaGVpZ2h0OjB9KSwkKFwiaW1nXCIse29ubG9hZDpmdW5jdGlvbigpe2soZyxKYltqXT1bdGhpcy53aWR0aCx0aGlzLmhlaWdodF0pfSxcbnNyYzpqfSkpO3JldHVybiBnfSxzeW1ib2xzOntjaXJjbGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9MC4xNjYqYztyZXR1cm5bXCJNXCIsYStjLzIsYixcIkNcIixhK2MrZSxiLGErYytlLGIrZCxhK2MvMixiK2QsXCJDXCIsYS1lLGIrZCxhLWUsYixhK2MvMixiLFwiWlwiXX0sc3F1YXJlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybltcIk1cIixhLGIsXCJMXCIsYStjLGIsYStjLGIrZCxhLGIrZCxcIlpcIl19LHRyaWFuZ2xlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybltcIk1cIixhK2MvMixiLFwiTFwiLGErYyxiK2QsYSxiK2QsXCJaXCJdfSxcInRyaWFuZ2xlLWRvd25cIjpmdW5jdGlvbihhLGIsYyxkKXtyZXR1cm5bXCJNXCIsYSxiLFwiTFwiLGErYyxiLGErYy8yLGIrZCxcIlpcIl19LGRpYW1vbmQ6ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuW1wiTVwiLGErYy8yLGIsXCJMXCIsYStjLGIrZC8yLGErYy8yLGIrZCxhLGIrZC8yLFwiWlwiXX0sYXJjOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9ZS5zdGFydCxjPWUucnx8Y3x8ZCxnPWUuZW5kLVxuMC4wMDEsZD1lLmlubmVyUixoPWUub3BlbixpPWFhKGYpLGo9ZmEoZiksaz1hYShnKSxnPWZhKGcpLGU9ZS5lbmQtZjxvYT8wOjE7cmV0dXJuW1wiTVwiLGErYyppLGIrYypqLFwiQVwiLGMsYywwLGUsMSxhK2MqayxiK2MqZyxoP1wiTVwiOlwiTFwiLGErZCprLGIrZCpnLFwiQVwiLGQsZCwwLGUsMCxhK2QqaSxiK2QqaixoP1wiXCI6XCJaXCJdfSxjYWxsb3V0OmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9TChlJiZlLnJ8fDAsYyxkKSxnPWYrNixoPWUmJmUuYW5jaG9yWCxpPWUmJmUuYW5jaG9yWSxlPXYoZS5zdHJva2VXaWR0aHx8MCklMi8yO2ErPWU7Yis9ZTtlPVtcIk1cIixhK2YsYixcIkxcIixhK2MtZixiLFwiQ1wiLGErYyxiLGErYyxiLGErYyxiK2YsXCJMXCIsYStjLGIrZC1mLFwiQ1wiLGErYyxiK2QsYStjLGIrZCxhK2MtZixiK2QsXCJMXCIsYStmLGIrZCxcIkNcIixhLGIrZCxhLGIrZCxhLGIrZC1mLFwiTFwiLGEsYitmLFwiQ1wiLGEsYixhLGIsYStmLGJdO2gmJmg+YyYmaT5iK2cmJmk8YitkLWc/ZS5zcGxpY2UoMTMsMyxcblwiTFwiLGErYyxpLTYsYStjKzYsaSxhK2MsaSs2LGErYyxiK2QtZik6aCYmaDwwJiZpPmIrZyYmaTxiK2QtZz9lLnNwbGljZSgzMywzLFwiTFwiLGEsaSs2LGEtNixpLGEsaS02LGEsYitmKTppJiZpPmQmJmg+YStnJiZoPGErYy1nP2Uuc3BsaWNlKDIzLDMsXCJMXCIsaCs2LGIrZCxoLGIrZCs2LGgtNixiK2QsYStmLGIrZCk6aSYmaTwwJiZoPmErZyYmaDxhK2MtZyYmZS5zcGxpY2UoMywzLFwiTFwiLGgtNixiLGgsYi02LGgrNixiLGMtZixiKTtyZXR1cm4gZX19LGNsaXBSZWN0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVwiaGlnaGNoYXJ0cy1cIit1YisrLGY9dGhpcy5jcmVhdGVFbGVtZW50KFwiY2xpcFBhdGhcIikuYXR0cih7aWQ6ZX0pLmFkZCh0aGlzLmRlZnMpLGE9dGhpcy5yZWN0KGEsYixjLGQsMCkuYWRkKGYpO2EuaWQ9ZTthLmNsaXBQYXRoPWY7cmV0dXJuIGF9LHRleHQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Z2F8fCFiYSYmdGhpcy5mb3JFeHBvcnQsZj17fTtpZihkJiYhdGhpcy5mb3JFeHBvcnQpcmV0dXJuIHRoaXMuaHRtbChhLFxuYixjKTtmLng9TWF0aC5yb3VuZChifHwwKTtpZihjKWYueT1NYXRoLnJvdW5kKGMpO2lmKGF8fGE9PT0wKWYudGV4dD1hO2E9dGhpcy5jcmVhdGVFbGVtZW50KFwidGV4dFwiKS5hdHRyKGYpO2UmJmEuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCJ9KTtpZighZClhLnhTZXR0ZXI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0c3BhblwiKSxlLGY9Yy5nZXRBdHRyaWJ1dGUoYiksbjtmb3Iobj0wO248ZC5sZW5ndGg7bisrKWU9ZFtuXSxlLmdldEF0dHJpYnV0ZShiKT09PWYmJmUuc2V0QXR0cmlidXRlKGIsYSk7Yy5zZXRBdHRyaWJ1dGUoYixhKX07cmV0dXJuIGF9LGZvbnRNZXRyaWNzOmZ1bmN0aW9uKGEsYil7YT1hfHx0aGlzLnN0eWxlLmZvbnRTaXplO2lmKGImJkcuZ2V0Q29tcHV0ZWRTdHlsZSliPWIuZWxlbWVudHx8YixhPUcuZ2V0Q29tcHV0ZWRTdHlsZShiLFwiXCIpLmZvbnRTaXplO3ZhciBhPS9weC8udGVzdChhKT95KGEpOi9lbS8udGVzdChhKT9cbnBhcnNlRmxvYXQoYSkqMTI6MTIsYz1hPDI0P2ErNDp2KGEqMS4yKSxkPXYoYyowLjgpO3JldHVybntoOmMsYjpkLGY6YX19LGxhYmVsOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxpKXtmdW5jdGlvbiBqKCl7dmFyIGEsYjthPW8uZWxlbWVudC5zdHlsZTtEPSh0PT09dm9pZCAwfHx4Yj09PXZvaWQgMHx8bS5zdHlsZXMudGV4dEFsaWduKSYmby50ZXh0U3RyJiZvLmdldEJCb3goKTttLndpZHRoPSh0fHxELndpZHRofHwwKSsyKkMra2I7bS5oZWlnaHQ9KHhifHxELmhlaWdodHx8MCkrMipDO1I9QytuLmZvbnRNZXRyaWNzKGEmJmEuZm9udFNpemUsbykuYjtpZih5KXtpZighcClhPXYoLUoqQyksYj1oPy1SOjAsbS5ib3g9cD1kP24uc3ltYm9sKGQsYSxiLG0ud2lkdGgsbS5oZWlnaHQseik6bi5yZWN0KGEsYixtLndpZHRoLG0uaGVpZ2h0LDAseltRYl0pLHAuYXR0cihcImZpbGxcIixQKS5hZGQobSk7cC5pc0ltZ3x8cC5hdHRyKHIoe3dpZHRoOnYobS53aWR0aCksaGVpZ2h0OnYobS5oZWlnaHQpfSxcbnopKTt6PW51bGx9fWZ1bmN0aW9uIGsoKXt2YXIgYT1tLnN0eWxlcyxhPWEmJmEudGV4dEFsaWduLGI9a2IrQyooMS1KKSxjO2M9aD8wOlI7aWYocyh0KSYmRCYmKGE9PT1cImNlbnRlclwifHxhPT09XCJyaWdodFwiKSliKz17Y2VudGVyOjAuNSxyaWdodDoxfVthXSoodC1ELndpZHRoKTtpZihiIT09by54fHxjIT09by55KW8uYXR0cihcInhcIixiKSxjIT09dSYmby5hdHRyKFwieVwiLGMpO28ueD1iO28ueT1jfWZ1bmN0aW9uIGwoYSxiKXtwP3AuYXR0cihhLGIpOnpbYV09Yn12YXIgbj10aGlzLG09bi5nKGkpLG89bi50ZXh0KFwiXCIsMCwwLGcpLmF0dHIoe3pJbmRleDoxfSkscCxELEo9MCxDPTMsa2I9MCx0LHhiLHliLHgsS2I9MCx6PXt9LFIseTttLm9uQWRkPWZ1bmN0aW9uKCl7by5hZGQobSk7bS5hdHRyKHt0ZXh0OmF8fGE9PT0wP2E6XCJcIix4OmIseTpjfSk7cCYmcyhlKSYmbS5hdHRyKHthbmNob3JYOmUsYW5jaG9yWTpmfSl9O20ud2lkdGhTZXR0ZXI9ZnVuY3Rpb24oYSl7dD1hfTttLmhlaWdodFNldHRlcj1cbmZ1bmN0aW9uKGEpe3hiPWF9O20ucGFkZGluZ1NldHRlcj1mdW5jdGlvbihhKXtzKGEpJiZhIT09QyYmKEM9YSxrKCkpfTttLnBhZGRpbmdMZWZ0U2V0dGVyPWZ1bmN0aW9uKGEpe3MoYSkmJmEhPT1rYiYmKGtiPWEsaygpKX07bS5hbGlnblNldHRlcj1mdW5jdGlvbihhKXtKPXtsZWZ0OjAsY2VudGVyOjAuNSxyaWdodDoxfVthXX07bS50ZXh0U2V0dGVyPWZ1bmN0aW9uKGEpe2EhPT11JiZvLnRleHRTZXR0ZXIoYSk7aigpO2soKX07bVtcInN0cm9rZS13aWR0aFNldHRlclwiXT1mdW5jdGlvbihhLGIpe2EmJih5PSEwKTtLYj1hJTIvMjtsKGIsYSl9O20uc3Ryb2tlU2V0dGVyPW0uZmlsbFNldHRlcj1tLnJTZXR0ZXI9ZnVuY3Rpb24oYSxiKXtiPT09XCJmaWxsXCImJmEmJih5PSEwKTtsKGIsYSl9O20uYW5jaG9yWFNldHRlcj1mdW5jdGlvbihhLGIpe2U9YTtsKGIsYStLYi15Yil9O20uYW5jaG9yWVNldHRlcj1mdW5jdGlvbihhLGIpe2Y9YTtsKGIsYS14KX07bS54U2V0dGVyPWZ1bmN0aW9uKGEpe20ueD1cbmE7SiYmKGEtPUoqKCh0fHxELndpZHRoKStDKSk7eWI9dihhKTttLmF0dHIoXCJ0cmFuc2xhdGVYXCIseWIpfTttLnlTZXR0ZXI9ZnVuY3Rpb24oYSl7eD1tLnk9dihhKTttLmF0dHIoXCJ0cmFuc2xhdGVZXCIseCl9O3ZhciBBPW0uY3NzO3JldHVybiByKG0se2NzczpmdW5jdGlvbihhKXtpZihhKXt2YXIgYj17fSxhPXcoYSk7cShtLnRleHRQcm9wcyxmdW5jdGlvbihjKXthW2NdIT09dSYmKGJbY109YVtjXSxkZWxldGUgYVtjXSl9KTtvLmNzcyhiKX1yZXR1cm4gQS5jYWxsKG0sYSl9LGdldEJCb3g6ZnVuY3Rpb24oKXtyZXR1cm57d2lkdGg6RC53aWR0aCsyKkMsaGVpZ2h0OkQuaGVpZ2h0KzIqQyx4OkQueC1DLHk6RC55LUN9fSxzaGFkb3c6ZnVuY3Rpb24oYSl7cCYmcC5zaGFkb3coYSk7cmV0dXJuIG19LGRlc3Ryb3k6ZnVuY3Rpb24oKXtYKG0uZWxlbWVudCxcIm1vdXNlZW50ZXJcIik7WChtLmVsZW1lbnQsXCJtb3VzZWxlYXZlXCIpO28mJihvPW8uZGVzdHJveSgpKTtwJiYocD1wLmRlc3Ryb3koKSk7XG5TLnByb3RvdHlwZS5kZXN0cm95LmNhbGwobSk7bT1uPWo9az1sPW51bGx9fSl9fTtaYT10YTtyKFMucHJvdG90eXBlLHtodG1sQ3NzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZWxlbWVudDtpZihiPWEmJmIudGFnTmFtZT09PVwiU1BBTlwiJiZhLndpZHRoKWRlbGV0ZSBhLndpZHRoLHRoaXMudGV4dFdpZHRoPWIsdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTt0aGlzLnN0eWxlcz1yKHRoaXMuc3R5bGVzLGEpO0IodGhpcy5lbGVtZW50LGEpO3JldHVybiB0aGlzfSxodG1sR2V0QkJveDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZWxlbWVudCxiPXRoaXMuYkJveDtpZighYil7aWYoYS5ub2RlTmFtZT09PVwidGV4dFwiKWEuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiO2I9dGhpcy5iQm94PXt4OmEub2Zmc2V0TGVmdCx5OmEub2Zmc2V0VG9wLHdpZHRoOmEub2Zmc2V0V2lkdGgsaGVpZ2h0OmEub2Zmc2V0SGVpZ2h0fX1yZXR1cm4gYn0saHRtbFVwZGF0ZVRyYW5zZm9ybTpmdW5jdGlvbigpe2lmKHRoaXMuYWRkZWQpe3ZhciBhPVxudGhpcy5yZW5kZXJlcixiPXRoaXMuZWxlbWVudCxjPXRoaXMudHJhbnNsYXRlWHx8MCxkPXRoaXMudHJhbnNsYXRlWXx8MCxlPXRoaXMueHx8MCxmPXRoaXMueXx8MCxnPXRoaXMudGV4dEFsaWdufHxcImxlZnRcIixoPXtsZWZ0OjAsY2VudGVyOjAuNSxyaWdodDoxfVtnXSxpPXRoaXMuc2hhZG93cztCKGIse21hcmdpbkxlZnQ6YyxtYXJnaW5Ub3A6ZH0pO2kmJnEoaSxmdW5jdGlvbihhKXtCKGEse21hcmdpbkxlZnQ6YysxLG1hcmdpblRvcDpkKzF9KX0pO3RoaXMuaW52ZXJ0ZWQmJnEoYi5jaGlsZE5vZGVzLGZ1bmN0aW9uKGMpe2EuaW52ZXJ0Q2hpbGQoYyxiKX0pO2lmKGIudGFnTmFtZT09PVwiU1BBTlwiKXt2YXIgaj10aGlzLnJvdGF0aW9uLGssbD15KHRoaXMudGV4dFdpZHRoKSxuPVtqLGcsYi5pbm5lckhUTUwsdGhpcy50ZXh0V2lkdGhdLmpvaW4oXCIsXCIpO2lmKG4hPT10aGlzLmNUVCl7az1hLmZvbnRNZXRyaWNzKGIuc3R5bGUuZm9udFNpemUpLmI7cyhqKSYmdGhpcy5zZXRTcGFuUm90YXRpb24oaixcbmgsayk7aT1wKHRoaXMuZWxlbVdpZHRoLGIub2Zmc2V0V2lkdGgpO2lmKGk+bCYmL1sgXFwtXS8udGVzdChiLnRleHRDb250ZW50fHxiLmlubmVyVGV4dCkpQihiLHt3aWR0aDpsK1wicHhcIixkaXNwbGF5OlwiYmxvY2tcIix3aGl0ZVNwYWNlOlwibm9ybWFsXCJ9KSxpPWw7dGhpcy5nZXRTcGFuQ29ycmVjdGlvbihpLGssaCxqLGcpfUIoYix7bGVmdDplKyh0aGlzLnhDb3JyfHwwKStcInB4XCIsdG9wOmYrKHRoaXMueUNvcnJ8fDApK1wicHhcIn0pO2lmKHRiKWs9Yi5vZmZzZXRIZWlnaHQ7dGhpcy5jVFQ9bn19ZWxzZSB0aGlzLmFsaWduT25BZGQ9ITB9LHNldFNwYW5Sb3RhdGlvbjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9e30sZT1BYT9cIi1tcy10cmFuc2Zvcm1cIjp0Yj9cIi13ZWJraXQtdHJhbnNmb3JtXCI6VWE/XCJNb3pUcmFuc2Zvcm1cIjpIYj9cIi1vLXRyYW5zZm9ybVwiOlwiXCI7ZFtlXT1kLnRyYW5zZm9ybT1cInJvdGF0ZShcIithK1wiZGVnKVwiO2RbZSsoVWE/XCJPcmlnaW5cIjpcIi1vcmlnaW5cIildPWQudHJhbnNmb3JtT3JpZ2luPVxuYioxMDArXCIlIFwiK2MrXCJweFwiO0IodGhpcy5lbGVtZW50LGQpfSxnZXRTcGFuQ29ycmVjdGlvbjpmdW5jdGlvbihhLGIsYyl7dGhpcy54Q29ycj0tYSpjO3RoaXMueUNvcnI9LWJ9fSk7cih0YS5wcm90b3R5cGUse2h0bWw6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuY3JlYXRlRWxlbWVudChcInNwYW5cIiksZT1kLmVsZW1lbnQsZj1kLnJlbmRlcmVyO2QudGV4dFNldHRlcj1mdW5jdGlvbihhKXthIT09ZS5pbm5lckhUTUwmJmRlbGV0ZSB0aGlzLmJCb3g7ZS5pbm5lckhUTUw9dGhpcy50ZXh0U3RyPWF9O2QueFNldHRlcj1kLnlTZXR0ZXI9ZC5hbGlnblNldHRlcj1kLnJvdGF0aW9uU2V0dGVyPWZ1bmN0aW9uKGEsYil7Yj09PVwiYWxpZ25cIiYmKGI9XCJ0ZXh0QWxpZ25cIik7ZFtiXT1hO2QuaHRtbFVwZGF0ZVRyYW5zZm9ybSgpfTtkLmF0dHIoe3RleHQ6YSx4OnYoYikseTp2KGMpfSkuY3NzKHtwb3NpdGlvbjpcImFic29sdXRlXCIsd2hpdGVTcGFjZTpcIm5vd3JhcFwiLGZvbnRGYW1pbHk6dGhpcy5zdHlsZS5mb250RmFtaWx5LFxuZm9udFNpemU6dGhpcy5zdHlsZS5mb250U2l6ZX0pO2QuY3NzPWQuaHRtbENzcztpZihmLmlzU1ZHKWQuYWRkPWZ1bmN0aW9uKGEpe3ZhciBiLGM9Zi5ib3gucGFyZW50Tm9kZSxqPVtdO2lmKHRoaXMucGFyZW50R3JvdXA9YSl7aWYoYj1hLmRpdiwhYil7Zm9yKDthOylqLnB1c2goYSksYT1hLnBhcmVudEdyb3VwO3Eoai5yZXZlcnNlKCksZnVuY3Rpb24oYSl7dmFyIGQ7Yj1hLmRpdj1hLmRpdnx8JChLYSx7Y2xhc3NOYW1lOkYoYS5lbGVtZW50LFwiY2xhc3NcIil9LHtwb3NpdGlvbjpcImFic29sdXRlXCIsbGVmdDooYS50cmFuc2xhdGVYfHwwKStcInB4XCIsdG9wOihhLnRyYW5zbGF0ZVl8fDApK1wicHhcIn0sYnx8Yyk7ZD1iLnN0eWxlO3IoYSx7dHJhbnNsYXRlWFNldHRlcjpmdW5jdGlvbihiLGMpe2QubGVmdD1iK1wicHhcIjthW2NdPWI7YS5kb1RyYW5zZm9ybT0hMH0sdHJhbnNsYXRlWVNldHRlcjpmdW5jdGlvbihiLGMpe2QudG9wPWIrXCJweFwiO2FbY109YjthLmRvVHJhbnNmb3JtPSEwfSx2aXNpYmlsaXR5U2V0dGVyOmZ1bmN0aW9uKGEsXG5iKXtkW2JdPWF9fSl9KX19ZWxzZSBiPWM7Yi5hcHBlbmRDaGlsZChlKTtkLmFkZGVkPSEwO2QuYWxpZ25PbkFkZCYmZC5odG1sVXBkYXRlVHJhbnNmb3JtKCk7cmV0dXJuIGR9O3JldHVybiBkfX0pO3ZhciBaO2lmKCFiYSYmIWdhKXtaPXtpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGM9W1wiPFwiLGIsJyBmaWxsZWQ9XCJmXCIgc3Ryb2tlZD1cImZcIiddLGQ9W1wicG9zaXRpb246IFwiLFwiYWJzb2x1dGVcIixcIjtcIl0sZT1iPT09S2E7KGI9PT1cInNoYXBlXCJ8fGUpJiZkLnB1c2goXCJsZWZ0OjA7dG9wOjA7d2lkdGg6MXB4O2hlaWdodDoxcHg7XCIpO2QucHVzaChcInZpc2liaWxpdHk6IFwiLGU/XCJoaWRkZW5cIjpcInZpc2libGVcIik7Yy5wdXNoKCcgc3R5bGU9XCInLGQuam9pbihcIlwiKSwnXCIvPicpO2lmKGIpYz1lfHxiPT09XCJzcGFuXCJ8fGI9PT1cImltZ1wiP2Muam9pbihcIlwiKTphLnByZXBWTUwoYyksdGhpcy5lbGVtZW50PSQoYyk7dGhpcy5yZW5kZXJlcj1hfSxhZGQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yZW5kZXJlcixcbmM9dGhpcy5lbGVtZW50LGQ9Yi5ib3gsZD1hP2EuZWxlbWVudHx8YTpkO2EmJmEuaW52ZXJ0ZWQmJmIuaW52ZXJ0Q2hpbGQoYyxkKTtkLmFwcGVuZENoaWxkKGMpO3RoaXMuYWRkZWQ9ITA7dGhpcy5hbGlnbk9uQWRkJiYhdGhpcy5kZWZlclVwZGF0ZVRyYW5zZm9ybSYmdGhpcy51cGRhdGVUcmFuc2Zvcm0oKTtpZih0aGlzLm9uQWRkKXRoaXMub25BZGQoKTtyZXR1cm4gdGhpc30sdXBkYXRlVHJhbnNmb3JtOlMucHJvdG90eXBlLmh0bWxVcGRhdGVUcmFuc2Zvcm0sc2V0U3BhblJvdGF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5yb3RhdGlvbixiPWFhKGEqRWEpLGM9ZmEoYSpFYSk7Qih0aGlzLmVsZW1lbnQse2ZpbHRlcjphP1tcInByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5NYXRyaXgoTTExPVwiLGIsXCIsIE0xMj1cIiwtYyxcIiwgTTIxPVwiLGMsXCIsIE0yMj1cIixiLFwiLCBzaXppbmdNZXRob2Q9J2F1dG8gZXhwYW5kJylcIl0uam9pbihcIlwiKTpQfSl9LGdldFNwYW5Db3JyZWN0aW9uOmZ1bmN0aW9uKGEsXG5iLGMsZCxlKXt2YXIgZj1kP2FhKGQqRWEpOjEsZz1kP2ZhKGQqRWEpOjAsaD1wKHRoaXMuZWxlbUhlaWdodCx0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0KSxpO3RoaXMueENvcnI9ZjwwJiYtYTt0aGlzLnlDb3JyPWc8MCYmLWg7aT1mKmc8MDt0aGlzLnhDb3JyKz1nKmIqKGk/MS1jOmMpO3RoaXMueUNvcnItPWYqYiooZD9pP2M6MS1jOjEpO2UmJmUhPT1cImxlZnRcIiYmKHRoaXMueENvcnItPWEqYyooZjwwPy0xOjEpLGQmJih0aGlzLnlDb3JyLT1oKmMqKGc8MD8tMToxKSksQih0aGlzLmVsZW1lbnQse3RleHRBbGlnbjplfSkpfSxwYXRoVG9WTUw6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9W107Yi0tOylpZihqYShhW2JdKSljW2JdPXYoYVtiXSoxMCktNTtlbHNlIGlmKGFbYl09PT1cIlpcIiljW2JdPVwieFwiO2Vsc2UgaWYoY1tiXT1hW2JdLGEuaXNBcmMmJihhW2JdPT09XCJ3YVwifHxhW2JdPT09XCJhdFwiKSljW2IrNV09PT1jW2IrN10mJihjW2IrN10rPWFbYis3XT5hW2IrXG41XT8xOi0xKSxjW2IrNl09PT1jW2IrOF0mJihjW2IrOF0rPWFbYis4XT5hW2IrNl0/MTotMSk7cmV0dXJuIGMuam9pbihcIiBcIil8fFwieFwifSxjbGlwOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYzthPyhjPWEubWVtYmVycyxsYShjLGIpLGMucHVzaChiKSxiLmRlc3Ryb3lDbGlwPWZ1bmN0aW9uKCl7bGEoYyxiKX0sYT1hLmdldENTUyhiKSk6KGIuZGVzdHJveUNsaXAmJmIuZGVzdHJveUNsaXAoKSxhPXtjbGlwOmhiP1wiaW5oZXJpdFwiOlwicmVjdChhdXRvKVwifSk7cmV0dXJuIGIuY3NzKGEpfSxjc3M6Uy5wcm90b3R5cGUuaHRtbENzcyxzYWZlUmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oYSl7YS5wYXJlbnROb2RlJiZRYShhKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuZGVzdHJveUNsaXAmJnRoaXMuZGVzdHJveUNsaXAoKTtyZXR1cm4gUy5wcm90b3R5cGUuZGVzdHJveS5hcHBseSh0aGlzKX0sb246ZnVuY3Rpb24oYSxiKXt0aGlzLmVsZW1lbnRbXCJvblwiK2FdPWZ1bmN0aW9uKCl7dmFyIGE9XG5HLmV2ZW50O2EudGFyZ2V0PWEuc3JjRWxlbWVudDtiKGEpfTtyZXR1cm4gdGhpc30sY3V0T2ZmUGF0aDpmdW5jdGlvbihhLGIpe3ZhciBjLGE9YS5zcGxpdCgvWyAsXS8pO2M9YS5sZW5ndGg7aWYoYz09PTl8fGM9PT0xMSlhW2MtNF09YVtjLTJdPXkoYVtjLTJdKS0xMCpiO3JldHVybiBhLmpvaW4oXCIgXCIpfSxzaGFkb3c6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPVtdLGUsZj10aGlzLmVsZW1lbnQsZz10aGlzLnJlbmRlcmVyLGgsaT1mLnN0eWxlLGosaz1mLnBhdGgsbCxuLG0sbztrJiZ0eXBlb2Ygay52YWx1ZSE9PVwic3RyaW5nXCImJihrPVwieFwiKTtuPWs7aWYoYSl7bT1wKGEud2lkdGgsMyk7bz0oYS5vcGFjaXR5fHwwLjE1KS9tO2ZvcihlPTE7ZTw9MztlKyspe2w9bSoyKzEtMiplO2MmJihuPXRoaXMuY3V0T2ZmUGF0aChrLnZhbHVlLGwrMC41KSk7aj1bJzxzaGFwZSBpc1NoYWRvdz1cInRydWVcIiBzdHJva2V3ZWlnaHQ9XCInLGwsJ1wiIGZpbGxlZD1cImZhbHNlXCIgcGF0aD1cIicsbiwnXCIgY29vcmRzaXplPVwiMTAgMTBcIiBzdHlsZT1cIicsXG5mLnN0eWxlLmNzc1RleHQsJ1wiIC8+J107aD0kKGcucHJlcFZNTChqKSxudWxsLHtsZWZ0OnkoaS5sZWZ0KStwKGEub2Zmc2V0WCwxKSx0b3A6eShpLnRvcCkrcChhLm9mZnNldFksMSl9KTtpZihjKWguY3V0T2ZmPWwrMTtqPVsnPHN0cm9rZSBjb2xvcj1cIicsYS5jb2xvcnx8XCJibGFja1wiLCdcIiBvcGFjaXR5PVwiJyxvKmUsJ1wiLz4nXTskKGcucHJlcFZNTChqKSxudWxsLG51bGwsaCk7Yj9iLmVsZW1lbnQuYXBwZW5kQ2hpbGQoaCk6Zi5wYXJlbnROb2RlLmluc2VydEJlZm9yZShoLGYpO2QucHVzaChoKX10aGlzLnNoYWRvd3M9ZH1yZXR1cm4gdGhpc30sdXBkYXRlU2hhZG93czpzYSxzZXRBdHRyOmZ1bmN0aW9uKGEsYil7aGI/dGhpcy5lbGVtZW50W2FdPWI6dGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShhLGIpfSxjbGFzc1NldHRlcjpmdW5jdGlvbihhKXt0aGlzLmVsZW1lbnQuY2xhc3NOYW1lPWF9LGRhc2hzdHlsZVNldHRlcjpmdW5jdGlvbihhLGIsYyl7KGMuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzdHJva2VcIilbMF18fFxuJCh0aGlzLnJlbmRlcmVyLnByZXBWTUwoW1wiPHN0cm9rZS8+XCJdKSxudWxsLG51bGwsYykpW2JdPWF8fFwic29saWRcIjt0aGlzW2JdPWF9LGRTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuc2hhZG93cyxhPWF8fFtdO3RoaXMuZD1hLmpvaW4mJmEuam9pbihcIiBcIik7Yy5wYXRoPWE9dGhpcy5wYXRoVG9WTUwoYSk7aWYoZClmb3IoYz1kLmxlbmd0aDtjLS07KWRbY10ucGF0aD1kW2NdLmN1dE9mZj90aGlzLmN1dE9mZlBhdGgoYSxkW2NdLmN1dE9mZik6YTt0aGlzLnNldEF0dHIoYixhKX0sZmlsbFNldHRlcjpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yy5ub2RlTmFtZTtpZihkPT09XCJTUEFOXCIpYy5zdHlsZS5jb2xvcj1hO2Vsc2UgaWYoZCE9PVwiSU1HXCIpYy5maWxsZWQ9YSE9PVAsdGhpcy5zZXRBdHRyKFwiZmlsbGNvbG9yXCIsdGhpcy5yZW5kZXJlci5jb2xvcihhLGMsYix0aGlzKSl9LG9wYWNpdHlTZXR0ZXI6c2Escm90YXRpb25TZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe2M9Yy5zdHlsZTtcbnRoaXNbYl09Y1tiXT1hO2MubGVmdD0tdihmYShhKkVhKSsxKStcInB4XCI7Yy50b3A9dihhYShhKkVhKSkrXCJweFwifSxzdHJva2VTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2V0QXR0cihcInN0cm9rZWNvbG9yXCIsdGhpcy5yZW5kZXJlci5jb2xvcihhLGMsYikpfSxcInN0cm9rZS13aWR0aFNldHRlclwiOmZ1bmN0aW9uKGEsYixjKXtjLnN0cm9rZWQ9ISFhO3RoaXNbYl09YTtqYShhKSYmKGErPVwicHhcIik7dGhpcy5zZXRBdHRyKFwic3Ryb2tld2VpZ2h0XCIsYSl9LHRpdGxlU2V0dGVyOmZ1bmN0aW9uKGEsYil7dGhpcy5zZXRBdHRyKGIsYSl9LHZpc2liaWxpdHlTZXR0ZXI6ZnVuY3Rpb24oYSxiLGMpe2E9PT1cImluaGVyaXRcIiYmKGE9XCJ2aXNpYmxlXCIpO3RoaXMuc2hhZG93cyYmcSh0aGlzLnNoYWRvd3MsZnVuY3Rpb24oYyl7Yy5zdHlsZVtiXT1hfSk7Yy5ub2RlTmFtZT09PVwiRElWXCImJihhPWE9PT1cImhpZGRlblwiP1wiLTk5OWVtXCI6MCxoYnx8KGMuc3R5bGVbYl09YT9cInZpc2libGVcIjpcImhpZGRlblwiKSxcbmI9XCJ0b3BcIik7Yy5zdHlsZVtiXT1hfSx4U2V0dGVyOmZ1bmN0aW9uKGEsYixjKXt0aGlzW2JdPWE7Yj09PVwieFwiP2I9XCJsZWZ0XCI6Yj09PVwieVwiJiYoYj1cInRvcFwiKTt0aGlzLnVwZGF0ZUNsaXBwaW5nPyh0aGlzW2JdPWEsdGhpcy51cGRhdGVDbGlwcGluZygpKTpjLnN0eWxlW2JdPWF9LHpJbmRleFNldHRlcjpmdW5jdGlvbihhLGIsYyl7Yy5zdHlsZVtiXT1hfX07Sy5WTUxFbGVtZW50PVo9bWEoUyxaKTtaLnByb3RvdHlwZS55U2V0dGVyPVoucHJvdG90eXBlLndpZHRoU2V0dGVyPVoucHJvdG90eXBlLmhlaWdodFNldHRlcj1aLnByb3RvdHlwZS54U2V0dGVyO3ZhciBpYT17RWxlbWVudDpaLGlzSUU4OndhLmluZGV4T2YoXCJNU0lFIDguMFwiKT4tMSxpbml0OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlO3RoaXMuYWxpZ25lZE9iamVjdHM9W107ZD10aGlzLmNyZWF0ZUVsZW1lbnQoS2EpLmNzcyhyKHRoaXMuZ2V0U3R5bGUoZCkse3Bvc2l0aW9uOlwicmVsYXRpdmVcIn0pKTtlPWQuZWxlbWVudDtcbmEuYXBwZW5kQ2hpbGQoZC5lbGVtZW50KTt0aGlzLmlzVk1MPSEwO3RoaXMuYm94PWU7dGhpcy5ib3hXcmFwcGVyPWQ7dGhpcy5jYWNoZT17fTt0aGlzLnNldFNpemUoYixjLCExKTtpZigheC5uYW1lc3BhY2VzLmhjdil7eC5uYW1lc3BhY2VzLmFkZChcImhjdlwiLFwidXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTp2bWxcIik7dHJ5e3guY3JlYXRlU3R5bGVTaGVldCgpLmNzc1RleHQ9XCJoY3ZcXFxcOmZpbGwsIGhjdlxcXFw6cGF0aCwgaGN2XFxcXDpzaGFwZSwgaGN2XFxcXDpzdHJva2V7IGJlaGF2aW9yOnVybCgjZGVmYXVsdCNWTUwpOyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0gXCJ9Y2F0Y2goZil7eC5zdHlsZVNoZWV0c1swXS5jc3NUZXh0Kz1cImhjdlxcXFw6ZmlsbCwgaGN2XFxcXDpwYXRoLCBoY3ZcXFxcOnNoYXBlLCBoY3ZcXFxcOnN0cm9rZXsgYmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTCk7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfSBcIn19fSxpc0hpZGRlbjpmdW5jdGlvbigpe3JldHVybiF0aGlzLmJveC5vZmZzZXRXaWR0aH0sXG5jbGlwUmVjdDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmNyZWF0ZUVsZW1lbnQoKSxmPWRhKGEpO3JldHVybiByKGUse21lbWJlcnM6W10sbGVmdDooZj9hLng6YSkrMSx0b3A6KGY/YS55OmIpKzEsd2lkdGg6KGY/YS53aWR0aDpjKS0xLGhlaWdodDooZj9hLmhlaWdodDpkKS0xLGdldENTUzpmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnQsYz1iLm5vZGVOYW1lLGE9YS5pbnZlcnRlZCxkPXRoaXMudG9wLShjPT09XCJzaGFwZVwiP2Iub2Zmc2V0VG9wOjApLGU9dGhpcy5sZWZ0LGI9ZSt0aGlzLndpZHRoLGY9ZCt0aGlzLmhlaWdodCxkPXtjbGlwOlwicmVjdChcIit2KGE/ZTpkKStcInB4LFwiK3YoYT9mOmIpK1wicHgsXCIrdihhP2I6ZikrXCJweCxcIit2KGE/ZDplKStcInB4KVwifTshYSYmaGImJmM9PT1cIkRJVlwiJiZyKGQse3dpZHRoOmIrXCJweFwiLGhlaWdodDpmK1wicHhcIn0pO3JldHVybiBkfSx1cGRhdGVDbGlwcGluZzpmdW5jdGlvbigpe3EoZS5tZW1iZXJzLGZ1bmN0aW9uKGEpe2EuZWxlbWVudCYmXG5hLmNzcyhlLmdldENTUyhhKSl9KX19KX0sY29sb3I6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmLGc9L15yZ2JhLyxoLGksaj1QO2EmJmEubGluZWFyR3JhZGllbnQ/aT1cImdyYWRpZW50XCI6YSYmYS5yYWRpYWxHcmFkaWVudCYmKGk9XCJwYXR0ZXJuXCIpO2lmKGkpe3ZhciBrLGwsbj1hLmxpbmVhckdyYWRpZW50fHxhLnJhZGlhbEdyYWRpZW50LG0sbyxwLEQsSixDPVwiXCIsYT1hLnN0b3BzLHQscz1bXSx1PWZ1bmN0aW9uKCl7aD1bJzxmaWxsIGNvbG9ycz1cIicrcy5qb2luKFwiLFwiKSsnXCIgb3BhY2l0eT1cIicscCwnXCIgbzpvcGFjaXR5Mj1cIicsbywnXCIgdHlwZT1cIicsaSwnXCIgJyxDLCdmb2N1cz1cIjEwMCVcIiBtZXRob2Q9XCJhbnlcIiAvPiddOyQoZS5wcmVwVk1MKGgpLG51bGwsbnVsbCxiKX07bT1hWzBdO3Q9YVthLmxlbmd0aC0xXTttWzBdPjAmJmEudW5zaGlmdChbMCxtWzFdXSk7dFswXTwxJiZhLnB1c2goWzEsdFsxXV0pO3EoYSxmdW5jdGlvbihhLGIpe2cudGVzdChhWzFdKT8oZj1cbnlhKGFbMV0pLGs9Zi5nZXQoXCJyZ2JcIiksbD1mLmdldChcImFcIikpOihrPWFbMV0sbD0xKTtzLnB1c2goYVswXSoxMDArXCIlIFwiK2spO2I/KHA9bCxEPWspOihvPWwsSj1rKX0pO2lmKGM9PT1cImZpbGxcIilpZihpPT09XCJncmFkaWVudFwiKWM9bi54MXx8blswXXx8MCxhPW4ueTF8fG5bMV18fDAsbT1uLngyfHxuWzJdfHwwLG49bi55Mnx8blszXXx8MCxDPSdhbmdsZT1cIicrKDkwLVYuYXRhbigobi1hKS8obS1jKSkqMTgwL29hKSsnXCInLHUoKTtlbHNle3ZhciBqPW4ucixyPWoqMix2PWoqMix4PW4uY3gsej1uLmN5LFI9Yi5yYWRpYWxSZWZlcmVuY2UsdyxqPWZ1bmN0aW9uKCl7UiYmKHc9ZC5nZXRCQm94KCkseCs9KFJbMF0tdy54KS93LndpZHRoLTAuNSx6Kz0oUlsxXS13LnkpL3cuaGVpZ2h0LTAuNSxyKj1SWzJdL3cud2lkdGgsdio9UlsyXS93LmhlaWdodCk7Qz0nc3JjPVwiJytFLmdsb2JhbC5WTUxSYWRpYWxHcmFkaWVudFVSTCsnXCIgc2l6ZT1cIicrcitcIixcIit2KydcIiBvcmlnaW49XCIwLjUsMC41XCIgcG9zaXRpb249XCInK1xueCtcIixcIit6KydcIiBjb2xvcjI9XCInK0orJ1wiICc7dSgpfTtkLmFkZGVkP2ooKTpkLm9uQWRkPWo7aj1EfWVsc2Ugaj1rfWVsc2UgaWYoZy50ZXN0KGEpJiZiLnRhZ05hbWUhPT1cIklNR1wiKWY9eWEoYSksaD1bXCI8XCIsYywnIG9wYWNpdHk9XCInLGYuZ2V0KFwiYVwiKSwnXCIvPiddLCQodGhpcy5wcmVwVk1MKGgpLG51bGwsbnVsbCxiKSxqPWYuZ2V0KFwicmdiXCIpO2Vsc2V7aj1iLmdldEVsZW1lbnRzQnlUYWdOYW1lKGMpO2lmKGoubGVuZ3RoKWpbMF0ub3BhY2l0eT0xLGpbMF0udHlwZT1cInNvbGlkXCI7aj1hfXJldHVybiBqfSxwcmVwVk1MOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuaXNJRTgsYT1hLmpvaW4oXCJcIik7Yj8oYT1hLnJlcGxhY2UoXCIvPlwiLCcgeG1sbnM9XCJ1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOnZtbFwiIC8+JyksYT1hLmluZGV4T2YoJ3N0eWxlPVwiJyk9PT0tMT9hLnJlcGxhY2UoXCIvPlwiLCcgc3R5bGU9XCJkaXNwbGF5OmlubGluZS1ibG9jaztiZWhhdmlvcjp1cmwoI2RlZmF1bHQjVk1MKTtcIiAvPicpOlxuYS5yZXBsYWNlKCdzdHlsZT1cIicsJ3N0eWxlPVwiZGlzcGxheTppbmxpbmUtYmxvY2s7YmVoYXZpb3I6dXJsKCNkZWZhdWx0I1ZNTCk7JykpOmE9YS5yZXBsYWNlKFwiPFwiLFwiPGhjdjpcIik7cmV0dXJuIGF9LHRleHQ6dGEucHJvdG90eXBlLmh0bWwscGF0aDpmdW5jdGlvbihhKXt2YXIgYj17Y29vcmRzaXplOlwiMTAgMTBcIn07SGEoYSk/Yi5kPWE6ZGEoYSkmJnIoYixhKTtyZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50KFwic2hhcGVcIikuYXR0cihiKX0sY2lyY2xlOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnN5bWJvbChcImNpcmNsZVwiKTtpZihkYShhKSljPWEucixiPWEueSxhPWEueDtkLmlzQ2lyY2xlPSEwO2Qucj1jO3JldHVybiBkLmF0dHIoe3g6YSx5OmJ9KX0sZzpmdW5jdGlvbihhKXt2YXIgYjthJiYoYj17Y2xhc3NOYW1lOlwiaGlnaGNoYXJ0cy1cIithLFwiY2xhc3NcIjpcImhpZ2hjaGFydHMtXCIrYX0pO3JldHVybiB0aGlzLmNyZWF0ZUVsZW1lbnQoS2EpLmF0dHIoYil9LGltYWdlOmZ1bmN0aW9uKGEsXG5iLGMsZCxlKXt2YXIgZj10aGlzLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikuYXR0cih7c3JjOmF9KTthcmd1bWVudHMubGVuZ3RoPjEmJmYuYXR0cih7eDpiLHk6Yyx3aWR0aDpkLGhlaWdodDplfSk7cmV0dXJuIGZ9LGNyZWF0ZUVsZW1lbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1cInJlY3RcIj90aGlzLnN5bWJvbChhKTp0YS5wcm90b3R5cGUuY3JlYXRlRWxlbWVudC5jYWxsKHRoaXMsYSl9LGludmVydENoaWxkOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWIuc3R5bGUsZT1hLnRhZ05hbWU9PT1cIklNR1wiJiZhLnN0eWxlO0IoYSx7ZmxpcDpcInhcIixsZWZ0OnkoZC53aWR0aCktKGU/eShlLnRvcCk6MSksdG9wOnkoZC5oZWlnaHQpLShlP3koZS5sZWZ0KToxKSxyb3RhdGlvbjotOTB9KTtxKGEuY2hpbGROb2RlcyxmdW5jdGlvbihiKXtjLmludmVydENoaWxkKGIsYSl9KX0sc3ltYm9sczp7YXJjOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9ZS5zdGFydCxnPWUuZW5kLGg9ZS5yfHxjfHxcbmQsYz1lLmlubmVyUixkPWFhKGYpLGk9ZmEoZiksaj1hYShnKSxrPWZhKGcpO2lmKGctZj09PTApcmV0dXJuW1wieFwiXTtmPVtcIndhXCIsYS1oLGItaCxhK2gsYitoLGEraCpkLGIraCppLGEraCpqLGIraCprXTtlLm9wZW4mJiFjJiZmLnB1c2goXCJlXCIsXCJNXCIsYSxiKTtmLnB1c2goXCJhdFwiLGEtYyxiLWMsYStjLGIrYyxhK2MqaixiK2MqayxhK2MqZCxiK2MqaSxcInhcIixcImVcIik7Zi5pc0FyYz0hMDtyZXR1cm4gZn0sY2lyY2xlOmZ1bmN0aW9uKGEsYixjLGQsZSl7ZSYmKGM9ZD0yKmUucik7ZSYmZS5pc0NpcmNsZSYmKGEtPWMvMixiLT1kLzIpO3JldHVybltcIndhXCIsYSxiLGErYyxiK2QsYStjLGIrZC8yLGErYyxiK2QvMixcImVcIl19LHJlY3Q6ZnVuY3Rpb24oYSxiLGMsZCxlKXtyZXR1cm4gdGEucHJvdG90eXBlLnN5bWJvbHNbIXMoZSl8fCFlLnI/XCJzcXVhcmVcIjpcImNhbGxvdXRcIl0uY2FsbCgwLGEsYixjLGQsZSl9fX07Sy5WTUxSZW5kZXJlcj1aPWZ1bmN0aW9uKCl7dGhpcy5pbml0LmFwcGx5KHRoaXMsXG5hcmd1bWVudHMpfTtaLnByb3RvdHlwZT13KHRhLnByb3RvdHlwZSxpYSk7WmE9Wn10YS5wcm90b3R5cGUubWVhc3VyZVNwYW5XaWR0aD1mdW5jdGlvbihhLGIpe3ZhciBjPXguY3JlYXRlRWxlbWVudChcInNwYW5cIiksZDtkPXguY3JlYXRlVGV4dE5vZGUoYSk7Yy5hcHBlbmRDaGlsZChkKTtCKGMsYik7dGhpcy5ib3guYXBwZW5kQ2hpbGQoYyk7ZD1jLm9mZnNldFdpZHRoO1FhKGMpO3JldHVybiBkfTt2YXIgTWI7aWYoZ2EpSy5DYW5WR1JlbmRlcmVyPVo9ZnVuY3Rpb24oKXt4YT1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIn0sWi5wcm90b3R5cGUuc3ltYm9scz17fSxNYj1mdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgYT1iLmxlbmd0aCxkO2ZvcihkPTA7ZDxhO2QrKyliW2RdKCk7Yj1bXX12YXIgYj1bXTtyZXR1cm57cHVzaDpmdW5jdGlvbihjLGQpe2IubGVuZ3RoPT09MCYmUmIoZCxhKTtiLnB1c2goYyl9fX0oKSxaYT1aO1RhLnByb3RvdHlwZT17YWRkTGFiZWw6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMuYXhpcyxiPWEub3B0aW9ucyxjPWEuY2hhcnQsZD1hLmhvcml6LGU9YS5jYXRlZ29yaWVzLGY9YS5uYW1lcyxnPXRoaXMucG9zLGg9Yi5sYWJlbHMsaT1oLnJvdGF0aW9uLGo9YS50aWNrUG9zaXRpb25zLGQ9ZCYmZSYmIWguc3RlcCYmIWguc3RhZ2dlckxpbmVzJiYhaC5yb3RhdGlvbiYmYy5wbG90V2lkdGgvai5sZW5ndGh8fCFkJiYoYy5tYXJnaW5bM118fGMuY2hhcnRXaWR0aCowLjMzKSxrPWc9PT1qWzBdLGw9Zz09PWpbai5sZW5ndGgtMV0sbixmPWU/cChlW2ddLGZbZ10sZyk6ZyxlPXRoaXMubGFiZWwsbT1qLmluZm87YS5pc0RhdGV0aW1lQXhpcyYmbSYmKG49Yi5kYXRlVGltZUxhYmVsRm9ybWF0c1ttLmhpZ2hlclJhbmtzW2ddfHxtLnVuaXROYW1lXSk7dGhpcy5pc0ZpcnN0PWs7dGhpcy5pc0xhc3Q9bDtiPWEubGFiZWxGb3JtYXR0ZXIuY2FsbCh7YXhpczphLGNoYXJ0OmMsaXNGaXJzdDprLGlzTGFzdDpsLGRhdGVUaW1lTGFiZWxGb3JtYXQ6bix2YWx1ZTphLmlzTG9nP1xuZWEoa2EoZikpOmZ9KTtnPWQmJnt3aWR0aDp0KDEsdihkLTIqKGgucGFkZGluZ3x8MTApKSkrXCJweFwifTtpZihzKGUpKWUmJmUuYXR0cih7dGV4dDpifSkuY3NzKGcpO2Vsc2V7bj17YWxpZ246YS5sYWJlbEFsaWdufTtpZihqYShpKSluLnJvdGF0aW9uPWk7aWYoZCYmaC5lbGxpcHNpcylnLkhjSGVpZ2h0PWEubGVuL2oubGVuZ3RoO3RoaXMubGFiZWw9ZT1zKGIpJiZoLmVuYWJsZWQ/Yy5yZW5kZXJlci50ZXh0KGIsMCwwLGgudXNlSFRNTCkuYXR0cihuKS5jc3MocihnLGguc3R5bGUpKS5hZGQoYS5sYWJlbEdyb3VwKTpudWxsO2EudGlja0Jhc2VsaW5lPWMucmVuZGVyZXIuZm9udE1ldHJpY3MoaC5zdHlsZS5mb250U2l6ZSxlKS5iO2kmJmEuc2lkZT09PTImJihhLnRpY2tCYXNlbGluZSo9YWEoaSpFYSkpfXRoaXMueU9mZnNldD1lP3AoaC55LGEudGlja0Jhc2VsaW5lKyhhLnNpZGU9PT0yPzg6LShlLmdldEJCb3goKS5oZWlnaHQvMikpKTowfSxnZXRMYWJlbFNpemU6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMubGFiZWwsYj10aGlzLmF4aXM7cmV0dXJuIGE/YS5nZXRCQm94KClbYi5ob3Jpej9cImhlaWdodFwiOlwid2lkdGhcIl06MH0sZ2V0TGFiZWxTaWRlczpmdW5jdGlvbigpe3ZhciBhPXRoaXMubGFiZWwuZ2V0QkJveCgpLGI9dGhpcy5heGlzLGM9Yi5ob3JpeixkPWIub3B0aW9ucy5sYWJlbHMsYT1jP2Eud2lkdGg6YS5oZWlnaHQsYj1jP2QueC1hKntsZWZ0OjAsY2VudGVyOjAuNSxyaWdodDoxfVtiLmxhYmVsQWxpZ25dOjA7cmV0dXJuW2IsYz9hK2I6YV19LGhhbmRsZU92ZXJmbG93OmZ1bmN0aW9uKGEsYil7dmFyIGM9ITAsZD10aGlzLmF4aXMsZT10aGlzLmlzRmlyc3QsZj10aGlzLmlzTGFzdCxnPWQuaG9yaXo/Yi54OmIueSxoPWQucmV2ZXJzZWQsaT1kLnRpY2tQb3NpdGlvbnMsaj10aGlzLmdldExhYmVsU2lkZXMoKSxrPWpbMF0saj1qWzFdLGwsbixtLG89dGhpcy5sYWJlbC5saW5lO2w9b3x8MDtuPWQubGFiZWxFZGdlO209ZC5qdXN0aWZ5TGFiZWxzJiYoZXx8Zik7bltsXT09PVxudXx8ZytrPm5bbF0/bltsXT1nK2o6bXx8KGM9ITEpO2lmKG0pe2w9KG49ZC5qdXN0aWZ5VG9QbG90KT9kLnBvczowO249bj9sK2QubGVuOmQuY2hhcnQuY2hhcnRXaWR0aDtkbyBhKz1lPzE6LTEsbT1kLnRpY2tzW2lbYV1dO3doaWxlKGlbYV0mJighbXx8IW0ubGFiZWx8fG0ubGFiZWwubGluZSE9PW8pKTtkPW0mJm0ubGFiZWwueHkmJm0ubGFiZWwueHkueCttLmdldExhYmVsU2lkZXMoKVtlPzA6MV07ZSYmIWh8fGYmJmg/ZytrPGwmJihnPWwtayxtJiZnK2o+ZCYmKGM9ITEpKTpnK2o+biYmKGc9bi1qLG0mJmcrazxkJiYoYz0hMSkpO2IueD1nfXJldHVybiBjfSxnZXRQb3NpdGlvbjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmF4aXMsZj1lLmNoYXJ0LGc9ZCYmZi5vbGRDaGFydEhlaWdodHx8Zi5jaGFydEhlaWdodDtyZXR1cm57eDphP2UudHJhbnNsYXRlKGIrYyxudWxsLG51bGwsZCkrZS50cmFuc0I6ZS5sZWZ0K2Uub2Zmc2V0KyhlLm9wcG9zaXRlPyhkJiZmLm9sZENoYXJ0V2lkdGh8fFxuZi5jaGFydFdpZHRoKS1lLnJpZ2h0LWUubGVmdDowKSx5OmE/Zy1lLmJvdHRvbStlLm9mZnNldC0oZS5vcHBvc2l0ZT9lLmhlaWdodDowKTpnLWUudHJhbnNsYXRlKGIrYyxudWxsLG51bGwsZCktZS50cmFuc0J9fSxnZXRMYWJlbFBvc2l0aW9uOmZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCl7dmFyIGk9dGhpcy5heGlzLGo9aS50cmFuc0Esaz1pLnJldmVyc2VkLGw9aS5zdGFnZ2VyTGluZXMsYT1hK2UueC0oZiYmZD9mKmoqKGs/LTE6MSk6MCksYj1iK3RoaXMueU9mZnNldC0oZiYmIWQ/ZipqKihrPzE6LTEpOjApO2lmKGwpYy5saW5lPWcvKGh8fDEpJWwsYis9Yy5saW5lKihpLmxhYmVsT2Zmc2V0L2wpO3JldHVybnt4OmEseTpifX0sZ2V0TWFya1BhdGg6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3JldHVybiBmLmNyaXNwTGluZShbXCJNXCIsYSxiLFwiTFwiLGErKGU/MDotYyksYisoZT9jOjApXSxkKX0scmVuZGVyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmF4aXMsZT1kLm9wdGlvbnMsXG5mPWQuY2hhcnQucmVuZGVyZXIsZz1kLmhvcml6LGg9dGhpcy50eXBlLGk9dGhpcy5sYWJlbCxqPXRoaXMucG9zLGs9ZS5sYWJlbHMsbD10aGlzLmdyaWRMaW5lLG49aD9oK1wiR3JpZFwiOlwiZ3JpZFwiLG09aD9oK1wiVGlja1wiOlwidGlja1wiLG89ZVtuK1wiTGluZVdpZHRoXCJdLHE9ZVtuK1wiTGluZUNvbG9yXCJdLEQ9ZVtuK1wiTGluZURhc2hTdHlsZVwiXSxKPWVbbStcIkxlbmd0aFwiXSxuPWVbbStcIldpZHRoXCJdfHwwLEM9ZVttK1wiQ29sb3JcIl0sdD1lW20rXCJQb3NpdGlvblwiXSxtPXRoaXMubWFyayxzPWsuc3RlcCxyPSEwLHY9ZC50aWNrbWFya09mZnNldCx3PXRoaXMuZ2V0UG9zaXRpb24oZyxqLHYsYikseD13Lngsdz13Lnksej1nJiZ4PT09ZC5wb3MrZC5sZW58fCFnJiZ3PT09ZC5wb3M/LTE6MSxjPXAoYywxKTt0aGlzLmlzQWN0aXZlPSEwO2lmKG8pe2o9ZC5nZXRQbG90TGluZVBhdGgoait2LG8qeixiLCEwKTtpZihsPT09dSl7bD17c3Ryb2tlOnEsXCJzdHJva2Utd2lkdGhcIjpvfTtpZihEKWwuZGFzaHN0eWxlPVxuRDtpZighaClsLnpJbmRleD0xO2lmKGIpbC5vcGFjaXR5PTA7dGhpcy5ncmlkTGluZT1sPW8/Zi5wYXRoKGopLmF0dHIobCkuYWRkKGQuZ3JpZEdyb3VwKTpudWxsfWlmKCFiJiZsJiZqKWxbdGhpcy5pc05ldz9cImF0dHJcIjpcImFuaW1hdGVcIl0oe2Q6aixvcGFjaXR5OmN9KX1pZihuJiZKKXQ9PT1cImluc2lkZVwiJiYoSj0tSiksZC5vcHBvc2l0ZSYmKEo9LUopLGg9dGhpcy5nZXRNYXJrUGF0aCh4LHcsSixuKnosZyxmKSxtP20uYW5pbWF0ZSh7ZDpoLG9wYWNpdHk6Y30pOnRoaXMubWFyaz1mLnBhdGgoaCkuYXR0cih7c3Ryb2tlOkMsXCJzdHJva2Utd2lkdGhcIjpuLG9wYWNpdHk6Y30pLmFkZChkLmF4aXNHcm91cCk7aWYoaSYmIWlzTmFOKHgpKWkueHk9dz10aGlzLmdldExhYmVsUG9zaXRpb24oeCx3LGksZyxrLHYsYSxzKSx0aGlzLmlzRmlyc3QmJiF0aGlzLmlzTGFzdCYmIXAoZS5zaG93Rmlyc3RMYWJlbCwxKXx8dGhpcy5pc0xhc3QmJiF0aGlzLmlzRmlyc3QmJiFwKGUuc2hvd0xhc3RMYWJlbCxcbjEpP3I9ITE6IWQuaXNSYWRpYWwmJiFrLnN0ZXAmJiFrLnJvdGF0aW9uJiYhYiYmYyE9PTAmJihyPXRoaXMuaGFuZGxlT3ZlcmZsb3coYSx3KSkscyYmYSVzJiYocj0hMSksciYmIWlzTmFOKHcueSk/KHcub3BhY2l0eT1jLGlbdGhpcy5pc05ldz9cImF0dHJcIjpcImFuaW1hdGVcIl0odyksdGhpcy5pc05ldz0hMSk6aS5hdHRyKFwieVwiLC05OTk5KX0sZGVzdHJveTpmdW5jdGlvbigpe1BhKHRoaXMsdGhpcy5heGlzKX19O0suUGxvdExpbmVPckJhbmQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmF4aXM9YTtpZihiKXRoaXMub3B0aW9ucz1iLHRoaXMuaWQ9Yi5pZH07Sy5QbG90TGluZU9yQmFuZC5wcm90b3R5cGU9e3JlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmF4aXMsYz1iLmhvcml6LGQ9KGIucG9pbnRSYW5nZXx8MCkvMixlPWEub3B0aW9ucyxmPWUubGFiZWwsZz1hLmxhYmVsLGg9ZS53aWR0aCxpPWUudG8saj1lLmZyb20saz1zKGopJiZzKGkpLGw9ZS52YWx1ZSxuPWUuZGFzaFN0eWxlLFxubT1hLnN2Z0VsZW0sbz1bXSxwLHE9ZS5jb2xvcixKPWUuekluZGV4LEM9ZS5ldmVudHMscj17fSx1PWIuY2hhcnQucmVuZGVyZXI7Yi5pc0xvZyYmKGo9emEoaiksaT16YShpKSxsPXphKGwpKTtpZihoKXtpZihvPWIuZ2V0UGxvdExpbmVQYXRoKGwsaCkscj17c3Ryb2tlOnEsXCJzdHJva2Utd2lkdGhcIjpofSxuKXIuZGFzaHN0eWxlPW59ZWxzZSBpZihrKXtqPXQoaixiLm1pbi1kKTtpPUwoaSxiLm1heCtkKTtvPWIuZ2V0UGxvdEJhbmRQYXRoKGosaSxlKTtpZihxKXIuZmlsbD1xO2lmKGUuYm9yZGVyV2lkdGgpci5zdHJva2U9ZS5ib3JkZXJDb2xvcixyW1wic3Ryb2tlLXdpZHRoXCJdPWUuYm9yZGVyV2lkdGh9ZWxzZSByZXR1cm47aWYocyhKKSlyLnpJbmRleD1KO2lmKG0paWYobyltLmFuaW1hdGUoe2Q6b30sbnVsbCxtLm9uR2V0UGF0aCk7ZWxzZXtpZihtLmhpZGUoKSxtLm9uR2V0UGF0aD1mdW5jdGlvbigpe20uc2hvdygpfSxnKWEubGFiZWw9Zz1nLmRlc3Ryb3koKX1lbHNlIGlmKG8mJlxuby5sZW5ndGgmJihhLnN2Z0VsZW09bT11LnBhdGgobykuYXR0cihyKS5hZGQoKSxDKSlmb3IocCBpbiBkPWZ1bmN0aW9uKGIpe20ub24oYixmdW5jdGlvbihjKXtDW2JdLmFwcGx5KGEsW2NdKX0pfSxDKWQocCk7aWYoZiYmcyhmLnRleHQpJiZvJiZvLmxlbmd0aCYmYi53aWR0aD4wJiZiLmhlaWdodD4wKXtmPXcoe2FsaWduOmMmJmsmJlwiY2VudGVyXCIseDpjPyFrJiY0OjEwLHZlcnRpY2FsQWxpZ246IWMmJmsmJlwibWlkZGxlXCIseTpjP2s/MTY6MTA6az82Oi00LHJvdGF0aW9uOmMmJiFrJiY5MH0sZik7aWYoIWcpe3I9e2FsaWduOmYudGV4dEFsaWdufHxmLmFsaWduLHJvdGF0aW9uOmYucm90YXRpb259O2lmKHMoSikpci56SW5kZXg9SjthLmxhYmVsPWc9dS50ZXh0KGYudGV4dCwwLDAsZi51c2VIVE1MKS5hdHRyKHIpLmNzcyhmLnN0eWxlKS5hZGQoKX1iPVtvWzFdLG9bNF0saz9vWzZdOm9bMV1dO2s9W29bMl0sb1s1XSxrP29bN106b1syXV07bz1PYShiKTtjPU9hKGspO2cuYWxpZ24oZixcbiExLHt4Om8seTpjLHdpZHRoOkNhKGIpLW8saGVpZ2h0OkNhKGspLWN9KTtnLnNob3coKX1lbHNlIGcmJmcuaGlkZSgpO3JldHVybiBhfSxkZXN0cm95OmZ1bmN0aW9uKCl7bGEodGhpcy5heGlzLnBsb3RMaW5lc0FuZEJhbmRzLHRoaXMpO2RlbGV0ZSB0aGlzLmF4aXM7UGEodGhpcyl9fTtuYS5wcm90b3R5cGU9e2RlZmF1bHRPcHRpb25zOntkYXRlVGltZUxhYmVsRm9ybWF0czp7bWlsbGlzZWNvbmQ6XCIlSDolTTolUy4lTFwiLHNlY29uZDpcIiVIOiVNOiVTXCIsbWludXRlOlwiJUg6JU1cIixob3VyOlwiJUg6JU1cIixkYXk6XCIlZS4gJWJcIix3ZWVrOlwiJWUuICViXCIsbW9udGg6XCIlYiAnJXlcIix5ZWFyOlwiJVlcIn0sZW5kT25UaWNrOiExLGdyaWRMaW5lQ29sb3I6XCIjQzBDMEMwXCIsbGFiZWxzOk0sbGluZUNvbG9yOlwiI0MwRDBFMFwiLGxpbmVXaWR0aDoxLG1pblBhZGRpbmc6MC4wMSxtYXhQYWRkaW5nOjAuMDEsbWlub3JHcmlkTGluZUNvbG9yOlwiI0UwRTBFMFwiLG1pbm9yR3JpZExpbmVXaWR0aDoxLG1pbm9yVGlja0NvbG9yOlwiI0EwQTBBMFwiLFxubWlub3JUaWNrTGVuZ3RoOjIsbWlub3JUaWNrUG9zaXRpb246XCJvdXRzaWRlXCIsc3RhcnRPZldlZWs6MSxzdGFydE9uVGljazohMSx0aWNrQ29sb3I6XCIjQzBEMEUwXCIsdGlja0xlbmd0aDoxMCx0aWNrbWFya1BsYWNlbWVudDpcImJldHdlZW5cIix0aWNrUGl4ZWxJbnRlcnZhbDoxMDAsdGlja1Bvc2l0aW9uOlwib3V0c2lkZVwiLHRpY2tXaWR0aDoxLHRpdGxlOnthbGlnbjpcIm1pZGRsZVwiLHN0eWxlOntjb2xvcjpcIiM3MDcwNzBcIn19LHR5cGU6XCJsaW5lYXJcIn0sZGVmYXVsdFlBeGlzT3B0aW9uczp7ZW5kT25UaWNrOiEwLGdyaWRMaW5lV2lkdGg6MSx0aWNrUGl4ZWxJbnRlcnZhbDo3MixzaG93TGFzdExhYmVsOiEwLGxhYmVsczp7eDotOCx5OjN9LGxpbmVXaWR0aDowLG1heFBhZGRpbmc6MC4wNSxtaW5QYWRkaW5nOjAuMDUsc3RhcnRPblRpY2s6ITAsdGlja1dpZHRoOjAsdGl0bGU6e3JvdGF0aW9uOjI3MCx0ZXh0OlwiVmFsdWVzXCJ9LHN0YWNrTGFiZWxzOntlbmFibGVkOiExLGZvcm1hdHRlcjpmdW5jdGlvbigpe3JldHVybiBCYSh0aGlzLnRvdGFsLFxuLTEpfSxzdHlsZTpNLnN0eWxlfX0sZGVmYXVsdExlZnRBeGlzT3B0aW9uczp7bGFiZWxzOnt4Oi0xNSx5Om51bGx9LHRpdGxlOntyb3RhdGlvbjoyNzB9fSxkZWZhdWx0UmlnaHRBeGlzT3B0aW9uczp7bGFiZWxzOnt4OjE1LHk6bnVsbH0sdGl0bGU6e3JvdGF0aW9uOjkwfX0sZGVmYXVsdEJvdHRvbUF4aXNPcHRpb25zOntsYWJlbHM6e3g6MCx5Om51bGx9LHRpdGxlOntyb3RhdGlvbjowfX0sZGVmYXVsdFRvcEF4aXNPcHRpb25zOntsYWJlbHM6e3g6MCx5Oi0xNX0sdGl0bGU6e3JvdGF0aW9uOjB9fSxpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5pc1g7dGhpcy5ob3Jpej1hLmludmVydGVkPyFjOmM7dGhpcy5jb2xsPSh0aGlzLmlzWEF4aXM9Yyk/XCJ4QXhpc1wiOlwieUF4aXNcIjt0aGlzLm9wcG9zaXRlPWIub3Bwb3NpdGU7dGhpcy5zaWRlPWIuc2lkZXx8KHRoaXMuaG9yaXo/dGhpcy5vcHBvc2l0ZT8wOjI6dGhpcy5vcHBvc2l0ZT8xOjMpO3RoaXMuc2V0T3B0aW9ucyhiKTt2YXIgZD1cbnRoaXMub3B0aW9ucyxlPWQudHlwZTt0aGlzLmxhYmVsRm9ybWF0dGVyPWQubGFiZWxzLmZvcm1hdHRlcnx8dGhpcy5kZWZhdWx0TGFiZWxGb3JtYXR0ZXI7dGhpcy51c2VyT3B0aW9ucz1iO3RoaXMubWluUGl4ZWxQYWRkaW5nPTA7dGhpcy5jaGFydD1hO3RoaXMucmV2ZXJzZWQ9ZC5yZXZlcnNlZDt0aGlzLnpvb21FbmFibGVkPWQuem9vbUVuYWJsZWQhPT0hMTt0aGlzLmNhdGVnb3JpZXM9ZC5jYXRlZ29yaWVzfHxlPT09XCJjYXRlZ29yeVwiO3RoaXMubmFtZXM9W107dGhpcy5pc0xvZz1lPT09XCJsb2dhcml0aG1pY1wiO3RoaXMuaXNEYXRldGltZUF4aXM9ZT09PVwiZGF0ZXRpbWVcIjt0aGlzLmlzTGlua2VkPXMoZC5saW5rZWRUbyk7dGhpcy50aWNrbWFya09mZnNldD10aGlzLmNhdGVnb3JpZXMmJmQudGlja21hcmtQbGFjZW1lbnQ9PT1cImJldHdlZW5cIiYmcChkLnRpY2tJbnRlcnZhbCwxKT09PTE/MC41OjA7dGhpcy50aWNrcz17fTt0aGlzLmxhYmVsRWRnZT1bXTt0aGlzLm1pbm9yVGlja3M9XG57fTt0aGlzLnBsb3RMaW5lc0FuZEJhbmRzPVtdO3RoaXMuYWx0ZXJuYXRlQmFuZHM9e307dGhpcy5sZW49MDt0aGlzLm1pblJhbmdlPXRoaXMudXNlck1pblJhbmdlPWQubWluUmFuZ2V8fGQubWF4Wm9vbTt0aGlzLnJhbmdlPWQucmFuZ2U7dGhpcy5vZmZzZXQ9ZC5vZmZzZXR8fDA7dGhpcy5zdGFja3M9e307dGhpcy5vbGRTdGFja3M9e307dGhpcy5taW49dGhpcy5tYXg9bnVsbDt0aGlzLmNyb3NzaGFpcj1wKGQuY3Jvc3NoYWlyLHJhKGEub3B0aW9ucy50b29sdGlwLmNyb3NzaGFpcnMpW2M/MDoxXSwhMSk7dmFyIGYsZD10aGlzLm9wdGlvbnMuZXZlbnRzO01hKHRoaXMsYS5heGVzKT09PS0xJiYoYyYmIXRoaXMuaXNDb2xvckF4aXM/YS5heGVzLnNwbGljZShhLnhBeGlzLmxlbmd0aCwwLHRoaXMpOmEuYXhlcy5wdXNoKHRoaXMpLGFbdGhpcy5jb2xsXS5wdXNoKHRoaXMpKTt0aGlzLnNlcmllcz10aGlzLnNlcmllc3x8W107aWYoYS5pbnZlcnRlZCYmYyYmdGhpcy5yZXZlcnNlZD09PVxudSl0aGlzLnJldmVyc2VkPSEwO3RoaXMucmVtb3ZlUGxvdExpbmU9dGhpcy5yZW1vdmVQbG90QmFuZD10aGlzLnJlbW92ZVBsb3RCYW5kT3JMaW5lO2ZvcihmIGluIGQpTih0aGlzLGYsZFtmXSk7aWYodGhpcy5pc0xvZyl0aGlzLnZhbDJsaW49emEsdGhpcy5saW4ydmFsPWthfSxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe3RoaXMub3B0aW9ucz13KHRoaXMuZGVmYXVsdE9wdGlvbnMsdGhpcy5pc1hBeGlzP3t9OnRoaXMuZGVmYXVsdFlBeGlzT3B0aW9ucyxbdGhpcy5kZWZhdWx0VG9wQXhpc09wdGlvbnMsdGhpcy5kZWZhdWx0UmlnaHRBeGlzT3B0aW9ucyx0aGlzLmRlZmF1bHRCb3R0b21BeGlzT3B0aW9ucyx0aGlzLmRlZmF1bHRMZWZ0QXhpc09wdGlvbnNdW3RoaXMuc2lkZV0sdyhFW3RoaXMuY29sbF0sYSkpfSxkZWZhdWx0TGFiZWxGb3JtYXR0ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmF4aXMsYj10aGlzLnZhbHVlLGM9YS5jYXRlZ29yaWVzLGQ9dGhpcy5kYXRlVGltZUxhYmVsRm9ybWF0LFxuZT1FLmxhbmcubnVtZXJpY1N5bWJvbHMsZj1lJiZlLmxlbmd0aCxnLGg9YS5vcHRpb25zLmxhYmVscy5mb3JtYXQsYT1hLmlzTG9nP2I6YS50aWNrSW50ZXJ2YWw7aWYoaClnPUphKGgsdGhpcyk7ZWxzZSBpZihjKWc9YjtlbHNlIGlmKGQpZz1jYihkLGIpO2Vsc2UgaWYoZiYmYT49MUUzKWZvcig7Zi0tJiZnPT09dTspYz1NYXRoLnBvdygxRTMsZisxKSxhPj1jJiZlW2ZdIT09bnVsbCYmKGc9QmEoYi9jLC0xKStlW2ZdKTtnPT09dSYmKGc9UShiKT49MUU0P0JhKGIsMCk6QmEoYiwtMSx1LFwiXCIpKTtyZXR1cm4gZ30sZ2V0U2VyaWVzRXh0cmVtZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydDthLmhhc1Zpc2libGVTZXJpZXM9ITE7YS5kYXRhTWluPWEuZGF0YU1heD1hLmlnbm9yZU1pblBhZGRpbmc9YS5pZ25vcmVNYXhQYWRkaW5nPW51bGw7YS5idWlsZFN0YWNrcyYmYS5idWlsZFN0YWNrcygpO3EoYS5zZXJpZXMsZnVuY3Rpb24oYyl7aWYoYy52aXNpYmxlfHwhYi5vcHRpb25zLmNoYXJ0Lmlnbm9yZUhpZGRlblNlcmllcyl7dmFyIGQ7XG5kPWMub3B0aW9ucy50aHJlc2hvbGQ7dmFyIGU7YS5oYXNWaXNpYmxlU2VyaWVzPSEwO2EuaXNMb2cmJmQ8PTAmJihkPW51bGwpO2lmKGEuaXNYQXhpcyl7aWYoZD1jLnhEYXRhLGQubGVuZ3RoKWEuZGF0YU1pbj1MKHAoYS5kYXRhTWluLGRbMF0pLE9hKGQpKSxhLmRhdGFNYXg9dChwKGEuZGF0YU1heCxkWzBdKSxDYShkKSl9ZWxzZXtjLmdldEV4dHJlbWVzKCk7ZT1jLmRhdGFNYXg7Yz1jLmRhdGFNaW47aWYocyhjKSYmcyhlKSlhLmRhdGFNaW49TChwKGEuZGF0YU1pbixjKSxjKSxhLmRhdGFNYXg9dChwKGEuZGF0YU1heCxlKSxlKTtpZihzKGQpKWlmKGEuZGF0YU1pbj49ZClhLmRhdGFNaW49ZCxhLmlnbm9yZU1pblBhZGRpbmc9ITA7ZWxzZSBpZihhLmRhdGFNYXg8ZClhLmRhdGFNYXg9ZCxhLmlnbm9yZU1heFBhZGRpbmc9ITB9fX0pfSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3ZhciBnPTEsaD0wLGk9ZD90aGlzLm9sZFRyYW5zQTp0aGlzLnRyYW5zQSxkPWQ/dGhpcy5vbGRNaW46XG50aGlzLm1pbixqPXRoaXMubWluUGl4ZWxQYWRkaW5nLGU9KHRoaXMub3B0aW9ucy5vcmRpbmFsfHx0aGlzLmlzTG9nJiZlKSYmdGhpcy5saW4ydmFsO2lmKCFpKWk9dGhpcy50cmFuc0E7aWYoYylnKj0tMSxoPXRoaXMubGVuO3RoaXMucmV2ZXJzZWQmJihnKj0tMSxoLT1nKih0aGlzLnNlY3Rvcnx8dGhpcy5sZW4pKTtiPyhhPWEqZytoLGEtPWosYT1hL2krZCxlJiYoYT10aGlzLmxpbjJ2YWwoYSkpKTooZSYmKGE9dGhpcy52YWwybGluKGEpKSxmPT09XCJiZXR3ZWVuXCImJihmPTAuNSksYT1nKihhLWQpKmkraCtnKmorKGphKGYpP2kqZip0aGlzLnBvaW50UmFuZ2U6MCkpO3JldHVybiBhfSx0b1BpeGVsczpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnRyYW5zbGF0ZShhLCExLCF0aGlzLmhvcml6LG51bGwsITApKyhiPzA6dGhpcy5wb3MpfSx0b1ZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMudHJhbnNsYXRlKGEtKGI/MDp0aGlzLnBvcyksITAsIXRoaXMuaG9yaXosbnVsbCxcbiEwKX0sZ2V0UGxvdExpbmVQYXRoOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9dGhpcy5jaGFydCxnPXRoaXMubGVmdCxoPXRoaXMudG9wLGksaixrPWMmJmYub2xkQ2hhcnRIZWlnaHR8fGYuY2hhcnRIZWlnaHQsbD1jJiZmLm9sZENoYXJ0V2lkdGh8fGYuY2hhcnRXaWR0aCxuO2k9dGhpcy50cmFuc0I7ZT1wKGUsdGhpcy50cmFuc2xhdGUoYSxudWxsLG51bGwsYykpO2E9Yz12KGUraSk7aT1qPXYoay1lLWkpO2lmKGlzTmFOKGUpKW49ITA7ZWxzZSBpZih0aGlzLmhvcml6KXtpZihpPWgsaj1rLXRoaXMuYm90dG9tLGE8Z3x8YT5nK3RoaXMud2lkdGgpbj0hMH1lbHNlIGlmKGE9ZyxjPWwtdGhpcy5yaWdodCxpPGh8fGk+aCt0aGlzLmhlaWdodCluPSEwO3JldHVybiBuJiYhZD9udWxsOmYucmVuZGVyZXIuY3Jpc3BMaW5lKFtcIk1cIixhLGksXCJMXCIsYyxqXSxifHwxKX0sZ2V0TGluZWFyVGlja1Bvc2l0aW9uczpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT1lYShVKGIvYSkqYSksZj1lYShMYShjL1xuYSkqYSksZz1bXTtpZihiPT09YyYmamEoYikpcmV0dXJuW2JdO2ZvcihiPWU7Yjw9Zjspe2cucHVzaChiKTtiPWVhKGIrYSk7aWYoYj09PWQpYnJlYWs7ZD1ifXJldHVybiBnfSxnZXRNaW5vclRpY2tQb3NpdGlvbnM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMsYj10aGlzLnRpY2tQb3NpdGlvbnMsYz10aGlzLm1pbm9yVGlja0ludGVydmFsLGQ9W10sZTtpZih0aGlzLmlzTG9nKXtlPWIubGVuZ3RoO2ZvcihhPTE7YTxlO2ErKylkPWQuY29uY2F0KHRoaXMuZ2V0TG9nVGlja1Bvc2l0aW9ucyhjLGJbYS0xXSxiW2FdLCEwKSl9ZWxzZSBpZih0aGlzLmlzRGF0ZXRpbWVBeGlzJiZhLm1pbm9yVGlja0ludGVydmFsPT09XCJhdXRvXCIpZD1kLmNvbmNhdCh0aGlzLmdldFRpbWVUaWNrcyh0aGlzLm5vcm1hbGl6ZVRpbWVUaWNrSW50ZXJ2YWwoYyksdGhpcy5taW4sdGhpcy5tYXgsYS5zdGFydE9mV2VlaykpLGRbMF08dGhpcy5taW4mJmQuc2hpZnQoKTtlbHNlIGZvcihiPXRoaXMubWluK1xuKGJbMF0tdGhpcy5taW4pJWM7Yjw9dGhpcy5tYXg7Yis9YylkLnB1c2goYik7cmV0dXJuIGR9LGFkanVzdEZvck1pblJhbmdlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLGI9dGhpcy5taW4sYz10aGlzLm1heCxkLGU9dGhpcy5kYXRhTWF4LXRoaXMuZGF0YU1pbj49dGhpcy5taW5SYW5nZSxmLGcsaCxpLGo7aWYodGhpcy5pc1hBeGlzJiZ0aGlzLm1pblJhbmdlPT09dSYmIXRoaXMuaXNMb2cpcyhhLm1pbil8fHMoYS5tYXgpP3RoaXMubWluUmFuZ2U9bnVsbDoocSh0aGlzLnNlcmllcyxmdW5jdGlvbihhKXtpPWEueERhdGE7Zm9yKGc9aj1hLnhJbmNyZW1lbnQ/MTppLmxlbmd0aC0xO2c+MDtnLS0paWYoaD1pW2ddLWlbZy0xXSxmPT09dXx8aDxmKWY9aH0pLHRoaXMubWluUmFuZ2U9TChmKjUsdGhpcy5kYXRhTWF4LXRoaXMuZGF0YU1pbikpO2lmKGMtYjx0aGlzLm1pblJhbmdlKXt2YXIgaz10aGlzLm1pblJhbmdlO2Q9KGstYytiKS8yO2Q9W2ItZCxwKGEubWluLGItZCldO1xuaWYoZSlkWzJdPXRoaXMuZGF0YU1pbjtiPUNhKGQpO2M9W2IrayxwKGEubWF4LGIrayldO2lmKGUpY1syXT10aGlzLmRhdGFNYXg7Yz1PYShjKTtjLWI8ayYmKGRbMF09Yy1rLGRbMV09cChhLm1pbixjLWspLGI9Q2EoZCkpfXRoaXMubWluPWI7dGhpcy5tYXg9Y30sc2V0QXhpc1RyYW5zbGF0aW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLm1heC1iLm1pbixkPWIuYXhpc1BvaW50UmFuZ2V8fDAsZSxmPTAsZz0wLGg9Yi5saW5rZWRQYXJlbnQsaT0hIWIuY2F0ZWdvcmllcyxqPWIudHJhbnNBO2lmKGIuaXNYQXhpc3x8aXx8ZCloPyhmPWgubWluUG9pbnRPZmZzZXQsZz1oLnBvaW50UmFuZ2VQYWRkaW5nKTpxKGIuc2VyaWVzLGZ1bmN0aW9uKGEpe3ZhciBoPWk/MTpiLmlzWEF4aXM/YS5wb2ludFJhbmdlOmIuYXhpc1BvaW50UmFuZ2V8fDAsaj1hLm9wdGlvbnMucG9pbnRQbGFjZW1lbnQsbT1hLmNsb3Nlc3RQb2ludFJhbmdlO2g+YyYmKGg9MCk7ZD10KGQsaCk7Zj10KGYsR2Eoaik/XG4wOmgvMik7Zz10KGcsaj09PVwib25cIj8wOmgpOyFhLm5vU2hhcmVkVG9vbHRpcCYmcyhtKSYmKGU9cyhlKT9MKGUsbSk6bSl9KSxoPWIub3JkaW5hbFNsb3BlJiZlP2Iub3JkaW5hbFNsb3BlL2U6MSxiLm1pblBvaW50T2Zmc2V0PWYqPWgsYi5wb2ludFJhbmdlUGFkZGluZz1nKj1oLGIucG9pbnRSYW5nZT1MKGQsYyksYi5jbG9zZXN0UG9pbnRSYW5nZT1lO2lmKGEpYi5vbGRUcmFuc0E9ajtiLnRyYW5zbGF0aW9uU2xvcGU9Yi50cmFuc0E9aj1iLmxlbi8oYytnfHwxKTtiLnRyYW5zQj1iLmhvcml6P2IubGVmdDpiLmJvdHRvbTtiLm1pblBpeGVsUGFkZGluZz1qKmZ9LHNldFRpY2tQb3NpdGlvbnM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjPWIuY2hhcnQsZD1iLm9wdGlvbnMsZT1kLnN0YXJ0T25UaWNrLGY9ZC5lbmRPblRpY2ssZz1iLmlzTG9nLGg9Yi5pc0RhdGV0aW1lQXhpcyxpPWIuaXNYQXhpcyxqPWIuaXNMaW5rZWQsaz1iLm9wdGlvbnMudGlja1Bvc2l0aW9uZXIsbD1kLm1heFBhZGRpbmcsXG5uPWQubWluUGFkZGluZyxtPWQudGlja0ludGVydmFsLG89ZC5taW5UaWNrSW50ZXJ2YWwsWT1kLnRpY2tQaXhlbEludGVydmFsLEQsSj1iLmNhdGVnb3JpZXM7aj8oYi5saW5rZWRQYXJlbnQ9Y1tiLmNvbGxdW2QubGlua2VkVG9dLGM9Yi5saW5rZWRQYXJlbnQuZ2V0RXh0cmVtZXMoKSxiLm1pbj1wKGMubWluLGMuZGF0YU1pbiksYi5tYXg9cChjLm1heCxjLmRhdGFNYXgpLGQudHlwZSE9PWIubGlua2VkUGFyZW50Lm9wdGlvbnMudHlwZSYmaGEoMTEsMSkpOihiLm1pbj1wKGIudXNlck1pbixkLm1pbixiLmRhdGFNaW4pLGIubWF4PXAoYi51c2VyTWF4LGQubWF4LGIuZGF0YU1heCkpO2lmKGcpIWEmJkwoYi5taW4scChiLmRhdGFNaW4sYi5taW4pKTw9MCYmaGEoMTAsMSksYi5taW49ZWEoemEoYi5taW4pKSxiLm1heD1lYSh6YShiLm1heCkpO2lmKGIucmFuZ2UmJnMoYi5tYXgpKWIudXNlck1pbj1iLm1pbj10KGIubWluLGIubWF4LWIucmFuZ2UpLGIudXNlck1heD1iLm1heCxiLnJhbmdlPVxubnVsbDtiLmJlZm9yZVBhZGRpbmcmJmIuYmVmb3JlUGFkZGluZygpO2IuYWRqdXN0Rm9yTWluUmFuZ2UoKTtpZighSiYmIWIuYXhpc1BvaW50UmFuZ2UmJiFiLnVzZVBlcmNlbnRhZ2UmJiFqJiZzKGIubWluKSYmcyhiLm1heCkmJihjPWIubWF4LWIubWluKSl7aWYoIXMoZC5taW4pJiYhcyhiLnVzZXJNaW4pJiZuJiYoYi5kYXRhTWluPDB8fCFiLmlnbm9yZU1pblBhZGRpbmcpKWIubWluLT1jKm47aWYoIXMoZC5tYXgpJiYhcyhiLnVzZXJNYXgpJiZsJiYoYi5kYXRhTWF4PjB8fCFiLmlnbm9yZU1heFBhZGRpbmcpKWIubWF4Kz1jKmx9aWYoamEoZC5mbG9vcikpYi5taW49dChiLm1pbixkLmZsb29yKTtpZihqYShkLmNlaWxpbmcpKWIubWF4PUwoYi5tYXgsZC5jZWlsaW5nKTtiLm1pbj09PWIubWF4fHxiLm1pbj09PXZvaWQgMHx8Yi5tYXg9PT12b2lkIDA/Yi50aWNrSW50ZXJ2YWw9MTpqJiYhbSYmWT09PWIubGlua2VkUGFyZW50Lm9wdGlvbnMudGlja1BpeGVsSW50ZXJ2YWw/Yi50aWNrSW50ZXJ2YWw9XG5iLmxpbmtlZFBhcmVudC50aWNrSW50ZXJ2YWw6KGIudGlja0ludGVydmFsPXAobSxKPzE6KGIubWF4LWIubWluKSpZL3QoYi5sZW4sWSkpLCFzKG0pJiZiLmxlbjxZJiYhdGhpcy5pc1JhZGlhbCYmIXRoaXMuaXNMb2cmJiFKJiZlJiZmJiYoRD0hMCxiLnRpY2tJbnRlcnZhbC89NCkpO2kmJiFhJiZxKGIuc2VyaWVzLGZ1bmN0aW9uKGEpe2EucHJvY2Vzc0RhdGEoYi5taW4hPT1iLm9sZE1pbnx8Yi5tYXghPT1iLm9sZE1heCl9KTtiLnNldEF4aXNUcmFuc2xhdGlvbighMCk7Yi5iZWZvcmVTZXRUaWNrUG9zaXRpb25zJiZiLmJlZm9yZVNldFRpY2tQb3NpdGlvbnMoKTtpZihiLnBvc3RQcm9jZXNzVGlja0ludGVydmFsKWIudGlja0ludGVydmFsPWIucG9zdFByb2Nlc3NUaWNrSW50ZXJ2YWwoYi50aWNrSW50ZXJ2YWwpO2lmKGIucG9pbnRSYW5nZSliLnRpY2tJbnRlcnZhbD10KGIucG9pbnRSYW5nZSxiLnRpY2tJbnRlcnZhbCk7aWYoIW0mJmIudGlja0ludGVydmFsPG8pYi50aWNrSW50ZXJ2YWw9XG5vO2lmKCFoJiYhZyYmIW0pYi50aWNrSW50ZXJ2YWw9bmIoYi50aWNrSW50ZXJ2YWwsbnVsbCxtYihiLnRpY2tJbnRlcnZhbCkscChkLmFsbG93RGVjaW1hbHMsIShiLnRpY2tJbnRlcnZhbD4xJiZiLnRpY2tJbnRlcnZhbDw1JiZiLm1heD4xRTMmJmIubWF4PDk5OTkpKSk7Yi5taW5vclRpY2tJbnRlcnZhbD1kLm1pbm9yVGlja0ludGVydmFsPT09XCJhdXRvXCImJmIudGlja0ludGVydmFsP2IudGlja0ludGVydmFsLzU6ZC5taW5vclRpY2tJbnRlcnZhbDtiLnRpY2tQb3NpdGlvbnM9YT1kLnRpY2tQb3NpdGlvbnM/W10uY29uY2F0KGQudGlja1Bvc2l0aW9ucyk6ayYmay5hcHBseShiLFtiLm1pbixiLm1heF0pO2lmKCFhKSFiLm9yZGluYWxQb3NpdGlvbnMmJihiLm1heC1iLm1pbikvYi50aWNrSW50ZXJ2YWw+dCgyKmIubGVuLDIwMCkmJmhhKDE5LCEwKSxhPWg/Yi5nZXRUaW1lVGlja3MoYi5ub3JtYWxpemVUaW1lVGlja0ludGVydmFsKGIudGlja0ludGVydmFsLGQudW5pdHMpLGIubWluLFxuYi5tYXgsZC5zdGFydE9mV2VlayxiLm9yZGluYWxQb3NpdGlvbnMsYi5jbG9zZXN0UG9pbnRSYW5nZSwhMCk6Zz9iLmdldExvZ1RpY2tQb3NpdGlvbnMoYi50aWNrSW50ZXJ2YWwsYi5taW4sYi5tYXgpOmIuZ2V0TGluZWFyVGlja1Bvc2l0aW9ucyhiLnRpY2tJbnRlcnZhbCxiLm1pbixiLm1heCksRCYmYS5zcGxpY2UoMSxhLmxlbmd0aC0yKSxiLnRpY2tQb3NpdGlvbnM9YTtpZighailkPWFbMF0sZz1hW2EubGVuZ3RoLTFdLGg9Yi5taW5Qb2ludE9mZnNldHx8MCxlP2IubWluPWQ6Yi5taW4taD5kJiZhLnNoaWZ0KCksZj9iLm1heD1nOmIubWF4K2g8ZyYmYS5wb3AoKSxhLmxlbmd0aD09PTAmJnMoZCkmJmEucHVzaCgoZytkKS8yKSxhLmxlbmd0aD09PTEmJihlPVEoYi5tYXgpPjFFMTM/MTowLjAwMSxiLm1pbi09ZSxiLm1heCs9ZSl9LHNldE1heFRpY2tzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGFydCxiPWEubWF4VGlja3N8fHt9LGM9dGhpcy50aWNrUG9zaXRpb25zLGQ9dGhpcy5fbWF4VGlja3NLZXk9XG5bdGhpcy5jb2xsLHRoaXMucG9zLHRoaXMubGVuXS5qb2luKFwiLVwiKTtpZighdGhpcy5pc0xpbmtlZCYmIXRoaXMuaXNEYXRldGltZUF4aXMmJmMmJmMubGVuZ3RoPihiW2RdfHwwKSYmdGhpcy5vcHRpb25zLmFsaWduVGlja3MhPT0hMSliW2RdPWMubGVuZ3RoO2EubWF4VGlja3M9Yn0sYWRqdXN0VGlja0Ftb3VudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuX21heFRpY2tzS2V5LGI9dGhpcy50aWNrUG9zaXRpb25zLGM9dGhpcy5jaGFydC5tYXhUaWNrcztpZihjJiZjW2FdJiYhdGhpcy5pc0RhdGV0aW1lQXhpcyYmIXRoaXMuY2F0ZWdvcmllcyYmIXRoaXMuaXNMaW5rZWQmJnRoaXMub3B0aW9ucy5hbGlnblRpY2tzIT09ITEmJnRoaXMubWluIT09dSl7dmFyIGQ9dGhpcy50aWNrQW1vdW50LGU9Yi5sZW5ndGg7dGhpcy50aWNrQW1vdW50PWE9Y1thXTtpZihlPGEpe2Zvcig7Yi5sZW5ndGg8YTspYi5wdXNoKGVhKGJbYi5sZW5ndGgtMV0rdGhpcy50aWNrSW50ZXJ2YWwpKTt0aGlzLnRyYW5zQSo9XG4oZS0xKS8oYS0xKTt0aGlzLm1heD1iW2IubGVuZ3RoLTFdfWlmKHMoZCkmJmEhPT1kKXRoaXMuaXNEaXJ0eT0hMH19LHNldFNjYWxlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zdGFja3MsYixjLGQsZTt0aGlzLm9sZE1pbj10aGlzLm1pbjt0aGlzLm9sZE1heD10aGlzLm1heDt0aGlzLm9sZEF4aXNMZW5ndGg9dGhpcy5sZW47dGhpcy5zZXRBeGlzU2l6ZSgpO2U9dGhpcy5sZW4hPT10aGlzLm9sZEF4aXNMZW5ndGg7cSh0aGlzLnNlcmllcyxmdW5jdGlvbihhKXtpZihhLmlzRGlydHlEYXRhfHxhLmlzRGlydHl8fGEueEF4aXMuaXNEaXJ0eSlkPSEwfSk7aWYoZXx8ZHx8dGhpcy5pc0xpbmtlZHx8dGhpcy5mb3JjZVJlZHJhd3x8dGhpcy51c2VyTWluIT09dGhpcy5vbGRVc2VyTWlufHx0aGlzLnVzZXJNYXghPT10aGlzLm9sZFVzZXJNYXgpe2lmKCF0aGlzLmlzWEF4aXMpZm9yKGIgaW4gYSlmb3IoYyBpbiBhW2JdKWFbYl1bY10udG90YWw9bnVsbCxhW2JdW2NdLmN1bT0wO3RoaXMuZm9yY2VSZWRyYXc9XG4hMTt0aGlzLmdldFNlcmllc0V4dHJlbWVzKCk7dGhpcy5zZXRUaWNrUG9zaXRpb25zKCk7dGhpcy5vbGRVc2VyTWluPXRoaXMudXNlck1pbjt0aGlzLm9sZFVzZXJNYXg9dGhpcy51c2VyTWF4O2lmKCF0aGlzLmlzRGlydHkpdGhpcy5pc0RpcnR5PWV8fHRoaXMubWluIT09dGhpcy5vbGRNaW58fHRoaXMubWF4IT09dGhpcy5vbGRNYXh9ZWxzZSBpZighdGhpcy5pc1hBeGlzKXtpZih0aGlzLm9sZFN0YWNrcylhPXRoaXMuc3RhY2tzPXRoaXMub2xkU3RhY2tzO2ZvcihiIGluIGEpZm9yKGMgaW4gYVtiXSlhW2JdW2NdLmN1bT1hW2JdW2NdLnRvdGFsfXRoaXMuc2V0TWF4VGlja3MoKX0sc2V0RXh0cmVtZXM6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLGc9Zi5jaGFydCxjPXAoYywhMCksZT1yKGUse21pbjphLG1heDpifSk7SShmLFwic2V0RXh0cmVtZXNcIixlLGZ1bmN0aW9uKCl7Zi51c2VyTWluPWE7Zi51c2VyTWF4PWI7Zi5ldmVudEFyZ3M9ZTtmLmlzRGlydHlFeHRyZW1lcz1cbiEwO2MmJmcucmVkcmF3KGQpfSl9LHpvb206ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmRhdGFNaW4sZD10aGlzLmRhdGFNYXgsZT10aGlzLm9wdGlvbnM7dGhpcy5hbGxvd1pvb21PdXRzaWRlfHwocyhjKSYmYTw9TChjLHAoZS5taW4sYykpJiYoYT11KSxzKGQpJiZiPj10KGQscChlLm1heCxkKSkmJihiPXUpKTt0aGlzLmRpc3BsYXlCdG49YSE9PXV8fGIhPT11O3RoaXMuc2V0RXh0cmVtZXMoYSxiLCExLHUse3RyaWdnZXI6XCJ6b29tXCJ9KTtyZXR1cm4hMH0sc2V0QXhpc1NpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNoYXJ0LGI9dGhpcy5vcHRpb25zLGM9Yi5vZmZzZXRMZWZ0fHwwLGQ9dGhpcy5ob3JpeixlPXAoYi53aWR0aCxhLnBsb3RXaWR0aC1jKyhiLm9mZnNldFJpZ2h0fHwwKSksZj1wKGIuaGVpZ2h0LGEucGxvdEhlaWdodCksZz1wKGIudG9wLGEucGxvdFRvcCksYj1wKGIubGVmdCxhLnBsb3RMZWZ0K2MpLGM9LyUkLztjLnRlc3QoZikmJihmPXBhcnNlSW50KGYsMTApL1xuMTAwKmEucGxvdEhlaWdodCk7Yy50ZXN0KGcpJiYoZz1wYXJzZUludChnLDEwKS8xMDAqYS5wbG90SGVpZ2h0K2EucGxvdFRvcCk7dGhpcy5sZWZ0PWI7dGhpcy50b3A9Zzt0aGlzLndpZHRoPWU7dGhpcy5oZWlnaHQ9Zjt0aGlzLmJvdHRvbT1hLmNoYXJ0SGVpZ2h0LWYtZzt0aGlzLnJpZ2h0PWEuY2hhcnRXaWR0aC1lLWI7dGhpcy5sZW49dChkP2U6ZiwwKTt0aGlzLnBvcz1kP2I6Z30sZ2V0RXh0cmVtZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmlzTG9nO3JldHVybnttaW46YT9lYShrYSh0aGlzLm1pbikpOnRoaXMubWluLG1heDphP2VhKGthKHRoaXMubWF4KSk6dGhpcy5tYXgsZGF0YU1pbjp0aGlzLmRhdGFNaW4sZGF0YU1heDp0aGlzLmRhdGFNYXgsdXNlck1pbjp0aGlzLnVzZXJNaW4sdXNlck1heDp0aGlzLnVzZXJNYXh9fSxnZXRUaHJlc2hvbGQ6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pc0xvZyxjPWI/a2EodGhpcy5taW4pOnRoaXMubWluLGI9Yj9rYSh0aGlzLm1heCk6XG50aGlzLm1heDtjPmF8fGE9PT1udWxsP2E9YzpiPGEmJihhPWIpO3JldHVybiB0aGlzLnRyYW5zbGF0ZShhLDAsMSwwLDEpfSxhdXRvTGFiZWxBbGlnbjpmdW5jdGlvbihhKXthPShwKGEsMCktdGhpcy5zaWRlKjkwKzcyMCklMzYwO3JldHVybiBhPjE1JiZhPDE2NT9cInJpZ2h0XCI6YT4xOTUmJmE8MzQ1P1wibGVmdFwiOlwiY2VudGVyXCJ9LGdldE9mZnNldDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNoYXJ0LGM9Yi5yZW5kZXJlcixkPWEub3B0aW9ucyxlPWEudGlja1Bvc2l0aW9ucyxmPWEudGlja3MsZz1hLmhvcml6LGg9YS5zaWRlLGk9Yi5pbnZlcnRlZD9bMSwwLDMsMl1baF06aCxqLGssbD0wLG4sbT0wLG89ZC50aXRsZSxZPWQubGFiZWxzLEQ9MCxKPWIuYXhpc09mZnNldCxiPWIuY2xpcE9mZnNldCxDPVstMSwxLDEsLTFdW2hdLHIsdj0xLHc9cChZLm1heFN0YWdnZXJMaW5lcyw1KSx4LHksQSx6LFI7YS5oYXNEYXRhPWo9YS5oYXNWaXNpYmxlU2VyaWVzfHxzKGEubWluKSYmcyhhLm1heCkmJlxuISFlO2Euc2hvd0F4aXM9az1qfHxwKGQuc2hvd0VtcHR5LCEwKTthLnN0YWdnZXJMaW5lcz1hLmhvcml6JiZZLnN0YWdnZXJMaW5lcztpZighYS5heGlzR3JvdXApYS5ncmlkR3JvdXA9Yy5nKFwiZ3JpZFwiKS5hdHRyKHt6SW5kZXg6ZC5ncmlkWkluZGV4fHwxfSkuYWRkKCksYS5heGlzR3JvdXA9Yy5nKFwiYXhpc1wiKS5hdHRyKHt6SW5kZXg6ZC56SW5kZXh8fDJ9KS5hZGQoKSxhLmxhYmVsR3JvdXA9Yy5nKFwiYXhpcy1sYWJlbHNcIikuYXR0cih7ekluZGV4OlkuekluZGV4fHw3fSkuYWRkQ2xhc3MoXCJoaWdoY2hhcnRzLVwiK2EuY29sbC50b0xvd2VyQ2FzZSgpK1wiLWxhYmVsc1wiKS5hZGQoKTtpZihqfHxhLmlzTGlua2VkKXthLmxhYmVsQWxpZ249cChZLmFsaWdufHxhLmF1dG9MYWJlbEFsaWduKFkucm90YXRpb24pKTtxKGUsZnVuY3Rpb24oYil7ZltiXT9mW2JdLmFkZExhYmVsKCk6ZltiXT1uZXcgVGEoYSxiKX0pO2lmKGEuaG9yaXomJiFhLnN0YWdnZXJMaW5lcyYmdyYmIVkucm90YXRpb24pe2ZvcihqPVxuYS5yZXZlcnNlZD9bXS5jb25jYXQoZSkucmV2ZXJzZSgpOmU7djx3Oyl7eD1bXTt5PSExO2ZvcihyPTA7cjxqLmxlbmd0aDtyKyspQT1qW3JdLHo9KHo9ZltBXS5sYWJlbCYmZltBXS5sYWJlbC5nZXRCQm94KCkpP3oud2lkdGg6MCxSPXIldix6JiYoQT1hLnRyYW5zbGF0ZShBKSx4W1JdIT09dSYmQTx4W1JdJiYoeT0hMCkseFtSXT1BK3opO2lmKHkpdisrO2Vsc2UgYnJlYWt9aWYodj4xKWEuc3RhZ2dlckxpbmVzPXZ9cShlLGZ1bmN0aW9uKGIpe2lmKGg9PT0wfHxoPT09Mnx8ezE6XCJsZWZ0XCIsMzpcInJpZ2h0XCJ9W2hdPT09YS5sYWJlbEFsaWduKUQ9dChmW2JdLmdldExhYmVsU2l6ZSgpLEQpfSk7aWYoYS5zdGFnZ2VyTGluZXMpRCo9YS5zdGFnZ2VyTGluZXMsYS5sYWJlbE9mZnNldD1EfWVsc2UgZm9yKHIgaW4gZilmW3JdLmRlc3Ryb3koKSxkZWxldGUgZltyXTtpZihvJiZvLnRleHQmJm8uZW5hYmxlZCE9PSExKXtpZighYS5heGlzVGl0bGUpYS5heGlzVGl0bGU9Yy50ZXh0KG8udGV4dCxcbjAsMCxvLnVzZUhUTUwpLmF0dHIoe3pJbmRleDo3LHJvdGF0aW9uOm8ucm90YXRpb258fDAsYWxpZ246by50ZXh0QWxpZ258fHtsb3c6XCJsZWZ0XCIsbWlkZGxlOlwiY2VudGVyXCIsaGlnaDpcInJpZ2h0XCJ9W28uYWxpZ25dfSkuYWRkQ2xhc3MoXCJoaWdoY2hhcnRzLVwiK3RoaXMuY29sbC50b0xvd2VyQ2FzZSgpK1wiLXRpdGxlXCIpLmNzcyhvLnN0eWxlKS5hZGQoYS5heGlzR3JvdXApLGEuYXhpc1RpdGxlLmlzTmV3PSEwO2lmKGspbD1hLmF4aXNUaXRsZS5nZXRCQm94KClbZz9cImhlaWdodFwiOlwid2lkdGhcIl0sbj1vLm9mZnNldCxtPXMobik/MDpwKG8ubWFyZ2luLGc/NToxMCk7YS5heGlzVGl0bGVbaz9cInNob3dcIjpcImhpZGVcIl0oKX1hLm9mZnNldD1DKnAoZC5vZmZzZXQsSltoXSk7Yz1oPT09Mj9hLnRpY2tCYXNlbGluZTowO2c9RCttKyhEJiZDKihnP3AoWS55LGEudGlja0Jhc2VsaW5lKzgpOlkueCktYyk7YS5heGlzVGl0bGVNYXJnaW49cChuLGcpO0pbaF09dChKW2hdLGEuYXhpc1RpdGxlTWFyZ2luK1xubCtDKmEub2Zmc2V0LGcpO2JbaV09dChiW2ldLFUoZC5saW5lV2lkdGgvMikqMil9LGdldExpbmVQYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQsYz10aGlzLm9wcG9zaXRlLGQ9dGhpcy5vZmZzZXQsZT10aGlzLmhvcml6LGY9dGhpcy5sZWZ0KyhjP3RoaXMud2lkdGg6MCkrZCxkPWIuY2hhcnRIZWlnaHQtdGhpcy5ib3R0b20tKGM/dGhpcy5oZWlnaHQ6MCkrZDtjJiYoYSo9LTEpO3JldHVybiBiLnJlbmRlcmVyLmNyaXNwTGluZShbXCJNXCIsZT90aGlzLmxlZnQ6ZixlP2Q6dGhpcy50b3AsXCJMXCIsZT9iLmNoYXJ0V2lkdGgtdGhpcy5yaWdodDpmLGU/ZDpiLmNoYXJ0SGVpZ2h0LXRoaXMuYm90dG9tXSxhKX0sZ2V0VGl0bGVQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaG9yaXosYj10aGlzLmxlZnQsYz10aGlzLnRvcCxkPXRoaXMubGVuLGU9dGhpcy5vcHRpb25zLnRpdGxlLGY9YT9iOmMsZz10aGlzLm9wcG9zaXRlLGg9dGhpcy5vZmZzZXQsaT15KGUuc3R5bGUuZm9udFNpemV8fFxuMTIpLGQ9e2xvdzpmKyhhPzA6ZCksbWlkZGxlOmYrZC8yLGhpZ2g6ZisoYT9kOjApfVtlLmFsaWduXSxiPShhP2MrdGhpcy5oZWlnaHQ6YikrKGE/MTotMSkqKGc/LTE6MSkqdGhpcy5heGlzVGl0bGVNYXJnaW4rKHRoaXMuc2lkZT09PTI/aTowKTtyZXR1cm57eDphP2Q6YisoZz90aGlzLndpZHRoOjApK2grKGUueHx8MCkseTphP2ItKGc/dGhpcy5oZWlnaHQ6MCkraDpkKyhlLnl8fDApfX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuaG9yaXosYz1hLnJldmVyc2VkLGQ9YS5jaGFydCxlPWQucmVuZGVyZXIsZj1hLm9wdGlvbnMsZz1hLmlzTG9nLGg9YS5pc0xpbmtlZCxpPWEudGlja1Bvc2l0aW9ucyxqLGs9YS5heGlzVGl0bGUsbD1hLnRpY2tzLG49YS5taW5vclRpY2tzLG09YS5hbHRlcm5hdGVCYW5kcyxvPWYuc3RhY2tMYWJlbHMscD1mLmFsdGVybmF0ZUdyaWRDb2xvcixEPWEudGlja21hcmtPZmZzZXQsSj1mLmxpbmVXaWR0aCxDPWQuaGFzUmVuZGVyZWQmJnMoYS5vbGRNaW4pJiZcbiFpc05hTihhLm9sZE1pbikscj1hLmhhc0RhdGEsdD1hLnNob3dBeGlzLHYsdz1mLmxhYmVscy5vdmVyZmxvdyx4PWEuanVzdGlmeUxhYmVscz1iJiZ3IT09ITEsQTthLmxhYmVsRWRnZS5sZW5ndGg9MDthLmp1c3RpZnlUb1Bsb3Q9dz09PVwianVzdGlmeVwiO3EoW2wsbixtXSxmdW5jdGlvbihhKXtmb3IodmFyIGIgaW4gYSlhW2JdLmlzQWN0aXZlPSExfSk7aWYocnx8aClpZihhLm1pbm9yVGlja0ludGVydmFsJiYhYS5jYXRlZ29yaWVzJiZxKGEuZ2V0TWlub3JUaWNrUG9zaXRpb25zKCksZnVuY3Rpb24oYil7bltiXXx8KG5bYl09bmV3IFRhKGEsYixcIm1pbm9yXCIpKTtDJiZuW2JdLmlzTmV3JiZuW2JdLnJlbmRlcihudWxsLCEwKTtuW2JdLnJlbmRlcihudWxsLCExLDEpfSksaS5sZW5ndGgmJihqPWkuc2xpY2UoKSwoYiYmY3x8IWImJiFjKSYmai5yZXZlcnNlKCkseCYmKGo9ai5zbGljZSgxKS5jb25jYXQoW2pbMF1dKSkscShqLGZ1bmN0aW9uKGIsYyl7eCYmKGM9Yz09PWoubGVuZ3RoLVxuMT8wOmMrMSk7aWYoIWh8fGI+PWEubWluJiZiPD1hLm1heClsW2JdfHwobFtiXT1uZXcgVGEoYSxiKSksQyYmbFtiXS5pc05ldyYmbFtiXS5yZW5kZXIoYywhMCwwLjEpLGxbYl0ucmVuZGVyKGMpfSksRCYmYS5taW49PT0wJiYobFstMV18fChsWy0xXT1uZXcgVGEoYSwtMSxudWxsLCEwKSksbFstMV0ucmVuZGVyKC0xKSkpLHAmJnEoaSxmdW5jdGlvbihiLGMpe2lmKGMlMj09PTAmJmI8YS5tYXgpbVtiXXx8KG1bYl09bmV3IEsuUGxvdExpbmVPckJhbmQoYSkpLHY9YitELEE9aVtjKzFdIT09dT9pW2MrMV0rRDphLm1heCxtW2JdLm9wdGlvbnM9e2Zyb206Zz9rYSh2KTp2LHRvOmc/a2EoQSk6QSxjb2xvcjpwfSxtW2JdLnJlbmRlcigpLG1bYl0uaXNBY3RpdmU9ITB9KSwhYS5fYWRkZWRQbG90TEIpcSgoZi5wbG90TGluZXN8fFtdKS5jb25jYXQoZi5wbG90QmFuZHN8fFtdKSxmdW5jdGlvbihiKXthLmFkZFBsb3RCYW5kT3JMaW5lKGIpfSksYS5fYWRkZWRQbG90TEI9ITA7cShbbCxuLFxubV0sZnVuY3Rpb24oYSl7dmFyIGIsYyxlPVtdLGY9dmE/dmEuZHVyYXRpb258fDUwMDowLGc9ZnVuY3Rpb24oKXtmb3IoYz1lLmxlbmd0aDtjLS07KWFbZVtjXV0mJiFhW2VbY11dLmlzQWN0aXZlJiYoYVtlW2NdXS5kZXN0cm95KCksZGVsZXRlIGFbZVtjXV0pfTtmb3IoYiBpbiBhKWlmKCFhW2JdLmlzQWN0aXZlKWFbYl0ucmVuZGVyKGIsITEsMCksYVtiXS5pc0FjdGl2ZT0hMSxlLnB1c2goYik7YT09PW18fCFkLmhhc1JlbmRlcmVkfHwhZj9nKCk6ZiYmc2V0VGltZW91dChnLGYpfSk7aWYoSiliPWEuZ2V0TGluZVBhdGgoSiksYS5heGlzTGluZT9hLmF4aXNMaW5lLmFuaW1hdGUoe2Q6Yn0pOmEuYXhpc0xpbmU9ZS5wYXRoKGIpLmF0dHIoe3N0cm9rZTpmLmxpbmVDb2xvcixcInN0cm9rZS13aWR0aFwiOkosekluZGV4Ojd9KS5hZGQoYS5heGlzR3JvdXApLGEuYXhpc0xpbmVbdD9cInNob3dcIjpcImhpZGVcIl0oKTtpZihrJiZ0KWtbay5pc05ldz9cImF0dHJcIjpcImFuaW1hdGVcIl0oYS5nZXRUaXRsZVBvc2l0aW9uKCkpLFxuay5pc05ldz0hMTtvJiZvLmVuYWJsZWQmJmEucmVuZGVyU3RhY2tUb3RhbHMoKTthLmlzRGlydHk9ITF9LHJlZHJhdzpmdW5jdGlvbigpe3RoaXMucmVuZGVyKCk7cSh0aGlzLnBsb3RMaW5lc0FuZEJhbmRzLGZ1bmN0aW9uKGEpe2EucmVuZGVyKCl9KTtxKHRoaXMuc2VyaWVzLGZ1bmN0aW9uKGEpe2EuaXNEaXJ0eT0hMH0pfSxkZXN0cm95OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLnN0YWNrcyxkLGU9Yi5wbG90TGluZXNBbmRCYW5kczthfHxYKGIpO2ZvcihkIGluIGMpUGEoY1tkXSksY1tkXT1udWxsO3EoW2IudGlja3MsYi5taW5vclRpY2tzLGIuYWx0ZXJuYXRlQmFuZHNdLGZ1bmN0aW9uKGEpe1BhKGEpfSk7Zm9yKGE9ZS5sZW5ndGg7YS0tOyllW2FdLmRlc3Ryb3koKTtxKFwic3RhY2tUb3RhbEdyb3VwLGF4aXNMaW5lLGF4aXNUaXRsZSxheGlzR3JvdXAsY3Jvc3MsZ3JpZEdyb3VwLGxhYmVsR3JvdXBcIi5zcGxpdChcIixcIiksZnVuY3Rpb24oYSl7YlthXSYmKGJbYV09YlthXS5kZXN0cm95KCkpfSk7XG50aGlzLmNyb3NzJiZ0aGlzLmNyb3NzLmRlc3Ryb3koKX0sZHJhd0Nyb3NzaGFpcjpmdW5jdGlvbihhLGIpe2lmKHRoaXMuY3Jvc3NoYWlyKWlmKChzKGIpfHwhcCh0aGlzLmNyb3NzaGFpci5zbmFwLCEwKSk9PT0hMSl0aGlzLmhpZGVDcm9zc2hhaXIoKTtlbHNle3ZhciBjLGQ9dGhpcy5jcm9zc2hhaXIsZT1kLmFuaW1hdGlvbjtwKGQuc25hcCwhMCk/cyhiKSYmKGM9dGhpcy5jaGFydC5pbnZlcnRlZCE9dGhpcy5ob3Jpej9iLnBsb3RYOnRoaXMubGVuLWIucGxvdFkpOmM9dGhpcy5ob3Jpej9hLmNoYXJ0WC10aGlzLnBvczp0aGlzLmxlbi1hLmNoYXJ0WSt0aGlzLnBvcztjPXRoaXMuaXNSYWRpYWw/dGhpcy5nZXRQbG90TGluZVBhdGgodGhpcy5pc1hBeGlzP2IueDpwKGIuc3RhY2tZLGIueSkpOnRoaXMuZ2V0UGxvdExpbmVQYXRoKG51bGwsbnVsbCxudWxsLG51bGwsYyk7aWYoYz09PW51bGwpdGhpcy5oaWRlQ3Jvc3NoYWlyKCk7ZWxzZSBpZih0aGlzLmNyb3NzKXRoaXMuY3Jvc3MuYXR0cih7dmlzaWJpbGl0eTpcInZpc2libGVcIn0pW2U/XG5cImFuaW1hdGVcIjpcImF0dHJcIl0oe2Q6Y30sZSk7ZWxzZXtlPXtcInN0cm9rZS13aWR0aFwiOmQud2lkdGh8fDEsc3Ryb2tlOmQuY29sb3J8fFwiI0MwQzBDMFwiLHpJbmRleDpkLnpJbmRleHx8Mn07aWYoZC5kYXNoU3R5bGUpZS5kYXNoc3R5bGU9ZC5kYXNoU3R5bGU7dGhpcy5jcm9zcz10aGlzLmNoYXJ0LnJlbmRlcmVyLnBhdGgoYykuYXR0cihlKS5hZGQoKX19fSxoaWRlQ3Jvc3NoYWlyOmZ1bmN0aW9uKCl7dGhpcy5jcm9zcyYmdGhpcy5jcm9zcy5oaWRlKCl9fTtyKG5hLnByb3RvdHlwZSx7Z2V0UGxvdEJhbmRQYXRoOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5nZXRQbG90TGluZVBhdGgoYiksZD10aGlzLmdldFBsb3RMaW5lUGF0aChhKTtkJiZjP2QucHVzaChjWzRdLGNbNV0sY1sxXSxjWzJdKTpkPW51bGw7cmV0dXJuIGR9LGFkZFBsb3RCYW5kOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZFBsb3RCYW5kT3JMaW5lKGEsXCJwbG90QmFuZHNcIil9LGFkZFBsb3RMaW5lOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFkZFBsb3RCYW5kT3JMaW5lKGEsXG5cInBsb3RMaW5lc1wiKX0sYWRkUGxvdEJhbmRPckxpbmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz0obmV3IEsuUGxvdExpbmVPckJhbmQodGhpcyxhKSkucmVuZGVyKCksZD10aGlzLnVzZXJPcHRpb25zO2MmJihiJiYoZFtiXT1kW2JdfHxbXSxkW2JdLnB1c2goYSkpLHRoaXMucGxvdExpbmVzQW5kQmFuZHMucHVzaChjKSk7cmV0dXJuIGN9LHJlbW92ZVBsb3RCYW5kT3JMaW5lOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBsb3RMaW5lc0FuZEJhbmRzLGM9dGhpcy5vcHRpb25zLGQ9dGhpcy51c2VyT3B0aW9ucyxlPWIubGVuZ3RoO2UtLTspYltlXS5pZD09PWEmJmJbZV0uZGVzdHJveSgpO3EoW2MucGxvdExpbmVzfHxbXSxkLnBsb3RMaW5lc3x8W10sYy5wbG90QmFuZHN8fFtdLGQucGxvdEJhbmRzfHxbXV0sZnVuY3Rpb24oYil7Zm9yKGU9Yi5sZW5ndGg7ZS0tOyliW2VdLmlkPT09YSYmbGEoYixiW2VdKX0pfX0pO25hLnByb3RvdHlwZS5nZXRUaW1lVGlja3M9ZnVuY3Rpb24oYSxiLFxuYyxkKXt2YXIgZT1bXSxmPXt9LGc9RS5nbG9iYWwudXNlVVRDLGgsaT1uZXcgRGEoYi1TYSksaj1hLnVuaXRSYW5nZSxrPWEuY291bnQ7aWYocyhiKSl7aj49QS5zZWNvbmQmJihpLnNldE1pbGxpc2Vjb25kcygwKSxpLnNldFNlY29uZHMoaj49QS5taW51dGU/MDprKlUoaS5nZXRTZWNvbmRzKCkvaykpKTtpZihqPj1BLm1pbnV0ZSlpW0NiXShqPj1BLmhvdXI/MDprKlUoaVtwYl0oKS9rKSk7aWYoaj49QS5ob3VyKWlbRGJdKGo+PUEuZGF5PzA6aypVKGlbcWJdKCkvaykpO2lmKGo+PUEuZGF5KWlbc2JdKGo+PUEubW9udGg/MTprKlUoaVtYYV0oKS9rKSk7aj49QS5tb250aCYmKGlbRWJdKGo+PUEueWVhcj8wOmsqVShpW2ZiXSgpL2spKSxoPWlbZ2JdKCkpO2o+PUEueWVhciYmKGgtPWglayxpW0ZiXShoKSk7aWYoaj09PUEud2VlaylpW3NiXShpW1hhXSgpLWlbcmJdKCkrcChkLDEpKTtiPTE7U2EmJihpPW5ldyBEYShpLmdldFRpbWUoKStTYSkpO2g9aVtnYl0oKTtmb3IodmFyIGQ9XG5pLmdldFRpbWUoKSxsPWlbZmJdKCksbj1pW1hhXSgpLG09KEEuZGF5KyhnP1NhOmkuZ2V0VGltZXpvbmVPZmZzZXQoKSo2RTQpKSVBLmRheTtkPGM7KWUucHVzaChkKSxqPT09QS55ZWFyP2Q9ZWIoaCtiKmssMCk6aj09PUEubW9udGg/ZD1lYihoLGwrYiprKTohZyYmKGo9PT1BLmRheXx8aj09PUEud2Vlayk/ZD1lYihoLGwsbitiKmsqKGo9PT1BLmRheT8xOjcpKTpkKz1qKmssYisrO2UucHVzaChkKTtxKHdiKGUsZnVuY3Rpb24oYSl7cmV0dXJuIGo8PUEuaG91ciYmYSVBLmRheT09PW19KSxmdW5jdGlvbihhKXtmW2FdPVwiZGF5XCJ9KX1lLmluZm89cihhLHtoaWdoZXJSYW5rczpmLHRvdGFsUmFuZ2U6aiprfSk7cmV0dXJuIGV9O25hLnByb3RvdHlwZS5ub3JtYWxpemVUaW1lVGlja0ludGVydmFsPWZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8W1tcIm1pbGxpc2Vjb25kXCIsWzEsMiw1LDEwLDIwLDI1LDUwLDEwMCwyMDAsNTAwXV0sW1wic2Vjb25kXCIsWzEsMiw1LDEwLDE1LDMwXV0sW1wibWludXRlXCIsXG5bMSwyLDUsMTAsMTUsMzBdXSxbXCJob3VyXCIsWzEsMiwzLDQsNiw4LDEyXV0sW1wiZGF5XCIsWzEsMl1dLFtcIndlZWtcIixbMSwyXV0sW1wibW9udGhcIixbMSwyLDMsNCw2XV0sW1wieWVhclwiLG51bGxdXSxkPWNbYy5sZW5ndGgtMV0sZT1BW2RbMF1dLGY9ZFsxXSxnO2ZvcihnPTA7ZzxjLmxlbmd0aDtnKyspaWYoZD1jW2ddLGU9QVtkWzBdXSxmPWRbMV0sY1tnKzFdJiZhPD0oZSpmW2YubGVuZ3RoLTFdK0FbY1tnKzFdWzBdXSkvMilicmVhaztlPT09QS55ZWFyJiZhPDUqZSYmKGY9WzEsMiw1XSk7Yz1uYihhL2UsZixkWzBdPT09XCJ5ZWFyXCI/dChtYihhL2UpLDEpOjEpO3JldHVybnt1bml0UmFuZ2U6ZSxjb3VudDpjLHVuaXROYW1lOmRbMF19fTtuYS5wcm90b3R5cGUuZ2V0TG9nVGlja1Bvc2l0aW9ucz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLm9wdGlvbnMsZj10aGlzLmxlbixnPVtdO2lmKCFkKXRoaXMuX21pbm9yQXV0b0ludGVydmFsPW51bGw7aWYoYT49MC41KWE9dihhKSxnPXRoaXMuZ2V0TGluZWFyVGlja1Bvc2l0aW9ucyhhLFxuYixjKTtlbHNlIGlmKGE+PTAuMDgpZm9yKHZhciBmPVUoYiksaCxpLGosayxsLGU9YT4wLjM/WzEsMiw0XTphPjAuMTU/WzEsMiw0LDYsOF06WzEsMiwzLDQsNSw2LDcsOCw5XTtmPGMrMSYmIWw7ZisrKXtpPWUubGVuZ3RoO2ZvcihoPTA7aDxpJiYhbDtoKyspaj16YShrYShmKSplW2hdKSxqPmImJighZHx8azw9YykmJmshPT11JiZnLnB1c2goayksaz5jJiYobD0hMCksaz1qfWVsc2UgaWYoYj1rYShiKSxjPWthKGMpLGE9ZVtkP1wibWlub3JUaWNrSW50ZXJ2YWxcIjpcInRpY2tJbnRlcnZhbFwiXSxhPXAoYT09PVwiYXV0b1wiP251bGw6YSx0aGlzLl9taW5vckF1dG9JbnRlcnZhbCwoYy1iKSooZS50aWNrUGl4ZWxJbnRlcnZhbC8oZD81OjEpKS8oKGQ/Zi90aGlzLnRpY2tQb3NpdGlvbnMubGVuZ3RoOmYpfHwxKSksYT1uYihhLG51bGwsbWIoYSkpLGc9VmEodGhpcy5nZXRMaW5lYXJUaWNrUG9zaXRpb25zKGEsYixjKSx6YSksIWQpdGhpcy5fbWlub3JBdXRvSW50ZXJ2YWw9YS81O2lmKCFkKXRoaXMudGlja0ludGVydmFsPVxuYTtyZXR1cm4gZ307dmFyIE5iPUsuVG9vbHRpcD1mdW5jdGlvbigpe3RoaXMuaW5pdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O05iLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhLGIpe3ZhciBjPWIuYm9yZGVyV2lkdGgsZD1iLnN0eWxlLGU9eShkLnBhZGRpbmcpO3RoaXMuY2hhcnQ9YTt0aGlzLm9wdGlvbnM9Yjt0aGlzLmNyb3NzaGFpcnM9W107dGhpcy5ub3c9e3g6MCx5OjB9O3RoaXMuaXNIaWRkZW49ITA7dGhpcy5sYWJlbD1hLnJlbmRlcmVyLmxhYmVsKFwiXCIsMCwwLGIuc2hhcGV8fFwiY2FsbG91dFwiLG51bGwsbnVsbCxiLnVzZUhUTUwsbnVsbCxcInRvb2x0aXBcIikuYXR0cih7cGFkZGluZzplLGZpbGw6Yi5iYWNrZ3JvdW5kQ29sb3IsXCJzdHJva2Utd2lkdGhcIjpjLHI6Yi5ib3JkZXJSYWRpdXMsekluZGV4Ojh9KS5jc3MoZCkuY3NzKHtwYWRkaW5nOjB9KS5hZGQoKS5hdHRyKHt5Oi05OTk5fSk7Z2F8fHRoaXMubGFiZWwuc2hhZG93KGIuc2hhZG93KTt0aGlzLnNoYXJlZD1iLnNoYXJlZH0sXG5kZXN0cm95OmZ1bmN0aW9uKCl7aWYodGhpcy5sYWJlbCl0aGlzLmxhYmVsPXRoaXMubGFiZWwuZGVzdHJveSgpO2NsZWFyVGltZW91dCh0aGlzLmhpZGVUaW1lcik7Y2xlYXJUaW1lb3V0KHRoaXMudG9vbHRpcFRpbWVvdXQpfSxtb3ZlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMsZj1lLm5vdyxnPWUub3B0aW9ucy5hbmltYXRpb24hPT0hMSYmIWUuaXNIaWRkZW4mJihRKGEtZi54KT4xfHxRKGItZi55KT4xKSxoPWUuZm9sbG93UG9pbnRlcnx8ZS5sZW4+MTtyKGYse3g6Zz8oMipmLngrYSkvMzphLHk6Zz8oZi55K2IpLzI6YixhbmNob3JYOmg/dTpnPygyKmYuYW5jaG9yWCtjKS8zOmMsYW5jaG9yWTpoP3U6Zz8oZi5hbmNob3JZK2QpLzI6ZH0pO2UubGFiZWwuYXR0cihmKTtpZihnKWNsZWFyVGltZW91dCh0aGlzLnRvb2x0aXBUaW1lb3V0KSx0aGlzLnRvb2x0aXBUaW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXtlJiZlLm1vdmUoYSxiLGMsZCl9LDMyKX0saGlkZTpmdW5jdGlvbihhKXt2YXIgYj1cbnRoaXMsYztjbGVhclRpbWVvdXQodGhpcy5oaWRlVGltZXIpO2lmKCF0aGlzLmlzSGlkZGVuKWM9dGhpcy5jaGFydC5ob3ZlclBvaW50cyx0aGlzLmhpZGVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yi5sYWJlbC5mYWRlT3V0KCk7Yi5pc0hpZGRlbj0hMH0scChhLHRoaXMub3B0aW9ucy5oaWRlRGVsYXksNTAwKSksYyYmcShjLGZ1bmN0aW9uKGEpe2Euc2V0U3RhdGUoKX0pLHRoaXMuY2hhcnQuaG92ZXJQb2ludHM9bnVsbH0sZ2V0QW5jaG9yOmZ1bmN0aW9uKGEsYil7dmFyIGMsZD10aGlzLmNoYXJ0LGU9ZC5pbnZlcnRlZCxmPWQucGxvdFRvcCxnPTAsaD0wLGksYT1yYShhKTtjPWFbMF0udG9vbHRpcFBvczt0aGlzLmZvbGxvd1BvaW50ZXImJmImJihiLmNoYXJ0WD09PXUmJihiPWQucG9pbnRlci5ub3JtYWxpemUoYikpLGM9W2IuY2hhcnRYLWQucGxvdExlZnQsYi5jaGFydFktZl0pO2N8fChxKGEsZnVuY3Rpb24oYSl7aT1hLnNlcmllcy55QXhpcztnKz1hLnBsb3RYO2grPVxuKGEucGxvdExvdz8oYS5wbG90TG93K2EucGxvdEhpZ2gpLzI6YS5wbG90WSkrKCFlJiZpP2kudG9wLWY6MCl9KSxnLz1hLmxlbmd0aCxoLz1hLmxlbmd0aCxjPVtlP2QucGxvdFdpZHRoLWg6Zyx0aGlzLnNoYXJlZCYmIWUmJmEubGVuZ3RoPjEmJmI/Yi5jaGFydFktZjplP2QucGxvdEhlaWdodC1nOmhdKTtyZXR1cm4gVmEoYyx2KX0sZ2V0UG9zaXRpb246ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuY2hhcnQsZT10aGlzLmRpc3RhbmNlLGY9e30sZyxoPVtcInlcIixkLmNoYXJ0SGVpZ2h0LGIsYy5wbG90WStkLnBsb3RUb3BdLGk9W1wieFwiLGQuY2hhcnRXaWR0aCxhLGMucGxvdFgrZC5wbG90TGVmdF0saj1jLnR0QmVsb3d8fGQuaW52ZXJ0ZWQmJiFjLm5lZ2F0aXZlfHwhZC5pbnZlcnRlZCYmYy5uZWdhdGl2ZSxrPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBnPWM8ZC1lLGI9ZCtlK2M8YixjPWQtZS1jO2QrPWU7aWYoaiYmYilmW2FdPWQ7ZWxzZSBpZighaiYmZylmW2FdPWM7ZWxzZSBpZihnKWZbYV09XG5jO2Vsc2UgaWYoYilmW2FdPWQ7ZWxzZSByZXR1cm4hMX0sbD1mdW5jdGlvbihhLGIsYyxkKXtpZihkPGV8fGQ+Yi1lKXJldHVybiExO2Vsc2UgZlthXT1kPGMvMj8xOmQ+Yi1jLzI/Yi1jLTI6ZC1jLzJ9LG49ZnVuY3Rpb24oYSl7dmFyIGI9aDtoPWk7aT1iO2c9YX0sbT1mdW5jdGlvbigpe2suYXBwbHkoMCxoKSE9PSExP2wuYXBwbHkoMCxpKT09PSExJiYhZyYmKG4oITApLG0oKSk6Zz9mLng9Zi55PTA6KG4oITApLG0oKSl9OyhkLmludmVydGVkfHx0aGlzLmxlbj4xKSYmbigpO20oKTtyZXR1cm4gZn0sZGVmYXVsdEZvcm1hdHRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBvaW50c3x8cmEodGhpcyksYz1iWzBdLnNlcmllcyxkO2Q9W2EudG9vbHRpcEhlYWRlckZvcm1hdHRlcihiWzBdKV07cShiLGZ1bmN0aW9uKGEpe2M9YS5zZXJpZXM7ZC5wdXNoKGMudG9vbHRpcEZvcm1hdHRlciYmYy50b29sdGlwRm9ybWF0dGVyKGEpfHxhLnBvaW50LnRvb2x0aXBGb3JtYXR0ZXIoYy50b29sdGlwT3B0aW9ucy5wb2ludEZvcm1hdCkpfSk7XG5kLnB1c2goYS5vcHRpb25zLmZvb3RlckZvcm1hdHx8XCJcIik7cmV0dXJuIGQuam9pbihcIlwiKX0scmVmcmVzaDpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2hhcnQsZD10aGlzLmxhYmVsLGU9dGhpcy5vcHRpb25zLGYsZyxoPXt9LGksaj1bXTtpPWUuZm9ybWF0dGVyfHx0aGlzLmRlZmF1bHRGb3JtYXR0ZXI7dmFyIGg9Yy5ob3ZlclBvaW50cyxrLGw9dGhpcy5zaGFyZWQ7Y2xlYXJUaW1lb3V0KHRoaXMuaGlkZVRpbWVyKTt0aGlzLmZvbGxvd1BvaW50ZXI9cmEoYSlbMF0uc2VyaWVzLnRvb2x0aXBPcHRpb25zLmZvbGxvd1BvaW50ZXI7Zz10aGlzLmdldEFuY2hvcihhLGIpO2Y9Z1swXTtnPWdbMV07bCYmKCFhLnNlcmllc3x8IWEuc2VyaWVzLm5vU2hhcmVkVG9vbHRpcCk/KGMuaG92ZXJQb2ludHM9YSxoJiZxKGgsZnVuY3Rpb24oYSl7YS5zZXRTdGF0ZSgpfSkscShhLGZ1bmN0aW9uKGEpe2Euc2V0U3RhdGUoXCJob3ZlclwiKTtqLnB1c2goYS5nZXRMYWJlbENvbmZpZygpKX0pLGg9e3g6YVswXS5jYXRlZ29yeSxcbnk6YVswXS55fSxoLnBvaW50cz1qLHRoaXMubGVuPWoubGVuZ3RoLGE9YVswXSk6aD1hLmdldExhYmVsQ29uZmlnKCk7aT1pLmNhbGwoaCx0aGlzKTtoPWEuc2VyaWVzO3RoaXMuZGlzdGFuY2U9cChoLnRvb2x0aXBPcHRpb25zLmRpc3RhbmNlLDE2KTtpPT09ITE/dGhpcy5oaWRlKCk6KHRoaXMuaXNIaWRkZW4mJihiYihkKSxkLmF0dHIoXCJvcGFjaXR5XCIsMSkuc2hvdygpKSxkLmF0dHIoe3RleHQ6aX0pLGs9ZS5ib3JkZXJDb2xvcnx8YS5jb2xvcnx8aC5jb2xvcnx8XCIjNjA2MDYwXCIsZC5hdHRyKHtzdHJva2U6a30pLHRoaXMudXBkYXRlUG9zaXRpb24oe3Bsb3RYOmYscGxvdFk6ZyxuZWdhdGl2ZTphLm5lZ2F0aXZlLHR0QmVsb3c6YS50dEJlbG93fSksdGhpcy5pc0hpZGRlbj0hMSk7SShjLFwidG9vbHRpcFJlZnJlc2hcIix7dGV4dDppLHg6ZitjLnBsb3RMZWZ0LHk6ZytjLnBsb3RUb3AsYm9yZGVyQ29sb3I6a30pfSx1cGRhdGVQb3NpdGlvbjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LFxuYz10aGlzLmxhYmVsLGM9KHRoaXMub3B0aW9ucy5wb3NpdGlvbmVyfHx0aGlzLmdldFBvc2l0aW9uKS5jYWxsKHRoaXMsYy53aWR0aCxjLmhlaWdodCxhKTt0aGlzLm1vdmUodihjLngpLHYoYy55KSxhLnBsb3RYK2IucGxvdExlZnQsYS5wbG90WStiLnBsb3RUb3ApfSx0b29sdGlwSGVhZGVyRm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3ZhciBiPWEuc2VyaWVzLGM9Yi50b29sdGlwT3B0aW9ucyxkPWMuZGF0ZVRpbWVMYWJlbEZvcm1hdHMsZT1jLnhEYXRlRm9ybWF0LGY9Yi54QXhpcyxnPWYmJmYub3B0aW9ucy50eXBlPT09XCJkYXRldGltZVwiJiZqYShhLmtleSksYz1jLmhlYWRlckZvcm1hdCxmPWYmJmYuY2xvc2VzdFBvaW50UmFuZ2UsaDtpZihnJiYhZSl7aWYoZilmb3IoaCBpbiBBKXtpZihBW2hdPj1mfHxBW2hdPD1BLmRheSYmYS5rZXklQVtoXT4wKXtlPWRbaF07YnJlYWt9fWVsc2UgZT1kLmRheTtlPWV8fGQueWVhcn1nJiZlJiYoYz1jLnJlcGxhY2UoXCJ7cG9pbnQua2V5fVwiLFwie3BvaW50LmtleTpcIitcbmUrXCJ9XCIpKTtyZXR1cm4gSmEoYyx7cG9pbnQ6YSxzZXJpZXM6Yn0pfX07dmFyIHBhOyRhPXguZG9jdW1lbnRFbGVtZW50Lm9udG91Y2hzdGFydCE9PXU7dmFyIFdhPUsuUG9pbnRlcj1mdW5jdGlvbihhLGIpe3RoaXMuaW5pdChhLGIpfTtXYS5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmNoYXJ0LGQ9Yy5ldmVudHMsZT1nYT9cIlwiOmMuem9vbVR5cGUsYz1hLmludmVydGVkLGY7dGhpcy5vcHRpb25zPWI7dGhpcy5jaGFydD1hO3RoaXMuem9vbVg9Zj0veC8udGVzdChlKTt0aGlzLnpvb21ZPWU9L3kvLnRlc3QoZSk7dGhpcy56b29tSG9yPWYmJiFjfHxlJiZjO3RoaXMuem9vbVZlcnQ9ZSYmIWN8fGYmJmM7dGhpcy5oYXNab29tPWZ8fGU7dGhpcy5ydW5DaGFydENsaWNrPWQmJiEhZC5jbGljazt0aGlzLnBpbmNoRG93bj1bXTt0aGlzLmxhc3RWYWxpZFRvdWNoPXt9O2lmKEsuVG9vbHRpcCYmYi50b29sdGlwLmVuYWJsZWQpYS50b29sdGlwPW5ldyBOYihhLGIudG9vbHRpcCksXG50aGlzLmZvbGxvd1RvdWNoTW92ZT1iLnRvb2x0aXAuZm9sbG93VG91Y2hNb3ZlO3RoaXMuc2V0RE9NRXZlbnRzKCl9LG5vcm1hbGl6ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsYT1hfHx3aW5kb3cuZXZlbnQsYT1UYihhKTtpZighYS50YXJnZXQpYS50YXJnZXQ9YS5zcmNFbGVtZW50O2Q9YS50b3VjaGVzP2EudG91Y2hlcy5sZW5ndGg/YS50b3VjaGVzLml0ZW0oMCk6YS5jaGFuZ2VkVG91Y2hlc1swXTphO2lmKCFiKXRoaXMuY2hhcnRQb3NpdGlvbj1iPVNiKHRoaXMuY2hhcnQuY29udGFpbmVyKTtkLnBhZ2VYPT09dT8oYz10KGEueCxhLmNsaWVudFgtYi5sZWZ0KSxkPWEueSk6KGM9ZC5wYWdlWC1iLmxlZnQsZD1kLnBhZ2VZLWIudG9wKTtyZXR1cm4gcihhLHtjaGFydFg6dihjKSxjaGFydFk6dihkKX0pfSxnZXRDb29yZGluYXRlczpmdW5jdGlvbihhKXt2YXIgYj17eEF4aXM6W10seUF4aXM6W119O3EodGhpcy5jaGFydC5heGVzLGZ1bmN0aW9uKGMpe2JbYy5pc1hBeGlzP1wieEF4aXNcIjpcblwieUF4aXNcIl0ucHVzaCh7YXhpczpjLHZhbHVlOmMudG9WYWx1ZShhW2MuaG9yaXo/XCJjaGFydFhcIjpcImNoYXJ0WVwiXSl9KX0pO3JldHVybiBifSxnZXRJbmRleDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0O3JldHVybiBiLmludmVydGVkP2IucGxvdEhlaWdodCtiLnBsb3RUb3AtYS5jaGFydFk6YS5jaGFydFgtYi5wbG90TGVmdH0scnVuUG9pbnRBY3Rpb25zOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQsYz1iLnNlcmllcyxkPWIudG9vbHRpcCxlLGYsZz1iLmhvdmVyUG9pbnQsaD1iLmhvdmVyU2VyaWVzLGksaixrPWIuY2hhcnRXaWR0aCxsPXRoaXMuZ2V0SW5kZXgoYSk7aWYoZCYmdGhpcy5vcHRpb25zLnRvb2x0aXAuc2hhcmVkJiYoIWh8fCFoLm5vU2hhcmVkVG9vbHRpcCkpe2Y9W107aT1jLmxlbmd0aDtmb3Ioaj0wO2o8aTtqKyspaWYoY1tqXS52aXNpYmxlJiZjW2pdLm9wdGlvbnMuZW5hYmxlTW91c2VUcmFja2luZyE9PSExJiYhY1tqXS5ub1NoYXJlZFRvb2x0aXAmJlxuY1tqXS5zaW5ndWxhclRvb2x0aXBzIT09ITAmJmNbal0udG9vbHRpcFBvaW50cy5sZW5ndGgmJihlPWNbal0udG9vbHRpcFBvaW50c1tsXSkmJmUuc2VyaWVzKWUuX2Rpc3Q9UShsLWUuY2xpZW50WCksaz1MKGssZS5fZGlzdCksZi5wdXNoKGUpO2ZvcihpPWYubGVuZ3RoO2ktLTspZltpXS5fZGlzdD5rJiZmLnNwbGljZShpLDEpO2lmKGYubGVuZ3RoJiZmWzBdLmNsaWVudFghPT10aGlzLmhvdmVyWClkLnJlZnJlc2goZixhKSx0aGlzLmhvdmVyWD1mWzBdLmNsaWVudFh9Yz1oJiZoLnRvb2x0aXBPcHRpb25zLmZvbGxvd1BvaW50ZXI7aWYoaCYmaC50cmFja2VyJiYhYyl7aWYoKGU9aC50b29sdGlwUG9pbnRzW2xdKSYmZSE9PWcpZS5vbk1vdXNlT3ZlcihhKX1lbHNlIGQmJmMmJiFkLmlzSGlkZGVuJiYoaD1kLmdldEFuY2hvcihbe31dLGEpLGQudXBkYXRlUG9zaXRpb24oe3Bsb3RYOmhbMF0scGxvdFk6aFsxXX0pKTtpZihkJiYhdGhpcy5fb25Eb2N1bWVudE1vdXNlTW92ZSl0aGlzLl9vbkRvY3VtZW50TW91c2VNb3ZlPVxuZnVuY3Rpb24oYSl7aWYoV1twYV0pV1twYV0ucG9pbnRlci5vbkRvY3VtZW50TW91c2VNb3ZlKGEpfSxOKHgsXCJtb3VzZW1vdmVcIix0aGlzLl9vbkRvY3VtZW50TW91c2VNb3ZlKTtxKGIuYXhlcyxmdW5jdGlvbihiKXtiLmRyYXdDcm9zc2hhaXIoYSxwKGUsZykpfSl9LHJlc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jaGFydCxkPWMuaG92ZXJTZXJpZXMsZT1jLmhvdmVyUG9pbnQsZj1jLnRvb2x0aXAsZz1mJiZmLnNoYXJlZD9jLmhvdmVyUG9pbnRzOmU7KGE9YSYmZiYmZykmJnJhKGcpWzBdLnBsb3RYPT09dSYmKGE9ITEpO2lmKGEpZi5yZWZyZXNoKGcpLGUmJmUuc2V0U3RhdGUoZS5zdGF0ZSwhMCk7ZWxzZXtpZihlKWUub25Nb3VzZU91dCgpO2lmKGQpZC5vbk1vdXNlT3V0KCk7ZiYmZi5oaWRlKGIpO2lmKHRoaXMuX29uRG9jdW1lbnRNb3VzZU1vdmUpWCh4LFwibW91c2Vtb3ZlXCIsdGhpcy5fb25Eb2N1bWVudE1vdXNlTW92ZSksdGhpcy5fb25Eb2N1bWVudE1vdXNlTW92ZT1cbm51bGw7cShjLmF4ZXMsZnVuY3Rpb24oYSl7YS5oaWRlQ3Jvc3NoYWlyKCl9KTt0aGlzLmhvdmVyWD1udWxsfX0sc2NhbGVHcm91cHM6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmNoYXJ0LGQ7cShjLnNlcmllcyxmdW5jdGlvbihlKXtkPWF8fGUuZ2V0UGxvdEJveCgpO2UueEF4aXMmJmUueEF4aXMuem9vbUVuYWJsZWQmJihlLmdyb3VwLmF0dHIoZCksZS5tYXJrZXJHcm91cCYmKGUubWFya2VyR3JvdXAuYXR0cihkKSxlLm1hcmtlckdyb3VwLmNsaXAoYj9jLmNsaXBSZWN0Om51bGwpKSxlLmRhdGFMYWJlbHNHcm91cCYmZS5kYXRhTGFiZWxzR3JvdXAuYXR0cihkKSl9KTtjLmNsaXBSZWN0LmF0dHIoYnx8Yy5jbGlwQm94KX0sZHJhZ1N0YXJ0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQ7Yi5tb3VzZUlzRG93bj1hLnR5cGU7Yi5jYW5jZWxDbGljaz0hMTtiLm1vdXNlRG93blg9dGhpcy5tb3VzZURvd25YPWEuY2hhcnRYO2IubW91c2VEb3duWT10aGlzLm1vdXNlRG93blk9YS5jaGFydFl9LFxuZHJhZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9Yi5vcHRpb25zLmNoYXJ0LGQ9YS5jaGFydFgsZT1hLmNoYXJ0WSxmPXRoaXMuem9vbUhvcixnPXRoaXMuem9vbVZlcnQsaD1iLnBsb3RMZWZ0LGk9Yi5wbG90VG9wLGo9Yi5wbG90V2lkdGgsaz1iLnBsb3RIZWlnaHQsbCxuPXRoaXMubW91c2VEb3duWCxtPXRoaXMubW91c2VEb3duWSxvPWMucGFuS2V5JiZhW2MucGFuS2V5K1wiS2V5XCJdO2Q8aD9kPWg6ZD5oK2omJihkPWgraik7ZTxpP2U9aTplPmkrayYmKGU9aStrKTt0aGlzLmhhc0RyYWdnZWQ9TWF0aC5zcXJ0KE1hdGgucG93KG4tZCwyKStNYXRoLnBvdyhtLWUsMikpO2lmKHRoaXMuaGFzRHJhZ2dlZD4xMCl7bD1iLmlzSW5zaWRlUGxvdChuLWgsbS1pKTtpZihiLmhhc0NhcnRlc2lhblNlcmllcyYmKHRoaXMuem9vbVh8fHRoaXMuem9vbVkpJiZsJiYhbyYmIXRoaXMuc2VsZWN0aW9uTWFya2VyKXRoaXMuc2VsZWN0aW9uTWFya2VyPWIucmVuZGVyZXIucmVjdChoLGksXG5mPzE6aixnPzE6aywwKS5hdHRyKHtmaWxsOmMuc2VsZWN0aW9uTWFya2VyRmlsbHx8XCJyZ2JhKDY5LDExNCwxNjcsMC4yNSlcIix6SW5kZXg6N30pLmFkZCgpO3RoaXMuc2VsZWN0aW9uTWFya2VyJiZmJiYoZC09bix0aGlzLnNlbGVjdGlvbk1hcmtlci5hdHRyKHt3aWR0aDpRKGQpLHg6KGQ+MD8wOmQpK259KSk7dGhpcy5zZWxlY3Rpb25NYXJrZXImJmcmJihkPWUtbSx0aGlzLnNlbGVjdGlvbk1hcmtlci5hdHRyKHtoZWlnaHQ6UShkKSx5OihkPjA/MDpkKSttfSkpO2wmJiF0aGlzLnNlbGVjdGlvbk1hcmtlciYmYy5wYW5uaW5nJiZiLnBhbihhLGMucGFubmluZyl9fSxkcm9wOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQsYz10aGlzLmhhc1BpbmNoZWQ7aWYodGhpcy5zZWxlY3Rpb25NYXJrZXIpe3ZhciBkPXt4QXhpczpbXSx5QXhpczpbXSxvcmlnaW5hbEV2ZW50OmEub3JpZ2luYWxFdmVudHx8YX0sZT10aGlzLnNlbGVjdGlvbk1hcmtlcixmPWUuYXR0cj9lLmF0dHIoXCJ4XCIpOlxuZS54LGc9ZS5hdHRyP2UuYXR0cihcInlcIik6ZS55LGg9ZS5hdHRyP2UuYXR0cihcIndpZHRoXCIpOmUud2lkdGgsaT1lLmF0dHI/ZS5hdHRyKFwiaGVpZ2h0XCIpOmUuaGVpZ2h0LGo7aWYodGhpcy5oYXNEcmFnZ2VkfHxjKXEoYi5heGVzLGZ1bmN0aW9uKGIpe2lmKGIuem9vbUVuYWJsZWQpe3ZhciBjPWIuaG9yaXosZT1hLnR5cGU9PT1cInRvdWNoZW5kXCI/Yi5taW5QaXhlbFBhZGRpbmc6MCxtPWIudG9WYWx1ZSgoYz9mOmcpK2UpLGM9Yi50b1ZhbHVlKChjP2YraDpnK2kpLWUpOyFpc05hTihtKSYmIWlzTmFOKGMpJiYoZFtiLmNvbGxdLnB1c2goe2F4aXM6YixtaW46TChtLGMpLG1heDp0KG0sYyl9KSxqPSEwKX19KSxqJiZJKGIsXCJzZWxlY3Rpb25cIixkLGZ1bmN0aW9uKGEpe2Iuem9vbShyKGEsYz97YW5pbWF0aW9uOiExfTpudWxsKSl9KTt0aGlzLnNlbGVjdGlvbk1hcmtlcj10aGlzLnNlbGVjdGlvbk1hcmtlci5kZXN0cm95KCk7YyYmdGhpcy5zY2FsZUdyb3VwcygpfWlmKGIpQihiLmNvbnRhaW5lcixcbntjdXJzb3I6Yi5fY3Vyc29yfSksYi5jYW5jZWxDbGljaz10aGlzLmhhc0RyYWdnZWQ+MTAsYi5tb3VzZUlzRG93bj10aGlzLmhhc0RyYWdnZWQ9dGhpcy5oYXNQaW5jaGVkPSExLHRoaXMucGluY2hEb3duPVtdfSxvbkNvbnRhaW5lck1vdXNlRG93bjpmdW5jdGlvbihhKXthPXRoaXMubm9ybWFsaXplKGEpO2EucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKTt0aGlzLmRyYWdTdGFydChhKX0sb25Eb2N1bWVudE1vdXNlVXA6ZnVuY3Rpb24oYSl7V1twYV0mJldbcGFdLnBvaW50ZXIuZHJvcChhKX0sb25Eb2N1bWVudE1vdXNlTW92ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9dGhpcy5jaGFydFBvc2l0aW9uLGQ9Yi5ob3ZlclNlcmllcyxhPXRoaXMubm9ybWFsaXplKGEsYyk7YyYmZCYmIXRoaXMuaW5DbGFzcyhhLnRhcmdldCxcImhpZ2hjaGFydHMtdHJhY2tlclwiKSYmIWIuaXNJbnNpZGVQbG90KGEuY2hhcnRYLWIucGxvdExlZnQsYS5jaGFydFktYi5wbG90VG9wKSYmXG50aGlzLnJlc2V0KCl9LG9uQ29udGFpbmVyTW91c2VMZWF2ZTpmdW5jdGlvbigpe3ZhciBhPVdbcGFdO2lmKGEpYS5wb2ludGVyLnJlc2V0KCksYS5wb2ludGVyLmNoYXJ0UG9zaXRpb249bnVsbH0sb25Db250YWluZXJNb3VzZU1vdmU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jaGFydDtwYT1iLmluZGV4O2E9dGhpcy5ub3JtYWxpemUoYSk7YS5yZXR1cm5WYWx1ZT0hMTtiLm1vdXNlSXNEb3duPT09XCJtb3VzZWRvd25cIiYmdGhpcy5kcmFnKGEpOyh0aGlzLmluQ2xhc3MoYS50YXJnZXQsXCJoaWdoY2hhcnRzLXRyYWNrZXJcIil8fGIuaXNJbnNpZGVQbG90KGEuY2hhcnRYLWIucGxvdExlZnQsYS5jaGFydFktYi5wbG90VG9wKSkmJiFiLm9wZW5NZW51JiZ0aGlzLnJ1blBvaW50QWN0aW9ucyhhKX0saW5DbGFzczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYzthOyl7aWYoYz1GKGEsXCJjbGFzc1wiKSlpZihjLmluZGV4T2YoYikhPT0tMSlyZXR1cm4hMDtlbHNlIGlmKGMuaW5kZXhPZihcImhpZ2hjaGFydHMtY29udGFpbmVyXCIpIT09XG4tMSlyZXR1cm4hMTthPWEucGFyZW50Tm9kZX19LG9uVHJhY2tlck1vdXNlT3V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQuaG92ZXJTZXJpZXMsYz0oYT1hLnJlbGF0ZWRUYXJnZXR8fGEudG9FbGVtZW50KSYmYS5wb2ludCYmYS5wb2ludC5zZXJpZXM7aWYoYiYmIWIub3B0aW9ucy5zdGlja3lUcmFja2luZyYmIXRoaXMuaW5DbGFzcyhhLFwiaGlnaGNoYXJ0cy10b29sdGlwXCIpJiZjIT09YiliLm9uTW91c2VPdXQoKX0sb25Db250YWluZXJDbGljazpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9Yi5ob3ZlclBvaW50LGQ9Yi5wbG90TGVmdCxlPWIucGxvdFRvcCxhPXRoaXMubm9ybWFsaXplKGEpO2EuY2FuY2VsQnViYmxlPSEwO2IuY2FuY2VsQ2xpY2t8fChjJiZ0aGlzLmluQ2xhc3MoYS50YXJnZXQsXCJoaWdoY2hhcnRzLXRyYWNrZXJcIik/KEkoYy5zZXJpZXMsXCJjbGlja1wiLHIoYSx7cG9pbnQ6Y30pKSxiLmhvdmVyUG9pbnQmJmMuZmlyZVBvaW50RXZlbnQoXCJjbGlja1wiLFxuYSkpOihyKGEsdGhpcy5nZXRDb29yZGluYXRlcyhhKSksYi5pc0luc2lkZVBsb3QoYS5jaGFydFgtZCxhLmNoYXJ0WS1lKSYmSShiLFwiY2xpY2tcIixhKSkpfSxzZXRET01FdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydC5jb250YWluZXI7Yi5vbm1vdXNlZG93bj1mdW5jdGlvbihiKXthLm9uQ29udGFpbmVyTW91c2VEb3duKGIpfTtiLm9ubW91c2Vtb3ZlPWZ1bmN0aW9uKGIpe2Eub25Db250YWluZXJNb3VzZU1vdmUoYil9O2Iub25jbGljaz1mdW5jdGlvbihiKXthLm9uQ29udGFpbmVyQ2xpY2soYil9O04oYixcIm1vdXNlbGVhdmVcIixhLm9uQ29udGFpbmVyTW91c2VMZWF2ZSk7YWI9PT0xJiZOKHgsXCJtb3VzZXVwXCIsYS5vbkRvY3VtZW50TW91c2VVcCk7aWYoJGEpYi5vbnRvdWNoc3RhcnQ9ZnVuY3Rpb24oYil7YS5vbkNvbnRhaW5lclRvdWNoU3RhcnQoYil9LGIub250b3VjaG1vdmU9ZnVuY3Rpb24oYil7YS5vbkNvbnRhaW5lclRvdWNoTW92ZShiKX0sYWI9PT0xJiZcbk4oeCxcInRvdWNoZW5kXCIsYS5vbkRvY3VtZW50VG91Y2hFbmQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE7WCh0aGlzLmNoYXJ0LmNvbnRhaW5lcixcIm1vdXNlbGVhdmVcIix0aGlzLm9uQ29udGFpbmVyTW91c2VMZWF2ZSk7YWJ8fChYKHgsXCJtb3VzZXVwXCIsdGhpcy5vbkRvY3VtZW50TW91c2VVcCksWCh4LFwidG91Y2hlbmRcIix0aGlzLm9uRG9jdW1lbnRUb3VjaEVuZCkpO2NsZWFySW50ZXJ2YWwodGhpcy50b29sdGlwVGltZW91dCk7Zm9yKGEgaW4gdGhpcyl0aGlzW2FdPW51bGx9fTtyKEsuUG9pbnRlci5wcm90b3R5cGUse3BpbmNoVHJhbnNsYXRlOmZ1bmN0aW9uKGEsYixjLGQsZSxmKXsodGhpcy56b29tSG9yfHx0aGlzLnBpbmNoSG9yKSYmdGhpcy5waW5jaFRyYW5zbGF0ZURpcmVjdGlvbighMCxhLGIsYyxkLGUsZik7KHRoaXMuem9vbVZlcnR8fHRoaXMucGluY2hWZXJ0KSYmdGhpcy5waW5jaFRyYW5zbGF0ZURpcmVjdGlvbighMSxhLGIsYyxkLGUsZil9LHBpbmNoVHJhbnNsYXRlRGlyZWN0aW9uOmZ1bmN0aW9uKGEsXG5iLGMsZCxlLGYsZyxoKXt2YXIgaT10aGlzLmNoYXJ0LGo9YT9cInhcIjpcInlcIixrPWE/XCJYXCI6XCJZXCIsbD1cImNoYXJ0XCIrayxuPWE/XCJ3aWR0aFwiOlwiaGVpZ2h0XCIsbT1pW1wicGxvdFwiKyhhP1wiTGVmdFwiOlwiVG9wXCIpXSxvLHAscT1ofHwxLHI9aS5pbnZlcnRlZCxDPWkuYm91bmRzW2E/XCJoXCI6XCJ2XCJdLHQ9Yi5sZW5ndGg9PT0xLHM9YlswXVtsXSx2PWNbMF1bbF0sdT0hdCYmYlsxXVtsXSx3PSF0JiZjWzFdW2xdLHgsYz1mdW5jdGlvbigpeyF0JiZRKHMtdSk+MjAmJihxPWh8fFEodi13KS9RKHMtdSkpO3A9KG0tdikvcStzO289aVtcInBsb3RcIisoYT9cIldpZHRoXCI6XCJIZWlnaHRcIildL3F9O2MoKTtiPXA7YjxDLm1pbj8oYj1DLm1pbix4PSEwKTpiK28+Qy5tYXgmJihiPUMubWF4LW8seD0hMCk7eD8odi09MC44Kih2LWdbal1bMF0pLHR8fCh3LT0wLjgqKHctZ1tqXVsxXSkpLGMoKSk6Z1tqXT1bdix3XTtyfHwoZltqXT1wLW0sZltuXT1vKTtmPXI/MS9xOnE7ZVtuXT1vO2Vbal09YjtkW3I/YT9cInNjYWxlWVwiOlxuXCJzY2FsZVhcIjpcInNjYWxlXCIra109cTtkW1widHJhbnNsYXRlXCIra109ZiptKyh2LWYqcyl9LHBpbmNoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLmNoYXJ0LGQ9Yi5waW5jaERvd24sZT1iLmZvbGxvd1RvdWNoTW92ZSxmPWEudG91Y2hlcyxnPWYubGVuZ3RoLGg9Yi5sYXN0VmFsaWRUb3VjaCxpPWIuaGFzWm9vbSxqPWIuc2VsZWN0aW9uTWFya2VyLGs9e30sbD1nPT09MSYmKGIuaW5DbGFzcyhhLnRhcmdldCxcImhpZ2hjaGFydHMtdHJhY2tlclwiKSYmYy5ydW5UcmFja2VyQ2xpY2t8fGIucnVuQ2hhcnRDbGljayksbj17fTsoaXx8ZSkmJiFsJiZhLnByZXZlbnREZWZhdWx0KCk7VmEoZixmdW5jdGlvbihhKXtyZXR1cm4gYi5ub3JtYWxpemUoYSl9KTtpZihhLnR5cGU9PT1cInRvdWNoc3RhcnRcIilxKGYsZnVuY3Rpb24oYSxiKXtkW2JdPXtjaGFydFg6YS5jaGFydFgsY2hhcnRZOmEuY2hhcnRZfX0pLGgueD1bZFswXS5jaGFydFgsZFsxXSYmZFsxXS5jaGFydFhdLGgueT1bZFswXS5jaGFydFksXG5kWzFdJiZkWzFdLmNoYXJ0WV0scShjLmF4ZXMsZnVuY3Rpb24oYSl7aWYoYS56b29tRW5hYmxlZCl7dmFyIGI9Yy5ib3VuZHNbYS5ob3Jpej9cImhcIjpcInZcIl0sZD1hLm1pblBpeGVsUGFkZGluZyxlPWEudG9QaXhlbHMocChhLm9wdGlvbnMubWluLGEuZGF0YU1pbikpLGY9YS50b1BpeGVscyhwKGEub3B0aW9ucy5tYXgsYS5kYXRhTWF4KSksZz1MKGUsZiksZT10KGUsZik7Yi5taW49TChhLnBvcyxnLWQpO2IubWF4PXQoYS5wb3MrYS5sZW4sZStkKX19KSxiLnJlcz0hMDtlbHNlIGlmKGQubGVuZ3RoKXtpZighailiLnNlbGVjdGlvbk1hcmtlcj1qPXIoe2Rlc3Ryb3k6c2F9LGMucGxvdEJveCk7Yi5waW5jaFRyYW5zbGF0ZShkLGYsayxqLG4saCk7Yi5oYXNQaW5jaGVkPWk7Yi5zY2FsZUdyb3VwcyhrLG4pO2lmKCFpJiZlJiZnPT09MSl0aGlzLnJ1blBvaW50QWN0aW9ucyhiLm5vcm1hbGl6ZShhKSk7ZWxzZSBpZihiLnJlcyliLnJlcz0hMSx0aGlzLnJlc2V0KCExLDApfX0sb25Db250YWluZXJUb3VjaFN0YXJ0OmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcy5jaGFydDtwYT1iLmluZGV4O2EudG91Y2hlcy5sZW5ndGg9PT0xPyhhPXRoaXMubm9ybWFsaXplKGEpLGIuaXNJbnNpZGVQbG90KGEuY2hhcnRYLWIucGxvdExlZnQsYS5jaGFydFktYi5wbG90VG9wKT8odGhpcy5ydW5Qb2ludEFjdGlvbnMoYSksdGhpcy5waW5jaChhKSk6dGhpcy5yZXNldCgpKTphLnRvdWNoZXMubGVuZ3RoPT09MiYmdGhpcy5waW5jaChhKX0sb25Db250YWluZXJUb3VjaE1vdmU6ZnVuY3Rpb24oYSl7KGEudG91Y2hlcy5sZW5ndGg9PT0xfHxhLnRvdWNoZXMubGVuZ3RoPT09MikmJnRoaXMucGluY2goYSl9LG9uRG9jdW1lbnRUb3VjaEVuZDpmdW5jdGlvbihhKXtXW3BhXSYmV1twYV0ucG9pbnRlci5kcm9wKGEpfX0pO2lmKEcuUG9pbnRlckV2ZW50fHxHLk1TUG9pbnRlckV2ZW50KXt2YXIgdWE9e30semI9ISFHLlBvaW50ZXJFdmVudCxYYj1mdW5jdGlvbigpe3ZhciBhLGI9W107Yi5pdGVtPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzW2FdfTtmb3IoYSBpbiB1YSl1YS5oYXNPd25Qcm9wZXJ0eShhKSYmXG5iLnB1c2goe3BhZ2VYOnVhW2FdLnBhZ2VYLHBhZ2VZOnVhW2FdLnBhZ2VZLHRhcmdldDp1YVthXS50YXJnZXR9KTtyZXR1cm4gYn0sQWI9ZnVuY3Rpb24oYSxiLGMsZCl7YT1hLm9yaWdpbmFsRXZlbnR8fGE7aWYoKGEucG9pbnRlclR5cGU9PT1cInRvdWNoXCJ8fGEucG9pbnRlclR5cGU9PT1hLk1TUE9JTlRFUl9UWVBFX1RPVUNIKSYmV1twYV0pZChhKSxkPVdbcGFdLnBvaW50ZXIsZFtiXSh7dHlwZTpjLHRhcmdldDphLmN1cnJlbnRUYXJnZXQscHJldmVudERlZmF1bHQ6c2EsdG91Y2hlczpYYigpfSl9O3IoV2EucHJvdG90eXBlLHtvbkNvbnRhaW5lclBvaW50ZXJEb3duOmZ1bmN0aW9uKGEpe0FiKGEsXCJvbkNvbnRhaW5lclRvdWNoU3RhcnRcIixcInRvdWNoc3RhcnRcIixmdW5jdGlvbihhKXt1YVthLnBvaW50ZXJJZF09e3BhZ2VYOmEucGFnZVgscGFnZVk6YS5wYWdlWSx0YXJnZXQ6YS5jdXJyZW50VGFyZ2V0fX0pfSxvbkNvbnRhaW5lclBvaW50ZXJNb3ZlOmZ1bmN0aW9uKGEpe0FiKGEsXG5cIm9uQ29udGFpbmVyVG91Y2hNb3ZlXCIsXCJ0b3VjaG1vdmVcIixmdW5jdGlvbihhKXt1YVthLnBvaW50ZXJJZF09e3BhZ2VYOmEucGFnZVgscGFnZVk6YS5wYWdlWX07aWYoIXVhW2EucG9pbnRlcklkXS50YXJnZXQpdWFbYS5wb2ludGVySWRdLnRhcmdldD1hLmN1cnJlbnRUYXJnZXR9KX0sb25Eb2N1bWVudFBvaW50ZXJVcDpmdW5jdGlvbihhKXtBYihhLFwib25Db250YWluZXJUb3VjaEVuZFwiLFwidG91Y2hlbmRcIixmdW5jdGlvbihhKXtkZWxldGUgdWFbYS5wb2ludGVySWRdfSl9LGJhdGNoTVNFdmVudHM6ZnVuY3Rpb24oYSl7YSh0aGlzLmNoYXJ0LmNvbnRhaW5lcix6Yj9cInBvaW50ZXJkb3duXCI6XCJNU1BvaW50ZXJEb3duXCIsdGhpcy5vbkNvbnRhaW5lclBvaW50ZXJEb3duKTthKHRoaXMuY2hhcnQuY29udGFpbmVyLHpiP1wicG9pbnRlcm1vdmVcIjpcIk1TUG9pbnRlck1vdmVcIix0aGlzLm9uQ29udGFpbmVyUG9pbnRlck1vdmUpO2EoeCx6Yj9cInBvaW50ZXJ1cFwiOlwiTVNQb2ludGVyVXBcIix0aGlzLm9uRG9jdW1lbnRQb2ludGVyVXApfX0pO1xuTmEoV2EucHJvdG90eXBlLFwiaW5pdFwiLGZ1bmN0aW9uKGEsYixjKXthLmNhbGwodGhpcyxiLGMpOyh0aGlzLmhhc1pvb218fHRoaXMuZm9sbG93VG91Y2hNb3ZlKSYmQihiLmNvbnRhaW5lcix7XCItbXMtdG91Y2gtYWN0aW9uXCI6UCxcInRvdWNoLWFjdGlvblwiOlB9KX0pO05hKFdhLnByb3RvdHlwZSxcInNldERPTUV2ZW50c1wiLGZ1bmN0aW9uKGEpe2EuYXBwbHkodGhpcyk7KHRoaXMuaGFzWm9vbXx8dGhpcy5mb2xsb3dUb3VjaE1vdmUpJiZ0aGlzLmJhdGNoTVNFdmVudHMoTil9KTtOYShXYS5wcm90b3R5cGUsXCJkZXN0cm95XCIsZnVuY3Rpb24oYSl7dGhpcy5iYXRjaE1TRXZlbnRzKFgpO2EuY2FsbCh0aGlzKX0pfXZhciBsYj1LLkxlZ2VuZD1mdW5jdGlvbihhLGIpe3RoaXMuaW5pdChhLGIpfTtsYi5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yi5pdGVtU3R5bGUsZT1wKGIucGFkZGluZyw4KSxmPWIuaXRlbU1hcmdpblRvcHx8MDt0aGlzLm9wdGlvbnM9YjtcbmlmKGIuZW5hYmxlZCljLml0ZW1TdHlsZT1kLGMuaXRlbUhpZGRlblN0eWxlPXcoZCxiLml0ZW1IaWRkZW5TdHlsZSksYy5pdGVtTWFyZ2luVG9wPWYsYy5wYWRkaW5nPWUsYy5pbml0aWFsSXRlbVg9ZSxjLmluaXRpYWxJdGVtWT1lLTUsYy5tYXhJdGVtV2lkdGg9MCxjLmNoYXJ0PWEsYy5pdGVtSGVpZ2h0PTAsYy5sYXN0TGluZUhlaWdodD0wLGMuc3ltYm9sV2lkdGg9cChiLnN5bWJvbFdpZHRoLDE2KSxjLnBhZ2VzPVtdLGMucmVuZGVyKCksTihjLmNoYXJ0LFwiZW5kUmVzaXplXCIsZnVuY3Rpb24oKXtjLnBvc2l0aW9uQ2hlY2tib3hlcygpfSl9LGNvbG9yaXplSXRlbTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMub3B0aW9ucyxkPWEubGVnZW5kSXRlbSxlPWEubGVnZW5kTGluZSxmPWEubGVnZW5kU3ltYm9sLGc9dGhpcy5pdGVtSGlkZGVuU3R5bGUuY29sb3IsYz1iP2MuaXRlbVN0eWxlLmNvbG9yOmcsaD1iP2EubGVnZW5kQ29sb3J8fGEuY29sb3J8fFwiI0NDQ1wiOmcsZz1hLm9wdGlvbnMmJlxuYS5vcHRpb25zLm1hcmtlcixpPXtmaWxsOmh9LGo7ZCYmZC5jc3Moe2ZpbGw6Yyxjb2xvcjpjfSk7ZSYmZS5hdHRyKHtzdHJva2U6aH0pO2lmKGYpe2lmKGcmJmYuaXNNYXJrZXIpZm9yKGogaW4gaS5zdHJva2U9aCxnPWEuY29udmVydEF0dHJpYnMoZyksZylkPWdbal0sZCE9PXUmJihpW2pdPWQpO2YuYXR0cihpKX19LHBvc2l0aW9uSXRlbTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz1iLnN5bWJvbFBhZGRpbmcsYj0hYi5ydGwsZD1hLl9sZWdlbmRJdGVtUG9zLGU9ZFswXSxkPWRbMV0sZj1hLmNoZWNrYm94O2EubGVnZW5kR3JvdXAmJmEubGVnZW5kR3JvdXAudHJhbnNsYXRlKGI/ZTp0aGlzLmxlZ2VuZFdpZHRoLWUtMipjLTQsZCk7aWYoZilmLng9ZSxmLnk9ZH0sZGVzdHJveUl0ZW06ZnVuY3Rpb24oYSl7dmFyIGI9YS5jaGVja2JveDtxKFtcImxlZ2VuZEl0ZW1cIixcImxlZ2VuZExpbmVcIixcImxlZ2VuZFN5bWJvbFwiLFwibGVnZW5kR3JvdXBcIl0sZnVuY3Rpb24oYil7YVtiXSYmXG4oYVtiXT1hW2JdLmRlc3Ryb3koKSl9KTtiJiZRYShhLmNoZWNrYm94KX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ3JvdXAsYj10aGlzLmJveDtpZihiKXRoaXMuYm94PWIuZGVzdHJveSgpO2lmKGEpdGhpcy5ncm91cD1hLmRlc3Ryb3koKX0scG9zaXRpb25DaGVja2JveGVzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZ3JvdXAuYWxpZ25BdHRyLGMsZD10aGlzLmNsaXBIZWlnaHR8fHRoaXMubGVnZW5kSGVpZ2h0O2lmKGIpYz1iLnRyYW5zbGF0ZVkscSh0aGlzLmFsbEl0ZW1zLGZ1bmN0aW9uKGUpe3ZhciBmPWUuY2hlY2tib3gsZztmJiYoZz1jK2YueSsoYXx8MCkrMyxCKGYse2xlZnQ6Yi50cmFuc2xhdGVYK2UuY2hlY2tib3hPZmZzZXQrZi54LTIwK1wicHhcIix0b3A6ZytcInB4XCIsZGlzcGxheTpnPmMtNiYmZzxjK2QtNj9cIlwiOlB9KSl9KX0scmVuZGVyVGl0bGU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhZGRpbmcsYj10aGlzLm9wdGlvbnMudGl0bGUsYz0wO2lmKGIudGV4dCl7aWYoIXRoaXMudGl0bGUpdGhpcy50aXRsZT1cbnRoaXMuY2hhcnQucmVuZGVyZXIubGFiZWwoYi50ZXh0LGEtMyxhLTQsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLFwibGVnZW5kLXRpdGxlXCIpLmF0dHIoe3pJbmRleDoxfSkuY3NzKGIuc3R5bGUpLmFkZCh0aGlzLmdyb3VwKTthPXRoaXMudGl0bGUuZ2V0QkJveCgpO2M9YS5oZWlnaHQ7dGhpcy5vZmZzZXRXaWR0aD1hLndpZHRoO3RoaXMuY29udGVudEdyb3VwLmF0dHIoe3RyYW5zbGF0ZVk6Y30pfXRoaXMudGl0bGVIZWlnaHQ9Y30scmVuZGVySXRlbTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9Yi5yZW5kZXJlcixkPXRoaXMub3B0aW9ucyxlPWQubGF5b3V0PT09XCJob3Jpem9udGFsXCIsZj10aGlzLnN5bWJvbFdpZHRoLGc9ZC5zeW1ib2xQYWRkaW5nLGg9dGhpcy5pdGVtU3R5bGUsaT10aGlzLml0ZW1IaWRkZW5TdHlsZSxqPXRoaXMucGFkZGluZyxrPWU/cChkLml0ZW1EaXN0YW5jZSwyMCk6MCxsPSFkLnJ0bCxuPWQud2lkdGgsbT1kLml0ZW1NYXJnaW5Cb3R0b218fDAsXG5vPXRoaXMuaXRlbU1hcmdpblRvcCxxPXRoaXMuaW5pdGlhbEl0ZW1YLHI9YS5sZWdlbmRJdGVtLHM9YS5zZXJpZXMmJmEuc2VyaWVzLmRyYXdMZWdlbmRTeW1ib2w/YS5zZXJpZXM6YSxDPXMub3B0aW9ucyxDPXRoaXMuY3JlYXRlQ2hlY2tib3hGb3JJdGVtJiZDJiZDLnNob3dDaGVja2JveCx1PWQudXNlSFRNTDtpZighcil7YS5sZWdlbmRHcm91cD1jLmcoXCJsZWdlbmQtaXRlbVwiKS5hdHRyKHt6SW5kZXg6MX0pLmFkZCh0aGlzLnNjcm9sbEdyb3VwKTthLmxlZ2VuZEl0ZW09cj1jLnRleHQoZC5sYWJlbEZvcm1hdD9KYShkLmxhYmVsRm9ybWF0LGEpOmQubGFiZWxGb3JtYXR0ZXIuY2FsbChhKSxsP2YrZzotZyx0aGlzLmJhc2VsaW5lfHwwLHUpLmNzcyh3KGEudmlzaWJsZT9oOmkpKS5hdHRyKHthbGlnbjpsP1wibGVmdFwiOlwicmlnaHRcIix6SW5kZXg6Mn0pLmFkZChhLmxlZ2VuZEdyb3VwKTtpZighdGhpcy5iYXNlbGluZSl0aGlzLmJhc2VsaW5lPWMuZm9udE1ldHJpY3MoaC5mb250U2l6ZSxcbnIpLmYrMytvLHIuYXR0cihcInlcIix0aGlzLmJhc2VsaW5lKTtzLmRyYXdMZWdlbmRTeW1ib2wodGhpcyxhKTt0aGlzLnNldEl0ZW1FdmVudHMmJnRoaXMuc2V0SXRlbUV2ZW50cyhhLHIsdSxoLGkpO3RoaXMuY29sb3JpemVJdGVtKGEsYS52aXNpYmxlKTtDJiZ0aGlzLmNyZWF0ZUNoZWNrYm94Rm9ySXRlbShhKX1jPXIuZ2V0QkJveCgpO2Y9YS5jaGVja2JveE9mZnNldD1kLml0ZW1XaWR0aHx8YS5sZWdlbmRJdGVtV2lkdGh8fGYrZytjLndpZHRoK2srKEM/MjA6MCk7dGhpcy5pdGVtSGVpZ2h0PWc9dihhLmxlZ2VuZEl0ZW1IZWlnaHR8fGMuaGVpZ2h0KTtpZihlJiZ0aGlzLml0ZW1YLXErZj4obnx8Yi5jaGFydFdpZHRoLTIqai1xLWQueCkpdGhpcy5pdGVtWD1xLHRoaXMuaXRlbVkrPW8rdGhpcy5sYXN0TGluZUhlaWdodCttLHRoaXMubGFzdExpbmVIZWlnaHQ9MDt0aGlzLm1heEl0ZW1XaWR0aD10KHRoaXMubWF4SXRlbVdpZHRoLGYpO3RoaXMubGFzdEl0ZW1ZPW8rdGhpcy5pdGVtWStcbm07dGhpcy5sYXN0TGluZUhlaWdodD10KGcsdGhpcy5sYXN0TGluZUhlaWdodCk7YS5fbGVnZW5kSXRlbVBvcz1bdGhpcy5pdGVtWCx0aGlzLml0ZW1ZXTtlP3RoaXMuaXRlbVgrPWY6KHRoaXMuaXRlbVkrPW8rZyttLHRoaXMubGFzdExpbmVIZWlnaHQ9Zyk7dGhpcy5vZmZzZXRXaWR0aD1ufHx0KChlP3RoaXMuaXRlbVgtcS1rOmYpK2osdGhpcy5vZmZzZXRXaWR0aCl9LGdldEFsbEl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGE9W107cSh0aGlzLmNoYXJ0LnNlcmllcyxmdW5jdGlvbihiKXt2YXIgYz1iLm9wdGlvbnM7aWYocChjLnNob3dJbkxlZ2VuZCwhcyhjLmxpbmtlZFRvKT91OiExLCEwKSlhPWEuY29uY2F0KGIubGVnZW5kSXRlbXN8fChjLmxlZ2VuZFR5cGU9PT1cInBvaW50XCI/Yi5kYXRhOmIpKX0pO3JldHVybiBhfSxyZW5kZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydCxjPWIucmVuZGVyZXIsZD1hLmdyb3VwLGUsZixnLGgsaT1hLmJveCxqPWEub3B0aW9ucyxrPWEucGFkZGluZyxcbmw9ai5ib3JkZXJXaWR0aCxuPWouYmFja2dyb3VuZENvbG9yO2EuaXRlbVg9YS5pbml0aWFsSXRlbVg7YS5pdGVtWT1hLmluaXRpYWxJdGVtWTthLm9mZnNldFdpZHRoPTA7YS5sYXN0SXRlbVk9MDtpZighZClhLmdyb3VwPWQ9Yy5nKFwibGVnZW5kXCIpLmF0dHIoe3pJbmRleDo3fSkuYWRkKCksYS5jb250ZW50R3JvdXA9Yy5nKCkuYXR0cih7ekluZGV4OjF9KS5hZGQoZCksYS5zY3JvbGxHcm91cD1jLmcoKS5hZGQoYS5jb250ZW50R3JvdXApO2EucmVuZGVyVGl0bGUoKTtlPWEuZ2V0QWxsSXRlbXMoKTtvYihlLGZ1bmN0aW9uKGEsYil7cmV0dXJuKGEub3B0aW9ucyYmYS5vcHRpb25zLmxlZ2VuZEluZGV4fHwwKS0oYi5vcHRpb25zJiZiLm9wdGlvbnMubGVnZW5kSW5kZXh8fDApfSk7ai5yZXZlcnNlZCYmZS5yZXZlcnNlKCk7YS5hbGxJdGVtcz1lO2EuZGlzcGxheT1mPSEhZS5sZW5ndGg7cShlLGZ1bmN0aW9uKGIpe2EucmVuZGVySXRlbShiKX0pO2c9ai53aWR0aHx8YS5vZmZzZXRXaWR0aDtcbmg9YS5sYXN0SXRlbVkrYS5sYXN0TGluZUhlaWdodCthLnRpdGxlSGVpZ2h0O2g9YS5oYW5kbGVPdmVyZmxvdyhoKTtpZihsfHxuKXtnKz1rO2grPWs7aWYoaSl7aWYoZz4wJiZoPjApaVtpLmlzTmV3P1wiYXR0clwiOlwiYW5pbWF0ZVwiXShpLmNyaXNwKHt3aWR0aDpnLGhlaWdodDpofSkpLGkuaXNOZXc9ITF9ZWxzZSBhLmJveD1pPWMucmVjdCgwLDAsZyxoLGouYm9yZGVyUmFkaXVzLGx8fDApLmF0dHIoe3N0cm9rZTpqLmJvcmRlckNvbG9yLFwic3Ryb2tlLXdpZHRoXCI6bHx8MCxmaWxsOm58fFB9KS5hZGQoZCkuc2hhZG93KGouc2hhZG93KSxpLmlzTmV3PSEwO2lbZj9cInNob3dcIjpcImhpZGVcIl0oKX1hLmxlZ2VuZFdpZHRoPWc7YS5sZWdlbmRIZWlnaHQ9aDtxKGUsZnVuY3Rpb24oYil7YS5wb3NpdGlvbkl0ZW0oYil9KTtmJiZkLmFsaWduKHIoe3dpZHRoOmcsaGVpZ2h0Omh9LGopLCEwLFwic3BhY2luZ0JveFwiKTtiLmlzUmVzaXppbmd8fHRoaXMucG9zaXRpb25DaGVja2JveGVzKCl9LGhhbmRsZU92ZXJmbG93OmZ1bmN0aW9uKGEpe3ZhciBiPVxudGhpcyxjPXRoaXMuY2hhcnQsZD1jLnJlbmRlcmVyLGU9dGhpcy5vcHRpb25zLGY9ZS55LGY9Yy5zcGFjaW5nQm94LmhlaWdodCsoZS52ZXJ0aWNhbEFsaWduPT09XCJ0b3BcIj8tZjpmKS10aGlzLnBhZGRpbmcsZz1lLm1heEhlaWdodCxoLGk9dGhpcy5jbGlwUmVjdCxqPWUubmF2aWdhdGlvbixrPXAoai5hbmltYXRpb24sITApLGw9ai5hcnJvd1NpemV8fDEyLG49dGhpcy5uYXYsbT10aGlzLnBhZ2VzLG8scj10aGlzLmFsbEl0ZW1zO2UubGF5b3V0PT09XCJob3Jpem9udGFsXCImJihmLz0yKTtnJiYoZj1MKGYsZykpO20ubGVuZ3RoPTA7aWYoYT5mJiYhZS51c2VIVE1MKXt0aGlzLmNsaXBIZWlnaHQ9aD10KGYtMjAtdGhpcy50aXRsZUhlaWdodC10aGlzLnBhZGRpbmcsMCk7dGhpcy5jdXJyZW50UGFnZT1wKHRoaXMuY3VycmVudFBhZ2UsMSk7dGhpcy5mdWxsSGVpZ2h0PWE7cShyLGZ1bmN0aW9uKGEsYil7dmFyIGM9YS5fbGVnZW5kSXRlbVBvc1sxXSxkPXYoYS5sZWdlbmRJdGVtLmdldEJCb3goKS5oZWlnaHQpLFxuZT1tLmxlbmd0aDtpZighZXx8Yy1tW2UtMV0+aCYmKG98fGMpIT09bVtlLTFdKW0ucHVzaChvfHxjKSxlKys7Yj09PXIubGVuZ3RoLTEmJmMrZC1tW2UtMV0+aCYmbS5wdXNoKGMpO2MhPT1vJiYobz1jKX0pO2lmKCFpKWk9Yi5jbGlwUmVjdD1kLmNsaXBSZWN0KDAsdGhpcy5wYWRkaW5nLDk5OTksMCksYi5jb250ZW50R3JvdXAuY2xpcChpKTtpLmF0dHIoe2hlaWdodDpofSk7aWYoIW4pdGhpcy5uYXY9bj1kLmcoKS5hdHRyKHt6SW5kZXg6MX0pLmFkZCh0aGlzLmdyb3VwKSx0aGlzLnVwPWQuc3ltYm9sKFwidHJpYW5nbGVcIiwwLDAsbCxsKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtiLnNjcm9sbCgtMSxrKX0pLmFkZChuKSx0aGlzLnBhZ2VyPWQudGV4dChcIlwiLDE1LDEwKS5jc3Moai5zdHlsZSkuYWRkKG4pLHRoaXMuZG93bj1kLnN5bWJvbChcInRyaWFuZ2xlLWRvd25cIiwwLDAsbCxsKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtiLnNjcm9sbCgxLGspfSkuYWRkKG4pO2Iuc2Nyb2xsKDApO1xuYT1mfWVsc2UgaWYobilpLmF0dHIoe2hlaWdodDpjLmNoYXJ0SGVpZ2h0fSksbi5oaWRlKCksdGhpcy5zY3JvbGxHcm91cC5hdHRyKHt0cmFuc2xhdGVZOjF9KSx0aGlzLmNsaXBIZWlnaHQ9MDtyZXR1cm4gYX0sc2Nyb2xsOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5wYWdlcyxkPWMubGVuZ3RoLGU9dGhpcy5jdXJyZW50UGFnZSthLGY9dGhpcy5jbGlwSGVpZ2h0LGc9dGhpcy5vcHRpb25zLm5hdmlnYXRpb24saD1nLmFjdGl2ZUNvbG9yLGc9Zy5pbmFjdGl2ZUNvbG9yLGk9dGhpcy5wYWdlcixqPXRoaXMucGFkZGluZztlPmQmJihlPWQpO2lmKGU+MCliIT09dSYmUmEoYix0aGlzLmNoYXJ0KSx0aGlzLm5hdi5hdHRyKHt0cmFuc2xhdGVYOmosdHJhbnNsYXRlWTpmK3RoaXMucGFkZGluZys3K3RoaXMudGl0bGVIZWlnaHQsdmlzaWJpbGl0eTpcInZpc2libGVcIn0pLHRoaXMudXAuYXR0cih7ZmlsbDplPT09MT9nOmh9KS5jc3Moe2N1cnNvcjplPT09MT9cImRlZmF1bHRcIjpcInBvaW50ZXJcIn0pLFxuaS5hdHRyKHt0ZXh0OmUrXCIvXCIrZH0pLHRoaXMuZG93bi5hdHRyKHt4OjE4K3RoaXMucGFnZXIuZ2V0QkJveCgpLndpZHRoLGZpbGw6ZT09PWQ/ZzpofSkuY3NzKHtjdXJzb3I6ZT09PWQ/XCJkZWZhdWx0XCI6XCJwb2ludGVyXCJ9KSxjPS1jW2UtMV0rdGhpcy5pbml0aWFsSXRlbVksdGhpcy5zY3JvbGxHcm91cC5hbmltYXRlKHt0cmFuc2xhdGVZOmN9KSx0aGlzLmN1cnJlbnRQYWdlPWUsdGhpcy5wb3NpdGlvbkNoZWNrYm94ZXMoYyl9fTtNPUsuTGVnZW5kU3ltYm9sTWl4aW49e2RyYXdSZWN0YW5nbGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLm9wdGlvbnMuc3ltYm9sSGVpZ2h0fHwxMjtiLmxlZ2VuZFN5bWJvbD10aGlzLmNoYXJ0LnJlbmRlcmVyLnJlY3QoMCxhLmJhc2VsaW5lLTUtYy8yLGEuc3ltYm9sV2lkdGgsYyxhLm9wdGlvbnMuc3ltYm9sUmFkaXVzfHwwKS5hdHRyKHt6SW5kZXg6M30pLmFkZChiLmxlZ2VuZEdyb3VwKX0sZHJhd0xpbmVNYXJrZXI6ZnVuY3Rpb24oYSl7dmFyIGI9XG50aGlzLm9wdGlvbnMsYz1iLm1hcmtlcixkO2Q9YS5zeW1ib2xXaWR0aDt2YXIgZT10aGlzLmNoYXJ0LnJlbmRlcmVyLGY9dGhpcy5sZWdlbmRHcm91cCxhPWEuYmFzZWxpbmUtdihlLmZvbnRNZXRyaWNzKGEub3B0aW9ucy5pdGVtU3R5bGUuZm9udFNpemUsdGhpcy5sZWdlbmRJdGVtKS5iKjAuMyksZztpZihiLmxpbmVXaWR0aCl7Zz17XCJzdHJva2Utd2lkdGhcIjpiLmxpbmVXaWR0aH07aWYoYi5kYXNoU3R5bGUpZy5kYXNoc3R5bGU9Yi5kYXNoU3R5bGU7dGhpcy5sZWdlbmRMaW5lPWUucGF0aChbXCJNXCIsMCxhLFwiTFwiLGQsYV0pLmF0dHIoZykuYWRkKGYpfWlmKGMmJmMuZW5hYmxlZCE9PSExKWI9Yy5yYWRpdXMsdGhpcy5sZWdlbmRTeW1ib2w9ZD1lLnN5bWJvbCh0aGlzLnN5bWJvbCxkLzItYixhLWIsMipiLDIqYikuYWRkKGYpLGQuaXNNYXJrZXI9ITB9fTsoL1RyaWRlbnRcXC83XFwuMC8udGVzdCh3YSl8fFVhKSYmTmEobGIucHJvdG90eXBlLFwicG9zaXRpb25JdGVtXCIsZnVuY3Rpb24oYSxcbmIpe3ZhciBjPXRoaXMsZD1mdW5jdGlvbigpe2IuX2xlZ2VuZEl0ZW1Qb3MmJmEuY2FsbChjLGIpfTtkKCk7c2V0VGltZW91dChkKX0pO1lhLnByb3RvdHlwZT17aW5pdDpmdW5jdGlvbihhLGIpe3ZhciBjLGQ9YS5zZXJpZXM7YS5zZXJpZXM9bnVsbDtjPXcoRSxhKTtjLnNlcmllcz1hLnNlcmllcz1kO3RoaXMudXNlck9wdGlvbnM9YTtkPWMuY2hhcnQ7dGhpcy5tYXJnaW49dGhpcy5zcGxhc2hBcnJheShcIm1hcmdpblwiLGQpO3RoaXMuc3BhY2luZz10aGlzLnNwbGFzaEFycmF5KFwic3BhY2luZ1wiLGQpO3ZhciBlPWQuZXZlbnRzO3RoaXMuYm91bmRzPXtoOnt9LHY6e319O3RoaXMuY2FsbGJhY2s9Yjt0aGlzLmlzUmVzaXppbmc9MDt0aGlzLm9wdGlvbnM9Yzt0aGlzLmF4ZXM9W107dGhpcy5zZXJpZXM9W107dGhpcy5oYXNDYXJ0ZXNpYW5TZXJpZXM9ZC5zaG93QXhlczt2YXIgZj10aGlzLGc7Zi5pbmRleD1XLmxlbmd0aDtXLnB1c2goZik7YWIrKztkLnJlZmxvdyE9PSExJiZOKGYsXCJsb2FkXCIsXG5mdW5jdGlvbigpe2YuaW5pdFJlZmxvdygpfSk7aWYoZSlmb3IoZyBpbiBlKU4oZixnLGVbZ10pO2YueEF4aXM9W107Zi55QXhpcz1bXTtmLmFuaW1hdGlvbj1nYT8hMTpwKGQuYW5pbWF0aW9uLCEwKTtmLnBvaW50Q291bnQ9Zi5jb2xvckNvdW50ZXI9Zi5zeW1ib2xDb3VudGVyPTA7Zi5maXJzdFJlbmRlcigpfSxpbml0U2VyaWVzOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucy5jaGFydDsoYj1IW2EudHlwZXx8Yi50eXBlfHxiLmRlZmF1bHRTZXJpZXNUeXBlXSl8fGhhKDE3LCEwKTtiPW5ldyBiO2IuaW5pdCh0aGlzLGEpO3JldHVybiBifSxpc0luc2lkZVBsb3Q6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWM/YjphLGE9Yz9hOmI7cmV0dXJuIGQ+PTAmJmQ8PXRoaXMucGxvdFdpZHRoJiZhPj0wJiZhPD10aGlzLnBsb3RIZWlnaHR9LGFkanVzdFRpY2tBbW91bnRzOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmNoYXJ0LmFsaWduVGlja3MhPT0hMSYmcSh0aGlzLmF4ZXMsZnVuY3Rpb24oYSl7YS5hZGp1c3RUaWNrQW1vdW50KCl9KTtcbnRoaXMubWF4VGlja3M9bnVsbH0scmVkcmF3OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXhlcyxjPXRoaXMuc2VyaWVzLGQ9dGhpcy5wb2ludGVyLGU9dGhpcy5sZWdlbmQsZj10aGlzLmlzRGlydHlMZWdlbmQsZyxoLGk9dGhpcy5oYXNDYXJ0ZXNpYW5TZXJpZXMsaj10aGlzLmlzRGlydHlCb3gsaz1jLmxlbmd0aCxsPWssbj10aGlzLnJlbmRlcmVyLG09bi5pc0hpZGRlbigpLG89W107UmEoYSx0aGlzKTttJiZ0aGlzLmNsb25lUmVuZGVyVG8oKTtmb3IodGhpcy5sYXlPdXRUaXRsZXMoKTtsLS07KWlmKGE9Y1tsXSxhLm9wdGlvbnMuc3RhY2tpbmcmJihnPSEwLGEuaXNEaXJ0eSkpe2g9ITA7YnJlYWt9aWYoaClmb3IobD1rO2wtLTspaWYoYT1jW2xdLGEub3B0aW9ucy5zdGFja2luZylhLmlzRGlydHk9ITA7cShjLGZ1bmN0aW9uKGEpe2EuaXNEaXJ0eSYmYS5vcHRpb25zLmxlZ2VuZFR5cGU9PT1cInBvaW50XCImJihmPSEwKX0pO2lmKGYmJmUub3B0aW9ucy5lbmFibGVkKWUucmVuZGVyKCksXG50aGlzLmlzRGlydHlMZWdlbmQ9ITE7ZyYmdGhpcy5nZXRTdGFja3MoKTtpZihpKXtpZighdGhpcy5pc1Jlc2l6aW5nKXRoaXMubWF4VGlja3M9bnVsbCxxKGIsZnVuY3Rpb24oYSl7YS5zZXRTY2FsZSgpfSk7dGhpcy5hZGp1c3RUaWNrQW1vdW50cygpfXRoaXMuZ2V0TWFyZ2lucygpO2kmJihxKGIsZnVuY3Rpb24oYSl7YS5pc0RpcnR5JiYoaj0hMCl9KSxxKGIsZnVuY3Rpb24oYSl7aWYoYS5pc0RpcnR5RXh0cmVtZXMpYS5pc0RpcnR5RXh0cmVtZXM9ITEsby5wdXNoKGZ1bmN0aW9uKCl7SShhLFwiYWZ0ZXJTZXRFeHRyZW1lc1wiLHIoYS5ldmVudEFyZ3MsYS5nZXRFeHRyZW1lcygpKSk7ZGVsZXRlIGEuZXZlbnRBcmdzfSk7KGp8fGcpJiZhLnJlZHJhdygpfSkpO2omJnRoaXMuZHJhd0NoYXJ0Qm94KCk7cShjLGZ1bmN0aW9uKGEpe2EuaXNEaXJ0eSYmYS52aXNpYmxlJiYoIWEuaXNDYXJ0ZXNpYW58fGEueEF4aXMpJiZhLnJlZHJhdygpfSk7ZCYmZC5yZXNldCghMCk7bi5kcmF3KCk7SSh0aGlzLFxuXCJyZWRyYXdcIik7bSYmdGhpcy5jbG9uZVJlbmRlclRvKCEwKTtxKG8sZnVuY3Rpb24oYSl7YS5jYWxsKCl9KX0sZ2V0OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYXhlcyxjPXRoaXMuc2VyaWVzLGQsZTtmb3IoZD0wO2Q8Yi5sZW5ndGg7ZCsrKWlmKGJbZF0ub3B0aW9ucy5pZD09PWEpcmV0dXJuIGJbZF07Zm9yKGQ9MDtkPGMubGVuZ3RoO2QrKylpZihjW2RdLm9wdGlvbnMuaWQ9PT1hKXJldHVybiBjW2RdO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspe2U9Y1tkXS5wb2ludHN8fFtdO2ZvcihiPTA7YjxlLmxlbmd0aDtiKyspaWYoZVtiXS5pZD09PWEpcmV0dXJuIGVbYl19cmV0dXJuIG51bGx9LGdldEF4ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5vcHRpb25zLGM9Yi54QXhpcz1yYShiLnhBeGlzfHx7fSksYj1iLnlBeGlzPXJhKGIueUF4aXN8fHt9KTtxKGMsZnVuY3Rpb24oYSxiKXthLmluZGV4PWI7YS5pc1g9ITB9KTtxKGIsZnVuY3Rpb24oYSxiKXthLmluZGV4PWJ9KTtcbmM9Yy5jb25jYXQoYik7cShjLGZ1bmN0aW9uKGIpe25ldyBuYShhLGIpfSk7YS5hZGp1c3RUaWNrQW1vdW50cygpfSxnZXRTZWxlY3RlZFBvaW50czpmdW5jdGlvbigpe3ZhciBhPVtdO3EodGhpcy5zZXJpZXMsZnVuY3Rpb24oYil7YT1hLmNvbmNhdCh3YihiLnBvaW50c3x8W10sZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2VsZWN0ZWR9KSl9KTtyZXR1cm4gYX0sZ2V0U2VsZWN0ZWRTZXJpZXM6ZnVuY3Rpb24oKXtyZXR1cm4gd2IodGhpcy5zZXJpZXMsZnVuY3Rpb24oYSl7cmV0dXJuIGEuc2VsZWN0ZWR9KX0sZ2V0U3RhY2tzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztxKGEueUF4aXMsZnVuY3Rpb24oYSl7aWYoYS5zdGFja3MmJmEuaGFzVmlzaWJsZVNlcmllcylhLm9sZFN0YWNrcz1hLnN0YWNrc30pO3EoYS5zZXJpZXMsZnVuY3Rpb24oYil7aWYoYi5vcHRpb25zLnN0YWNraW5nJiYoYi52aXNpYmxlPT09ITB8fGEub3B0aW9ucy5jaGFydC5pZ25vcmVIaWRkZW5TZXJpZXM9PT0hMSkpYi5zdGFja0tleT1cbmIudHlwZStwKGIub3B0aW9ucy5zdGFjayxcIlwiKX0pfSxzZXRUaXRsZTpmdW5jdGlvbihhLGIsYyl7dmFyIGc7dmFyIGQ9dGhpcyxlPWQub3B0aW9ucyxmO2Y9ZS50aXRsZT13KGUudGl0bGUsYSk7Zz1lLnN1YnRpdGxlPXcoZS5zdWJ0aXRsZSxiKSxlPWc7cShbW1widGl0bGVcIixhLGZdLFtcInN1YnRpdGxlXCIsYixlXV0sZnVuY3Rpb24oYSl7dmFyIGI9YVswXSxjPWRbYl0sZT1hWzFdLGE9YVsyXTtjJiZlJiYoZFtiXT1jPWMuZGVzdHJveSgpKTthJiZhLnRleHQmJiFjJiYoZFtiXT1kLnJlbmRlcmVyLnRleHQoYS50ZXh0LDAsMCxhLnVzZUhUTUwpLmF0dHIoe2FsaWduOmEuYWxpZ24sXCJjbGFzc1wiOlwiaGlnaGNoYXJ0cy1cIitiLHpJbmRleDphLnpJbmRleHx8NH0pLmNzcyhhLnN0eWxlKS5hZGQoKSl9KTtkLmxheU91dFRpdGxlcyhjKX0sbGF5T3V0VGl0bGVzOmZ1bmN0aW9uKGEpe3ZhciBiPTAsYz10aGlzLnRpdGxlLGQ9dGhpcy5zdWJ0aXRsZSxlPXRoaXMub3B0aW9ucyxmPWUudGl0bGUsXG5lPWUuc3VidGl0bGUsZz10aGlzLnJlbmRlcmVyLGg9dGhpcy5zcGFjaW5nQm94LndpZHRoLTQ0O2lmKGMmJihjLmNzcyh7d2lkdGg6KGYud2lkdGh8fGgpK1wicHhcIn0pLmFsaWduKHIoe3k6Zy5mb250TWV0cmljcyhmLnN0eWxlLmZvbnRTaXplLGMpLmItM30sZiksITEsXCJzcGFjaW5nQm94XCIpLCFmLmZsb2F0aW5nJiYhZi52ZXJ0aWNhbEFsaWduKSliPWMuZ2V0QkJveCgpLmhlaWdodDtkJiYoZC5jc3Moe3dpZHRoOihlLndpZHRofHxoKStcInB4XCJ9KS5hbGlnbihyKHt5OmIrKGYubWFyZ2luLTEzKStnLmZvbnRNZXRyaWNzKGYuc3R5bGUuZm9udFNpemUsZCkuYn0sZSksITEsXCJzcGFjaW5nQm94XCIpLCFlLmZsb2F0aW5nJiYhZS52ZXJ0aWNhbEFsaWduJiYoYj1MYShiK2QuZ2V0QkJveCgpLmhlaWdodCkpKTtjPXRoaXMudGl0bGVPZmZzZXQhPT1iO3RoaXMudGl0bGVPZmZzZXQ9YjtpZighdGhpcy5pc0RpcnR5Qm94JiZjKXRoaXMuaXNEaXJ0eUJveD1jLHRoaXMuaGFzUmVuZGVyZWQmJlxucChhLCEwKSYmdGhpcy5pc0RpcnR5Qm94JiZ0aGlzLnJlZHJhdygpfSxnZXRDaGFydFNpemU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuY2hhcnQsYj1hLndpZHRoLGE9YS5oZWlnaHQsYz10aGlzLnJlbmRlclRvQ2xvbmV8fHRoaXMucmVuZGVyVG87aWYoIXMoYikpdGhpcy5jb250YWluZXJXaWR0aD1pYihjLFwid2lkdGhcIik7aWYoIXMoYSkpdGhpcy5jb250YWluZXJIZWlnaHQ9aWIoYyxcImhlaWdodFwiKTt0aGlzLmNoYXJ0V2lkdGg9dCgwLGJ8fHRoaXMuY29udGFpbmVyV2lkdGh8fDYwMCk7dGhpcy5jaGFydEhlaWdodD10KDAscChhLHRoaXMuY29udGFpbmVySGVpZ2h0PjE5P3RoaXMuY29udGFpbmVySGVpZ2h0OjQwMCkpfSxjbG9uZVJlbmRlclRvOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucmVuZGVyVG9DbG9uZSxjPXRoaXMuY29udGFpbmVyO2E/YiYmKHRoaXMucmVuZGVyVG8uYXBwZW5kQ2hpbGQoYyksUWEoYiksZGVsZXRlIHRoaXMucmVuZGVyVG9DbG9uZSk6KGMmJlxuYy5wYXJlbnROb2RlPT09dGhpcy5yZW5kZXJUbyYmdGhpcy5yZW5kZXJUby5yZW1vdmVDaGlsZChjKSx0aGlzLnJlbmRlclRvQ2xvbmU9Yj10aGlzLnJlbmRlclRvLmNsb25lTm9kZSgwKSxCKGIse3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItOTk5OXB4XCIsZGlzcGxheTpcImJsb2NrXCJ9KSxiLnN0eWxlLnNldFByb3BlcnR5JiZiLnN0eWxlLnNldFByb3BlcnR5KFwiZGlzcGxheVwiLFwiYmxvY2tcIixcImltcG9ydGFudFwiKSx4LmJvZHkuYXBwZW5kQ2hpbGQoYiksYyYmYi5hcHBlbmRDaGlsZChjKSl9LGdldENvbnRhaW5lcjpmdW5jdGlvbigpe3ZhciBhLGI9dGhpcy5vcHRpb25zLmNoYXJ0LGMsZCxlO3RoaXMucmVuZGVyVG89YT1iLnJlbmRlclRvO2U9XCJoaWdoY2hhcnRzLVwiK3ViKys7aWYoR2EoYSkpdGhpcy5yZW5kZXJUbz1hPXguZ2V0RWxlbWVudEJ5SWQoYSk7YXx8aGEoMTMsITApO2M9eShGKGEsXCJkYXRhLWhpZ2hjaGFydHMtY2hhcnRcIikpOyFpc05hTihjKSYmV1tjXSYmV1tjXS5oYXNSZW5kZXJlZCYmXG5XW2NdLmRlc3Ryb3koKTtGKGEsXCJkYXRhLWhpZ2hjaGFydHMtY2hhcnRcIix0aGlzLmluZGV4KTthLmlubmVySFRNTD1cIlwiOyFiLnNraXBDbG9uZSYmIWEub2Zmc2V0V2lkdGgmJnRoaXMuY2xvbmVSZW5kZXJUbygpO3RoaXMuZ2V0Q2hhcnRTaXplKCk7Yz10aGlzLmNoYXJ0V2lkdGg7ZD10aGlzLmNoYXJ0SGVpZ2h0O3RoaXMuY29udGFpbmVyPWE9JChLYSx7Y2xhc3NOYW1lOlwiaGlnaGNoYXJ0cy1jb250YWluZXJcIisoYi5jbGFzc05hbWU/XCIgXCIrYi5jbGFzc05hbWU6XCJcIiksaWQ6ZX0scih7cG9zaXRpb246XCJyZWxhdGl2ZVwiLG92ZXJmbG93OlwiaGlkZGVuXCIsd2lkdGg6YytcInB4XCIsaGVpZ2h0OmQrXCJweFwiLHRleHRBbGlnbjpcImxlZnRcIixsaW5lSGVpZ2h0Olwibm9ybWFsXCIsekluZGV4OjAsXCItd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3JcIjpcInJnYmEoMCwwLDAsMClcIn0sYi5zdHlsZSksdGhpcy5yZW5kZXJUb0Nsb25lfHxhKTt0aGlzLl9jdXJzb3I9YS5zdHlsZS5jdXJzb3I7dGhpcy5yZW5kZXJlcj1cbmIuZm9yRXhwb3J0P25ldyB0YShhLGMsZCxiLnN0eWxlLCEwKTpuZXcgWmEoYSxjLGQsYi5zdHlsZSk7Z2EmJnRoaXMucmVuZGVyZXIuY3JlYXRlKHRoaXMsYSxjLGQpfSxnZXRNYXJnaW5zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zcGFjaW5nLGIsYz10aGlzLmxlZ2VuZCxkPXRoaXMubWFyZ2luLGU9dGhpcy5vcHRpb25zLmxlZ2VuZCxmPXAoZS5tYXJnaW4sMjApLGc9ZS54LGg9ZS55LGk9ZS5hbGlnbixqPWUudmVydGljYWxBbGlnbixrPXRoaXMudGl0bGVPZmZzZXQ7dGhpcy5yZXNldE1hcmdpbnMoKTtiPXRoaXMuYXhpc09mZnNldDtpZihrJiYhcyhkWzBdKSl0aGlzLnBsb3RUb3A9dCh0aGlzLnBsb3RUb3Asayt0aGlzLm9wdGlvbnMudGl0bGUubWFyZ2luK2FbMF0pO2lmKGMuZGlzcGxheSYmIWUuZmxvYXRpbmcpaWYoaT09PVwicmlnaHRcIil7aWYoIXMoZFsxXSkpdGhpcy5tYXJnaW5SaWdodD10KHRoaXMubWFyZ2luUmlnaHQsYy5sZWdlbmRXaWR0aC1nK2YrYVsxXSl9ZWxzZSBpZihpPT09XG5cImxlZnRcIil7aWYoIXMoZFszXSkpdGhpcy5wbG90TGVmdD10KHRoaXMucGxvdExlZnQsYy5sZWdlbmRXaWR0aCtnK2YrYVszXSl9ZWxzZSBpZihqPT09XCJ0b3BcIil7aWYoIXMoZFswXSkpdGhpcy5wbG90VG9wPXQodGhpcy5wbG90VG9wLGMubGVnZW5kSGVpZ2h0K2grZithWzBdKX1lbHNlIGlmKGo9PT1cImJvdHRvbVwiJiYhcyhkWzJdKSl0aGlzLm1hcmdpbkJvdHRvbT10KHRoaXMubWFyZ2luQm90dG9tLGMubGVnZW5kSGVpZ2h0LWgrZithWzJdKTt0aGlzLmV4dHJhQm90dG9tTWFyZ2luJiYodGhpcy5tYXJnaW5Cb3R0b20rPXRoaXMuZXh0cmFCb3R0b21NYXJnaW4pO3RoaXMuZXh0cmFUb3BNYXJnaW4mJih0aGlzLnBsb3RUb3ArPXRoaXMuZXh0cmFUb3BNYXJnaW4pO3RoaXMuaGFzQ2FydGVzaWFuU2VyaWVzJiZxKHRoaXMuYXhlcyxmdW5jdGlvbihhKXthLmdldE9mZnNldCgpfSk7cyhkWzNdKXx8KHRoaXMucGxvdExlZnQrPWJbM10pO3MoZFswXSl8fCh0aGlzLnBsb3RUb3ArPWJbMF0pO1xucyhkWzJdKXx8KHRoaXMubWFyZ2luQm90dG9tKz1iWzJdKTtzKGRbMV0pfHwodGhpcy5tYXJnaW5SaWdodCs9YlsxXSk7dGhpcy5zZXRDaGFydFNpemUoKX0scmVmbG93OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLm9wdGlvbnMuY2hhcnQsZD1iLnJlbmRlclRvLGU9Yy53aWR0aHx8aWIoZCxcIndpZHRoXCIpLGY9Yy5oZWlnaHR8fGliKGQsXCJoZWlnaHRcIiksYz1hP2EudGFyZ2V0OkcsZD1mdW5jdGlvbigpe2lmKGIuY29udGFpbmVyKWIuc2V0U2l6ZShlLGYsITEpLGIuaGFzVXNlclNpemU9bnVsbH07aWYoIWIuaGFzVXNlclNpemUmJmUmJmYmJihjPT09R3x8Yz09PXgpKXtpZihlIT09Yi5jb250YWluZXJXaWR0aHx8ZiE9PWIuY29udGFpbmVySGVpZ2h0KWNsZWFyVGltZW91dChiLnJlZmxvd1RpbWVvdXQpLGE/Yi5yZWZsb3dUaW1lb3V0PXNldFRpbWVvdXQoZCwxMDApOmQoKTtiLmNvbnRhaW5lcldpZHRoPWU7Yi5jb250YWluZXJIZWlnaHQ9Zn19LGluaXRSZWZsb3c6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMsYj1mdW5jdGlvbihiKXthLnJlZmxvdyhiKX07TihHLFwicmVzaXplXCIsYik7TihhLFwiZGVzdHJveVwiLGZ1bmN0aW9uKCl7WChHLFwicmVzaXplXCIsYil9KX0sc2V0U2l6ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcyxlLGYsZztkLmlzUmVzaXppbmcrPTE7Zz1mdW5jdGlvbigpe2QmJkkoZCxcImVuZFJlc2l6ZVwiLG51bGwsZnVuY3Rpb24oKXtkLmlzUmVzaXppbmctPTF9KX07UmEoYyxkKTtkLm9sZENoYXJ0SGVpZ2h0PWQuY2hhcnRIZWlnaHQ7ZC5vbGRDaGFydFdpZHRoPWQuY2hhcnRXaWR0aDtpZihzKGEpKWQuY2hhcnRXaWR0aD1lPXQoMCx2KGEpKSxkLmhhc1VzZXJTaXplPSEhZTtpZihzKGIpKWQuY2hhcnRIZWlnaHQ9Zj10KDAsdihiKSk7KHZhP2piOkIpKGQuY29udGFpbmVyLHt3aWR0aDplK1wicHhcIixoZWlnaHQ6ZitcInB4XCJ9LHZhKTtkLnNldENoYXJ0U2l6ZSghMCk7ZC5yZW5kZXJlci5zZXRTaXplKGUsZixjKTtkLm1heFRpY2tzPW51bGw7cShkLmF4ZXMsZnVuY3Rpb24oYSl7YS5pc0RpcnR5PVxuITA7YS5zZXRTY2FsZSgpfSk7cShkLnNlcmllcyxmdW5jdGlvbihhKXthLmlzRGlydHk9ITB9KTtkLmlzRGlydHlMZWdlbmQ9ITA7ZC5pc0RpcnR5Qm94PSEwO2QubGF5T3V0VGl0bGVzKCk7ZC5nZXRNYXJnaW5zKCk7ZC5yZWRyYXcoYyk7ZC5vbGRDaGFydEhlaWdodD1udWxsO0koZCxcInJlc2l6ZVwiKTt2YT09PSExP2coKTpzZXRUaW1lb3V0KGcsdmEmJnZhLmR1cmF0aW9ufHw1MDApfSxzZXRDaGFydFNpemU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5pbnZlcnRlZCxjPXRoaXMucmVuZGVyZXIsZD10aGlzLmNoYXJ0V2lkdGgsZT10aGlzLmNoYXJ0SGVpZ2h0LGY9dGhpcy5vcHRpb25zLmNoYXJ0LGc9dGhpcy5zcGFjaW5nLGg9dGhpcy5jbGlwT2Zmc2V0LGksaixrLGw7dGhpcy5wbG90TGVmdD1pPXYodGhpcy5wbG90TGVmdCk7dGhpcy5wbG90VG9wPWo9dih0aGlzLnBsb3RUb3ApO3RoaXMucGxvdFdpZHRoPWs9dCgwLHYoZC1pLXRoaXMubWFyZ2luUmlnaHQpKTt0aGlzLnBsb3RIZWlnaHQ9XG5sPXQoMCx2KGUtai10aGlzLm1hcmdpbkJvdHRvbSkpO3RoaXMucGxvdFNpemVYPWI/bDprO3RoaXMucGxvdFNpemVZPWI/azpsO3RoaXMucGxvdEJvcmRlcldpZHRoPWYucGxvdEJvcmRlcldpZHRofHwwO3RoaXMuc3BhY2luZ0JveD1jLnNwYWNpbmdCb3g9e3g6Z1szXSx5OmdbMF0sd2lkdGg6ZC1nWzNdLWdbMV0saGVpZ2h0OmUtZ1swXS1nWzJdfTt0aGlzLnBsb3RCb3g9Yy5wbG90Qm94PXt4OmkseTpqLHdpZHRoOmssaGVpZ2h0Omx9O2Q9MipVKHRoaXMucGxvdEJvcmRlcldpZHRoLzIpO2I9TGEodChkLGhbM10pLzIpO2M9TGEodChkLGhbMF0pLzIpO3RoaXMuY2xpcEJveD17eDpiLHk6Yyx3aWR0aDpVKHRoaXMucGxvdFNpemVYLXQoZCxoWzFdKS8yLWIpLGhlaWdodDp0KDAsVSh0aGlzLnBsb3RTaXplWS10KGQsaFsyXSkvMi1jKSl9O2F8fHEodGhpcy5heGVzLGZ1bmN0aW9uKGEpe2Euc2V0QXhpc1NpemUoKTthLnNldEF4aXNUcmFuc2xhdGlvbigpfSl9LHJlc2V0TWFyZ2luczpmdW5jdGlvbigpe3ZhciBhPVxudGhpcy5zcGFjaW5nLGI9dGhpcy5tYXJnaW47dGhpcy5wbG90VG9wPXAoYlswXSxhWzBdKTt0aGlzLm1hcmdpblJpZ2h0PXAoYlsxXSxhWzFdKTt0aGlzLm1hcmdpbkJvdHRvbT1wKGJbMl0sYVsyXSk7dGhpcy5wbG90TGVmdD1wKGJbM10sYVszXSk7dGhpcy5heGlzT2Zmc2V0PVswLDAsMCwwXTt0aGlzLmNsaXBPZmZzZXQ9WzAsMCwwLDBdfSxkcmF3Q2hhcnRCb3g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMuY2hhcnQsYj10aGlzLnJlbmRlcmVyLGM9dGhpcy5jaGFydFdpZHRoLGQ9dGhpcy5jaGFydEhlaWdodCxlPXRoaXMuY2hhcnRCYWNrZ3JvdW5kLGY9dGhpcy5wbG90QmFja2dyb3VuZCxnPXRoaXMucGxvdEJvcmRlcixoPXRoaXMucGxvdEJHSW1hZ2UsaT1hLmJvcmRlcldpZHRofHwwLGo9YS5iYWNrZ3JvdW5kQ29sb3Isaz1hLnBsb3RCYWNrZ3JvdW5kQ29sb3IsbD1hLnBsb3RCYWNrZ3JvdW5kSW1hZ2Usbj1hLnBsb3RCb3JkZXJXaWR0aHx8MCxtLG89dGhpcy5wbG90TGVmdCxcbnA9dGhpcy5wbG90VG9wLHE9dGhpcy5wbG90V2lkdGgscj10aGlzLnBsb3RIZWlnaHQsdD10aGlzLnBsb3RCb3gscz10aGlzLmNsaXBSZWN0LHY9dGhpcy5jbGlwQm94O209aSsoYS5zaGFkb3c/ODowKTtpZihpfHxqKWlmKGUpZS5hbmltYXRlKGUuY3Jpc3Aoe3dpZHRoOmMtbSxoZWlnaHQ6ZC1tfSkpO2Vsc2V7ZT17ZmlsbDpqfHxQfTtpZihpKWUuc3Ryb2tlPWEuYm9yZGVyQ29sb3IsZVtcInN0cm9rZS13aWR0aFwiXT1pO3RoaXMuY2hhcnRCYWNrZ3JvdW5kPWIucmVjdChtLzIsbS8yLGMtbSxkLW0sYS5ib3JkZXJSYWRpdXMsaSkuYXR0cihlKS5hZGRDbGFzcyhcImhpZ2hjaGFydHMtYmFja2dyb3VuZFwiKS5hZGQoKS5zaGFkb3coYS5zaGFkb3cpfWlmKGspZj9mLmFuaW1hdGUodCk6dGhpcy5wbG90QmFja2dyb3VuZD1iLnJlY3QobyxwLHEsciwwKS5hdHRyKHtmaWxsOmt9KS5hZGQoKS5zaGFkb3coYS5wbG90U2hhZG93KTtpZihsKWg/aC5hbmltYXRlKHQpOnRoaXMucGxvdEJHSW1hZ2U9XG5iLmltYWdlKGwsbyxwLHEscikuYWRkKCk7cz9zLmFuaW1hdGUoe3dpZHRoOnYud2lkdGgsaGVpZ2h0OnYuaGVpZ2h0fSk6dGhpcy5jbGlwUmVjdD1iLmNsaXBSZWN0KHYpO2lmKG4pZz9nLmFuaW1hdGUoZy5jcmlzcCh7eDpvLHk6cCx3aWR0aDpxLGhlaWdodDpyLHN0cm9rZVdpZHRoOi1ufSkpOnRoaXMucGxvdEJvcmRlcj1iLnJlY3QobyxwLHEsciwwLC1uKS5hdHRyKHtzdHJva2U6YS5wbG90Qm9yZGVyQ29sb3IsXCJzdHJva2Utd2lkdGhcIjpuLGZpbGw6UCx6SW5kZXg6MX0pLmFkZCgpO3RoaXMuaXNEaXJ0eUJveD0hMX0scHJvcEZyb21TZXJpZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLmNoYXJ0LGMsZD1hLm9wdGlvbnMuc2VyaWVzLGUsZjtxKFtcImludmVydGVkXCIsXCJhbmd1bGFyXCIsXCJwb2xhclwiXSxmdW5jdGlvbihnKXtjPUhbYi50eXBlfHxiLmRlZmF1bHRTZXJpZXNUeXBlXTtmPWFbZ118fGJbZ118fGMmJmMucHJvdG90eXBlW2ddO2ZvcihlPWQmJmQubGVuZ3RoOyFmJiZcbmUtLTspKGM9SFtkW2VdLnR5cGVdKSYmYy5wcm90b3R5cGVbZ10mJihmPSEwKTthW2ddPWZ9KX0sbGlua1NlcmllczpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnNlcmllcztxKGIsZnVuY3Rpb24oYSl7YS5saW5rZWRTZXJpZXMubGVuZ3RoPTB9KTtxKGIsZnVuY3Rpb24oYil7dmFyIGQ9Yi5vcHRpb25zLmxpbmtlZFRvO2lmKEdhKGQpJiYoZD1kPT09XCI6cHJldmlvdXNcIj9hLnNlcmllc1tiLmluZGV4LTFdOmEuZ2V0KGQpKSlkLmxpbmtlZFNlcmllcy5wdXNoKGIpLGIubGlua2VkUGFyZW50PWR9KX0scmVuZGVyU2VyaWVzOmZ1bmN0aW9uKCl7cSh0aGlzLnNlcmllcyxmdW5jdGlvbihhKXthLnRyYW5zbGF0ZSgpO2Euc2V0VG9vbHRpcFBvaW50cyYmYS5zZXRUb29sdGlwUG9pbnRzKCk7YS5yZW5kZXIoKX0pfSxyZW5kZXJMYWJlbHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLmxhYmVscztiLml0ZW1zJiZxKGIuaXRlbXMsZnVuY3Rpb24oYyl7dmFyIGQ9cihiLnN0eWxlLFxuYy5zdHlsZSksZT15KGQubGVmdCkrYS5wbG90TGVmdCxmPXkoZC50b3ApK2EucGxvdFRvcCsxMjtkZWxldGUgZC5sZWZ0O2RlbGV0ZSBkLnRvcDthLnJlbmRlcmVyLnRleHQoYy5odG1sLGUsZikuYXR0cih7ekluZGV4OjJ9KS5jc3MoZCkuYWRkKCl9KX0scmVuZGVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5heGVzLGI9dGhpcy5yZW5kZXJlcixjPXRoaXMub3B0aW9uczt0aGlzLnNldFRpdGxlKCk7dGhpcy5sZWdlbmQ9bmV3IGxiKHRoaXMsYy5sZWdlbmQpO3RoaXMuZ2V0U3RhY2tzKCk7cShhLGZ1bmN0aW9uKGEpe2Euc2V0U2NhbGUoKX0pO3RoaXMuZ2V0TWFyZ2lucygpO3RoaXMubWF4VGlja3M9bnVsbDtxKGEsZnVuY3Rpb24oYSl7YS5zZXRUaWNrUG9zaXRpb25zKCEwKTthLnNldE1heFRpY2tzKCl9KTt0aGlzLmFkanVzdFRpY2tBbW91bnRzKCk7dGhpcy5nZXRNYXJnaW5zKCk7dGhpcy5kcmF3Q2hhcnRCb3goKTt0aGlzLmhhc0NhcnRlc2lhblNlcmllcyYmcShhLGZ1bmN0aW9uKGEpe2EucmVuZGVyKCl9KTtcbmlmKCF0aGlzLnNlcmllc0dyb3VwKXRoaXMuc2VyaWVzR3JvdXA9Yi5nKFwic2VyaWVzLWdyb3VwXCIpLmF0dHIoe3pJbmRleDozfSkuYWRkKCk7dGhpcy5yZW5kZXJTZXJpZXMoKTt0aGlzLnJlbmRlckxhYmVscygpO3RoaXMuc2hvd0NyZWRpdHMoYy5jcmVkaXRzKTt0aGlzLmhhc1JlbmRlcmVkPSEwfSxzaG93Q3JlZGl0czpmdW5jdGlvbihhKXtpZihhLmVuYWJsZWQmJiF0aGlzLmNyZWRpdHMpdGhpcy5jcmVkaXRzPXRoaXMucmVuZGVyZXIudGV4dChhLnRleHQsMCwwKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oKXtpZihhLmhyZWYpbG9jYXRpb24uaHJlZj1hLmhyZWZ9KS5hdHRyKHthbGlnbjphLnBvc2l0aW9uLmFsaWduLHpJbmRleDo4fSkuY3NzKGEuc3R5bGUpLmFkZCgpLmFsaWduKGEucG9zaXRpb24pfSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEuYXhlcyxjPWEuc2VyaWVzLGQ9YS5jb250YWluZXIsZSxmPWQmJmQucGFyZW50Tm9kZTtJKGEsXCJkZXN0cm95XCIpO1dbYS5pbmRleF09XG51O2FiLS07YS5yZW5kZXJUby5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLWhpZ2hjaGFydHMtY2hhcnRcIik7WChhKTtmb3IoZT1iLmxlbmd0aDtlLS07KWJbZV09YltlXS5kZXN0cm95KCk7Zm9yKGU9Yy5sZW5ndGg7ZS0tOyljW2VdPWNbZV0uZGVzdHJveSgpO3EoXCJ0aXRsZSxzdWJ0aXRsZSxjaGFydEJhY2tncm91bmQscGxvdEJhY2tncm91bmQscGxvdEJHSW1hZ2UscGxvdEJvcmRlcixzZXJpZXNHcm91cCxjbGlwUmVjdCxjcmVkaXRzLHBvaW50ZXIsc2Nyb2xsZXIscmFuZ2VTZWxlY3RvcixsZWdlbmQscmVzZXRab29tQnV0dG9uLHRvb2x0aXAscmVuZGVyZXJcIi5zcGxpdChcIixcIiksZnVuY3Rpb24oYil7dmFyIGM9YVtiXTtjJiZjLmRlc3Ryb3kmJihhW2JdPWMuZGVzdHJveSgpKX0pO2lmKGQpZC5pbm5lckhUTUw9XCJcIixYKGQpLGYmJlFhKGQpO2ZvcihlIGluIGEpZGVsZXRlIGFbZV19LGlzUmVhZHlUb1JlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7cmV0dXJuIWJhJiZHPT1HLnRvcCYmXG54LnJlYWR5U3RhdGUhPT1cImNvbXBsZXRlXCJ8fGdhJiYhRy5jYW52Zz8oZ2E/TWIucHVzaChmdW5jdGlvbigpe2EuZmlyc3RSZW5kZXIoKX0sYS5vcHRpb25zLmdsb2JhbC5jYW52YXNUb29sc1VSTCk6eC5hdHRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGZ1bmN0aW9uKCl7eC5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGEuZmlyc3RSZW5kZXIpO3gucmVhZHlTdGF0ZT09PVwiY29tcGxldGVcIiYmYS5maXJzdFJlbmRlcigpfSksITEpOiEwfSxmaXJzdFJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm9wdGlvbnMsYz1hLmNhbGxiYWNrO2lmKGEuaXNSZWFkeVRvUmVuZGVyKCkpe2EuZ2V0Q29udGFpbmVyKCk7SShhLFwiaW5pdFwiKTthLnJlc2V0TWFyZ2lucygpO2Euc2V0Q2hhcnRTaXplKCk7YS5wcm9wRnJvbVNlcmllcygpO2EuZ2V0QXhlcygpO3EoYi5zZXJpZXN8fFtdLGZ1bmN0aW9uKGIpe2EuaW5pdFNlcmllcyhiKX0pO2EubGlua1NlcmllcygpO0koYSxcblwiYmVmb3JlUmVuZGVyXCIpO2lmKEsuUG9pbnRlcilhLnBvaW50ZXI9bmV3IFdhKGEsYik7YS5yZW5kZXIoKTthLnJlbmRlcmVyLmRyYXcoKTtjJiZjLmFwcGx5KGEsW2FdKTtxKGEuY2FsbGJhY2tzLGZ1bmN0aW9uKGIpe2IuYXBwbHkoYSxbYV0pfSk7YS5jbG9uZVJlbmRlclRvKCEwKTtJKGEsXCJsb2FkXCIpfX0sc3BsYXNoQXJyYXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2FdLGM9ZGEoYyk/YzpbYyxjLGMsY107cmV0dXJuW3AoYlthK1wiVG9wXCJdLGNbMF0pLHAoYlthK1wiUmlnaHRcIl0sY1sxXSkscChiW2ErXCJCb3R0b21cIl0sY1syXSkscChiW2ErXCJMZWZ0XCJdLGNbM10pXX19O1lhLnByb3RvdHlwZS5jYWxsYmFja3M9W107Wj1LLkNlbnRlcmVkU2VyaWVzTWl4aW49e2dldENlbnRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucyxiPXRoaXMuY2hhcnQsYz0yKihhLnNsaWNlZE9mZnNldHx8MCksZCxlPWIucGxvdFdpZHRoLTIqYyxmPWIucGxvdEhlaWdodC0yKmMsYj1hLmNlbnRlcixcbmE9W3AoYlswXSxcIjUwJVwiKSxwKGJbMV0sXCI1MCVcIiksYS5zaXplfHxcIjEwMCVcIixhLmlubmVyU2l6ZXx8MF0sZz1MKGUsZiksaDtyZXR1cm4gVmEoYSxmdW5jdGlvbihhLGIpe2g9LyUkLy50ZXN0KGEpO2Q9YjwyfHxiPT09MiYmaDtyZXR1cm4oaD9bZSxmLGcsZ11bYl0qeShhKS8xMDA6YSkrKGQ/YzowKX0pfX07dmFyIEZhPWZ1bmN0aW9uKCl7fTtGYS5wcm90b3R5cGU9e2luaXQ6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuc2VyaWVzPWE7dGhpcy5hcHBseU9wdGlvbnMoYixjKTt0aGlzLnBvaW50QXR0cj17fTtpZihhLm9wdGlvbnMuY29sb3JCeVBvaW50JiYoYj1hLm9wdGlvbnMuY29sb3JzfHxhLmNoYXJ0Lm9wdGlvbnMuY29sb3JzLHRoaXMuY29sb3I9dGhpcy5jb2xvcnx8YlthLmNvbG9yQ291bnRlcisrXSxhLmNvbG9yQ291bnRlcj09PWIubGVuZ3RoKSlhLmNvbG9yQ291bnRlcj0wO2EuY2hhcnQucG9pbnRDb3VudCsrO3JldHVybiB0aGlzfSxhcHBseU9wdGlvbnM6ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPXRoaXMuc2VyaWVzLGQ9Yy5vcHRpb25zLnBvaW50VmFsS2V5fHxjLnBvaW50VmFsS2V5LGE9RmEucHJvdG90eXBlLm9wdGlvbnNUb09iamVjdC5jYWxsKHRoaXMsYSk7cih0aGlzLGEpO3RoaXMub3B0aW9ucz10aGlzLm9wdGlvbnM/cih0aGlzLm9wdGlvbnMsYSk6YTtpZihkKXRoaXMueT10aGlzW2RdO2lmKHRoaXMueD09PXUmJmMpdGhpcy54PWI9PT11P2MuYXV0b0luY3JlbWVudCgpOmI7cmV0dXJuIHRoaXN9LG9wdGlvbnNUb09iamVjdDpmdW5jdGlvbihhKXt2YXIgYj17fSxjPXRoaXMuc2VyaWVzLGQ9Yy5wb2ludEFycmF5TWFwfHxbXCJ5XCJdLGU9ZC5sZW5ndGgsZj0wLGc9MDtpZih0eXBlb2YgYT09PVwibnVtYmVyXCJ8fGE9PT1udWxsKWJbZFswXV09YTtlbHNlIGlmKEhhKGEpKXtpZihhLmxlbmd0aD5lKXtjPXR5cGVvZiBhWzBdO2lmKGM9PT1cInN0cmluZ1wiKWIubmFtZT1hWzBdO2Vsc2UgaWYoYz09PVwibnVtYmVyXCIpYi54PWFbMF07ZisrfWZvcig7ZzxlOyliW2RbZysrXV09XG5hW2YrK119ZWxzZSBpZih0eXBlb2YgYT09PVwib2JqZWN0XCIpe2I9YTtpZihhLmRhdGFMYWJlbHMpYy5faGFzUG9pbnRMYWJlbHM9ITA7aWYoYS5tYXJrZXIpYy5faGFzUG9pbnRNYXJrZXJzPSEwfXJldHVybiBifSxkZXN0cm95OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zZXJpZXMuY2hhcnQsYj1hLmhvdmVyUG9pbnRzLGM7YS5wb2ludENvdW50LS07aWYoYiYmKHRoaXMuc2V0U3RhdGUoKSxsYShiLHRoaXMpLCFiLmxlbmd0aCkpYS5ob3ZlclBvaW50cz1udWxsO2lmKHRoaXM9PT1hLmhvdmVyUG9pbnQpdGhpcy5vbk1vdXNlT3V0KCk7aWYodGhpcy5ncmFwaGljfHx0aGlzLmRhdGFMYWJlbClYKHRoaXMpLHRoaXMuZGVzdHJveUVsZW1lbnRzKCk7dGhpcy5sZWdlbmRJdGVtJiZhLmxlZ2VuZC5kZXN0cm95SXRlbSh0aGlzKTtmb3IoYyBpbiB0aGlzKXRoaXNbY109bnVsbH0sZGVzdHJveUVsZW1lbnRzOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPVwiZ3JhcGhpYyxkYXRhTGFiZWwsZGF0YUxhYmVsVXBwZXIsZ3JvdXAsY29ubmVjdG9yLHNoYWRvd0dyb3VwXCIuc3BsaXQoXCIsXCIpLFxuYixjPTY7Yy0tOyliPWFbY10sdGhpc1tiXSYmKHRoaXNbYl09dGhpc1tiXS5kZXN0cm95KCkpfSxnZXRMYWJlbENvbmZpZzpmdW5jdGlvbigpe3JldHVybnt4OnRoaXMuY2F0ZWdvcnkseTp0aGlzLnksa2V5OnRoaXMubmFtZXx8dGhpcy5jYXRlZ29yeSxzZXJpZXM6dGhpcy5zZXJpZXMscG9pbnQ6dGhpcyxwZXJjZW50YWdlOnRoaXMucGVyY2VudGFnZSx0b3RhbDp0aGlzLnRvdGFsfHx0aGlzLnN0YWNrVG90YWx9fSx0b29sdGlwRm9ybWF0dGVyOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VyaWVzLGM9Yi50b29sdGlwT3B0aW9ucyxkPXAoYy52YWx1ZURlY2ltYWxzLFwiXCIpLGU9Yy52YWx1ZVByZWZpeHx8XCJcIixmPWMudmFsdWVTdWZmaXh8fFwiXCI7cShiLnBvaW50QXJyYXlNYXB8fFtcInlcIl0sZnVuY3Rpb24oYil7Yj1cIntwb2ludC5cIitiO2lmKGV8fGYpYT1hLnJlcGxhY2UoYitcIn1cIixlK2IrXCJ9XCIrZik7YT1hLnJlcGxhY2UoYitcIn1cIixiK1wiOiwuXCIrZCtcImZ9XCIpfSk7cmV0dXJuIEphKGEsXG57cG9pbnQ6dGhpcyxzZXJpZXM6dGhpcy5zZXJpZXN9KX0sZmlyZVBvaW50RXZlbnQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMsZT10aGlzLnNlcmllcy5vcHRpb25zOyhlLnBvaW50LmV2ZW50c1thXXx8ZC5vcHRpb25zJiZkLm9wdGlvbnMuZXZlbnRzJiZkLm9wdGlvbnMuZXZlbnRzW2FdKSYmdGhpcy5pbXBvcnRFdmVudHMoKTthPT09XCJjbGlja1wiJiZlLmFsbG93UG9pbnRTZWxlY3QmJihjPWZ1bmN0aW9uKGEpe2Quc2VsZWN0KG51bGwsYS5jdHJsS2V5fHxhLm1ldGFLZXl8fGEuc2hpZnRLZXkpfSk7SSh0aGlzLGEsYixjKX19O3ZhciBPPWZ1bmN0aW9uKCl7fTtPLnByb3RvdHlwZT17aXNDYXJ0ZXNpYW46ITAsdHlwZTpcImxpbmVcIixwb2ludENsYXNzOkZhLHNvcnRlZDohMCxyZXF1aXJlU29ydGluZzohMCxwb2ludEF0dHJUb09wdGlvbnM6e3N0cm9rZTpcImxpbmVDb2xvclwiLFwic3Ryb2tlLXdpZHRoXCI6XCJsaW5lV2lkdGhcIixmaWxsOlwiZmlsbENvbG9yXCIscjpcInJhZGl1c1wifSxheGlzVHlwZXM6W1wieEF4aXNcIixcblwieUF4aXNcIl0sY29sb3JDb3VudGVyOjAscGFyYWxsZWxBcnJheXM6W1wieFwiLFwieVwiXSxpbml0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkLGUsZj1hLnNlcmllcyxnPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHAoYS5vcHRpb25zLmluZGV4LGEuX2kpLXAoYi5vcHRpb25zLmluZGV4LGIuX2kpfTtjLmNoYXJ0PWE7Yy5vcHRpb25zPWI9Yy5zZXRPcHRpb25zKGIpO2MubGlua2VkU2VyaWVzPVtdO2MuYmluZEF4ZXMoKTtyKGMse25hbWU6Yi5uYW1lLHN0YXRlOlwiXCIscG9pbnRBdHRyOnt9LHZpc2libGU6Yi52aXNpYmxlIT09ITEsc2VsZWN0ZWQ6Yi5zZWxlY3RlZD09PSEwfSk7aWYoZ2EpYi5hbmltYXRpb249ITE7ZT1iLmV2ZW50cztmb3IoZCBpbiBlKU4oYyxkLGVbZF0pO2lmKGUmJmUuY2xpY2t8fGIucG9pbnQmJmIucG9pbnQuZXZlbnRzJiZiLnBvaW50LmV2ZW50cy5jbGlja3x8Yi5hbGxvd1BvaW50U2VsZWN0KWEucnVuVHJhY2tlckNsaWNrPSEwO2MuZ2V0Q29sb3IoKTtjLmdldFN5bWJvbCgpO1xucShjLnBhcmFsbGVsQXJyYXlzLGZ1bmN0aW9uKGEpe2NbYStcIkRhdGFcIl09W119KTtjLnNldERhdGEoYi5kYXRhLCExKTtpZihjLmlzQ2FydGVzaWFuKWEuaGFzQ2FydGVzaWFuU2VyaWVzPSEwO2YucHVzaChjKTtjLl9pPWYubGVuZ3RoLTE7b2IoZixnKTt0aGlzLnlBeGlzJiZvYih0aGlzLnlBeGlzLnNlcmllcyxnKTtxKGYsZnVuY3Rpb24oYSxiKXthLmluZGV4PWI7YS5uYW1lPWEubmFtZXx8XCJTZXJpZXMgXCIrKGIrMSl9KX0sYmluZEF4ZXM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9YS5jaGFydCxkO3EoYS5heGlzVHlwZXN8fFtdLGZ1bmN0aW9uKGUpe3EoY1tlXSxmdW5jdGlvbihjKXtkPWMub3B0aW9ucztpZihiW2VdPT09ZC5pbmRleHx8YltlXSE9PXUmJmJbZV09PT1kLmlkfHxiW2VdPT09dSYmZC5pbmRleD09PTApYy5zZXJpZXMucHVzaChhKSxhW2VdPWMsYy5pc0RpcnR5PSEwfSk7IWFbZV0mJmEub3B0aW9uYWxBeGlzIT09ZSYmaGEoMTgsITApfSl9LFxudXBkYXRlUGFyYWxsZWxBcnJheXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnNlcmllcyxkPWFyZ3VtZW50cztxKGMucGFyYWxsZWxBcnJheXMsdHlwZW9mIGI9PT1cIm51bWJlclwiP2Z1bmN0aW9uKGQpe3ZhciBmPWQ9PT1cInlcIiYmYy50b1lEYXRhP2MudG9ZRGF0YShhKTphW2RdO2NbZCtcIkRhdGFcIl1bYl09Zn06ZnVuY3Rpb24oYSl7QXJyYXkucHJvdG90eXBlW2JdLmFwcGx5KGNbYStcIkRhdGFcIl0sQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZCwyKSl9KX0sYXV0b0luY3JlbWVudDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucyxiPXRoaXMueEluY3JlbWVudCxiPXAoYixhLnBvaW50U3RhcnQsMCk7dGhpcy5wb2ludEludGVydmFsPXAodGhpcy5wb2ludEludGVydmFsLGEucG9pbnRJbnRlcnZhbCwxKTt0aGlzLnhJbmNyZW1lbnQ9Yit0aGlzLnBvaW50SW50ZXJ2YWw7cmV0dXJuIGJ9LGdldFNlZ21lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9LTEsYj1bXSxjLGQ9dGhpcy5wb2ludHMsXG5lPWQubGVuZ3RoO2lmKGUpaWYodGhpcy5vcHRpb25zLmNvbm5lY3ROdWxscyl7Zm9yKGM9ZTtjLS07KWRbY10ueT09PW51bGwmJmQuc3BsaWNlKGMsMSk7ZC5sZW5ndGgmJihiPVtkXSl9ZWxzZSBxKGQsZnVuY3Rpb24oYyxnKXtjLnk9PT1udWxsPyhnPmErMSYmYi5wdXNoKGQuc2xpY2UoYSsxLGcpKSxhPWcpOmc9PT1lLTEmJmIucHVzaChkLnNsaWNlKGErMSxnKzEpKX0pO3RoaXMuc2VnbWVudHM9Yn0sc2V0T3B0aW9uczpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmNoYXJ0LGM9Yi5vcHRpb25zLnBsb3RPcHRpb25zLGI9Yi51c2VyT3B0aW9uc3x8e30sZD1iLnBsb3RPcHRpb25zfHx7fSxlPWNbdGhpcy50eXBlXTt0aGlzLnVzZXJPcHRpb25zPWE7Yz13KGUsYy5zZXJpZXMsYSk7dGhpcy50b29sdGlwT3B0aW9ucz13KEUudG9vbHRpcCxFLnBsb3RPcHRpb25zW3RoaXMudHlwZV0udG9vbHRpcCxiLnRvb2x0aXAsZC5zZXJpZXMmJmQuc2VyaWVzLnRvb2x0aXAsZFt0aGlzLnR5cGVdJiZcbmRbdGhpcy50eXBlXS50b29sdGlwLGEudG9vbHRpcCk7ZS5tYXJrZXI9PT1udWxsJiZkZWxldGUgYy5tYXJrZXI7cmV0dXJuIGN9LGdldEN5Y2xpYzpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy51c2VyT3B0aW9ucyxlPVwiX1wiK2ErXCJJbmRleFwiLGY9YStcIkNvdW50ZXJcIjtifHwocyhkW2VdKT9iPWRbZV06KGRbZV09Yj10aGlzLmNoYXJ0W2ZdJWMubGVuZ3RoLHRoaXMuY2hhcnRbZl0rPTEpLGI9Y1tiXSk7dGhpc1thXT1ifSxnZXRDb2xvcjpmdW5jdGlvbigpe3RoaXMub3B0aW9ucy5jb2xvckJ5UG9pbnR8fHRoaXMuZ2V0Q3ljbGljKFwiY29sb3JcIix0aGlzLm9wdGlvbnMuY29sb3J8fGNhW3RoaXMudHlwZV0uY29sb3IsdGhpcy5jaGFydC5vcHRpb25zLmNvbG9ycyl9LGdldFN5bWJvbDpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5tYXJrZXI7dGhpcy5nZXRDeWNsaWMoXCJzeW1ib2xcIixhLnN5bWJvbCx0aGlzLmNoYXJ0Lm9wdGlvbnMuc3ltYm9scyk7aWYoL151cmwvLnRlc3QodGhpcy5zeW1ib2wpKWEucmFkaXVzPVxuMH0sZHJhd0xlZ2VuZFN5bWJvbDpNLmRyYXdMaW5lTWFya2VyLHNldERhdGE6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcyxmPWUucG9pbnRzLGc9ZiYmZi5sZW5ndGh8fDAsaCxpPWUub3B0aW9ucyxqPWUuY2hhcnQsaz1udWxsLGw9ZS54QXhpcyxuPWwmJiEhbC5jYXRlZ29yaWVzLG09ZS50b29sdGlwUG9pbnRzLG89aS50dXJib1RocmVzaG9sZCxyPXRoaXMueERhdGEsdD10aGlzLnlEYXRhLHM9KGg9ZS5wb2ludEFycmF5TWFwKSYmaC5sZW5ndGgsYT1hfHxbXTtoPWEubGVuZ3RoO2I9cChiLCEwKTtpZihkIT09ITEmJmgmJmc9PT1oJiYhZS5jcm9wcGVkJiYhZS5oYXNHcm91cGVkRGF0YSlxKGEsZnVuY3Rpb24oYSxiKXtmW2JdLnVwZGF0ZShhLCExLG51bGwsITEpfSk7ZWxzZXtlLnhJbmNyZW1lbnQ9bnVsbDtlLnBvaW50UmFuZ2U9bj8xOmkucG9pbnRSYW5nZTtlLmNvbG9yQ291bnRlcj0wO3EodGhpcy5wYXJhbGxlbEFycmF5cyxmdW5jdGlvbihhKXtlW2ErXCJEYXRhXCJdLmxlbmd0aD1cbjB9KTtpZihvJiZoPm8pe2ZvcihjPTA7az09PW51bGwmJmM8aDspaz1hW2NdLGMrKztpZihqYShrKSl7bj1wKGkucG9pbnRTdGFydCwwKTtpPXAoaS5wb2ludEludGVydmFsLDEpO2ZvcihjPTA7YzxoO2MrKylyW2NdPW4sdFtjXT1hW2NdLG4rPWk7ZS54SW5jcmVtZW50PW59ZWxzZSBpZihIYShrKSlpZihzKWZvcihjPTA7YzxoO2MrKylpPWFbY10scltjXT1pWzBdLHRbY109aS5zbGljZSgxLHMrMSk7ZWxzZSBmb3IoYz0wO2M8aDtjKyspaT1hW2NdLHJbY109aVswXSx0W2NdPWlbMV07ZWxzZSBoYSgxMil9ZWxzZSBmb3IoYz0wO2M8aDtjKyspaWYoYVtjXSE9PXUmJihpPXtzZXJpZXM6ZX0sZS5wb2ludENsYXNzLnByb3RvdHlwZS5hcHBseU9wdGlvbnMuYXBwbHkoaSxbYVtjXV0pLGUudXBkYXRlUGFyYWxsZWxBcnJheXMoaSxjKSxuJiZpLm5hbWUpKWwubmFtZXNbaS54XT1pLm5hbWU7R2EodFswXSkmJmhhKDE0LCEwKTtlLmRhdGE9W107ZS5vcHRpb25zLmRhdGE9YTtmb3IoYz1nO2MtLTspZltjXSYmXG5mW2NdLmRlc3Ryb3kmJmZbY10uZGVzdHJveSgpO2lmKG0pbS5sZW5ndGg9MDtpZihsKWwubWluUmFuZ2U9bC51c2VyTWluUmFuZ2U7ZS5pc0RpcnR5PWUuaXNEaXJ0eURhdGE9ai5pc0RpcnR5Qm94PSEwO2M9ITF9YiYmai5yZWRyYXcoYyl9LHByb2Nlc3NEYXRhOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMueERhdGEsYz10aGlzLnlEYXRhLGQ9Yi5sZW5ndGgsZTtlPTA7dmFyIGYsZyxoPXRoaXMueEF4aXMsaSxqPXRoaXMub3B0aW9ucztpPWouY3JvcFRocmVzaG9sZDt2YXIgaz0wLGw9dGhpcy5pc0NhcnRlc2lhbixuLG07aWYobCYmIXRoaXMuaXNEaXJ0eSYmIWguaXNEaXJ0eSYmIXRoaXMueUF4aXMuaXNEaXJ0eSYmIWEpcmV0dXJuITE7aWYoaCluPWguZ2V0RXh0cmVtZXMoKSxtPW4ubWluLG49bi5tYXg7aWYobCYmdGhpcy5zb3J0ZWQmJighaXx8ZD5pfHx0aGlzLmZvcmNlQ3JvcCkpaWYoYltkLTFdPG18fGJbMF0+biliPVtdLGM9W107ZWxzZSBpZihiWzBdPG18fGJbZC0xXT5uKWU9XG50aGlzLmNyb3BEYXRhKHRoaXMueERhdGEsdGhpcy55RGF0YSxtLG4pLGI9ZS54RGF0YSxjPWUueURhdGEsZT1lLnN0YXJ0LGY9ITAsaz1iLmxlbmd0aDtmb3IoaT1iLmxlbmd0aC0xO2k+PTA7aS0tKWQ9YltpXS1iW2ktMV0sIWYmJmJbaV0+bSYmYltpXTxuJiZrKyssZD4wJiYoZz09PXV8fGQ8Zyk/Zz1kOmQ8MCYmdGhpcy5yZXF1aXJlU29ydGluZyYmaGEoMTUpO3RoaXMuY3JvcHBlZD1mO3RoaXMuY3JvcFN0YXJ0PWU7dGhpcy5wcm9jZXNzZWRYRGF0YT1iO3RoaXMucHJvY2Vzc2VkWURhdGE9Yzt0aGlzLmFjdGl2ZVBvaW50Q291bnQ9aztpZihqLnBvaW50UmFuZ2U9PT1udWxsKXRoaXMucG9pbnRSYW5nZT1nfHwxO3RoaXMuY2xvc2VzdFBvaW50UmFuZ2U9Z30sY3JvcERhdGE6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS5sZW5ndGgsZj0wLGc9ZSxoPXAodGhpcy5jcm9wU2hvdWxkZXIsMSksaTtmb3IoaT0wO2k8ZTtpKyspaWYoYVtpXT49Yyl7Zj10KDAsaS1oKTticmVha31mb3IoO2k8XG5lO2krKylpZihhW2ldPmQpe2c9aStoO2JyZWFrfXJldHVybnt4RGF0YTphLnNsaWNlKGYsZykseURhdGE6Yi5zbGljZShmLGcpLHN0YXJ0OmYsZW5kOmd9fSxnZW5lcmF0ZVBvaW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3B0aW9ucy5kYXRhLGI9dGhpcy5kYXRhLGMsZD10aGlzLnByb2Nlc3NlZFhEYXRhLGU9dGhpcy5wcm9jZXNzZWRZRGF0YSxmPXRoaXMucG9pbnRDbGFzcyxnPWQubGVuZ3RoLGg9dGhpcy5jcm9wU3RhcnR8fDAsaSxqPXRoaXMuaGFzR3JvdXBlZERhdGEsayxsPVtdLG47aWYoIWImJiFqKWI9W10sYi5sZW5ndGg9YS5sZW5ndGgsYj10aGlzLmRhdGE9Yjtmb3Iobj0wO248ZztuKyspaT1oK24saj9sW25dPShuZXcgZikuaW5pdCh0aGlzLFtkW25dXS5jb25jYXQocmEoZVtuXSkpKTooYltpXT9rPWJbaV06YVtpXSE9PXUmJihiW2ldPWs9KG5ldyBmKS5pbml0KHRoaXMsYVtpXSxkW25dKSksbFtuXT1rKSxsW25dLmluZGV4PWk7aWYoYiYmKGchPT0oYz1iLmxlbmd0aCl8fFxuaikpZm9yKG49MDtuPGM7bisrKWlmKG49PT1oJiYhaiYmKG4rPWcpLGJbbl0pYltuXS5kZXN0cm95RWxlbWVudHMoKSxiW25dLnBsb3RYPXU7dGhpcy5kYXRhPWI7dGhpcy5wb2ludHM9bH0sZ2V0RXh0cmVtZXM6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy55QXhpcyxjPXRoaXMucHJvY2Vzc2VkWERhdGEsZCxlPVtdLGY9MDtkPXRoaXMueEF4aXMuZ2V0RXh0cmVtZXMoKTt2YXIgZz1kLm1pbixoPWQubWF4LGksaixrLGwsYT1hfHx0aGlzLnN0YWNrZWRZRGF0YXx8dGhpcy5wcm9jZXNzZWRZRGF0YTtkPWEubGVuZ3RoO2ZvcihsPTA7bDxkO2wrKylpZihqPWNbbF0saz1hW2xdLGk9ayE9PW51bGwmJmshPT11JiYoIWIuaXNMb2d8fGsubGVuZ3RofHxrPjApLGo9dGhpcy5nZXRFeHRyZW1lc0Zyb21BbGx8fHRoaXMuY3JvcHBlZHx8KGNbbCsxXXx8aik+PWcmJihjW2wtMV18fGopPD1oLGkmJmopaWYoaT1rLmxlbmd0aClmb3IoO2ktLTspa1tpXSE9PW51bGwmJihlW2YrK109a1tpXSk7ZWxzZSBlW2YrK109XG5rO3RoaXMuZGF0YU1pbj1wKHZvaWQgMCxPYShlKSk7dGhpcy5kYXRhTWF4PXAodm9pZCAwLENhKGUpKX0sdHJhbnNsYXRlOmZ1bmN0aW9uKCl7dGhpcy5wcm9jZXNzZWRYRGF0YXx8dGhpcy5wcm9jZXNzRGF0YSgpO3RoaXMuZ2VuZXJhdGVQb2ludHMoKTtmb3IodmFyIGE9dGhpcy5vcHRpb25zLGI9YS5zdGFja2luZyxjPXRoaXMueEF4aXMsZD1jLmNhdGVnb3JpZXMsZT10aGlzLnlBeGlzLGY9dGhpcy5wb2ludHMsZz1mLmxlbmd0aCxoPSEhdGhpcy5tb2RpZnlWYWx1ZSxpPWEucG9pbnRQbGFjZW1lbnQsaj1pPT09XCJiZXR3ZWVuXCJ8fGphKGkpLGs9YS50aHJlc2hvbGQsYT0wO2E8ZzthKyspe3ZhciBsPWZbYV0sbj1sLngsbT1sLnksbz1sLmxvdyxxPWImJmUuc3RhY2tzWyh0aGlzLm5lZ1N0YWNrcyYmbTxrP1wiLVwiOlwiXCIpK3RoaXMuc3RhY2tLZXldO2lmKGUuaXNMb2cmJm08PTApbC55PW09bnVsbCxoYSgxMCk7bC5wbG90WD1jLnRyYW5zbGF0ZShuLDAsMCwwLDEsaSx0aGlzLnR5cGU9PT1cblwiZmxhZ3NcIik7aWYoYiYmdGhpcy52aXNpYmxlJiZxJiZxW25dKXE9cVtuXSxtPXEucG9pbnRzW3RoaXMuaW5kZXgrXCIsXCIrYV0sbz1tWzBdLG09bVsxXSxvPT09MCYmKG89cChrLGUubWluKSksZS5pc0xvZyYmbzw9MCYmKG89bnVsbCksbC50b3RhbD1sLnN0YWNrVG90YWw9cS50b3RhbCxsLnBlcmNlbnRhZ2U9cS50b3RhbCYmbC55L3EudG90YWwqMTAwLGwuc3RhY2tZPW0scS5zZXRPZmZzZXQodGhpcy5wb2ludFhPZmZzZXR8fDAsdGhpcy5iYXJXfHwwKTtsLnlCb3R0b209cyhvKT9lLnRyYW5zbGF0ZShvLDAsMSwwLDEpOm51bGw7aCYmKG09dGhpcy5tb2RpZnlWYWx1ZShtLGwpKTtsLnBsb3RZPXR5cGVvZiBtPT09XCJudW1iZXJcIiYmbSE9PUluZmluaXR5P2UudHJhbnNsYXRlKG0sMCwxLDAsMSk6dTtsLmNsaWVudFg9aj9jLnRyYW5zbGF0ZShuLDAsMCwwLDEpOmwucGxvdFg7bC5uZWdhdGl2ZT1sLnk8KGt8fDApO2wuY2F0ZWdvcnk9ZCYmZFtsLnhdIT09dT9kW2wueF06bC54fXRoaXMuZ2V0U2VnbWVudHMoKX0sXG5hbmltYXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuY2hhcnQsYz1iLnJlbmRlcmVyLGQ7ZD10aGlzLm9wdGlvbnMuYW5pbWF0aW9uO3ZhciBlPXRoaXMuY2xpcEJveHx8Yi5jbGlwQm94LGY9Yi5pbnZlcnRlZCxnO2lmKGQmJiFkYShkKSlkPWNhW3RoaXMudHlwZV0uYW5pbWF0aW9uO2c9W1wiX3NoYXJlZENsaXBcIixkLmR1cmF0aW9uLGQuZWFzaW5nLGUuaGVpZ2h0XS5qb2luKFwiLFwiKTthPyhhPWJbZ10sZD1iW2crXCJtXCJdLGF8fChiW2ddPWE9Yy5jbGlwUmVjdChyKGUse3dpZHRoOjB9KSksYltnK1wibVwiXT1kPWMuY2xpcFJlY3QoLTk5LGY/LWIucGxvdExlZnQ6LWIucGxvdFRvcCw5OSxmP2IuY2hhcnRXaWR0aDpiLmNoYXJ0SGVpZ2h0KSksdGhpcy5ncm91cC5jbGlwKGEpLHRoaXMubWFya2VyR3JvdXAuY2xpcChkKSx0aGlzLnNoYXJlZENsaXBLZXk9Zyk6KChhPWJbZ10pJiZhLmFuaW1hdGUoe3dpZHRoOmIucGxvdFNpemVYfSxkKSxiW2crXCJtXCJdJiZiW2crXCJtXCJdLmFuaW1hdGUoe3dpZHRoOmIucGxvdFNpemVYK1xuOTl9LGQpLHRoaXMuYW5pbWF0ZT1udWxsKX0sYWZ0ZXJBbmltYXRlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGFydCxiPXRoaXMuc2hhcmVkQ2xpcEtleSxjPXRoaXMuZ3JvdXAsZD10aGlzLmNsaXBCb3g7aWYoYyYmdGhpcy5vcHRpb25zLmNsaXAhPT0hMSl7aWYoIWJ8fCFkKWMuY2xpcChkP2EucmVuZGVyZXIuY2xpcFJlY3QoZCk6YS5jbGlwUmVjdCk7dGhpcy5tYXJrZXJHcm91cC5jbGlwKCl9SSh0aGlzLFwiYWZ0ZXJBbmltYXRlXCIpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiJiZhW2JdJiYoZHx8KGFbYl09YVtiXS5kZXN0cm95KCkpLGFbYitcIm1cIl0mJihhW2IrXCJtXCJdPWFbYitcIm1cIl0uZGVzdHJveSgpKSl9LDEwMCl9LGRyYXdQb2ludHM6ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMucG9pbnRzLGM9dGhpcy5jaGFydCxkLGUsZixnLGgsaSxqLGssbD10aGlzLm9wdGlvbnMubWFya2VyLG49dGhpcy5wb2ludEF0dHJbXCJcIl0sbSxvLHEsdD10aGlzLm1hcmtlckdyb3VwLHM9cChsLmVuYWJsZWQsXG4hdGhpcy5yZXF1aXJlU29ydGluZ3x8dGhpcy5hY3RpdmVQb2ludENvdW50PDAuNSp0aGlzLnhBeGlzLmxlbi9sLnJhZGl1cyk7aWYobC5lbmFibGVkIT09ITF8fHRoaXMuX2hhc1BvaW50TWFya2Vycylmb3IoZj1iLmxlbmd0aDtmLS07KWlmKGc9YltmXSxkPVUoZy5wbG90WCksZT1nLnBsb3RZLGs9Zy5ncmFwaGljLG09Zy5tYXJrZXJ8fHt9LG89ISFnLm1hcmtlcixhPXMmJm0uZW5hYmxlZD09PXV8fG0uZW5hYmxlZCxxPWMuaXNJbnNpZGVQbG90KHYoZCksZSxjLmludmVydGVkKSxhJiZlIT09dSYmIWlzTmFOKGUpJiZnLnkhPT1udWxsKWlmKGE9Zy5wb2ludEF0dHJbZy5zZWxlY3RlZD9cInNlbGVjdFwiOlwiXCJdfHxuLGg9YS5yLGk9cChtLnN5bWJvbCx0aGlzLnN5bWJvbCksaj1pLmluZGV4T2YoXCJ1cmxcIik9PT0wLGspa1txP1wic2hvd1wiOlwiaGlkZVwiXSghMCkuYW5pbWF0ZShyKHt4OmQtaCx5OmUtaH0say5zeW1ib2xOYW1lP3t3aWR0aDoyKmgsaGVpZ2h0OjIqaH06e30pKTtlbHNle2lmKHEmJlxuKGg+MHx8aikpZy5ncmFwaGljPWMucmVuZGVyZXIuc3ltYm9sKGksZC1oLGUtaCwyKmgsMipoLG8/bTpsKS5hdHRyKGEpLmFkZCh0KX1lbHNlIGlmKGspZy5ncmFwaGljPWsuZGVzdHJveSgpfSxjb252ZXJ0QXR0cmliczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnBvaW50QXR0clRvT3B0aW9ucyxmLGcsaD17fSxhPWF8fHt9LGI9Ynx8e30sYz1jfHx7fSxkPWR8fHt9O2ZvcihmIGluIGUpZz1lW2ZdLGhbZl09cChhW2ddLGJbZl0sY1tmXSxkW2ZdKTtyZXR1cm4gaH0sZ2V0QXR0cmliczpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm9wdGlvbnMsYz1jYVthLnR5cGVdLm1hcmtlcj9iLm1hcmtlcjpiLGQ9Yy5zdGF0ZXMsZT1kLmhvdmVyLGYsZz1hLmNvbG9yO2Y9e3N0cm9rZTpnLGZpbGw6Z307dmFyIGg9YS5wb2ludHN8fFtdLGksaj1bXSxrLGw9YS5wb2ludEF0dHJUb09wdGlvbnM7az1hLmhhc1BvaW50U3BlY2lmaWNPcHRpb25zO3ZhciBuPWIubmVnYXRpdmVDb2xvcixtPVxuYy5saW5lQ29sb3Isbz1jLmZpbGxDb2xvcjtpPWIudHVyYm9UaHJlc2hvbGQ7dmFyIHA7Yi5tYXJrZXI/KGUucmFkaXVzPWUucmFkaXVzfHxjLnJhZGl1cytlLnJhZGl1c1BsdXMsZS5saW5lV2lkdGg9ZS5saW5lV2lkdGh8fGMubGluZVdpZHRoK2UubGluZVdpZHRoUGx1cyk6ZS5jb2xvcj1lLmNvbG9yfHx5YShlLmNvbG9yfHxnKS5icmlnaHRlbihlLmJyaWdodG5lc3MpLmdldCgpO2pbXCJcIl09YS5jb252ZXJ0QXR0cmlicyhjLGYpO3EoW1wiaG92ZXJcIixcInNlbGVjdFwiXSxmdW5jdGlvbihiKXtqW2JdPWEuY29udmVydEF0dHJpYnMoZFtiXSxqW1wiXCJdKX0pO2EucG9pbnRBdHRyPWo7Zz1oLmxlbmd0aDtpZighaXx8ZzxpfHxrKWZvcig7Zy0tOyl7aT1oW2ddO2lmKChjPWkub3B0aW9ucyYmaS5vcHRpb25zLm1hcmtlcnx8aS5vcHRpb25zKSYmYy5lbmFibGVkPT09ITEpYy5yYWRpdXM9MDtpZihpLm5lZ2F0aXZlJiZuKWkuY29sb3I9aS5maWxsQ29sb3I9bjtrPWIuY29sb3JCeVBvaW50fHxcbmkuY29sb3I7aWYoaS5vcHRpb25zKWZvcihwIGluIGwpcyhjW2xbcF1dKSYmKGs9ITApO2lmKGspe2M9Y3x8e307az1bXTtkPWMuc3RhdGVzfHx7fTtmPWQuaG92ZXI9ZC5ob3Zlcnx8e307aWYoIWIubWFya2VyKWYuY29sb3I9Zi5jb2xvcnx8IWkub3B0aW9ucy5jb2xvciYmZS5jb2xvcnx8eWEoaS5jb2xvcikuYnJpZ2h0ZW4oZi5icmlnaHRuZXNzfHxlLmJyaWdodG5lc3MpLmdldCgpO2Y9e2NvbG9yOmkuY29sb3J9O2lmKCFvKWYuZmlsbENvbG9yPWkuY29sb3I7aWYoIW0pZi5saW5lQ29sb3I9aS5jb2xvcjtrW1wiXCJdPWEuY29udmVydEF0dHJpYnMocihmLGMpLGpbXCJcIl0pO2suaG92ZXI9YS5jb252ZXJ0QXR0cmlicyhkLmhvdmVyLGouaG92ZXIsa1tcIlwiXSk7ay5zZWxlY3Q9YS5jb252ZXJ0QXR0cmlicyhkLnNlbGVjdCxqLnNlbGVjdCxrW1wiXCJdKX1lbHNlIGs9ajtpLnBvaW50QXR0cj1rfX0sZGVzdHJveTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNoYXJ0LGM9L0FwcGxlV2ViS2l0XFwvNTMzLy50ZXN0KHdhKSxcbmQsZSxmPWEuZGF0YXx8W10sZyxoLGk7SShhLFwiZGVzdHJveVwiKTtYKGEpO3EoYS5heGlzVHlwZXN8fFtdLGZ1bmN0aW9uKGIpe2lmKGk9YVtiXSlsYShpLnNlcmllcyxhKSxpLmlzRGlydHk9aS5mb3JjZVJlZHJhdz0hMH0pO2EubGVnZW5kSXRlbSYmYS5jaGFydC5sZWdlbmQuZGVzdHJveUl0ZW0oYSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOykoZz1mW2VdKSYmZy5kZXN0cm95JiZnLmRlc3Ryb3koKTthLnBvaW50cz1udWxsO2NsZWFyVGltZW91dChhLmFuaW1hdGlvblRpbWVvdXQpO3EoXCJhcmVhLGdyYXBoLGRhdGFMYWJlbHNHcm91cCxncm91cCxtYXJrZXJHcm91cCx0cmFja2VyLGdyYXBoTmVnLGFyZWFOZWcscG9zQ2xpcCxuZWdDbGlwXCIuc3BsaXQoXCIsXCIpLGZ1bmN0aW9uKGIpe2FbYl0mJihkPWMmJmI9PT1cImdyb3VwXCI/XCJoaWRlXCI6XCJkZXN0cm95XCIsYVtiXVtkXSgpKX0pO2lmKGIuaG92ZXJTZXJpZXM9PT1hKWIuaG92ZXJTZXJpZXM9bnVsbDtsYShiLnNlcmllcyxhKTtmb3IoaCBpbiBhKWRlbGV0ZSBhW2hdfSxcbmdldFNlZ21lbnRQYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1bXSxkPWIub3B0aW9ucy5zdGVwO3EoYSxmdW5jdGlvbihlLGYpe3ZhciBnPWUucGxvdFgsaD1lLnBsb3RZLGk7Yi5nZXRQb2ludFNwbGluZT9jLnB1c2guYXBwbHkoYyxiLmdldFBvaW50U3BsaW5lKGEsZSxmKSk6KGMucHVzaChmP1wiTFwiOlwiTVwiKSxkJiZmJiYoaT1hW2YtMV0sZD09PVwicmlnaHRcIj9jLnB1c2goaS5wbG90WCxoKTpkPT09XCJjZW50ZXJcIj9jLnB1c2goKGkucGxvdFgrZykvMixpLnBsb3RZLChpLnBsb3RYK2cpLzIsaCk6Yy5wdXNoKGcsaS5wbG90WSkpLGMucHVzaChlLnBsb3RYLGUucGxvdFkpKX0pO3JldHVybiBjfSxnZXRHcmFwaFBhdGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9W10sYyxkPVtdO3EoYS5zZWdtZW50cyxmdW5jdGlvbihlKXtjPWEuZ2V0U2VnbWVudFBhdGgoZSk7ZS5sZW5ndGg+MT9iPWIuY29uY2F0KGMpOmQucHVzaChlWzBdKX0pO2Euc2luZ2xlUG9pbnRzPWQ7cmV0dXJuIGEuZ3JhcGhQYXRoPVxuYn0sZHJhd0dyYXBoOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPXRoaXMub3B0aW9ucyxjPVtbXCJncmFwaFwiLGIubGluZUNvbG9yfHx0aGlzLmNvbG9yXV0sZD1iLmxpbmVXaWR0aCxlPWIuZGFzaFN0eWxlLGY9Yi5saW5lY2FwIT09XCJzcXVhcmVcIixnPXRoaXMuZ2V0R3JhcGhQYXRoKCksaD1iLm5lZ2F0aXZlQ29sb3I7aCYmYy5wdXNoKFtcImdyYXBoTmVnXCIsaF0pO3EoYyxmdW5jdGlvbihjLGgpe3ZhciBrPWNbMF0sbD1hW2tdO2lmKGwpYmIobCksbC5hbmltYXRlKHtkOmd9KTtlbHNlIGlmKGQmJmcubGVuZ3RoKWw9e3N0cm9rZTpjWzFdLFwic3Ryb2tlLXdpZHRoXCI6ZCxmaWxsOlAsekluZGV4OjF9LGU/bC5kYXNoc3R5bGU9ZTpmJiYobFtcInN0cm9rZS1saW5lY2FwXCJdPWxbXCJzdHJva2UtbGluZWpvaW5cIl09XCJyb3VuZFwiKSxhW2tdPWEuY2hhcnQucmVuZGVyZXIucGF0aChnKS5hdHRyKGwpLmFkZChhLmdyb3VwKS5zaGFkb3coIWgmJmIuc2hhZG93KX0pfSxjbGlwTmVnOmZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLm9wdGlvbnMsYj10aGlzLmNoYXJ0LGM9Yi5yZW5kZXJlcixkPWEubmVnYXRpdmVDb2xvcnx8YS5uZWdhdGl2ZUZpbGxDb2xvcixlLGY9dGhpcy5ncmFwaCxnPXRoaXMuYXJlYSxoPXRoaXMucG9zQ2xpcCxpPXRoaXMubmVnQ2xpcDtlPWIuY2hhcnRXaWR0aDt2YXIgaj1iLmNoYXJ0SGVpZ2h0LGs9dChlLGopLGw9dGhpcy55QXhpcztpZihkJiYoZnx8Zykpe2Q9dihsLnRvUGl4ZWxzKGEudGhyZXNob2xkfHwwLCEwKSk7ZDwwJiYoay09ZCk7YT17eDowLHk6MCx3aWR0aDprLGhlaWdodDpkfTtrPXt4OjAseTpkLHdpZHRoOmssaGVpZ2h0Omt9O2lmKGIuaW52ZXJ0ZWQpYS5oZWlnaHQ9ay55PWIucGxvdFdpZHRoLWQsYy5pc1ZNTCYmKGE9e3g6Yi5wbG90V2lkdGgtZC1iLnBsb3RMZWZ0LHk6MCx3aWR0aDplLGhlaWdodDpqfSxrPXt4OmQrYi5wbG90TGVmdC1lLHk6MCx3aWR0aDpiLnBsb3RMZWZ0K2QsaGVpZ2h0OmV9KTtsLnJldmVyc2VkPyhiPWssZT1hKTooYj1hLGU9ayk7aD9cbihoLmFuaW1hdGUoYiksaS5hbmltYXRlKGUpKToodGhpcy5wb3NDbGlwPWg9Yy5jbGlwUmVjdChiKSx0aGlzLm5lZ0NsaXA9aT1jLmNsaXBSZWN0KGUpLGYmJnRoaXMuZ3JhcGhOZWcmJihmLmNsaXAoaCksdGhpcy5ncmFwaE5lZy5jbGlwKGkpKSxnJiYoZy5jbGlwKGgpLHRoaXMuYXJlYU5lZy5jbGlwKGkpKSl9fSxpbnZlcnRHcm91cHM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGE9e3dpZHRoOmIueUF4aXMubGVuLGhlaWdodDpiLnhBeGlzLmxlbn07cShbXCJncm91cFwiLFwibWFya2VyR3JvdXBcIl0sZnVuY3Rpb24oYyl7YltjXSYmYltjXS5hdHRyKGEpLmludmVydCgpfSl9dmFyIGI9dGhpcyxjPWIuY2hhcnQ7aWYoYi54QXhpcylOKGMsXCJyZXNpemVcIixhKSxOKGIsXCJkZXN0cm95XCIsZnVuY3Rpb24oKXtYKGMsXCJyZXNpemVcIixhKX0pLGEoKSxiLmludmVydEdyb3Vwcz1hfSxwbG90R3JvdXA6ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzW2FdLGc9IWY7ZyYmKHRoaXNbYV09XG5mPXRoaXMuY2hhcnQucmVuZGVyZXIuZyhiKS5hdHRyKHt2aXNpYmlsaXR5OmMsekluZGV4OmR8fDAuMX0pLmFkZChlKSk7ZltnP1wiYXR0clwiOlwiYW5pbWF0ZVwiXSh0aGlzLmdldFBsb3RCb3goKSk7cmV0dXJuIGZ9LGdldFBsb3RCb3g6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNoYXJ0LGI9dGhpcy54QXhpcyxjPXRoaXMueUF4aXM7aWYoYS5pbnZlcnRlZCliPWMsYz10aGlzLnhBeGlzO3JldHVybnt0cmFuc2xhdGVYOmI/Yi5sZWZ0OmEucGxvdExlZnQsdHJhbnNsYXRlWTpjP2MudG9wOmEucGxvdFRvcCxzY2FsZVg6MSxzY2FsZVk6MX19LHJlbmRlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNoYXJ0LGMsZD1hLm9wdGlvbnMsZT0oYz1kLmFuaW1hdGlvbikmJiEhYS5hbmltYXRlJiZiLnJlbmRlcmVyLmlzU1ZHJiZwKGMuZHVyYXRpb24sNTAwKXx8MCxmPWEudmlzaWJsZT9cInZpc2libGVcIjpcImhpZGRlblwiLGc9ZC56SW5kZXgsaD1hLmhhc1JlbmRlcmVkLGk9Yi5zZXJpZXNHcm91cDtcbmM9YS5wbG90R3JvdXAoXCJncm91cFwiLFwic2VyaWVzXCIsZixnLGkpO2EubWFya2VyR3JvdXA9YS5wbG90R3JvdXAoXCJtYXJrZXJHcm91cFwiLFwibWFya2Vyc1wiLGYsZyxpKTtlJiZhLmFuaW1hdGUoITApO2EuZ2V0QXR0cmlicygpO2MuaW52ZXJ0ZWQ9YS5pc0NhcnRlc2lhbj9iLmludmVydGVkOiExO2EuZHJhd0dyYXBoJiYoYS5kcmF3R3JhcGgoKSxhLmNsaXBOZWcoKSk7cShhLnBvaW50cyxmdW5jdGlvbihhKXthLnJlZHJhdyYmYS5yZWRyYXcoKX0pO2EuZHJhd0RhdGFMYWJlbHMmJmEuZHJhd0RhdGFMYWJlbHMoKTthLnZpc2libGUmJmEuZHJhd1BvaW50cygpO2EuZHJhd1RyYWNrZXImJmEub3B0aW9ucy5lbmFibGVNb3VzZVRyYWNraW5nIT09ITEmJmEuZHJhd1RyYWNrZXIoKTtiLmludmVydGVkJiZhLmludmVydEdyb3VwcygpO2QuY2xpcCE9PSExJiYhYS5zaGFyZWRDbGlwS2V5JiYhaCYmYy5jbGlwKGIuY2xpcFJlY3QpO2UmJmEuYW5pbWF0ZSgpO2lmKCFoKWU/YS5hbmltYXRpb25UaW1lb3V0PVxuc2V0VGltZW91dChmdW5jdGlvbigpe2EuYWZ0ZXJBbmltYXRlKCl9LGUpOmEuYWZ0ZXJBbmltYXRlKCk7YS5pc0RpcnR5PWEuaXNEaXJ0eURhdGE9ITE7YS5oYXNSZW5kZXJlZD0hMH0scmVkcmF3OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jaGFydCxiPXRoaXMuaXNEaXJ0eURhdGEsYz10aGlzLmdyb3VwLGQ9dGhpcy54QXhpcyxlPXRoaXMueUF4aXM7YyYmKGEuaW52ZXJ0ZWQmJmMuYXR0cih7d2lkdGg6YS5wbG90V2lkdGgsaGVpZ2h0OmEucGxvdEhlaWdodH0pLGMuYW5pbWF0ZSh7dHJhbnNsYXRlWDpwKGQmJmQubGVmdCxhLnBsb3RMZWZ0KSx0cmFuc2xhdGVZOnAoZSYmZS50b3AsYS5wbG90VG9wKX0pKTt0aGlzLnRyYW5zbGF0ZSgpO3RoaXMuc2V0VG9vbHRpcFBvaW50cyYmdGhpcy5zZXRUb29sdGlwUG9pbnRzKCEwKTt0aGlzLnJlbmRlcigpO2ImJkkodGhpcyxcInVwZGF0ZWREYXRhXCIpfX07R2IucHJvdG90eXBlPXtkZXN0cm95OmZ1bmN0aW9uKCl7UGEodGhpcyx0aGlzLmF4aXMpfSxcbnJlbmRlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz1iLmZvcm1hdCxjPWM/SmEoYyx0aGlzKTpiLmZvcm1hdHRlci5jYWxsKHRoaXMpO3RoaXMubGFiZWw/dGhpcy5sYWJlbC5hdHRyKHt0ZXh0OmMsdmlzaWJpbGl0eTpcImhpZGRlblwifSk6dGhpcy5sYWJlbD10aGlzLmF4aXMuY2hhcnQucmVuZGVyZXIudGV4dChjLG51bGwsbnVsbCxiLnVzZUhUTUwpLmNzcyhiLnN0eWxlKS5hdHRyKHthbGlnbjp0aGlzLnRleHRBbGlnbixyb3RhdGlvbjpiLnJvdGF0aW9uLHZpc2liaWxpdHk6XCJoaWRkZW5cIn0pLmFkZChhKX0sc2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5heGlzLGQ9Yy5jaGFydCxlPWQuaW52ZXJ0ZWQsZj10aGlzLmlzTmVnYXRpdmUsZz1jLnRyYW5zbGF0ZShjLnVzZVBlcmNlbnRhZ2U/MTAwOnRoaXMudG90YWwsMCwwLDAsMSksYz1jLnRyYW5zbGF0ZSgwKSxjPVEoZy1jKSxoPWQueEF4aXNbMF0udHJhbnNsYXRlKHRoaXMueCkrYSxpPWQucGxvdEhlaWdodCxcbmY9e3g6ZT9mP2c6Zy1jOmgseTplP2ktaC1iOmY/aS1nLWM6aS1nLHdpZHRoOmU/YzpiLGhlaWdodDplP2I6Y307aWYoZT10aGlzLmxhYmVsKWUuYWxpZ24odGhpcy5hbGlnbk9wdGlvbnMsbnVsbCxmKSxmPWUuYWxpZ25BdHRyLGVbdGhpcy5vcHRpb25zLmNyb3A9PT0hMXx8ZC5pc0luc2lkZVBsb3QoZi54LGYueSk/XCJzaG93XCI6XCJoaWRlXCJdKCEwKX19O25hLnByb3RvdHlwZS5idWlsZFN0YWNrcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuc2VyaWVzLGI9cCh0aGlzLm9wdGlvbnMucmV2ZXJzZWRTdGFja3MsITApLGM9YS5sZW5ndGg7aWYoIXRoaXMuaXNYQXhpcyl7Zm9yKHRoaXMudXNlUGVyY2VudGFnZT0hMTtjLS07KWFbYj9jOmEubGVuZ3RoLWMtMV0uc2V0U3RhY2tlZFBvaW50cygpO2lmKHRoaXMudXNlUGVyY2VudGFnZSlmb3IoYz0wO2M8YS5sZW5ndGg7YysrKWFbY10uc2V0UGVyY2VudFN0YWNrcygpfX07bmEucHJvdG90eXBlLnJlbmRlclN0YWNrVG90YWxzPWZ1bmN0aW9uKCl7dmFyIGE9XG50aGlzLmNoYXJ0LGI9YS5yZW5kZXJlcixjPXRoaXMuc3RhY2tzLGQsZSxmPXRoaXMuc3RhY2tUb3RhbEdyb3VwO2lmKCFmKXRoaXMuc3RhY2tUb3RhbEdyb3VwPWY9Yi5nKFwic3RhY2stbGFiZWxzXCIpLmF0dHIoe3Zpc2liaWxpdHk6XCJ2aXNpYmxlXCIsekluZGV4OjZ9KS5hZGQoKTtmLnRyYW5zbGF0ZShhLnBsb3RMZWZ0LGEucGxvdFRvcCk7Zm9yKGQgaW4gYylmb3IoZSBpbiBhPWNbZF0sYSlhW2VdLnJlbmRlcihmKX07Ty5wcm90b3R5cGUuc2V0U3RhY2tlZFBvaW50cz1mdW5jdGlvbigpe2lmKHRoaXMub3B0aW9ucy5zdGFja2luZyYmISh0aGlzLnZpc2libGUhPT0hMCYmdGhpcy5jaGFydC5vcHRpb25zLmNoYXJ0Lmlnbm9yZUhpZGRlblNlcmllcyE9PSExKSl7dmFyIGE9dGhpcy5wcm9jZXNzZWRYRGF0YSxiPXRoaXMucHJvY2Vzc2VkWURhdGEsYz1bXSxkPWIubGVuZ3RoLGU9dGhpcy5vcHRpb25zLGY9ZS50aHJlc2hvbGQsZz1lLnN0YWNrLGU9ZS5zdGFja2luZyxoPXRoaXMuc3RhY2tLZXksXG5pPVwiLVwiK2gsaj10aGlzLm5lZ1N0YWNrcyxrPXRoaXMueUF4aXMsbD1rLnN0YWNrcyxuPWsub2xkU3RhY2tzLG0sbyxwLHEscixzO2ZvcihxPTA7cTxkO3ErKyl7cj1hW3FdO3M9YltxXTtwPXRoaXMuaW5kZXgrXCIsXCIrcTtvPShtPWomJnM8Zik/aTpoO2xbb118fChsW29dPXt9KTtpZighbFtvXVtyXSluW29dJiZuW29dW3JdPyhsW29dW3JdPW5bb11bcl0sbFtvXVtyXS50b3RhbD1udWxsKTpsW29dW3JdPW5ldyBHYihrLGsub3B0aW9ucy5zdGFja0xhYmVscyxtLHIsZyk7bz1sW29dW3JdO28ucG9pbnRzW3BdPVtvLmN1bXx8MF07ZT09PVwicGVyY2VudFwiPyhtPW0/aDppLGomJmxbbV0mJmxbbV1bcl0/KG09bFttXVtyXSxvLnRvdGFsPW0udG90YWw9dChtLnRvdGFsLG8udG90YWwpK1Eocyl8fDApOm8udG90YWw9ZWEoby50b3RhbCsoUShzKXx8MCkpKTpvLnRvdGFsPWVhKG8udG90YWwrKHN8fDApKTtvLmN1bT0oby5jdW18fDApKyhzfHwwKTtvLnBvaW50c1twXS5wdXNoKG8uY3VtKTtcbmNbcV09by5jdW19aWYoZT09PVwicGVyY2VudFwiKWsudXNlUGVyY2VudGFnZT0hMDt0aGlzLnN0YWNrZWRZRGF0YT1jO2sub2xkU3RhY2tzPXt9fX07Ty5wcm90b3R5cGUuc2V0UGVyY2VudFN0YWNrcz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLnN0YWNrS2V5LGM9YS55QXhpcy5zdGFja3MsZD1hLnByb2Nlc3NlZFhEYXRhO3EoW2IsXCItXCIrYl0sZnVuY3Rpb24oYil7dmFyIGU7Zm9yKHZhciBmPWQubGVuZ3RoLGcsaDtmLS07KWlmKGc9ZFtmXSxlPShoPWNbYl0mJmNbYl1bZ10pJiZoLnBvaW50c1thLmluZGV4K1wiLFwiK2ZdLGc9ZSloPWgudG90YWw/MTAwL2gudG90YWw6MCxnWzBdPWVhKGdbMF0qaCksZ1sxXT1lYShnWzFdKmgpLGEuc3RhY2tlZFlEYXRhW2ZdPWdbMV19KX07cihZYS5wcm90b3R5cGUse2FkZFNlcmllczpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzO2EmJihiPXAoYiwhMCksSShlLFwiYWRkU2VyaWVzXCIse29wdGlvbnM6YX0sZnVuY3Rpb24oKXtkPWUuaW5pdFNlcmllcyhhKTtcbmUuaXNEaXJ0eUxlZ2VuZD0hMDtlLmxpbmtTZXJpZXMoKTtiJiZlLnJlZHJhdyhjKX0pKTtyZXR1cm4gZH0sYWRkQXhpczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1iP1wieEF4aXNcIjpcInlBeGlzXCIsZj10aGlzLm9wdGlvbnM7bmV3IG5hKHRoaXMsdyhhLHtpbmRleDp0aGlzW2VdLmxlbmd0aCxpc1g6Yn0pKTtmW2VdPXJhKGZbZV18fHt9KTtmW2VdLnB1c2goYSk7cChjLCEwKSYmdGhpcy5yZWRyYXcoZCl9LHNob3dMb2FkaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsYz1iLm9wdGlvbnMsZD1iLmxvYWRpbmdEaXYsZT1jLmxvYWRpbmcsZj1mdW5jdGlvbigpe2QmJkIoZCx7bGVmdDpiLnBsb3RMZWZ0K1wicHhcIix0b3A6Yi5wbG90VG9wK1wicHhcIix3aWR0aDpiLnBsb3RXaWR0aCtcInB4XCIsaGVpZ2h0OmIucGxvdEhlaWdodCtcInB4XCJ9KX07aWYoIWQpYi5sb2FkaW5nRGl2PWQ9JChLYSx7Y2xhc3NOYW1lOlwiaGlnaGNoYXJ0cy1sb2FkaW5nXCJ9LHIoZS5zdHlsZSx7ekluZGV4OjEwLGRpc3BsYXk6UH0pLFxuYi5jb250YWluZXIpLGIubG9hZGluZ1NwYW49JChcInNwYW5cIixudWxsLGUubGFiZWxTdHlsZSxkKSxOKGIsXCJyZWRyYXdcIixmKTtiLmxvYWRpbmdTcGFuLmlubmVySFRNTD1hfHxjLmxhbmcubG9hZGluZztpZighYi5sb2FkaW5nU2hvd24pQihkLHtvcGFjaXR5OjAsZGlzcGxheTpcIlwifSksamIoZCx7b3BhY2l0eTplLnN0eWxlLm9wYWNpdHl9LHtkdXJhdGlvbjplLnNob3dEdXJhdGlvbnx8MH0pLGIubG9hZGluZ1Nob3duPSEwO2YoKX0saGlkZUxvYWRpbmc6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9wdGlvbnMsYj10aGlzLmxvYWRpbmdEaXY7YiYmamIoYix7b3BhY2l0eTowfSx7ZHVyYXRpb246YS5sb2FkaW5nLmhpZGVEdXJhdGlvbnx8MTAwLGNvbXBsZXRlOmZ1bmN0aW9uKCl7QihiLHtkaXNwbGF5OlB9KX19KTt0aGlzLmxvYWRpbmdTaG93bj0hMX19KTtyKEZhLnByb3RvdHlwZSx7dXBkYXRlOmZ1bmN0aW9uKGEsYixjLGQpe2Z1bmN0aW9uIGUoKXtmLmFwcGx5T3B0aW9ucyhhKTtpZihkYShhKSYmXG4hSGEoYSkpZi5yZWRyYXc9ZnVuY3Rpb24oKXtpZihoKWEmJmEubWFya2VyJiZhLm1hcmtlci5zeW1ib2w/Zi5ncmFwaGljPWguZGVzdHJveSgpOmguYXR0cihmLnBvaW50QXR0cltmLnN0YXRlfHxcIlwiXSk7aWYoYSYmYS5kYXRhTGFiZWxzJiZmLmRhdGFMYWJlbClmLmRhdGFMYWJlbD1mLmRhdGFMYWJlbC5kZXN0cm95KCk7Zi5yZWRyYXc9bnVsbH07aT1mLmluZGV4O2cudXBkYXRlUGFyYWxsZWxBcnJheXMoZixpKTtrLmRhdGFbaV09Zi5vcHRpb25zO2cuaXNEaXJ0eT1nLmlzRGlydHlEYXRhPSEwO2lmKCFnLmZpeGVkQm94JiZnLmhhc0NhcnRlc2lhblNlcmllcylqLmlzRGlydHlCb3g9ITA7ay5sZWdlbmRUeXBlPT09XCJwb2ludFwiJiZqLmxlZ2VuZC5kZXN0cm95SXRlbShmKTtiJiZqLnJlZHJhdyhjKX12YXIgZj10aGlzLGc9Zi5zZXJpZXMsaD1mLmdyYXBoaWMsaSxqPWcuY2hhcnQsaz1nLm9wdGlvbnMsYj1wKGIsITApO2Q9PT0hMT9lKCk6Zi5maXJlUG9pbnRFdmVudChcInVwZGF0ZVwiLFxue29wdGlvbnM6YX0sZSl9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLnNlcmllcyxlPWQucG9pbnRzLGY9ZC5jaGFydCxnLGg9ZC5kYXRhO1JhKGIsZik7YT1wKGEsITApO2MuZmlyZVBvaW50RXZlbnQoXCJyZW1vdmVcIixudWxsLGZ1bmN0aW9uKCl7Zz1NYShjLGgpO2gubGVuZ3RoPT09ZS5sZW5ndGgmJmUuc3BsaWNlKGcsMSk7aC5zcGxpY2UoZywxKTtkLm9wdGlvbnMuZGF0YS5zcGxpY2UoZywxKTtkLnVwZGF0ZVBhcmFsbGVsQXJyYXlzKGMsXCJzcGxpY2VcIixnLDEpO2MuZGVzdHJveSgpO2QuaXNEaXJ0eT0hMDtkLmlzRGlydHlEYXRhPSEwO2EmJmYucmVkcmF3KCl9KX19KTtyKE8ucHJvdG90eXBlLHthZGRQb2ludDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLm9wdGlvbnMsZj10aGlzLmRhdGEsZz10aGlzLmdyYXBoLGg9dGhpcy5hcmVhLGk9dGhpcy5jaGFydCxqPXRoaXMueEF4aXMmJnRoaXMueEF4aXMubmFtZXMsaz1nJiZnLnNoaWZ0fHwwLGw9ZS5kYXRhLFxubixtPXRoaXMueERhdGE7UmEoZCxpKTtjJiZxKFtnLGgsdGhpcy5ncmFwaE5lZyx0aGlzLmFyZWFOZWddLGZ1bmN0aW9uKGEpe2lmKGEpYS5zaGlmdD1rKzF9KTtpZihoKWguaXNBcmVhPSEwO2I9cChiLCEwKTtkPXtzZXJpZXM6dGhpc307dGhpcy5wb2ludENsYXNzLnByb3RvdHlwZS5hcHBseU9wdGlvbnMuYXBwbHkoZCxbYV0pO2c9ZC54O2g9bS5sZW5ndGg7aWYodGhpcy5yZXF1aXJlU29ydGluZyYmZzxtW2gtMV0pZm9yKG49ITA7aCYmbVtoLTFdPmc7KWgtLTt0aGlzLnVwZGF0ZVBhcmFsbGVsQXJyYXlzKGQsXCJzcGxpY2VcIixoLDAsMCk7dGhpcy51cGRhdGVQYXJhbGxlbEFycmF5cyhkLGgpO2lmKGomJmQubmFtZSlqW2ddPWQubmFtZTtsLnNwbGljZShoLDAsYSk7biYmKHRoaXMuZGF0YS5zcGxpY2UoaCwwLG51bGwpLHRoaXMucHJvY2Vzc0RhdGEoKSk7ZS5sZWdlbmRUeXBlPT09XCJwb2ludFwiJiZ0aGlzLmdlbmVyYXRlUG9pbnRzKCk7YyYmKGZbMF0mJmZbMF0ucmVtb3ZlP2ZbMF0ucmVtb3ZlKCExKTpcbihmLnNoaWZ0KCksdGhpcy51cGRhdGVQYXJhbGxlbEFycmF5cyhkLFwic2hpZnRcIiksbC5zaGlmdCgpKSk7dGhpcy5pc0RpcnR5RGF0YT10aGlzLmlzRGlydHk9ITA7YiYmKHRoaXMuZ2V0QXR0cmlicygpLGkucmVkcmF3KCkpfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLGQ9Yy5jaGFydCxhPXAoYSwhMCk7aWYoIWMuaXNSZW1vdmluZyljLmlzUmVtb3Zpbmc9ITAsSShjLFwicmVtb3ZlXCIsbnVsbCxmdW5jdGlvbigpe2MuZGVzdHJveSgpO2QuaXNEaXJ0eUxlZ2VuZD1kLmlzRGlydHlCb3g9ITA7ZC5saW5rU2VyaWVzKCk7YSYmZC5yZWRyYXcoYil9KTtjLmlzUmVtb3Zpbmc9ITF9LHVwZGF0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLmNoYXJ0LGU9dGhpcy51c2VyT3B0aW9ucyxmPXRoaXMudHlwZSxnPUhbZl0ucHJvdG90eXBlLGg9W1wiZ3JvdXBcIixcIm1hcmtlckdyb3VwXCIsXCJkYXRhTGFiZWxzR3JvdXBcIl0saTtxKGgsZnVuY3Rpb24oYSl7aFthXT1jW2FdO2RlbGV0ZSBjW2FdfSk7XG5hPXcoZSx7YW5pbWF0aW9uOiExLGluZGV4OnRoaXMuaW5kZXgscG9pbnRTdGFydDp0aGlzLnhEYXRhWzBdfSx7ZGF0YTp0aGlzLm9wdGlvbnMuZGF0YX0sYSk7dGhpcy5yZW1vdmUoITEpO2ZvcihpIGluIGcpZy5oYXNPd25Qcm9wZXJ0eShpKSYmKHRoaXNbaV09dSk7cih0aGlzLEhbYS50eXBlfHxmXS5wcm90b3R5cGUpO3EoaCxmdW5jdGlvbihhKXtjW2FdPWhbYV19KTt0aGlzLmluaXQoZCxhKTtkLmxpbmtTZXJpZXMoKTtwKGIsITApJiZkLnJlZHJhdyghMSl9fSk7cihuYS5wcm90b3R5cGUse3VwZGF0ZTpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY2hhcnQsYT1jLm9wdGlvbnNbdGhpcy5jb2xsXVt0aGlzLm9wdGlvbnMuaW5kZXhdPXcodGhpcy51c2VyT3B0aW9ucyxhKTt0aGlzLmRlc3Ryb3koITApO3RoaXMuX2FkZGVkUGxvdExCPXU7dGhpcy5pbml0KGMscihhLHtldmVudHM6dX0pKTtjLmlzRGlydHlCb3g9ITA7cChiLCEwKSYmYy5yZWRyYXcoKX0scmVtb3ZlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cbnRoaXMuY2hhcnQsYz10aGlzLmNvbGwsZD10aGlzLnNlcmllcyxlPWQubGVuZ3RoO2UtLTspZFtlXSYmZFtlXS5yZW1vdmUoITEpO2xhKGIuYXhlcyx0aGlzKTtsYShiW2NdLHRoaXMpO2Iub3B0aW9uc1tjXS5zcGxpY2UodGhpcy5vcHRpb25zLmluZGV4LDEpO3EoYltjXSxmdW5jdGlvbihhLGIpe2Eub3B0aW9ucy5pbmRleD1ifSk7dGhpcy5kZXN0cm95KCk7Yi5pc0RpcnR5Qm94PSEwO3AoYSwhMCkmJmIucmVkcmF3KCl9LHNldFRpdGxlOmZ1bmN0aW9uKGEsYil7dGhpcy51cGRhdGUoe3RpdGxlOmF9LGIpfSxzZXRDYXRlZ29yaWVzOmZ1bmN0aW9uKGEsYil7dGhpcy51cGRhdGUoe2NhdGVnb3JpZXM6YX0sYil9fSk7aWE9bWEoTyk7SC5saW5lPWlhO2NhLmFyZWE9dyhULHt0aHJlc2hvbGQ6MH0pO3ZhciBxYT1tYShPLHt0eXBlOlwiYXJlYVwiLGdldFNlZ21lbnRzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPVtdLGM9W10sZD1bXSxlPXRoaXMueEF4aXMsZj10aGlzLnlBeGlzLGc9Zi5zdGFja3NbdGhpcy5zdGFja0tleV0sXG5oPXt9LGksaixrPXRoaXMucG9pbnRzLGw9dGhpcy5vcHRpb25zLmNvbm5lY3ROdWxscyxuLG07aWYodGhpcy5vcHRpb25zLnN0YWNraW5nJiYhdGhpcy5jcm9wcGVkKXtmb3Iobj0wO248ay5sZW5ndGg7bisrKWhba1tuXS54XT1rW25dO2ZvcihtIGluIGcpZ1ttXS50b3RhbCE9PW51bGwmJmQucHVzaCgrbSk7ZC5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEtYn0pO3EoZCxmdW5jdGlvbihiKXt2YXIgZD0wLGs7aWYoIWx8fGhbYl0mJmhbYl0ueSE9PW51bGwpaWYoaFtiXSljLnB1c2goaFtiXSk7ZWxzZXtmb3Iobj1hLmluZGV4O248PWYuc2VyaWVzLmxlbmd0aDtuKyspaWYoaz1nW2JdLnBvaW50c1tuK1wiLFwiK2JdKXtkPWtbMV07YnJlYWt9aT1lLnRyYW5zbGF0ZShiKTtqPWYudG9QaXhlbHMoZCwhMCk7Yy5wdXNoKHt5Om51bGwscGxvdFg6aSxjbGllbnRYOmkscGxvdFk6aix5Qm90dG9tOmosb25Nb3VzZU92ZXI6c2F9KX19KTtjLmxlbmd0aCYmYi5wdXNoKGMpfWVsc2UgTy5wcm90b3R5cGUuZ2V0U2VnbWVudHMuY2FsbCh0aGlzKSxcbmI9dGhpcy5zZWdtZW50czt0aGlzLnNlZ21lbnRzPWJ9LGdldFNlZ21lbnRQYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPU8ucHJvdG90eXBlLmdldFNlZ21lbnRQYXRoLmNhbGwodGhpcyxhKSxjPVtdLmNvbmNhdChiKSxkLGU9dGhpcy5vcHRpb25zO2Q9Yi5sZW5ndGg7dmFyIGY9dGhpcy55QXhpcy5nZXRUaHJlc2hvbGQoZS50aHJlc2hvbGQpLGc7ZD09PTMmJmMucHVzaChcIkxcIixiWzFdLGJbMl0pO2lmKGUuc3RhY2tpbmcmJiF0aGlzLmNsb3NlZFN0YWNrcylmb3IoZD1hLmxlbmd0aC0xO2Q+PTA7ZC0tKWc9cChhW2RdLnlCb3R0b20sZiksZDxhLmxlbmd0aC0xJiZlLnN0ZXAmJmMucHVzaChhW2QrMV0ucGxvdFgsZyksYy5wdXNoKGFbZF0ucGxvdFgsZyk7ZWxzZSB0aGlzLmNsb3NlU2VnbWVudChjLGEsZik7dGhpcy5hcmVhUGF0aD10aGlzLmFyZWFQYXRoLmNvbmNhdChjKTtyZXR1cm4gYn0sY2xvc2VTZWdtZW50OmZ1bmN0aW9uKGEsYixjKXthLnB1c2goXCJMXCIsYltiLmxlbmd0aC0xXS5wbG90WCxcbmMsXCJMXCIsYlswXS5wbG90WCxjKX0sZHJhd0dyYXBoOmZ1bmN0aW9uKCl7dGhpcy5hcmVhUGF0aD1bXTtPLnByb3RvdHlwZS5kcmF3R3JhcGguYXBwbHkodGhpcyk7dmFyIGE9dGhpcyxiPXRoaXMuYXJlYVBhdGgsYz10aGlzLm9wdGlvbnMsZD1jLm5lZ2F0aXZlQ29sb3IsZT1jLm5lZ2F0aXZlRmlsbENvbG9yLGY9W1tcImFyZWFcIix0aGlzLmNvbG9yLGMuZmlsbENvbG9yXV07KGR8fGUpJiZmLnB1c2goW1wiYXJlYU5lZ1wiLGQsZV0pO3EoZixmdW5jdGlvbihkKXt2YXIgZT1kWzBdLGY9YVtlXTtmP2YuYW5pbWF0ZSh7ZDpifSk6YVtlXT1hLmNoYXJ0LnJlbmRlcmVyLnBhdGgoYikuYXR0cih7ZmlsbDpwKGRbMl0seWEoZFsxXSkuc2V0T3BhY2l0eShwKGMuZmlsbE9wYWNpdHksMC43NSkpLmdldCgpKSx6SW5kZXg6MH0pLmFkZChhLmdyb3VwKX0pfSxkcmF3TGVnZW5kU3ltYm9sOk0uZHJhd1JlY3RhbmdsZX0pO0guYXJlYT1xYTtjYS5zcGxpbmU9dyhUKTtpYT1tYShPLHt0eXBlOlwic3BsaW5lXCIsXG5nZXRQb2ludFNwbGluZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Yi5wbG90WCxlPWIucGxvdFksZj1hW2MtMV0sZz1hW2MrMV0saCxpLGosaztpZihmJiZnKXthPWYucGxvdFk7aj1nLnBsb3RYO3ZhciBnPWcucGxvdFksbDtoPSgxLjUqZCtmLnBsb3RYKS8yLjU7aT0oMS41KmUrYSkvMi41O2o9KDEuNSpkK2opLzIuNTtrPSgxLjUqZStnKS8yLjU7bD0oay1pKSooai1kKS8oai1oKStlLWs7aSs9bDtrKz1sO2k+YSYmaT5lPyhpPXQoYSxlKSxrPTIqZS1pKTppPGEmJmk8ZSYmKGk9TChhLGUpLGs9MiplLWkpO2s+ZyYmaz5lPyhrPXQoZyxlKSxpPTIqZS1rKTprPGcmJms8ZSYmKGs9TChnLGUpLGk9MiplLWspO2IucmlnaHRDb250WD1qO2IucmlnaHRDb250WT1rfWM/KGI9W1wiQ1wiLGYucmlnaHRDb250WHx8Zi5wbG90WCxmLnJpZ2h0Q29udFl8fGYucGxvdFksaHx8ZCxpfHxlLGQsZV0sZi5yaWdodENvbnRYPWYucmlnaHRDb250WT1udWxsKTpiPVtcIk1cIixkLGVdO3JldHVybiBifX0pO0guc3BsaW5lPVxuaWE7Y2EuYXJlYXNwbGluZT13KGNhLmFyZWEpO3FhPXFhLnByb3RvdHlwZTtpYT1tYShpYSx7dHlwZTpcImFyZWFzcGxpbmVcIixjbG9zZWRTdGFja3M6ITAsZ2V0U2VnbWVudFBhdGg6cWEuZ2V0U2VnbWVudFBhdGgsY2xvc2VTZWdtZW50OnFhLmNsb3NlU2VnbWVudCxkcmF3R3JhcGg6cWEuZHJhd0dyYXBoLGRyYXdMZWdlbmRTeW1ib2w6TS5kcmF3UmVjdGFuZ2xlfSk7SC5hcmVhc3BsaW5lPWlhO2NhLmNvbHVtbj13KFQse2JvcmRlckNvbG9yOlwiI0ZGRkZGRlwiLGJvcmRlclJhZGl1czowLGdyb3VwUGFkZGluZzowLjIsbWFya2VyOm51bGwscG9pbnRQYWRkaW5nOjAuMSxtaW5Qb2ludExlbmd0aDowLGNyb3BUaHJlc2hvbGQ6NTAscG9pbnRSYW5nZTpudWxsLHN0YXRlczp7aG92ZXI6e2JyaWdodG5lc3M6MC4xLHNoYWRvdzohMSxoYWxvOiExfSxzZWxlY3Q6e2NvbG9yOlwiI0MwQzBDMFwiLGJvcmRlckNvbG9yOlwiIzAwMDAwMFwiLHNoYWRvdzohMX19LGRhdGFMYWJlbHM6e2FsaWduOm51bGwsXG52ZXJ0aWNhbEFsaWduOm51bGwseTpudWxsfSxzdGlja3lUcmFja2luZzohMSx0b29sdGlwOntkaXN0YW5jZTo2fSx0aHJlc2hvbGQ6MH0pO2lhPW1hKE8se3R5cGU6XCJjb2x1bW5cIixwb2ludEF0dHJUb09wdGlvbnM6e3N0cm9rZTpcImJvcmRlckNvbG9yXCIsZmlsbDpcImNvbG9yXCIscjpcImJvcmRlclJhZGl1c1wifSxjcm9wU2hvdWxkZXI6MCx0cmFja2VyR3JvdXBzOltcImdyb3VwXCIsXCJkYXRhTGFiZWxzR3JvdXBcIl0sbmVnU3RhY2tzOiEwLGluaXQ6ZnVuY3Rpb24oKXtPLnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLGI9YS5jaGFydDtiLmhhc1JlbmRlcmVkJiZxKGIuc2VyaWVzLGZ1bmN0aW9uKGIpe2lmKGIudHlwZT09PWEudHlwZSliLmlzRGlydHk9ITB9KX0sZ2V0Q29sdW1uTWV0cmljczpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm9wdGlvbnMsYz1hLnhBeGlzLGQ9YS55QXhpcyxlPWMucmV2ZXJzZWQsZixnPXt9LGgsaT0wO2IuZ3JvdXBpbmc9PT1cbiExP2k9MTpxKGEuY2hhcnQuc2VyaWVzLGZ1bmN0aW9uKGIpe3ZhciBjPWIub3B0aW9ucyxlPWIueUF4aXM7aWYoYi50eXBlPT09YS50eXBlJiZiLnZpc2libGUmJmQubGVuPT09ZS5sZW4mJmQucG9zPT09ZS5wb3MpYy5zdGFja2luZz8oZj1iLnN0YWNrS2V5LGdbZl09PT11JiYoZ1tmXT1pKyspLGg9Z1tmXSk6Yy5ncm91cGluZyE9PSExJiYoaD1pKyspLGIuY29sdW1uSW5kZXg9aH0pO3ZhciBjPUwoUShjLnRyYW5zQSkqKGMub3JkaW5hbFNsb3BlfHxiLnBvaW50UmFuZ2V8fGMuY2xvc2VzdFBvaW50UmFuZ2V8fGMudGlja0ludGVydmFsfHwxKSxjLmxlbiksaj1jKmIuZ3JvdXBQYWRkaW5nLGs9KGMtMipqKS9pLGw9Yi5wb2ludFdpZHRoLGI9cyhsKT8oay1sKS8yOmsqYi5wb2ludFBhZGRpbmcsbD1wKGwsay0yKmIpO3JldHVybiBhLmNvbHVtbk1ldHJpY3M9e3dpZHRoOmwsb2Zmc2V0OmIrKGorKChlP2ktKGEuY29sdW1uSW5kZXh8fDApOmEuY29sdW1uSW5kZXgpfHwwKSprLWMvMikqXG4oZT8tMToxKX19LHRyYW5zbGF0ZTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNoYXJ0LGM9YS5vcHRpb25zLGQ9YS5ib3JkZXJXaWR0aD1wKGMuYm9yZGVyV2lkdGgsYS5hY3RpdmVQb2ludENvdW50PjAuNSphLnhBeGlzLmxlbj8wOjEpLGU9YS55QXhpcyxmPWEudHJhbnNsYXRlZFRocmVzaG9sZD1lLmdldFRocmVzaG9sZChjLnRocmVzaG9sZCksZz1wKGMubWluUG9pbnRMZW5ndGgsNSksaD1hLmdldENvbHVtbk1ldHJpY3MoKSxpPWgud2lkdGgsaj1hLmJhclc9dChpLDErMipkKSxrPWEucG9pbnRYT2Zmc2V0PWgub2Zmc2V0LGw9LShkJTI/MC41OjApLG49ZCUyPzAuNToxO2IucmVuZGVyZXIuaXNWTUwmJmIuaW52ZXJ0ZWQmJihuKz0xKTtjLnBvaW50UGFkZGluZyYmKGo9TGEoaikpO08ucHJvdG90eXBlLnRyYW5zbGF0ZS5hcHBseShhKTtxKGEucG9pbnRzLGZ1bmN0aW9uKGMpe3ZhciBkPXAoYy55Qm90dG9tLGYpLGg9TCh0KC05OTktZCxjLnBsb3RZKSxlLmxlbis5OTkrZCksXG5xPWMucGxvdFgrayxyPWoscz1MKGgsZCksdTt1PXQoaCxkKS1zO1EodSk8ZyYmZyYmKHU9ZyxzPXYoUShzLWYpPmc/ZC1nOmYtKGUudHJhbnNsYXRlKGMueSwwLDEsMCwxKTw9Zj9nOjApKSk7Yy5iYXJYPXE7Yy5wb2ludFdpZHRoPWk7Yy50b29sdGlwUG9zPWIuaW52ZXJ0ZWQ/W2UubGVuLWgsYS54QXhpcy5sZW4tcS1yLzJdOltxK3IvMixoK2UucG9zLWIucGxvdFRvcF07cj12KHErcikrbDtxPXYocSkrbDtyLT1xO2Q9UShzKTwwLjU7dT12KHMrdSkrbjtzPXYocykrbjt1LT1zO2QmJihzLT0xLHUrPTEpO2Muc2hhcGVUeXBlPVwicmVjdFwiO2Muc2hhcGVBcmdzPXt4OnEseTpzLHdpZHRoOnIsaGVpZ2h0OnV9fSl9LGdldFN5bWJvbDpzYSxkcmF3TGVnZW5kU3ltYm9sOk0uZHJhd1JlY3RhbmdsZSxkcmF3R3JhcGg6c2EsZHJhd1BvaW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLmNoYXJ0LGM9YS5vcHRpb25zLGQ9Yi5yZW5kZXJlcixlPWMuYW5pbWF0aW9uTGltaXR8fDI1MCxcbmYsZztxKGEucG9pbnRzLGZ1bmN0aW9uKGgpe3ZhciBpPWgucGxvdFksaj1oLmdyYXBoaWM7aWYoaSE9PXUmJiFpc05hTihpKSYmaC55IT09bnVsbClmPWguc2hhcGVBcmdzLGk9cyhhLmJvcmRlcldpZHRoKT97XCJzdHJva2Utd2lkdGhcIjphLmJvcmRlcldpZHRofTp7fSxnPWgucG9pbnRBdHRyW2guc2VsZWN0ZWQ/XCJzZWxlY3RcIjpcIlwiXXx8YS5wb2ludEF0dHJbXCJcIl0saj8oYmIoaiksai5hdHRyKGkpW2IucG9pbnRDb3VudDxlP1wiYW5pbWF0ZVwiOlwiYXR0clwiXSh3KGYpKSk6aC5ncmFwaGljPWRbaC5zaGFwZVR5cGVdKGYpLmF0dHIoZykuYXR0cihpKS5hZGQoYS5ncm91cCkuc2hhZG93KGMuc2hhZG93LG51bGwsYy5zdGFja2luZyYmIWMuYm9yZGVyUmFkaXVzKTtlbHNlIGlmKGopaC5ncmFwaGljPWouZGVzdHJveSgpfSl9LGFuaW1hdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy55QXhpcyxjPXRoaXMub3B0aW9ucyxkPXRoaXMuY2hhcnQuaW52ZXJ0ZWQsZT17fTtpZihiYSlhPyhlLnNjYWxlWT1cbjAuMDAxLGE9TChiLnBvcytiLmxlbix0KGIucG9zLGIudG9QaXhlbHMoYy50aHJlc2hvbGQpKSksZD9lLnRyYW5zbGF0ZVg9YS1iLmxlbjplLnRyYW5zbGF0ZVk9YSx0aGlzLmdyb3VwLmF0dHIoZSkpOihlLnNjYWxlWT0xLGVbZD9cInRyYW5zbGF0ZVhcIjpcInRyYW5zbGF0ZVlcIl09Yi5wb3MsdGhpcy5ncm91cC5hbmltYXRlKGUsdGhpcy5vcHRpb25zLmFuaW1hdGlvbiksdGhpcy5hbmltYXRlPW51bGwpfSxyZW1vdmU6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5jaGFydDtiLmhhc1JlbmRlcmVkJiZxKGIuc2VyaWVzLGZ1bmN0aW9uKGIpe2lmKGIudHlwZT09PWEudHlwZSliLmlzRGlydHk9ITB9KTtPLnByb3RvdHlwZS5yZW1vdmUuYXBwbHkoYSxhcmd1bWVudHMpfX0pO0guY29sdW1uPWlhO2NhLmJhcj13KGNhLmNvbHVtbik7cWE9bWEoaWEse3R5cGU6XCJiYXJcIixpbnZlcnRlZDohMH0pO0guYmFyPXFhO2NhLnNjYXR0ZXI9dyhULHtsaW5lV2lkdGg6MCx0b29sdGlwOntoZWFkZXJGb3JtYXQ6JzxzcGFuIHN0eWxlPVwiY29sb3I6e3Nlcmllcy5jb2xvcn1cIj7il488L3NwYW4+IDxzcGFuIHN0eWxlPVwiZm9udC1zaXplOiAxMHB4O1wiPiB7c2VyaWVzLm5hbWV9PC9zcGFuPjxici8+JyxcbnBvaW50Rm9ybWF0OlwieDogPGI+e3BvaW50Lnh9PC9iPjxici8+eTogPGI+e3BvaW50Lnl9PC9iPjxici8+XCJ9LHN0aWNreVRyYWNraW5nOiExfSk7cWE9bWEoTyx7dHlwZTpcInNjYXR0ZXJcIixzb3J0ZWQ6ITEscmVxdWlyZVNvcnRpbmc6ITEsbm9TaGFyZWRUb29sdGlwOiEwLHRyYWNrZXJHcm91cHM6W1wibWFya2VyR3JvdXBcIixcImRhdGFMYWJlbHNHcm91cFwiXSx0YWtlT3JkaW5hbFBvc2l0aW9uOiExLHNpbmd1bGFyVG9vbHRpcHM6ITAsZHJhd0dyYXBoOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLmxpbmVXaWR0aCYmTy5wcm90b3R5cGUuZHJhd0dyYXBoLmNhbGwodGhpcyl9fSk7SC5zY2F0dGVyPXFhO2NhLnBpZT13KFQse2JvcmRlckNvbG9yOlwiI0ZGRkZGRlwiLGJvcmRlcldpZHRoOjEsY2VudGVyOltudWxsLG51bGxdLGNsaXA6ITEsY29sb3JCeVBvaW50OiEwLGRhdGFMYWJlbHM6e2Rpc3RhbmNlOjMwLGVuYWJsZWQ6ITAsZm9ybWF0dGVyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9pbnQubmFtZX19LFxuaWdub3JlSGlkZGVuUG9pbnQ6ITAsbGVnZW5kVHlwZTpcInBvaW50XCIsbWFya2VyOm51bGwsc2l6ZTpudWxsLHNob3dJbkxlZ2VuZDohMSxzbGljZWRPZmZzZXQ6MTAsc3RhdGVzOntob3Zlcjp7YnJpZ2h0bmVzczowLjEsc2hhZG93OiExfX0sc3RpY2t5VHJhY2tpbmc6ITEsdG9vbHRpcDp7Zm9sbG93UG9pbnRlcjohMH19KTtUPXt0eXBlOlwicGllXCIsaXNDYXJ0ZXNpYW46ITEscG9pbnRDbGFzczptYShGYSx7aW5pdDpmdW5jdGlvbigpe0ZhLnByb3RvdHlwZS5pbml0LmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgYT10aGlzLGI7aWYoYS55PDApYS55PW51bGw7cihhLHt2aXNpYmxlOmEudmlzaWJsZSE9PSExLG5hbWU6cChhLm5hbWUsXCJTbGljZVwiKX0pO2I9ZnVuY3Rpb24oYil7YS5zbGljZShiLnR5cGU9PT1cInNlbGVjdFwiKX07TihhLFwic2VsZWN0XCIsYik7TihhLFwidW5zZWxlY3RcIixiKTtyZXR1cm4gYX0sc2V0VmlzaWJsZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5zZXJpZXMsXG5kPWMuY2hhcnQ7Yi52aXNpYmxlPWIub3B0aW9ucy52aXNpYmxlPWE9YT09PXU/IWIudmlzaWJsZTphO2Mub3B0aW9ucy5kYXRhW01hKGIsYy5kYXRhKV09Yi5vcHRpb25zO3EoW1wiZ3JhcGhpY1wiLFwiZGF0YUxhYmVsXCIsXCJjb25uZWN0b3JcIixcInNoYWRvd0dyb3VwXCJdLGZ1bmN0aW9uKGMpe2lmKGJbY10pYltjXVthP1wic2hvd1wiOlwiaGlkZVwiXSghMCl9KTtiLmxlZ2VuZEl0ZW0mJmQubGVnZW5kLmNvbG9yaXplSXRlbShiLGEpO2lmKCFjLmlzRGlydHkmJmMub3B0aW9ucy5pZ25vcmVIaWRkZW5Qb2ludCljLmlzRGlydHk9ITAsZC5yZWRyYXcoKX0sc2xpY2U6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuc2VyaWVzO1JhKGMsZC5jaGFydCk7cChiLCEwKTt0aGlzLnNsaWNlZD10aGlzLm9wdGlvbnMuc2xpY2VkPWE9cyhhKT9hOiF0aGlzLnNsaWNlZDtkLm9wdGlvbnMuZGF0YVtNYSh0aGlzLGQuZGF0YSldPXRoaXMub3B0aW9uczthPWE/dGhpcy5zbGljZWRUcmFuc2xhdGlvbjp7dHJhbnNsYXRlWDowLFxudHJhbnNsYXRlWTowfTt0aGlzLmdyYXBoaWMuYW5pbWF0ZShhKTt0aGlzLnNoYWRvd0dyb3VwJiZ0aGlzLnNoYWRvd0dyb3VwLmFuaW1hdGUoYSl9LGhhbG9QYXRoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2hhcGVBcmdzLGM9dGhpcy5zZXJpZXMuY2hhcnQ7cmV0dXJuIHRoaXMuc2xpY2VkfHwhdGhpcy52aXNpYmxlP1tdOnRoaXMuc2VyaWVzLmNoYXJ0LnJlbmRlcmVyLnN5bWJvbHMuYXJjKGMucGxvdExlZnQrYi54LGMucGxvdFRvcCtiLnksYi5yK2EsYi5yK2Ese2lubmVyUjp0aGlzLnNoYXBlQXJncy5yLHN0YXJ0OmIuc3RhcnQsZW5kOmIuZW5kfSl9fSkscmVxdWlyZVNvcnRpbmc6ITEsbm9TaGFyZWRUb29sdGlwOiEwLHRyYWNrZXJHcm91cHM6W1wiZ3JvdXBcIixcImRhdGFMYWJlbHNHcm91cFwiXSxheGlzVHlwZXM6W10scG9pbnRBdHRyVG9PcHRpb25zOntzdHJva2U6XCJib3JkZXJDb2xvclwiLFwic3Ryb2tlLXdpZHRoXCI6XCJib3JkZXJXaWR0aFwiLGZpbGw6XCJjb2xvclwifSxzaW5ndWxhclRvb2x0aXBzOiEwLFxuZ2V0Q29sb3I6c2EsYW5pbWF0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLGM9Yi5wb2ludHMsZD1iLnN0YXJ0QW5nbGVSYWQ7aWYoIWEpcShjLGZ1bmN0aW9uKGEpe3ZhciBjPWEuZ3JhcGhpYyxhPWEuc2hhcGVBcmdzO2MmJihjLmF0dHIoe3I6Yi5jZW50ZXJbM10vMixzdGFydDpkLGVuZDpkfSksYy5hbmltYXRlKHtyOmEucixzdGFydDphLnN0YXJ0LGVuZDphLmVuZH0sYi5vcHRpb25zLmFuaW1hdGlvbikpfSksYi5hbmltYXRlPW51bGx9LHNldERhdGE6ZnVuY3Rpb24oYSxiLGMsZCl7Ty5wcm90b3R5cGUuc2V0RGF0YS5jYWxsKHRoaXMsYSwhMSxjLGQpO3RoaXMucHJvY2Vzc0RhdGEoKTt0aGlzLmdlbmVyYXRlUG9pbnRzKCk7cChiLCEwKSYmdGhpcy5jaGFydC5yZWRyYXcoYyl9LGdlbmVyYXRlUG9pbnRzOmZ1bmN0aW9uKCl7dmFyIGEsYj0wLGMsZCxlLGY9dGhpcy5vcHRpb25zLmlnbm9yZUhpZGRlblBvaW50O08ucHJvdG90eXBlLmdlbmVyYXRlUG9pbnRzLmNhbGwodGhpcyk7XG5jPXRoaXMucG9pbnRzO2Q9Yy5sZW5ndGg7Zm9yKGE9MDthPGQ7YSsrKWU9Y1thXSxiKz1mJiYhZS52aXNpYmxlPzA6ZS55O3RoaXMudG90YWw9Yjtmb3IoYT0wO2E8ZDthKyspZT1jW2FdLGUucGVyY2VudGFnZT1iPjA/ZS55L2IqMTAwOjAsZS50b3RhbD1ifSx0cmFuc2xhdGU6ZnVuY3Rpb24oYSl7dGhpcy5nZW5lcmF0ZVBvaW50cygpO3ZhciBiPTAsYz10aGlzLm9wdGlvbnMsZD1jLnNsaWNlZE9mZnNldCxlPWQrYy5ib3JkZXJXaWR0aCxmLGcsaCxpPWMuc3RhcnRBbmdsZXx8MCxqPXRoaXMuc3RhcnRBbmdsZVJhZD1vYS8xODAqKGktOTApLGk9KHRoaXMuZW5kQW5nbGVSYWQ9b2EvMTgwKihwKGMuZW5kQW5nbGUsaSszNjApLTkwKSktaixrPXRoaXMucG9pbnRzLGw9Yy5kYXRhTGFiZWxzLmRpc3RhbmNlLGM9Yy5pZ25vcmVIaWRkZW5Qb2ludCxuLG09ay5sZW5ndGgsbztpZighYSl0aGlzLmNlbnRlcj1hPXRoaXMuZ2V0Q2VudGVyKCk7dGhpcy5nZXRYPWZ1bmN0aW9uKGIsYyl7aD1cblYuYXNpbihMKChiLWFbMV0pLyhhWzJdLzIrbCksMSkpO3JldHVybiBhWzBdKyhjPy0xOjEpKmFhKGgpKihhWzJdLzIrbCl9O2ZvcihuPTA7bjxtO24rKyl7bz1rW25dO2Y9aitiKmk7aWYoIWN8fG8udmlzaWJsZSliKz1vLnBlcmNlbnRhZ2UvMTAwO2c9aitiKmk7by5zaGFwZVR5cGU9XCJhcmNcIjtvLnNoYXBlQXJncz17eDphWzBdLHk6YVsxXSxyOmFbMl0vMixpbm5lclI6YVszXS8yLHN0YXJ0OnYoZioxRTMpLzFFMyxlbmQ6dihnKjFFMykvMUUzfTtoPShnK2YpLzI7aD4xLjUqb2E/aC09MipvYTpoPC1vYS8yJiYoaCs9MipvYSk7by5zbGljZWRUcmFuc2xhdGlvbj17dHJhbnNsYXRlWDp2KGFhKGgpKmQpLHRyYW5zbGF0ZVk6dihmYShoKSpkKX07Zj1hYShoKSphWzJdLzI7Zz1mYShoKSphWzJdLzI7by50b29sdGlwUG9zPVthWzBdK2YqMC43LGFbMV0rZyowLjddO28uaGFsZj1oPC1vYS8yfHxoPm9hLzI/MTowO28uYW5nbGU9aDtlPUwoZSxsLzIpO28ubGFiZWxQb3M9W2FbMF0rZithYShoKSpcbmwsYVsxXStnK2ZhKGgpKmwsYVswXStmK2FhKGgpKmUsYVsxXStnK2ZhKGgpKmUsYVswXStmLGFbMV0rZyxsPDA/XCJjZW50ZXJcIjpvLmhhbGY/XCJyaWdodFwiOlwibGVmdFwiLGhdfX0sZHJhd0dyYXBoOm51bGwsZHJhd1BvaW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmNoYXJ0LnJlbmRlcmVyLGMsZCxlPWEub3B0aW9ucy5zaGFkb3csZixnO2lmKGUmJiFhLnNoYWRvd0dyb3VwKWEuc2hhZG93R3JvdXA9Yi5nKFwic2hhZG93XCIpLmFkZChhLmdyb3VwKTtxKGEucG9pbnRzLGZ1bmN0aW9uKGgpe2Q9aC5ncmFwaGljO2c9aC5zaGFwZUFyZ3M7Zj1oLnNoYWRvd0dyb3VwO2lmKGUmJiFmKWY9aC5zaGFkb3dHcm91cD1iLmcoXCJzaGFkb3dcIikuYWRkKGEuc2hhZG93R3JvdXApO2M9aC5zbGljZWQ/aC5zbGljZWRUcmFuc2xhdGlvbjp7dHJhbnNsYXRlWDowLHRyYW5zbGF0ZVk6MH07ZiYmZi5hdHRyKGMpO2Q/ZC5hbmltYXRlKHIoZyxjKSk6aC5ncmFwaGljPWQ9YltoLnNoYXBlVHlwZV0oZykuc2V0UmFkaWFsUmVmZXJlbmNlKGEuY2VudGVyKS5hdHRyKGgucG9pbnRBdHRyW2guc2VsZWN0ZWQ/XG5cInNlbGVjdFwiOlwiXCJdKS5hdHRyKHtcInN0cm9rZS1saW5lam9pblwiOlwicm91bmRcIn0pLmF0dHIoYykuYWRkKGEuZ3JvdXApLnNoYWRvdyhlLGYpO2gudmlzaWJsZSE9PXZvaWQgMCYmaC5zZXRWaXNpYmxlKGgudmlzaWJsZSl9KX0sc29ydEJ5QW5nbGU6ZnVuY3Rpb24oYSxiKXthLnNvcnQoZnVuY3Rpb24oYSxkKXtyZXR1cm4gYS5hbmdsZSE9PXZvaWQgMCYmKGQuYW5nbGUtYS5hbmdsZSkqYn0pfSxkcmF3TGVnZW5kU3ltYm9sOk0uZHJhd1JlY3RhbmdsZSxnZXRDZW50ZXI6Wi5nZXRDZW50ZXIsZ2V0U3ltYm9sOnNhfTtUPW1hKE8sVCk7SC5waWU9VDtPLnByb3RvdHlwZS5kcmF3RGF0YUxhYmVscz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm9wdGlvbnMsYz1iLmN1cnNvcixkPWIuZGF0YUxhYmVscyxlPWEucG9pbnRzLGYsZyxoPWEuaGFzUmVuZGVyZWR8fDAsaSxqO2lmKGQuZW5hYmxlZHx8YS5faGFzUG9pbnRMYWJlbHMpYS5kbFByb2Nlc3NPcHRpb25zJiZhLmRsUHJvY2Vzc09wdGlvbnMoZCksXG5qPWEucGxvdEdyb3VwKFwiZGF0YUxhYmVsc0dyb3VwXCIsXCJkYXRhLWxhYmVsc1wiLGQuZGVmZXI/XCJoaWRkZW5cIjpcInZpc2libGVcIixkLnpJbmRleHx8NikscChkLmRlZmVyLCEwKSYmKGouYXR0cih7b3BhY2l0eToraH0pLGh8fE4oYSxcImFmdGVyQW5pbWF0ZVwiLGZ1bmN0aW9uKCl7YS52aXNpYmxlJiZqLnNob3coKTtqW2IuYW5pbWF0aW9uP1wiYW5pbWF0ZVwiOlwiYXR0clwiXSh7b3BhY2l0eToxfSx7ZHVyYXRpb246MjAwfSl9KSksZz1kLHEoZSxmdW5jdGlvbihiKXt2YXIgZSxoPWIuZGF0YUxhYmVsLG0sbyxxPWIuY29ubmVjdG9yLHQ9ITA7Zj1iLm9wdGlvbnMmJmIub3B0aW9ucy5kYXRhTGFiZWxzO2U9cChmJiZmLmVuYWJsZWQsZy5lbmFibGVkKTtpZihoJiYhZSliLmRhdGFMYWJlbD1oLmRlc3Ryb3koKTtlbHNlIGlmKGUpe2Q9dyhnLGYpO2U9ZC5yb3RhdGlvbjttPWIuZ2V0TGFiZWxDb25maWcoKTtpPWQuZm9ybWF0P0phKGQuZm9ybWF0LG0pOmQuZm9ybWF0dGVyLmNhbGwobSxkKTtkLnN0eWxlLmNvbG9yPVxucChkLmNvbG9yLGQuc3R5bGUuY29sb3IsYS5jb2xvcixcImJsYWNrXCIpO2lmKGgpaWYocyhpKSloLmF0dHIoe3RleHQ6aX0pLHQ9ITE7ZWxzZXtpZihiLmRhdGFMYWJlbD1oPWguZGVzdHJveSgpLHEpYi5jb25uZWN0b3I9cS5kZXN0cm95KCl9ZWxzZSBpZihzKGkpKXtoPXtmaWxsOmQuYmFja2dyb3VuZENvbG9yLHN0cm9rZTpkLmJvcmRlckNvbG9yLFwic3Ryb2tlLXdpZHRoXCI6ZC5ib3JkZXJXaWR0aCxyOmQuYm9yZGVyUmFkaXVzfHwwLHJvdGF0aW9uOmUscGFkZGluZzpkLnBhZGRpbmcsekluZGV4OjF9O2ZvcihvIGluIGgpaFtvXT09PXUmJmRlbGV0ZSBoW29dO2g9Yi5kYXRhTGFiZWw9YS5jaGFydC5yZW5kZXJlcltlP1widGV4dFwiOlwibGFiZWxcIl0oaSwwLC05OTksbnVsbCxudWxsLG51bGwsZC51c2VIVE1MKS5hdHRyKGgpLmNzcyhyKGQuc3R5bGUsYyYme2N1cnNvcjpjfSkpLmFkZChqKS5zaGFkb3coZC5zaGFkb3cpfWgmJmEuYWxpZ25EYXRhTGFiZWwoYixoLGQsbnVsbCx0KX19KX07XG5PLnByb3RvdHlwZS5hbGlnbkRhdGFMYWJlbD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPXRoaXMuY2hhcnQsZz1mLmludmVydGVkLGg9cChhLnBsb3RYLC05OTkpLGk9cChhLnBsb3RZLC05OTkpLGo9Yi5nZXRCQm94KCk7aWYoYT10aGlzLnZpc2libGUmJihhLnNlcmllcy5mb3JjZURMfHxmLmlzSW5zaWRlUGxvdChoLHYoaSksZyl8fGQmJmYuaXNJbnNpZGVQbG90KGgsZz9kLngrMTpkLnkrZC5oZWlnaHQtMSxnKSkpZD1yKHt4Omc/Zi5wbG90V2lkdGgtaTpoLHk6dihnP2YucGxvdEhlaWdodC1oOmkpLHdpZHRoOjAsaGVpZ2h0OjB9LGQpLHIoYyx7d2lkdGg6ai53aWR0aCxoZWlnaHQ6ai5oZWlnaHR9KSxjLnJvdGF0aW9uP2JbZT9cImF0dHJcIjpcImFuaW1hdGVcIl0oe3g6ZC54K2MueCtkLndpZHRoLzIseTpkLnkrYy55K2QuaGVpZ2h0LzJ9KS5hdHRyKHthbGlnbjpjLmFsaWdufSk6KGIuYWxpZ24oYyxudWxsLGQpLGc9Yi5hbGlnbkF0dHIscChjLm92ZXJmbG93LFwianVzdGlmeVwiKT09PVxuXCJqdXN0aWZ5XCI/dGhpcy5qdXN0aWZ5RGF0YUxhYmVsKGIsYyxnLGosZCxlKTpwKGMuY3JvcCwhMCkmJihhPWYuaXNJbnNpZGVQbG90KGcueCxnLnkpJiZmLmlzSW5zaWRlUGxvdChnLngrai53aWR0aCxnLnkrai5oZWlnaHQpKSk7aWYoIWEpYi5hdHRyKHt5Oi05OTl9KSxiLnBsYWNlZD0hMX07Ty5wcm90b3R5cGUuanVzdGlmeURhdGFMYWJlbD1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9dGhpcy5jaGFydCxoPWIuYWxpZ24saT1iLnZlcnRpY2FsQWxpZ24saixrO2o9Yy54O2lmKGo8MCloPT09XCJyaWdodFwiP2IuYWxpZ249XCJsZWZ0XCI6Yi54PS1qLGs9ITA7aj1jLngrZC53aWR0aDtpZihqPmcucGxvdFdpZHRoKWg9PT1cImxlZnRcIj9iLmFsaWduPVwicmlnaHRcIjpiLng9Zy5wbG90V2lkdGgtaixrPSEwO2o9Yy55O2lmKGo8MClpPT09XCJib3R0b21cIj9iLnZlcnRpY2FsQWxpZ249XCJ0b3BcIjpiLnk9LWosaz0hMDtqPWMueStkLmhlaWdodDtpZihqPmcucGxvdEhlaWdodClpPT09XCJ0b3BcIj9cbmIudmVydGljYWxBbGlnbj1cImJvdHRvbVwiOmIueT1nLnBsb3RIZWlnaHQtaixrPSEwO2lmKGspYS5wbGFjZWQ9IWYsYS5hbGlnbihiLG51bGwsZSl9O2lmKEgucGllKUgucGllLnByb3RvdHlwZS5kcmF3RGF0YUxhYmVscz1mdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLmRhdGEsYyxkPWEuY2hhcnQsZT1hLm9wdGlvbnMuZGF0YUxhYmVscyxmPXAoZS5jb25uZWN0b3JQYWRkaW5nLDEwKSxnPXAoZS5jb25uZWN0b3JXaWR0aCwxKSxoPWQucGxvdFdpZHRoLGk9ZC5wbG90SGVpZ2h0LGosayxsPXAoZS5zb2Z0Q29ubmVjdG9yLCEwKSxuPWUuZGlzdGFuY2UsbT1hLmNlbnRlcixvPW1bMl0vMixyPW1bMV0scz1uPjAsdSx3LHgsQT1bW10sW11dLHksQixJLEgseixSPVswLDAsMCwwXSxOPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGIueS1hLnl9O2lmKGEudmlzaWJsZSYmKGUuZW5hYmxlZHx8YS5faGFzUG9pbnRMYWJlbHMpKXtPLnByb3RvdHlwZS5kcmF3RGF0YUxhYmVscy5hcHBseShhKTtxKGIsXG5mdW5jdGlvbihhKXthLmRhdGFMYWJlbCYmYS52aXNpYmxlJiZBW2EuaGFsZl0ucHVzaChhKX0pO2ZvcihIPTI7SC0tOyl7dmFyIEc9W10sTT1bXSxGPUFbSF0sSz1GLmxlbmd0aCxFO2lmKEspe2Euc29ydEJ5QW5nbGUoRixILTAuNSk7Zm9yKHo9Yj0wOyFiJiZGW3pdOyliPUZbel0mJkZbel0uZGF0YUxhYmVsJiYoRlt6XS5kYXRhTGFiZWwuZ2V0QkJveCgpLmhlaWdodHx8MjEpLHorKztpZihuPjApe3c9TChyK28rbixkLnBsb3RIZWlnaHQpO2Zvcih6PXQoMCxyLW8tbik7ejw9dzt6Kz1iKUcucHVzaCh6KTt3PUcubGVuZ3RoO2lmKEs+dyl7Yz1bXS5jb25jYXQoRik7Yy5zb3J0KE4pO2Zvcih6PUs7ei0tOyljW3pdLnJhbms9ejtmb3Ioej1LO3otLTspRlt6XS5yYW5rPj13JiZGLnNwbGljZSh6LDEpO0s9Ri5sZW5ndGh9Zm9yKHo9MDt6PEs7eisrKXtjPUZbel07eD1jLmxhYmVsUG9zO2M9OTk5OTt2YXIgUyxQO2ZvcihQPTA7UDx3O1ArKylTPVEoR1tQXS14WzFdKSxTPGMmJihjPVMsXG5FPVApO2lmKEU8eiYmR1t6XSE9PW51bGwpRT16O2Vsc2UgZm9yKHc8Sy16K0UmJkdbel0hPT1udWxsJiYoRT13LUsreik7R1tFXT09PW51bGw7KUUrKztNLnB1c2goe2k6RSx5OkdbRV19KTtHW0VdPW51bGx9TS5zb3J0KE4pfWZvcih6PTA7ejxLO3orKyl7Yz1GW3pdO3g9Yy5sYWJlbFBvczt1PWMuZGF0YUxhYmVsO0k9Yy52aXNpYmxlPT09ITE/XCJoaWRkZW5cIjpcInZpc2libGVcIjtjPXhbMV07aWYobj4wKXtpZih3PU0ucG9wKCksRT13LmksQj13LnksYz5CJiZHW0UrMV0hPT1udWxsfHxjPEImJkdbRS0xXSE9PW51bGwpQj1MKHQoMCxjKSxkLnBsb3RIZWlnaHQpfWVsc2UgQj1jO3k9ZS5qdXN0aWZ5P21bMF0rKEg/LTE6MSkqKG8rbik6YS5nZXRYKEI9PT1yLW8tbnx8Qj09PXIrbytuP2M6QixIKTt1Ll9hdHRyPXt2aXNpYmlsaXR5OkksYWxpZ246eFs2XX07dS5fcG9zPXt4OnkrZS54Kyh7bGVmdDpmLHJpZ2h0Oi1mfVt4WzZdXXx8MCkseTpCK2UueS0xMH07dS5jb25uWD15O3UuY29ublk9XG5CO2lmKHRoaXMub3B0aW9ucy5zaXplPT09bnVsbCl3PXUud2lkdGgseS13PGY/UlszXT10KHYody15K2YpLFJbM10pOnkrdz5oLWYmJihSWzFdPXQodih5K3ctaCtmKSxSWzFdKSksQi1iLzI8MD9SWzBdPXQodigtQitiLzIpLFJbMF0pOkIrYi8yPmkmJihSWzJdPXQodihCK2IvMi1pKSxSWzJdKSl9fX1pZihDYShSKT09PTB8fHRoaXMudmVyaWZ5RGF0YUxhYmVsT3ZlcmZsb3coUikpdGhpcy5wbGFjZURhdGFMYWJlbHMoKSxzJiZnJiZxKHRoaXMucG9pbnRzLGZ1bmN0aW9uKGIpe2o9Yi5jb25uZWN0b3I7eD1iLmxhYmVsUG9zO2lmKCh1PWIuZGF0YUxhYmVsKSYmdS5fcG9zKUk9dS5fYXR0ci52aXNpYmlsaXR5LHk9dS5jb25uWCxCPXUuY29ublksaz1sP1tcIk1cIix5Kyh4WzZdPT09XCJsZWZ0XCI/NTotNSksQixcIkNcIix5LEIsMip4WzJdLXhbNF0sMip4WzNdLXhbNV0seFsyXSx4WzNdLFwiTFwiLHhbNF0seFs1XV06W1wiTVwiLHkrKHhbNl09PT1cImxlZnRcIj81Oi01KSxCLFwiTFwiLHhbMl0seFszXSxcblwiTFwiLHhbNF0seFs1XV0saj8oai5hbmltYXRlKHtkOmt9KSxqLmF0dHIoXCJ2aXNpYmlsaXR5XCIsSSkpOmIuY29ubmVjdG9yPWo9YS5jaGFydC5yZW5kZXJlci5wYXRoKGspLmF0dHIoe1wic3Ryb2tlLXdpZHRoXCI6ZyxzdHJva2U6ZS5jb25uZWN0b3JDb2xvcnx8Yi5jb2xvcnx8XCIjNjA2MDYwXCIsdmlzaWJpbGl0eTpJfSkuYWRkKGEuZGF0YUxhYmVsc0dyb3VwKTtlbHNlIGlmKGopYi5jb25uZWN0b3I9ai5kZXN0cm95KCl9KX19LEgucGllLnByb3RvdHlwZS5wbGFjZURhdGFMYWJlbHM9ZnVuY3Rpb24oKXtxKHRoaXMucG9pbnRzLGZ1bmN0aW9uKGEpe3ZhciBhPWEuZGF0YUxhYmVsLGI7aWYoYSkoYj1hLl9wb3MpPyhhLmF0dHIoYS5fYXR0ciksYVthLm1vdmVkP1wiYW5pbWF0ZVwiOlwiYXR0clwiXShiKSxhLm1vdmVkPSEwKTphJiZhLmF0dHIoe3k6LTk5OX0pfSl9LEgucGllLnByb3RvdHlwZS5hbGlnbkRhdGFMYWJlbD1zYSxILnBpZS5wcm90b3R5cGUudmVyaWZ5RGF0YUxhYmVsT3ZlcmZsb3c9XG5mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNlbnRlcixjPXRoaXMub3B0aW9ucyxkPWMuY2VudGVyLGU9Yz1jLm1pblNpemV8fDgwLGY7ZFswXSE9PW51bGw/ZT10KGJbMl0tdChhWzFdLGFbM10pLGMpOihlPXQoYlsyXS1hWzFdLWFbM10sYyksYlswXSs9KGFbM10tYVsxXSkvMik7ZFsxXSE9PW51bGw/ZT10KEwoZSxiWzJdLXQoYVswXSxhWzJdKSksYyk6KGU9dChMKGUsYlsyXS1hWzBdLWFbMl0pLGMpLGJbMV0rPShhWzBdLWFbMl0pLzIpO2U8YlsyXT8oYlsyXT1lLHRoaXMudHJhbnNsYXRlKGIpLHEodGhpcy5wb2ludHMsZnVuY3Rpb24oYSl7aWYoYS5kYXRhTGFiZWwpYS5kYXRhTGFiZWwuX3Bvcz1udWxsfSksdGhpcy5kcmF3RGF0YUxhYmVscyYmdGhpcy5kcmF3RGF0YUxhYmVscygpKTpmPSEwO3JldHVybiBmfTtpZihILmNvbHVtbilILmNvbHVtbi5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWw9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLmNoYXJ0LGc9Zi5pbnZlcnRlZCxcbmg9YS5kbEJveHx8YS5zaGFwZUFyZ3MsaT1hLmJlbG93fHxhLnBsb3RZPnAodGhpcy50cmFuc2xhdGVkVGhyZXNob2xkLGYucGxvdFNpemVZKSxqPXAoYy5pbnNpZGUsISF0aGlzLm9wdGlvbnMuc3RhY2tpbmcpO2lmKGgmJihkPXcoaCksZyYmKGQ9e3g6Zi5wbG90V2lkdGgtZC55LWQuaGVpZ2h0LHk6Zi5wbG90SGVpZ2h0LWQueC1kLndpZHRoLHdpZHRoOmQuaGVpZ2h0LGhlaWdodDpkLndpZHRofSksIWopKWc/KGQueCs9aT8wOmQud2lkdGgsZC53aWR0aD0wKTooZC55Kz1pP2QuaGVpZ2h0OjAsZC5oZWlnaHQ9MCk7Yy5hbGlnbj1wKGMuYWxpZ24sIWd8fGo/XCJjZW50ZXJcIjppP1wicmlnaHRcIjpcImxlZnRcIik7Yy52ZXJ0aWNhbEFsaWduPXAoYy52ZXJ0aWNhbEFsaWduLGd8fGo/XCJtaWRkbGVcIjppP1widG9wXCI6XCJib3R0b21cIik7Ty5wcm90b3R5cGUuYWxpZ25EYXRhTGFiZWwuY2FsbCh0aGlzLGEsYixjLGQsZSl9O1Q9Sy5UcmFja2VyTWl4aW49e2RyYXdUcmFja2VyUG9pbnQ6ZnVuY3Rpb24oKXt2YXIgYT1cbnRoaXMsYj1hLmNoYXJ0LGM9Yi5wb2ludGVyLGQ9YS5vcHRpb25zLmN1cnNvcixlPWQmJntjdXJzb3I6ZH0sZj1mdW5jdGlvbihjKXt2YXIgZD1jLnRhcmdldCxlO2lmKGIuaG92ZXJTZXJpZXMhPT1hKWEub25Nb3VzZU92ZXIoKTtmb3IoO2QmJiFlOyllPWQucG9pbnQsZD1kLnBhcmVudE5vZGU7aWYoZSE9PXUmJmUhPT1iLmhvdmVyUG9pbnQpZS5vbk1vdXNlT3ZlcihjKX07cShhLnBvaW50cyxmdW5jdGlvbihhKXtpZihhLmdyYXBoaWMpYS5ncmFwaGljLmVsZW1lbnQucG9pbnQ9YTtpZihhLmRhdGFMYWJlbClhLmRhdGFMYWJlbC5lbGVtZW50LnBvaW50PWF9KTtpZighYS5faGFzVHJhY2tpbmcpcShhLnRyYWNrZXJHcm91cHMsZnVuY3Rpb24oYil7aWYoYVtiXSYmKGFbYl0uYWRkQ2xhc3MoXCJoaWdoY2hhcnRzLXRyYWNrZXJcIikub24oXCJtb3VzZW92ZXJcIixmKS5vbihcIm1vdXNlb3V0XCIsZnVuY3Rpb24oYSl7Yy5vblRyYWNrZXJNb3VzZU91dChhKX0pLmNzcyhlKSwkYSkpYVtiXS5vbihcInRvdWNoc3RhcnRcIixcbmYpfSksYS5faGFzVHJhY2tpbmc9ITB9LGRyYXdUcmFja2VyR3JhcGg6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YS5vcHRpb25zLGM9Yi50cmFja0J5QXJlYSxkPVtdLmNvbmNhdChjP2EuYXJlYVBhdGg6YS5ncmFwaFBhdGgpLGU9ZC5sZW5ndGgsZj1hLmNoYXJ0LGc9Zi5wb2ludGVyLGg9Zi5yZW5kZXJlcixpPWYub3B0aW9ucy50b29sdGlwLnNuYXAsaj1hLnRyYWNrZXIsaz1iLmN1cnNvcixsPWsmJntjdXJzb3I6a30saz1hLnNpbmdsZVBvaW50cyxuLG09ZnVuY3Rpb24oKXtpZihmLmhvdmVyU2VyaWVzIT09YSlhLm9uTW91c2VPdmVyKCl9LG89XCJyZ2JhKDE5MiwxOTIsMTkyLFwiKyhiYT8xLjBFLTQ6MC4wMDIpK1wiKVwiO2lmKGUmJiFjKWZvcihuPWUrMTtuLS07KWRbbl09PT1cIk1cIiYmZC5zcGxpY2UobisxLDAsZFtuKzFdLWksZFtuKzJdLFwiTFwiKSwobiYmZFtuXT09PVwiTVwifHxuPT09ZSkmJmQuc3BsaWNlKG4sMCxcIkxcIixkW24tMl0raSxkW24tMV0pO2ZvcihuPTA7bjxrLmxlbmd0aDtuKyspZT1cbmtbbl0sZC5wdXNoKFwiTVwiLGUucGxvdFgtaSxlLnBsb3RZLFwiTFwiLGUucGxvdFgraSxlLnBsb3RZKTtqP2ouYXR0cih7ZDpkfSk6KGEudHJhY2tlcj1oLnBhdGgoZCkuYXR0cih7XCJzdHJva2UtbGluZWpvaW5cIjpcInJvdW5kXCIsdmlzaWJpbGl0eTphLnZpc2libGU/XCJ2aXNpYmxlXCI6XCJoaWRkZW5cIixzdHJva2U6byxmaWxsOmM/bzpQLFwic3Ryb2tlLXdpZHRoXCI6Yi5saW5lV2lkdGgrKGM/MDoyKmkpLHpJbmRleDoyfSkuYWRkKGEuZ3JvdXApLHEoW2EudHJhY2tlcixhLm1hcmtlckdyb3VwXSxmdW5jdGlvbihhKXthLmFkZENsYXNzKFwiaGlnaGNoYXJ0cy10cmFja2VyXCIpLm9uKFwibW91c2VvdmVyXCIsbSkub24oXCJtb3VzZW91dFwiLGZ1bmN0aW9uKGEpe2cub25UcmFja2VyTW91c2VPdXQoYSl9KS5jc3MobCk7aWYoJGEpYS5vbihcInRvdWNoc3RhcnRcIixtKX0pKX19O2lmKEguY29sdW1uKWlhLnByb3RvdHlwZS5kcmF3VHJhY2tlcj1ULmRyYXdUcmFja2VyUG9pbnQ7aWYoSC5waWUpSC5waWUucHJvdG90eXBlLmRyYXdUcmFja2VyPVxuVC5kcmF3VHJhY2tlclBvaW50O2lmKEguc2NhdHRlcilxYS5wcm90b3R5cGUuZHJhd1RyYWNrZXI9VC5kcmF3VHJhY2tlclBvaW50O3IobGIucHJvdG90eXBlLHtzZXRJdGVtRXZlbnRzOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9dGhpczsoYz9iOmEubGVnZW5kR3JvdXApLm9uKFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXthLnNldFN0YXRlKFwiaG92ZXJcIik7Yi5jc3MoZi5vcHRpb25zLml0ZW1Ib3ZlclN0eWxlKX0pLm9uKFwibW91c2VvdXRcIixmdW5jdGlvbigpe2IuY3NzKGEudmlzaWJsZT9kOmUpO2Euc2V0U3RhdGUoKX0pLm9uKFwiY2xpY2tcIixmdW5jdGlvbihiKXt2YXIgYz1mdW5jdGlvbigpe2Euc2V0VmlzaWJsZSgpfSxiPXticm93c2VyRXZlbnQ6Yn07YS5maXJlUG9pbnRFdmVudD9hLmZpcmVQb2ludEV2ZW50KFwibGVnZW5kSXRlbUNsaWNrXCIsYixjKTpJKGEsXCJsZWdlbmRJdGVtQ2xpY2tcIixiLGMpfSl9LGNyZWF0ZUNoZWNrYm94Rm9ySXRlbTpmdW5jdGlvbihhKXthLmNoZWNrYm94PVxuJChcImlucHV0XCIse3R5cGU6XCJjaGVja2JveFwiLGNoZWNrZWQ6YS5zZWxlY3RlZCxkZWZhdWx0Q2hlY2tlZDphLnNlbGVjdGVkfSx0aGlzLm9wdGlvbnMuaXRlbUNoZWNrYm94U3R5bGUsdGhpcy5jaGFydC5jb250YWluZXIpO04oYS5jaGVja2JveCxcImNsaWNrXCIsZnVuY3Rpb24oYil7SShhLFwiY2hlY2tib3hDbGlja1wiLHtjaGVja2VkOmIudGFyZ2V0LmNoZWNrZWR9LGZ1bmN0aW9uKCl7YS5zZWxlY3QoKX0pfSl9fSk7RS5sZWdlbmQuaXRlbVN0eWxlLmN1cnNvcj1cInBvaW50ZXJcIjtyKFlhLnByb3RvdHlwZSx7c2hvd1Jlc2V0Wm9vbTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1FLmxhbmcsYz1hLm9wdGlvbnMuY2hhcnQucmVzZXRab29tQnV0dG9uLGQ9Yy50aGVtZSxlPWQuc3RhdGVzLGY9Yy5yZWxhdGl2ZVRvPT09XCJjaGFydFwiP251bGw6XCJwbG90Qm94XCI7dGhpcy5yZXNldFpvb21CdXR0b249YS5yZW5kZXJlci5idXR0b24oYi5yZXNldFpvb20sbnVsbCxudWxsLGZ1bmN0aW9uKCl7YS56b29tT3V0KCl9LFxuZCxlJiZlLmhvdmVyKS5hdHRyKHthbGlnbjpjLnBvc2l0aW9uLmFsaWduLHRpdGxlOmIucmVzZXRab29tVGl0bGV9KS5hZGQoKS5hbGlnbihjLnBvc2l0aW9uLCExLGYpfSx6b29tT3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztJKGEsXCJzZWxlY3Rpb25cIix7cmVzZXRTZWxlY3Rpb246ITB9LGZ1bmN0aW9uKCl7YS56b29tKCl9KX0sem9vbTpmdW5jdGlvbihhKXt2YXIgYixjPXRoaXMucG9pbnRlcixkPSExLGU7IWF8fGEucmVzZXRTZWxlY3Rpb24/cSh0aGlzLmF4ZXMsZnVuY3Rpb24oYSl7Yj1hLnpvb20oKX0pOnEoYS54QXhpcy5jb25jYXQoYS55QXhpcyksZnVuY3Rpb24oYSl7dmFyIGU9YS5heGlzLGg9ZS5pc1hBeGlzO2lmKGNbaD9cInpvb21YXCI6XCJ6b29tWVwiXXx8Y1toP1wicGluY2hYXCI6XCJwaW5jaFlcIl0pYj1lLnpvb20oYS5taW4sYS5tYXgpLGUuZGlzcGxheUJ0biYmKGQ9ITApfSk7ZT10aGlzLnJlc2V0Wm9vbUJ1dHRvbjtpZihkJiYhZSl0aGlzLnNob3dSZXNldFpvb20oKTtlbHNlIGlmKCFkJiZcbmRhKGUpKXRoaXMucmVzZXRab29tQnV0dG9uPWUuZGVzdHJveSgpO2ImJnRoaXMucmVkcmF3KHAodGhpcy5vcHRpb25zLmNoYXJ0LmFuaW1hdGlvbixhJiZhLmFuaW1hdGlvbix0aGlzLnBvaW50Q291bnQ8MTAwKSl9LHBhbjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD1jLmhvdmVyUG9pbnRzLGU7ZCYmcShkLGZ1bmN0aW9uKGEpe2Euc2V0U3RhdGUoKX0pO3EoYj09PVwieHlcIj9bMSwwXTpbMV0sZnVuY3Rpb24oYil7dmFyIGQ9YVtiP1wiY2hhcnRYXCI6XCJjaGFydFlcIl0saD1jW2I/XCJ4QXhpc1wiOlwieUF4aXNcIl1bMF0saT1jW2I/XCJtb3VzZURvd25YXCI6XCJtb3VzZURvd25ZXCJdLGo9KGgucG9pbnRSYW5nZXx8MCkvMixrPWguZ2V0RXh0cmVtZXMoKSxsPWgudG9WYWx1ZShpLWQsITApK2osaT1oLnRvVmFsdWUoaStjW2I/XCJwbG90V2lkdGhcIjpcInBsb3RIZWlnaHRcIl0tZCwhMCktajtoLnNlcmllcy5sZW5ndGgmJmw+TChrLmRhdGFNaW4say5taW4pJiZpPHQoay5kYXRhTWF4LGsubWF4KSYmKGguc2V0RXh0cmVtZXMobCxcbmksITEsITEse3RyaWdnZXI6XCJwYW5cIn0pLGU9ITApO2NbYj9cIm1vdXNlRG93blhcIjpcIm1vdXNlRG93bllcIl09ZH0pO2UmJmMucmVkcmF3KCExKTtCKGMuY29udGFpbmVyLHtjdXJzb3I6XCJtb3ZlXCJ9KX19KTtyKEZhLnByb3RvdHlwZSx7c2VsZWN0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuc2VyaWVzLGU9ZC5jaGFydCxhPXAoYSwhYy5zZWxlY3RlZCk7Yy5maXJlUG9pbnRFdmVudChhP1wic2VsZWN0XCI6XCJ1bnNlbGVjdFwiLHthY2N1bXVsYXRlOmJ9LGZ1bmN0aW9uKCl7Yy5zZWxlY3RlZD1jLm9wdGlvbnMuc2VsZWN0ZWQ9YTtkLm9wdGlvbnMuZGF0YVtNYShjLGQuZGF0YSldPWMub3B0aW9ucztjLnNldFN0YXRlKGEmJlwic2VsZWN0XCIpO2J8fHEoZS5nZXRTZWxlY3RlZFBvaW50cygpLGZ1bmN0aW9uKGEpe2lmKGEuc2VsZWN0ZWQmJmEhPT1jKWEuc2VsZWN0ZWQ9YS5vcHRpb25zLnNlbGVjdGVkPSExLGQub3B0aW9ucy5kYXRhW01hKGEsZC5kYXRhKV09YS5vcHRpb25zLGEuc2V0U3RhdGUoXCJcIiksXG5hLmZpcmVQb2ludEV2ZW50KFwidW5zZWxlY3RcIil9KX0pfSxvbk1vdXNlT3ZlcjpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlcmllcyxjPWIuY2hhcnQsZD1jLnRvb2x0aXAsZT1jLmhvdmVyUG9pbnQ7aWYoZSYmZSE9PXRoaXMpZS5vbk1vdXNlT3V0KCk7dGhpcy5maXJlUG9pbnRFdmVudChcIm1vdXNlT3ZlclwiKTtkJiYoIWQuc2hhcmVkfHxiLm5vU2hhcmVkVG9vbHRpcCkmJmQucmVmcmVzaCh0aGlzLGEpO3RoaXMuc2V0U3RhdGUoXCJob3ZlclwiKTtjLmhvdmVyUG9pbnQ9dGhpc30sb25Nb3VzZU91dDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuc2VyaWVzLmNoYXJ0LGI9YS5ob3ZlclBvaW50czt0aGlzLmZpcmVQb2ludEV2ZW50KFwibW91c2VPdXRcIik7aWYoIWJ8fE1hKHRoaXMsYik9PT0tMSl0aGlzLnNldFN0YXRlKCksYS5ob3ZlclBvaW50PW51bGx9LGltcG9ydEV2ZW50czpmdW5jdGlvbigpe2lmKCF0aGlzLmhhc0ltcG9ydGVkRXZlbnRzKXt2YXIgYT13KHRoaXMuc2VyaWVzLm9wdGlvbnMucG9pbnQsXG50aGlzLm9wdGlvbnMpLmV2ZW50cyxiO3RoaXMuZXZlbnRzPWE7Zm9yKGIgaW4gYSlOKHRoaXMsYixhW2JdKTt0aGlzLmhhc0ltcG9ydGVkRXZlbnRzPSEwfX0sc2V0U3RhdGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnBsb3RYLGQ9dGhpcy5wbG90WSxlPXRoaXMuc2VyaWVzLGY9ZS5vcHRpb25zLnN0YXRlcyxnPWNhW2UudHlwZV0ubWFya2VyJiZlLm9wdGlvbnMubWFya2VyLGg9ZyYmIWcuZW5hYmxlZCxpPWcmJmcuc3RhdGVzW2FdLGo9aSYmaS5lbmFibGVkPT09ITEsaz1lLnN0YXRlTWFya2VyR3JhcGhpYyxsPXRoaXMubWFya2VyfHx7fSxuPWUuY2hhcnQsbT1lLmhhbG8sbyxhPWF8fFwiXCI7bz10aGlzLnBvaW50QXR0clthXXx8ZS5wb2ludEF0dHJbYV07aWYoIShhPT09dGhpcy5zdGF0ZSYmIWJ8fHRoaXMuc2VsZWN0ZWQmJmEhPT1cInNlbGVjdFwifHxmW2FdJiZmW2FdLmVuYWJsZWQ9PT0hMXx8YSYmKGp8fGgmJmkuZW5hYmxlZD09PSExKXx8YSYmbC5zdGF0ZXMmJmwuc3RhdGVzW2FdJiZcbmwuc3RhdGVzW2FdLmVuYWJsZWQ9PT0hMSkpe2lmKHRoaXMuZ3JhcGhpYylnPWcmJnRoaXMuZ3JhcGhpYy5zeW1ib2xOYW1lJiZvLnIsdGhpcy5ncmFwaGljLmF0dHIodyhvLGc/e3g6Yy1nLHk6ZC1nLHdpZHRoOjIqZyxoZWlnaHQ6MipnfTp7fSkpLGsmJmsuaGlkZSgpO2Vsc2V7aWYoYSYmaSlpZihnPWkucmFkaXVzLGw9bC5zeW1ib2x8fGUuc3ltYm9sLGsmJmsuY3VycmVudFN5bWJvbCE9PWwmJihrPWsuZGVzdHJveSgpKSxrKWtbYj9cImFuaW1hdGVcIjpcImF0dHJcIl0oe3g6Yy1nLHk6ZC1nfSk7ZWxzZSBpZihsKWUuc3RhdGVNYXJrZXJHcmFwaGljPWs9bi5yZW5kZXJlci5zeW1ib2wobCxjLWcsZC1nLDIqZywyKmcpLmF0dHIobykuYWRkKGUubWFya2VyR3JvdXApLGsuY3VycmVudFN5bWJvbD1sO2lmKGspa1thJiZuLmlzSW5zaWRlUGxvdChjLGQsbi5pbnZlcnRlZCk/XCJzaG93XCI6XCJoaWRlXCJdKCl9aWYoKGM9ZlthXSYmZlthXS5oYWxvKSYmYy5zaXplKXtpZighbSllLmhhbG89bT1uLnJlbmRlcmVyLnBhdGgoKS5hZGQoZS5zZXJpZXNHcm91cCk7XG5tLmF0dHIocih7ZmlsbDp5YSh0aGlzLmNvbG9yfHxlLmNvbG9yKS5zZXRPcGFjaXR5KGMub3BhY2l0eSkuZ2V0KCl9LGMuYXR0cmlidXRlcykpW2I/XCJhbmltYXRlXCI6XCJhdHRyXCJdKHtkOnRoaXMuaGFsb1BhdGgoYy5zaXplKX0pfWVsc2UgbSYmbS5hdHRyKHtkOltdfSk7dGhpcy5zdGF0ZT1hfX0saGFsb1BhdGg6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5zZXJpZXMsYz1iLmNoYXJ0LGQ9Yi5nZXRQbG90Qm94KCksZT1jLmludmVydGVkO3JldHVybiBjLnJlbmRlcmVyLnN5bWJvbHMuY2lyY2xlKGQudHJhbnNsYXRlWCsoZT9iLnlBeGlzLmxlbi10aGlzLnBsb3RZOnRoaXMucGxvdFgpLWEsZC50cmFuc2xhdGVZKyhlP2IueEF4aXMubGVuLXRoaXMucGxvdFg6dGhpcy5wbG90WSktYSxhKjIsYSoyKX19KTtyKE8ucHJvdG90eXBlLHtvbk1vdXNlT3ZlcjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2hhcnQsYj1hLmhvdmVyU2VyaWVzO2lmKGImJmIhPT10aGlzKWIub25Nb3VzZU91dCgpO3RoaXMub3B0aW9ucy5ldmVudHMubW91c2VPdmVyJiZcbkkodGhpcyxcIm1vdXNlT3ZlclwiKTt0aGlzLnNldFN0YXRlKFwiaG92ZXJcIik7YS5ob3ZlclNlcmllcz10aGlzfSxvbk1vdXNlT3V0OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5vcHRpb25zLGI9dGhpcy5jaGFydCxjPWIudG9vbHRpcCxkPWIuaG92ZXJQb2ludDtpZihkKWQub25Nb3VzZU91dCgpO3RoaXMmJmEuZXZlbnRzLm1vdXNlT3V0JiZJKHRoaXMsXCJtb3VzZU91dFwiKTtjJiYhYS5zdGlja3lUcmFja2luZyYmKCFjLnNoYXJlZHx8dGhpcy5ub1NoYXJlZFRvb2x0aXApJiZjLmhpZGUoKTt0aGlzLnNldFN0YXRlKCk7Yi5ob3ZlclNlcmllcz1udWxsfSxzZXRTdGF0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLm9wdGlvbnMsYz10aGlzLmdyYXBoLGQ9dGhpcy5ncmFwaE5lZyxlPWIuc3RhdGVzLGI9Yi5saW5lV2lkdGgsYT1hfHxcIlwiO2lmKHRoaXMuc3RhdGUhPT1hKXRoaXMuc3RhdGU9YSxlW2FdJiZlW2FdLmVuYWJsZWQ9PT0hMXx8KGEmJihiPWVbYV0ubGluZVdpZHRofHxiKyhlW2FdLmxpbmVXaWR0aFBsdXN8fFxuMCkpLGMmJiFjLmRhc2hzdHlsZSYmKGE9e1wic3Ryb2tlLXdpZHRoXCI6Yn0sYy5hdHRyKGEpLGQmJmQuYXR0cihhKSkpfSxzZXRWaXNpYmxlOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcyxkPWMuY2hhcnQsZT1jLmxlZ2VuZEl0ZW0sZixnPWQub3B0aW9ucy5jaGFydC5pZ25vcmVIaWRkZW5TZXJpZXMsaD1jLnZpc2libGU7Zj0oYy52aXNpYmxlPWE9Yy51c2VyT3B0aW9ucy52aXNpYmxlPWE9PT11PyFoOmEpP1wic2hvd1wiOlwiaGlkZVwiO3EoW1wiZ3JvdXBcIixcImRhdGFMYWJlbHNHcm91cFwiLFwibWFya2VyR3JvdXBcIixcInRyYWNrZXJcIl0sZnVuY3Rpb24oYSl7aWYoY1thXSljW2FdW2ZdKCl9KTtpZihkLmhvdmVyU2VyaWVzPT09YyljLm9uTW91c2VPdXQoKTtlJiZkLmxlZ2VuZC5jb2xvcml6ZUl0ZW0oYyxhKTtjLmlzRGlydHk9ITA7Yy5vcHRpb25zLnN0YWNraW5nJiZxKGQuc2VyaWVzLGZ1bmN0aW9uKGEpe2lmKGEub3B0aW9ucy5zdGFja2luZyYmYS52aXNpYmxlKWEuaXNEaXJ0eT0hMH0pO3EoYy5saW5rZWRTZXJpZXMsXG5mdW5jdGlvbihiKXtiLnNldFZpc2libGUoYSwhMSl9KTtpZihnKWQuaXNEaXJ0eUJveD0hMDtiIT09ITEmJmQucmVkcmF3KCk7SShjLGYpfSxzZXRUb29sdGlwUG9pbnRzOmZ1bmN0aW9uKGEpe3ZhciBiPVtdLGMsZCxlPXRoaXMueEF4aXMsZj1lJiZlLmdldEV4dHJlbWVzKCksZz1lP2UudG9vbHRpcExlbnx8ZS5sZW46dGhpcy5jaGFydC5wbG90U2l6ZVgsaCxpLGo9W107aWYoISh0aGlzLm9wdGlvbnMuZW5hYmxlTW91c2VUcmFja2luZz09PSExfHx0aGlzLnNpbmd1bGFyVG9vbHRpcHMpKXtpZihhKXRoaXMudG9vbHRpcFBvaW50cz1udWxsO3EodGhpcy5zZWdtZW50c3x8dGhpcy5wb2ludHMsZnVuY3Rpb24oYSl7Yj1iLmNvbmNhdChhKX0pO2UmJmUucmV2ZXJzZWQmJihiPWIucmV2ZXJzZSgpKTt0aGlzLm9yZGVyVG9vbHRpcFBvaW50cyYmdGhpcy5vcmRlclRvb2x0aXBQb2ludHMoYik7YT1iLmxlbmd0aDtmb3IoaT0wO2k8YTtpKyspaWYoZT1iW2ldLGM9ZS54LGM+PWYubWluJiZcbmM8PWYubWF4KXtoPWJbaSsxXTtjPWQ9PT11PzA6ZCsxO2ZvcihkPWJbaSsxXT9MKHQoMCxVKChlLmNsaWVudFgrKGg/aC53cmFwcGVkQ2xpZW50WHx8aC5jbGllbnRYOmcpKS8yKSksZyk6ZztjPj0wJiZjPD1kOylqW2MrK109ZX10aGlzLnRvb2x0aXBQb2ludHM9an19LHNob3c6ZnVuY3Rpb24oKXt0aGlzLnNldFZpc2libGUoITApfSxoaWRlOmZ1bmN0aW9uKCl7dGhpcy5zZXRWaXNpYmxlKCExKX0sc2VsZWN0OmZ1bmN0aW9uKGEpe3RoaXMuc2VsZWN0ZWQ9YT1hPT09dT8hdGhpcy5zZWxlY3RlZDphO2lmKHRoaXMuY2hlY2tib3gpdGhpcy5jaGVja2JveC5jaGVja2VkPWE7SSh0aGlzLGE/XCJzZWxlY3RcIjpcInVuc2VsZWN0XCIpfSxkcmF3VHJhY2tlcjpULmRyYXdUcmFja2VyR3JhcGh9KTtyKEsse0F4aXM6bmEsQ2hhcnQ6WWEsQ29sb3I6eWEsUG9pbnQ6RmEsVGljazpUYSxSZW5kZXJlcjpaYSxTZXJpZXM6TyxTVkdFbGVtZW50OlMsU1ZHUmVuZGVyZXI6dGEsYXJyYXlNaW46T2EsYXJyYXlNYXg6Q2EsXG5jaGFydHM6VyxkYXRlRm9ybWF0OmNiLGZvcm1hdDpKYSxwYXRoQW5pbTp2YixnZXRPcHRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIEV9LGhhc0JpZGlCdWc6T2IsaXNUb3VjaERldmljZTpJYixudW1iZXJGb3JtYXQ6QmEsc2VyaWVzVHlwZXM6SCxzZXRPcHRpb25zOmZ1bmN0aW9uKGEpe0U9dyghMCxFLGEpO0JiKCk7cmV0dXJuIEV9LGFkZEV2ZW50Ok4scmVtb3ZlRXZlbnQ6WCxjcmVhdGVFbGVtZW50OiQsZGlzY2FyZEVsZW1lbnQ6UWEsY3NzOkIsZWFjaDpxLGV4dGVuZDpyLG1hcDpWYSxtZXJnZTp3LHBpY2s6cCxzcGxhdDpyYSxleHRlbmRDbGFzczptYSxwSW50Onksd3JhcDpOYSxzdmc6YmEsY2FudmFzOmdhLHZtbDohYmEmJiFnYSxwcm9kdWN0OlwiSGlnaGNoYXJ0c1wiLHZlcnNpb246XCI0LjAuNFwifSl9KSgpO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmlnaHROb3dBcHAgPSBhbmd1bGFyLm1vZHVsZSgncmlnaHROb3dBcHAnLCBbXG4gICAgJ2FuZ3VsYXItc2t5Y29ucycsXG4gICAgJ3VpLmJvb3RzdHJhcCdcbl0pO1xuXG5yaWdodE5vd0FwcC5jb250cm9sbGVyKCdSaWdodE5vd0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCAkaW50ZXJ2YWwpIHtcblxuICAgIC8vIExvY2FsIGN1cnJlbnQgd2VhdGhlclxuXG4gICAgdmFyIGdjID0gbmV3IEp1c3RHYWdlKHtcbiAgICAgICAgaWQ6IFwiZ2F1Z2UtY291cnRob3VzZVwiLFxuICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgbWluOiAwLFxuICAgICAgICBtYXg6IDIwLFxuICAgICAgICB0aXRsZTogXCJXaW5kIGttL2hcIlxuICAgIH0pO1xuXG5cbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50KCkge1xuICAgICAgICAkaHR0cC5nZXQoJ2FwaS9sb2NhbC5qc29uJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuY291cnRob3VzZSA9IGRhdGE7XG5cbiAgICAgICAgICAgIHZhciB3aW5kU3BlZWQgPSBkYXRhLnNwZWVkICogMS42MDkzNDtcbiAgICAgICAgICAgICRzY29wZS53aW5kU3BlZWQgPSBNYXRoLmNlaWwod2luZFNwZWVkICogMTApIC8gMTA7XG4gICAgICAgICAgICBnYy5yZWZyZXNoKCRzY29wZS53aW5kU3BlZWQpO1xuXG4gICAgICAgICAgICB2YXIgZGVncmVlcyA9IDA7XG4gICAgICAgICAgICBzd2l0Y2ggKGRhdGEuZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcIk5cIjpcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlcyA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJORVwiOlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gNDU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJFXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSA5MDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIlNFXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAxMzU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTXCI6XG4gICAgICAgICAgICAgICAgICAgIGRlZ3JlZXMgPSAxODA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJTV1wiOlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gMjI1O1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiV1wiOlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gMjcwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiTldcIjpcbiAgICAgICAgICAgICAgICAgICAgZGVncmVlcyA9IDMxNTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBkZWdyZWVzID0gJ04nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJHNjb3BlLmFycm93Q291cnRob3VzZSA9IHtcbiAgICAgICAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknLFxuICAgICAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAgICAgJy1vLXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknLFxuICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknXG4gICAgICAgICAgICB9O1xuLy9cbi8vICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICBnZXRDdXJyZW50KCk7XG4gICAgICAgIH0pO1xuICAgIH0sIDUwMDApO1xuICAgIGdldEN1cnJlbnQoKTtcblxuXG4gICAgLyoqXG4gICAgICogRm9yZWNhc3QuaW9cbiAgICAgKi9cblxuICAgIHZhciBnZCA9IG5ldyBKdXN0R2FnZSh7XG4gICAgICAgIGlkOiBcImdhdWdlLWRvd250b3duXCIsXG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMjAsXG4gICAgICAgIHRpdGxlOiBcIldpbmQga20vaFwiXG4gICAgfSk7XG5cbiAgICAkc2NvcGUuaXNGb3JlY2FzdENvbGxhcHNlZCA9IGZhbHNlO1xuXG4gICAgJGh0dHAuZ2V0KCdhcGkvcmV2ZWxzdG9rZS5qc29uJykuc3VjY2VzcyhmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgJHNjb3BlLmZvcmVjYXN0aW8gPSBkYXRhO1xuXG4gICAgICAgICRzY29wZS5jdXJyZW50V2VhdGhlciA9IHtcbiAgICAgICAgICAgIGZvcmVjYXN0OiB7XG4gICAgICAgICAgICAgICAgaWNvbjogZGF0YS5jdXJyZW50bHkuaWNvbixcbiAgICAgICAgICAgICAgICBpY29uU2l6ZTogODBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgd2luZFNwZWVkID0gZGF0YS5jdXJyZW50bHkud2luZFNwZWVkO1xuICAgICAgICB3aW5kU3BlZWQgPSBNYXRoLmNlaWwod2luZFNwZWVkICogMTApIC8gMTA7XG4gICAgICAgIGdkLnJlZnJlc2god2luZFNwZWVkKTtcblxuICAgICAgICB2YXIgZGVncmVlcyA9IGRhdGEuY3VycmVudGx5LndpbmRCZWFyaW5nO1xuXG4gICAgICAgICRzY29wZS5hcnJvd0Rvd250b3duID0ge1xuICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknXG4gICAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBFbnZpcm9ubWVudCBDYW5hZGFcbiAgICAgKi9cbiAgICAkc2NvcGUuaXNFY0ZvcmVjYXN0Q29sbGFwc2VkID0gZmFsc2U7XG5cbiAgICB2YXIgZ2EgPSBuZXcgSnVzdEdhZ2Uoe1xuICAgICAgICBpZDogXCJnYXVnZS1haXJwb3J0XCIsXG4gICAgICAgIHZhbHVlOiAwLFxuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMjAsXG4gICAgICAgIHRpdGxlOiBcIldpbmQga20vaFwiXG4gICAgfSk7XG5cbiAgICAkaHR0cC5nZXQoJ2FwaS9yZXZlbHN0b2tlLWVjLmpzb24nKS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLmFpcnBvcnQgPSBkYXRhO1xuXG4gICAgICAgIGlmIChkYXRhLmN1cnJlbnRDb25kaXRpb25zLnN0YXRpb25bJ0BhdHRyaWJ1dGVzJ10uY29kZSA9PSBcIlwiKSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd0FpcnBvcnRDb25kaXRpb25zID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS53YXJuaW5ncy5ldmVudCkge1xuICAgICAgICAgICAgc3dpdGNoIChkYXRhLndhcm5pbmdzLmV2ZW50WydAYXR0cmlidXRlcyddLnR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICd3YXRjaCc6XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5hbGVydENsYXNzID0gJ2FsZXJ0LWRhbmdlcic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnYWR2aXNvcnknOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxlcnRDbGFzcyA9ICdhbGVydC13YXJuaW5nJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICd3YXJuaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFsZXJ0Q2xhc3MgPSAnYWxlcnQtd2FybmluZyc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgY2FzZSAnZW5kZWQnOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxlcnRDbGFzcyA9ICdhbGVydC1zdWNjZXNzJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBjYXNlICdzdGF0ZW1lbnQnOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxlcnRDbGFzcyA9ICdhbGVydC1pbmZvJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYWxlcnRDbGFzcyA9ICdhbGVydC1pbmZvJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgd2luZFNwZWVkID0gZGF0YS5jdXJyZW50Q29uZGl0aW9ucy53aW5kLnNwZWVkO1xuICAgICAgICBnYS5yZWZyZXNoKHdpbmRTcGVlZCk7XG5cbiAgICAgICAgdmFyIGRlZ3JlZXMgPSBkYXRhLmN1cnJlbnRDb25kaXRpb25zLndpbmQuYmVhcmluZztcblxuICAgICAgICAkc2NvcGUuYXJyb3dBaXJwb3J0ID0ge1xuICAgICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6ICdyb3RhdGUoJyArIGRlZ3JlZXMgKyAnZGVnKScsXG4gICAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICctbXMtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAncm90YXRlKCcgKyBkZWdyZWVzICsgJ2RlZyknXG4gICAgICAgIH07XG5cbiAgICAgICAgLy9jb25zb2xlLmxvZyhkYXRhKTtcbiAgICB9KTtcbn0pO1xuXG5yaWdodE5vd0FwcC5maWx0ZXIoJ2NsaW1hY29ucycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvLS9nLCBcIiBcIik7XG4gICAgfVxufSk7XG5cbnJpZ2h0Tm93QXBwLmZpbHRlcignd2luZERpcmVjdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICB2YXIgZGlyZWN0aW9ucyA9IFsnTicsICdORScsICdFJywgJ1NFJywgJ1MnLCAnU1cnLCAnVycsICdOVycsICdOJ107XG4gICAgICAgIHJldHVybiBkaXJlY3Rpb25zW01hdGgucm91bmQoaW5wdXQvNDUpXTtcbiAgICB9XG59KTtcblxucmlnaHROb3dBcHAuZmlsdGVyKCdlY0RpcmVjdGlvbicsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBpZiAoaW5wdXQgPT0gXCJcIiB8fCBpbnB1dCA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBpbnB1dDtcbiAgICB9XG59KTtcbiIsIi8qKlxuICogQGZpbGVvdmVydmlldyBNYWluIGZ1bmN0aW9uIHNyYy5cbiAqL1xuXG4vLyBIVE1MNSBTaGl2LiBNdXN0IGJlIGluIDxoZWFkPiB0byBzdXBwb3J0IG9sZGVyIGJyb3dzZXJzLlxuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTtcbmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2F1ZGlvJyk7XG5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cmFjaycpO1xuXG4vKipcbiAqIERvdWJsZXMgYXMgdGhlIG1haW4gZnVuY3Rpb24gZm9yIHVzZXJzIHRvIGNyZWF0ZSBhIHBsYXllciBpbnN0YW5jZSBhbmQgYWxzb1xuICogdGhlIG1haW4gbGlicmFyeSBvYmplY3QuXG4gKlxuICogKipBTElBU0VTKiogdmlkZW9qcywgX1ZfIChkZXByZWNhdGVkKVxuICpcbiAqIFRoZSBgdmpzYCBmdW5jdGlvbiBjYW4gYmUgdXNlZCB0byBpbml0aWFsaXplIG9yIHJldHJpZXZlIGEgcGxheWVyLlxuICpcbiAqICAgICB2YXIgbXlQbGF5ZXIgPSB2anMoJ215X3ZpZGVvX2lkJyk7XG4gKlxuICogQHBhcmFtICB7U3RyaW5nfEVsZW1lbnR9IGlkICAgICAgVmlkZW8gZWxlbWVudCBvciB2aWRlbyBlbGVtZW50IElEXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBvcHRpb25zICAgICAgICBPcHRpb25hbCBvcHRpb25zIG9iamVjdCBmb3IgY29uZmlnL3NldHRpbmdzXG4gKiBAcGFyYW0gIHtGdW5jdGlvbj19IHJlYWR5ICAgICAgICBPcHRpb25hbCByZWFkeSBjYWxsYmFja1xuICogQHJldHVybiB7dmpzLlBsYXllcn0gICAgICAgICAgICAgQSBwbGF5ZXIgaW5zdGFuY2VcbiAqIEBuYW1lc3BhY2VcbiAqL1xudmFyIHZqcyA9IGZ1bmN0aW9uKGlkLCBvcHRpb25zLCByZWFkeSl7XG4gIHZhciB0YWc7IC8vIEVsZW1lbnQgb2YgSURcblxuICAvLyBBbGxvdyBmb3IgZWxlbWVudCBvciBJRCB0byBiZSBwYXNzZWQgaW5cbiAgLy8gU3RyaW5nIElEXG4gIGlmICh0eXBlb2YgaWQgPT09ICdzdHJpbmcnKSB7XG5cbiAgICAvLyBBZGp1c3QgZm9yIGpRdWVyeSBJRCBzeW50YXhcbiAgICBpZiAoaWQuaW5kZXhPZignIycpID09PSAwKSB7XG4gICAgICBpZCA9IGlkLnNsaWNlKDEpO1xuICAgIH1cblxuICAgIC8vIElmIGEgcGxheWVyIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZCBmb3IgdGhpcyBJRCByZXR1cm4gaXQuXG4gICAgaWYgKHZqcy5wbGF5ZXJzW2lkXSkge1xuICAgICAgcmV0dXJuIHZqcy5wbGF5ZXJzW2lkXTtcblxuICAgIC8vIE90aGVyd2lzZSBnZXQgZWxlbWVudCBmb3IgSURcbiAgICB9IGVsc2Uge1xuICAgICAgdGFnID0gdmpzLmVsKGlkKTtcbiAgICB9XG5cbiAgLy8gSUQgaXMgYSBtZWRpYSBlbGVtZW50XG4gIH0gZWxzZSB7XG4gICAgdGFnID0gaWQ7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgYSB1c2VhYmxlIGVsZW1lbnRcbiAgaWYgKCF0YWcgfHwgIXRhZy5ub2RlTmFtZSkgeyAvLyByZTogbm9kZU5hbWUsIGNvdWxkIGJlIGEgYm94IGRpdiBhbHNvXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIGVsZW1lbnQgb3IgSUQgc3VwcGxpZWQgaXMgbm90IHZhbGlkLiAodmlkZW9qcyknKTsgLy8gUmV0dXJuc1xuICB9XG5cbiAgLy8gRWxlbWVudCBtYXkgaGF2ZSBhIHBsYXllciBhdHRyIHJlZmVycmluZyB0byBhbiBhbHJlYWR5IGNyZWF0ZWQgcGxheWVyIGluc3RhbmNlLlxuICAvLyBJZiBub3QsIHNldCB1cCBhIG5ldyBwbGF5ZXIgYW5kIHJldHVybiB0aGUgaW5zdGFuY2UuXG4gIHJldHVybiB0YWdbJ3BsYXllciddIHx8IG5ldyB2anMuUGxheWVyKHRhZywgb3B0aW9ucywgcmVhZHkpO1xufTtcblxuLy8gRXh0ZW5kZWQgbmFtZSwgYWxzbyBhdmFpbGFibGUgZXh0ZXJuYWxseSwgd2luZG93LnZpZGVvanNcbnZhciB2aWRlb2pzID0gd2luZG93Wyd2aWRlb2pzJ10gPSB2anM7XG5cbi8vIENETiBWZXJzaW9uLiBVc2VkIHRvIHRhcmdldCByaWdodCBmbGFzaCBzd2YuXG52anMuQ0ROX1ZFUlNJT04gPSAnNC44JztcbnZqcy5BQ0NFU1NfUFJPVE9DT0wgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly8nIDogJ2h0dHA6Ly8nKTtcblxuLyoqXG4gKiBHbG9iYWwgUGxheWVyIGluc3RhbmNlIG9wdGlvbnMsIHN1cmZhY2VkIGZyb20gdmpzLlBsYXllci5wcm90b3R5cGUub3B0aW9uc19cbiAqIHZqcy5vcHRpb25zID0gdmpzLlBsYXllci5wcm90b3R5cGUub3B0aW9uc19cbiAqIEFsbCBvcHRpb25zIHNob3VsZCB1c2Ugc3RyaW5nIGtleXMgc28gdGhleSBhdm9pZFxuICogcmVuYW1pbmcgYnkgY2xvc3VyZSBjb21waWxlclxuICogQHR5cGUge09iamVjdH1cbiAqL1xudmpzLm9wdGlvbnMgPSB7XG4gIC8vIERlZmF1bHQgb3JkZXIgb2YgZmFsbGJhY2sgdGVjaG5vbG9neVxuICAndGVjaE9yZGVyJzogWydodG1sNScsJ2ZsYXNoJ10sXG4gIC8vIHRlY2hPcmRlcjogWydmbGFzaCcsJ2h0bWw1J10sXG5cbiAgJ2h0bWw1Jzoge30sXG4gICdmbGFzaCc6IHt9LFxuXG4gIC8vIERlZmF1bHQgb2Ygd2ViIGJyb3dzZXIgaXMgMzAweDE1MC4gU2hvdWxkIHJlbHkgb24gc291cmNlIHdpZHRoL2hlaWdodC5cbiAgJ3dpZHRoJzogMzAwLFxuICAnaGVpZ2h0JzogMTUwLFxuICAvLyBkZWZhdWx0Vm9sdW1lOiAwLjg1LFxuICAnZGVmYXVsdFZvbHVtZSc6IDAuMDAsIC8vIFRoZSBmcmVha2luIHNlYWd1bHMgYXJlIGRyaXZpbmcgbWUgY3JhenkhXG5cbiAgLy8gZGVmYXVsdCBwbGF5YmFjayByYXRlc1xuICAncGxheWJhY2tSYXRlcyc6IFtdLFxuICAvLyBBZGQgcGxheWJhY2sgcmF0ZSBzZWxlY3Rpb24gYnkgYWRkaW5nIHJhdGVzXG4gIC8vICdwbGF5YmFja1JhdGVzJzogWzAuNSwgMSwgMS41LCAyXSxcblxuICAvLyBkZWZhdWx0IGluYWN0aXZpdHkgdGltZW91dFxuICAnaW5hY3Rpdml0eVRpbWVvdXQnOiAyMDAwLFxuXG4gIC8vIEluY2x1ZGVkIGNvbnRyb2wgc2V0c1xuICAnY2hpbGRyZW4nOiB7XG4gICAgJ21lZGlhTG9hZGVyJzoge30sXG4gICAgJ3Bvc3RlckltYWdlJzoge30sXG4gICAgJ3RleHRUcmFja0Rpc3BsYXknOiB7fSxcbiAgICAnbG9hZGluZ1NwaW5uZXInOiB7fSxcbiAgICAnYmlnUGxheUJ1dHRvbic6IHt9LFxuICAgICdjb250cm9sQmFyJzoge30sXG4gICAgJ2Vycm9yRGlzcGxheSc6IHt9XG4gIH0sXG5cbiAgJ2xhbmd1YWdlJzogZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKSB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2VzICYmIG5hdmlnYXRvci5sYW5ndWFnZXNbMF0gfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZSB8fCBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgJ2VuJyxcblxuICAvLyBsb2NhbGVzIGFuZCB0aGVpciBsYW5ndWFnZSB0cmFuc2xhdGlvbnNcbiAgJ2xhbmd1YWdlcyc6IHt9LFxuXG4gIC8vIERlZmF1bHQgbWVzc2FnZSB0byBzaG93IHdoZW4gYSB2aWRlbyBjYW5ub3QgYmUgcGxheWVkLlxuICAnbm90U3VwcG9ydGVkTWVzc2FnZSc6ICdObyBjb21wYXRpYmxlIHNvdXJjZSB3YXMgZm91bmQgZm9yIHRoaXMgdmlkZW8uJ1xufTtcblxuLy8gU2V0IENETiBWZXJzaW9uIG9mIHN3ZlxuLy8gVGhlIGFkZGVkICgrKSBibG9ja3MgdGhlIHJlcGxhY2UgZnJvbSBjaGFuZ2luZyB0aGlzIDQuOCBzdHJpbmdcbmlmICh2anMuQ0ROX1ZFUlNJT04gIT09ICdHRU5FUkFURUQnKydfQ0ROX1ZTTicpIHtcbiAgdmlkZW9qcy5vcHRpb25zWydmbGFzaCddWydzd2YnXSA9IHZqcy5BQ0NFU1NfUFJPVE9DT0wgKyAndmpzLnplbmNkbi5uZXQvJyt2anMuQ0ROX1ZFUlNJT04rJy92aWRlby1qcy5zd2YnO1xufVxuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIGFkZGluZyBsYW5ndWFnZXMgdG8gdGhlIGRlZmF1bHQgb3B0aW9ucy4gVXNlZnVsIGZvclxuICogYW1lbmRpbmcgbXVsdGlwbGUgbGFuZ3VhZ2Ugc3VwcG9ydCBhdCBydW50aW1lLlxuICpcbiAqIEV4YW1wbGU6IHZqcy5hZGRMYW5ndWFnZSgnZXMnLCB7J0hlbGxvJzonSG9sYSd9KTtcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGNvZGUgVGhlIGxhbmd1YWdlIGNvZGUgb3IgZGljdGlvbmFyeSBwcm9wZXJ0eVxuICogQHBhcmFtICB7T2JqZWN0fSBkYXRhIFRoZSBkYXRhIHZhbHVlcyB0byBiZSB0cmFuc2xhdGVkXG4gKiBAcmV0dXJuIHtPYmplY3R9IFRoZSByZXN1bHRpbmcgZ2xvYmFsIGxhbmd1YWdlcyBkaWN0aW9uYXJ5IG9iamVjdFxuICovXG52anMuYWRkTGFuZ3VhZ2UgPSBmdW5jdGlvbihjb2RlLCBkYXRhKXtcbiAgaWYodmpzLm9wdGlvbnNbJ2xhbmd1YWdlcyddW2NvZGVdICE9PSB1bmRlZmluZWQpIHtcbiAgICB2anMub3B0aW9uc1snbGFuZ3VhZ2VzJ11bY29kZV0gPSB2anMudXRpbC5tZXJnZU9wdGlvbnModmpzLm9wdGlvbnNbJ2xhbmd1YWdlcyddW2NvZGVdLCBkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICB2anMub3B0aW9uc1snbGFuZ3VhZ2VzJ11bY29kZV0gPSBkYXRhO1xuICB9XG4gIHJldHVybiB2anMub3B0aW9uc1snbGFuZ3VhZ2VzJ107XG59O1xuXG4vKipcbiAqIEdsb2JhbCBwbGF5ZXIgbGlzdFxuICogQHR5cGUge09iamVjdH1cbiAqL1xudmpzLnBsYXllcnMgPSB7fTtcblxuLyohXG4gKiBDdXN0b20gVW5pdmVyc2FsIE1vZHVsZSBEZWZpbml0aW9uIChVTUQpXG4gKlxuICogVmlkZW8uanMgd2lsbCBuZXZlciBiZSBhIG5vbi1icm93c2VyIGxpYiBzbyB3ZSBjYW4gc2ltcGxpZnkgVU1EIGEgYnVuY2ggYW5kXG4gKiBzdGlsbCBzdXBwb3J0IHJlcXVpcmVqcyBhbmQgYnJvd3NlcmlmeS4gVGhpcyBhbHNvIG5lZWRzIHRvIGJlIGNsb3N1cmVcbiAqIGNvbXBpbGVyIGNvbXBhdGlibGUsIHNvIHN0cmluZyBrZXlzIGFyZSB1c2VkLlxuICovXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmVbJ2FtZCddKSB7XG4gIGRlZmluZShbXSwgZnVuY3Rpb24oKXsgcmV0dXJuIHZpZGVvanM7IH0pO1xuXG4vLyBjaGVja2luZyB0aGF0IG1vZHVsZSBpcyBhbiBvYmplY3QgdG9vIGJlY2F1c2Ugb2YgdW1kanMvdW1kIzM1XG59IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jykge1xuICBtb2R1bGVbJ2V4cG9ydHMnXSA9IHZpZGVvanM7XG59XG4vKipcbiAqIENvcmUgT2JqZWN0L0NsYXNzIGZvciBvYmplY3RzIHRoYXQgdXNlIGluaGVyaXRhbmNlICsgY29udHN0cnVjdG9yc1xuICpcbiAqIFRvIGNyZWF0ZSBhIGNsYXNzIHRoYXQgY2FuIGJlIHN1YmNsYXNzZWQgaXRzZWxmLCBleHRlbmQgdGhlIENvcmVPYmplY3QgY2xhc3MuXG4gKlxuICogICAgIHZhciBBbmltYWwgPSBDb3JlT2JqZWN0LmV4dGVuZCgpO1xuICogICAgIHZhciBIb3JzZSA9IEFuaW1hbC5leHRlbmQoKTtcbiAqXG4gKiBUaGUgY29uc3RydWN0b3IgY2FuIGJlIGRlZmluZWQgdGhyb3VnaCB0aGUgaW5pdCBwcm9wZXJ0eSBvZiBhbiBvYmplY3QgYXJndW1lbnQuXG4gKlxuICogICAgIHZhciBBbmltYWwgPSBDb3JlT2JqZWN0LmV4dGVuZCh7XG4gKiAgICAgICBpbml0OiBmdW5jdGlvbihuYW1lLCBzb3VuZCl7XG4gKiAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICogT3RoZXIgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBjYW4gYmUgYWRkZWQgdGhlIHNhbWUgd2F5LCBvciBkaXJlY3RseSB0byB0aGVcbiAqIHByb3RvdHlwZS5cbiAqXG4gKiAgICB2YXIgQW5pbWFsID0gQ29yZU9iamVjdC5leHRlbmQoe1xuICogICAgICAgaW5pdDogZnVuY3Rpb24obmFtZSl7XG4gKiAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gKiAgICAgICB9LFxuICogICAgICAgZ2V0TmFtZTogZnVuY3Rpb24oKXtcbiAqICAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAqICAgICAgIH0sXG4gKiAgICAgICBzb3VuZDogJy4uLidcbiAqICAgIH0pO1xuICpcbiAqICAgIEFuaW1hbC5wcm90b3R5cGUubWFrZVNvdW5kID0gZnVuY3Rpb24oKXtcbiAqICAgICAgYWxlcnQodGhpcy5zb3VuZCk7XG4gKiAgICB9O1xuICpcbiAqIFRvIGNyZWF0ZSBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzLCB1c2UgdGhlIGNyZWF0ZSBtZXRob2QuXG4gKlxuICogICAgdmFyIGZsdWZmeSA9IEFuaW1hbC5jcmVhdGUoJ0ZsdWZmeScpO1xuICogICAgZmx1ZmZ5LmdldE5hbWUoKTsgLy8gLT4gRmx1ZmZ5XG4gKlxuICogTWV0aG9kcyBhbmQgcHJvcGVydGllcyBjYW4gYmUgb3ZlcnJpZGRlbiBpbiBzdWJjbGFzc2VzLlxuICpcbiAqICAgICB2YXIgSG9yc2UgPSBBbmltYWwuZXh0ZW5kKHtcbiAqICAgICAgIHNvdW5kOiAnTmVpZ2hoaGhoISdcbiAqICAgICB9KTtcbiAqXG4gKiAgICAgdmFyIGhvcnNleSA9IEhvcnNlLmNyZWF0ZSgnSG9yc2V5Jyk7XG4gKiAgICAgaG9yc2V5LmdldE5hbWUoKTsgLy8gLT4gSG9yc2V5XG4gKiAgICAgaG9yc2V5Lm1ha2VTb3VuZCgpOyAvLyAtPiBBbGVydDogTmVpZ2hoaGhoIVxuICpcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Db3JlT2JqZWN0ID0gdmpzWydDb3JlT2JqZWN0J10gPSBmdW5jdGlvbigpe307XG4vLyBNYW51YWxseSBleHBvcnRpbmcgdmpzWydDb3JlT2JqZWN0J10gaGVyZSBmb3IgQ2xvc3VyZSBDb21waWxlclxuLy8gYmVjYXVzZSBvZiB0aGUgdXNlIG9mIHRoZSBleHRlbmQvY3JlYXRlIGNsYXNzIG1ldGhvZHNcbi8vIElmIHdlIGRpZG4ndCBkbyB0aGlzLCB0aG9zZSBmdW5jdGlvbnMgd291bGQgZ2V0IGZsYXR0ZW5kIHRvIHNvbWV0aGluZyBsaWtlXG4vLyBgYSA9IC4uLmAgYW5kIGB0aGlzLnByb3RvdHlwZWAgd291bGQgcmVmZXIgdG8gdGhlIGdsb2JhbCBvYmplY3QgaW5zdGVhZCBvZlxuLy8gQ29yZU9iamVjdFxuXG4vKipcbiAqIENyZWF0ZSBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoaXMgT2JqZWN0XG4gKlxuICogICAgIHZhciBBbmltYWwgPSBDb3JlT2JqZWN0LmV4dGVuZCgpO1xuICogICAgIHZhciBIb3JzZSA9IEFuaW1hbC5leHRlbmQoKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgRnVuY3Rpb25zIGFuZCBwcm9wZXJ0aWVzIHRvIGJlIGFwcGxpZWQgdG8gdGhlXG4gKiAgICAgICAgICAgICAgICAgICAgICAgbmV3IG9iamVjdCdzIHByb3RvdHlwZVxuICogQHJldHVybiB7dmpzLkNvcmVPYmplY3R9IEFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gQ29yZU9iamVjdFxuICogQHRoaXMgeyp9XG4gKi9cbnZqcy5Db3JlT2JqZWN0LmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BzKXtcbiAgdmFyIGluaXQsIHN1Yk9iajtcblxuICBwcm9wcyA9IHByb3BzIHx8IHt9O1xuICAvLyBTZXQgdXAgdGhlIGNvbnN0cnVjdG9yIHVzaW5nIHRoZSBzdXBwbGllZCBpbml0IG1ldGhvZFxuICAvLyBvciB1c2luZyB0aGUgaW5pdCBvZiB0aGUgcGFyZW50IG9iamVjdFxuICAvLyBNYWtlIHN1cmUgdG8gY2hlY2sgdGhlIHVub2JmdXNjYXRlZCB2ZXJzaW9uIGZvciBleHRlcm5hbCBsaWJzXG4gIGluaXQgPSBwcm9wc1snaW5pdCddIHx8IHByb3BzLmluaXQgfHwgdGhpcy5wcm90b3R5cGVbJ2luaXQnXSB8fCB0aGlzLnByb3RvdHlwZS5pbml0IHx8IGZ1bmN0aW9uKCl7fTtcbiAgLy8gSW4gUmVzaWcncyBzaW1wbGUgY2xhc3MgaW5oZXJpdGFuY2UgKHByZXZpb3VzbHkgdXNlZCkgdGhlIGNvbnN0cnVjdG9yXG4gIC8vICBpcyBhIGZ1bmN0aW9uIHRoYXQgY2FsbHMgYHRoaXMuaW5pdC5hcHBseShhcmd1bWVudHMpYFxuICAvLyBIb3dldmVyIHRoYXQgd291bGQgcHJldmVudCB1cyBmcm9tIHVzaW5nIGBQYXJlbnRPYmplY3QuY2FsbCh0aGlzKTtgXG4gIC8vICBpbiBhIENoaWxkIGNvbnN0dWN0b3IgYmVjYXVzZSB0aGUgYHRoaXNgIGluIGB0aGlzLmluaXRgXG4gIC8vICB3b3VsZCBzdGlsbCByZWZlciB0byB0aGUgQ2hpbGQgYW5kIGNhdXNlIGFuIGluaWZpbml0ZSBsb29wLlxuICAvLyBXZSB3b3VsZCBpbnN0ZWFkIGhhdmUgdG8gZG9cbiAgLy8gICAgYFBhcmVudE9iamVjdC5wcm90b3R5cGUuaW5pdC5hcHBseSh0aGlzLCBhcmd1bW5lbnRzKTtgXG4gIC8vICBCbGVoLiBXZSdyZSBub3QgY3JlYXRpbmcgYSBfc3VwZXIoKSBmdW5jdGlvbiwgc28gaXQncyBnb29kIHRvIGtlZXBcbiAgLy8gIHRoZSBwYXJlbnQgY29uc3RydWN0b3IgcmVmZXJlbmNlIHNpbXBsZS5cbiAgc3ViT2JqID0gZnVuY3Rpb24oKXtcbiAgICBpbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gSW5oZXJpdCBmcm9tIHRoaXMgb2JqZWN0J3MgcHJvdG90eXBlXG4gIHN1Yk9iai5wcm90b3R5cGUgPSB2anMub2JqLmNyZWF0ZSh0aGlzLnByb3RvdHlwZSk7XG4gIC8vIFJlc2V0IHRoZSBjb25zdHJ1Y3RvciBwcm9wZXJ0eSBmb3Igc3ViT2JqIG90aGVyd2lzZVxuICAvLyBpbnN0YW5jZXMgb2Ygc3ViT2JqIHdvdWxkIGhhdmUgdGhlIGNvbnN0cnVjdG9yIG9mIHRoZSBwYXJlbnQgT2JqZWN0XG4gIHN1Yk9iai5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJPYmo7XG5cbiAgLy8gTWFrZSB0aGUgY2xhc3MgZXh0ZW5kYWJsZVxuICBzdWJPYmouZXh0ZW5kID0gdmpzLkNvcmVPYmplY3QuZXh0ZW5kO1xuICAvLyBNYWtlIGEgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGluc3RhbmNlc1xuICBzdWJPYmouY3JlYXRlID0gdmpzLkNvcmVPYmplY3QuY3JlYXRlO1xuXG4gIC8vIEV4dGVuZCBzdWJPYmoncyBwcm90b3R5cGUgd2l0aCBmdW5jdGlvbnMgYW5kIG90aGVyIHByb3BlcnRpZXMgZnJvbSBwcm9wc1xuICBmb3IgKHZhciBuYW1lIGluIHByb3BzKSB7XG4gICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBzdWJPYmoucHJvdG90eXBlW25hbWVdID0gcHJvcHNbbmFtZV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHN1Yk9iajtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbmV3IGluc3RhY2Ugb2YgdGhpcyBPYmplY3QgY2xhc3NcbiAqXG4gKiAgICAgdmFyIG15QW5pbWFsID0gQW5pbWFsLmNyZWF0ZSgpO1xuICpcbiAqIEByZXR1cm4ge3Zqcy5Db3JlT2JqZWN0fSBBbiBpbnN0YW5jZSBvZiBhIENvcmVPYmplY3Qgc3ViY2xhc3NcbiAqIEB0aGlzIHsqfVxuICovXG52anMuQ29yZU9iamVjdC5jcmVhdGUgPSBmdW5jdGlvbigpe1xuICAvLyBDcmVhdGUgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSB0aGlzIG9iamVjdCdzIHByb3RvdHlwZVxuICB2YXIgaW5zdCA9IHZqcy5vYmouY3JlYXRlKHRoaXMucHJvdG90eXBlKTtcblxuICAvLyBBcHBseSB0aGlzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uIHRvIHRoZSBuZXcgb2JqZWN0XG4gIHRoaXMuYXBwbHkoaW5zdCwgYXJndW1lbnRzKTtcblxuICAvLyBSZXR1cm4gdGhlIG5ldyBvYmplY3RcbiAgcmV0dXJuIGluc3Q7XG59O1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IEV2ZW50IFN5c3RlbSAoSm9obiBSZXNpZyAtIFNlY3JldHMgb2YgYSBKUyBOaW5qYSBodHRwOi8vanNuaW5qYS5jb20vKVxuICogKE9yaWdpbmFsIGJvb2sgdmVyc2lvbiB3YXNuJ3QgY29tcGxldGVseSB1c2FibGUsIHNvIGZpeGVkIHNvbWUgdGhpbmdzIGFuZCBtYWRlIENsb3N1cmUgQ29tcGlsZXIgY29tcGF0aWJsZSlcbiAqIFRoaXMgc2hvdWxkIHdvcmsgdmVyeSBzaW1pbGFybHkgdG8galF1ZXJ5J3MgZXZlbnRzLCBob3dldmVyIGl0J3MgYmFzZWQgb2ZmIHRoZSBib29rIHZlcnNpb24gd2hpY2ggaXNuJ3QgYXNcbiAqIHJvYnVzdCBhcyBqcXVlcnkncywgc28gdGhlcmUncyBwcm9iYWJseSBzb21lIGRpZmZlcmVuY2VzLlxuICovXG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGVsZW1lbnRcbiAqIEl0IHN0b3JlcyB0aGUgaGFuZGxlciBmdW5jdGlvbiBpbiBhIHNlcGFyYXRlIGNhY2hlIG9iamVjdFxuICogYW5kIGFkZHMgYSBnZW5lcmljIGhhbmRsZXIgdG8gdGhlIGVsZW1lbnQncyBldmVudCxcbiAqIGFsb25nIHdpdGggYSB1bmlxdWUgaWQgKGd1aWQpIHRvIHRoZSBlbGVtZW50LlxuICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9ICAgZWxlbSBFbGVtZW50IG9yIG9iamVjdCB0byBiaW5kIGxpc3RlbmVycyB0b1xuICogQHBhcmFtICB7U3RyaW5nfEFycmF5fSAgIHR5cGUgVHlwZSBvZiBldmVudCB0byBiaW5kIHRvLlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgRXZlbnQgbGlzdGVuZXIuXG4gKiBAcHJpdmF0ZVxuICovXG52anMub24gPSBmdW5jdGlvbihlbGVtLCB0eXBlLCBmbil7XG4gIGlmICh2anMub2JqLmlzQXJyYXkodHlwZSkpIHtcbiAgICByZXR1cm4gX2hhbmRsZU11bHRpcGxlRXZlbnRzKHZqcy5vbiwgZWxlbSwgdHlwZSwgZm4pO1xuICB9XG5cbiAgdmFyIGRhdGEgPSB2anMuZ2V0RGF0YShlbGVtKTtcblxuICAvLyBXZSBuZWVkIGEgcGxhY2UgdG8gc3RvcmUgYWxsIG91ciBoYW5kbGVyIGRhdGFcbiAgaWYgKCFkYXRhLmhhbmRsZXJzKSBkYXRhLmhhbmRsZXJzID0ge307XG5cbiAgaWYgKCFkYXRhLmhhbmRsZXJzW3R5cGVdKSBkYXRhLmhhbmRsZXJzW3R5cGVdID0gW107XG5cbiAgaWYgKCFmbi5ndWlkKSBmbi5ndWlkID0gdmpzLmd1aWQrKztcblxuICBkYXRhLmhhbmRsZXJzW3R5cGVdLnB1c2goZm4pO1xuXG4gIGlmICghZGF0YS5kaXNwYXRjaGVyKSB7XG4gICAgZGF0YS5kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgZGF0YS5kaXNwYXRjaGVyID0gZnVuY3Rpb24gKGV2ZW50KXtcblxuICAgICAgaWYgKGRhdGEuZGlzYWJsZWQpIHJldHVybjtcbiAgICAgIGV2ZW50ID0gdmpzLmZpeEV2ZW50KGV2ZW50KTtcblxuICAgICAgdmFyIGhhbmRsZXJzID0gZGF0YS5oYW5kbGVyc1tldmVudC50eXBlXTtcblxuICAgICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICAgIC8vIENvcHkgaGFuZGxlcnMgc28gaWYgaGFuZGxlcnMgYXJlIGFkZGVkL3JlbW92ZWQgZHVyaW5nIHRoZSBwcm9jZXNzIGl0IGRvZXNuJ3QgdGhyb3cgZXZlcnl0aGluZyBvZmYuXG4gICAgICAgIHZhciBoYW5kbGVyc0NvcHkgPSBoYW5kbGVycy5zbGljZSgwKTtcblxuICAgICAgICBmb3IgKHZhciBtID0gMCwgbiA9IGhhbmRsZXJzQ29weS5sZW5ndGg7IG0gPCBuOyBtKyspIHtcbiAgICAgICAgICBpZiAoZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGhhbmRsZXJzQ29weVttXS5jYWxsKGVsZW0sIGV2ZW50KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgaWYgKGRhdGEuaGFuZGxlcnNbdHlwZV0ubGVuZ3RoID09IDEpIHtcbiAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZGF0YS5kaXNwYXRjaGVyLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChlbGVtLmF0dGFjaEV2ZW50KSB7XG4gICAgICBlbGVtLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCBkYXRhLmRpc3BhdGNoZXIpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmVzIGV2ZW50IGxpc3RlbmVycyBmcm9tIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSAge0VsZW1lbnR8T2JqZWN0fSAgIGVsZW0gT2JqZWN0IHRvIHJlbW92ZSBsaXN0ZW5lcnMgZnJvbVxuICogQHBhcmFtICB7U3RyaW5nfEFycmF5PX0gICB0eXBlIFR5cGUgb2YgbGlzdGVuZXIgdG8gcmVtb3ZlLiBEb24ndCBpbmNsdWRlIHRvIHJlbW92ZSBhbGwgZXZlbnRzIGZyb20gZWxlbWVudC5cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgIFNwZWNpZmljIGxpc3RlbmVyIHRvIHJlbW92ZS4gRG9uJ3QgaW5jbGR1ZSB0byByZW1vdmUgbGlzdGVuZXJzIGZvciBhbiBldmVudCB0eXBlLlxuICogQHByaXZhdGVcbiAqL1xudmpzLm9mZiA9IGZ1bmN0aW9uKGVsZW0sIHR5cGUsIGZuKSB7XG4gIC8vIERvbid0IHdhbnQgdG8gYWRkIGEgY2FjaGUgb2JqZWN0IHRocm91Z2ggZ2V0RGF0YSBpZiBub3QgbmVlZGVkXG4gIGlmICghdmpzLmhhc0RhdGEoZWxlbSkpIHJldHVybjtcblxuICB2YXIgZGF0YSA9IHZqcy5nZXREYXRhKGVsZW0pO1xuXG4gIC8vIElmIG5vIGV2ZW50cyBleGlzdCwgbm90aGluZyB0byB1bmJpbmRcbiAgaWYgKCFkYXRhLmhhbmRsZXJzKSB7IHJldHVybjsgfVxuXG4gIGlmICh2anMub2JqLmlzQXJyYXkodHlwZSkpIHtcbiAgICByZXR1cm4gX2hhbmRsZU11bHRpcGxlRXZlbnRzKHZqcy5vZmYsIGVsZW0sIHR5cGUsIGZuKTtcbiAgfVxuXG4gIC8vIFV0aWxpdHkgZnVuY3Rpb25cbiAgdmFyIHJlbW92ZVR5cGUgPSBmdW5jdGlvbih0KXtcbiAgICAgZGF0YS5oYW5kbGVyc1t0XSA9IFtdO1xuICAgICB2anMuY2xlYW5VcEV2ZW50cyhlbGVtLHQpO1xuICB9O1xuXG4gIC8vIEFyZSB3ZSByZW1vdmluZyBhbGwgYm91bmQgZXZlbnRzP1xuICBpZiAoIXR5cGUpIHtcbiAgICBmb3IgKHZhciB0IGluIGRhdGEuaGFuZGxlcnMpIHJlbW92ZVR5cGUodCk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIGhhbmRsZXJzID0gZGF0YS5oYW5kbGVyc1t0eXBlXTtcblxuICAvLyBJZiBubyBoYW5kbGVycyBleGlzdCwgbm90aGluZyB0byB1bmJpbmRcbiAgaWYgKCFoYW5kbGVycykgcmV0dXJuO1xuXG4gIC8vIElmIG5vIGxpc3RlbmVyIHdhcyBwcm92aWRlZCwgcmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yIHR5cGVcbiAgaWYgKCFmbikge1xuICAgIHJlbW92ZVR5cGUodHlwZSk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gV2UncmUgb25seSByZW1vdmluZyBhIHNpbmdsZSBoYW5kbGVyXG4gIGlmIChmbi5ndWlkKSB7XG4gICAgZm9yICh2YXIgbiA9IDA7IG4gPCBoYW5kbGVycy5sZW5ndGg7IG4rKykge1xuICAgICAgaWYgKGhhbmRsZXJzW25dLmd1aWQgPT09IGZuLmd1aWQpIHtcbiAgICAgICAgaGFuZGxlcnMuc3BsaWNlKG4tLSwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmpzLmNsZWFuVXBFdmVudHMoZWxlbSwgdHlwZSk7XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIHRoZSBsaXN0ZW5lciBjYWNoZSBhbmQgZGlzcGF0Y2hlcnNcbiAqIEBwYXJhbSAge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEVsZW1lbnQgdG8gY2xlYW4gdXBcbiAqIEBwYXJhbSAge1N0cmluZ30gdHlwZSBUeXBlIG9mIGV2ZW50IHRvIGNsZWFuIHVwXG4gKiBAcHJpdmF0ZVxuICovXG52anMuY2xlYW5VcEV2ZW50cyA9IGZ1bmN0aW9uKGVsZW0sIHR5cGUpIHtcbiAgdmFyIGRhdGEgPSB2anMuZ2V0RGF0YShlbGVtKTtcblxuICAvLyBSZW1vdmUgdGhlIGV2ZW50cyBvZiBhIHBhcnRpY3VsYXIgdHlwZSBpZiB0aGVyZSBhcmUgbm9uZSBsZWZ0XG4gIGlmIChkYXRhLmhhbmRsZXJzW3R5cGVdLmxlbmd0aCA9PT0gMCkge1xuICAgIGRlbGV0ZSBkYXRhLmhhbmRsZXJzW3R5cGVdO1xuICAgIC8vIGRhdGEuaGFuZGxlcnNbdHlwZV0gPSBudWxsO1xuICAgIC8vIFNldHRpbmcgdG8gbnVsbCB3YXMgY2F1c2luZyBhbiBlcnJvciB3aXRoIGRhdGEuaGFuZGxlcnNcblxuICAgIC8vIFJlbW92ZSB0aGUgbWV0YS1oYW5kbGVyIGZyb20gdGhlIGVsZW1lbnRcbiAgICBpZiAoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKSB7XG4gICAgICBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgZGF0YS5kaXNwYXRjaGVyLCBmYWxzZSk7XG4gICAgfSBlbHNlIGlmIChlbGVtLmRldGFjaEV2ZW50KSB7XG4gICAgICBlbGVtLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBkYXRhLmRpc3BhdGNoZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgZXZlbnRzIG9iamVjdCBpZiB0aGVyZSBhcmUgbm8gdHlwZXMgbGVmdFxuICBpZiAodmpzLmlzRW1wdHkoZGF0YS5oYW5kbGVycykpIHtcbiAgICBkZWxldGUgZGF0YS5oYW5kbGVycztcbiAgICBkZWxldGUgZGF0YS5kaXNwYXRjaGVyO1xuICAgIGRlbGV0ZSBkYXRhLmRpc2FibGVkO1xuXG4gICAgLy8gZGF0YS5oYW5kbGVycyA9IG51bGw7XG4gICAgLy8gZGF0YS5kaXNwYXRjaGVyID0gbnVsbDtcbiAgICAvLyBkYXRhLmRpc2FibGVkID0gbnVsbDtcbiAgfVxuXG4gIC8vIEZpbmFsbHkgcmVtb3ZlIHRoZSBleHBhbmRvIGlmIHRoZXJlIGlzIG5vIGRhdGEgbGVmdFxuICBpZiAodmpzLmlzRW1wdHkoZGF0YSkpIHtcbiAgICB2anMucmVtb3ZlRGF0YShlbGVtKTtcbiAgfVxufTtcblxuLyoqXG4gKiBGaXggYSBuYXRpdmUgZXZlbnQgdG8gaGF2ZSBzdGFuZGFyZCBwcm9wZXJ0eSB2YWx1ZXNcbiAqIEBwYXJhbSAge09iamVjdH0gZXZlbnQgRXZlbnQgb2JqZWN0IHRvIGZpeFxuICogQHJldHVybiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmZpeEV2ZW50ID0gZnVuY3Rpb24oZXZlbnQpIHtcblxuICBmdW5jdGlvbiByZXR1cm5UcnVlKCkgeyByZXR1cm4gdHJ1ZTsgfVxuICBmdW5jdGlvbiByZXR1cm5GYWxzZSgpIHsgcmV0dXJuIGZhbHNlOyB9XG5cbiAgLy8gVGVzdCBpZiBmaXhpbmcgdXAgaXMgbmVlZGVkXG4gIC8vIFVzZWQgdG8gY2hlY2sgaWYgIWV2ZW50LnN0b3BQcm9wYWdhdGlvbiBpbnN0ZWFkIG9mIGlzUHJvcGFnYXRpb25TdG9wcGVkXG4gIC8vIEJ1dCBuYXRpdmUgZXZlbnRzIHJldHVybiB0cnVlIGZvciBzdG9wUHJvcGFnYXRpb24sIGJ1dCBkb24ndCBoYXZlXG4gIC8vIG90aGVyIGV4cGVjdGVkIG1ldGhvZHMgbGlrZSBpc1Byb3BhZ2F0aW9uU3RvcHBlZC4gU2VlbXMgdG8gYmUgYSBwcm9ibGVtXG4gIC8vIHdpdGggdGhlIEphdmFzY3JpcHQgTmluamEgY29kZS4gU28gd2UncmUganVzdCBvdmVycmlkaW5nIGFsbCBldmVudHMgbm93LlxuICBpZiAoIWV2ZW50IHx8ICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCkge1xuICAgIHZhciBvbGQgPSBldmVudCB8fCB3aW5kb3cuZXZlbnQ7XG5cbiAgICBldmVudCA9IHt9O1xuICAgIC8vIENsb25lIHRoZSBvbGQgb2JqZWN0IHNvIHRoYXQgd2UgY2FuIG1vZGlmeSB0aGUgdmFsdWVzIGV2ZW50ID0ge307XG4gICAgLy8gSUU4IERvZXNuJ3QgbGlrZSB3aGVuIHlvdSBtZXNzIHdpdGggbmF0aXZlIGV2ZW50IHByb3BlcnRpZXNcbiAgICAvLyBGaXJlZm94IHJldHVybnMgZmFsc2UgZm9yIGV2ZW50Lmhhc093blByb3BlcnR5KCd0eXBlJykgYW5kIG90aGVyIHByb3BzXG4gICAgLy8gIHdoaWNoIG1ha2VzIGNvcHlpbmcgbW9yZSBkaWZmaWN1bHQuXG4gICAgLy8gVE9ETzogUHJvYmFibHkgYmVzdCB0byBjcmVhdGUgYSB3aGl0ZWxpc3Qgb2YgZXZlbnQgcHJvcHNcbiAgICBmb3IgKHZhciBrZXkgaW4gb2xkKSB7XG4gICAgICAvLyBTYWZhcmkgNi4wLjMgd2FybnMgeW91IGlmIHlvdSB0cnkgdG8gY29weSBkZXByZWNhdGVkIGxheWVyWC9ZXG4gICAgICAvLyBDaHJvbWUgd2FybnMgeW91IGlmIHlvdSB0cnkgdG8gY29weSBkZXByZWNhdGVkIGtleWJvYXJkRXZlbnQua2V5TG9jYXRpb25cbiAgICAgIGlmIChrZXkgIT09ICdsYXllclgnICYmIGtleSAhPT0gJ2xheWVyWScgJiYga2V5ICE9PSAna2V5Ym9hcmRFdmVudC5rZXlMb2NhdGlvbicpIHtcbiAgICAgICAgLy8gQ2hyb21lIDMyKyB3YXJucyBpZiB5b3UgdHJ5IHRvIGNvcHkgZGVwcmVjYXRlZCByZXR1cm5WYWx1ZSwgYnV0XG4gICAgICAgIC8vIHdlIHN0aWxsIHdhbnQgdG8gaWYgcHJldmVudERlZmF1bHQgaXNuJ3Qgc3VwcG9ydGVkIChJRTgpLlxuICAgICAgICBpZiAoIShrZXkgPT0gJ3JldHVyblZhbHVlJyAmJiBvbGQucHJldmVudERlZmF1bHQpKSB7XG4gICAgICAgICAgZXZlbnRba2V5XSA9IG9sZFtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGhlIGV2ZW50IG9jY3VycmVkIG9uIHRoaXMgZWxlbWVudFxuICAgIGlmICghZXZlbnQudGFyZ2V0KSB7XG4gICAgICBldmVudC50YXJnZXQgPSBldmVudC5zcmNFbGVtZW50IHx8IGRvY3VtZW50O1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSB3aGljaCBvdGhlciBlbGVtZW50IHRoZSBldmVudCBpcyByZWxhdGVkIHRvXG4gICAgZXZlbnQucmVsYXRlZFRhcmdldCA9IGV2ZW50LmZyb21FbGVtZW50ID09PSBldmVudC50YXJnZXQgP1xuICAgICAgZXZlbnQudG9FbGVtZW50IDpcbiAgICAgIGV2ZW50LmZyb21FbGVtZW50O1xuXG4gICAgLy8gU3RvcCB0aGUgZGVmYXVsdCBicm93c2VyIGFjdGlvblxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG9sZC5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgICBvbGQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIH1cbiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgICBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuICAgICAgZXZlbnQuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVybkZhbHNlO1xuICAgIGV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQgPSBmYWxzZTtcblxuICAgIC8vIFN0b3AgdGhlIGV2ZW50IGZyb20gYnViYmxpbmdcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAob2xkLnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgICBvbGQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgICBldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuICAgICAgZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuICAgIH07XG5cbiAgICBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVybkZhbHNlO1xuXG4gICAgLy8gU3RvcCB0aGUgZXZlbnQgZnJvbSBidWJibGluZyBhbmQgZXhlY3V0aW5nIG90aGVyIGhhbmRsZXJzXG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKG9sZC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24pIHtcbiAgICAgICAgb2xkLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuICAgICAgZXZlbnQuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfTtcblxuICAgIGV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuRmFsc2U7XG5cbiAgICAvLyBIYW5kbGUgbW91c2UgcG9zaXRpb25cbiAgICBpZiAoZXZlbnQuY2xpZW50WCAhPSBudWxsKSB7XG4gICAgICB2YXIgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBib2R5ID0gZG9jdW1lbnQuYm9keTtcblxuICAgICAgZXZlbnQucGFnZVggPSBldmVudC5jbGllbnRYICtcbiAgICAgICAgKGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwKSAtXG4gICAgICAgIChkb2MgJiYgZG9jLmNsaWVudExlZnQgfHwgYm9keSAmJiBib2R5LmNsaWVudExlZnQgfHwgMCk7XG4gICAgICBldmVudC5wYWdlWSA9IGV2ZW50LmNsaWVudFkgK1xuICAgICAgICAoZG9jICYmIGRvYy5zY3JvbGxUb3AgfHwgYm9keSAmJiBib2R5LnNjcm9sbFRvcCB8fCAwKSAtXG4gICAgICAgIChkb2MgJiYgZG9jLmNsaWVudFRvcCB8fCBib2R5ICYmIGJvZHkuY2xpZW50VG9wIHx8IDApO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBrZXkgcHJlc3Nlc1xuICAgIGV2ZW50LndoaWNoID0gZXZlbnQuY2hhckNvZGUgfHwgZXZlbnQua2V5Q29kZTtcblxuICAgIC8vIEZpeCBidXR0b24gZm9yIG1vdXNlIGNsaWNrczpcbiAgICAvLyAwID09IGxlZnQ7IDEgPT0gbWlkZGxlOyAyID09IHJpZ2h0XG4gICAgaWYgKGV2ZW50LmJ1dHRvbiAhPSBudWxsKSB7XG4gICAgICBldmVudC5idXR0b24gPSAoZXZlbnQuYnV0dG9uICYgMSA/IDAgOlxuICAgICAgICAoZXZlbnQuYnV0dG9uICYgNCA/IDEgOlxuICAgICAgICAgIChldmVudC5idXR0b24gJiAyID8gMiA6IDApKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gUmV0dXJucyBmaXhlZC11cCBpbnN0YW5jZVxuICByZXR1cm4gZXZlbnQ7XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgYW4gZXZlbnQgZm9yIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSAge0VsZW1lbnR8T2JqZWN0fSAgICAgIGVsZW0gIEVsZW1lbnQgdG8gdHJpZ2dlciBhbiBldmVudCBvblxuICogQHBhcmFtICB7RXZlbnR8T2JqZWN0fFN0cmluZ30gZXZlbnQgQSBzdHJpbmcgKHRoZSB0eXBlKSBvciBhbiBldmVudCBvYmplY3Qgd2l0aCBhIHR5cGUgYXR0cmlidXRlXG4gKiBAcHJpdmF0ZVxuICovXG52anMudHJpZ2dlciA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50KSB7XG4gIC8vIEZldGNoZXMgZWxlbWVudCBkYXRhIGFuZCBhIHJlZmVyZW5jZSB0byB0aGUgcGFyZW50IChmb3IgYnViYmxpbmcpLlxuICAvLyBEb24ndCB3YW50IHRvIGFkZCBhIGRhdGEgb2JqZWN0IHRvIGNhY2hlIGZvciBldmVyeSBwYXJlbnQsXG4gIC8vIHNvIGNoZWNraW5nIGhhc0RhdGEgZmlyc3QuXG4gIHZhciBlbGVtRGF0YSA9ICh2anMuaGFzRGF0YShlbGVtKSkgPyB2anMuZ2V0RGF0YShlbGVtKSA6IHt9O1xuICB2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlIHx8IGVsZW0ub3duZXJEb2N1bWVudDtcbiAgICAgIC8vIHR5cGUgPSBldmVudC50eXBlIHx8IGV2ZW50LFxuICAgICAgLy8gaGFuZGxlcjtcblxuICAvLyBJZiBhbiBldmVudCBuYW1lIHdhcyBwYXNzZWQgYXMgYSBzdHJpbmcsIGNyZWF0ZXMgYW4gZXZlbnQgb3V0IG9mIGl0XG4gIGlmICh0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgZXZlbnQgPSB7IHR5cGU6ZXZlbnQsIHRhcmdldDplbGVtIH07XG4gIH1cbiAgLy8gTm9ybWFsaXplcyB0aGUgZXZlbnQgcHJvcGVydGllcy5cbiAgZXZlbnQgPSB2anMuZml4RXZlbnQoZXZlbnQpO1xuXG4gIC8vIElmIHRoZSBwYXNzZWQgZWxlbWVudCBoYXMgYSBkaXNwYXRjaGVyLCBleGVjdXRlcyB0aGUgZXN0YWJsaXNoZWQgaGFuZGxlcnMuXG4gIGlmIChlbGVtRGF0YS5kaXNwYXRjaGVyKSB7XG4gICAgZWxlbURhdGEuZGlzcGF0Y2hlci5jYWxsKGVsZW0sIGV2ZW50KTtcbiAgfVxuXG4gIC8vIFVubGVzcyBleHBsaWNpdGx5IHN0b3BwZWQgb3IgdGhlIGV2ZW50IGRvZXMgbm90IGJ1YmJsZSAoZS5nLiBtZWRpYSBldmVudHMpXG4gICAgLy8gcmVjdXJzaXZlbHkgY2FsbHMgdGhpcyBmdW5jdGlvbiB0byBidWJibGUgdGhlIGV2ZW50IHVwIHRoZSBET00uXG4gICAgaWYgKHBhcmVudCAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSAmJiBldmVudC5idWJibGVzICE9PSBmYWxzZSkge1xuICAgIHZqcy50cmlnZ2VyKHBhcmVudCwgZXZlbnQpO1xuXG4gIC8vIElmIGF0IHRoZSB0b3Agb2YgdGhlIERPTSwgdHJpZ2dlcnMgdGhlIGRlZmF1bHQgYWN0aW9uIHVubGVzcyBkaXNhYmxlZC5cbiAgfSBlbHNlIGlmICghcGFyZW50ICYmICFldmVudC5kZWZhdWx0UHJldmVudGVkKSB7XG4gICAgdmFyIHRhcmdldERhdGEgPSB2anMuZ2V0RGF0YShldmVudC50YXJnZXQpO1xuXG4gICAgLy8gQ2hlY2tzIGlmIHRoZSB0YXJnZXQgaGFzIGEgZGVmYXVsdCBhY3Rpb24gZm9yIHRoaXMgZXZlbnQuXG4gICAgaWYgKGV2ZW50LnRhcmdldFtldmVudC50eXBlXSkge1xuICAgICAgLy8gVGVtcG9yYXJpbHkgZGlzYWJsZXMgZXZlbnQgZGlzcGF0Y2hpbmcgb24gdGhlIHRhcmdldCBhcyB3ZSBoYXZlIGFscmVhZHkgZXhlY3V0ZWQgdGhlIGhhbmRsZXIuXG4gICAgICB0YXJnZXREYXRhLmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgIC8vIEV4ZWN1dGVzIHRoZSBkZWZhdWx0IGFjdGlvbi5cbiAgICAgIGlmICh0eXBlb2YgZXZlbnQudGFyZ2V0W2V2ZW50LnR5cGVdID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGV2ZW50LnRhcmdldFtldmVudC50eXBlXSgpO1xuICAgICAgfVxuICAgICAgLy8gUmUtZW5hYmxlcyBldmVudCBkaXNwYXRjaGluZy5cbiAgICAgIHRhcmdldERhdGEuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvLyBJbmZvcm0gdGhlIHRyaWdnZXJlciBpZiB0aGUgZGVmYXVsdCB3YXMgcHJldmVudGVkIGJ5IHJldHVybmluZyBmYWxzZVxuICByZXR1cm4gIWV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQ7XG4gIC8qIE9yaWdpbmFsIHZlcnNpb24gb2YganMgbmluamEgZXZlbnRzIHdhc24ndCBjb21wbGV0ZS5cbiAgICogV2UndmUgc2luY2UgdXBkYXRlZCB0byB0aGUgbGF0ZXN0IHZlcnNpb24sIGJ1dCBrZWVwaW5nIHRoaXMgYXJvdW5kXG4gICAqIGZvciBub3cganVzdCBpbiBjYXNlLlxuICAgKi9cbiAgLy8gLy8gQWRkZWQgaW4gYXR0aW9uIHRvIGJvb2suIEJvb2sgY29kZSB3YXMgYnJva2UuXG4gIC8vIGV2ZW50ID0gdHlwZW9mIGV2ZW50ID09PSAnb2JqZWN0JyA/XG4gIC8vICAgZXZlbnRbdmpzLmV4cGFuZG9dID9cbiAgLy8gICAgIGV2ZW50IDpcbiAgLy8gICAgIG5ldyB2anMuRXZlbnQodHlwZSwgZXZlbnQpIDpcbiAgLy8gICBuZXcgdmpzLkV2ZW50KHR5cGUpO1xuXG4gIC8vIGV2ZW50LnR5cGUgPSB0eXBlO1xuICAvLyBpZiAoaGFuZGxlcikge1xuICAvLyAgIGhhbmRsZXIuY2FsbChlbGVtLCBldmVudCk7XG4gIC8vIH1cblxuICAvLyAvLyBDbGVhbiB1cCB0aGUgZXZlbnQgaW4gY2FzZSBpdCBpcyBiZWluZyByZXVzZWRcbiAgLy8gZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuICAvLyBldmVudC50YXJnZXQgPSBlbGVtO1xufTtcblxuLyoqXG4gKiBUcmlnZ2VyIGEgbGlzdGVuZXIgb25seSBvbmNlIGZvciBhbiBldmVudFxuICogQHBhcmFtICB7RWxlbWVudHxPYmplY3R9ICAgZWxlbSBFbGVtZW50IG9yIG9iamVjdCB0b1xuICogQHBhcmFtICB7U3RyaW5nfEFycmF5fSAgIHR5cGVcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmblxuICogQHByaXZhdGVcbiAqL1xudmpzLm9uZSA9IGZ1bmN0aW9uKGVsZW0sIHR5cGUsIGZuKSB7XG4gIGlmICh2anMub2JqLmlzQXJyYXkodHlwZSkpIHtcbiAgICByZXR1cm4gX2hhbmRsZU11bHRpcGxlRXZlbnRzKHZqcy5vbmUsIGVsZW0sIHR5cGUsIGZuKTtcbiAgfVxuICB2YXIgZnVuYyA9IGZ1bmN0aW9uKCl7XG4gICAgdmpzLm9mZihlbGVtLCB0eXBlLCBmdW5jKTtcbiAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuICAvLyBjb3B5IHRoZSBndWlkIHRvIHRoZSBuZXcgZnVuY3Rpb24gc28gaXQgY2FuIHJlbW92ZWQgdXNpbmcgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uJ3MgSURcbiAgZnVuYy5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgdmpzLmd1aWQrKztcbiAgdmpzLm9uKGVsZW0sIHR5cGUsIGZ1bmMpO1xufTtcblxuLyoqXG4gKiBMb29wcyB0aHJvdWdoIGFuIGFycmF5IG9mIGV2ZW50IHR5cGVzIGFuZCBjYWxscyB0aGUgcmVxdWVzdGVkIG1ldGhvZCBmb3IgZWFjaCB0eXBlLlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgVGhlIGV2ZW50IG1ldGhvZCB3ZSB3YW50IHRvIHVzZS5cbiAqIEBwYXJhbSAge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEVsZW1lbnQgb3Igb2JqZWN0IHRvIGJpbmQgbGlzdGVuZXJzIHRvXG4gKiBAcGFyYW0gIHtTdHJpbmd9ICAgdHlwZSBUeXBlIG9mIGV2ZW50IHRvIGJpbmQgdG8uXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgICBFdmVudCBsaXN0ZW5lci5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9oYW5kbGVNdWx0aXBsZUV2ZW50cyhmbiwgZWxlbSwgdHlwZSwgY2FsbGJhY2spIHtcbiAgdmpzLmFyci5mb3JFYWNoKHR5cGUsIGZ1bmN0aW9uKHR5cGUpIHtcbiAgICBmbihlbGVtLCB0eXBlLCBjYWxsYmFjayk7IC8vQ2FsbCB0aGUgZXZlbnQgbWV0aG9kIGZvciBlYWNoIG9uZSBvZiB0aGUgdHlwZXNcbiAgfSk7XG59XG52YXIgaGFzT3duUHJvcCA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBlbGVtZW50IGFuZCBhcHBsaWVzIHByb3BlcnRpZXMuXG4gKiBAcGFyYW0gIHtTdHJpbmc9fSB0YWdOYW1lICAgIE5hbWUgb2YgdGFnIHRvIGJlIGNyZWF0ZWQuXG4gKiBAcGFyYW0gIHtPYmplY3Q9fSBwcm9wZXJ0aWVzIEVsZW1lbnQgcHJvcGVydGllcyB0byBiZSBhcHBsaWVkLlxuICogQHJldHVybiB7RWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5jcmVhdGVFbCA9IGZ1bmN0aW9uKHRhZ05hbWUsIHByb3BlcnRpZXMpe1xuICB2YXIgZWw7XG5cbiAgdGFnTmFtZSA9IHRhZ05hbWUgfHwgJ2Rpdic7XG4gIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuXG4gIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWdOYW1lKTtcblxuICB2anMub2JqLmVhY2gocHJvcGVydGllcywgZnVuY3Rpb24ocHJvcE5hbWUsIHZhbCl7XG4gICAgLy8gTm90IHJlbWVtYmVyaW5nIHdoeSB3ZSB3ZXJlIGNoZWNraW5nIGZvciBkYXNoXG4gICAgLy8gYnV0IHVzaW5nIHNldEF0dHJpYnV0ZSBtZWFucyB5b3UgaGF2ZSB0byB1c2UgZ2V0QXR0cmlidXRlXG5cbiAgICAvLyBUaGUgY2hlY2sgZm9yIGRhc2ggY2hlY2tzIGZvciB0aGUgYXJpYS0qIGF0dHJpYnV0ZXMsIGxpa2UgYXJpYS1sYWJlbCwgYXJpYS12YWx1ZW1pbi5cbiAgICAvLyBUaGUgYWRkaXRpb25hbCBjaGVjayBmb3IgXCJyb2xlXCIgaXMgYmVjYXVzZSB0aGUgZGVmYXVsdCBtZXRob2QgZm9yIGFkZGluZyBhdHRyaWJ1dGVzIGRvZXMgbm90XG4gICAgLy8gYWRkIHRoZSBhdHRyaWJ1dGUgXCJyb2xlXCIuIE15IGd1ZXNzIGlzIGJlY2F1c2UgaXQncyBub3QgYSB2YWxpZCBhdHRyaWJ1dGUgaW4gc29tZSBuYW1lc3BhY2VzLCBhbHRob3VnaFxuICAgIC8vIGJyb3dzZXJzIGhhbmRsZSB0aGUgYXR0cmlidXRlIGp1c3QgZmluZS4gVGhlIFczQyBhbGxvd3MgZm9yIGFyaWEtKiBhdHRyaWJ1dGVzIHRvIGJlIHVzZWQgaW4gcHJlLUhUTUw1IGRvY3MuXG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvd2FpLWFyaWEtcHJpbWVyLyNhcmlhaHRtbC4gVXNpbmcgc2V0QXR0cmlidXRlIGdldHMgYXJvdW5kIHRoaXMgcHJvYmxlbS5cbiAgICBpZiAocHJvcE5hbWUuaW5kZXhPZignYXJpYS0nKSAhPT0gLTEgfHwgcHJvcE5hbWUgPT0gJ3JvbGUnKSB7XG4gICAgIGVsLnNldEF0dHJpYnV0ZShwcm9wTmFtZSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICBlbFtwcm9wTmFtZV0gPSB2YWw7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gZWw7XG59O1xuXG4vKipcbiAqIFVwcGVyY2FzZSB0aGUgZmlyc3QgbGV0dGVyIG9mIGEgc3RyaW5nXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHN0cmluZyBTdHJpbmcgdG8gYmUgdXBwZXJjYXNlZFxuICogQHJldHVybiB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmpzLmNhcGl0YWxpemUgPSBmdW5jdGlvbihzdHJpbmcpe1xuICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufTtcblxuLyoqXG4gKiBPYmplY3QgZnVuY3Rpb25zIGNvbnRhaW5lclxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vYmogPSB7fTtcblxuLyoqXG4gKiBPYmplY3QuY3JlYXRlIHNoaW0gZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2VcbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9jcmVhdGVcbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge09iamVjdH0gICBvYmogT2JqZWN0IHRvIHVzZSBhcyBwcm90b3R5cGVcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vYmouY3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbihvYmope1xuICAvL0NyZWF0ZSBhIG5ldyBmdW5jdGlvbiBjYWxsZWQgJ0YnIHdoaWNoIGlzIGp1c3QgYW4gZW1wdHkgb2JqZWN0LlxuICBmdW5jdGlvbiBGKCkge31cblxuICAvL3RoZSBwcm90b3R5cGUgb2YgdGhlICdGJyBmdW5jdGlvbiBzaG91bGQgcG9pbnQgdG8gdGhlXG4gIC8vcGFyYW1ldGVyIG9mIHRoZSBhbm9ueW1vdXMgZnVuY3Rpb24uXG4gIEYucHJvdG90eXBlID0gb2JqO1xuXG4gIC8vY3JlYXRlIGEgbmV3IGNvbnN0cnVjdG9yIGZ1bmN0aW9uIGJhc2VkIG9mZiBvZiB0aGUgJ0YnIGZ1bmN0aW9uLlxuICByZXR1cm4gbmV3IEYoKTtcbn07XG5cbi8qKlxuICogTG9vcCB0aHJvdWdoIGVhY2ggcHJvcGVydHkgaW4gYW4gb2JqZWN0IGFuZCBjYWxsIGEgZnVuY3Rpb25cbiAqIHdob3NlIGFyZ3VtZW50cyBhcmUgKGtleSx2YWx1ZSlcbiAqIEBwYXJhbSAge09iamVjdH0gICBvYmogT2JqZWN0IG9mIHByb3BlcnRpZXNcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgRnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGVhY2ggcHJvcGVydHkuXG4gKiBAdGhpcyB7Kn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vYmouZWFjaCA9IGZ1bmN0aW9uKG9iaiwgZm4sIGNvbnRleHQpe1xuICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgaWYgKGhhc093blByb3AuY2FsbChvYmosIGtleSkpIHtcbiAgICAgIGZuLmNhbGwoY29udGV4dCB8fCB0aGlzLCBrZXksIG9ialtrZXldKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMgdG9nZXRoZXIgYW5kIHJldHVybiB0aGUgb3JpZ2luYWwuXG4gKiBAcGFyYW0gIHtPYmplY3R9IG9iajFcbiAqIEBwYXJhbSAge09iamVjdH0gb2JqMlxuICogQHJldHVybiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLm9iai5tZXJnZSA9IGZ1bmN0aW9uKG9iajEsIG9iajIpe1xuICBpZiAoIW9iajIpIHsgcmV0dXJuIG9iajE7IH1cbiAgZm9yICh2YXIga2V5IGluIG9iajIpe1xuICAgIGlmIChoYXNPd25Qcm9wLmNhbGwob2JqMiwga2V5KSkge1xuICAgICAgb2JqMVtrZXldID0gb2JqMltrZXldO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqMTtcbn07XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9iamVjdHMsIGFuZCBtZXJnZSBhbnkgcHJvcGVydGllcyB0aGF0IGFyZSBvYmplY3RzXG4gKiBpbnN0ZWFkIG9mIGp1c3Qgb3ZlcndyaXRpbmcgb25lLiBVc2VzIHRvIG1lcmdlIG9wdGlvbnMgaGFzaGVzXG4gKiB3aGVyZSBkZWVwZXIgZGVmYXVsdCBzZXR0aW5ncyBhcmUgaW1wb3J0YW50LlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBvdmVycmlkZVxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoyIE92ZXJyaWRpbmcgb2JqZWN0XG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgTmV3IG9iamVjdC4gT2JqMSBhbmQgT2JqMiB3aWxsIGJlIHVudG91Y2hlZC5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5vYmouZGVlcE1lcmdlID0gZnVuY3Rpb24ob2JqMSwgb2JqMil7XG4gIHZhciBrZXksIHZhbDEsIHZhbDI7XG5cbiAgLy8gbWFrZSBhIGNvcHkgb2Ygb2JqMSBzbyB3ZSdyZSBub3Qgb3Zld3JpdGluZyBvcmlnaW5hbCB2YWx1ZXMuXG4gIC8vIGxpa2UgcHJvdG90eXBlLm9wdGlvbnNfIGFuZCBhbGwgc3ViIG9wdGlvbnMgb2JqZWN0c1xuICBvYmoxID0gdmpzLm9iai5jb3B5KG9iajEpO1xuXG4gIGZvciAoa2V5IGluIG9iajIpe1xuICAgIGlmIChoYXNPd25Qcm9wLmNhbGwob2JqMiwga2V5KSkge1xuICAgICAgdmFsMSA9IG9iajFba2V5XTtcbiAgICAgIHZhbDIgPSBvYmoyW2tleV07XG5cbiAgICAgIC8vIENoZWNrIGlmIGJvdGggcHJvcGVydGllcyBhcmUgcHVyZSBvYmplY3RzIGFuZCBkbyBhIGRlZXAgbWVyZ2UgaWYgc29cbiAgICAgIGlmICh2anMub2JqLmlzUGxhaW4odmFsMSkgJiYgdmpzLm9iai5pc1BsYWluKHZhbDIpKSB7XG4gICAgICAgIG9iajFba2V5XSA9IHZqcy5vYmouZGVlcE1lcmdlKHZhbDEsIHZhbDIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb2JqMVtrZXldID0gb2JqMltrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqMTtcbn07XG5cbi8qKlxuICogTWFrZSBhIGNvcHkgb2YgdGhlIHN1cHBsaWVkIG9iamVjdFxuICogQHBhcmFtICB7T2JqZWN0fSBvYmogT2JqZWN0IHRvIGNvcHlcbiAqIEByZXR1cm4ge09iamVjdH0gICAgIENvcHkgb2Ygb2JqZWN0XG4gKiBAcHJpdmF0ZVxuICovXG52anMub2JqLmNvcHkgPSBmdW5jdGlvbihvYmope1xuICByZXR1cm4gdmpzLm9iai5tZXJnZSh7fSwgb2JqKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIHBsYWluLCBhbmQgbm90IGEgZG9tIG5vZGUgb3IgYW55IG9iamVjdCBzdWItaW5zdGFuY2VcbiAqIEBwYXJhbSAge09iamVjdH0gb2JqIE9iamVjdCB0byBjaGVja1xuICogQHJldHVybiB7Qm9vbGVhbn0gICAgIFRydWUgaWYgcGxhaW4sIGZhbHNlIG90aGVyd2lzZVxuICogQHByaXZhdGVcbiAqL1xudmpzLm9iai5pc1BsYWluID0gZnVuY3Rpb24ob2JqKXtcbiAgcmV0dXJuICEhb2JqXG4gICAgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCdcbiAgICAmJiBvYmoudG9TdHJpbmcoKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSdcbiAgICAmJiBvYmouY29uc3RydWN0b3IgPT09IE9iamVjdDtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gb2JqZWN0IGlzIEFycmF5XG4qICBTaW5jZSBpbnN0YW5jZW9mIEFycmF5IHdpbGwgbm90IHdvcmsgb24gYXJyYXlzIGNyZWF0ZWQgaW4gYW5vdGhlciBmcmFtZSB3ZSBuZWVkIHRvIHVzZSBBcnJheS5pc0FycmF5LCBidXQgc2luY2UgSUU4IGRvZXMgbm90IHN1cHBvcnQgQXJyYXkuaXNBcnJheSB3ZSBuZWVkIHRoaXMgc2hpbVxuICogQHBhcmFtICB7T2JqZWN0fSBvYmogT2JqZWN0IHRvIGNoZWNrXG4gKiBAcmV0dXJuIHtCb29sZWFufSAgICAgVHJ1ZSBpZiBwbGFpbiwgZmFsc2Ugb3RoZXJ3aXNlXG4gKiBAcHJpdmF0ZVxuICovXG52anMub2JqLmlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKGFycikge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFycikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG4vKipcbiAqIENoZWNrIHRvIHNlZSB3aGV0aGVyIHRoZSBpbnB1dCBpcyBOYU4gb3Igbm90LlxuICogTmFOIGlzIHRoZSBvbmx5IEphdmFTY3JpcHQgY29uc3RydWN0IHRoYXQgaXNuJ3QgZXF1YWwgdG8gaXRzZWxmXG4gKiBAcGFyYW0ge051bWJlcn0gbnVtIE51bWJlciB0byBjaGVja1xuICogQHJldHVybiB7Qm9vbGVhbn0gVHJ1ZSBpZiBOYU4sIGZhbHNlIG90aGVyd2lzZVxuICogQHByaXZhdGVcbiAqL1xudmpzLmlzTmFOID0gZnVuY3Rpb24obnVtKSB7XG4gIHJldHVybiBudW0gIT09IG51bTtcbn07XG5cbi8qKlxuICogQmluZCAoYS5rLmEgcHJveHkgb3IgQ29udGV4dCkuIEEgc2ltcGxlIG1ldGhvZCBmb3IgY2hhbmdpbmcgdGhlIGNvbnRleHQgb2YgYSBmdW5jdGlvblxuICAgSXQgYWxzbyBzdG9yZXMgYSB1bmlxdWUgaWQgb24gdGhlIGZ1bmN0aW9uIHNvIGl0IGNhbiBiZSBlYXNpbHkgcmVtb3ZlZCBmcm9tIGV2ZW50c1xuICogQHBhcmFtICB7Kn0gICBjb250ZXh0IFRoZSBvYmplY3QgdG8gYmluZCBhcyBzY29wZVxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuICAgICAgVGhlIGZ1bmN0aW9uIHRvIGJlIGJvdW5kIHRvIGEgc2NvcGVcbiAqIEBwYXJhbSAge051bWJlcj19ICAgdWlkICAgICBBbiBvcHRpb25hbCB1bmlxdWUgSUQgZm9yIHRoZSBmdW5jdGlvbiB0byBiZSBzZXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICogQHByaXZhdGVcbiAqL1xudmpzLmJpbmQgPSBmdW5jdGlvbihjb250ZXh0LCBmbiwgdWlkKSB7XG4gIC8vIE1ha2Ugc3VyZSB0aGUgZnVuY3Rpb24gaGFzIGEgdW5pcXVlIElEXG4gIGlmICghZm4uZ3VpZCkgeyBmbi5ndWlkID0gdmpzLmd1aWQrKzsgfVxuXG4gIC8vIENyZWF0ZSB0aGUgbmV3IGZ1bmN0aW9uIHRoYXQgY2hhbmdlcyB0aGUgY29udGV4dFxuICB2YXIgcmV0ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZuLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQWxsb3cgZm9yIHRoZSBhYmlsaXR5IHRvIGluZGl2aWR1YWxpemUgdGhpcyBmdW5jdGlvblxuICAvLyBOZWVkZWQgaW4gdGhlIGNhc2Ugd2hlcmUgbXVsdGlwbGUgb2JqZWN0cyBtaWdodCBzaGFyZSB0aGUgc2FtZSBwcm90b3R5cGVcbiAgLy8gSUYgYm90aCBpdGVtcyBhZGQgYW4gZXZlbnQgbGlzdGVuZXIgd2l0aCB0aGUgc2FtZSBmdW5jdGlvbiwgdGhlbiB5b3UgdHJ5IHRvIHJlbW92ZSBqdXN0IG9uZVxuICAvLyBpdCB3aWxsIHJlbW92ZSBib3RoIGJlY2F1c2UgdGhleSBib3RoIGhhdmUgdGhlIHNhbWUgZ3VpZC5cbiAgLy8gd2hlbiB1c2luZyB0aGlzLCB5b3UgbmVlZCB0byB1c2UgdGhlIGJpbmQgbWV0aG9kIHdoZW4geW91IHJlbW92ZSB0aGUgbGlzdGVuZXIgYXMgd2VsbC5cbiAgLy8gY3VycmVudGx5IHVzZWQgaW4gdGV4dCB0cmFja3NcbiAgcmV0Lmd1aWQgPSAodWlkKSA/IHVpZCArICdfJyArIGZuLmd1aWQgOiBmbi5ndWlkO1xuXG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIEVsZW1lbnQgRGF0YSBTdG9yZS4gQWxsb3dzIGZvciBiaW5kaW5nIGRhdGEgdG8gYW4gZWxlbWVudCB3aXRob3V0IHB1dHRpbmcgaXQgZGlyZWN0bHkgb24gdGhlIGVsZW1lbnQuXG4gKiBFeC4gRXZlbnQgbGlzdG5lcmVzIGFyZSBzdG9yZWQgaGVyZS5cbiAqIChhbHNvIGZyb20ganNuaW5qYS5jb20sIHNsaWdodGx5IG1vZGlmaWVkIGFuZCB1cGRhdGVkIGZvciBjbG9zdXJlIGNvbXBpbGVyKVxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5jYWNoZSA9IHt9O1xuXG4vKipcbiAqIFVuaXF1ZSBJRCBmb3IgYW4gZWxlbWVudCBvciBmdW5jdGlvblxuICogQHR5cGUge051bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5ndWlkID0gMTtcblxuLyoqXG4gKiBVbmlxdWUgYXR0cmlidXRlIG5hbWUgdG8gc3RvcmUgYW4gZWxlbWVudCdzIGd1aWQgaW5cbiAqIEB0eXBlIHtTdHJpbmd9XG4gKiBAY29uc3RhbnRcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5leHBhbmRvID0gJ3ZkYXRhJyArIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY2FjaGUgb2JqZWN0IHdoZXJlIGRhdGEgZm9yIGFuIGVsZW1lbnQgaXMgc3RvcmVkXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbCBFbGVtZW50IHRvIHN0b3JlIGRhdGEgZm9yLlxuICogQHJldHVybiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmdldERhdGEgPSBmdW5jdGlvbihlbCl7XG4gIHZhciBpZCA9IGVsW3Zqcy5leHBhbmRvXTtcbiAgaWYgKCFpZCkge1xuICAgIGlkID0gZWxbdmpzLmV4cGFuZG9dID0gdmpzLmd1aWQrKztcbiAgICB2anMuY2FjaGVbaWRdID0ge307XG4gIH1cbiAgcmV0dXJuIHZqcy5jYWNoZVtpZF07XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGNhY2hlIG9iamVjdCB3aGVyZSBkYXRhIGZvciBhbiBlbGVtZW50IGlzIHN0b3JlZFxuICogQHBhcmFtICB7RWxlbWVudH0gZWwgRWxlbWVudCB0byBzdG9yZSBkYXRhIGZvci5cbiAqIEByZXR1cm4ge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5oYXNEYXRhID0gZnVuY3Rpb24oZWwpe1xuICB2YXIgaWQgPSBlbFt2anMuZXhwYW5kb107XG4gIHJldHVybiAhKCFpZCB8fCB2anMuaXNFbXB0eSh2anMuY2FjaGVbaWRdKSk7XG59O1xuXG4vKipcbiAqIERlbGV0ZSBkYXRhIGZvciB0aGUgZWxlbWVudCBmcm9tIHRoZSBjYWNoZSBhbmQgdGhlIGd1aWQgYXR0ciBmcm9tIGdldEVsZW1lbnRCeUlkXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBlbCBSZW1vdmUgZGF0YSBmb3IgYW4gZWxlbWVudFxuICogQHByaXZhdGVcbiAqL1xudmpzLnJlbW92ZURhdGEgPSBmdW5jdGlvbihlbCl7XG4gIHZhciBpZCA9IGVsW3Zqcy5leHBhbmRvXTtcbiAgaWYgKCFpZCkgeyByZXR1cm47IH1cbiAgLy8gUmVtb3ZlIGFsbCBzdG9yZWQgZGF0YVxuICAvLyBDaGFuZ2VkIHRvID0gbnVsbFxuICAvLyBodHRwOi8vY29kaW5nLnNtYXNoaW5nbWFnYXppbmUuY29tLzIwMTIvMTEvMDUvd3JpdGluZy1mYXN0LW1lbW9yeS1lZmZpY2llbnQtamF2YXNjcmlwdC9cbiAgLy8gdmpzLmNhY2hlW2lkXSA9IG51bGw7XG4gIGRlbGV0ZSB2anMuY2FjaGVbaWRdO1xuXG4gIC8vIFJlbW92ZSB0aGUgZXhwYW5kbyBwcm9wZXJ0eSBmcm9tIHRoZSBET00gbm9kZVxuICB0cnkge1xuICAgIGRlbGV0ZSBlbFt2anMuZXhwYW5kb107XG4gIH0gY2F0Y2goZSkge1xuICAgIGlmIChlbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSh2anMuZXhwYW5kbyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIGRvZXNuJ3QgYXBwZWFyIHRvIHN1cHBvcnQgcmVtb3ZlQXR0cmlidXRlIG9uIHRoZSBkb2N1bWVudCBlbGVtZW50XG4gICAgICBlbFt2anMuZXhwYW5kb10gPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBvYmplY3QgaXMgZW1wdHlcbiAqIEBwYXJhbSAge09iamVjdH0gIG9iaiBUaGUgb2JqZWN0IHRvIGNoZWNrIGZvciBlbXB0aW5lc3NcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG52anMuaXNFbXB0eSA9IGZ1bmN0aW9uKG9iaikge1xuICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgIC8vIElubHVkZSBudWxsIHByb3BlcnRpZXMgYXMgZW1wdHkuXG4gICAgaWYgKG9ialtwcm9wXSAhPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn07XG5cbi8qKlxuICogQWRkIGEgQ1NTIGNsYXNzIG5hbWUgdG8gYW4gZWxlbWVudFxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50ICAgIEVsZW1lbnQgdG8gYWRkIGNsYXNzIG5hbWUgdG9cbiAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc1RvQWRkIENsYXNzbmFtZSB0byBhZGRcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5hZGRDbGFzcyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzVG9BZGQpe1xuICBpZiAoKCcgJytlbGVtZW50LmNsYXNzTmFtZSsnICcpLmluZGV4T2YoJyAnK2NsYXNzVG9BZGQrJyAnKSA9PSAtMSkge1xuICAgIGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUgPT09ICcnID8gY2xhc3NUb0FkZCA6IGVsZW1lbnQuY2xhc3NOYW1lICsgJyAnICsgY2xhc3NUb0FkZDtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBDU1MgY2xhc3MgbmFtZSBmcm9tIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudCAgICBFbGVtZW50IHRvIHJlbW92ZSBmcm9tIGNsYXNzIG5hbWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc1RvQWRkIENsYXNzbmFtZSB0byByZW1vdmVcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNsYXNzVG9SZW1vdmUpe1xuICB2YXIgY2xhc3NOYW1lcywgaTtcblxuICBpZiAoZWxlbWVudC5jbGFzc05hbWUuaW5kZXhPZihjbGFzc1RvUmVtb3ZlKSA9PSAtMSkgeyByZXR1cm47IH1cblxuICBjbGFzc05hbWVzID0gZWxlbWVudC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcblxuICAvLyBubyBhcnIuaW5kZXhPZiBpbiBpZTgsIGFuZCB3ZSBkb24ndCB3YW50IHRvIGFkZCBhIGJpZyBzaGltXG4gIGZvciAoaSA9IGNsYXNzTmFtZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAoY2xhc3NOYW1lc1tpXSA9PT0gY2xhc3NUb1JlbW92ZSkge1xuICAgICAgY2xhc3NOYW1lcy5zcGxpY2UoaSwxKTtcbiAgICB9XG4gIH1cblxuICBlbGVtZW50LmNsYXNzTmFtZSA9IGNsYXNzTmFtZXMuam9pbignICcpO1xufTtcblxuLyoqXG4gKiBFbGVtZW50IGZvciB0ZXN0aW5nIGJyb3dzZXIgSFRNTDUgdmlkZW8gY2FwYWJpbGl0aWVzXG4gKiBAdHlwZSB7RWxlbWVudH1cbiAqIEBjb25zdGFudFxuICogQHByaXZhdGVcbiAqL1xudmpzLlRFU1RfVklEID0gdmpzLmNyZWF0ZUVsKCd2aWRlbycpO1xuXG4vKipcbiAqIFVzZXJhZ2VudCBmb3IgYnJvd3NlciB0ZXN0aW5nLlxuICogQHR5cGUge1N0cmluZ31cbiAqIEBjb25zdGFudFxuICogQHByaXZhdGVcbiAqL1xudmpzLlVTRVJfQUdFTlQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXG4vKipcbiAqIERldmljZSBpcyBhbiBpUGhvbmVcbiAqIEB0eXBlIHtCb29sZWFufVxuICogQGNvbnN0YW50XG4gKiBAcHJpdmF0ZVxuICovXG52anMuSVNfSVBIT05FID0gKC9pUGhvbmUvaSkudGVzdCh2anMuVVNFUl9BR0VOVCk7XG52anMuSVNfSVBBRCA9ICgvaVBhZC9pKS50ZXN0KHZqcy5VU0VSX0FHRU5UKTtcbnZqcy5JU19JUE9EID0gKC9pUG9kL2kpLnRlc3QodmpzLlVTRVJfQUdFTlQpO1xudmpzLklTX0lPUyA9IHZqcy5JU19JUEhPTkUgfHwgdmpzLklTX0lQQUQgfHwgdmpzLklTX0lQT0Q7XG5cbnZqcy5JT1NfVkVSU0lPTiA9IChmdW5jdGlvbigpe1xuICB2YXIgbWF0Y2ggPSB2anMuVVNFUl9BR0VOVC5tYXRjaCgvT1MgKFxcZCspXy9pKTtcbiAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7IHJldHVybiBtYXRjaFsxXTsgfVxufSkoKTtcblxudmpzLklTX0FORFJPSUQgPSAoL0FuZHJvaWQvaSkudGVzdCh2anMuVVNFUl9BR0VOVCk7XG52anMuQU5EUk9JRF9WRVJTSU9OID0gKGZ1bmN0aW9uKCkge1xuICAvLyBUaGlzIG1hdGNoZXMgQW5kcm9pZCBNYWpvci5NaW5vci5QYXRjaCB2ZXJzaW9uc1xuICAvLyBBTkRST0lEX1ZFUlNJT04gaXMgTWFqb3IuTWlub3IgYXMgYSBOdW1iZXIsIGlmIE1pbm9yIGlzbid0IGF2YWlsYWJsZSwgdGhlbiBvbmx5IE1ham9yIGlzIHJldHVybmVkXG4gIHZhciBtYXRjaCA9IHZqcy5VU0VSX0FHRU5ULm1hdGNoKC9BbmRyb2lkIChcXGQrKSg/OlxcLihcXGQrKSk/KD86XFwuKFxcZCspKSovaSksXG4gICAgbWFqb3IsXG4gICAgbWlub3I7XG5cbiAgaWYgKCFtYXRjaCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgbWFqb3IgPSBtYXRjaFsxXSAmJiBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgbWlub3IgPSBtYXRjaFsyXSAmJiBwYXJzZUZsb2F0KG1hdGNoWzJdKTtcblxuICBpZiAobWFqb3IgJiYgbWlub3IpIHtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChtYXRjaFsxXSArICcuJyArIG1hdGNoWzJdKTtcbiAgfSBlbHNlIGlmIChtYWpvcikge1xuICAgIHJldHVybiBtYWpvcjtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSkoKTtcbi8vIE9sZCBBbmRyb2lkIGlzIGRlZmluZWQgYXMgVmVyc2lvbiBvbGRlciB0aGFuIDIuMywgYW5kIHJlcXVpcmluZyBhIHdlYmtpdCB2ZXJzaW9uIG9mIHRoZSBhbmRyb2lkIGJyb3dzZXJcbnZqcy5JU19PTERfQU5EUk9JRCA9IHZqcy5JU19BTkRST0lEICYmICgvd2Via2l0L2kpLnRlc3QodmpzLlVTRVJfQUdFTlQpICYmIHZqcy5BTkRST0lEX1ZFUlNJT04gPCAyLjM7XG5cbnZqcy5JU19GSVJFRk9YID0gKC9GaXJlZm94L2kpLnRlc3QodmpzLlVTRVJfQUdFTlQpO1xudmpzLklTX0NIUk9NRSA9ICgvQ2hyb21lL2kpLnRlc3QodmpzLlVTRVJfQUdFTlQpO1xuXG52anMuVE9VQ0hfRU5BQkxFRCA9ICEhKCgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHx8IHdpbmRvdy5Eb2N1bWVudFRvdWNoICYmIGRvY3VtZW50IGluc3RhbmNlb2Ygd2luZG93LkRvY3VtZW50VG91Y2gpO1xuXG4vKipcbiAqIEFwcGx5IGF0dHJpYnV0ZXMgdG8gYW4gSFRNTCBlbGVtZW50LlxuICogQHBhcmFtICB7RWxlbWVudH0gZWwgICAgICAgICBUYXJnZXQgZWxlbWVudC5cbiAqIEBwYXJhbSAge09iamVjdD19IGF0dHJpYnV0ZXMgRWxlbWVudCBhdHRyaWJ1dGVzIHRvIGJlIGFwcGxpZWQuXG4gKiBAcHJpdmF0ZVxuICovXG52anMuc2V0RWxlbWVudEF0dHJpYnV0ZXMgPSBmdW5jdGlvbihlbCwgYXR0cmlidXRlcyl7XG4gIHZqcy5vYmouZWFjaChhdHRyaWJ1dGVzLCBmdW5jdGlvbihhdHRyTmFtZSwgYXR0clZhbHVlKSB7XG4gICAgaWYgKGF0dHJWYWx1ZSA9PT0gbnVsbCB8fCB0eXBlb2YgYXR0clZhbHVlID09PSAndW5kZWZpbmVkJyB8fCBhdHRyVmFsdWUgPT09IGZhbHNlKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0ck5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ck5hbWUsIChhdHRyVmFsdWUgPT09IHRydWUgPyAnJyA6IGF0dHJWYWx1ZSkpO1xuICAgIH1cbiAgfSk7XG59O1xuXG4vKipcbiAqIEdldCBhbiBlbGVtZW50J3MgYXR0cmlidXRlIHZhbHVlcywgYXMgZGVmaW5lZCBvbiB0aGUgSFRNTCB0YWdcbiAqIEF0dHJpYnV0cyBhcmUgbm90IHRoZSBzYW1lIGFzIHByb3BlcnRpZXMuIFRoZXkncmUgZGVmaW5lZCBvbiB0aGUgdGFnXG4gKiBvciB3aXRoIHNldEF0dHJpYnV0ZSAod2hpY2ggc2hvdWxkbid0IGJlIHVzZWQgd2l0aCBIVE1MKVxuICogVGhpcyB3aWxsIHJldHVybiB0cnVlIG9yIGZhbHNlIGZvciBib29sZWFuIGF0dHJpYnV0ZXMuXG4gKiBAcGFyYW0gIHtFbGVtZW50fSB0YWcgRWxlbWVudCBmcm9tIHdoaWNoIHRvIGdldCB0YWcgYXR0cmlidXRlc1xuICogQHJldHVybiB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmdldEVsZW1lbnRBdHRyaWJ1dGVzID0gZnVuY3Rpb24odGFnKXtcbiAgdmFyIG9iaiwga25vd25Cb29sZWFucywgYXR0cnMsIGF0dHJOYW1lLCBhdHRyVmFsO1xuXG4gIG9iaiA9IHt9O1xuXG4gIC8vIGtub3duIGJvb2xlYW4gYXR0cmlidXRlc1xuICAvLyB3ZSBjYW4gY2hlY2sgZm9yIG1hdGNoaW5nIGJvb2xlYW4gcHJvcGVydGllcywgYnV0IG9sZGVyIGJyb3dzZXJzXG4gIC8vIHdvbid0IGtub3cgYWJvdXQgSFRNTDUgYm9vbGVhbiBhdHRyaWJ1dGVzIHRoYXQgd2Ugc3RpbGwgcmVhZCBmcm9tXG4gIGtub3duQm9vbGVhbnMgPSAnLCcrJ2F1dG9wbGF5LGNvbnRyb2xzLGxvb3AsbXV0ZWQsZGVmYXVsdCcrJywnO1xuXG4gIGlmICh0YWcgJiYgdGFnLmF0dHJpYnV0ZXMgJiYgdGFnLmF0dHJpYnV0ZXMubGVuZ3RoID4gMCkge1xuICAgIGF0dHJzID0gdGFnLmF0dHJpYnV0ZXM7XG5cbiAgICBmb3IgKHZhciBpID0gYXR0cnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGF0dHJOYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGF0dHJWYWwgPSBhdHRyc1tpXS52YWx1ZTtcblxuICAgICAgLy8gY2hlY2sgZm9yIGtub3duIGJvb2xlYW5zXG4gICAgICAvLyB0aGUgbWF0Y2hpbmcgZWxlbWVudCBwcm9wZXJ0eSB3aWxsIHJldHVybiBhIHZhbHVlIGZvciB0eXBlb2ZcbiAgICAgIGlmICh0eXBlb2YgdGFnW2F0dHJOYW1lXSA9PT0gJ2Jvb2xlYW4nIHx8IGtub3duQm9vbGVhbnMuaW5kZXhPZignLCcrYXR0ck5hbWUrJywnKSAhPT0gLTEpIHtcbiAgICAgICAgLy8gdGhlIHZhbHVlIG9mIGFuIGluY2x1ZGVkIGJvb2xlYW4gYXR0cmlidXRlIGlzIHR5cGljYWxseSBhbiBlbXB0eVxuICAgICAgICAvLyBzdHJpbmcgKCcnKSB3aGljaCB3b3VsZCBlcXVhbCBmYWxzZSBpZiB3ZSBqdXN0IGNoZWNrIGZvciBhIGZhbHNlIHZhbHVlLlxuICAgICAgICAvLyB3ZSBhbHNvIGRvbid0IHdhbnQgc3VwcG9ydCBiYWQgY29kZSBsaWtlIGF1dG9wbGF5PSdmYWxzZSdcbiAgICAgICAgYXR0clZhbCA9IChhdHRyVmFsICE9PSBudWxsKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgb2JqW2F0dHJOYW1lXSA9IGF0dHJWYWw7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjb21wdXRlZCBzdHlsZSB2YWx1ZSBmb3IgYW4gZWxlbWVudFxuICogRnJvbSBodHRwOi8vcm9iZXJ0bnltYW4uY29tLzIwMDYvMDQvMjQvZ2V0LXRoZS1yZW5kZXJlZC1zdHlsZS1vZi1hbi1lbGVtZW50L1xuICogQHBhcmFtICB7RWxlbWVudH0gZWwgICAgICAgIEVsZW1lbnQgdG8gZ2V0IHN0eWxlIHZhbHVlIGZvclxuICogQHBhcmFtICB7U3RyaW5nfSBzdHJDc3NSdWxlIFN0eWxlIG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgICBTdHlsZSB2YWx1ZVxuICogQHByaXZhdGVcbiAqL1xudmpzLmdldENvbXB1dGVkRGltZW5zaW9uID0gZnVuY3Rpb24oZWwsIHN0ckNzc1J1bGUpe1xuICB2YXIgc3RyVmFsdWUgPSAnJztcbiAgaWYoZG9jdW1lbnQuZGVmYXVsdFZpZXcgJiYgZG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZSl7XG4gICAgc3RyVmFsdWUgPSBkb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKGVsLCAnJykuZ2V0UHJvcGVydHlWYWx1ZShzdHJDc3NSdWxlKTtcblxuICB9IGVsc2UgaWYoZWwuY3VycmVudFN0eWxlKXtcbiAgICAvLyBJRTggV2lkdGgvSGVpZ2h0IHN1cHBvcnRcbiAgICBzdHJWYWx1ZSA9IGVsWydjbGllbnQnK3N0ckNzc1J1bGUuc3Vic3RyKDAsMSkudG9VcHBlckNhc2UoKSArIHN0ckNzc1J1bGUuc3Vic3RyKDEpXSArICdweCc7XG4gIH1cbiAgcmV0dXJuIHN0clZhbHVlO1xufTtcblxuLyoqXG4gKiBJbnNlcnQgYW4gZWxlbWVudCBhcyB0aGUgZmlyc3QgY2hpbGQgbm9kZSBvZiBhbm90aGVyXG4gKiBAcGFyYW0gIHtFbGVtZW50fSBjaGlsZCAgIEVsZW1lbnQgdG8gaW5zZXJ0XG4gKiBAcGFyYW0gIHtbdHlwZV19IHBhcmVudCBFbGVtZW50IHRvIGluc2VydCBjaGlsZCBpbnRvXG4gKiBAcHJpdmF0ZVxuICovXG52anMuaW5zZXJ0Rmlyc3QgPSBmdW5jdGlvbihjaGlsZCwgcGFyZW50KXtcbiAgaWYgKHBhcmVudC5maXJzdENoaWxkKSB7XG4gICAgcGFyZW50Lmluc2VydEJlZm9yZShjaGlsZCwgcGFyZW50LmZpcnN0Q2hpbGQpO1xuICB9IGVsc2Uge1xuICAgIHBhcmVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH1cbn07XG5cbi8qKlxuICogT2JqZWN0IHRvIGhvbGQgYnJvd3NlciBzdXBwb3J0IGluZm9ybWF0aW9uXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLmJyb3dzZXIgPSB7fTtcblxuLyoqXG4gKiBTaG9ydGhhbmQgZm9yIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKClcbiAqIEFsc28gYWxsb3dzIGZvciBDU1MgKGpRdWVyeSkgSUQgc3ludGF4LiBCdXQgbm90aGluZyBvdGhlciB0aGFuIElEcy5cbiAqIEBwYXJhbSAge1N0cmluZ30gaWQgIEVsZW1lbnQgSURcbiAqIEByZXR1cm4ge0VsZW1lbnR9ICAgIEVsZW1lbnQgd2l0aCBzdXBwbGllZCBJRFxuICogQHByaXZhdGVcbiAqL1xudmpzLmVsID0gZnVuY3Rpb24oaWQpe1xuICBpZiAoaWQuaW5kZXhPZignIycpID09PSAwKSB7XG4gICAgaWQgPSBpZC5zbGljZSgxKTtcbiAgfVxuXG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG59O1xuXG4vKipcbiAqIEZvcm1hdCBzZWNvbmRzIGFzIGEgdGltZSBzdHJpbmcsIEg6TU06U1Mgb3IgTTpTU1xuICogU3VwcGx5aW5nIGEgZ3VpZGUgKGluIHNlY29uZHMpIHdpbGwgZm9yY2UgYSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvc1xuICogdG8gY292ZXIgdGhlIGxlbmd0aCBvZiB0aGUgZ3VpZGVcbiAqIEBwYXJhbSAge051bWJlcn0gc2Vjb25kcyBOdW1iZXIgb2Ygc2Vjb25kcyB0byBiZSB0dXJuZWQgaW50byBhIHN0cmluZ1xuICogQHBhcmFtICB7TnVtYmVyfSBndWlkZSAgIE51bWJlciAoaW4gc2Vjb25kcykgdG8gbW9kZWwgdGhlIHN0cmluZyBhZnRlclxuICogQHJldHVybiB7U3RyaW5nfSAgICAgICAgIFRpbWUgZm9ybWF0dGVkIGFzIEg6TU06U1Mgb3IgTTpTU1xuICogQHByaXZhdGVcbiAqL1xudmpzLmZvcm1hdFRpbWUgPSBmdW5jdGlvbihzZWNvbmRzLCBndWlkZSkge1xuICAvLyBEZWZhdWx0IHRvIHVzaW5nIHNlY29uZHMgYXMgZ3VpZGVcbiAgZ3VpZGUgPSBndWlkZSB8fCBzZWNvbmRzO1xuICB2YXIgcyA9IE1hdGguZmxvb3Ioc2Vjb25kcyAlIDYwKSxcbiAgICAgIG0gPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCAlIDYwKSxcbiAgICAgIGggPSBNYXRoLmZsb29yKHNlY29uZHMgLyAzNjAwKSxcbiAgICAgIGdtID0gTWF0aC5mbG9vcihndWlkZSAvIDYwICUgNjApLFxuICAgICAgZ2ggPSBNYXRoLmZsb29yKGd1aWRlIC8gMzYwMCk7XG5cbiAgLy8gaGFuZGxlIGludmFsaWQgdGltZXNcbiAgaWYgKGlzTmFOKHNlY29uZHMpIHx8IHNlY29uZHMgPT09IEluZmluaXR5KSB7XG4gICAgLy8gJy0nIGlzIGZhbHNlIGZvciBhbGwgcmVsYXRpb25hbCBvcGVyYXRvcnMgKGUuZy4gPCwgPj0pIHNvIHRoaXMgc2V0dGluZ1xuICAgIC8vIHdpbGwgYWRkIHRoZSBtaW5pbXVtIG51bWJlciBvZiBmaWVsZHMgc3BlY2lmaWVkIGJ5IHRoZSBndWlkZVxuICAgIGggPSBtID0gcyA9ICctJztcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHdlIG5lZWQgdG8gc2hvdyBob3Vyc1xuICBoID0gKGggPiAwIHx8IGdoID4gMCkgPyBoICsgJzonIDogJyc7XG5cbiAgLy8gSWYgaG91cnMgYXJlIHNob3dpbmcsIHdlIG1heSBuZWVkIHRvIGFkZCBhIGxlYWRpbmcgemVyby5cbiAgLy8gQWx3YXlzIHNob3cgYXQgbGVhc3Qgb25lIGRpZ2l0IG9mIG1pbnV0ZXMuXG4gIG0gPSAoKChoIHx8IGdtID49IDEwKSAmJiBtIDwgMTApID8gJzAnICsgbSA6IG0pICsgJzonO1xuXG4gIC8vIENoZWNrIGlmIGxlYWRpbmcgemVybyBpcyBuZWVkIGZvciBzZWNvbmRzXG4gIHMgPSAocyA8IDEwKSA/ICcwJyArIHMgOiBzO1xuXG4gIHJldHVybiBoICsgbSArIHM7XG59O1xuXG4vLyBBdHRlbXB0IHRvIGJsb2NrIHRoZSBhYmlsaXR5IHRvIHNlbGVjdCB0ZXh0IHdoaWxlIGRyYWdnaW5nIGNvbnRyb2xzXG52anMuYmxvY2tUZXh0U2VsZWN0aW9uID0gZnVuY3Rpb24oKXtcbiAgZG9jdW1lbnQuYm9keS5mb2N1cygpO1xuICBkb2N1bWVudC5vbnNlbGVjdHN0YXJ0ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH07XG59O1xuLy8gVHVybiBvZmYgdGV4dCBzZWxlY3Rpb24gYmxvY2tpbmdcbnZqcy51bmJsb2NrVGV4dFNlbGVjdGlvbiA9IGZ1bmN0aW9uKCl7IGRvY3VtZW50Lm9uc2VsZWN0c3RhcnQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9OyB9O1xuXG4vKipcbiAqIFRyaW0gd2hpdGVzcGFjZSBmcm9tIHRoZSBlbmRzIG9mIGEgc3RyaW5nLlxuICogQHBhcmFtICB7U3RyaW5nfSBzdHJpbmcgU3RyaW5nIHRvIHRyaW1cbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgIFRyaW1tZWQgc3RyaW5nXG4gKiBAcHJpdmF0ZVxuICovXG52anMudHJpbSA9IGZ1bmN0aW9uKHN0cil7XG4gIHJldHVybiAoc3RyKycnKS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCAnJyk7XG59O1xuXG4vKipcbiAqIFNob3VsZCByb3VuZCBvZmYgYSBudW1iZXIgdG8gYSBkZWNpbWFsIHBsYWNlXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IG51bSBOdW1iZXIgdG8gcm91bmRcbiAqIEBwYXJhbSAge051bWJlcn0gZGVjIE51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyB0byByb3VuZCB0b1xuICogQHJldHVybiB7TnVtYmVyfSAgICAgUm91bmRlZCBudW1iZXJcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5yb3VuZCA9IGZ1bmN0aW9uKG51bSwgZGVjKSB7XG4gIGlmICghZGVjKSB7IGRlYyA9IDA7IH1cbiAgcmV0dXJuIE1hdGgucm91bmQobnVtKk1hdGgucG93KDEwLGRlYykpL01hdGgucG93KDEwLGRlYyk7XG59O1xuXG4vKipcbiAqIFNob3VsZCBjcmVhdGUgYSBmYWtlIFRpbWVSYW5nZSBvYmplY3RcbiAqIE1pbWljcyBhbiBIVE1MNSB0aW1lIHJhbmdlIGluc3RhbmNlLCB3aGljaCBoYXMgZnVuY3Rpb25zIHRoYXRcbiAqIHJldHVybiB0aGUgc3RhcnQgYW5kIGVuZCB0aW1lcyBmb3IgYSByYW5nZVxuICogVGltZVJhbmdlcyBhcmUgcmV0dXJuZWQgYnkgdGhlIGJ1ZmZlcmVkKCkgbWV0aG9kXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IHN0YXJ0IFN0YXJ0IHRpbWUgaW4gc2Vjb25kc1xuICogQHBhcmFtICB7TnVtYmVyfSBlbmQgICBFbmQgdGltZSBpbiBzZWNvbmRzXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICAgIEZha2UgVGltZVJhbmdlIG9iamVjdFxuICogQHByaXZhdGVcbiAqL1xudmpzLmNyZWF0ZVRpbWVSYW5nZSA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQpe1xuICByZXR1cm4ge1xuICAgIGxlbmd0aDogMSxcbiAgICBzdGFydDogZnVuY3Rpb24oKSB7IHJldHVybiBzdGFydDsgfSxcbiAgICBlbmQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gZW5kOyB9XG4gIH07XG59O1xuXG4vKipcbiAqIFNpbXBsZSBodHRwIHJlcXVlc3QgZm9yIHJldHJpZXZpbmcgZXh0ZXJuYWwgZmlsZXMgKGUuZy4gdGV4dCB0cmFja3MpXG4gKiBAcGFyYW0gIHtTdHJpbmd9ICAgIHVybCAgICAgICAgICAgICBVUkwgb2YgcmVzb3VyY2VcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBvblN1Y2Nlc3MgICAgICAgU3VjY2VzcyBjYWxsYmFja1xuICogQHBhcmFtICB7RnVuY3Rpb249fSBvbkVycm9yICAgICAgICAgRXJyb3IgY2FsbGJhY2tcbiAqIEBwYXJhbSAge0Jvb2xlYW49fSAgIHdpdGhDcmVkZW50aWFscyBGbGFnIHdoaWNoIGFsbG93IGNyZWRlbnRpYWxzXG4gKiBAcHJpdmF0ZVxuICovXG52anMuZ2V0ID0gZnVuY3Rpb24odXJsLCBvblN1Y2Nlc3MsIG9uRXJyb3IsIHdpdGhDcmVkZW50aWFscyl7XG4gIHZhciBmaWxlVXJsLCByZXF1ZXN0LCB1cmxJbmZvLCB3aW5Mb2MsIGNyb3NzT3JpZ2luO1xuXG4gIG9uRXJyb3IgPSBvbkVycm9yIHx8IGZ1bmN0aW9uKCl7fTtcblxuICBpZiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vIFNoaW0gWE1MSHR0cFJlcXVlc3QgZm9yIG9sZGVyIElFc1xuICAgIHdpbmRvdy5YTUxIdHRwUmVxdWVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRyeSB7IHJldHVybiBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ01zeG1sMi5YTUxIVFRQLjYuMCcpOyB9IGNhdGNoIChlKSB7fVxuICAgICAgdHJ5IHsgcmV0dXJuIG5ldyB3aW5kb3cuQWN0aXZlWE9iamVjdCgnTXN4bWwyLlhNTEhUVFAuMy4wJyk7IH0gY2F0Y2ggKGYpIHt9XG4gICAgICB0cnkgeyByZXR1cm4gbmV3IHdpbmRvdy5BY3RpdmVYT2JqZWN0KCdNc3htbDIuWE1MSFRUUCcpOyB9IGNhdGNoIChnKSB7fVxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBYTUxIdHRwUmVxdWVzdC4nKTtcbiAgICB9O1xuICB9XG5cbiAgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gIHVybEluZm8gPSB2anMucGFyc2VVcmwodXJsKTtcbiAgd2luTG9jID0gd2luZG93LmxvY2F0aW9uO1xuICAvLyBjaGVjayBpZiB1cmwgaXMgZm9yIGFub3RoZXIgZG9tYWluL29yaWdpblxuICAvLyBpZTggZG9lc24ndCBrbm93IGxvY2F0aW9uLm9yaWdpbiwgc28gd2Ugd29uJ3QgcmVseSBvbiBpdCBoZXJlXG4gIGNyb3NzT3JpZ2luID0gKHVybEluZm8ucHJvdG9jb2wgKyB1cmxJbmZvLmhvc3QpICE9PSAod2luTG9jLnByb3RvY29sICsgd2luTG9jLmhvc3QpO1xuXG4gIC8vIFVzZSBYRG9tYWluUmVxdWVzdCBmb3IgSUUgaWYgWE1MSFRUUFJlcXVlc3QyIGlzbid0IGF2YWlsYWJsZVxuICAvLyAnd2l0aENyZWRlbnRpYWxzJyBpcyBvbmx5IGF2YWlsYWJsZSBpbiBYTUxIVFRQUmVxdWVzdDJcbiAgLy8gQWxzbyBYRG9tYWluUmVxdWVzdCBoYXMgYSBsb3Qgb2YgZ290Y2hhcywgc28gb25seSB1c2UgaWYgY3Jvc3MgZG9tYWluXG4gIGlmKGNyb3NzT3JpZ2luICYmIHdpbmRvdy5YRG9tYWluUmVxdWVzdCAmJiAhKCd3aXRoQ3JlZGVudGlhbHMnIGluIHJlcXVlc3QpKSB7XG4gICAgcmVxdWVzdCA9IG5ldyB3aW5kb3cuWERvbWFpblJlcXVlc3QoKTtcbiAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgb25TdWNjZXNzKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcbiAgICB9O1xuICAgIHJlcXVlc3Qub25lcnJvciA9IG9uRXJyb3I7XG4gICAgLy8gdGhlc2UgYmxhbmsgaGFuZGxlcnMgbmVlZCB0byBiZSBzZXQgdG8gZml4IGllOSBodHRwOi8vY3lwcmVzc25vcnRoLmNvbS9wcm9ncmFtbWluZy9pbnRlcm5ldC1leHBsb3Jlci1hYm9ydGluZy1hamF4LXJlcXVlc3RzLWZpeGVkL1xuICAgIHJlcXVlc3Qub25wcm9ncmVzcyA9IGZ1bmN0aW9uKCkge307XG4gICAgcmVxdWVzdC5vbnRpbWVvdXQgPSBvbkVycm9yO1xuXG4gIC8vIFhNTEhUVFBSZXF1ZXN0XG4gIH0gZWxzZSB7XG4gICAgZmlsZVVybCA9ICh1cmxJbmZvLnByb3RvY29sID09ICdmaWxlOicgfHwgd2luTG9jLnByb3RvY29sID09ICdmaWxlOicpO1xuXG4gICAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgIGlmIChyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID09PSAyMDAgfHwgZmlsZVVybCAmJiByZXF1ZXN0LnN0YXR1cyA9PT0gMCkge1xuICAgICAgICAgIG9uU3VjY2VzcyhyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb25FcnJvcihyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgLy8gb3BlbiB0aGUgY29ubmVjdGlvblxuICB0cnkge1xuICAgIC8vIFRoaXJkIGFyZyBpcyBhc3luYywgb3IgaWdub3JlZCBieSBYRG9tYWluUmVxdWVzdFxuICAgIHJlcXVlc3Qub3BlbignR0VUJywgdXJsLCB0cnVlKTtcbiAgICAvLyB3aXRoQ3JlZGVudGlhbHMgb25seSBzdXBwb3J0ZWQgYnkgWE1MSHR0cFJlcXVlc3QyXG4gICAgaWYod2l0aENyZWRlbnRpYWxzKSB7XG4gICAgICByZXF1ZXN0LndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgfVxuICB9IGNhdGNoKGUpIHtcbiAgICBvbkVycm9yKGUpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNlbmQgdGhlIHJlcXVlc3RcbiAgdHJ5IHtcbiAgICByZXF1ZXN0LnNlbmQoKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgb25FcnJvcihlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBZGQgdG8gbG9jYWwgc3RvcmFnZSAobWF5IHJlbW92ZWFibGUpXG4gKiBAcHJpdmF0ZVxuICovXG52anMuc2V0TG9jYWxTdG9yYWdlID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSl7XG4gIHRyeSB7XG4gICAgLy8gSUUgd2FzIHRocm93aW5nIGVycm9ycyByZWZlcmVuY2luZyB0aGUgdmFyIGFueXdoZXJlIHdpdGhvdXQgdGhpc1xuICAgIHZhciBsb2NhbFN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlIHx8IGZhbHNlO1xuICAgIGlmICghbG9jYWxTdG9yYWdlKSB7IHJldHVybjsgfVxuICAgIGxvY2FsU3RvcmFnZVtrZXldID0gdmFsdWU7XG4gIH0gY2F0Y2goZSkge1xuICAgIGlmIChlLmNvZGUgPT0gMjIgfHwgZS5jb2RlID09IDEwMTQpIHsgLy8gV2Via2l0ID09IDIyIC8gRmlyZWZveCA9PSAxMDE0XG4gICAgICB2anMubG9nKCdMb2NhbFN0b3JhZ2UgRnVsbCAoVmlkZW9KUyknLCBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGUuY29kZSA9PSAxOCkge1xuICAgICAgICB2anMubG9nKCdMb2NhbFN0b3JhZ2Ugbm90IGFsbG93ZWQgKFZpZGVvSlMpJywgZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2anMubG9nKCdMb2NhbFN0b3JhZ2UgRXJyb3IgKFZpZGVvSlMpJywgZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdldCBhYm9zb2x1dGUgdmVyc2lvbiBvZiByZWxhdGl2ZSBVUkwuIFVzZWQgdG8gdGVsbCBmbGFzaCBjb3JyZWN0IFVSTC5cbiAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDcwODMyL2dldHRpbmctYW4tYWJzb2x1dGUtdXJsLWZyb20tYS1yZWxhdGl2ZS1vbmUtaWU2LWlzc3VlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVybCBVUkwgdG8gbWFrZSBhYnNvbHV0ZVxuICogQHJldHVybiB7U3RyaW5nfSAgICAgQWJzb2x1dGUgVVJMXG4gKiBAcHJpdmF0ZVxuICovXG52anMuZ2V0QWJzb2x1dGVVUkwgPSBmdW5jdGlvbih1cmwpe1xuXG4gIC8vIENoZWNrIGlmIGFic29sdXRlIFVSTFxuICBpZiAoIXVybC5tYXRjaCgvXmh0dHBzPzpcXC9cXC8vKSkge1xuICAgIC8vIENvbnZlcnQgdG8gYWJzb2x1dGUgVVJMLiBGbGFzaCBob3N0ZWQgb2ZmLXNpdGUgbmVlZHMgYW4gYWJzb2x1dGUgVVJMLlxuICAgIHVybCA9IHZqcy5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgaW5uZXJIVE1MOiAnPGEgaHJlZj1cIicrdXJsKydcIj54PC9hPidcbiAgICB9KS5maXJzdENoaWxkLmhyZWY7XG4gIH1cblxuICByZXR1cm4gdXJsO1xufTtcblxuXG4vKipcbiAqIFJlc29sdmUgYW5kIHBhcnNlIHRoZSBlbGVtZW50cyBvZiBhIFVSTFxuICogQHBhcmFtICB7U3RyaW5nfSB1cmwgVGhlIHVybCB0byBwYXJzZVxuICogQHJldHVybiB7T2JqZWN0fSAgICAgQW4gb2JqZWN0IG9mIHVybCBkZXRhaWxzXG4gKi9cbnZqcy5wYXJzZVVybCA9IGZ1bmN0aW9uKHVybCkge1xuICB2YXIgZGl2LCBhLCBhZGRUb0JvZHksIHByb3BzLCBkZXRhaWxzO1xuXG4gIHByb3BzID0gWydwcm90b2NvbCcsICdob3N0bmFtZScsICdwb3J0JywgJ3BhdGhuYW1lJywgJ3NlYXJjaCcsICdoYXNoJywgJ2hvc3QnXTtcblxuICAvLyBhZGQgdGhlIHVybCB0byBhbiBhbmNob3IgYW5kIGxldCB0aGUgYnJvd3NlciBwYXJzZSB0aGUgVVJMXG4gIGEgPSB2anMuY3JlYXRlRWwoJ2EnLCB7IGhyZWY6IHVybCB9KTtcblxuICAvLyBJRTggKGFuZCA5PykgRml4XG4gIC8vIGllOCBkb2Vzbid0IHBhcnNlIHRoZSBVUkwgY29ycmVjdGx5IHVudGlsIHRoZSBhbmNob3IgaXMgYWN0dWFsbHlcbiAgLy8gYWRkZWQgdG8gdGhlIGJvZHksIGFuZCBhbiBpbm5lckhUTUwgaXMgbmVlZGVkIHRvIHRyaWdnZXIgdGhlIHBhcnNpbmdcbiAgYWRkVG9Cb2R5ID0gKGEuaG9zdCA9PT0gJycgJiYgYS5wcm90b2NvbCAhPT0gJ2ZpbGU6Jyk7XG4gIGlmIChhZGRUb0JvZHkpIHtcbiAgICBkaXYgPSB2anMuY3JlYXRlRWwoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSAnPGEgaHJlZj1cIicrdXJsKydcIj48L2E+JztcbiAgICBhID0gZGl2LmZpcnN0Q2hpbGQ7XG4gICAgLy8gcHJldmVudCB0aGUgZGl2IGZyb20gYWZmZWN0aW5nIGxheW91dFxuICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6bm9uZTsgcG9zaXRpb246YWJzb2x1dGU7Jyk7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkaXYpO1xuICB9XG5cbiAgLy8gQ29weSB0aGUgc3BlY2lmaWMgVVJMIHByb3BlcnRpZXMgdG8gYSBuZXcgb2JqZWN0XG4gIC8vIFRoaXMgaXMgYWxzbyBuZWVkZWQgZm9yIElFOCBiZWNhdXNlIHRoZSBhbmNob3IgbG9zZXMgaXRzXG4gIC8vIHByb3BlcnRpZXMgd2hlbiBpdCdzIHJlbW92ZWQgZnJvbSB0aGUgZG9tXG4gIGRldGFpbHMgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIGRldGFpbHNbcHJvcHNbaV1dID0gYVtwcm9wc1tpXV07XG4gIH1cblxuICBpZiAoYWRkVG9Cb2R5KSB7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChkaXYpO1xuICB9XG5cbiAgcmV0dXJuIGRldGFpbHM7XG59O1xuXG4vKipcbiAqIExvZyBtZXNzYWdzIHRvIHRoZSBjb25zb2xlIGFuZCBoaXN0b3J5IGJhc2VkIG9uIHRoZSB0eXBlIG9mIG1lc3NhZ2VcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGUgVGhlIHR5cGUgb2YgbWVzc2FnZSwgb3IgYG51bGxgIGZvciBgbG9nYFxuICogQHBhcmFtICB7W3R5cGVdfSBhcmdzIFRoZSBhcmdzIHRvIGJlIHBhc3NlZCB0byB0aGUgbG9nXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBfbG9nVHlwZSh0eXBlLCBhcmdzKXtcbiAgdmFyIGFyZ3NBcnJheSwgbm9vcCwgY29uc29sZTtcblxuICAvLyBjb252ZXJ0IGFyZ3MgdG8gYW4gYXJyYXkgdG8gZ2V0IGFycmF5IGZ1bmN0aW9uc1xuICBhcmdzQXJyYXkgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmdzKTtcbiAgLy8gaWYgdGhlcmUncyBubyBjb25zb2xlIHRoZW4gZG9uJ3QgdHJ5IHRvIG91dHB1dCBtZXNzYWdlc1xuICAvLyB0aGV5IHdpbGwgc3RpbGwgYmUgc3RvcmVkIGluIHZqcy5sb2cuaGlzdG9yeVxuICAvLyBXYXMgc2V0dGluZyB0aGVzZSBvbmNlIG91dHNpZGUgb2YgdGhpcyBmdW5jdGlvbiwgYnV0IGNvbnRhaW5pbmcgdGhlbVxuICAvLyBpbiB0aGUgZnVuY3Rpb24gbWFrZXMgaXQgZWFzaWVyIHRvIHRlc3QgY2FzZXMgd2hlcmUgY29uc29sZSBkb2Vzbid0IGV4aXN0XG4gIG5vb3AgPSBmdW5jdGlvbigpe307XG4gIGNvbnNvbGUgPSB3aW5kb3dbJ2NvbnNvbGUnXSB8fCB7XG4gICAgJ2xvZyc6IG5vb3AsXG4gICAgJ3dhcm4nOiBub29wLFxuICAgICdlcnJvcic6IG5vb3BcbiAgfTtcblxuICBpZiAodHlwZSkge1xuICAgIC8vIGFkZCB0aGUgdHlwZSB0byB0aGUgZnJvbnQgb2YgdGhlIG1lc3NhZ2VcbiAgICBhcmdzQXJyYXkudW5zaGlmdCh0eXBlLnRvVXBwZXJDYXNlKCkrJzonKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBkZWZhdWx0IHRvIGxvZyB3aXRoIG5vIHByZWZpeFxuICAgIHR5cGUgPSAnbG9nJztcbiAgfVxuXG4gIC8vIGFkZCB0byBoaXN0b3J5XG4gIHZqcy5sb2cuaGlzdG9yeS5wdXNoKGFyZ3NBcnJheSk7XG5cbiAgLy8gYWRkIGNvbnNvbGUgcHJlZml4IGFmdGVyIGFkZGluZyB0byBoaXN0b3J5XG4gIGFyZ3NBcnJheS51bnNoaWZ0KCdWSURFT0pTOicpO1xuXG4gIC8vIGNhbGwgYXBwcm9wcmlhdGUgbG9nIGZ1bmN0aW9uXG4gIGlmIChjb25zb2xlW3R5cGVdLmFwcGx5KSB7XG4gICAgY29uc29sZVt0eXBlXS5hcHBseShjb25zb2xlLCBhcmdzQXJyYXkpO1xuICB9IGVsc2Uge1xuICAgIC8vIGllOCBkb2Vzbid0IGFsbG93IGVycm9yLmFwcGx5LCBidXQgaXQgd2lsbCBqdXN0IGpvaW4oKSB0aGUgYXJyYXkgYW55d2F5XG4gICAgY29uc29sZVt0eXBlXShhcmdzQXJyYXkuam9pbignICcpKTtcbiAgfVxufVxuXG4vKipcbiAqIExvZyBwbGFpbiBkZWJ1ZyBtZXNzYWdlc1xuICovXG52anMubG9nID0gZnVuY3Rpb24oKXtcbiAgX2xvZ1R5cGUobnVsbCwgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogS2VlcCBhIGhpc3Rvcnkgb2YgbG9nIG1lc3NhZ2VzXG4gKiBAdHlwZSB7QXJyYXl9XG4gKi9cbnZqcy5sb2cuaGlzdG9yeSA9IFtdO1xuXG4vKipcbiAqIExvZyBlcnJvciBtZXNzYWdlc1xuICovXG52anMubG9nLmVycm9yID0gZnVuY3Rpb24oKXtcbiAgX2xvZ1R5cGUoJ2Vycm9yJywgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogTG9nIHdhcm5pbmcgbWVzc2FnZXNcbiAqL1xudmpzLmxvZy53YXJuID0gZnVuY3Rpb24oKXtcbiAgX2xvZ1R5cGUoJ3dhcm4nLCBhcmd1bWVudHMpO1xufTtcblxuLy8gT2Zmc2V0IExlZnRcbi8vIGdldEJvdW5kaW5nQ2xpZW50UmVjdCB0ZWNobmlxdWUgZnJvbSBKb2huIFJlc2lnIGh0dHA6Ly9lam9obi5vcmcvYmxvZy9nZXRib3VuZGluZ2NsaWVudHJlY3QtaXMtYXdlc29tZS9cbnZqcy5maW5kUG9zaXRpb24gPSBmdW5jdGlvbihlbCkge1xuICB2YXIgYm94LCBkb2NFbCwgYm9keSwgY2xpZW50TGVmdCwgc2Nyb2xsTGVmdCwgbGVmdCwgY2xpZW50VG9wLCBzY3JvbGxUb3AsIHRvcDtcblxuICBpZiAoZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0ICYmIGVsLnBhcmVudE5vZGUpIHtcbiAgICBib3ggPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgfVxuXG4gIGlmICghYm94KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxlZnQ6IDAsXG4gICAgICB0b3A6IDBcbiAgICB9O1xuICB9XG5cbiAgZG9jRWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuXG4gIGNsaWVudExlZnQgPSBkb2NFbC5jbGllbnRMZWZ0IHx8IGJvZHkuY2xpZW50TGVmdCB8fCAwO1xuICBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGJvZHkuc2Nyb2xsTGVmdDtcbiAgbGVmdCA9IGJveC5sZWZ0ICsgc2Nyb2xsTGVmdCAtIGNsaWVudExlZnQ7XG5cbiAgY2xpZW50VG9wID0gZG9jRWwuY2xpZW50VG9wIHx8IGJvZHkuY2xpZW50VG9wIHx8IDA7XG4gIHNjcm9sbFRvcCA9IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBib2R5LnNjcm9sbFRvcDtcbiAgdG9wID0gYm94LnRvcCArIHNjcm9sbFRvcCAtIGNsaWVudFRvcDtcblxuICAvLyBBbmRyb2lkIHNvbWV0aW1lcyByZXR1cm5zIHNsaWdodGx5IG9mZiBkZWNpbWFsIHZhbHVlcywgc28gbmVlZCB0byByb3VuZFxuICByZXR1cm4ge1xuICAgIGxlZnQ6IHZqcy5yb3VuZChsZWZ0KSxcbiAgICB0b3A6IHZqcy5yb3VuZCh0b3ApXG4gIH07XG59O1xuXG4vKipcbiAqIEFycmF5IGZ1bmN0aW9ucyBjb250YWluZXJcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuYXJyID0ge307XG5cbi8qXG4gKiBMb29wcyB0aHJvdWdoIGFuIGFycmF5IGFuZCBydW5zIGEgZnVuY3Rpb24gZm9yIGVhY2ggaXRlbSBpbnNpZGUgaXQuXG4gKiBAcGFyYW0gIHtBcnJheX0gICAgYXJyYXkgICAgICAgVGhlIGFycmF5XG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gY2FsbGJhY2sgICAgVGhlIGZ1bmN0aW9uIHRvIGJlIHJ1biBmb3IgZWFjaCBpdGVtXG4gKiBAcGFyYW0gIHsqfSAgICAgICAgdGhpc0FyZyAgICAgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7QXJyYXl9ICAgICAgICAgICAgICAgVGhlIGFycmF5XG4gKiBAcHJpdmF0ZVxuICovXG52anMuYXJyLmZvckVhY2ggPSBmdW5jdGlvbihhcnJheSwgY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgaWYgKHZqcy5vYmouaXNBcnJheShhcnJheSkgJiYgY2FsbGJhY2sgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnIHx8IHZqcywgYXJyYXlbaV0sIGksIGFycmF5KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYXJyYXk7XG59O1xuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBuYW1lc3BhY2VcbiAqIEBuYW1lc3BhY2VcbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbnZqcy51dGlsID0ge307XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9wdGlvbnMgb2JqZWN0cywgcmVjdXJzaXZlbHkgbWVyZ2luZyBhbnkgcGxhaW4gb2JqZWN0IHByb3BlcnRpZXMgYXNcbiAqIHdlbGwuICBQcmV2aW91c2x5IGBkZWVwTWVyZ2VgXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmoxIE9iamVjdCB0byBvdmVycmlkZSB2YWx1ZXMgaW5cbiAqIEBwYXJhbSAge09iamVjdH0gb2JqMiBPdmVycmlkaW5nIG9iamVjdFxuICogQHJldHVybiB7T2JqZWN0fSAgICAgIE5ldyBvYmplY3QgLS0gb2JqMSBhbmQgb2JqMiB3aWxsIGJlIHVudG91Y2hlZFxuICovXG52anMudXRpbC5tZXJnZU9wdGlvbnMgPSBmdW5jdGlvbihvYmoxLCBvYmoyKXtcbiAgdmFyIGtleSwgdmFsMSwgdmFsMjtcblxuICAvLyBtYWtlIGEgY29weSBvZiBvYmoxIHNvIHdlJ3JlIG5vdCBvdmVyd3JpdGluZyBvcmlnaW5hbCB2YWx1ZXMuXG4gIC8vIGxpa2UgcHJvdG90eXBlLm9wdGlvbnNfIGFuZCBhbGwgc3ViIG9wdGlvbnMgb2JqZWN0c1xuICBvYmoxID0gdmpzLm9iai5jb3B5KG9iajEpO1xuXG4gIGZvciAoa2V5IGluIG9iajIpe1xuICAgIGlmIChvYmoyLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhbDEgPSBvYmoxW2tleV07XG4gICAgICB2YWwyID0gb2JqMltrZXldO1xuXG4gICAgICAvLyBDaGVjayBpZiBib3RoIHByb3BlcnRpZXMgYXJlIHB1cmUgb2JqZWN0cyBhbmQgZG8gYSBkZWVwIG1lcmdlIGlmIHNvXG4gICAgICBpZiAodmpzLm9iai5pc1BsYWluKHZhbDEpICYmIHZqcy5vYmouaXNQbGFpbih2YWwyKSkge1xuICAgICAgICBvYmoxW2tleV0gPSB2anMudXRpbC5tZXJnZU9wdGlvbnModmFsMSwgdmFsMik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmoxW2tleV0gPSBvYmoyW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmoxO1xufTsvKipcbiAqIEBmaWxlb3ZlcnZpZXcgUGxheWVyIENvbXBvbmVudCAtIEJhc2UgY2xhc3MgZm9yIGFsbCBVSSBvYmplY3RzXG4gKlxuICovXG5cbi8qKlxuICogQmFzZSBVSSBDb21wb25lbnQgY2xhc3NcbiAqXG4gKiBDb21wb25lbnRzIGFyZSBlbWJlZGRhYmxlIFVJIG9iamVjdHMgdGhhdCBhcmUgcmVwcmVzZW50ZWQgYnkgYm90aCBhXG4gKiBqYXZhc2NyaXB0IG9iamVjdCBhbmQgYW4gZWxlbWVudCBpbiB0aGUgRE9NLiBUaGV5IGNhbiBiZSBjaGlsZHJlbiBvZiBvdGhlclxuICogY29tcG9uZW50cywgYW5kIGNhbiBoYXZlIG1hbnkgY2hpbGRyZW4gdGhlbXNlbHZlcy5cbiAqXG4gKiAgICAgLy8gYWRkaW5nIGEgYnV0dG9uIHRvIHRoZSBwbGF5ZXJcbiAqICAgICB2YXIgYnV0dG9uID0gcGxheWVyLmFkZENoaWxkKCdidXR0b24nKTtcbiAqICAgICBidXR0b24uZWwoKTsgLy8gLT4gYnV0dG9uIGVsZW1lbnRcbiAqXG4gKiAgICAgPGRpdiBjbGFzcz1cInZpZGVvLWpzXCI+XG4gKiAgICAgICA8ZGl2IGNsYXNzPVwidmpzLWJ1dHRvblwiPkJ1dHRvbjwvZGl2PlxuICogICAgIDwvZGl2PlxuICpcbiAqIENvbXBvbmVudHMgYXJlIGFsc28gZXZlbnQgZW1pdHRlcnMuXG4gKlxuICogICAgIGJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpe1xuICogICAgICAgY29uc29sZS5sb2coJ0J1dHRvbiBDbGlja2VkIScpO1xuICogICAgIH0pO1xuICpcbiAqICAgICBidXR0b24udHJpZ2dlcignY3VzdG9tZXZlbnQnKTtcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGxheWVyICBNYWluIFBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgdmpzLkNvcmVPYmplY3RcbiAqL1xudmpzLkNvbXBvbmVudCA9IHZqcy5Db3JlT2JqZWN0LmV4dGVuZCh7XG4gIC8qKlxuICAgKiB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBjbGFzc1xuICAgKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpe1xuICAgIHRoaXMucGxheWVyXyA9IHBsYXllcjtcblxuICAgIC8vIE1ha2UgYSBjb3B5IG9mIHByb3RvdHlwZS5vcHRpb25zXyB0byBwcm90ZWN0IGFnYWluc3Qgb3ZlcnJpZGluZyBnbG9iYWwgZGVmYXVsdHNcbiAgICB0aGlzLm9wdGlvbnNfID0gdmpzLm9iai5jb3B5KHRoaXMub3B0aW9uc18pO1xuXG4gICAgLy8gVXBkYXRlZCBvcHRpb25zIHdpdGggc3VwcGxpZWQgb3B0aW9uc1xuICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMob3B0aW9ucyk7XG5cbiAgICAvLyBHZXQgSUQgZnJvbSBvcHRpb25zLCBlbGVtZW50LCBvciBjcmVhdGUgdXNpbmcgcGxheWVyIElEIGFuZCB1bmlxdWUgSURcbiAgICB0aGlzLmlkXyA9IG9wdGlvbnNbJ2lkJ10gfHwgKChvcHRpb25zWydlbCddICYmIG9wdGlvbnNbJ2VsJ11bJ2lkJ10pID8gb3B0aW9uc1snZWwnXVsnaWQnXSA6IHBsYXllci5pZCgpICsgJ19jb21wb25lbnRfJyArIHZqcy5ndWlkKysgKTtcblxuICAgIHRoaXMubmFtZV8gPSBvcHRpb25zWyduYW1lJ10gfHwgbnVsbDtcblxuICAgIC8vIENyZWF0ZSBlbGVtZW50IGlmIG9uZSB3YXNuJ3QgcHJvdmlkZWQgaW4gb3B0aW9uc1xuICAgIHRoaXMuZWxfID0gb3B0aW9uc1snZWwnXSB8fCB0aGlzLmNyZWF0ZUVsKCk7XG5cbiAgICB0aGlzLmNoaWxkcmVuXyA9IFtdO1xuICAgIHRoaXMuY2hpbGRJbmRleF8gPSB7fTtcbiAgICB0aGlzLmNoaWxkTmFtZUluZGV4XyA9IHt9O1xuXG4gICAgLy8gQWRkIGFueSBjaGlsZCBjb21wb25lbnRzIGluIG9wdGlvbnNcbiAgICB0aGlzLmluaXRDaGlsZHJlbigpO1xuXG4gICAgdGhpcy5yZWFkeShyZWFkeSk7XG4gICAgLy8gRG9uJ3Qgd2FudCB0byB0cmlnZ2VyIHJlYWR5IGhlcmUgb3IgaXQgd2lsbCBiZWZvcmUgaW5pdCBpcyBhY3R1YWxseVxuICAgIC8vIGZpbmlzaGVkIGZvciBhbGwgY2hpbGRyZW4gdGhhdCBydW4gdGhpcyBjb25zdHJ1Y3RvclxuXG4gICAgaWYgKG9wdGlvbnMucmVwb3J0VG91Y2hBY3Rpdml0eSAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuZW5hYmxlVG91Y2hBY3Rpdml0eSgpO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogRGlzcG9zZSBvZiB0aGUgY29tcG9uZW50IGFuZCBhbGwgY2hpbGQgY29tcG9uZW50c1xuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy50cmlnZ2VyKHsgdHlwZTogJ2Rpc3Bvc2UnLCAnYnViYmxlcyc6IGZhbHNlIH0pO1xuXG4gIC8vIERpc3Bvc2UgYWxsIGNoaWxkcmVuLlxuICBpZiAodGhpcy5jaGlsZHJlbl8pIHtcbiAgICBmb3IgKHZhciBpID0gdGhpcy5jaGlsZHJlbl8ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGlmICh0aGlzLmNoaWxkcmVuX1tpXS5kaXNwb3NlKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5fW2ldLmRpc3Bvc2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBEZWxldGUgY2hpbGQgcmVmZXJlbmNlc1xuICB0aGlzLmNoaWxkcmVuXyA9IG51bGw7XG4gIHRoaXMuY2hpbGRJbmRleF8gPSBudWxsO1xuICB0aGlzLmNoaWxkTmFtZUluZGV4XyA9IG51bGw7XG5cbiAgLy8gUmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnMuXG4gIHRoaXMub2ZmKCk7XG5cbiAgLy8gUmVtb3ZlIGVsZW1lbnQgZnJvbSBET01cbiAgaWYgKHRoaXMuZWxfLnBhcmVudE5vZGUpIHtcbiAgICB0aGlzLmVsXy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZWxfKTtcbiAgfVxuXG4gIHZqcy5yZW1vdmVEYXRhKHRoaXMuZWxfKTtcbiAgdGhpcy5lbF8gPSBudWxsO1xufTtcblxuLyoqXG4gKiBSZWZlcmVuY2UgdG8gbWFpbiBwbGF5ZXIgaW5zdGFuY2VcbiAqXG4gKiBAdHlwZSB7dmpzLlBsYXllcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLnBsYXllcl8gPSB0cnVlO1xuXG4vKipcbiAqIFJldHVybiB0aGUgY29tcG9uZW50J3MgcGxheWVyXG4gKlxuICogQHJldHVybiB7dmpzLlBsYXllcn1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUucGxheWVyID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMucGxheWVyXztcbn07XG5cbi8qKlxuICogVGhlIGNvbXBvbmVudCdzIG9wdGlvbnMgb2JqZWN0XG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLm9wdGlvbnNfO1xuXG4vKipcbiAqIERlZXAgbWVyZ2Ugb2Ygb3B0aW9ucyBvYmplY3RzXG4gKlxuICogV2hlbmV2ZXIgYSBwcm9wZXJ0eSBpcyBhbiBvYmplY3Qgb24gYm90aCBvcHRpb25zIG9iamVjdHNcbiAqIHRoZSB0d28gcHJvcGVydGllcyB3aWxsIGJlIG1lcmdlZCB1c2luZyB2anMub2JqLmRlZXBNZXJnZS5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgZm9yIG1lcmdpbmcgb3B0aW9ucyBmb3IgY2hpbGQgY29tcG9uZW50cy4gV2VcbiAqIHdhbnQgaXQgdG8gYmUgZWFzeSB0byBvdmVycmlkZSBpbmRpdmlkdWFsIG9wdGlvbnMgb24gYSBjaGlsZFxuICogY29tcG9uZW50IHdpdGhvdXQgaGF2aW5nIHRvIHJld3JpdGUgYWxsIHRoZSBvdGhlciBkZWZhdWx0IG9wdGlvbnMuXG4gKlxuICogICAgIFBhcmVudC5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gKiAgICAgICBjaGlsZHJlbjoge1xuICogICAgICAgICAnY2hpbGRPbmUnOiB7ICdmb28nOiAnYmFyJywgJ2FzZGYnOiAnZmRzYScgfSxcbiAqICAgICAgICAgJ2NoaWxkVHdvJzoge30sXG4gKiAgICAgICAgICdjaGlsZFRocmVlJzoge31cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKiAgICAgbmV3T3B0aW9ucyA9IHtcbiAqICAgICAgIGNoaWxkcmVuOiB7XG4gKiAgICAgICAgICdjaGlsZE9uZSc6IHsgJ2Zvbyc6ICdiYXonLCAnYWJjJzogJzEyMycgfVxuICogICAgICAgICAnY2hpbGRUd28nOiBudWxsLFxuICogICAgICAgICAnY2hpbGRGb3VyJzoge31cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKlxuICogICAgIHRoaXMub3B0aW9ucyhuZXdPcHRpb25zKTtcbiAqXG4gKiBSRVNVTFRcbiAqXG4gKiAgICAge1xuICogICAgICAgY2hpbGRyZW46IHtcbiAqICAgICAgICAgJ2NoaWxkT25lJzogeyAnZm9vJzogJ2JheicsICdhc2RmJzogJ2Zkc2EnLCAnYWJjJzogJzEyMycgfSxcbiAqICAgICAgICAgJ2NoaWxkVHdvJzogbnVsbCwgLy8gRGlzYWJsZWQuIFdvbid0IGJlIGluaXRpYWxpemVkLlxuICogICAgICAgICAnY2hpbGRUaHJlZSc6IHt9LFxuICogICAgICAgICAnY2hpbGRGb3VyJzoge31cbiAqICAgICAgIH1cbiAqICAgICB9XG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBvYmogT2JqZWN0IG9mIG5ldyBvcHRpb24gdmFsdWVzXG4gKiBAcmV0dXJuIHtPYmplY3R9ICAgICBBIE5FVyBvYmplY3Qgb2YgdGhpcy5vcHRpb25zXyBhbmQgb2JqIG1lcmdlZFxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5vcHRpb25zID0gZnVuY3Rpb24ob2JqKXtcbiAgaWYgKG9iaiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gdGhpcy5vcHRpb25zXztcblxuICByZXR1cm4gdGhpcy5vcHRpb25zXyA9IHZqcy51dGlsLm1lcmdlT3B0aW9ucyh0aGlzLm9wdGlvbnNfLCBvYmopO1xufTtcblxuLyoqXG4gKiBUaGUgRE9NIGVsZW1lbnQgZm9yIHRoZSBjb21wb25lbnRcbiAqXG4gKiBAdHlwZSB7RWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmVsXztcblxuLyoqXG4gKiBDcmVhdGUgdGhlIGNvbXBvbmVudCdzIERPTSBlbGVtZW50XG4gKlxuICogQHBhcmFtICB7U3RyaW5nPX0gdGFnTmFtZSAgRWxlbWVudCdzIG5vZGUgdHlwZS4gZS5nLiAnZGl2J1xuICogQHBhcmFtICB7T2JqZWN0PX0gYXR0cmlidXRlcyBBbiBvYmplY3Qgb2YgZWxlbWVudCBhdHRyaWJ1dGVzIHRoYXQgc2hvdWxkIGJlIHNldCBvbiB0aGUgZWxlbWVudFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbih0YWdOYW1lLCBhdHRyaWJ1dGVzKXtcbiAgcmV0dXJuIHZqcy5jcmVhdGVFbCh0YWdOYW1lLCBhdHRyaWJ1dGVzKTtcbn07XG5cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmxvY2FsaXplID0gZnVuY3Rpb24oc3RyaW5nKXtcbiAgdmFyIGxhbmcgPSB0aGlzLnBsYXllcl8ubGFuZ3VhZ2UoKSxcbiAgICAgIGxhbmd1YWdlcyA9IHRoaXMucGxheWVyXy5sYW5ndWFnZXMoKTtcbiAgaWYgKGxhbmd1YWdlcyAmJiBsYW5ndWFnZXNbbGFuZ10gJiYgbGFuZ3VhZ2VzW2xhbmddW3N0cmluZ10pIHtcbiAgICByZXR1cm4gbGFuZ3VhZ2VzW2xhbmddW3N0cmluZ107XG4gIH1cbiAgcmV0dXJuIHN0cmluZztcbn07XG5cbi8qKlxuICogR2V0IHRoZSBjb21wb25lbnQncyBET00gZWxlbWVudFxuICpcbiAqICAgICB2YXIgZG9tRWwgPSBteUNvbXBvbmVudC5lbCgpO1xuICpcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuZWxfO1xufTtcblxuLyoqXG4gKiBBbiBvcHRpb25hbCBlbGVtZW50IHdoZXJlLCBpZiBkZWZpbmVkLCBjaGlsZHJlbiB3aWxsIGJlIGluc2VydGVkIGluc3RlYWQgb2ZcbiAqIGRpcmVjdGx5IGluIGBlbF9gXG4gKlxuICogQHR5cGUge0VsZW1lbnR9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5jb250ZW50RWxfO1xuXG4vKipcbiAqIFJldHVybiB0aGUgY29tcG9uZW50J3MgRE9NIGVsZW1lbnQgZm9yIGVtYmVkZGluZyBjb250ZW50LlxuICogV2lsbCBlaXRoZXIgYmUgZWxfIG9yIGEgbmV3IGVsZW1lbnQgZGVmaW5lZCBpbiBjcmVhdGVFbC5cbiAqXG4gKiBAcmV0dXJuIHtFbGVtZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5jb250ZW50RWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5jb250ZW50RWxfIHx8IHRoaXMuZWxfO1xufTtcblxuLyoqXG4gKiBUaGUgSUQgZm9yIHRoZSBjb21wb25lbnRcbiAqXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuaWRfO1xuXG4vKipcbiAqIEdldCB0aGUgY29tcG9uZW50J3MgSURcbiAqXG4gKiAgICAgdmFyIGlkID0gbXlDb21wb25lbnQuaWQoKTtcbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmlkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuaWRfO1xufTtcblxuLyoqXG4gKiBUaGUgbmFtZSBmb3IgdGhlIGNvbXBvbmVudC4gT2Z0ZW4gdXNlZCB0byByZWZlcmVuY2UgdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUubmFtZV87XG5cbi8qKlxuICogR2V0IHRoZSBjb21wb25lbnQncyBuYW1lLiBUaGUgbmFtZSBpcyBvZnRlbiB1c2VkIHRvIHJlZmVyZW5jZSB0aGUgY29tcG9uZW50LlxuICpcbiAqICAgICB2YXIgbmFtZSA9IG15Q29tcG9uZW50Lm5hbWUoKTtcbiAqXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLm5hbWUgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5uYW1lXztcbn07XG5cbi8qKlxuICogQXJyYXkgb2YgY2hpbGQgY29tcG9uZW50c1xuICpcbiAqIEB0eXBlIHtBcnJheX1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmNoaWxkcmVuXztcblxuLyoqXG4gKiBHZXQgYW4gYXJyYXkgb2YgYWxsIGNoaWxkIGNvbXBvbmVudHNcbiAqXG4gKiAgICAgdmFyIGtpZHMgPSBteUNvbXBvbmVudC5jaGlsZHJlbigpO1xuICpcbiAqIEByZXR1cm4ge0FycmF5fSBUaGUgY2hpbGRyZW5cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY2hpbGRyZW4gPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5jaGlsZHJlbl87XG59O1xuXG4vKipcbiAqIE9iamVjdCBvZiBjaGlsZCBjb21wb25lbnRzIGJ5IElEXG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmNoaWxkSW5kZXhfO1xuXG4vKipcbiAqIFJldHVybnMgYSBjaGlsZCBjb21wb25lbnQgd2l0aCB0aGUgcHJvdmlkZWQgSURcbiAqXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5nZXRDaGlsZEJ5SWQgPSBmdW5jdGlvbihpZCl7XG4gIHJldHVybiB0aGlzLmNoaWxkSW5kZXhfW2lkXTtcbn07XG5cbi8qKlxuICogT2JqZWN0IG9mIGNoaWxkIGNvbXBvbmVudHMgYnkgbmFtZVxuICpcbiAqIEB0eXBlIHtPYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5jaGlsZE5hbWVJbmRleF87XG5cbi8qKlxuICogUmV0dXJucyBhIGNoaWxkIGNvbXBvbmVudCB3aXRoIHRoZSBwcm92aWRlZCBuYW1lXG4gKlxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuZ2V0Q2hpbGQgPSBmdW5jdGlvbihuYW1lKXtcbiAgcmV0dXJuIHRoaXMuY2hpbGROYW1lSW5kZXhfW25hbWVdO1xufTtcblxuLyoqXG4gKiBBZGRzIGEgY2hpbGQgY29tcG9uZW50IGluc2lkZSB0aGlzIGNvbXBvbmVudFxuICpcbiAqICAgICBteUNvbXBvbmVudC5lbCgpO1xuICogICAgIC8vIC0+IDxkaXYgY2xhc3M9J215LWNvbXBvbmVudCc+PC9kaXY+XG4gKiAgICAgbXlDb21vbmVudC5jaGlsZHJlbigpO1xuICogICAgIC8vIFtlbXB0eSBhcnJheV1cbiAqXG4gKiAgICAgdmFyIG15QnV0dG9uID0gbXlDb21wb25lbnQuYWRkQ2hpbGQoJ015QnV0dG9uJyk7XG4gKiAgICAgLy8gLT4gPGRpdiBjbGFzcz0nbXktY29tcG9uZW50Jz48ZGl2IGNsYXNzPVwibXktYnV0dG9uXCI+bXlCdXR0b248ZGl2PjwvZGl2PlxuICogICAgIC8vIC0+IG15QnV0dG9uID09PSBteUNvbW9uZW50LmNoaWxkcmVuKClbMF07XG4gKlxuICogUGFzcyBpbiBvcHRpb25zIGZvciBjaGlsZCBjb25zdHJ1Y3RvcnMgYW5kIG9wdGlvbnMgZm9yIGNoaWxkcmVuIG9mIHRoZSBjaGlsZFxuICpcbiAqICAgICB2YXIgbXlCdXR0b24gPSBteUNvbXBvbmVudC5hZGRDaGlsZCgnTXlCdXR0b24nLCB7XG4gKiAgICAgICB0ZXh0OiAnUHJlc3MgTWUnLFxuICogICAgICAgY2hpbGRyZW46IHtcbiAqICAgICAgICAgYnV0dG9uQ2hpbGRFeGFtcGxlOiB7XG4gKiAgICAgICAgICAgYnV0dG9uQ2hpbGRPcHRpb246IHRydWVcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH0pO1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfHZqcy5Db21wb25lbnR9IGNoaWxkIFRoZSBjbGFzcyBuYW1lIG9yIGluc3RhbmNlIG9mIGEgY2hpbGQgdG8gYWRkXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgT3B0aW9ucywgaW5jbHVkaW5nIG9wdGlvbnMgdG8gYmUgcGFzc2VkIHRvIGNoaWxkcmVuIG9mIHRoZSBjaGlsZC5cbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9IFRoZSBjaGlsZCBjb21wb25lbnQgKGNyZWF0ZWQgYnkgdGhpcyBwcm9jZXNzIGlmIGEgc3RyaW5nIHdhcyB1c2VkKVxuICogQHN1cHByZXNzIHthY2Nlc3NDb250cm9sc3xjaGVja1JlZ0V4cHxjaGVja1R5cGVzfGNoZWNrVmFyc3xjb25zdHxjb25zdGFudFByb3BlcnR5fGRlcHJlY2F0ZWR8ZHVwbGljYXRlfGVzNVN0cmljdHxmaWxlb3ZlcnZpZXdUYWdzfGdsb2JhbFRoaXN8aW52YWxpZENhc3RzfG1pc3NpbmdQcm9wZXJ0aWVzfG5vblN0YW5kYXJkSnNEb2NzfHN0cmljdE1vZHVsZURlcENoZWNrfHVuZGVmaW5lZE5hbWVzfHVuZGVmaW5lZFZhcnN8dW5rbm93bkRlZmluZXN8dXNlbGVzc0NvZGV8dmlzaWJpbGl0eX1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuYWRkQ2hpbGQgPSBmdW5jdGlvbihjaGlsZCwgb3B0aW9ucyl7XG4gIHZhciBjb21wb25lbnQsIGNvbXBvbmVudENsYXNzLCBjb21wb25lbnROYW1lLCBjb21wb25lbnRJZDtcblxuICAvLyBJZiBzdHJpbmcsIGNyZWF0ZSBuZXcgY29tcG9uZW50IHdpdGggb3B0aW9uc1xuICBpZiAodHlwZW9mIGNoaWxkID09PSAnc3RyaW5nJykge1xuXG4gICAgY29tcG9uZW50TmFtZSA9IGNoaWxkO1xuXG4gICAgLy8gTWFrZSBzdXJlIG9wdGlvbnMgaXMgYXQgbGVhc3QgYW4gZW1wdHkgb2JqZWN0IHRvIHByb3RlY3QgYWdhaW5zdCBlcnJvcnNcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIC8vIEFzc3VtZSBuYW1lIG9mIHNldCBpcyBhIGxvd2VyY2FzZWQgbmFtZSBvZiB0aGUgVUkgQ2xhc3MgKFBsYXlCdXR0b24sIGV0Yy4pXG4gICAgY29tcG9uZW50Q2xhc3MgPSBvcHRpb25zWydjb21wb25lbnRDbGFzcyddIHx8IHZqcy5jYXBpdGFsaXplKGNvbXBvbmVudE5hbWUpO1xuXG4gICAgLy8gU2V0IG5hbWUgdGhyb3VnaCBvcHRpb25zXG4gICAgb3B0aW9uc1snbmFtZSddID0gY29tcG9uZW50TmFtZTtcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBvYmplY3QgJiBlbGVtZW50IGZvciB0aGlzIGNvbnRyb2xzIHNldFxuICAgIC8vIElmIHRoZXJlJ3Mgbm8gLnBsYXllcl8sIHRoaXMgaXMgYSBwbGF5ZXJcbiAgICAvLyBDbG9zdXJlIENvbXBpbGVyIHRocm93cyBhbiAnaW5jb21wbGV0ZSBhbGlhcycgd2FybmluZyBpZiB3ZSB1c2UgdGhlIHZqcyB2YXJpYWJsZSBkaXJlY3RseS5cbiAgICAvLyBFdmVyeSBjbGFzcyBzaG91bGQgYmUgZXhwb3J0ZWQsIHNvIHRoaXMgc2hvdWxkIG5ldmVyIGJlIGEgcHJvYmxlbSBoZXJlLlxuICAgIGNvbXBvbmVudCA9IG5ldyB3aW5kb3dbJ3ZpZGVvanMnXVtjb21wb25lbnRDbGFzc10odGhpcy5wbGF5ZXJfIHx8IHRoaXMsIG9wdGlvbnMpO1xuXG4gIC8vIGNoaWxkIGlzIGEgY29tcG9uZW50IGluc3RhbmNlXG4gIH0gZWxzZSB7XG4gICAgY29tcG9uZW50ID0gY2hpbGQ7XG4gIH1cblxuICB0aGlzLmNoaWxkcmVuXy5wdXNoKGNvbXBvbmVudCk7XG5cbiAgaWYgKHR5cGVvZiBjb21wb25lbnQuaWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLmNoaWxkSW5kZXhfW2NvbXBvbmVudC5pZCgpXSA9IGNvbXBvbmVudDtcbiAgfVxuXG4gIC8vIElmIGEgbmFtZSB3YXNuJ3QgdXNlZCB0byBjcmVhdGUgdGhlIGNvbXBvbmVudCwgY2hlY2sgaWYgd2UgY2FuIHVzZSB0aGVcbiAgLy8gbmFtZSBmdW5jdGlvbiBvZiB0aGUgY29tcG9uZW50XG4gIGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnROYW1lIHx8IChjb21wb25lbnQubmFtZSAmJiBjb21wb25lbnQubmFtZSgpKTtcblxuICBpZiAoY29tcG9uZW50TmFtZSkge1xuICAgIHRoaXMuY2hpbGROYW1lSW5kZXhfW2NvbXBvbmVudE5hbWVdID0gY29tcG9uZW50O1xuICB9XG5cbiAgLy8gQWRkIHRoZSBVSSBvYmplY3QncyBlbGVtZW50IHRvIHRoZSBjb250YWluZXIgZGl2IChib3gpXG4gIC8vIEhhdmluZyBhbiBlbGVtZW50IGlzIG5vdCByZXF1aXJlZFxuICBpZiAodHlwZW9mIGNvbXBvbmVudFsnZWwnXSA9PT0gJ2Z1bmN0aW9uJyAmJiBjb21wb25lbnRbJ2VsJ10oKSkge1xuICAgIHRoaXMuY29udGVudEVsKCkuYXBwZW5kQ2hpbGQoY29tcG9uZW50WydlbCddKCkpO1xuICB9XG5cbiAgLy8gUmV0dXJuIHNvIGl0IGNhbiBzdG9yZWQgb24gcGFyZW50IG9iamVjdCBpZiBkZXNpcmVkLlxuICByZXR1cm4gY29tcG9uZW50O1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBjaGlsZCBjb21wb25lbnQgZnJvbSB0aGlzIGNvbXBvbmVudCdzIGxpc3Qgb2YgY2hpbGRyZW4sIGFuZCB0aGVcbiAqIGNoaWxkIGNvbXBvbmVudCdzIGVsZW1lbnQgZnJvbSB0aGlzIGNvbXBvbmVudCdzIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0gIHt2anMuQ29tcG9uZW50fSBjb21wb25lbnQgQ29tcG9uZW50IHRvIHJlbW92ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5yZW1vdmVDaGlsZCA9IGZ1bmN0aW9uKGNvbXBvbmVudCl7XG4gIGlmICh0eXBlb2YgY29tcG9uZW50ID09PSAnc3RyaW5nJykge1xuICAgIGNvbXBvbmVudCA9IHRoaXMuZ2V0Q2hpbGQoY29tcG9uZW50KTtcbiAgfVxuXG4gIGlmICghY29tcG9uZW50IHx8ICF0aGlzLmNoaWxkcmVuXykgcmV0dXJuO1xuXG4gIHZhciBjaGlsZEZvdW5kID0gZmFsc2U7XG4gIGZvciAodmFyIGkgPSB0aGlzLmNoaWxkcmVuXy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIGlmICh0aGlzLmNoaWxkcmVuX1tpXSA9PT0gY29tcG9uZW50KSB7XG4gICAgICBjaGlsZEZvdW5kID0gdHJ1ZTtcbiAgICAgIHRoaXMuY2hpbGRyZW5fLnNwbGljZShpLDEpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjaGlsZEZvdW5kKSByZXR1cm47XG5cbiAgdGhpcy5jaGlsZEluZGV4X1tjb21wb25lbnQuaWRdID0gbnVsbDtcbiAgdGhpcy5jaGlsZE5hbWVJbmRleF9bY29tcG9uZW50Lm5hbWVdID0gbnVsbDtcblxuICB2YXIgY29tcEVsID0gY29tcG9uZW50LmVsKCk7XG4gIGlmIChjb21wRWwgJiYgY29tcEVsLnBhcmVudE5vZGUgPT09IHRoaXMuY29udGVudEVsKCkpIHtcbiAgICB0aGlzLmNvbnRlbnRFbCgpLnJlbW92ZUNoaWxkKGNvbXBvbmVudC5lbCgpKTtcbiAgfVxufTtcblxuLyoqXG4gKiBBZGQgYW5kIGluaXRpYWxpemUgZGVmYXVsdCBjaGlsZCBjb21wb25lbnRzIGZyb20gb3B0aW9uc1xuICpcbiAqICAgICAvLyB3aGVuIGFuIGluc3RhbmNlIG9mIE15Q29tcG9uZW50IGlzIGNyZWF0ZWQsIGFsbCBjaGlsZHJlbiBpbiBvcHRpb25zXG4gKiAgICAgLy8gd2lsbCBiZSBhZGRlZCB0byB0aGUgaW5zdGFuY2UgYnkgdGhlaXIgbmFtZSBzdHJpbmdzIGFuZCBvcHRpb25zXG4gKiAgICAgTXlDb21wb25lbnQucHJvdG90eXBlLm9wdGlvbnNfLmNoaWxkcmVuID0ge1xuICogICAgICAgbXlDaGlsZENvbXBvbmVudDoge1xuICogICAgICAgICBteUNoaWxkT3B0aW9uOiB0cnVlXG4gKiAgICAgICB9XG4gKiAgICAgfVxuICpcbiAqICAgICAvLyBPciB3aGVuIGNyZWF0aW5nIHRoZSBjb21wb25lbnRcbiAqICAgICB2YXIgbXlDb21wID0gbmV3IE15Q29tcG9uZW50KHBsYXllciwge1xuICogICAgICAgY2hpbGRyZW46IHtcbiAqICAgICAgICAgbXlDaGlsZENvbXBvbmVudDoge1xuICogICAgICAgICAgIG15Q2hpbGRPcHRpb246IHRydWVcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH0pO1xuICpcbiAqIFRoZSBjaGlsZHJlbiBvcHRpb24gY2FuIGFsc28gYmUgYW4gQXJyYXkgb2YgY2hpbGQgbmFtZXMgb3JcbiAqIGNoaWxkIG9wdGlvbnMgb2JqZWN0cyAodGhhdCBhbHNvIGluY2x1ZGUgYSAnbmFtZScga2V5KS5cbiAqXG4gKiAgICAgdmFyIG15Q29tcCA9IG5ldyBNeUNvbXBvbmVudChwbGF5ZXIsIHtcbiAqICAgICAgIGNoaWxkcmVuOiBbXG4gKiAgICAgICAgICdidXR0b24nLFxuICogICAgICAgICB7XG4gKiAgICAgICAgICAgbmFtZTogJ2J1dHRvbicsXG4gKiAgICAgICAgICAgc29tZU90aGVyT3B0aW9uOiB0cnVlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIF1cbiAqICAgICB9KTtcbiAqXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmluaXRDaGlsZHJlbiA9IGZ1bmN0aW9uKCl7XG4gIHZhciBwYXJlbnQsIGNoaWxkcmVuLCBjaGlsZCwgbmFtZSwgb3B0cztcblxuICBwYXJlbnQgPSB0aGlzO1xuICBjaGlsZHJlbiA9IHRoaXMub3B0aW9ucygpWydjaGlsZHJlbiddO1xuXG4gIGlmIChjaGlsZHJlbikge1xuICAgIC8vIEFsbG93IGZvciBhbiBhcnJheSBvZiBjaGlsZHJlbiBkZXRhaWxzIHRvIHBhc3NlZCBpbiB0aGUgb3B0aW9uc1xuICAgIGlmICh2anMub2JqLmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNoaWxkID0gY2hpbGRyZW5baV07XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PSAnc3RyaW5nJykge1xuICAgICAgICAgIG5hbWUgPSBjaGlsZDtcbiAgICAgICAgICBvcHRzID0ge307XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmFtZSA9IGNoaWxkLm5hbWU7XG4gICAgICAgICAgb3B0cyA9IGNoaWxkO1xuICAgICAgICB9XG5cbiAgICAgICAgcGFyZW50W25hbWVdID0gcGFyZW50LmFkZENoaWxkKG5hbWUsIG9wdHMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2anMub2JqLmVhY2goY2hpbGRyZW4sIGZ1bmN0aW9uKG5hbWUsIG9wdHMpe1xuICAgICAgICAvLyBBbGxvdyBmb3IgZGlzYWJsaW5nIGRlZmF1bHQgY29tcG9uZW50c1xuICAgICAgICAvLyBlLmcuIHZqcy5vcHRpb25zWydjaGlsZHJlbiddWydwb3N0ZXJJbWFnZSddID0gZmFsc2VcbiAgICAgICAgaWYgKG9wdHMgPT09IGZhbHNlKSByZXR1cm47XG5cbiAgICAgICAgLy8gU2V0IHByb3BlcnR5IG5hbWUgb24gcGxheWVyLiBDb3VsZCBjYXVzZSBjb25mbGljdHMgd2l0aCBvdGhlciBwcm9wIG5hbWVzLCBidXQgaXQncyB3b3J0aCBtYWtpbmcgcmVmcyBlYXN5LlxuICAgICAgICBwYXJlbnRbbmFtZV0gPSBwYXJlbnQuYWRkQ2hpbGQobmFtZSwgb3B0cyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQWxsb3dzIHN1YiBjb21wb25lbnRzIHRvIHN0YWNrIENTUyBjbGFzcyBuYW1lc1xuICpcbiAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGNvbnN0cnVjdGVkIGNsYXNzIG5hbWVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gQ2hpbGQgY2xhc3NlcyBjYW4gaW5jbHVkZSBhIGZ1bmN0aW9uIHRoYXQgZG9lczpcbiAgICAvLyByZXR1cm4gJ0NMQVNTIE5BTUUnICsgdGhpcy5fc3VwZXIoKTtcbiAgICByZXR1cm4gJyc7XG59O1xuXG4vKiBFdmVudHNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHRoaXMgY29tcG9uZW50J3MgZWxlbWVudFxuICpcbiAqICAgICB2YXIgbXlGdW5jID0gZnVuY3Rpb24oKXtcbiAqICAgICAgIHZhciBteVBsYXllciA9IHRoaXM7XG4gKiAgICAgICAvLyBEbyBzb21ldGhpbmcgd2hlbiB0aGUgZXZlbnQgaXMgZmlyZWRcbiAqICAgICB9O1xuICpcbiAqICAgICBteVBsYXllci5vbihcImV2ZW50TmFtZVwiLCBteUZ1bmMpO1xuICpcbiAqIFRoZSBjb250ZXh0IHdpbGwgYmUgdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9ICAgdHlwZSBUaGUgZXZlbnQgdHlwZSBlLmcuICdjbGljaydcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgIFRoZSBldmVudCBsaXN0ZW5lclxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH0gc2VsZlxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHR5cGUsIGZuKXtcbiAgdmpzLm9uKHRoaXMuZWxfLCB0eXBlLCB2anMuYmluZCh0aGlzLCBmbikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUmVtb3ZlIGFuIGV2ZW50IGxpc3RlbmVyIGZyb20gdGhlIGNvbXBvbmVudCdzIGVsZW1lbnRcbiAqXG4gKiAgICAgbXlDb21wb25lbnQub2ZmKFwiZXZlbnROYW1lXCIsIG15RnVuYyk7XG4gKlxuICogQHBhcmFtICB7U3RyaW5nPX0gICB0eXBlIEV2ZW50IHR5cGUuIFdpdGhvdXQgdHlwZSBpdCB3aWxsIHJlbW92ZSBhbGwgbGlzdGVuZXJzLlxuICogQHBhcmFtICB7RnVuY3Rpb249fSBmbiAgIEV2ZW50IGxpc3RlbmVyLiBXaXRob3V0IGZuIGl0IHdpbGwgcmVtb3ZlIGFsbCBsaXN0ZW5lcnMgZm9yIGEgdHlwZS5cbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLm9mZiA9IGZ1bmN0aW9uKHR5cGUsIGZuKXtcbiAgdmpzLm9mZih0aGlzLmVsXywgdHlwZSwgZm4pO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGJlIHRyaWdnZXJlZCBvbmx5IG9uY2UgYW5kIHRoZW4gcmVtb3ZlZFxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gICB0eXBlIEV2ZW50IHR5cGVcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBmbiAgIEV2ZW50IGxpc3RlbmVyXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5vbmUgPSBmdW5jdGlvbih0eXBlLCBmbikge1xuICB2anMub25lKHRoaXMuZWxfLCB0eXBlLCB2anMuYmluZCh0aGlzLCBmbikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogVHJpZ2dlciBhbiBldmVudCBvbiBhbiBlbGVtZW50XG4gKlxuICogICAgIG15Q29tcG9uZW50LnRyaWdnZXIoJ2V2ZW50TmFtZScpO1xuICogICAgIG15Q29tcG9uZW50LnRyaWdnZXIoeyd0eXBlJzonZXZlbnROYW1lJ30pO1xuICpcbiAqIEBwYXJhbSAge0V2ZW50fE9iamVjdHxTdHJpbmd9IGV2ZW50ICBBIHN0cmluZyAodGhlIHR5cGUpIG9yIGFuIGV2ZW50IG9iamVjdCB3aXRoIGEgdHlwZSBhdHRyaWJ1dGVcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9ICAgICAgIHNlbGZcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdmpzLnRyaWdnZXIodGhpcy5lbF8sIGV2ZW50KTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKiBSZWFkeVxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qKlxuICogSXMgdGhlIGNvbXBvbmVudCBsb2FkZWRcbiAqIFRoaXMgY2FuIG1lYW4gZGlmZmVyZW50IHRoaW5ncyBkZXBlbmRpbmcgb24gdGhlIGNvbXBvbmVudC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHR5cGUge0Jvb2xlYW59XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmlzUmVhZHlfO1xuXG4vKipcbiAqIFRyaWdnZXIgcmVhZHkgYXMgc29vbiBhcyBpbml0aWFsaXphdGlvbiBpcyBmaW5pc2hlZFxuICpcbiAqIEFsbG93cyBmb3IgZGVsYXlpbmcgcmVhZHkuIE92ZXJyaWRlIG9uIGEgc3ViIGNsYXNzIHByb3RvdHlwZS5cbiAqIElmIHlvdSBzZXQgdGhpcy5pc1JlYWR5T25Jbml0RmluaXNoXyBpdCB3aWxsIGFmZmVjdCBhbGwgY29tcG9uZW50cy5cbiAqIFNwZWNpYWxseSB1c2VkIHdoZW4gd2FpdGluZyBmb3IgdGhlIEZsYXNoIHBsYXllciB0byBhc3luY2hybm91c2x5IGxvYWQuXG4gKlxuICogQHR5cGUge0Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWR5T25Jbml0RmluaXNoXyA9IHRydWU7XG5cbi8qKlxuICogTGlzdCBvZiByZWFkeSBsaXN0ZW5lcnNcbiAqXG4gKiBAdHlwZSB7QXJyYXl9XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5yZWFkeVF1ZXVlXztcblxuLyoqXG4gKiBCaW5kIGEgbGlzdGVuZXIgdG8gdGhlIGNvbXBvbmVudCdzIHJlYWR5IHN0YXRlXG4gKlxuICogRGlmZmVyZW50IGZyb20gZXZlbnQgbGlzdGVuZXJzIGluIHRoYXQgaWYgdGhlIHJlYWR5IGV2ZW50IGhhcyBhbHJlYWR5IGhhcHBlbmRcbiAqIGl0IHdpbGwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gaW1tZWRpYXRlbHkuXG4gKlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZuIFJlYWR5IGxpc3RlbmVyXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uKGZuKXtcbiAgaWYgKGZuKSB7XG4gICAgaWYgKHRoaXMuaXNSZWFkeV8pIHtcbiAgICAgIGZuLmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnJlYWR5UXVldWVfID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5yZWFkeVF1ZXVlXyA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5yZWFkeVF1ZXVlXy5wdXNoKGZuKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFRyaWdnZXIgdGhlIHJlYWR5IGxpc3RlbmVyc1xuICpcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLnRyaWdnZXJSZWFkeSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuaXNSZWFkeV8gPSB0cnVlO1xuXG4gIHZhciByZWFkeVF1ZXVlID0gdGhpcy5yZWFkeVF1ZXVlXztcblxuICBpZiAocmVhZHlRdWV1ZSAmJiByZWFkeVF1ZXVlLmxlbmd0aCA+IDApIHtcblxuICAgIGZvciAodmFyIGkgPSAwLCBqID0gcmVhZHlRdWV1ZS5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgIHJlYWR5UXVldWVbaV0uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBSZXNldCBSZWFkeSBRdWV1ZVxuICAgIHRoaXMucmVhZHlRdWV1ZV8gPSBbXTtcblxuICAgIC8vIEFsbG93IGZvciB1c2luZyBldmVudCBsaXN0ZW5lcnMgYWxzbywgaW4gY2FzZSB5b3Ugd2FudCB0byBkbyBzb21ldGhpbmcgZXZlcnl0aW1lIGEgc291cmNlIGlzIHJlYWR5LlxuICAgIHRoaXMudHJpZ2dlcigncmVhZHknKTtcbiAgfVxufTtcblxuLyogRGlzcGxheVxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxuLyoqXG4gKiBBZGQgYSBDU1MgY2xhc3MgbmFtZSB0byB0aGUgY29tcG9uZW50J3MgZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc1RvQWRkIENsYXNzbmFtZSB0byBhZGRcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmFkZENsYXNzID0gZnVuY3Rpb24oY2xhc3NUb0FkZCl7XG4gIHZqcy5hZGRDbGFzcyh0aGlzLmVsXywgY2xhc3NUb0FkZCk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYSBDU1MgY2xhc3MgbmFtZSBmcm9tIHRoZSBjb21wb25lbnQncyBlbGVtZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzVG9SZW1vdmUgQ2xhc3NuYW1lIHRvIHJlbW92ZVxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUucmVtb3ZlQ2xhc3MgPSBmdW5jdGlvbihjbGFzc1RvUmVtb3ZlKXtcbiAgdmpzLnJlbW92ZUNsYXNzKHRoaXMuZWxfLCBjbGFzc1RvUmVtb3ZlKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNob3cgdGhlIGNvbXBvbmVudCBlbGVtZW50IGlmIGhpZGRlblxuICpcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9XG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbigpe1xuICB0aGlzLmVsXy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEhpZGUgdGhlIGNvbXBvbmVudCBlbGVtZW50IGlmIGN1cnJlbnRseSBzaG93aW5nXG4gKlxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH1cbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuZWxfLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBMb2NrIGFuIGl0ZW0gaW4gaXRzIHZpc2libGUgc3RhdGVcbiAqIFRvIGJlIHVzZWQgd2l0aCBmYWRlSW4vZmFkZU91dC5cbiAqXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUubG9ja1Nob3dpbmcgPSBmdW5jdGlvbigpe1xuICB0aGlzLmFkZENsYXNzKCd2anMtbG9jay1zaG93aW5nJyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBVbmxvY2sgYW4gaXRlbSB0byBiZSBoaWRkZW5cbiAqIFRvIGJlIHVzZWQgd2l0aCBmYWRlSW4vZmFkZU91dC5cbiAqXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fVxuICogQHByaXZhdGVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUudW5sb2NrU2hvd2luZyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1sb2NrLXNob3dpbmcnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIERpc2FibGUgY29tcG9uZW50IGJ5IG1ha2luZyBpdCB1bnNob3dhYmxlXG4gKlxuICogQ3VycmVudGx5IHByaXZhdGUgYmVjYXVzZSB3ZSdyZSBtb3ZpZ24gdG93YXJkcyBtb3JlIGNzcy1iYXNlZCBzdGF0ZXMuXG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5kaXNhYmxlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5oaWRlKCk7XG4gIHRoaXMuc2hvdyA9IGZ1bmN0aW9uKCl7fTtcbn07XG5cbi8qKlxuICogU2V0IG9yIGdldCB0aGUgd2lkdGggb2YgdGhlIGNvbXBvbmVudCAoQ1NTIHZhbHVlcylcbiAqXG4gKiBTZXR0aW5nIHRoZSB2aWRlbyB0YWcgZGltZW5zaW9uIHZhbHVlcyBvbmx5IHdvcmtzIHdpdGggdmFsdWVzIGluIHBpeGVscy5cbiAqIFBlcmNlbnQgdmFsdWVzIHdpbGwgbm90IHdvcmsuXG4gKiBTb21lIHBlcmNlbnRzIGNhbiBiZSB1c2VkLCBidXQgd2lkdGgoKS9oZWlnaHQoKSB3aWxsIHJldHVybiB0aGUgbnVtYmVyICsgJSxcbiAqIG5vdCB0aGUgYWN0dWFsIGNvbXB1dGVkIHdpZHRoL2hlaWdodC5cbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ8U3RyaW5nPX0gbnVtICAgT3B0aW9uYWwgd2lkdGggbnVtYmVyXG4gKiBAcGFyYW0gIHtCb29sZWFufSBza2lwTGlzdGVuZXJzIFNraXAgdGhlICdyZXNpemUnIGV2ZW50IHRyaWdnZXJcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9IFRoaXMgY29tcG9uZW50LCB3aGVuIHNldHRpbmcgdGhlIHdpZHRoXG4gKiBAcmV0dXJuIHtOdW1iZXJ8U3RyaW5nfSBUaGUgd2lkdGgsIHdoZW4gZ2V0dGluZ1xuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS53aWR0aCA9IGZ1bmN0aW9uKG51bSwgc2tpcExpc3RlbmVycyl7XG4gIHJldHVybiB0aGlzLmRpbWVuc2lvbignd2lkdGgnLCBudW0sIHNraXBMaXN0ZW5lcnMpO1xufTtcblxuLyoqXG4gKiBHZXQgb3Igc2V0IHRoZSBoZWlnaHQgb2YgdGhlIGNvbXBvbmVudCAoQ1NTIHZhbHVlcylcbiAqXG4gKiBTZXR0aW5nIHRoZSB2aWRlbyB0YWcgZGltZW5zaW9uIHZhbHVlcyBvbmx5IHdvcmtzIHdpdGggdmFsdWVzIGluIHBpeGVscy5cbiAqIFBlcmNlbnQgdmFsdWVzIHdpbGwgbm90IHdvcmsuXG4gKiBTb21lIHBlcmNlbnRzIGNhbiBiZSB1c2VkLCBidXQgd2lkdGgoKS9oZWlnaHQoKSB3aWxsIHJldHVybiB0aGUgbnVtYmVyICsgJSxcbiAqIG5vdCB0aGUgYWN0dWFsIGNvbXB1dGVkIHdpZHRoL2hlaWdodC5cbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ8U3RyaW5nPX0gbnVtICAgICBOZXcgY29tcG9uZW50IGhlaWdodFxuICogQHBhcmFtICB7Qm9vbGVhbj19IHNraXBMaXN0ZW5lcnMgU2tpcCB0aGUgcmVzaXplIGV2ZW50IHRyaWdnZXJcbiAqIEByZXR1cm4ge3Zqcy5Db21wb25lbnR9IFRoaXMgY29tcG9uZW50LCB3aGVuIHNldHRpbmcgdGhlIGhlaWdodFxuICogQHJldHVybiB7TnVtYmVyfFN0cmluZ30gVGhlIGhlaWdodCwgd2hlbiBnZXR0aW5nXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKG51bSwgc2tpcExpc3RlbmVycyl7XG4gIHJldHVybiB0aGlzLmRpbWVuc2lvbignaGVpZ2h0JywgbnVtLCBza2lwTGlzdGVuZXJzKTtcbn07XG5cbi8qKlxuICogU2V0IGJvdGggd2lkdGggYW5kIGhlaWdodCBhdCB0aGUgc2FtZSB0aW1lXG4gKlxuICogQHBhcmFtICB7TnVtYmVyfFN0cmluZ30gd2lkdGhcbiAqIEBwYXJhbSAge051bWJlcnxTdHJpbmd9IGhlaWdodFxuICogQHJldHVybiB7dmpzLkNvbXBvbmVudH0gVGhlIGNvbXBvbmVudFxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5kaW1lbnNpb25zID0gZnVuY3Rpb24od2lkdGgsIGhlaWdodCl7XG4gIC8vIFNraXAgcmVzaXplIGxpc3RlbmVycyBvbiB3aWR0aCBmb3Igb3B0aW1pemF0aW9uXG4gIHJldHVybiB0aGlzLndpZHRoKHdpZHRoLCB0cnVlKS5oZWlnaHQoaGVpZ2h0KTtcbn07XG5cbi8qKlxuICogR2V0IG9yIHNldCB3aWR0aCBvciBoZWlnaHRcbiAqXG4gKiBUaGlzIGlzIHRoZSBzaGFyZWQgY29kZSBmb3IgdGhlIHdpZHRoKCkgYW5kIGhlaWdodCgpIG1ldGhvZHMuXG4gKiBBbGwgZm9yIGFuIGludGVnZXIsIGludGVnZXIgKyAncHgnIG9yIGludGVnZXIgKyAnJSc7XG4gKlxuICogS25vd24gaXNzdWU6IEhpZGRlbiBlbGVtZW50cyBvZmZpY2lhbGx5IGhhdmUgYSB3aWR0aCBvZiAwLiBXZSdyZSBkZWZhdWx0aW5nXG4gKiB0byB0aGUgc3R5bGUud2lkdGggdmFsdWUgYW5kIGZhbGxpbmcgYmFjayB0byBjb21wdXRlZFN0eWxlIHdoaWNoIGhhcyB0aGVcbiAqIGhpZGRlbiBlbGVtZW50IGlzc3VlLiBJbmZvLCBidXQgcHJvYmFibHkgbm90IGFuIGVmZmljaWVudCBmaXg6XG4gKiBodHRwOi8vd3d3LmZvbGlvdGVrLmNvbS9kZXZibG9nL2dldHRpbmctdGhlLXdpZHRoLW9mLWEtaGlkZGVuLWVsZW1lbnQtd2l0aC1qcXVlcnktdXNpbmctd2lkdGgvXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSB3aWR0aE9ySGVpZ2h0ICAnd2lkdGgnIG9yICdoZWlnaHQnXG4gKiBAcGFyYW0gIHtOdW1iZXJ8U3RyaW5nPX0gbnVtICAgICBOZXcgZGltZW5zaW9uXG4gKiBAcGFyYW0gIHtCb29sZWFuPX0gc2tpcExpc3RlbmVycyBTa2lwIHJlc2l6ZSBldmVudCB0cmlnZ2VyXG4gKiBAcmV0dXJuIHt2anMuQ29tcG9uZW50fSBUaGUgY29tcG9uZW50IGlmIGEgZGltZW5zaW9uIHdhcyBzZXRcbiAqIEByZXR1cm4ge051bWJlcnxTdHJpbmd9IFRoZSBkaW1lbnNpb24gaWYgbm90aGluZyB3YXMgc2V0XG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5kaW1lbnNpb24gPSBmdW5jdGlvbih3aWR0aE9ySGVpZ2h0LCBudW0sIHNraXBMaXN0ZW5lcnMpe1xuICBpZiAobnVtICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAobnVtID09PSBudWxsIHx8IHZqcy5pc05hTihudW0pKSB7XG4gICAgICBudW0gPSAwO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHVzaW5nIGNzcyB3aWR0aC9oZWlnaHQgKCUgb3IgcHgpIGFuZCBhZGp1c3RcbiAgICBpZiAoKCcnK251bSkuaW5kZXhPZignJScpICE9PSAtMSB8fCAoJycrbnVtKS5pbmRleE9mKCdweCcpICE9PSAtMSkge1xuICAgICAgdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF0gPSBudW07XG4gICAgfSBlbHNlIGlmIChudW0gPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF0gPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbF8uc3R5bGVbd2lkdGhPckhlaWdodF0gPSBudW0rJ3B4JztcbiAgICB9XG5cbiAgICAvLyBza2lwTGlzdGVuZXJzIGFsbG93cyB1cyB0byBhdm9pZCB0cmlnZ2VyaW5nIHRoZSByZXNpemUgZXZlbnQgd2hlbiBzZXR0aW5nIGJvdGggd2lkdGggYW5kIGhlaWdodFxuICAgIGlmICghc2tpcExpc3RlbmVycykgeyB0aGlzLnRyaWdnZXIoJ3Jlc2l6ZScpOyB9XG5cbiAgICAvLyBSZXR1cm4gY29tcG9uZW50XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBOb3Qgc2V0dGluZyBhIHZhbHVlLCBzbyBnZXR0aW5nIGl0XG4gIC8vIE1ha2Ugc3VyZSBlbGVtZW50IGV4aXN0c1xuICBpZiAoIXRoaXMuZWxfKSByZXR1cm4gMDtcblxuICAvLyBHZXQgZGltZW5zaW9uIHZhbHVlIGZyb20gc3R5bGVcbiAgdmFyIHZhbCA9IHRoaXMuZWxfLnN0eWxlW3dpZHRoT3JIZWlnaHRdO1xuICB2YXIgcHhJbmRleCA9IHZhbC5pbmRleE9mKCdweCcpO1xuICBpZiAocHhJbmRleCAhPT0gLTEpIHtcbiAgICAvLyBSZXR1cm4gdGhlIHBpeGVsIHZhbHVlIHdpdGggbm8gJ3B4J1xuICAgIHJldHVybiBwYXJzZUludCh2YWwuc2xpY2UoMCxweEluZGV4KSwgMTApO1xuXG4gIC8vIE5vIHB4IHNvIHVzaW5nICUgb3Igbm8gc3R5bGUgd2FzIHNldCwgc28gZmFsbGluZyBiYWNrIHRvIG9mZnNldFdpZHRoL2hlaWdodFxuICAvLyBJZiBjb21wb25lbnQgaGFzIGRpc3BsYXk6bm9uZSwgb2Zmc2V0IHdpbGwgcmV0dXJuIDBcbiAgLy8gVE9ETzogaGFuZGxlIGRpc3BsYXk6bm9uZSBhbmQgbm8gZGltZW5zaW9uIHN0eWxlIHVzaW5nIHB4XG4gIH0gZWxzZSB7XG5cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5lbF9bJ29mZnNldCcrdmpzLmNhcGl0YWxpemUod2lkdGhPckhlaWdodCldLCAxMCk7XG5cbiAgICAvLyBDb21wdXRlZFN0eWxlIHZlcnNpb24uXG4gICAgLy8gT25seSBkaWZmZXJlbmNlIGlzIGlmIHRoZSBlbGVtZW50IGlzIGhpZGRlbiBpdCB3aWxsIHJldHVyblxuICAgIC8vIHRoZSBwZXJjZW50IHZhbHVlIChlLmcuICcxMDAlJycpXG4gICAgLy8gaW5zdGVhZCBvZiB6ZXJvIGxpa2Ugb2Zmc2V0V2lkdGggcmV0dXJucy5cbiAgICAvLyB2YXIgdmFsID0gdmpzLmdldENvbXB1dGVkU3R5bGVWYWx1ZSh0aGlzLmVsXywgd2lkdGhPckhlaWdodCk7XG4gICAgLy8gdmFyIHB4SW5kZXggPSB2YWwuaW5kZXhPZigncHgnKTtcblxuICAgIC8vIGlmIChweEluZGV4ICE9PSAtMSkge1xuICAgIC8vICAgcmV0dXJuIHZhbC5zbGljZSgwLCBweEluZGV4KTtcbiAgICAvLyB9IGVsc2Uge1xuICAgIC8vICAgcmV0dXJuIHZhbDtcbiAgICAvLyB9XG4gIH1cbn07XG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgd2lkdGggYW5kL29yIGhlaWdodCBvZiB0aGUgY29tcG9uZW50IGNoYW5nZXNcbiAqIEBldmVudCByZXNpemVcbiAqL1xudmpzLkNvbXBvbmVudC5wcm90b3R5cGUub25SZXNpemU7XG5cbi8qKlxuICogRW1pdCAndGFwJyBldmVudHMgd2hlbiB0b3VjaCBldmVudHMgYXJlIHN1cHBvcnRlZFxuICpcbiAqIFRoaXMgaXMgdXNlZCB0byBzdXBwb3J0IHRvZ2dsaW5nIHRoZSBjb250cm9scyB0aHJvdWdoIGEgdGFwIG9uIHRoZSB2aWRlby5cbiAqXG4gKiBXZSdyZSByZXF1aXJlaW5nIHRoZW0gdG8gYmUgZW5hYmxlZCBiZWNhdXNlIG90aGVyd2lzZSBldmVyeSBjb21wb25lbnQgd291bGRcbiAqIGhhdmUgdGhpcyBleHRyYSBvdmVyaGVhZCB1bm5lY2Vzc2FyaWx5LCBvbiBtb2JpbGUgZGV2aWNlcyB3aGVyZSBleHRyYVxuICogb3ZlcmhlYWQgaXMgZXNwZWNpYWxseSBiYWQuXG4gKiBAcHJpdmF0ZVxuICovXG52anMuQ29tcG9uZW50LnByb3RvdHlwZS5lbWl0VGFwRXZlbnRzID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRvdWNoU3RhcnQsIGZpcnN0VG91Y2gsIHRvdWNoVGltZSwgY291bGRCZVRhcCwgbm9UYXAsXG4gICAgICB4ZGlmZiwgeWRpZmYsIHRvdWNoRGlzdGFuY2UsIHRhcE1vdmVtZW50VGhyZXNob2xkO1xuXG4gIC8vIFRyYWNrIHRoZSBzdGFydCB0aW1lIHNvIHdlIGNhbiBkZXRlcm1pbmUgaG93IGxvbmcgdGhlIHRvdWNoIGxhc3RlZFxuICB0b3VjaFN0YXJ0ID0gMDtcbiAgZmlyc3RUb3VjaCA9IG51bGw7XG5cbiAgLy8gTWF4aW11bSBtb3ZlbWVudCBhbGxvd2VkIGR1cmluZyBhIHRvdWNoIGV2ZW50IHRvIHN0aWxsIGJlIGNvbnNpZGVyZWQgYSB0YXBcbiAgdGFwTW92ZW1lbnRUaHJlc2hvbGQgPSAyMjtcblxuICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAvLyBJZiBtb3JlIHRoYW4gb25lIGZpbmdlciwgZG9uJ3QgY29uc2lkZXIgdHJlYXRpbmcgdGhpcyBhcyBhIGNsaWNrXG4gICAgaWYgKGV2ZW50LnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBmaXJzdFRvdWNoID0gZXZlbnQudG91Y2hlc1swXTtcbiAgICAgIC8vIFJlY29yZCBzdGFydCB0aW1lIHNvIHdlIGNhbiBkZXRlY3QgYSB0YXAgdnMuIFwidG91Y2ggYW5kIGhvbGRcIlxuICAgICAgdG91Y2hTdGFydCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgLy8gUmVzZXQgY291bGRCZVRhcCB0cmFja2luZ1xuICAgICAgY291bGRCZVRhcCA9IHRydWU7XG4gICAgfVxuICB9KTtcblxuICB0aGlzLm9uKCd0b3VjaG1vdmUnLCBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZmluZ2VyLCBkb24ndCBjb25zaWRlciB0cmVhdGluZyB0aGlzIGFzIGEgY2xpY2tcbiAgICBpZiAoZXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgICBjb3VsZEJlVGFwID0gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChmaXJzdFRvdWNoKSB7XG4gICAgICAvLyBTb21lIGRldmljZXMgd2lsbCB0aHJvdyB0b3VjaG1vdmVzIGZvciBhbGwgYnV0IHRoZSBzbGlnaHRlc3Qgb2YgdGFwcy5cbiAgICAgIC8vIFNvLCBpZiB3ZSBtb3ZlZCBvbmx5IGEgc21hbGwgZGlzdGFuY2UsIHRoaXMgY291bGQgc3RpbGwgYmUgYSB0YXBcbiAgICAgIHhkaWZmID0gZXZlbnQudG91Y2hlc1swXS5wYWdlWCAtIGZpcnN0VG91Y2gucGFnZVg7XG4gICAgICB5ZGlmZiA9IGV2ZW50LnRvdWNoZXNbMF0ucGFnZVkgLSBmaXJzdFRvdWNoLnBhZ2VZO1xuICAgICAgdG91Y2hEaXN0YW5jZSA9IE1hdGguc3FydCh4ZGlmZiAqIHhkaWZmICsgeWRpZmYgKiB5ZGlmZik7XG4gICAgICBpZiAodG91Y2hEaXN0YW5jZSA+IHRhcE1vdmVtZW50VGhyZXNob2xkKSB7XG4gICAgICAgIGNvdWxkQmVUYXAgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIG5vVGFwID0gZnVuY3Rpb24oKXtcbiAgICBjb3VsZEJlVGFwID0gZmFsc2U7XG4gIH07XG4gIC8vIFRPRE86IExpc3RlbiB0byB0aGUgb3JpZ2luYWwgdGFyZ2V0LiBodHRwOi8veW91dHUuYmUvRHVqZnBYT0tVcDg/dD0xM204c1xuICB0aGlzLm9uKCd0b3VjaGxlYXZlJywgbm9UYXApO1xuICB0aGlzLm9uKCd0b3VjaGNhbmNlbCcsIG5vVGFwKTtcblxuICAvLyBXaGVuIHRoZSB0b3VjaCBlbmRzLCBtZWFzdXJlIGhvdyBsb25nIGl0IHRvb2sgYW5kIHRyaWdnZXIgdGhlIGFwcHJvcHJpYXRlXG4gIC8vIGV2ZW50XG4gIHRoaXMub24oJ3RvdWNoZW5kJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBmaXJzdFRvdWNoID0gbnVsbDtcbiAgICAvLyBQcm9jZWVkIG9ubHkgaWYgdGhlIHRvdWNobW92ZS9sZWF2ZS9jYW5jZWwgZXZlbnQgZGlkbid0IGhhcHBlblxuICAgIGlmIChjb3VsZEJlVGFwID09PSB0cnVlKSB7XG4gICAgICAvLyBNZWFzdXJlIGhvdyBsb25nIHRoZSB0b3VjaCBsYXN0ZWRcbiAgICAgIHRvdWNoVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gdG91Y2hTdGFydDtcbiAgICAgIC8vIFRoZSB0b3VjaCBuZWVkcyB0byBiZSBxdWljayBpbiBvcmRlciB0byBjb25zaWRlciBpdCBhIHRhcFxuICAgICAgaWYgKHRvdWNoVGltZSA8IDI1MCkge1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBEb24ndCBsZXQgYnJvd3NlciB0dXJuIHRoaXMgaW50byBhIGNsaWNrXG4gICAgICAgIHRoaXMudHJpZ2dlcigndGFwJyk7XG4gICAgICAgIC8vIEl0IG1heSBiZSBnb29kIHRvIGNvcHkgdGhlIHRvdWNoZW5kIGV2ZW50IG9iamVjdCBhbmQgY2hhbmdlIHRoZVxuICAgICAgICAvLyB0eXBlIHRvIHRhcCwgaWYgdGhlIG90aGVyIGV2ZW50IHByb3BlcnRpZXMgYXJlbid0IGV4YWN0IGFmdGVyXG4gICAgICAgIC8vIHZqcy5maXhFdmVudCBydW5zIChlLmcuIGV2ZW50LnRhcmdldClcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBSZXBvcnQgdXNlciB0b3VjaCBhY3Rpdml0eSB3aGVuIHRvdWNoIGV2ZW50cyBvY2N1clxuICpcbiAqIFVzZXIgYWN0aXZpdHkgaXMgdXNlZCB0byBkZXRlcm1pbmUgd2hlbiBjb250cm9scyBzaG91bGQgc2hvdy9oaWRlLiBJdCdzXG4gKiByZWxhdGl2ZWx5IHNpbXBsZSB3aGVuIGl0IGNvbWVzIHRvIG1vdXNlIGV2ZW50cywgYmVjYXVzZSBhbnkgbW91c2UgZXZlbnRcbiAqIHNob3VsZCBzaG93IHRoZSBjb250cm9scy4gU28gd2UgY2FwdHVyZSBtb3VzZSBldmVudHMgdGhhdCBidWJibGUgdXAgdG8gdGhlXG4gKiBwbGF5ZXIgYW5kIHJlcG9ydCBhY3Rpdml0eSB3aGVuIHRoYXQgaGFwcGVucy5cbiAqXG4gKiBXaXRoIHRvdWNoIGV2ZW50cyBpdCBpc24ndCBhcyBlYXN5LiBXZSBjYW4ndCByZWx5IG9uIHRvdWNoIGV2ZW50cyBhdCB0aGVcbiAqIHBsYXllciBsZXZlbCwgYmVjYXVzZSBhIHRhcCAodG91Y2hzdGFydCArIHRvdWNoZW5kKSBvbiB0aGUgdmlkZW8gaXRzZWxmIG9uXG4gKiBtb2JpbGUgZGV2aWNlcyBpcyBtZWFudCB0byB0dXJuIGNvbnRyb2xzIG9mZiAoYW5kIG9uKS4gVXNlciBhY3Rpdml0eSBpc1xuICogY2hlY2tlZCBhc3luY2hyb25vdXNseSwgc28gd2hhdCBjb3VsZCBoYXBwZW4gaXMgYSB0YXAgZXZlbnQgb24gdGhlIHZpZGVvXG4gKiB0dXJucyB0aGUgY29udHJvbHMgb2ZmLCB0aGVuIHRoZSB0b3VjaGVuZCBldmVudCBidWJibGVzIHVwIHRvIHRoZSBwbGF5ZXIsXG4gKiB3aGljaCBpZiBpdCByZXBvcnRlZCB1c2VyIGFjdGl2aXR5LCB3b3VsZCB0dXJuIHRoZSBjb250cm9scyByaWdodCBiYWNrIG9uLlxuICogKFdlIGFsc28gZG9uJ3Qgd2FudCB0byBjb21wbGV0ZWx5IGJsb2NrIHRvdWNoIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHVwKVxuICpcbiAqIEFsc28gYSB0b3VjaG1vdmUsIHRvdWNoK2hvbGQsIGFuZCBhbnl0aGluZyBvdGhlciB0aGFuIGEgdGFwIGlzIG5vdCBzdXBwb3NlZFxuICogdG8gdHVybiB0aGUgY29udHJvbHMgYmFjayBvbiBvbiBhIG1vYmlsZSBkZXZpY2UuXG4gKlxuICogSGVyZSB3ZSdyZSBzZXR0aW5nIHRoZSBkZWZhdWx0IGNvbXBvbmVudCBiZWhhdmlvciB0byByZXBvcnQgdXNlciBhY3Rpdml0eVxuICogd2hlbmV2ZXIgdG91Y2ggZXZlbnRzIGhhcHBlbiwgYW5kIHRoaXMgY2FuIGJlIHR1cm5lZCBvZmYgYnkgY29tcG9uZW50cyB0aGF0XG4gKiB3YW50IHRvdWNoIGV2ZW50cyB0byBhY3QgZGlmZmVyZW50bHkuXG4gKi9cbnZqcy5Db21wb25lbnQucHJvdG90eXBlLmVuYWJsZVRvdWNoQWN0aXZpdHkgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHJlcG9ydCwgdG91Y2hIb2xkaW5nLCB0b3VjaEVuZDtcblxuICAvLyBsaXN0ZW5lciBmb3IgcmVwb3J0aW5nIHRoYXQgdGhlIHVzZXIgaXMgYWN0aXZlXG4gIHJlcG9ydCA9IHZqcy5iaW5kKHRoaXMucGxheWVyKCksIHRoaXMucGxheWVyKCkucmVwb3J0VXNlckFjdGl2aXR5KTtcblxuICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oKSB7XG4gICAgcmVwb3J0KCk7XG4gICAgLy8gRm9yIGFzIGxvbmcgYXMgdGhlIHRoZXkgYXJlIHRvdWNoaW5nIHRoZSBkZXZpY2Ugb3IgaGF2ZSB0aGVpciBtb3VzZSBkb3duLFxuICAgIC8vIHdlIGNvbnNpZGVyIHRoZW0gYWN0aXZlIGV2ZW4gaWYgdGhleSdyZSBub3QgbW92aW5nIHRoZWlyIGZpbmdlciBvciBtb3VzZS5cbiAgICAvLyBTbyB3ZSB3YW50IHRvIGNvbnRpbnVlIHRvIHVwZGF0ZSB0aGF0IHRoZXkgYXJlIGFjdGl2ZVxuICAgIGNsZWFySW50ZXJ2YWwodG91Y2hIb2xkaW5nKTtcbiAgICAvLyByZXBvcnQgYXQgdGhlIHNhbWUgaW50ZXJ2YWwgYXMgYWN0aXZpdHlDaGVja1xuICAgIHRvdWNoSG9sZGluZyA9IHNldEludGVydmFsKHJlcG9ydCwgMjUwKTtcbiAgfSk7XG5cbiAgdG91Y2hFbmQgPSBmdW5jdGlvbihldmVudCkge1xuICAgIHJlcG9ydCgpO1xuICAgIC8vIHN0b3AgdGhlIGludGVydmFsIHRoYXQgbWFpbnRhaW5zIGFjdGl2aXR5IGlmIHRoZSB0b3VjaCBpcyBob2xkaW5nXG4gICAgY2xlYXJJbnRlcnZhbCh0b3VjaEhvbGRpbmcpO1xuICB9O1xuXG4gIHRoaXMub24oJ3RvdWNobW92ZScsIHJlcG9ydCk7XG4gIHRoaXMub24oJ3RvdWNoZW5kJywgdG91Y2hFbmQpO1xuICB0aGlzLm9uKCd0b3VjaGNhbmNlbCcsIHRvdWNoRW5kKTtcbn07XG5cbi8qIEJ1dHRvbiAtIEJhc2UgY2xhc3MgZm9yIGFsbCBidXR0b25zXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgYnV0dG9uc1xuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjbGFzc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5CdXR0b24gPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGluaGVyaXREb2NcbiAgICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLmVtaXRUYXBFdmVudHMoKTtcblxuICAgIHRoaXMub24oJ3RhcCcsIHRoaXMub25DbGljayk7XG4gICAgdGhpcy5vbignY2xpY2snLCB0aGlzLm9uQ2xpY2spO1xuICAgIHRoaXMub24oJ2ZvY3VzJywgdGhpcy5vbkZvY3VzKTtcbiAgICB0aGlzLm9uKCdibHVyJywgdGhpcy5vbkJsdXIpO1xuICB9XG59KTtcblxudmpzLkJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbih0eXBlLCBwcm9wcyl7XG4gIHZhciBlbDtcblxuICAvLyBBZGQgc3RhbmRhcmQgQXJpYSBhbmQgVGFiaW5kZXggaW5mb1xuICBwcm9wcyA9IHZqcy5vYmoubWVyZ2Uoe1xuICAgIGNsYXNzTmFtZTogdGhpcy5idWlsZENTU0NsYXNzKCksXG4gICAgJ3JvbGUnOiAnYnV0dG9uJyxcbiAgICAnYXJpYS1saXZlJzogJ3BvbGl0ZScsIC8vIGxldCB0aGUgc2NyZWVuIHJlYWRlciB1c2VyIGtub3cgdGhhdCB0aGUgdGV4dCBvZiB0aGUgYnV0dG9uIG1heSBjaGFuZ2VcbiAgICB0YWJJbmRleDogMFxuICB9LCBwcm9wcyk7XG5cbiAgZWwgPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHR5cGUsIHByb3BzKTtcblxuICAvLyBpZiBpbm5lckhUTUwgaGFzbid0IGJlZW4gb3ZlcnJpZGRlbiAoYmlnUGxheUJ1dHRvbiksIGFkZCBjb250ZW50IGVsZW1lbnRzXG4gIGlmICghcHJvcHMuaW5uZXJIVE1MKSB7XG4gICAgdGhpcy5jb250ZW50RWxfID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtY29udHJvbC1jb250ZW50J1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250cm9sVGV4dF8gPSB2anMuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtY29udHJvbC10ZXh0JyxcbiAgICAgIGlubmVySFRNTDogdGhpcy5sb2NhbGl6ZSh0aGlzLmJ1dHRvblRleHQpIHx8ICdOZWVkIFRleHQnXG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRlbnRFbF8uYXBwZW5kQ2hpbGQodGhpcy5jb250cm9sVGV4dF8pO1xuICAgIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyk7XG4gIH1cblxuICByZXR1cm4gZWw7XG59O1xuXG52anMuQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24oKXtcbiAgLy8gVE9ETzogQ2hhbmdlIHZqcy1jb250cm9sIHRvIHZqcy1idXR0b24/XG4gIHJldHVybiAndmpzLWNvbnRyb2wgJyArIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MuY2FsbCh0aGlzKTtcbn07XG5cbiAgLy8gQ2xpY2sgLSBPdmVycmlkZSB3aXRoIHNwZWNpZmljIGZ1bmN0aW9uYWxpdHkgZm9yIGJ1dHRvblxudmpzLkJ1dHRvbi5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBGb2N1cyAtIEFkZCBrZXlib2FyZCBmdW5jdGlvbmFsaXR5IHRvIGVsZW1lbnRcbnZqcy5CdXR0b24ucHJvdG90eXBlLm9uRm9jdXMgPSBmdW5jdGlvbigpe1xuICB2anMub24oZG9jdW1lbnQsICdrZXlkb3duJywgdmpzLmJpbmQodGhpcywgdGhpcy5vbktleVByZXNzKSk7XG59O1xuXG4gIC8vIEtleVByZXNzIChkb2N1bWVudCBsZXZlbCkgLSBUcmlnZ2VyIGNsaWNrIHdoZW4ga2V5cyBhcmUgcHJlc3NlZFxudmpzLkJ1dHRvbi5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgLy8gQ2hlY2sgZm9yIHNwYWNlIGJhciAoMzIpIG9yIGVudGVyICgxMykga2V5c1xuICBpZiAoZXZlbnQud2hpY2ggPT0gMzIgfHwgZXZlbnQud2hpY2ggPT0gMTMpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMub25DbGljaygpO1xuICB9XG59O1xuXG4vLyBCbHVyIC0gUmVtb3ZlIGtleWJvYXJkIHRyaWdnZXJzXG52anMuQnV0dG9uLnByb3RvdHlwZS5vbkJsdXIgPSBmdW5jdGlvbigpe1xuICB2anMub2ZmKGRvY3VtZW50LCAna2V5ZG93bicsIHZqcy5iaW5kKHRoaXMsIHRoaXMub25LZXlQcmVzcykpO1xufTtcbi8qIFNsaWRlclxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qKlxuICogVGhlIGJhc2UgZnVuY3Rpb25hbGl0eSBmb3Igc2xpZGVycyBsaWtlIHRoZSB2b2x1bWUgYmFyIGFuZCBzZWVrIGJhclxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlNsaWRlciA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgLy8gU2V0IHByb3BlcnR5IG5hbWVzIHRvIGJhciBhbmQgaGFuZGxlIHRvIG1hdGNoIHdpdGggdGhlIGNoaWxkIFNsaWRlciBjbGFzcyBpcyBsb29raW5nIGZvclxuICAgIHRoaXMuYmFyID0gdGhpcy5nZXRDaGlsZCh0aGlzLm9wdGlvbnNfWydiYXJOYW1lJ10pO1xuICAgIHRoaXMuaGFuZGxlID0gdGhpcy5nZXRDaGlsZCh0aGlzLm9wdGlvbnNfWydoYW5kbGVOYW1lJ10pO1xuXG4gICAgdGhpcy5vbignbW91c2Vkb3duJywgdGhpcy5vbk1vdXNlRG93bik7XG4gICAgdGhpcy5vbigndG91Y2hzdGFydCcsIHRoaXMub25Nb3VzZURvd24pO1xuICAgIHRoaXMub24oJ2ZvY3VzJywgdGhpcy5vbkZvY3VzKTtcbiAgICB0aGlzLm9uKCdibHVyJywgdGhpcy5vbkJsdXIpO1xuICAgIHRoaXMub24oJ2NsaWNrJywgdGhpcy5vbkNsaWNrKTtcblxuICAgIHRoaXMucGxheWVyXy5vbignY29udHJvbHN2aXNpYmxlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUpKTtcblxuICAgIHBsYXllci5vbih0aGlzLnBsYXllckV2ZW50LCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuXG4gICAgdGhpcy5ib3VuZEV2ZW50cyA9IHt9O1xuXG5cbiAgICB0aGlzLmJvdW5kRXZlbnRzLm1vdmUgPSB2anMuYmluZCh0aGlzLCB0aGlzLm9uTW91c2VNb3ZlKTtcbiAgICB0aGlzLmJvdW5kRXZlbnRzLmVuZCA9IHZqcy5iaW5kKHRoaXMsIHRoaXMub25Nb3VzZVVwKTtcbiAgfVxufSk7XG5cbnZqcy5TbGlkZXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24odHlwZSwgcHJvcHMpIHtcbiAgcHJvcHMgPSBwcm9wcyB8fCB7fTtcbiAgLy8gQWRkIHRoZSBzbGlkZXIgZWxlbWVudCBjbGFzcyB0byBhbGwgc3ViIGNsYXNzZXNcbiAgcHJvcHMuY2xhc3NOYW1lID0gcHJvcHMuY2xhc3NOYW1lICsgJyB2anMtc2xpZGVyJztcbiAgcHJvcHMgPSB2anMub2JqLm1lcmdlKHtcbiAgICAncm9sZSc6ICdzbGlkZXInLFxuICAgICdhcmlhLXZhbHVlbm93JzogMCxcbiAgICAnYXJpYS12YWx1ZW1pbic6IDAsXG4gICAgJ2FyaWEtdmFsdWVtYXgnOiAxMDAsXG4gICAgdGFiSW5kZXg6IDBcbiAgfSwgcHJvcHMpO1xuXG4gIHJldHVybiB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsIHR5cGUsIHByb3BzKTtcbn07XG5cbnZqcy5TbGlkZXIucHJvdG90eXBlLm9uTW91c2VEb3duID0gZnVuY3Rpb24oZXZlbnQpe1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB2anMuYmxvY2tUZXh0U2VsZWN0aW9uKCk7XG4gIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1zbGlkaW5nJyk7XG5cbiAgdmpzLm9uKGRvY3VtZW50LCAnbW91c2Vtb3ZlJywgdGhpcy5ib3VuZEV2ZW50cy5tb3ZlKTtcbiAgdmpzLm9uKGRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMuYm91bmRFdmVudHMuZW5kKTtcbiAgdmpzLm9uKGRvY3VtZW50LCAndG91Y2htb3ZlJywgdGhpcy5ib3VuZEV2ZW50cy5tb3ZlKTtcbiAgdmpzLm9uKGRvY3VtZW50LCAndG91Y2hlbmQnLCB0aGlzLmJvdW5kRXZlbnRzLmVuZCk7XG5cbiAgdGhpcy5vbk1vdXNlTW92ZShldmVudCk7XG59O1xuXG4vLyBUbyBiZSBvdmVycmlkZGVuIGJ5IGEgc3ViY2xhc3NcbnZqcy5TbGlkZXIucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24oKXt9O1xuXG52anMuU2xpZGVyLnByb3RvdHlwZS5vbk1vdXNlVXAgPSBmdW5jdGlvbigpIHtcbiAgdmpzLnVuYmxvY2tUZXh0U2VsZWN0aW9uKCk7XG4gIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1zbGlkaW5nJyk7XG5cbiAgdmpzLm9mZihkb2N1bWVudCwgJ21vdXNlbW92ZScsIHRoaXMuYm91bmRFdmVudHMubW92ZSwgZmFsc2UpO1xuICB2anMub2ZmKGRvY3VtZW50LCAnbW91c2V1cCcsIHRoaXMuYm91bmRFdmVudHMuZW5kLCBmYWxzZSk7XG4gIHZqcy5vZmYoZG9jdW1lbnQsICd0b3VjaG1vdmUnLCB0aGlzLmJvdW5kRXZlbnRzLm1vdmUsIGZhbHNlKTtcbiAgdmpzLm9mZihkb2N1bWVudCwgJ3RvdWNoZW5kJywgdGhpcy5ib3VuZEV2ZW50cy5lbmQsIGZhbHNlKTtcblxuICB0aGlzLnVwZGF0ZSgpO1xufTtcblxudmpzLlNsaWRlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgLy8gSW4gVm9sdW1lQmFyIGluaXQgd2UgaGF2ZSBhIHNldFRpbWVvdXQgZm9yIHVwZGF0ZSB0aGF0IHBvcHMgYW5kIHVwZGF0ZSB0byB0aGUgZW5kIG9mIHRoZVxuICAvLyBleGVjdXRpb24gc3RhY2suIFRoZSBwbGF5ZXIgaXMgZGVzdHJveWVkIGJlZm9yZSB0aGVuIHVwZGF0ZSB3aWxsIGNhdXNlIGFuIGVycm9yXG4gIGlmICghdGhpcy5lbF8pIHJldHVybjtcblxuICAvLyBJZiBzY3J1YmJpbmcsIHdlIGNvdWxkIHVzZSBhIGNhY2hlZCB2YWx1ZSB0byBtYWtlIHRoZSBoYW5kbGUga2VlcCB1cCB3aXRoIHRoZSB1c2VyJ3MgbW91c2UuXG4gIC8vIE9uIEhUTUw1IGJyb3dzZXJzIHNjcnViYmluZyBpcyByZWFsbHkgc21vb3RoLCBidXQgc29tZSBmbGFzaCBwbGF5ZXJzIGFyZSBzbG93LCBzbyB3ZSBtaWdodCB3YW50IHRvIHV0aWxpemUgdGhpcyBsYXRlci5cbiAgLy8gdmFyIHByb2dyZXNzID0gICh0aGlzLnBsYXllcl8uc2NydWJiaW5nKSA/IHRoaXMucGxheWVyXy5nZXRDYWNoZSgpLmN1cnJlbnRUaW1lIC8gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkgOiB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSAvIHRoaXMucGxheWVyXy5kdXJhdGlvbigpO1xuXG4gIHZhciBiYXJQcm9ncmVzcyxcbiAgICAgIHByb2dyZXNzID0gdGhpcy5nZXRQZXJjZW50KCksXG4gICAgICBoYW5kbGUgPSB0aGlzLmhhbmRsZSxcbiAgICAgIGJhciA9IHRoaXMuYmFyO1xuXG4gIC8vIFByb3RlY3QgYWdhaW5zdCBubyBkdXJhdGlvbiBhbmQgb3RoZXIgZGl2aXNpb24gaXNzdWVzXG4gIGlmIChpc05hTihwcm9ncmVzcykpIHsgcHJvZ3Jlc3MgPSAwOyB9XG5cbiAgYmFyUHJvZ3Jlc3MgPSBwcm9ncmVzcztcblxuICAvLyBJZiB0aGVyZSBpcyBhIGhhbmRsZSwgd2UgbmVlZCB0byBhY2NvdW50IGZvciB0aGUgaGFuZGxlIGluIG91ciBjYWxjdWxhdGlvbiBmb3IgcHJvZ3Jlc3MgYmFyXG4gIC8vIHNvIHRoYXQgaXQgZG9lc24ndCBmYWxsIHNob3J0IG9mIG9yIGV4dGVuZCBwYXN0IHRoZSBoYW5kbGUuXG4gIGlmIChoYW5kbGUpIHtcblxuICAgIHZhciBib3ggPSB0aGlzLmVsXyxcbiAgICAgICAgYm94V2lkdGggPSBib3gub2Zmc2V0V2lkdGgsXG5cbiAgICAgICAgaGFuZGxlV2lkdGggPSBoYW5kbGUuZWwoKS5vZmZzZXRXaWR0aCxcblxuICAgICAgICAvLyBUaGUgd2lkdGggb2YgdGhlIGhhbmRsZSBpbiBwZXJjZW50IG9mIHRoZSBjb250YWluaW5nIGJveFxuICAgICAgICAvLyBJbiBJRSwgd2lkdGhzIG1heSBub3QgYmUgcmVhZHkgeWV0IGNhdXNpbmcgTmFOXG4gICAgICAgIGhhbmRsZVBlcmNlbnQgPSAoaGFuZGxlV2lkdGgpID8gaGFuZGxlV2lkdGggLyBib3hXaWR0aCA6IDAsXG5cbiAgICAgICAgLy8gR2V0IHRoZSBhZGp1c3RlZCBzaXplIG9mIHRoZSBib3gsIGNvbnNpZGVyaW5nIHRoYXQgdGhlIGhhbmRsZSdzIGNlbnRlciBuZXZlciB0b3VjaGVzIHRoZSBsZWZ0IG9yIHJpZ2h0IHNpZGUuXG4gICAgICAgIC8vIFRoZXJlIGlzIGEgbWFyZ2luIG9mIGhhbGYgdGhlIGhhbmRsZSdzIHdpZHRoIG9uIGJvdGggc2lkZXMuXG4gICAgICAgIGJveEFkanVzdGVkUGVyY2VudCA9IDEgLSBoYW5kbGVQZXJjZW50LFxuXG4gICAgICAgIC8vIEFkanVzdCB0aGUgcHJvZ3Jlc3MgdGhhdCB3ZSdsbCB1c2UgdG8gc2V0IHdpZHRocyB0byB0aGUgbmV3IGFkanVzdGVkIGJveCB3aWR0aFxuICAgICAgICBhZGp1c3RlZFByb2dyZXNzID0gcHJvZ3Jlc3MgKiBib3hBZGp1c3RlZFBlcmNlbnQ7XG5cbiAgICAvLyBUaGUgYmFyIGRvZXMgcmVhY2ggdGhlIGxlZnQgc2lkZSwgc28gd2UgbmVlZCB0byBhY2NvdW50IGZvciB0aGlzIGluIHRoZSBiYXIncyB3aWR0aFxuICAgIGJhclByb2dyZXNzID0gYWRqdXN0ZWRQcm9ncmVzcyArIChoYW5kbGVQZXJjZW50IC8gMik7XG5cbiAgICAvLyBNb3ZlIHRoZSBoYW5kbGUgZnJvbSB0aGUgbGVmdCBiYXNlZCBvbiB0aGUgYWRqZWN0ZWQgcHJvZ3Jlc3NcbiAgICBoYW5kbGUuZWwoKS5zdHlsZS5sZWZ0ID0gdmpzLnJvdW5kKGFkanVzdGVkUHJvZ3Jlc3MgKiAxMDAsIDIpICsgJyUnO1xuICB9XG5cbiAgLy8gU2V0IHRoZSBuZXcgYmFyIHdpZHRoXG4gIGlmIChiYXIpIHtcbiAgICBiYXIuZWwoKS5zdHlsZS53aWR0aCA9IHZqcy5yb3VuZChiYXJQcm9ncmVzcyAqIDEwMCwgMikgKyAnJSc7XG4gIH1cbn07XG5cbnZqcy5TbGlkZXIucHJvdG90eXBlLmNhbGN1bGF0ZURpc3RhbmNlID0gZnVuY3Rpb24oZXZlbnQpe1xuICB2YXIgZWwsIGJveCwgYm94WCwgYm94WSwgYm94VywgYm94SCwgaGFuZGxlLCBwYWdlWCwgcGFnZVk7XG5cbiAgZWwgPSB0aGlzLmVsXztcbiAgYm94ID0gdmpzLmZpbmRQb3NpdGlvbihlbCk7XG4gIGJveFcgPSBib3hIID0gZWwub2Zmc2V0V2lkdGg7XG4gIGhhbmRsZSA9IHRoaXMuaGFuZGxlO1xuXG4gIGlmICh0aGlzLm9wdGlvbnMoKVsndmVydGljYWwnXSkge1xuICAgIGJveFkgPSBib3gudG9wO1xuXG4gICAgaWYgKGV2ZW50LmNoYW5nZWRUb3VjaGVzKSB7XG4gICAgICBwYWdlWSA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWdlWSA9IGV2ZW50LnBhZ2VZO1xuICAgIH1cblxuICAgIGlmIChoYW5kbGUpIHtcbiAgICAgIHZhciBoYW5kbGVIID0gaGFuZGxlLmVsKCkub2Zmc2V0SGVpZ2h0O1xuICAgICAgLy8gQWRqdXN0ZWQgWCBhbmQgV2lkdGgsIHNvIGhhbmRsZSBkb2Vzbid0IGdvIG91dHNpZGUgdGhlIGJhclxuICAgICAgYm94WSA9IGJveFkgKyAoaGFuZGxlSCAvIDIpO1xuICAgICAgYm94SCA9IGJveEggLSBoYW5kbGVIO1xuICAgIH1cblxuICAgIC8vIFBlcmNlbnQgdGhhdCB0aGUgY2xpY2sgaXMgdGhyb3VnaCB0aGUgYWRqdXN0ZWQgYXJlYVxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCAoKGJveFkgLSBwYWdlWSkgKyBib3hIKSAvIGJveEgpKTtcblxuICB9IGVsc2Uge1xuICAgIGJveFggPSBib3gubGVmdDtcblxuICAgIGlmIChldmVudC5jaGFuZ2VkVG91Y2hlcykge1xuICAgICAgcGFnZVggPSBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFnZVggPSBldmVudC5wYWdlWDtcbiAgICB9XG5cbiAgICBpZiAoaGFuZGxlKSB7XG4gICAgICB2YXIgaGFuZGxlVyA9IGhhbmRsZS5lbCgpLm9mZnNldFdpZHRoO1xuXG4gICAgICAvLyBBZGp1c3RlZCBYIGFuZCBXaWR0aCwgc28gaGFuZGxlIGRvZXNuJ3QgZ28gb3V0c2lkZSB0aGUgYmFyXG4gICAgICBib3hYID0gYm94WCArIChoYW5kbGVXIC8gMik7XG4gICAgICBib3hXID0gYm94VyAtIGhhbmRsZVc7XG4gICAgfVxuXG4gICAgLy8gUGVyY2VudCB0aGF0IHRoZSBjbGljayBpcyB0aHJvdWdoIHRoZSBhZGp1c3RlZCBhcmVhXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIChwYWdlWCAtIGJveFgpIC8gYm94VykpO1xuICB9XG59O1xuXG52anMuU2xpZGVyLnByb3RvdHlwZS5vbkZvY3VzID0gZnVuY3Rpb24oKXtcbiAgdmpzLm9uKGRvY3VtZW50LCAna2V5dXAnLCB2anMuYmluZCh0aGlzLCB0aGlzLm9uS2V5UHJlc3MpKTtcbn07XG5cbnZqcy5TbGlkZXIucHJvdG90eXBlLm9uS2V5UHJlc3MgPSBmdW5jdGlvbihldmVudCl7XG4gIGlmIChldmVudC53aGljaCA9PSAzNyB8fCBldmVudC53aGljaCA9PSA0MCkgeyAvLyBMZWZ0IGFuZCBEb3duIEFycm93c1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy5zdGVwQmFjaygpO1xuICB9IGVsc2UgaWYgKGV2ZW50LndoaWNoID09IDM4IHx8IGV2ZW50LndoaWNoID09IDM5KSB7IC8vIFVwIGFuZCBSaWdodCBBcnJvd3NcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuc3RlcEZvcndhcmQoKTtcbiAgfVxufTtcblxudmpzLlNsaWRlci5wcm90b3R5cGUub25CbHVyID0gZnVuY3Rpb24oKXtcbiAgdmpzLm9mZihkb2N1bWVudCwgJ2tleXVwJywgdmpzLmJpbmQodGhpcywgdGhpcy5vbktleVByZXNzKSk7XG59O1xuXG4vKipcbiAqIExpc3RlbmVyIGZvciBjbGljayBldmVudHMgb24gc2xpZGVyLCB1c2VkIHRvIHByZXZlbnQgY2xpY2tzXG4gKiAgIGZyb20gYnViYmxpbmcgdXAgdG8gcGFyZW50IGVsZW1lbnRzIGxpa2UgYnV0dG9uIG1lbnVzLlxuICogQHBhcmFtICB7T2JqZWN0fSBldmVudCBFdmVudCBvYmplY3RcbiAqL1xudmpzLlNsaWRlci5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG59O1xuXG4vKipcbiAqIFNlZWtCYXIgQmVoYXZpb3IgaW5jbHVkZXMgcGxheSBwcm9ncmVzcyBiYXIsIGFuZCBzZWVrIGhhbmRsZVxuICogTmVlZGVkIHNvIGl0IGNhbiBkZXRlcm1pbmUgc2VlayBwb3NpdGlvbiBiYXNlZCBvbiBoYW5kbGUgcG9zaXRpb24vc2l6ZVxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuU2xpZGVySGFuZGxlID0gdmpzLkNvbXBvbmVudC5leHRlbmQoKTtcblxuLyoqXG4gKiBEZWZhdWx0IHZhbHVlIG9mIHRoZSBzbGlkZXJcbiAqXG4gKiBAdHlwZSB7TnVtYmVyfVxuICogQHByaXZhdGVcbiAqL1xudmpzLlNsaWRlckhhbmRsZS5wcm90b3R5cGUuZGVmYXVsdFZhbHVlID0gMDtcblxuLyoqIEBpbmhlcml0RG9jICovXG52anMuU2xpZGVySGFuZGxlLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKHR5cGUsIHByb3BzKSB7XG4gIHByb3BzID0gcHJvcHMgfHwge307XG4gIC8vIEFkZCB0aGUgc2xpZGVyIGVsZW1lbnQgY2xhc3MgdG8gYWxsIHN1YiBjbGFzc2VzXG4gIHByb3BzLmNsYXNzTmFtZSA9IHByb3BzLmNsYXNzTmFtZSArICcgdmpzLXNsaWRlci1oYW5kbGUnO1xuICBwcm9wcyA9IHZqcy5vYmoubWVyZ2Uoe1xuICAgIGlubmVySFRNTDogJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPicrdGhpcy5kZWZhdWx0VmFsdWUrJzwvc3Bhbj4nXG4gIH0sIHByb3BzKTtcblxuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2JywgcHJvcHMpO1xufTtcbi8qIE1lbnVcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vKipcbiAqIFRoZSBNZW51IGNvbXBvbmVudCBpcyB1c2VkIHRvIGJ1aWxkIHBvcCB1cCBtZW51cywgaW5jbHVkaW5nIHN1YnRpdGxlIGFuZFxuICogY2FwdGlvbnMgc2VsZWN0aW9uIG1lbnVzLlxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTWVudSA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKCk7XG5cbi8qKlxuICogQWRkIGEgbWVudSBpdGVtIHRvIHRoZSBtZW51XG4gKiBAcGFyYW0ge09iamVjdHxTdHJpbmd9IGNvbXBvbmVudCBDb21wb25lbnQgb3IgY29tcG9uZW50IHR5cGUgdG8gYWRkXG4gKi9cbnZqcy5NZW51LnByb3RvdHlwZS5hZGRJdGVtID0gZnVuY3Rpb24oY29tcG9uZW50KXtcbiAgdGhpcy5hZGRDaGlsZChjb21wb25lbnQpO1xuICBjb21wb25lbnQub24oJ2NsaWNrJywgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICB0aGlzLnVubG9ja1Nob3dpbmcoKTtcbiAgfSkpO1xufTtcblxuLyoqIEBpbmhlcml0RG9jICovXG52anMuTWVudS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgY29udGVudEVsVHlwZSA9IHRoaXMub3B0aW9ucygpLmNvbnRlbnRFbFR5cGUgfHwgJ3VsJztcbiAgdGhpcy5jb250ZW50RWxfID0gdmpzLmNyZWF0ZUVsKGNvbnRlbnRFbFR5cGUsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtbWVudS1jb250ZW50J1xuICB9KTtcbiAgdmFyIGVsID0gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGFwcGVuZDogdGhpcy5jb250ZW50RWxfLFxuICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51J1xuICB9KTtcbiAgZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKTtcblxuICAvLyBQcmV2ZW50IGNsaWNrcyBmcm9tIGJ1YmJsaW5nIHVwLiBOZWVkZWQgZm9yIE1lbnUgQnV0dG9ucyxcbiAgLy8gd2hlcmUgYSBjbGljayBvbiB0aGUgcGFyZW50IGlzIHNpZ25pZmljYW50XG4gIHZqcy5vbihlbCwgJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gIH0pO1xuXG4gIHJldHVybiBlbDtcbn07XG5cbi8qKlxuICogVGhlIGNvbXBvbmVudCBmb3IgYSBtZW51IGl0ZW0uIGA8bGk+YFxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTWVudUl0ZW0gPSB2anMuQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgICB0aGlzLnNlbGVjdGVkKG9wdGlvbnNbJ3NlbGVjdGVkJ10pO1xuICB9XG59KTtcblxuLyoqIEBpbmhlcml0RG9jICovXG52anMuTWVudUl0ZW0ucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24odHlwZSwgcHJvcHMpe1xuICByZXR1cm4gdmpzLkJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnbGknLCB2anMub2JqLm1lcmdlKHtcbiAgICBjbGFzc05hbWU6ICd2anMtbWVudS1pdGVtJyxcbiAgICBpbm5lckhUTUw6IHRoaXMub3B0aW9uc19bJ2xhYmVsJ11cbiAgfSwgcHJvcHMpKTtcbn07XG5cbi8qKlxuICogSGFuZGxlIGEgY2xpY2sgb24gdGhlIG1lbnUgaXRlbSwgYW5kIHNldCBpdCB0byBzZWxlY3RlZFxuICovXG52anMuTWVudUl0ZW0ucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICB0aGlzLnNlbGVjdGVkKHRydWUpO1xufTtcblxuLyoqXG4gKiBTZXQgdGhpcyBtZW51IGl0ZW0gYXMgc2VsZWN0ZWQgb3Igbm90XG4gKiBAcGFyYW0gIHtCb29sZWFufSBzZWxlY3RlZFxuICovXG52anMuTWVudUl0ZW0ucHJvdG90eXBlLnNlbGVjdGVkID0gZnVuY3Rpb24oc2VsZWN0ZWQpe1xuICBpZiAoc2VsZWN0ZWQpIHtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtc2VsZWN0ZWQnKTtcbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnLHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1zZWxlY3RlZCcpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1zZWxlY3RlZCcsZmFsc2UpO1xuICB9XG59O1xuXG5cbi8qKlxuICogQSBidXR0b24gY2xhc3Mgd2l0aCBhIHBvcHVwIG1lbnVcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLk1lbnVCdXR0b24gPSB2anMuQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHRoaXMubWVudSA9IHRoaXMuY3JlYXRlTWVudSgpO1xuXG4gICAgLy8gQWRkIGxpc3QgdG8gZWxlbWVudFxuICAgIHRoaXMuYWRkQ2hpbGQodGhpcy5tZW51KTtcblxuICAgIC8vIEF1dG9tYXRpY2FsbHkgaGlkZSBlbXB0eSBtZW51IGJ1dHRvbnNcbiAgICBpZiAodGhpcy5pdGVtcyAmJiB0aGlzLml0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5vbigna2V5dXAnLCB0aGlzLm9uS2V5UHJlc3MpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1oYXNwb3B1cCcsIHRydWUpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgncm9sZScsICdidXR0b24nKTtcbiAgfVxufSk7XG5cbi8qKlxuICogVHJhY2sgdGhlIHN0YXRlIG9mIHRoZSBtZW51IGJ1dHRvblxuICogQHR5cGUge0Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUuYnV0dG9uUHJlc3NlZF8gPSBmYWxzZTtcblxudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLmNyZWF0ZU1lbnUgPSBmdW5jdGlvbigpe1xuICB2YXIgbWVudSA9IG5ldyB2anMuTWVudSh0aGlzLnBsYXllcl8pO1xuXG4gIC8vIEFkZCBhIHRpdGxlIGxpc3QgaXRlbSB0byB0aGUgdG9wXG4gIGlmICh0aGlzLm9wdGlvbnMoKS50aXRsZSkge1xuICAgIG1lbnUuY29udGVudEVsKCkuYXBwZW5kQ2hpbGQodmpzLmNyZWF0ZUVsKCdsaScsIHtcbiAgICAgIGNsYXNzTmFtZTogJ3Zqcy1tZW51LXRpdGxlJyxcbiAgICAgIGlubmVySFRNTDogdmpzLmNhcGl0YWxpemUodGhpcy5vcHRpb25zKCkudGl0bGUpLFxuICAgICAgdGFiaW5kZXg6IC0xXG4gICAgfSkpO1xuICB9XG5cbiAgdGhpcy5pdGVtcyA9IHRoaXNbJ2NyZWF0ZUl0ZW1zJ10oKTtcblxuICBpZiAodGhpcy5pdGVtcykge1xuICAgIC8vIEFkZCBtZW51IGl0ZW1zIHRvIHRoZSBtZW51XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBtZW51LmFkZEl0ZW0odGhpcy5pdGVtc1tpXSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG1lbnU7XG59O1xuXG4vKipcbiAqIENyZWF0ZSB0aGUgbGlzdCBvZiBtZW51IGl0ZW1zLiBTcGVjaWZpYyB0byBlYWNoIHN1YmNsYXNzLlxuICovXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlSXRlbXMgPSBmdW5jdGlvbigpe307XG5cbi8qKiBAaW5oZXJpdERvYyAqL1xudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLmJ1aWxkQ1NTQ2xhc3MgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5jbGFzc05hbWUgKyAnIHZqcy1tZW51LWJ1dHRvbiAnICsgdmpzLkJ1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xufTtcblxuLy8gRm9jdXMgLSBBZGQga2V5Ym9hcmQgZnVuY3Rpb25hbGl0eSB0byBlbGVtZW50XG4vLyBUaGlzIGZ1bmN0aW9uIGlzIG5vdCBuZWVkZWQgYW55bW9yZS4gSW5zdGVhZCwgdGhlIGtleWJvYXJkIGZ1bmN0aW9uYWxpdHkgaXMgaGFuZGxlZCBieVxuLy8gdHJlYXRpbmcgdGhlIGJ1dHRvbiBhcyB0cmlnZ2VyaW5nIGEgc3VibWVudS4gV2hlbiB0aGUgYnV0dG9uIGlzIHByZXNzZWQsIHRoZSBzdWJtZW51XG4vLyBhcHBlYXJzLiBQcmVzc2luZyB0aGUgYnV0dG9uIGFnYWluIG1ha2VzIHRoZSBzdWJtZW51IGRpc2FwcGVhci5cbnZqcy5NZW51QnV0dG9uLnByb3RvdHlwZS5vbkZvY3VzID0gZnVuY3Rpb24oKXt9O1xuLy8gQ2FuJ3QgdHVybiBvZmYgbGlzdCBkaXNwbGF5IHRoYXQgd2UgdHVybmVkIG9uIHdpdGggZm9jdXMsIGJlY2F1c2UgbGlzdCB3b3VsZCBnbyBhd2F5LlxudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLm9uQmx1ciA9IGZ1bmN0aW9uKCl7fTtcblxudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICAvLyBXaGVuIHlvdSBjbGljayB0aGUgYnV0dG9uIGl0IGFkZHMgZm9jdXMsIHdoaWNoIHdpbGwgc2hvdyB0aGUgbWVudSBpbmRlZmluaXRlbHkuXG4gIC8vIFNvIHdlJ2xsIHJlbW92ZSBmb2N1cyB3aGVuIHRoZSBtb3VzZSBsZWF2ZXMgdGhlIGJ1dHRvbi5cbiAgLy8gRm9jdXMgaXMgbmVlZGVkIGZvciB0YWIgbmF2aWdhdGlvbi5cbiAgdGhpcy5vbmUoJ21vdXNlb3V0JywgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICB0aGlzLm1lbnUudW5sb2NrU2hvd2luZygpO1xuICAgIHRoaXMuZWxfLmJsdXIoKTtcbiAgfSkpO1xuICBpZiAodGhpcy5idXR0b25QcmVzc2VkXyl7XG4gICAgdGhpcy51bnByZXNzQnV0dG9uKCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wcmVzc0J1dHRvbigpO1xuICB9XG59O1xuXG52anMuTWVudUJ1dHRvbi5wcm90b3R5cGUub25LZXlQcmVzcyA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAvLyBDaGVjayBmb3Igc3BhY2UgYmFyICgzMikgb3IgZW50ZXIgKDEzKSBrZXlzXG4gIGlmIChldmVudC53aGljaCA9PSAzMiB8fCBldmVudC53aGljaCA9PSAxMykge1xuICAgIGlmICh0aGlzLmJ1dHRvblByZXNzZWRfKXtcbiAgICAgIHRoaXMudW5wcmVzc0J1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnByZXNzQnV0dG9uKCk7XG4gICAgfVxuICAvLyBDaGVjayBmb3IgZXNjYXBlICgyNykga2V5XG4gIH0gZWxzZSBpZiAoZXZlbnQud2hpY2ggPT0gMjcpe1xuICAgIGlmICh0aGlzLmJ1dHRvblByZXNzZWRfKXtcbiAgICAgIHRoaXMudW5wcmVzc0J1dHRvbigpO1xuICAgIH1cbiAgfVxufTtcblxudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLnByZXNzQnV0dG9uID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5idXR0b25QcmVzc2VkXyA9IHRydWU7XG4gIHRoaXMubWVudS5sb2NrU2hvd2luZygpO1xuICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtcHJlc3NlZCcsIHRydWUpO1xuICBpZiAodGhpcy5pdGVtcyAmJiB0aGlzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICB0aGlzLml0ZW1zWzBdLmVsKCkuZm9jdXMoKTsgLy8gc2V0IHRoZSBmb2N1cyB0byB0aGUgdGl0bGUgb2YgdGhlIHN1Ym1lbnVcbiAgfVxufTtcblxudmpzLk1lbnVCdXR0b24ucHJvdG90eXBlLnVucHJlc3NCdXR0b24gPSBmdW5jdGlvbigpe1xuICB0aGlzLmJ1dHRvblByZXNzZWRfID0gZmFsc2U7XG4gIHRoaXMubWVudS51bmxvY2tTaG93aW5nKCk7XG4gIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1wcmVzc2VkJywgZmFsc2UpO1xufTtcblxuLyoqXG4gKiBDdXN0b20gTWVkaWFFcnJvciB0byBtaW1pYyB0aGUgSFRNTDUgTWVkaWFFcnJvclxuICogQHBhcmFtIHtOdW1iZXJ9IGNvZGUgVGhlIG1lZGlhIGVycm9yIGNvZGVcbiAqL1xudmpzLk1lZGlhRXJyb3IgPSBmdW5jdGlvbihjb2RlKXtcbiAgaWYgKHR5cGVvZiBjb2RlID09PSAnbnVtYmVyJykge1xuICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gZGVmYXVsdCBjb2RlIGlzIHplcm8sIHNvIHRoaXMgaXMgYSBjdXN0b20gZXJyb3JcbiAgICB0aGlzLm1lc3NhZ2UgPSBjb2RlO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBjb2RlID09PSAnb2JqZWN0JykgeyAvLyBvYmplY3RcbiAgICB2anMub2JqLm1lcmdlKHRoaXMsIGNvZGUpO1xuICB9XG5cbiAgaWYgKCF0aGlzLm1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSB2anMuTWVkaWFFcnJvci5kZWZhdWx0TWVzc2FnZXNbdGhpcy5jb2RlXSB8fCAnJztcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgZXJyb3IgY29kZSB0aGF0IHJlZmVycyB0d28gb25lIG9mIHRoZSBkZWZpbmVkXG4gKiBNZWRpYUVycm9yIHR5cGVzXG4gKiBAdHlwZSB7TnVtYmVyfVxuICovXG52anMuTWVkaWFFcnJvci5wcm90b3R5cGUuY29kZSA9IDA7XG5cbi8qKlxuICogQW4gb3B0aW9uYWwgbWVzc2FnZSB0byBiZSBzaG93biB3aXRoIHRoZSBlcnJvci5cbiAqIE1lc3NhZ2UgaXMgbm90IHBhcnQgb2YgdGhlIEhUTUw1IHZpZGVvIHNwZWNcbiAqIGJ1dCBhbGxvd3MgZm9yIG1vcmUgaW5mb3JtYXRpdmUgY3VzdG9tIGVycm9ycy5cbiAqIEB0eXBlIHtTdHJpbmd9XG4gKi9cbnZqcy5NZWRpYUVycm9yLnByb3RvdHlwZS5tZXNzYWdlID0gJyc7XG5cbi8qKlxuICogQW4gb3B0aW9uYWwgc3RhdHVzIGNvZGUgdGhhdCBjYW4gYmUgc2V0IGJ5IHBsdWdpbnNcbiAqIHRvIGFsbG93IGV2ZW4gbW9yZSBkZXRhaWwgYWJvdXQgdGhlIGVycm9yLlxuICogRm9yIGV4YW1wbGUgdGhlIEhMUyBwbHVnaW4gbWlnaHQgcHJvdmlkZSB0aGUgc3BlY2lmaWNcbiAqIEhUVFAgc3RhdHVzIGNvZGUgdGhhdCB3YXMgcmV0dXJuZWQgd2hlbiB0aGUgZXJyb3JcbiAqIG9jY3VycmVkLCB0aGVuIGFsbG93aW5nIGEgY3VzdG9tIGVycm9yIG92ZXJsYXlcbiAqIHRvIGRpc3BsYXkgbW9yZSBpbmZvcm1hdGlvbi5cbiAqIEB0eXBlIHtbdHlwZV19XG4gKi9cbnZqcy5NZWRpYUVycm9yLnByb3RvdHlwZS5zdGF0dXMgPSBudWxsO1xuXG52anMuTWVkaWFFcnJvci5lcnJvclR5cGVzID0gW1xuICAnTUVESUFfRVJSX0NVU1RPTScsICAgICAgICAgICAgLy8gPSAwXG4gICdNRURJQV9FUlJfQUJPUlRFRCcsICAgICAgICAgICAvLyA9IDFcbiAgJ01FRElBX0VSUl9ORVRXT1JLJywgICAgICAgICAgIC8vID0gMlxuICAnTUVESUFfRVJSX0RFQ09ERScsICAgICAgICAgICAgLy8gPSAzXG4gICdNRURJQV9FUlJfU1JDX05PVF9TVVBQT1JURUQnLCAvLyA9IDRcbiAgJ01FRElBX0VSUl9FTkNSWVBURUQnICAgICAgICAgIC8vID0gNVxuXTtcblxudmpzLk1lZGlhRXJyb3IuZGVmYXVsdE1lc3NhZ2VzID0ge1xuICAxOiAnWW91IGFib3J0ZWQgdGhlIHZpZGVvIHBsYXliYWNrJyxcbiAgMjogJ0EgbmV0d29yayBlcnJvciBjYXVzZWQgdGhlIHZpZGVvIGRvd25sb2FkIHRvIGZhaWwgcGFydC13YXkuJyxcbiAgMzogJ1RoZSB2aWRlbyBwbGF5YmFjayB3YXMgYWJvcnRlZCBkdWUgdG8gYSBjb3JydXB0aW9uIHByb2JsZW0gb3IgYmVjYXVzZSB0aGUgdmlkZW8gdXNlZCBmZWF0dXJlcyB5b3VyIGJyb3dzZXIgZGlkIG5vdCBzdXBwb3J0LicsXG4gIDQ6ICdUaGUgdmlkZW8gY291bGQgbm90IGJlIGxvYWRlZCwgZWl0aGVyIGJlY2F1c2UgdGhlIHNlcnZlciBvciBuZXR3b3JrIGZhaWxlZCBvciBiZWNhdXNlIHRoZSBmb3JtYXQgaXMgbm90IHN1cHBvcnRlZC4nLFxuICA1OiAnVGhlIHZpZGVvIGlzIGVuY3J5cHRlZCBhbmQgd2UgZG8gbm90IGhhdmUgdGhlIGtleXMgdG8gZGVjcnlwdCBpdC4nXG59O1xuXG4vLyBBZGQgdHlwZXMgYXMgcHJvcGVydGllcyBvbiBNZWRpYUVycm9yXG4vLyBlLmcuIE1lZGlhRXJyb3IuTUVESUFfRVJSX1NSQ19OT1RfU1VQUE9SVEVEID0gNDtcbmZvciAodmFyIGVyck51bSA9IDA7IGVyck51bSA8IHZqcy5NZWRpYUVycm9yLmVycm9yVHlwZXMubGVuZ3RoOyBlcnJOdW0rKykge1xuICB2anMuTWVkaWFFcnJvclt2anMuTWVkaWFFcnJvci5lcnJvclR5cGVzW2Vyck51bV1dID0gZXJyTnVtO1xuICAvLyB2YWx1ZXMgc2hvdWxkIGJlIGFjY2Vzc2libGUgb24gYm90aCB0aGUgY2xhc3MgYW5kIGluc3RhbmNlXG4gIHZqcy5NZWRpYUVycm9yLnByb3RvdHlwZVt2anMuTWVkaWFFcnJvci5lcnJvclR5cGVzW2Vyck51bV1dID0gZXJyTnVtO1xufVxuKGZ1bmN0aW9uKCl7XG4gIHZhciBhcGlNYXAsIHNwZWNBcGksIGJyb3dzZXJBcGksIGk7XG5cbiAgLyoqXG4gICAqIFN0b3JlIHRoZSBicm93c2VyLXNwZWNpZmMgbWV0aG9kcyBmb3IgdGhlIGZ1bGxzY3JlZW4gQVBJXG4gICAqIEB0eXBlIHtPYmplY3R8dW5kZWZpbmVkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdmpzLmJyb3dzZXIuZnVsbHNjcmVlbkFQSTtcblxuICAvLyBicm93c2VyIEFQSSBtZXRob2RzXG4gIC8vIG1hcCBhcHByb2FjaCBmcm9tIFNjcmVlbmZ1bC5qcyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9zaW5kcmVzb3JodXMvc2NyZWVuZnVsbC5qc1xuICBhcGlNYXAgPSBbXG4gICAgLy8gU3BlYzogaHR0cHM6Ly9kdmNzLnczLm9yZy9oZy9mdWxsc2NyZWVuL3Jhdy1maWxlL3RpcC9PdmVydmlldy5odG1sXG4gICAgW1xuICAgICAgJ3JlcXVlc3RGdWxsc2NyZWVuJyxcbiAgICAgICdleGl0RnVsbHNjcmVlbicsXG4gICAgICAnZnVsbHNjcmVlbkVsZW1lbnQnLFxuICAgICAgJ2Z1bGxzY3JlZW5FbmFibGVkJyxcbiAgICAgICdmdWxsc2NyZWVuY2hhbmdlJyxcbiAgICAgICdmdWxsc2NyZWVuZXJyb3InXG4gICAgXSxcbiAgICAvLyBXZWJLaXRcbiAgICBbXG4gICAgICAnd2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4nLFxuICAgICAgJ3dlYmtpdEV4aXRGdWxsc2NyZWVuJyxcbiAgICAgICd3ZWJraXRGdWxsc2NyZWVuRWxlbWVudCcsXG4gICAgICAnd2Via2l0RnVsbHNjcmVlbkVuYWJsZWQnLFxuICAgICAgJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuICAgICAgJ3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcbiAgICBdLFxuICAgIC8vIE9sZCBXZWJLaXQgKFNhZmFyaSA1LjEpXG4gICAgW1xuICAgICAgJ3dlYmtpdFJlcXVlc3RGdWxsU2NyZWVuJyxcbiAgICAgICd3ZWJraXRDYW5jZWxGdWxsU2NyZWVuJyxcbiAgICAgICd3ZWJraXRDdXJyZW50RnVsbFNjcmVlbkVsZW1lbnQnLFxuICAgICAgJ3dlYmtpdENhbmNlbEZ1bGxTY3JlZW4nLFxuICAgICAgJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnLFxuICAgICAgJ3dlYmtpdGZ1bGxzY3JlZW5lcnJvcidcbiAgICBdLFxuICAgIC8vIE1vemlsbGFcbiAgICBbXG4gICAgICAnbW96UmVxdWVzdEZ1bGxTY3JlZW4nLFxuICAgICAgJ21vekNhbmNlbEZ1bGxTY3JlZW4nLFxuICAgICAgJ21vekZ1bGxTY3JlZW5FbGVtZW50JyxcbiAgICAgICdtb3pGdWxsU2NyZWVuRW5hYmxlZCcsXG4gICAgICAnbW96ZnVsbHNjcmVlbmNoYW5nZScsXG4gICAgICAnbW96ZnVsbHNjcmVlbmVycm9yJ1xuICAgIF0sXG4gICAgLy8gTWljcm9zb2Z0XG4gICAgW1xuICAgICAgJ21zUmVxdWVzdEZ1bGxzY3JlZW4nLFxuICAgICAgJ21zRXhpdEZ1bGxzY3JlZW4nLFxuICAgICAgJ21zRnVsbHNjcmVlbkVsZW1lbnQnLFxuICAgICAgJ21zRnVsbHNjcmVlbkVuYWJsZWQnLFxuICAgICAgJ01TRnVsbHNjcmVlbkNoYW5nZScsXG4gICAgICAnTVNGdWxsc2NyZWVuRXJyb3InXG4gICAgXVxuICBdO1xuXG4gIHNwZWNBcGkgPSBhcGlNYXBbMF07XG5cbiAgLy8gZGV0ZXJtaW5lIHRoZSBzdXBwb3J0ZWQgc2V0IG9mIGZ1bmN0aW9uc1xuICBmb3IgKGk9MDsgaTxhcGlNYXAubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBjaGVjayBmb3IgZXhpdEZ1bGxzY3JlZW4gZnVuY3Rpb25cbiAgICBpZiAoYXBpTWFwW2ldWzFdIGluIGRvY3VtZW50KSB7XG4gICAgICBicm93c2VyQXBpID0gYXBpTWFwW2ldO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLy8gbWFwIHRoZSBicm93c2VyIEFQSSBuYW1lcyB0byB0aGUgc3BlYyBBUEkgbmFtZXNcbiAgLy8gb3IgbGVhdmUgdmpzLmJyb3dzZXIuZnVsbHNjcmVlbkFQSSB1bmRlZmluZWRcbiAgaWYgKGJyb3dzZXJBcGkpIHtcbiAgICB2anMuYnJvd3Nlci5mdWxsc2NyZWVuQVBJID0ge307XG5cbiAgICBmb3IgKGk9MDsgaTxicm93c2VyQXBpLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2anMuYnJvd3Nlci5mdWxsc2NyZWVuQVBJW3NwZWNBcGlbaV1dID0gYnJvd3NlckFwaVtpXTtcbiAgICB9XG4gIH1cblxufSkoKTtcbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIGB2anMuUGxheWVyYCBjbGFzcyBpcyBjcmVhdGVkIHdoZW4gYW55IG9mIHRoZSBWaWRlby5qcyBzZXR1cCBtZXRob2RzIGFyZSB1c2VkIHRvIGluaXRpYWxpemUgYSB2aWRlby5cbiAqXG4gKiBgYGBqc1xuICogdmFyIG15UGxheWVyID0gdmlkZW9qcygnZXhhbXBsZV92aWRlb18xJyk7XG4gKiBgYGBcbiAqXG4gKiBJbiB0aGUgZm9sbG93aW5nIGV4YW1wbGUsIHRoZSBgZGF0YS1zZXR1cGAgYXR0cmlidXRlIHRlbGxzIHRoZSBWaWRlby5qcyBsaWJyYXJ5IHRvIGNyZWF0ZSBhIHBsYXllciBpbnN0YW5jZSB3aGVuIHRoZSBsaWJyYXJ5IGlzIHJlYWR5LlxuICpcbiAqIGBgYGh0bWxcbiAqIDx2aWRlbyBpZD1cImV4YW1wbGVfdmlkZW9fMVwiIGRhdGEtc2V0dXA9J3t9JyBjb250cm9scz5cbiAqICAgPHNvdXJjZSBzcmM9XCJteS1zb3VyY2UubXA0XCIgdHlwZT1cInZpZGVvL21wNFwiPlxuICogPC92aWRlbz5cbiAqIGBgYFxuICpcbiAqIEFmdGVyIGFuIGluc3RhbmNlIGhhcyBiZWVuIGNyZWF0ZWQgaXQgY2FuIGJlIGFjY2Vzc2VkIGdsb2JhbGx5IHVzaW5nIGBWaWRlbygnZXhhbXBsZV92aWRlb18xJylgLlxuICpcbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgdmpzLkNvbXBvbmVudFxuICovXG52anMuUGxheWVyID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuXG4gIC8qKlxuICAgKiBwbGF5ZXIncyBjb25zdHJ1Y3RvciBmdW5jdGlvblxuICAgKlxuICAgKiBAY29uc3RydWN0c1xuICAgKiBAbWV0aG9kIGluaXRcbiAgICogQHBhcmFtIHtFbGVtZW50fSB0YWcgICAgICAgIFRoZSBvcmlnaW5hbCB2aWRlbyB0YWcgdXNlZCBmb3IgY29uZmlndXJpbmcgb3B0aW9uc1xuICAgKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgICAgUGxheWVyIG9wdGlvbnNcbiAgICogQHBhcmFtIHtGdW5jdGlvbj19IHJlYWR5ICAgIFJlYWR5IGNhbGxiYWNrIGZ1bmN0aW9uXG4gICAqL1xuICBpbml0OiBmdW5jdGlvbih0YWcsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICB0aGlzLnRhZyA9IHRhZzsgLy8gU3RvcmUgdGhlIG9yaWdpbmFsIHRhZyB1c2VkIHRvIHNldCBvcHRpb25zXG5cbiAgICAvLyBNYWtlIHN1cmUgdGFnIElEIGV4aXN0c1xuICAgIHRhZy5pZCA9IHRhZy5pZCB8fCAndmpzX3ZpZGVvXycgKyB2anMuZ3VpZCsrO1xuXG4gICAgLy8gU3RvcmUgdGhlIHRhZyBhdHRyaWJ1dGVzIHVzZWQgdG8gcmVzdG9yZSBodG1sNSBlbGVtZW50XG4gICAgdGhpcy50YWdBdHRyaWJ1dGVzID0gdGFnICYmIHZqcy5nZXRFbGVtZW50QXR0cmlidXRlcyh0YWcpO1xuXG4gICAgLy8gU2V0IE9wdGlvbnNcbiAgICAvLyBUaGUgb3B0aW9ucyBhcmd1bWVudCBvdmVycmlkZXMgb3B0aW9ucyBzZXQgaW4gdGhlIHZpZGVvIHRhZ1xuICAgIC8vIHdoaWNoIG92ZXJyaWRlcyBnbG9iYWxseSBzZXQgb3B0aW9ucy5cbiAgICAvLyBUaGlzIGxhdHRlciBwYXJ0IGNvaW5jaWRlcyB3aXRoIHRoZSBsb2FkIG9yZGVyXG4gICAgLy8gKHRhZyBtdXN0IGV4aXN0IGJlZm9yZSBQbGF5ZXIpXG4gICAgb3B0aW9ucyA9IHZqcy5vYmoubWVyZ2UodGhpcy5nZXRUYWdTZXR0aW5ncyh0YWcpLCBvcHRpb25zKTtcblxuICAgIC8vIFVwZGF0ZSBDdXJyZW50IExhbmd1YWdlXG4gICAgdGhpcy5sYW5ndWFnZV8gPSBvcHRpb25zWydsYW5ndWFnZSddIHx8IHZqcy5vcHRpb25zWydsYW5ndWFnZSddO1xuXG4gICAgLy8gVXBkYXRlIFN1cHBvcnRlZCBMYW5ndWFnZXNcbiAgICB0aGlzLmxhbmd1YWdlc18gPSBvcHRpb25zWydsYW5ndWFnZXMnXSB8fCB2anMub3B0aW9uc1snbGFuZ3VhZ2VzJ107XG5cbiAgICAvLyBDYWNoZSBmb3IgdmlkZW8gcHJvcGVydHkgdmFsdWVzLlxuICAgIHRoaXMuY2FjaGVfID0ge307XG5cbiAgICAvLyBTZXQgcG9zdGVyXG4gICAgdGhpcy5wb3N0ZXJfID0gb3B0aW9uc1sncG9zdGVyJ107XG4gICAgLy8gU2V0IGNvbnRyb2xzXG4gICAgdGhpcy5jb250cm9sc18gPSBvcHRpb25zWydjb250cm9scyddO1xuICAgIC8vIE9yaWdpbmFsIHRhZyBzZXR0aW5ncyBzdG9yZWQgaW4gb3B0aW9uc1xuICAgIC8vIG5vdyByZW1vdmUgaW1tZWRpYXRlbHkgc28gbmF0aXZlIGNvbnRyb2xzIGRvbid0IGZsYXNoLlxuICAgIC8vIE1heSBiZSB0dXJuZWQgYmFjayBvbiBieSBIVE1MNSB0ZWNoIGlmIG5hdGl2ZUNvbnRyb2xzRm9yVG91Y2ggaXMgdHJ1ZVxuICAgIHRhZy5jb250cm9scyA9IGZhbHNlO1xuXG4gICAgLy8gd2UgZG9uJ3Qgd2FudCB0aGUgcGxheWVyIHRvIHJlcG9ydCB0b3VjaCBhY3Rpdml0eSBvbiBpdHNlbGZcbiAgICAvLyBzZWUgZW5hYmxlVG91Y2hBY3Rpdml0eSBpbiBDb21wb25lbnRcbiAgICBvcHRpb25zLnJlcG9ydFRvdWNoQWN0aXZpdHkgPSBmYWxzZTtcblxuICAgIC8vIFJ1biBiYXNlIGNvbXBvbmVudCBpbml0aWFsaXppbmcgd2l0aCBuZXcgb3B0aW9ucy5cbiAgICAvLyBCdWlsZHMgdGhlIGVsZW1lbnQgdGhyb3VnaCBjcmVhdGVFbCgpXG4gICAgLy8gSW5pdHMgYW5kIGVtYmVkcyBhbnkgY2hpbGQgY29tcG9uZW50cyBpbiBvcHRzXG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHRoaXMsIG9wdGlvbnMsIHJlYWR5KTtcblxuICAgIC8vIFVwZGF0ZSBjb250cm9scyBjbGFzc05hbWUuIENhbid0IGRvIHRoaXMgd2hlbiB0aGUgY29udHJvbHMgYXJlIGluaXRpYWxseVxuICAgIC8vIHNldCBiZWNhdXNlIHRoZSBlbGVtZW50IGRvZXNuJ3QgZXhpc3QgeWV0LlxuICAgIGlmICh0aGlzLmNvbnRyb2xzKCkpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1lbmFibGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1kaXNhYmxlZCcpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IE1ha2UgdGhpcyBzbWFydGVyLiBUb2dnbGUgdXNlciBzdGF0ZSBiZXR3ZWVuIHRvdWNoaW5nL21vdXNpbmdcbiAgICAvLyB1c2luZyBldmVudHMsIHNpbmNlIGRldmljZXMgY2FuIGhhdmUgYm90aCB0b3VjaCBhbmQgbW91c2UgZXZlbnRzLlxuICAgIC8vIGlmICh2anMuVE9VQ0hfRU5BQkxFRCkge1xuICAgIC8vICAgdGhpcy5hZGRDbGFzcygndmpzLXRvdWNoLWVuYWJsZWQnKTtcbiAgICAvLyB9XG5cbiAgICAvLyBNYWtlIHBsYXllciBlYXNpbHkgZmluZGFibGUgYnkgSURcbiAgICB2anMucGxheWVyc1t0aGlzLmlkX10gPSB0aGlzO1xuXG4gICAgaWYgKG9wdGlvbnNbJ3BsdWdpbnMnXSkge1xuICAgICAgdmpzLm9iai5lYWNoKG9wdGlvbnNbJ3BsdWdpbnMnXSwgZnVuY3Rpb24oa2V5LCB2YWwpe1xuICAgICAgICB0aGlzW2tleV0odmFsKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH1cblxuICAgIHRoaXMubGlzdGVuRm9yVXNlckFjdGl2aXR5KCk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFRoZSBwbGF5ZXJzJ3Mgc3RvcmVkIGxhbmd1YWdlIGNvZGVcbiAqXG4gKiBAdHlwZSB7U3RyaW5nfVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUubGFuZ3VhZ2VfO1xuXG4vKipcbiAqIFRoZSBwbGF5ZXIncyBsYW5ndWFnZSBjb2RlXG4gKiBAcGFyYW0gIHtTdHJpbmd9IGxhbmd1YWdlQ29kZSAgVGhlIGxvY2FsZSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gICAgICAgICAgICAgVGhlIGxvY2FsZSBzdHJpbmcgd2hlbiBnZXR0aW5nXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSAgICAgICAgIHNlbGYsIHdoZW4gc2V0dGluZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5sYW5ndWFnZSA9IGZ1bmN0aW9uIChsYW5ndWFnZUNvZGUpIHtcbiAgaWYgKGxhbmd1YWdlQ29kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXMubGFuZ3VhZ2VfO1xuICB9XG5cbiAgdGhpcy5sYW5ndWFnZV8gPSBsYW5ndWFnZUNvZGU7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBUaGUgcGxheWVycydzIHN0b3JlZCBsYW5ndWFnZSBkaWN0aW9uYXJ5XG4gKlxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmxhbmd1YWdlc187XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmxhbmd1YWdlcyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmxhbmd1YWdlc187XG59O1xuXG4vKipcbiAqIFBsYXllciBpbnN0YW5jZSBvcHRpb25zLCBzdXJmYWNlZCB1c2luZyB2anMub3B0aW9uc1xuICogdmpzLm9wdGlvbnMgPSB2anMuUGxheWVyLnByb3RvdHlwZS5vcHRpb25zX1xuICogTWFrZSBjaGFuZ2VzIGluIHZqcy5vcHRpb25zLCBub3QgaGVyZS5cbiAqIEFsbCBvcHRpb25zIHNob3VsZCB1c2Ugc3RyaW5nIGtleXMgc28gdGhleSBhdm9pZFxuICogcmVuYW1pbmcgYnkgY2xvc3VyZSBjb21waWxlclxuICogQHR5cGUge09iamVjdH1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9wdGlvbnNfID0gdmpzLm9wdGlvbnM7XG5cbi8qKlxuICogRGVzdHJveXMgdGhlIHZpZGVvIHBsYXllciBhbmQgZG9lcyBhbnkgbmVjZXNzYXJ5IGNsZWFudXBcbiAqXG4gKiAgICAgbXlQbGF5ZXIuZGlzcG9zZSgpO1xuICpcbiAqIFRoaXMgaXMgZXNwZWNpYWxseSBoZWxwZnVsIGlmIHlvdSBhcmUgZHluYW1pY2FsbHkgYWRkaW5nIGFuZCByZW1vdmluZyB2aWRlb3NcbiAqIHRvL2Zyb20gdGhlIERPTS5cbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMudHJpZ2dlcignZGlzcG9zZScpO1xuICAvLyBwcmV2ZW50IGRpc3Bvc2UgZnJvbSBiZWluZyBjYWxsZWQgdHdpY2VcbiAgdGhpcy5vZmYoJ2Rpc3Bvc2UnKTtcblxuICAvLyBLaWxsIHJlZmVyZW5jZSB0byB0aGlzIHBsYXllclxuICB2anMucGxheWVyc1t0aGlzLmlkX10gPSBudWxsO1xuICBpZiAodGhpcy50YWcgJiYgdGhpcy50YWdbJ3BsYXllciddKSB7IHRoaXMudGFnWydwbGF5ZXInXSA9IG51bGw7IH1cbiAgaWYgKHRoaXMuZWxfICYmIHRoaXMuZWxfWydwbGF5ZXInXSkgeyB0aGlzLmVsX1sncGxheWVyJ10gPSBudWxsOyB9XG5cbiAgaWYgKHRoaXMudGVjaCkgeyB0aGlzLnRlY2guZGlzcG9zZSgpOyB9XG5cbiAgLy8gQ29tcG9uZW50IGRpc3Bvc2VcbiAgdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuZGlzcG9zZS5jYWxsKHRoaXMpO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUuZ2V0VGFnU2V0dGluZ3MgPSBmdW5jdGlvbih0YWcpe1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICAnc291cmNlcyc6IFtdLFxuICAgICd0cmFja3MnOiBbXVxuICB9O1xuXG4gIHZqcy5vYmoubWVyZ2Uob3B0aW9ucywgdmpzLmdldEVsZW1lbnRBdHRyaWJ1dGVzKHRhZykpO1xuXG4gIC8vIEdldCB0YWcgY2hpbGRyZW4gc2V0dGluZ3NcbiAgaWYgKHRhZy5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB2YXIgY2hpbGRyZW4sIGNoaWxkLCBjaGlsZE5hbWUsIGksIGo7XG5cbiAgICBjaGlsZHJlbiA9IHRhZy5jaGlsZE5vZGVzO1xuXG4gICAgZm9yIChpPTAsaj1jaGlsZHJlbi5sZW5ndGg7IGk8ajsgaSsrKSB7XG4gICAgICBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgLy8gQ2hhbmdlIGNhc2UgbmVlZGVkOiBodHRwOi8vZWpvaG4ub3JnL2Jsb2cvbm9kZW5hbWUtY2FzZS1zZW5zaXRpdml0eS9cbiAgICAgIGNoaWxkTmFtZSA9IGNoaWxkLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoY2hpbGROYW1lID09PSAnc291cmNlJykge1xuICAgICAgICBvcHRpb25zWydzb3VyY2VzJ10ucHVzaCh2anMuZ2V0RWxlbWVudEF0dHJpYnV0ZXMoY2hpbGQpKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGROYW1lID09PSAndHJhY2snKSB7XG4gICAgICAgIG9wdGlvbnNbJ3RyYWNrcyddLnB1c2godmpzLmdldEVsZW1lbnRBdHRyaWJ1dGVzKGNoaWxkKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59O1xuXG52anMuUGxheWVyLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhclxuICAgIGVsID0gdGhpcy5lbF8gPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnKSxcbiAgICB0YWcgPSB0aGlzLnRhZyxcbiAgICBhdHRycztcblxuICAvLyBSZW1vdmUgd2lkdGgvaGVpZ2h0IGF0dHJzIGZyb20gdGFnIHNvIENTUyBjYW4gbWFrZSBpdCAxMDAlIHdpZHRoL2hlaWdodFxuICB0YWcucmVtb3ZlQXR0cmlidXRlKCd3aWR0aCcpO1xuICB0YWcucmVtb3ZlQXR0cmlidXRlKCdoZWlnaHQnKTtcbiAgLy8gRW1wdHkgdmlkZW8gdGFnIHRyYWNrcyBzbyB0aGUgYnVpbHQtaW4gcGxheWVyIGRvZXNuJ3QgdXNlIHRoZW0gYWxzby5cbiAgLy8gVGhpcyBtYXkgbm90IGJlIGZhc3QgZW5vdWdoIHRvIHN0b3AgSFRNTDUgYnJvd3NlcnMgZnJvbSByZWFkaW5nIHRoZSB0YWdzXG4gIC8vIHNvIHdlJ2xsIG5lZWQgdG8gdHVybiBvZmYgYW55IGRlZmF1bHQgdHJhY2tzIGlmIHdlJ3JlIG1hbnVhbGx5IGRvaW5nXG4gIC8vIGNhcHRpb25zIGFuZCBzdWJ0aXRsZXMuIHZpZGVvRWxlbWVudC50ZXh0VHJhY2tzXG4gIGlmICh0YWcuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdmFyIG5vZGVzLCBub2Rlc0xlbmd0aCwgaSwgbm9kZSwgbm9kZU5hbWUsIHJlbW92ZU5vZGVzO1xuXG4gICAgbm9kZXMgPSB0YWcuY2hpbGROb2RlcztcbiAgICBub2Rlc0xlbmd0aCA9IG5vZGVzLmxlbmd0aDtcbiAgICByZW1vdmVOb2RlcyA9IFtdO1xuXG4gICAgd2hpbGUgKG5vZGVzTGVuZ3RoLS0pIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tub2Rlc0xlbmd0aF07XG4gICAgICBub2RlTmFtZSA9IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChub2RlTmFtZSA9PT0gJ3RyYWNrJykge1xuICAgICAgICByZW1vdmVOb2Rlcy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoaT0wOyBpPHJlbW92ZU5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0YWcucmVtb3ZlQ2hpbGQocmVtb3ZlTm9kZXNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvcHkgb3ZlciBhbGwgdGhlIGF0dHJpYnV0ZXMgZnJvbSB0aGUgdGFnLCBpbmNsdWRpbmcgSUQgYW5kIGNsYXNzXG4gIC8vIElEIHdpbGwgbm93IHJlZmVyZW5jZSBwbGF5ZXIgYm94LCBub3QgdGhlIHZpZGVvIHRhZ1xuICBhdHRycyA9IHZqcy5nZXRFbGVtZW50QXR0cmlidXRlcyh0YWcpO1xuICB2anMub2JqLmVhY2goYXR0cnMsIGZ1bmN0aW9uKGF0dHIpIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgYXR0cnNbYXR0cl0pO1xuICB9KTtcblxuICAvLyBVcGRhdGUgdGFnIGlkL2NsYXNzIGZvciB1c2UgYXMgSFRNTDUgcGxheWJhY2sgdGVjaFxuICAvLyBNaWdodCB0aGluayB3ZSBzaG91bGQgZG8gdGhpcyBhZnRlciBlbWJlZGRpbmcgaW4gY29udGFpbmVyIHNvIC52anMtdGVjaCBjbGFzc1xuICAvLyBkb2Vzbid0IGZsYXNoIDEwMCUgd2lkdGgvaGVpZ2h0LCBidXQgY2xhc3Mgb25seSBhcHBsaWVzIHdpdGggLnZpZGVvLWpzIHBhcmVudFxuICB0YWcuaWQgKz0gJ19odG1sNV9hcGknO1xuICB0YWcuY2xhc3NOYW1lID0gJ3Zqcy10ZWNoJztcblxuICAvLyBNYWtlIHBsYXllciBmaW5kYWJsZSBvbiBlbGVtZW50c1xuICB0YWdbJ3BsYXllciddID0gZWxbJ3BsYXllciddID0gdGhpcztcbiAgLy8gRGVmYXVsdCBzdGF0ZSBvZiB2aWRlbyBpcyBwYXVzZWRcbiAgdGhpcy5hZGRDbGFzcygndmpzLXBhdXNlZCcpO1xuXG4gIC8vIE1ha2UgYm94IHVzZSB3aWR0aC9oZWlnaHQgb2YgdGFnLCBvciByZWx5IG9uIGRlZmF1bHQgaW1wbGVtZW50YXRpb25cbiAgLy8gRW5mb3JjZSB3aXRoIENTUyBzaW5jZSB3aWR0aC9oZWlnaHQgYXR0cnMgZG9uJ3Qgd29yayBvbiBkaXZzXG4gIHRoaXMud2lkdGgodGhpcy5vcHRpb25zX1snd2lkdGgnXSwgdHJ1ZSk7IC8vICh0cnVlKSBTa2lwIHJlc2l6ZSBsaXN0ZW5lciBvbiBsb2FkXG4gIHRoaXMuaGVpZ2h0KHRoaXMub3B0aW9uc19bJ2hlaWdodCddLCB0cnVlKTtcblxuICAvLyBXcmFwIHZpZGVvIHRhZyBpbiBkaXYgKGVsL2JveCkgY29udGFpbmVyXG4gIGlmICh0YWcucGFyZW50Tm9kZSkge1xuICAgIHRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFnKTtcbiAgfVxuICB2anMuaW5zZXJ0Rmlyc3QodGFnLCBlbCk7IC8vIEJyZWFrcyBpUGhvbmUsIGZpeGVkIGluIEhUTUw1IHNldHVwLlxuXG4gIC8vIFRoZSBldmVudCBsaXN0ZW5lcnMgbmVlZCB0byBiZSBhZGRlZCBiZWZvcmUgdGhlIGNoaWxkcmVuIGFyZSBhZGRlZFxuICAvLyBpbiB0aGUgY29tcG9uZW50IGluaXQgYmVjYXVzZSB0aGUgdGVjaCAobG9hZGVkIHdpdGggbWVkaWFMb2FkZXIpIG1heVxuICAvLyBmaXJlIGV2ZW50cywgbGlrZSBsb2Fkc3RhcnQsIHRoYXQgdGhlc2UgZXZlbnRzIG5lZWQgdG8gY2FwdHVyZS5cbiAgLy8gTG9uZyB0ZXJtIGl0IG1pZ2h0IGJlIGJldHRlciB0byBleHBvc2UgYSB3YXkgdG8gZG8gdGhpcyBpbiBjb21wb25lbnQuaW5pdFxuICAvLyBsaWtlIGNvbXBvbmVudC5pbml0RXZlbnRMaXN0ZW5lcnMoKSB0aGF0IHJ1bnMgYmV0d2VlbiBlbCBjcmVhdGlvbiBhbmRcbiAgLy8gYWRkaW5nIGNoaWxkcmVuXG4gIHRoaXMuZWxfID0gZWw7XG4gIHRoaXMub24oJ2xvYWRzdGFydCcsIHRoaXMub25Mb2FkU3RhcnQpO1xuICB0aGlzLm9uKCd3YWl0aW5nJywgdGhpcy5vbldhaXRpbmcpO1xuICB0aGlzLm9uKFsnY2FucGxheScsICdjYW5wbGF5dGhyb3VnaCcsICdwbGF5aW5nJywgJ2VuZGVkJ10sIHRoaXMub25XYWl0RW5kKTtcbiAgdGhpcy5vbignc2Vla2luZycsIHRoaXMub25TZWVraW5nKTtcbiAgdGhpcy5vbignc2Vla2VkJywgdGhpcy5vblNlZWtlZCk7XG4gIHRoaXMub24oJ2VuZGVkJywgdGhpcy5vbkVuZGVkKTtcbiAgdGhpcy5vbigncGxheScsIHRoaXMub25QbGF5KTtcbiAgdGhpcy5vbignZmlyc3RwbGF5JywgdGhpcy5vbkZpcnN0UGxheSk7XG4gIHRoaXMub24oJ3BhdXNlJywgdGhpcy5vblBhdXNlKTtcbiAgdGhpcy5vbigncHJvZ3Jlc3MnLCB0aGlzLm9uUHJvZ3Jlc3MpO1xuICB0aGlzLm9uKCdkdXJhdGlvbmNoYW5nZScsIHRoaXMub25EdXJhdGlvbkNoYW5nZSk7XG4gIHRoaXMub24oJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB0aGlzLm9uRnVsbHNjcmVlbkNoYW5nZSk7XG5cbiAgcmV0dXJuIGVsO1xufTtcblxuLy8gLyogTWVkaWEgVGVjaG5vbG9neSAodGVjaClcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vLyBMb2FkL0NyZWF0ZSBhbiBpbnN0YW5jZSBvZiBwbGF5YmFjayB0ZWNobmxvZ3kgaW5jbHVkaW5nIGVsZW1lbnQgYW5kIEFQSSBtZXRob2RzXG4vLyBBbmQgYXBwZW5kIHBsYXliYWNrIGVsZW1lbnQgaW4gcGxheWVyIGRpdi5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmxvYWRUZWNoID0gZnVuY3Rpb24odGVjaE5hbWUsIHNvdXJjZSl7XG5cbiAgLy8gUGF1c2UgYW5kIHJlbW92ZSBjdXJyZW50IHBsYXliYWNrIHRlY2hub2xvZ3lcbiAgaWYgKHRoaXMudGVjaCkge1xuICAgIHRoaXMudW5sb2FkVGVjaCgpO1xuICB9XG5cbiAgLy8gZ2V0IHJpZCBvZiB0aGUgSFRNTDUgdmlkZW8gdGFnIGFzIHNvb24gYXMgd2UgYXJlIHVzaW5nIGFub3RoZXIgdGVjaFxuICBpZiAodGVjaE5hbWUgIT09ICdIdG1sNScgJiYgdGhpcy50YWcpIHtcbiAgICB2anMuSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudCh0aGlzLnRhZyk7XG4gICAgdGhpcy50YWcgPSBudWxsO1xuICB9XG5cbiAgdGhpcy50ZWNoTmFtZSA9IHRlY2hOYW1lO1xuXG4gIC8vIFR1cm4gb2ZmIEFQSSBhY2Nlc3MgYmVjYXVzZSB3ZSdyZSBsb2FkaW5nIGEgbmV3IHRlY2ggdGhhdCBtaWdodCBsb2FkIGFzeW5jaHJvbm91c2x5XG4gIHRoaXMuaXNSZWFkeV8gPSBmYWxzZTtcblxuICB2YXIgdGVjaFJlYWR5ID0gZnVuY3Rpb24oKXtcbiAgICB0aGlzLnBsYXllcl8udHJpZ2dlclJlYWR5KCk7XG4gIH07XG5cbiAgLy8gR3JhYiB0ZWNoLXNwZWNpZmljIG9wdGlvbnMgZnJvbSBwbGF5ZXIgb3B0aW9ucyBhbmQgYWRkIHNvdXJjZSBhbmQgcGFyZW50IGVsZW1lbnQgdG8gdXNlLlxuICB2YXIgdGVjaE9wdGlvbnMgPSB2anMub2JqLm1lcmdlKHsgJ3NvdXJjZSc6IHNvdXJjZSwgJ3BhcmVudEVsJzogdGhpcy5lbF8gfSwgdGhpcy5vcHRpb25zX1t0ZWNoTmFtZS50b0xvd2VyQ2FzZSgpXSk7XG5cbiAgaWYgKHNvdXJjZSkge1xuICAgIHRoaXMuY3VycmVudFR5cGVfID0gc291cmNlLnR5cGU7XG4gICAgaWYgKHNvdXJjZS5zcmMgPT0gdGhpcy5jYWNoZV8uc3JjICYmIHRoaXMuY2FjaGVfLmN1cnJlbnRUaW1lID4gMCkge1xuICAgICAgdGVjaE9wdGlvbnNbJ3N0YXJ0VGltZSddID0gdGhpcy5jYWNoZV8uY3VycmVudFRpbWU7XG4gICAgfVxuXG4gICAgdGhpcy5jYWNoZV8uc3JjID0gc291cmNlLnNyYztcbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgdGVjaCBpbnN0YW5jZVxuICB0aGlzLnRlY2ggPSBuZXcgd2luZG93Wyd2aWRlb2pzJ11bdGVjaE5hbWVdKHRoaXMsIHRlY2hPcHRpb25zKTtcblxuICB0aGlzLnRlY2gucmVhZHkodGVjaFJlYWR5KTtcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnVubG9hZFRlY2ggPSBmdW5jdGlvbigpe1xuICB0aGlzLmlzUmVhZHlfID0gZmFsc2U7XG5cbiAgdGhpcy50ZWNoLmRpc3Bvc2UoKTtcblxuICB0aGlzLnRlY2ggPSBmYWxzZTtcbn07XG5cbi8vIFRoZXJlJ3MgbWFueSBpc3N1ZXMgYXJvdW5kIGNoYW5naW5nIHRoZSBzaXplIG9mIGEgRmxhc2ggKG9yIG90aGVyIHBsdWdpbikgb2JqZWN0LlxuLy8gRmlyc3QgaXMgYSBwbHVnaW4gcmVsb2FkIGlzc3VlIGluIEZpcmVmb3ggdGhhdCBoYXMgYmVlbiBhcm91bmQgZm9yIDExIHllYXJzOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD05MDI2OFxuLy8gVGhlbiB3aXRoIHRoZSBuZXcgZnVsbHNjcmVlbiBBUEksIE1vemlsbGEgYW5kIHdlYmtpdCBicm93c2VycyB3aWxsIHJlbG9hZCB0aGUgZmxhc2ggb2JqZWN0IGFmdGVyIGdvaW5nIHRvIGZ1bGxzY3JlZW4uXG4vLyBUbyBnZXQgYXJvdW5kIHRoaXMsIHdlJ3JlIHVubG9hZGluZyB0aGUgdGVjaCwgY2FjaGluZyBzb3VyY2UgYW5kIGN1cnJlbnRUaW1lIHZhbHVlcywgYW5kIHJlbG9hZGluZyB0aGUgdGVjaCBvbmNlIHRoZSBwbHVnaW4gaXMgcmVzaXplZC5cbi8vIHJlbG9hZFRlY2g6IGZ1bmN0aW9uKGJldHdlZW5Gbil7XG4vLyAgIHZqcy5sb2coJ3VubG9hZGluZ1RlY2gnKVxuLy8gICB0aGlzLnVubG9hZFRlY2goKTtcbi8vICAgdmpzLmxvZygndW5sb2FkZWRUZWNoJylcbi8vICAgaWYgKGJldHdlZW5GbikgeyBiZXR3ZWVuRm4uY2FsbCgpOyB9XG4vLyAgIHZqcy5sb2coJ0xvYWRpbmdUZWNoJylcbi8vICAgdGhpcy5sb2FkVGVjaCh0aGlzLnRlY2hOYW1lLCB7IHNyYzogdGhpcy5jYWNoZV8uc3JjIH0pXG4vLyAgIHZqcy5sb2coJ2xvYWRlZFRlY2gnKVxuLy8gfSxcblxuLy8gLyogUGxheWVyIGV2ZW50IGhhbmRsZXJzIChob3cgdGhlIHBsYXllciByZWFjdHMgdG8gY2VydGFpbiBldmVudHMpXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4vKipcbiAqIEZpcmVkIHdoZW4gdGhlIHVzZXIgYWdlbnQgYmVnaW5zIGxvb2tpbmcgZm9yIG1lZGlhIGRhdGFcbiAqIEBldmVudCBsb2Fkc3RhcnRcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25Mb2FkU3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgLy8gVE9ETzogVXBkYXRlIHRvIHVzZSBgZW1wdGllZGAgZXZlbnQgaW5zdGVhZC4gU2VlICMxMjc3LlxuXG4gIC8vIHJlc2V0IHRoZSBlcnJvciBzdGF0ZVxuICB0aGlzLmVycm9yKG51bGwpO1xuXG4gIC8vIElmIGl0J3MgYWxyZWFkeSBwbGF5aW5nIHdlIHdhbnQgdG8gdHJpZ2dlciBhIGZpcnN0cGxheSBldmVudCBub3cuXG4gIC8vIFRoZSBmaXJzdHBsYXkgZXZlbnQgcmVsaWVzIG9uIGJvdGggdGhlIHBsYXkgYW5kIGxvYWRzdGFydCBldmVudHNcbiAgLy8gd2hpY2ggY2FuIGhhcHBlbiBpbiBhbnkgb3JkZXIgZm9yIGEgbmV3IHNvdXJjZVxuICBpZiAoIXRoaXMucGF1c2VkKCkpIHtcbiAgICB0aGlzLnRyaWdnZXIoJ2ZpcnN0cGxheScpO1xuICB9IGVsc2Uge1xuICAgIC8vIHJlc2V0IHRoZSBoYXNTdGFydGVkIHN0YXRlXG4gICAgdGhpcy5oYXNTdGFydGVkKGZhbHNlKTtcbiAgICB0aGlzLm9uZSgncGxheScsIGZ1bmN0aW9uKCl7XG4gICAgICB0aGlzLmhhc1N0YXJ0ZWQodHJ1ZSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmhhc1N0YXJ0ZWRfID0gZmFsc2U7XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmhhc1N0YXJ0ZWQgPSBmdW5jdGlvbihoYXNTdGFydGVkKXtcbiAgaWYgKGhhc1N0YXJ0ZWQgIT09IHVuZGVmaW5lZCkge1xuICAgIC8vIG9ubHkgdXBkYXRlIGlmIHRoaXMgaXMgYSBuZXcgdmFsdWVcbiAgICBpZiAodGhpcy5oYXNTdGFydGVkXyAhPT0gaGFzU3RhcnRlZCkge1xuICAgICAgdGhpcy5oYXNTdGFydGVkXyA9IGhhc1N0YXJ0ZWQ7XG4gICAgICBpZiAoaGFzU3RhcnRlZCkge1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGFzLXN0YXJ0ZWQnKTtcbiAgICAgICAgLy8gdHJpZ2dlciB0aGUgZmlyc3RwbGF5IGV2ZW50IGlmIHRoaXMgbmV3bHkgaGFzIHBsYXllZFxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2ZpcnN0cGxheScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWhhcy1zdGFydGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLmhhc1N0YXJ0ZWRfO1xufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGluaXRpYWwgZHVyYXRpb24gYW5kIGRpbWVuc2lvbiBpbmZvcm1hdGlvblxuICogQGV2ZW50IGxvYWRlZG1ldGFkYXRhXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uTG9hZGVkTWV0YURhdGE7XG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgcGxheWVyIGhhcyBkb3dubG9hZGVkIGRhdGEgYXQgdGhlIGN1cnJlbnQgcGxheWJhY2sgcG9zaXRpb25cbiAqIEBldmVudCBsb2FkZWRkYXRhXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uTG9hZGVkRGF0YTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgaGFzIGZpbmlzaGVkIGRvd25sb2FkaW5nIHRoZSBzb3VyY2UgZGF0YVxuICogQGV2ZW50IGxvYWRlZGFsbGRhdGFcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25Mb2FkZWRBbGxEYXRhO1xuXG4vKipcbiAqIEZpcmVkIHdoZW5ldmVyIHRoZSBtZWRpYSBiZWdpbnMgb3IgcmVzdW1lcyBwbGF5YmFja1xuICogQGV2ZW50IHBsYXlcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25QbGF5ID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXBhdXNlZCcpO1xuICB0aGlzLmFkZENsYXNzKCd2anMtcGxheWluZycpO1xufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuZXZlciB0aGUgbWVkaWEgYmVnaW5zIHdhdGluZ1xuICogQGV2ZW50IHdhaXRpbmdcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25XYWl0aW5nID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5hZGRDbGFzcygndmpzLXdhaXRpbmcnKTtcbn07XG5cbi8qKlxuICogQSBoYW5kbGVyIGZvciBldmVudHMgdGhhdCBzaWduYWwgdGhhdCB3YWl0aW5nIGhhcyBlbmVkZWRcbiAqIHdoaWNoIGlzIG5vdCBjb25zaXN0ZW50IGJldHdlZW4gYnJvd3NlcnMuIFNlZSAjMTM1MVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbldhaXRFbmQgPSBmdW5jdGlvbigpe1xuICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtd2FpdGluZycpO1xufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuZXZlciB0aGUgcGxheWVyIGlzIGp1bXBpbmcgdG8gYSBuZXcgdGltZVxuICogQGV2ZW50IHNlZWtpbmdcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25TZWVraW5nID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5hZGRDbGFzcygndmpzLXNlZWtpbmcnKTtcbn07XG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgcGxheWVyIGhhcyBmaW5pc2hlZCBqdW1waW5nIHRvIGEgbmV3IHRpbWVcbiAqIEBldmVudCBzZWVrZWRcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25TZWVrZWQgPSBmdW5jdGlvbigpe1xuICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtc2Vla2luZycpO1xufTtcblxuLyoqXG4gKiBGaXJlZCB0aGUgZmlyc3QgdGltZSBhIHZpZGVvIGlzIHBsYXllZFxuICpcbiAqIE5vdCBwYXJ0IG9mIHRoZSBITFMgc3BlYywgYW5kIHdlJ3JlIG5vdCBzdXJlIGlmIHRoaXMgaXMgdGhlIGJlc3RcbiAqIGltcGxlbWVudGF0aW9uIHlldCwgc28gdXNlIHNwYXJpbmdseS4gSWYgeW91IGRvbid0IGhhdmUgYSByZWFzb24gdG9cbiAqIHByZXZlbnQgcGxheWJhY2ssIHVzZSBgbXlQbGF5ZXIub25lKCdwbGF5Jyk7YCBpbnN0ZWFkLlxuICpcbiAqIEBldmVudCBmaXJzdHBsYXlcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25GaXJzdFBsYXkgPSBmdW5jdGlvbigpe1xuICAgIC8vSWYgdGhlIGZpcnN0IHN0YXJ0dGltZSBhdHRyaWJ1dGUgaXMgc3BlY2lmaWVkXG4gICAgLy90aGVuIHdlIHdpbGwgc3RhcnQgYXQgdGhlIGdpdmVuIG9mZnNldCBpbiBzZWNvbmRzXG4gICAgaWYodGhpcy5vcHRpb25zX1snc3RhcnR0aW1lJ10pe1xuICAgICAgdGhpcy5jdXJyZW50VGltZSh0aGlzLm9wdGlvbnNfWydzdGFydHRpbWUnXSk7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWhhcy1zdGFydGVkJyk7XG59O1xuXG4vKipcbiAqIEZpcmVkIHdoZW5ldmVyIHRoZSBtZWRpYSBoYXMgYmVlbiBwYXVzZWRcbiAqIEBldmVudCBwYXVzZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vblBhdXNlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXBsYXlpbmcnKTtcbiAgdGhpcy5hZGRDbGFzcygndmpzLXBhdXNlZCcpO1xufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBjdXJyZW50IHBsYXliYWNrIHBvc2l0aW9uIGhhcyBjaGFuZ2VkXG4gKlxuICogRHVyaW5nIHBsYXliYWNrIHRoaXMgaXMgZmlyZWQgZXZlcnkgMTUtMjUwIG1pbGxpc2Vjb25kcywgZGVwbmRpbmcgb24gdGhlXG4gKiBwbGF5YmFjayB0ZWNobm9sb2d5IGluIHVzZS5cbiAqIEBldmVudCB0aW1ldXBkYXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLm9uVGltZVVwZGF0ZTtcblxuLyoqXG4gKiBGaXJlZCB3aGlsZSB0aGUgdXNlciBhZ2VudCBpcyBkb3dubG9hZGluZyBtZWRpYSBkYXRhXG4gKiBAZXZlbnQgcHJvZ3Jlc3NcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25Qcm9ncmVzcyA9IGZ1bmN0aW9uKCl7XG4gIC8vIEFkZCBjdXN0b20gZXZlbnQgZm9yIHdoZW4gc291cmNlIGlzIGZpbmlzaGVkIGRvd25sb2FkaW5nLlxuICBpZiAodGhpcy5idWZmZXJlZFBlcmNlbnQoKSA9PSAxKSB7XG4gICAgdGhpcy50cmlnZ2VyKCdsb2FkZWRhbGxkYXRhJyk7XG4gIH1cbn07XG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgZW5kIG9mIHRoZSBtZWRpYSByZXNvdXJjZSBpcyByZWFjaGVkIChjdXJyZW50VGltZSA9PSBkdXJhdGlvbilcbiAqIEBldmVudCBlbmRlZFxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbkVuZGVkID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMub3B0aW9uc19bJ2xvb3AnXSkge1xuICAgIHRoaXMuY3VycmVudFRpbWUoMCk7XG4gICAgdGhpcy5wbGF5KCk7XG4gIH1cbn07XG5cbi8qKlxuICogRmlyZWQgd2hlbiB0aGUgZHVyYXRpb24gb2YgdGhlIG1lZGlhIHJlc291cmNlIGlzIGZpcnN0IGtub3duIG9yIGNoYW5nZWRcbiAqIEBldmVudCBkdXJhdGlvbmNoYW5nZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vbkR1cmF0aW9uQ2hhbmdlID0gZnVuY3Rpb24oKXtcbiAgLy8gQWxsb3dzIGZvciBjYWNoZWluZyB2YWx1ZSBpbnN0ZWFkIG9mIGFza2luZyBwbGF5ZXIgZWFjaCB0aW1lLlxuICAvLyBXZSBuZWVkIHRvIGdldCB0aGUgdGVjaEdldCByZXNwb25zZSBhbmQgY2hlY2sgZm9yIGEgdmFsdWUgc28gd2UgZG9uJ3RcbiAgLy8gYWNjaWRlbnRhbGx5IGNhdXNlIHRoZSBzdGFjayB0byBibG93IHVwLlxuICB2YXIgZHVyYXRpb24gPSB0aGlzLnRlY2hHZXQoJ2R1cmF0aW9uJyk7XG4gIGlmIChkdXJhdGlvbikge1xuICAgIGlmIChkdXJhdGlvbiA8IDApIHtcbiAgICAgIGR1cmF0aW9uID0gSW5maW5pdHk7XG4gICAgfVxuICAgIHRoaXMuZHVyYXRpb24oZHVyYXRpb24pO1xuICAgIC8vIERldGVybWluZSBpZiB0aGUgc3RyZWFtIGlzIGxpdmUgYW5kIHByb3BhZ2F0ZSBzdHlsZXMgZG93biB0byBVSS5cbiAgICBpZiAoZHVyYXRpb24gPT09IEluZmluaXR5KSB7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtbGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtbGl2ZScpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSB2b2x1bWUgY2hhbmdlc1xuICogQGV2ZW50IHZvbHVtZWNoYW5nZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5vblZvbHVtZUNoYW5nZTtcblxuLyoqXG4gKiBGaXJlZCB3aGVuIHRoZSBwbGF5ZXIgc3dpdGNoZXMgaW4gb3Igb3V0IG9mIGZ1bGxzY3JlZW4gbW9kZVxuICogQGV2ZW50IGZ1bGxzY3JlZW5jaGFuZ2VcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUub25GdWxsc2NyZWVuQ2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLWZ1bGxzY3JlZW4nKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZnVsbHNjcmVlbicpO1xuICB9XG59O1xuXG4vLyAvKiBQbGF5ZXIgQVBJXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuXG4vKipcbiAqIE9iamVjdCBmb3IgY2FjaGVkIHZhbHVlcy5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmNhY2hlXztcblxudmpzLlBsYXllci5wcm90b3R5cGUuZ2V0Q2FjaGUgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5jYWNoZV87XG59O1xuXG4vLyBQYXNzIHZhbHVlcyB0byB0aGUgcGxheWJhY2sgdGVjaFxudmpzLlBsYXllci5wcm90b3R5cGUudGVjaENhbGwgPSBmdW5jdGlvbihtZXRob2QsIGFyZyl7XG4gIC8vIElmIGl0J3Mgbm90IHJlYWR5IHlldCwgY2FsbCBtZXRob2Qgd2hlbiBpdCBpc1xuICBpZiAodGhpcy50ZWNoICYmICF0aGlzLnRlY2guaXNSZWFkeV8pIHtcbiAgICB0aGlzLnRlY2gucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgIHRoaXNbbWV0aG9kXShhcmcpO1xuICAgIH0pO1xuXG4gIC8vIE90aGVyd2lzZSBjYWxsIG1ldGhvZCBub3dcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgdGhpcy50ZWNoW21ldGhvZF0oYXJnKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIHZqcy5sb2coZSk7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgfVxufTtcblxuLy8gR2V0IGNhbGxzIGNhbid0IHdhaXQgZm9yIHRoZSB0ZWNoLCBhbmQgc29tZXRpbWVzIGRvbid0IG5lZWQgdG8uXG52anMuUGxheWVyLnByb3RvdHlwZS50ZWNoR2V0ID0gZnVuY3Rpb24obWV0aG9kKXtcbiAgaWYgKHRoaXMudGVjaCAmJiB0aGlzLnRlY2guaXNSZWFkeV8pIHtcblxuICAgIC8vIEZsYXNoIGxpa2VzIHRvIGRpZSBhbmQgcmVsb2FkIHdoZW4geW91IGhpZGUgb3IgcmVwb3NpdGlvbiBpdC5cbiAgICAvLyBJbiB0aGVzZSBjYXNlcyB0aGUgb2JqZWN0IG1ldGhvZHMgZ28gYXdheSBhbmQgd2UgZ2V0IGVycm9ycy5cbiAgICAvLyBXaGVuIHRoYXQgaGFwcGVucyB3ZSdsbCBjYXRjaCB0aGUgZXJyb3JzIGFuZCBpbmZvcm0gdGVjaCB0aGF0IGl0J3Mgbm90IHJlYWR5IGFueSBtb3JlLlxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy50ZWNoW21ldGhvZF0oKTtcbiAgICB9IGNhdGNoKGUpIHtcbiAgICAgIC8vIFdoZW4gYnVpbGRpbmcgYWRkaXRpb25hbCB0ZWNoIGxpYnMsIGFuIGV4cGVjdGVkIG1ldGhvZCBtYXkgbm90IGJlIGRlZmluZWQgeWV0XG4gICAgICBpZiAodGhpcy50ZWNoW21ldGhvZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2anMubG9nKCdWaWRlby5qczogJyArIG1ldGhvZCArICcgbWV0aG9kIG5vdCBkZWZpbmVkIGZvciAnK3RoaXMudGVjaE5hbWUrJyBwbGF5YmFjayB0ZWNobm9sb2d5LicsIGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2hlbiBhIG1ldGhvZCBpc24ndCBhdmFpbGFibGUgb24gdGhlIG9iamVjdCBpdCB0aHJvd3MgYSBUeXBlRXJyb3JcbiAgICAgICAgaWYgKGUubmFtZSA9PSAnVHlwZUVycm9yJykge1xuICAgICAgICAgIHZqcy5sb2coJ1ZpZGVvLmpzOiAnICsgbWV0aG9kICsgJyB1bmF2YWlsYWJsZSBvbiAnK3RoaXMudGVjaE5hbWUrJyBwbGF5YmFjayB0ZWNobm9sb2d5IGVsZW1lbnQuJywgZSk7XG4gICAgICAgICAgdGhpcy50ZWNoLmlzUmVhZHlfID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmpzLmxvZyhlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm47XG59O1xuXG4vKipcbiAqIHN0YXJ0IG1lZGlhIHBsYXliYWNrXG4gKlxuICogICAgIG15UGxheWVyLnBsYXkoKTtcbiAqXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSBzZWxmXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpe1xuICB0aGlzLnRlY2hDYWxsKCdwbGF5Jyk7XG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBQYXVzZSB0aGUgdmlkZW8gcGxheWJhY2tcbiAqXG4gKiAgICAgbXlQbGF5ZXIucGF1c2UoKTtcbiAqXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSBzZWxmXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy50ZWNoQ2FsbCgncGF1c2UnKTtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBwbGF5ZXIgaXMgcGF1c2VkXG4gKlxuICogICAgIHZhciBpc1BhdXNlZCA9IG15UGxheWVyLnBhdXNlZCgpO1xuICogICAgIHZhciBpc1BsYXlpbmcgPSAhbXlQbGF5ZXIucGF1c2VkKCk7XG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn0gZmFsc2UgaWYgdGhlIG1lZGlhIGlzIGN1cnJlbnRseSBwbGF5aW5nLCBvciB0cnVlIG90aGVyd2lzZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5wYXVzZWQgPSBmdW5jdGlvbigpe1xuICAvLyBUaGUgaW5pdGlhbCBzdGF0ZSBvZiBwYXVzZWQgc2hvdWxkIGJlIHRydWUgKGluIFNhZmFyaSBpdCdzIGFjdHVhbGx5IGZhbHNlKVxuICByZXR1cm4gKHRoaXMudGVjaEdldCgncGF1c2VkJykgPT09IGZhbHNlKSA/IGZhbHNlIDogdHJ1ZTtcbn07XG5cbi8qKlxuICogR2V0IG9yIHNldCB0aGUgY3VycmVudCB0aW1lIChpbiBzZWNvbmRzKVxuICpcbiAqICAgICAvLyBnZXRcbiAqICAgICB2YXIgd2hlcmVZb3VBdCA9IG15UGxheWVyLmN1cnJlbnRUaW1lKCk7XG4gKlxuICogICAgIC8vIHNldFxuICogICAgIG15UGxheWVyLmN1cnJlbnRUaW1lKDEyMCk7IC8vIDIgbWludXRlcyBpbnRvIHRoZSB2aWRlb1xuICpcbiAqIEBwYXJhbSAge051bWJlcnxTdHJpbmc9fSBzZWNvbmRzIFRoZSB0aW1lIHRvIHNlZWsgdG9cbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgIFRoZSB0aW1lIGluIHNlY29uZHMsIHdoZW4gbm90IHNldHRpbmdcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9ICAgIHNlbGYsIHdoZW4gdGhlIGN1cnJlbnQgdGltZSBpcyBzZXRcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuY3VycmVudFRpbWUgPSBmdW5jdGlvbihzZWNvbmRzKXtcbiAgaWYgKHNlY29uZHMgIT09IHVuZGVmaW5lZCkge1xuXG4gICAgdGhpcy50ZWNoQ2FsbCgnc2V0Q3VycmVudFRpbWUnLCBzZWNvbmRzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gY2FjaGUgbGFzdCBjdXJyZW50VGltZSBhbmQgcmV0dXJuLiBkZWZhdWx0IHRvIDAgc2Vjb25kc1xuICAvL1xuICAvLyBDYWNoaW5nIHRoZSBjdXJyZW50VGltZSBpcyBtZWFudCB0byBwcmV2ZW50IGEgbWFzc2l2ZSBhbW91bnQgb2YgcmVhZHMgb24gdGhlIHRlY2gnc1xuICAvLyBjdXJyZW50VGltZSB3aGVuIHNjcnViYmluZywgYnV0IG1heSBub3QgcHJvdmlkZSBtdWNoIHBlcmZvcm1hY2UgYmVuZWZpdCBhZnRlcmFsbC5cbiAgLy8gU2hvdWxkIGJlIHRlc3RlZC4gQWxzbyBzb21ldGhpbmcgaGFzIHRvIHJlYWQgdGhlIGFjdHVhbCBjdXJyZW50IHRpbWUgb3IgdGhlIGNhY2hlIHdpbGxcbiAgLy8gbmV2ZXIgZ2V0IHVwZGF0ZWQuXG4gIHJldHVybiB0aGlzLmNhY2hlXy5jdXJyZW50VGltZSA9ICh0aGlzLnRlY2hHZXQoJ2N1cnJlbnRUaW1lJykgfHwgMCk7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgbGVuZ3RoIGluIHRpbWUgb2YgdGhlIHZpZGVvIGluIHNlY29uZHNcbiAqXG4gKiAgICAgdmFyIGxlbmd0aE9mVmlkZW8gPSBteVBsYXllci5kdXJhdGlvbigpO1xuICpcbiAqICoqTk9URSoqOiBUaGUgdmlkZW8gbXVzdCBoYXZlIHN0YXJ0ZWQgbG9hZGluZyBiZWZvcmUgdGhlIGR1cmF0aW9uIGNhbiBiZVxuICoga25vd24sIGFuZCBpbiB0aGUgY2FzZSBvZiBGbGFzaCwgbWF5IG5vdCBiZSBrbm93biB1bnRpbCB0aGUgdmlkZW8gc3RhcnRzXG4gKiBwbGF5aW5nLlxuICpcbiAqIEByZXR1cm4ge051bWJlcn0gVGhlIGR1cmF0aW9uIG9mIHRoZSB2aWRlbyBpbiBzZWNvbmRzXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmR1cmF0aW9uID0gZnVuY3Rpb24oc2Vjb25kcyl7XG4gIGlmIChzZWNvbmRzICE9PSB1bmRlZmluZWQpIHtcblxuICAgIC8vIGNhY2hlIHRoZSBsYXN0IHNldCB2YWx1ZSBmb3Igb3B0aW1paXplZCBzY3J1YmJpbmcgKGVzcC4gRmxhc2gpXG4gICAgdGhpcy5jYWNoZV8uZHVyYXRpb24gPSBwYXJzZUZsb2F0KHNlY29uZHMpO1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBpZiAodGhpcy5jYWNoZV8uZHVyYXRpb24gPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMub25EdXJhdGlvbkNoYW5nZSgpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuY2FjaGVfLmR1cmF0aW9uIHx8IDA7XG59O1xuXG4vLyBDYWxjdWxhdGVzIGhvdyBtdWNoIHRpbWUgaXMgbGVmdC4gTm90IGluIHNwZWMsIGJ1dCB1c2VmdWwuXG52anMuUGxheWVyLnByb3RvdHlwZS5yZW1haW5pbmdUaW1lID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMuZHVyYXRpb24oKSAtIHRoaXMuY3VycmVudFRpbWUoKTtcbn07XG5cbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvdmlkZW8uaHRtbCNkb20tbWVkaWEtYnVmZmVyZWRcbi8vIEJ1ZmZlcmVkIHJldHVybnMgYSB0aW1lcmFuZ2Ugb2JqZWN0LlxuLy8gS2luZCBvZiBsaWtlIGFuIGFycmF5IG9mIHBvcnRpb25zIG9mIHRoZSB2aWRlbyB0aGF0IGhhdmUgYmVlbiBkb3dubG9hZGVkLlxuXG4vKipcbiAqIEdldCBhIFRpbWVSYW5nZSBvYmplY3Qgd2l0aCB0aGUgdGltZXMgb2YgdGhlIHZpZGVvIHRoYXQgaGF2ZSBiZWVuIGRvd25sb2FkZWRcbiAqXG4gKiBJZiB5b3UganVzdCB3YW50IHRoZSBwZXJjZW50IG9mIHRoZSB2aWRlbyB0aGF0J3MgYmVlbiBkb3dubG9hZGVkLFxuICogdXNlIGJ1ZmZlcmVkUGVyY2VudC5cbiAqXG4gKiAgICAgLy8gTnVtYmVyIG9mIGRpZmZlcmVudCByYW5nZXMgb2YgdGltZSBoYXZlIGJlZW4gYnVmZmVyZWQuIFVzdWFsbHkgMS5cbiAqICAgICBudW1iZXJPZlJhbmdlcyA9IGJ1ZmZlcmVkVGltZVJhbmdlLmxlbmd0aCxcbiAqXG4gKiAgICAgLy8gVGltZSBpbiBzZWNvbmRzIHdoZW4gdGhlIGZpcnN0IHJhbmdlIHN0YXJ0cy4gVXN1YWxseSAwLlxuICogICAgIGZpcnN0UmFuZ2VTdGFydCA9IGJ1ZmZlcmVkVGltZVJhbmdlLnN0YXJ0KDApLFxuICpcbiAqICAgICAvLyBUaW1lIGluIHNlY29uZHMgd2hlbiB0aGUgZmlyc3QgcmFuZ2UgZW5kc1xuICogICAgIGZpcnN0UmFuZ2VFbmQgPSBidWZmZXJlZFRpbWVSYW5nZS5lbmQoMCksXG4gKlxuICogICAgIC8vIExlbmd0aCBpbiBzZWNvbmRzIG9mIHRoZSBmaXJzdCB0aW1lIHJhbmdlXG4gKiAgICAgZmlyc3RSYW5nZUxlbmd0aCA9IGZpcnN0UmFuZ2VFbmQgLSBmaXJzdFJhbmdlU3RhcnQ7XG4gKlxuICogQHJldHVybiB7T2JqZWN0fSBBIG1vY2sgVGltZVJhbmdlIG9iamVjdCAoZm9sbG93aW5nIEhUTUwgc3BlYylcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuYnVmZmVyZWQgPSBmdW5jdGlvbigpe1xuICB2YXIgYnVmZmVyZWQgPSB0aGlzLnRlY2hHZXQoJ2J1ZmZlcmVkJyk7XG5cbiAgaWYgKCFidWZmZXJlZCB8fCAhYnVmZmVyZWQubGVuZ3RoKSB7XG4gICAgYnVmZmVyZWQgPSB2anMuY3JlYXRlVGltZVJhbmdlKDAsMCk7XG4gIH1cblxuICByZXR1cm4gYnVmZmVyZWQ7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcGVyY2VudCAoYXMgYSBkZWNpbWFsKSBvZiB0aGUgdmlkZW8gdGhhdCdzIGJlZW4gZG93bmxvYWRlZFxuICpcbiAqICAgICB2YXIgaG93TXVjaElzRG93bmxvYWRlZCA9IG15UGxheWVyLmJ1ZmZlcmVkUGVyY2VudCgpO1xuICpcbiAqIDAgbWVhbnMgbm9uZSwgMSBtZWFucyBhbGwuXG4gKiAoVGhpcyBtZXRob2QgaXNuJ3QgaW4gdGhlIEhUTUw1IHNwZWMsIGJ1dCBpdCdzIHZlcnkgY29udmVuaWVudClcbiAqXG4gKiBAcmV0dXJuIHtOdW1iZXJ9IEEgZGVjaW1hbCBiZXR3ZWVuIDAgYW5kIDEgcmVwcmVzZW50aW5nIHRoZSBwZXJjZW50XG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmJ1ZmZlcmVkUGVyY2VudCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb24oKSxcbiAgICAgIGJ1ZmZlcmVkID0gdGhpcy5idWZmZXJlZCgpLFxuICAgICAgYnVmZmVyZWREdXJhdGlvbiA9IDAsXG4gICAgICBzdGFydCwgZW5kO1xuXG4gIGlmICghZHVyYXRpb24pIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGZvciAodmFyIGk9MDsgaTxidWZmZXJlZC5sZW5ndGg7IGkrKyl7XG4gICAgc3RhcnQgPSBidWZmZXJlZC5zdGFydChpKTtcbiAgICBlbmQgICA9IGJ1ZmZlcmVkLmVuZChpKTtcblxuICAgIC8vIGJ1ZmZlcmVkIGVuZCBjYW4gYmUgYmlnZ2VyIHRoYW4gZHVyYXRpb24gYnkgYSB2ZXJ5IHNtYWxsIGZyYWN0aW9uXG4gICAgaWYgKGVuZCA+IGR1cmF0aW9uKSB7XG4gICAgICBlbmQgPSBkdXJhdGlvbjtcbiAgICB9XG5cbiAgICBidWZmZXJlZER1cmF0aW9uICs9IGVuZCAtIHN0YXJ0O1xuICB9XG5cbiAgcmV0dXJuIGJ1ZmZlcmVkRHVyYXRpb24gLyBkdXJhdGlvbjtcbn07XG5cbi8qKlxuICogR2V0IHRoZSBlbmRpbmcgdGltZSBvZiB0aGUgbGFzdCBidWZmZXJlZCB0aW1lIHJhbmdlXG4gKlxuICogVGhpcyBpcyB1c2VkIGluIHRoZSBwcm9ncmVzcyBiYXIgdG8gZW5jYXBzdWxhdGUgYWxsIHRpbWUgcmFuZ2VzLlxuICogQHJldHVybiB7TnVtYmVyfSBUaGUgZW5kIG9mIHRoZSBsYXN0IGJ1ZmZlcmVkIHRpbWUgcmFuZ2VcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuYnVmZmVyZWRFbmQgPSBmdW5jdGlvbigpe1xuICB2YXIgYnVmZmVyZWQgPSB0aGlzLmJ1ZmZlcmVkKCksXG4gICAgICBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb24oKSxcbiAgICAgIGVuZCA9IGJ1ZmZlcmVkLmVuZChidWZmZXJlZC5sZW5ndGgtMSk7XG5cbiAgaWYgKGVuZCA+IGR1cmF0aW9uKSB7XG4gICAgZW5kID0gZHVyYXRpb247XG4gIH1cblxuICByZXR1cm4gZW5kO1xufTtcblxuLyoqXG4gKiBHZXQgb3Igc2V0IHRoZSBjdXJyZW50IHZvbHVtZSBvZiB0aGUgbWVkaWFcbiAqXG4gKiAgICAgLy8gZ2V0XG4gKiAgICAgdmFyIGhvd0xvdWRJc0l0ID0gbXlQbGF5ZXIudm9sdW1lKCk7XG4gKlxuICogICAgIC8vIHNldFxuICogICAgIG15UGxheWVyLnZvbHVtZSgwLjUpOyAvLyBTZXQgdm9sdW1lIHRvIGhhbGZcbiAqXG4gKiAwIGlzIG9mZiAobXV0ZWQpLCAxLjAgaXMgYWxsIHRoZSB3YXkgdXAsIDAuNSBpcyBoYWxmIHdheS5cbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IHBlcmNlbnRBc0RlY2ltYWwgVGhlIG5ldyB2b2x1bWUgYXMgYSBkZWNpbWFsIHBlcmNlbnRcbiAqIEByZXR1cm4ge051bWJlcn0gICAgICAgICAgICAgICAgICBUaGUgY3VycmVudCB2b2x1bWUsIHdoZW4gZ2V0dGluZ1xuICogQHJldHVybiB7dmpzLlBsYXllcn0gICAgICAgICAgICAgIHNlbGYsIHdoZW4gc2V0dGluZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS52b2x1bWUgPSBmdW5jdGlvbihwZXJjZW50QXNEZWNpbWFsKXtcbiAgdmFyIHZvbDtcblxuICBpZiAocGVyY2VudEFzRGVjaW1hbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdm9sID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgcGFyc2VGbG9hdChwZXJjZW50QXNEZWNpbWFsKSkpOyAvLyBGb3JjZSB2YWx1ZSB0byBiZXR3ZWVuIDAgYW5kIDFcbiAgICB0aGlzLmNhY2hlXy52b2x1bWUgPSB2b2w7XG4gICAgdGhpcy50ZWNoQ2FsbCgnc2V0Vm9sdW1lJywgdm9sKTtcbiAgICB2anMuc2V0TG9jYWxTdG9yYWdlKCd2b2x1bWUnLCB2b2wpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLy8gRGVmYXVsdCB0byAxIHdoZW4gcmV0dXJuaW5nIGN1cnJlbnQgdm9sdW1lLlxuICB2b2wgPSBwYXJzZUZsb2F0KHRoaXMudGVjaEdldCgndm9sdW1lJykpO1xuICByZXR1cm4gKGlzTmFOKHZvbCkpID8gMSA6IHZvbDtcbn07XG5cblxuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnQgbXV0ZWQgc3RhdGUsIG9yIHR1cm4gbXV0ZSBvbiBvciBvZmZcbiAqXG4gKiAgICAgLy8gZ2V0XG4gKiAgICAgdmFyIGlzVm9sdW1lTXV0ZWQgPSBteVBsYXllci5tdXRlZCgpO1xuICpcbiAqICAgICAvLyBzZXRcbiAqICAgICBteVBsYXllci5tdXRlZCh0cnVlKTsgLy8gbXV0ZSB0aGUgdm9sdW1lXG4gKlxuICogQHBhcmFtICB7Qm9vbGVhbj19IG11dGVkIFRydWUgdG8gbXV0ZSwgZmFsc2UgdG8gdW5tdXRlXG4gKiBAcmV0dXJuIHtCb29sZWFufSBUcnVlIGlmIG11dGUgaXMgb24sIGZhbHNlIGlmIG5vdCwgd2hlbiBnZXR0aW5nXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSBzZWxmLCB3aGVuIHNldHRpbmcgbXV0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5tdXRlZCA9IGZ1bmN0aW9uKG11dGVkKXtcbiAgaWYgKG11dGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnRlY2hDYWxsKCdzZXRNdXRlZCcsIG11dGVkKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZXR1cm4gdGhpcy50ZWNoR2V0KCdtdXRlZCcpIHx8IGZhbHNlOyAvLyBEZWZhdWx0IHRvIGZhbHNlXG59O1xuXG4vLyBDaGVjayBpZiBjdXJyZW50IHRlY2ggY2FuIHN1cHBvcnQgbmF0aXZlIGZ1bGxzY3JlZW5cbi8vIChlLmcuIHdpdGggYnVpbHQgaW4gY29udHJvbHMgbGlrIGlPUywgc28gbm90IG91ciBmbGFzaCBzd2YpXG52anMuUGxheWVyLnByb3RvdHlwZS5zdXBwb3J0c0Z1bGxTY3JlZW4gPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy50ZWNoR2V0KCdzdXBwb3J0c0Z1bGxTY3JlZW4nKSB8fCBmYWxzZTtcbn07XG5cbi8qKlxuICogaXMgdGhlIHBsYXllciBpbiBmdWxsc2NyZWVuXG4gKiBAdHlwZSB7Qm9vbGVhbn1cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmlzRnVsbHNjcmVlbl8gPSBmYWxzZTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcGxheWVyIGlzIGluIGZ1bGxzY3JlZW4gbW9kZVxuICpcbiAqICAgICAvLyBnZXRcbiAqICAgICB2YXIgZnVsbHNjcmVlbk9yTm90ID0gbXlQbGF5ZXIuaXNGdWxsc2NyZWVuKCk7XG4gKlxuICogICAgIC8vIHNldFxuICogICAgIG15UGxheWVyLmlzRnVsbHNjcmVlbih0cnVlKTsgLy8gdGVsbCB0aGUgcGxheWVyIGl0J3MgaW4gZnVsbHNjcmVlblxuICpcbiAqIE5PVEU6IEFzIG9mIHRoZSBsYXRlc3QgSFRNTDUgc3BlYywgaXNGdWxsc2NyZWVuIGlzIG5vIGxvbmdlciBhbiBvZmZpY2lhbFxuICogcHJvcGVydHkgYW5kIGluc3RlYWQgZG9jdW1lbnQuZnVsbHNjcmVlbkVsZW1lbnQgaXMgdXNlZC4gQnV0IGlzRnVsbHNjcmVlbiBpc1xuICogc3RpbGwgYSB2YWx1YWJsZSBwcm9wZXJ0eSBmb3IgaW50ZXJuYWwgcGxheWVyIHdvcmtpbmdzLlxuICpcbiAqIEBwYXJhbSAge0Jvb2xlYW49fSBpc0ZTIFVwZGF0ZSB0aGUgcGxheWVyJ3MgZnVsbHNjcmVlbiBzdGF0ZVxuICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiBmdWxsc2NyZWVuLCBmYWxzZSBpZiBub3RcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGYsIHdoZW4gc2V0dGluZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5pc0Z1bGxzY3JlZW4gPSBmdW5jdGlvbihpc0ZTKXtcbiAgaWYgKGlzRlMgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMuaXNGdWxsc2NyZWVuXyA9ICEhaXNGUztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICByZXR1cm4gdGhpcy5pc0Z1bGxzY3JlZW5fO1xufTtcblxuLyoqXG4gKiBPbGQgbmFtaW5nIGZvciBpc0Z1bGxzY3JlZW4oKVxuICogQGRlcHJlY2F0ZWQgZm9yIGxvd2VyY2FzZSAncycgdmVyc2lvblxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5pc0Z1bGxTY3JlZW4gPSBmdW5jdGlvbihpc0ZTKXtcbiAgdmpzLmxvZy53YXJuKCdwbGF5ZXIuaXNGdWxsU2NyZWVuKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgdXNlIHBsYXllci5pc0Z1bGxzY3JlZW4oKSB3aXRoIGEgbG93ZXJjYXNlIFwic1wiKScpO1xuICByZXR1cm4gdGhpcy5pc0Z1bGxzY3JlZW4oaXNGUyk7XG59O1xuXG4vKipcbiAqIEluY3JlYXNlIHRoZSBzaXplIG9mIHRoZSB2aWRlbyB0byBmdWxsIHNjcmVlblxuICpcbiAqICAgICBteVBsYXllci5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICpcbiAqIEluIHNvbWUgYnJvd3NlcnMsIGZ1bGwgc2NyZWVuIGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHNvIGl0IGVudGVyc1xuICogXCJmdWxsIHdpbmRvdyBtb2RlXCIsIHdoZXJlIHRoZSB2aWRlbyBmaWxscyB0aGUgYnJvd3NlciB3aW5kb3cuXG4gKiBJbiBicm93c2VycyBhbmQgZGV2aWNlcyB0aGF0IHN1cHBvcnQgbmF0aXZlIGZ1bGwgc2NyZWVuLCBzb21ldGltZXMgdGhlXG4gKiBicm93c2VyJ3MgZGVmYXVsdCBjb250cm9scyB3aWxsIGJlIHNob3duLCBhbmQgbm90IHRoZSBWaWRlby5qcyBjdXN0b20gc2tpbi5cbiAqIFRoaXMgaW5jbHVkZXMgbW9zdCBtb2JpbGUgZGV2aWNlcyAoaU9TLCBBbmRyb2lkKSBhbmQgb2xkZXIgdmVyc2lvbnMgb2ZcbiAqIFNhZmFyaS5cbiAqXG4gKiBAcmV0dXJuIHt2anMuUGxheWVyfSBzZWxmXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnJlcXVlc3RGdWxsc2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgdmFyIGZzQXBpID0gdmpzLmJyb3dzZXIuZnVsbHNjcmVlbkFQSTtcblxuICB0aGlzLmlzRnVsbHNjcmVlbih0cnVlKTtcblxuICBpZiAoZnNBcGkpIHtcbiAgICAvLyB0aGUgYnJvd3NlciBzdXBwb3J0cyBnb2luZyBmdWxsc2NyZWVuIGF0IHRoZSBlbGVtZW50IGxldmVsIHNvIHdlIGNhblxuICAgIC8vIHRha2UgdGhlIGNvbnRyb2xzIGZ1bGxzY3JlZW4gYXMgd2VsbCBhcyB0aGUgdmlkZW9cblxuICAgIC8vIFRyaWdnZXIgZnVsbHNjcmVlbmNoYW5nZSBldmVudCBhZnRlciBjaGFuZ2VcbiAgICAvLyBXZSBoYXZlIHRvIHNwZWNpZmljYWxseSBhZGQgdGhpcyBlYWNoIHRpbWUsIGFuZCByZW1vdmVcbiAgICAvLyB3aGVuIGNhbmNlbGxpbmcgZnVsbHNjcmVlbi4gT3RoZXJ3aXNlIGlmIHRoZXJlJ3MgbXVsdGlwbGVcbiAgICAvLyBwbGF5ZXJzIG9uIGEgcGFnZSwgdGhleSB3b3VsZCBhbGwgYmUgcmVhY3RpbmcgdG8gdGhlIHNhbWUgZnVsbHNjcmVlblxuICAgIC8vIGV2ZW50c1xuICAgIHZqcy5vbihkb2N1bWVudCwgZnNBcGlbJ2Z1bGxzY3JlZW5jaGFuZ2UnXSwgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oZSl7XG4gICAgICB0aGlzLmlzRnVsbHNjcmVlbihkb2N1bWVudFtmc0FwaS5mdWxsc2NyZWVuRWxlbWVudF0pO1xuXG4gICAgICAvLyBJZiBjYW5jZWxsaW5nIGZ1bGxzY3JlZW4sIHJlbW92ZSBldmVudCBsaXN0ZW5lci5cbiAgICAgIGlmICh0aGlzLmlzRnVsbHNjcmVlbigpID09PSBmYWxzZSkge1xuICAgICAgICB2anMub2ZmKGRvY3VtZW50LCBmc0FwaVsnZnVsbHNjcmVlbmNoYW5nZSddLCBhcmd1bWVudHMuY2FsbGVlKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmlnZ2VyKCdmdWxsc2NyZWVuY2hhbmdlJyk7XG4gICAgfSkpO1xuXG4gICAgdGhpcy5lbF9bZnNBcGkucmVxdWVzdEZ1bGxzY3JlZW5dKCk7XG5cbiAgfSBlbHNlIGlmICh0aGlzLnRlY2guc3VwcG9ydHNGdWxsU2NyZWVuKCkpIHtcbiAgICAvLyB3ZSBjYW4ndCB0YWtlIHRoZSB2aWRlby5qcyBjb250cm9scyBmdWxsc2NyZWVuIGJ1dCB3ZSBjYW4gZ28gZnVsbHNjcmVlblxuICAgIC8vIHdpdGggbmF0aXZlIGNvbnRyb2xzXG4gICAgdGhpcy50ZWNoQ2FsbCgnZW50ZXJGdWxsU2NyZWVuJyk7XG4gIH0gZWxzZSB7XG4gICAgLy8gZnVsbHNjcmVlbiBpc24ndCBzdXBwb3J0ZWQgc28gd2UnbGwganVzdCBzdHJldGNoIHRoZSB2aWRlbyBlbGVtZW50IHRvXG4gICAgLy8gZmlsbCB0aGUgdmlld3BvcnRcbiAgICB0aGlzLmVudGVyRnVsbFdpbmRvdygpO1xuICAgIHRoaXMudHJpZ2dlcignZnVsbHNjcmVlbmNoYW5nZScpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIE9sZCBuYW1pbmcgZm9yIHJlcXVlc3RGdWxsc2NyZWVuXG4gKiBAZGVwcmVjYXRlZCBmb3IgbG93ZXIgY2FzZSAncycgdmVyc2lvblxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5yZXF1ZXN0RnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5sb2cud2FybigncGxheWVyLnJlcXVlc3RGdWxsU2NyZWVuKCkgaGFzIGJlZW4gZGVwcmVjYXRlZCwgdXNlIHBsYXllci5yZXF1ZXN0RnVsbHNjcmVlbigpIHdpdGggYSBsb3dlcmNhc2UgXCJzXCIpJyk7XG4gIHJldHVybiB0aGlzLnJlcXVlc3RGdWxsc2NyZWVuKCk7XG59O1xuXG5cbi8qKlxuICogUmV0dXJuIHRoZSB2aWRlbyB0byBpdHMgbm9ybWFsIHNpemUgYWZ0ZXIgaGF2aW5nIGJlZW4gaW4gZnVsbCBzY3JlZW4gbW9kZVxuICpcbiAqICAgICBteVBsYXllci5leGl0RnVsbHNjcmVlbigpO1xuICpcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGZcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuZXhpdEZ1bGxzY3JlZW4gPSBmdW5jdGlvbigpe1xuICB2YXIgZnNBcGkgPSB2anMuYnJvd3Nlci5mdWxsc2NyZWVuQVBJO1xuICB0aGlzLmlzRnVsbHNjcmVlbihmYWxzZSk7XG5cbiAgLy8gQ2hlY2sgZm9yIGJyb3dzZXIgZWxlbWVudCBmdWxsc2NyZWVuIHN1cHBvcnRcbiAgaWYgKGZzQXBpKSB7XG4gICAgZG9jdW1lbnRbZnNBcGkuZXhpdEZ1bGxzY3JlZW5dKCk7XG4gIH0gZWxzZSBpZiAodGhpcy50ZWNoLnN1cHBvcnRzRnVsbFNjcmVlbigpKSB7XG4gICB0aGlzLnRlY2hDYWxsKCdleGl0RnVsbFNjcmVlbicpO1xuICB9IGVsc2Uge1xuICAgdGhpcy5leGl0RnVsbFdpbmRvdygpO1xuICAgdGhpcy50cmlnZ2VyKCdmdWxsc2NyZWVuY2hhbmdlJyk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogT2xkIG5hbWluZyBmb3IgZXhpdEZ1bGxzY3JlZW5cbiAqIEBkZXByZWNhdGVkIGZvciBleGl0RnVsbHNjcmVlblxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5jYW5jZWxGdWxsU2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgdmpzLmxvZy53YXJuKCdwbGF5ZXIuY2FuY2VsRnVsbFNjcmVlbigpIGhhcyBiZWVuIGRlcHJlY2F0ZWQsIHVzZSBwbGF5ZXIuZXhpdEZ1bGxzY3JlZW4oKScpO1xuICByZXR1cm4gdGhpcy5leGl0RnVsbHNjcmVlbigpO1xufTtcblxuLy8gV2hlbiBmdWxsc2NyZWVuIGlzbid0IHN1cHBvcnRlZCB3ZSBjYW4gc3RyZXRjaCB0aGUgdmlkZW8gY29udGFpbmVyIHRvIGFzIHdpZGUgYXMgdGhlIGJyb3dzZXIgd2lsbCBsZXQgdXMuXG52anMuUGxheWVyLnByb3RvdHlwZS5lbnRlckZ1bGxXaW5kb3cgPSBmdW5jdGlvbigpe1xuICB0aGlzLmlzRnVsbFdpbmRvdyA9IHRydWU7XG5cbiAgLy8gU3RvcmluZyBvcmlnaW5hbCBkb2Mgb3ZlcmZsb3cgdmFsdWUgdG8gcmV0dXJuIHRvIHdoZW4gZnVsbHNjcmVlbiBpcyBvZmZcbiAgdGhpcy5kb2NPcmlnT3ZlcmZsb3cgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3c7XG5cbiAgLy8gQWRkIGxpc3RlbmVyIGZvciBlc2Mga2V5IHRvIGV4aXQgZnVsbHNjcmVlblxuICB2anMub24oZG9jdW1lbnQsICdrZXlkb3duJywgdmpzLmJpbmQodGhpcywgdGhpcy5mdWxsV2luZG93T25Fc2NLZXkpKTtcblxuICAvLyBIaWRlIGFueSBzY3JvbGwgYmFyc1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcblxuICAvLyBBcHBseSBmdWxsc2NyZWVuIHN0eWxlc1xuICB2anMuYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgJ3Zqcy1mdWxsLXdpbmRvdycpO1xuXG4gIHRoaXMudHJpZ2dlcignZW50ZXJGdWxsV2luZG93Jyk7XG59O1xudmpzLlBsYXllci5wcm90b3R5cGUuZnVsbFdpbmRvd09uRXNjS2V5ID0gZnVuY3Rpb24oZXZlbnQpe1xuICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMjcpIHtcbiAgICBpZiAodGhpcy5pc0Z1bGxzY3JlZW4oKSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5leGl0RnVsbHNjcmVlbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV4aXRGdWxsV2luZG93KCk7XG4gICAgfVxuICB9XG59O1xuXG52anMuUGxheWVyLnByb3RvdHlwZS5leGl0RnVsbFdpbmRvdyA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuaXNGdWxsV2luZG93ID0gZmFsc2U7XG4gIHZqcy5vZmYoZG9jdW1lbnQsICdrZXlkb3duJywgdGhpcy5mdWxsV2luZG93T25Fc2NLZXkpO1xuXG4gIC8vIFVuaGlkZSBzY3JvbGwgYmFycy5cbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gdGhpcy5kb2NPcmlnT3ZlcmZsb3c7XG5cbiAgLy8gUmVtb3ZlIGZ1bGxzY3JlZW4gc3R5bGVzXG4gIHZqcy5yZW1vdmVDbGFzcyhkb2N1bWVudC5ib2R5LCAndmpzLWZ1bGwtd2luZG93Jyk7XG5cbiAgLy8gUmVzaXplIHRoZSBib3gsIGNvbnRyb2xsZXIsIGFuZCBwb3N0ZXIgdG8gb3JpZ2luYWwgc2l6ZXNcbiAgLy8gdGhpcy5wb3NpdGlvbkFsbCgpO1xuICB0aGlzLnRyaWdnZXIoJ2V4aXRGdWxsV2luZG93Jyk7XG59O1xuXG52anMuUGxheWVyLnByb3RvdHlwZS5zZWxlY3RTb3VyY2UgPSBmdW5jdGlvbihzb3VyY2VzKXtcblxuICAvLyBMb29wIHRocm91Z2ggZWFjaCBwbGF5YmFjayB0ZWNobm9sb2d5IGluIHRoZSBvcHRpb25zIG9yZGVyXG4gIGZvciAodmFyIGk9MCxqPXRoaXMub3B0aW9uc19bJ3RlY2hPcmRlciddO2k8ai5sZW5ndGg7aSsrKSB7XG4gICAgdmFyIHRlY2hOYW1lID0gdmpzLmNhcGl0YWxpemUoaltpXSksXG4gICAgICAgIHRlY2ggPSB3aW5kb3dbJ3ZpZGVvanMnXVt0ZWNoTmFtZV07XG5cbiAgICAvLyBDaGVjayBpZiB0aGUgY3VycmVudCB0ZWNoIGlzIGRlZmluZWQgYmVmb3JlIGNvbnRpbnVpbmdcbiAgICBpZiAoIXRlY2gpIHtcbiAgICAgIHZqcy5sb2cuZXJyb3IoJ1RoZSBcIicgKyB0ZWNoTmFtZSArICdcIiB0ZWNoIGlzIHVuZGVmaW5lZC4gU2tpcHBlZCBicm93c2VyIHN1cHBvcnQgY2hlY2sgZm9yIHRoYXQgdGVjaC4nKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoaXMgdGVjaG5vbG9neVxuICAgIGlmICh0ZWNoLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgIC8vIExvb3AgdGhyb3VnaCBlYWNoIHNvdXJjZSBvYmplY3RcbiAgICAgIGZvciAodmFyIGE9MCxiPXNvdXJjZXM7YTxiLmxlbmd0aDthKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGJbYV07XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgc291cmNlIGNhbiBiZSBwbGF5ZWQgd2l0aCB0aGlzIHRlY2hub2xvZ3lcbiAgICAgICAgaWYgKHRlY2hbJ2NhblBsYXlTb3VyY2UnXShzb3VyY2UpKSB7XG4gICAgICAgICAgcmV0dXJuIHsgc291cmNlOiBzb3VyY2UsIHRlY2g6IHRlY2hOYW1lIH07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFRoZSBzb3VyY2UgZnVuY3Rpb24gdXBkYXRlcyB0aGUgdmlkZW8gc291cmNlXG4gKlxuICogVGhlcmUgYXJlIHRocmVlIHR5cGVzIG9mIHZhcmlhYmxlcyB5b3UgY2FuIHBhc3MgYXMgdGhlIGFyZ3VtZW50LlxuICpcbiAqICoqVVJMIFN0cmluZyoqOiBBIFVSTCB0byB0aGUgdGhlIHZpZGVvIGZpbGUuIFVzZSB0aGlzIG1ldGhvZCBpZiB5b3UgYXJlIHN1cmVcbiAqIHRoZSBjdXJyZW50IHBsYXliYWNrIHRlY2hub2xvZ3kgKEhUTUw1L0ZsYXNoKSBjYW4gc3VwcG9ydCB0aGUgc291cmNlIHlvdVxuICogcHJvdmlkZS4gQ3VycmVudGx5IG9ubHkgTVA0IGZpbGVzIGNhbiBiZSB1c2VkIGluIGJvdGggSFRNTDUgYW5kIEZsYXNoLlxuICpcbiAqICAgICBteVBsYXllci5zcmMoXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL3BhdGgvdG8vdmlkZW8ubXA0XCIpO1xuICpcbiAqICoqU291cmNlIE9iamVjdCAob3IgZWxlbWVudCk6KiogQSBqYXZhc2NyaXB0IG9iamVjdCBjb250YWluaW5nIGluZm9ybWF0aW9uXG4gKiBhYm91dCB0aGUgc291cmNlIGZpbGUuIFVzZSB0aGlzIG1ldGhvZCBpZiB5b3Ugd2FudCB0aGUgcGxheWVyIHRvIGRldGVybWluZSBpZlxuICogaXQgY2FuIHN1cHBvcnQgdGhlIGZpbGUgdXNpbmcgdGhlIHR5cGUgaW5mb3JtYXRpb24uXG4gKlxuICogICAgIG15UGxheWVyLnNyYyh7IHR5cGU6IFwidmlkZW8vbXA0XCIsIHNyYzogXCJodHRwOi8vd3d3LmV4YW1wbGUuY29tL3BhdGgvdG8vdmlkZW8ubXA0XCIgfSk7XG4gKlxuICogKipBcnJheSBvZiBTb3VyY2UgT2JqZWN0czoqKiBUbyBwcm92aWRlIG11bHRpcGxlIHZlcnNpb25zIG9mIHRoZSBzb3VyY2Ugc29cbiAqIHRoYXQgaXQgY2FuIGJlIHBsYXllZCB1c2luZyBIVE1MNSBhY3Jvc3MgYnJvd3NlcnMgeW91IGNhbiB1c2UgYW4gYXJyYXkgb2ZcbiAqIHNvdXJjZSBvYmplY3RzLiBWaWRlby5qcyB3aWxsIGRldGVjdCB3aGljaCB2ZXJzaW9uIGlzIHN1cHBvcnRlZCBhbmQgbG9hZCB0aGF0XG4gKiBmaWxlLlxuICpcbiAqICAgICBteVBsYXllci5zcmMoW1xuICogICAgICAgeyB0eXBlOiBcInZpZGVvL21wNFwiLCBzcmM6IFwiaHR0cDovL3d3dy5leGFtcGxlLmNvbS9wYXRoL3RvL3ZpZGVvLm1wNFwiIH0sXG4gKiAgICAgICB7IHR5cGU6IFwidmlkZW8vd2VibVwiLCBzcmM6IFwiaHR0cDovL3d3dy5leGFtcGxlLmNvbS9wYXRoL3RvL3ZpZGVvLndlYm1cIiB9LFxuICogICAgICAgeyB0eXBlOiBcInZpZGVvL29nZ1wiLCBzcmM6IFwiaHR0cDovL3d3dy5leGFtcGxlLmNvbS9wYXRoL3RvL3ZpZGVvLm9ndlwiIH1cbiAqICAgICBdKTtcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd8T2JqZWN0fEFycmF5PX0gc291cmNlIFRoZSBzb3VyY2UgVVJMLCBvYmplY3QsIG9yIGFycmF5IG9mIHNvdXJjZXNcbiAqIEByZXR1cm4ge1N0cmluZ30gVGhlIGN1cnJlbnQgdmlkZW8gc291cmNlIHdoZW4gZ2V0dGluZ1xuICogQHJldHVybiB7U3RyaW5nfSBUaGUgcGxheWVyIHdoZW4gc2V0dGluZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5zcmMgPSBmdW5jdGlvbihzb3VyY2Upe1xuICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdGhpcy50ZWNoR2V0KCdzcmMnKTtcbiAgfVxuXG4gIC8vIGNhc2U6IEFycmF5IG9mIHNvdXJjZSBvYmplY3RzIHRvIGNob29zZSBmcm9tIGFuZCBwaWNrIHRoZSBiZXN0IHRvIHBsYXlcbiAgaWYgKHZqcy5vYmouaXNBcnJheShzb3VyY2UpKSB7XG4gICAgdGhpcy5zb3VyY2VMaXN0Xyhzb3VyY2UpO1xuXG4gIC8vIGNhc2U6IFVSTCBTdHJpbmcgKGh0dHA6Ly9teXZpZGVvLi4uKVxuICB9IGVsc2UgaWYgKHR5cGVvZiBzb3VyY2UgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gY3JlYXRlIGEgc291cmNlIG9iamVjdCBmcm9tIHRoZSBzdHJpbmdcbiAgICB0aGlzLnNyYyh7IHNyYzogc291cmNlIH0pO1xuXG4gIC8vIGNhc2U6IFNvdXJjZSBvYmplY3QgeyBzcmM6ICcnLCB0eXBlOiAnJyAuLi4gfVxuICB9IGVsc2UgaWYgKHNvdXJjZSBpbnN0YW5jZW9mIE9iamVjdCkge1xuICAgIC8vIGNoZWNrIGlmIHRoZSBzb3VyY2UgaGFzIGEgdHlwZSBhbmQgdGhlIGxvYWRlZCB0ZWNoIGNhbm5vdCBwbGF5IHRoZSBzb3VyY2VcbiAgICAvLyBpZiB0aGVyZSdzIG5vIHR5cGUgd2UnbGwganVzdCB0cnkgdGhlIGN1cnJlbnQgdGVjaFxuICAgIGlmIChzb3VyY2UudHlwZSAmJiAhd2luZG93Wyd2aWRlb2pzJ11bdGhpcy50ZWNoTmFtZV1bJ2NhblBsYXlTb3VyY2UnXShzb3VyY2UpKSB7XG4gICAgICAvLyBjcmVhdGUgYSBzb3VyY2UgbGlzdCB3aXRoIHRoZSBjdXJyZW50IHNvdXJjZSBhbmQgc2VuZCB0aHJvdWdoXG4gICAgICAvLyB0aGUgdGVjaCBsb29wIHRvIGNoZWNrIGZvciBhIGNvbXBhdGlibGUgdGVjaG5vbG9neVxuICAgICAgdGhpcy5zb3VyY2VMaXN0Xyhbc291cmNlXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FjaGVfLnNyYyA9IHNvdXJjZS5zcmM7XG4gICAgICB0aGlzLmN1cnJlbnRUeXBlXyA9IHNvdXJjZS50eXBlIHx8ICcnO1xuXG4gICAgICAvLyB3YWl0IHVudGlsIHRoZSB0ZWNoIGlzIHJlYWR5IHRvIHNldCB0aGUgc291cmNlXG4gICAgICB0aGlzLnJlYWR5KGZ1bmN0aW9uKCl7XG4gICAgICAgIHRoaXMudGVjaENhbGwoJ3NyYycsIHNvdXJjZS5zcmMpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnNfWydwcmVsb2FkJ10gPT0gJ2F1dG8nKSB7XG4gICAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zX1snYXV0b3BsYXknXSkge1xuICAgICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSGFuZGxlIGFuIGFycmF5IG9mIHNvdXJjZSBvYmplY3RzXG4gKiBAcGFyYW0gIHtbdHlwZV19IHNvdXJjZXMgQXJyYXkgb2Ygc291cmNlIG9iamVjdHNcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnNvdXJjZUxpc3RfID0gZnVuY3Rpb24oc291cmNlcyl7XG4gIHZhciBzb3VyY2VUZWNoID0gdGhpcy5zZWxlY3RTb3VyY2Uoc291cmNlcyksXG4gICAgICBlcnJvclRpbWVvdXQ7XG5cbiAgaWYgKHNvdXJjZVRlY2gpIHtcbiAgICBpZiAoc291cmNlVGVjaC50ZWNoID09PSB0aGlzLnRlY2hOYW1lKSB7XG4gICAgICAvLyBpZiB0aGlzIHRlY2hub2xvZ3kgaXMgYWxyZWFkeSBsb2FkZWQsIHNldCB0aGUgc291cmNlXG4gICAgICB0aGlzLnNyYyhzb3VyY2VUZWNoLnNvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxvYWQgdGhpcyB0ZWNobm9sb2d5IHdpdGggdGhlIGNob3NlbiBzb3VyY2VcbiAgICAgIHRoaXMubG9hZFRlY2goc291cmNlVGVjaC50ZWNoLCBzb3VyY2VUZWNoLnNvdXJjZSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFdlIG5lZWQgdG8gd3JhcCB0aGlzIGluIGEgdGltZW91dCB0byBnaXZlIGZvbGtzIGEgY2hhbmNlIHRvIGFkZCBlcnJvciBldmVudCBoYW5kbGVyc1xuICAgIGVycm9yVGltZW91dCA9IHNldFRpbWVvdXQodmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmVycm9yKHsgY29kZTogNCwgbWVzc2FnZTogdGhpcy5sb2NhbGl6ZSh0aGlzLm9wdGlvbnMoKVsnbm90U3VwcG9ydGVkTWVzc2FnZSddKSB9KTtcbiAgICB9KSwgMCk7XG5cbiAgICAvLyB3ZSBjb3VsZCBub3QgZmluZCBhbiBhcHByb3ByaWF0ZSB0ZWNoLCBidXQgbGV0J3Mgc3RpbGwgbm90aWZ5IHRoZSBkZWxlZ2F0ZSB0aGF0IHRoaXMgaXMgaXRcbiAgICAvLyB0aGlzIG5lZWRzIGEgYmV0dGVyIGNvbW1lbnQgYWJvdXQgd2h5IHRoaXMgaXMgbmVlZGVkXG4gICAgdGhpcy50cmlnZ2VyUmVhZHkoKTtcblxuICAgIHRoaXMub24oJ2Rpc3Bvc2UnLCBmdW5jdGlvbigpIHtcbiAgICAgIGNsZWFyVGltZW91dChlcnJvclRpbWVvdXQpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBCZWdpbiBsb2FkaW5nIHRoZSBzcmMgZGF0YVxuLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy92aWRlby5odG1sI2RvbS1tZWRpYS1sb2FkXG52anMuUGxheWVyLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oKXtcbiAgdGhpcy50ZWNoQ2FsbCgnbG9hZCcpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvdmlkZW8uaHRtbCNkb20tbWVkaWEtY3VycmVudHNyY1xudmpzLlBsYXllci5wcm90b3R5cGUuY3VycmVudFNyYyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLnRlY2hHZXQoJ2N1cnJlbnRTcmMnKSB8fCB0aGlzLmNhY2hlXy5zcmMgfHwgJyc7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgY3VycmVudCBzb3VyY2UgdHlwZSBlLmcuIHZpZGVvL21wNFxuICogVGhpcyBjYW4gYWxsb3cgeW91IHJlYnVpbGQgdGhlIGN1cnJlbnQgc291cmNlIG9iamVjdCBzbyB0aGF0IHlvdSBjb3VsZCBsb2FkIHRoZSBzYW1lXG4gKiBzb3VyY2UgYW5kIHRlY2ggbGF0ZXJcbiAqIEByZXR1cm4ge1N0cmluZ30gVGhlIHNvdXJjZSBNSU1FIHR5cGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuY3VycmVudFR5cGUgPSBmdW5jdGlvbigpe1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnRUeXBlXyB8fCAnJztcbn07XG5cbi8vIEF0dHJpYnV0ZXMvT3B0aW9uc1xudmpzLlBsYXllci5wcm90b3R5cGUucHJlbG9hZCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnRlY2hDYWxsKCdzZXRQcmVsb2FkJywgdmFsdWUpO1xuICAgIHRoaXMub3B0aW9uc19bJ3ByZWxvYWQnXSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLnRlY2hHZXQoJ3ByZWxvYWQnKTtcbn07XG52anMuUGxheWVyLnByb3RvdHlwZS5hdXRvcGxheSA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnRlY2hDYWxsKCdzZXRBdXRvcGxheScsIHZhbHVlKTtcbiAgICB0aGlzLm9wdGlvbnNfWydhdXRvcGxheSddID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMudGVjaEdldCgnYXV0b3BsYXknLCB2YWx1ZSk7XG59O1xudmpzLlBsYXllci5wcm90b3R5cGUubG9vcCA9IGZ1bmN0aW9uKHZhbHVlKXtcbiAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzLnRlY2hDYWxsKCdzZXRMb29wJywgdmFsdWUpO1xuICAgIHRoaXMub3B0aW9uc19bJ2xvb3AnXSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLnRlY2hHZXQoJ2xvb3AnKTtcbn07XG5cbi8qKlxuICogdGhlIHVybCBvZiB0aGUgcG9zdGVyIGltYWdlIHNvdXJjZVxuICogQHR5cGUge1N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnBvc3Rlcl87XG5cbi8qKlxuICogZ2V0IG9yIHNldCB0aGUgcG9zdGVyIGltYWdlIHNvdXJjZSB1cmxcbiAqXG4gKiAjIyMjIyBFWEFNUExFOlxuICpcbiAqICAgICAvLyBnZXR0aW5nXG4gKiAgICAgdmFyIGN1cnJlbnRQb3N0ZXIgPSBteVBsYXllci5wb3N0ZXIoKTtcbiAqXG4gKiAgICAgLy8gc2V0dGluZ1xuICogICAgIG15UGxheWVyLnBvc3RlcignaHR0cDovL2V4YW1wbGUuY29tL215SW1hZ2UuanBnJyk7XG4gKlxuICogQHBhcmFtICB7U3RyaW5nPX0gW3NyY10gUG9zdGVyIGltYWdlIHNvdXJjZSBVUkxcbiAqIEByZXR1cm4ge1N0cmluZ30gcG9zdGVyIFVSTCB3aGVuIGdldHRpbmdcbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9IHNlbGYgd2hlbiBzZXR0aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnBvc3RlciA9IGZ1bmN0aW9uKHNyYyl7XG4gIGlmIChzcmMgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLnBvc3Rlcl87XG4gIH1cblxuICAvLyB1cGRhdGUgdGhlIGludGVybmFsIHBvc3RlciB2YXJpYWJsZVxuICB0aGlzLnBvc3Rlcl8gPSBzcmM7XG5cbiAgLy8gdXBkYXRlIHRoZSB0ZWNoJ3MgcG9zdGVyXG4gIHRoaXMudGVjaENhbGwoJ3NldFBvc3RlcicsIHNyYyk7XG5cbiAgLy8gYWxlcnQgY29tcG9uZW50cyB0aGF0IHRoZSBwb3N0ZXIgaGFzIGJlZW4gc2V0XG4gIHRoaXMudHJpZ2dlcigncG9zdGVyY2hhbmdlJyk7XG59O1xuXG4vKipcbiAqIFdoZXRoZXIgb3Igbm90IHRoZSBjb250cm9scyBhcmUgc2hvd2luZ1xuICogQHR5cGUge0Jvb2xlYW59XG4gKiBAcHJpdmF0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5jb250cm9sc187XG5cbi8qKlxuICogR2V0IG9yIHNldCB3aGV0aGVyIG9yIG5vdCB0aGUgY29udHJvbHMgYXJlIHNob3dpbmcuXG4gKiBAcGFyYW0gIHtCb29sZWFufSBjb250cm9scyBTZXQgY29udHJvbHMgdG8gc2hvd2luZyBvciBub3RcbiAqIEByZXR1cm4ge0Jvb2xlYW59ICAgIENvbnRyb2xzIGFyZSBzaG93aW5nXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmNvbnRyb2xzID0gZnVuY3Rpb24oYm9vbCl7XG4gIGlmIChib29sICE9PSB1bmRlZmluZWQpIHtcbiAgICBib29sID0gISFib29sOyAvLyBmb3JjZSBib29sZWFuXG4gICAgLy8gRG9uJ3QgdHJpZ2dlciBhIGNoYW5nZSBldmVudCB1bmxlc3MgaXQgYWN0dWFsbHkgY2hhbmdlZFxuICAgIGlmICh0aGlzLmNvbnRyb2xzXyAhPT0gYm9vbCkge1xuICAgICAgdGhpcy5jb250cm9sc18gPSBib29sO1xuICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWNvbnRyb2xzLWRpc2FibGVkJyk7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1jb250cm9scy1lbmFibGVkJyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcignY29udHJvbHNlbmFibGVkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtY29udHJvbHMtZW5hYmxlZCcpO1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtY29udHJvbHMtZGlzYWJsZWQnKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjb250cm9sc2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLmNvbnRyb2xzXztcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnVzaW5nTmF0aXZlQ29udHJvbHNfO1xuXG4vKipcbiAqIFRvZ2dsZSBuYXRpdmUgY29udHJvbHMgb24vb2ZmLiBOYXRpdmUgY29udHJvbHMgYXJlIHRoZSBjb250cm9scyBidWlsdCBpbnRvXG4gKiBkZXZpY2VzIChlLmcuIGRlZmF1bHQgaVBob25lIGNvbnRyb2xzKSwgRmxhc2gsIG9yIG90aGVyIHRlY2hzXG4gKiAoZS5nLiBWaW1lbyBDb250cm9scylcbiAqXG4gKiAqKlRoaXMgc2hvdWxkIG9ubHkgYmUgc2V0IGJ5IHRoZSBjdXJyZW50IHRlY2gsIGJlY2F1c2Ugb25seSB0aGUgdGVjaCBrbm93c1xuICogaWYgaXQgY2FuIHN1cHBvcnQgbmF0aXZlIGNvbnRyb2xzKipcbiAqXG4gKiBAcGFyYW0gIHtCb29sZWFufSBib29sICAgIFRydWUgc2lnbmFscyB0aGF0IG5hdGl2ZSBjb250cm9scyBhcmUgb25cbiAqIEByZXR1cm4ge3Zqcy5QbGF5ZXJ9ICAgICAgUmV0dXJucyB0aGUgcGxheWVyXG4gKiBAcHJpdmF0ZVxuICovXG52anMuUGxheWVyLnByb3RvdHlwZS51c2luZ05hdGl2ZUNvbnRyb2xzID0gZnVuY3Rpb24oYm9vbCl7XG4gIGlmIChib29sICE9PSB1bmRlZmluZWQpIHtcbiAgICBib29sID0gISFib29sOyAvLyBmb3JjZSBib29sZWFuXG4gICAgLy8gRG9uJ3QgdHJpZ2dlciBhIGNoYW5nZSBldmVudCB1bmxlc3MgaXQgYWN0dWFsbHkgY2hhbmdlZFxuICAgIGlmICh0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHNfICE9PSBib29sKSB7XG4gICAgICB0aGlzLnVzaW5nTmF0aXZlQ29udHJvbHNfID0gYm9vbDtcbiAgICAgIGlmIChib29sKSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy11c2luZy1uYXRpdmUtY29udHJvbHMnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogcGxheWVyIGlzIHVzaW5nIHRoZSBuYXRpdmUgZGV2aWNlIGNvbnRyb2xzXG4gICAgICAgICAqXG4gICAgICAgICAqIEBldmVudCB1c2luZ25hdGl2ZWNvbnRyb2xzXG4gICAgICAgICAqIEBtZW1iZXJvZiB2anMuUGxheWVyXG4gICAgICAgICAqIEBpbnN0YW5jZVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyKCd1c2luZ25hdGl2ZWNvbnRyb2xzJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtdXNpbmctbmF0aXZlLWNvbnRyb2xzJyk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHBsYXllciBpcyB1c2luZyB0aGUgY3VzdG9tIEhUTUwgY29udHJvbHNcbiAgICAgICAgICpcbiAgICAgICAgICogQGV2ZW50IHVzaW5nY3VzdG9tY29udHJvbHNcbiAgICAgICAgICogQG1lbWJlcm9mIHZqcy5QbGF5ZXJcbiAgICAgICAgICogQGluc3RhbmNlXG4gICAgICAgICAqIEBwcml2YXRlXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ3VzaW5nY3VzdG9tY29udHJvbHMnKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgcmV0dXJuIHRoaXMudXNpbmdOYXRpdmVDb250cm9sc187XG59O1xuXG4vKipcbiAqIFN0b3JlIHRoZSBjdXJyZW50IG1lZGlhIGVycm9yXG4gKiBAdHlwZSB7T2JqZWN0fVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuZXJyb3JfID0gbnVsbDtcblxuLyoqXG4gKiBTZXQgb3IgZ2V0IHRoZSBjdXJyZW50IE1lZGlhRXJyb3JcbiAqIEBwYXJhbSAgeyp9IGVyciBBIE1lZGlhRXJyb3Igb3IgYSBTdHJpbmcvTnVtYmVyIHRvIGJlIHR1cm5lZCBpbnRvIGEgTWVkaWFFcnJvclxuICogQHJldHVybiB7dmpzLk1lZGlhRXJyb3J8bnVsbH0gICAgIHdoZW4gZ2V0dGluZ1xuICogQHJldHVybiB7dmpzLlBsYXllcn0gICAgICAgICAgICAgIHdoZW4gc2V0dGluZ1xuICovXG52anMuUGxheWVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGVycil7XG4gIGlmIChlcnIgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzLmVycm9yXztcbiAgfVxuXG4gIC8vIHJlc3RvcmluZyB0byBkZWZhdWx0XG4gIGlmIChlcnIgPT09IG51bGwpIHtcbiAgICB0aGlzLmVycm9yXyA9IGVycjtcbiAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtZXJyb3InKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIGVycm9yIGluc3RhbmNlXG4gIGlmIChlcnIgaW5zdGFuY2VvZiB2anMuTWVkaWFFcnJvcikge1xuICAgIHRoaXMuZXJyb3JfID0gZXJyO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuZXJyb3JfID0gbmV3IHZqcy5NZWRpYUVycm9yKGVycik7XG4gIH1cblxuICAvLyBmaXJlIGFuIGVycm9yIGV2ZW50IG9uIHRoZSBwbGF5ZXJcbiAgdGhpcy50cmlnZ2VyKCdlcnJvcicpO1xuXG4gIC8vIGFkZCB0aGUgdmpzLWVycm9yIGNsYXNzbmFtZSB0byB0aGUgcGxheWVyXG4gIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1lcnJvcicpO1xuXG4gIC8vIGxvZyB0aGUgbmFtZSBvZiB0aGUgZXJyb3IgdHlwZSBhbmQgYW55IG1lc3NhZ2VcbiAgLy8gaWU4IGp1c3QgbG9ncyBcIltvYmplY3Qgb2JqZWN0XVwiIGlmIHlvdSBqdXN0IGxvZyB0aGUgZXJyb3Igb2JqZWN0XG4gIHZqcy5sb2cuZXJyb3IoJyhDT0RFOicrdGhpcy5lcnJvcl8uY29kZSsnICcrdmpzLk1lZGlhRXJyb3IuZXJyb3JUeXBlc1t0aGlzLmVycm9yXy5jb2RlXSsnKScsIHRoaXMuZXJyb3JfLm1lc3NhZ2UsIHRoaXMuZXJyb3JfKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmVuZGVkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaEdldCgnZW5kZWQnKTsgfTtcbnZqcy5QbGF5ZXIucHJvdG90eXBlLnNlZWtpbmcgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoR2V0KCdzZWVraW5nJyk7IH07XG5cbi8vIFdoZW4gdGhlIHBsYXllciBpcyBmaXJzdCBpbml0aWFsaXplZCwgdHJpZ2dlciBhY3Rpdml0eSBzbyBjb21wb25lbnRzXG4vLyBsaWtlIHRoZSBjb250cm9sIGJhciBzaG93IHRoZW1zZWx2ZXMgaWYgbmVlZGVkXG52anMuUGxheWVyLnByb3RvdHlwZS51c2VyQWN0aXZpdHlfID0gdHJ1ZTtcbnZqcy5QbGF5ZXIucHJvdG90eXBlLnJlcG9ydFVzZXJBY3Rpdml0eSA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdGhpcy51c2VyQWN0aXZpdHlfID0gdHJ1ZTtcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnVzZXJBY3RpdmVfID0gdHJ1ZTtcbnZqcy5QbGF5ZXIucHJvdG90eXBlLnVzZXJBY3RpdmUgPSBmdW5jdGlvbihib29sKXtcbiAgaWYgKGJvb2wgIT09IHVuZGVmaW5lZCkge1xuICAgIGJvb2wgPSAhIWJvb2w7XG4gICAgaWYgKGJvb2wgIT09IHRoaXMudXNlckFjdGl2ZV8pIHtcbiAgICAgIHRoaXMudXNlckFjdGl2ZV8gPSBib29sO1xuICAgICAgaWYgKGJvb2wpIHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgd2FzIGluYWN0aXZlIGFuZCBpcyBub3cgYWN0aXZlIHdlIHdhbnQgdG8gcmVzZXQgdGhlXG4gICAgICAgIC8vIGluYWN0aXZpdHkgdGltZXJcbiAgICAgICAgdGhpcy51c2VyQWN0aXZpdHlfID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXVzZXItaW5hY3RpdmUnKTtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLXVzZXItYWN0aXZlJyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcigndXNlcmFjdGl2ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gV2UncmUgc3dpdGNoaW5nIHRoZSBzdGF0ZSB0byBpbmFjdGl2ZSBtYW51YWxseSwgc28gZXJhc2UgYW55IG90aGVyXG4gICAgICAgIC8vIGFjdGl2aXR5XG4gICAgICAgIHRoaXMudXNlckFjdGl2aXR5XyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIENocm9tZS9TYWZhcmkvSUUgaGF2ZSBidWdzIHdoZXJlIHdoZW4geW91IGNoYW5nZSB0aGUgY3Vyc29yIGl0IGNhblxuICAgICAgICAvLyB0cmlnZ2VyIGEgbW91c2Vtb3ZlIGV2ZW50LiBUaGlzIGNhdXNlcyBhbiBpc3N1ZSB3aGVuIHlvdSdyZSBoaWRpbmdcbiAgICAgICAgLy8gdGhlIGN1cnNvciB3aGVuIHRoZSB1c2VyIGlzIGluYWN0aXZlLCBhbmQgYSBtb3VzZW1vdmUgc2lnbmFscyB1c2VyXG4gICAgICAgIC8vIGFjdGl2aXR5LiBNYWtpbmcgaXQgaW1wb3NzaWJsZSB0byBnbyBpbnRvIGluYWN0aXZlIG1vZGUuIFNwZWNpZmljYWxseVxuICAgICAgICAvLyB0aGlzIGhhcHBlbnMgaW4gZnVsbHNjcmVlbiB3aGVuIHdlIHJlYWxseSBuZWVkIHRvIGhpZGUgdGhlIGN1cnNvci5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2hlbiB0aGlzIGdldHMgcmVzb2x2ZWQgaW4gQUxMIGJyb3dzZXJzIGl0IGNhbiBiZSByZW1vdmVkXG4gICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xMDMwNDFcbiAgICAgICAgaWYodGhpcy50ZWNoKSB7XG4gICAgICAgICAgdGhpcy50ZWNoLm9uZSgnbW91c2Vtb3ZlJywgZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLXVzZXItYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy11c2VyLWluYWN0aXZlJyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcigndXNlcmluYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHJldHVybiB0aGlzLnVzZXJBY3RpdmVfO1xufTtcblxudmpzLlBsYXllci5wcm90b3R5cGUubGlzdGVuRm9yVXNlckFjdGl2aXR5ID0gZnVuY3Rpb24oKXtcbiAgdmFyIG9uQWN0aXZpdHksIG9uTW91c2VNb3ZlLCBvbk1vdXNlRG93biwgbW91c2VJblByb2dyZXNzLCBvbk1vdXNlVXAsXG4gICAgICBhY3Rpdml0eUNoZWNrLCBpbmFjdGl2aXR5VGltZW91dCwgbGFzdE1vdmVYLCBsYXN0TW92ZVk7XG5cbiAgb25BY3Rpdml0eSA9IHZqcy5iaW5kKHRoaXMsIHRoaXMucmVwb3J0VXNlckFjdGl2aXR5KTtcblxuICBvbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICAvLyAjMTA2OCAtIFByZXZlbnQgbW91c2Vtb3ZlIHNwYW1taW5nXG4gICAgLy8gQ2hyb21lIEJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM2Njk3MFxuICAgIGlmKGUuc2NyZWVuWCAhPSBsYXN0TW92ZVggfHwgZS5zY3JlZW5ZICE9IGxhc3RNb3ZlWSkge1xuICAgICAgbGFzdE1vdmVYID0gZS5zY3JlZW5YO1xuICAgICAgbGFzdE1vdmVZID0gZS5zY3JlZW5ZO1xuICAgICAgb25BY3Rpdml0eSgpO1xuICAgIH1cbiAgfTtcblxuICBvbk1vdXNlRG93biA9IGZ1bmN0aW9uKCkge1xuICAgIG9uQWN0aXZpdHkoKTtcbiAgICAvLyBGb3IgYXMgbG9uZyBhcyB0aGUgdGhleSBhcmUgdG91Y2hpbmcgdGhlIGRldmljZSBvciBoYXZlIHRoZWlyIG1vdXNlIGRvd24sXG4gICAgLy8gd2UgY29uc2lkZXIgdGhlbSBhY3RpdmUgZXZlbiBpZiB0aGV5J3JlIG5vdCBtb3ZpbmcgdGhlaXIgZmluZ2VyIG9yIG1vdXNlLlxuICAgIC8vIFNvIHdlIHdhbnQgdG8gY29udGludWUgdG8gdXBkYXRlIHRoYXQgdGhleSBhcmUgYWN0aXZlXG4gICAgY2xlYXJJbnRlcnZhbChtb3VzZUluUHJvZ3Jlc3MpO1xuICAgIC8vIFNldHRpbmcgdXNlckFjdGl2aXR5PXRydWUgbm93IGFuZCBzZXR0aW5nIHRoZSBpbnRlcnZhbCB0byB0aGUgc2FtZSB0aW1lXG4gICAgLy8gYXMgdGhlIGFjdGl2aXR5Q2hlY2sgaW50ZXJ2YWwgKDI1MCkgc2hvdWxkIGVuc3VyZSB3ZSBuZXZlciBtaXNzIHRoZVxuICAgIC8vIG5leHQgYWN0aXZpdHlDaGVja1xuICAgIG1vdXNlSW5Qcm9ncmVzcyA9IHNldEludGVydmFsKG9uQWN0aXZpdHksIDI1MCk7XG4gIH07XG5cbiAgb25Nb3VzZVVwID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBvbkFjdGl2aXR5KCk7XG4gICAgLy8gU3RvcCB0aGUgaW50ZXJ2YWwgdGhhdCBtYWludGFpbnMgYWN0aXZpdHkgaWYgdGhlIG1vdXNlL3RvdWNoIGlzIGRvd25cbiAgICBjbGVhckludGVydmFsKG1vdXNlSW5Qcm9ncmVzcyk7XG4gIH07XG5cbiAgLy8gQW55IG1vdXNlIG1vdmVtZW50IHdpbGwgYmUgY29uc2lkZXJlZCB1c2VyIGFjdGl2aXR5XG4gIHRoaXMub24oJ21vdXNlZG93bicsIG9uTW91c2VEb3duKTtcbiAgdGhpcy5vbignbW91c2Vtb3ZlJywgb25Nb3VzZU1vdmUpO1xuICB0aGlzLm9uKCdtb3VzZXVwJywgb25Nb3VzZVVwKTtcblxuICAvLyBMaXN0ZW4gZm9yIGtleWJvYXJkIG5hdmlnYXRpb25cbiAgLy8gU2hvdWxkbid0IG5lZWQgdG8gdXNlIGluUHJvZ3Jlc3MgaW50ZXJ2YWwgYmVjYXVzZSBvZiBrZXkgcmVwZWF0XG4gIHRoaXMub24oJ2tleWRvd24nLCBvbkFjdGl2aXR5KTtcbiAgdGhpcy5vbigna2V5dXAnLCBvbkFjdGl2aXR5KTtcblxuICAvLyBSdW4gYW4gaW50ZXJ2YWwgZXZlcnkgMjUwIG1pbGxpc2Vjb25kcyBpbnN0ZWFkIG9mIHN0dWZmaW5nIGV2ZXJ5dGhpbmcgaW50b1xuICAvLyB0aGUgbW91c2Vtb3ZlL3RvdWNobW92ZSBmdW5jdGlvbiBpdHNlbGYsIHRvIHByZXZlbnQgcGVyZm9ybWFuY2UgZGVncmFkYXRpb24uXG4gIC8vIGB0aGlzLnJlcG9ydFVzZXJBY3Rpdml0eWAgc2ltcGx5IHNldHMgdGhpcy51c2VyQWN0aXZpdHlfIHRvIHRydWUsIHdoaWNoXG4gIC8vIHRoZW4gZ2V0cyBwaWNrZWQgdXAgYnkgdGhpcyBsb29wXG4gIC8vIGh0dHA6Ly9lam9obi5vcmcvYmxvZy9sZWFybmluZy1mcm9tLXR3aXR0ZXIvXG4gIGFjdGl2aXR5Q2hlY2sgPSBzZXRJbnRlcnZhbCh2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpIHtcbiAgICAvLyBDaGVjayB0byBzZWUgaWYgbW91c2UvdG91Y2ggYWN0aXZpdHkgaGFzIGhhcHBlbmVkXG4gICAgaWYgKHRoaXMudXNlckFjdGl2aXR5Xykge1xuICAgICAgLy8gUmVzZXQgdGhlIGFjdGl2aXR5IHRyYWNrZXJcbiAgICAgIHRoaXMudXNlckFjdGl2aXR5XyA9IGZhbHNlO1xuXG4gICAgICAvLyBJZiB0aGUgdXNlciBzdGF0ZSB3YXMgaW5hY3RpdmUsIHNldCB0aGUgc3RhdGUgdG8gYWN0aXZlXG4gICAgICB0aGlzLnVzZXJBY3RpdmUodHJ1ZSk7XG5cbiAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBpbmFjdGl2aXR5IHRpbWVvdXQgdG8gc3RhcnQgdGhlIHRpbWVyIG92ZXJcbiAgICAgIGNsZWFyVGltZW91dChpbmFjdGl2aXR5VGltZW91dCk7XG5cbiAgICAgIHZhciB0aW1lb3V0ID0gdGhpcy5vcHRpb25zKClbJ2luYWN0aXZpdHlUaW1lb3V0J107XG4gICAgICBpZiAodGltZW91dCA+IDApIHtcbiAgICAgICAgICAvLyBJbiA8dGltZW91dD4gbWlsbGlzZWNvbmRzLCBpZiBubyBtb3JlIGFjdGl2aXR5IGhhcyBvY2N1cnJlZCB0aGVcbiAgICAgICAgICAvLyB1c2VyIHdpbGwgYmUgY29uc2lkZXJlZCBpbmFjdGl2ZVxuICAgICAgICAgIGluYWN0aXZpdHlUaW1lb3V0ID0gc2V0VGltZW91dCh2anMuYmluZCh0aGlzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIC8vIFByb3RlY3QgYWdhaW5zdCB0aGUgY2FzZSB3aGVyZSB0aGUgaW5hY3Rpdml0eVRpbWVvdXQgY2FuIHRyaWdnZXIganVzdFxuICAgICAgICAgICAgICAvLyBiZWZvcmUgdGhlIG5leHQgdXNlciBhY3Rpdml0eSBpcyBwaWNrZWQgdXAgYnkgdGhlIGFjdGl2aXR5Q2hlY2sgbG9vcFxuICAgICAgICAgICAgICAvLyBjYXVzaW5nIGEgZmxpY2tlclxuICAgICAgICAgICAgICBpZiAoIXRoaXMudXNlckFjdGl2aXR5Xykge1xuICAgICAgICAgICAgICAgICAgdGhpcy51c2VyQWN0aXZlKGZhbHNlKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0pLCB0aW1lb3V0KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pLCAyNTApO1xuXG4gIC8vIENsZWFuIHVwIHRoZSBpbnRlcnZhbHMgd2hlbiB3ZSBraWxsIHRoZSBwbGF5ZXJcbiAgdGhpcy5vbignZGlzcG9zZScsIGZ1bmN0aW9uKCl7XG4gICAgY2xlYXJJbnRlcnZhbChhY3Rpdml0eUNoZWNrKTtcbiAgICBjbGVhclRpbWVvdXQoaW5hY3Rpdml0eVRpbWVvdXQpO1xuICB9KTtcbn07XG5cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnBsYXliYWNrUmF0ZSA9IGZ1bmN0aW9uKHJhdGUpIHtcbiAgaWYgKHJhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXMudGVjaENhbGwoJ3NldFBsYXliYWNrUmF0ZScsIHJhdGUpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgaWYgKHRoaXMudGVjaCAmJiB0aGlzLnRlY2hbJ2ZlYXR1cmVzUGxheWJhY2tSYXRlJ10pIHtcbiAgICByZXR1cm4gdGhpcy50ZWNoR2V0KCdwbGF5YmFja1JhdGUnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gMS4wO1xuICB9XG5cbn07XG5cbi8vIE1ldGhvZHMgdG8gYWRkIHN1cHBvcnQgZm9yXG4vLyBuZXR3b3JrU3RhdGU6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCduZXR3b3JrU3RhdGUnKTsgfSxcbi8vIHJlYWR5U3RhdGU6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCdyZWFkeVN0YXRlJyk7IH0sXG4vLyBpbml0aWFsVGltZTogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ2luaXRpYWxUaW1lJyk7IH0sXG4vLyBzdGFydE9mZnNldFRpbWU6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCdzdGFydE9mZnNldFRpbWUnKTsgfSxcbi8vIHBsYXllZDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ3BsYXllZCcpOyB9LFxuLy8gc2Vla2FibGU6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCdzZWVrYWJsZScpOyB9LFxuLy8gdmlkZW9UcmFja3M6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCd2aWRlb1RyYWNrcycpOyB9LFxuLy8gYXVkaW9UcmFja3M6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCdhdWRpb1RyYWNrcycpOyB9LFxuLy8gdmlkZW9XaWR0aDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ3ZpZGVvV2lkdGgnKTsgfSxcbi8vIHZpZGVvSGVpZ2h0OiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgndmlkZW9IZWlnaHQnKTsgfSxcbi8vIGRlZmF1bHRQbGF5YmFja1JhdGU6IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLnRlY2hDYWxsKCdkZWZhdWx0UGxheWJhY2tSYXRlJyk7IH0sXG4vLyBtZWRpYUdyb3VwOiBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy50ZWNoQ2FsbCgnbWVkaWFHcm91cCcpOyB9LFxuLy8gY29udHJvbGxlcjogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ2NvbnRyb2xsZXInKTsgfSxcbi8vIGRlZmF1bHRNdXRlZDogZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMudGVjaENhbGwoJ2RlZmF1bHRNdXRlZCcpOyB9XG5cbi8vIFRPRE9cbi8vIGN1cnJlbnRTcmNMaXN0OiB0aGUgYXJyYXkgb2Ygc291cmNlcyBpbmNsdWRpbmcgb3RoZXIgZm9ybWF0cyBhbmQgYml0cmF0ZXNcbi8vIHBsYXlMaXN0OiBhcnJheSBvZiBzb3VyY2UgbGlzdHMgaW4gb3JkZXIgb2YgcGxheWJhY2tcbi8qKlxuICogQ29udGFpbmVyIG9mIG1haW4gY29udHJvbHNcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICogQGV4dGVuZHMgdmpzLkNvbXBvbmVudFxuICovXG52anMuQ29udHJvbEJhciA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKCk7XG5cbnZqcy5Db250cm9sQmFyLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgbG9hZEV2ZW50OiAncGxheScsXG4gIGNoaWxkcmVuOiB7XG4gICAgJ3BsYXlUb2dnbGUnOiB7fSxcbiAgICAnY3VycmVudFRpbWVEaXNwbGF5Jzoge30sXG4gICAgJ3RpbWVEaXZpZGVyJzoge30sXG4gICAgJ2R1cmF0aW9uRGlzcGxheSc6IHt9LFxuICAgICdyZW1haW5pbmdUaW1lRGlzcGxheSc6IHt9LFxuICAgICdsaXZlRGlzcGxheSc6IHt9LFxuICAgICdwcm9ncmVzc0NvbnRyb2wnOiB7fSxcbiAgICAnZnVsbHNjcmVlblRvZ2dsZSc6IHt9LFxuICAgICd2b2x1bWVDb250cm9sJzoge30sXG4gICAgJ211dGVUb2dnbGUnOiB7fSxcbiAgICAvLyAndm9sdW1lTWVudUJ1dHRvbic6IHt9LFxuICAgICdwbGF5YmFja1JhdGVNZW51QnV0dG9uJzoge31cbiAgfVxufTtcblxudmpzLkNvbnRyb2xCYXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5jcmVhdGVFbCgnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1jb250cm9sLWJhcidcbiAgfSk7XG59O1xuLyoqXG4gKiBEaXNwbGF5cyB0aGUgbGl2ZSBpbmRpY2F0b3JcbiAqIFRPRE8gLSBGdXR1cmUgbWFrZSBpdCBjbGljayB0byBzbmFwIHRvIGxpdmVcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkxpdmVEaXNwbGF5ID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuICB9XG59KTtcblxudmpzLkxpdmVEaXNwbGF5LnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlbCA9IHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtbGl2ZS1jb250cm9scyB2anMtY29udHJvbCdcbiAgfSk7XG5cbiAgdGhpcy5jb250ZW50RWxfID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWxpdmUtZGlzcGxheScsXG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ1N0cmVhbSBUeXBlJykgKyAnPC9zcGFuPicgKyB0aGlzLmxvY2FsaXplKCdMSVZFJyksXG4gICAgJ2FyaWEtbGl2ZSc6ICdvZmYnXG4gIH0pO1xuXG4gIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyk7XG5cbiAgcmV0dXJuIGVsO1xufTtcbi8qKlxuICogQnV0dG9uIHRvIHRvZ2dsZSBiZXR3ZWVuIHBsYXkgYW5kIHBhdXNlXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNsYXNzXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlBsYXlUb2dnbGUgPSB2anMuQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHBsYXllci5vbigncGxheScsIHZqcy5iaW5kKHRoaXMsIHRoaXMub25QbGF5KSk7XG4gICAgcGxheWVyLm9uKCdwYXVzZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMub25QYXVzZSkpO1xuICB9XG59KTtcblxudmpzLlBsYXlUb2dnbGUucHJvdG90eXBlLmJ1dHRvblRleHQgPSAnUGxheSc7XG5cbnZqcy5QbGF5VG9nZ2xlLnByb3RvdHlwZS5idWlsZENTU0NsYXNzID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuICd2anMtcGxheS1jb250cm9sICcgKyB2anMuQnV0dG9uLnByb3RvdHlwZS5idWlsZENTU0NsYXNzLmNhbGwodGhpcyk7XG59O1xuXG4vLyBPbkNsaWNrIC0gVG9nZ2xlIGJldHdlZW4gcGxheSBhbmQgcGF1c2VcbnZqcy5QbGF5VG9nZ2xlLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMucGxheWVyXy5wYXVzZWQoKSkge1xuICAgIHRoaXMucGxheWVyXy5wbGF5KCk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wbGF5ZXJfLnBhdXNlKCk7XG4gIH1cbn07XG5cbiAgLy8gT25QbGF5IC0gQWRkIHRoZSB2anMtcGxheWluZyBjbGFzcyB0byB0aGUgZWxlbWVudCBzbyBpdCBjYW4gY2hhbmdlIGFwcGVhcmFuY2VcbnZqcy5QbGF5VG9nZ2xlLnByb3RvdHlwZS5vblBsYXkgPSBmdW5jdGlvbigpe1xuICB2anMucmVtb3ZlQ2xhc3ModGhpcy5lbF8sICd2anMtcGF1c2VkJyk7XG4gIHZqcy5hZGRDbGFzcyh0aGlzLmVsXywgJ3Zqcy1wbGF5aW5nJyk7XG4gIHRoaXMuZWxfLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoJ1BhdXNlJyk7IC8vIGNoYW5nZSB0aGUgYnV0dG9uIHRleHQgdG8gXCJQYXVzZVwiXG59O1xuXG4gIC8vIE9uUGF1c2UgLSBBZGQgdGhlIHZqcy1wYXVzZWQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgc28gaXQgY2FuIGNoYW5nZSBhcHBlYXJhbmNlXG52anMuUGxheVRvZ2dsZS5wcm90b3R5cGUub25QYXVzZSA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5yZW1vdmVDbGFzcyh0aGlzLmVsXywgJ3Zqcy1wbGF5aW5nJyk7XG4gIHZqcy5hZGRDbGFzcyh0aGlzLmVsXywgJ3Zqcy1wYXVzZWQnKTtcbiAgdGhpcy5lbF8uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgnUGxheScpOyAvLyBjaGFuZ2UgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiUGxheVwiXG59O1xuLyoqXG4gKiBEaXNwbGF5cyB0aGUgY3VycmVudCB0aW1lXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5DdXJyZW50VGltZURpc3BsYXkgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHBsYXllci5vbigndGltZXVwZGF0ZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlQ29udGVudCkpO1xuICB9XG59KTtcblxudmpzLkN1cnJlbnRUaW1lRGlzcGxheS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgZWwgPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWN1cnJlbnQtdGltZSB2anMtdGltZS1jb250cm9scyB2anMtY29udHJvbCdcbiAgfSk7XG5cbiAgdGhpcy5jb250ZW50RWxfID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWN1cnJlbnQtdGltZS1kaXNwbGF5JyxcbiAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj5DdXJyZW50IFRpbWUgPC9zcGFuPicgKyAnMDowMCcsIC8vIGxhYmVsIHRoZSBjdXJyZW50IHRpbWUgZm9yIHNjcmVlbiByZWFkZXIgdXNlcnNcbiAgICAnYXJpYS1saXZlJzogJ29mZicgLy8gdGVsbCBzY3JlZW4gcmVhZGVycyBub3QgdG8gYXV0b21hdGljYWxseSByZWFkIHRoZSB0aW1lIGFzIGl0IGNoYW5nZXNcbiAgfSk7XG5cbiAgZWwuYXBwZW5kQ2hpbGQodGhpcy5jb250ZW50RWxfKTtcbiAgcmV0dXJuIGVsO1xufTtcblxudmpzLkN1cnJlbnRUaW1lRGlzcGxheS5wcm90b3R5cGUudXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uKCl7XG4gIC8vIEFsbG93cyBmb3Igc21vb3RoIHNjcnViYmluZywgd2hlbiBwbGF5ZXIgY2FuJ3Qga2VlcCB1cC5cbiAgdmFyIHRpbWUgPSAodGhpcy5wbGF5ZXJfLnNjcnViYmluZykgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICB0aGlzLmNvbnRlbnRFbF8uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPicgKyB0aGlzLmxvY2FsaXplKCdDdXJyZW50IFRpbWUnKSArICc8L3NwYW4+ICcgKyB2anMuZm9ybWF0VGltZSh0aW1lLCB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSk7XG59O1xuXG4vKipcbiAqIERpc3BsYXlzIHRoZSBkdXJhdGlvblxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuRHVyYXRpb25EaXNwbGF5ID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICAvLyB0aGlzIG1pZ2h0IG5lZWQgdG8gYmUgY2hhbmdlZCB0byAnZHVyYXRpb25jaGFuZ2UnIGluc3RlYWQgb2YgJ3RpbWV1cGRhdGUnIGV2ZW50dWFsbHksXG4gICAgLy8gaG93ZXZlciB0aGUgZHVyYXRpb25jaGFuZ2UgZXZlbnQgZmlyZXMgYmVmb3JlIHRoaXMucGxheWVyXy5kdXJhdGlvbigpIGlzIHNldCxcbiAgICAvLyBzbyB0aGUgdmFsdWUgY2Fubm90IGJlIHdyaXR0ZW4gb3V0IHVzaW5nIHRoaXMgbWV0aG9kLlxuICAgIC8vIE9uY2UgdGhlIG9yZGVyIG9mIGR1cmF0aW9uY2hhbmdlIGFuZCB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSBiZWluZyBzZXQgaXMgZmlndXJlZCBvdXQsXG4gICAgLy8gdGhpcyBjYW4gYmUgdXBkYXRlZC5cbiAgICBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUNvbnRlbnQpKTtcbiAgfVxufSk7XG5cbnZqcy5EdXJhdGlvbkRpc3BsYXkucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgdmFyIGVsID0gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1kdXJhdGlvbiB2anMtdGltZS1jb250cm9scyB2anMtY29udHJvbCdcbiAgfSk7XG5cbiAgdGhpcy5jb250ZW50RWxfID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWR1cmF0aW9uLWRpc3BsYXknLFxuICAgIGlubmVySFRNTDogJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPicgKyB0aGlzLmxvY2FsaXplKCdEdXJhdGlvbiBUaW1lJykgKyAnPC9zcGFuPiAnICsgJzA6MDAnLCAvLyBsYWJlbCB0aGUgZHVyYXRpb24gdGltZSBmb3Igc2NyZWVuIHJlYWRlciB1c2Vyc1xuICAgICdhcmlhLWxpdmUnOiAnb2ZmJyAvLyB0ZWxsIHNjcmVlbiByZWFkZXJzIG5vdCB0byBhdXRvbWF0aWNhbGx5IHJlYWQgdGhlIHRpbWUgYXMgaXQgY2hhbmdlc1xuICB9KTtcblxuICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuICByZXR1cm4gZWw7XG59O1xuXG52anMuRHVyYXRpb25EaXNwbGF5LnByb3RvdHlwZS51cGRhdGVDb250ZW50ID0gZnVuY3Rpb24oKXtcbiAgdmFyIGR1cmF0aW9uID0gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCk7XG4gIGlmIChkdXJhdGlvbikge1xuICAgICAgdGhpcy5jb250ZW50RWxfLmlubmVySFRNTCA9ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj4nICsgdGhpcy5sb2NhbGl6ZSgnRHVyYXRpb24gVGltZScpICsgJzwvc3Bhbj4gJyArIHZqcy5mb3JtYXRUaW1lKGR1cmF0aW9uKTsgLy8gbGFiZWwgdGhlIGR1cmF0aW9uIHRpbWUgZm9yIHNjcmVlbiByZWFkZXIgdXNlcnNcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgc2VwYXJhdG9yIGJldHdlZW4gdGhlIGN1cnJlbnQgdGltZSBhbmQgZHVyYXRpb25cbiAqXG4gKiBDYW4gYmUgaGlkZGVuIGlmIGl0J3Mgbm90IG5lZWRlZCBpbiB0aGUgZGVzaWduLlxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlRpbWVEaXZpZGVyID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gIH1cbn0pO1xuXG52anMuVGltZURpdmlkZXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtdGltZS1kaXZpZGVyJyxcbiAgICBpbm5lckhUTUw6ICc8ZGl2PjxzcGFuPi88L3NwYW4+PC9kaXY+J1xuICB9KTtcbn07XG5cbi8qKlxuICogRGlzcGxheXMgdGhlIHRpbWUgbGVmdCBpbiB0aGUgdmlkZW9cbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlJlbWFpbmluZ1RpbWVEaXNwbGF5ID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICBwbGF5ZXIub24oJ3RpbWV1cGRhdGUnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUNvbnRlbnQpKTtcbiAgfVxufSk7XG5cbnZqcy5SZW1haW5pbmdUaW1lRGlzcGxheS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgZWwgPSB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXJlbWFpbmluZy10aW1lIHZqcy10aW1lLWNvbnRyb2xzIHZqcy1jb250cm9sJ1xuICB9KTtcblxuICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcmVtYWluaW5nLXRpbWUtZGlzcGxheScsXG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ1JlbWFpbmluZyBUaW1lJykgKyAnPC9zcGFuPiAnICsgJy0wOjAwJywgLy8gbGFiZWwgdGhlIHJlbWFpbmluZyB0aW1lIGZvciBzY3JlZW4gcmVhZGVyIHVzZXJzXG4gICAgJ2FyaWEtbGl2ZSc6ICdvZmYnIC8vIHRlbGwgc2NyZWVuIHJlYWRlcnMgbm90IHRvIGF1dG9tYXRpY2FsbHkgcmVhZCB0aGUgdGltZSBhcyBpdCBjaGFuZ2VzXG4gIH0pO1xuXG4gIGVsLmFwcGVuZENoaWxkKHRoaXMuY29udGVudEVsXyk7XG4gIHJldHVybiBlbDtcbn07XG5cbnZqcy5SZW1haW5pbmdUaW1lRGlzcGxheS5wcm90b3R5cGUudXBkYXRlQ29udGVudCA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLnBsYXllcl8uZHVyYXRpb24oKSkge1xuICAgIHRoaXMuY29udGVudEVsXy5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ1JlbWFpbmluZyBUaW1lJykgKyAnPC9zcGFuPiAnICsgJy0nKyB2anMuZm9ybWF0VGltZSh0aGlzLnBsYXllcl8ucmVtYWluaW5nVGltZSgpKTtcbiAgfVxuXG4gIC8vIEFsbG93cyBmb3Igc21vb3RoIHNjcnViYmluZywgd2hlbiBwbGF5ZXIgY2FuJ3Qga2VlcCB1cC5cbiAgLy8gdmFyIHRpbWUgPSAodGhpcy5wbGF5ZXJfLnNjcnViYmluZykgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICAvLyB0aGlzLmNvbnRlbnRFbF8uaW5uZXJIVE1MID0gdmpzLmZvcm1hdFRpbWUodGltZSwgdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpO1xufTtcbi8qKlxuICogVG9nZ2xlIGZ1bGxzY3JlZW4gdmlkZW9cbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIHZqcy5CdXR0b25cbiAqL1xudmpzLkZ1bGxzY3JlZW5Ub2dnbGUgPSB2anMuQnV0dG9uLmV4dGVuZCh7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQG1lbWJlcm9mIHZqcy5GdWxsc2NyZWVuVG9nZ2xlXG4gICAqIEBpbnN0YW5jZVxuICAgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgfVxufSk7XG5cbnZqcy5GdWxsc2NyZWVuVG9nZ2xlLnByb3RvdHlwZS5idXR0b25UZXh0ID0gJ0Z1bGxzY3JlZW4nO1xuXG52anMuRnVsbHNjcmVlblRvZ2dsZS5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiAndmpzLWZ1bGxzY3JlZW4tY29udHJvbCAnICsgdmpzLkJ1dHRvbi5wcm90b3R5cGUuYnVpbGRDU1NDbGFzcy5jYWxsKHRoaXMpO1xufTtcblxudmpzLkZ1bGxzY3JlZW5Ub2dnbGUucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICBpZiAoIXRoaXMucGxheWVyXy5pc0Z1bGxzY3JlZW4oKSkge1xuICAgIHRoaXMucGxheWVyXy5yZXF1ZXN0RnVsbHNjcmVlbigpO1xuICAgIHRoaXMuY29udHJvbFRleHRfLmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoJ05vbi1GdWxsc2NyZWVuJyk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5wbGF5ZXJfLmV4aXRGdWxsc2NyZWVuKCk7XG4gICAgdGhpcy5jb250cm9sVGV4dF8uaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSgnRnVsbHNjcmVlbicpO1xuICB9XG59O1xuLyoqXG4gKiBUaGUgUHJvZ3Jlc3MgQ29udHJvbCBjb21wb25lbnQgY29udGFpbnMgdGhlIHNlZWsgYmFyLCBsb2FkIHByb2dyZXNzLFxuICogYW5kIHBsYXkgcHJvZ3Jlc3NcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Qcm9ncmVzc0NvbnRyb2wgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgfVxufSk7XG5cbnZqcy5Qcm9ncmVzc0NvbnRyb2wucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICBjaGlsZHJlbjoge1xuICAgICdzZWVrQmFyJzoge31cbiAgfVxufTtcblxudmpzLlByb2dyZXNzQ29udHJvbC5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1wcm9ncmVzcy1jb250cm9sIHZqcy1jb250cm9sJ1xuICB9KTtcbn07XG5cbi8qKlxuICogU2VlayBCYXIgYW5kIGhvbGRlciBmb3IgdGhlIHByb2dyZXNzIGJhcnNcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5TZWVrQmFyID0gdmpzLlNsaWRlci5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLlNsaWRlci5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gICAgcGxheWVyLm9uKCd0aW1ldXBkYXRlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGVBUklBQXR0cmlidXRlcykpO1xuICAgIHBsYXllci5yZWFkeSh2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzKSk7XG4gIH1cbn0pO1xuXG52anMuU2Vla0Jhci5wcm90b3R5cGUub3B0aW9uc18gPSB7XG4gIGNoaWxkcmVuOiB7XG4gICAgJ2xvYWRQcm9ncmVzc0Jhcic6IHt9LFxuICAgICdwbGF5UHJvZ3Jlc3NCYXInOiB7fSxcbiAgICAnc2Vla0hhbmRsZSc6IHt9XG4gIH0sXG4gICdiYXJOYW1lJzogJ3BsYXlQcm9ncmVzc0JhcicsXG4gICdoYW5kbGVOYW1lJzogJ3NlZWtIYW5kbGUnXG59O1xuXG52anMuU2Vla0Jhci5wcm90b3R5cGUucGxheWVyRXZlbnQgPSAndGltZXVwZGF0ZSc7XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuU2xpZGVyLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXByb2dyZXNzLWhvbGRlcicsXG4gICAgJ2FyaWEtbGFiZWwnOiAndmlkZW8gcHJvZ3Jlc3MgYmFyJ1xuICB9KTtcbn07XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS51cGRhdGVBUklBQXR0cmlidXRlcyA9IGZ1bmN0aW9uKCl7XG4gICAgLy8gQWxsb3dzIGZvciBzbW9vdGggc2NydWJiaW5nLCB3aGVuIHBsYXllciBjYW4ndCBrZWVwIHVwLlxuICAgIHZhciB0aW1lID0gKHRoaXMucGxheWVyXy5zY3J1YmJpbmcpID8gdGhpcy5wbGF5ZXJfLmdldENhY2hlKCkuY3VycmVudFRpbWUgOiB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKTtcbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLHZqcy5yb3VuZCh0aGlzLmdldFBlcmNlbnQoKSoxMDAsIDIpKTsgLy8gbWFjaGluZSByZWFkYWJsZSB2YWx1ZSBvZiBwcm9ncmVzcyBiYXIgKHBlcmNlbnRhZ2UgY29tcGxldGUpXG4gICAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVldGV4dCcsdmpzLmZvcm1hdFRpbWUodGltZSwgdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCkpKTsgLy8gaHVtYW4gcmVhZGFibGUgdmFsdWUgb2YgcHJvZ3Jlc3MgYmFyICh0aW1lIGNvbXBsZXRlKVxufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLmdldFBlcmNlbnQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCkgLyB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtcbn07XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS5vbk1vdXNlRG93biA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdmpzLlNsaWRlci5wcm90b3R5cGUub25Nb3VzZURvd24uY2FsbCh0aGlzLCBldmVudCk7XG5cbiAgdGhpcy5wbGF5ZXJfLnNjcnViYmluZyA9IHRydWU7XG5cbiAgdGhpcy52aWRlb1dhc1BsYXlpbmcgPSAhdGhpcy5wbGF5ZXJfLnBhdXNlZCgpO1xuICB0aGlzLnBsYXllcl8ucGF1c2UoKTtcbn07XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS5vbk1vdXNlTW92ZSA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdmFyIG5ld1RpbWUgPSB0aGlzLmNhbGN1bGF0ZURpc3RhbmNlKGV2ZW50KSAqIHRoaXMucGxheWVyXy5kdXJhdGlvbigpO1xuXG4gIC8vIERvbid0IGxldCB2aWRlbyBlbmQgd2hpbGUgc2NydWJiaW5nLlxuICBpZiAobmV3VGltZSA9PSB0aGlzLnBsYXllcl8uZHVyYXRpb24oKSkgeyBuZXdUaW1lID0gbmV3VGltZSAtIDAuMTsgfVxuXG4gIC8vIFNldCBuZXcgdGltZSAodGVsbCBwbGF5ZXIgdG8gc2VlayB0byBuZXcgdGltZSlcbiAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKG5ld1RpbWUpO1xufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLm9uTW91c2VVcCA9IGZ1bmN0aW9uKGV2ZW50KXtcbiAgdmpzLlNsaWRlci5wcm90b3R5cGUub25Nb3VzZVVwLmNhbGwodGhpcywgZXZlbnQpO1xuXG4gIHRoaXMucGxheWVyXy5zY3J1YmJpbmcgPSBmYWxzZTtcbiAgaWYgKHRoaXMudmlkZW9XYXNQbGF5aW5nKSB7XG4gICAgdGhpcy5wbGF5ZXJfLnBsYXkoKTtcbiAgfVxufTtcblxudmpzLlNlZWtCYXIucHJvdG90eXBlLnN0ZXBGb3J3YXJkID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpICsgNSk7IC8vIG1vcmUgcXVpY2tseSBmYXN0IGZvcndhcmQgZm9yIGtleWJvYXJkLW9ubHkgdXNlcnNcbn07XG5cbnZqcy5TZWVrQmFyLnByb3RvdHlwZS5zdGVwQmFjayA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucGxheWVyXy5jdXJyZW50VGltZSh0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSAtIDUpOyAvLyBtb3JlIHF1aWNrbHkgcmV3aW5kIGZvciBrZXlib2FyZC1vbmx5IHVzZXJzXG59O1xuXG4vKipcbiAqIFNob3dzIGxvYWQgcHJvZ3Jlc3NcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Mb2FkUHJvZ3Jlc3NCYXIgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcbiAgICBwbGF5ZXIub24oJ3Byb2dyZXNzJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUpKTtcbiAgfVxufSk7XG5cbnZqcy5Mb2FkUHJvZ3Jlc3NCYXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtbG9hZC1wcm9ncmVzcycsXG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+PHNwYW4+JyArIHRoaXMubG9jYWxpemUoJ0xvYWRlZCcpICsgJzwvc3Bhbj46IDAlPC9zcGFuPidcbiAgfSk7XG59O1xuXG52anMuTG9hZFByb2dyZXNzQmFyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICB2YXIgaSwgc3RhcnQsIGVuZCwgcGFydCxcbiAgICAgIGJ1ZmZlcmVkID0gdGhpcy5wbGF5ZXJfLmJ1ZmZlcmVkKCksXG4gICAgICBkdXJhdGlvbiA9IHRoaXMucGxheWVyXy5kdXJhdGlvbigpLFxuICAgICAgYnVmZmVyZWRFbmQgPSB0aGlzLnBsYXllcl8uYnVmZmVyZWRFbmQoKSxcbiAgICAgIGNoaWxkcmVuID0gdGhpcy5lbF8uY2hpbGRyZW4sXG4gICAgICAvLyBnZXQgdGhlIHBlcmNlbnQgd2lkdGggb2YgYSB0aW1lIGNvbXBhcmVkIHRvIHRoZSB0b3RhbCBlbmRcbiAgICAgIHBlcmNlbnRpZnkgPSBmdW5jdGlvbiAodGltZSwgZW5kKXtcbiAgICAgICAgdmFyIHBlcmNlbnQgPSAodGltZSAvIGVuZCkgfHwgMDsgLy8gbm8gTmFOXG4gICAgICAgIHJldHVybiAocGVyY2VudCAqIDEwMCkgKyAnJSc7XG4gICAgICB9O1xuXG4gIC8vIHVwZGF0ZSB0aGUgd2lkdGggb2YgdGhlIHByb2dyZXNzIGJhclxuICB0aGlzLmVsXy5zdHlsZS53aWR0aCA9IHBlcmNlbnRpZnkoYnVmZmVyZWRFbmQsIGR1cmF0aW9uKTtcblxuICAvLyBhZGQgY2hpbGQgZWxlbWVudHMgdG8gcmVwcmVzZW50IHRoZSBpbmRpdmlkdWFsIGJ1ZmZlcmVkIHRpbWUgcmFuZ2VzXG4gIGZvciAoaSA9IDA7IGkgPCBidWZmZXJlZC5sZW5ndGg7IGkrKykge1xuICAgIHN0YXJ0ID0gYnVmZmVyZWQuc3RhcnQoaSksXG4gICAgZW5kID0gYnVmZmVyZWQuZW5kKGkpLFxuICAgIHBhcnQgPSBjaGlsZHJlbltpXTtcblxuICAgIGlmICghcGFydCkge1xuICAgICAgcGFydCA9IHRoaXMuZWxfLmFwcGVuZENoaWxkKHZqcy5jcmVhdGVFbCgpKVxuICAgIH07XG5cbiAgICAvLyBzZXQgdGhlIHBlcmNlbnQgYmFzZWQgb24gdGhlIHdpZHRoIG9mIHRoZSBwcm9ncmVzcyBiYXIgKGJ1ZmZlcmVkRW5kKVxuICAgIHBhcnQuc3R5bGUubGVmdCA9IHBlcmNlbnRpZnkoc3RhcnQsIGJ1ZmZlcmVkRW5kKTtcbiAgICBwYXJ0LnN0eWxlLndpZHRoID0gcGVyY2VudGlmeShlbmQgLSBzdGFydCwgYnVmZmVyZWRFbmQpO1xuICB9O1xuXG4gIC8vIHJlbW92ZSB1bnVzZWQgYnVmZmVyZWQgcmFuZ2UgZWxlbWVudHNcbiAgZm9yIChpID0gY2hpbGRyZW4ubGVuZ3RoOyBpID4gYnVmZmVyZWQubGVuZ3RoOyBpLS0pIHtcbiAgICB0aGlzLmVsXy5yZW1vdmVDaGlsZChjaGlsZHJlbltpLTFdKTtcbiAgfVxufTtcblxuLyoqXG4gKiBTaG93cyBwbGF5IHByb2dyZXNzXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuUGxheVByb2dyZXNzQmFyID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gIH1cbn0pO1xuXG52anMuUGxheVByb2dyZXNzQmFyLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXBsYXktcHJvZ3Jlc3MnLFxuICAgIGlubmVySFRNTDogJzxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPjxzcGFuPicgKyB0aGlzLmxvY2FsaXplKCdQcm9ncmVzcycpICsgJzwvc3Bhbj46IDAlPC9zcGFuPidcbiAgfSk7XG59O1xuXG4vKipcbiAqIFRoZSBTZWVrIEhhbmRsZSBzaG93cyB0aGUgY3VycmVudCBwb3NpdGlvbiBvZiB0aGUgcGxheWhlYWQgZHVyaW5nIHBsYXliYWNrLFxuICogYW5kIGNhbiBiZSBkcmFnZ2VkIHRvIGFkanVzdCB0aGUgcGxheWhlYWQuXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuU2Vla0hhbmRsZSA9IHZqcy5TbGlkZXJIYW5kbGUuZXh0ZW5kKHtcbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKSB7XG4gICAgdmpzLlNsaWRlckhhbmRsZS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gICAgcGxheWVyLm9uKCd0aW1ldXBkYXRlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGVDb250ZW50KSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgaGFuZGxlIGNvbnRlbnQsIHdoaWNoIG1heSBiZSByZWFkIGJ5IHNjcmVlbiByZWFkZXJzXG4gKlxuICogQHR5cGUge1N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5TZWVrSGFuZGxlLnByb3RvdHlwZS5kZWZhdWx0VmFsdWUgPSAnMDA6MDAnO1xuXG4vKiogQGluaGVyaXREb2MgKi9cbnZqcy5TZWVrSGFuZGxlLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gdmpzLlNsaWRlckhhbmRsZS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1zZWVrLWhhbmRsZScsXG4gICAgJ2FyaWEtbGl2ZSc6ICdvZmYnXG4gIH0pO1xufTtcblxudmpzLlNlZWtIYW5kbGUucHJvdG90eXBlLnVwZGF0ZUNvbnRlbnQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHRpbWUgPSAodGhpcy5wbGF5ZXJfLnNjcnViYmluZykgPyB0aGlzLnBsYXllcl8uZ2V0Q2FjaGUoKS5jdXJyZW50VGltZSA6IHRoaXMucGxheWVyXy5jdXJyZW50VGltZSgpO1xuICB0aGlzLmVsXy5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHZqcy5mb3JtYXRUaW1lKHRpbWUsIHRoaXMucGxheWVyXy5kdXJhdGlvbigpKSArICc8L3NwYW4+Jztcbn07XG4vKipcbiAqIFRoZSBjb21wb25lbnQgZm9yIGNvbnRyb2xsaW5nIHRoZSB2b2x1bWUgbGV2ZWxcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5Wb2x1bWVDb250cm9sID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICAvLyBoaWRlIHZvbHVtZSBjb250cm9scyB3aGVuIHRoZXkncmUgbm90IHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCB0ZWNoXG4gICAgaWYgKHBsYXllci50ZWNoICYmIHBsYXllci50ZWNoWydmZWF0dXJlc1ZvbHVtZUNvbnRyb2wnXSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICB9XG4gICAgcGxheWVyLm9uKCdsb2Fkc3RhcnQnLCB2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpe1xuICAgICAgaWYgKHBsYXllci50ZWNoWydmZWF0dXJlc1ZvbHVtZUNvbnRyb2wnXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDbGFzcygndmpzLWhpZGRlbicpO1xuICAgICAgfVxuICAgIH0pKTtcbiAgfVxufSk7XG5cbnZqcy5Wb2x1bWVDb250cm9sLnByb3RvdHlwZS5vcHRpb25zXyA9IHtcbiAgY2hpbGRyZW46IHtcbiAgICAndm9sdW1lQmFyJzoge31cbiAgfVxufTtcblxudmpzLlZvbHVtZUNvbnRyb2wucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtdm9sdW1lLWNvbnRyb2wgdmpzLWNvbnRyb2wnXG4gIH0pO1xufTtcblxuLyoqXG4gKiBUaGUgYmFyIHRoYXQgY29udGFpbnMgdGhlIHZvbHVtZSBsZXZlbCBhbmQgY2FuIGJlIGNsaWNrZWQgb24gdG8gYWRqdXN0IHRoZSBsZXZlbFxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlZvbHVtZUJhciA9IHZqcy5TbGlkZXIuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5TbGlkZXIuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuICAgIHBsYXllci5vbigndm9sdW1lY2hhbmdlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGVBUklBQXR0cmlidXRlcykpO1xuICAgIHBsYXllci5yZWFkeSh2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzKSk7XG4gIH1cbn0pO1xuXG52anMuVm9sdW1lQmFyLnByb3RvdHlwZS51cGRhdGVBUklBQXR0cmlidXRlcyA9IGZ1bmN0aW9uKCl7XG4gIC8vIEN1cnJlbnQgdmFsdWUgb2Ygdm9sdW1lIGJhciBhcyBhIHBlcmNlbnRhZ2VcbiAgdGhpcy5lbF8uc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbm93Jyx2anMucm91bmQodGhpcy5wbGF5ZXJfLnZvbHVtZSgpKjEwMCwgMikpO1xuICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWV0ZXh0Jyx2anMucm91bmQodGhpcy5wbGF5ZXJfLnZvbHVtZSgpKjEwMCwgMikrJyUnKTtcbn07XG5cbnZqcy5Wb2x1bWVCYXIucHJvdG90eXBlLm9wdGlvbnNfID0ge1xuICBjaGlsZHJlbjoge1xuICAgICd2b2x1bWVMZXZlbCc6IHt9LFxuICAgICd2b2x1bWVIYW5kbGUnOiB7fVxuICB9LFxuICAnYmFyTmFtZSc6ICd2b2x1bWVMZXZlbCcsXG4gICdoYW5kbGVOYW1lJzogJ3ZvbHVtZUhhbmRsZSdcbn07XG5cbnZqcy5Wb2x1bWVCYXIucHJvdG90eXBlLnBsYXllckV2ZW50ID0gJ3ZvbHVtZWNoYW5nZSc7XG5cbnZqcy5Wb2x1bWVCYXIucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5TbGlkZXIucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtdm9sdW1lLWJhcicsXG4gICAgJ2FyaWEtbGFiZWwnOiAndm9sdW1lIGxldmVsJ1xuICB9KTtcbn07XG5cbnZqcy5Wb2x1bWVCYXIucHJvdG90eXBlLm9uTW91c2VNb3ZlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgaWYgKHRoaXMucGxheWVyXy5tdXRlZCgpKSB7XG4gICAgdGhpcy5wbGF5ZXJfLm11dGVkKGZhbHNlKTtcbiAgfVxuXG4gIHRoaXMucGxheWVyXy52b2x1bWUodGhpcy5jYWxjdWxhdGVEaXN0YW5jZShldmVudCkpO1xufTtcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUuZ2V0UGVyY2VudCA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLnBsYXllcl8ubXV0ZWQoKSkge1xuICAgIHJldHVybiAwO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0aGlzLnBsYXllcl8udm9sdW1lKCk7XG4gIH1cbn07XG5cbnZqcy5Wb2x1bWVCYXIucHJvdG90eXBlLnN0ZXBGb3J3YXJkID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5wbGF5ZXJfLnZvbHVtZSh0aGlzLnBsYXllcl8udm9sdW1lKCkgKyAwLjEpO1xufTtcblxudmpzLlZvbHVtZUJhci5wcm90b3R5cGUuc3RlcEJhY2sgPSBmdW5jdGlvbigpe1xuICB0aGlzLnBsYXllcl8udm9sdW1lKHRoaXMucGxheWVyXy52b2x1bWUoKSAtIDAuMSk7XG59O1xuXG4vKipcbiAqIFNob3dzIHZvbHVtZSBsZXZlbFxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlZvbHVtZUxldmVsID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gIH1cbn0pO1xuXG52anMuVm9sdW1lTGV2ZWwucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtdm9sdW1lLWxldmVsJyxcbiAgICBpbm5lckhUTUw6ICc8c3BhbiBjbGFzcz1cInZqcy1jb250cm9sLXRleHRcIj48L3NwYW4+J1xuICB9KTtcbn07XG5cbi8qKlxuICogVGhlIHZvbHVtZSBoYW5kbGUgY2FuIGJlIGRyYWdnZWQgdG8gYWRqdXN0IHRoZSB2b2x1bWUgbGV2ZWxcbiAqXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQGNvbnN0cnVjdG9yXG4gKi9cbiB2anMuVm9sdW1lSGFuZGxlID0gdmpzLlNsaWRlckhhbmRsZS5leHRlbmQoKTtcblxuIHZqcy5Wb2x1bWVIYW5kbGUucHJvdG90eXBlLmRlZmF1bHRWYWx1ZSA9ICcwMDowMCc7XG5cbiAvKiogQGluaGVyaXREb2MgKi9cbiB2anMuVm9sdW1lSGFuZGxlLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gICByZXR1cm4gdmpzLlNsaWRlckhhbmRsZS5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgICBjbGFzc05hbWU6ICd2anMtdm9sdW1lLWhhbmRsZSdcbiAgIH0pO1xuIH07XG4vKipcbiAqIEEgYnV0dG9uIGNvbXBvbmVudCBmb3IgbXV0aW5nIHRoZSBhdWRpb1xuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLk11dGVUb2dnbGUgPSB2anMuQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHBsYXllci5vbigndm9sdW1lY2hhbmdlJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUpKTtcblxuICAgIC8vIGhpZGUgbXV0ZSB0b2dnbGUgaWYgdGhlIGN1cnJlbnQgdGVjaCBkb2Vzbid0IHN1cHBvcnQgdm9sdW1lIGNvbnRyb2xcbiAgICBpZiAocGxheWVyLnRlY2ggJiYgcGxheWVyLnRlY2hbJ2ZlYXR1cmVzVm9sdW1lQ29udHJvbCddID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5hZGRDbGFzcygndmpzLWhpZGRlbicpO1xuICAgIH1cbiAgICBwbGF5ZXIub24oJ2xvYWRzdGFydCcsIHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uKCl7XG4gICAgICBpZiAocGxheWVyLnRlY2hbJ2ZlYXR1cmVzVm9sdW1lQ29udHJvbCddID09PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbW92ZUNsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgICB9XG4gICAgfSkpO1xuICB9XG59KTtcblxudmpzLk11dGVUb2dnbGUucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5CdXR0b24ucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtbXV0ZS1jb250cm9sIHZqcy1jb250cm9sJyxcbiAgICBpbm5lckhUTUw6ICc8ZGl2PjxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPicgKyB0aGlzLmxvY2FsaXplKCdNdXRlJykgKyAnPC9zcGFuPjwvZGl2PidcbiAgfSk7XG59O1xuXG52anMuTXV0ZVRvZ2dsZS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucGxheWVyXy5tdXRlZCggdGhpcy5wbGF5ZXJfLm11dGVkKCkgPyBmYWxzZSA6IHRydWUgKTtcbn07XG5cbnZqcy5NdXRlVG9nZ2xlLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICB2YXIgdm9sID0gdGhpcy5wbGF5ZXJfLnZvbHVtZSgpLFxuICAgICAgbGV2ZWwgPSAzO1xuXG4gIGlmICh2b2wgPT09IDAgfHwgdGhpcy5wbGF5ZXJfLm11dGVkKCkpIHtcbiAgICBsZXZlbCA9IDA7XG4gIH0gZWxzZSBpZiAodm9sIDwgMC4zMykge1xuICAgIGxldmVsID0gMTtcbiAgfSBlbHNlIGlmICh2b2wgPCAwLjY3KSB7XG4gICAgbGV2ZWwgPSAyO1xuICB9XG5cbiAgLy8gRG9uJ3QgcmV3cml0ZSB0aGUgYnV0dG9uIHRleHQgaWYgdGhlIGFjdHVhbCB0ZXh0IGRvZXNuJ3QgY2hhbmdlLlxuICAvLyBUaGlzIGNhdXNlcyB1bm5lY2Vzc2FyeSBhbmQgY29uZnVzaW5nIGluZm9ybWF0aW9uIGZvciBzY3JlZW4gcmVhZGVyIHVzZXJzLlxuICAvLyBUaGlzIGNoZWNrIGlzIG5lZWRlZCBiZWNhdXNlIHRoaXMgZnVuY3Rpb24gZ2V0cyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdm9sdW1lIGxldmVsIGlzIGNoYW5nZWQuXG4gIGlmKHRoaXMucGxheWVyXy5tdXRlZCgpKXtcbiAgICAgIGlmKHRoaXMuZWxfLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmlubmVySFRNTCE9dGhpcy5sb2NhbGl6ZSgnVW5tdXRlJykpe1xuICAgICAgICAgIHRoaXMuZWxfLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmlubmVySFRNTCA9IHRoaXMubG9jYWxpemUoJ1VubXV0ZScpOyAvLyBjaGFuZ2UgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiVW5tdXRlXCJcbiAgICAgIH1cbiAgfSBlbHNlIHtcbiAgICAgIGlmKHRoaXMuZWxfLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmlubmVySFRNTCE9dGhpcy5sb2NhbGl6ZSgnTXV0ZScpKXtcbiAgICAgICAgICB0aGlzLmVsXy5jaGlsZHJlblswXS5jaGlsZHJlblswXS5pbm5lckhUTUwgPSB0aGlzLmxvY2FsaXplKCdNdXRlJyk7IC8vIGNoYW5nZSB0aGUgYnV0dG9uIHRleHQgdG8gXCJNdXRlXCJcbiAgICAgIH1cbiAgfVxuXG4gIC8qIFRPRE8gaW1wcm92ZSBtdXRlZCBpY29uIGNsYXNzZXMgKi9cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICB2anMucmVtb3ZlQ2xhc3ModGhpcy5lbF8sICd2anMtdm9sLScraSk7XG4gIH1cbiAgdmpzLmFkZENsYXNzKHRoaXMuZWxfLCAndmpzLXZvbC0nK2xldmVsKTtcbn07XG4vKipcbiAqIE1lbnUgYnV0dG9uIHdpdGggYSBwb3B1cCBmb3Igc2hvd2luZyB0aGUgdm9sdW1lIHNsaWRlci5cbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVm9sdW1lTWVudUJ1dHRvbiA9IHZqcy5NZW51QnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuTWVudUJ1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICAvLyBTYW1lIGxpc3RlbmVycyBhcyBNdXRlVG9nZ2xlXG4gICAgcGxheWVyLm9uKCd2b2x1bWVjaGFuZ2UnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuXG4gICAgLy8gaGlkZSBtdXRlIHRvZ2dsZSBpZiB0aGUgY3VycmVudCB0ZWNoIGRvZXNuJ3Qgc3VwcG9ydCB2b2x1bWUgY29udHJvbFxuICAgIGlmIChwbGF5ZXIudGVjaCAmJiBwbGF5ZXIudGVjaFsnZmVhdHVyZXNWb2x1bWVDb250cm9sJ10gPT09IGZhbHNlKSB7XG4gICAgICB0aGlzLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gICAgfVxuICAgIHBsYXllci5vbignbG9hZHN0YXJ0JywgdmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICAgIGlmIChwbGF5ZXIudGVjaFsnZmVhdHVyZXNWb2x1bWVDb250cm9sJ10gPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuYWRkQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgICAgIH1cbiAgICB9KSk7XG4gICAgdGhpcy5hZGRDbGFzcygndmpzLW1lbnUtYnV0dG9uJyk7XG4gIH1cbn0pO1xuXG52anMuVm9sdW1lTWVudUJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlTWVudSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBtZW51ID0gbmV3IHZqcy5NZW51KHRoaXMucGxheWVyXywge1xuICAgIGNvbnRlbnRFbFR5cGU6ICdkaXYnXG4gIH0pO1xuICB2YXIgdmMgPSBuZXcgdmpzLlZvbHVtZUJhcih0aGlzLnBsYXllcl8sIHZqcy5vYmoubWVyZ2Uoeyd2ZXJ0aWNhbCc6IHRydWV9LCB0aGlzLm9wdGlvbnNfLnZvbHVtZUJhcikpO1xuICBtZW51LmFkZENoaWxkKHZjKTtcbiAgcmV0dXJuIG1lbnU7XG59O1xuXG52anMuVm9sdW1lTWVudUJ1dHRvbi5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5NdXRlVG9nZ2xlLnByb3RvdHlwZS5vbkNsaWNrLmNhbGwodGhpcyk7XG4gIHZqcy5NZW51QnV0dG9uLnByb3RvdHlwZS5vbkNsaWNrLmNhbGwodGhpcyk7XG59O1xuXG52anMuVm9sdW1lTWVudUJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkJ1dHRvbi5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy12b2x1bWUtbWVudS1idXR0b24gdmpzLW1lbnUtYnV0dG9uIHZqcy1jb250cm9sJyxcbiAgICBpbm5lckhUTUw6ICc8ZGl2PjxzcGFuIGNsYXNzPVwidmpzLWNvbnRyb2wtdGV4dFwiPicgKyB0aGlzLmxvY2FsaXplKCdNdXRlJykgKyAnPC9zcGFuPjwvZGl2PidcbiAgfSk7XG59O1xudmpzLlZvbHVtZU1lbnVCdXR0b24ucHJvdG90eXBlLnVwZGF0ZSA9IHZqcy5NdXRlVG9nZ2xlLnByb3RvdHlwZS51cGRhdGU7XG4vKipcbiAqIFRoZSBjb21wb25lbnQgZm9yIGNvbnRyb2xsaW5nIHRoZSBwbGF5YmFjayByYXRlXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuUGxheWJhY2tSYXRlTWVudUJ1dHRvbiA9IHZqcy5NZW51QnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuTWVudUJ1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLnVwZGF0ZVZpc2liaWxpdHkoKTtcbiAgICB0aGlzLnVwZGF0ZUxhYmVsKCk7XG5cbiAgICBwbGF5ZXIub24oJ2xvYWRzdGFydCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlVmlzaWJpbGl0eSkpO1xuICAgIHBsYXllci5vbigncmF0ZWNoYW5nZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlTGFiZWwpKTtcbiAgfVxufSk7XG5cbnZqcy5QbGF5YmFja1JhdGVNZW51QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHZhciBlbCA9IHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcGxheWJhY2stcmF0ZSB2anMtbWVudS1idXR0b24gdmpzLWNvbnRyb2wnLFxuICAgIGlubmVySFRNTDogJzxkaXYgY2xhc3M9XCJ2anMtY29udHJvbC1jb250ZW50XCI+PHNwYW4gY2xhc3M9XCJ2anMtY29udHJvbC10ZXh0XCI+JyArIHRoaXMubG9jYWxpemUoJ1BsYXliYWNrIFJhdGUnKSArICc8L3NwYW4+PC9kaXY+J1xuICB9KTtcblxuICB0aGlzLmxhYmVsRWxfID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLXBsYXliYWNrLXJhdGUtdmFsdWUnLFxuICAgIGlubmVySFRNTDogMS4wXG4gIH0pO1xuXG4gIGVsLmFwcGVuZENoaWxkKHRoaXMubGFiZWxFbF8pO1xuXG4gIHJldHVybiBlbDtcbn07XG5cbi8vIE1lbnUgY3JlYXRpb25cbnZqcy5QbGF5YmFja1JhdGVNZW51QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVNZW51ID0gZnVuY3Rpb24oKXtcbiAgdmFyIG1lbnUgPSBuZXcgdmpzLk1lbnUodGhpcy5wbGF5ZXIoKSk7XG4gIHZhciByYXRlcyA9IHRoaXMucGxheWVyKCkub3B0aW9ucygpWydwbGF5YmFja1JhdGVzJ107XG5cbiAgaWYgKHJhdGVzKSB7XG4gICAgZm9yICh2YXIgaSA9IHJhdGVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBtZW51LmFkZENoaWxkKFxuICAgICAgICBuZXcgdmpzLlBsYXliYWNrUmF0ZU1lbnVJdGVtKHRoaXMucGxheWVyKCksIHsgJ3JhdGUnOiByYXRlc1tpXSArICd4J30pXG4gICAgICAgICk7XG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBtZW51O1xufTtcblxudmpzLlBsYXliYWNrUmF0ZU1lbnVCdXR0b24ucHJvdG90eXBlLnVwZGF0ZUFSSUFBdHRyaWJ1dGVzID0gZnVuY3Rpb24oKXtcbiAgLy8gQ3VycmVudCBwbGF5YmFjayByYXRlXG4gIHRoaXMuZWwoKS5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCB0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpKTtcbn07XG5cbnZqcy5QbGF5YmFja1JhdGVNZW51QnV0dG9uLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgLy8gc2VsZWN0IG5leHQgcmF0ZSBvcHRpb25cbiAgdmFyIGN1cnJlbnRSYXRlID0gdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKTtcbiAgdmFyIHJhdGVzID0gdGhpcy5wbGF5ZXIoKS5vcHRpb25zKClbJ3BsYXliYWNrUmF0ZXMnXTtcbiAgLy8gdGhpcyB3aWxsIHNlbGVjdCBmaXJzdCBvbmUgaWYgdGhlIGxhc3Qgb25lIGN1cnJlbnRseSBzZWxlY3RlZFxuICB2YXIgbmV3UmF0ZSA9IHJhdGVzWzBdO1xuICBmb3IgKHZhciBpID0gMDsgaSA8cmF0ZXMubGVuZ3RoIDsgaSsrKSB7XG4gICAgaWYgKHJhdGVzW2ldID4gY3VycmVudFJhdGUpIHtcbiAgICAgIG5ld1JhdGUgPSByYXRlc1tpXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfTtcbiAgdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUobmV3UmF0ZSk7XG59O1xuXG52anMuUGxheWJhY2tSYXRlTWVudUJ1dHRvbi5wcm90b3R5cGUucGxheWJhY2tSYXRlU3VwcG9ydGVkID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMucGxheWVyKCkudGVjaFxuICAgICYmIHRoaXMucGxheWVyKCkudGVjaFsnZmVhdHVyZXNQbGF5YmFja1JhdGUnXVxuICAgICYmIHRoaXMucGxheWVyKCkub3B0aW9ucygpWydwbGF5YmFja1JhdGVzJ11cbiAgICAmJiB0aGlzLnBsYXllcigpLm9wdGlvbnMoKVsncGxheWJhY2tSYXRlcyddLmxlbmd0aCA+IDBcbiAgO1xufTtcblxuLyoqXG4gKiBIaWRlIHBsYXliYWNrIHJhdGUgY29udHJvbHMgd2hlbiB0aGV5J3JlIG5vIHBsYXliYWNrIHJhdGUgb3B0aW9ucyB0byBzZWxlY3RcbiAqL1xudmpzLlBsYXliYWNrUmF0ZU1lbnVCdXR0b24ucHJvdG90eXBlLnVwZGF0ZVZpc2liaWxpdHkgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5wbGF5YmFja1JhdGVTdXBwb3J0ZWQoKSkge1xuICAgIHRoaXMucmVtb3ZlQ2xhc3MoJ3Zqcy1oaWRkZW4nKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmFkZENsYXNzKCd2anMtaGlkZGVuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogVXBkYXRlIGJ1dHRvbiBsYWJlbCB3aGVuIHJhdGUgY2hhbmdlZFxuICovXG52anMuUGxheWJhY2tSYXRlTWVudUJ1dHRvbi5wcm90b3R5cGUudXBkYXRlTGFiZWwgPSBmdW5jdGlvbigpe1xuICBpZiAodGhpcy5wbGF5YmFja1JhdGVTdXBwb3J0ZWQoKSkge1xuICAgIHRoaXMubGFiZWxFbF8uaW5uZXJIVE1MID0gdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUoKSArICd4JztcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgc3BlY2lmaWMgbWVudSBpdGVtIHR5cGUgZm9yIHNlbGVjdGluZyBhIHBsYXliYWNrIHJhdGVcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlBsYXliYWNrUmF0ZU1lbnVJdGVtID0gdmpzLk1lbnVJdGVtLmV4dGVuZCh7XG4gIGNvbnRlbnRFbFR5cGU6ICdidXR0b24nLFxuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmFyIGxhYmVsID0gdGhpcy5sYWJlbCA9IG9wdGlvbnNbJ3JhdGUnXTtcbiAgICB2YXIgcmF0ZSA9IHRoaXMucmF0ZSA9IHBhcnNlRmxvYXQobGFiZWwsIDEwKTtcblxuICAgIC8vIE1vZGlmeSBvcHRpb25zIGZvciBwYXJlbnQgTWVudUl0ZW0gY2xhc3MncyBpbml0LlxuICAgIG9wdGlvbnNbJ2xhYmVsJ10gPSBsYWJlbDtcbiAgICBvcHRpb25zWydzZWxlY3RlZCddID0gcmF0ZSA9PT0gMTtcbiAgICB2anMuTWVudUl0ZW0uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5wbGF5ZXIoKS5vbigncmF0ZWNoYW5nZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlKSk7XG4gIH1cbn0pO1xuXG52anMuUGxheWJhY2tSYXRlTWVudUl0ZW0ucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICB2anMuTWVudUl0ZW0ucHJvdG90eXBlLm9uQ2xpY2suY2FsbCh0aGlzKTtcbiAgdGhpcy5wbGF5ZXIoKS5wbGF5YmFja1JhdGUodGhpcy5yYXRlKTtcbn07XG5cbnZqcy5QbGF5YmFja1JhdGVNZW51SXRlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5zZWxlY3RlZCh0aGlzLnBsYXllcigpLnBsYXliYWNrUmF0ZSgpID09IHRoaXMucmF0ZSk7XG59O1xuLyogUG9zdGVyIEltYWdlXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuLyoqXG4gKiBUaGUgY29tcG9uZW50IHRoYXQgaGFuZGxlcyBzaG93aW5nIHRoZSBwb3N0ZXIgaW1hZ2UuXG4gKlxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuUG9zdGVySW1hZ2UgPSB2anMuQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQnV0dG9uLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIGlmIChwbGF5ZXIucG9zdGVyKCkpIHtcbiAgICAgIHRoaXMuc3JjKHBsYXllci5wb3N0ZXIoKSk7XG4gICAgfVxuXG4gICAgaWYgKCFwbGF5ZXIucG9zdGVyKCkgfHwgIXBsYXllci5jb250cm9scygpKSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG5cbiAgICBwbGF5ZXIub24oJ3Bvc3RlcmNoYW5nZScsIHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uKCl7XG4gICAgICB0aGlzLnNyYyhwbGF5ZXIucG9zdGVyKCkpO1xuICAgIH0pKTtcblxuICAgIHBsYXllci5vbigncGxheScsIHZqcy5iaW5kKHRoaXMsIHRoaXMuaGlkZSkpO1xuICB9XG59KTtcblxuLy8gdXNlIHRoZSB0ZXN0IGVsIHRvIGNoZWNrIGZvciBiYWNrZ3JvdW5kU2l6ZSBzdHlsZSBzdXBwb3J0XG52YXIgX2JhY2tncm91bmRTaXplU3VwcG9ydGVkID0gJ2JhY2tncm91bmRTaXplJyBpbiB2anMuVEVTVF9WSUQuc3R5bGU7XG5cbnZqcy5Qb3N0ZXJJbWFnZS5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICB2YXIgZWwgPSB2anMuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtcG9zdGVyJyxcblxuICAgIC8vIERvbid0IHdhbnQgcG9zdGVyIHRvIGJlIHRhYmJhYmxlLlxuICAgIHRhYkluZGV4OiAtMVxuICB9KTtcblxuICBpZiAoIV9iYWNrZ3JvdW5kU2l6ZVN1cHBvcnRlZCkge1xuICAgIC8vIHNldHVwIGFuIGltZyBlbGVtZW50IGFzIGEgZmFsbGJhY2sgZm9yIElFOFxuICAgIGVsLmFwcGVuZENoaWxkKHZqcy5jcmVhdGVFbCgnaW1nJykpO1xuICB9XG5cbiAgcmV0dXJuIGVsO1xufTtcblxudmpzLlBvc3RlckltYWdlLnByb3RvdHlwZS5zcmMgPSBmdW5jdGlvbih1cmwpe1xuICB2YXIgZWwgPSB0aGlzLmVsKCk7XG5cbiAgLy8gZ2V0dGVyXG4gIC8vIGNhbid0IHRoaW5rIG9mIGEgbmVlZCBmb3IgYSBnZXR0ZXIgaGVyZVxuICAvLyBzZWUgIzgzOCBpZiBvbiBpcyBuZWVkZWQgaW4gdGhlIGZ1dHVyZVxuICAvLyBzdGlsbCBkb24ndCB3YW50IGEgZ2V0dGVyIHRvIHNldCBzcmMgYXMgdW5kZWZpbmVkXG4gIGlmICh1cmwgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIHNldHRlclxuICAvLyBUbyBlbnN1cmUgdGhlIHBvc3RlciBpbWFnZSByZXNpemVzIHdoaWxlIG1haW50YWluaW5nIGl0cyBvcmlnaW5hbCBhc3BlY3RcbiAgLy8gcmF0aW8sIHVzZSBhIGRpdiB3aXRoIGBiYWNrZ3JvdW5kLXNpemVgIHdoZW4gYXZhaWxhYmxlLiBGb3IgYnJvd3NlcnMgdGhhdFxuICAvLyBkbyBub3Qgc3VwcG9ydCBgYmFja2dyb3VuZC1zaXplYCAoZS5nLiBJRTgpLCBmYWxsIGJhY2sgb24gdXNpbmcgYSByZWd1bGFyXG4gIC8vIGltZyBlbGVtZW50LlxuICBpZiAoX2JhY2tncm91bmRTaXplU3VwcG9ydGVkKSB7XG4gICAgZWwuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gJ3VybChcIicgKyB1cmwgKyAnXCIpJztcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJzdENoaWxkLnNyYyA9IHVybDtcbiAgfVxufTtcblxudmpzLlBvc3RlckltYWdlLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oKXtcbiAgLy8gT25seSBhY2NlcHQgY2xpY2tzIHdoZW4gY29udHJvbHMgYXJlIGVuYWJsZWRcbiAgaWYgKHRoaXMucGxheWVyKCkuY29udHJvbHMoKSkge1xuICAgIHRoaXMucGxheWVyXy5wbGF5KCk7XG4gIH1cbn07XG4vKiBMb2FkaW5nIFNwaW5uZXJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vKipcbiAqIExvYWRpbmcgc3Bpbm5lciBmb3Igd2FpdGluZyBldmVudHNcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTG9hZGluZ1NwaW5uZXIgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIC8vIE1PVklORyBESVNQTEFZIEhBTkRMSU5HIFRPIENTU1xuXG4gICAgLy8gcGxheWVyLm9uKCdjYW5wbGF5JywgdmpzLmJpbmQodGhpcywgdGhpcy5oaWRlKSk7XG4gICAgLy8gcGxheWVyLm9uKCdjYW5wbGF5dGhyb3VnaCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMuaGlkZSkpO1xuICAgIC8vIHBsYXllci5vbigncGxheWluZycsIHZqcy5iaW5kKHRoaXMsIHRoaXMuaGlkZSkpO1xuICAgIC8vIHBsYXllci5vbignc2Vla2luZycsIHZqcy5iaW5kKHRoaXMsIHRoaXMuc2hvdykpO1xuXG4gICAgLy8gaW4gc29tZSBicm93c2VycyBzZWVraW5nIGRvZXMgbm90IHRyaWdnZXIgdGhlICdwbGF5aW5nJyBldmVudCxcbiAgICAvLyBzbyB3ZSBhbHNvIG5lZWQgdG8gdHJhcCAnc2Vla2VkJyBpZiB3ZSBhcmUgZ29pbmcgdG8gc2V0IGFcbiAgICAvLyAnc2Vla2luZycgZXZlbnRcbiAgICAvLyBwbGF5ZXIub24oJ3NlZWtlZCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMuaGlkZSkpO1xuXG4gICAgLy8gcGxheWVyLm9uKCdlbmRlZCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMuaGlkZSkpO1xuXG4gICAgLy8gTm90IHNob3dpbmcgc3Bpbm5lciBvbiBzdGFsbGVkIGFueSBtb3JlLiBCcm93c2VycyBtYXkgc3RhbGwgYW5kIHRoZW4gbm90IHRyaWdnZXIgYW55IGV2ZW50cyB0aGF0IHdvdWxkIHJlbW92ZSB0aGUgc3Bpbm5lci5cbiAgICAvLyBDaGVja2VkIGluIENocm9tZSAxNiBhbmQgU2FmYXJpIDUuMS4yLiBodHRwOi8vaGVscC52aWRlb2pzLmNvbS9kaXNjdXNzaW9ucy9wcm9ibGVtcy84ODMtd2h5LWlzLXRoZS1kb3dubG9hZC1wcm9ncmVzcy1zaG93aW5nXG4gICAgLy8gcGxheWVyLm9uKCdzdGFsbGVkJywgdmpzLmJpbmQodGhpcywgdGhpcy5zaG93KSk7XG5cbiAgICAvLyBwbGF5ZXIub24oJ3dhaXRpbmcnLCB2anMuYmluZCh0aGlzLCB0aGlzLnNob3cpKTtcbiAgfVxufSk7XG5cbnZqcy5Mb2FkaW5nU3Bpbm5lci5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1sb2FkaW5nLXNwaW5uZXInXG4gIH0pO1xufTtcbi8qIEJpZyBQbGF5IEJ1dHRvblxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbi8qKlxuICogSW5pdGlhbCBwbGF5IGJ1dHRvbi4gU2hvd3MgYmVmb3JlIHRoZSB2aWRlbyBoYXMgcGxheWVkLiBUaGUgaGlkaW5nIG9mIHRoZVxuICogYmlnIHBsYXkgYnV0dG9uIGlzIGRvbmUgdmlhIENTUyBhbmQgcGxheWVyIHN0YXRlcy5cbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY2xhc3NcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuQmlnUGxheUJ1dHRvbiA9IHZqcy5CdXR0b24uZXh0ZW5kKCk7XG5cbnZqcy5CaWdQbGF5QnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVFbC5jYWxsKHRoaXMsICdkaXYnLCB7XG4gICAgY2xhc3NOYW1lOiAndmpzLWJpZy1wbGF5LWJ1dHRvbicsXG4gICAgaW5uZXJIVE1MOiAnPHNwYW4gYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9zcGFuPicsXG4gICAgJ2FyaWEtbGFiZWwnOiAncGxheSB2aWRlbydcbiAgfSk7XG59O1xuXG52anMuQmlnUGxheUJ1dHRvbi5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMucGxheWVyXy5wbGF5KCk7XG59O1xuLyoqXG4gKiBEaXNwbGF5IHRoYXQgYW4gZXJyb3IgaGFzIG9jY3VycmVkIG1ha2luZyB0aGUgdmlkZW8gdW5wbGF5YWJsZVxuICogQHBhcmFtIHt2anMuUGxheWVyfE9iamVjdH0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuRXJyb3JEaXNwbGF5ID0gdmpzLkNvbXBvbmVudC5leHRlbmQoe1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy51cGRhdGUoKTtcbiAgICBwbGF5ZXIub24oJ2Vycm9yJywgdmpzLmJpbmQodGhpcywgdGhpcy51cGRhdGUpKTtcbiAgfVxufSk7XG5cbnZqcy5FcnJvckRpc3BsYXkucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgdmFyIGVsID0gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy1lcnJvci1kaXNwbGF5J1xuICB9KTtcblxuICB0aGlzLmNvbnRlbnRFbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicpO1xuICBlbC5hcHBlbmRDaGlsZCh0aGlzLmNvbnRlbnRFbF8pO1xuXG4gIHJldHVybiBlbDtcbn07XG5cbnZqcy5FcnJvckRpc3BsYXkucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gIGlmICh0aGlzLnBsYXllcigpLmVycm9yKCkpIHtcbiAgICB0aGlzLmNvbnRlbnRFbF8uaW5uZXJIVE1MID0gdGhpcy5sb2NhbGl6ZSh0aGlzLnBsYXllcigpLmVycm9yKCkubWVzc2FnZSk7XG4gIH1cbn07XG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgTWVkaWEgVGVjaG5vbG9neSBDb250cm9sbGVyIC0gQmFzZSBjbGFzcyBmb3IgbWVkaWEgcGxheWJhY2tcbiAqIHRlY2hub2xvZ3kgY29udHJvbGxlcnMgbGlrZSBGbGFzaCBhbmQgSFRNTDVcbiAqL1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIG1lZGlhIChIVE1MNSBWaWRlbywgRmxhc2gpIGNvbnRyb2xsZXJzXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXIgIENlbnRyYWwgcGxheWVyIGluc3RhbmNlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgT3B0aW9ucyBvYmplY3RcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTWVkaWFUZWNoQ29udHJvbGxlciA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAvLyB3ZSBkb24ndCB3YW50IHRoZSB0ZWNoIHRvIHJlcG9ydCB1c2VyIGFjdGl2aXR5IGF1dG9tYXRpY2FsbHkuXG4gICAgLy8gVGhpcyBpcyBkb25lIG1hbnVhbGx5IGluIGFkZENvbnRyb2xzTGlzdGVuZXJzXG4gICAgb3B0aW9ucy5yZXBvcnRUb3VjaEFjdGl2aXR5ID0gZmFsc2U7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuXG4gICAgLy8gTWFudWFsbHkgdHJhY2sgcHJvZ3Jlc3MgaW4gY2FzZXMgd2hlcmUgdGhlIGJyb3dzZXIvZmxhc2ggcGxheWVyIGRvZXNuJ3QgcmVwb3J0IGl0LlxuICAgIGlmICghdGhpc1snZmVhdHVyZXNQcm9ncmVzc0V2ZW50cyddKSB7XG4gICAgICB0aGlzLm1hbnVhbFByb2dyZXNzT24oKTtcbiAgICB9XG5cbiAgICAvLyBNYW51YWxseSB0cmFjayB0aW1ldWRwYXRlcyBpbiBjYXNlcyB3aGVyZSB0aGUgYnJvd3Nlci9mbGFzaCBwbGF5ZXIgZG9lc24ndCByZXBvcnQgaXQuXG4gICAgaWYgKCF0aGlzWydmZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMnXSkge1xuICAgICAgdGhpcy5tYW51YWxUaW1lVXBkYXRlc09uKCk7XG4gICAgfVxuXG4gICAgdGhpcy5pbml0Q29udHJvbHNMaXN0ZW5lcnMoKTtcbiAgfVxufSk7XG5cbi8qKlxuICogU2V0IHVwIGNsaWNrIGFuZCB0b3VjaCBsaXN0ZW5lcnMgZm9yIHRoZSBwbGF5YmFjayBlbGVtZW50XG4gKiBPbiBkZXNrdG9wcywgYSBjbGljayBvbiB0aGUgdmlkZW8gaXRzZWxmIHdpbGwgdG9nZ2xlIHBsYXliYWNrLFxuICogb24gYSBtb2JpbGUgZGV2aWNlIGEgY2xpY2sgb24gdGhlIHZpZGVvIHRvZ2dsZXMgY29udHJvbHMuXG4gKiAodG9nZ2xpbmcgY29udHJvbHMgaXMgZG9uZSBieSB0b2dnbGluZyB0aGUgdXNlciBzdGF0ZSBiZXR3ZWVuIGFjdGl2ZSBhbmRcbiAqIGluYWN0aXZlKVxuICpcbiAqIEEgdGFwIGNhbiBzaWduYWwgdGhhdCBhIHVzZXIgaGFzIGJlY29tZSBhY3RpdmUsIG9yIGhhcyBiZWNvbWUgaW5hY3RpdmVcbiAqIGUuZy4gYSBxdWljayB0YXAgb24gYW4gaVBob25lIG1vdmllIHNob3VsZCByZXZlYWwgdGhlIGNvbnRyb2xzLiBBbm90aGVyXG4gKiBxdWljayB0YXAgc2hvdWxkIGhpZGUgdGhlbSBhZ2FpbiAoc2lnbmFsaW5nIHRoZSB1c2VyIGlzIGluIGFuIGluYWN0aXZlXG4gKiB2aWV3aW5nIHN0YXRlKVxuICpcbiAqIEluIGFkZGl0aW9uIHRvIHRoaXMsIHdlIHN0aWxsIHdhbnQgdGhlIHVzZXIgdG8gYmUgY29uc2lkZXJlZCBpbmFjdGl2ZSBhZnRlclxuICogYSBmZXcgc2Vjb25kcyBvZiBpbmFjdGl2aXR5LlxuICpcbiAqIE5vdGU6IHRoZSBvbmx5IHBhcnQgb2YgaU9TIGludGVyYWN0aW9uIHdlIGNhbid0IG1pbWljIHdpdGggdGhpcyBzZXR1cFxuICogaXMgYSB0b3VjaCBhbmQgaG9sZCBvbiB0aGUgdmlkZW8gZWxlbWVudCBjb3VudGluZyBhcyBhY3Rpdml0eSBpbiBvcmRlciB0b1xuICoga2VlcCB0aGUgY29udHJvbHMgc2hvd2luZywgYnV0IHRoYXQgc2hvdWxkbid0IGJlIGFuIGlzc3VlLiBBIHRvdWNoIGFuZCBob2xkIG9uXG4gKiBhbnkgY29udHJvbHMgd2lsbCBzdGlsbCBrZWVwIHRoZSB1c2VyIGFjdGl2ZVxuICovXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuaW5pdENvbnRyb2xzTGlzdGVuZXJzID0gZnVuY3Rpb24oKXtcbiAgdmFyIHBsYXllciwgdGVjaCwgYWN0aXZhdGVDb250cm9scywgZGVhY3RpdmF0ZUNvbnRyb2xzO1xuXG4gIHRlY2ggPSB0aGlzO1xuICBwbGF5ZXIgPSB0aGlzLnBsYXllcigpO1xuXG4gIHZhciBhY3RpdmF0ZUNvbnRyb2xzID0gZnVuY3Rpb24oKXtcbiAgICBpZiAocGxheWVyLmNvbnRyb2xzKCkgJiYgIXBsYXllci51c2luZ05hdGl2ZUNvbnRyb2xzKCkpIHtcbiAgICAgIHRlY2guYWRkQ29udHJvbHNMaXN0ZW5lcnMoKTtcbiAgICB9XG4gIH07XG5cbiAgZGVhY3RpdmF0ZUNvbnRyb2xzID0gdmpzLmJpbmQodGVjaCwgdGVjaC5yZW1vdmVDb250cm9sc0xpc3RlbmVycyk7XG5cbiAgLy8gU2V0IHVwIGV2ZW50IGxpc3RlbmVycyBvbmNlIHRoZSB0ZWNoIGlzIHJlYWR5IGFuZCBoYXMgYW4gZWxlbWVudCB0byBhcHBseVxuICAvLyBsaXN0ZW5lcnMgdG9cbiAgdGhpcy5yZWFkeShhY3RpdmF0ZUNvbnRyb2xzKTtcbiAgcGxheWVyLm9uKCdjb250cm9sc2VuYWJsZWQnLCBhY3RpdmF0ZUNvbnRyb2xzKTtcbiAgcGxheWVyLm9uKCdjb250cm9sc2Rpc2FibGVkJywgZGVhY3RpdmF0ZUNvbnRyb2xzKTtcblxuICAvLyBpZiB3ZSdyZSBsb2FkaW5nIHRoZSBwbGF5YmFjayBvYmplY3QgYWZ0ZXIgaXQgaGFzIHN0YXJ0ZWQgbG9hZGluZyBvciBwbGF5aW5nIHRoZVxuICAvLyB2aWRlbyAob2Z0ZW4gd2l0aCBhdXRvcGxheSBvbikgdGhlbiB0aGUgbG9hZHN0YXJ0IGV2ZW50IGhhcyBhbHJlYWR5IGZpcmVkIGFuZCB3ZVxuICAvLyBuZWVkIHRvIGZpcmUgaXQgbWFudWFsbHkgYmVjYXVzZSBtYW55IHRoaW5ncyByZWx5IG9uIGl0LlxuICAvLyBMb25nIHRlcm0gd2UgbWlnaHQgY29uc2lkZXIgaG93IHdlIHdvdWxkIGRvIHRoaXMgZm9yIG90aGVyIGV2ZW50cyBsaWtlICdjYW5wbGF5J1xuICAvLyB0aGF0IG1heSBhbHNvIGhhdmUgZmlyZWQuXG4gIHRoaXMucmVhZHkoZnVuY3Rpb24oKXtcbiAgICBpZiAodGhpcy5uZXR3b3JrU3RhdGUgJiYgdGhpcy5uZXR3b3JrU3RhdGUoKSA+IDApIHtcbiAgICAgIHRoaXMucGxheWVyKCkudHJpZ2dlcignbG9hZHN0YXJ0Jyk7XG4gICAgfVxuICB9KTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5hZGRDb250cm9sc0xpc3RlbmVycyA9IGZ1bmN0aW9uKCl7XG4gIHZhciB1c2VyV2FzQWN0aXZlO1xuXG4gIC8vIFNvbWUgYnJvd3NlcnMgKENocm9tZSAmIElFKSBkb24ndCB0cmlnZ2VyIGEgY2xpY2sgb24gYSBmbGFzaCBzd2YsIGJ1dCBkb1xuICAvLyB0cmlnZ2VyIG1vdXNlZG93bi91cC5cbiAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDQ0NTYyL2phdmFzY3JpcHQtb25jbGljay1ldmVudC1vdmVyLWZsYXNoLW9iamVjdFxuICAvLyBBbnkgdG91Y2ggZXZlbnRzIGFyZSBzZXQgdG8gYmxvY2sgdGhlIG1vdXNlZG93biBldmVudCBmcm9tIGhhcHBlbmluZ1xuICB0aGlzLm9uKCdtb3VzZWRvd24nLCB0aGlzLm9uQ2xpY2spO1xuXG4gIC8vIElmIHRoZSBjb250cm9scyB3ZXJlIGhpZGRlbiB3ZSBkb24ndCB3YW50IHRoYXQgdG8gY2hhbmdlIHdpdGhvdXQgYSB0YXAgZXZlbnRcbiAgLy8gc28gd2UnbGwgY2hlY2sgaWYgdGhlIGNvbnRyb2xzIHdlcmUgYWxyZWFkeSBzaG93aW5nIGJlZm9yZSByZXBvcnRpbmcgdXNlclxuICAvLyBhY3Rpdml0eVxuICB0aGlzLm9uKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB1c2VyV2FzQWN0aXZlID0gdGhpcy5wbGF5ZXJfLnVzZXJBY3RpdmUoKTtcbiAgfSk7XG5cbiAgdGhpcy5vbigndG91Y2htb3ZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodXNlcldhc0FjdGl2ZSl7XG4gICAgICB0aGlzLnBsYXllcigpLnJlcG9ydFVzZXJBY3Rpdml0eSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgdGhpcy5vbigndG91Y2hlbmQnLCBmdW5jdGlvbihldmVudCkge1xuICAgIC8vIFN0b3AgdGhlIG1vdXNlIGV2ZW50cyBmcm9tIGFsc28gaGFwcGVuaW5nXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgfSk7XG5cbiAgLy8gVHVybiBvbiBjb21wb25lbnQgdGFwIGV2ZW50c1xuICB0aGlzLmVtaXRUYXBFdmVudHMoKTtcblxuICAvLyBUaGUgdGFwIGxpc3RlbmVyIG5lZWRzIHRvIGNvbWUgYWZ0ZXIgdGhlIHRvdWNoZW5kIGxpc3RlbmVyIGJlY2F1c2UgdGhlIHRhcFxuICAvLyBsaXN0ZW5lciBjYW5jZWxzIG91dCBhbnkgcmVwb3J0ZWRVc2VyQWN0aXZpdHkgd2hlbiBzZXR0aW5nIHVzZXJBY3RpdmUoZmFsc2UpXG4gIHRoaXMub24oJ3RhcCcsIHRoaXMub25UYXApO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgdGhlIGxpc3RlbmVycyB1c2VkIGZvciBjbGljayBhbmQgdGFwIGNvbnRyb2xzLiBUaGlzIGlzIG5lZWRlZCBmb3JcbiAqIHRvZ2dsaW5nIHRvIGNvbnRyb2xzIGRpc2FibGVkLCB3aGVyZSBhIHRhcC90b3VjaCBzaG91bGQgZG8gbm90aGluZy5cbiAqL1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZUNvbnRyb2xzTGlzdGVuZXJzID0gZnVuY3Rpb24oKXtcbiAgLy8gV2UgZG9uJ3Qgd2FudCB0byBqdXN0IHVzZSBgdGhpcy5vZmYoKWAgYmVjYXVzZSB0aGVyZSBtaWdodCBiZSBvdGhlciBuZWVkZWRcbiAgLy8gbGlzdGVuZXJzIGFkZGVkIGJ5IHRlY2hzIHRoYXQgZXh0ZW5kIHRoaXMuXG4gIHRoaXMub2ZmKCd0YXAnKTtcbiAgdGhpcy5vZmYoJ3RvdWNoc3RhcnQnKTtcbiAgdGhpcy5vZmYoJ3RvdWNobW92ZScpO1xuICB0aGlzLm9mZigndG91Y2hsZWF2ZScpO1xuICB0aGlzLm9mZigndG91Y2hjYW5jZWwnKTtcbiAgdGhpcy5vZmYoJ3RvdWNoZW5kJyk7XG4gIHRoaXMub2ZmKCdjbGljaycpO1xuICB0aGlzLm9mZignbW91c2Vkb3duJyk7XG59O1xuXG4vKipcbiAqIEhhbmRsZSBhIGNsaWNrIG9uIHRoZSBtZWRpYSBlbGVtZW50LiBCeSBkZWZhdWx0IHdpbGwgcGxheS9wYXVzZSB0aGUgbWVkaWEuXG4gKi9cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5vbkNsaWNrID0gZnVuY3Rpb24oZXZlbnQpe1xuICAvLyBXZSdyZSB1c2luZyBtb3VzZWRvd24gdG8gZGV0ZWN0IGNsaWNrcyB0aGFua3MgdG8gRmxhc2gsIGJ1dCBtb3VzZWRvd25cbiAgLy8gd2lsbCBhbHNvIGJlIHRyaWdnZXJlZCB3aXRoIHJpZ2h0LWNsaWNrcywgc28gd2UgbmVlZCB0byBwcmV2ZW50IHRoYXRcbiAgaWYgKGV2ZW50LmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXG4gIC8vIFdoZW4gY29udHJvbHMgYXJlIGRpc2FibGVkIGEgY2xpY2sgc2hvdWxkIG5vdCB0b2dnbGUgcGxheWJhY2sgYmVjYXVzZVxuICAvLyB0aGUgY2xpY2sgaXMgY29uc2lkZXJlZCBhIGNvbnRyb2xcbiAgaWYgKHRoaXMucGxheWVyKCkuY29udHJvbHMoKSkge1xuICAgIGlmICh0aGlzLnBsYXllcigpLnBhdXNlZCgpKSB7XG4gICAgICB0aGlzLnBsYXllcigpLnBsYXkoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGF5ZXIoKS5wYXVzZSgpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBIYW5kbGUgYSB0YXAgb24gdGhlIG1lZGlhIGVsZW1lbnQuIEJ5IGRlZmF1bHQgaXQgd2lsbCB0b2dnbGUgdGhlIHVzZXJcbiAqIGFjdGl2aXR5IHN0YXRlLCB3aGljaCBoaWRlcyBhbmQgc2hvd3MgdGhlIGNvbnRyb2xzLlxuICovXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUub25UYXAgPSBmdW5jdGlvbigpe1xuICB0aGlzLnBsYXllcigpLnVzZXJBY3RpdmUoIXRoaXMucGxheWVyKCkudXNlckFjdGl2ZSgpKTtcbn07XG5cbi8qIEZhbGxiYWNrcyBmb3IgdW5zdXBwb3J0ZWQgZXZlbnQgdHlwZXNcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vLyBNYW51YWxseSB0cmlnZ2VyIHByb2dyZXNzIGV2ZW50cyBiYXNlZCBvbiBjaGFuZ2VzIHRvIHRoZSBidWZmZXJlZCBhbW91bnRcbi8vIE1hbnkgZmxhc2ggcGxheWVycyBhbmQgb2xkZXIgSFRNTDUgYnJvd3NlcnMgZG9uJ3Qgc2VuZCBwcm9ncmVzcyBvciBwcm9ncmVzcy1saWtlIGV2ZW50c1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLm1hbnVhbFByb2dyZXNzT24gPSBmdW5jdGlvbigpe1xuICB0aGlzLm1hbnVhbFByb2dyZXNzID0gdHJ1ZTtcblxuICAvLyBUcmlnZ2VyIHByb2dyZXNzIHdhdGNoaW5nIHdoZW4gYSBzb3VyY2UgYmVnaW5zIGxvYWRpbmdcbiAgdGhpcy50cmFja1Byb2dyZXNzKCk7XG59O1xuXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUubWFudWFsUHJvZ3Jlc3NPZmYgPSBmdW5jdGlvbigpe1xuICB0aGlzLm1hbnVhbFByb2dyZXNzID0gZmFsc2U7XG4gIHRoaXMuc3RvcFRyYWNraW5nUHJvZ3Jlc3MoKTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS50cmFja1Byb2dyZXNzID0gZnVuY3Rpb24oKXtcblxuICB0aGlzLnByb2dyZXNzSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh2anMuYmluZCh0aGlzLCBmdW5jdGlvbigpe1xuICAgIC8vIERvbid0IHRyaWdnZXIgdW5sZXNzIGJ1ZmZlcmVkIGFtb3VudCBpcyBncmVhdGVyIHRoYW4gbGFzdCB0aW1lXG5cbiAgICB2YXIgYnVmZmVyZWRQZXJjZW50ID0gdGhpcy5wbGF5ZXIoKS5idWZmZXJlZFBlcmNlbnQoKTtcblxuICAgIGlmICh0aGlzLmJ1ZmZlcmVkUGVyY2VudF8gIT0gYnVmZmVyZWRQZXJjZW50KSB7XG4gICAgICB0aGlzLnBsYXllcigpLnRyaWdnZXIoJ3Byb2dyZXNzJyk7XG4gICAgfVxuXG4gICAgdGhpcy5idWZmZXJlZFBlcmNlbnRfID0gYnVmZmVyZWRQZXJjZW50O1xuXG4gICAgaWYgKGJ1ZmZlcmVkUGVyY2VudCA9PT0gMSkge1xuICAgICAgdGhpcy5zdG9wVHJhY2tpbmdQcm9ncmVzcygpO1xuICAgIH1cbiAgfSksIDUwMCk7XG59O1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLnN0b3BUcmFja2luZ1Byb2dyZXNzID0gZnVuY3Rpb24oKXsgY2xlYXJJbnRlcnZhbCh0aGlzLnByb2dyZXNzSW50ZXJ2YWwpOyB9O1xuXG4vKiEgVGltZSBUcmFja2luZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLm1hbnVhbFRpbWVVcGRhdGVzT24gPSBmdW5jdGlvbigpe1xuICB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzID0gdHJ1ZTtcblxuICB0aGlzLnBsYXllcigpLm9uKCdwbGF5JywgdmpzLmJpbmQodGhpcywgdGhpcy50cmFja0N1cnJlbnRUaW1lKSk7XG4gIHRoaXMucGxheWVyKCkub24oJ3BhdXNlJywgdmpzLmJpbmQodGhpcywgdGhpcy5zdG9wVHJhY2tpbmdDdXJyZW50VGltZSkpO1xuICAvLyB0aW1ldXBkYXRlIGlzIGFsc28gY2FsbGVkIGJ5IC5jdXJyZW50VGltZSB3aGVuZXZlciBjdXJyZW50IHRpbWUgaXMgc2V0XG5cbiAgLy8gV2F0Y2ggZm9yIG5hdGl2ZSB0aW1ldXBkYXRlIGV2ZW50XG4gIHRoaXMub25lKCd0aW1ldXBkYXRlJywgZnVuY3Rpb24oKXtcbiAgICAvLyBVcGRhdGUga25vd24gcHJvZ3Jlc3Mgc3VwcG9ydCBmb3IgdGhpcyBwbGF5YmFjayB0ZWNobm9sb2d5XG4gICAgdGhpc1snZmVhdHVyZXNUaW1ldXBkYXRlRXZlbnRzJ10gPSB0cnVlO1xuICAgIC8vIFR1cm4gb2ZmIG1hbnVhbCBwcm9ncmVzcyB0cmFja2luZ1xuICAgIHRoaXMubWFudWFsVGltZVVwZGF0ZXNPZmYoKTtcbiAgfSk7XG59O1xuXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUubWFudWFsVGltZVVwZGF0ZXNPZmYgPSBmdW5jdGlvbigpe1xuICB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzID0gZmFsc2U7XG4gIHRoaXMuc3RvcFRyYWNraW5nQ3VycmVudFRpbWUoKTtcbiAgdGhpcy5vZmYoJ3BsYXknLCB0aGlzLnRyYWNrQ3VycmVudFRpbWUpO1xuICB0aGlzLm9mZigncGF1c2UnLCB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS50cmFja0N1cnJlbnRUaW1lID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMuY3VycmVudFRpbWVJbnRlcnZhbCkgeyB0aGlzLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lKCk7IH1cbiAgdGhpcy5jdXJyZW50VGltZUludGVydmFsID0gc2V0SW50ZXJ2YWwodmpzLmJpbmQodGhpcywgZnVuY3Rpb24oKXtcbiAgICB0aGlzLnBsYXllcigpLnRyaWdnZXIoJ3RpbWV1cGRhdGUnKTtcbiAgfSksIDI1MCk7IC8vIDQyID0gMjQgZnBzIC8vIDI1MCBpcyB3aGF0IFdlYmtpdCB1c2VzIC8vIEZGIHVzZXMgMTVcbn07XG5cbi8vIFR1cm4gb2ZmIHBsYXkgcHJvZ3Jlc3MgdHJhY2tpbmcgKHdoZW4gcGF1c2VkIG9yIGRyYWdnaW5nKVxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLnN0b3BUcmFja2luZ0N1cnJlbnRUaW1lID0gZnVuY3Rpb24oKXtcbiAgY2xlYXJJbnRlcnZhbCh0aGlzLmN1cnJlbnRUaW1lSW50ZXJ2YWwpO1xuXG4gIC8vICMxMDAyIC0gaWYgdGhlIHZpZGVvIGVuZHMgcmlnaHQgYmVmb3JlIHRoZSBuZXh0IHRpbWV1cGRhdGUgd291bGQgaGFwcGVuLFxuICAvLyB0aGUgcHJvZ3Jlc3MgYmFyIHdvbid0IG1ha2UgaXQgYWxsIHRoZSB3YXkgdG8gdGhlIGVuZFxuICB0aGlzLnBsYXllcigpLnRyaWdnZXIoJ3RpbWV1cGRhdGUnKTtcbn07XG5cbnZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKSB7XG4gIC8vIFR1cm4gb2ZmIGFueSBtYW51YWwgcHJvZ3Jlc3Mgb3IgdGltZXVwZGF0ZSB0cmFja2luZ1xuICBpZiAodGhpcy5tYW51YWxQcm9ncmVzcykgeyB0aGlzLm1hbnVhbFByb2dyZXNzT2ZmKCk7IH1cblxuICBpZiAodGhpcy5tYW51YWxUaW1lVXBkYXRlcykgeyB0aGlzLm1hbnVhbFRpbWVVcGRhdGVzT2ZmKCk7IH1cblxuICB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG59O1xuXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuc2V0Q3VycmVudFRpbWUgPSBmdW5jdGlvbigpIHtcbiAgLy8gaW1wcm92ZSB0aGUgYWNjdXJhY3kgb2YgbWFudWFsIHRpbWV1cGRhdGVzXG4gIGlmICh0aGlzLm1hbnVhbFRpbWVVcGRhdGVzKSB7IHRoaXMucGxheWVyKCkudHJpZ2dlcigndGltZXVwZGF0ZScpOyB9XG59O1xuXG4vKipcbiAqIFByb3ZpZGUgYSBkZWZhdWx0IHNldFBvc3RlciBtZXRob2QgZm9yIHRlY2hzXG4gKlxuICogUG9zdGVyIHN1cHBvcnQgZm9yIHRlY2hzIHNob3VsZCBiZSBvcHRpb25hbCwgc28gd2UgZG9uJ3Qgd2FudCB0ZWNocyB0b1xuICogYnJlYWsgaWYgdGhleSBkb24ndCBoYXZlIGEgd2F5IHRvIHNldCBhIHBvc3Rlci5cbiAqL1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLnNldFBvc3RlciA9IGZ1bmN0aW9uKCl7fTtcblxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlWydmZWF0dXJlc1ZvbHVtZUNvbnRyb2wnXSA9IHRydWU7XG5cbi8vIFJlc2l6aW5nIHBsdWdpbnMgdXNpbmcgcmVxdWVzdCBmdWxsc2NyZWVuIHJlbG9hZHMgdGhlIHBsdWdpblxudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlWydmZWF0dXJlc0Z1bGxzY3JlZW5SZXNpemUnXSA9IGZhbHNlO1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlWydmZWF0dXJlc1BsYXliYWNrUmF0ZSddID0gZmFsc2U7XG5cbi8vIE9wdGlvbmFsIGV2ZW50cyB0aGF0IHdlIGNhbiBtYW51YWxseSBtaW1pYyB3aXRoIHRpbWVyc1xuLy8gY3VycmVudGx5IG5vdCB0cmlnZ2VyZWQgYnkgdmlkZW8tanMtc3dmXG52anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGVbJ2ZlYXR1cmVzUHJvZ3Jlc3NFdmVudHMnXSA9IGZhbHNlO1xudmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlWydmZWF0dXJlc1RpbWV1cGRhdGVFdmVudHMnXSA9IGZhbHNlO1xuXG52anMubWVkaWEgPSB7fTtcbi8qKlxuICogQGZpbGVvdmVydmlldyBIVE1MNSBNZWRpYSBDb250cm9sbGVyIC0gV3JhcHBlciBmb3IgSFRNTDUgTWVkaWEgQVBJXG4gKi9cblxuLyoqXG4gKiBIVE1MNSBNZWRpYSBDb250cm9sbGVyIC0gV3JhcHBlciBmb3IgSFRNTDUgTWVkaWEgQVBJXG4gKiBAcGFyYW0ge3Zqcy5QbGF5ZXJ8T2JqZWN0fSBwbGF5ZXJcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQHBhcmFtIHtGdW5jdGlvbj19IHJlYWR5XG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkh0bWw1ID0gdmpzLk1lZGlhVGVjaENvbnRyb2xsZXIuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICAvLyB2b2x1bWUgY2Fubm90IGJlIGNoYW5nZWQgZnJvbSAxIG9uIGlPU1xuICAgIHRoaXNbJ2ZlYXR1cmVzVm9sdW1lQ29udHJvbCddID0gdmpzLkh0bWw1LmNhbkNvbnRyb2xWb2x1bWUoKTtcblxuICAgIC8vIGp1c3QgaW4gY2FzZTsgb3IgaXMgaXQgZXhjZXNzaXZlbHkuLi5cbiAgICB0aGlzWydmZWF0dXJlc1BsYXliYWNrUmF0ZSddID0gdmpzLkh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGUoKTtcblxuICAgIC8vIEluIGlPUywgaWYgeW91IG1vdmUgYSB2aWRlbyBlbGVtZW50IGluIHRoZSBET00sIGl0IGJyZWFrcyB2aWRlbyBwbGF5YmFjay5cbiAgICB0aGlzWydtb3ZpbmdNZWRpYUVsZW1lbnRJbkRPTSddID0gIXZqcy5JU19JT1M7XG5cbiAgICAvLyBIVE1MIHZpZGVvIGlzIGFibGUgdG8gYXV0b21hdGljYWxseSByZXNpemUgd2hlbiBnb2luZyB0byBmdWxsc2NyZWVuXG4gICAgdGhpc1snZmVhdHVyZXNGdWxsc2NyZWVuUmVzaXplJ10gPSB0cnVlO1xuXG4gICAgLy8gSFRNTCB2aWRlbyBzdXBwb3J0cyBwcm9ncmVzcyBldmVudHNcbiAgICB0aGlzWydmZWF0dXJlc1Byb2dyZXNzRXZlbnRzJ10gPSB0cnVlO1xuXG4gICAgdmpzLk1lZGlhVGVjaENvbnRyb2xsZXIuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KTtcbiAgICB0aGlzLnNldHVwVHJpZ2dlcnMoKTtcblxuICAgIHZhciBzb3VyY2UgPSBvcHRpb25zWydzb3VyY2UnXTtcblxuICAgIC8vIHNldCB0aGUgc291cmNlIGlmIG9uZSB3YXMgcHJvdmlkZWRcbiAgICBpZiAoc291cmNlICYmIHRoaXMuZWxfLmN1cnJlbnRTcmMgIT09IHNvdXJjZS5zcmMpIHtcbiAgICAgIHRoaXMuZWxfLnNyYyA9IHNvdXJjZS5zcmM7XG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIG5hdGl2ZSBjb250cm9scyBzaG91bGQgYmUgdXNlZFxuICAgIC8vIE91ciBnb2FsIHNob3VsZCBiZSB0byBnZXQgdGhlIGN1c3RvbSBjb250cm9scyBvbiBtb2JpbGUgc29saWQgZXZlcnl3aGVyZVxuICAgIC8vIHNvIHdlIGNhbiByZW1vdmUgdGhpcyBhbGwgdG9nZXRoZXIuIFJpZ2h0IG5vdyB0aGlzIHdpbGwgYmxvY2sgY3VzdG9tXG4gICAgLy8gY29udHJvbHMgb24gdG91Y2ggZW5hYmxlZCBsYXB0b3BzIGxpa2UgdGhlIENocm9tZSBQaXhlbFxuICAgIGlmICh2anMuVE9VQ0hfRU5BQkxFRCAmJiBwbGF5ZXIub3B0aW9ucygpWyduYXRpdmVDb250cm9sc0ZvclRvdWNoJ10gIT09IGZhbHNlKSB7XG4gICAgICB0aGlzLnVzZU5hdGl2ZUNvbnRyb2xzKCk7XG4gICAgfVxuXG4gICAgLy8gQ2hyb21lIGFuZCBTYWZhcmkgYm90aCBoYXZlIGlzc3VlcyB3aXRoIGF1dG9wbGF5LlxuICAgIC8vIEluIFNhZmFyaSAoNS4xLjEpLCB3aGVuIHdlIG1vdmUgdGhlIHZpZGVvIGVsZW1lbnQgaW50byB0aGUgY29udGFpbmVyIGRpdiwgYXV0b3BsYXkgZG9lc24ndCB3b3JrLlxuICAgIC8vIEluIENocm9tZSAoMTUpLCBpZiB5b3UgaGF2ZSBhdXRvcGxheSArIGEgcG9zdGVyICsgbm8gY29udHJvbHMsIHRoZSB2aWRlbyBnZXRzIGhpZGRlbiAoYnV0IGF1ZGlvIHBsYXlzKVxuICAgIC8vIFRoaXMgZml4ZXMgYm90aCBpc3N1ZXMuIE5lZWQgdG8gd2FpdCBmb3IgQVBJLCBzbyBpdCB1cGRhdGVzIGRpc3BsYXlzIGNvcnJlY3RseVxuICAgIHBsYXllci5yZWFkeShmdW5jdGlvbigpe1xuICAgICAgaWYgKHRoaXMudGFnICYmIHRoaXMub3B0aW9uc19bJ2F1dG9wbGF5J10gJiYgdGhpcy5wYXVzZWQoKSkge1xuICAgICAgICBkZWxldGUgdGhpcy50YWdbJ3Bvc3RlciddOyAvLyBDaHJvbWUgRml4LiBGaXhlZCBpbiBDaHJvbWUgdjE2LlxuICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMudHJpZ2dlclJlYWR5KCk7XG4gIH1cbn0pO1xuXG52anMuSHRtbDUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbigpe1xuICB2anMuSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudCh0aGlzLmVsXyk7XG4gIHZqcy5NZWRpYVRlY2hDb250cm9sbGVyLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG59O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgdmFyIHBsYXllciA9IHRoaXMucGxheWVyXyxcbiAgICAgIC8vIElmIHBvc3NpYmxlLCByZXVzZSBvcmlnaW5hbCB0YWcgZm9yIEhUTUw1IHBsYXliYWNrIHRlY2hub2xvZ3kgZWxlbWVudFxuICAgICAgZWwgPSBwbGF5ZXIudGFnLFxuICAgICAgbmV3RWwsXG4gICAgICBjbG9uZTtcblxuICAvLyBDaGVjayBpZiB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgbW92aW5nIHRoZSBlbGVtZW50IGludG8gdGhlIGJveC5cbiAgLy8gT24gdGhlIGlQaG9uZSB2aWRlbyB3aWxsIGJyZWFrIGlmIHlvdSBtb3ZlIHRoZSBlbGVtZW50LFxuICAvLyBTbyB3ZSBoYXZlIHRvIGNyZWF0ZSBhIGJyYW5kIG5ldyBlbGVtZW50LlxuICBpZiAoIWVsIHx8IHRoaXNbJ21vdmluZ01lZGlhRWxlbWVudEluRE9NJ10gPT09IGZhbHNlKSB7XG5cbiAgICAvLyBJZiB0aGUgb3JpZ2luYWwgdGFnIGlzIHN0aWxsIHRoZXJlLCBjbG9uZSBhbmQgcmVtb3ZlIGl0LlxuICAgIGlmIChlbCkge1xuICAgICAgY2xvbmUgPSBlbC5jbG9uZU5vZGUoZmFsc2UpO1xuICAgICAgdmpzLkh0bWw1LmRpc3Bvc2VNZWRpYUVsZW1lbnQoZWwpO1xuICAgICAgZWwgPSBjbG9uZTtcbiAgICAgIHBsYXllci50YWcgPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbCA9IHZqcy5jcmVhdGVFbCgndmlkZW8nKTtcbiAgICAgIHZqcy5zZXRFbGVtZW50QXR0cmlidXRlcyhlbCxcbiAgICAgICAgdmpzLm9iai5tZXJnZShwbGF5ZXIudGFnQXR0cmlidXRlcyB8fCB7fSwge1xuICAgICAgICAgIGlkOnBsYXllci5pZCgpICsgJ19odG1sNV9hcGknLFxuICAgICAgICAgICdjbGFzcyc6J3Zqcy10ZWNoJ1xuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9XG4gICAgLy8gYXNzb2NpYXRlIHRoZSBwbGF5ZXIgd2l0aCB0aGUgbmV3IHRhZ1xuICAgIGVsWydwbGF5ZXInXSA9IHBsYXllcjtcblxuICAgIHZqcy5pbnNlcnRGaXJzdChlbCwgcGxheWVyLmVsKCkpO1xuICB9XG5cbiAgLy8gVXBkYXRlIHNwZWNpZmljIHRhZyBzZXR0aW5ncywgaW4gY2FzZSB0aGV5IHdlcmUgb3ZlcnJpZGRlblxuICB2YXIgc2V0dGluZ3NBdHRycyA9IFsnYXV0b3BsYXknLCdwcmVsb2FkJywnbG9vcCcsJ211dGVkJ107XG4gIGZvciAodmFyIGkgPSBzZXR0aW5nc0F0dHJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmFyIGF0dHIgPSBzZXR0aW5nc0F0dHJzW2ldO1xuICAgIHZhciBvdmVyd3JpdGVBdHRycyA9IHt9O1xuICAgIGlmICh0eXBlb2YgcGxheWVyLm9wdGlvbnNfW2F0dHJdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgb3ZlcndyaXRlQXR0cnNbYXR0cl0gPSBwbGF5ZXIub3B0aW9uc19bYXR0cl07XG4gICAgfVxuICAgIHZqcy5zZXRFbGVtZW50QXR0cmlidXRlcyhlbCwgb3ZlcndyaXRlQXR0cnMpO1xuICB9XG5cbiAgcmV0dXJuIGVsO1xuICAvLyBqZW5uaWlzYXdlc29tZSA9IHRydWU7XG59O1xuXG4vLyBNYWtlIHZpZGVvIGV2ZW50cyB0cmlnZ2VyIHBsYXllciBldmVudHNcbi8vIE1heSBzZWVtIHZlcmJvc2UgaGVyZSwgYnV0IG1ha2VzIG90aGVyIEFQSXMgcG9zc2libGUuXG4vLyBUcmlnZ2VycyByZW1vdmVkIHVzaW5nIHRoaXMub2ZmIHdoZW4gZGlzcG9zZWRcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0dXBUcmlnZ2VycyA9IGZ1bmN0aW9uKCl7XG4gIGZvciAodmFyIGkgPSB2anMuSHRtbDUuRXZlbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgdmpzLm9uKHRoaXMuZWxfLCB2anMuSHRtbDUuRXZlbnRzW2ldLCB2anMuYmluZCh0aGlzLCB0aGlzLmV2ZW50SGFuZGxlcikpO1xuICB9XG59O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmV2ZW50SGFuZGxlciA9IGZ1bmN0aW9uKGV2dCl7XG4gIC8vIEluIHRoZSBjYXNlIG9mIGFuIGVycm9yIG9uIHRoZSB2aWRlbyBlbGVtZW50LCBzZXQgdGhlIGVycm9yIHByb3BcbiAgLy8gb24gdGhlIHBsYXllciBhbmQgbGV0IHRoZSBwbGF5ZXIgaGFuZGxlIHRyaWdnZXJpbmcgdGhlIGV2ZW50LiBPblxuICAvLyBzb21lIHBsYXRmb3JtcywgZXJyb3IgZXZlbnRzIGZpcmUgdGhhdCBkbyBub3QgY2F1c2UgdGhlIGVycm9yXG4gIC8vIHByb3BlcnR5IG9uIHRoZSB2aWRlbyBlbGVtZW50IHRvIGJlIHNldC4gU2VlICMxNDY1IGZvciBhbiBleGFtcGxlLlxuICBpZiAoZXZ0LnR5cGUgPT0gJ2Vycm9yJyAmJiB0aGlzLmVycm9yKCkpIHtcbiAgICB0aGlzLnBsYXllcigpLmVycm9yKHRoaXMuZXJyb3IoKS5jb2RlKTtcblxuICAvLyBpbiBzb21lIGNhc2VzIHdlIHBhc3MgdGhlIGV2ZW50IGRpcmVjdGx5IHRvIHRoZSBwbGF5ZXJcbiAgfSBlbHNlIHtcbiAgICAvLyBObyBuZWVkIGZvciBtZWRpYSBldmVudHMgdG8gYnViYmxlIHVwLlxuICAgIGV2dC5idWJibGVzID0gZmFsc2U7XG5cbiAgICB0aGlzLnBsYXllcigpLnRyaWdnZXIoZXZ0KTtcbiAgfVxufTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS51c2VOYXRpdmVDb250cm9scyA9IGZ1bmN0aW9uKCl7XG4gIHZhciB0ZWNoLCBwbGF5ZXIsIGNvbnRyb2xzT24sIGNvbnRyb2xzT2ZmLCBjbGVhblVwO1xuXG4gIHRlY2ggPSB0aGlzO1xuICBwbGF5ZXIgPSB0aGlzLnBsYXllcigpO1xuXG4gIC8vIElmIHRoZSBwbGF5ZXIgY29udHJvbHMgYXJlIGVuYWJsZWQgdHVybiBvbiB0aGUgbmF0aXZlIGNvbnRyb2xzXG4gIHRlY2guc2V0Q29udHJvbHMocGxheWVyLmNvbnRyb2xzKCkpO1xuXG4gIC8vIFVwZGF0ZSB0aGUgbmF0aXZlIGNvbnRyb2xzIHdoZW4gcGxheWVyIGNvbnRyb2xzIHN0YXRlIGlzIHVwZGF0ZWRcbiAgY29udHJvbHNPbiA9IGZ1bmN0aW9uKCl7XG4gICAgdGVjaC5zZXRDb250cm9scyh0cnVlKTtcbiAgfTtcbiAgY29udHJvbHNPZmYgPSBmdW5jdGlvbigpe1xuICAgIHRlY2guc2V0Q29udHJvbHMoZmFsc2UpO1xuICB9O1xuICBwbGF5ZXIub24oJ2NvbnRyb2xzZW5hYmxlZCcsIGNvbnRyb2xzT24pO1xuICBwbGF5ZXIub24oJ2NvbnRyb2xzZGlzYWJsZWQnLCBjb250cm9sc09mZik7XG5cbiAgLy8gQ2xlYW4gdXAgd2hlbiBub3QgdXNpbmcgbmF0aXZlIGNvbnRyb2xzIGFueW1vcmVcbiAgY2xlYW5VcCA9IGZ1bmN0aW9uKCl7XG4gICAgcGxheWVyLm9mZignY29udHJvbHNlbmFibGVkJywgY29udHJvbHNPbik7XG4gICAgcGxheWVyLm9mZignY29udHJvbHNkaXNhYmxlZCcsIGNvbnRyb2xzT2ZmKTtcbiAgfTtcbiAgdGVjaC5vbignZGlzcG9zZScsIGNsZWFuVXApO1xuICBwbGF5ZXIub24oJ3VzaW5nY3VzdG9tY29udHJvbHMnLCBjbGVhblVwKTtcblxuICAvLyBVcGRhdGUgdGhlIHN0YXRlIG9mIHRoZSBwbGF5ZXIgdG8gdXNpbmcgbmF0aXZlIGNvbnRyb2xzXG4gIHBsYXllci51c2luZ05hdGl2ZUNvbnRyb2xzKHRydWUpO1xufTtcblxuXG52anMuSHRtbDUucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlvbigpeyB0aGlzLmVsXy5wbGF5KCk7IH07XG52anMuSHRtbDUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKXsgdGhpcy5lbF8ucGF1c2UoKTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUucGF1c2VkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLnBhdXNlZDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5jdXJyZW50VGltZSA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5jdXJyZW50VGltZTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0Q3VycmVudFRpbWUgPSBmdW5jdGlvbihzZWNvbmRzKXtcbiAgdHJ5IHtcbiAgICB0aGlzLmVsXy5jdXJyZW50VGltZSA9IHNlY29uZHM7XG4gIH0gY2F0Y2goZSkge1xuICAgIHZqcy5sb2coZSwgJ1ZpZGVvIGlzIG5vdCByZWFkeS4gKFZpZGVvLmpzKScpO1xuICAgIC8vIHRoaXMud2FybmluZyhWaWRlb0pTLndhcm5pbmdzLnZpZGVvTm90UmVhZHkpO1xuICB9XG59O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmR1cmF0aW9uID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLmR1cmF0aW9uIHx8IDA7IH07XG52anMuSHRtbDUucHJvdG90eXBlLmJ1ZmZlcmVkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLmJ1ZmZlcmVkOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLnZvbHVtZSA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy52b2x1bWU7IH07XG52anMuSHRtbDUucHJvdG90eXBlLnNldFZvbHVtZSA9IGZ1bmN0aW9uKHBlcmNlbnRBc0RlY2ltYWwpeyB0aGlzLmVsXy52b2x1bWUgPSBwZXJjZW50QXNEZWNpbWFsOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5tdXRlZCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5tdXRlZDsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0TXV0ZWQgPSBmdW5jdGlvbihtdXRlZCl7IHRoaXMuZWxfLm11dGVkID0gbXV0ZWQ7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUud2lkdGggPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8ub2Zmc2V0V2lkdGg7IH07XG52anMuSHRtbDUucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5vZmZzZXRIZWlnaHQ7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuc3VwcG9ydHNGdWxsU2NyZWVuID0gZnVuY3Rpb24oKXtcbiAgaWYgKHR5cGVvZiB0aGlzLmVsXy53ZWJraXRFbnRlckZ1bGxTY3JlZW4gPT0gJ2Z1bmN0aW9uJykge1xuXG4gICAgLy8gU2VlbXMgdG8gYmUgYnJva2VuIGluIENocm9taXVtL0Nocm9tZSAmJiBTYWZhcmkgaW4gTGVvcGFyZFxuICAgIGlmICgvQW5kcm9pZC8udGVzdCh2anMuVVNFUl9BR0VOVCkgfHwgIS9DaHJvbWV8TWFjIE9TIFggMTAuNS8udGVzdCh2anMuVVNFUl9BR0VOVCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmVudGVyRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHZhciB2aWRlbyA9IHRoaXMuZWxfO1xuICBpZiAodmlkZW8ucGF1c2VkICYmIHZpZGVvLm5ldHdvcmtTdGF0ZSA8PSB2aWRlby5IQVZFX01FVEFEQVRBKSB7XG4gICAgLy8gYXR0ZW1wdCB0byBwcmltZSB0aGUgdmlkZW8gZWxlbWVudCBmb3IgcHJvZ3JhbW1hdGljIGFjY2Vzc1xuICAgIC8vIHRoaXMgaXNuJ3QgbmVjZXNzYXJ5IG9uIHRoZSBkZXNrdG9wIGJ1dCBzaG91bGRuJ3QgaHVydFxuICAgIHRoaXMuZWxfLnBsYXkoKTtcblxuICAgIC8vIHBsYXlpbmcgYW5kIHBhdXNpbmcgc3luY2hyb25vdXNseSBkdXJpbmcgdGhlIHRyYW5zaXRpb24gdG8gZnVsbHNjcmVlblxuICAgIC8vIGNhbiBnZXQgaU9TIH42LjEgZGV2aWNlcyBpbnRvIGEgcGxheS9wYXVzZSBsb29wXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgdmlkZW8ucGF1c2UoKTtcbiAgICAgIHZpZGVvLndlYmtpdEVudGVyRnVsbFNjcmVlbigpO1xuICAgIH0sIDApO1xuICB9IGVsc2Uge1xuICAgIHZpZGVvLndlYmtpdEVudGVyRnVsbFNjcmVlbigpO1xuICB9XG59O1xudmpzLkh0bWw1LnByb3RvdHlwZS5leGl0RnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuZWxfLndlYmtpdEV4aXRGdWxsU2NyZWVuKCk7XG59O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zcmMgPSBmdW5jdGlvbihzcmMpIHtcbiAgaWYgKHNyYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxfLnNyYztcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmVsXy5zcmMgPSBzcmM7XG4gIH1cbn07XG52anMuSHRtbDUucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpeyB0aGlzLmVsXy5sb2FkKCk7IH07XG52anMuSHRtbDUucHJvdG90eXBlLmN1cnJlbnRTcmMgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8uY3VycmVudFNyYzsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5wb3N0ZXIgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8ucG9zdGVyOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRQb3N0ZXIgPSBmdW5jdGlvbih2YWwpeyB0aGlzLmVsXy5wb3N0ZXIgPSB2YWw7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUucHJlbG9hZCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5wcmVsb2FkOyB9O1xudmpzLkh0bWw1LnByb3RvdHlwZS5zZXRQcmVsb2FkID0gZnVuY3Rpb24odmFsKXsgdGhpcy5lbF8ucHJlbG9hZCA9IHZhbDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5hdXRvcGxheSA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5hdXRvcGxheTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0QXV0b3BsYXkgPSBmdW5jdGlvbih2YWwpeyB0aGlzLmVsXy5hdXRvcGxheSA9IHZhbDsgfTtcblxudmpzLkh0bWw1LnByb3RvdHlwZS5jb250cm9scyA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5jb250cm9sczsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0Q29udHJvbHMgPSBmdW5jdGlvbih2YWwpeyB0aGlzLmVsXy5jb250cm9scyA9ICEhdmFsOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8ubG9vcDsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0TG9vcCA9IGZ1bmN0aW9uKHZhbCl7IHRoaXMuZWxfLmxvb3AgPSB2YWw7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8uZXJyb3I7IH07XG52anMuSHRtbDUucHJvdG90eXBlLnNlZWtpbmcgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8uc2Vla2luZzsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuZW5kZWQgPSBmdW5jdGlvbigpeyByZXR1cm4gdGhpcy5lbF8uZW5kZWQ7IH07XG52anMuSHRtbDUucHJvdG90eXBlLmRlZmF1bHRNdXRlZCA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5kZWZhdWx0TXV0ZWQ7IH07XG5cbnZqcy5IdG1sNS5wcm90b3R5cGUucGxheWJhY2tSYXRlID0gZnVuY3Rpb24oKXsgcmV0dXJuIHRoaXMuZWxfLnBsYXliYWNrUmF0ZTsgfTtcbnZqcy5IdG1sNS5wcm90b3R5cGUuc2V0UGxheWJhY2tSYXRlID0gZnVuY3Rpb24odmFsKXsgdGhpcy5lbF8ucGxheWJhY2tSYXRlID0gdmFsOyB9O1xuXG52anMuSHRtbDUucHJvdG90eXBlLm5ldHdvcmtTdGF0ZSA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy5uZXR3b3JrU3RhdGU7IH07XG5cbi8qIEhUTUw1IFN1cHBvcnQgVGVzdGluZyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZqcy5IdG1sNS5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uKCl7XG4gIC8vIGllOSB3aXRoIG5vIE1lZGlhIFBsYXllciBpcyBhIExJQVIhICgjOTg0KVxuICB0cnkge1xuICAgIHZqcy5URVNUX1ZJRFsndm9sdW1lJ10gPSAwLjU7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gISF2anMuVEVTVF9WSUQuY2FuUGxheVR5cGU7XG59O1xuXG52anMuSHRtbDUuY2FuUGxheVNvdXJjZSA9IGZ1bmN0aW9uKHNyY09iail7XG4gIC8vIElFOSBvbiBXaW5kb3dzIDcgd2l0aG91dCBNZWRpYVBsYXllciB0aHJvd3MgYW4gZXJyb3IgaGVyZVxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vdmlkZW9qcy92aWRlby5qcy9pc3N1ZXMvNTE5XG4gIHRyeSB7XG4gICAgcmV0dXJuICEhdmpzLlRFU1RfVklELmNhblBsYXlUeXBlKHNyY09iai50eXBlKTtcbiAgfSBjYXRjaChlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG4gIC8vIFRPRE86IENoZWNrIFR5cGVcbiAgLy8gSWYgbm8gVHlwZSwgY2hlY2sgZXh0XG4gIC8vIENoZWNrIE1lZGlhIFR5cGVcbn07XG5cbnZqcy5IdG1sNS5jYW5Db250cm9sVm9sdW1lID0gZnVuY3Rpb24oKXtcbiAgdmFyIHZvbHVtZSA9ICB2anMuVEVTVF9WSUQudm9sdW1lO1xuICB2anMuVEVTVF9WSUQudm9sdW1lID0gKHZvbHVtZSAvIDIpICsgMC4xO1xuICByZXR1cm4gdm9sdW1lICE9PSB2anMuVEVTVF9WSUQudm9sdW1lO1xufTtcblxudmpzLkh0bWw1LmNhbkNvbnRyb2xQbGF5YmFja1JhdGUgPSBmdW5jdGlvbigpe1xuICB2YXIgcGxheWJhY2tSYXRlID0gIHZqcy5URVNUX1ZJRC5wbGF5YmFja1JhdGU7XG4gIHZqcy5URVNUX1ZJRC5wbGF5YmFja1JhdGUgPSAocGxheWJhY2tSYXRlIC8gMikgKyAwLjE7XG4gIHJldHVybiBwbGF5YmFja1JhdGUgIT09IHZqcy5URVNUX1ZJRC5wbGF5YmFja1JhdGU7XG59O1xuXG4vLyBIVE1MNSBGZWF0dXJlIGRldGVjdGlvbiBhbmQgRGV2aWNlIEZpeGVzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAvL1xuKGZ1bmN0aW9uKCkge1xuICB2YXIgY2FuUGxheVR5cGUsXG4gICAgICBtcGVndXJsUkUgPSAvXmFwcGxpY2F0aW9uXFwvKD86eC18dm5kXFwuYXBwbGVcXC4pbXBlZ3VybC9pLFxuICAgICAgbXA0UkUgPSAvXnZpZGVvXFwvbXA0L2k7XG5cbiAgdmpzLkh0bWw1LnBhdGNoQ2FuUGxheVR5cGUgPSBmdW5jdGlvbigpIHtcbiAgICAvLyBBbmRyb2lkIDQuMCBhbmQgYWJvdmUgY2FuIHBsYXkgSExTIHRvIHNvbWUgZXh0ZW50IGJ1dCBpdCByZXBvcnRzIGJlaW5nIHVuYWJsZSB0byBkbyBzb1xuICAgIGlmICh2anMuQU5EUk9JRF9WRVJTSU9OID49IDQuMCkge1xuICAgICAgaWYgKCFjYW5QbGF5VHlwZSkge1xuICAgICAgICBjYW5QbGF5VHlwZSA9IHZqcy5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGU7XG4gICAgICB9XG5cbiAgICAgIHZqcy5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGUgPSBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIGlmICh0eXBlICYmIG1wZWd1cmxSRS50ZXN0KHR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuICdtYXliZSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhblBsYXlUeXBlLmNhbGwodGhpcywgdHlwZSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIE92ZXJyaWRlIEFuZHJvaWQgMi4yIGFuZCBsZXNzIGNhblBsYXlUeXBlIG1ldGhvZCB3aGljaCBpcyBicm9rZW5cbiAgICBpZiAodmpzLklTX09MRF9BTkRST0lEKSB7XG4gICAgICBpZiAoIWNhblBsYXlUeXBlKSB7XG4gICAgICAgIGNhblBsYXlUeXBlID0gdmpzLlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZTtcbiAgICAgIH1cblxuICAgICAgdmpzLlRFU1RfVklELmNvbnN0cnVjdG9yLnByb3RvdHlwZS5jYW5QbGF5VHlwZSA9IGZ1bmN0aW9uKHR5cGUpe1xuICAgICAgICBpZiAodHlwZSAmJiBtcDRSRS50ZXN0KHR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuICdtYXliZSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhblBsYXlUeXBlLmNhbGwodGhpcywgdHlwZSk7XG4gICAgICB9O1xuICAgIH1cbiAgfTtcblxuICB2anMuSHRtbDUudW5wYXRjaENhblBsYXlUeXBlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHIgPSB2anMuVEVTVF9WSUQuY29uc3RydWN0b3IucHJvdG90eXBlLmNhblBsYXlUeXBlO1xuICAgIHZqcy5URVNUX1ZJRC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUuY2FuUGxheVR5cGUgPSBjYW5QbGF5VHlwZTtcbiAgICBjYW5QbGF5VHlwZSA9IG51bGw7XG4gICAgcmV0dXJuIHI7XG4gIH07XG5cbiAgLy8gYnkgZGVmYXVsdCwgcGF0Y2ggdGhlIHZpZGVvIGVsZW1lbnRcbiAgdmpzLkh0bWw1LnBhdGNoQ2FuUGxheVR5cGUoKTtcbn0pKCk7XG5cbi8vIExpc3Qgb2YgYWxsIEhUTUw1IGV2ZW50cyAodmFyaW91cyB1c2VzKS5cbnZqcy5IdG1sNS5FdmVudHMgPSAnbG9hZHN0YXJ0LHN1c3BlbmQsYWJvcnQsZXJyb3IsZW1wdGllZCxzdGFsbGVkLGxvYWRlZG1ldGFkYXRhLGxvYWRlZGRhdGEsY2FucGxheSxjYW5wbGF5dGhyb3VnaCxwbGF5aW5nLHdhaXRpbmcsc2Vla2luZyxzZWVrZWQsZW5kZWQsZHVyYXRpb25jaGFuZ2UsdGltZXVwZGF0ZSxwcm9ncmVzcyxwbGF5LHBhdXNlLHJhdGVjaGFuZ2Usdm9sdW1lY2hhbmdlJy5zcGxpdCgnLCcpO1xuXG52anMuSHRtbDUuZGlzcG9zZU1lZGlhRWxlbWVudCA9IGZ1bmN0aW9uKGVsKXtcbiAgaWYgKCFlbCkgeyByZXR1cm47IH1cblxuICBlbFsncGxheWVyJ10gPSBudWxsO1xuXG4gIGlmIChlbC5wYXJlbnROb2RlKSB7XG4gICAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG4gIH1cblxuICAvLyByZW1vdmUgYW55IGNoaWxkIHRyYWNrIG9yIHNvdXJjZSBub2RlcyB0byBwcmV2ZW50IHRoZWlyIGxvYWRpbmdcbiAgd2hpbGUoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgZWwucmVtb3ZlQ2hpbGQoZWwuZmlyc3RDaGlsZCk7XG4gIH1cblxuICAvLyByZW1vdmUgYW55IHNyYyByZWZlcmVuY2UuIG5vdCBzZXR0aW5nIGBzcmM9JydgIGJlY2F1c2UgdGhhdCBjYXVzZXMgYSB3YXJuaW5nXG4gIC8vIGluIGZpcmVmb3hcbiAgZWwucmVtb3ZlQXR0cmlidXRlKCdzcmMnKTtcblxuICAvLyBmb3JjZSB0aGUgbWVkaWEgZWxlbWVudCB0byB1cGRhdGUgaXRzIGxvYWRpbmcgc3RhdGUgYnkgY2FsbGluZyBsb2FkKClcbiAgLy8gaG93ZXZlciBJRSBvbiBXaW5kb3dzIDdOIGhhcyBhIGJ1ZyB0aGF0IHRocm93cyBhbiBlcnJvciBzbyBuZWVkIGEgdHJ5L2NhdGNoICgjNzkzKVxuICBpZiAodHlwZW9mIGVsLmxvYWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyB3cmFwcGluZyBpbiBhbiBpaWZlIHNvIGl0J3Mgbm90IGRlb3B0aW1pemVkICgjMTA2MCNkaXNjdXNzaW9uX3IxMDMyNDQ3MylcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICB0cnkge1xuICAgICAgICBlbC5sb2FkKCk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIG5vdCBzdXBwb3J0ZWRcbiAgICAgIH1cbiAgICB9KSgpO1xuICB9XG59O1xuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IFZpZGVvSlMtU1dGIC0gQ3VzdG9tIEZsYXNoIFBsYXllciB3aXRoIEhUTUw1LWlzaCBBUElcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5jb2Rlci92aWRlby1qcy1zd2ZcbiAqIE5vdCB1c2luZyBzZXR1cFRyaWdnZXJzLiBVc2luZyBnbG9iYWwgb25FdmVudCBmdW5jIHRvIGRpc3RyaWJ1dGUgZXZlbnRzXG4gKi9cblxuLyoqXG4gKiBGbGFzaCBNZWRpYSBDb250cm9sbGVyIC0gV3JhcHBlciBmb3IgZmFsbGJhY2sgU1dGIEFQSVxuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcn0gcGxheWVyXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnNcbiAqIEBwYXJhbSB7RnVuY3Rpb249fSByZWFkeVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5GbGFzaCA9IHZqcy5NZWRpYVRlY2hDb250cm9sbGVyLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zLCByZWFkeSl7XG4gICAgdmpzLk1lZGlhVGVjaENvbnRyb2xsZXIuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KTtcblxuICAgIHZhciBzb3VyY2UgPSBvcHRpb25zWydzb3VyY2UnXSxcblxuICAgICAgICAvLyBXaGljaCBlbGVtZW50IHRvIGVtYmVkIGluXG4gICAgICAgIHBhcmVudEVsID0gb3B0aW9uc1sncGFyZW50RWwnXSxcblxuICAgICAgICAvLyBDcmVhdGUgYSB0ZW1wb3JhcnkgZWxlbWVudCB0byBiZSByZXBsYWNlZCBieSBzd2Ygb2JqZWN0XG4gICAgICAgIHBsYWNlSG9sZGVyID0gdGhpcy5lbF8gPSB2anMuY3JlYXRlRWwoJ2RpdicsIHsgaWQ6IHBsYXllci5pZCgpICsgJ190ZW1wX2ZsYXNoJyB9KSxcblxuICAgICAgICAvLyBHZW5lcmF0ZSBJRCBmb3Igc3dmIG9iamVjdFxuICAgICAgICBvYmpJZCA9IHBsYXllci5pZCgpKydfZmxhc2hfYXBpJyxcblxuICAgICAgICAvLyBTdG9yZSBwbGF5ZXIgb3B0aW9ucyBpbiBsb2NhbCB2YXIgZm9yIG9wdGltaXphdGlvblxuICAgICAgICAvLyBUT0RPOiBzd2l0Y2ggdG8gdXNpbmcgcGxheWVyIG1ldGhvZHMgaW5zdGVhZCBvZiBvcHRpb25zXG4gICAgICAgIC8vIGUuZy4gcGxheWVyLmF1dG9wbGF5KCk7XG4gICAgICAgIHBsYXllck9wdGlvbnMgPSBwbGF5ZXIub3B0aW9uc18sXG5cbiAgICAgICAgLy8gTWVyZ2UgZGVmYXVsdCBmbGFzaHZhcnMgd2l0aCBvbmVzIHBhc3NlZCBpbiB0byBpbml0XG4gICAgICAgIGZsYXNoVmFycyA9IHZqcy5vYmoubWVyZ2Uoe1xuXG4gICAgICAgICAgLy8gU1dGIENhbGxiYWNrIEZ1bmN0aW9uc1xuICAgICAgICAgICdyZWFkeUZ1bmN0aW9uJzogJ3ZpZGVvanMuRmxhc2gub25SZWFkeScsXG4gICAgICAgICAgJ2V2ZW50UHJveHlGdW5jdGlvbic6ICd2aWRlb2pzLkZsYXNoLm9uRXZlbnQnLFxuICAgICAgICAgICdlcnJvckV2ZW50UHJveHlGdW5jdGlvbic6ICd2aWRlb2pzLkZsYXNoLm9uRXJyb3InLFxuXG4gICAgICAgICAgLy8gUGxheWVyIFNldHRpbmdzXG4gICAgICAgICAgJ2F1dG9wbGF5JzogcGxheWVyT3B0aW9ucy5hdXRvcGxheSxcbiAgICAgICAgICAncHJlbG9hZCc6IHBsYXllck9wdGlvbnMucHJlbG9hZCxcbiAgICAgICAgICAnbG9vcCc6IHBsYXllck9wdGlvbnMubG9vcCxcbiAgICAgICAgICAnbXV0ZWQnOiBwbGF5ZXJPcHRpb25zLm11dGVkXG5cbiAgICAgICAgfSwgb3B0aW9uc1snZmxhc2hWYXJzJ10pLFxuXG4gICAgICAgIC8vIE1lcmdlIGRlZmF1bHQgcGFyYW1lcyB3aXRoIG9uZXMgcGFzc2VkIGluXG4gICAgICAgIHBhcmFtcyA9IHZqcy5vYmoubWVyZ2Uoe1xuICAgICAgICAgICd3bW9kZSc6ICdvcGFxdWUnLCAvLyBPcGFxdWUgaXMgbmVlZGVkIHRvIG92ZXJsYXkgY29udHJvbHMsIGJ1dCBjYW4gYWZmZWN0IHBsYXliYWNrIHBlcmZvcm1hbmNlXG4gICAgICAgICAgJ2JnY29sb3InOiAnIzAwMDAwMCcgLy8gVXNpbmcgYmdjb2xvciBwcmV2ZW50cyBhIHdoaXRlIGZsYXNoIHdoZW4gdGhlIG9iamVjdCBpcyBsb2FkaW5nXG4gICAgICAgIH0sIG9wdGlvbnNbJ3BhcmFtcyddKSxcblxuICAgICAgICAvLyBNZXJnZSBkZWZhdWx0IGF0dHJpYnV0ZXMgd2l0aCBvbmVzIHBhc3NlZCBpblxuICAgICAgICBhdHRyaWJ1dGVzID0gdmpzLm9iai5tZXJnZSh7XG4gICAgICAgICAgJ2lkJzogb2JqSWQsXG4gICAgICAgICAgJ25hbWUnOiBvYmpJZCwgLy8gQm90aCBJRCBhbmQgTmFtZSBuZWVkZWQgb3Igc3dmIHRvIGlkZW50aWZ0eSBpdHNlbGZcbiAgICAgICAgICAnY2xhc3MnOiAndmpzLXRlY2gnXG4gICAgICAgIH0sIG9wdGlvbnNbJ2F0dHJpYnV0ZXMnXSlcbiAgICA7XG5cbiAgICAvLyBJZiBzb3VyY2Ugd2FzIHN1cHBsaWVkIHBhc3MgYXMgYSBmbGFzaCB2YXIuXG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgaWYgKHNvdXJjZS50eXBlICYmIHZqcy5GbGFzaC5pc1N0cmVhbWluZ1R5cGUoc291cmNlLnR5cGUpKSB7XG4gICAgICAgIHZhciBwYXJ0cyA9IHZqcy5GbGFzaC5zdHJlYW1Ub1BhcnRzKHNvdXJjZS5zcmMpO1xuICAgICAgICBmbGFzaFZhcnNbJ3J0bXBDb25uZWN0aW9uJ10gPSBlbmNvZGVVUklDb21wb25lbnQocGFydHMuY29ubmVjdGlvbik7XG4gICAgICAgIGZsYXNoVmFyc1sncnRtcFN0cmVhbSddID0gZW5jb2RlVVJJQ29tcG9uZW50KHBhcnRzLnN0cmVhbSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZmxhc2hWYXJzWydzcmMnXSA9IGVuY29kZVVSSUNvbXBvbmVudCh2anMuZ2V0QWJzb2x1dGVVUkwoc291cmNlLnNyYykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBwbGFjZWhvbGRlciB0byBwbGF5ZXIgZGl2XG4gICAgdmpzLmluc2VydEZpcnN0KHBsYWNlSG9sZGVyLCBwYXJlbnRFbCk7XG5cbiAgICAvLyBIYXZpbmcgaXNzdWVzIHdpdGggRmxhc2ggcmVsb2FkaW5nIG9uIGNlcnRhaW4gcGFnZSBhY3Rpb25zIChoaWRlL3Jlc2l6ZS9mdWxsc2NyZWVuKSBpbiBjZXJ0YWluIGJyb3dzZXJzXG4gICAgLy8gVGhpcyBhbGxvd3MgcmVzZXR0aW5nIHRoZSBwbGF5aGVhZCB3aGVuIHdlIGNhdGNoIHRoZSByZWxvYWRcbiAgICBpZiAob3B0aW9uc1snc3RhcnRUaW1lJ10pIHtcbiAgICAgIHRoaXMucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgIHRoaXMucGxheSgpO1xuICAgICAgICB0aGlzWydjdXJyZW50VGltZSddKG9wdGlvbnNbJ3N0YXJ0VGltZSddKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGZpcmVmb3ggZG9lc24ndCBidWJibGUgbW91c2Vtb3ZlIGV2ZW50cyB0byBwYXJlbnQuIHZpZGVvanMvdmlkZW8tanMtc3dmIzM3XG4gICAgLy8gYnVnemlsbGEgYnVnOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD04MzY3ODZcbiAgICBpZiAodmpzLklTX0ZJUkVGT1gpIHtcbiAgICAgIHRoaXMucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgICAgdmpzLm9uKHRoaXMuZWwoKSwgJ21vdXNlbW92ZScsIHZqcy5iaW5kKHRoaXMsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgLy8gc2luY2UgaXQncyBhIGN1c3RvbSBldmVudCwgZG9uJ3QgYnViYmxlIGhpZ2hlciB0aGFuIHRoZSBwbGF5ZXJcbiAgICAgICAgICB0aGlzLnBsYXllcigpLnRyaWdnZXIoeyAndHlwZSc6J21vdXNlbW92ZScsICdidWJibGVzJzogZmFsc2UgfSk7XG4gICAgICAgIH0pKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIG5hdGl2ZSBjbGljayBldmVudHMgb24gdGhlIFNXRiBhcmVuJ3QgdHJpZ2dlcmVkIG9uIElFMTEsIFdpbjguMVJUXG4gICAgLy8gdXNlIHN0YWdlY2xpY2sgZXZlbnRzIHRyaWdnZXJlZCBmcm9tIGluc2lkZSB0aGUgU1dGIGluc3RlYWRcbiAgICBwbGF5ZXIub24oJ3N0YWdlY2xpY2snLCBwbGF5ZXIucmVwb3J0VXNlckFjdGl2aXR5KTtcblxuICAgIHRoaXMuZWxfID0gdmpzLkZsYXNoLmVtYmVkKG9wdGlvbnNbJ3N3ZiddLCBwbGFjZUhvbGRlciwgZmxhc2hWYXJzLCBwYXJhbXMsIGF0dHJpYnV0ZXMpO1xuICB9XG59KTtcblxudmpzLkZsYXNoLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24oKXtcbiAgdmpzLk1lZGlhVGVjaENvbnRyb2xsZXIucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCl7XG4gIHRoaXMuZWxfLnZqc19wbGF5KCk7XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5lbF8udmpzX3BhdXNlKCk7XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlLnNyYyA9IGZ1bmN0aW9uKHNyYyl7XG4gIGlmIChzcmMgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB0aGlzWydjdXJyZW50U3JjJ10oKTtcbiAgfVxuXG4gIGlmICh2anMuRmxhc2guaXNTdHJlYW1pbmdTcmMoc3JjKSkge1xuICAgIHNyYyA9IHZqcy5GbGFzaC5zdHJlYW1Ub1BhcnRzKHNyYyk7XG4gICAgdGhpcy5zZXRSdG1wQ29ubmVjdGlvbihzcmMuY29ubmVjdGlvbik7XG4gICAgdGhpcy5zZXRSdG1wU3RyZWFtKHNyYy5zdHJlYW0pO1xuICB9IGVsc2Uge1xuICAgIC8vIE1ha2Ugc3VyZSBzb3VyY2UgVVJMIGlzIGFib3NvbHV0ZS5cbiAgICBzcmMgPSB2anMuZ2V0QWJzb2x1dGVVUkwoc3JjKTtcbiAgICB0aGlzLmVsXy52anNfc3JjKHNyYyk7XG4gIH1cblxuICAvLyBDdXJyZW50bHkgdGhlIFNXRiBkb2Vzbid0IGF1dG9wbGF5IGlmIHlvdSBsb2FkIGEgc291cmNlIGxhdGVyLlxuICAvLyBlLmcuIExvYWQgcGxheWVyIHcvIG5vIHNvdXJjZSwgd2FpdCAycywgc2V0IHNyYy5cbiAgaWYgKHRoaXMucGxheWVyXy5hdXRvcGxheSgpKSB7XG4gICAgdmFyIHRlY2ggPSB0aGlzO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgdGVjaC5wbGF5KCk7IH0sIDApO1xuICB9XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlWydzZXRDdXJyZW50VGltZSddID0gZnVuY3Rpb24odGltZSl7XG4gIHRoaXMubGFzdFNlZWtUYXJnZXRfID0gdGltZTtcbiAgdGhpcy5lbF8udmpzX3NldFByb3BlcnR5KCdjdXJyZW50VGltZScsIHRpbWUpO1xuICB2anMuTWVkaWFUZWNoQ29udHJvbGxlci5wcm90b3R5cGUuc2V0Q3VycmVudFRpbWUuY2FsbCh0aGlzKTtcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGVbJ2N1cnJlbnRUaW1lJ10gPSBmdW5jdGlvbih0aW1lKXtcbiAgLy8gd2hlbiBzZWVraW5nIG1ha2UgdGhlIHJlcG9ydGVkIHRpbWUga2VlcCB1cCB3aXRoIHRoZSByZXF1ZXN0ZWQgdGltZVxuICAvLyBieSByZWFkaW5nIHRoZSB0aW1lIHdlJ3JlIHNlZWtpbmcgdG9cbiAgaWYgKHRoaXMuc2Vla2luZygpKSB7XG4gICAgcmV0dXJuIHRoaXMubGFzdFNlZWtUYXJnZXRfIHx8IDA7XG4gIH1cbiAgcmV0dXJuIHRoaXMuZWxfLnZqc19nZXRQcm9wZXJ0eSgnY3VycmVudFRpbWUnKTtcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGVbJ2N1cnJlbnRTcmMnXSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBzcmMgPSB0aGlzLmVsXy52anNfZ2V0UHJvcGVydHkoJ2N1cnJlbnRTcmMnKTtcbiAgLy8gbm8gc3JjLCBjaGVjayBhbmQgc2VlIGlmIFJUTVBcbiAgaWYgKHNyYyA9PSBudWxsKSB7XG4gICAgdmFyIGNvbm5lY3Rpb24gPSB0aGlzWydydG1wQ29ubmVjdGlvbiddKCksXG4gICAgICAgIHN0cmVhbSA9IHRoaXNbJ3J0bXBTdHJlYW0nXSgpO1xuXG4gICAgaWYgKGNvbm5lY3Rpb24gJiYgc3RyZWFtKSB7XG4gICAgICBzcmMgPSB2anMuRmxhc2guc3RyZWFtRnJvbVBhcnRzKGNvbm5lY3Rpb24sIHN0cmVhbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzcmM7XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbigpe1xuICB0aGlzLmVsXy52anNfbG9hZCgpO1xufTtcblxudmpzLkZsYXNoLnByb3RvdHlwZS5wb3N0ZXIgPSBmdW5jdGlvbigpe1xuICB0aGlzLmVsXy52anNfZ2V0UHJvcGVydHkoJ3Bvc3RlcicpO1xufTtcbnZqcy5GbGFzaC5wcm90b3R5cGVbJ3NldFBvc3RlciddID0gZnVuY3Rpb24oKXtcbiAgLy8gcG9zdGVyIGltYWdlcyBhcmUgbm90IGhhbmRsZWQgYnkgdGhlIEZsYXNoIHRlY2ggc28gbWFrZSB0aGlzIGEgbm8tb3Bcbn07XG5cbnZqcy5GbGFzaC5wcm90b3R5cGUuYnVmZmVyZWQgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLmNyZWF0ZVRpbWVSYW5nZSgwLCB0aGlzLmVsXy52anNfZ2V0UHJvcGVydHkoJ2J1ZmZlcmVkJykpO1xufTtcblxudmpzLkZsYXNoLnByb3RvdHlwZS5zdXBwb3J0c0Z1bGxTY3JlZW4gPSBmdW5jdGlvbigpe1xuICByZXR1cm4gZmFsc2U7IC8vIEZsYXNoIGRvZXMgbm90IGFsbG93IGZ1bGxzY3JlZW4gdGhyb3VnaCBqYXZhc2NyaXB0XG59O1xuXG52anMuRmxhc2gucHJvdG90eXBlLmVudGVyRnVsbFNjcmVlbiA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbihmdW5jdGlvbigpe1xuICAvLyBDcmVhdGUgc2V0dGVycyBhbmQgZ2V0dGVycyBmb3IgYXR0cmlidXRlc1xuICB2YXIgYXBpID0gdmpzLkZsYXNoLnByb3RvdHlwZSxcbiAgICByZWFkV3JpdGUgPSAncnRtcENvbm5lY3Rpb24scnRtcFN0cmVhbSxwcmVsb2FkLGRlZmF1bHRQbGF5YmFja1JhdGUscGxheWJhY2tSYXRlLGF1dG9wbGF5LGxvb3AsbWVkaWFHcm91cCxjb250cm9sbGVyLGNvbnRyb2xzLHZvbHVtZSxtdXRlZCxkZWZhdWx0TXV0ZWQnLnNwbGl0KCcsJyksXG4gICAgcmVhZE9ubHkgPSAnZXJyb3IsbmV0d29ya1N0YXRlLHJlYWR5U3RhdGUsc2Vla2luZyxpbml0aWFsVGltZSxkdXJhdGlvbixzdGFydE9mZnNldFRpbWUscGF1c2VkLHBsYXllZCxzZWVrYWJsZSxlbmRlZCx2aWRlb1RyYWNrcyxhdWRpb1RyYWNrcyx2aWRlb1dpZHRoLHZpZGVvSGVpZ2h0LHRleHRUcmFja3MnLnNwbGl0KCcsJyksXG4gICAgLy8gT3ZlcnJpZGRlbjogYnVmZmVyZWQsIGN1cnJlbnRUaW1lLCBjdXJyZW50U3JjXG4gICAgaTtcblxuICBmdW5jdGlvbiBjcmVhdGVTZXR0ZXIoYXR0cil7XG4gICAgdmFyIGF0dHJVcHBlciA9IGF0dHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBhdHRyLnNsaWNlKDEpO1xuICAgIGFwaVsnc2V0JythdHRyVXBwZXJdID0gZnVuY3Rpb24odmFsKXsgcmV0dXJuIHRoaXMuZWxfLnZqc19zZXRQcm9wZXJ0eShhdHRyLCB2YWwpOyB9O1xuICB9O1xuICBmdW5jdGlvbiBjcmVhdGVHZXR0ZXIoYXR0cikge1xuICAgIGFwaVthdHRyXSA9IGZ1bmN0aW9uKCl7IHJldHVybiB0aGlzLmVsXy52anNfZ2V0UHJvcGVydHkoYXR0cik7IH07XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGdldHRlciBhbmQgc2V0dGVycyBmb3IgYWxsIHJlYWQvd3JpdGUgYXR0cmlidXRlc1xuICBmb3IgKGkgPSAwOyBpIDwgcmVhZFdyaXRlLmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlR2V0dGVyKHJlYWRXcml0ZVtpXSk7XG4gICAgY3JlYXRlU2V0dGVyKHJlYWRXcml0ZVtpXSk7XG4gIH1cblxuICAvLyBDcmVhdGUgZ2V0dGVycyBmb3IgcmVhZC1vbmx5IGF0dHJpYnV0ZXNcbiAgZm9yIChpID0gMDsgaSA8IHJlYWRPbmx5Lmxlbmd0aDsgaSsrKSB7XG4gICAgY3JlYXRlR2V0dGVyKHJlYWRPbmx5W2ldKTtcbiAgfVxufSkoKTtcblxuLyogRmxhc2ggU3VwcG9ydCBUZXN0aW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbnZqcy5GbGFzaC5pc1N1cHBvcnRlZCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB2anMuRmxhc2gudmVyc2lvbigpWzBdID49IDEwO1xuICAvLyByZXR1cm4gc3dmb2JqZWN0Lmhhc0ZsYXNoUGxheWVyVmVyc2lvbignMTAnKTtcbn07XG5cbnZqcy5GbGFzaC5jYW5QbGF5U291cmNlID0gZnVuY3Rpb24oc3JjT2JqKXtcbiAgdmFyIHR5cGU7XG5cbiAgaWYgKCFzcmNPYmoudHlwZSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHR5cGUgPSBzcmNPYmoudHlwZS5yZXBsYWNlKC87LiovLCcnKS50b0xvd2VyQ2FzZSgpO1xuICBpZiAodHlwZSBpbiB2anMuRmxhc2guZm9ybWF0cyB8fCB0eXBlIGluIHZqcy5GbGFzaC5zdHJlYW1pbmdGb3JtYXRzKSB7XG4gICAgcmV0dXJuICdtYXliZSc7XG4gIH1cbn07XG5cbnZqcy5GbGFzaC5mb3JtYXRzID0ge1xuICAndmlkZW8vZmx2JzogJ0ZMVicsXG4gICd2aWRlby94LWZsdic6ICdGTFYnLFxuICAndmlkZW8vbXA0JzogJ01QNCcsXG4gICd2aWRlby9tNHYnOiAnTVA0J1xufTtcblxudmpzLkZsYXNoLnN0cmVhbWluZ0Zvcm1hdHMgPSB7XG4gICdydG1wL21wNCc6ICdNUDQnLFxuICAncnRtcC9mbHYnOiAnRkxWJ1xufTtcblxudmpzLkZsYXNoWydvblJlYWR5J10gPSBmdW5jdGlvbihjdXJyU3dmKXtcbiAgdmFyIGVsLCBwbGF5ZXI7XG5cbiAgZWwgPSB2anMuZWwoY3VyclN3Zik7XG5cbiAgLy8gZ2V0IHBsYXllciBmcm9tIHRoZSBwbGF5ZXIgZGl2IHByb3BlcnR5XG4gIHBsYXllciA9IGVsICYmIGVsLnBhcmVudE5vZGUgJiYgZWwucGFyZW50Tm9kZVsncGxheWVyJ107XG5cbiAgLy8gaWYgdGhlcmUgaXMgbm8gZWwgb3IgcGxheWVyIHRoZW4gdGhlIHRlY2ggaGFzIGJlZW4gZGlzcG9zZWRcbiAgLy8gYW5kIHRoZSB0ZWNoIGVsZW1lbnQgd2FzIHJlbW92ZWQgZnJvbSB0aGUgcGxheWVyIGRpdlxuICBpZiAocGxheWVyKSB7XG4gICAgLy8gcmVmZXJlbmNlIHBsYXllciBvbiB0ZWNoIGVsZW1lbnRcbiAgICBlbFsncGxheWVyJ10gPSBwbGF5ZXI7XG4gICAgLy8gY2hlY2sgdGhhdCB0aGUgZmxhc2ggb2JqZWN0IGlzIHJlYWxseSByZWFkeVxuICAgIHZqcy5GbGFzaFsnY2hlY2tSZWFkeSddKHBsYXllci50ZWNoKTtcbiAgfVxufTtcblxuLy8gVGhlIFNXRiBpc24ndCBhbHdheXMgcmVhZHkgd2hlbiBpdCBzYXlzIGl0IGlzLiBTb21ldGltZXMgdGhlIEFQSSBmdW5jdGlvbnMgc3RpbGwgbmVlZCB0byBiZSBhZGRlZCB0byB0aGUgb2JqZWN0LlxuLy8gSWYgaXQncyBub3QgcmVhZHksIHdlIHNldCBhIHRpbWVvdXQgdG8gY2hlY2sgYWdhaW4gc2hvcnRseS5cbnZqcy5GbGFzaFsnY2hlY2tSZWFkeSddID0gZnVuY3Rpb24odGVjaCl7XG4gIC8vIHN0b3Agd29ycnlpbmcgaWYgdGhlIHRlY2ggaGFzIGJlZW4gZGlzcG9zZWRcbiAgaWYgKCF0ZWNoLmVsKCkpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBjaGVjayBpZiBBUEkgcHJvcGVydHkgZXhpc3RzXG4gIGlmICh0ZWNoLmVsKCkudmpzX2dldFByb3BlcnR5KSB7XG4gICAgLy8gdGVsbCB0ZWNoIGl0J3MgcmVhZHlcbiAgICB0ZWNoLnRyaWdnZXJSZWFkeSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIHdhaXQgbG9uZ2VyXG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgdmpzLkZsYXNoWydjaGVja1JlYWR5J10odGVjaCk7XG4gICAgfSwgNTApO1xuICB9XG59O1xuXG4vLyBUcmlnZ2VyIGV2ZW50cyBmcm9tIHRoZSBzd2Ygb24gdGhlIHBsYXllclxudmpzLkZsYXNoWydvbkV2ZW50J10gPSBmdW5jdGlvbihzd2ZJRCwgZXZlbnROYW1lKXtcbiAgdmFyIHBsYXllciA9IHZqcy5lbChzd2ZJRClbJ3BsYXllciddO1xuICBwbGF5ZXIudHJpZ2dlcihldmVudE5hbWUpO1xufTtcblxuLy8gTG9nIGVycm9ycyBmcm9tIHRoZSBzd2ZcbnZqcy5GbGFzaFsnb25FcnJvciddID0gZnVuY3Rpb24oc3dmSUQsIGVycil7XG4gIHZhciBwbGF5ZXIgPSB2anMuZWwoc3dmSUQpWydwbGF5ZXInXTtcbiAgdmFyIG1zZyA9ICdGTEFTSDogJytlcnI7XG5cbiAgaWYgKGVyciA9PSAnc3Jjbm90Zm91bmQnKSB7XG4gICAgcGxheWVyLmVycm9yKHsgY29kZTogNCwgbWVzc2FnZTogbXNnIH0pO1xuXG4gIC8vIGVycm9ycyB3ZSBoYXZlbid0IGNhdGVnb3JpemVkIGludG8gdGhlIG1lZGlhIGVycm9yc1xuICB9IGVsc2Uge1xuICAgIHBsYXllci5lcnJvcihtc2cpO1xuICB9XG59O1xuXG4vLyBGbGFzaCBWZXJzaW9uIENoZWNrXG52anMuRmxhc2gudmVyc2lvbiA9IGZ1bmN0aW9uKCl7XG4gIHZhciB2ZXJzaW9uID0gJzAsMCwwJztcblxuICAvLyBJRVxuICB0cnkge1xuICAgIHZlcnNpb24gPSBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ1Nob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoJykuR2V0VmFyaWFibGUoJyR2ZXJzaW9uJykucmVwbGFjZSgvXFxEKy9nLCAnLCcpLm1hdGNoKC9eLD8oLispLD8kLylbMV07XG5cbiAgLy8gb3RoZXIgYnJvd3NlcnNcbiAgfSBjYXRjaChlKSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuYXZpZ2F0b3IubWltZVR5cGVzWydhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCddLmVuYWJsZWRQbHVnaW4pe1xuICAgICAgICB2ZXJzaW9uID0gKG5hdmlnYXRvci5wbHVnaW5zWydTaG9ja3dhdmUgRmxhc2ggMi4wJ10gfHwgbmF2aWdhdG9yLnBsdWdpbnNbJ1Nob2Nrd2F2ZSBGbGFzaCddKS5kZXNjcmlwdGlvbi5yZXBsYWNlKC9cXEQrL2csICcsJykubWF0Y2goL14sPyguKyksPyQvKVsxXTtcbiAgICAgIH1cbiAgICB9IGNhdGNoKGVycikge31cbiAgfVxuICByZXR1cm4gdmVyc2lvbi5zcGxpdCgnLCcpO1xufTtcblxuLy8gRmxhc2ggZW1iZWRkaW5nIG1ldGhvZC4gT25seSB1c2VkIGluIG5vbi1pZnJhbWUgbW9kZVxudmpzLkZsYXNoLmVtYmVkID0gZnVuY3Rpb24oc3dmLCBwbGFjZUhvbGRlciwgZmxhc2hWYXJzLCBwYXJhbXMsIGF0dHJpYnV0ZXMpe1xuICB2YXIgY29kZSA9IHZqcy5GbGFzaC5nZXRFbWJlZENvZGUoc3dmLCBmbGFzaFZhcnMsIHBhcmFtcywgYXR0cmlidXRlcyksXG5cbiAgICAgIC8vIEdldCBlbGVtZW50IGJ5IGVtYmVkZGluZyBjb2RlIGFuZCByZXRyaWV2aW5nIGNyZWF0ZWQgZWxlbWVudFxuICAgICAgb2JqID0gdmpzLmNyZWF0ZUVsKCdkaXYnLCB7IGlubmVySFRNTDogY29kZSB9KS5jaGlsZE5vZGVzWzBdLFxuXG4gICAgICBwYXIgPSBwbGFjZUhvbGRlci5wYXJlbnROb2RlXG4gIDtcblxuICBwbGFjZUhvbGRlci5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChvYmosIHBsYWNlSG9sZGVyKTtcblxuICAvLyBJRTYgc2VlbXMgdG8gaGF2ZSBhbiBpc3N1ZSB3aGVyZSBpdCB3b24ndCBpbml0aWFsaXplIHRoZSBzd2Ygb2JqZWN0IGFmdGVyIGluamVjdGluZyBpdC5cbiAgLy8gVGhpcyBpcyBhIGR1bWIgZml4XG4gIHZhciBuZXdPYmogPSBwYXIuY2hpbGROb2Rlc1swXTtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgIG5ld09iai5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfSwgMTAwMCk7XG5cbiAgcmV0dXJuIG9iajtcblxufTtcblxudmpzLkZsYXNoLmdldEVtYmVkQ29kZSA9IGZ1bmN0aW9uKHN3ZiwgZmxhc2hWYXJzLCBwYXJhbXMsIGF0dHJpYnV0ZXMpe1xuXG4gIHZhciBvYmpUYWcgPSAnPG9iamVjdCB0eXBlPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIicsXG4gICAgICBmbGFzaFZhcnNTdHJpbmcgPSAnJyxcbiAgICAgIHBhcmFtc1N0cmluZyA9ICcnLFxuICAgICAgYXR0cnNTdHJpbmcgPSAnJztcblxuICAvLyBDb252ZXJ0IGZsYXNoIHZhcnMgdG8gc3RyaW5nXG4gIGlmIChmbGFzaFZhcnMpIHtcbiAgICB2anMub2JqLmVhY2goZmxhc2hWYXJzLCBmdW5jdGlvbihrZXksIHZhbCl7XG4gICAgICBmbGFzaFZhcnNTdHJpbmcgKz0gKGtleSArICc9JyArIHZhbCArICcmYW1wOycpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gQWRkIHN3ZiwgZmxhc2hWYXJzLCBhbmQgb3RoZXIgZGVmYXVsdCBwYXJhbXNcbiAgcGFyYW1zID0gdmpzLm9iai5tZXJnZSh7XG4gICAgJ21vdmllJzogc3dmLFxuICAgICdmbGFzaHZhcnMnOiBmbGFzaFZhcnNTdHJpbmcsXG4gICAgJ2FsbG93U2NyaXB0QWNjZXNzJzogJ2Fsd2F5cycsIC8vIFJlcXVpcmVkIHRvIHRhbGsgdG8gc3dmXG4gICAgJ2FsbG93TmV0d29ya2luZyc6ICdhbGwnIC8vIEFsbCBzaG91bGQgYmUgZGVmYXVsdCwgYnV0IGhhdmluZyBzZWN1cml0eSBpc3N1ZXMuXG4gIH0sIHBhcmFtcyk7XG5cbiAgLy8gQ3JlYXRlIHBhcmFtIHRhZ3Mgc3RyaW5nXG4gIHZqcy5vYmouZWFjaChwYXJhbXMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICBwYXJhbXNTdHJpbmcgKz0gJzxwYXJhbSBuYW1lPVwiJytrZXkrJ1wiIHZhbHVlPVwiJyt2YWwrJ1wiIC8+JztcbiAgfSk7XG5cbiAgYXR0cmlidXRlcyA9IHZqcy5vYmoubWVyZ2Uoe1xuICAgIC8vIEFkZCBzd2YgdG8gYXR0cmlidXRlcyAobmVlZCBib3RoIGZvciBJRSBhbmQgT3RoZXJzIHRvIHdvcmspXG4gICAgJ2RhdGEnOiBzd2YsXG5cbiAgICAvLyBEZWZhdWx0IHRvIDEwMCUgd2lkdGgvaGVpZ2h0XG4gICAgJ3dpZHRoJzogJzEwMCUnLFxuICAgICdoZWlnaHQnOiAnMTAwJSdcblxuICB9LCBhdHRyaWJ1dGVzKTtcblxuICAvLyBDcmVhdGUgQXR0cmlidXRlcyBzdHJpbmdcbiAgdmpzLm9iai5lYWNoKGF0dHJpYnV0ZXMsIGZ1bmN0aW9uKGtleSwgdmFsKXtcbiAgICBhdHRyc1N0cmluZyArPSAoa2V5ICsgJz1cIicgKyB2YWwgKyAnXCIgJyk7XG4gIH0pO1xuXG4gIHJldHVybiBvYmpUYWcgKyBhdHRyc1N0cmluZyArICc+JyArIHBhcmFtc1N0cmluZyArICc8L29iamVjdD4nO1xufTtcblxudmpzLkZsYXNoLnN0cmVhbUZyb21QYXJ0cyA9IGZ1bmN0aW9uKGNvbm5lY3Rpb24sIHN0cmVhbSkge1xuICByZXR1cm4gY29ubmVjdGlvbiArICcmJyArIHN0cmVhbTtcbn07XG5cbnZqcy5GbGFzaC5zdHJlYW1Ub1BhcnRzID0gZnVuY3Rpb24oc3JjKSB7XG4gIHZhciBwYXJ0cyA9IHtcbiAgICBjb25uZWN0aW9uOiAnJyxcbiAgICBzdHJlYW06ICcnXG4gIH07XG5cbiAgaWYgKCEgc3JjKSB7XG4gICAgcmV0dXJuIHBhcnRzO1xuICB9XG5cbiAgLy8gTG9vayBmb3IgdGhlIG5vcm1hbCBVUkwgc2VwYXJhdG9yIHdlIGV4cGVjdCwgJyYnLlxuICAvLyBJZiBmb3VuZCwgd2Ugc3BsaXQgdGhlIFVSTCBpbnRvIHR3byBwaWVjZXMgYXJvdW5kIHRoZVxuICAvLyBmaXJzdCAnJicuXG4gIHZhciBjb25uRW5kID0gc3JjLmluZGV4T2YoJyYnKTtcbiAgdmFyIHN0cmVhbUJlZ2luO1xuICBpZiAoY29ubkVuZCAhPT0gLTEpIHtcbiAgICBzdHJlYW1CZWdpbiA9IGNvbm5FbmQgKyAxO1xuICB9XG4gIGVsc2Uge1xuICAgIC8vIElmIHRoZXJlJ3Mgbm90IGEgJyYnLCB3ZSB1c2UgdGhlIGxhc3QgJy8nIGFzIHRoZSBkZWxpbWl0ZXIuXG4gICAgY29ubkVuZCA9IHN0cmVhbUJlZ2luID0gc3JjLmxhc3RJbmRleE9mKCcvJykgKyAxO1xuICAgIGlmIChjb25uRW5kID09PSAwKSB7XG4gICAgICAvLyByZWFsbHksIHRoZXJlJ3Mgbm90IGEgJy8nP1xuICAgICAgY29ubkVuZCA9IHN0cmVhbUJlZ2luID0gc3JjLmxlbmd0aDtcbiAgICB9XG4gIH1cbiAgcGFydHMuY29ubmVjdGlvbiA9IHNyYy5zdWJzdHJpbmcoMCwgY29ubkVuZCk7XG4gIHBhcnRzLnN0cmVhbSA9IHNyYy5zdWJzdHJpbmcoc3RyZWFtQmVnaW4sIHNyYy5sZW5ndGgpO1xuXG4gIHJldHVybiBwYXJ0cztcbn07XG5cbnZqcy5GbGFzaC5pc1N0cmVhbWluZ1R5cGUgPSBmdW5jdGlvbihzcmNUeXBlKSB7XG4gIHJldHVybiBzcmNUeXBlIGluIHZqcy5GbGFzaC5zdHJlYW1pbmdGb3JtYXRzO1xufTtcblxuLy8gUlRNUCBoYXMgZm91ciB2YXJpYXRpb25zLCBhbnkgc3RyaW5nIHN0YXJ0aW5nXG4vLyB3aXRoIG9uZSBvZiB0aGVzZSBwcm90b2NvbHMgc2hvdWxkIGJlIHZhbGlkXG52anMuRmxhc2guUlRNUF9SRSA9IC9ecnRtcFtzZXRdPzpcXC9cXC8vaTtcblxudmpzLkZsYXNoLmlzU3RyZWFtaW5nU3JjID0gZnVuY3Rpb24oc3JjKSB7XG4gIHJldHVybiB2anMuRmxhc2guUlRNUF9SRS50ZXN0KHNyYyk7XG59O1xuLyoqXG4gKiBUaGUgTWVkaWEgTG9hZGVyIGlzIHRoZSBjb21wb25lbnQgdGhhdCBkZWNpZGVzIHdoaWNoIHBsYXliYWNrIHRlY2hub2xvZ3kgdG8gbG9hZFxuICogd2hlbiB0aGUgcGxheWVyIGlzIGluaXRpYWxpemVkLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuTWVkaWFMb2FkZXIgPSB2anMuQ29tcG9uZW50LmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zLCByZWFkeSl7XG4gICAgdmpzLkNvbXBvbmVudC5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuXG4gICAgLy8gSWYgdGhlcmUgYXJlIG5vIHNvdXJjZXMgd2hlbiB0aGUgcGxheWVyIGlzIGluaXRpYWxpemVkLFxuICAgIC8vIGxvYWQgdGhlIGZpcnN0IHN1cHBvcnRlZCBwbGF5YmFjayB0ZWNobm9sb2d5LlxuICAgIGlmICghcGxheWVyLm9wdGlvbnNfWydzb3VyY2VzJ10gfHwgcGxheWVyLm9wdGlvbnNfWydzb3VyY2VzJ10ubGVuZ3RoID09PSAwKSB7XG4gICAgICBmb3IgKHZhciBpPTAsaj1wbGF5ZXIub3B0aW9uc19bJ3RlY2hPcmRlciddOyBpPGoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHRlY2hOYW1lID0gdmpzLmNhcGl0YWxpemUoaltpXSksXG4gICAgICAgICAgICB0ZWNoID0gd2luZG93Wyd2aWRlb2pzJ11bdGVjaE5hbWVdO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIHRoaXMgdGVjaG5vbG9neVxuICAgICAgICBpZiAodGVjaCAmJiB0ZWNoLmlzU3VwcG9ydGVkKCkpIHtcbiAgICAgICAgICBwbGF5ZXIubG9hZFRlY2godGVjaE5hbWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIC8vIExvb3AgdGhyb3VnaCBwbGF5YmFjayB0ZWNobm9sb2dpZXMgKEhUTUw1LCBGbGFzaCkgYW5kIGNoZWNrIGZvciBzdXBwb3J0LlxuICAgICAgLy8gLy8gVGhlbiBsb2FkIHRoZSBiZXN0IHNvdXJjZS5cbiAgICAgIC8vIC8vIEEgZmV3IGFzc3VtcHRpb25zIGhlcmU6XG4gICAgICAvLyAvLyAgIEFsbCBwbGF5YmFjayB0ZWNobm9sb2dpZXMgcmVzcGVjdCBwcmVsb2FkIGZhbHNlLlxuICAgICAgcGxheWVyLnNyYyhwbGF5ZXIub3B0aW9uc19bJ3NvdXJjZXMnXSk7XG4gICAgfVxuICB9XG59KTtcbi8qKlxuICogQGZpbGVvdmVydmlldyBUZXh0IFRyYWNrc1xuICogVGV4dCB0cmFja3MgYXJlIHRyYWNrcyBvZiB0aW1lZCB0ZXh0IGV2ZW50cy5cbiAqIENhcHRpb25zIC0gdGV4dCBkaXNwbGF5ZWQgb3ZlciB0aGUgdmlkZW8gZm9yIHRoZSBoZWFyaW5nIGltcGFyZWRcbiAqIFN1YnRpdGxlcyAtIHRleHQgZGlzcGxheWVkIG92ZXIgdGhlIHZpZGVvIGZvciB0aG9zZSB3aG8gZG9uJ3QgdW5kZXJzdGFuZCBsYW5nYXVnZSBpbiB0aGUgdmlkZW9cbiAqIENoYXB0ZXJzIC0gdGV4dCBkaXNwbGF5ZWQgaW4gYSBtZW51IGFsbG93aW5nIHRoZSB1c2VyIHRvIGp1bXAgdG8gcGFydGljdWxhciBwb2ludHMgKGNoYXB0ZXJzKSBpbiB0aGUgdmlkZW9cbiAqIERlc2NyaXB0aW9ucyAobm90IHN1cHBvcnRlZCB5ZXQpIC0gYXVkaW8gZGVzY3JpcHRpb25zIHRoYXQgYXJlIHJlYWQgYmFjayB0byB0aGUgdXNlciBieSBhIHNjcmVlbiByZWFkaW5nIGRldmljZVxuICovXG5cbi8vIFBsYXllciBBZGRpdGlvbnMgLSBGdW5jdGlvbnMgYWRkIHRvIHRoZSBwbGF5ZXIgb2JqZWN0IGZvciBlYXNpZXIgYWNjZXNzIHRvIHRyYWNrc1xuXG4vKipcbiAqIExpc3Qgb2YgYXNzb2NpYXRlZCB0ZXh0IHRyYWNrc1xuICogQHR5cGUge0FycmF5fVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUudGV4dFRyYWNrc187XG5cbi8qKlxuICogR2V0IGFuIGFycmF5IG9mIGFzc29jaWF0ZWQgdGV4dCB0cmFja3MuIGNhcHRpb25zLCBzdWJ0aXRsZXMsIGNoYXB0ZXJzLCBkZXNjcmlwdGlvbnNcbiAqIGh0dHA6Ly93d3cudzMub3JnL2h0bWwvd2cvZHJhZnRzL2h0bWwvbWFzdGVyL2VtYmVkZGVkLWNvbnRlbnQtMC5odG1sI2RvbS1tZWRpYS10ZXh0dHJhY2tzXG4gKiBAcmV0dXJuIHtBcnJheX0gICAgICAgICAgIEFycmF5IG9mIHRyYWNrIG9iamVjdHNcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLnRleHRUcmFja3MgPSBmdW5jdGlvbigpe1xuICB0aGlzLnRleHRUcmFja3NfID0gdGhpcy50ZXh0VHJhY2tzXyB8fCBbXTtcbiAgcmV0dXJuIHRoaXMudGV4dFRyYWNrc187XG59O1xuXG4vKipcbiAqIEFkZCBhIHRleHQgdHJhY2tcbiAqIEluIGFkZGl0aW9uIHRvIHRoZSBXM0Mgc2V0dGluZ3Mgd2UgYWxsb3cgYWRkaW5nIGFkZGl0aW9uYWwgaW5mbyB0aHJvdWdoIG9wdGlvbnMuXG4gKiBodHRwOi8vd3d3LnczLm9yZy9odG1sL3dnL2RyYWZ0cy9odG1sL21hc3Rlci9lbWJlZGRlZC1jb250ZW50LTAuaHRtbCNkb20tbWVkaWEtYWRkdGV4dHRyYWNrXG4gKiBAcGFyYW0ge1N0cmluZ30gIGtpbmQgICAgICAgIENhcHRpb25zLCBzdWJ0aXRsZXMsIGNoYXB0ZXJzLCBkZXNjcmlwdGlvbnMsIG9yIG1ldGFkYXRhXG4gKiBAcGFyYW0ge1N0cmluZz19IGxhYmVsICAgICAgIE9wdGlvbmFsIGxhYmVsXG4gKiBAcGFyYW0ge1N0cmluZz19IGxhbmd1YWdlICAgIE9wdGlvbmFsIGxhbmd1YWdlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgICAgIEFkZGl0aW9uYWwgdHJhY2sgb3B0aW9ucywgbGlrZSBzcmNcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5QbGF5ZXIucHJvdG90eXBlLmFkZFRleHRUcmFjayA9IGZ1bmN0aW9uKGtpbmQsIGxhYmVsLCBsYW5ndWFnZSwgb3B0aW9ucyl7XG4gIHZhciB0cmFja3MgPSB0aGlzLnRleHRUcmFja3NfID0gdGhpcy50ZXh0VHJhY2tzXyB8fCBbXTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgb3B0aW9uc1sna2luZCddID0ga2luZDtcbiAgb3B0aW9uc1snbGFiZWwnXSA9IGxhYmVsO1xuICBvcHRpb25zWydsYW5ndWFnZSddID0gbGFuZ3VhZ2U7XG5cbiAgLy8gSFRNTDUgU3BlYyBzYXlzIGRlZmF1bHQgdG8gc3VidGl0bGVzLlxuICAvLyBVcHBlcmNhc2UgZmlyc3QgbGV0dGVyIHRvIG1hdGNoIGNsYXNzIG5hbWVzXG4gIHZhciBLaW5kID0gdmpzLmNhcGl0YWxpemUoa2luZCB8fCAnc3VidGl0bGVzJyk7XG5cbiAgLy8gQ3JlYXRlIGNvcnJlY3QgdGV4dHRyYWNrIGNsYXNzLiBDYXB0aW9uc1RyYWNrLCBldGMuXG4gIHZhciB0cmFjayA9IG5ldyB3aW5kb3dbJ3ZpZGVvanMnXVtLaW5kICsgJ1RyYWNrJ10odGhpcywgb3B0aW9ucyk7XG5cbiAgdHJhY2tzLnB1c2godHJhY2spO1xuXG4gIC8vIElmIHRyYWNrLmRmbHQoKSBpcyBzZXQsIHN0YXJ0IHNob3dpbmcgaW1tZWRpYXRlbHlcbiAgLy8gVE9ETzogQWRkIGEgcHJvY2VzcyB0byBkZXRlcmltZSB0aGUgYmVzdCB0cmFjayB0byBzaG93IGZvciB0aGUgc3BlY2lmaWMga2luZFxuICAvLyBJbmNhc2UgdGhlcmUgYXJlIG11bGl0cGxlIGRlZmF1bHRlZCB0cmFja3Mgb2YgdGhlIHNhbWUga2luZFxuICAvLyBPciB0aGUgdXNlciBoYXMgYSBzZXQgcHJlZmVyZW5jZSBvZiBhIHNwZWNpZmljIGxhbmd1YWdlIHRoYXQgc2hvdWxkIG92ZXJyaWRlIHRoZSBkZWZhdWx0XG4gIC8vIE5vdGU6IFRoZSBzZXRUaW1lb3V0IGlzIGEgd29ya2Fyb3VuZCBiZWNhdXNlIHdpdGggdGhlIGh0bWw1IHRlY2gsIHRoZSBwbGF5ZXIgaXMgJ3JlYWR5J1xuIC8vICBiZWZvcmUgaXQncyBjaGlsZCBjb21wb25lbnRzIChpbmNsdWRpbmcgdGhlIHRleHRUcmFja0Rpc3BsYXkpIGhhdmUgZmluaXNoZWQgbG9hZGluZy5cbiAgaWYgKHRyYWNrLmRmbHQoKSkge1xuICAgIHRoaXMucmVhZHkoZnVuY3Rpb24oKXtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgdHJhY2sucGxheWVyKCkuc2hvd1RleHRUcmFjayh0cmFjay5pZCgpKTtcbiAgICAgIH0sIDApO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHRyYWNrO1xufTtcblxuLyoqXG4gKiBBZGQgYW4gYXJyYXkgb2YgdGV4dCB0cmFja3MuIGNhcHRpb25zLCBzdWJ0aXRsZXMsIGNoYXB0ZXJzLCBkZXNjcmlwdGlvbnNcbiAqIFRyYWNrIG9iamVjdHMgd2lsbCBiZSBzdG9yZWQgaW4gdGhlIHBsYXllci50ZXh0VHJhY2tzKCkgYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXl9IHRyYWNrTGlzdCBBcnJheSBvZiB0cmFjayBlbGVtZW50cyBvciBvYmplY3RzIChmYWtlIHRyYWNrIGVsZW1lbnRzKVxuICogQHByaXZhdGVcbiAqL1xudmpzLlBsYXllci5wcm90b3R5cGUuYWRkVGV4dFRyYWNrcyA9IGZ1bmN0aW9uKHRyYWNrTGlzdCl7XG4gIHZhciB0cmFja09iajtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRyYWNrTGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHRyYWNrT2JqID0gdHJhY2tMaXN0W2ldO1xuICAgIHRoaXMuYWRkVGV4dFRyYWNrKHRyYWNrT2JqWydraW5kJ10sIHRyYWNrT2JqWydsYWJlbCddLCB0cmFja09ialsnbGFuZ3VhZ2UnXSwgdHJhY2tPYmopO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vLyBTaG93IGEgdGV4dCB0cmFja1xuLy8gZGlzYWJsZVNhbWVLaW5kOiBkaXNhYmxlIGFsbCBvdGhlciB0cmFja3Mgb2YgdGhlIHNhbWUga2luZC4gVmFsdWUgc2hvdWxkIGJlIGEgdHJhY2sga2luZCAoY2FwdGlvbnMsIGV0Yy4pXG52anMuUGxheWVyLnByb3RvdHlwZS5zaG93VGV4dFRyYWNrID0gZnVuY3Rpb24oaWQsIGRpc2FibGVTYW1lS2luZCl7XG4gIHZhciB0cmFja3MgPSB0aGlzLnRleHRUcmFja3NfLFxuICAgICAgaSA9IDAsXG4gICAgICBqID0gdHJhY2tzLmxlbmd0aCxcbiAgICAgIHRyYWNrLCBzaG93VHJhY2ssIGtpbmQ7XG5cbiAgLy8gRmluZCBUcmFjayB3aXRoIHNhbWUgSURcbiAgZm9yICg7aTxqO2krKykge1xuICAgIHRyYWNrID0gdHJhY2tzW2ldO1xuICAgIGlmICh0cmFjay5pZCgpID09PSBpZCkge1xuICAgICAgdHJhY2suc2hvdygpO1xuICAgICAgc2hvd1RyYWNrID0gdHJhY2s7XG5cbiAgICAvLyBEaXNhYmxlIHRyYWNrcyBvZiB0aGUgc2FtZSBraW5kXG4gICAgfSBlbHNlIGlmIChkaXNhYmxlU2FtZUtpbmQgJiYgdHJhY2sua2luZCgpID09IGRpc2FibGVTYW1lS2luZCAmJiB0cmFjay5tb2RlKCkgPiAwKSB7XG4gICAgICB0cmFjay5kaXNhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gR2V0IHRyYWNrIGtpbmQgZnJvbSBzaG93biB0cmFjayBvciBkaXNhYmxlU2FtZUtpbmRcbiAga2luZCA9IChzaG93VHJhY2spID8gc2hvd1RyYWNrLmtpbmQoKSA6ICgoZGlzYWJsZVNhbWVLaW5kKSA/IGRpc2FibGVTYW1lS2luZCA6IGZhbHNlKTtcblxuICAvLyBUcmlnZ2VyIHRyYWNrY2hhbmdlIGV2ZW50LCBjYXB0aW9uc3RyYWNrY2hhbmdlLCBzdWJ0aXRsZXN0cmFja2NoYW5nZSwgZXRjLlxuICBpZiAoa2luZCkge1xuICAgIHRoaXMudHJpZ2dlcihraW5kKyd0cmFja2NoYW5nZScpO1xuICB9XG5cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgdGV4dCB0cmFja3NcbiAqXG4gKiBIYW5kbGVzIHRoZSBwYXJzaW5nLCBoaWRpbmcsIGFuZCBzaG93aW5nIG9mIHRleHQgdHJhY2sgY3Vlc1xuICpcbiAqIEBwYXJhbSB7dmpzLlBsYXllcnxPYmplY3R9IHBsYXllclxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLlRleHRUcmFjayA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgLy8gQXBwbHkgdHJhY2sgaW5mbyB0byB0cmFjayBvYmplY3RcbiAgICAvLyBPcHRpb25zIHdpbGwgb2Z0ZW4gYmUgYSB0cmFjayBlbGVtZW50XG5cbiAgICAvLyBCdWlsZCBJRCBpZiBvbmUgZG9lc24ndCBleGlzdFxuICAgIHRoaXMuaWRfID0gb3B0aW9uc1snaWQnXSB8fCAoJ3Zqc18nICsgb3B0aW9uc1sna2luZCddICsgJ18nICsgb3B0aW9uc1snbGFuZ3VhZ2UnXSArICdfJyArIHZqcy5ndWlkKyspO1xuICAgIHRoaXMuc3JjXyA9IG9wdGlvbnNbJ3NyYyddO1xuICAgIC8vICdkZWZhdWx0JyBpcyBhIHJlc2VydmVkIGtleXdvcmQgaW4ganMgc28gd2UgdXNlIGFuIGFiYnJldmlhdGVkIHZlcnNpb25cbiAgICB0aGlzLmRmbHRfID0gb3B0aW9uc1snZGVmYXVsdCddIHx8IG9wdGlvbnNbJ2RmbHQnXTtcbiAgICB0aGlzLnRpdGxlXyA9IG9wdGlvbnNbJ3RpdGxlJ107XG4gICAgdGhpcy5sYW5ndWFnZV8gPSBvcHRpb25zWydzcmNsYW5nJ107XG4gICAgdGhpcy5sYWJlbF8gPSBvcHRpb25zWydsYWJlbCddO1xuICAgIHRoaXMuY3Vlc18gPSBbXTtcbiAgICB0aGlzLmFjdGl2ZUN1ZXNfID0gW107XG4gICAgdGhpcy5yZWFkeVN0YXRlXyA9IDA7XG4gICAgdGhpcy5tb2RlXyA9IDA7XG5cbiAgICB0aGlzLnBsYXllcl8ub24oJ2Z1bGxzY3JlZW5jaGFuZ2UnLCB2anMuYmluZCh0aGlzLCB0aGlzLmFkanVzdEZvbnRTaXplKSk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFRyYWNrIGtpbmQgdmFsdWUuIENhcHRpb25zLCBzdWJ0aXRsZXMsIGV0Yy5cbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmtpbmRfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sga2luZCB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5raW5kID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMua2luZF87XG59O1xuXG4vKipcbiAqIFRyYWNrIHNyYyB2YWx1ZVxuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuc3JjXztcblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIHNyYyB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5zcmMgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5zcmNfO1xufTtcblxuLyoqXG4gKiBUcmFjayBkZWZhdWx0IHZhbHVlXG4gKiBJZiBkZWZhdWx0IGlzIHVzZWQsIHN1YnRpdGxlcy9jYXB0aW9ucyB0byBzdGFydCBzaG93aW5nXG4gKiBAcHJpdmF0ZVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5kZmx0XztcblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGRlZmF1bHQgdmFsdWUuICgnZGVmYXVsdCcgaXMgYSByZXNlcnZlZCBrZXl3b3JkKVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuZGZsdCA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmRmbHRfO1xufTtcblxuLyoqXG4gKiBUcmFjayB0aXRsZSB2YWx1ZVxuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUudGl0bGVfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgdGl0bGUgdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUudGl0bGUgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy50aXRsZV87XG59O1xuXG4vKipcbiAqIExhbmd1YWdlIC0gdHdvIGxldHRlciBzdHJpbmcgdG8gcmVwcmVzZW50IHRyYWNrIGxhbmd1YWdlLCBlLmcuICdlbicgZm9yIEVuZ2xpc2hcbiAqIFNwZWMgZGVmOiByZWFkb25seSBhdHRyaWJ1dGUgRE9NU3RyaW5nIGxhbmd1YWdlO1xuICogQHByaXZhdGVcbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUubGFuZ3VhZ2VfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgbGFuZ3VhZ2UgdmFsdWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUubGFuZ3VhZ2UgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5sYW5ndWFnZV87XG59O1xuXG4vKipcbiAqIFRyYWNrIGxhYmVsIGUuZy4gJ0VuZ2xpc2gnXG4gKiBTcGVjIGRlZjogcmVhZG9ubHkgYXR0cmlidXRlIERPTVN0cmluZyBsYWJlbDtcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmxhYmVsXztcblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGxhYmVsIHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmxhYmVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMubGFiZWxfO1xufTtcblxuLyoqXG4gKiBBbGwgY3VlcyBvZiB0aGUgdHJhY2suIEN1ZXMgaGF2ZSBhIHN0YXJ0VGltZSwgZW5kVGltZSwgdGV4dCwgYW5kIG90aGVyIHByb3BlcnRpZXMuXG4gKiBTcGVjIGRlZjogcmVhZG9ubHkgYXR0cmlidXRlIFRleHRUcmFja0N1ZUxpc3QgY3VlcztcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmN1ZXNfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgY3Vlc1xuICogQHJldHVybiB7QXJyYXl9XG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmN1ZXMgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdGhpcy5jdWVzXztcbn07XG5cbi8qKlxuICogQWN0aXZlQ3VlcyBpcyBhbGwgY3VlcyB0aGF0IGFyZSBjdXJyZW50bHkgc2hvd2luZ1xuICogU3BlYyBkZWY6IHJlYWRvbmx5IGF0dHJpYnV0ZSBUZXh0VHJhY2tDdWVMaXN0IGFjdGl2ZUN1ZXM7XG4gKiBAcHJpdmF0ZVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5hY3RpdmVDdWVzXztcblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGFjdGl2ZSBjdWVzXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuYWN0aXZlQ3VlcyA9IGZ1bmN0aW9uKCl7XG4gIHJldHVybiB0aGlzLmFjdGl2ZUN1ZXNfO1xufTtcblxuLyoqXG4gKiBSZWFkeVN0YXRlIGRlc2NyaWJlcyBpZiB0aGUgdGV4dCBmaWxlIGhhcyBiZWVuIGxvYWRlZFxuICogY29uc3QgdW5zaWduZWQgc2hvcnQgTk9ORSA9IDA7XG4gKiBjb25zdCB1bnNpZ25lZCBzaG9ydCBMT0FESU5HID0gMTtcbiAqIGNvbnN0IHVuc2lnbmVkIHNob3J0IExPQURFRCA9IDI7XG4gKiBjb25zdCB1bnNpZ25lZCBzaG9ydCBFUlJPUiA9IDM7XG4gKiByZWFkb25seSBhdHRyaWJ1dGUgdW5zaWduZWQgc2hvcnQgcmVhZHlTdGF0ZTtcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLnJlYWR5U3RhdGVfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgcmVhZHlTdGF0ZVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5yZWFkeVN0YXRlID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMucmVhZHlTdGF0ZV87XG59O1xuXG4vKipcbiAqIE1vZGUgZGVzY3JpYmVzIGlmIHRoZSB0cmFjayBpcyBzaG93aW5nLCBoaWRkZW4sIG9yIGRpc2FibGVkXG4gKiBjb25zdCB1bnNpZ25lZCBzaG9ydCBPRkYgPSAwO1xuICogY29uc3QgdW5zaWduZWQgc2hvcnQgSElEREVOID0gMTsgKHN0aWxsIHRyaWdnZXJpbmcgY3VlY2hhbmdlIGV2ZW50cywgYnV0IG5vdCB2aXNpYmxlKVxuICogY29uc3QgdW5zaWduZWQgc2hvcnQgU0hPV0lORyA9IDI7XG4gKiBhdHRyaWJ1dGUgdW5zaWduZWQgc2hvcnQgbW9kZTtcbiAqIEBwcml2YXRlXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLm1vZGVfO1xuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgbW9kZVxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5tb2RlID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHRoaXMubW9kZV87XG59O1xuXG4vKipcbiAqIENoYW5nZSB0aGUgZm9udCBzaXplIG9mIHRoZSB0ZXh0IHRyYWNrIHRvIG1ha2UgaXQgbGFyZ2VyIHdoZW4gcGxheWluZyBpbiBmdWxsc2NyZWVuIG1vZGVcbiAqIGFuZCByZXN0b3JlIGl0IHRvIGl0cyBub3JtYWwgc2l6ZSB3aGVuIG5vdCBpbiBmdWxsc2NyZWVuIG1vZGUuXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLmFkanVzdEZvbnRTaXplID0gZnVuY3Rpb24oKXtcbiAgICBpZiAodGhpcy5wbGF5ZXJfLmlzRnVsbHNjcmVlbigpKSB7XG4gICAgICAgIC8vIFNjYWxlIHRoZSBmb250IGJ5IHRoZSBzYW1lIGZhY3RvciBhcyBpbmNyZWFzaW5nIHRoZSB2aWRlbyB3aWR0aCB0byB0aGUgZnVsbCBzY3JlZW4gd2luZG93IHdpZHRoLlxuICAgICAgICAvLyBBZGRpdGlvbmFsbHksIG11bHRpcGx5IHRoYXQgZmFjdG9yIGJ5IDEuNCwgd2hpY2ggaXMgdGhlIGRlZmF1bHQgZm9udCBzaXplIGZvclxuICAgICAgICAvLyB0aGUgY2FwdGlvbiB0cmFjayAoZnJvbSB0aGUgQ1NTKVxuICAgICAgICB0aGlzLmVsXy5zdHlsZS5mb250U2l6ZSA9IHNjcmVlbi53aWR0aCAvIHRoaXMucGxheWVyXy53aWR0aCgpICogMS40ICogMTAwICsgJyUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENoYW5nZSB0aGUgZm9udCBzaXplIG9mIHRoZSB0ZXh0IHRyYWNrIGJhY2sgdG8gaXRzIG9yaWdpbmFsIG5vbi1mdWxsc2NyZWVuIHNpemVcbiAgICAgICAgdGhpcy5lbF8uc3R5bGUuZm9udFNpemUgPSAnJztcbiAgICB9XG59O1xuXG4vKipcbiAqIENyZWF0ZSBiYXNpYyBkaXYgdG8gaG9sZCBjdWUgdGV4dFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuY3JlYXRlRWwgPSBmdW5jdGlvbigpe1xuICByZXR1cm4gdmpzLkNvbXBvbmVudC5wcm90b3R5cGUuY3JlYXRlRWwuY2FsbCh0aGlzLCAnZGl2Jywge1xuICAgIGNsYXNzTmFtZTogJ3Zqcy0nICsgdGhpcy5raW5kXyArICcgdmpzLXRleHQtdHJhY2snXG4gIH0pO1xufTtcblxuLyoqXG4gKiBTaG93OiBNb2RlIFNob3dpbmcgKDIpXG4gKiBJbmRpY2F0ZXMgdGhhdCB0aGUgdGV4dCB0cmFjayBpcyBhY3RpdmUuIElmIG5vIGF0dGVtcHQgaGFzIHlldCBiZWVuIG1hZGUgdG8gb2J0YWluIHRoZSB0cmFjaydzIGN1ZXMsIHRoZSB1c2VyIGFnZW50IHdpbGwgcGVyZm9ybSBzdWNoIGFuIGF0dGVtcHQgbW9tZW50YXJpbHkuXG4gKiBUaGUgdXNlciBhZ2VudCBpcyBtYWludGFpbmluZyBhIGxpc3Qgb2Ygd2hpY2ggY3VlcyBhcmUgYWN0aXZlLCBhbmQgZXZlbnRzIGFyZSBiZWluZyBmaXJlZCBhY2NvcmRpbmdseS5cbiAqIEluIGFkZGl0aW9uLCBmb3IgdGV4dCB0cmFja3Mgd2hvc2Uga2luZCBpcyBzdWJ0aXRsZXMgb3IgY2FwdGlvbnMsIHRoZSBjdWVzIGFyZSBiZWluZyBkaXNwbGF5ZWQgb3ZlciB0aGUgdmlkZW8gYXMgYXBwcm9wcmlhdGU7XG4gKiBmb3IgdGV4dCB0cmFja3Mgd2hvc2Uga2luZCBpcyBkZXNjcmlwdGlvbnMsIHRoZSB1c2VyIGFnZW50IGlzIG1ha2luZyB0aGUgY3VlcyBhdmFpbGFibGUgdG8gdGhlIHVzZXIgaW4gYSBub24tdmlzdWFsIGZhc2hpb247XG4gKiBhbmQgZm9yIHRleHQgdHJhY2tzIHdob3NlIGtpbmQgaXMgY2hhcHRlcnMsIHRoZSB1c2VyIGFnZW50IGlzIG1ha2luZyBhdmFpbGFibGUgdG8gdGhlIHVzZXIgYSBtZWNoYW5pc20gYnkgd2hpY2ggdGhlIHVzZXIgY2FuIG5hdmlnYXRlIHRvIGFueSBwb2ludCBpbiB0aGUgbWVkaWEgcmVzb3VyY2UgYnkgc2VsZWN0aW5nIGEgY3VlLlxuICogVGhlIHNob3dpbmcgYnkgZGVmYXVsdCBzdGF0ZSBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIGRlZmF1bHQgYXR0cmlidXRlIG9uIHRyYWNrIGVsZW1lbnRzIHRvIGluZGljYXRlIHRoYXQgdGhlIHRleHQgdHJhY2sgd2FzIGVuYWJsZWQgZHVlIHRvIHRoYXQgYXR0cmlidXRlLlxuICogVGhpcyBhbGxvd3MgdGhlIHVzZXIgYWdlbnQgdG8gb3ZlcnJpZGUgdGhlIHN0YXRlIGlmIGEgbGF0ZXIgdHJhY2sgaXMgZGlzY292ZXJlZCB0aGF0IGlzIG1vcmUgYXBwcm9wcmlhdGUgcGVyIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZXMuXG4gKi9cbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbigpe1xuICB0aGlzLmFjdGl2YXRlKCk7XG5cbiAgdGhpcy5tb2RlXyA9IDI7XG5cbiAgLy8gU2hvdyBlbGVtZW50LlxuICB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5zaG93LmNhbGwodGhpcyk7XG59O1xuXG4vKipcbiAqIEhpZGU6IE1vZGUgSGlkZGVuICgxKVxuICogSW5kaWNhdGVzIHRoYXQgdGhlIHRleHQgdHJhY2sgaXMgYWN0aXZlLCBidXQgdGhhdCB0aGUgdXNlciBhZ2VudCBpcyBub3QgYWN0aXZlbHkgZGlzcGxheWluZyB0aGUgY3Vlcy5cbiAqIElmIG5vIGF0dGVtcHQgaGFzIHlldCBiZWVuIG1hZGUgdG8gb2J0YWluIHRoZSB0cmFjaydzIGN1ZXMsIHRoZSB1c2VyIGFnZW50IHdpbGwgcGVyZm9ybSBzdWNoIGFuIGF0dGVtcHQgbW9tZW50YXJpbHkuXG4gKiBUaGUgdXNlciBhZ2VudCBpcyBtYWludGFpbmluZyBhIGxpc3Qgb2Ygd2hpY2ggY3VlcyBhcmUgYWN0aXZlLCBhbmQgZXZlbnRzIGFyZSBiZWluZyBmaXJlZCBhY2NvcmRpbmdseS5cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuaGlkZSA9IGZ1bmN0aW9uKCl7XG4gIC8vIFdoZW4gaGlkZGVuLCBjdWVzIGFyZSBzdGlsbCB0cmlnZ2VyZWQuIERpc2FibGUgdG8gc3RvcCB0cmlnZ2VyaW5nLlxuICB0aGlzLmFjdGl2YXRlKCk7XG5cbiAgdGhpcy5tb2RlXyA9IDE7XG5cbiAgLy8gSGlkZSBlbGVtZW50LlxuICB2anMuQ29tcG9uZW50LnByb3RvdHlwZS5oaWRlLmNhbGwodGhpcyk7XG59O1xuXG4vKipcbiAqIERpc2FibGU6IE1vZGUgT2ZmL0Rpc2FibGUgKDApXG4gKiBJbmRpY2F0ZXMgdGhhdCB0aGUgdGV4dCB0cmFjayBpcyBub3QgYWN0aXZlLiBPdGhlciB0aGFuIGZvciB0aGUgcHVycG9zZXMgb2YgZXhwb3NpbmcgdGhlIHRyYWNrIGluIHRoZSBET00sIHRoZSB1c2VyIGFnZW50IGlzIGlnbm9yaW5nIHRoZSB0ZXh0IHRyYWNrLlxuICogTm8gY3VlcyBhcmUgYWN0aXZlLCBubyBldmVudHMgYXJlIGZpcmVkLCBhbmQgdGhlIHVzZXIgYWdlbnQgd2lsbCBub3QgYXR0ZW1wdCB0byBvYnRhaW4gdGhlIHRyYWNrJ3MgY3Vlcy5cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuZGlzYWJsZSA9IGZ1bmN0aW9uKCl7XG4gIC8vIElmIHNob3dpbmcsIGhpZGUuXG4gIGlmICh0aGlzLm1vZGVfID09IDIpIHsgdGhpcy5oaWRlKCk7IH1cblxuICAvLyBTdG9wIHRyaWdnZXJpbmcgY3Vlc1xuICB0aGlzLmRlYWN0aXZhdGUoKTtcblxuICAvLyBTd2l0Y2ggTW9kZSB0byBPZmZcbiAgdGhpcy5tb2RlXyA9IDA7XG59O1xuXG4vKipcbiAqIFR1cm4gb24gY3VlIHRyYWNraW5nLiBUcmFja3MgdGhhdCBhcmUgc2hvd2luZyBPUiBoaWRkZW4gYXJlIGFjdGl2ZS5cbiAqL1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUuYWN0aXZhdGUgPSBmdW5jdGlvbigpe1xuICAvLyBMb2FkIHRleHQgZmlsZSBpZiBpdCBoYXNuJ3QgYmVlbiB5ZXQuXG4gIGlmICh0aGlzLnJlYWR5U3RhdGVfID09PSAwKSB7IHRoaXMubG9hZCgpOyB9XG5cbiAgLy8gT25seSBhY3RpdmF0ZSBpZiBub3QgYWxyZWFkeSBhY3RpdmUuXG4gIGlmICh0aGlzLm1vZGVfID09PSAwKSB7XG4gICAgLy8gVXBkYXRlIGN1cnJlbnQgY3VlIG9uIHRpbWV1cGRhdGVcbiAgICAvLyBVc2luZyB1bmlxdWUgSUQgZm9yIGJpbmQgZnVuY3Rpb24gc28gb3RoZXIgdHJhY2tzIGRvbid0IHJlbW92ZSBsaXN0ZW5lclxuICAgIHRoaXMucGxheWVyXy5vbigndGltZXVwZGF0ZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlLCB0aGlzLmlkXykpO1xuXG4gICAgLy8gUmVzZXQgY3VlIHRpbWUgb24gbWVkaWEgZW5kXG4gICAgdGhpcy5wbGF5ZXJfLm9uKCdlbmRlZCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMucmVzZXQsIHRoaXMuaWRfKSk7XG5cbiAgICAvLyBBZGQgdG8gZGlzcGxheVxuICAgIGlmICh0aGlzLmtpbmRfID09PSAnY2FwdGlvbnMnIHx8IHRoaXMua2luZF8gPT09ICdzdWJ0aXRsZXMnKSB7XG4gICAgICB0aGlzLnBsYXllcl8uZ2V0Q2hpbGQoJ3RleHRUcmFja0Rpc3BsYXknKS5hZGRDaGlsZCh0aGlzKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVHVybiBvZmYgY3VlIHRyYWNraW5nLlxuICovXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5kZWFjdGl2YXRlID0gZnVuY3Rpb24oKXtcbiAgLy8gVXNpbmcgdW5pcXVlIElEIGZvciBiaW5kIGZ1bmN0aW9uIHNvIG90aGVyIHRyYWNrcyBkb24ndCByZW1vdmUgbGlzdGVuZXJcbiAgdGhpcy5wbGF5ZXJfLm9mZigndGltZXVwZGF0ZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlLCB0aGlzLmlkXykpO1xuICB0aGlzLnBsYXllcl8ub2ZmKCdlbmRlZCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMucmVzZXQsIHRoaXMuaWRfKSk7XG4gIHRoaXMucmVzZXQoKTsgLy8gUmVzZXRcblxuICAvLyBSZW1vdmUgZnJvbSBkaXNwbGF5XG4gIHRoaXMucGxheWVyXy5nZXRDaGlsZCgndGV4dFRyYWNrRGlzcGxheScpLnJlbW92ZUNoaWxkKHRoaXMpO1xufTtcblxuLy8gQSByZWFkaW5lc3Mgc3RhdGVcbi8vIE9uZSBvZiB0aGUgZm9sbG93aW5nOlxuLy9cbi8vIE5vdCBsb2FkZWRcbi8vIEluZGljYXRlcyB0aGF0IHRoZSB0ZXh0IHRyYWNrIGlzIGtub3duIHRvIGV4aXN0IChlLmcuIGl0IGhhcyBiZWVuIGRlY2xhcmVkIHdpdGggYSB0cmFjayBlbGVtZW50KSwgYnV0IGl0cyBjdWVzIGhhdmUgbm90IGJlZW4gb2J0YWluZWQuXG4vL1xuLy8gTG9hZGluZ1xuLy8gSW5kaWNhdGVzIHRoYXQgdGhlIHRleHQgdHJhY2sgaXMgbG9hZGluZyBhbmQgdGhlcmUgaGF2ZSBiZWVuIG5vIGZhdGFsIGVycm9ycyBlbmNvdW50ZXJlZCBzbyBmYXIuIEZ1cnRoZXIgY3VlcyBtaWdodCBzdGlsbCBiZSBhZGRlZCB0byB0aGUgdHJhY2suXG4vL1xuLy8gTG9hZGVkXG4vLyBJbmRpY2F0ZXMgdGhhdCB0aGUgdGV4dCB0cmFjayBoYXMgYmVlbiBsb2FkZWQgd2l0aCBubyBmYXRhbCBlcnJvcnMuIE5vIG5ldyBjdWVzIHdpbGwgYmUgYWRkZWQgdG8gdGhlIHRyYWNrIGV4Y2VwdCBpZiB0aGUgdGV4dCB0cmFjayBjb3JyZXNwb25kcyB0byBhIE11dGFibGVUZXh0VHJhY2sgb2JqZWN0LlxuLy9cbi8vIEZhaWxlZCB0byBsb2FkXG4vLyBJbmRpY2F0ZXMgdGhhdCB0aGUgdGV4dCB0cmFjayB3YXMgZW5hYmxlZCwgYnV0IHdoZW4gdGhlIHVzZXIgYWdlbnQgYXR0ZW1wdGVkIHRvIG9idGFpbiBpdCwgdGhpcyBmYWlsZWQgaW4gc29tZSB3YXkgKGUuZy4gVVJMIGNvdWxkIG5vdCBiZSByZXNvbHZlZCwgbmV0d29yayBlcnJvciwgdW5rbm93biB0ZXh0IHRyYWNrIGZvcm1hdCkuIFNvbWUgb3IgYWxsIG9mIHRoZSBjdWVzIGFyZSBsaWtlbHkgbWlzc2luZyBhbmQgd2lsbCBub3QgYmUgb2J0YWluZWQuXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24oKXtcblxuICAvLyBPbmx5IGxvYWQgaWYgbm90IGxvYWRlZCB5ZXQuXG4gIGlmICh0aGlzLnJlYWR5U3RhdGVfID09PSAwKSB7XG4gICAgdGhpcy5yZWFkeVN0YXRlXyA9IDE7XG4gICAgdmpzLmdldCh0aGlzLnNyY18sIHZqcy5iaW5kKHRoaXMsIHRoaXMucGFyc2VDdWVzKSwgdmpzLmJpbmQodGhpcywgdGhpcy5vbkVycm9yKSk7XG4gIH1cblxufTtcblxudmpzLlRleHRUcmFjay5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uKGVycil7XG4gIHRoaXMuZXJyb3IgPSBlcnI7XG4gIHRoaXMucmVhZHlTdGF0ZV8gPSAzO1xuICB0aGlzLnRyaWdnZXIoJ2Vycm9yJyk7XG59O1xuXG4vLyBQYXJzZSB0aGUgV2ViVlRUIHRleHQgZm9ybWF0IGZvciBjdWUgdGltZXMuXG4vLyBUT0RPOiBTZXBhcmF0ZSBwYXJzZXIgaW50byBvd24gY2xhc3Mgc28gYWx0ZXJuYXRpdmUgdGltZWQgdGV4dCBmb3JtYXRzIGNhbiBiZSB1c2VkLiAoVFRNTCwgREZYUClcbnZqcy5UZXh0VHJhY2sucHJvdG90eXBlLnBhcnNlQ3VlcyA9IGZ1bmN0aW9uKHNyY0NvbnRlbnQpIHtcbiAgdmFyIGN1ZSwgdGltZSwgdGV4dCxcbiAgICAgIGxpbmVzID0gc3JjQ29udGVudC5zcGxpdCgnXFxuJyksXG4gICAgICBsaW5lID0gJycsIGlkO1xuXG4gIGZvciAodmFyIGk9MSwgaj1saW5lcy5sZW5ndGg7IGk8ajsgaSsrKSB7XG4gICAgLy8gTGluZSAwIHNob3VsZCBiZSAnV0VCVlRUJywgc28gc2tpcHBpbmcgaT0wXG5cbiAgICBsaW5lID0gdmpzLnRyaW0obGluZXNbaV0pOyAvLyBUcmltIHdoaXRlc3BhY2UgYW5kIGxpbmVicmVha3NcblxuICAgIGlmIChsaW5lKSB7IC8vIExvb3AgdW50aWwgYSBsaW5lIHdpdGggY29udGVudFxuXG4gICAgICAvLyBGaXJzdCBsaW5lIGNvdWxkIGJlIGFuIG9wdGlvbmFsIGN1ZSBJRFxuICAgICAgLy8gQ2hlY2sgaWYgbGluZSBoYXMgdGhlIHRpbWUgc2VwYXJhdG9yXG4gICAgICBpZiAobGluZS5pbmRleE9mKCctLT4nKSA9PSAtMSkge1xuICAgICAgICBpZCA9IGxpbmU7XG4gICAgICAgIC8vIEFkdmFuY2UgdG8gbmV4dCBsaW5lIGZvciB0aW1pbmcuXG4gICAgICAgIGxpbmUgPSB2anMudHJpbShsaW5lc1srK2ldKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlkID0gdGhpcy5jdWVzXy5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IGxpbmUgLSBOdW1iZXJcbiAgICAgIGN1ZSA9IHtcbiAgICAgICAgaWQ6IGlkLCAvLyBDdWUgTnVtYmVyXG4gICAgICAgIGluZGV4OiB0aGlzLmN1ZXNfLmxlbmd0aCAvLyBQb3NpdGlvbiBpbiBBcnJheVxuICAgICAgfTtcblxuICAgICAgLy8gVGltaW5nIGxpbmVcbiAgICAgIHRpbWUgPSBsaW5lLnNwbGl0KC9bXFx0IF0rLyk7XG4gICAgICBjdWUuc3RhcnRUaW1lID0gdGhpcy5wYXJzZUN1ZVRpbWUodGltZVswXSk7XG4gICAgICBjdWUuZW5kVGltZSA9IHRoaXMucGFyc2VDdWVUaW1lKHRpbWVbMl0pO1xuXG4gICAgICAvLyBBZGRpdGlvbmFsIGxpbmVzIC0gQ3VlIFRleHRcbiAgICAgIHRleHQgPSBbXTtcblxuICAgICAgLy8gTG9vcCB1bnRpbCBhIGJsYW5rIGxpbmUgb3IgZW5kIG9mIGxpbmVzXG4gICAgICAvLyBBc3N1bWVpbmcgdHJpbSgnJykgcmV0dXJucyBmYWxzZSBmb3IgYmxhbmsgbGluZXNcbiAgICAgIHdoaWxlIChsaW5lc1srK2ldICYmIChsaW5lID0gdmpzLnRyaW0obGluZXNbaV0pKSkge1xuICAgICAgICB0ZXh0LnB1c2gobGluZSk7XG4gICAgICB9XG5cbiAgICAgIGN1ZS50ZXh0ID0gdGV4dC5qb2luKCc8YnIvPicpO1xuXG4gICAgICAvLyBBZGQgdGhpcyBjdWVcbiAgICAgIHRoaXMuY3Vlc18ucHVzaChjdWUpO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMucmVhZHlTdGF0ZV8gPSAyO1xuICB0aGlzLnRyaWdnZXIoJ2xvYWRlZCcpO1xufTtcblxuXG52anMuVGV4dFRyYWNrLnByb3RvdHlwZS5wYXJzZUN1ZVRpbWUgPSBmdW5jdGlvbih0aW1lVGV4dCkge1xuICB2YXIgcGFydHMgPSB0aW1lVGV4dC5zcGxpdCgnOicpLFxuICAgICAgdGltZSA9IDAsXG4gICAgICBob3VycywgbWludXRlcywgb3RoZXIsIHNlY29uZHMsIG1zO1xuXG4gIC8vIENoZWNrIGlmIG9wdGlvbmFsIGhvdXJzIHBsYWNlIGlzIGluY2x1ZGVkXG4gIC8vIDAwOjAwOjAwLjAwMCB2cy4gMDA6MDAuMDAwXG4gIGlmIChwYXJ0cy5sZW5ndGggPT0gMykge1xuICAgIGhvdXJzID0gcGFydHNbMF07XG4gICAgbWludXRlcyA9IHBhcnRzWzFdO1xuICAgIG90aGVyID0gcGFydHNbMl07XG4gIH0gZWxzZSB7XG4gICAgaG91cnMgPSAwO1xuICAgIG1pbnV0ZXMgPSBwYXJ0c1swXTtcbiAgICBvdGhlciA9IHBhcnRzWzFdO1xuICB9XG5cbiAgLy8gQnJlYWsgb3RoZXIgKHNlY29uZHMsIG1pbGxpc2Vjb25kcywgYW5kIGZsYWdzKSBieSBzcGFjZXNcbiAgLy8gVE9ETzogTWFrZSBhZGRpdGlvbmFsIGN1ZSBsYXlvdXQgc2V0dGluZ3Mgd29yayB3aXRoIGZsYWdzXG4gIG90aGVyID0gb3RoZXIuc3BsaXQoL1xccysvKTtcbiAgLy8gUmVtb3ZlIHNlY29uZHMuIFNlY29uZHMgaXMgdGhlIGZpcnN0IHBhcnQgYmVmb3JlIGFueSBzcGFjZXMuXG4gIHNlY29uZHMgPSBvdGhlci5zcGxpY2UoMCwxKVswXTtcbiAgLy8gQ291bGQgdXNlIGVpdGhlciAuIG9yICwgZm9yIGRlY2ltYWxcbiAgc2Vjb25kcyA9IHNlY29uZHMuc3BsaXQoL1xcLnwsLyk7XG4gIC8vIEdldCBtaWxsaXNlY29uZHNcbiAgbXMgPSBwYXJzZUZsb2F0KHNlY29uZHNbMV0pO1xuICBzZWNvbmRzID0gc2Vjb25kc1swXTtcblxuICAvLyBob3VycyA9PiBzZWNvbmRzXG4gIHRpbWUgKz0gcGFyc2VGbG9hdChob3VycykgKiAzNjAwO1xuICAvLyBtaW51dGVzID0+IHNlY29uZHNcbiAgdGltZSArPSBwYXJzZUZsb2F0KG1pbnV0ZXMpICogNjA7XG4gIC8vIEFkZCBzZWNvbmRzXG4gIHRpbWUgKz0gcGFyc2VGbG9hdChzZWNvbmRzKTtcbiAgLy8gQWRkIG1pbGxpc2Vjb25kc1xuICBpZiAobXMpIHsgdGltZSArPSBtcy8xMDAwOyB9XG5cbiAgcmV0dXJuIHRpbWU7XG59O1xuXG4vLyBVcGRhdGUgYWN0aXZlIGN1ZXMgd2hlbmV2ZXIgdGltZXVwZGF0ZSBldmVudHMgYXJlIHRyaWdnZXJlZCBvbiB0aGUgcGxheWVyLlxudmpzLlRleHRUcmFjay5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgaWYgKHRoaXMuY3Vlc18ubGVuZ3RoID4gMCkge1xuXG4gICAgLy8gR2V0IGN1cnJlbnQgcGxheWVyIHRpbWUsIGFkanVzdCBmb3IgdHJhY2sgb2Zmc2V0XG4gICAgdmFyIG9mZnNldCA9IHRoaXMucGxheWVyXy5vcHRpb25zKClbJ3RyYWNrVGltZU9mZnNldCddIHx8IDA7XG4gICAgdmFyIHRpbWUgPSB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUoKSArIG9mZnNldDtcblxuICAgIC8vIENoZWNrIGlmIHRoZSBuZXcgdGltZSBpcyBvdXRzaWRlIHRoZSB0aW1lIGJveCBjcmVhdGVkIGJ5IHRoZSB0aGUgbGFzdCB1cGRhdGUuXG4gICAgaWYgKHRoaXMucHJldkNoYW5nZSA9PT0gdW5kZWZpbmVkIHx8IHRpbWUgPCB0aGlzLnByZXZDaGFuZ2UgfHwgdGhpcy5uZXh0Q2hhbmdlIDw9IHRpbWUpIHtcbiAgICAgIHZhciBjdWVzID0gdGhpcy5jdWVzXyxcblxuICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyB0aW1lIGJveCBmb3IgdGhpcyBzdGF0ZS5cbiAgICAgICAgICBuZXdOZXh0Q2hhbmdlID0gdGhpcy5wbGF5ZXJfLmR1cmF0aW9uKCksIC8vIFN0YXJ0IGF0IGJlZ2lubmluZyBvZiB0aGUgdGltZWxpbmVcbiAgICAgICAgICBuZXdQcmV2Q2hhbmdlID0gMCwgLy8gU3RhcnQgYXQgZW5kXG5cbiAgICAgICAgICByZXZlcnNlID0gZmFsc2UsIC8vIFNldCB0aGUgZGlyZWN0aW9uIG9mIHRoZSBsb29wIHRocm91Z2ggdGhlIGN1ZXMuIE9wdGltaXplZCB0aGUgY3VlIGNoZWNrLlxuICAgICAgICAgIG5ld0N1ZXMgPSBbXSwgLy8gU3RvcmUgbmV3IGFjdGl2ZSBjdWVzLlxuXG4gICAgICAgICAgLy8gU3RvcmUgd2hlcmUgaW4gdGhlIGxvb3AgdGhlIGN1cnJlbnQgYWN0aXZlIGN1ZXMgYXJlLCB0byBwcm92aWRlIGEgc21hcnQgc3RhcnRpbmcgcG9pbnQgZm9yIHRoZSBuZXh0IGxvb3AuXG4gICAgICAgICAgZmlyc3RBY3RpdmVJbmRleCwgbGFzdEFjdGl2ZUluZGV4LFxuICAgICAgICAgIGN1ZSwgaTsgLy8gTG9vcCB2YXJzXG5cbiAgICAgIC8vIENoZWNrIGlmIHRpbWUgaXMgZ29pbmcgZm9yd2FyZHMgb3IgYmFja3dhcmRzIChzY3J1YmJpbmcvcmV3aW5kaW5nKVxuICAgICAgLy8gSWYgd2Uga25vdyB0aGUgZGlyZWN0aW9uIHdlIGNhbiBvcHRpbWl6ZSB0aGUgc3RhcnRpbmcgcG9zaXRpb24gYW5kIGRpcmVjdGlvbiBvZiB0aGUgbG9vcCB0aHJvdWdoIHRoZSBjdWVzIGFycmF5LlxuICAgICAgaWYgKHRpbWUgPj0gdGhpcy5uZXh0Q2hhbmdlIHx8IHRoaXMubmV4dENoYW5nZSA9PT0gdW5kZWZpbmVkKSB7IC8vIE5leHRDaGFuZ2Ugc2hvdWxkIGhhcHBlblxuICAgICAgICAvLyBGb3J3YXJkcywgc28gc3RhcnQgYXQgdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBhY3RpdmUgY3VlIGFuZCBsb29wIGZvcndhcmRcbiAgICAgICAgaSA9ICh0aGlzLmZpcnN0QWN0aXZlSW5kZXggIT09IHVuZGVmaW5lZCkgPyB0aGlzLmZpcnN0QWN0aXZlSW5kZXggOiAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQmFja3dhcmRzLCBzbyBzdGFydCBhdCB0aGUgaW5kZXggb2YgdGhlIGxhc3QgYWN0aXZlIGN1ZSBhbmQgbG9vcCBiYWNrd2FyZFxuICAgICAgICByZXZlcnNlID0gdHJ1ZTtcbiAgICAgICAgaSA9ICh0aGlzLmxhc3RBY3RpdmVJbmRleCAhPT0gdW5kZWZpbmVkKSA/IHRoaXMubGFzdEFjdGl2ZUluZGV4IDogY3Vlcy5sZW5ndGggLSAxO1xuICAgICAgfVxuXG4gICAgICB3aGlsZSAodHJ1ZSkgeyAvLyBMb29wIHVudGlsIGJyb2tlblxuICAgICAgICBjdWUgPSBjdWVzW2ldO1xuXG4gICAgICAgIC8vIEN1ZSBlbmRlZCBhdCB0aGlzIHBvaW50XG4gICAgICAgIGlmIChjdWUuZW5kVGltZSA8PSB0aW1lKSB7XG4gICAgICAgICAgbmV3UHJldkNoYW5nZSA9IE1hdGgubWF4KG5ld1ByZXZDaGFuZ2UsIGN1ZS5lbmRUaW1lKTtcblxuICAgICAgICAgIGlmIChjdWUuYWN0aXZlKSB7XG4gICAgICAgICAgICBjdWUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTm8gZWFybGllciBjdWVzIHNob3VsZCBoYXZlIGFuIGFjdGl2ZSBzdGFydCB0aW1lLlxuICAgICAgICAgIC8vIE5ldmVybWluZC4gQXNzdW1lIGZpcnN0IGN1ZSBjb3VsZCBoYXZlIGEgZHVyYXRpb24gdGhlIHNhbWUgYXMgdGhlIHZpZGVvLlxuICAgICAgICAgIC8vIEluIHRoYXQgY2FzZSB3ZSBuZWVkIHRvIGxvb3AgYWxsIHRoZSB3YXkgYmFjayB0byB0aGUgYmVnaW5uaW5nLlxuICAgICAgICAgIC8vIGlmIChyZXZlcnNlICYmIGN1ZS5zdGFydFRpbWUpIHsgYnJlYWs7IH1cblxuICAgICAgICAvLyBDdWUgaGFzbid0IHN0YXJ0ZWRcbiAgICAgICAgfSBlbHNlIGlmICh0aW1lIDwgY3VlLnN0YXJ0VGltZSkge1xuICAgICAgICAgIG5ld05leHRDaGFuZ2UgPSBNYXRoLm1pbihuZXdOZXh0Q2hhbmdlLCBjdWUuc3RhcnRUaW1lKTtcblxuICAgICAgICAgIGlmIChjdWUuYWN0aXZlKSB7XG4gICAgICAgICAgICBjdWUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gTm8gbGF0ZXIgY3VlcyBzaG91bGQgaGF2ZSBhbiBhY3RpdmUgc3RhcnQgdGltZS5cbiAgICAgICAgICBpZiAoIXJldmVyc2UpIHsgYnJlYWs7IH1cblxuICAgICAgICAvLyBDdWUgaXMgY3VycmVudFxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgaWYgKHJldmVyc2UpIHtcbiAgICAgICAgICAgIC8vIEFkZCBjdWUgdG8gZnJvbnQgb2YgYXJyYXkgdG8ga2VlcCBpbiB0aW1lIG9yZGVyXG4gICAgICAgICAgICBuZXdDdWVzLnNwbGljZSgwLDAsY3VlKTtcblxuICAgICAgICAgICAgLy8gSWYgaW4gcmV2ZXJzZSwgdGhlIGZpcnN0IGN1cnJlbnQgY3VlIGlzIG91ciBsYXN0QWN0aXZlQ3VlXG4gICAgICAgICAgICBpZiAobGFzdEFjdGl2ZUluZGV4ID09PSB1bmRlZmluZWQpIHsgbGFzdEFjdGl2ZUluZGV4ID0gaTsgfVxuICAgICAgICAgICAgZmlyc3RBY3RpdmVJbmRleCA9IGk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEFkZCBjdWUgdG8gZW5kIG9mIGFycmF5XG4gICAgICAgICAgICBuZXdDdWVzLnB1c2goY3VlKTtcblxuICAgICAgICAgICAgLy8gSWYgZm9yd2FyZCwgdGhlIGZpcnN0IGN1cnJlbnQgY3VlIGlzIG91ciBmaXJzdEFjdGl2ZUluZGV4XG4gICAgICAgICAgICBpZiAoZmlyc3RBY3RpdmVJbmRleCA9PT0gdW5kZWZpbmVkKSB7IGZpcnN0QWN0aXZlSW5kZXggPSBpOyB9XG4gICAgICAgICAgICBsYXN0QWN0aXZlSW5kZXggPSBpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5ld05leHRDaGFuZ2UgPSBNYXRoLm1pbihuZXdOZXh0Q2hhbmdlLCBjdWUuZW5kVGltZSk7XG4gICAgICAgICAgbmV3UHJldkNoYW5nZSA9IE1hdGgubWF4KG5ld1ByZXZDaGFuZ2UsIGN1ZS5zdGFydFRpbWUpO1xuXG4gICAgICAgICAgY3VlLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocmV2ZXJzZSkge1xuICAgICAgICAgIC8vIFJldmVyc2UgZG93biB0aGUgYXJyYXkgb2YgY3VlcywgYnJlYWsgaWYgYXQgZmlyc3RcbiAgICAgICAgICBpZiAoaSA9PT0gMCkgeyBicmVhazsgfSBlbHNlIHsgaS0tOyB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gV2FsayB1cCB0aGUgYXJyYXkgZm8gY3VlcywgYnJlYWsgaWYgYXQgbGFzdFxuICAgICAgICAgIGlmIChpID09PSBjdWVzLmxlbmd0aCAtIDEpIHsgYnJlYWs7IH0gZWxzZSB7IGkrKzsgfVxuICAgICAgICB9XG5cbiAgICAgIH1cblxuICAgICAgdGhpcy5hY3RpdmVDdWVzXyA9IG5ld0N1ZXM7XG4gICAgICB0aGlzLm5leHRDaGFuZ2UgPSBuZXdOZXh0Q2hhbmdlO1xuICAgICAgdGhpcy5wcmV2Q2hhbmdlID0gbmV3UHJldkNoYW5nZTtcbiAgICAgIHRoaXMuZmlyc3RBY3RpdmVJbmRleCA9IGZpcnN0QWN0aXZlSW5kZXg7XG4gICAgICB0aGlzLmxhc3RBY3RpdmVJbmRleCA9IGxhc3RBY3RpdmVJbmRleDtcblxuICAgICAgdGhpcy51cGRhdGVEaXNwbGF5KCk7XG5cbiAgICAgIHRoaXMudHJpZ2dlcignY3VlY2hhbmdlJyk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBBZGQgY3VlIEhUTUwgdG8gZGlzcGxheVxudmpzLlRleHRUcmFjay5wcm90b3R5cGUudXBkYXRlRGlzcGxheSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBjdWVzID0gdGhpcy5hY3RpdmVDdWVzXyxcbiAgICAgIGh0bWwgPSAnJyxcbiAgICAgIGk9MCxqPWN1ZXMubGVuZ3RoO1xuXG4gIGZvciAoO2k8ajtpKyspIHtcbiAgICBodG1sICs9ICc8c3BhbiBjbGFzcz1cInZqcy10dC1jdWVcIj4nK2N1ZXNbaV0udGV4dCsnPC9zcGFuPic7XG4gIH1cblxuICB0aGlzLmVsXy5pbm5lckhUTUwgPSBodG1sO1xufTtcblxuLy8gU2V0IGFsbCBsb29wIGhlbHBlciB2YWx1ZXMgYmFja1xudmpzLlRleHRUcmFjay5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpe1xuICB0aGlzLm5leHRDaGFuZ2UgPSAwO1xuICB0aGlzLnByZXZDaGFuZ2UgPSB0aGlzLnBsYXllcl8uZHVyYXRpb24oKTtcbiAgdGhpcy5maXJzdEFjdGl2ZUluZGV4ID0gMDtcbiAgdGhpcy5sYXN0QWN0aXZlSW5kZXggPSAwO1xufTtcblxuLy8gQ3JlYXRlIHNwZWNpZmljIHRyYWNrIHR5cGVzXG4vKipcbiAqIFRoZSB0cmFjayBjb21wb25lbnQgZm9yIG1hbmFnaW5nIHRoZSBoaWRpbmcgYW5kIHNob3dpbmcgb2YgY2FwdGlvbnNcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkNhcHRpb25zVHJhY2sgPSB2anMuVGV4dFRyYWNrLmV4dGVuZCgpO1xudmpzLkNhcHRpb25zVHJhY2sucHJvdG90eXBlLmtpbmRfID0gJ2NhcHRpb25zJztcbi8vIEV4cG9ydGluZyBoZXJlIGJlY2F1c2UgVHJhY2sgY3JlYXRpb24gcmVxdWlyZXMgdGhlIHRyYWNrIGtpbmRcbi8vIHRvIGJlIGF2YWlsYWJsZSBvbiBnbG9iYWwgb2JqZWN0LiBlLmcuIG5ldyB3aW5kb3dbJ3ZpZGVvanMnXVtLaW5kICsgJ1RyYWNrJ11cblxuLyoqXG4gKiBUaGUgdHJhY2sgY29tcG9uZW50IGZvciBtYW5hZ2luZyB0aGUgaGlkaW5nIGFuZCBzaG93aW5nIG9mIHN1YnRpdGxlc1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuU3VidGl0bGVzVHJhY2sgPSB2anMuVGV4dFRyYWNrLmV4dGVuZCgpO1xudmpzLlN1YnRpdGxlc1RyYWNrLnByb3RvdHlwZS5raW5kXyA9ICdzdWJ0aXRsZXMnO1xuXG4vKipcbiAqIFRoZSB0cmFjayBjb21wb25lbnQgZm9yIG1hbmFnaW5nIHRoZSBoaWRpbmcgYW5kIHNob3dpbmcgb2YgY2hhcHRlcnNcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkNoYXB0ZXJzVHJhY2sgPSB2anMuVGV4dFRyYWNrLmV4dGVuZCgpO1xudmpzLkNoYXB0ZXJzVHJhY2sucHJvdG90eXBlLmtpbmRfID0gJ2NoYXB0ZXJzJztcblxuXG4vKiBUZXh0IFRyYWNrIERpc3BsYXlcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4vLyBHbG9iYWwgY29udGFpbmVyIGZvciBib3RoIHN1YnRpdGxlIGFuZCBjYXB0aW9ucyB0ZXh0LiBTaW1wbGUgZGl2IGNvbnRhaW5lci5cblxuLyoqXG4gKiBUaGUgY29tcG9uZW50IGZvciBkaXNwbGF5aW5nIHRleHQgdHJhY2sgY3Vlc1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVGV4dFRyYWNrRGlzcGxheSA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KXtcbiAgICB2anMuQ29tcG9uZW50LmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zLCByZWFkeSk7XG5cbiAgICAvLyBUaGlzIHVzZWQgdG8gYmUgY2FsbGVkIGR1cmluZyBwbGF5ZXIgaW5pdCwgYnV0IHdhcyBjYXVzaW5nIGFuIGVycm9yXG4gICAgLy8gaWYgYSB0cmFjayBzaG91bGQgc2hvdyBieSBkZWZhdWx0IGFuZCB0aGUgZGlzcGxheSBoYWRuJ3QgbG9hZGVkIHlldC5cbiAgICAvLyBTaG91bGQgcHJvYmFibHkgYmUgbW92ZWQgdG8gYW4gZXh0ZXJuYWwgdHJhY2sgbG9hZGVyIHdoZW4gd2Ugc3VwcG9ydFxuICAgIC8vIHRyYWNrcyB0aGF0IGRvbid0IG5lZWQgYSBkaXNwbGF5LlxuICAgIGlmIChwbGF5ZXIub3B0aW9uc19bJ3RyYWNrcyddICYmIHBsYXllci5vcHRpb25zX1sndHJhY2tzJ10ubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5wbGF5ZXJfLmFkZFRleHRUcmFja3MocGxheWVyLm9wdGlvbnNfWyd0cmFja3MnXSk7XG4gICAgfVxuICB9XG59KTtcblxudmpzLlRleHRUcmFja0Rpc3BsYXkucHJvdG90eXBlLmNyZWF0ZUVsID0gZnVuY3Rpb24oKXtcbiAgcmV0dXJuIHZqcy5Db21wb25lbnQucHJvdG90eXBlLmNyZWF0ZUVsLmNhbGwodGhpcywgJ2RpdicsIHtcbiAgICBjbGFzc05hbWU6ICd2anMtdGV4dC10cmFjay1kaXNwbGF5J1xuICB9KTtcbn07XG5cblxuLyoqXG4gKiBUaGUgc3BlY2lmaWMgbWVudSBpdGVtIHR5cGUgZm9yIHNlbGVjdGluZyBhIGxhbmd1YWdlIHdpdGhpbiBhIHRleHQgdHJhY2sga2luZFxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuVGV4dFRyYWNrTWVudUl0ZW0gPSB2anMuTWVudUl0ZW0uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIHZhciB0cmFjayA9IHRoaXMudHJhY2sgPSBvcHRpb25zWyd0cmFjayddO1xuXG4gICAgLy8gTW9kaWZ5IG9wdGlvbnMgZm9yIHBhcmVudCBNZW51SXRlbSBjbGFzcydzIGluaXQuXG4gICAgb3B0aW9uc1snbGFiZWwnXSA9IHRyYWNrLmxhYmVsKCk7XG4gICAgb3B0aW9uc1snc2VsZWN0ZWQnXSA9IHRyYWNrLmRmbHQoKTtcbiAgICB2anMuTWVudUl0ZW0uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5wbGF5ZXJfLm9uKHRyYWNrLmtpbmQoKSArICd0cmFja2NoYW5nZScsIHZqcy5iaW5kKHRoaXMsIHRoaXMudXBkYXRlKSk7XG4gIH1cbn0pO1xuXG52anMuVGV4dFRyYWNrTWVudUl0ZW0ucHJvdG90eXBlLm9uQ2xpY2sgPSBmdW5jdGlvbigpe1xuICB2anMuTWVudUl0ZW0ucHJvdG90eXBlLm9uQ2xpY2suY2FsbCh0aGlzKTtcbiAgdGhpcy5wbGF5ZXJfLnNob3dUZXh0VHJhY2sodGhpcy50cmFjay5pZF8sIHRoaXMudHJhY2sua2luZCgpKTtcbn07XG5cbnZqcy5UZXh0VHJhY2tNZW51SXRlbS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oKXtcbiAgdGhpcy5zZWxlY3RlZCh0aGlzLnRyYWNrLm1vZGUoKSA9PSAyKTtcbn07XG5cbi8qKlxuICogQSBzcGVjaWFsIG1lbnUgaXRlbSBmb3IgdHVybmluZyBvZiBhIHNwZWNpZmljIHR5cGUgb2YgdGV4dCB0cmFja1xuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuT2ZmVGV4dFRyYWNrTWVudUl0ZW0gPSB2anMuVGV4dFRyYWNrTWVudUl0ZW0uZXh0ZW5kKHtcbiAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuICAgIC8vIENyZWF0ZSBwc2V1ZG8gdHJhY2sgaW5mb1xuICAgIC8vIFJlcXVpcmVzIG9wdGlvbnNbJ2tpbmQnXVxuICAgIG9wdGlvbnNbJ3RyYWNrJ10gPSB7XG4gICAgICBraW5kOiBmdW5jdGlvbigpIHsgcmV0dXJuIG9wdGlvbnNbJ2tpbmQnXTsgfSxcbiAgICAgIHBsYXllcjogcGxheWVyLFxuICAgICAgbGFiZWw6IGZ1bmN0aW9uKCl7IHJldHVybiBvcHRpb25zWydraW5kJ10gKyAnIG9mZic7IH0sXG4gICAgICBkZmx0OiBmdW5jdGlvbigpeyByZXR1cm4gZmFsc2U7IH0sXG4gICAgICBtb2RlOiBmdW5jdGlvbigpeyByZXR1cm4gZmFsc2U7IH1cbiAgICB9O1xuICAgIHZqcy5UZXh0VHJhY2tNZW51SXRlbS5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucyk7XG4gICAgdGhpcy5zZWxlY3RlZCh0cnVlKTtcbiAgfVxufSk7XG5cbnZqcy5PZmZUZXh0VHJhY2tNZW51SXRlbS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5UZXh0VHJhY2tNZW51SXRlbS5wcm90b3R5cGUub25DbGljay5jYWxsKHRoaXMpO1xuICB0aGlzLnBsYXllcl8uc2hvd1RleHRUcmFjayh0aGlzLnRyYWNrLmlkXywgdGhpcy50cmFjay5raW5kKCkpO1xufTtcblxudmpzLk9mZlRleHRUcmFja01lbnVJdGVtLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpe1xuICB2YXIgdHJhY2tzID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKSxcbiAgICAgIGk9MCwgaj10cmFja3MubGVuZ3RoLCB0cmFjayxcbiAgICAgIG9mZiA9IHRydWU7XG5cbiAgZm9yICg7aTxqO2krKykge1xuICAgIHRyYWNrID0gdHJhY2tzW2ldO1xuICAgIGlmICh0cmFjay5raW5kKCkgPT0gdGhpcy50cmFjay5raW5kKCkgJiYgdHJhY2subW9kZSgpID09IDIpIHtcbiAgICAgIG9mZiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMuc2VsZWN0ZWQob2ZmKTtcbn07XG5cbi8qKlxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGJ1dHRvbnMgdGhhdCB0b2dnbGUgc3BlY2lmaWMgdGV4dCB0cmFjayB0eXBlcyAoZS5nLiBzdWJ0aXRsZXMpXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5UZXh0VHJhY2tCdXR0b24gPSB2anMuTWVudUJ1dHRvbi5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucyl7XG4gICAgdmpzLk1lbnVCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHRoaXMuaXRlbXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfVxufSk7XG5cbi8vIHZqcy5UZXh0VHJhY2tCdXR0b24ucHJvdG90eXBlLmJ1dHRvblByZXNzZWQgPSBmYWxzZTtcblxuLy8gdmpzLlRleHRUcmFja0J1dHRvbi5wcm90b3R5cGUuY3JlYXRlTWVudSA9IGZ1bmN0aW9uKCl7XG4vLyAgIHZhciBtZW51ID0gbmV3IHZqcy5NZW51KHRoaXMucGxheWVyXyk7XG5cbi8vICAgLy8gQWRkIGEgdGl0bGUgbGlzdCBpdGVtIHRvIHRoZSB0b3Bcbi8vICAgLy8gbWVudS5lbCgpLmFwcGVuZENoaWxkKHZqcy5jcmVhdGVFbCgnbGknLCB7XG4vLyAgIC8vICAgY2xhc3NOYW1lOiAndmpzLW1lbnUtdGl0bGUnLFxuLy8gICAvLyAgIGlubmVySFRNTDogdmpzLmNhcGl0YWxpemUodGhpcy5raW5kXyksXG4vLyAgIC8vICAgdGFiaW5kZXg6IC0xXG4vLyAgIC8vIH0pKTtcblxuLy8gICB0aGlzLml0ZW1zID0gdGhpcy5jcmVhdGVJdGVtcygpO1xuXG4vLyAgIC8vIEFkZCBtZW51IGl0ZW1zIHRvIHRoZSBtZW51XG4vLyAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pdGVtcy5sZW5ndGg7IGkrKykge1xuLy8gICAgIG1lbnUuYWRkSXRlbSh0aGlzLml0ZW1zW2ldKTtcbi8vICAgfVxuXG4vLyAgIC8vIEFkZCBsaXN0IHRvIGVsZW1lbnRcbi8vICAgdGhpcy5hZGRDaGlsZChtZW51KTtcblxuLy8gICByZXR1cm4gbWVudTtcbi8vIH07XG5cbi8vIENyZWF0ZSBhIG1lbnUgaXRlbSBmb3IgZWFjaCB0ZXh0IHRyYWNrXG52anMuVGV4dFRyYWNrQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVJdGVtcyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBpdGVtcyA9IFtdLCB0cmFjaztcblxuICAvLyBBZGQgYW4gT0ZGIG1lbnUgaXRlbSB0byB0dXJuIGFsbCB0cmFja3Mgb2ZmXG4gIGl0ZW1zLnB1c2gobmV3IHZqcy5PZmZUZXh0VHJhY2tNZW51SXRlbSh0aGlzLnBsYXllcl8sIHsgJ2tpbmQnOiB0aGlzLmtpbmRfIH0pKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCkubGVuZ3RoOyBpKyspIHtcbiAgICB0cmFjayA9IHRoaXMucGxheWVyXy50ZXh0VHJhY2tzKClbaV07XG4gICAgaWYgKHRyYWNrLmtpbmQoKSA9PT0gdGhpcy5raW5kXykge1xuICAgICAgaXRlbXMucHVzaChuZXcgdmpzLlRleHRUcmFja01lbnVJdGVtKHRoaXMucGxheWVyXywge1xuICAgICAgICAndHJhY2snOiB0cmFja1xuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpdGVtcztcbn07XG5cbi8qKlxuICogVGhlIGJ1dHRvbiBjb21wb25lbnQgZm9yIHRvZ2dsaW5nIGFuZCBzZWxlY3RpbmcgY2FwdGlvbnNcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkNhcHRpb25zQnV0dG9uID0gdmpzLlRleHRUcmFja0J1dHRvbi5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpe1xuICAgIHZqcy5UZXh0VHJhY2tCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KTtcbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCdDYXB0aW9ucyBNZW51Jyk7XG4gIH1cbn0pO1xudmpzLkNhcHRpb25zQnV0dG9uLnByb3RvdHlwZS5raW5kXyA9ICdjYXB0aW9ucyc7XG52anMuQ2FwdGlvbnNCdXR0b24ucHJvdG90eXBlLmJ1dHRvblRleHQgPSAnQ2FwdGlvbnMnO1xudmpzLkNhcHRpb25zQnV0dG9uLnByb3RvdHlwZS5jbGFzc05hbWUgPSAndmpzLWNhcHRpb25zLWJ1dHRvbic7XG5cbi8qKlxuICogVGhlIGJ1dHRvbiBjb21wb25lbnQgZm9yIHRvZ2dsaW5nIGFuZCBzZWxlY3Rpbmcgc3VidGl0bGVzXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZqcy5TdWJ0aXRsZXNCdXR0b24gPSB2anMuVGV4dFRyYWNrQnV0dG9uLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zLCByZWFkeSl7XG4gICAgdmpzLlRleHRUcmFja0J1dHRvbi5jYWxsKHRoaXMsIHBsYXllciwgb3B0aW9ucywgcmVhZHkpO1xuICAgIHRoaXMuZWxfLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsJ1N1YnRpdGxlcyBNZW51Jyk7XG4gIH1cbn0pO1xudmpzLlN1YnRpdGxlc0J1dHRvbi5wcm90b3R5cGUua2luZF8gPSAnc3VidGl0bGVzJztcbnZqcy5TdWJ0aXRsZXNCdXR0b24ucHJvdG90eXBlLmJ1dHRvblRleHQgPSAnU3VidGl0bGVzJztcbnZqcy5TdWJ0aXRsZXNCdXR0b24ucHJvdG90eXBlLmNsYXNzTmFtZSA9ICd2anMtc3VidGl0bGVzLWJ1dHRvbic7XG5cbi8vIENoYXB0ZXJzIGFjdCBtdWNoIGRpZmZlcmVudGx5IHRoYW4gb3RoZXIgdGV4dCB0cmFja3Ncbi8vIEN1ZXMgYXJlIG5hdmlnYXRpb24gdnMuIG90aGVyIHRyYWNrcyBvZiBhbHRlcm5hdGl2ZSBsYW5ndWFnZXNcbi8qKlxuICogVGhlIGJ1dHRvbiBjb21wb25lbnQgZm9yIHRvZ2dsaW5nIGFuZCBzZWxlY3RpbmcgY2hhcHRlcnNcbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqL1xudmpzLkNoYXB0ZXJzQnV0dG9uID0gdmpzLlRleHRUcmFja0J1dHRvbi5leHRlbmQoe1xuICAvKiogQGNvbnN0cnVjdG9yICovXG4gIGluaXQ6IGZ1bmN0aW9uKHBsYXllciwgb3B0aW9ucywgcmVhZHkpe1xuICAgIHZqcy5UZXh0VHJhY2tCdXR0b24uY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMsIHJlYWR5KTtcbiAgICB0aGlzLmVsXy5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCdDaGFwdGVycyBNZW51Jyk7XG4gIH1cbn0pO1xudmpzLkNoYXB0ZXJzQnV0dG9uLnByb3RvdHlwZS5raW5kXyA9ICdjaGFwdGVycyc7XG52anMuQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmJ1dHRvblRleHQgPSAnQ2hhcHRlcnMnO1xudmpzLkNoYXB0ZXJzQnV0dG9uLnByb3RvdHlwZS5jbGFzc05hbWUgPSAndmpzLWNoYXB0ZXJzLWJ1dHRvbic7XG5cbi8vIENyZWF0ZSBhIG1lbnUgaXRlbSBmb3IgZWFjaCB0ZXh0IHRyYWNrXG52anMuQ2hhcHRlcnNCdXR0b24ucHJvdG90eXBlLmNyZWF0ZUl0ZW1zID0gZnVuY3Rpb24oKXtcbiAgdmFyIGl0ZW1zID0gW10sIHRyYWNrO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKS5sZW5ndGg7IGkrKykge1xuICAgIHRyYWNrID0gdGhpcy5wbGF5ZXJfLnRleHRUcmFja3MoKVtpXTtcbiAgICBpZiAodHJhY2sua2luZCgpID09PSB0aGlzLmtpbmRfKSB7XG4gICAgICBpdGVtcy5wdXNoKG5ldyB2anMuVGV4dFRyYWNrTWVudUl0ZW0odGhpcy5wbGF5ZXJfLCB7XG4gICAgICAgICd0cmFjayc6IHRyYWNrXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGl0ZW1zO1xufTtcblxudmpzLkNoYXB0ZXJzQnV0dG9uLnByb3RvdHlwZS5jcmVhdGVNZW51ID0gZnVuY3Rpb24oKXtcbiAgdmFyIHRyYWNrcyA9IHRoaXMucGxheWVyXy50ZXh0VHJhY2tzKCksXG4gICAgICBpID0gMCxcbiAgICAgIGogPSB0cmFja3MubGVuZ3RoLFxuICAgICAgdHJhY2ssIGNoYXB0ZXJzVHJhY2ssXG4gICAgICBpdGVtcyA9IHRoaXMuaXRlbXMgPSBbXTtcblxuICBmb3IgKDtpPGo7aSsrKSB7XG4gICAgdHJhY2sgPSB0cmFja3NbaV07XG4gICAgaWYgKHRyYWNrLmtpbmQoKSA9PSB0aGlzLmtpbmRfKSB7XG4gICAgICBpZiAodHJhY2sucmVhZHlTdGF0ZSgpID09PSAwKSB7XG4gICAgICAgIHRyYWNrLmxvYWQoKTtcbiAgICAgICAgdHJhY2sub24oJ2xvYWRlZCcsIHZqcy5iaW5kKHRoaXMsIHRoaXMuY3JlYXRlTWVudSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hhcHRlcnNUcmFjayA9IHRyYWNrO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgbWVudSA9IHRoaXMubWVudTtcbiAgaWYgKG1lbnUgPT09IHVuZGVmaW5lZCkge1xuICAgIG1lbnUgPSBuZXcgdmpzLk1lbnUodGhpcy5wbGF5ZXJfKTtcbiAgICBtZW51LmNvbnRlbnRFbCgpLmFwcGVuZENoaWxkKHZqcy5jcmVhdGVFbCgnbGknLCB7XG4gICAgICBjbGFzc05hbWU6ICd2anMtbWVudS10aXRsZScsXG4gICAgICBpbm5lckhUTUw6IHZqcy5jYXBpdGFsaXplKHRoaXMua2luZF8pLFxuICAgICAgdGFiaW5kZXg6IC0xXG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKGNoYXB0ZXJzVHJhY2spIHtcbiAgICB2YXIgY3VlcyA9IGNoYXB0ZXJzVHJhY2suY3Vlc18sIGN1ZSwgbWk7XG4gICAgaSA9IDA7XG4gICAgaiA9IGN1ZXMubGVuZ3RoO1xuXG4gICAgZm9yICg7aTxqO2krKykge1xuICAgICAgY3VlID0gY3Vlc1tpXTtcblxuICAgICAgbWkgPSBuZXcgdmpzLkNoYXB0ZXJzVHJhY2tNZW51SXRlbSh0aGlzLnBsYXllcl8sIHtcbiAgICAgICAgJ3RyYWNrJzogY2hhcHRlcnNUcmFjayxcbiAgICAgICAgJ2N1ZSc6IGN1ZVxuICAgICAgfSk7XG5cbiAgICAgIGl0ZW1zLnB1c2gobWkpO1xuXG4gICAgICBtZW51LmFkZENoaWxkKG1pKTtcbiAgICB9XG4gICAgdGhpcy5hZGRDaGlsZChtZW51KTtcbiAgfVxuXG4gIGlmICh0aGlzLml0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICB0aGlzLnNob3coKTtcbiAgfVxuXG4gIHJldHVybiBtZW51O1xufTtcblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICovXG52anMuQ2hhcHRlcnNUcmFja01lbnVJdGVtID0gdmpzLk1lbnVJdGVtLmV4dGVuZCh7XG4gIC8qKiBAY29uc3RydWN0b3IgKi9cbiAgaW5pdDogZnVuY3Rpb24ocGxheWVyLCBvcHRpb25zKXtcbiAgICB2YXIgdHJhY2sgPSB0aGlzLnRyYWNrID0gb3B0aW9uc1sndHJhY2snXSxcbiAgICAgICAgY3VlID0gdGhpcy5jdWUgPSBvcHRpb25zWydjdWUnXSxcbiAgICAgICAgY3VycmVudFRpbWUgPSBwbGF5ZXIuY3VycmVudFRpbWUoKTtcblxuICAgIC8vIE1vZGlmeSBvcHRpb25zIGZvciBwYXJlbnQgTWVudUl0ZW0gY2xhc3MncyBpbml0LlxuICAgIG9wdGlvbnNbJ2xhYmVsJ10gPSBjdWUudGV4dDtcbiAgICBvcHRpb25zWydzZWxlY3RlZCddID0gKGN1ZS5zdGFydFRpbWUgPD0gY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCBjdWUuZW5kVGltZSk7XG4gICAgdmpzLk1lbnVJdGVtLmNhbGwodGhpcywgcGxheWVyLCBvcHRpb25zKTtcblxuICAgIHRyYWNrLm9uKCdjdWVjaGFuZ2UnLCB2anMuYmluZCh0aGlzLCB0aGlzLnVwZGF0ZSkpO1xuICB9XG59KTtcblxudmpzLkNoYXB0ZXJzVHJhY2tNZW51SXRlbS5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uKCl7XG4gIHZqcy5NZW51SXRlbS5wcm90b3R5cGUub25DbGljay5jYWxsKHRoaXMpO1xuICB0aGlzLnBsYXllcl8uY3VycmVudFRpbWUodGhpcy5jdWUuc3RhcnRUaW1lKTtcbiAgdGhpcy51cGRhdGUodGhpcy5jdWUuc3RhcnRUaW1lKTtcbn07XG5cbnZqcy5DaGFwdGVyc1RyYWNrTWVudUl0ZW0ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCl7XG4gIHZhciBjdWUgPSB0aGlzLmN1ZSxcbiAgICAgIGN1cnJlbnRUaW1lID0gdGhpcy5wbGF5ZXJfLmN1cnJlbnRUaW1lKCk7XG5cbiAgLy8gdmpzLmxvZyhjdXJyZW50VGltZSwgY3VlLnN0YXJ0VGltZSk7XG4gIHRoaXMuc2VsZWN0ZWQoY3VlLnN0YXJ0VGltZSA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGN1ZS5lbmRUaW1lKTtcbn07XG5cbi8vIEFkZCBCdXR0b25zIHRvIGNvbnRyb2xCYXJcbnZqcy5vYmoubWVyZ2UodmpzLkNvbnRyb2xCYXIucHJvdG90eXBlLm9wdGlvbnNfWydjaGlsZHJlbiddLCB7XG4gICdzdWJ0aXRsZXNCdXR0b24nOiB7fSxcbiAgJ2NhcHRpb25zQnV0dG9uJzoge30sXG4gICdjaGFwdGVyc0J1dHRvbic6IHt9XG59KTtcblxuLy8gdmpzLkN1ZSA9IHZqcy5Db21wb25lbnQuZXh0ZW5kKHtcbi8vICAgLyoqIEBjb25zdHJ1Y3RvciAqL1xuLy8gICBpbml0OiBmdW5jdGlvbihwbGF5ZXIsIG9wdGlvbnMpe1xuLy8gICAgIHZqcy5Db21wb25lbnQuY2FsbCh0aGlzLCBwbGF5ZXIsIG9wdGlvbnMpO1xuLy8gICB9XG4vLyB9KTtcbi8qKlxuICogQGZpbGVvdmVydmlldyBBZGQgSlNPTiBzdXBwb3J0XG4gKiBAc3VwcHJlc3Mge3VuZGVmaW5lZFZhcnN9XG4gKiAoQ29tcGlsZXIgZG9lc24ndCBsaWtlIEpTT04gbm90IGJlaW5nIGRlY2xhcmVkKVxuICovXG5cbi8qKlxuICogSmF2YXNjcmlwdCBKU09OIGltcGxlbWVudGF0aW9uXG4gKiAoUGFyc2UgTWV0aG9kIE9ubHkpXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZG91Z2xhc2Nyb2NrZm9yZC9KU09OLWpzL2Jsb2IvbWFzdGVyL2pzb24yLmpzXG4gKiBPbmx5IHVzaW5nIGZvciBwYXJzZSBtZXRob2Qgd2hlbiBwYXJzaW5nIGRhdGEtc2V0dXAgYXR0cmlidXRlIEpTT04uXG4gKiBAc3VwcHJlc3Mge3VuZGVmaW5lZFZhcnN9XG4gKiBAbmFtZXNwYWNlXG4gKiBAcHJpdmF0ZVxuICovXG52anMuSlNPTjtcblxuaWYgKHR5cGVvZiB3aW5kb3cuSlNPTiAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LkpTT04ucGFyc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgdmpzLkpTT04gPSB3aW5kb3cuSlNPTjtcblxufSBlbHNlIHtcbiAgdmpzLkpTT04gPSB7fTtcblxuICB2YXIgY3ggPSAvW1xcdTAwMDBcXHUwMGFkXFx1MDYwMC1cXHUwNjA0XFx1MDcwZlxcdTE3YjRcXHUxN2I1XFx1MjAwYy1cXHUyMDBmXFx1MjAyOC1cXHUyMDJmXFx1MjA2MC1cXHUyMDZmXFx1ZmVmZlxcdWZmZjAtXFx1ZmZmZl0vZztcblxuICAvKipcbiAgICogcGFyc2UgdGhlIGpzb25cbiAgICpcbiAgICogQG1lbWJlcm9mIHZqcy5KU09OXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IFRoZSBKU09OIHN0cmluZyB0byBwYXJzZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPX0gW3Jldml2ZXJdIE9wdGlvbmFsIGZ1bmN0aW9uIHRoYXQgY2FuIHRyYW5zZm9ybSB0aGUgcmVzdWx0c1xuICAgKiBAcmV0dXJuIHtPYmplY3R8QXJyYXl9IFRoZSBwYXJzZWQgSlNPTlxuICAgKi9cbiAgdmpzLkpTT04ucGFyc2UgPSBmdW5jdGlvbiAodGV4dCwgcmV2aXZlcikge1xuICAgICAgdmFyIGo7XG5cbiAgICAgIGZ1bmN0aW9uIHdhbGsoaG9sZGVyLCBrZXkpIHtcbiAgICAgICAgICB2YXIgaywgdiwgdmFsdWUgPSBob2xkZXJba2V5XTtcbiAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICBmb3IgKGsgaW4gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodmFsdWUsIGspKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdiA9IHdhbGsodmFsdWUsIGspO1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVba10gPSB2O1xuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtrXTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJldml2ZXIuY2FsbChob2xkZXIsIGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgdGV4dCA9IFN0cmluZyh0ZXh0KTtcbiAgICAgIGN4Lmxhc3RJbmRleCA9IDA7XG4gICAgICBpZiAoY3gudGVzdCh0ZXh0KSkge1xuICAgICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UoY3gsIGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgIHJldHVybiAnXFxcXHUnICtcbiAgICAgICAgICAgICAgICAgICgnMDAwMCcgKyBhLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS5zbGljZSgtNCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICgvXltcXF0sOnt9XFxzXSokL1xuICAgICAgICAgICAgICAudGVzdCh0ZXh0LnJlcGxhY2UoL1xcXFwoPzpbXCJcXFxcXFwvYmZucnRdfHVbMC05YS1mQS1GXXs0fSkvZywgJ0AnKVxuICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1wiW15cIlxcXFxcXG5cXHJdKlwifHRydWV8ZmFsc2V8bnVsbHwtP1xcZCsoPzpcXC5cXGQqKT8oPzpbZUVdWytcXC1dP1xcZCspPy9nLCAnXScpXG4gICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKD86Xnw6fCwpKD86XFxzKlxcWykrL2csICcnKSkpIHtcblxuICAgICAgICAgIGogPSBldmFsKCcoJyArIHRleHQgKyAnKScpO1xuXG4gICAgICAgICAgcmV0dXJuIHR5cGVvZiByZXZpdmVyID09PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgICAgd2Fsayh7Jyc6IGp9LCAnJykgOiBqO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoJ0pTT04ucGFyc2UoKTogaW52YWxpZCBvciBtYWxmb3JtZWQgSlNPTiBkYXRhJyk7XG4gIH07XG59XG4vKipcbiAqIEBmaWxlb3ZlcnZpZXcgRnVuY3Rpb25zIGZvciBhdXRvbWF0aWNhbGx5IHNldHRpbmcgdXAgYSBwbGF5ZXJcbiAqIGJhc2VkIG9uIHRoZSBkYXRhLXNldHVwIGF0dHJpYnV0ZSBvZiB0aGUgdmlkZW8gdGFnXG4gKi9cblxuLy8gQXV0b21hdGljYWxseSBzZXQgdXAgYW55IHRhZ3MgdGhhdCBoYXZlIGEgZGF0YS1zZXR1cCBhdHRyaWJ1dGVcbnZqcy5hdXRvU2V0dXAgPSBmdW5jdGlvbigpe1xuICB2YXIgb3B0aW9ucywgdmlkLCBwbGF5ZXIsXG4gICAgICB2aWRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ3ZpZGVvJyk7XG5cbiAgLy8gQ2hlY2sgaWYgYW55IG1lZGlhIGVsZW1lbnRzIGV4aXN0XG4gIGlmICh2aWRzICYmIHZpZHMubGVuZ3RoID4gMCkge1xuXG4gICAgZm9yICh2YXIgaT0wLGo9dmlkcy5sZW5ndGg7IGk8ajsgaSsrKSB7XG4gICAgICB2aWQgPSB2aWRzW2ldO1xuXG4gICAgICAvLyBDaGVjayBpZiBlbGVtZW50IGV4aXN0cywgaGFzIGdldEF0dHJpYnV0ZSBmdW5jLlxuICAgICAgLy8gSUUgc2VlbXMgdG8gY29uc2lkZXIgdHlwZW9mIGVsLmdldEF0dHJpYnV0ZSA9PSAnb2JqZWN0JyBpbnN0ZWFkIG9mICdmdW5jdGlvbicgbGlrZSBleHBlY3RlZCwgYXQgbGVhc3Qgd2hlbiBsb2FkaW5nIHRoZSBwbGF5ZXIgaW1tZWRpYXRlbHkuXG4gICAgICBpZiAodmlkICYmIHZpZC5nZXRBdHRyaWJ1dGUpIHtcblxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhpcyBwbGF5ZXIgaGFzbid0IGFscmVhZHkgYmVlbiBzZXQgdXAuXG4gICAgICAgIGlmICh2aWRbJ3BsYXllciddID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBvcHRpb25zID0gdmlkLmdldEF0dHJpYnV0ZSgnZGF0YS1zZXR1cCcpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgZGF0YS1zZXR1cCBhdHRyIGV4aXN0cy5cbiAgICAgICAgICAvLyBXZSBvbmx5IGF1dG8tc2V0dXAgaWYgdGhleSd2ZSBhZGRlZCB0aGUgZGF0YS1zZXR1cCBhdHRyLlxuICAgICAgICAgIGlmIChvcHRpb25zICE9PSBudWxsKSB7XG5cbiAgICAgICAgICAgIC8vIFBhcnNlIG9wdGlvbnMgSlNPTlxuICAgICAgICAgICAgLy8gSWYgZW1wdHkgc3RyaW5nLCBtYWtlIGl0IGEgcGFyc2FibGUganNvbiBvYmplY3QuXG4gICAgICAgICAgICBvcHRpb25zID0gdmpzLkpTT04ucGFyc2Uob3B0aW9ucyB8fCAne30nKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIG5ldyB2aWRlby5qcyBpbnN0YW5jZS5cbiAgICAgICAgICAgIHBsYXllciA9IHZpZGVvanModmlkLCBvcHRpb25zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgLy8gSWYgZ2V0QXR0cmlidXRlIGlzbid0IGRlZmluZWQsIHdlIG5lZWQgdG8gd2FpdCBmb3IgdGhlIERPTS5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZqcy5hdXRvU2V0dXBUaW1lb3V0KDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgLy8gTm8gdmlkZW9zIHdlcmUgZm91bmQsIHNvIGtlZXAgbG9vcGluZyB1bmxlc3MgcGFnZSBpcyBmaW5pc2hlZCBsb2FkaW5nLlxuICB9IGVsc2UgaWYgKCF2anMud2luZG93TG9hZGVkKSB7XG4gICAgdmpzLmF1dG9TZXR1cFRpbWVvdXQoMSk7XG4gIH1cbn07XG5cbi8vIFBhdXNlIHRvIGxldCB0aGUgRE9NIGtlZXAgcHJvY2Vzc2luZ1xudmpzLmF1dG9TZXR1cFRpbWVvdXQgPSBmdW5jdGlvbih3YWl0KXtcbiAgc2V0VGltZW91dCh2anMuYXV0b1NldHVwLCB3YWl0KTtcbn07XG5cbmlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnY29tcGxldGUnKSB7XG4gIHZqcy53aW5kb3dMb2FkZWQgPSB0cnVlO1xufSBlbHNlIHtcbiAgdmpzLm9uZSh3aW5kb3csICdsb2FkJywgZnVuY3Rpb24oKXtcbiAgICB2anMud2luZG93TG9hZGVkID0gdHJ1ZTtcbiAgfSk7XG59XG5cbi8vIFJ1biBBdXRvLWxvYWQgcGxheWVyc1xuLy8gWW91IGhhdmUgdG8gd2FpdCBhdCBsZWFzdCBvbmNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIGFmdGVyIHlvdXIgdmlkZW8gaW4gdGhlIERPTSAod2VpcmQgYmVoYXZpb3Igb25seSB3aXRoIG1pbmlmaWVkIHZlcnNpb24pXG52anMuYXV0b1NldHVwVGltZW91dCgxKTtcbi8qKlxuICogdGhlIG1ldGhvZCBmb3IgcmVnaXN0ZXJpbmcgYSB2aWRlby5qcyBwbHVnaW5cbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWUgVGhlIG5hbWUgb2YgdGhlIHBsdWdpblxuICogQHBhcmFtICB7RnVuY3Rpb259IGluaXQgVGhlIGZ1bmN0aW9uIHRoYXQgaXMgcnVuIHdoZW4gdGhlIHBsYXllciBpbml0c1xuICovXG52anMucGx1Z2luID0gZnVuY3Rpb24obmFtZSwgaW5pdCl7XG4gIHZqcy5QbGF5ZXIucHJvdG90eXBlW25hbWVdID0gaW5pdDtcbn07XG4iLCJqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCQpIHtcblxuICAgIHZhciB0aW1lbGFwc2VNb250aFByZXZpb3VzO1xuICAgIHZhciB0aW1lbGFwc2VNb250aE5leHQ7XG4gICAgdmFyIHRpbWVsYXBzZVllYXJQcmV2aW91cztcbiAgICB2YXIgdGltZWxhcHNlWWVhck5leHQ7XG4gICAgdmFyIHJpZ2h0bm93ID0gbW9tZW50KCk7XG5cbiAgICAvLyBUaW1lbGFwc2UgdmlkZW8gQ2FsZW5kYXJcbiAgICBmdW5jdGlvbiBnZXRDYWxlbmRhcih5ZWFyLCBtb250aCkge1xuICAgICAgICAkKCcjdGltZWxhcHNlLWNhbGVuZGFyJykuaGlkZSgpO1xuICAgICAgICAkKCcjdGltZWxhcHNlLWxvYWRlcicpLnNob3coKTtcblxuICAgICAgICAkLnBvc3QoJy9hcGkvZ2V0LXRpbWVsYXBzZS1jYWxlbmRhci1kYXRlcycsIHt5ZWFyOiB5ZWFyLCBtb250aDogbW9udGh9LCBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkKCcjdGltZWxhcHNlLWxvYWRlcicpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtY2FsZW5kYXInKS5odG1sKGRhdGEuZGF0YSkuZmFkZUluKDI1MCk7XG5cbiAgICAgICAgICAgIC8vIFZpZGVvIHBsYXllclxuICAgICAgICAgICAgJCgnLnRpbWVsYXBzZS1zdGFydC12aWRlbycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmF0dHIoJ3JlbCcpO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gJ2h0dHA6Ly92aWRlby5yZXZ5d2VhdGhlci5jb20vJztcbiAgICAgICAgICAgICAgICB2YXIgdmlkZW9QbGF5ZXIgPSB2aWRlb2pzKCd0aW1lbGFwc2UtdmlkZW8nKTtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZXMgPSB0YXJnZXQuc3BsaXQoJy8nKTtcblxuICAgICAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtdmlkZW8tdGl0bGUnKS5odG1sKGRhdGVzWzFdICsgJyAnICsgZGF0ZXNbMl0gKyAnLCAnICsgZGF0ZXNbMF0pO1xuXG4gICAgICAgICAgICAgICAgdmlkZW9QbGF5ZXIucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lbGFwc2VQbGF5ZXIgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgICAgIHRpbWVsYXBzZVBsYXllci5wYXVzZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCd2aWRlbycpLmF0dHIoJ3NyYycsIHBhdGggKyB0YXJnZXQgKyAnLm1wNCcpO1xuICAgICAgICAgICAgICAgICAgICAkKCd2aWRlbyBzb3VyY2U6bnRoLWNoaWxkKDEpJykuYXR0cignc3JjJywgcGF0aCArIHRhcmdldCArICcubXA0Jyk7XG4gICAgICAgICAgICAgICAgICAgICQoJ3ZpZGVvIHNvdXJjZTpudGgtY2hpbGQoMiknKS5hdHRyKCdzcmMnLCBwYXRoICsgdGFyZ2V0ICsgJy53ZWJtJyk7XG4gICAgICAgICAgICAgICAgICAgICQoJy52anMtYmlnLXBsYXktYnV0dG9uJykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGltZWxhcHNlLXZpZGVvJykucmVtb3ZlQ2xhc3MoJ3Zqcy1wbGF5aW5nJykuYWRkQ2xhc3MoJ3Zqcy1wYXVzZScpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lbGFwc2VQbGF5ZXIubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdGltZWxhcHNlLXZpZGVvX2h0bWw1X2FwaScpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgdGltZWxhcHNlUGxheWVyLm9uKCdwbGF5JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudmpzLWJpZy1wbGF5LWJ1dHRvbicpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGltZWxhcHNlWWVhclByZXZpb3VzID0gcGFyc2VJbnQoeWVhciwgMTApO1xuICAgICAgICB0aW1lbGFwc2VZZWFyTmV4dCA9IHBhcnNlSW50KHllYXIsIDEwKTtcblxuICAgICAgICAvLyBzZXQgdmFsdWVzIG9uIGJ1dHRvbnNcbiAgICAgICAgaWYgKHBhcnNlSW50KG1vbnRoLCAxMCkgLSAxID09IDApIHtcbiAgICAgICAgICAgIHRpbWVsYXBzZU1vbnRoUHJldmlvdXMgPSAxMjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpbWVsYXBzZU1vbnRoUHJldmlvdXMgPSBwYXJzZUludChtb250aCwgMTApIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJzZUludChtb250aCwgMTApICsgMSA9PSAxMykge1xuICAgICAgICAgICAgdGltZWxhcHNlTW9udGhOZXh0ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRpbWVsYXBzZU1vbnRoTmV4dCA9IHBhcnNlSW50KG1vbnRoLCAxMCkgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBhcnNlSW50KG1vbnRoLCAxMCkgPT0gMSkge1xuICAgICAgICAgICAgdGltZWxhcHNlWWVhclByZXZpb3VzID0gcGFyc2VJbnQoeWVhciwgMTApIC0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJzZUludChtb250aCwgMTApID09IDEyKSB7XG4gICAgICAgICAgICB0aW1lbGFwc2VZZWFyTmV4dCA9IHBhcnNlSW50KHllYXIsIDEwKSArIDE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzZXQgdGhlIGJ1dHRvbiB2YWx1ZXNcbiAgICAgICAgJCgnI3RpbWVsYXBzZS1wcmV2aW91cycpLnZhbCh0aW1lbGFwc2VNb250aFByZXZpb3VzKTtcbiAgICAgICAgJCgnI3RpbWVsYXBzZS1uZXh0JykudmFsKHRpbWVsYXBzZU1vbnRoTmV4dCk7XG4gICAgICAgICQoJyN0aW1lbGFwc2UteWVhci1wcmV2aW91cycpLnZhbCh0aW1lbGFwc2VZZWFyUHJldmlvdXMpO1xuICAgICAgICAkKCcjdGltZWxhcHNlLXllYXItbmV4dCcpLnZhbCh0aW1lbGFwc2VZZWFyTmV4dCk7XG5cbiAgICAgICAgLy8gc2V0IGRhdGUgcmFuZ2VcbiAgICAgICAgaWYgKG1vbnRoID09IHJpZ2h0bm93LmZvcm1hdCgnTScpICYmIHBhcnNlSW50KHllYXIsIDEwKSA9PSAyMDE0KSB7XG4gICAgICAgICAgICAkKCcjdGltZWxhcHNlLW5leHQnKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQoJyN0aW1lbGFwc2UtbmV4dCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbm8gdmlkZW9zIGJlZm9yZSBBdWd1c3QgMjAxM1xuICAgICAgICBpZiAocGFyc2VJbnQobW9udGgsIDEwKSA9PSA4ICYmIHBhcnNlSW50KHllYXIsIDEwKSA9PSAyMDEzKSB7XG4gICAgICAgICAgICAkKCcjdGltZWxhcHNlLXByZXZpb3VzJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcjdGltZWxhcHNlLXByZXZpb3VzJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgIH1cblxuXG4gICAgZ2V0Q2FsZW5kYXIocGFyc2VJbnQocmlnaHRub3cuZm9ybWF0KCdZWVlZJyksIDEwKSwgcGFyc2VJbnQocmlnaHRub3cuZm9ybWF0KCdNTScpLCAxMCkpO1xuXG4gICAgLy8gbGlzdGVuIHRvIG1vbnRocyBidXR0b25zXG4gICAgJCgnI3RpbWVsYXBzZS1wcmV2aW91cycpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBnZXRDYWxlbmRhcigkKCcjdGltZWxhcHNlLXllYXItcHJldmlvdXMnKS52YWwoKSwgJCgnI3RpbWVsYXBzZS1wcmV2aW91cycpLnZhbCgpKTtcbiAgICB9KTtcblxuICAgICQoJyN0aW1lbGFwc2UtbmV4dCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBnZXRDYWxlbmRhcigkKCcjdGltZWxhcHNlLXllYXItbmV4dCcpLnZhbCgpLCAkKCcjdGltZWxhcHNlLW5leHQnKS52YWwoKSk7XG4gICAgfSk7XG59KTsiLCIkKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIGNoYXJ0O1xuXG4gICAgSGlnaGNoYXJ0cy5zZXRPcHRpb25zKHtcbiAgICAgICAgZ2xvYmFsOiB7XG4gICAgICAgICAgICB1c2VVVEM6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICgkKCcjaGlzdG9yeS1jaGFydCcpLmxlbmd0aCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGNoYXJ0OiB7XG4gICAgICAgICAgICAgICAgcmVuZGVyVG86ICAgICAgICAgICAnaGlzdG9yeS1jaGFydCcsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAgICAnI2VlZWVlZScsXG4gICAgICAgICAgICAgICAgem9vbVR5cGU6ICAgICAgICAgICAneCdcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgdGV4dDogICAgICAgICAgICAgICAnQ291cnRob3VzZSBXZWF0aGVyIEhpc3RvcnknXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICB4QXhpczoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICAgICAgICAgICAgICAgJ2RhdGV0aW1lJyxcbiAgICAgICAgICAgICAgICBkYXRlVGltZUxhYmVsRm9ybWF0OiB7IGhvdXI6ICclbSAlZCAlSDolTSd9LFxuICAgICAgICAgICAgICAgIHRpY2tQaXhlbEludGVydmFsOiAgMTUwLFxuICAgICAgICAgICAgICAgIG1pblJhbmdlOiAgICAgICAgICAgMVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgeUF4aXM6IFt7XG4gICAgICAgICAgICAgICAgZ3JpZExpbmVXaWR0aDogMSxcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnI0IyNjk2OSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAne3ZhbHVlfSDCsEMnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB0aXRsZToge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnQWlyIFRlbXAnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjQjI2OTY5J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGdyaWRMaW5lV2lkdGg6IDAsXG4gICAgICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyMzQjU0RkYnXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogJ3t2YWx1ZX0ga1BhJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ0Jhcm9tZXRlcicsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyMzQjU0RkYnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wcG9zaXRlOiBmYWxzZVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGdyaWRMaW5lV2lkdGg6IDAsXG4gICAgICAgICAgICAgICAgbGFiZWxzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM4OEU4QTknXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGZvcm1hdDogJ3t2YWx1ZX0gJSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdSZWxhdGl2ZSBIdW1pZGl0eScsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM4OEU4QTknXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9wcG9zaXRlOiB0cnVlXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgZ3JpZExpbmVXaWR0aDogMCxcbiAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAnIzk5OTk5OSdcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiAne3ZhbHVlfSBrbS9oJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdGl0bGU6IHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1dpbmQgU3BlZWQnLFxuICAgICAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICcjOTk5OTk5J1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvcHBvc2l0ZTogdHJ1ZVxuICAgICAgICAgICAgfV0sXG5cbiAgICAgICAgICAgIGxlZ2VuZDoge1xuICAgICAgICAgICAgICAgIGxheW91dDogICAgICAgICAgICAgJ3ZlcnRpY2FsJyxcbiAgICAgICAgICAgICAgICBhbGlnbjogICAgICAgICAgICAgICdsZWZ0JyxcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiAgICAgICd0b3AnLFxuICAgICAgICAgICAgICAgIHg6ICAgICAgICAgICAgICAgICAgMTgwLFxuICAgICAgICAgICAgICAgIHk6ICAgICAgICAgICAgICAgICAgMixcbiAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogICAgICAgIDEsXG4gICAgICAgICAgICAgICAgZmxvYXRpbmc6ICAgICAgICAgICB0cnVlLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogICAgJyNFNkU2RTYnLFxuICAgICAgICAgICAgICAgIGJvcmRlckNvbG9yOiAgICAgICAgJyNEREREREQnLFxuICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogICAgICAgMFxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgY3JlZGl0czoge1xuICAgICAgICAgICAgICAgIGhyZWY6ICAgJycsXG4gICAgICAgICAgICAgICAgdGV4dDogICAnJ1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgcGxvdE9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICBjb2x1bW46IHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRQYWRkaW5nOiAwLjIsXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiAwXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgc2VyaWVzOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIGdldCB0aGUgbGFzdCB3ZWVrIGRhdGFcbiAgICAgICAgdmFyIGxhc3RXZWVrID0gbW9tZW50KCkuc3VidHJhY3QoNiwgJ2RheXMnKTtcbiAgICAgICAgdmFyIHJpZ2h0Tm93ID0gbW9tZW50KCk7XG5cbiAgICAgICAgLy8gaW5pdGlhbCBsb2FkIG9mIGRhdGEgZm9yIGhpZ2ggY2hhcnRzXG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvYXBpL2hpc3RvcnkvJyArIGxhc3RXZWVrLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpICsgJy8nICsgcmlnaHROb3cuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgdHlwZTogJ0dFVCdcbiAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBvcHRpb25zLnNlcmllcyA9IGRhdGE7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSBuZXcgSGlnaGNoYXJ0cy5DaGFydChvcHRpb25zKTtcbiAgICAgICAgfSk7XG5cblxuXG4gICAgICAgIC8vIHNldHVwIHRoZSBkYXRlIHBpY2tlclxuICAgICAgICAkKCcjaGlzdG9yeS1kYXRlcycpLmRhdGVyYW5nZXBpY2tlcih7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnWVlZWS1NTS1ERCcsXG4gICAgICAgICAgICAgICAgbWluRGF0ZTogJzIwMTMtMDgtMjUgMDI6MDA6MDAnLFxuICAgICAgICAgICAgICAgIG1heERhdGU6IG1vbWVudCgpLFxuICAgICAgICAgICAgICAgIHRpbWVQaWNrZXI6IHRydWUsXG4gICAgICAgICAgICAgICAgcmFuZ2VzOiB7XG4gICAgICAgICAgICAgICAgICAgICdMYXN0IDI0IGhvdXJzOic6IFttb21lbnQoKS5zdWJ0cmFjdCgxLCAnZGF5cycpLCBtb21lbnQoKV0sXG4gICAgICAgICAgICAgICAgICAgICdMYXN0IDcgZGF5czonOiBbbW9tZW50KCkuc3VidHJhY3QoNiwgJ2RheXMnKSwgbW9tZW50KCldLFxuICAgICAgICAgICAgICAgICAgICAnTGFzdCAzMCBkYXlzOic6IFttb21lbnQoKS5zdWJ0cmFjdCgyOSwgJ2RheXMnKSwgbW9tZW50KCldXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6ICcyMDEzLTA4LTI1IDAxOjAwOjAwJyxcbiAgICAgICAgICAgICAgICBlbmREYXRlOiBtb21lbnQoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHN0YXJ0LmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpICsgJyB0byAnICsgZW5kLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpKTtcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvYXBpL2hpc3RvcnkvJyArIHN0YXJ0LmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpICsgJy8nICsgZW5kLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJ1xuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNlcmllcyA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGFydCA9IG5ldyBIaWdoY2hhcnRzLkNoYXJ0KG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICk7XG4gICAgfVxuXG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=